[{"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6417", "id": 1679377917, "node_id": "I_kwDODMjICc5kGUX9", "number": 6417, "title": "Auto3dseg integration", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/93", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93/labels", "id": 8867338, "node_id": "MI_kwDODMjICc4Ah04K", "number": 93, "title": "Auto3DSeg enhancement [P0 v1.2]", "description": "PIC: Dong/Andriy/Mingxin\r\nhttps://docs.google.com/spreadsheets/d/1ucAuOw_tkwhQoUaBLmSSB88YUtR3109FX6hXFI-3GSY/edit#gid=0", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 9, "closed_issues": 47, "state": "open", "created_at": "2023-01-17T16:54:19Z", "updated_at": "2023-04-27T10:17:24Z", "due_on": "2023-04-06T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2023-04-22T06:53:18Z", "updated_at": "2023-04-23T20:17:46Z", "closed_at": "2023-04-23T20:17:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n\r\npredictions\r\n[2023-04-22T04:14:14.404Z] 2023-04-22 04:14:13,627 - INFO - Directory /tmp/tmp8m_dx6rq/work_dir/ensemble_output is created to save ensemble predictions\r\n[2023-04-22T04:14:14.404Z] Traceback (most recent call last):\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n[2023-04-22T04:14:14.404Z]     return _run_code(code, main_globals, None,\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/runpy.py\", line 87, in _run_code\r\n[2023-04-22T04:14:14.404Z]     exec(code, run_globals)\r\n[2023-04-22T04:14:14.404Z]   File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/apps/auto3dseg/__main__.py\", line 24, in <module>\r\n[2023-04-22T04:14:14.404Z]     fire.Fire(\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n[2023-04-22T04:14:14.404Z]     component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n[2023-04-22T04:14:14.404Z]     component, remaining_args = _CallAndUpdateTrace(\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n[2023-04-22T04:14:14.404Z]     component = fn(*varargs, **kwargs)\r\n[2023-04-22T04:14:14.404Z]   File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/apps/auto3dseg/ensemble_builder.py\", line 478, in ensemble\r\n[2023-04-22T04:14:14.404Z]     self.set_image_save_transform(**self.kwargs)\r\n[2023-04-22T04:14:14.404Z]   File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/apps/auto3dseg/ensemble_builder.py\", line 438, in set_image_save_transform\r\n[2023-04-22T04:14:14.404Z]     os.makedirs(output_dir)\r\n[2023-04-22T04:14:14.404Z]   File \"/opt/conda/lib/python3.8/os.py\", line 223, in makedirs\r\n[2023-04-22T04:14:14.404Z]     mkdir(name, mode)\r\n[2023-04-22T04:14:14.404Z] FileExistsError: [Errno 17] File exists: '/tmp/tmp8m_dx6rq/work_dir/ensemble_output'\r\n[2023-04-22T04:14:14.404Z] 2023-04-22 04:14:13,682 - INFO - Auto3Dseg picked the following networks to ensemble:\r\n[2023-04-22T04:14:14.404Z] 2023-04-22 04:14:13,682 - INFO - segresnet2d_0\r\n[2023-04-22T04:14:14.404Z] 2023-04-22 04:14:13,682 - INFO - Auto3Dseg ensemble prediction outputs will be saved in /tmp/tmp8m_dx6rq/work_dir/ensemble_output.\r\n[2023-04-22T04:14:14.404Z] \r\nEnsembling (rank 0)...:   0%|          | 0/1 [00:00<?, ?it/s]monai.transforms.io.dictionary LoadImaged.__init__:image_only: Current default value of argument `image_only=False` has been deprecated since version 1.1. It will be changed to `image_only=True` in version 1.3.\r\n[2023-04-22T04:14:14.659Z] [info] checkpoint /tmp/tmp8m_dx6rq/work_dir/segresnet2d_0/model_fold0/best_metric_model.pt loaded\r\n[2023-04-22T04:14:15.589Z] 2023-04-22 04:14:15,372 INFO image_writer.py:197 - writing: /tmp/tmp8m_dx6rq/work_dir/segresnet2d_0/prediction_testing/val_001.fake/val_001.fake_seg.nii.gz\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6417/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6404", "id": 1676658610, "node_id": "I_kwDODMjICc5j78ey", "number": 6404, "title": "inverse lazily applied cropforeground with k_divisible>1", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-20T12:49:43Z", "updated_at": "2023-04-20T22:01:34Z", "closed_at": "2023-04-20T22:01:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\nimport torch\r\nimport monai.transforms as t\r\nfrom monai.transforms.lazy.functional import apply_transforms\r\n\r\nimg = torch.tensor([[[0, 0, 0, 0, 0], [0, 1, 2, 1, 0], [0, 2, 3, 2, 0], [0, 1, 2, 1, 0], [0, 0, 0, 0, 0]]])\r\n\r\nkwargs = {\"select_fn\": lambda x: x > 0, \"channel_indices\": None, \"margin\": 0, \"k_divisible\": 10}\r\nxform = t.CropForeground(**kwargs)\r\nxform.lazy_evaluation = True\r\npending_result = xform(img)\r\nresult = apply_transforms(pending_result, mode=\"nearest\")[0]\r\nprint(xform.inverse(result))\r\n\r\n```\r\n\r\nerror:\r\n```\r\nmonai/transforms/inverse.py\", line 258, in check_transforms_match\r\n    raise RuntimeError(\r\nRuntimeError: Error CropForeground getting the most recently applied invertible transform Pad 140360605105696 != 140360605208640.\r\n```\r\n\r\n\r\ncc @KumoLiu ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6392", "id": 1673462294, "node_id": "I_kwDODMjICc5jvwIW", "number": 6392, "title": "test_retinanet test_onnx_6", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-18T16:21:43Z", "updated_at": "2023-04-18T21:47:29Z", "closed_at": "2023-04-18T21:47:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nFAIL: test_onnx_6 (tests.test_retinanet.TestRetinaNet)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 620, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs, **kw)\r\n  File \"/__w/MONAI/MONAI/tests/test_retinanet.py\", line 186, in test_onnx\r\n    test_onnx_save(backbone, data, rtol=1e-3, atol=0.1)\r\n  File \"/__w/MONAI/MONAI/tests/utils.py\", line 759, in test_onnx_save\r\n    convert_to_onnx(\r\n  File \"/__w/MONAI/MONAI/monai/networks/utils.py\", line 675, in convert_to_onnx\r\n    torch.testing.assert_allclose(r1.cpu(), r2, rtol=rtol, atol=atol)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/_comparison.py\", line 1553, in assert_allclose\r\n    torch.testing.assert_close(\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/_comparison.py\", line 1511, in assert_close\r\n    raise error_metas[0].to_error(msg)\r\nAssertionError: Tensor-likes are not close!\r\n\r\nMismatched elements: 1 / 9 (11.1%)\r\nGreatest absolute difference: 29.5 at index (1, 2) (up to 0.1 allowed)\r\nGreatest relative difference: 0.0011425915525688944 at index (1, 2) (up to 0.001 allowed)\r\n\r\n----------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6392/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6391", "id": 1673461408, "node_id": "I_kwDODMjICc5jvv6g", "number": 6391, "title": " torch 1.12.1 test_auto3dseg_ensemble", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-18T16:21:08Z", "updated_at": "2023-04-18T18:12:11Z", "closed_at": "2023-04-18T18:12:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n[2023-04-18T16:01:00.704Z] 2023-04-18 16:01:00,505 - INFO - The keys num_warmup_epochs cannot be found in the /tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters.yaml for training. Skipped overriding key num_warmup_epochs.\r\n[2023-04-18T16:01:00.704Z] 2023-04-18 16:01:00,505 - INFO - The keys use_pretrain cannot be found in the /tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters.yaml for training. Skipped overriding key use_pretrain.\r\n[2023-04-18T16:01:00.704Z] 2023-04-18 16:01:00,505 - INFO - The keys pretrained_path cannot be found in the /tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters.yaml for training. Skipped overriding key pretrained_path.\r\n[2023-04-18T16:01:00.704Z] 2023-04-18 16:01:00,505 - INFO - The keys determ cannot be found in the /tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters.yaml for training. Skipped overriding key determ.\r\n[2023-04-18T16:01:00.704Z] 2023-04-18 16:01:00,505 - INFO - Launching: OMP_NUM_THREADS=1 python /tmp/tmpqmv9202q/workdir/dints_0/scripts/train.py run --config_file='/tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/hyper_parameters_search.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/network.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/network_search.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/transforms_infer.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/transforms_train.yaml','/tmp/tmpqmv9202q/workdir/dints_0/configs/transforms_validate.yaml' --training#num_images_per_batch=2 --training#num_epochs=2 --training#num_epochs_per_validation=1\r\n[2023-04-18T16:01:08.782Z] Traceback (most recent call last):\r\n[2023-04-18T16:01:08.783Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/bundle/config_item.py\", line 292, in instantiate\r\n[2023-04-18T16:01:08.783Z]     return instantiate(modname, mode, **args)\r\n[2023-04-18T16:01:08.783Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/utils/module.py\", line 247, in instantiate\r\n[2023-04-18T16:01:08.783Z]     raise ModuleNotFoundError(f\"Cannot locate class or function path: '{__path}'.\")\r\n[2023-04-18T16:01:08.783Z] ModuleNotFoundError: Cannot locate class or function path: 'torch.optim.lr_scheduler.PolynomialLR'.\r\n[2023-04-18T16:01:08.783Z] \r\n[2023-04-18T16:01:08.783Z] The above exception was the direct cause of the following exception:\r\n[2023-04-18T16:01:08.783Z] \r\n[2023-04-18T16:01:08.783Z] Traceback (most recent call last):\r\n[2023-04-18T16:01:08.783Z]   File \"/tmp/tmpqmv9202q/workdir/dints_0/scripts/train.py\", line 685, in <module>\r\n[2023-04-18T16:01:08.783Z]     fire.Fire()\r\n[2023-04-18T16:01:08.783Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n[2023-04-18T16:01:08.783Z]     component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n[2023-04-18T16:01:08.783Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n[2023-04-18T16:01:08.783Z]     component, remaining_args = _CallAndUpdateTrace(\r\n[2023-04-18T16:01:08.783Z]   File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n[2023-04-18T16:01:08.783Z]     component = fn(*varargs, **kwargs)\r\n[2023-04-18T16:01:08.783Z]   File \"/tmp/tmpqmv9202q/workdir/dints_0/scripts/train.py\", line 326, in run\r\n[2023-04-18T16:01:08.783Z]     lr_scheduler = lr_scheduler_part.instantiate(optimizer=optimizer)\r\n[2023-04-18T16:01:08.783Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/bundle/config_item.py\", line 294, in instantiate\r\n[2023-04-18T16:01:08.783Z]     raise RuntimeError(f\"Failed to instantiate {self}.\") from e\r\n[2023-04-18T16:01:08.783Z] RuntimeError: Failed to instantiate {'_target_': 'torch.optim.lr_scheduler.PolynomialLR', 'optimizer': {'_target_': 'torch.optim.SGD', 'lr': 0.2, 'momentum': 0.9, 'weight_decay': 4e-05}, 'power': 0.5, 'total_iters': 3}.\r\n[2023-04-18T16:01:09.039Z] \r\n[2023-04-18T16:01:09.040Z] E2023-04-18 16:01:08,818 - INFO - Directory /tmp/tmpb6i4hml3/workdir is created to save ensemble predictions\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6390", "id": 1673459198, "node_id": "I_kwDODMjICc5jvvX-", "number": 6390, "title": "test_auto3dseg_ensemble torch 1.9.1", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-18T16:19:42Z", "updated_at": "2023-04-18T21:47:29Z", "closed_at": "2023-04-18T21:47:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n[2023-04-18T16:07:21.134Z] ======================================================================\r\n[2023-04-18T16:07:21.134Z] ERROR: test_get_history (tests.test_auto3dseg_hpo.TestHPO)\r\n[2023-04-18T16:07:21.134Z] ----------------------------------------------------------------------\r\n[2023-04-18T16:07:21.134Z] Traceback (most recent call last):\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_auto3dseg_hpo.py\", line 134, in setUp\r\n[2023-04-18T16:07:21.134Z]     bundle_generator.generate(work_dir, num_fold=1)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 569, in generate\r\n[2023-04-18T16:07:21.134Z]     gen_algo.export_to_disk(output_folder, name, fold=f_id)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 160, in export_to_disk\r\n[2023-04-18T16:07:21.134Z]     self.fill_records = self.fill_template_config(self.data_stats_files, self.output_path, **kwargs)\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 119, in fill_template_config\r\n[2023-04-18T16:07:21.134Z]     mem = get_mem_from_visible_gpus()\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 31, in get_mem_from_visible_gpus\r\n[2023-04-18T16:07:21.134Z]     available_mem_visible_gpus.append(torch.cuda.mem_get_info(device=d)[0])\r\n[2023-04-18T16:07:21.134Z] AttributeError: module 'torch.cuda' has no attribute 'mem_get_info'\r\n[2023-04-18T16:07:21.134Z] \r\n[2023-04-18T16:07:21.134Z] ======================================================================\r\n[2023-04-18T16:07:21.134Z] ERROR: test_run_algo (tests.test_auto3dseg_hpo.TestHPO)\r\n[2023-04-18T16:07:21.134Z] ----------------------------------------------------------------------\r\n[2023-04-18T16:07:21.134Z] Traceback (most recent call last):\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_auto3dseg_hpo.py\", line 134, in setUp\r\n[2023-04-18T16:07:21.134Z]     bundle_generator.generate(work_dir, num_fold=1)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 569, in generate\r\n[2023-04-18T16:07:21.134Z]     gen_algo.export_to_disk(output_folder, name, fold=f_id)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 160, in export_to_disk\r\n[2023-04-18T16:07:21.134Z]     self.fill_records = self.fill_template_config(self.data_stats_files, self.output_path, **kwargs)\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 119, in fill_template_config\r\n[2023-04-18T16:07:21.134Z]     mem = get_mem_from_visible_gpus()\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 31, in get_mem_from_visible_gpus\r\n[2023-04-18T16:07:21.134Z]     available_mem_visible_gpus.append(torch.cuda.mem_get_info(device=d)[0])\r\n[2023-04-18T16:07:21.134Z] AttributeError: module 'torch.cuda' has no attribute 'mem_get_info'\r\n[2023-04-18T16:07:21.134Z] \r\n[2023-04-18T16:07:21.134Z] ======================================================================\r\n[2023-04-18T16:07:21.134Z] ERROR: test_run_optuna (tests.test_auto3dseg_hpo.TestHPO)\r\n[2023-04-18T16:07:21.134Z] ----------------------------------------------------------------------\r\n[2023-04-18T16:07:21.134Z] Traceback (most recent call last):\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_auto3dseg_hpo.py\", line 134, in setUp\r\n[2023-04-18T16:07:21.134Z]     bundle_generator.generate(work_dir, num_fold=1)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 569, in generate\r\n[2023-04-18T16:07:21.134Z]     gen_algo.export_to_disk(output_folder, name, fold=f_id)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 160, in export_to_disk\r\n[2023-04-18T16:07:21.134Z]     self.fill_records = self.fill_template_config(self.data_stats_files, self.output_path, **kwargs)\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 119, in fill_template_config\r\n[2023-04-18T16:07:21.134Z]     mem = get_mem_from_visible_gpus()\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 31, in get_mem_from_visible_gpus\r\n[2023-04-18T16:07:21.134Z]     available_mem_visible_gpus.append(torch.cuda.mem_get_info(device=d)[0])\r\n[2023-04-18T16:07:21.134Z] AttributeError: module 'torch.cuda' has no attribute 'mem_get_info'\r\n[2023-04-18T16:07:21.134Z] \r\n[2023-04-18T16:07:21.134Z] ======================================================================\r\n[2023-04-18T16:07:21.134Z] ERROR: test_ensemble (tests.test_auto3dseg_ensemble.TestEnsembleBuilder)\r\n[2023-04-18T16:07:21.134Z] ----------------------------------------------------------------------\r\n[2023-04-18T16:07:21.134Z] Traceback (most recent call last):\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_auto3dseg_ensemble.py\", line 140, in test_ensemble\r\n[2023-04-18T16:07:21.134Z]     bundle_generator.generate(work_dir, num_fold=1)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 569, in generate\r\n[2023-04-18T16:07:21.134Z]     gen_algo.export_to_disk(output_folder, name, fold=f_id)\r\n[2023-04-18T16:07:21.134Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/auto3dseg/bundle_gen.py\", line 160, in export_to_disk\r\n[2023-04-18T16:07:21.134Z]     self.fill_records = self.fill_template_config(self.data_stats_files, self.output_path, **kwargs)\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 119, in fill_template_config\r\n[2023-04-18T16:07:21.134Z]     mem = get_mem_from_visible_gpus()\r\n[2023-04-18T16:07:21.134Z]   File \"/tmp/tmp7sdlj1x3/workdir/algorithm_templates/dints/scripts/algo.py\", line 31, in get_mem_from_visible_gpus\r\n[2023-04-18T16:07:21.134Z]     available_mem_visible_gpus.append(torch.cuda.mem_get_info(device=d)[0])\r\n[2023-04-18T16:07:21.134Z] AttributeError: module 'torch.cuda' has no attribute 'mem_get_info'\r\n[2023-04-18T16:07:21.134Z] \r\n[2023-04-18T16:07:21.134Z] ----------------------------------------------------------------------\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6369", "id": 1669046288, "node_id": "I_kwDODMjICc5je6AQ", "number": 6369, "title": "TestEnsembleBuilder fails: No such file or directory: 'OMP_NUM_THREADS=1'", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/93", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93/labels", "id": 8867338, "node_id": "MI_kwDODMjICc4Ah04K", "number": 93, "title": "Auto3DSeg enhancement [P0 v1.2]", "description": "PIC: Dong/Andriy/Mingxin\r\nhttps://docs.google.com/spreadsheets/d/1ucAuOw_tkwhQoUaBLmSSB88YUtR3109FX6hXFI-3GSY/edit#gid=0", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 9, "closed_issues": 47, "state": "open", "created_at": "2023-01-17T16:54:19Z", "updated_at": "2023-04-27T10:17:24Z", "due_on": "2023-04-06T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2023-04-14T23:23:47Z", "updated_at": "2023-04-17T09:51:17Z", "closed_at": "2023-04-17T09:51:17Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Bug started after this PR https://github.com/Project-MONAI/MONAI/pull/6272\r\n\r\nensemble test doesn't pass https://github.com/Project-MONAI/MONAI/actions/runs/4703341444/jobs/8341714243\r\n\r\nlooks like something has changed the way command line is formed for training, @heyufan1995 please take a look\r\n\r\n\r\nERROR: test_ensemble (tests.test_auto3dseg_ensemble.TestEnsembleBuilder)\r\n\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/tests/test_auto3dseg_ensemble.py\", line 152, in test_ensemble\r\n    algo.train(_train_param)\r\n  File \"/tmp/tmpoe7q1vri/workdir/algorithm_templates/dints/scripts/algo.py\", line 470, in train\r\n  File \"/__w/MONAI/MONAI/monai/apps/auto3dseg/bundle_gen.py\", line 238, in _run_cmd\r\n    normal_out = subprocess.run(cmd.split(), env=ps_environ, check=True)\r\n  File \"/opt/conda/lib/python3.8/subprocess.py\", line 493, in run\r\n    with Popen(*popenargs, **kwargs) as process:\r\n  File \"/opt/conda/lib/python3.8/subprocess.py\", line 858, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/opt/conda/lib/python3.8/subprocess.py\", line 1704, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'OMP_NUM_THREADS=1'\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6365", "id": 1668639903, "node_id": "I_kwDODMjICc5jdWyf", "number": 6365, "title": "ensemble_pred devices", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-04-14T17:19:00Z", "updated_at": "2023-04-14T18:21:29Z", "closed_at": "2023-04-14T18:21:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nhttps://github.com/Project-MONAI/MONAI/blob/825b8db9b20e0a85b2df327e3f4f23379fef7b2e/monai/apps/auto3dseg/ensemble_builder.py#L103-L110\r\n\r\nelements in the `preds` might be on different devices (cpu/gpu), this may cause issues when computing the ensemble output. would be great the make them colocated on the same device.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6365/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6361", "id": 1667498629, "node_id": "I_kwDODMjICc5jZAKF", "number": 6361, "title": "Auto3DSeg ensemble needs to take images from different devices", "user": {"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-14T04:42:26Z", "updated_at": "2023-04-19T05:57:56Z", "closed_at": "2023-04-19T05:57:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nReferece link:\r\nhttps://github.com/Project-MONAI/research-contributions/pull/211?notification_referrer_id=NT_kwDOARtBabM1OTU2NDAwNjk5OjE4NTYzNDMz#issuecomment-1507906702\r\n\r\nDifferent algorithms may return results on different devices (CPU or GPU) , e.g. if algo didn't have enough gpu memory it may do CPU based slidingwindow inference. So than when we do Ensembling, some internal function concatinate the predictions and it fails, since the predictions are on different devices.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6348", "id": 1664428302, "node_id": "I_kwDODMjICc5jNSkO", "number": 6348, "title": "test_auto3dseg_hpo", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/93", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93/labels", "id": 8867338, "node_id": "MI_kwDODMjICc4Ah04K", "number": 93, "title": "Auto3DSeg enhancement [P0 v1.2]", "description": "PIC: Dong/Andriy/Mingxin\r\nhttps://docs.google.com/spreadsheets/d/1ucAuOw_tkwhQoUaBLmSSB88YUtR3109FX6hXFI-3GSY/edit#gid=0", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 9, "closed_issues": 47, "state": "open", "created_at": "2023-01-17T16:54:19Z", "updated_at": "2023-04-27T10:17:24Z", "due_on": "2023-04-06T07:00:00Z", "closed_at": null}, "comments": 0, "created_at": "2023-04-12T12:01:17Z", "updated_at": "2023-04-12T12:36:43Z", "closed_at": "2023-04-12T12:36:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nafter the skipping feature https://github.com/Project-MONAI/research-contributions/pull/213, the test cases are changed implicitly and are taking too long to run them: https://github.com/Project-MONAI/MONAI/blob/6a7f35b7e271cdf3b2c763ae35acf4ab25d85d23/tests/test_auto3dseg_hpo.py#L142\r\n\r\nhttps://github.com/Project-MONAI/MONAI/pull/6344/commits/21d9b52fa970a8f3f77ea9e65953a1ca91752907 tries to fix this issue.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6348/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6345", "id": 1664108170, "node_id": "I_kwDODMjICc5jMEaK", "number": 6345, "title": "multigpu analyzer changes the system `start_method`", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/93", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/93/labels", "id": 8867338, "node_id": "MI_kwDODMjICc4Ah04K", "number": 93, "title": "Auto3DSeg enhancement [P0 v1.2]", "description": "PIC: Dong/Andriy/Mingxin\r\nhttps://docs.google.com/spreadsheets/d/1ucAuOw_tkwhQoUaBLmSSB88YUtR3109FX6hXFI-3GSY/edit#gid=0", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 9, "closed_issues": 47, "state": "open", "created_at": "2023-01-17T16:54:19Z", "updated_at": "2023-04-27T10:17:24Z", "due_on": "2023-04-06T07:00:00Z", "closed_at": null}, "comments": 1, "created_at": "2023-04-12T08:36:34Z", "updated_at": "2023-04-12T12:36:42Z", "closed_at": "2023-04-12T12:36:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nhttps://github.com/Project-MONAI/MONAI/blob/6a7f35b7e271cdf3b2c763ae35acf4ab25d85d23/monai/apps/auto3dseg/data_analyzer.py#L210\r\n\r\nintroduces issues such as:\r\n```\r\n======================================================================\r\nERROR: test_values (tests.test_csv_iterable_dataset.TestCSVIterableDataset)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/tests/test_csv_iterable_dataset.py\", line 202, in test_values\r\n    for item in dataloader:\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 442, in __iter__\r\n    return self._get_iterator()\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 388, in _get_iterator\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 1043, in __init__\r\n    w.start()\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/process.py\", line 121, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/context.py\", line 224, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/context.py\", line 291, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/popen_forkserver.py\", line 35, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/popen_fork.py\", line 19, in __init__\r\n    self._launch(process_obj)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/popen_forkserver.py\", line 47, in _launch\r\n    reduction.dump(process_obj, buf)\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\nAttributeError: Can't pickle local object '_make_date_converter.<locals>.converter'\r\n```\r\n\r\ncc @heyufan1995 @myron @mingxin-zheng ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6340", "id": 1663411338, "node_id": "I_kwDODMjICc5jJaSK", "number": 6340, "title": "lazy.utils.resample output dtype", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-04-12T00:06:52Z", "updated_at": "2023-04-14T07:57:13Z", "closed_at": "2023-04-14T07:57:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nthe output of grid resampling is always float32\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/6a7f35b7e271cdf3b2c763ae35acf4ab25d85d23/monai/transforms/lazy/utils.py#L226-L227\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/6a7f35b7e271cdf3b2c763ae35acf4ab25d85d23/monai/transforms/spatial/functional.py#L182\r\n\r\nthe crop pad 'resampling' should also output float32\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/6a7f35b7e271cdf3b2c763ae35acf4ab25d85d23/monai/transforms/lazy/utils.py#L220-L222\r\n\r\notherwise collating random transforms of different data types can run into exceptions.\r\n\r\ncc @dongyang0122 ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6253", "id": 1645182592, "node_id": "I_kwDODMjICc5iD36A", "number": 6253, "title": "Early versions of isort incompatibility", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1948295191, "node_id": "MDU6TGFiZWwxOTQ4Mjk1MTkx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Low%20risk", "name": "Low risk", "color": "72db73", "default": false, "description": "nice-to-have features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-29T07:19:46Z", "updated_at": "2023-04-12T12:36:41Z", "closed_at": "2023-04-12T12:36:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nSome early versions of isort are not compatible with the rest of the auto formatting tools, https://github.com/Project-MONAI/MONAI/blob/be3d13869d9e0060d17a794d97d528d4e4dcc1fc/requirements-dev.txt#L23\r\nThe requirement should have a minimal version constraint\r\n\r\nCc @myron ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6253/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6249", "id": 1642883330, "node_id": "I_kwDODMjICc5h7GkC", "number": 6249, "title": "SSIM returning wrong values and limited to uniform kernel only", "user": {"login": "Warvito", "id": 4493399, "node_id": "MDQ6VXNlcjQ0OTMzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/4493399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Warvito", "html_url": "https://github.com/Warvito", "followers_url": "https://api.github.com/users/Warvito/followers", "following_url": "https://api.github.com/users/Warvito/following{/other_user}", "gists_url": "https://api.github.com/users/Warvito/gists{/gist_id}", "starred_url": "https://api.github.com/users/Warvito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Warvito/subscriptions", "organizations_url": "https://api.github.com/users/Warvito/orgs", "repos_url": "https://api.github.com/users/Warvito/repos", "events_url": "https://api.github.com/users/Warvito/events{/privacy}", "received_events_url": "https://api.github.com/users/Warvito/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Warvito", "id": 4493399, "node_id": "MDQ6VXNlcjQ0OTMzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/4493399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Warvito", "html_url": "https://github.com/Warvito", "followers_url": "https://api.github.com/users/Warvito/followers", "following_url": "https://api.github.com/users/Warvito/following{/other_user}", "gists_url": "https://api.github.com/users/Warvito/gists{/gist_id}", "starred_url": "https://api.github.com/users/Warvito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Warvito/subscriptions", "organizations_url": "https://api.github.com/users/Warvito/orgs", "repos_url": "https://api.github.com/users/Warvito/repos", "events_url": "https://api.github.com/users/Warvito/events{/privacy}", "received_events_url": "https://api.github.com/users/Warvito/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Warvito", "id": 4493399, "node_id": "MDQ6VXNlcjQ0OTMzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/4493399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Warvito", "html_url": "https://github.com/Warvito", "followers_url": "https://api.github.com/users/Warvito/followers", "following_url": "https://api.github.com/users/Warvito/following{/other_user}", "gists_url": "https://api.github.com/users/Warvito/gists{/gist_id}", "starred_url": "https://api.github.com/users/Warvito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Warvito/subscriptions", "organizations_url": "https://api.github.com/users/Warvito/orgs", "repos_url": "https://api.github.com/users/Warvito/repos", "events_url": "https://api.github.com/users/Warvito/events{/privacy}", "received_events_url": "https://api.github.com/users/Warvito/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-03-27T22:04:31Z", "updated_at": "2023-04-22T20:50:23Z", "closed_at": "2023-04-22T20:50:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe SSIMMetric is reshaping the values with `view(ssim_value.shape[1], -1)` instead `view(ssim_value.shape[0], -1)` returning a vector of (channels, 1) shape instead (batch, 1).\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/8eceabf281ab31ea4bda0ab8a6d2c8da06027e82/monai/metrics/regression.py#L385\r\n\r\nBesides that, in most packages we compute the SSIM using an gaussian kernel, instead a uniform kernel. The option to be able to choose the type of kernel should be added.\r\n\r\nFinally, in most package, there is no cov_norm parameter, producing a significantly different value when compared to the [torchmetrics](https://torchmetrics.readthedocs.io/en/stable/) package with an uniform kernel, and compared to torchmetrics, [piq](https://github.com/photosynthesis-team/piq) and[ pytorch-msssim](https://github.com/VainF/pytorch-msssim) when using an gaussian kernel\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6149", "id": 1625024600, "node_id": "I_kwDODMjICc5g2-hY", "number": 6149, "title": "integration errors", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-03-15T08:41:13Z", "updated_at": "2023-03-15T14:47:41Z", "closed_at": "2023-03-15T14:47:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nsome version dependent integration errors\r\n```\r\n[2023-03-15T05:40:29.871Z] ======================================================================\r\n[2023-03-15T05:40:29.871Z] FAIL: test_bspline (tests.test_global_mutual_information_loss.TestGlobalMutualInformationLoss)\r\n[2023-03-15T05:40:29.871Z] ----------------------------------------------------------------------\r\n[2023-03-15T05:40:29.871Z] Traceback (most recent call last):\r\n[2023-03-15T05:40:29.871Z]   File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_global_mutual_information_loss.py\", line 109, in test_bspline\r\n[2023-03-15T05:40:29.871Z]     np.testing.assert_allclose(result, expected_value, rtol=1e-3, atol=5e-3)\r\n[2023-03-15T05:40:29.871Z]   File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1530, in assert_allclose\r\n[2023-03-15T05:40:29.871Z]     assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n[2023-03-15T05:40:29.871Z]   File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 844, in assert_array_compare\r\n[2023-03-15T05:40:29.871Z]     raise AssertionError(msg)\r\n[2023-03-15T05:40:29.871Z] AssertionError: \r\n[2023-03-15T05:40:29.871Z] Not equal to tolerance rtol=0.001, atol=0.005\r\n[2023-03-15T05:40:29.871Z] \r\n[2023-03-15T05:40:29.871Z] Mismatched elements: 1 / 1 (100%)\r\n[2023-03-15T05:40:29.871Z] Max absolute difference: 0.028\r\n[2023-03-15T05:40:29.871Z] Max relative difference: 0.045\r\n[2023-03-15T05:40:29.871Z]  x: array(-0.596109, dtype=float32)\r\n[2023-03-15T05:40:29.871Z]  y: array(-0.624335)\r\n[2023-03-15T05:40:29.871Z] \r\n[2023-03-15T05:40:29.871Z] ----------------------------------------------------------------------\r\n[2023-03-15T05:40:29.871Z] Ran 12322 tests in 2105.197s\r\n[2023-03-15T05:40:29.871Z] \r\n[2023-03-15T05:40:29.871Z] FAILED (failures=1, skipped=116)\r\n```\r\n\r\n```\r\n[2023-03-15T03:06:38.969Z] ======================================================================\r\n[2023-03-15T03:06:38.969Z] FAIL: test_correct_results_11 (tests.test_rand_rotated.TestRandRotated2D)\r\n[2023-03-15T03:06:38.969Z] ----------------------------------------------------------------------\r\n[2023-03-15T03:06:38.969Z] Traceback (most recent call last):\r\n[2023-03-15T03:06:38.969Z]   File \"/usr/local/lib/python3.10/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2023-03-15T03:06:38.969Z]     return func(*(a + p.args), **p.kwargs)\r\n[2023-03-15T03:06:38.969Z]   File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_rand_rotated.py\", line 149, in test_correct_results\r\n[2023-03-15T03:06:38.969Z]     self.assertLessEqual(np.abs(good - expected.size), 25, \"diff at most 25 pixels\")\r\n[2023-03-15T03:06:38.969Z] AssertionError: 26 not less than or equal to 25 : diff at most 25 pixels\r\n[2023-03-15T03:06:38.969Z] \r\n[2023-03-15T03:06:38.969Z] ----------------------------------------------------------------------\r\n[2023-03-15T03:06:38.969Z] Ran 10030 tests in 1044.933s\r\n[2023-03-15T03:06:38.969Z] \r\n[2023-03-15T03:06:38.969Z] FAILED (failures=1, skipped=807)\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6148", "id": 1624484223, "node_id": "I_kwDODMjICc5g06l_", "number": 6148, "title": "test_handler_clearml_image cannot finish", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-15T00:04:35Z", "updated_at": "2023-03-21T15:13:48Z", "closed_at": "2023-03-21T15:13:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nerror https://github.com/Project-MONAI/MONAI/actions/runs/4397243843/jobs/7703476756\r\n```\r\ntest_task_init (tests.test_handler_clearml_image.TestHandlerClearMLImageHandler) ... ClearML Task: created new task id=offline-05250354845641a39e84dc2a5f6655e7\r\nClearML running in offline mode, session stored in /github/home/.clearml/cache/offline/offline-05250354845641a39e84dc2a5f6655e7\r\n2023-03-12 19:54:03,413 - clearml.Task - INFO - No repository found, storing script code instead\r\n2023-03-12 19:54:03,416 - clearml.log - WARNING - Event reporting sub-process lost, switching to thread based reporting\r\n2023-03-12 19:54:03,427 - clearml.Task - INFO - Waiting for repository detection and full package requirement analysis\r\n2023-03-12 19:54:03,505 - clearml.Task - INFO - Finished repository detection and package analysis\r\nError: The operation was canceled.\r\n```\r\n\r\nthis happens randomly (3 out 7 runs) with the github ci runner \r\n\r\nhttps://github.com/Project-MONAI/MONAI/actions/workflows/docker.yml\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6109", "id": 1612852970, "node_id": "I_kwDODMjICc5gIi7q", "number": 6109, "title": "RandCropByLabelClasses, internal variable \"ratios\" is mutated", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-07T07:04:35Z", "updated_at": "2023-03-14T10:06:09Z", "closed_at": "2023-03-13T08:56:38Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "In the cropping transform RandCropByLabelClasses, if a user specified \"ratios\" (a probability of sampling from each class),  that variable mutated during training, on this line\r\n\r\n https://github.com/Project-MONAI/MONAI/blob/ab800d8413df5680161ea00fb3d6c1a7aa8dd04b/monai/transforms/utils.py#L570-L574\r\n \r\n that means, that during training, if some classes are missing , the probability is set to 0, and it's 0 for all next images too..\r\n \r\n here ratios_[i] is actually 'self.ratios', so we're updating the internal variable , which we should not touch. \r\n\r\n \r\n This is the second time (recently), that we detect a internal variable being mutated (e.g. here for pixdim https://github.com/Project-MONAI/MONAI/pull/5950#issuecomment-1445441921).  These bugs are very subtle, often don't trigger any errors, just a wrong performance.  \r\n \r\n Ideally, we need to run some test on all \"transforms\" and ensure that no internal variables are modified/mutated. Is there an automated analysis tool for this? maybe mypy with some option?  \r\n \r\n I think, we also should not use List for internal variables (as here) or np.array (as for pixdim), and always use some immutable type (e.g. tuple, frozenlist)..\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6104", "id": 1611565846, "node_id": "I_kwDODMjICc5gDosW", "number": 6104, "title": "UserWarning: TypedStorage is deprecated.", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T14:35:37Z", "updated_at": "2023-03-06T22:33:49Z", "closed_at": "2023-03-06T22:33:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nsee also https://github.com/Project-MONAI/MONAI/issues/5862\r\npytorch docker 23.01\r\n\r\nMONAI version: 1.1.0+271.g8deedd61\r\nNumpy version: 1.22.2\r\nPytorch version: 1.14.0a0+44dac51\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: 8deedd61e7bab8ae0fe58d24bb7e68db5d6fddb2\r\nMONAI __file__: /workspace/MONAI/monai/__init__.py\r\n\r\n```\r\nroot@4242496:/workspace/MONAI# python -W error -m tests.test_meta_tensor\r\n...............................................................................Traceback (most recent call last):\r\n  File \"/usr/lib/python3.8/multiprocessing/queues.py\", line 239, in _feed\r\n    obj = _ForkingPickler.dumps(obj)\r\n  File \"/usr/lib/python3.8/multiprocessing/reduction.py\", line 51, in dumps\r\n    cls(buf, protocol).dump(obj)\r\n  File \"/workspace/MONAI/monai/data/__init__.py\", line 132, in reduce_meta_tensor\r\n    storage = meta_tensor.untyped_storage() if hasattr(meta_tensor, \"untyped_storage\") else meta_tensor.storage()\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 226, in storage\r\n    return handle_torch_function(Tensor.storage, (self,), self)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/overrides.py\", line 1537, in handle_torch_function\r\n    result = torch_func_method(public_api, types, args, kwargs)\r\n  File \"/workspace/MONAI/monai/data/meta_tensor.py\", line 276, in __torch_function__\r\n    ret = super().__torch_function__(func, types, args, kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 1283, in __torch_function__\r\n    ret = func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 228, in storage\r\n    torch.storage._warn_typed_storage_removal()\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/storage.py\", line 315, in _warn_typed_storage_removal\r\n    warnings.warn(message, UserWarning)\r\nUserWarning: TypedStorage is deprecated. It will be removed in the future and UntypedStorage will be the only storage class. This should only matter to you if you are using storages directly.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/multiprocessing/queues.py\", line 239, in _feed\r\n    obj = _ForkingPickler.dumps(obj)\r\n  File \"/usr/lib/python3.8/multiprocessing/reduction.py\", line 51, in dumps\r\n    cls(buf, protocol).dump(obj)\r\n  File \"/workspace/MONAI/monai/data/__init__.py\", line 132, in reduce_meta_tensor\r\n    storage = meta_tensor.untyped_storage() if hasattr(meta_tensor, \"untyped_storage\") else meta_tensor.storage()\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 226, in storage\r\n    return handle_torch_function(Tensor.storage, (self,), self)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/overrides.py\", line 1537, in handle_torch_function\r\n    result = torch_func_method(public_api, types, args, kwargs)\r\n  File \"/workspace/MONAI/monai/data/meta_tensor.py\", line 276, in __torch_function__\r\n    ret = super().__torch_function__(func, types, args, kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 1283, in __torch_function__\r\n    ret = func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 228, in storage\r\n    torch.storage._warn_typed_storage_removal()\r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/storage.py\", line 315, in _warn_typed_storage_removal\r\n    warnings.warn(message, UserWarning)\r\nUserWarning: TypedStorage is deprecated. It will be removed in the future and UntypedStorage will be the only storage class. This should only matter to you if you are using storages directly.\r\n```\r\n\r\n```\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6104/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6087", "id": 1605189310, "node_id": "I_kwDODMjICc5frT6-", "number": 6087, "title": "`ORIGINAL_CHANNEL_DIM` datatype for collate", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-03-01T15:30:10Z", "updated_at": "2023-03-02T21:33:21Z", "closed_at": "2023-03-02T21:33:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nthe `ORIGINAL_CHANNEL_DIM` field currently allows different datatypes \r\nhttps://github.com/Project-MONAI/MONAI/blob/68074f07e4c04657f975cff2269ebe937f50e619/monai/data/image_reader.py#L307-L309\r\n\r\nand this causes errors when collating multiple metatensors: https://github.com/Project-MONAI/MONAI/blob/68074f07e4c04657f975cff2269ebe937f50e619/monai/data/utils.py#L436\r\n\r\n\r\n```py\r\n>>> from monai.data import MetaTensor\r\n>>> a = MetaTensor(1, meta={\"original_channel_dim\": 1})\r\n>>> b = MetaTensor(1, meta={\"original_channel_dim\": \"no_channel\"})\r\n>>> from monai.data import list_data_collate\r\n>>> list_data_collate([a,b])\r\n> collate/stack a list of tensors\r\nTraceback (most recent call last):\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 128, in collate\r\n    return elem_type({key: collate([d[key] for d in batch], collate_fn_map=collate_fn_map) for key in elem})\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 128, in <dictcomp>\r\n    return elem_type({key: collate([d[key] for d in batch], collate_fn_map=collate_fn_map) for key in elem})\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 120, in collate\r\n    return collate_fn_map[elem_type](batch, collate_fn_map=collate_fn_map)\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 184, in collate_int_fn\r\n    return torch.tensor(batch)\r\nTypeError: new(): invalid data type 'str'\r\n```\r\n\r\ncc @holgerroth ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6033", "id": 1593434545, "node_id": "I_kwDODMjICc5e-eGx", "number": 6033, "title": "`sliding_window_inference` shouldn't remove gradient", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-02-21T12:57:03Z", "updated_at": "2023-02-21T19:36:30Z", "closed_at": "2023-02-21T19:36:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\nimport torch\r\nimport monai\r\n\r\ninputs = torch.ones((3, 16, 15, 7), requires_grad=True)\r\nresult = monai.inferers.sliding_window_inference(inputs, roi_size=(2, 3), sw_batch_size=3, predictor=lambda x: x + 1.0)\r\nresult.sum().backward()\r\nprint(inputs.grad)\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_test.py\", line 8, in <module>\r\n    result.sum().backward()\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/_tensor.py\", line 488, in backward\r\n    torch.autograd.backward(\r\n  File \"/usr/local/anaconda3/envs/py38/lib/python3.8/site-packages/torch/autograd/__init__.py\", line 197, in backward\r\n    Variable._execution_engine.run_backward(  # Calls into the C++ engine to run the backward pass\r\nRuntimeError: element 0 of tensors does not require grad and does not have a grad_fn\r\n```\r\n\r\nthe detach should be done before entering this sliding window function, the function shouldn't always remove the gradients:\r\nhttps://github.com/Project-MONAI/MONAI/blob/88fb0b10d85f59e9ee04cbeeddb28b91f2ea209b/monai/inferers/utils.py#L265\r\n\r\nPytorch version: 1.13.1\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: 88fb0b10d85f59e9ee04cbeeddb28b91f2ea209b\r\n\r\ncc @dongyang0122 ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6033/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/6020", "id": 1589350483, "node_id": "I_kwDODMjICc5eu5BT", "number": 6020, "title": "cufile.log file in the current directory", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2023-02-17T13:21:38Z", "updated_at": "2023-03-07T08:14:14Z", "closed_at": "2023-03-07T08:14:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nrunning\r\n```\r\nimport monai\r\n```\r\nwill create a `cufile.log` in the current directory.\r\n\r\nto replicate:\r\n\r\n```\r\ndocker run --gpus all -ti --rm  projectmonai/monai:latest bash -c \"python -c 'import monai'; ls cufile.log\"\r\n```\r\n\r\nexpected behaviour:\r\n\r\n`No such file or directory`\r\n\r\n```\r\ndocker run --gpus all -ti --rm  projectmonai/monai:latest bash -c \"ls cufile.log\"\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/6020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5959", "id": 1576779335, "node_id": "I_kwDODMjICc5d-75H", "number": 5959, "title": "Monai import modifies logger", "user": {"login": "brandonfosso", "id": 7997179, "node_id": "MDQ6VXNlcjc5OTcxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/7997179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brandonfosso", "html_url": "https://github.com/brandonfosso", "followers_url": "https://api.github.com/users/brandonfosso/followers", "following_url": "https://api.github.com/users/brandonfosso/following{/other_user}", "gists_url": "https://api.github.com/users/brandonfosso/gists{/gist_id}", "starred_url": "https://api.github.com/users/brandonfosso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brandonfosso/subscriptions", "organizations_url": "https://api.github.com/users/brandonfosso/orgs", "repos_url": "https://api.github.com/users/brandonfosso/repos", "events_url": "https://api.github.com/users/brandonfosso/events{/privacy}", "received_events_url": "https://api.github.com/users/brandonfosso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-02-08T20:48:31Z", "updated_at": "2023-02-08T22:12:32Z", "closed_at": "2023-02-08T22:12:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nImporting `monai` modifies the python root logger leaving it with a `StreamHandler` for stdout. This can lead to double messages when a user instantiates their own logger.\r\n\r\n**To Reproduce**\r\nRun the following script\r\n```python\r\nimport logging\r\nimport monai\r\n\r\nlogger = logging.getLogger(__name__)\r\nstderr = logging.StreamHandler()\r\nlogger.addHandler(stderr)\r\n\r\nlogger.warning('hello, world')\r\n```\r\nRunning this prints the 'hello, world' warning twice. The second time with date and time info:\r\n<img width=\"368\" alt=\"image\" src=\"https://user-images.githubusercontent.com/7997179/217647170-89ec39cb-363d-430d-a052-34e9ef362d7e.png\">\r\n\r\n**Expected behavior**\r\nIt should just print `hello, world`. It does this if you comment out the `import monai` statement.\r\n\r\n**Environment**\r\n\r\nPrinting MONAI config...\r\nMONAI version: 1.1.0\r\nNumpy version: 1.24.1\r\nPytorch version: 1.13.0+cu117\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: a2ec3752f54bfc3b40e7952234fbeb5452ed63e3\r\nMONAI __file__: /usr/local/lib/python3.9/site-packages/monai/__init__.py\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.\r\nNibabel version: 5.0.0\r\nscikit-image version: 0.19.3\r\nPillow version: 9.4.0\r\nTensorboard version: NOT INSTALLED or UNKNOWN VERSION.\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: NOT INSTALLED or UNKNOWN VERSION.\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: 5.9.4\r\npandas version: NOT INSTALLED or UNKNOWN VERSION.\r\neinops version: NOT INSTALLED or UNKNOWN VERSION.\r\ntransformers version: NOT INSTALLED or UNKNOWN VERSION.\r\nmlflow version: NOT INSTALLED or UNKNOWN VERSION.\r\npynrrd version: NOT INSTALLED or UNKNOWN VERSION.\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\nPrinting system config...\r\nSystem: Linux\r\nLinux version: Debian GNU/Linux 11 (bullseye)\r\nPlatform: Linux-5.4.0-122-generic-x86_64-with-glibc2.31\r\nProcessor:\r\nMachine: x86_64\r\nPython version: 3.9.13\r\nProcess name: python\r\nCommand: ['python', 'monai_logger.py']\r\nOpen files: []\r\nNum physical CPUs: 64\r\nNum logical CPUs: 64\r\nNum usable CPUs: 64\r\nCPU usage (%): [8.5, 6.9, 100.0, 6.0, 10.1, 6.8, 8.5, 17.9, 6.8, 7.7, 6.8, 7.6, 7.7, 6.8, 25.6, 6.8, 6.1, 9.3, 7.8, 7.8, 8.5, 9.4, 9.4, 10.2, 8.5, 9.3, 7.6, 8.5, 9.2, 7.6, 9.4, 6.8, 8.5, 0.0, 5.1, 4.3, 0.9, 0.0, 7.0, 5.1, 0.0, 0.8, 0.0, 3.4, 0.0, 0.0, 5.1, 0.0, 0.9, 0.0, 0.0, 0.0, 1.7, 5.1, 5.1, 20.7, 0.0, 13.7, 0.9, 0.8, 7.0, 0.0, 9.5, 1.7]\r\nCPU freq. (MHz): 3392\r\nLoad avg. in last 1, 5, 15 mins (%): [4.3, 2.9, 2.7]\r\nDisk usage (%): 14.2\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 246.0\r\nAvailable memory (GB): 229.2\r\nUsed memory (GB): 15.0\r\n\r\nPrinting GPU config...\r\nNum GPUs: 0\r\nHas CUDA: False\r\ncuDNN enabled: True\r\ncuDNN version: 8500\r\nNone\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5957", "id": 1576556460, "node_id": "I_kwDODMjICc5d-Fes", "number": 5957, "title": "Link broken inside modules documentation", "user": {"login": "Shadow-Devil", "id": 29004905, "node_id": "MDQ6VXNlcjI5MDA0OTA1", "avatar_url": "https://avatars.githubusercontent.com/u/29004905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shadow-Devil", "html_url": "https://github.com/Shadow-Devil", "followers_url": "https://api.github.com/users/Shadow-Devil/followers", "following_url": "https://api.github.com/users/Shadow-Devil/following{/other_user}", "gists_url": "https://api.github.com/users/Shadow-Devil/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shadow-Devil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shadow-Devil/subscriptions", "organizations_url": "https://api.github.com/users/Shadow-Devil/orgs", "repos_url": "https://api.github.com/users/Shadow-Devil/repos", "events_url": "https://api.github.com/users/Shadow-Devil/events{/privacy}", "received_events_url": "https://api.github.com/users/Shadow-Devil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1948297221, "node_id": "MDU6TGFiZWwxOTQ4Mjk3MjIx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Contribution%20wanted", "name": "Contribution wanted", "color": "c7f981", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-08T17:52:43Z", "updated_at": "2023-02-14T12:48:53Z", "closed_at": "2023-02-14T12:48:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nFollowing link is not correct: https://docs.monai.io/en/latest/modules.html#lamp-large-deep-nets-with-automated-model-parallelism-for-image-segmentation\r\n\r\nThis link is defined here: \r\nhttps://github.com/Project-MONAI/MONAI/blob/cdac0330b7991ca0ba3807f7c3873a0d3b2588bc/docs/source/modules.md?plain=1#L154-L155\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to https://docs.monai.io/en/latest/modules.html#sliding-window-inference\r\n2. Click on \"model parallel training\"\r\n\r\n**Expected behavior**\r\nLink to a correct anchor.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/29004905/217611861-ed3a951a-ada8-4452-9989-2eb99f7536ac.png)\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5951", "id": 1575134383, "node_id": "I_kwDODMjICc5d4qSv", "number": 5951, "title": "test error data_analyzer_byoc.ipynb", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2023-02-07T22:44:06Z", "updated_at": "2023-02-12T04:02:11Z", "closed_at": "2023-02-12T04:02:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n**Describe the bug**\r\n\r\n```\r\n[2023-02-07T01:05:27.319Z] Running ./auto3dseg/notebooks/data_analyzer_byoc.ipynb\r\n[2023-02-07T01:05:27.319Z] Checking PEP8 compliance...\r\n[2023-02-07T01:05:28.247Z] Running notebook...\r\n[2023-02-07T01:05:32.408Z] MONAI version: 1.1.0+54.g385ac0bb\r\n[2023-02-07T01:05:32.408Z] Numpy version: 1.22.2\r\n[2023-02-07T01:05:32.408Z] Pytorch version: 1.10.2+cu102\r\n[2023-02-07T01:05:32.408Z] MONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\n[2023-02-07T01:05:32.408Z] MONAI rev id: 385ac0bb6612f88f92e0862a6aee033fb8df5de7\r\n[2023-02-07T01:05:32.408Z] MONAI __file__: /home/jenkins/agent/workspace/Monai-notebooks/MONAI/monai/__init__.py\r\n[2023-02-07T01:05:32.408Z] \r\n[2023-02-07T01:05:32.408Z] Optional dependencies:\r\n[2023-02-07T01:05:32.408Z] Pytorch Ignite version: 0.4.10\r\n[2023-02-07T01:05:32.408Z] ITK version: 5.3.0\r\n[2023-02-07T01:05:32.408Z] Nibabel version: 5.0.0\r\n[2023-02-07T01:05:32.408Z] scikit-image version: 0.19.3\r\n[2023-02-07T01:05:32.408Z] Pillow version: 7.0.0\r\n[2023-02-07T01:05:32.408Z] Tensorboard version: 2.9.0\r\n[2023-02-07T01:05:32.408Z] gdown version: 4.6.0\r\n[2023-02-07T01:05:32.408Z] TorchVision version: 0.11.3+cu102\r\n[2023-02-07T01:05:32.408Z] tqdm version: 4.64.1\r\n[2023-02-07T01:05:32.408Z] lmdb version: 1.4.0\r\n[2023-02-07T01:05:32.408Z] psutil version: 5.9.4\r\n[2023-02-07T01:05:32.408Z] pandas version: 1.1.5\r\n[2023-02-07T01:05:32.408Z] einops version: 0.6.0\r\n[2023-02-07T01:05:32.408Z] transformers version: 4.21.3\r\n[2023-02-07T01:05:32.408Z] mlflow version: 2.1.1\r\n[2023-02-07T01:05:32.408Z] pynrrd version: 1.0.0\r\n[2023-02-07T01:05:32.408Z] \r\n[2023-02-07T01:05:32.409Z] For details about installing the optional dependencies, please visit:\r\n[2023-02-07T01:05:32.409Z]     https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n[2023-02-07T01:05:32.409Z] \r\n[2023-02-07T01:05:34.298Z] papermill  --progress-bar -k python3\r\n[2023-02-07T01:05:34.298Z] /usr/local/lib/python3.8/dist-packages/papermill/iorw.py:153: UserWarning: the file is not specified with any extension : -\r\n[2023-02-07T01:05:34.298Z]   warnings.warn(\r\n[2023-02-07T01:06:00.453Z] \r\nExecuting:   0%|          | 0/15 [00:00<?, ?cell/s]\r\nExecuting:   7%|\u258b         | 1/15 [00:01<00:17,  1.26s/cell]\r\nExecuting:  20%|\u2588\u2588        | 3/15 [00:06<00:26,  2.19s/cell]\r\nExecuting:  33%|\u2588\u2588\u2588\u258e      | 5/15 [00:10<00:20,  2.09s/cell]\r\nExecuting:  47%|\u2588\u2588\u2588\u2588\u258b     | 7/15 [00:10<00:10,  1.26s/cell]\r\nExecuting:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 10/15 [00:24<00:14,  2.94s/cell]\r\nExecuting:  67%|\u2588\u2588\u2588\u2588\u2588\u2588\u258b   | 10/15 [00:26<00:13,  2.61s/cell]\r\n[2023-02-07T01:06:00.453Z] /usr/local/lib/python3.8/dist-packages/papermill/iorw.py:153: UserWarning: the file is not specified with any extension : -\r\n[2023-02-07T01:06:00.453Z]   warnings.warn(\r\n[2023-02-07T01:06:00.453Z] Traceback (most recent call last):\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/bin/papermill\", line 8, in <module>\r\n[2023-02-07T01:06:00.453Z]     sys.exit(papermill())\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/click/core.py\", line 1130, in __call__\r\n[2023-02-07T01:06:00.453Z]     return self.main(*args, **kwargs)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/click/core.py\", line 1055, in main\r\n[2023-02-07T01:06:00.453Z]     rv = self.invoke(ctx)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/click/core.py\", line 1404, in invoke\r\n[2023-02-07T01:06:00.453Z]     return ctx.invoke(self.callback, **ctx.params)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/click/core.py\", line 760, in invoke\r\n[2023-02-07T01:06:00.453Z]     return __callback(*args, **kwargs)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/click/decorators.py\", line 26, in new_func\r\n[2023-02-07T01:06:00.453Z]     return f(get_current_context(), *args, **kwargs)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/papermill/cli.py\", line 250, in papermill\r\n[2023-02-07T01:06:00.453Z]     execute_notebook(\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/papermill/execute.py\", line 128, in execute_notebook\r\n[2023-02-07T01:06:00.453Z]     raise_for_execution_errors(nb, output_path)\r\n[2023-02-07T01:06:00.453Z]   File \"/usr/local/lib/python3.8/dist-packages/papermill/execute.py\", line 232, in raise_for_execution_errors\r\n[2023-02-07T01:06:00.453Z]     raise error\r\n[2023-02-07T01:06:00.453Z] papermill.exceptions.PapermillExecutionError: \r\n[2023-02-07T01:06:00.453Z] ---------------------------------------------------------------------------\r\n[2023-02-07T01:06:00.453Z] Exception encountered at \"In [5]\":\r\n[2023-02-07T01:06:00.453Z] ---------------------------------------------------------------------------\r\n[2023-02-07T01:06:00.453Z] KeyError                                  Traceback (most recent call last)\r\n[2023-02-07T01:06:00.453Z] Cell In[5], line 37\r\n[2023-02-07T01:06:00.453Z]      33     result[DataStatsKeys.SUMMARY] = summarizer.summarize(result[DataStatsKeys.BY_CASE])\r\n[2023-02-07T01:06:00.453Z]      34     return result\r\n[2023-02-07T01:06:00.453Z] ---> 37 result = my_analyzer(sim_datalist, sim_dataroot, summarizer)\r\n[2023-02-07T01:06:00.453Z] \r\n[2023-02-07T01:06:00.453Z] Cell In[5], line 33, in my_analyzer(datalist, dataroot, my_summarizer)\r\n[2023-02-07T01:06:00.453Z]      23     stats_by_cases = {\r\n[2023-02-07T01:06:00.453Z]      24         DataStatsKeys.BY_CASE_IMAGE_PATH: d[DataStatsKeys.BY_CASE_IMAGE_PATH],\r\n[2023-02-07T01:06:00.453Z]      25         DataStatsKeys.BY_CASE_LABEL_PATH: d[DataStatsKeys.BY_CASE_LABEL_PATH],\r\n[2023-02-07T01:06:00.453Z]    (...)\r\n[2023-02-07T01:06:00.453Z]      29         \"user_stats\": d[\"user_stats\"],\r\n[2023-02-07T01:06:00.453Z]      30     }\r\n[2023-02-07T01:06:00.453Z]      32 result[DataStatsKeys.BY_CASE].append(stats_by_cases)\r\n[2023-02-07T01:06:00.454Z] ---> 33 result[DataStatsKeys.SUMMARY] = summarizer.summarize(result[DataStatsKeys.BY_CASE])\r\n[2023-02-07T01:06:00.454Z]      34 return result\r\n[2023-02-07T01:06:00.454Z] \r\n[2023-02-07T01:06:00.454Z] File /home/jenkins/agent/workspace/Monai-notebooks/MONAI/monai/auto3dseg/seg_summarizer.py:211, in SegSummarizer.summarize(self, data)\r\n[2023-02-07T01:06:00.454Z]     209 for analyzer in self.summary_analyzers:\r\n[2023-02-07T01:06:00.454Z]     210     if callable(analyzer):\r\n[2023-02-07T01:06:00.454Z] --> 211         report.update({analyzer.stats_name: analyzer(data)})\r\n[2023-02-07T01:06:00.454Z]     213 return report\r\n[2023-02-07T01:06:00.454Z] \r\n[2023-02-07T01:06:00.454Z] File /home/jenkins/agent/workspace/Monai-notebooks/MONAI/monai/auto3dseg/analyzer.py:991, in ImageHistogramSumm.__call__(self, data)\r\n[2023-02-07T01:06:00.454Z]     988     raise ValueError(f\"Callable {self.__class__} input list is empty\")\r\n[2023-02-07T01:06:00.454Z]     990 if self.stats_name not in data[0]:\r\n[2023-02-07T01:06:00.454Z] --> 991     raise KeyError(f\"{self.stats_name} is not in input data\")\r\n[2023-02-07T01:06:00.454Z]     993 summ_histogram: dict = {}\r\n[2023-02-07T01:06:00.454Z]     995 for d in data:\r\n[2023-02-07T01:06:00.454Z] \r\n[2023-02-07T01:06:00.454Z] KeyError: 'image_histogram is not in input data'\r\n```\r\nintroduced by this commit https://github.com/Project-MONAI/MONAI/commit/f9842c0dda70714c826eeb8b12bbf93d987a0584\r\n\r\nhi @mingxin-zheng, do you have time to have a look?\r\n\r\ncc @Nic-Ma @Shadow-Devil ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5951/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5935", "id": 1569825485, "node_id": "I_kwDODMjICc5dkaLN", "number": 5935, "title": "Why the data shape are different through transform \"spacingd.", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-03T13:14:05Z", "updated_at": "2023-02-08T10:57:40Z", "closed_at": "2023-02-08T10:57:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Discussed in https://github.com/Project-MONAI/MONAI/discussions/5934\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **xxsxxsxxs666** February  3, 2023</sup>\r\n\r\n![1675428782920](https://user-images.githubusercontent.com/61532031/216608306-d48a11ff-d351-47a3-af81-ffd5f01b98c9.jpg)\r\n\r\n    val_transforms = Compose(\r\n        [\r\n            LoadImaged(keys=[\"image\", \"label\"]),\r\n            EnsureChannelFirstd(keys=[\"image\", \"label\"]),\r\n            ScaleIntensityRanged(\r\n                keys=[\"image\"], a_min=-57, a_max=400,\r\n                b_min=0.0, b_max=1.0, clip=True,\r\n            ),\r\n            CropForegroundd(keys=[\"image\", \"label\"], source_key=\"image\"),  # default: value>0\r\n            Orientationd(keys=[\"image\", \"label\"], axcodes=\"RAI\"),\r\n            Spacingd(keys=[\"image\", \"label\"], pixdim=(\r\n                0.35, 0.35, 0.5), mode=(\"bilinear\", \"nearest\")),  # Now only Sequential_str, How to add spline\r\n        ]\r\n    )\r\n\r\nThe shape and metadata are the same between image and label\r\n![image](https://user-images.githubusercontent.com/61532031/216610903-9b586e06-0dd5-4cb4-85d8-05904146b159.png)\r\n\r\nthis problem only happen when I use cachedataset. Nothing went wrong when I use normal dataset. </div>", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5935/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5931", "id": 1569394831, "node_id": "I_kwDODMjICc5dixCP", "number": 5931, "title": "`ConfigParser` can't get references with same prefix", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/97", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/97", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/97/labels", "id": 8867374, "node_id": "MI_kwDODMjICc4Ah04u", "number": 97, "title": "Bundle class [P1 v1.2]", "description": "PIC: Nic/Yiheng\r\nAdd a general python class defining bundle requirement", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 6, "state": "open", "created_at": "2023-01-17T17:01:33Z", "updated_at": "2023-04-28T16:40:04Z", "due_on": "2023-04-06T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2023-02-03T07:59:51Z", "updated_at": "2023-02-03T09:38:29Z", "closed_at": "2023-02-03T09:38:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIssue reported by @dongyang0122 , the `ConfigParser` module can't get references in the same expression with same prefix.\r\nProgram to reproduce it:\r\n```py\r\n>>> from monai.bundle import ConfigParser\r\n>>> \r\n>>> data = {\"training\": {\"num_epochs\": 1, \"num_epochs_per_validation\": 2}, \"total_iters\": \"$@training#num_epochs + @training#num_epochs_per_validation + 1\"}\r\n>>> parser = ConfigParser(config=data)\r\n>>> print(parser.get_parsed_content(\"total_iters\"))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/config_parser.py\", line 287, in get_parsed_content\r\n    return self.ref_resolver.get_resolved_content(id=id, **kwargs)\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/reference_resolver.py\", line 188, in get_resolved_content\r\n    return self._resolve_one_item(id=id, **kwargs)\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/reference_resolver.py\", line 170, in _resolve_one_item\r\n    item.evaluate(globals={f\"{self._vars}\": self.resolved_content}) if run_eval else item\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/config_item.py\", line 363, in evaluate\r\n    optional_module = self._parse_import_string(value[len(self.prefix) :])\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/config_item.py\", line 333, in _parse_import_string\r\n    node = first(ast.iter_child_nodes(ast.parse(import_string)))\r\n  File \"/usr/lib/python3.8/ast.py\", line 47, in parse\r\n    return compile(source, filename, mode, flags,\r\n  File \"<unknown>\", line 1\r\n    __local_refs['training#num_epochs'] + __local_refs['training#num_epochs']_per_validation + 1\r\n                                                                             ^\r\nSyntaxError: invalid syntax\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5919", "id": 1564036245, "node_id": "I_kwDODMjICc5dOUyV", "number": 5919, "title": "Metrics fails or wrong output device with CUDA", "user": {"login": "matteo-bastico", "id": 48530855, "node_id": "MDQ6VXNlcjQ4NTMwODU1", "avatar_url": "https://avatars.githubusercontent.com/u/48530855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matteo-bastico", "html_url": "https://github.com/matteo-bastico", "followers_url": "https://api.github.com/users/matteo-bastico/followers", "following_url": "https://api.github.com/users/matteo-bastico/following{/other_user}", "gists_url": "https://api.github.com/users/matteo-bastico/gists{/gist_id}", "starred_url": "https://api.github.com/users/matteo-bastico/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matteo-bastico/subscriptions", "organizations_url": "https://api.github.com/users/matteo-bastico/orgs", "repos_url": "https://api.github.com/users/matteo-bastico/repos", "events_url": "https://api.github.com/users/matteo-bastico/events{/privacy}", "received_events_url": "https://api.github.com/users/matteo-bastico/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2023-01-31T10:23:46Z", "updated_at": "2023-02-02T13:07:09Z", "closed_at": "2023-02-02T13:07:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nHello, some metrics have bugs when used with CUDA tensors.  In particular, Generalized Dice Score fails with the following error when both `y_pred` and `y` are on the same CUDA device.\r\n\r\n`RuntimeError: Expected all tensors to be on the same device, but found at least two devices, cuda:0 and cpu!`\r\n\r\nInstead, in Average Surface Distance the device of the output is always cpu even if both outputs are on gpu. \r\n\r\n**To Reproduce**\r\nFor Generalized Dice Score:\r\n```\r\nx = torch.randint(0, 2, (1, 6, 96, 96, 96)).to(\"cuda:0\")\r\ny = torch.randint(0, 2, (1, 6, 96, 96, 96)).to(\"cuda:0\")\r\nmonai.metrics.compute_generalized_dice(x, y)\r\n```\r\nwill raise the `RuntimeError`. \r\n\r\nFor Average Surface Distance\r\n```\r\nx = torch.randint(0, 2, (1, 6, 96, 96, 96)).to(\"cuda:0\")\r\ny = torch.randint(0, 2, (1, 6, 96, 96, 96)).to(\"cuda:0\")\r\nmonai.metrics.compute_average_surface_distance(x, y)\r\n```\r\nwill return a ` tensor([[...]], dtype=torch.float64)` instead of `tensor([[...]], device='cuda:0')` (see Mean Dice for correct behavior).\r\n\r\n**Expected behavior**\r\nThe metrics are computed without raising errors when inputs are on gpu and the returned output is on the same device.\r\n\r\n**Environment**\r\n\r\nMonai: 1.1.0\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5844", "id": 1529266853, "node_id": "I_kwDODMjICc5bJsKl", "number": 5844, "title": "Slicing a MetaTensor: `TypeError: only integer tensors of a single element can be converted to an index`", "user": {"login": "jeanmonet", "id": 15112920, "node_id": "MDQ6VXNlcjE1MTEyOTIw", "avatar_url": "https://avatars.githubusercontent.com/u/15112920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeanmonet", "html_url": "https://github.com/jeanmonet", "followers_url": "https://api.github.com/users/jeanmonet/followers", "following_url": "https://api.github.com/users/jeanmonet/following{/other_user}", "gists_url": "https://api.github.com/users/jeanmonet/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeanmonet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeanmonet/subscriptions", "organizations_url": "https://api.github.com/users/jeanmonet/orgs", "repos_url": "https://api.github.com/users/jeanmonet/repos", "events_url": "https://api.github.com/users/jeanmonet/events{/privacy}", "received_events_url": "https://api.github.com/users/jeanmonet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2023-01-11T15:38:31Z", "updated_at": "2023-01-13T16:16:55Z", "closed_at": "2023-01-13T16:16:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "The goal is to slice the tensor in half. For some reason that I cannot comprehend, it doesn't work on a particular tensor:\r\n\r\n```python\r\n>>> type(x)\r\n<class 'monai.data.meta_tensor.MetaTensor'>\r\n\r\n>>> x.shape\r\ntorch.Size([128, 1024, 8, 64])\r\n\r\n>>> x[slice(0, 64, None), ...]\r\n*** TypeError: only integer tensors of a single element can be converted to an index\r\n\r\n# OK with [0:16]:\r\n>>> x[slice(0, 16, None), ...].shape\r\ntorch.Size([16, 1024, 8, 64])\r\n\r\n# NOT OK with [0:32]:\r\n>>> x[slice(0, 32, None), ...]\r\n*** TypeError: only integer tensors of a single element can be converted to an index\r\n\r\n>>> x[0:16].shape\r\ntorch.Size([16, 1024, 8, 64])\r\n\r\n# ARGGGGGHHHH\r\n>>> x[0:32].shape\r\n*** TypeError: only integer tensors of a single element can be converted to an index\r\n\r\n>>> x[0:17].shape\r\n*** TypeError: only integer tensors of a single element can be converted to an index\r\n\r\n# What if we convert to Numpy? (result: it works fine)\r\n>>> x.detach().numpy()[0:64].shape\r\n(64, 1024, 8, 64)\r\n\r\n```\r\n\r\nWhat could be going on here?\r\n\r\nIf it is of any use, the error occurs at this specific line: https://github.com/pashtari/factorizer/blob/fa7f03dfe8c390f0993cbc0d161922d2de819a1d/factorizer/factorization/operations.py#L331\r\n\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n# This works fine, I cannot reproduce in this way\r\n>>> from monai.data import MetaTensor\r\n>>> x = MetaTensor(np.random.rand(128, 1024, 8, 64))\r\n>>> x[slice(0, 64, None), ...].shape\r\ntorch.Size([128, 1024, 8, 64])\r\n```\r\n\r\nHow is it possible that a specific tensor would cause such error?\r\n\r\n\r\n**Environment**\r\n\r\n```\r\nUbuntu 20.04\r\npython 3.10\r\n\r\nmonai                     1.1.0              pyhd8ed1ab_0    conda-forge\r\n\r\npytorch                   1.13.1          py3.10_cuda11.7_cudnn8.5.0_0    pytorch\r\npytorch-cuda              11.7                 h67b0de4_1    pytorch\r\npytorch-lightning         1.8.1              pyhd8ed1ab_0    conda-forge\r\npytorch-mutex             1.0                        cuda    pytorch\r\ntorchmetrics              0.11.0             pyhd8ed1ab_0    conda-forge\r\ntorchvision               0.14.1              py310_cu117    pytorch\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5805", "id": 1519017772, "node_id": "I_kwDODMjICc5ail8s", "number": 5805, "title": "runtests.sh doesn't check/auto install when `coverage` is missing", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-01-04T13:52:44Z", "updated_at": "2023-01-04T15:40:01Z", "closed_at": "2023-01-04T15:40:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n09:50:59  + bash runtests.sh --clean\r\n09:51:00  PYTHONPATH: /home/jenkins/agent/workspace/Monai-pip/monai:\r\n09:51:00  Python: /usr/bin/python\r\n09:51:05  clean\r\n09:51:05  /usr/bin/python: No module named coverage\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5805/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5777", "id": 1504200717, "node_id": "I_kwDODMjICc5ZqEgN", "number": 5777, "title": "Jupyter config error", "user": {"login": "KumoLiu", "id": 55491388, "node_id": "MDQ6VXNlcjU1NDkxMzg4", "avatar_url": "https://avatars.githubusercontent.com/u/55491388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KumoLiu", "html_url": "https://github.com/KumoLiu", "followers_url": "https://api.github.com/users/KumoLiu/followers", "following_url": "https://api.github.com/users/KumoLiu/following{/other_user}", "gists_url": "https://api.github.com/users/KumoLiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/KumoLiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KumoLiu/subscriptions", "organizations_url": "https://api.github.com/users/KumoLiu/orgs", "repos_url": "https://api.github.com/users/KumoLiu/repos", "events_url": "https://api.github.com/users/KumoLiu/events{/privacy}", "received_events_url": "https://api.github.com/users/KumoLiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-20T08:54:43Z", "updated_at": "2023-01-11T10:03:47Z", "closed_at": "2023-01-11T10:03:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen running jupyter notebook in the 1.1.0 container, report error below:\r\n```\r\n[C 08:47:06.307 NotebookApp] Bad config encountered during initialization: The 'contents_manager_class' trait of a NotebookApp instance expected a subclass of notebook.services.contents.manager.ContentsManager or jupyter_server.contents.services.managers.ContentsManage, not the JupytextContentsManager JupytextContentsManager.\r\n```\r\n\r\n**To Reproduce**\r\n1. docker pull projectmonai/monai:1.1.0\r\n2. create a new container \r\n3. run into container\r\n4.  run `jupyter notebook`\r\n\r\n**Environment**\r\n```\r\nMONAI version: 1.1.0\r\nNumpy version: 1.22.2\r\nPytorch version: 1.13.0a0+d0d6b1f\r\nMONAI flags: HAS_EXT = True, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: a2ec3752f54bfc3b40e7952234fbeb5452ed63e3\r\nMONAI __file__: /opt/monai/monai/__init__.py\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.10\r\nNibabel version: 4.0.2\r\nscikit-image version: 0.19.3\r\nPillow version: 9.0.1\r\nTensorboard version: 2.10.1\r\ngdown version: 4.6.0\r\nTorchVision version: 0.14.0a0\r\ntqdm version: 4.64.1\r\nlmdb version: 1.3.0\r\npsutil version: 5.9.2\r\npandas version: 1.4.4\r\neinops version: 0.6.0\r\ntransformers version: 4.21.3\r\nmlflow version: 2.0.1\r\npynrrd version: 1.0.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.5 LTS\r\nPlatform: Linux-5.15.0-56-generic-x86_64-with-glibc2.10\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.13\r\nProcess name: python\r\nCommand: ['python']\r\nOpen files: [popenfile(path='/root/.vscode-server/data/logs/20221220T084448/ptyhost.log', fd=19, position=0, mode='a', flags=33793)]\r\nNum physical CPUs: 12\r\nNum logical CPUs: 20\r\nNum usable CPUs: 20\r\nCPU usage (%): [3.7, 1.5, 4.1, 0.9, 3.8, 1.0, 4.0, 0.7, 10.7, 0.9, 6.4, 0.3, 5.6, 0.3, 5.4, 0.4, 1.9, 1.3, 0.7, 0.7]\r\nCPU freq. (MHz): 3505\r\nLoad avg. in last 1, 5, 15 mins (%): [2.4, 1.9, 1.0]\r\nDisk usage (%): 78.9\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 62.6\r\nAvailable memory (GB): 58.4\r\nUsed memory (GB): 3.5\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 2\r\nHas CUDA: True\r\nCUDA version: 11.8\r\ncuDNN enabled: True\r\ncuDNN version: 8600\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_52', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'sm_90', 'compute_90']\r\nGPU 0 Name: NVIDIA GeForce RTX 3090 Ti\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 84\r\nGPU 0 Total memory (GB): 23.7\r\nGPU 0 CUDA capability (maj.min): 8.6\r\nGPU 1 Name: NVIDIA GeForce RTX 3090 Ti\r\nGPU 1 Is integrated: False\r\nGPU 1 Is multi GPU board: False\r\nGPU 1 Multi processor count: 84\r\nGPU 1 Total memory (GB): 23.7\r\nGPU 1 CUDA capability (maj.min): 8.6\r\n```\r\n\r\n**Additional context**\r\nMONAI docker 1.0.1 works well.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5750", "id": 1497703073, "node_id": "I_kwDODMjICc5ZRSKh", "number": 5750, "title": "Inconsistencies post-processing results in HoVerNet", "user": {"login": "KumoLiu", "id": 55491388, "node_id": "MDQ6VXNlcjU1NDkxMzg4", "avatar_url": "https://avatars.githubusercontent.com/u/55491388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KumoLiu", "html_url": "https://github.com/KumoLiu", "followers_url": "https://api.github.com/users/KumoLiu/followers", "following_url": "https://api.github.com/users/KumoLiu/following{/other_user}", "gists_url": "https://api.github.com/users/KumoLiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/KumoLiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KumoLiu/subscriptions", "organizations_url": "https://api.github.com/users/KumoLiu/orgs", "repos_url": "https://api.github.com/users/KumoLiu/repos", "events_url": "https://api.github.com/users/KumoLiu/events{/privacy}", "received_events_url": "https://api.github.com/users/KumoLiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "KumoLiu", "id": 55491388, "node_id": "MDQ6VXNlcjU1NDkxMzg4", "avatar_url": "https://avatars.githubusercontent.com/u/55491388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KumoLiu", "html_url": "https://github.com/KumoLiu", "followers_url": "https://api.github.com/users/KumoLiu/followers", "following_url": "https://api.github.com/users/KumoLiu/following{/other_user}", "gists_url": "https://api.github.com/users/KumoLiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/KumoLiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KumoLiu/subscriptions", "organizations_url": "https://api.github.com/users/KumoLiu/orgs", "repos_url": "https://api.github.com/users/KumoLiu/repos", "events_url": "https://api.github.com/users/KumoLiu/events{/privacy}", "received_events_url": "https://api.github.com/users/KumoLiu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "KumoLiu", "id": 55491388, "node_id": "MDQ6VXNlcjU1NDkxMzg4", "avatar_url": "https://avatars.githubusercontent.com/u/55491388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KumoLiu", "html_url": "https://github.com/KumoLiu", "followers_url": "https://api.github.com/users/KumoLiu/followers", "following_url": "https://api.github.com/users/KumoLiu/following{/other_user}", "gists_url": "https://api.github.com/users/KumoLiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/KumoLiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KumoLiu/subscriptions", "organizations_url": "https://api.github.com/users/KumoLiu/orgs", "repos_url": "https://api.github.com/users/KumoLiu/repos", "events_url": "https://api.github.com/users/KumoLiu/events{/privacy}", "received_events_url": "https://api.github.com/users/KumoLiu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/26", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/26", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/26/labels", "id": 7224678, "node_id": "MI_kwDODMjICc4Abj1m", "number": 26, "title": "Pathology HoVerNet Training [P0 v1.1]", "description": "PIC: Nic\r\nhttps://github.com/orgs/Project-MONAI/projects/11", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2021-10-06T07:23:37Z", "updated_at": "2023-01-17T17:00:26Z", "due_on": "2022-11-14T08:00:00Z", "closed_at": "2023-01-17T17:00:26Z"}, "comments": 1, "created_at": "2022-12-15T02:54:22Z", "updated_at": "2022-12-15T08:33:40Z", "closed_at": "2022-12-15T08:33:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere are some inconsistencies between our post-processing implementation and the original author\u2019s post-processing implementation which may be a MONAI 1.1 blocker issue.\r\n\r\n![image](https://user-images.githubusercontent.com/55491388/207761462-a09fa658-7412-4644-88c6-4b5b4af9ef5e.png)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5728", "id": 1495378727, "node_id": "PR_kwDODMjICc5FYZEU", "number": 5728, "title": "Support MLFlow Handler for single process/multi task enviornment", "user": {"login": "SachidanandAlle", "id": 7339051, "node_id": "MDQ6VXNlcjczMzkwNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/7339051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SachidanandAlle", "html_url": "https://github.com/SachidanandAlle", "followers_url": "https://api.github.com/users/SachidanandAlle/followers", "following_url": "https://api.github.com/users/SachidanandAlle/following{/other_user}", "gists_url": "https://api.github.com/users/SachidanandAlle/gists{/gist_id}", "starred_url": "https://api.github.com/users/SachidanandAlle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SachidanandAlle/subscriptions", "organizations_url": "https://api.github.com/users/SachidanandAlle/orgs", "repos_url": "https://api.github.com/users/SachidanandAlle/repos", "events_url": "https://api.github.com/users/SachidanandAlle/events{/privacy}", "received_events_url": "https://api.github.com/users/SachidanandAlle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444320, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzIw", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/enhancement", "name": "enhancement", "color": "057639", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/74", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/74", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/74/labels", "id": 8589818, "node_id": "MI_kwDODMjICc4AgxH6", "number": 74, "title": "Experiment management [P0 v1.1]", "description": "PIC: Bin\r\nApply in bundles, workflow program, PyTorch program, etc.\r\nhttps://github.com/Project-MONAI/MONAI/issues/4903", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2022-10-27T22:58:48Z", "updated_at": "2022-12-19T21:22:29Z", "due_on": "2022-12-01T08:00:00Z", "closed_at": "2022-12-19T21:22:29Z"}, "comments": 10, "created_at": "2022-12-14T00:32:54Z", "updated_at": "2022-12-15T19:57:32Z", "closed_at": "2022-12-15T11:11:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/5728", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5728", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/5728.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/5728.patch", "merged_at": "2022-12-15T11:11:03Z"}, "body": "Signed-off-by: Sachidanand Alle <sachidanand.alle@gmail.com>\r\n\r\nCurrent MLFlow Handler fails when you invoke 2 train requests back to back with different URI.  Or multiple train requests within the same process.  This is mainly for using global array where it saves active experiment, active run and others share the same.  This will cause conflicts between 2 invokes with 2 different URI.\r\n\r\nFixes\r\n------\r\n- Use MLFlow Client to create experiment/runs instead of global functions.\r\n- Save the current run through the lifecycle of handler.  If any handler has the same experiment name and same run name, the metrics all will be merged as part of the same run (e.g. train and validation handler).\r\n- If the run name is not provided (fall back on default) then last active run within the same experiment (sorted based on start time) is used for adding the metrics.\r\n\r\nThe above two conditions will help create similar behavior compared to using `mlflow.active_run()`\r\n\r\n\r\nVerified\r\n---------\r\n- Running single and multi gpu training on bundles\r\n  - spleen_ct_segmentation_v0.1.0\r\n  - spleen_deepedit_annotation_v0.1.0\r\n  - swin_unetr_btcv_segmentation_v0.1.0\r\n- Running Training workflows for both single and multi gpu in MONAI Label\r\n- Verified against running shared/single tracking URI (where all the experiments get saved)\r\n- Verified against individual eval/mlruns per bundle/workflow\r\n\r\n> I suggest, original owner of this handler to verify/test all the behaviors that were currently supported.\r\n\r\nError Description\r\n---------\r\n\r\nError stack when you run two train workflows with in the same process (simply one after another).\r\n```\r\n[2022-12-13 21:08:11,095] [4047823] [MainThread] [ERROR] (uvicorn.error:369) - Exception in ASGI application\r\nTraceback (most recent call last):\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py\", line 366, in run_asgi\r\n    result = await app(self.scope, self.receive, self.send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py\", line 75, in __call__\r\n    return await self.app(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/fastapi/applications.py\", line 199, in __call__\r\n    await super().__call__(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/applications.py\", line 112, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 181, in __call__\r\n    raise exc from None\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/middleware/errors.py\", line 159, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/middleware/cors.py\", line 78, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/exceptions.py\", line 82, in __call__\r\n    raise exc from None\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/exceptions.py\", line 71, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/routing.py\", line 580, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/routing.py\", line 241, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/starlette/routing.py\", line 52, in app\r\n    response = await func(request)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/fastapi/routing.py\", line 219, in app\r\n    raw_response = await run_endpoint_function(\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/fastapi/routing.py\", line 152, in run_endpoint_function\r\n    return await dependant.call(**values)\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/endpoints/train.py\", line 96, in api_run_model\r\n    return run_model(model, params, run_sync, enqueue)\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/endpoints/train.py\", line 55, in run_model\r\n    res, detail = AsyncTask.run(\"train\", request=request, params=params, force_sync=run_sync, enqueue=enqueue)\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/utils/async_tasks/task.py\", line 43, in run\r\n    return instance.train(request), None\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/interfaces/app.py\", line 422, in train\r\n    result = task(request, self.datastore())\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/tasks/train/basic_train.py\", line 458, in __call__\r\n    res = self.train(0, world_size, req, datalist)\r\n  File \"/localhome/sachi/Projects/monailabel/monailabel/tasks/train/basic_train.py\", line 545, in train\r\n    context.trainer.run()\r\n  File \"/localhome/sachi/Projects/MONAI/monai/engines/trainer.py\", line 53, in run\r\n    super().run()\r\n  File \"/localhome/sachi/Projects/MONAI/monai/engines/workflow.py\", line 281, in run\r\n    super().run(data=self.data_loader, max_epochs=self.state.max_epochs)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 892, in run\r\n    return self._internal_run()\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 935, in _internal_run\r\n    return next(self._internal_run_generator)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 993, in _internal_run_as_gen\r\n    self._handle_exception(e)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 636, in _handle_exception\r\n    self._fire_event(Events.EXCEPTION_RAISED, e)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 425, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/localhome/sachi/Projects/MONAI/monai/handlers/stats_handler.py\", line 181, in exception_raised\r\n    raise e\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 946, in _internal_run_as_gen\r\n    self._fire_event(Events.STARTED)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/ignite/engine/engine.py\", line 425, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/localhome/sachi/Projects/MONAI/monai/handlers/mlflow_handler.py\", line 183, in start\r\n    self._delete_exist_param_in_dict(attrs)\r\n  File \"/localhome/sachi/Projects/MONAI/monai/handlers/mlflow_handler.py\", line 141, in _delete_exist_param_in_dict\r\n    log_data = self.client.get_run(cur_run.info.run_id).data\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/mlflow/tracking/client.py\", line 150, in get_run\r\n    return self._tracking_client.get_run(run_id)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/mlflow/tracking/_tracking_service/client.py\", line 72, in get_run\r\n    return self.store.get_run(run_id)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/mlflow/store/tracking/file_store.py\", line 623, in get_run\r\n    run_info = self._get_run_info(run_id)\r\n  File \"/localhome/sachi/.local/lib/python3.10/site-packages/mlflow/store/tracking/file_store.py\", line 646, in _get_run_info\r\n    raise MlflowException(\r\nmlflow.exceptions.MlflowException: Run '1765aea084a3417586d052d9d8240039' not found\r\nFAILED                                                                                                                                                           [ 72%]\r\n\r\n```\r\n\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [ ] Breaking change (fix or new feature that would cause existing functionality to change).\r\n- [ ] New tests added to cover the changes.\r\n- [ ] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [ ] Quick tests passed locally by running `./runtests.sh --quick --unittests  --disttests`.\r\n- [ ] In-line docstrings updated.\r\n- [ ] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5728/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5696", "id": 1486310432, "node_id": "I_kwDODMjICc5Yl0wg", "number": 5696, "title": "multi-thread context torch.inverse", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-12-09T08:25:41Z", "updated_at": "2023-02-13T21:11:48Z", "closed_at": "2023-02-13T20:24:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/utils/app.py\", line 132, in <module>\r\n    run_main()\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/utils/app.py\", line 121, in run_main\r\n    result = a.batch_infer(request)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/app.py\", line 338, in batch_infer\r\n    return self._batch_infer(request, datastore if datastore else self.datastore(), self.infer)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/tasks/batch_infer.py\", line 100, in __call__\r\n    res = future.result()\r\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 458, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\r\n    raise self._exception\r\n  File \"/usr/lib/python3.10/concurrent/futures/thread.py\", line 58, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/tasks/batch_infer.py\", line 124, in run_infer_task\r\n    r = infer(req, datastore)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/app.py\", line 300, in infer\r\n    result_file_name, result_json = task(request)\r\n  File \"/localhome/Projects/monailabel/monailabel/tasks/infer/basic_infer.py\", line 297, in __call__\r\n    data = self.run_pre_transforms(data, pre_transforms)\r\n  File \"/localhome/Projects/monailabel/monailabel/tasks/infer/basic_infer.py\", line 388, in run_pre_transforms\r\n    return run_transforms(data, transforms, log_prefix=\"PRE\", use_compose=False)\r\n  File \"/localhome/Projects/monailabel/monailabel/interfaces/utils/transform.py\", line 106, in run_transforms\r\n    data = t(data)\r\n  File \"/localhome/Projects/MONAI/monai/transforms/spatial/dictionary.py\", line 416, in __call__\r\n    d[key] = self.spacing_transform(\r\n  File \"/localhome/Projects/MONAI/monai/utils/deprecate_utils.py\", line 221, in _wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/localhome/Projects/MONAI/monai/transforms/spatial/array.py\", line 606, in __call__\r\n    data_array = self.sp_resample(\r\n  File \"/localhome/Projects/MONAI/monai/utils/deprecate_utils.py\", line 221, in _wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/localhome/Projects/MONAI/monai/transforms/spatial/array.py\", line 315, in __call__\r\n    img = affine_xform(img.unsqueeze(0), theta=xform, spatial_size=spatial_size).squeeze(0)\r\n  File \"/localhome/.local/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1190, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"/localhome/Projects/MONAI/monai/networks/layers/spatial_transforms.py\", line 556, in forward\r\n    theta = to_norm_affine(\r\n  File \"/localhome/Projects/MONAI/monai/networks/utils.py\", line 279, in to_norm_affine\r\n    return src_xform @ affine @ torch.inverse(dst_xform)\r\nRuntimeError: lazy wrapper should be called at most once\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5696/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5685", "id": 1484291384, "node_id": "I_kwDODMjICc5YeH04", "number": 5685, "title": "test_query_memory doesn't work for certain hardware config", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-12-08T10:27:00Z", "updated_at": "2022-12-08T12:15:47Z", "closed_at": "2022-12-08T12:15:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n======================================================================\r\nERROR: test_output_str (tests.test_query_memory.TestQueryMemory)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \u201c/tmp/MONAI/tests/test_query_memory.py\u201d, line 19, in test_output_str\r\n    self.assertTrue(isinstance(query_memory(2), str))\r\n  File \u201c/tmp/MONAI/tests/utils.py\u201d, line 728, in query_memory\r\n    free_memory = np.asarray(free_memory, dtype=float).T\r\nValueError: could not convert string to float: \u2018[N/A]\u2019\r\n----------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5685/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5668", "id": 1479883300, "node_id": "I_kwDODMjICc5YNTok", "number": 5668, "title": "SSIMLoss result does not have gradient", "user": {"login": "Can-Zhao", "id": 69829124, "node_id": "MDQ6VXNlcjY5ODI5MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/69829124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Can-Zhao", "html_url": "https://github.com/Can-Zhao", "followers_url": "https://api.github.com/users/Can-Zhao/followers", "following_url": "https://api.github.com/users/Can-Zhao/following{/other_user}", "gists_url": "https://api.github.com/users/Can-Zhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Can-Zhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Can-Zhao/subscriptions", "organizations_url": "https://api.github.com/users/Can-Zhao/orgs", "repos_url": "https://api.github.com/users/Can-Zhao/repos", "events_url": "https://api.github.com/users/Can-Zhao/events{/privacy}", "received_events_url": "https://api.github.com/users/Can-Zhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "PedroFerreiradaCosta", "id": 24161319, "node_id": "MDQ6VXNlcjI0MTYxMzE5", "avatar_url": "https://avatars.githubusercontent.com/u/24161319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PedroFerreiradaCosta", "html_url": "https://github.com/PedroFerreiradaCosta", "followers_url": "https://api.github.com/users/PedroFerreiradaCosta/followers", "following_url": "https://api.github.com/users/PedroFerreiradaCosta/following{/other_user}", "gists_url": "https://api.github.com/users/PedroFerreiradaCosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/PedroFerreiradaCosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PedroFerreiradaCosta/subscriptions", "organizations_url": "https://api.github.com/users/PedroFerreiradaCosta/orgs", "repos_url": "https://api.github.com/users/PedroFerreiradaCosta/repos", "events_url": "https://api.github.com/users/PedroFerreiradaCosta/events{/privacy}", "received_events_url": "https://api.github.com/users/PedroFerreiradaCosta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "PedroFerreiradaCosta", "id": 24161319, "node_id": "MDQ6VXNlcjI0MTYxMzE5", "avatar_url": "https://avatars.githubusercontent.com/u/24161319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PedroFerreiradaCosta", "html_url": "https://github.com/PedroFerreiradaCosta", "followers_url": "https://api.github.com/users/PedroFerreiradaCosta/followers", "following_url": "https://api.github.com/users/PedroFerreiradaCosta/following{/other_user}", "gists_url": "https://api.github.com/users/PedroFerreiradaCosta/gists{/gist_id}", "starred_url": "https://api.github.com/users/PedroFerreiradaCosta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PedroFerreiradaCosta/subscriptions", "organizations_url": "https://api.github.com/users/PedroFerreiradaCosta/orgs", "repos_url": "https://api.github.com/users/PedroFerreiradaCosta/repos", "events_url": "https://api.github.com/users/PedroFerreiradaCosta/events{/privacy}", "received_events_url": "https://api.github.com/users/PedroFerreiradaCosta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2022-12-06T18:44:50Z", "updated_at": "2022-12-09T08:36:27Z", "closed_at": "2022-12-09T08:36:27Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nSSIMLoss result does not have gradient\r\n@PedroFerreiradaCosta \r\n@wyli \r\n\r\n**To Reproduce**\r\n```\r\nimport torch\r\nfrom monai.losses.ssim_loss import SSIMLoss\r\n\r\nx = torch.ones([1,1,10,10])/2\r\ny = torch.ones([1,1,10,10])/2\r\ny.requires_grad_(True)\r\ndata_range = x.max().unsqueeze(0)\r\nloss = SSIMLoss(spatial_dims=2)(x,y,data_range)\r\nprint(loss.requires_grad)\r\n```\r\n\r\n**Expected behavior**\r\n`loss.requires_grad` will be False. But it should be True\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment**\r\n\r\nEnsuring you use the relevant python executable, please paste the output of:\r\n\r\n```\r\npython -c 'import monai; monai.config.print_debug_info()'\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5633", "id": 1473563622, "node_id": "I_kwDODMjICc5X1Mvm", "number": 5633, "title": "CacheDataset shared cache issues", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-02T23:11:58Z", "updated_at": "2023-03-21T23:03:18Z", "closed_at": "2023-03-21T23:03:18Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Due to the changes introduced in the PR:\r\nhttps://github.com/Project-MONAI/MONAI/pull/5630\r\n\r\nit became very inconvenient to use shared cache, and leads to potential crashes \r\n\r\npreviously, we introduced shared cache (via ListProxy) to speed up training and validation workflows significantly for users during multi-gpu training (with a minimal user changes, by simply setting CacheDataset(runtime_cahe=True))\r\nhttps://github.com/Project-MONAI/MONAI/pull/5365\r\n\r\n\r\n\r\nwith changes merged in PR https://github.com/Project-MONAI/MONAI/pull/5630, all that simplicity was removed, and shared cache allocation and management is left to a user.  A user needs to allocate it,  and synchronize between processes, and even manually set it to be of proper length.  \r\n\r\nInternally CacheDataset assigns self.cache_num to keep track of a number of cached elements.  Due to  PR https://github.com/Project-MONAI/MONAI/pull/5630, there is disconnect between  self.cache_num and self._cache, they are not of the same length, and a user doesn't know the self.cache_num to allocate a proper length.\r\n\r\n the new (and only way to use shared cache is) CacheDataset(runtime_cache = list_proxy)\r\n\r\n1. bug: len(list_proxy) == 0,  and self.num_cache > 0,  crash\r\n2. bug: len(list_proxy) < self.num_cache , crash\r\n3. potential bug: len(list_proxy) > self.num_cache, disconnect in length, can lead to unforeseen bugs in the future\r\n4. major inconvenience: a User needs to allocate cache manually as Manager().list() in master process and pass it to children. OR a user needs to allocate it in child process and use manual broadcasting  to synchronize.  Then ensure  a proper length. All these steps will be same for all users and use cases.  So now, there will be much more redundant coding every time someone wants to use shared memory caching. \r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5613", "id": 1470076472, "node_id": "I_kwDODMjICc5Xn5Y4", "number": 5613, "title": "CacheDataset shared memory,  during torchrun multi-gpu training", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/83", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83/labels", "id": 8599258, "node_id": "MI_kwDODMjICc4Agzba", "number": 83, "title": "Auto3D Seg framework [internal ongoing milestone]", "description": "PIC: Andriy", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 7, "closed_issues": 30, "state": "open", "created_at": "2022-10-31T14:15:29Z", "updated_at": "2023-04-19T06:06:10Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2022-11-30T18:47:28Z", "updated_at": "2022-12-02T18:50:30Z", "closed_at": "2022-12-02T18:50:30Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "CacheDataset with shared memory crashes during torchrun distributed training\r\n\r\nsteps to reproduce, run `torchrun --nproc_per_node=2 main.py`\r\n\r\n```\r\nimport torch, os\r\nimport torch.distributed as dist\r\nimport torch.multiprocessing as mp\r\nfrom monai.data import CacheDataset\r\n\r\n\r\nrank = int(os.getenv(\"LOCAL_RANK\"))\r\ndist.init_process_group(backend=\"nccl\", init_method=\"env://\") \r\ntorch.cuda.set_device(rank)\r\n\r\ndataset = CacheDataset(data=[1,2,3], runtime_cache=True)\r\n```\r\n\r\nthis errors doesn't accure if spawning multi-gpu processes manually (instead of torchrun). \r\nthis issue is  because \"broadcast_object_list\" checks for authkey in each process, and  torchrun has these keys different. ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5613/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5578", "id": 1462821955, "node_id": "I_kwDODMjICc5XMORD", "number": 5578, "title": "flake8 released 6.0.0 and breaks our ci tests", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-24T06:20:35Z", "updated_at": "2022-11-24T07:53:57Z", "closed_at": "2022-11-24T07:53:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For examples:\r\n\r\nin MONAI: https://github.com/Project-MONAI/MONAI/actions/runs/3535256520/jobs/5933068678\r\nin model zoo: \r\nhttps://github.com/Project-MONAI/model-zoo/actions/runs/3536887667/jobs/5938751674\r\n\r\nI just noticed that flake8 releases its 6.0.0 version (https://github.com/PyCQA/flake8/commit/b9a7794c4f425ef8419081e6993f99419cc667ea), it may have some breaking changes that raise the issue.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5578/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5573", "id": 1462209493, "node_id": "I_kwDODMjICc5XJ4vV", "number": 5573, "title": "CacheDataset crashes with runtime_cache=True, num_workers=0 in DDP", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/83", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83/labels", "id": 8599258, "node_id": "MI_kwDODMjICc4Agzba", "number": 83, "title": "Auto3D Seg framework [internal ongoing milestone]", "description": "PIC: Andriy", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 7, "closed_issues": 30, "state": "open", "created_at": "2022-10-31T14:15:29Z", "updated_at": "2023-04-19T06:06:10Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2022-11-23T18:20:16Z", "updated_at": "2022-12-02T08:54:32Z", "closed_at": "2022-12-02T08:54:31Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "CacheDataset crashes with runtime_cache=True, num_workers=0 in DDP\r\n\r\nThis is because we try to convert a shared list (ListProxy) to a regular list, but must maintain a ListProxy since we're in DDP, and need to access the shared items from different processes. \r\n\r\nthe exact error is this , that is unable to convert. But even if we can convert, we should not do in DDP, since need a ListProxy\r\n\r\nEDIT: expected behavior below:\r\n\r\n- it should not crash\r\n- we should not call disable_share_memory_cache in DataLoader, if in DDP and using runtime_cache, even for num_workers==0, because we still need to use ListProxy  (it is needed for different processes in DDP to read/write to the same cache indices).   if we convert ListProxy -> List in such case, we will get memory copies in each process (potentially going OOM).\r\n\r\n\r\n```\r\nTraceback (most recent call last):                                                                                                                              \r\n  File \"/usr/local/lib/python3.8/dist-packages/torch/multiprocessing/spawn.py\", line 69, in _wrap                                                               \r\n    fn(i, *args)                                                                                                                                                \r\n  File \"/scripts/segmenter.py\", line 1032, in run_segmenter_worker                                       \r\n    best_metric = segmenter.run()                                                                                                                               \r\n  File \"//scripts/segmenter.py\", line 696, in run\r\n    self.train()\r\n  File \"/scripts/segmenter.py\", line 732, in train\r\n    train_loader = DataLoader(train_ds, batch_size=config[\"batch_size\"], shuffle=(train_sampler is None),  num_workers=config[\"num_workers\"], sampler=train_sampler, pin_memory=True)\r\n  File \"/mnt/amproj/Code/MONAI/monai/data/dataloader.py\", line 87, in __init__\r\n    dataset.disable_share_memory_cache() \r\n  File \"/MONAI/monai/data/dataset.py\", line 855, in disable_share_memory_cache\r\n    self._cache = list(self._cache)\r\n  File \"<string>\", line 2, in __len__\r\n  File \"/usr/lib/python3.8/multiprocessing/managers.py\", line 831, in _callmethod\r\n    self._connect()\r\n  File \"/usr/lib/python3.8/multiprocessing/managers.py\", line 818, in _connect\r\n    conn = self._Client(self._token.address, authkey=self._authkey)\r\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 502, in Client\r\n    c = SocketClient(address)\r\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 630, in SocketClient\r\n    s.connect(address)\r\nFileNotFoundError: [Errno 2] No such file or directory\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5532", "id": 1450354584, "node_id": "I_kwDODMjICc5WcqeY", "number": 5532, "title": "bug: MetaTensor .shape() returns Tuple instead of torch.Size", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-11-15T20:43:11Z", "updated_at": "2022-11-17T04:48:54Z", "closed_at": "2022-11-17T04:48:54Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "MetaTensor .shape() returns tuple instead of torch.Size. If MetaTensor is subclass of torch.Tensor, it should not change it methods\r\n\r\n```\r\nimport torch\r\nfrom monai.data import MetaTensor\r\n\r\na = torch.rand(1,2,3)\r\nprint(a.shape, type(a.shape)) # prints torch.Size([1, 2, 3]) <class 'torch.Size'>\r\n\r\na_meta = MetaTensor(a)\r\nprint(a_meta.shape, type(a_meta.shape)) # prints (1, 2, 3) <class 'tuple'>\r\n\r\nprint('numel of last two dims', a.shape[1:].numel()) # prints 6\r\nprint('numel of last two dims', a_meta.shape[1:].numel()) # crashes\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'tuple' object has no attribute 'numel'\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5532/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5501", "id": 1442405444, "node_id": "I_kwDODMjICc5V-VxE", "number": 5501, "title": "tests.test_sampler_dist -- windows", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-09T16:36:12Z", "updated_at": "2022-11-09T18:17:41Z", "closed_at": "2022-11-09T18:17:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "log: https://github.com/Project-MONAI/MONAI/actions/runs/3429344900/jobs/5714838305\r\n\r\n```\r\ntest_cachedataset (tests.test_sampler_dist.DistributedSamplerTest) ... torch.testing.assert_allclose() is deprecated since 1.12 and will be removed in 1.14. Use torch.testing.assert_close() instead. For detailed upgrade instructions see https://github.com/pytorch/pytorch/issues/61844.\r\ntorch.testing.assert_allclose() is deprecated since 1.12 and will be removed in 1.14. Use torch.testing.assert_close() instead. For detailed upgrade instructions see https://github.com/pytorch/pytorch/issues/61844.\r\nProcess SpawnProcess-157:\r\nTraceback (most recent call last):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 475, in run_process\r\n    raise e\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 466, in run_process\r\n    func(*args, **kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 634, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\test_sampler_dist.py\", line 61, in test_cachedataset\r\n    for k, d in enumerate(dataloader):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 628, in __next__\r\n    data = self._next_data()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 1333, in _next_data\r\n    return self._process_data(data)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 1359, in _process_data\r\n    data.reraise()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\_utils.py\", line 543, in reraise\r\n    raise exception\r\nFileNotFoundError: Caught FileNotFoundError in DataLoader worker process 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\managers.py\", line 827, in _callmethod\r\n    conn = self._tls.connection\r\nAttributeError: 'ForkAwareLocal' object has no attribute 'connection'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\_utils\\worker.py\", line 302, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\_utils\\fetch.py\", line 58, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\site-packages\\torch\\utils\\data\\_utils\\fetch.py\", line 58, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"D:\\a\\MONAI\\MONAI\\monai\\data\\dataset.py\", line 107, in __getitem__\r\n    return self._transform(index)\r\n  File \"D:\\a\\MONAI\\MONAI\\monai\\data\\dataset.py\", line 908, in _transform\r\n    data = self._cache[cache_index]\r\n  File \"<string>\", line 2, in __getitem__\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\managers.py\", line 831, in _callmethod\r\n    self._connect()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\managers.py\", line 818, in _connect\r\n    conn = self._Client(self._token.address, authkey=self._authkey)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\connection.py\", line 500, in Client\r\n    c = PipeClient(address)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\connection.py\", line 702, in PipeClient\r\n    _winapi.WaitNamedPipe(address, 1000)\r\nFileNotFoundError: [WinError 2] The system cannot find the file specified\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5498", "id": 1442049421, "node_id": "I_kwDODMjICc5V8-2N", "number": 5498, "title": "__call__() and _compute_metric() in SSIMMetric  ", "user": {"login": "Joeycho", "id": 29337166, "node_id": "MDQ6VXNlcjI5MzM3MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/29337166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Joeycho", "html_url": "https://github.com/Joeycho", "followers_url": "https://api.github.com/users/Joeycho/followers", "following_url": "https://api.github.com/users/Joeycho/following{/other_user}", "gists_url": "https://api.github.com/users/Joeycho/gists{/gist_id}", "starred_url": "https://api.github.com/users/Joeycho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Joeycho/subscriptions", "organizations_url": "https://api.github.com/users/Joeycho/orgs", "repos_url": "https://api.github.com/users/Joeycho/repos", "events_url": "https://api.github.com/users/Joeycho/events{/privacy}", "received_events_url": "https://api.github.com/users/Joeycho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-09T12:55:35Z", "updated_at": "2022-11-10T15:27:34Z", "closed_at": "2022-11-10T15:27:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nHello, I cannot store values as buffers in SSIMMetric, for calculating the metric later.\r\n\r\n```py\r\nself.ssim_metric._compute_metric(x,y) # By _compute_metric() it works.\r\nself.ssim_metric(x,y) # It does not work.\r\n\r\n```\r\n\r\n**To Reproduce**\r\n\r\n1.\r\n```py\r\n\r\nx = torch.ones([2,1,10,10,10])/2 # ground truth\r\ny = torch.ones([2,1,10,10,10])/2 # prediction\r\nself.ssim_metric = SSIMMetric(data_range =torch.tensor([255.0], device=\"cpu\") ,spatial_dims= 3)\r\n           \r\n# the following line should print 1.0 (or 0.9999)\r\nprint(self.ssim_metric(x,y))\r\n```\r\n\r\n**Expected behavior**\r\n```\r\ntensor(1.)\r\n```\r\n**Screenshots**\r\n```\r\n*** TypeError: split expects at least a 1-dimensional tensor. `data` should be a batch-first tensor or a list of channel-first tensors, got <class 'torch.Tensor'>\r\n```\r\n**Environment**\r\n\r\nEnsuring you use the relevant python executable, please paste the output of:\r\n\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 1.0.0\r\nNumpy version: 1.23.1\r\nPytorch version: 1.12.1\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: 170093375ce29267e45681fcec09dfa856e1d7e7\r\nMONAI __file__: /u/home/xxx/.conda/envs/unet_torch/lib/python3.10/site-packages/monai/__init__.py\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.\r\nNibabel version: 4.0.2\r\nscikit-image version: 0.19.3\r\nPillow version: 9.2.0\r\nTensorboard version: 2.10.1\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: 0.13.1\r\ntqdm version: 4.64.1\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: 5.9.2\r\npandas version: 1.5.0\r\neinops version: NOT INSTALLED or UNKNOWN VERSION.\r\ntransformers version: NOT INSTALLED or UNKNOWN VERSION.\r\nmlflow version: NOT INSTALLED or UNKNOWN VERSION.\r\npynrrd version: NOT INSTALLED or UNKNOWN VERSION.\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.5 LTS\r\nPlatform: Linux-5.14.0-1052-oem-x86_64-with-glibc2.31\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.10.4\r\nProcess name: python\r\nCommand: ['python', '-c', 'import monai; monai.config.print_debug_info()']\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 2\r\nHas CUDA: True\r\nCUDA version: 11.3\r\ncuDNN enabled: True\r\ncuDNN version: 8302\r\nCurrent device: 0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5430", "id": 1428077294, "node_id": "I_kwDODMjICc5VHrru", "number": 5430, "title": "DataAnalyser imporvements", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444320, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzIw", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/enhancement", "name": "enhancement", "color": "057639", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": {"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mingxin-zheng", "id": 18563433, "node_id": "MDQ6VXNlcjE4NTYzNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/18563433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingxin-zheng", "html_url": "https://github.com/mingxin-zheng", "followers_url": "https://api.github.com/users/mingxin-zheng/followers", "following_url": "https://api.github.com/users/mingxin-zheng/following{/other_user}", "gists_url": "https://api.github.com/users/mingxin-zheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingxin-zheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingxin-zheng/subscriptions", "organizations_url": "https://api.github.com/users/mingxin-zheng/orgs", "repos_url": "https://api.github.com/users/mingxin-zheng/repos", "events_url": "https://api.github.com/users/mingxin-zheng/events{/privacy}", "received_events_url": "https://api.github.com/users/mingxin-zheng/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/83", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83/labels", "id": 8599258, "node_id": "MI_kwDODMjICc4Agzba", "number": 83, "title": "Auto3D Seg framework [internal ongoing milestone]", "description": "PIC: Andriy", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 7, "closed_issues": 30, "state": "open", "created_at": "2022-10-31T14:15:29Z", "updated_at": "2023-04-19T06:06:10Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2022-10-29T04:22:06Z", "updated_at": "2023-04-12T13:40:11Z", "closed_at": "2023-04-12T13:39:47Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "auto3dseg.DataAnalyser improvements:\r\n\r\n- it should run on GPU by default. Current implementation always runs on CPU, without any options to change it\r\n- histogram stats needs reworking.  The default should not be -500..500 intensity range (which is very specific for certain CT data).  there should be a better logic, if this range is not provided. \r\nAs a workaround - if it is not provided, we can skip this stat completely.\r\n- ~~when running on GPU we should use parallel workers of DataLoader (currently it's not in parallel).~~\r\n- ~~connected components. I think we can have  this option as False by default to speed up data analysis~~\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5414", "id": 1424961368, "node_id": "I_kwDODMjICc5U7y9Y", "number": 5414, "title": "MetaTensor size bug in transform function", "user": {"login": "chuxiang93", "id": 11666931, "node_id": "MDQ6VXNlcjExNjY2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/11666931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chuxiang93", "html_url": "https://github.com/chuxiang93", "followers_url": "https://api.github.com/users/chuxiang93/followers", "following_url": "https://api.github.com/users/chuxiang93/following{/other_user}", "gists_url": "https://api.github.com/users/chuxiang93/gists{/gist_id}", "starred_url": "https://api.github.com/users/chuxiang93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chuxiang93/subscriptions", "organizations_url": "https://api.github.com/users/chuxiang93/orgs", "repos_url": "https://api.github.com/users/chuxiang93/repos", "events_url": "https://api.github.com/users/chuxiang93/events{/privacy}", "received_events_url": "https://api.github.com/users/chuxiang93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-27T03:11:51Z", "updated_at": "2022-10-27T16:43:56Z", "closed_at": "2022-10-27T09:31:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since SIZE is a function of the class metatensor, this sentence does not work. The correct way should be  \"fg_indices.size()[0]\".\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/f407fcce1c32c050f327b26a16b7f7bc8a01f593/monai/transforms/utils.py#L512", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5414/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5413", "id": 1424834427, "node_id": "I_kwDODMjICc5U7T97", "number": 5413, "title": "include_background=False, softmax=True doesn't work properly in DiceFocalLoss for binary segmentation", "user": {"login": "jwc-rad", "id": 23609332, "node_id": "MDQ6VXNlcjIzNjA5MzMy", "avatar_url": "https://avatars.githubusercontent.com/u/23609332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwc-rad", "html_url": "https://github.com/jwc-rad", "followers_url": "https://api.github.com/users/jwc-rad/followers", "following_url": "https://api.github.com/users/jwc-rad/following{/other_user}", "gists_url": "https://api.github.com/users/jwc-rad/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwc-rad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwc-rad/subscriptions", "organizations_url": "https://api.github.com/users/jwc-rad/orgs", "repos_url": "https://api.github.com/users/jwc-rad/repos", "events_url": "https://api.github.com/users/jwc-rad/events{/privacy}", "received_events_url": "https://api.github.com/users/jwc-rad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-27T00:09:31Z", "updated_at": "2022-10-27T16:43:47Z", "closed_at": "2022-10-27T11:56:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Environment**\r\nmonai 1.0.1\r\n\r\n**Describe the bug**\r\nWhen using `include_background=False, softmax=True` in DiceFocalLoss for binary segmentation, the Dice part produces this warning and does not apply softmax when calculating the Dice loss:\r\n```\r\nUserWarning: single channel prediction, `softmax=True` ignored.\r\n  warnings.warn(\"single channel prediction, `softmax=True` ignored.\")\r\n```\r\n\r\n**To Reproduce**\r\n```\r\nimport torch\r\nfrom monai.losses import DiceFocalLoss\r\nfrom monai.networks import one_hot\r\n\r\ntx = torch.rand(1, 2, 256, 256) # logits\r\nty = one_hot((torch.rand(1, 1, 256, 256) > 0.5).long(), 2) # one-hot label\r\nloss = DiceFocalLoss(include_background=False, softmax=True)\r\nloss(tx, ty)\r\n```\r\n\r\n**Expected behavior & Additional context**\r\nBy `include_background=False`, since the first channel is removed before passing the input and target to Dice and Focal losses, the Dice loss cannot apply softmax to the input which now has only one channel.\r\nhttps://github.com/Project-MONAI/MONAI/blob/f407fcce1c32c050f327b26a16b7f7bc8a01f593/monai/losses/dice.py#L849-L860\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5413/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5393", "id": 1421990926, "node_id": "I_kwDODMjICc5UwdwO", "number": 5393, "title": "test_hovernet_loss error ", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-25T07:24:45Z", "updated_at": "2022-10-25T20:18:33Z", "closed_at": "2022-10-25T20:18:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n[2022-10-25T01:51:33.989Z] ======================================================================\r\n[2022-10-25T01:51:33.989Z] ERROR: test_shape_0 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:33.989Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:33.989Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:33.989Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:33.989Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:33.989Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:33.989Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:33.989Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.989Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.989Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:33.989Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:33.989Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.989Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:33.990Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:33.990Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:33.990Z] \r\n[2022-10-25T01:51:33.990Z] ======================================================================\r\n[2022-10-25T01:51:33.990Z] ERROR: test_shape_1 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:33.990Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:33.990Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:33.990Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:33.990Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:33.990Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:33.990Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:33.990Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:33.990Z] \r\n[2022-10-25T01:51:33.990Z] ======================================================================\r\n[2022-10-25T01:51:33.990Z] ERROR: test_shape_2 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:33.990Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:33.990Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:33.990Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:33.990Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:33.990Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:33.990Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:33.990Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:33.990Z] \r\n[2022-10-25T01:51:33.990Z] ======================================================================\r\n[2022-10-25T01:51:33.990Z] ERROR: test_shape_3 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:33.990Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:33.990Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:33.990Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:33.990Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:33.990Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:33.990Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2811, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return handle_torch_function(\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/overrides.py\", line 1252, in handle_torch_function\r\n[2022-10-25T01:51:33.990Z]     result = overloaded_arg.__torch_function__(public_api, types, args, kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/data/meta_tensor.py\", line 249, in __torch_function__\r\n[2022-10-25T01:51:33.990Z]     ret = super().__torch_function__(func, types, args, kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 1023, in __torch_function__\r\n[2022-10-25T01:51:33.990Z]     ret = func(*args, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:33.990Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:33.990Z] \r\n[2022-10-25T01:51:33.990Z] ======================================================================\r\n[2022-10-25T01:51:33.990Z] ERROR: test_shape_4 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:33.990Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:33.990Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:33.990Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:33.990Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:33.990Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:33.990Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:33.990Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2811, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return handle_torch_function(\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/overrides.py\", line 1252, in handle_torch_function\r\n[2022-10-25T01:51:33.990Z]     result = overloaded_arg.__torch_function__(public_api, types, args, kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/data/meta_tensor.py\", line 249, in __torch_function__\r\n[2022-10-25T01:51:33.990Z]     ret = super().__torch_function__(func, types, args, kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 1023, in __torch_function__\r\n[2022-10-25T01:51:33.990Z]     ret = func(*args, **kwargs)\r\n[2022-10-25T01:51:33.990Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:33.990Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:33.990Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:34.248Z] \r\n[2022-10-25T01:51:34.248Z] ======================================================================\r\n[2022-10-25T01:51:34.248Z] ERROR: test_shape_5 (tests.test_hovernet_loss.TestHoverNetLoss)\r\n[2022-10-25T01:51:34.248Z] ----------------------------------------------------------------------\r\n[2022-10-25T01:51:34.248Z] Traceback (most recent call last):\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-10-25T01:51:34.248Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_hovernet_loss.py\", line 177, in test_shape\r\n[2022-10-25T01:51:34.248Z]     result = loss(**input_param).to(device)\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:34.248Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/apps/pathology/losses/hovernet_loss.py\", line 124, in forward\r\n[2022-10-25T01:51:34.248Z]     ce_loss_np = self.ce(prediction[HoVerNetBranch.NP.value], target[HoVerNetBranch.NP.value]) * self.lambda_np_ce\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/module.py\", line 1051, in _call_impl\r\n[2022-10-25T01:51:34.248Z]     return forward_call(*input, **kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/modules/loss.py\", line 1120, in forward\r\n[2022-10-25T01:51:34.248Z]     return F.cross_entropy(input, target, weight=self.weight,\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2811, in cross_entropy\r\n[2022-10-25T01:51:34.248Z]     return handle_torch_function(\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/overrides.py\", line 1252, in handle_torch_function\r\n[2022-10-25T01:51:34.248Z]     result = overloaded_arg.__torch_function__(public_api, types, args, kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/data/meta_tensor.py\", line 249, in __torch_function__\r\n[2022-10-25T01:51:34.248Z]     ret = super().__torch_function__(func, types, args, kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/_tensor.py\", line 1023, in __torch_function__\r\n[2022-10-25T01:51:34.248Z]     ret = func(*args, **kwargs)\r\n[2022-10-25T01:51:34.248Z]   File \"/usr/local/lib/python3.8/dist-packages/torch/nn/functional.py\", line 2824, in cross_entropy\r\n[2022-10-25T01:51:34.248Z]     return torch._C._nn.cross_entropy_loss(input, target, weight, _Reduction.get_enum(reduction), ignore_index)\r\n[2022-10-25T01:51:34.248Z] RuntimeError: only batches of spatial targets supported (3D tensors) but got targets of dimension: 4\r\n[2022-10-25T01:51:34.248Z] \r\n[2022-10-25T01:51:34.248Z] ----------------------------------------------------------------------\r\n```\r\n\r\nversion\r\n```\r\n[2022-10-25T01:22:05.326Z] MONAI version: 1.0.0+65.g06dc983c\r\n[2022-10-25T01:22:05.326Z] Numpy version: 1.23.4\r\n[2022-10-25T01:22:05.326Z] Pytorch version: 1.9.1+cu102\r\n[2022-10-25T01:22:05.326Z] MONAI flags: HAS_EXT = True, USE_COMPILED = True, USE_META_DICT = False\r\n[2022-10-25T01:22:05.326Z] MONAI rev id: 06dc983c64ad7242a11714bd3a98d6d0564c63ba\r\n[2022-10-25T01:22:05.326Z] MONAI __file__: /home/jenkins/agent/workspace/Monai-pytorch-versions/monai/__init__.py\r\n[2022-10-25T01:22:05.326Z] \r\n[2022-10-25T01:22:05.326Z] Optional dependencies:\r\n[2022-10-25T01:22:05.326Z] Pytorch Ignite version: 0.4.10\r\n[2022-10-25T01:22:05.326Z] Nibabel version: 4.0.2\r\n[2022-10-25T01:22:05.326Z] scikit-image version: 0.19.3\r\n[2022-10-25T01:22:05.326Z] Pillow version: 9.2.0\r\n[2022-10-25T01:22:05.326Z] Tensorboard version: 2.10.1\r\n[2022-10-25T01:22:05.326Z] gdown version: 4.5.3\r\n[2022-10-25T01:22:05.326Z] TorchVision version: 0.10.1+cu102\r\n[2022-10-25T01:22:05.326Z] tqdm version: 4.64.1\r\n[2022-10-25T01:22:05.326Z] lmdb version: 1.3.0\r\n[2022-10-25T01:22:05.326Z] psutil version: 5.9.3\r\n[2022-10-25T01:22:05.326Z] pandas version: 1.5.1\r\n[2022-10-25T01:22:05.326Z] einops version: 0.5.0\r\n[2022-10-25T01:22:05.326Z] transformers version: 4.21.3\r\n[2022-10-25T01:22:05.326Z] mlflow version: 1.30.0\r\n[2022-10-25T01:22:05.326Z] pynrrd version: 1.0.0\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5292", "id": 1401762417, "node_id": "PR_kwDODMjICc5AbNU0", "number": 5292, "title": "fixes DiceCELoss for multichannel targets", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/83", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/83/labels", "id": 8599258, "node_id": "MI_kwDODMjICc4Agzba", "number": 83, "title": "Auto3D Seg framework [internal ongoing milestone]", "description": "PIC: Andriy", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 7, "closed_issues": 30, "state": "open", "created_at": "2022-10-31T14:15:29Z", "updated_at": "2023-04-19T06:06:10Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2022-10-08T00:23:47Z", "updated_at": "2022-10-31T14:35:37Z", "closed_at": "2022-10-12T19:02:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/5292", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5292", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/5292.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/5292.patch", "merged_at": "2022-10-12T19:02:12Z"}, "body": "Fixes DiceCELoss for multichannel targets.\r\nCurrently if \"target\" (ground truth label) is provided as a multichannel data (each channel is binary or float), then current DiceCELoss attempts to convert it to 1-channel using argmax (which could be impossible with overlapping labels).  There is no need for argmax, since pytorch's cross entropy can handle multi-channel targets already. \r\n\r\n\r\n\r\nA few sentences describing the changes proposed in this pull request.\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [ ] Breaking change (fix or new feature that would cause existing functionality to change).\r\n- [ ] New tests added to cover the changes.\r\n- [ ] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [ ] Quick tests passed locally by running `./runtests.sh --quick --unittests  --disttests`.\r\n- [ ] In-line docstrings updated.\r\n- [ ] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5292/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5291", "id": 1401665340, "node_id": "I_kwDODMjICc5Ti7c8", "number": 5291, "title": " import cv2 + nvidia/pytorch:22.09-py3 + DistributedDataParallel. (FIND was unable to find an engine)", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/52", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/52", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/52/labels", "id": 8248670, "node_id": "MI_kwDODMjICc4Afd1e", "number": 52, "title": "Auto3DSeg framework [P0 v1.0]", "description": "PIC: Dong/Mingxin\r\nEase of use to build near SOTA 3D Segm models.\r\n\r\nDevelopment plan for the first release: https://github.com/Project-MONAI/MONAI/issues/4743 ", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2022-07-28T21:35:59Z", "updated_at": "2023-03-12T11:14:50Z", "due_on": "2022-09-12T07:00:00Z", "closed_at": "2022-10-28T07:24:28Z"}, "comments": 16, "created_at": "2022-10-07T21:05:35Z", "updated_at": "2022-10-11T22:24:02Z", "closed_at": "2022-10-11T20:41:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "EDIT: the bug is reproducable in the newest nvidia/pytorch:22.09-py3 docker container, but is not reproducible in older container (older pytorch/cudnn)\r\n\r\nSomething in MetaTensor makes DistributedDataParallel fail \r\n(this is in addition to this bug https://github.com/Project-MONAI/MONAI/issues/5283)\r\n\r\nFor example this code fails\r\n\r\n```\r\nimport torch.distributed as dist\r\nimport torch\r\n\r\nfrom monai.data import MetaTensor\r\n#from monai.config.type_definitions import NdarrayTensor\r\n\r\nfrom torch.cuda.amp import autocast  \r\ntorch.autograd.set_detect_anomaly(True)\r\n\r\ndef main():\r\n\r\n    ngpus_per_node = torch.cuda.device_count()\r\n    torch.multiprocessing.spawn(main_worker, nprocs=ngpus_per_node, args=(ngpus_per_node,))\r\n\r\ndef main_worker(rank, ngpus_per_node):\r\n\r\n    print(f\"rank {rank}\")\r\n\r\n    dist.init_process_group(backend='nccl', init_method='tcp://127.0.0.1:23456', world_size=ngpus_per_node, rank=rank)\r\n    torch.backends.cudnn.benchmark = True\r\n\r\n    model = torch.nn.Conv3d(in_channels=1, out_channels=32, kernel_size=3, bias=True).to(rank)\r\n    model = torch.nn.parallel.DistributedDataParallel(model, device_ids=[rank], output_device=rank, find_unused_parameters=False)\r\n\r\n    x = torch.ones(1, 1, 192, 192, 192).to(rank)\r\n    with autocast(enabled=True):\r\n        out = model(x)\r\n\r\n    print(\"Done.\", out.shape)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nwith error\r\n\r\n```\r\n-- Process 6 terminated with the following error:                                                                                                               \r\nTraceback (most recent call last):                                                                                                                              \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/multiprocessing/spawn.py\", line 69, in _wrap                                                               \r\n    fn(i, *args)                                                                                                                                                \r\n  File \"/mnt/amproj/Code/automl/tasks/hecktor22/autoconfig_segresnet/test_monai.py\", line 29, in main_worker                                                    \r\n    out = model(x)                                                                                                                                              \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1185, in _call_impl                                                            \r\n    return forward_call(*input, **kwargs)                                                                                                                       \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 1015, in forward                                                         \r\n    output = self._run_ddp_forward(*inputs, **kwargs)                                                                                                           \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/parallel/distributed.py\", line 976, in _run_ddp_forward                                                 \r\n    return module_to_run(*inputs[0], **kwargs[0])                                                                                                               \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1185, in _call_impl                                                            \r\n    return forward_call(*input, **kwargs)                                                                                                                       \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/modules/conv.py\", line 613, in forward                                                                  \r\n    return self._conv_forward(input, self.weight, self.bias)                                                                                                    \r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/nn/modules/conv.py\", line 608, in _conv_forward\r\n    return F.conv3d(\r\nRuntimeError: FIND was unable to find an engine to execute this computation\r\n```\r\n\r\n\r\nThe MetaTensor is actually never used/initialized here, but something it it (or it's imports) makes the code fail. Since we import MetaTensor everywhere, any code with it fails. I've traced it down to this import (inside of MetaTensor.py)\r\n`from monai.config.type_definitions import NdarrayTensor`\r\n\r\nimporting this line also makes the code fail. \r\n\r\nSomehow it confuses conv3d operation, and possibly other operations", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5255", "id": 1395165169, "node_id": "PR_kwDODMjICc5AFBIC", "number": 5255, "title": "fix bug in retina detector", "user": {"login": "Can-Zhao", "id": 69829124, "node_id": "MDQ6VXNlcjY5ODI5MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/69829124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Can-Zhao", "html_url": "https://github.com/Can-Zhao", "followers_url": "https://api.github.com/users/Can-Zhao/followers", "following_url": "https://api.github.com/users/Can-Zhao/following{/other_user}", "gists_url": "https://api.github.com/users/Can-Zhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Can-Zhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Can-Zhao/subscriptions", "organizations_url": "https://api.github.com/users/Can-Zhao/orgs", "repos_url": "https://api.github.com/users/Can-Zhao/repos", "events_url": "https://api.github.com/users/Can-Zhao/events{/privacy}", "received_events_url": "https://api.github.com/users/Can-Zhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-03T18:42:55Z", "updated_at": "2022-10-03T20:02:17Z", "closed_at": "2022-10-03T20:02:16Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/5255", "html_url": "https://github.com/Project-MONAI/MONAI/pull/5255", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/5255.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/5255.patch", "merged_at": "2022-10-03T20:02:16Z"}, "body": "Signed-off-by: Can Zhao <canz@nvidia.com>\r\n\r\nFixes #5250.\r\n\r\n### Description\r\n\r\nFixed bug that allow_low_quality_matches in set_regular_matcher was always set to True and it's not using value from the argument, in retinanet.\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [ ] Breaking change (fix or new feature that would cause existing functionality to change).\r\n- [ ] New tests added to cover the changes.\r\n- [ ] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [ ] Quick tests passed locally by running `./runtests.sh --quick --unittests  --disttests`.\r\n- [x] In-line docstrings updated.\r\n- [ ] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5255/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5253", "id": 1395064077, "node_id": "I_kwDODMjICc5TJv0N", "number": 5253, "title": "`SpacingD` transform bug for certain affine input", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-10-03T17:16:42Z", "updated_at": "2022-10-04T13:58:32Z", "closed_at": "2022-10-04T13:58:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I use the `SpacingD` transforms after  `LoadImageD`  and `AddChannelD`. I read in a nifti file of shape [368, 336, 368] , the input to the `spacingD` [1, 368, 336, 368]. The outputs of spacingD is a matrix with zeros.\r\n\r\nI followed the trace and the last time I see non-zeros matrix is at \r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/networks/layers/spatial_transforms.py#L575\r\n\r\nThe generated grid has a range [1,3] but the `torch.grid_sample` expects range [-1, 1].\r\nMore details here- \r\nhttps://pytorch.org/docs/stable/generated/torch.nn.functional.affine_grid.html\r\nhttps://pytorch.org/docs/stable/generated/torch.nn.functional.grid_sample.html\r\n\r\nI tried it various nifti files and gives me the same trouble. When I change the range to the expected range by substracting 2. i get a output, which looks good. \r\n\r\nCan anyone verify the issue. I am using MonAi 1.0.0\r\n\r\n_Originally posted by @a-parida12 in https://github.com/Project-MONAI/MONAI/discussions/5241_\r\n    ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5253/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5233", "id": 1391652117, "node_id": "I_kwDODMjICc5S8u0V", "number": 5233, "title": "Bundle: No check if logging config file exists.", "user": {"login": "holgerroth", "id": 6304754, "node_id": "MDQ6VXNlcjYzMDQ3NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6304754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/holgerroth", "html_url": "https://github.com/holgerroth", "followers_url": "https://api.github.com/users/holgerroth/followers", "following_url": "https://api.github.com/users/holgerroth/following{/other_user}", "gists_url": "https://api.github.com/users/holgerroth/gists{/gist_id}", "starred_url": "https://api.github.com/users/holgerroth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/holgerroth/subscriptions", "organizations_url": "https://api.github.com/users/holgerroth/orgs", "repos_url": "https://api.github.com/users/holgerroth/repos", "events_url": "https://api.github.com/users/holgerroth/events{/privacy}", "received_events_url": "https://api.github.com/users/holgerroth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-09-30T00:25:20Z", "updated_at": "2022-09-30T08:07:43Z", "closed_at": "2022-09-30T08:07:43Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "https://github.com/Project-MONAI/MONAI/blob/71041fd89e11104a4ea79f11687a2469f331679c/monai/bundle/scripts.py#L496\r\n\r\nRunning from outside bundle directory gives a cryptic error. There should be a check and error message if the given file doesn't exits.\r\n\r\ncommand: `torchrun --standalone --nnodes=1 --nproc_per_node=2 -m monai.bundle run training --meta_file configs/metadata.json --config_file \"['configs/train.json','configs/multi_gpu_train.json']\" --logging_file configs/logging.conf`\r\n\r\nError:\r\n```\r\n2022-09-30 00:20:10,616 - INFO - set logging properties based on config: configs/logging.conf.\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/opt/conda/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/opt/monai/monai/bundle/__main__.py\", line 19, in <module>\r\n    fire.Fire()\r\n  File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 466, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/opt/conda/lib/python3.8/site-packages/fire/core.py\", line 681, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"/opt/monai/monai/bundle/scripts.py\", line 498, in run\r\n    fileConfig(logging_file_, disable_existing_loggers=False)\r\n  File \"/opt/conda/lib/python3.8/logging/config.py\", line 71, in fileConfig\r\n    formatters = _create_formatters(cp)\r\n  File \"/opt/conda/lib/python3.8/logging/config.py\", line 104, in _create_formatters\r\n    flist = cp[\"formatters\"][\"keys\"]\r\n  File \"/opt/conda/lib/python3.8/configparser.py\", line 960, in __getitem__\r\n    raise KeyError(key)\r\nKeyError: 'formatters'\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/5052", "id": 1358294670, "node_id": "I_kwDODMjICc5Q9e6O", "number": 5052, "title": "`bundle.scripts.load` can't load model weights correctly", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-09-01T06:00:14Z", "updated_at": "2022-09-01T10:06:41Z", "closed_at": "2022-09-01T10:06:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIssue reported by @Can-Zhao :\r\n```\r\n>>> model = monai.bundle.load(name = 'spleen_ct_segmentation_v0.1.1', bundle_dir = './')\r\n2022-09-01 05:37:41,717 - INFO - --- input summary of monai.bundle.scripts.download ---\r\n2022-09-01 05:37:41,718 - INFO - > name: 'spleen_ct_segmentation_v0.1.1'\r\n2022-09-01 05:37:41,718 - INFO - > bundle_dir: PosixPath('.')\r\n2022-09-01 05:37:41,718 - INFO - > source: 'github'\r\n2022-09-01 05:37:41,718 - INFO - > repo: 'Project-MONAI/model-zoo/hosting_storage_v1'\r\n2022-09-01 05:37:41,718 - INFO - > progress: True\r\n2022-09-01 05:37:41,718 - INFO - ---\r\n\r\n\r\nspleen_ct_segmentation_v0.1.1.zip: 33.9MB [00:06, 5.43MB/s]\r\n2022-09-01 05:37:48,309 - INFO - Downloaded: spleen_ct_segmentation_v0.1.1.zip\r\n2022-09-01 05:37:48,309 - INFO - Expected md5 is None, skip md5 check for file spleen_ct_segmentation_v0.1.1.zip.\r\n2022-09-01 05:37:48,309 - INFO - Writing into directory: ..\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/workspace/data/medical/MONAI/monai/bundle/scripts.py\", line 291, in load\r\n    model_dict = torch.load(full_path, map_location=torch.device(device))\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line 710, in load\r\n    with _open_file_like(f, 'rb') as opened_file:\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line 240, in _open_file_like\r\n    return _open_file(name_or_buffer, mode)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line 221, in __init__\r\n    super(_open_file, self).__init__(open(name, mode))\r\nFileNotFoundError: [Errno 2] No such file or directory: './spleen_ct_segmentation_v0.1.1/models/model.pt'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/5052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4990", "id": 1349508496, "node_id": "I_kwDODMjICc5Qb92Q", "number": 4990, "title": "randomizing a zipdataset with input of randomizable datasets", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-24T14:08:02Z", "updated_at": "2022-08-24T16:58:37Z", "closed_at": "2022-08-24T16:58:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The issue is with ZipDataset (not having Randomizable?). Using the default worker_init_fn does not change the results, \r\n\r\nHere is a reproducible version:\r\n```py \r\nimport nibabel as nib\r\nimport torch\r\n\r\nfrom monai.data import DataLoader, Dataset, ImageDataset, ZipDataset\r\nfrom monai.data.utils import worker_init_fn\r\nfrom monai.transforms import AddChannel, Compose, EnsureType, RandGaussianSmooth, RandSpatialCrop, ScaleIntensity\r\n\r\ndevice = torch.device(\"cuda:0\" if torch.cuda.is_available() else \"cpu\")\r\n\r\n\r\ndef main():\r\n    print(\"device\", device)\r\n    # create 4 (3x3) test images\r\n    test_img1 = torch.Tensor(\r\n        [\r\n            [1.0, 2.0, 3.0],\r\n            [4.0, 5.0, 6.0],\r\n            [7.0, 8.0, 9.0],\r\n        ]\r\n    )\r\n    test_img2 = test_img1 * 2.0\r\n    test_img3 = test_img1 * 3.0\r\n    test_img4 = test_img1 * 4.0\r\n    test_img1 = nib.Nifti1Image(test_img1.numpy(), None)\r\n    test_img2 = nib.Nifti1Image(test_img2.numpy(), None)\r\n    test_img3 = nib.Nifti1Image(test_img3.numpy(), None)\r\n    test_img4 = nib.Nifti1Image(test_img4.numpy(), None)\r\n    # write images\r\n    nib.save(test_img1, \"test_img1.nii.gz\")\r\n    nib.save(test_img2, \"tes_img3.nii.gz\")\r\n    nib.save(test_img2, \"test_img4.nii.gz\")\r\n    ds_transforms = Compose(\r\n        [\r\n            AddChannel(),\r\n            RandGaussianSmooth(sigma_x=(0, 1), sigma_y=(0, 1), sigma_z=(0, 1), prob=1),\r\n            # RandRotate((-180,180),prob=1.),\r\n            RandSpatialCrop((2, 2), random_center=True, random_size=False),\r\n            EnsureType(),\r\n        ]\r\n    )\r\n    ds1 = ImageDataset(\r\n        image_files=[\r\n            \"test_img1.nii.gz\",\r\n            \"test_img2.nii.gz\",\r\n            \"test_img3.nii.gz\",\r\n            \"test_img4.nii.gz\",\r\n        ],\r\n        labels=[1, 2, 3, 4],\r\n        transform=ds_transforms,\r\n        reader=\"NibabelReader\",\r\n    )\r\n    ds2 = Dataset(data=[1, 2, 3, 4])\r\n    ds = ZipDataset([ds1, ds2])\r\n    ds_loader = DataLoader(\r\n        ds,\r\n        batch_size=2,\r\n        num_workers=4,\r\n        worker_init_fn=worker_init_fn,\r\n    )\r\n    for epoch in range(0, 5):\r\n        print(\"Epoch [{0}]: \\t\".format(epoch))\r\n        train(ds_loader)\r\n\r\n\r\ndef train(train_loader):\r\n    for i, (input, target, another_label) in enumerate(train_loader):\r\n        if i == 0:\r\n            image_0 = input[0, 0, :, :].detach().cpu().numpy()\r\n            print(\"image0:\", image_0)\r\n    return None\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nOutput:\r\n`device cuda:0\r\nEpoch [0]: \r\nimage0: [[3.9185538 4.9889097]\r\n [5.3457174 6.3036075]]\r\nEpoch [1]: \r\nimage0: [[3.9185538 4.9889097]\r\n [5.3457174 6.3036075]]\r\nEpoch [2]: \r\nimage0: [[3.9185538 4.9889097]\r\n [5.3457174 6.3036075]]\r\nEpoch [3]: \r\nimage0: [[3.9185538 4.9889097]\r\n [5.3457174 6.3036075]]\r\nEpoch [4]: \r\nimage0: [[3.9185538 4.9889097]\r\n [5.3457174 6.3036075]]`\r\n\r\n_Originally posted by @maxwellreynolds in https://github.com/Project-MONAI/MONAI/discussions/4978#discussioncomment-3465841_", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4990/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4907", "id": 1338029447, "node_id": "I_kwDODMjICc5PwLWH", "number": 4907, "title": "`Invertd` Not Working With `Resized`", "user": {"login": "lukepolson", "id": 39573086, "node_id": "MDQ6VXNlcjM5NTczMDg2", "avatar_url": "https://avatars.githubusercontent.com/u/39573086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukepolson", "html_url": "https://github.com/lukepolson", "followers_url": "https://api.github.com/users/lukepolson/followers", "following_url": "https://api.github.com/users/lukepolson/following{/other_user}", "gists_url": "https://api.github.com/users/lukepolson/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukepolson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukepolson/subscriptions", "organizations_url": "https://api.github.com/users/lukepolson/orgs", "repos_url": "https://api.github.com/users/lukepolson/repos", "events_url": "https://api.github.com/users/lukepolson/events{/privacy}", "received_events_url": "https://api.github.com/users/lukepolson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-08-13T18:43:20Z", "updated_at": "2022-08-14T23:21:05Z", "closed_at": "2022-08-14T23:21:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "`Invertd` is not able to invert `Resized` for data points that aren't changed in size. Consider the following *very basic* example: I have a pipeline that resizes all axial slices to a size of `128x128`:\r\n\r\n`transform = Compose([Resized('X', (-1,128,128))])`\r\n\r\nSuppose I have the following data I want to resize. Some of the data already has slices of size `128x128`, but not all:\r\n\r\n`test_input = [{'X': torch.ones((1,10,128,128))}, {'X': torch.ones((1,10,144,144))}]`\r\n\r\nI can apply the `transform` to resize all data points such that they have axial slices of size `128x128`:\r\n\r\n`test_output = transform(test_input)`\r\n\r\nThe issue then comes if I want to invert resize some output data. For example, consider the *very* basic neural network that simply multiplies all values by 2:\r\n\r\n```\r\nfor d in test_output:\r\n    d['Y'] = 2*d['X']\r\n```\r\n\r\nI want to resize the `Y`s such that they correspond with the original `X`s. I use an inverse transform:\r\n\r\n`transform_inverse = Invertd(keys='Y', transform=transform, orig_keys='X')`\r\n\r\nNow the following command will run successfully (recall that index `1` refers to the data point that was initially 144x144):\r\n\r\n`transform_inverse(test_output[1])`\r\n\r\nbut the following won't run  (recall that index `0` refers to the data point that was initially 128x128, and so `Resized` wouldn't modify it):\r\n\r\n`transform_inverse(test_output[0])`\r\n\r\nI believe this is because `Resized` isn't actually applied to this data point (because its already the right size) and thus it isn't tracked in the transforms applied to `X` (and thus the inverse can't be applied to `Y`). Obviously there are hack-ish ways to get around this, but it becomes annoying when you're dealing with a transform that has many different operations, and dealing with a large dataset.\r\n\r\n**Solution**: I just commented out 845-846 of `monai.transforms.spatial.array`\r\n\r\n```\r\nif tuple(img.shape[1:]) == spatial_size_:  # spatial shape is already the desired\r\n    return convert_to_tensor(img, track_meta=get_track_meta())  # type: ignore\r\n```\r\n\r\nbut you might want to modify them so that transform metadata is stored.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4907/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4896", "id": 1336088259, "node_id": "I_kwDODMjICc5PoxbD", "number": 4896, "title": "Vnet InputTransition ignores out_channel param", "user": {"login": "a-parida12", "id": 23334003, "node_id": "MDQ6VXNlcjIzMzM0MDAz", "avatar_url": "https://avatars.githubusercontent.com/u/23334003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-parida12", "html_url": "https://github.com/a-parida12", "followers_url": "https://api.github.com/users/a-parida12/followers", "following_url": "https://api.github.com/users/a-parida12/following{/other_user}", "gists_url": "https://api.github.com/users/a-parida12/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-parida12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-parida12/subscriptions", "organizations_url": "https://api.github.com/users/a-parida12/orgs", "repos_url": "https://api.github.com/users/a-parida12/repos", "events_url": "https://api.github.com/users/a-parida12/events{/privacy}", "received_events_url": "https://api.github.com/users/a-parida12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-11T14:58:35Z", "updated_at": "2022-08-11T16:45:23Z", "closed_at": "2022-08-11T16:45:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe `InputTransition` class at `monai.networks.nets.vnet` takes in the parameter `out_channels` but ignores it in the implementation to the hard coded original value of 16. Check screenshots of the problem below.\r\n\r\n**To Reproduce**\r\n```python\r\nfrom monai.networks.nets.vnet import InputTransition\r\n\r\nin_tr = InputTransition(spatial_dims=3, in_channels=1, out_channel=32, act,= (\"elu\", {\"inplace\": True}),  bias=False)\r\ninp = torch.zeros(1, 1,32, 32,32)\r\nout = in_tr(inp)\r\nprint(out.shape[1])\r\n```\r\n\r\n**Expected behavior**\r\nExpected behavior is to print `32` an not `16`.\r\n\r\n**Screenshots**\r\n\r\n![annotely_image](https://user-images.githubusercontent.com/23334003/184164330-eaf2a786-f8bf-41e6-b166-dac38342ea3e.jpeg)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4841", "id": 1329905003, "node_id": "I_kwDODMjICc5PRL1r", "number": 4841, "title": "ShuffleBuffer can not iterate twice", "user": {"login": "blezek", "id": 76340, "node_id": "MDQ6VXNlcjc2MzQw", "avatar_url": "https://avatars.githubusercontent.com/u/76340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blezek", "html_url": "https://github.com/blezek", "followers_url": "https://api.github.com/users/blezek/followers", "following_url": "https://api.github.com/users/blezek/following{/other_user}", "gists_url": "https://api.github.com/users/blezek/gists{/gist_id}", "starred_url": "https://api.github.com/users/blezek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blezek/subscriptions", "organizations_url": "https://api.github.com/users/blezek/orgs", "repos_url": "https://api.github.com/users/blezek/repos", "events_url": "https://api.github.com/users/blezek/events{/privacy}", "received_events_url": "https://api.github.com/users/blezek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-08-05T12:56:50Z", "updated_at": "2022-08-08T09:20:15Z", "closed_at": "2022-08-08T09:16:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`ShuffleBuffer` overwrites `self.data` on the first iteration and can not be iterated twice.\r\n\r\n[`data` is originally set to the source data](https://github.com/Project-MONAI/MONAI/blob/e3b47fe62c5a63dd9f479499fe971211a70811ec/monai/data/iterable_dataset.py#L78), but [overwritten during the first iteration.](https://github.com/Project-MONAI/MONAI/blob/e3b47fe62c5a63dd9f479499fe971211a70811ec/monai/data/iterable_dataset.py#L111)\r\n\r\nThe tests do not cover iterating through twice.\r\n\r\n**To Reproduce**\r\n```python\r\nimport numpy as np\r\nimport monai\r\nfrom monai.data import GridPatchDataset, DataLoader, PatchIter\r\n\r\n# image-level dataset\r\nimages = [np.zeros(16, dtype=float).reshape(1, 4, 4),\r\n          np.ones(16, dtype=float).reshape(1, 4, 4)]\r\npatch_iter = PatchIter(patch_size=(2, 2), start_pos=(0, 0))\r\n\r\n# construct the dataset\r\nds = GridPatchDataset(data=images,\r\n                      patch_iter=patch_iter, with_coordinates=False\r\n                      )\r\n\r\ndss = monai.data.ShuffleBuffer(ds, buffer_size = 30, seed=42)\r\n\r\ndataloader = DataLoader(dss, batch_size=1, num_workers=0)\r\n\r\n# use the grid patch dataset\r\nfor item in dataloader:\r\n    print(f\"sum: {item[0].sum()} shape {item[0].shape}\")\r\n\r\n\r\nprint ( \"==== second pass, should produce output, but is empty\")\r\n\r\nfor item in dataloader:\r\n    print(f\"sum: {item[0].sum()} shape {item[0].shape}\")\r\n\r\n```\r\n\r\n**Expected behavior**\r\n`ShuffleBuffer` should iterate through the dataset twice.\r\n\r\n\r\n**Environment**\r\n\r\nSlightly redacted.\r\n\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.9.1\r\nNumpy version: 1.21.4\r\nPytorch version: 1.10.0+cu113\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False, USE_META_DICT = False\r\nMONAI rev id: 356d2d2f41b473f588899d705bbc682308cee52c\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.4\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.19.0\r\nPillow version: 8.4.0\r\nTensorboard version: 2.7.0\r\ngdown version: 4.2.0\r\nTorchVision version: 0.11.1+cu102\r\ntqdm version: 4.62.3\r\nlmdb version: 1.2.1\r\npsutil version: 5.9.0\r\npandas version: 1.3.4\r\neinops version: 0.3.2\r\ntransformers version: 4.12.3\r\nmlflow version: NOT INSTALLED or UNKNOWN VERSION.\r\npynrrd version: NOT INSTALLED or UNKNOWN VERSION.\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4841/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4813", "id": 1324773551, "node_id": "I_kwDODMjICc5O9nCv", "number": 4813, "title": "MIL pipeline does not carry patch information in data loader", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 4012932727, "node_id": "LA_kwDODMjICc7vMH53", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Pathology/Microscopy", "name": "Pathology/Microscopy", "color": "FBCA04", "default": false, "description": "Digital Pathology and Microscopy related"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-08-01T17:58:33Z", "updated_at": "2022-08-01T18:07:00Z", "closed_at": "2022-08-01T18:06:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As reported by a user (https://github.com/Project-MONAI/MONAI/discussions/4794#discussioncomment-3296673), the multiple instance learning pipeline does not provide patch level information in the data loader, so it hinders any post-processing that relies on patch locations within the whole slide image.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4813/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4795", "id": 1322275728, "node_id": "I_kwDODMjICc5O0FOQ", "number": 4795, "title": "ProbMap indexing has an error", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 4012932727, "node_id": "LA_kwDODMjICc7vMH53", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Pathology/Microscopy", "name": "Pathology/Microscopy", "color": "FBCA04", "default": false, "description": "Digital Pathology and Microscopy related"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-07-29T13:47:21Z", "updated_at": "2022-07-29T14:51:13Z", "closed_at": "2022-07-29T14:51:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe location values of probability mask is not being used correctly in the numpy output. The locations are a numpy array (instead of a tuple) so when used in indexing an ndarray, they are not being interpreted as the location in two/three dimension. Instead they are treated as the index of the first dimension. Explicit conversion to tuple can solve this issue.\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/c1eaf427ed2310483856e33e57e7b83d59c85b13/monai/handlers/probability_maps.py#L98", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4708", "id": 1306060319, "node_id": "I_kwDODMjICc5N2OYf", "number": 4708, "title": "pickling data doesn't include all metatensor properties such as `is_batch`", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-07-15T13:47:41Z", "updated_at": "2022-07-16T06:24:47Z", "closed_at": "2022-07-16T06:24:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\n>>> import io\r\n>>> buf = io.BytesIO()\r\n>>> t = MetaTensor([0.0, 0.0])\r\n>>> t.is_batch = True\r\n>>> from multiprocessing.reduction import ForkingPickler\r\n>>> ForkingPickler(buf).dump(t)\r\n>>> obj = ForkingPickler.loads(buf.getvalue())\r\n>>> obj.is_batch\r\nFalse \r\n\r\n```\r\n\r\n`obj.is_batch` is not consistent with the original `t.is_batch`\r\n\r\n(thanks  @KumoLiu @Nic-Ma)", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4708/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4696", "id": 1304446119, "node_id": "I_kwDODMjICc5NwESn", "number": 4696, "title": "PatchMerging padding error", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-14T08:30:46Z", "updated_at": "2022-07-15T06:04:31Z", "closed_at": "2022-07-15T06:04:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\nimport torch\r\n\r\nfrom monai.networks.nets.swin_unetr import PatchMerging\r\n\r\ndim=10\r\nt = PatchMerging(dim)(torch.zeros((1, 21, 20, 20, dim)))\r\nprint(t.shape)\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_test_3.py\", line 7, in <module>\r\n    t = PatchMerging(dim)(torch.zeros((1, 21, 20, 20, dim)))\r\n  File \"py38/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 1130, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File \"MONAI/monai/networks/nets/swin_unetr.py\", line 701, in forward\r\n    x = torch.cat([x0, x1, x2, x3, x4, x5, x6, x7], -1)\r\nRuntimeError: Sizes of tensors must match except in dimension 4. Expected size 11 but got size 10 for tensor number 1 in the list.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4696/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4687", "id": 1303286699, "node_id": "I_kwDODMjICc5NrpOr", "number": 4687, "title": "collate_meta_tensor can't work with `ImageDataset`", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2022-07-13T11:15:44Z", "updated_at": "2022-07-13T14:31:07Z", "closed_at": "2022-07-13T14:31:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThanks for @KumoLiu 's issue report, when using MetaTensor with `ImageDataset`, the decollate raised error:\r\n```\r\n  File \"unet_training_array.py\", line 167, in <module>\r\n    main(tempdir)\r\n  File \"unet_training_array.py\", line 137, in main\r\n    val_outputs = [post_trans(i) for i in decollate_batch(val_outputs)]\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 586, in decollate_batch\r\n    for t, m in zip(out_list, decollate_batch(batch.meta)):\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 598, in decollate_batch\r\n    b, non_iterable, deco = _non_zipping_check(batch, detach, pad, fill_value)\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 499, in _non_zipping_check\r\n    _deco = {key: decollate_batch(batch_data[key], detach, pad=pad, fill_value=fill_value) for key in batch_data}\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 499, in <dictcomp>\r\n    _deco = {key: decollate_batch(batch_data[key], detach, pad=pad, fill_value=fill_value) for key in batch_data}\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 598, in decollate_batch\r\n    b, non_iterable, deco = _non_zipping_check(batch, detach, pad, fill_value)\r\n  File \"/workspace/data/medical/MONAI/monai/data/utils.py\", line 501, in _non_zipping_check\r\n    _deco = [decollate_batch(b, detach, pad=pad, fill_value=fill_value) for b in batch_data]\r\nTypeError: iteration over a 0-d array```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4655", "id": 1297503739, "node_id": "I_kwDODMjICc5NVlX7", "number": 4655, "title": "BUG in `RandCropBoxByPosNegLabeld`", "user": {"login": "alibool", "id": 65023386, "node_id": "MDQ6VXNlcjY1MDIzMzg2", "avatar_url": "https://avatars.githubusercontent.com/u/65023386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alibool", "html_url": "https://github.com/alibool", "followers_url": "https://api.github.com/users/alibool/followers", "following_url": "https://api.github.com/users/alibool/following{/other_user}", "gists_url": "https://api.github.com/users/alibool/gists{/gist_id}", "starred_url": "https://api.github.com/users/alibool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alibool/subscriptions", "organizations_url": "https://api.github.com/users/alibool/orgs", "repos_url": "https://api.github.com/users/alibool/repos", "events_url": "https://api.github.com/users/alibool/events{/privacy}", "received_events_url": "https://api.github.com/users/alibool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-07T14:03:49Z", "updated_at": "2022-07-11T08:02:26Z", "closed_at": "2022-07-11T08:02:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nfrom monai.apps.detection.transforms.dictionary import RandCropBoxByPosNegLabeld\r\nimport torch\r\n\r\ntt = RandCropBoxByPosNegLabeld(image_keys=[\"image\"],\r\n                               box_keys=\"box\",\r\n                               label_keys=\"label\",\r\n                               spatial_size=[128, 128, -1],\r\n                               whole_box=True,\r\n                               num_samples=1,\r\n                               pos=1,\r\n                               neg=0)\r\niii = {\"image\": torch.rand(1, 128, 128, 128),\r\n       \"box\": torch.tensor(((1., 2., 3., 4., 5., 6.),)),\r\n       \"label\": torch.tensor((1,)).long()}\r\ntt(iii)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4655/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/4614", "id": 1289410377, "node_id": "PR_kwDODMjICc46mpic", "number": 4614, "title": "debug device conflict", "user": {"login": "Can-Zhao", "id": 69829124, "node_id": "MDQ6VXNlcjY5ODI5MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/69829124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Can-Zhao", "html_url": "https://github.com/Can-Zhao", "followers_url": "https://api.github.com/users/Can-Zhao/followers", "following_url": "https://api.github.com/users/Can-Zhao/following{/other_user}", "gists_url": "https://api.github.com/users/Can-Zhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Can-Zhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Can-Zhao/subscriptions", "organizations_url": "https://api.github.com/users/Can-Zhao/orgs", "repos_url": "https://api.github.com/users/Can-Zhao/repos", "events_url": "https://api.github.com/users/Can-Zhao/events{/privacy}", "received_events_url": "https://api.github.com/users/Can-Zhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-29T23:44:09Z", "updated_at": "2022-06-30T15:26:42Z", "closed_at": "2022-06-30T06:57:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/4614", "html_url": "https://github.com/Project-MONAI/MONAI/pull/4614", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/4614.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/4614.patch", "merged_at": "2022-06-30T06:57:50Z"}, "body": "Signed-off-by: Can Zhao <canz@nvidia.com>\r\n\r\nFixes #4608 .\r\n\r\n### Description\r\nSolve the bug of inconsistent device in spatial_crop_boxes\r\n\r\n### Status\r\n**Ready/Work in progress/Hold**\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [ ] Breaking change (fix or new feature that would cause existing functionality to change).\r\n- [ ] New tests added to cover the changes.\r\n- [ ] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [ ] Quick tests passed locally by running `./runtests.sh --quick --unittests  --disttests`.\r\n- [ ] In-line docstrings updated.\r\n- [ ] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4614/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4489", "id": 1269281216, "node_id": "I_kwDODMjICc5Lp7HA", "number": 4489, "title": "Hyperlink in the config syntax doesn't work", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 5, "created_at": "2022-06-13T11:12:57Z", "updated_at": "2022-06-13T15:14:11Z", "closed_at": "2022-06-13T15:14:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThanks for Can's feedback, all the hyperlinks within \"Syntax examples explained\" in the config syntax page don't work:\r\nhttps://docs.monai.io/en/latest/config_syntax.html#1--to-interpolate-with-python-objects\r\n\r\nIt may because the index or special character in the title names.\r\nWould be nice to update them.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4489/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4480", "id": 1267384073, "node_id": "I_kwDODMjICc5Lir8J", "number": 4480, "title": "RandAffine -- skip resampling if not necessary", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-06-10T10:51:18Z", "updated_at": "2022-06-10T12:28:42Z", "closed_at": "2022-06-10T12:28:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nhttps://github.com/Project-MONAI/MONAI/blob/750452652a12b28eb50c92c956323214de358809/monai/transforms/spatial/array.py#L2055-L2056\r\n\r\nthe current flag is checked but still does the resampling.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4480/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4478", "id": 1267344458, "node_id": "I_kwDODMjICc5LiiRK", "number": 4478, "title": "shufflebuffer is not compatible with the dataloader", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-06-10T10:11:42Z", "updated_at": "2022-06-10T13:25:44Z", "closed_at": "2022-06-10T13:25:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\nimport monai\r\n\r\nbuffer = monai.data.ShuffleBuffer([1,2,3,4])\r\nfor x in monai.data.DataLoader(buffer, batch_size=2):\r\n    print(x)\r\n```\r\n\r\n```\r\n    for x in monai.data.DataLoader(buffer, batch_size=2):\r\n  File \"/Users/Documents/MONAI/monai/data/dataloader.py\", line 78, in __init__\r\n    set_rnd(dataset, int(_seed))\r\n  File \"/Users/Documents/MONAI/monai/data/utils.py\", line 624, in set_rnd\r\n    obj.set_random_state(seed=seed % MAX_SEED)\r\n  File \"/Users/Documents/MONAI/monai/data/iterable_dataset.py\", line 119, in set_random_state\r\n    raise NotImplementedError(f\"`set_random_state` is not available in {self.__class__.__name__}.\")\r\nNotImplementedError: `set_random_state` is not available in ShuffleBuffer.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4477", "id": 1267339592, "node_id": "I_kwDODMjICc5LihFI", "number": 4477, "title": "patch dataset `transform` should be applied to the patches only", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-06-10T10:07:44Z", "updated_at": "2022-06-10T13:25:43Z", "closed_at": "2022-06-10T13:25:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```py\r\nimport monai\r\nfrom monai.transforms import DataStatsd\r\nimport numpy as np\r\n\r\nimg = [{\"img\": np.zeros((1, 30, 40, 3))}]\r\npatch_func = monai.data.PatchIterd(keys=[\"img\"], patch_size=(30, 40, 1))\r\ntransform = DataStatsd(keys=[\"img\"])\r\n\r\nfor x in monai.data.GridPatchDataset(img, patch_iter=patch_func, transform=transform):\r\n    print(x[0][\"img\"].shape)\r\n\r\n```\r\nshould generate slices in shape `(30, 40, 1)`, \r\nbut the `transform` is mistakenly applied in the base class:\r\n```\r\nData statistics:\r\nType: <class 'numpy.ndarray'> float64\r\nShape: (1, 30, 40, 3)\r\nValue range: (0.0, 0.0)\r\nData statistics:\r\nType: <class 'numpy.ndarray'> float64\r\nShape: (1, 30, 40, 1)\r\nValue range: (0.0, 0.0)\r\n(1, 30, 40, 1)\r\nData statistics:\r\nType: <class 'numpy.ndarray'> float64\r\nShape: (1, 30, 40, 1)\r\nValue range: (0.0, 0.0)\r\n(1, 30, 40, 1)\r\nData statistics:\r\nType: <class 'numpy.ndarray'> float64\r\nShape: (1, 30, 40, 1)\r\nValue range: (0.0, 0.0)\r\n(1, 30, 40, 1)\r\n```\r\n\r\n**Expected behavior**\r\nthe `super().__iter__()` shouldn't trigger the patch transform\r\nhttps://github.com/Project-MONAI/MONAI/blob/750452652a12b28eb50c92c956323214de358809/monai/data/grid_dataset.py#L194\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4477/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4451", "id": 1260234949, "node_id": "I_kwDODMjICc5LHajF", "number": 4451, "title": "ERROR tests.test_masked_patch_wsi_dataset", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-03T18:39:18Z", "updated_at": "2022-06-04T06:25:08Z", "closed_at": "2022-06-04T06:25:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nrandomly error out\r\n```\r\n[2022-06-03T16:45:42.267Z] ======================================================================\r\n[2022-06-03T16:45:42.267Z] ERROR: test_gen_patches_0 (tests.test_masked_patch_wsi_dataset.TestSlidingPatchWSIDatasetCuCIM)\r\n[2022-06-03T16:45:42.267Z] ----------------------------------------------------------------------\r\n[2022-06-03T16:45:42.267Z] Traceback (most recent call last):\r\n[2022-06-03T16:45:42.267Z]   File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n[2022-06-03T16:45:42.267Z]     return func(*(a + p.args), **p.kwargs)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/test_masked_patch_wsi_dataset.py\", line 57, in test_gen_patches\r\n[2022-06-03T16:45:42.267Z]     dataset = MaskedPatchWSIDataset(reader=self.backend, **input_parameters)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/data/wsi_datasets.py\", line 371, in __init__\r\n[2022-06-03T16:45:42.267Z]     patch_samples = self._evaluate_patch_locations(sample)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/data/wsi_datasets.py\", line 378, in _evaluate_patch_locations\r\n[2022-06-03T16:45:42.267Z]     wsi_obj = self._get_wsi_object(sample)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/data/wsi_datasets.py\", line 109, in _get_wsi_object\r\n[2022-06-03T16:45:42.267Z]     self.wsi_object_dict[image_path] = self.wsi_reader.read(image_path)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/data/wsi_reader.py\", line 347, in read\r\n[2022-06-03T16:45:42.267Z]     return self.reader.read(data=data, **kwargs)\r\n[2022-06-03T16:45:42.267Z]   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/data/wsi_reader.py\", line 428, in read\r\n[2022-06-03T16:45:42.267Z]     wsi = CuImage(filename, **kwargs_)\r\n[2022-06-03T16:45:42.267Z] ValueError: Cannot open /home/jenkins/agent/workspace/MONAI-premerge/monai/tests/testing_data/temp_CMU-1.tiff.tiff!\r\n[2022-06-03T16:45:42.267Z] \r\n[2022-06-03T16:45:42.267Z] ----------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4451/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4312", "id": 1244139005, "node_id": "I_kwDODMjICc5KKA39", "number": 4312, "title": "`get_mask_edges` wrongly uses `squeeze`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-05-22T03:50:20Z", "updated_at": "2022-05-22T12:13:07Z", "closed_at": "2022-05-22T12:13:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThis error place is in: https://github.com/Project-MONAI/MONAI/blob/e58086d9ef0f344eb1ee1f23ffbfbd3e26887c41/monai/metrics/utils.py#L161\r\nTo use spatial crop, a channel dimension is expanded, thus it needs to be squeezed after the transform. However, `axis` should be specified otherwise more than one dimensions may be squeezed. If a input tensor only has one pixel that has label, after crop and squeeze, it will has shape `()`, and then after binary erosion and XOR, it will has type `bool`, rather than an array, and may get wrong `surface_distance`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n```\r\nimport numpy as np\r\n\r\nprint(np.squeeze(np.random.rand(1, 1, 16, 16, 16)).shape)\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4256", "id": 1232546349, "node_id": "I_kwDODMjICc5Jdyot", "number": 4256, "title": "Some bug in `transforms.RandCropByPosNegLabeld` caused by `spatial_size`", "user": {"login": "yhuang1997", "id": 63274407, "node_id": "MDQ6VXNlcjYzMjc0NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/63274407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhuang1997", "html_url": "https://github.com/yhuang1997", "followers_url": "https://api.github.com/users/yhuang1997/followers", "following_url": "https://api.github.com/users/yhuang1997/following{/other_user}", "gists_url": "https://api.github.com/users/yhuang1997/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhuang1997/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhuang1997/subscriptions", "organizations_url": "https://api.github.com/users/yhuang1997/orgs", "repos_url": "https://api.github.com/users/yhuang1997/repos", "events_url": "https://api.github.com/users/yhuang1997/events{/privacy}", "received_events_url": "https://api.github.com/users/yhuang1997/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 3, "created_at": "2022-05-11T12:19:04Z", "updated_at": "2022-05-12T10:37:09Z", "closed_at": "2022-05-12T10:37:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`RandCropByPosNegLabeld.spatial_size` will be wrongly replaced when the transform function applied to sequential data.\r\n**To Reproduce**\r\n```\r\nfrom monai.transforms import RandCropByPosNegLabeld\r\nimport numpy as np\r\n\r\n\r\ntrans = RandCropByPosNegLabeld(keys=['image', 'mask'],\r\n                               image_key='image',\r\n                               label_key='mask',\r\n                               # The third dimension of spatial_size was set as `-1`,\r\n                               # hoping the cropped patch's third dimension is consistent with the original image.\r\n                               spatial_size=(40, 40, -1),\r\n                               num_samples=4)\r\n\r\n# image & mask with the shape of [channel, d1, d2, d3]\r\n# In my case, the d3 dimension is the number of slices.\r\n\r\n############################################################\r\n# This bug occurs only when the third dimension of `image_1` is bigger than it of `image_2`.\r\n###########################################################\r\nimage_1 = np.random.rand(1, 100, 100, 80).astype(np.float32)\r\nmask_1 = np.random.randint(0, 2, (1, 100, 100, 80), dtype=np.int32)\r\n\r\nimage_2 = np.random.rand(1, 100, 100, 50).astype(np.float32)\r\nmask_2 = np.random.randint(0, 2, (1, 100, 100, 50), dtype=np.int32)\r\n\r\ndata_1 = {'image':image_1, 'mask':mask_1}\r\ndata_2 = {'image':image_2, 'mask':mask_2}\r\n\r\ntransformed_1 = trans(data_1)  #`RandCropByPosNegLabeld.spacial_size` (40, 40, -1) has been replaced with (40, 40, 80).\r\n\r\ntransformed_2 = trans(data_2)  # `RandCropByPosNegLabeld.spacial_size` is (40, 40, 80), but not the expected value (40, 40, 50)\r\n# ValueError: The size of the proposed random crop ROI is larger than the image size.\r\n```\r\n\r\n**Expected behavior**\r\nTaking the above demo as an example, the patch size of transformed_2 is (40, 40, 50).", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4166", "id": 1214162655, "node_id": "I_kwDODMjICc5IXqbf", "number": 4166, "title": "tests.test_bundle_download issue", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 2, "created_at": "2022-04-25T08:34:08Z", "updated_at": "2022-04-25T12:41:52Z", "closed_at": "2022-04-25T12:41:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n01:01:36  ======================================================================\r\n01:01:36  ERROR: test_load_ts_module_0 (tests.test_bundle_download.TestLoad)\r\n01:01:36  ----------------------------------------------------------------------\r\n01:01:36  Traceback (most recent call last):\r\n01:01:36    File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n01:01:36      return func(*(a + p.args), **p.kwargs)\r\n01:01:36    File \"/home/jenkins/agent/workspace/Monai-latest-image/tests/test_bundle_download.py\", line 149, in test_load_ts_module\r\n01:01:36      model_ts, metadata, extra_file_dict = load(\r\n01:01:36    File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/bundle/scripts.py\", line 285, in load\r\n01:01:36      return load_net_with_metadata(full_path, map_location=torch.device(device), more_extra_files=config_files)\r\n01:01:36    File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/data/torchscript_utils.py\", line 119, in load_net_with_metadata\r\n01:01:36      jit_obj = torch.jit.load(filename_prefix_or_stream, map_location, extra_files)\r\n01:01:36    File \"/opt/conda/lib/python3.8/site-packages/torch/jit/_serialization.py\", line 161, in load\r\n01:01:36      cpp_module = torch._C.import_ir_module(cu, str(f), map_location, _extra_files)\r\n01:01:36  RuntimeError: \r\n01:01:36  \r\n01:01:36  prim::RaiseException(str msg) -> ():\r\n01:01:36  Expected at most 1 arguments but found 2 positional arguments.\r\n01:01:36  :\r\n01:01:36    File \"/opt/conda/lib/python3.8/site-packages/torch/nn/functional.py\", line 2388\r\n01:01:36          size_prods *= size[i + 2]\r\n01:01:36      if size_prods == 1:\r\n01:01:36          raise ValueError(\"Expected more than 1 value per channel when training, got input size {}\".format(size))\r\n01:01:36          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ <--- HERE\r\n01:01:36  Serialized   File \"code/__torch__/torch/nn/functional.py\", line 42\r\n01:01:36      size_prods0 = size_prods1\r\n01:01:36    if torch.eq(size_prods0, 1):\r\n01:01:36      ops.prim.RaiseException(torch.format(_6, size), \"builtins.ValueError\")\r\n01:01:36      ~~~~~~~~~~~~~~~~~~~~~~~ <--- HERE\r\n01:01:36    else:\r\n01:01:36      pass\r\n01:01:36  '_verify_batch_size' is being compiled since it was called from 'batch_norm'\r\n01:01:36  Serialized   File \"code/__torch__/torch/nn/functional.py\", line 9\r\n01:01:36      momentum: float=0.10000000000000001,\r\n01:01:36      eps: float=1.0000000000000001e-05) -> Tensor:\r\n01:01:36    _0 = __torch__.torch.nn.functional._verify_batch_size\r\n01:01:36    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ <--- HERE\r\n01:01:36    if training:\r\n01:01:36      _1 = _0(torch.size(input), )\r\n01:01:36  'batch_norm' is being compiled since it was called from 'BatchNorm3d.forward'\r\n01:01:36  Serialized   File \"code/__torch__/torch/nn/modules/batchnorm.py\", line 18\r\n01:01:36    def forward(self: __torch__.torch.nn.modules.batchnorm.BatchNorm3d,\r\n01:01:36      input: Tensor) -> Tensor:\r\n01:01:36      _0 = __torch__.torch.nn.functional.batch_norm\r\n01:01:36      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ <--- HERE\r\n01:01:36      _1 = (self)._check_input_dim(input, )\r\n01:01:36      training = self.training\r\n01:01:36  \r\n01:01:36  \r\n01:01:36  ----------------------------------------------------------------------\r\n01:01:36  Ran 8511 tests in 1547.515s\r\n```\r\n\r\nwith docker 21.10\r\n```\r\n00:54:23  .================================\r\n00:54:23  Printing MONAI config...\r\n00:54:23  ================================\r\n00:54:23  MONAI version: 0.8.1+220.g0cdec837\r\n00:54:23  Numpy version: 1.22.3\r\n00:54:23  Pytorch version: 1.10.0a0+0aef44c\r\n00:54:23  MONAI flags: HAS_EXT = True, USE_COMPILED = True\r\n00:54:23  MONAI rev id: 0cdec837a6ae43cdc46d2ce80befb0362b07e47c\r\n00:54:23  MONAI __file__: /home/jenkins/agent/workspace/Monai-latest-image/monai/__init__.py\r\n00:54:23  \r\n00:54:23  Optional dependencies:\r\n00:54:23  Pytorch Ignite version: 0.4.8\r\n00:54:23  Nibabel version: 3.2.2\r\n00:54:23  scikit-image version: 0.19.1\r\n00:54:23  Pillow version: 9.0.1\r\n00:54:23  Tensorboard version: 2.6.0\r\n00:54:23  gdown version: 4.2.1\r\n00:54:23  TorchVision version: 0.11.0a0\r\n00:54:23  tqdm version: 4.62.3\r\n00:54:23  lmdb version: 1.2.1\r\n00:54:23  psutil version: 5.8.0\r\n00:54:23  pandas version: 1.4.1\r\n00:54:23  einops version: 0.4.0\r\n00:54:23  transformers version: 4.16.2\r\n00:54:23  mlflow version: 1.23.1\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4149", "id": 1209522750, "node_id": "I_kwDODMjICc5IF9o-", "number": 4149, "title": "`load_from_mmar` create \"cpu\" model when `map_location` is `cuda`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2022-04-20T10:59:08Z", "updated_at": "2023-01-05T18:06:49Z", "closed_at": "2023-01-05T18:06:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**To Reproduce**\r\n```\r\nfrom monai.apps import load_from_mmar\r\n\r\nnet = load_from_mmar(\r\n    item=\"clara_pt_prostate_mri_segmentation\",\r\n    map_location=\"cuda\",\r\n)\r\nprint(next(net.parameters()).device)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4149/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4144", "id": 1207998714, "node_id": "I_kwDODMjICc5IAJj6", "number": 4144, "title": "ResampleToMatch changes `filename_or_obj` metadata.", "user": {"login": "karwojan", "id": 45975194, "node_id": "MDQ6VXNlcjQ1OTc1MTk0", "avatar_url": "https://avatars.githubusercontent.com/u/45975194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karwojan", "html_url": "https://github.com/karwojan", "followers_url": "https://api.github.com/users/karwojan/followers", "following_url": "https://api.github.com/users/karwojan/following{/other_user}", "gists_url": "https://api.github.com/users/karwojan/gists{/gist_id}", "starred_url": "https://api.github.com/users/karwojan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karwojan/subscriptions", "organizations_url": "https://api.github.com/users/karwojan/orgs", "repos_url": "https://api.github.com/users/karwojan/repos", "events_url": "https://api.github.com/users/karwojan/events{/privacy}", "received_events_url": "https://api.github.com/users/karwojan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2022-04-19T08:43:39Z", "updated_at": "2022-04-19T22:08:05Z", "closed_at": "2022-04-19T22:08:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a logical mistake in `ResampleToMatch(d)` transform, because this function copies whole dst metadata (which contains target affine) and put as src metadata into input image. This results in replacing of \"filename_or_obj\" field in src metadata.\r\n\r\n```\r\n>>> from monai.transforms import LoadImaged, ResampleToMatchd, AddChanneld\r\n>>> data = {\"image\": \"/tmp/image.nii.gz\", \"labels\": \"/tmp/labels.mgz\"}\r\n>>> data = LoadImaged([\"image\", \"labels\"], reader=\"nibabelreader\")(data)\r\n>>> data = AddChanneld([\"image\", \"labels\"])(data)\r\n>>> \r\n>>> print(\"image filename:\", data[\"image_meta_dict\"][\"filename_or_obj\"])\r\nimage filename: /tmp/image.nii.gz\r\n>>> print(\"labels filename:\", data[\"labels_meta_dict\"][\"filename_or_obj\"])\r\nlabels filename: /tmp/labels.mgz\r\n>>> data = ResampleToMatchd(\"labels\", \"image_meta_dict\")(data)\r\n>>> \r\n>>> print(\"image filename:\", data[\"image_meta_dict\"][\"filename_or_obj\"])\r\nimage filename: /tmp/image.nii.gz\r\n>>> print(\"labels filename:\", data[\"labels_meta_dict\"][\"filename_or_obj\"])\r\nlabels filename: /tmp/image.nii.gz\r\n```\r\n\r\n`filename_or_obj` field in `labels_meta_dict` should stay as it was before ResampleToMatchd transform.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/4011", "id": 1183379709, "node_id": "I_kwDODMjICc5GiPD9", "number": 4011, "title": "conda test errors: test_matshow3d", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-03-28T12:38:46Z", "updated_at": "2022-04-01T13:27:49Z", "closed_at": "2022-04-01T13:27:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nFAIL: test_samples (tests.test_matshow3d.TestMatshow3d)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/runner/work/MONAI/MONAI/tests/test_matshow3d.py\", line 70, in test_samples\r\n    np.testing.assert_allclose(comp[\"rms\"], 30.786983, atol=1e-3, rtol=1e-3)\r\n  File \"/usr/local/miniconda/envs/monai/lib/python3.9/site-packages/numpy/testing/_private/utils.py\", line 1530, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/usr/local/miniconda/envs/monai/lib/python3.9/site-packages/numpy/testing/_private/utils.py\", line 844, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.001, atol=0.001\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 4.74991119\r\nMax relative difference: 0.1542831\r\n x: array(26.037072)\r\n y: array(30.786983)\r\n\r\n======================================================================\r\nFAIL: test_plot (tests.test_threadcontainer.TestThreadContainer)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/runner/work/MONAI/MONAI/tests/test_threadcontainer.py\", line 107, in test_plot\r\n    self.assertIsNone(comp, comp)  # None indicates test passed\r\nAssertionError: 'Error: Image files did not match.\\n  RMS Value: 28.09905059190909\\n  Expected:  \\n    /Users/runner/work/MONAI/MONAI/tests/testing_data/threadcontainer_plot_test.png\\n  Actual:    \\n    /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpav42fn_w/threadcontainer_plot_test.png\\n  Difference:\\n    /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpav42fn_w/threadcontainer_plot_test-failed-diff.png\\n  Tolerance: \\n    0.05' is not None : Error: Image files did not match.\r\n  RMS Value: 28.09905059190909\r\n  Expected:  \r\n    /Users/runner/work/MONAI/MONAI/tests/testing_data/threadcontainer_plot_test.png\r\n  Actual:    \r\n    /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpav42fn_w/threadcontainer_plot_test.png\r\n  Difference:\r\n    /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/tmpav42fn_w/threadcontainer_plot_test-failed-diff.png\r\n  Tolerance: \r\n    0.05\r\n\r\n----------------------------------------------------------------------\r\nRan 5904 tests in 1950.197s\r\n\r\nFAILED (failures=2, skipped=355)\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/4011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3987", "id": 1178403834, "node_id": "I_kwDODMjICc5GPQP6", "number": 3987, "title": "Dictionary version of Monai Transpose", "user": {"login": "Alberto1404", "id": 91409881, "node_id": "MDQ6VXNlcjkxNDA5ODgx", "avatar_url": "https://avatars.githubusercontent.com/u/91409881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alberto1404", "html_url": "https://github.com/Alberto1404", "followers_url": "https://api.github.com/users/Alberto1404/followers", "following_url": "https://api.github.com/users/Alberto1404/following{/other_user}", "gists_url": "https://api.github.com/users/Alberto1404/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alberto1404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alberto1404/subscriptions", "organizations_url": "https://api.github.com/users/Alberto1404/orgs", "repos_url": "https://api.github.com/users/Alberto1404/repos", "events_url": "https://api.github.com/users/Alberto1404/events{/privacy}", "received_events_url": "https://api.github.com/users/Alberto1404/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-23T17:00:54Z", "updated_at": "2022-03-23T21:35:36Z", "closed_at": "2022-03-23T21:29:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello all. In the task I am working on, I am incorrectly reading the volume images with CacheDataset, because the shape they have is HxWxD. When creating the loader, I want shape (B,C,D,H,W), and I am getting (B,C,H,W,D). I saw the transformation transpose, that should be enough passing the correct indexes as arguments. Nevertheless, I am dealing with a dictionary in my loaders, with keys ['image'] and ['label']. Would it be possible to have a \"Transposed\" in the docs?\r\nThank you for your time\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3983", "id": 1177638014, "node_id": "I_kwDODMjICc5GMVR-", "number": 3983, "title": "RandZoomd align_corners incorrect", "user": {"login": "myron", "id": 785008, "node_id": "MDQ6VXNlcjc4NTAwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/785008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/myron", "html_url": "https://github.com/myron", "followers_url": "https://api.github.com/users/myron/followers", "following_url": "https://api.github.com/users/myron/following{/other_user}", "gists_url": "https://api.github.com/users/myron/gists{/gist_id}", "starred_url": "https://api.github.com/users/myron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/myron/subscriptions", "organizations_url": "https://api.github.com/users/myron/orgs", "repos_url": "https://api.github.com/users/myron/repos", "events_url": "https://api.github.com/users/myron/events{/privacy}", "received_events_url": "https://api.github.com/users/myron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-23T05:59:55Z", "updated_at": "2022-03-24T21:52:32Z", "closed_at": "2022-03-24T21:52:32Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "align_corners is handled incorrectly in RandZoomd (and possibly bugs in other transforms)\r\n\r\nExample:\r\n`RandZoomd(keys=['image'], prob=0.5, min_zoom=0.9, max_zoom=1.1, mode=['trilinear'], align_corners=[False])`\r\n\r\nWill call Zoom transforms with mode = trilinear, but align_corners=None.  Which will also show a lot of pytorch Warnings indicating that align_corners is not set. \r\n\r\nRoot cause:\r\nhttps://github.com/Project-MONAI/MONAI/blob/42159ffd3a3003efdee807683922ea1cec4cb27a/monai/transforms/spatial/array.py#L1279\r\n\r\nwhen calling Zoom transform, for some reason we use parameters as \r\n\r\n```\r\nmode=look_up_option(mode or self.mode, InterpolateMode),\r\nalign_corners=align_corners or self.align_corners,\r\n```\r\n\r\nThe use of 'or' is very ambiguous and leads to a bug in this case. \r\n\r\nA or B ->  returns A (if both A and B are strings or enums)\r\nA or B ->  returns B (if either A==None or B==None)\r\n\r\nIn our case \r\nmode or self.mode -> returns mode \r\nalign_corners or self.align_corners -> returns self.align_corners (because align_corners==None)\r\n\r\nas a result we get mode='trilinear', align_corners=None  (the original option is lost)\r\n\r\n---\r\nWe use this 'or' throughout the code for align_corners, and other parameters, which potentially created bugs if one of the options is None...\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3983/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3971", "id": 1175418601, "node_id": "I_kwDODMjICc5GD3bp", "number": 3971, "title": "Bugs from the merged commit #3896", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-03-21T13:50:36Z", "updated_at": "2022-03-21T18:53:52Z", "closed_at": "2022-03-21T18:53:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nThe bugs come from #3896 , where `f` is missing for the changes. Let me submit a PR to fix it.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3886", "id": 1158833253, "node_id": "I_kwDODMjICc5FEmRl", "number": 3886, "title": "Problem with CacheDataset", "user": {"login": "ctestagrose", "id": 73864022, "node_id": "MDQ6VXNlcjczODY0MDIy", "avatar_url": "https://avatars.githubusercontent.com/u/73864022?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctestagrose", "html_url": "https://github.com/ctestagrose", "followers_url": "https://api.github.com/users/ctestagrose/followers", "following_url": "https://api.github.com/users/ctestagrose/following{/other_user}", "gists_url": "https://api.github.com/users/ctestagrose/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctestagrose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctestagrose/subscriptions", "organizations_url": "https://api.github.com/users/ctestagrose/orgs", "repos_url": "https://api.github.com/users/ctestagrose/repos", "events_url": "https://api.github.com/users/ctestagrose/events{/privacy}", "received_events_url": "https://api.github.com/users/ctestagrose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [{"login": "vikashg", "id": 3863212, "node_id": "MDQ6VXNlcjM4NjMyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3863212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vikashg", "html_url": "https://github.com/vikashg", "followers_url": "https://api.github.com/users/vikashg/followers", "following_url": "https://api.github.com/users/vikashg/following{/other_user}", "gists_url": "https://api.github.com/users/vikashg/gists{/gist_id}", "starred_url": "https://api.github.com/users/vikashg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vikashg/subscriptions", "organizations_url": "https://api.github.com/users/vikashg/orgs", "repos_url": "https://api.github.com/users/vikashg/repos", "events_url": "https://api.github.com/users/vikashg/events{/privacy}", "received_events_url": "https://api.github.com/users/vikashg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2022-03-03T19:45:54Z", "updated_at": "2022-03-04T06:21:20Z", "closed_at": "2022-03-04T06:21:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have been using the tutorials to try and implement CacheDataset. However, I am receiving an error when trying to apply a transform to an image while using CacheDataset. The specific error I am receiving is:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/workspace/MONAI/monai/transforms/transform.py\", line 81, in apply_transform\r\n    return [_apply_transform(transform, item, unpack_items) for item in data]\r\n  File \"/workspace/MONAI/monai/transforms/transform.py\", line 81, in <listcomp>\r\n    return [_apply_transform(transform, item, unpack_items) for item in data]\r\n  File \"/workspace/MONAI/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/workspace/MONAI/monai/transforms/io/array.py\", line 186, in __call__\r\n    filename = tuple(f\"{Path(s).expanduser()}\" for s in ensure_tuple(filename))  # allow Path objects\r\n  File \"/workspace/MONAI/monai/transforms/io/array.py\", line 186, in <genexpr>\r\n    filename = tuple(f\"{Path(s).expanduser()}\" for s in ensure_tuple(filename))  # allow Path objects\r\n  File \"/opt/conda/lib/python3.8/pathlib.py\", line 1042, in __new__\r\n    self = cls._from_parts(args, init=False)\r\n  File \"/opt/conda/lib/python3.8/pathlib.py\", line 683, in _from_parts\r\n    drv, root, parts = self._parse_args(args)\r\n  File \"/opt/conda/lib/python3.8/pathlib.py\", line 667, in _parse_args\r\n    a = os.fspath(a)\r\nTypeError: expected str, bytes or os.PathLike object, not numpy.ndarray\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_cache.py\", line 157, in <module>\r\n    main()\r\n  File \"train_cache.py\", line 73, in main\r\n    train_ds = CacheDataset(\r\n  File \"/workspace/MONAI/monai/data/dataset.py\", line 710, in __init__\r\n    self._cache: List = self._fill_cache()\r\n  File \"/workspace/MONAI/monai/data/dataset.py\", line 731, in _fill_cache\r\n    return list(\r\n  File \"/opt/conda/lib/python3.8/site-packages/tqdm/std.py\", line 1180, in __iter__\r\n    for obj in iterable:\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/pool.py\", line 868, in next\r\n    raise value\r\n  File \"/opt/conda/lib/python3.8/multiprocessing/pool.py\", line 125, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/workspace/MONAI/monai/data/dataset.py\", line 751, in _load_cache_item\r\n    item = apply_transform(_xform, item)\r\n  File \"/workspace/MONAI/monai/transforms/transform.py\", line 106, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.io.array.LoadImage object at 0x7f1a835d7550>\r\nterminate called without an active exception\r\n```\r\nThis is currently how I am trying to implement CacheDataset:\r\n```py\r\n    import sys\r\n    import torch\r\n    from monai.data import DataLoader\r\n    from monai.transforms import (\r\n        LoadImage,\r\n        Resize,\r\n        ResizeWithPadOrCrop, NormalizeIntensity,\r\n        RepeatChannel, RandShiftIntensity,\r\n        AddChannel, AsChannelFirst,\r\n        AdjustContrast,\r\n        ScaleIntensity,\r\n        RandRotate,\r\n        EnsureType,\r\n        RandFlip, Compose)\r\n    from torch.utils.tensorboard import SummaryWriter\r\n    from monai.apps import DecathlonDataset\r\n    from monai.data import CacheDataset, DataLoader, Dataset, decollate_batch\r\n\r\n    from datalist_reader import DatalistReader\r\n    from getarguments import get_arguments\r\n    from model_def import ModelDefinition, MyModel\r\n\r\n      class TrainDataset(torch.utils.data.Dataset):\r\n      \r\n          def __init__ (self, image_files, image_labels, transforms):\r\n              self.image_files = image_files\r\n              self.image_labels = image_labels\r\n              self.transforms = transforms\r\n  \r\n          def __len__(self):\r\n              return len(self.image_files)\r\n  \r\n          def __getitem__(self, index):\r\n              return self.transforms(self.image_files[index]), torch.as_tensor(self.image_labels[index])\r\n  \r\n      def main():\r\n  \r\n          device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')\r\n  \r\n          temp_transform = Compose([LoadImage(image_only=True, reader='pilreader'), AsChannelFirst(channel_dim=2), Resize((299, \r\n                                        299)) ])\r\n          train_ds = CacheDataset(\r\n              data=TrainDataset(training_images, training_labels, temp_transform),\r\n              transform=temp_transforms,\r\n              cache_rate=1.0,\r\n              num_workers=4\r\n           )\r\n          train_loader = DataLoader(train_ds, batch_size=int(args.training_batch_size), num_workers=4)\r\n  \r\n          validation_ds = CacheDataset(\r\n              data=TrainDataset(validation_images, validation_labels, temp_transform),\r\n              transform=temp_transforms,\r\n              cache_rate=1.0,\r\n              num_workers=4,\r\n          )\r\n          validation_loader = DataLoader(validation_ds, batch_size=int(args.validation_batch_size), num_workers=4)\r\n```\r\n\r\nI am using .jpg images\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3886/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3858", "id": 1149967720, "node_id": "I_kwDODMjICc5Eix1o", "number": 3858, "title": "LoadImaged for 2D/3D grayscale tiff files", "user": {"login": "perlmutter", "id": 89415472, "node_id": "MDQ6VXNlcjg5NDE1NDcy", "avatar_url": "https://avatars.githubusercontent.com/u/89415472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perlmutter", "html_url": "https://github.com/perlmutter", "followers_url": "https://api.github.com/users/perlmutter/followers", "following_url": "https://api.github.com/users/perlmutter/following{/other_user}", "gists_url": "https://api.github.com/users/perlmutter/gists{/gist_id}", "starred_url": "https://api.github.com/users/perlmutter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perlmutter/subscriptions", "organizations_url": "https://api.github.com/users/perlmutter/orgs", "repos_url": "https://api.github.com/users/perlmutter/repos", "events_url": "https://api.github.com/users/perlmutter/events{/privacy}", "received_events_url": "https://api.github.com/users/perlmutter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2022-02-25T02:20:19Z", "updated_at": "2022-03-01T17:15:20Z", "closed_at": "2022-03-01T17:15:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using `LoadImaged` on a 2D grayscale tiff file with `WSIReader` and `backend=cucim` returns an array with 3 \"color\" channels, which are all identical.\r\n\r\nFor example,\r\n```\r\ndata_dict = {\"image\": \"test.tif\"}\r\nx = np.random.randint(low=0,high=256,size=(128,128),dtype=np.uint8)\r\nio.imsave(data_dict[\"image\"],x) \r\n\r\nprint(\"cucim: shape = \" + str(cucim.CuImage(data_dict[\"image\"]).shape))\r\ntransform = LoadImaged(keys=[\"image\"], reader=WSIReader, backend='cuCIM')\r\nprint(\"LoadImaged-cucim: shape = \" + str(transform(data_dict)[\"image\"].shape))\r\n```\r\nreturns,\r\n```\r\ncucim: shape = [128, 128, 1]\r\nLoadImaged-cucim: shape = (3, 128, 128)\r\n```\r\n\r\nWhen using `backend=tifffile` the files are misread entirely\r\n```\r\nprint(\"tifffule: shape = \" + str(tifffile.imread(data_dict[\"image\"]).shape))\r\ntransform = LoadImaged(keys=[\"image\"], reader=WSIReader, backend='tifffile')\r\nprint(\"LoadImaged-tifffile: shape = \" + str(transform(data_dict)[\"image\"].shape))\r\n```\r\nreturns,\r\n```\r\ntifffule: shape = (128, 128)\r\nLoadImaged-tifffile: shape = (3, 128)\r\n```\r\n\r\nIs this the expected behavior? Is there a better way to read 2D grayscale tiff files into monai? How about 3D grayscale tiffs?\r\n\r\nThanks,\r\nDavid", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3845", "id": 1147599034, "node_id": "I_kwDODMjICc5EZvi6", "number": 3845, "title": "`_get_all_ngc_models` uses `requests.get` and need to check the returned data", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-02-23T03:50:21Z", "updated_at": "2022-02-23T09:27:18Z", "closed_at": "2022-02-23T09:27:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I played with https://github.com/Project-MONAI/tutorials/blob/master/modules/transfer_mmar.ipynb, I met the following error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nJSONDecodeError                           Traceback (most recent call last)\r\n/tmp/ipykernel_799/1997768389.py in <module>\r\n      3 if PRETRAINED:\r\n      4     print(\"using a pretrained model.\")\r\n----> 5     unet_model = load_from_mmar(\r\n      6         mmar, mmar_dir=root_dir,\r\n      7         map_location=device,\r\n\r\n/opt/monai/monai/apps/mmars/mmars.py in load_from_mmar(item, mmar_dir, progress, version, map_location, pretrained, weights_only, model_key, api, model_file)\r\n    224     if not isinstance(item, Mapping):\r\n    225         item = get_model_spec(item)\r\n--> 226     model_dir = download_mmar(item=item, mmar_dir=mmar_dir, progress=progress, version=version, api=api)\r\n    227     if model_file is None:\r\n    228         model_file = os.path.join(\"models\", \"model.pt\")\r\n\r\n/opt/monai/monai/apps/mmars/mmars.py in download_mmar(item, mmar_dir, progress, api, version)\r\n    139     mmar_dir = Path(mmar_dir)\r\n    140     if api:\r\n--> 141         model_dict = _get_all_ngc_models(item.get(Keys.NAME, f\"{item}\") if isinstance(item, Mapping) else f\"{item}\")\r\n    142         if len(model_dict) == 0:\r\n    143             raise ValueError(f\"api query returns no item for pattern {item}.  Please change or shorten it.\")\r\n\r\n/opt/monai/monai/apps/mmars/mmars.py in _get_all_ngc_models(pattern, page_index, page_size)\r\n     82     else:\r\n     83         raise ValueError(\"NGC API requires requests package.  Please install it.\")\r\n---> 84     model_list = json.loads(resp.text)\r\n     85     model_dict = {}\r\n     86     for result in model_list[\"results\"]:\r\n\r\n/opt/conda/lib/python3.8/json/__init__.py in loads(s, cls, object_hook, parse_float, parse_int, parse_constant, object_pairs_hook, **kw)\r\n    355             parse_int is None and parse_float is None and\r\n    356             parse_constant is None and object_pairs_hook is None and not kw):\r\n--> 357         return _default_decoder.decode(s)\r\n    358     if cls is None:\r\n    359         cls = JSONDecoder\r\n\r\n/opt/conda/lib/python3.8/json/decoder.py in decode(self, s, _w)\r\n    335 \r\n    336         \"\"\"\r\n--> 337         obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n    338         end = _w(s, end).end()\r\n    339         if end != len(s):\r\n\r\n/opt/conda/lib/python3.8/json/decoder.py in raw_decode(self, s, idx)\r\n    353             obj, end = self.scan_once(s, idx)\r\n    354         except StopIteration as err:\r\n--> 355             raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\n    356         return obj, end\r\n\r\nJSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3830", "id": 1145640269, "node_id": "I_kwDODMjICc5ESRVN", "number": 3830, "title": "CropForeground pads asymmetric ", "user": {"login": "razorx89", "id": 15977832, "node_id": "MDQ6VXNlcjE1OTc3ODMy", "avatar_url": "https://avatars.githubusercontent.com/u/15977832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/razorx89", "html_url": "https://github.com/razorx89", "followers_url": "https://api.github.com/users/razorx89/followers", "following_url": "https://api.github.com/users/razorx89/following{/other_user}", "gists_url": "https://api.github.com/users/razorx89/gists{/gist_id}", "starred_url": "https://api.github.com/users/razorx89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/razorx89/subscriptions", "organizations_url": "https://api.github.com/users/razorx89/orgs", "repos_url": "https://api.github.com/users/razorx89/repos", "events_url": "https://api.github.com/users/razorx89/events{/privacy}", "received_events_url": "https://api.github.com/users/razorx89/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-02-21T10:58:52Z", "updated_at": "2022-02-22T13:42:32Z", "closed_at": "2022-02-22T13:42:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn `CropForeground`/`CropForegroundd` the user can request a margin around the foreground voxels. However, currently the margin is only correctly padded on the upper side of a dimension.\r\n\r\nSee:\r\nhttps://github.com/Project-MONAI/MONAI/blob/c3db337644d9525610d9fab3cfd30f963438dc6a/monai/transforms/utils.py#L924-L926\r\n\r\n**To Reproduce**\r\n```python\r\nfrom monai.transforms import CropForeground\r\nimport numpy as np\r\n\r\ntransform = CropForeground(margin=2)\r\narr = np.eye(3)[np.newaxis, ...]\r\nfor i in range(3):\r\n    inp = arr[:, i]\r\n    res = transform(inp)\r\n    print(inp, res.shape)\r\n# [[1. 0. 0.]] (1, 3)\r\n# [[0. 1. 0.]] (1, 4)\r\n# [[0. 0. 1.]] (1, 5)\r\n```\r\n\r\n**Expected behavior**\r\nThe specified margin should be enforced by cropping or padding on both ends of a dimension. \r\n\r\n**Environment**\r\nMonai 0.8.0, but see Permalink above", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3788", "id": 1132581491, "node_id": "I_kwDODMjICc5DgdJz", "number": 3788, "title": "Implementation of average surface distance differs from scientific literature", "user": {"login": "SilviaSeidlitz", "id": 4249077, "node_id": "MDQ6VXNlcjQyNDkwNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4249077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SilviaSeidlitz", "html_url": "https://github.com/SilviaSeidlitz", "followers_url": "https://api.github.com/users/SilviaSeidlitz/followers", "following_url": "https://api.github.com/users/SilviaSeidlitz/following{/other_user}", "gists_url": "https://api.github.com/users/SilviaSeidlitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/SilviaSeidlitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SilviaSeidlitz/subscriptions", "organizations_url": "https://api.github.com/users/SilviaSeidlitz/orgs", "repos_url": "https://api.github.com/users/SilviaSeidlitz/repos", "events_url": "https://api.github.com/users/SilviaSeidlitz/events{/privacy}", "received_events_url": "https://api.github.com/users/SilviaSeidlitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2022-02-11T13:13:57Z", "updated_at": "2022-02-21T11:02:11Z", "closed_at": "2022-02-21T11:02:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWe discovered that the definition of the average (symmetric) surface distance (ASD) differs between the [deepmind implementation](https://github.com/deepmind/surface-distance/blob/master/surface_distance/metrics.py#L293), the MONAI implementation and common use in literature. Some references of the common definition in literature are listed here:\r\n\r\n- [T. Heimann et al., \"Comparison and Evaluation of Methods for Liver Segmentation From CT Datasets\" in IEEE Transactions on Medical Imaging, vol. 28, no. 8, pp. 1251-1265, Aug. 2009, doi: 10.1109/TMI.2009.2013851](https://doi.org/10.1109/TMI.2009.2013851)\r\n- [Y. Varduhi and I. Voiculescu, \"Family of boundary overlap metrics for the evaluation of medical image segmentation\" in Journal of Medical Imaging 5.1, 2018](https://dx.doi.org/10.1117%2F1.JMI.5.1.015006)\r\n- [S. Vera et al., \"Medial structure generation for registration of anatomical structures\" Skeletonization. Academic Press, pp. 313-344, 2017](https://doi.org/10.1016/B978-0-08-101291-8.00013-4)\r\n- [L. Zhou et al., \"Deep neural networks for surface segmentation meet conditional random fields.\" arXiv preprint arXiv:1906.04714, 2019](https://arxiv.org/abs/1906.04714)\r\n\r\nComparing the MONAI definition to the common literature definition, the difference occurs in the case of symmtric ASD computation. In MONAI, both sets of distances (prediction to groundtruth and groundtruth to prediction) are individually averaged before the ASD is computed as average of these two values. In the literature, the distances are instead concatenated and averaged all together:\r\n\r\nMONAI (`asd_monai`):\r\n```python\r\nfor b, c in np.ndindex(batch_size, n_class):\r\n    (edges_pred, edges_gt) = get_mask_edges(y_pred[b, c], y[b, c])\r\n    surface_distance = get_surface_distance(edges_pred, edges_gt, distance_metric=distance_metric)\r\n    if surface_distance.shape == (0,):\r\n        avg_surface_distance = np.nan\r\n    else:\r\n        avg_surface_distance = surface_distance.mean()  # type: ignore\r\n    if not symmetric:\r\n        asd[b, c] = avg_surface_distance\r\n    else:\r\n        surface_distance_2 = get_surface_distance(edges_gt, edges_pred, distance_metric=distance_metric)\r\n        if surface_distance_2.shape == (0,):\r\n            avg_surface_distance_2 = np.nan\r\n        else:\r\n            avg_surface_distance_2 = surface_distance_2.mean()  # type: ignore\r\n        asd[b, c] = np.mean((avg_surface_distance, avg_surface_distance_2))\r\n```\r\n\r\nLiterature (`asd_own`):\r\n```python\r\nfor b, c in np.ndindex(batch_size, n_class):\r\n    (edges_pred, edges_gt) = get_mask_edges(y_pred[b, c], y[b, c])\r\n    distances_pred_gt = get_surface_distance(edges_pred, edges_gt, distance_metric=distance_metric)\r\n    if symmetric:\r\n        distances_gt_pred = get_surface_distance(edges_gt, edges_pred, distance_metric=distance_metric)\r\n        distances = np.concatenate([distances_pred_gt, distances_gt_pred])\r\n    else:\r\n        distances = distances_pred_gt\r\n    \r\n    asd[b, c] = np.nan if distances.shape == (0,) else np.mean(distances)\r\n```\r\n\r\nThe biggest difference between these two definitions arises in the case of a large difference in surface size between groundtruth  and prediction, in which case the MONAI implementation leads to the distances computed for the object of smaller surface to be overweighted compared to the distances computed for the object of larger surface.\r\n\r\nHere is an example of different ASD values obtained for the showcase of a small and a large object: \r\n\r\n```python\r\ngt = torch.ones(10, 10, dtype=torch.int64)\r\npred = torch.zeros(10, 10, dtype=torch.int64)\r\npred[4:6, 4:6] = 1\r\nprint(f'{gt = }')\r\nprint(f'{pred = }')\r\n\r\nsurface_distances = compute_surface_distances(gt.type(torch.bool).numpy(), pred.type(torch.bool).numpy(), (1, 1))\r\ngt_to_pred, pred_to_gt = compute_average_surface_distance(surface_distances)\r\nprint(f'deep mind: {np.mean([gt_to_pred, pred_to_gt]) = }')\r\n\r\ngt = F.one_hot(gt, num_classes=2).permute(2, 0, 1).unsqueeze(0)\r\npred = F.one_hot(pred, num_classes=2).permute(2, 0, 1).unsqueeze(0)\r\nprint(f'{asd_own(pred, gt, symmetric=False).item() = }')\r\nprint(f'{asd_monai(pred, gt, symmetric=False).item() = }')\r\nprint(f'{asd_own(gt, pred, symmetric=False).item() = }')\r\nprint(f'{asd_monai(gt, pred, symmetric=False).item() = }')\r\n\r\nprint(f'{asd_own(pred, gt, symmetric=True).item() = }')\r\nprint(f'{asd_monai(pred, gt, symmetric=True).item() = }')\r\nprint(f'{asd_own(gt, pred, symmetric=True).item() = }')\r\nprint(f'{asd_monai(gt, pred, symmetric=True).item() = }')\r\n```\r\n\r\n```\r\ngt = tensor([[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\r\n        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]])\r\npred = tensor([[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]])\r\ndeep mind: np.mean([gt_to_pred, pred_to_gt]) = 4.224683633075019\r\nasd_own(pred, gt, symmetric=False).item() = 4.0\r\nasd_monai(pred, gt, symmetric=False).item() = 4.0\r\nasd_own(gt, pred, symmetric=False).item() = 4.5385930456363175\r\nasd_monai(gt, pred, symmetric=False).item() = 4.5385930456363175\r\nasd_own(pred, gt, symmetric=True).item() = 4.484733741072686\r\nasd_monai(pred, gt, symmetric=True).item() = 4.269296522818159\r\nasd_own(gt, pred, symmetric=True).item() = 4.484733741072686\r\nasd_monai(gt, pred, symmetric=True).item() = 4.269296522818159\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3788/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3713", "id": 1114477010, "node_id": "I_kwDODMjICc5CbZHS", "number": 3713, "title": "`mode` of Evaluator can't work with string input", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2022-01-25T23:52:21Z", "updated_at": "2022-01-26T09:47:57Z", "closed_at": "2022-01-26T09:47:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIssue reported by @holgerroth : \r\nthis is for the saliency map inference. I need to run the evaluation in \"training mode\". SupervisedEvaluator in monai has that option but I guess it doesn't support the `str` type. it's checking for ForwardMode.EVAL or ForwardMode.TRAIN.\r\n```\r\n\"/opt/monai/monai/engines/evaluator.py\", line 208, in __init__\r\n    super().__init__(\r\n  File \"/opt/monai/monai/engines/evaluator.py\", line 123, in __init__\r\n    raise ValueError(f\"unsupported mode: {mode}, should be 'eval' or 'train'.\")\r\nValueError: unsupported mode: train, should be 'eval' or 'train'.\r\n```\r\nFYI, without using train mode, I will get this error when using SaliencyInferer.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3713/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/3656", "id": 1101878547, "node_id": "PR_kwDODMjICc4w8Fxu", "number": 3656, "title": "lint tests", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-13T14:43:39Z", "updated_at": "2022-01-14T09:56:07Z", "closed_at": "2022-01-13T20:59:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/3656", "html_url": "https://github.com/Project-MONAI/MONAI/pull/3656", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/3656.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/3656.patch", "merged_at": "2022-01-13T20:59:03Z"}, "body": "Fixes https://github.com/Project-MONAI/MONAI/issues/3654.\r\n\r\n### Description\r\nPerforms linting on test code.\r\n\r\n### Status\r\n**Ready**\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3656/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3654", "id": 1101661722, "node_id": "I_kwDODMjICc5BqgYa", "number": 3654, "title": "./runtests.sh does not pick up on missing imports", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444321, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzIx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-01-13T12:38:48Z", "updated_at": "2022-01-14T09:46:58Z", "closed_at": "2022-01-13T20:59:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs can be seen here: https://github.com/Project-MONAI/MONAI/runs/4802838071,\r\nthe `.runtests.sh` passes (the job named `flake8`), yet the tests fail, due to missing imports: https://github.com/Project-MONAI/MONAI/runs/4802838468?check_suite_focus=true#step:10:11980.\r\n\r\n**Expected behavior**\r\nOur `runtests.sh` script should pick up on these.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3654/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3620", "id": 1097241948, "node_id": "I_kwDODMjICc5BZpVc", "number": 3620, "title": "`test_scale_intensity_range_percentiles` error", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 4, "created_at": "2022-01-09T16:35:13Z", "updated_at": "2022-07-09T13:12:01Z", "closed_at": "2022-07-09T13:12:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\na frequent error for the recent unit testing, e.g. the log here: https://github.com/Project-MONAI/MONAI/actions/runs/1674183498\r\n```\r\n======================================================================\r\nFAIL: test_channel_wise (tests.test_scale_intensity_range_percentiles.TestScaleIntensityRangePercentiles)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/test_scale_intensity_range_percentiles.py\", line 86, in test_channel_wise\r\n    assert_allclose(result, p(expected), rtol=1e-4)\r\n  File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/utils.py\", line 92, in assert_allclose\r\n    np.testing.assert_allclose(actual, desired, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/dist-packages/numpy/testing/_private/utils.py\", line 1531, in assert_allclose\r\n    verbose=verbose, header=header, equal_nan=equal_nan)\r\n  File \"/usr/local/lib/python3.7/dist-packages/numpy/testing/_private/utils.py\", line 844, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError:\r\nNot equal to tolerance rtol=0.0001, atol=0\r\n\r\nMismatched elements: 496 / 8192 (6.05%)\r\nMax absolute difference: 255.\r\nMax relative difference: 1.008\r\n x: array([[[0., 0., 0., ..., 0., 0., 0.],\r\n        [0., 0., 0., ..., 0., 0., 0.],\r\n        [0., 0., 0., ..., 0., 0., 0.],...\r\n y: array([[[0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0],\r\n        [0, 0, 0, ..., 0, 0, 0],...\r\n\r\n----------------------------------------------------------------------\r\n```\r\n\r\n```\r\nMONAI version: 0+unknown\r\nNumpy version: 1.21.5\r\nPytorch version: 1.8.1+cu102\r\nMONAI flags: HAS_EXT = True, USE_COMPILED = True\r\nMONAI rev id: None\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.7\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.19.1\r\nPillow version: 9.0.0\r\nTensorboard version: 2.7.0\r\ngdown version: 4.2.0\r\nTorchVision version: 0.9.1+cu102\r\ntqdm version: 4.62.3\r\nlmdb version: 1.3.0\r\npsutil version: 5.9.0\r\npandas version: 1.3.5\r\neinops version: 0.3.2\r\ntransformers version: 4.15.0\r\nmlflow version: 1.22.0\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3620/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3618", "id": 1097171508, "node_id": "I_kwDODMjICc5BZYI0", "number": 3618, "title": "GeneralizedDiceLoss is not differentiable", "user": {"login": "josafatburmeister", "id": 33292321, "node_id": "MDQ6VXNlcjMzMjkyMzIx", "avatar_url": "https://avatars.githubusercontent.com/u/33292321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josafatburmeister", "html_url": "https://github.com/josafatburmeister", "followers_url": "https://api.github.com/users/josafatburmeister/followers", "following_url": "https://api.github.com/users/josafatburmeister/following{/other_user}", "gists_url": "https://api.github.com/users/josafatburmeister/gists{/gist_id}", "starred_url": "https://api.github.com/users/josafatburmeister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josafatburmeister/subscriptions", "organizations_url": "https://api.github.com/users/josafatburmeister/orgs", "repos_url": "https://api.github.com/users/josafatburmeister/repos", "events_url": "https://api.github.com/users/josafatburmeister/events{/privacy}", "received_events_url": "https://api.github.com/users/josafatburmeister/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-01-09T11:31:08Z", "updated_at": "2022-01-24T14:41:55Z", "closed_at": "2022-01-24T14:41:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe [code](https://github.com/Project-MONAI/MONAI/blob/a93b8ccb5c13e723f2ff28c1e54ffe1011c9f9b1/monai/losses/dice.py#L350) used for weight clamping in the forward method of the GeneralizedDiceLoss module is not differentiable:\r\n\r\n```python\r\nw = self.w_func(ground_o.float())\r\nfor b in w:\r\n    infs = torch.isinf(b)\r\n    b[infs] = 0.0\r\n    b[infs] = torch.max(b)\r\n```\r\n\r\nWhen computing the loss gradients, Pytorch throws the following error:\r\n\r\nRuntimeError: Output 0 of UnbindBackward0 is a view and is being modified inplace. This view is the output of a function that returns multiple views. Such functions do not allow the output views to be modified inplace. You should replace the inplace operation by an out-of-place one.\r\n\r\n**To Reproduce**\r\n\r\nThe bug can be reproduced using the following python script:\r\n\r\n```python\r\nimport torch\r\nfrom monai.losses.dice import GeneralizedDiceLoss\r\n\r\nprediction = torch.zeros(2, 3, 3, 3)\r\ntarget = torch.zeros(2, 3, 3, 3)\r\nprediction.requires_grad = True\r\ntarget.requires_grad = True\r\n\r\ngeneralized_dice_loss = GeneralizedDiceLoss()\r\nloss = generalized_dice_loss(prediction, target)\r\n```\r\n\r\nNote that the error does not occur if `requires_grad` is set to `False` for `prediction` and `target`. \r\n\r\n**Expected behavior**\r\nThe forward method of the GeneralizedDiceLoss module should be differentiable.\r\n\r\n**Environment**\r\n\r\nEnsuring you use the relevant python executable, please paste the output of:\r\n\r\n```\r\npython -c 'import monai; monai.config.print_debug_info()'\r\n```\r\n\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.8.0\r\nNumpy version: 1.22.0\r\nPytorch version: 1.10.1\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 714d00dffe6653e21260160666c4c201ab66511b\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.\r\nNibabel version: NOT INSTALLED or UNKNOWN VERSION.\r\nscikit-image version: NOT INSTALLED or UNKNOWN VERSION.\r\nPillow version: NOT INSTALLED or UNKNOWN VERSION.\r\nTensorboard version: NOT INSTALLED or UNKNOWN VERSION.\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: NOT INSTALLED or UNKNOWN VERSION.\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: NOT INSTALLED or UNKNOWN VERSION.\r\npandas version: NOT INSTALLED or UNKNOWN VERSION.\r\neinops version: NOT INSTALLED or UNKNOWN VERSION.\r\ntransformers version: NOT INSTALLED or UNKNOWN VERSION.\r\nmlflow version: NOT INSTALLED or UNKNOWN VERSION.\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\n`psutil` required for `print_system_info`\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 0\r\nHas CUDA: False\r\ncuDNN enabled: False\r\n```\r\n\r\n**Additional context**", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3613", "id": 1096961447, "node_id": "I_kwDODMjICc5BYk2n", "number": 3613, "title": "`test_persistentdataset_dist` error on windows", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 10, "created_at": "2022-01-08T15:41:39Z", "updated_at": "2022-01-11T11:13:51Z", "closed_at": "2022-01-11T11:13:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nthe error occurs randomly:\r\n```\r\ntest_mp_dataset (tests.test_persistentdataset_dist.TestDistDataset) ... Process SpawnProcess-51:\r\npersistent 1\r\nTraceback (most recent call last):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\shutil.py\", line 791, in move\r\n    os.rename(src, real_dst)\r\nFileExistsError: [WinError 183] Cannot create a file when that file already exists: 'C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp\\\\tmp2ndb3qxg\\\\54c0443faf33e022375c4a3adc6afd11.pt' -> 'C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp\\\\tmpovt2z4gf\\\\test\\\\54c0443faf33e022375c4a3adc6afd11.pt'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\multiprocessing\\process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 396, in run_process\r\n    raise e\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 387, in run_process\r\n    func(*args, **kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\utils.py\", line 557, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"D:\\a\\MONAI\\MONAI\\tests\\test_persistentdataset_dist.py\", line 73, in test_mp_dataset\r\n    self.assertEqual(list(ds1), list(ds))\r\n  File \"D:\\a\\MONAI\\MONAI\\monai\\data\\dataset.py\", line 97, in __getitem__\r\n    return self._transform(index)\r\n  File \"D:\\a\\MONAI\\MONAI\\monai\\data\\dataset.py\", line 360, in _transform\r\n    pre_random_item = self._cachecheck(self.data[index])\r\n  File \"D:\\a\\MONAI\\MONAI\\monai\\data\\dataset.py\", line 354, in _cachecheck\r\n    shutil.move(temp_hash_file, hashfile)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\shutil.py\", line 811, in move\r\n    copy_function(src, real_dst)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\shutil.py\", line 435, in copy2\r\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.8.10\\x64\\lib\\shutil.py\", line 264, in copyfile\r\n    with open(src, 'rb') as fsrc, open(dst, 'wb') as fdst:\r\nPermissionError: [Errno 13] Permission denied: 'C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp\\\\tmpovt2z4gf\\\\test\\\\54c0443faf33e022375c4a3adc6afd11.pt'\r\npersistent 0\r\nFAIL\r\n```\r\n\r\n--- update --- \r\nA similar issue was reported at [bpo-29982](https://bugs.python.org/issue29982) where the calling app `tempfile.TemporaryDirectory` to `shutil` should handle the exception. A python PR has been merged to address that issue https://github.com/python/cpython/pull/24793.\r\nBefore that PR is officially released in python 3.10, we handle the exception with another `try...except` in https://github.com/Project-MONAI/MONAI/pull/3633.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3613/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3588", "id": 1094644340, "node_id": "I_kwDODMjICc5BPvJ0", "number": 3588, "title": "Error while reading a single dicom image using a transform list", "user": {"login": "vikashg", "id": 3863212, "node_id": "MDQ6VXNlcjM4NjMyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3863212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vikashg", "html_url": "https://github.com/vikashg", "followers_url": "https://api.github.com/users/vikashg/followers", "following_url": "https://api.github.com/users/vikashg/following{/other_user}", "gists_url": "https://api.github.com/users/vikashg/gists{/gist_id}", "starred_url": "https://api.github.com/users/vikashg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vikashg/subscriptions", "organizations_url": "https://api.github.com/users/vikashg/orgs", "repos_url": "https://api.github.com/users/vikashg/repos", "events_url": "https://api.github.com/users/vikashg/events{/privacy}", "received_events_url": "https://api.github.com/users/vikashg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "vikashg", "id": 3863212, "node_id": "MDQ6VXNlcjM4NjMyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3863212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vikashg", "html_url": "https://github.com/vikashg", "followers_url": "https://api.github.com/users/vikashg/followers", "following_url": "https://api.github.com/users/vikashg/following{/other_user}", "gists_url": "https://api.github.com/users/vikashg/gists{/gist_id}", "starred_url": "https://api.github.com/users/vikashg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vikashg/subscriptions", "organizations_url": "https://api.github.com/users/vikashg/orgs", "repos_url": "https://api.github.com/users/vikashg/repos", "events_url": "https://api.github.com/users/vikashg/events{/privacy}", "received_events_url": "https://api.github.com/users/vikashg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "vikashg", "id": 3863212, "node_id": "MDQ6VXNlcjM4NjMyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3863212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vikashg", "html_url": "https://github.com/vikashg", "followers_url": "https://api.github.com/users/vikashg/followers", "following_url": "https://api.github.com/users/vikashg/following{/other_user}", "gists_url": "https://api.github.com/users/vikashg/gists{/gist_id}", "starred_url": "https://api.github.com/users/vikashg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vikashg/subscriptions", "organizations_url": "https://api.github.com/users/vikashg/orgs", "repos_url": "https://api.github.com/users/vikashg/repos", "events_url": "https://api.github.com/users/vikashg/events{/privacy}", "received_events_url": "https://api.github.com/users/vikashg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2022-01-05T18:43:04Z", "updated_at": "2022-01-06T15:58:27Z", "closed_at": "2022-01-05T20:37:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I try to read a single dicom image I get the following error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/CAII/app_classification/data_loaders.py\", line 64, in <module>\r\n    main()\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/CAII/app_classification/data_loaders.py\", line 58, in main\r\n    for _ in train_loader:\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/dataloader.py\", line 521, in __next__\r\n    data = self._next_data()\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/dataloader.py\", line 1203, in _next_data\r\n    return self._process_data(data)\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/dataloader.py\", line 1229, in _process_data\r\n    data.reraise()\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/_utils.py\", line 434, in reraise\r\n    raise exception\r\nRuntimeError: Caught RuntimeError in DataLoader worker process 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/MONAI/monai/transforms/transform.py\", line 83, in apply_transform\r\n    return _apply_transform(transform, data, unpack_items)\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/MONAI/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/MONAI/monai/transforms/io/array.py\", line 213, in __call__\r\n    raise RuntimeError(\r\nRuntimeError: cannot find a suitable reader for file: /data/Data/MayoClinicData/BreastDensity/DICOM_batch2/A/PN-8264/Screening_Mammography_w_Implants_TomoHD-2019-09-12/Radiation_Dose_Information/1.2.840.113713.17.1538.52353358421150228810446112130563574398.dcm.\r\n    Please install the reader libraries, see also the installation instructions:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies.\r\n   The current registered: [<monai.data.image_reader.ITKReader object at 0x7fdd7e670280>, <monai.data.image_reader.NumpyReader object at 0x7fdea8574eb0>, <monai.data.image_reader.PILReader object at 0x7fdea8574cd0>, <monai.data.image_reader.NibabelReader object at 0x7fdea8574e80>, <monai.data.image_reader.ITKReader object at 0x7fdd6f3b3b80>].\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/_utils/worker.py\", line 287, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/_utils/fetch.py\", line 49, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/gupta/anaconda3/envs/monai/lib/python3.9/site-packages/torch/utils/data/_utils/fetch.py\", line 49, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/CAII/app_classification/data_loaders.py\", line 37, in __getitem__\r\n    return self.transforms(self.image_files[index]), self.image_labels[index]\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/MONAI/monai/transforms/compose.py\", line 160, in __call__\r\n    input_ = apply_transform(_transform, input_, self.map_items, self.unpack_items)\r\n  File \"/data/Vikash/Tools_A100/Tools/BreastDensityMonai/MONAI/monai/transforms/transform.py\", line 107, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.io.array.LoadImage object at 0x7fdd7e61ca60>\r\n\r\n```\r\n\r\nPoint to note here is that I have all the libraries installed. In addition when I try to read the image using just the LoadImage() function as follows \r\n```\r\ndata=LoadImage(image_only=True, reader='itkreader')(filename)\r\n```\r\nIt works.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nhave a file list of single dicom images\r\n```\r\nclass MammoDataset(torch.utils.data.Dataset):\r\n\tdef __init__(self, image_files, image_labels, transforms):\r\n\t\tself.image_files = image_files\r\n\t\tself.image_labels = image_labels \r\n\t\tself.transforms = transforms\r\n \r\n\tdef __len__(self):\r\n\t\treturn len(self.image_files)\r\n\r\n\tdef __getitem__(self, index):\r\n\t\treturn self.transforms(self.image_files[index]), self.image_labels[index]\r\n\r\ntrain_transforms = Compose([LoadImage(image_only=True, reader=\"ITKReader\"), AddChannel()])\r\ntrain_ds = MammoDataset(train_images, train_labels, train_transforms)\r\ntrain_loader = DataLoader(train_ds, batch_size=10, num_workers=1)\r\n\tfor _ in train_loader:\r\n\t\timg, label = _[0], _[1]\r\n\r\n\r\n\r\n\r\n**Expected behavior**\r\nI tested the code with numpy arrays, that is a list of numpy arrays as filenames and they work fine. But when I try to use the dicom images in place of numpy arrays I get the above error\r\n\r\n**Additional context**\r\nI built the monai code in develop mode.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3588/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3552", "id": 1090238758, "node_id": "I_kwDODMjICc5A-7km", "number": 3552, "title": "runtests.sh Installs Links to Current Code Directory", "user": {"login": "ericspod", "id": 17726042, "node_id": "MDQ6VXNlcjE3NzI2MDQy", "avatar_url": "https://avatars.githubusercontent.com/u/17726042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericspod", "html_url": "https://github.com/ericspod", "followers_url": "https://api.github.com/users/ericspod/followers", "following_url": "https://api.github.com/users/ericspod/following{/other_user}", "gists_url": "https://api.github.com/users/ericspod/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericspod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericspod/subscriptions", "organizations_url": "https://api.github.com/users/ericspod/orgs", "repos_url": "https://api.github.com/users/ericspod/repos", "events_url": "https://api.github.com/users/ericspod/events{/privacy}", "received_events_url": "https://api.github.com/users/ericspod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 4, "created_at": "2021-12-29T03:11:31Z", "updated_at": "2021-12-30T22:15:22Z", "closed_at": "2021-12-30T21:08:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen `runtests.sh` is run it tries to build with the `compile_cpp` function every time some operation is done such as autofixing. This installs links in various places to add the current directory into the Python environment such as in `$HOME/.local/lib/python3.8/site-packages` (for Python 3.8). This changes files such as the `easy-install.pth` file in that directory, and adds `monai.edd-link`, so that the current directory appears in `sys.path` mysteriously if the user isn't aware of this behaviour. If this is being run from a MONAI checkout then the directory will appear in virtual environments or conda environments even if these have MONAI already installed in them which will confuse the user about which version of the library is being used.\r\n\r\nWhen the script is run there shouldn't be anything installed just by doing checks or autofixing code, so something like `-n` needs to be added to the `setup.py` commands in `compile_cpp` or the uninstall process run at the end of that function as well as the beginning. The invocation of `setup.py` includes the `--user` argument which is why the files in `$HOME/.local` are changed, without it files  in the current environment will be changed instead to install links there in the same way. Removing this argument therefore won't solve this problem.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to a MONAI checkout directory\r\n2. Run commands './runtests.sh --autofix'\r\n\r\n**Expected behavior**\r\nThe state of the environment should be unchanged after the script is run. \r\n\r\n**Environment**\r\n\r\nEnsuring you use the relevant python executable, please paste the output of:\r\n\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.7.0+236.g5efba23f\r\nNumpy version: 1.20.3\r\nPytorch version: 1.10.0\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 5efba23f47c706703897546d6fa2c2d5b1947abf\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.7\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.18.3\r\nPillow version: 8.4.0\r\nTensorboard version: 2.7.0\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: 0.11.1\r\ntqdm version: 4.62.3\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: 5.8.0\r\npandas version: 1.3.4\r\neinops version: NOT INSTALLED or UNKNOWN VERSION.\r\ntransformers version: NOT INSTALLED or UNKNOWN VERSION.\r\nmlflow version: 1.22.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.3 LTS\r\nPlatform: Linux-5.4.0-88-generic-x86_64-with-glibc2.17\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.12\r\nProcess name: python\r\nCommand: ['python', '-c', 'import monai; monai.config.print_debug_info()']\r\nOpen files: []\r\nNum physical CPUs: 6\r\nNum logical CPUs: 12\r\nNum usable CPUs: 12\r\nCPU usage (%): [15.8, 7.5, 53.7, 0.0, 0.0, 41.4, 0.0, 0.0, 26.9, 0.0, 80.4, 0.9]\r\nCPU freq. (MHz): 1772\r\nLoad avg. in last 1, 5, 15 mins (%): [19.6, 15.2, 7.2]\r\nDisk usage (%): 76.2\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 31.3\r\nAvailable memory (GB): 17.1\r\nUsed memory (GB): 13.6\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 2\r\nHas CUDA: True\r\nCUDA version: 10.2\r\ncuDNN enabled: True\r\ncuDNN version: 7605\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_37', 'sm_50', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'compute_37']\r\nGPU 0 Name: NVIDIA TITAN X (Pascal)\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 28\r\nGPU 0 Total memory (GB): 11.9\r\nGPU 0 CUDA capability (maj.min): 6.1\r\nGPU 1 Name: NVIDIA GeForce GTX 980\r\nGPU 1 Is integrated: False\r\nGPU 1 Is multi GPU board: False\r\nGPU 1 Multi processor count: 16\r\nGPU 1 Total memory (GB): 3.9\r\nGPU 1 CUDA capability (maj.min): 5.2\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3541", "id": 1087567863, "node_id": "I_kwDODMjICc5A0vf3", "number": 3541, "title": "cupy_backends.cuda.api.driver.CUDADriverError", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-12-23T10:10:20Z", "updated_at": "2022-01-07T12:54:48Z", "closed_at": "2021-12-24T09:20:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Mark the Blossom error for future reference:\r\n```\r\n2021-12-22T14:40:04.5597947Z Traceback (most recent call last):\r\n2021-12-22T14:40:04.5599020Z   File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n2021-12-22T14:40:04.5599815Z     return func(*(a + p.args), **p.kwargs)\r\n2021-12-22T14:40:04.5600883Z   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/test_cucim_transform.py\", line 79, in test_tramsforms_numpy_single\r\n2021-12-22T14:40:04.5601701Z     output = CuCIM(**params)(input)\r\n2021-12-22T14:40:04.5602662Z   File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n2021-12-22T14:40:04.5603525Z     return self.transform(data, *self.args, **self.kwargs)\r\n2021-12-22T14:40:04.5604556Z   File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 153, in zoom\r\n2021-12-22T14:40:04.5605353Z     kernel = CUDA_KERNELS.get_function(\"zoom_out_kernel\")\r\n2021-12-22T14:40:04.5606092Z   File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n2021-12-22T14:40:04.5606984Z   File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n2021-12-22T14:40:04.5607845Z   File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n2021-12-22T14:40:04.5608663Z   File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n2021-12-22T14:40:04.5609428Z   File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n2021-12-22T14:40:04.5610153Z   File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n2021-12-22T14:40:04.5610923Z   File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n2021-12-22T14:40:04.5612189Z   File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n2021-12-22T14:40:04.5612955Z     return _compile_with_cache_cuda(\r\n2021-12-22T14:40:04.5613953Z   File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n2021-12-22T14:40:04.5614666Z     mod.load(cubin)\r\n2021-12-22T14:40:04.5615438Z   File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n2021-12-22T14:40:04.5616490Z   File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n2021-12-22T14:40:04.5617757Z   File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n2021-12-22T14:40:04.5619107Z   File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\n2021-12-22T14:40:04.5620761Z cupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n```\r\n\r\nThanks.\r\n\r\n_Originally posted by @Nic-Ma in https://github.com/Project-MONAI/MONAI/issues/3532#issuecomment-999632799_\r\n\r\nI had another look at this, it seems 21.12 docker container is not compatible with the NVTX utilities.\r\n\r\nnightly test error logs:\r\n<details>\r\n\r\n```\r\n\r\n======================================================================\r\nERROR: test_wrapper_tranforms_0 (tests.test_nvtx_decorator.TestNVTXRangeDecorator)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/monai/monai/transforms/transform.py\", line 82, in apply_transform\r\n    return _apply_transform(transform, data, unpack_items)\r\n  File \"/opt/monai/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/opt/monai/monai/utils/nvtx.py\", line 114, in range_wrapper\r\n    output = _temp_func(*args, **kwargs)\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1258, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/spatial/rotate_and_flip.py\", line 212, in rand_image_rotate_90\r\n    return image_rotate_90(img, _rand_k, spatial_axis)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/spatial/rotate_and_flip.py\", line 118, in image_rotate_90\r\n    cupy_img = cupy.ascontiguousarray(img)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/_creation/from_data.py\", line 97, in ascontiguousarray\r\n    return _core.ascontiguousarray(a, dtype)\r\n  File \"cupy/_core/core.pyx\", line 2442, in cupy._core.core.ascontiguousarray\r\n  File \"cupy/_core/core.pyx\", line 2459, in cupy._core.core.ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 555, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_nvtx_decorator.py\", line 122, in test_wrapper_tranforms\r\n    output = transforms(input)\r\n  File \"/opt/monai/monai/transforms/compose.py\", line 160, in __call__\r\n    input_ = apply_transform(_transform, input_, self.map_items, self.unpack_items)\r\n  File \"/opt/monai/monai/transforms/transform.py\", line 105, in apply_transform\r\n    _log_stats(data=data)\r\n  File \"/opt/monai/monai/transforms/transform.py\", line 99, in _log_stats\r\n    datastats(img=data, data_value=True, prefix=prefix)\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 626, in __call__\r\n    lines.append(f\"Value: {img}\")\r\n  File \"cupy/_core/core.pyx\", line 1544, in cupy._core.core.ndarray.__format__\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_batch_1 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 176, in test_tramsforms_cupy_batch\r\n    cp.testing.assert_allclose(output, expected)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/testing/_array.py\", line 25, in assert_allclose\r\n    cupy.asnumpy(actual), cupy.asnumpy(desired),\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/__init__.py\", line 773, in asnumpy\r\n    return a.get(stream=stream, order=order)\r\n  File \"cupy/_core/core.pyx\", line 1567, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 555, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_batch_2 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 176, in test_tramsforms_cupy_batch\r\n    cp.testing.assert_allclose(output, expected)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/testing/_array.py\", line 25, in assert_allclose\r\n    cupy.asnumpy(actual), cupy.asnumpy(desired),\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/__init__.py\", line 773, in asnumpy\r\n    return a.get(stream=stream, order=order)\r\n  File \"cupy/_core/core.pyx\", line 1567, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 555, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_batch_4 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 173, in test_tramsforms_cupy_batch\r\n    output = RandCuCIMd(keys=\"image\", **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/scaling.py\", line 98, in scale_intensity_range\r\n    scale = CUDA_KERNELS.get_function(\"scaleVolume\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 555, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_batch_5 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 173, in test_tramsforms_cupy_batch\r\n    output = RandCuCIMd(keys=\"image\", **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 153, in zoom\r\n    kernel = CUDA_KERNELS.get_function(\"zoom_out_kernel\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_batch_6 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 173, in test_tramsforms_cupy_batch\r\n    output = RandCuCIMd(keys=\"image\", **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 253, in rand_zoom\r\n    return zoom(img, zoom_factor)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 153, in zoom\r\n    kernel = CUDA_KERNELS.get_function(\"zoom_out_kernel\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_single_1 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 150, in test_tramsforms_cupy_single\r\n    cp.testing.assert_allclose(output, expected)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/testing/_array.py\", line 25, in assert_allclose\r\n    cupy.asnumpy(actual), cupy.asnumpy(desired),\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/__init__.py\", line 773, in asnumpy\r\n    return a.get(stream=stream, order=order)\r\n  File \"cupy/_core/core.pyx\", line 1567, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_single_2 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 150, in test_tramsforms_cupy_single\r\n    cp.testing.assert_allclose(output, expected)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/testing/_array.py\", line 25, in assert_allclose\r\n    cupy.asnumpy(actual), cupy.asnumpy(desired),\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/__init__.py\", line 773, in asnumpy\r\n    return a.get(stream=stream, order=order)\r\n  File \"cupy/_core/core.pyx\", line 1567, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_single_4 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 147, in test_tramsforms_cupy_single\r\n    output = RandCuCIMd(keys=\"image\", apply_prob=1.0, **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/scaling.py\", line 98, in scale_intensity_range\r\n    scale = CUDA_KERNELS.get_function(\"scaleVolume\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_single_5 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 147, in test_tramsforms_cupy_single\r\n    output = RandCuCIMd(keys=\"image\", apply_prob=1.0, **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 153, in zoom\r\n    kernel = CUDA_KERNELS.get_function(\"zoom_out_kernel\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_cupy_single_6 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 147, in test_tramsforms_cupy_single\r\n    output = RandCuCIMd(keys=\"image\", apply_prob=1.0, **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 253, in rand_zoom\r\n    return zoom(img, zoom_factor)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/intensity/zoom.py\", line 153, in zoom\r\n    kernel = CUDA_KERNELS.get_function(\"zoom_out_kernel\")\r\n  File \"cupy/_core/raw.pyx\", line 485, in cupy._core.raw.RawModule.get_function\r\n  File \"cupy/_core/raw.pyx\", line 96, in cupy._core.raw.RawKernel.kernel.__get__\r\n  File \"cupy/_core/raw.pyx\", line 113, in cupy._core.raw.RawKernel._kernel\r\n  File \"cupy/_util.pyx\", line 59, in cupy._util.memoize.decorator.ret\r\n  File \"cupy/_core/raw.pyx\", line 547, in cupy._core.raw._get_raw_module\r\n  File \"cupy/_core/core.pyx\", line 1961, in cupy._core.core.compile_with_cache\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n======================================================================\r\nERROR: test_tramsforms_numpy_batch_1 (tests.test_rand_cucim_dict_transform.TestRandCuCIMDict)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/opt/monai/tests/test_rand_cucim_dict_transform.py\", line 121, in test_tramsforms_numpy_batch\r\n    output = RandCuCIMd(keys=\"image\", apply_prob=1.0, **params)(input)[\"image\"]\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1593, in __call__\r\n    return super().__call__(data)\r\n  File \"/opt/monai/monai/transforms/utility/dictionary.py\", line 1548, in __call__\r\n    d[key] = self.trans(d[key])\r\n  File \"/opt/monai/monai/transforms/utility/array.py\", line 1216, in __call__\r\n    return self.transform(data, *self.args, **self.kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cucim/core/operations/spatial/rotate_and_flip.py\", line 68, in image_flip\r\n    result = cupy.asnumpy(result)\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/__init__.py\", line 773, in asnumpy\r\n    return a.get(stream=stream, order=order)\r\n  File \"cupy/_core/core.pyx\", line 1567, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1623, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 1625, in cupy._core.core.ndarray.get\r\n  File \"cupy/_core/core.pyx\", line 2404, in cupy._core.core._internal_ascontiguousarray\r\n  File \"cupy/_core/_kernel.pyx\", line 1185, in cupy._core._kernel.ufunc.__call__\r\n  File \"cupy/_core/_kernel.pyx\", line 1212, in cupy._core._kernel.ufunc._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 952, in cupy._core._kernel._get_ufunc_kernel\r\n  File \"cupy/_core/_kernel.pyx\", line 62, in cupy._core._kernel._get_simple_elementwise_kernel\r\n  File \"cupy/_core/core.pyx\", line 2030, in cupy._core.core.compile_with_cache\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 434, in compile_with_cache\r\n    return _compile_with_cache_cuda(\r\n  File \"/opt/conda/lib/python3.8/site-packages/cupy/cuda/compiler.py\", line 502, in _compile_with_cache_cuda\r\n    mod.load(cubin)\r\n  File \"cupy/cuda/function.pyx\", line 241, in cupy.cuda.function.Module.load\r\n  File \"cupy/cuda/function.pyx\", line 243, in cupy.cuda.function.Module.load\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 253, in cupy_backends.cuda.api.driver.moduleLoadData\r\n  File \"cupy_backends/cuda/api/driver.pyx\", line 125, in cupy_backends.cuda.api.driver.check_status\r\ncupy_backends.cuda.api.driver.CUDADriverError: CUDA_ERROR_UNSUPPORTED_PTX_VERSION: the provided PTX was compiled with an unsupported toolchain.\r\n\r\n```\r\n\r\n</details>", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3487", "id": 1079338511, "node_id": "I_kwDODMjICc5AVWYP", "number": 3487, "title": "Update Novograd link", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-12-14T05:46:27Z", "updated_at": "2021-12-14T07:14:55Z", "closed_at": "2021-12-14T07:14:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This link in the doc string of `class Novograd` is disabled now:\r\nhttps://github.com/NVIDIA/DeepLearningExamples/blob/master/PyTorch/SpeechRecognition/Jasper/optimizers.py\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3466", "id": 1076540848, "node_id": "I_kwDODMjICc5AKrWw", "number": 3466, "title": "`NormalizeIntensity` docstring error", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444318, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2021-12-10T07:51:16Z", "updated_at": "2021-12-12T08:10:37Z", "closed_at": "2021-12-12T08:10:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "docstring of `channel_wise` is wrong, and it may mislead users that this parameter only works when subtrahend and divisor are not provided.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3434", "id": 1069398159, "node_id": "I_kwDODMjICc4_vbiP", "number": 3434, "title": "test_wsireader full tests errors", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-12-02T10:46:39Z", "updated_at": "2021-12-02T22:01:05Z", "closed_at": "2021-12-02T22:01:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nERROR: test_read_rgba_0 (tests.test_wsireader.TestTiffFile)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_wsireader.py\", line 158, in test_read_rgba\r\n    image[mode], _ = reader.get_data(img_obj)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 775, in get_data\r\n    region = self._extract_region(img, location=location, size=size, level=level, dtype=dtype)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 850, in _extract_region\r\n    region = region[location[0] : location[0] + size[0], location[1] : location[1] + size[1]]\r\nTypeError: slice indices must be integers or None or have an __index__ method\r\n\r\n======================================================================\r\nERROR: test_read_rgba_1 (tests.test_wsireader.TestTiffFile)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_wsireader.py\", line 158, in test_read_rgba\r\n    image[mode], _ = reader.get_data(img_obj)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 775, in get_data\r\n    region = self._extract_region(img, location=location, size=size, level=level, dtype=dtype)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 850, in _extract_region\r\n    region = region[location[0] : location[0] + size[0], location[1] : location[1] + size[1]]\r\nTypeError: slice indices must be integers or None or have an __index__ method\r\n\r\n======================================================================\r\nERROR: test_read_whole_image_0__home_jenkins_agent_workspace_MONAI_postmerge_monai_github_tests_testing_data_temp_1sGTKZlJBIz53pfqTxoTqiIQzIoEzHLAe_tiff (tests.test_wsireader.TestTiffFile)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_wsireader.py\", line 117, in test_read_whole_image\r\n    img = reader.get_data(img_obj)[0]\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 775, in get_data\r\n    region = self._extract_region(img, location=location, size=size, level=level, dtype=dtype)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 850, in _extract_region\r\n    region = region[location[0] : location[0] + size[0], location[1] : location[1] + size[1]]\r\nTypeError: slice indices must be integers or None or have an __index__ method\r\n\r\n======================================================================\r\nERROR: test_with_dataloader_0__home_jenkins_agent_workspace_MONAI_postmerge_monai_github_tests_testing_data_temp_1sGTKZlJBIz53pfqTxoTqiIQzIoEzHLAe_tiff (tests.test_wsireader.TestTiffFile)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 82, in apply_transform\r\n    return _apply_transform(transform, data, unpack_items)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/io/dictionary.py\", line 121, in __call__\r\n    data = self._loader(d[key], reader)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/io/array.py\", line 214, in __call__\r\n    img_array, meta_data = reader.get_data(img)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 775, in get_data\r\n    region = self._extract_region(img, location=location, size=size, level=level, dtype=dtype)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/image_reader.py\", line 850, in _extract_region\r\n    region = region[location[0] : location[0] + size[0], location[1] : location[1] + size[1]]\r\nTypeError: slice indices must be integers or None or have an __index__ method\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 82, in apply_transform\r\n    return _apply_transform(transform, data, unpack_items)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/compose.py\", line 160, in __call__\r\n    input_ = apply_transform(_transform, input_, self.map_items, self.unpack_items)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 106, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.io.dictionary.LoadImaged object at 0x7f2571aca940>\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/tests/test_wsireader.py\", line 173, in test_with_dataloader\r\n    data: dict = first(data_loader)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/utils/misc.py\", line 73, in first\r\n    for i in iterable:\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 521, in __next__\r\n    data = self._next_data()\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 561, in _next_data\r\n    data = self._dataset_fetcher.fetch(index)  # may raise StopIteration\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 49, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 49, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/dataset.py\", line 97, in __getitem__\r\n    return self._transform(index)\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/data/dataset.py\", line 83, in _transform\r\n    return apply_transform(self.transform, data_i) if self.transform is not None else data_i\r\n  File \"/home/jenkins/agent/workspace/MONAI-postmerge/monai_github/monai/transforms/transform.py\", line 106, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.compose.Compose object at 0x7f23c856a7f0>\r\n\r\n----------------------------------------------------------------------\r\n```\r\n\r\nenv:\r\n```\r\nMONAI version: 0+untagged.251.g5391f7c\r\nNumpy version: 1.18.1\r\nPytorch version: 1.10.0+cu102\r\nMONAI flags: HAS_EXT = True, USE_COMPILED = True\r\nMONAI rev id: 5391f7cded378f30b0ce0758b19adcf9daf988c8\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.6\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.15.0\r\nPillow version: 8.4.0\r\nTensorboard version: 2.1.0\r\ngdown version: 4.2.0\r\nTorchVision version: 0.11.1+cu102\r\ntqdm version: 4.62.3\r\nlmdb version: 0.98\r\npsutil version: 5.6.7\r\npandas version: 0.24.2\r\neinops version: 0.3.2\r\ntransformers version: 4.12.5\r\nmlflow version: 1.22.0\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3415", "id": 1065995436, "node_id": "I_kwDODMjICc4_icys", "number": 3415, "title": "WSIReader with OpenSlide can load regions of incorrect size by default", "user": {"login": "dccastro", "id": 7073707, "node_id": "MDQ6VXNlcjcwNzM3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7073707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dccastro", "html_url": "https://github.com/dccastro", "followers_url": "https://api.github.com/users/dccastro/followers", "following_url": "https://api.github.com/users/dccastro/following{/other_user}", "gists_url": "https://api.github.com/users/dccastro/gists{/gist_id}", "starred_url": "https://api.github.com/users/dccastro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dccastro/subscriptions", "organizations_url": "https://api.github.com/users/dccastro/orgs", "repos_url": "https://api.github.com/users/dccastro/repos", "events_url": "https://api.github.com/users/dccastro/events{/privacy}", "received_events_url": "https://api.github.com/users/dccastro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 2, "created_at": "2021-11-29T12:45:09Z", "updated_at": "2021-12-02T09:20:47Z", "closed_at": "2021-12-02T09:20:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen `size` is unspecified and using the OpenSlide backend, `WSIReader.get_data()` assumes by default that the size of the slide at a given magnification `level` is `2**level` times smaller than the full-resolution size (see [here](https://github.com/Project-MONAI/MONAI/blob/0.8.0/monai/data/image_reader.py#L771-L773)). However, the magnification factors are not necessarily consecutive powers of 2, in which case the reader can return arrays of vastly incorrect size.\r\n\r\nFor example, I've encountered this issue with slides from the TCGA dataset. At the highest `level`, the image is downsampled by 32x instead of the assumed 8x, meaning the reader returns an image array that is 4x larger than necessary in each dimension (filled with 1/16th data, the rest padded with zeros).\r\n\r\n**To Reproduce**\r\n1. Download a pathology slide file with inhomogeneous downsampling levels (e.g. file \"TCGA-2A-A8VL-01Z-00-DX1.2C2BD6EF-EC17-4117-AE89-A22B67AFB233.svs\" from TCGA, available here on [the GDC portal](https://portal.gdc.cancer.gov/cases/49197847-cc83-4ce1-8397-d09cea4c4928?filters=%7B%22op%22%3A%22and%22%2C%22content%22%3A%5B%7B%22op%22%3A%22in%22%2C%22content%22%3A%7B%22field%22%3A%22cases.case_id%22%2C%22value%22%3A%5B%2249197847-cc83-4ce1-8397-d09cea4c4928%22%5D%7D%7D%5D%7D); has [1x, 4x, 16x, 32x] downsampling).\r\n2. Install OpenSlide and its Python wrapper.\r\n3. Instantiate `WSIReader(backend='openslide')`\r\n```python\r\nfrom monai.data.image_reader import WSIReader\r\nreader = WSIReader(backend='openslide')\r\nslide = reader.read(\"<your slide file>\")\r\nlevel = slide.level_count - 1  # pick highest level for demonstration\r\nimage = reader.get_data(slide, level=level)\r\n# image is 4x4 times larger than expected and filled with 15/16=93.8% zeros\r\n```\r\n\r\n**Expected behavior**\r\nThe `WSIReader` should consider the actual magnification levels and corresponding dimensions encoded in the file headers. This information is readily available in the OpenSlide object's `level_dimensions` attribute ([docs](https://openslide.org/api/python/#openslide.OpenSlide.level_dimensions)).\r\n\r\n**Environment**\r\n- `monai` v0.6.0 (but same behaviour is still implemented in latest v0.8)\r\n- `openslide` v3.4.1\r\n- `openslide-python` v1.1.2", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3415/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3387", "id": 1061386782, "node_id": "I_kwDODMjICc4_Q3oe", "number": 3387, "title": "`AsDiscreted` bug when `threshold=0.0`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-11-23T14:58:53Z", "updated_at": "2021-11-24T10:57:40Z", "closed_at": "2021-11-24T10:57:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reproduce the bug:\r\n\r\n```\r\nfrom monai.transforms import AsDiscreted\r\na = AsDiscreted(keys=\"pred\", threshold=0.0)\r\n```\r\n\r\n<img width=\"1089\" alt=\"Screen Shot 2021-11-23 at 10 56 39 PM\" src=\"https://user-images.githubusercontent.com/68361391/143047946-07624927-dda0-4899-bfe6-36caec03d26a.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3370", "id": 1058700496, "node_id": "I_kwDODMjICc4_GnzQ", "number": 3370, "title": "`decollate_batch` return an empty list", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-19T16:19:15Z", "updated_at": "2021-11-22T08:47:09Z", "closed_at": "2021-11-22T08:47:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`decollate_batch` will return an empty list, if input is a dict, and one of its value is an empty list.\r\nFor example:\r\n```\r\ndata = {\r\n    \"class\": ['ToTensord', 'ToTensord'],\r\n    \"id\": torch.tensor([1, 2]),\r\n    \"orig_size\": [],\r\n}\r\n```\r\n`decollate_batch(data)` will return `[]`\r\n\r\nThis case comes from a classification task, where I used `SupervisedTrainer`, and labels are achieved from `ToNumpyd`. The `data` in the above example belongs to `label_transforms` which is in `engine.state.batch`", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3335", "id": 1053073221, "node_id": "I_kwDODMjICc4-xJ9F", "number": 3335, "title": "unit test error from `python -m tests.clang_format_utils`", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2021-11-14T23:33:37Z", "updated_at": "2021-11-15T13:18:19Z", "closed_at": "2021-11-15T13:18:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nerror from `python -m tests.clang_format_utils`\r\n```\r\n2021-11-14 22:26:15,861 - INFO - Downloaded: /__w/MONAI/MONAI/.clang-format-bin/clang-format\r\n2021-11-14 22:26:15,864 - ERROR - check_hash failed 938869fb71b05f5ba345ab36dfbbc4388f53a550.\r\nclang-format: 1.86MB [00:02, 675kB/s]                            \r\nDownload /__w/MONAI/MONAI/.clang-format-bin/clang-format failed: sha1 check of downloaded file failed: URL=https://oss-clang-format.s3.us-east-2.amazonaws.com/linux64/clang-format-linux64, filepath=/__w/MONAI/MONAI/.clang-format-bin/clang-format, expected sha1=9073602de1c4e1748f2feea5a0782417b20e3043.\r\nPlease remove /__w/MONAI/MONAI/.clang-format-bin/clang-format and retry.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3335/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3263", "id": 1045648090, "node_id": "I_kwDODMjICc4-U1La", "number": 3263, "title": "nightly tests error: test_masked_inference_wsi_dataset", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-05T09:59:13Z", "updated_at": "2021-11-05T11:28:17Z", "closed_at": "2021-11-05T11:28:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nERROR: test_read_patches_cucim_2 (tests.test_masked_inference_wsi_dataset.TestMaskedInferenceWSIDataset)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/tests/test_masked_inference_wsi_dataset.py\", line 169, in test_read_patches_cucim\r\n    dataset = MaskedInferenceWSIDataset(**input_parameters)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 197, in __init__\r\n    self.data = self._prepare_data(data)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 207, in _prepare_data\r\n    prepared_sample = self._prepare_a_sample(sample)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 230, in _prepare_a_sample\r\n    image = self.image_reader.read(sample[\"image\"])\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/data/image_reader.py\", line 715, in read\r\n    img = self.wsi_reader(name)\r\nValueError: Cannot find a plugin to handle '/home/jenkins/agent/workspace/Monai-latest-image/tests/testing_data/temp_uc?id=1sGTKZlJBIz53pfqTxoTqiIQzIoEzHLAe'!\r\n\r\n======================================================================\r\nERROR: test_read_patches_cucim_3 (tests.test_masked_inference_wsi_dataset.TestMaskedInferenceWSIDataset)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/tests/test_masked_inference_wsi_dataset.py\", line 169, in test_read_patches_cucim\r\n    dataset = MaskedInferenceWSIDataset(**input_parameters)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 197, in __init__\r\n    self.data = self._prepare_data(data)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 207, in _prepare_data\r\n    prepared_sample = self._prepare_a_sample(sample)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 230, in _prepare_a_sample\r\n    image = self.image_reader.read(sample[\"image\"])\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/data/image_reader.py\", line 715, in read\r\n    img = self.wsi_reader(name)\r\nValueError: Cannot find a plugin to handle '/home/jenkins/agent/workspace/Monai-latest-image/tests/testing_data/temp_uc?id=1sGTKZlJBIz53pfqTxoTqiIQzIoEzHLAe'!\r\n\r\n======================================================================\r\nERROR: test_read_patches_cucim_4 (tests.test_masked_inference_wsi_dataset.TestMaskedInferenceWSIDataset)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/tests/test_masked_inference_wsi_dataset.py\", line 169, in test_read_patches_cucim\r\n    dataset = MaskedInferenceWSIDataset(**input_parameters)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 197, in __init__\r\n    self.data = self._prepare_data(data)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 207, in _prepare_data\r\n    prepared_sample = self._prepare_a_sample(sample)\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/apps/pathology/data/datasets.py\", line 230, in _prepare_a_sample\r\n    image = self.image_reader.read(sample[\"image\"])\r\n  File \"/home/jenkins/agent/workspace/Monai-latest-image/monai/data/image_reader.py\", line 715, in read\r\n    img = self.wsi_reader(name)\r\nValueError: Cannot find a plugin to handle '/home/jenkins/agent/workspace/Monai-latest-image/tests/testing_data/temp_uc?id=1sGTKZlJBIz53pfqTxoTqiIQzIoEzHLAe'!\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3256", "id": 1044319114, "node_id": "I_kwDODMjICc4-PwuK", "number": 3256, "title": "None value in image_meta_dict of WSIReader", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-11-04T03:09:37Z", "updated_at": "2021-11-04T14:42:02Z", "closed_at": "2021-11-04T14:42:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe `image_meta_dict` of `WSIReader` contains None value.\r\nCheckout this comment for the problem that it causes and more details: https://github.com/Project-MONAI/MONAI/issues/3161#issuecomment-960355992", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3197", "id": 1036803944, "node_id": "I_kwDODMjICc49zF9o", "number": 3197, "title": "StatsHandler Has Wrong Numbering", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 2, "created_at": "2021-10-26T22:45:37Z", "updated_at": "2021-10-27T11:20:42Z", "closed_at": "2021-10-27T11:20:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nStatsHandler uses 0 based number for iterations but goes up to N (instead of N -1) . Please find below an example output of what is happening. The training goes from 0/N to N/N which is N+1 number, so the iteration numbering of current epoch bleeds into the next epoch.\r\n\r\n```\r\n2021-10-26 22:25:02,068 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch: 1/4, Iter: 36/38 -- train_loss: 0.6423 \r\n2021-10-26 22:25:02,527 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch: 1/4, Iter: 37/38 -- train_loss: 0.5574 \r\n2021-10-26 22:25:02,531 - ignite.engine.engine.SupervisedTrainer - INFO - Current learning rate: 0.0008535533905932737\r\n2021-10-26 22:25:02,531 - ignite.engine.engine.SupervisedEvaluator - INFO - Engine run resuming from iteration 0, epoch 0 until 1 epochs\r\n2021-10-26 22:25:30,474 - ignite.engine.engine.SupervisedEvaluator - INFO - Got new best metric of val_acc: 0.6845185185185185\r\n2021-10-26 22:25:30,474 - ignite.engine.engine.SupervisedEvaluator - INFO - Epoch[1] Metrics -- val_acc: 0.6845 \r\n2021-10-26 22:25:30,474 - ignite.engine.engine.SupervisedEvaluator - INFO - Key metric: val_acc best value: 0.6845185185185185 at epoch: 1\r\n2021-10-26 22:25:30,555 - ignite.engine.engine.SupervisedEvaluator - INFO - Epoch[1] Complete. Time taken: 00:00:27\r\n2021-10-26 22:25:30,555 - ignite.engine.engine.SupervisedEvaluator - INFO - Engine run complete. Time taken: 00:00:28\r\n2021-10-26 22:25:30,741 - ignite.engine.engine.SupervisedTrainer - INFO - Saved checkpoint at epoch: 1\r\n2021-10-26 22:25:30,741 - ignite.engine.engine.SupervisedTrainer - INFO - Key metric: None best value: -1 at epoch: -1\r\n2021-10-26 22:25:30,742 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch[1] Complete. Time taken: 00:03:53\r\n2021-10-26 22:26:06,201 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch: 2/4, Iter: 38/38 -- train_loss: 0.5390 \r\n2021-10-26 22:26:07,537 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch: 2/4, Iter: 0/38 -- train_loss: 0.6080 \r\n2021-10-26 22:26:08,645 - ignite.engine.engine.SupervisedTrainer - INFO - Epoch: 2/4, Iter: 1/38 -- train_loss: 0.6061 \r\n```\r\n\r\nand it get worse over next epochs:\r\n```\r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 2/4, Iter: 35/38 -- train_loss: 0.6096 \r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 2/4, Iter: 36/38 -- train_loss: 0.5019 \r\nINFO:ignite.engine.engine.SupervisedTrainer:Current learning rate: 0.0005\r\nINFO:ignite.engine.engine.SupervisedEvaluator:Engine run resuming from iteration 0, epoch 1 until 2 epochs\r\nINFO:ignite.engine.engine.SupervisedEvaluator:Got new best metric of val_acc: 0.7331851851851852\r\nINFO:ignite.engine.engine.SupervisedEvaluator:Epoch[2] Metrics -- val_acc: 0.7332 \r\nINFO:ignite.engine.engine.SupervisedEvaluator:Key metric: val_acc best value: 0.7331851851851852 at epoch: 2\r\nINFO:ignite.engine.engine.SupervisedEvaluator:Epoch[2] Complete. Time taken: 00:00:55\r\nINFO:ignite.engine.engine.SupervisedEvaluator:Engine run complete. Time taken: 00:00:56\r\nINFO:ignite.engine.engine.SupervisedTrainer:Saved checkpoint at epoch: 2\r\nINFO:ignite.engine.engine.SupervisedTrainer:Key metric: None best value: -1 at epoch: -1\r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch[2] Complete. Time taken: 00:04:20\r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 3/4, Iter: 37/38 -- train_loss: 0.4985 \r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 3/4, Iter: 38/38 -- train_loss: 0.5456 \r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 3/4, Iter: 0/38 -- train_loss: 0.5515 \r\nINFO:ignite.engine.engine.SupervisedTrainer:Epoch: 3/4, Iter: 1/38 -- train_loss: 0.5685 \r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3197/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3165", "id": 1032315158, "node_id": "I_kwDODMjICc49h-EW", "number": 3165, "title": "error from unit tests", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-10-21T10:18:44Z", "updated_at": "2021-10-22T02:52:04Z", "closed_at": "2021-10-22T02:52:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nsee log: https://github.com/Project-MONAI/MONAI/pull/3160/checks?check_run_id=3962013500\r\n\r\n```\r\n======================================================================\r\nERROR: test_requires_meta_dict (tests.test_testtimeaugmentation.TestTestTimeAugmentation)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/monai/transforms/transform.py\", line 82, in apply_transform\r\n    return _apply_transform(transform, data, unpack_items)\r\n  File \"/__w/MONAI/MONAI/monai/transforms/transform.py\", line 53, in _apply_transform\r\n    return transform(parameters)\r\n  File \"/__w/MONAI/MONAI/monai/transforms/spatial/dictionary.py\", line 292, in inverse\r\n    output_spatial_shape=orig_size,\r\n  File \"/__w/MONAI/MONAI/monai/transforms/spatial/array.py\", line 224, in __call__\r\n    spatial_size=output_shape if output_spatial_shape is None else output_spatial_shape,\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 577, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/__w/MONAI/MONAI/monai/networks/layers/spatial_transforms.py\", line 508, in forward\r\n    raise ValueError(f\"theta must be Nx3x3 or Nx4x4, got {theta.shape}.\")\r\nValueError: theta must be Nx3x3 or Nx4x4, got torch.Size([1, 2, 2]).\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/monai/transforms/inverse_batch_transform.py\", line 92, in __call__\r\n    return first(inv_loader)\r\n  File \"/__w/MONAI/MONAI/monai/utils/misc.py\", line 72, in first\r\n    for i in iterable:\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 347, in __next__\r\n    data = self._next_data()\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 387, in _next_data\r\n    data = self._dataset_fetcher.fetch(index)  # may raise StopIteration\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/__w/MONAI/MONAI/monai/transforms/inverse_batch_transform.py\", line 44, in __getitem__\r\n    return self.invertible_transform.inverse(data)\r\n  File \"/__w/MONAI/MONAI/monai/transforms/compose.py\", line 170, in inverse\r\n    data = apply_transform(t.inverse, data, self.map_items, self.unpack_items)\r\n  File \"/__w/MONAI/MONAI/monai/transforms/transform.py\", line 106, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <bound method Spacingd.inverse of <monai.transforms.spatial.dictionary.Spacingd object at 0x7efc4e06d860>>\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/tests/test_testtimeaugmentation.py\", line 155, in test_requires_meta_dict\r\n    tta(self.get_data(1, (20, 20), include_label=False))\r\n  File \"/__w/MONAI/MONAI/monai/data/test_time_augmentation.py\", line 199, in __call__\r\n    inv_batch = inverter(inferred_dict)\r\n  File \"/__w/MONAI/MONAI/monai/transforms/inverse_batch_transform.py\", line 97, in __call__\r\n    raise RuntimeError(re_str) from re\r\nRuntimeError: applying transform <bound method Spacingd.inverse of <monai.transforms.spatial.dictionary.Spacingd object at 0x7efc4e06d860>>\r\n```\r\n\r\n```\r\nMONAI version: refs/pull/3160/merge\r\nNumpy version: 1.18.5\r\nPytorch version: 1.6.0a0+9907a3e\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: be253e2132acf2d6de7f1416fca7c82d1bcc376b\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.6\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.15.0\r\nPillow version: 8.4.0\r\nTensorboard version: 1.15.0+nv\r\ngdown version: 4.2.0\r\nTorchVision version: 0.7.0a0\r\ntqdm version: 4.62.3\r\nlmdb version: 0.98\r\npsutil version: 5.7.0\r\npandas version: 0.24.2\r\neinops version: 0.3.2\r\ntransformers version: 4.11.3\r\nmlflow version: 1.20.2\r\n```\r\n[logs.txt](https://github.com/Project-MONAI/MONAI/files/7388123/logs.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3142", "id": 1028608634, "node_id": "I_kwDODMjICc49T1J6", "number": 3142, "title": "Some transforms randomly output numpy or tensor that can't collate ", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-10-18T04:19:58Z", "updated_at": "2021-10-19T14:21:48Z", "closed_at": "2021-10-19T14:21:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThanks for @rijobro 's reminder https://github.com/Project-MONAI/MONAI/pull/3113#discussion_r727913518, I double checked the transforms today and found we truly have such issue in several transforms:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/intensity/array.py#L1833\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/intensity/array.py#L580\r\nLet me try to fix it ASAP.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3142/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3134", "id": 1027348744, "node_id": "I_kwDODMjICc49PBkI", "number": 3134, "title": "Network alias is conflicting with the module names", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-10-15T11:25:53Z", "updated_at": "2021-10-15T16:54:28Z", "closed_at": "2021-10-15T16:54:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nsome network modules can't be imported, due to incorrect alias settings.\r\n\r\n**To Reproduce**\r\n```py\r\nimport monai.networks.nets.densenet as mod\r\nprint(type(mod))\r\n```\r\nThe outcome is `<class 'type'>`.\r\n\r\n**Expected behavior**\r\nThe outcome should be `<class 'module'>`, because `monai/networks/nets/densenet.py` is a file.\r\n\r\n**Additional context**\r\nfor example https://github.com/Project-MONAI/MONAI/blob/ff083340c6aa674b43e36e6da42dcf7bef5c9bdd/monai/networks/nets/densenet.py#L393 the alias name `densenet` is conflicting with the file name `monai/networks/nets/densenet.py`.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3134/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3124", "id": 1025862703, "node_id": "I_kwDODMjICc49JWwv", "number": 3124, "title": "There are 2 kinds of random state in transforms", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444324, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzI0", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 5, "created_at": "2021-10-14T02:12:28Z", "updated_at": "2021-10-14T18:28:12Z", "closed_at": "2021-10-14T18:28:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, in the case that a random transform contains another random transform, we have 2 different ways to set the random status:\r\n1. Use the self.R of first transform the second:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/croppad/dictionary.py#L761\r\n2. Use the same random seed or state for both transforms:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/intensity/dictionary.py#L177\r\n\r\n@wyli @rijobro @ericspod Which one do you guys think is better? Then I can try to unify them.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3119", "id": 1024991006, "node_id": "I_kwDODMjICc49GB8e", "number": 3119, "title": "Error from nightly build -- tests.test_rand_weighted_cropd.TestRandWeightedCrop", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-10-13T09:11:05Z", "updated_at": "2021-10-14T09:57:09Z", "closed_at": "2021-10-13T16:05:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nERROR: test_rand_weighted_crop_small_roi (tests.test_rand_weighted_cropd.TestRandWeightedCrop)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_rand_weighted_cropd.py\", line 33, in test_rand_weighted_crop_small_roi\r\n    result = crop(d)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/croppad/dictionary.py\", line 963, in __call__\r\n    self.randomize(d[self.w_key])\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/croppad/dictionary.py\", line 958, in randomize\r\n    spatial_size=self.spatial_size, w=weight_map[0], n_samples=self.num_samples, r_state=self.R\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/utils.py\", line 397, in weighted_patch_samples\r\n    idx = searchsorted(v, r * v[-1], right=True)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/utils_pytorch_numpy_unification.py\", line 301, in searchsorted\r\n    return torch.searchsorted(a, v, right=right)  # type: ignore\r\nAttributeError: module 'torch' has no attribute 'searchsorted'\r\n```\r\n\r\n```\r\n================================\r\nMONAI version: 0.7.0+47.ge0f84f2a\r\nNumpy version: 1.18.1\r\nPytorch version: 1.5.1\r\nMONAI flags: HAS_EXT = True, USE_COMPILED = True\r\nMONAI rev id: e0f84f2a858bbcab341251898438a53dc9700095\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.6\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.15.0\r\nPillow version: 8.3.2\r\nTensorboard version: 2.1.0\r\ngdown version: 4.0.2\r\nTorchVision version: 0.6.1\r\ntqdm version: 4.62.3\r\nlmdb version: 0.98\r\npsutil version: 5.6.7\r\npandas version: 0.24.2\r\neinops version: 0.3.2\r\ntransformers version: 4.11.3\r\nmlflow version: 1.20.2\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3071", "id": 1015693917, "node_id": "I_kwDODMjICc48ikJd", "number": 3071, "title": "build failed because of pip install", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-04T22:29:43Z", "updated_at": "2021-10-05T11:02:35Z", "closed_at": "2021-10-05T11:02:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nerrors from the quick tests `pip install`:\r\n```\r\n  Attempting uninstall: ruamel.yaml\r\n    Found existing installation: ruamel-yaml 0.15.87\r\nERROR: Cannot uninstall 'ruamel-yaml'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3063", "id": 1014959619, "node_id": "I_kwDODMjICc48fw4D", "number": 3063, "title": "error from `convert_to_tensor` ", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-04T09:46:12Z", "updated_at": "2021-10-04T13:39:59Z", "closed_at": "2021-10-04T13:39:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nfrom the cron logs:\r\n```\r\n======================================================================\r\nERROR: test_dict_matches_4 (tests.test_k_space_spike_noised.TestKSpaceSpikeNoised)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/tests/test_k_space_spike_noised.py\", line 97, in test_dict_matches\r\n    out = t(deepcopy(data))\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/intensity/dictionary.py\", line 1324, in __call__\r\n    d[key] = self.transform(d[key])\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/intensity/array.py\", line 1499, in __call__\r\n    k = self.shift_fourier(img, n_dims)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/utils/deprecated.py\", line 204, in _wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/transforms/utils.py\", line 1280, in shift_fourier\r\n    k, *_ = convert_to_dst_type(k, x)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/utils/type_conversion.py\", line 284, in convert_to_dst_type\r\n    return convert_data_type(data=src, output_type=output_type, device=device, dtype=dtype)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/utils/type_conversion.py\", line 251, in convert_data_type\r\n    data = convert_to_tensor(data, dtype=dtype_, device=device)\r\n  File \"/home/jenkins/agent/workspace/Monai-pytorch-versions/monai/utils/type_conversion.py\", line 121, in convert_to_tensor\r\n    return torch.as_tensor(data, dtype=dtype, device=device)  # type: ignore\r\nTypeError: can't convert np.ndarray of type numpy.complex128. The only supported types are: float64, float32, float16, int64, int32, int16, int8, uint8, and bool.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3058", "id": 1013923553, "node_id": "I_kwDODMjICc48bz7h", "number": 3058, "title": "fast training link is broken", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2021-10-02T05:00:28Z", "updated_at": "2021-10-14T02:17:52Z", "closed_at": "2021-10-04T11:54:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nBug reported from internal team:\r\n\"Hi team. The link a fast model training guide on this page https://docs.monai.io/en/latest/whatsnew_0_7.html is broken. Shall we fix it?\"\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3058/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3053", "id": 1011912179, "node_id": "I_kwDODMjICc48UI3z", "number": 3053, "title": "Distributed unit test fails regularly", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 3, "created_at": "2021-09-30T09:00:47Z", "updated_at": "2021-12-30T22:16:23Z", "closed_at": "2021-12-24T10:05:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nDistributed unit test fails regularly, slowing down the merging of unrelated PRs.\r\n\r\nexample: https://github.com/Project-MONAI/MONAI/pull/3050/checks?check_run_id=3752705985#step:7:14964\r\n\r\n```\r\n======================================================================\r\nFAIL: test_content (tests.test_handler_metrics_saver_dist.DistributedMetricsSaver)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/tests/utils.py\", line 382, in _wrapper\r\n    assert results.get(), \"Distributed call failed.\"\r\nAssertionError: Distributed call failed.\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3051", "id": 1011651792, "node_id": "I_kwDODMjICc48TJTQ", "number": 3051, "title": "Spacing transform outputs float64 Tensor data", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-09-30T03:11:27Z", "updated_at": "2021-09-30T14:50:25Z", "closed_at": "2021-09-30T14:50:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe PR https://github.com/Project-MONAI/MONAI/pull/3045 introduced an issue that it converted the output data dytpe to the **computation dtype**, actually it should always output float32:\r\nhttps://github.com/Project-MONAI/MONAI/blob/0.7.0/monai/transforms/spatial/array.py#L127\r\nAnd I think no need to deepcopy the image:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/spatial/array.py#L203\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3051/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3049", "id": 1011543211, "node_id": "I_kwDODMjICc48Suyr", "number": 3049, "title": "\"RandGaussianSmoothd\" and \"RandGaussianNoised\" failed when running with GPU tensors", "user": {"login": "dongyang0122", "id": 10967073, "node_id": "MDQ6VXNlcjEwOTY3MDcz", "avatar_url": "https://avatars.githubusercontent.com/u/10967073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dongyang0122", "html_url": "https://github.com/dongyang0122", "followers_url": "https://api.github.com/users/dongyang0122/followers", "following_url": "https://api.github.com/users/dongyang0122/following{/other_user}", "gists_url": "https://api.github.com/users/dongyang0122/gists{/gist_id}", "starred_url": "https://api.github.com/users/dongyang0122/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dongyang0122/subscriptions", "organizations_url": "https://api.github.com/users/dongyang0122/orgs", "repos_url": "https://api.github.com/users/dongyang0122/repos", "events_url": "https://api.github.com/users/dongyang0122/events{/privacy}", "received_events_url": "https://api.github.com/users/dongyang0122/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-09-29T23:48:07Z", "updated_at": "2021-10-04T11:58:11Z", "closed_at": "2021-10-04T11:58:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nTransfrom \"RandGaussianSmoothd\" and \"RandGaussianNoised\" failed when running with GPU tensors.\r\n\r\n**To Reproduce**\r\nAdding the transform \"ToDeviced(keys=[\"image\"], device=\"gpu\"),\" before \"RandGaussianSmoothd\" or \"RandGaussianNoised\" for any segmentation pipeline.\r\n\r\n**Expected behavior**\r\nExpected to be without any error message.\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Environment**\r\n\r\nEnsuring you use the relevant python executable, please paste the output of:\r\n\r\n```\r\npython -c 'import monai; monai.config.print_debug_info()'\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3049/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/3018", "id": 1006067146, "node_id": "I_kwDODMjICc47913K", "number": 3018, "title": "MONAI docker 0.7.0 seems wrong", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-09-24T04:27:39Z", "updated_at": "2021-09-24T05:59:42Z", "closed_at": "2021-09-24T05:59:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When run `docker pull projectmonai/monai:0.7.0`, the pulled image is the same as 0.6.0\r\n\r\nhttps://hub.docker.com/r/projectmonai/monai/tags?page=1&ordering=last_updated\r\n\r\n![Screen Shot 2021-09-24 at 12 25 53 PM](https://user-images.githubusercontent.com/68361391/134618117-98da8cf8-0e18-48cf-b59a-25f4f7447635.png)\r\n\r\n![Screen Shot 2021-09-24 at 12 25 18 PM](https://user-images.githubusercontent.com/68361391/134618072-26e60adf-ce2e-4bce-bd90-15e9fcbef3a3.png)\r\n)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/3018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2948", "id": 995937207, "node_id": "I_kwDODMjICc47XMu3", "number": 2948, "title": "Training on dicom images throws key errors:  \"0008|0005\", \"0008|1050\" or similar", "user": {"login": "ChristianEschen", "id": 19329210, "node_id": "MDQ6VXNlcjE5MzI5MjEw", "avatar_url": "https://avatars.githubusercontent.com/u/19329210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristianEschen", "html_url": "https://github.com/ChristianEschen", "followers_url": "https://api.github.com/users/ChristianEschen/followers", "following_url": "https://api.github.com/users/ChristianEschen/following{/other_user}", "gists_url": "https://api.github.com/users/ChristianEschen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristianEschen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristianEschen/subscriptions", "organizations_url": "https://api.github.com/users/ChristianEschen/orgs", "repos_url": "https://api.github.com/users/ChristianEschen/repos", "events_url": "https://api.github.com/users/ChristianEschen/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristianEschen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 9, "created_at": "2021-09-14T12:04:15Z", "updated_at": "2022-08-05T06:53:05Z", "closed_at": "2022-08-03T14:24:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all\r\n\r\nI have been facing some problems training on DICOM images. In specific I found that training throws key errors on \"0008|0005\", \"0008|1050\", which conditional optional and optional.\r\n\r\nThe files can be found here: \r\nhttp://www.rubomedical.com/dicom_files/dicom_viewer_0002.zip\r\nhttp://www.rubomedical.com/dicom_files/dicom_viewer_0003.zip\r\n\r\nMy enviroment is:\r\nUbuntu 20.04 LTS\r\nMonai: 0.7.dev2137 (I have also tested with master)\r\n\r\nThe code to reproduce the error is here:\r\n(Removing the comment section with pydicom solves the issue since the metadata is updated to have the correct keys.)\r\n\r\n\r\n```\r\n\r\nimport logging\r\nimport os\r\nimport sys\r\n\r\nimport numpy as np\r\nimport torch\r\nfrom torch.utils.data import DataLoader\r\nimport monai\r\nprint('monai vers', monai.__version__)\r\nimport pydicom\r\nfrom monai.transforms import Activations, AddChanneld, AsDiscrete, Compose, LoadImaged, RandRotate90d, Resized, ScaleIntensityd, EnsureTyped, EnsureType, ToTensord, EnsureChannelFirstD, RandSpatialCropd, Spacingd, SqueezeDimd\r\n\r\n\r\ndef main():\r\n    path1 = \"/home/sauroman/mia/data/angio/2/0002.DCM\"\r\n    path2 = \"/home/sauroman/mia/data/angio/3/0003.DCM\"\r\n\r\n    #########Uncommenting this section will break the training#################\r\n    #ds1 = pydicom.read_file(path1)\r\n    #ds2 = pydicom.read_file(path2)\r\n\r\n    #ds1.add_new((0x008, 0x005), 'CS', 'ISO_IR 100')\r\n    #ds2.add_new((0x008, 0x005), 'CS', 'ISO_IR 100')\r\n    #path1 = 'img1.dcm'\r\n    #path2 = 'img2.dcm'\r\n    #ds1.save_as(path1)\r\n    #ds2.save_as(path2)\r\n    ############################################################################\r\n    images = [\r\n        path1,\r\n        path2\r\n    ]\r\n\r\n    labels = np.array([0, 1], dtype=np.int64)\r\n    train_files = [{\"img\": img, \"label\": label} for img, label in zip(images, labels)]\r\n\r\n    # Define transforms for image\r\n    train_transforms = Compose(\r\n        [\r\n            LoadImaged(keys=[\"img\"]),\r\n            EnsureChannelFirstD(keys=[\"img\"]),\r\n            Resized(keys=[\"img\"], spatial_size=(48, 48, 48)),\r\n           # SqueezeDimd(keys=[\"img\"], dim=-1),\r\n            ToTensord(keys=[\"img\"])\r\n        ]\r\n    )\r\n    # Define dataset, data loader\r\n    check_ds = monai.data.Dataset(data=train_files, transform=train_transforms)\r\n    check_loader = DataLoader(check_ds, batch_size=2, num_workers=4, pin_memory=torch.cuda.is_available())\r\n    check_data = monai.utils.misc.first(check_loader)\r\n    print(check_data[\"img\"].shape, check_data[\"label\"])\r\n\r\n    # create a training data loader\r\n    train_ds = monai.data.Dataset(data=train_files, transform=train_transforms)\r\n    train_loader = DataLoader(train_ds, batch_size=2, shuffle=True, num_workers=4, pin_memory=torch.cuda.is_available())\r\n\r\n    # Create DenseNet121, CrossEntropyLoss and Adam optimizer\r\n    device = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\r\n    model = monai.networks.nets.DenseNet121(spatial_dims=3, in_channels=1, out_channels=2).to(device)\r\n    loss_function = torch.nn.CrossEntropyLoss()\r\n    optimizer = torch.optim.Adam(model.parameters(), 1e-5)\r\n\r\n    # start a typical PyTorch training\r\n    for epoch in range(50):\r\n        print(\"-\" * 10)\r\n        print(f\"epoch {epoch + 1}/{50}\")\r\n        model.train()\r\n        epoch_loss = 0\r\n        step = 0\r\n        for batch_data in train_loader:\r\n            step += 1\r\n            inputs, labels = batch_data[\"img\"].to(device), batch_data[\"label\"].to(device)\r\n            optimizer.zero_grad()\r\n            outputs = model(inputs)\r\n            loss = loss_function(outputs, labels)\r\n            loss.backward()\r\n            optimizer.step()\r\n            epoch_loss += loss.item()\r\n            epoch_len = len(train_ds) // train_loader.batch_size\r\n            print(f\"{step}/{epoch_len}, train_loss: {loss.item():.4f}\")\r\n        epoch_loss /= step\r\n        print(f\"epoch {epoch + 1} average loss: {epoch_loss:.4f}\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n    \r\n```\r\n   \r\n```   ###################################################################################################\r\n   Running this gives:\r\n    ##################################################################################################\r\n    Exception has occurred: KeyError       (note: full exception trace is shown but execution is paused at: _run_module_as_main)\r\nCaught KeyError in DataLoader worker process 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/worker.py\", line 198, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 47, in fetch\r\n    return self.collate_fn(data)# Code\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 73, in default_collate\r\n    return {key: default_collate([d[key] for d in batch]) for key in elem}\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 73, in <dictcomp>\r\n    return {key: default_collate([d[key] for d in batch]) for key in elem}\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 73, in default_collate\r\n    return {key: default_collate([d[key] for d in batch]) for key in elem}\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 73, in <dictcomp>\r\n    return {key: default_collate([d[key] for d in batch]) for key in elem}\r\n  File \"/home/sauroman/.pyenv/versions/3.8.3/lib/python3.8/site-packages/torch/utils/data/_utils/collate.py\", line 73, in <listcomp>\r\n    return {key: default_collate([d[key] for d in batch]) for key in elem}\r\nKeyError: '0008|0005'\r\n    ```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2920", "id": 992582219, "node_id": "MDU6SXNzdWU5OTI1ODIyMTk=", "number": 2920, "title": "RandZoom change the input type", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-09-09T20:01:24Z", "updated_at": "2021-09-12T03:02:20Z", "closed_at": "2021-09-12T03:02:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using `RandZoom` with the input type of `torch.Tensor` it will output `np.array`!\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nimport torch\r\nfrom monai.transforms import RandZoom\r\na = torch.randn(10, 3, 20, 20)\r\ntype(RandZoom(prob=1.0, min_zoom=0.9, max_zoom=1.1)(a))\r\n```\r\n\r\n**Expected behavior**\r\nexpected correct output:\r\n```\r\n<class 'torch.Tensor'>\r\n```\r\nbut this will output:\r\n```\r\n<class 'numpy.ndarray'>\r\n```\r\n\r\n**Environment**\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.6.0+117.g97fd2b92\r\nNumpy version: 1.21.1\r\nPytorch version: 1.10.0a0+ecc3718\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 97fd2b9201ea5e21692126539b0bddb99f1f7b23\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.5\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.15.0\r\nPillow version: 8.2.0\r\nTensorboard version: 2.5.0\r\ngdown version: 3.13.0\r\nTorchVision version: 0.11.0a0\r\ntqdm version: 4.53.0\r\nlmdb version: 1.2.1\r\npsutil version: 5.8.0\r\npandas version: 1.1.4\r\neinops version: 0.3.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.2 LTS\r\nPlatform: Linux-5.8.0-59-generic-x86_64-with-glibc2.10\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.10\r\nProcess name: python\r\nCommand: ['python', '-c', 'import monai; monai.config.print_debug_info()']\r\nOpen files: []\r\nNum physical CPUs: 8\r\nNum logical CPUs: 16\r\nNum usable CPUs: 16\r\nCPU usage (%): [1.4, 0.7, 96.5, 1.4, 3.5, 0.7, 2.1, 3.4, 0.7, 2.0, 0.7, 0.7, 0.0, 0.0, 0.0, 0.0]\r\nCPU freq. (MHz): 1206\r\nLoad avg. in last 1, 5, 15 mins (%): [2.8, 3.6, 11.3]\r\nDisk usage (%): 93.5\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 31.1\r\nAvailable memory (GB): 25.3\r\nUsed memory (GB): 5.3\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 2\r\nHas CUDA: True\r\nCUDA version: 11.4\r\ncuDNN enabled: True\r\ncuDNN version: 8202\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_52', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'compute_86']\r\nGPU 0 Name: NVIDIA TITAN RTX\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 72\r\nGPU 0 Total memory (GB): 23.7\r\nGPU 0 CUDA capability (maj.min): 7.5\r\nGPU 1 Name: NVIDIA TITAN RTX\r\nGPU 1 Is integrated: False\r\nGPU 1 Is multi GPU board: False\r\nGPU 1 Multi processor count: 72\r\nGPU 1 Total memory (GB): 23.7\r\nGPU 1 CUDA capability (maj.min): 7.5\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2920/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2899", "id": 988829053, "node_id": "MDU6SXNzdWU5ODg4MjkwNTM=", "number": 2899, "title": "ITKReader doesn't return numpy array", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 7, "created_at": "2021-09-06T06:48:54Z", "updated_at": "2021-09-09T15:32:04Z", "closed_at": "2021-09-09T15:32:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, we use the `itk.array_view_from_image()` to get data array:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/data/image_reader.py#L316\r\nBut actually, it's not numpy array, so following logic which depends on numpy.ndarray type will fail.\r\n```py\r\nloader = LoadImage()\r\nimg, meta = loader(dicom_path)\r\nprint(type(img))\r\n```\r\nGet the output:\r\n```\r\n<class 'itk.itkPyBufferPython.NDArrayITKBase'>\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2856", "id": 981020171, "node_id": "MDU6SXNzdWU5ODEwMjAxNzE=", "number": 2856, "title": "`RandCoarseDropout` missing return when not doing transform", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-08-27T08:46:59Z", "updated_at": "2021-08-27T10:34:38Z", "closed_at": "2021-08-27T10:34:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/intensity/array.py#L1702\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2833", "id": 978269286, "node_id": "MDU6SXNzdWU5NzgyNjkyODY=", "number": 2833, "title": "ci/cd premerge logs associated with wrong commit hash", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-08-24T16:17:03Z", "updated_at": "2021-10-05T12:34:55Z", "closed_at": "2021-10-05T12:34:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nto reproduce this issue:\r\n- create a PR from a fork\r\n- `/build` trigger the blossom-ci pipeline\r\n- check the details of the pipeline\r\n- the highlighted commit hash should correspond to the head of this fork's branch but it's currently not the case\r\n![Screenshot 2021-08-24 at 17 13 14](https://user-images.githubusercontent.com/831580/130652431-d99cfd0d-369f-4c6c-960c-9bb3403bec9f.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2825", "id": 977622637, "node_id": "MDU6SXNzdWU5Nzc2MjI2Mzc=", "number": 2825, "title": "Model Weights Saved in 0.5.3 may be incompatible with 0.6.0", "user": {"login": "ahatamiz", "id": 26806394, "node_id": "MDQ6VXNlcjI2ODA2Mzk0", "avatar_url": "https://avatars.githubusercontent.com/u/26806394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahatamiz", "html_url": "https://github.com/ahatamiz", "followers_url": "https://api.github.com/users/ahatamiz/followers", "following_url": "https://api.github.com/users/ahatamiz/following{/other_user}", "gists_url": "https://api.github.com/users/ahatamiz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahatamiz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahatamiz/subscriptions", "organizations_url": "https://api.github.com/users/ahatamiz/orgs", "repos_url": "https://api.github.com/users/ahatamiz/repos", "events_url": "https://api.github.com/users/ahatamiz/events{/privacy}", "received_events_url": "https://api.github.com/users/ahatamiz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2021-08-24T01:55:55Z", "updated_at": "2021-09-13T08:01:48Z", "closed_at": "2021-09-13T08:01:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIt seems that models trained and saved in monai 0.5.3 cannot be restored and used in 0.6.0. There is mis-match between the keys in different layers.\r\n\r\n**To Reproduce**\r\nClone the UNETR repository from (https://github.com/Project-MONAI/research-contributions/tree/master/UNETR/BTCV). \r\nTrain a model in 0.5.3 and save the weights. \r\nLoad the model in 0.6.0 using:\r\nckpt = torch.load(args.ckpt)\r\nmodel.load_state_dict(ckpt['state_dict'])\r\n\r\n**Expected behavior**\r\nMonai 0.6.0 version throws this error for mis-matched keys in loading the state_dict for the convolution layers of the network. For example, the following is a representative error:\r\n\r\n```\r\nRuntimeError: Error(s) in loading state_dict for UNETR:\r\n        Unexpected key(s) in state_dict: \"encoder1.layer.norm1.weight\", \"encoder1.layer.norm1.bias\", \"encoder1.layer.norm2.weight\", \"encoder1.layer.norm2.bias\", \"encoder1.layer.norm3.weight\", \"encoder1.layer.norm3.bias\", \"encoder10.layer.norm1.weight\", \"encoder10.layer.norm1.bias\", \"encoder10.layer.norm2.weight\", \"encoder10.layer.norm2.bias\", \"encoder10.layer.norm3.weight\", \"encoder10.layer.norm3.bias\", \"decoder5.conv_block.norm1.weight\", \"decoder5.conv_block.norm1.bias\", \"decoder5.conv_block.norm2.weight\", \"decoder5.conv_block.norm2.bias\", \"decoder5.conv_block.norm3.weight\", \"decoder5.conv_block.norm3.bias\", \"decoder4.conv_block.norm1.weight\", \"decoder4.conv_block.norm1.bias\", \"decoder4.conv_block.norm2.weight\", \"decoder4.conv_block.norm2.bias\", \"decoder4.conv_block.norm3.weight\", \"decoder4.conv_block.norm3.bias\", \"decoder3.conv_block.norm1.weight\", \"decoder3.conv_block.norm1.bias\", \"decoder3.conv_block.norm2.weight\", \"decoder3.conv_block.norm2.bias\", \"decoder3.conv_block.norm3.weight\", \"decoder3.conv_block.norm3.bias\", \"decoder2.conv_block.norm1.weight\", \"decoder2.conv_block.norm1.bias\", \"decoder2.conv_block.norm2.weight\", \"decoder2.conv_block.norm2.bias\", \"decoder2.conv_block.norm3.weight\", \"decoder2.conv_block.norm3.bias\", \"decoder1.conv_block.norm1.weight\", \"decoder1.conv_block.norm1.bias\", \"decoder1.conv_block.norm2.weight\", \"decoder1.conv_block.norm2.bias\", \"decoder1.conv_block.norm3.weight\", \"decoder1.conv_block.norm3.bias\".\r\n```\r\nThese are for the convolutional layers of the network  In 0.5.3 version, you can simply check out for example model.decoder1.conv_block.norm3.bias and get the values ( even without loading the state_dict)  \r\n\r\n```\r\ntensor([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,\r\n        0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],\r\n       requires_grad=True)\r\n```\r\n\r\nBut in 0.6.0 , model.decoder1.conv_block.norm3.bias returns None. \r\n\r\nIf this is not fixed, it breaks the compatibility between 0.5.3 and 0.6.0 for restoring models. ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2825/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2821", "id": 977154913, "node_id": "MDU6SXNzdWU5NzcxNTQ5MTM=", "number": 2821, "title": "unit test error -- test_gaussian_filter", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-23T15:26:06Z", "updated_at": "2021-08-26T16:24:27Z", "closed_at": "2021-08-26T16:24:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n```\r\n======================================================================\r\nFAIL: test_train_quick_5 (tests.test_gaussian_filter.TestGaussianFilterBackprop)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/test_gaussian_filter.py\", line 89, in test_train_quick\r\n    self.code_to_run(input_args)\r\n  File \"/home/jenkins/agent/workspace/MONAI-premerge/monai/tests/test_gaussian_filter.py\", line 84, in code_to_run\r\n    s.cpu().item(), gt.cpu() if len(gt.shape) == 0 else gt[idx].cpu().item(), rtol=1e-2\r\n  File \"/opt/conda/lib/python3.6/site-packages/numpy/testing/_private/utils.py\", line 1533, in assert_allclose\r\n    verbose=verbose, header=header, equal_nan=equal_nan)\r\n  File \"/opt/conda/lib/python3.6/site-packages/numpy/testing/_private/utils.py\", line 846, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.01, atol=0\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.18121517\r\nMax relative difference: 0.36243033\r\n x: array(0.681215)\r\n y: array(0.5, dtype=float32)\r\n\r\n----------------------------------------------------------------------\r\n```\r\n\r\n**To Reproduce**\r\nthis error happens once in ~50 runs\r\n\r\n\r\n\r\n\r\n\r\nsaw this error with the following env and  the latest codebase c39f6fa6414d608b580cbdbdeed48a77c302be3a\r\n```\r\nNumpy version: 1.18.5\r\nPytorch version: 1.6.0a0+9907a3e\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: None\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.5\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.15.0\r\nPillow version: 8.3.1\r\nTensorboard version: 1.15.0+nv\r\ngdown version: 3.13.0\r\nTorchVision version: 0.7.0a0\r\ntqdm version: 4.62.2\r\nlmdb version: 0.98\r\npsutil version: 5.7.0\r\npandas version: 0.24.2\r\neinops version: 0.3.0\r\n```\r\nPT16+CUDA110\r\n**Expected behavior**\r\nno error\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2771", "id": 971087684, "node_id": "MDU6SXNzdWU5NzEwODc2ODQ=", "number": 2771, "title": "`HighResBlock` may have wrong conv block", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-08-15T09:05:13Z", "updated_at": "2021-08-17T09:07:56Z", "closed_at": "2021-08-17T09:07:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `Convolution` block in `HighResBlock` does not utilize acti and norm parameters thus will used default instance norm layer and prelu activation layer. However, it is different from all other `Convolution` blocks in `HighResNet`. Is is a mistake? @wyli ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2760", "id": 970276562, "node_id": "MDU6SXNzdWU5NzAyNzY1NjI=", "number": 2760, "title": "`UpSample` has wrong docstrings and an issue with `out_channels`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 0, "created_at": "2021-08-13T10:31:55Z", "updated_at": "2021-08-14T08:51:05Z", "closed_at": "2021-08-14T08:51:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "1. Default value of `pre_conv` is `\"default\"` but in the docstrings, it says `None`.\r\n2. AN error should be raised when:\r\n```\r\nout_channels != in_channels and preconv is None and up_mode == UpsampleMode.NONTRAINABLE\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2760/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2749", "id": 967014939, "node_id": "MDU6SXNzdWU5NjcwMTQ5Mzk=", "number": 2749, "title": "ThreadDataLoader can't continuously run", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2021-08-11T16:16:50Z", "updated_at": "2021-08-13T11:11:03Z", "closed_at": "2021-08-13T11:11:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, the `ThreadDataLoader` can only run for 1 epoch, it doesn't contain the reset logic.\r\n\r\nReproduce the issue:\r\n```py\r\ndataset = Dataset(data=self.datalist, transform=self.transform)\r\ndataloader = ThreadDataLoader(dataset=dataset, batch_size=2, num_workers=0)\r\n\r\nfor d in dataloader:\r\n    self.assertEqual(d[\"image\"][0], \"spleen_19.nii.gz\")\r\n    self.assertEqual(d[\"image\"][1], \"spleen_31.nii.gz\")\r\n    self.assertEqual(d[\"label\"][0], \"spleen_label_19.nii.gz\")\r\n    self.assertEqual(d[\"label\"][1], \"spleen_label_31.nii.gz\")\r\n\r\nfor d in dataloader:\r\n    print(\"will not print here.\")\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2695", "id": 961583323, "node_id": "MDU6SXNzdWU5NjE1ODMzMjM=", "number": 2695, "title": "`Resize` error", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-08-05T08:35:31Z", "updated_at": "2021-08-05T13:20:30Z", "closed_at": "2021-08-05T13:20:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nResized shape may not equal to the expected shape.\r\n\r\nThe error come from: https://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/spatial/array.py#L406\r\n\r\n**To Reproduce**\r\n\r\n```\r\nfrom monai.transforms import Resize\r\n\r\nresize_transform = Resize(spatial_size=1008, size_mode=\"longest\", mode=\"bilinear\", align_corners=False)\r\nexample = np.random.rand(1, 2544, 3032)\r\nprint(resize_transform(example).shape)\r\n```\r\nthe above code will print `(1, 846, 1009)`\r\n\r\nIt is because in Python:\r\n\r\n`1008 / 3032 * 3032` will get `1008.0000000000001 `", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2687", "id": 958759846, "node_id": "MDU6SXNzdWU5NTg3NTk4NDY=", "number": 2687, "title": "The class of `AffineGrid` has wrong docstring", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17", "html_url": "https://github.com/Project-MONAI/MONAI/milestone/17", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/milestones/17/labels", "id": 7024359, "node_id": "MI_kwDODMjICc4Aay7n", "number": 17, "title": "Bug Fixes or Misc improvements", "description": "", "creator": {"login": "deepib", "id": 86244600, "node_id": "MDQ6VXNlcjg2MjQ0NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/86244600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepib", "html_url": "https://github.com/deepib", "followers_url": "https://api.github.com/users/deepib/followers", "following_url": "https://api.github.com/users/deepib/following{/other_user}", "gists_url": "https://api.github.com/users/deepib/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepib/subscriptions", "organizations_url": "https://api.github.com/users/deepib/orgs", "repos_url": "https://api.github.com/users/deepib/repos", "events_url": "https://api.github.com/users/deepib/events{/privacy}", "received_events_url": "https://api.github.com/users/deepib/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 152, "state": "closed", "created_at": "2021-08-02T14:06:57Z", "updated_at": "2023-01-05T18:06:49Z", "due_on": null, "closed_at": "2022-08-01T16:48:40Z"}, "comments": 1, "created_at": "2021-08-03T06:03:46Z", "updated_at": "2021-08-04T09:55:41Z", "closed_at": "2021-08-04T09:55:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "1. The values of parameters like `rotate_params`, `shear_params` and others are fixed, but the descriptions are like : `generate the 1st rotation parameter from uniform ...`", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2644", "id": 950956458, "node_id": "MDU6SXNzdWU5NTA5NTY0NTg=", "number": 2644, "title": "RandBiasField missing np.exp", "user": {"login": "JustinSzeto", "id": 20669652, "node_id": "MDQ6VXNlcjIwNjY5NjUy", "avatar_url": "https://avatars.githubusercontent.com/u/20669652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JustinSzeto", "html_url": "https://github.com/JustinSzeto", "followers_url": "https://api.github.com/users/JustinSzeto/followers", "following_url": "https://api.github.com/users/JustinSzeto/following{/other_user}", "gists_url": "https://api.github.com/users/JustinSzeto/gists{/gist_id}", "starred_url": "https://api.github.com/users/JustinSzeto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JustinSzeto/subscriptions", "organizations_url": "https://api.github.com/users/JustinSzeto/orgs", "repos_url": "https://api.github.com/users/JustinSzeto/repos", "events_url": "https://api.github.com/users/JustinSzeto/events{/privacy}", "received_events_url": "https://api.github.com/users/JustinSzeto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-22T18:54:25Z", "updated_at": "2021-07-23T08:52:23Z", "closed_at": "2021-07-23T08:52:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe bias field generated by `RandBiasField._generate_random_field` ([link](https://github.com/Project-MONAI/MONAI/blob/0ad9e73639e30f4f1af5a1f4a45da9cb09930179/monai/transforms/intensity/array.py#L434)) should be exponentiated, as done so in [NiftyNet's implementation](https://github.com/NifTK/NiftyNet/blob/935bf4334cd00fa9f9d50f6a95ddcbfdde4031e0/niftynet/layer/rand_bias_field.py#L99).\r\n\r\n**To Reproduce**\r\n```\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\nfrom monai.transforms import RandBiasField\r\n\r\nrand_bias_field = RandBiasField()\r\narr = np.ones((1,100,100))\r\n\r\nbias_field = rand_bias_field(arr)\r\n\r\nplt.figure(figsize=(12,6))\r\nplt.subplot(121)\r\nplt.imshow(bias_field[0])\r\n\r\nplt.subplot(122)\r\nplt.hist(bias_field.flatten())\r\nplt.show()\r\n```\r\n![image](https://user-images.githubusercontent.com/20669652/126690750-2d55cbcc-42ee-44bf-828d-7b2738a5b2dd.png)\r\n\r\nAs shown on the histogram on the right, the values generated by the bias field are around 0 and can also be negative. This is not a proper bias field and multiplying an image by this bias field may invert values.\r\n\r\n**Expected behavior**\r\nThe bias field should have values around 1. This is usually done by exponentiating the bias field since the bias field generated from the polynomial basis function is actually the log-transformed bias field (Refer to [last equation in section 3.1.1](https://www.sciencedirect.com/science/article/pii/S1361841517300257?via%3Dihub) and the NiftyNet implementation of RandBiasField (linked above). \r\n\r\n```\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\nfrom monai.transforms import RandBiasField\r\n\r\nrand_bias_field = RandBiasField()\r\narr = np.ones((1,100,100))\r\n\r\nbias_field = np.exp(rand_bias_field(arr))\r\n\r\nplt.figure(figsize=(12,6))\r\nplt.subplot(121)\r\nplt.imshow(bias_field[0])\r\n\r\nplt.subplot(122)\r\nplt.hist(bias_field.flatten())\r\nplt.show()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/20669652/126691848-dd9838a2-eb0f-4dca-8960-a13ef55113fc.png)\r\n\r\n**Additional comments**\r\nAre there any plans to make a batched Tensor-compatible implementation of RandBiasField so that this transform can theoretically be done on the GPU after batching? At the moment, the only critical numpy dependencies are the calls to `np.polynomial.legendre.leggrid2d` and `np.polynomial.legendre.leggrid3d`, but these can be easily implemented using PyTorch.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2617", "id": 946126555, "node_id": "MDU6SXNzdWU5NDYxMjY1NTU=", "number": 2617, "title": "Bugs in `create_test_image_2d` and `create_test_image_3d`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-07-16T09:49:00Z", "updated_at": "2021-07-19T16:18:42Z", "closed_at": "2021-07-19T16:18:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\n1) There is a limitation in the current implementation:\r\nThe following line:\r\n\r\n```\r\nrad = rs.randint(5, rad_max)\r\n```\r\nrequires `rad_max` be larger than 5.\r\n\r\nI think we should not use the magic number `5` here, and there is no docstring about this limitation.\r\n\r\n2) The functions should also ensure that `rad_max` is less than the input size.\r\n\r\n**To Reproduce**\r\n```\r\nfrom monai.data import create_test_image_3d\r\nim, seg = create_test_image_3d(20, 20, 20)\r\n```\r\nor\r\n```\r\nim, seg = create_test_image_3d(128, 128, 128, rad_max=5)\r\n```\r\n\r\n3) There is no unittest for these two functions.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2567", "id": 940856339, "node_id": "MDU6SXNzdWU5NDA4NTYzMzk=", "number": 2567, "title": "Missing `return` in `__call__` of transforms: `SaveImage`, `NiftiSaver` and `PNGSaver`", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-09T15:17:28Z", "updated_at": "2021-07-09T16:21:18Z", "closed_at": "2021-07-09T16:21:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n```\r\nfrom monai.transforms import SaveImage, Compose\r\nsaver = Compose([SaveImage(output_dir=\"./output\", output_ext=\".png\", output_postfix=\"seg\")])\r\nimg = torch.randn([3, 32, 32])\r\noutput = saver(img)\r\nprint(output)\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2567/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2556", "id": 939596528, "node_id": "MDU6SXNzdWU5Mzk1OTY1Mjg=", "number": 2556, "title": "cron test error -- test_ensure_typed", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-07-08T08:14:26Z", "updated_at": "2021-07-08T11:57:53Z", "closed_at": "2021-07-08T11:57:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nissues using torch 1.5.1 https://github.com/Project-MONAI/MONAI/runs/3014995045?check_suite_focus=true#step:5:11770\r\n\r\n```\r\n======================================================================\r\nERROR: test_single_input (tests.test_ensure_typed.TestEnsureTyped)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/__w/MONAI/MONAI/tests/test_ensure_typed.py\", line 34, in test_single_input\r\ntest_script_3 (tests.test_densenet.TestDENSENET) (13.6s)\r\ntest_cpu_precise_backwards_7_3_dimension_1_channel_high_spatial_sigma_high_color_sigma (tests.test_bilateral_precise.BilateralFilterTestCaseCpuPrecise) (14.3s)\r\ntest_script_5 (tests.test_resnet.TestResNet) (14.9s)\r\ntest_script_2 (tests.test_densenet.TestDENSENET) (15.0s)\r\ntest_script_4 (tests.test_senet.TestSENET) (16.3s)\r\ntest_script_3 (tests.test_senet.TestSENET) (17.3s)\r\n    torch.testing.assert_allclose(result, test_data)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/testing/__init__.py\", line 30, in assert_allclose\r\n    close = torch.isclose(actual, expected, rtol, atol, equal_nan)\r\nRuntimeError: Subtraction, the `-` operator, with a bool tensor is not supported. If you are trying to invert a mask, use the `~` or `logical_not()` operator instead.\r\n\r\n----------------------------------------------------------------------\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2556/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2552", "id": 939408801, "node_id": "MDU6SXNzdWU5Mzk0MDg4MDE=", "number": 2552, "title": "ToNumpy changed the dim of 0-dim data", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-08T02:32:26Z", "updated_at": "2021-07-08T05:03:49Z", "closed_at": "2021-07-08T05:03:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nHolger found an issue that the `ToNumpy` transform will add unexpected dim to 0-dim data in classification task.\r\nI think it's similar issue as: https://github.com/Project-MONAI/MONAI/pull/2454.\r\n\r\n**How to reproduce**\r\n```\r\n>>> import numpy as np\r\n>>> from monai.transforms import ToNumpy, ToTensor\r\n>>> \r\n>>> print(ToNumpy()(5))\r\n[5]\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2544", "id": 938987707, "node_id": "MDU6SXNzdWU5Mzg5ODc3MDc=", "number": 2544, "title": "StatsHandler doesn't print iteration level results (7/July)", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-07-07T15:02:47Z", "updated_at": "2021-07-07T16:40:53Z", "closed_at": "2021-07-07T16:20:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\npreviously running the tutorial on colab prints the iteration results:\r\nhttps://colab.research.google.com/drive/1boqy7ENpKrqaJoxFlbHIBnIODAs1Ih1T\r\nbut the current weekly version doesn't work.\r\n\r\nprobably related to this check?\r\nhttps://github.com/Project-MONAI/MONAI/blob/b4fca1d12245e8d7950ae4782058dc3cea6a9775/monai/handlers/stats_handler.py#L192", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2540", "id": 938513688, "node_id": "MDU6SXNzdWU5Mzg1MTM2ODg=", "number": 2540, "title": "AssertionError: labels should have a channel with length equal to one.", "user": {"login": "rsreetech", "id": 65341271, "node_id": "MDQ6VXNlcjY1MzQxMjcx", "avatar_url": "https://avatars.githubusercontent.com/u/65341271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsreetech", "html_url": "https://github.com/rsreetech", "followers_url": "https://api.github.com/users/rsreetech/followers", "following_url": "https://api.github.com/users/rsreetech/following{/other_user}", "gists_url": "https://api.github.com/users/rsreetech/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsreetech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsreetech/subscriptions", "organizations_url": "https://api.github.com/users/rsreetech/orgs", "repos_url": "https://api.github.com/users/rsreetech/repos", "events_url": "https://api.github.com/users/rsreetech/events{/privacy}", "received_events_url": "https://api.github.com/users/rsreetech/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-07T05:52:55Z", "updated_at": "2021-07-07T15:35:01Z", "closed_at": "2021-07-07T15:34:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting this AssertionError: labels should have a channel with length equal to one when trying to run the Med_NIST tutorial example on google collab\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-11-da859643f6a3> in <module>()\r\n     35 \r\n     36 \r\n---> 37             y_onehot = to_onehot(y)\r\n     38             print()\r\n     39             y_pred_act = act(y_pred)\r\n\r\n1 frames\r\n/usr/local/lib/python3.7/dist-packages/monai/networks/utils.py in one_hot(labels, num_classes, dtype, dim)\r\n     58 \r\n     59     if sh[dim] != 1:\r\n---> 60         raise AssertionError(\"labels should have a channel with length equal to one.\")\r\n     61 \r\n     62     sh[dim] = num_classes\r\n\r\nAssertionError: labels should have a channel with length equal to one.\r\n\r\nAny workardound for this error", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2525", "id": 937572497, "node_id": "MDU6SXNzdWU5Mzc1NzI0OTc=", "number": 2525, "title": "Deepgrow `Interaction` is not compatiable with `decollate_batch` for v 0.6.0 (8/July)", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-07-06T06:48:23Z", "updated_at": "2021-07-07T03:57:55Z", "closed_at": "2021-07-07T03:57:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn deepgrow tutorial (https://github.com/Project-MONAI/tutorials/blob/master/deepgrow/ignite/train.py#L201), we can see there are two groups of transforms: `pre_transforms` and `click_transforms`, and `click_transforms` will be used in `monai.apps.deepgrow.interaction.Interaction`. So far, this way is not compatiable with our `decollate_batch` logic.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2516", "id": 936606745, "node_id": "MDU6SXNzdWU5MzY2MDY3NDU=", "number": 2516, "title": "PyTorch and ignite reference links are outdated", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-05T01:51:15Z", "updated_at": "2021-07-05T06:27:41Z", "closed_at": "2021-07-05T06:27:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWe have many links of PyTorch or ignite source code in the doc-strings, but many of them link to the master branch directly, which is not fixed code and the linked lines not match anymore.\r\n\r\n**Expected solution**\r\nNeed to link to the API docs of PyTorch and ignite or link to released code version.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2516/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2506", "id": 935279897, "node_id": "MDU6SXNzdWU5MzUyNzk4OTc=", "number": 2506, "title": "A potential bug in CheckpointLoader", "user": {"login": "sandylaker", "id": 30265066, "node_id": "MDQ6VXNlcjMwMjY1MDY2", "avatar_url": "https://avatars.githubusercontent.com/u/30265066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandylaker", "html_url": "https://github.com/sandylaker", "followers_url": "https://api.github.com/users/sandylaker/followers", "following_url": "https://api.github.com/users/sandylaker/following{/other_user}", "gists_url": "https://api.github.com/users/sandylaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandylaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandylaker/subscriptions", "organizations_url": "https://api.github.com/users/sandylaker/orgs", "repos_url": "https://api.github.com/users/sandylaker/repos", "events_url": "https://api.github.com/users/sandylaker/events{/privacy}", "received_events_url": "https://api.github.com/users/sandylaker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-07-01T23:12:32Z", "updated_at": "2021-07-02T17:42:36Z", "closed_at": "2021-07-02T17:42:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "There might a potential bug in following lines:\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/ce45640b2aab6e094e3c8af9ea49634497df9fb6/monai/handlers/checkpoint_loader.py#L95-L104\r\n\r\nIf we \r\n1. set `CheckpointLoader.strict_shape = False` \r\n2. load other objects besides model's `state_dict` from checkpoint (e.g. when `load_dict = {\"model\": model, \"optimizer\": optimizer}`),\r\n\r\nthe `obj` might be `model` or `optimizer` in Line 103, while `checkpoint` is always a dict containing keys `\"model\"` and `\"optimizer\"`. If the obj is `optimizer`, then [this line](https://github.com/Project-MONAI/MONAI/blob/ce45640b2aab6e094e3c8af9ea49634497df9fb6/monai/networks/utils.py#L370) will raise an Error since `optimizer` is not iterable. If the obj is `model`, `{dst_prefix}{s}`([see here](https://github.com/Project-MONAI/MONAI/blob/ce45640b2aab6e094e3c8af9ea49634497df9fb6/monai/networks/utils.py#L377)) will never be matched, since `s` is just `\"model\"` or `\"optimizer\"`. Thus, the `state_dict` from check point will never be loaded.\r\n\r\nAlthough the conditions to trigger this error is barely fulfilled in practice (e.g. when we do transfer learning and the checkpoint happens to contain some non-iterable objects like tensors, optimizer, etc.), it is better to be aware of this issue.\r\n\r\nYou can run the following test script to see the detailed error message:\r\n```python3\r\nfrom ignite.engine import Engine\r\nfrom torch.optim import SGD\r\nimport torch\r\nimport torch.nn as nn\r\nimport tempfile\r\nfrom monai.handlers import CheckpointLoader\r\nimport os.path as osp\r\n\r\n\r\ndef main(output_dir):\r\n\t# build dummy data set and data loader\r\n\tx = torch.randn(10, 2)\r\n\ty = torch.randn(10)\r\n\ttrain_set = torch.utils.data.TensorDataset(x, y)\r\n\ttrain_loader = torch.utils.data.DataLoader(\r\n\t\ttrain_set, \r\n\t\tbatch_size=2, \r\n\t\tnum_workers=0, \r\n\t\tshuffle=False)\r\n\r\n\t# build dummy model, optimizer and engine\r\n\tmodel = nn.Linear(2, 1, bias=False)\r\n\toptimizer = SGD(model.parameters(), lr=0.001)\r\n\r\n\tdef update_model(engine, batch):\r\n\t\tx_, y_ = batch\r\n\t\toptimizer.zero_grad()\r\n\t\tloss = (model(x_) - y_).sum()\r\n\t\tloss.backward()\r\n\t\toptimizer.step()\r\n\t\treturn loss.item()\r\n\r\n\ttrainer = Engine(update_model)\r\n\r\n\t# save a checkpoint for loading\r\n\tto_save = {'model': model.state_dict(), 'optimizer': optimizer.state_dict()}\r\n\tto_load = {'model': model, 'optimizer': optimizer}\r\n\tckpt = torch.save(to_save, osp.join(tmp_dir, \"dummy.pth\"))\r\n\r\n\tload_handler = CheckpointLoader(osp.join(tmp_dir, 'dummy.pth'), to_load, strict_shape=False)\r\n\tload_handler.attach(trainer)\r\n\r\n\ttrainer.run(train_loader, max_epochs=1)\r\n\r\n\r\nif __name__ == '__main__':\r\n\twith tempfile.TemporaryDirectory() as tmp_dir:\r\n\t\tmain(tmp_dir)\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2506/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2495", "id": 934594678, "node_id": "MDU6SXNzdWU5MzQ1OTQ2Nzg=", "number": 2495, "title": "Minor code format issue in PatchEmbeddingBlock", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2021-07-01T08:58:40Z", "updated_at": "2021-07-02T02:29:01Z", "closed_at": "2021-07-02T02:29:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf running `/black`, the change in the newly added PatchEmbeddingBlock will cause CI error.\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/networks/blocks/patchembedding.py\r\nAnd there are also some other potential issues about the input args.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2493", "id": 934484455, "node_id": "MDU6SXNzdWU5MzQ0ODQ0NTU=", "number": 2493, "title": "Segmentation / Classification integration tests forget to use decollate", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-07-01T07:02:06Z", "updated_at": "2021-07-02T16:06:56Z", "closed_at": "2021-07-02T16:06:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Now, post processing transforms assume the input to be channel first tensors, but in:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/tests/test_integration_segmentation_3d.py#L149\r\nIt used batch first tensors.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2493/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2453", "id": 930307663, "node_id": "MDU6SXNzdWU5MzAzMDc2NjM=", "number": 2453, "title": "`ToTensor()` transform adds unexpected dim", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-06-25T16:02:47Z", "updated_at": "2021-06-26T16:52:03Z", "closed_at": "2021-06-26T16:52:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA bug reported by Hogler:\r\nWhen using `ToTensor()` transform on a numpy array with 0 dims, it added 1 dim.\r\nThe root cause is `np.ascontiguousarray()` added a dim:\r\n```\r\n>>> a = np.ascontiguousarray(2)\r\n>>> \r\n>>> print(a)\r\n[2]\r\n```\r\nI will try to fix it ASAP.\r\n\r\nThanks.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2445", "id": 929807195, "node_id": "MDU6SXNzdWU5Mjk4MDcxOTU=", "number": 2445, "title": "SmartCacheDataset modified input datalist", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-06-25T04:04:58Z", "updated_at": "2021-06-25T07:46:17Z", "closed_at": "2021-06-25T07:46:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nBug reported by an internal user:\r\nIf set `shuffle=True` in `SmartCacheDataset`, it will modify the input datalist in place, program to reproduce:\r\n```py\r\ndata_list = list(np.array([i]) for i in range(5))\r\nprint(\"original datalist:\", data_list)\r\nSmartCacheDataset(\r\n    data=data_list,\r\n    transform=None,\r\n    cache_rate=0.5,\r\n    replace_rate=0.4,\r\n    shuffle=True,\r\n)\r\nprint(\"datalist after dataset:\", data_list)\r\n```\r\nThe output:\r\n```\r\noriginal datalist: [array([0]), array([1]), array([2]), array([3]), array([4])]\r\nLoading dataset: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 2/2 [00:00<00:00, 4566.47it/s]\r\ndatalist after dataset: [array([2]), array([0]), array([1]), array([3]), array([4])]\r\n```\r\n\r\nIt should only shuffle the datalist in the `SmartCacheDataset`.\r\n\r\nThanks.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2445/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2397", "id": 925701762, "node_id": "MDU6SXNzdWU5MjU3MDE3NjI=", "number": 2397, "title": "shared location for different jit builds", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-20T23:22:34Z", "updated_at": "2021-06-21T07:38:17Z", "closed_at": "2021-06-21T07:38:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nbuilding different versions of the _extensions currently uses the same module name,\r\nThis can cause issues of incompatible compiled modules.\r\n\r\nlog:\r\nhttps://github.com/Project-MONAI/MONAI/runs/2870435032?check_suite_focus=true#step:6:9618\r\n\r\n```\r\n======================================================================\r\nERROR: test_cuda_3_1_batches_3_dimensions_1_channels_2_classes_1_mixtures (tests.test_gmm.GMMTestCase)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/__w/MONAI/MONAI/tests/test_gmm.py\", line 323, in test_cuda\r\n    gmm = GaussianMixtureModel(features_tensor.size(1), mixture_count, class_count)\r\n  File \"/__w/MONAI/MONAI/monai/networks/layers/gmm.py\", line 42, in __init__\r\n    \"gmm\", {\"CHANNEL_COUNT\": channel_count, \"MIXTURE_COUNT\": mixture_count, \"MIXTURE_SIZE\": mixture_size}\r\n  File \"/__w/MONAI/MONAI/monai/_extensions/loader.py\", line 86, in load_module\r\n    verbose=verbose_build,\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 952, in load\r\n    keep_intermediates=keep_intermediates)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 1168, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 1493, in _import_module_from_library\r\n    return imp.load_module(module_name, file, path, description)\r\n  File \"/opt/conda/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/opt/conda/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 684, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 658, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 571, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 922, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /github/home/.cache/torch_extensions/gmm_1_2_1/gmm_1_2_1.so: undefined symbol: _ZN2at5emptyEN3c108ArrayRefIlEERKNS0_13TensorOptionsENS0_8optionalINS0_12MemoryFormatEEE\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2397/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2391", "id": 924626651, "node_id": "MDU6SXNzdWU5MjQ2MjY2NTE=", "number": 2391, "title": "pytype doesn't work on macOS", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}, {"id": 2977876151, "node_id": "MDU6TGFiZWwyOTc3ODc2MTUx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Upstream%20fix%20required", "name": "Upstream fix required", "color": "d4c5f9", "default": false, "description": "Upstream fix required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-18T07:29:47Z", "updated_at": "2022-01-13T21:47:17Z", "closed_at": "2022-01-13T21:47:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n`./runtests.h --pytype` gives an error on macOS, looks like it's a pytype issue https://github.com/google/pytype/issues/661\r\n\r\n<details>\r\n\r\n```\r\npytype\r\n2021.06.17\r\nComputing dependencies\r\nAnalyzing 180 sources with 8 local dependencies\r\nninja: Entering directory `.pytype'\r\n[1/120] check monai.data.dataloader\r\nFAILED: /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/dataloader.pyi \r\n/usr/local/anaconda3/envs/py37/bin/python -m pytype.single --disable pyi-error --imports_info /Users/testing/Documents/MONAI/.pytype/imports/monai.data.dataloader.imports --module-name monai.data.dataloader -V 3.7 -o /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/dataloader.pyi --analyze-annotated --check-parameter-types --nofail --precise-return --protocols --quick /Users/testing/Documents/MONAI/monai/data/dataloader.py\r\nERROR:pytype.imports_map_loader Invalid imports_map entries (checking from root dir: /Users/testing/Documents/MONAI/.pytype)\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/dataloader.pyi' (mapped from 'monai/data/dataloader')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/image_reader.pyi' (mapped from 'monai/data/image_reader')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/nifti_saver.pyi' (mapped from 'monai/data/nifti_saver')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/nifti_writer.pyi' (mapped from 'monai/data/nifti_writer')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/png_saver.pyi' (mapped from 'monai/data/png_saver')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/png_writer.pyi' (mapped from 'monai/data/png_writer')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/data/utils.pyi' (mapped from 'monai/data/utils')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/__init__.pyi' (mapped from 'monai/transforms/__init__')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/compose.pyi' (mapped from 'monai/transforms/compose')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/array.pyi' (mapped from 'monai/transforms/croppad/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/batch.pyi' (mapped from 'monai/transforms/croppad/batch')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/dictionary.pyi' (mapped from 'monai/transforms/croppad/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/intensity/array.pyi' (mapped from 'monai/transforms/intensity/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/intensity/dictionary.pyi' (mapped from 'monai/transforms/intensity/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/inverse.pyi' (mapped from 'monai/transforms/inverse')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/inverse_batch_transform.pyi' (mapped from 'monai/transforms/inverse_batch_transform')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/io/array.pyi' (mapped from 'monai/transforms/io/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/io/dictionary.pyi' (mapped from 'monai/transforms/io/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/post/array.pyi' (mapped from 'monai/transforms/post/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/post/dictionary.pyi' (mapped from 'monai/transforms/post/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/spatial/array.pyi' (mapped from 'monai/transforms/spatial/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/spatial/dictionary.pyi' (mapped from 'monai/transforms/spatial/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/transform.pyi' (mapped from 'monai/transforms/transform')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utility/array.pyi' (mapped from 'monai/transforms/utility/array')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utility/dictionary.pyi' (mapped from 'monai/transforms/utility/dictionary')\r\nERROR:pytype.imports_map_loader   file does not exist: '/Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utils.pyi' (mapped from 'monai/transforms/utils')\r\nTraceback (most recent call last):\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/single.py\", line 97, in <module>\r\n    sys.exit(main() or 0)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/single.py\", line 62, in main\r\n    options = config.Options(sys.argv[1:], command_line=True)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/config.py\", line 68, in __init__\r\n    Postprocessor(names, options, self).process()\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/config.py\", line 419, in process\r\n    node.processor(value)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/config.py\", line 555, in _store_imports_map\r\n    imports_map, self.output_options.open_function)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/site-packages/pytype/imports_map_loader.py\", line 78, in build_imports_map\r\n    raise ValueError(msg)\r\nValueError: Invalid imports_map: /Users/testing/Documents/MONAI/.pytype/imports/monai.data.dataloader.imports\r\nBad entries:\r\n  monai/data/dataloader -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/dataloader.pyi\r\n  monai/data/image_reader -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/image_reader.pyi\r\n  monai/data/nifti_saver -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/nifti_saver.pyi\r\n  monai/data/nifti_writer -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/nifti_writer.pyi\r\n  monai/data/png_saver -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/png_saver.pyi\r\n  monai/data/png_writer -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/png_writer.pyi\r\n  monai/data/utils -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/data/utils.pyi\r\n  monai/transforms/__init__ -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/__init__.pyi\r\n  monai/transforms/compose -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/compose.pyi\r\n  monai/transforms/croppad/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/array.pyi\r\n  monai/transforms/croppad/batch -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/batch.pyi\r\n  monai/transforms/croppad/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/croppad/dictionary.pyi\r\n  monai/transforms/intensity/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/intensity/array.pyi\r\n  monai/transforms/intensity/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/intensity/dictionary.pyi\r\n  monai/transforms/inverse -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/inverse.pyi\r\n  monai/transforms/inverse_batch_transform -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/inverse_batch_transform.pyi\r\n  monai/transforms/io/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/io/array.pyi\r\n  monai/transforms/io/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/io/dictionary.pyi\r\n  monai/transforms/post/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/post/array.pyi\r\n  monai/transforms/post/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/post/dictionary.pyi\r\n  monai/transforms/spatial/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/spatial/array.pyi\r\n  monai/transforms/spatial/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/spatial/dictionary.pyi\r\n  monai/transforms/transform -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/transform.pyi\r\n  monai/transforms/utility/array -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utility/array.pyi\r\n  monai/transforms/utility/dictionary -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utility/dictionary.pyi\r\n  monai/transforms/utils -> /Users/testing/Documents/MONAI/.pytype/pyi/monai/transforms/utils.pyi/\r\n\r\n```\r\n\r\n</details>\r\n\r\n```\r\nMONAI version: 0.5.3+120.g06937291\r\nNumpy version: 1.20.3\r\nPytorch version: 1.9.0\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 069372910b532b0db2da35421d7da8605362aeb0\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.4\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.18.1\r\nPillow version: 8.2.0\r\nTensorboard version: 2.5.0\r\ngdown version: 3.13.0\r\nTorchVision version: 0.10.0\r\nITK version: 5.1.2\r\ntqdm version: 4.61.1\r\nlmdb version: 1.2.1\r\npsutil version: 5.8.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2374", "id": 921466724, "node_id": "MDU6SXNzdWU5MjE0NjY3MjQ=", "number": 2374, "title": "error in multi-process accessing of the same non-exist persistent cache", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-06-15T14:34:18Z", "updated_at": "2021-06-15T16:22:37Z", "closed_at": "2021-06-15T16:22:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nthe persistent dataset will first check the existence of a cache directory and the create a new one if needed:\r\nhttps://github.com/Project-MONAI/MONAI/blob/feb3a334b7bbf302b13a6da80e0b022a4cf75a4e/monai/data/dataset.py#L163-L165\r\nthese steps may run into a race condition in a multiprocess context.\r\n\r\n```py\r\npython -m tests.test_persistentdataset\r\npersistent 1\r\npersistent 0\r\ncreate /var/folders/6f/fdkl7m0x7sz3nj_t7p3ccgz00000gp/T/tmpu578spse/test\r\ncreate /var/folders/6f/fdkl7m0x7sz3nj_t7p3ccgz00000gp/T/tmpu578spse/test\r\nProcess Process-2:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\r\n    self.run()\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/multiprocessing/process.py\", line 99, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"MONAI/tests/utils.py\", line 296, in run_process\r\n    raise e\r\n  File \"MONAI/tests/utils.py\", line 287, in run_process\r\n    func(*args, **kwargs)\r\n  File \"MONAI/tests/utils.py\", line 471, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"MONAI/tests/test_persistentdataset.py\", line 166, in test_mp_dataset\r\n    ds = PersistentDataset(items, transform=_InplaceXform(), cache_dir=cache_dir)\r\n  File \"MONAI/monai/data/dataset.py\", line 172, in __init__\r\n    self.cache_dir.mkdir(parents=True)\r\n  File \"/usr/local/anaconda3/envs/py37/lib/python3.7/pathlib.py\", line 1273, in mkdir\r\n    self._accessor.mkdir(self, mode)\r\nFileExistsError: [Errno 17] File exists: '/var/folders/6f/fdkl7m0x7sz3nj_t7p3ccgz00000gp/T/tmpu578spse/test'\r\nF\r\n======================================================================\r\nFAIL: test_mp_dataset (__main__.TestDistCreateDataset)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File MONAI/tests/utils.py\", line 343, in _wrapper\r\n    assert results.get(), \"Distributed call failed.\"\r\nAssertionError: Distributed call failed.\r\n\r\n----------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2357", "id": 918172811, "node_id": "MDU6SXNzdWU5MTgxNzI4MTE=", "number": 2357, "title": "Tests failing on A100 due to tolerance", "user": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-06-11T03:30:07Z", "updated_at": "2021-10-07T20:11:13Z", "closed_at": "2021-10-07T20:11:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n14 tests are failing on A100 due to issue with tolerance. The details of all tests and relative error are given below\r\n\r\n**To Reproduce**\r\nOn a A100 GPU:\r\n- Setup and install MONAI\r\n- Run tests\r\n\r\n** Details **\r\nFailing tests and relative error on A100 are:\r\n\r\n- `test_rand_3d_elastic_3 (tests.test_rand_elastic_3d.TestRand3DElastic)\r\nMismatched elements: 1 / 8 (12.5%)\r\nMax absolute difference: 0.00179242\r\nMax relative differenc: 0.00010684`\r\n- `test_value_cuda_0 (tests.test_lltm.TestLLTM)\r\nAssertionError: With rtol=0.0001 and atol=0.0001, found 2 element(s) (out of 8) whose difference(s) exceeded the margin of error (including 0 nan comparisons). The greatest difference was 0.00022590160369873047 (0.616874098777771 vs. 0.6171000003814697), which occurred at index (2, 1).`\r\n- `test_shape_5 (tests.test_local_normalized_cross_correlation_loss.TestLocalNormalizedCrossCorrelationLoss)\r\nNot equal to tolerance rtol=1e-05, atol=0\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array(-0.918834, dype=float32)\r\n \u200by: array(-0.918672)`\r\n- `test_shape_0 (tests.test_global_mutual_information_loss.TestGlobalMutualInformationLoss)\r\nNot equal to tolerance rtol=0.0001, atol=0\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array(-1.098231, dype=float32)\r\n \u200by: array(-1.098602)`\r\n- `test_shape_1 (tests.test_global_mutual_information_loss.TestGlobalMutualInformationLoss)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array(-1.083798, dype=float32)\r\n \u200by: array(-1.083999)`\r\n- `test_shape_2 (tests.test_global_mutual_information_loss.TestGlobalMutualInformationLoss)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array(-1.083799, dype=float32)\r\n \u200by: array(-1.083999)`\r\n- `test_shape_3 (tests.test_global_mutual_information_loss.TestGlobalMutualInformationLoss)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array(-1.083798, dype=float32)\r\n \u200by: array(-1.083999)`\r\n- `test_affine_transform_2d (tests.test_affine_transform.TestAffineTransform)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\nMismatched elements: 12 / 12 (100%)\r\nMax absolute difference: 0.002\r\nMax relative diffrence: 3071.\r\n \u200bx: array([[[[0.002197, 0.499532, 0.999491, 1.49934],\r\n         \u200b[3.866943, 1.365621, 1.86558 , 2.36523],\r\n         \u200b[7.7323  , 3.037472, 2.731669, 3.231812]]]], dype=float32)\r\n \u200by: array([[[[0.000001, 0.5     , 1.      , 1.5    ],\r\n         \u200b[3.866026, 1.366025, 1.866025, 2.36625],\r\n         \u200b[7.732052, 3.035899, 2.732051, 3.232051]]]])`\r\n- `test_affine_transform_3d (tests.test_affine_transform.TestAffineTransform)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\nMismatched elements: 44 / 48 (91.7%)\r\nMax absolute difference: 0.002\r\nMax relative differene: 31533.831\r\n \u200bx: array([[[[[ 0.001892,  0.5017 ],\r\n          \u200b[ 2.367615,  1.36743],\r\n          \u200b[ 4.733337,  .402832],...\r\n \u200by: array([[[[[ 0.      ,  0.5    ],\r\n          \u200b[ 2.366025,  1.36605],\r\n          \u200b[ 4.732051,  2.401924],...`\r\n- `test_to_norm_affine_0 (tests.test_affine_transform.TestToNormAffine)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\nMismatched elements: 2 / 9 (22.2%)\r\nMax absolute difference: 0.\r\nMax relative diffrence: 0.001\r\n \u200bx: array([[[ 1.333008,  0.      ,  0.33008],\r\n        \u200b[ 0.      ,  0.399902, -0.60098],\r\n        \u200b[ 0.      ,  0.      ,  1.      ]]], dype=float32)\r\n \u200by: array([[[ 1.333333,  0.      ,  0.33333],\r\n        \u200b[ 0.      ,  0.4     , -0.6    ],\r\n        \u200b[ 0.      ,  0.      ,  1.      ]]])`\r\n- `test_to_norm_affine_1 (tests.test_affine_transform.TestToNormAffine)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\nMismatched elements: 2 / 9 (22.2%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array([[[ 1.25    ,  0.      ,  0.25   ],\r\n        \u200b[ 0.      ,  0.499878, -0.50244],\r\n        \u200b[ 0.      ,  0.      ,  1.      ]]], dype=float32)\r\n \u200by: array([[[ 1.25,  0.  ,  .25],\r\n        \u200b[ 0.  ,  0.5 , -.5 ],\r\n        \u200b[ 0.  ,  0.  ,  1.  ]]])`\r\n- `test_to_norm_affine_2 (tests.test_affine_transform.TestToNormAffine)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 16 (12.5%)\r\nMax absolute difference: 0.\r\nMax relative diffrence: 0.001\r\n \u200bx: array([[[ 2.      ,  0.      ,  0.      ,  1.     ],\r\n        \u200b[ 0.      ,  1.333008,  0.      ,  0.33008],\r\n        \u200b[ 0.      ,  0.      ,  0.399902, -0.60098],\r\n        \u200b[ 0.      ,  0.      ,  0.      ,  1.      ]]], dype=float32)\r\n \u200by: array([[[ 2.      ,  0.      ,  0.      ,  1.     ],\r\n        \u200b[ 0.      ,  1.333333,  0.      ,  0.33333],\r\n        \u200b[ 0.      ,  0.      ,  0.4     , -0.6    ],\r\n        \u200b[ 0.      ,  0.      ,  0.      ,  1.      ]]])`\r\n- `test_to_norm_affine_3 (tests.test_affine_transform.TestToNormAffine)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 16 (12.5%)\r\nMax absolute difference: 0.\r\nMax relative dfference: 0.\r\n \u200bx: array([[[ 1.5     ,  0.      ,  0.      ,  0.5    ],\r\n        \u200b[ 0.      ,  1.25    ,  0.      ,  0.25   ],\r\n        \u200b[ 0.      ,  0.      ,  0.499878, -0.50244],\r\n        \u200b[ 0.      ,  0.      ,  0.      ,  1.      ]]], dype=float32)\r\n \u200by: array([[[ 1.5 ,  0.  ,  0.  ,  .5 ],\r\n        \u200b[ 0.  ,  1.25,  0.  ,  .25],\r\n        \u200b[ 0.  ,  0.  ,  0.5 , -.5 ],\r\n        \u200b[ 0.  ,  0.  ,  0.  ,  1.  ]]])`\r\n- `test_rand_2d_elastic_4 (tests.test_rand_elastic_2d.TestRand2DElastic)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0.0001\r\n\r\nMismatched elements: 2 / 12 (16.7%)\r\nMax absolute difference: 0.001\r\nMax relative dfference: 0.\r\n \u200bx: array([[[ 1.357813,  1.92286],\r\n        \u200b[ 5.626798,  6.43219]],\r\n...\r\n \u200by: array([[[ 1.358411,  1.92131],\r\n        \u200b[ 5.626623,  6.642721]],\r\n...`\r\n\r\n\r\n**Expected behavior**\r\nAll tests should pass\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Proposed Solution**\r\nTo increase the relative and absolute tolerance of the tests. \r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2357/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2355", "id": 917820179, "node_id": "MDU6SXNzdWU5MTc4MjAxNzk=", "number": 2355, "title": "paramer group format error", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-06-10T19:51:10Z", "updated_at": "2021-06-11T00:30:54Z", "closed_at": "2021-06-11T00:30:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\n`generate_param_groups` doesn't return the correct format for `match_type 'filter'`\r\n```py\r\nimport torch\r\nfrom monai.networks.nets import Unet\r\nfrom monai.optimizers import generate_param_groups\r\n\r\nnet = Unet(dimensions=3, in_channels=1, out_channels=3, channels=[2, 2, 2], strides=[1, 1, 1])\r\nparams = generate_param_groups(\r\n    network=net,\r\n    layer_matches=[lambda x: \"weight\" in x[0]],\r\n    match_types=[\"filter\"],\r\n    lr_values=[1e-3],\r\n    include_others=False,\r\n)\r\n\r\ntorch.optim.Adam(params, lr=1e-4)\r\nprint(params)\r\n```\r\n\r\nerror:\r\n```\r\nTraceback (most recent call last):\r\n  File \"tests.py\", line 14, in <module>\r\n    torch.optim.Adam(params, lr=1e-4)\r\n  File \"/lib/python3.7/site-packages/torch/optim/adam.py\", line 48, in __init__\r\n    super(Adam, self).__init__(params, defaults)\r\n  File \"/lib/python3.7/site-packages/torch/optim/optimizer.py\", line 55, in __init__\r\n    self.add_param_group(param_group)\r\n  File \"/lib/python3.7/site-packages/torch/optim/optimizer.py\", line 256, in add_param_group\r\n    \"but one of the params is \" + torch.typename(param))\r\nTypeError: optimizer can only optimize Tensors, but one of the params is tuple\r\n```\r\n\r\n**Environment**\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.5.3+105.ge6aa268e\r\nNumpy version: 1.20.3\r\nPytorch version: 1.8.1\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: e6aa268e093434688907324cfe5d885c4d6ad9b4\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.4\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.18.1\r\nPillow version: 8.2.0\r\nTensorboard version: 2.5.0\r\ngdown version: 3.13.0\r\nTorchVision version: 0.9.1\r\nITK version: 5.1.2\r\ntqdm version: 4.61.0\r\nlmdb version: 1.2.1\r\npsutil version: 5.8.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2350", "id": 916539398, "node_id": "MDU6SXNzdWU5MTY1MzkzOTg=", "number": 2350, "title": "Cannot import the Cpp/CUDA extensions in NVIDIA pytorch docker containers", "user": {"login": "ReubenDo", "id": 17268715, "node_id": "MDQ6VXNlcjE3MjY4NzE1", "avatar_url": "https://avatars.githubusercontent.com/u/17268715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ReubenDo", "html_url": "https://github.com/ReubenDo", "followers_url": "https://api.github.com/users/ReubenDo/followers", "following_url": "https://api.github.com/users/ReubenDo/following{/other_user}", "gists_url": "https://api.github.com/users/ReubenDo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ReubenDo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ReubenDo/subscriptions", "organizations_url": "https://api.github.com/users/ReubenDo/orgs", "repos_url": "https://api.github.com/users/ReubenDo/repos", "events_url": "https://api.github.com/users/ReubenDo/events{/privacy}", "received_events_url": "https://api.github.com/users/ReubenDo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-09T18:38:37Z", "updated_at": "2021-06-10T00:18:35Z", "closed_at": "2021-06-10T00:18:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI cannot import the MONAI Cpp/CUDA extensions using last NVIDIA pytorch docker containers. I tried with  `nvcr.io/nvidia/pytorch:21.02-py3`, `nvcr.io/nvidia/pytorch:21.03-py3`,`nvcr.io/nvidia/pytorch:21.04-py3`,`nvcr.io/nvidia/pytorch:21.05-py3`. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Pull the docker container, e.g.`nvcr.io/nvidia/pytorch:21.04-py3`\r\n2. Install MONAI: `BUILD_MONAI=1 pip -q install -U git+https://github.com/Project-MONAI/MONAI#egg=monai`\r\n3. Run commands `python -c 'import monai._C;'`\r\n\r\nError message:\r\n```\r\nFile \"<string>\", line 1, in <module>\r\nImportError: /workspace/home/locals/del_moi/.local/lib/python3.8/site-packages/monai/_C.so: undefined symbol: _ZN2at3eluERKNS_6TensorEN3c106ScalarES4_S4_\r\n```\r\n\r\n**Expected behavior**\r\nBeing able to import the Cpp/CUDA extensions.\r\n\r\n**Environment**\r\n```\r\npython -c 'import monai; monai.config.print_debug_info()'\r\n================================                                                                                                                                                                                   \r\nPrinting MONAI config...                                                                                                                                                                                           \r\n================================                                                                                                                                                                                   \r\nMONAI version: 0.5.3+101.gcbf2521                                                                                                                                                                                  \r\nNumpy version: 1.20.1                                                                                                                                                                                              \r\nPytorch version: 1.9.0a0+2ecb2c7                                                                                                                                                                                   \r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False                                                                                                                                                                 \r\nMONAI rev id: cbf252199a8a1aa48672012f48d18dfdbb94301c                                                                                                                                                             \r\n                                                                                                                                                                                                                   \r\nOptional dependencies:                                                                                                                                                                                             \r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.                                                                                                                                                          \r\nNibabel version: NOT INSTALLED or UNKNOWN VERSION.                                                                                                                                                                 \r\nscikit-image version: 0.15.0                                                                                                                                                                                       \r\nPillow version: 7.0.0.post3                                                                                                                                                                                        \r\nTensorboard version: 1.15.0+nv                                                                                                                                                                                     \r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.                                                                                                                                                                   \r\nTorchVision version: 0.9.0a0                                                                                                                                                                                       \r\nITK version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: 4.53.0                                                                                                                                                                                       [0/1831]\r\nlmdb version: 1.2.1\r\npsutil version: 5.8.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.2 LTS\r\nPlatform: Linux-4.15.0-117-generic-x86_64-with-glibc2.10\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.8\r\nProcess name: python\r\nCommand: ['python', '-c', 'import monai; monai.config.print_debug_info()']\r\nOpen files: []\r\nNum physical CPUs: 48\r\nNum logical CPUs: 96\r\nNum usable CPUs: 96\r\nCPU usage (%): [55.1, 100.0, 100.0, 44.4, 54.9, 100.0, 47.0, 100.0, 68.2, 48.2, 39.8, 100.0, 90.2, 100.0, 35.8, 100.0, 61.2, 48.8, 100.0, 45.1, 42.7, 46.3, 87.8, 69.9, 100.0, 69.5, 95.2, 100.0, 78.0, 68.3, 71.4, 100.0, 100.0, 50.0, 57.8, 65.1, 63.8, 52.4, 60.5, 66.3, 95.2, 56.8, 74.7, 54.3, 78.0, 56.1, 49.4, 68.3, 75.9, 43.4, 58.5, 80.7, 100.0, 58.5, 48.2, 61.0, 50.0, 50.6, 97.5, 41.0, 39.0, 55.4, 54.2, 40.7, 54.3, 100.0, 59.8, 100.0, 45.1, 100.0, 62.7, 79.8, 49.4, 67.1, 58.0, 65.9, 53.7, 58.5, 59.0, 63.4, 64.6, 57.8, 57.3, 100.0, 100.0, 66.3, 92.6, 97.6, 54.3, 94.0, 55.4, 56.8, 50.6, 100.0, 51.2, 55.0]\r\nCPU freq. (MHz): 3300\r\nLoad avg. in last 1, 5, 15 mins (%): [131.6, 102.8, 97.1]\r\nDisk usage (%): 51.5\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 1510.6\r\nAvailable memory (GB): 1388.3\r\nUsed memory (GB): 108.6\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 1\r\nHas CUDA: True\r\nCUDA version: 11.3\r\ncuDNN enabled: True\r\ncuDNN version: 8200\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_52', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'compute_86']\r\nGPU 0 Name: Tesla V100-SXM3-32GB\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 80\r\nGPU 0 Total memory (GB): 31.7\r\nGPU 0 CUDA capability (maj.min): 7.0\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2345", "id": 915956519, "node_id": "MDU6SXNzdWU5MTU5NTY1MTk=", "number": 2345, "title": "module 'torch.hub' has no attribute 'get_dir' in pytorch 1.5", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-06-09T08:50:35Z", "updated_at": "2021-06-09T14:56:11Z", "closed_at": "2021-06-09T14:56:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nfrom the nightly tests with PyTorch 1.5 https://github.com/Project-MONAI/MONAI/runs/2779850136?check_suite_focus=true:\r\n```\r\n======================================================================\r\nERROR: test_load_ckpt_2 (tests.test_mmar_download.TestMMMARDownload)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/__w/MONAI/MONAI/tests/test_mmar_download.py\", line 97, in test_load_ckpt\r\n    output = load_from_mmar(**input_args)\r\n  File \"/__w/MONAI/MONAI/monai/apps/mmars/mmars.py\", line 109, in load_from_mmar\r\n    model_dir = download_mmar(item=item, mmar_dir=mmar_dir, progress=progress)\r\n  File \"/__w/MONAI/MONAI/monai/apps/mmars/mmars.py\", line 72, in download_mmar\r\n    mmar_dir = os.path.join(torch.hub.get_dir(), \"mmars\")\r\nAttributeError: module 'torch.hub' has no attribute 'get_dir'\r\n\r\n----------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2316", "id": 912653952, "node_id": "MDU6SXNzdWU5MTI2NTM5NTI=", "number": 2316, "title": "Saving NiFTI images with resampling raises memory error", "user": {"login": "shawnfan19", "id": 55674614, "node_id": "MDQ6VXNlcjU1Njc0NjE0", "avatar_url": "https://avatars.githubusercontent.com/u/55674614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shawnfan19", "html_url": "https://github.com/shawnfan19", "followers_url": "https://api.github.com/users/shawnfan19/followers", "following_url": "https://api.github.com/users/shawnfan19/following{/other_user}", "gists_url": "https://api.github.com/users/shawnfan19/gists{/gist_id}", "starred_url": "https://api.github.com/users/shawnfan19/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shawnfan19/subscriptions", "organizations_url": "https://api.github.com/users/shawnfan19/orgs", "repos_url": "https://api.github.com/users/shawnfan19/repos", "events_url": "https://api.github.com/users/shawnfan19/events{/privacy}", "received_events_url": "https://api.github.com/users/shawnfan19/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444324, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzI0", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-06-06T06:08:13Z", "updated_at": "2021-06-07T14:45:09Z", "closed_at": "2021-06-07T14:45:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\n\r\nI have created the following pipeline and run it on some NiFTI images here (https://drive.google.com/drive/folders/1r2_0RTHFN8XfSLnSgMGYZuQXuhEpP4NC?usp=sharing). I would like to save the processed images as NiFTI because I am processing >10,000 images before training a neural network. Instead of having to process all images every epoch, I would like to save them as temporary files until training is complete. \r\n\r\n```python\r\npreprocess_transform = Compose([\r\n    LoadImaged(keys=[\"img\"]),\r\n    AsChannelFirstd(keys=[\"img\"], channel_dim=-1),\r\n    Spacingd(keys=[\"img\"], pixdim=(2, 2, 2), diagonal=True, mode=\"bilinear\"),\r\n    ScaleIntensityd(keys=[\"img\"], minv=0, maxv=1),\r\n    SaveImaged(\r\n                    keys=[\"img\"],\r\n                    output_dir=\"./visualization\",\r\n                    output_ext=\".nii\",\r\n                    resample=True,\r\n     ),\r\n    ToTensord(keys=[\"img\"])\r\n])\r\n```\r\n\r\nWithout resampling, the saved images appear distorted and shorn, but with resampling, the following error is received. It appears that the affine transform requires >200,000 GB of memory?\r\n\r\nModifying image pixdim from [1.01821 1.01821 2.025   0.     ] to [  1.01821005   1.01821005   2.0250001  898.17486327]\r\ninput data information of the runtime error transform:\r\nimg statistics:\r\nType: <class 'numpy.ndarray'>\r\nShape: (1, 172, 172, 82)\r\nValue range: (0.0, 1.0)\r\nimg_meta_dict statistics:\r\nType: <class 'dict'>\r\nValue: {'sizeof_hdr': array(1543569408, dtype=int32), 'extents': array(4194304, dtype=int32), 'session_error': array(0, dtype=int16), 'dim_info': array(0, dtype=uint8), 'dim': array([ 1024, 20481, 20481, 20736,   256,     0,     0,     0],\r\n      dtype=int16), 'intent_p1': array(0., dtype=float32), 'intent_p2': array(0., dtype=float32), 'intent_p3': array(0., dtype=float32), 'intent_code': array(0, dtype=int16), 'datatype': array(4096, dtype=int16), 'bitpix': array(8192, dtype=int16), 'slice_start': array(0, dtype=int16), 'pixdim': array([ 4.6006030e-41, -7.9165687e-07, -7.9165687e-07, -6.3281336e-23,\r\n        4.0563766e-09,  0.0000000e+00,  0.0000000e+00,  0.0000000e+00],\r\n      dtype=float32), 'vox_offset': array(0., dtype=float32), 'scl_slope': array(6.9055e-41, dtype=float32), 'scl_inter': array(6.9055e-41, dtype=float32), 'slice_end': array(0, dtype=int16), 'slice_code': array(0, dtype=uint8), 'xyzt_units': array(2, dtype=uint8), 'cal_max': array(0., dtype=float32), 'cal_min': array(0., dtype=float32), 'slice_duration': array(0., dtype=float32), 'toffset': array(0., dtype=float32), 'glmax': array(0, dtype=int32), 'glmin': array(0, dtype=int32), 'qform_code': array(256, dtype=int16), 'sform_code': array(0, dtype=int16), 'quatern_b': array(0., dtype=float32), 'quatern_c': array(0., dtype=float32), 'quatern_d': array(0., dtype=float32), 'qoffset_x': array(-3.216494e+31, dtype=float32), 'qoffset_y': array(1.5721015e+19, dtype=float32), 'qoffset_z': array(5.8155804e-15, dtype=float32), 'srow_x': array([0., 0., 0., 0.], dtype=float32), 'srow_y': array([0., 0., 0., 0.], dtype=float32), 'srow_z': array([0., 0., 0., 0.], dtype=float32), 'affine': array([[  2.        ,   0.        ,   0.        , 507.58554077],\r\n       [  0.        ,   2.        ,   0.        , 689.41204834],\r\n       [  0.        ,   0.        ,   2.        , 271.63400269],\r\n       [  0.        ,   0.        ,   0.        ,   1.        ]]), 'original_affine': array([[  1.01821005,   0.        ,   0.        , 507.58554077],\r\n       [  0.        ,   1.01821005,   0.        , 689.41204834],\r\n       [  0.        ,   0.        ,   2.0250001 , 271.63400269],\r\n       [  0.        ,   0.        ,   0.        ,   1.        ]]), 'as_closest_canonical': False, 'spatial_shape': array([20481, 20481, 20736], dtype=int16), 'original_channel_dim': -1, 'filename_or_obj': '/scratch/sfan/AV45/I174732/ADNI_023_S_0376_PT_PET_Brain_AV45_recon_br_raw_20100527082453889_6_S85655_I174732.nii'}\r\nimg_transforms statistics:\r\nType: <class 'list'>\r\nValue: [{'class': 'Spacingd', 'id': 23314182078984, 'orig_size': (336, 336, 81), 'extra_info': {'meta_data_key': 'img_meta_dict', 'old_affine': array([[  1.01821005,   0.        ,   0.        , 507.58554077],\r\n       [  0.        ,   1.01821005,   0.        , 689.41204834],\r\n       [  0.        ,   0.        ,   2.0250001 , 271.63400269],\r\n       [  0.        ,   0.        ,   0.        ,   1.        ]]), 'mode': 'bilinear', 'padding_mode': 'border', 'align_corners': False}}]\r\nTraceback (most recent call last):\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/transform.py\", line 48, in apply_transform\r\n    return transform(data)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/io/dictionary.py\", line 231, in __call__\r\n    self._saver(img=d[key], meta_data=meta_data)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/io/array.py\", line 282, in __call__\r\n    self.saver.save(img, meta_data)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/data/nifti_saver.py\", line 157, in save\r\n    output_dtype=self.output_dtype,\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/data/nifti_writer.py\", line 150, in write_nifti\r\n    spatial_size=output_spatial_shape_[: len(data.shape)],\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 889, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/networks/layers/spatial_transforms.py\", line 539, in forward\r\n    grid = nn.functional.affine_grid(theta=theta[:, :sr], size=list(dst_size), align_corners=self.align_corners)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/nn/functional.py\", line 3933, in affine_grid\r\n    return torch.affine_grid_generator(theta, size, align_corners)\r\nRuntimeError: [enforce fail at CPUAllocator.cpp:67] . DefaultCPUAllocator: can't allocate memory: you tried to allocate 278341060534272 bytes. Error code 12 (Cannot allocate memory)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/transform.py\", line 48, in apply_transform\r\n    return transform(data)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/compose.py\", line 144, in __call__\r\n    input_ = apply_transform(_transform, input_)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/transform.py\", line 71, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.io.dictionary.SaveImaged object at 0x1534418a82e8>\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"preprocess.py\", line 83, in <module>\r\n    for i, batch in enumerate(check_loader):\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 517, in __next__\r\n    data = self._next_data()\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 557, in _next_data\r\n    data = self._dataset_fetcher.fetch(index)  # may raise StopIteration\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/data/dataset.py\", line 93, in __getitem__\r\n    return self._transform(index)\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/data/dataset.py\", line 79, in _transform\r\n    return apply_transform(self.transform, data_i) if self.transform is not None else data_i\r\n  File \"/home/sfan/anaconda3/envs/torch_monai/lib/python3.6/site-packages/monai/transforms/transform.py\", line 71, in apply_transform\r\n    raise RuntimeError(f\"applying transform {transform}\") from e\r\nRuntimeError: applying transform <monai.transforms.compose.Compose object at 0x1534418a8400>\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2296", "id": 909646175, "node_id": "MDU6SXNzdWU5MDk2NDYxNzU=", "number": 2296, "title": "FocalLoss Runtime Error (view() instead of reshape())", "user": {"login": "dianemarquette", "id": 60931186, "node_id": "MDQ6VXNlcjYwOTMxMTg2", "avatar_url": "https://avatars.githubusercontent.com/u/60931186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dianemarquette", "html_url": "https://github.com/dianemarquette", "followers_url": "https://api.github.com/users/dianemarquette/followers", "following_url": "https://api.github.com/users/dianemarquette/following{/other_user}", "gists_url": "https://api.github.com/users/dianemarquette/gists{/gist_id}", "starred_url": "https://api.github.com/users/dianemarquette/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dianemarquette/subscriptions", "organizations_url": "https://api.github.com/users/dianemarquette/orgs", "repos_url": "https://api.github.com/users/dianemarquette/repos", "events_url": "https://api.github.com/users/dianemarquette/events{/privacy}", "received_events_url": "https://api.github.com/users/dianemarquette/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-06-02T15:51:49Z", "updated_at": "2021-06-03T11:20:24Z", "closed_at": "2021-06-03T11:20:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I try to train my network using `FocalLoss` instead of `DiceLoss`, I get the following error:\r\n```\r\nFile \"/home/diane/miniconda3/envs/lightning-hydra/lib/python3.8/site-packages/pytorch_lightning/plugins/training_type/training_type_plugin.py\", line 161, in validation_step\r\n    return self.lightning_module.validation_step(*args, **kwargs)\r\n  File \"/home/diane/Documents/KeriNet/src/models/keri_model.py\", line 110, in validation_step\r\n    loss = self.loss_function(logits, labels)\r\n  File \"/home/diane/miniconda3/envs/lightning-hydra/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 889, in _call_impl\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/home/diane/miniconda3/envs/lightning-hydra/lib/python3.8/site-packages/monai/losses/focal_loss.py\", line 116, in forward\r\n    i = i.view(i.size(0), i.size(1), -1)\r\nRuntimeError: view size is not compatible with input tensor's size and stride (at least one dimension spans across two contiguous subspaces). Use .reshape(...) instead.\r\n```\r\n\r\n**Code snippets**\r\n```\r\n# give three times weight to the trapezium class (class 1)\r\n# than to the background or the metacarpus (classes 0 & 2)\r\nself.loss_function = FocalLoss(include_background = True, \r\n                to_onehot_y = True, weight = [1.0, 3.0, 1.0])\r\n\r\n```\r\n**Expected behavior**\r\nWhen using FocalLoss I want my network to train correctly, i.e., like it does when:\r\n```\r\nself.loss_function = DiceLoss(include_background=True,\r\n                to_onehot_y=True, softmax=True)\r\n```\r\n\r\n**Environment**\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.5.2\r\nNumpy version: 1.19.2\r\nPytorch version: 1.8.1\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: feb3a334b7bbf302b13a6da80e0b022a4cf75a4e\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.\r\nNibabel version: 3.2.1\r\nscikit-image version: NOT INSTALLED or UNKNOWN VERSION.\r\nPillow version: 8.2.0\r\nTensorboard version: 2.4.1\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: 0.9.1\r\nITK version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: 4.61.0\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: 5.8.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.2 LTS\r\nPlatform: Linux-5.8.0-53-generic-x86_64-with-glibc2.10\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.10\r\nProcess name: python\r\nCommand: ['python', '-c', 'import monai; monai.config.print_debug_info()']\r\nOpen files: []\r\nNum physical CPUs: 8\r\nNum logical CPUs: 16\r\nNum usable CPUs: 16\r\nCPU usage (%): [43.7, 43.8, 47.1, 41.2, 40.0, 44.4, 40.0, 56.3, 46.7, 47.1, 94.1, 88.2, 43.7, 40.0, 40.0, 100.0]\r\nCPU freq. (MHz): 4710\r\nLoad avg. in last 1, 5, 15 mins (%): [15.1, 15.7, 15.1]\r\nDisk usage (%): 73.9\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 31.1\r\nAvailable memory (GB): 21.2\r\nUsed memory (GB): 9.1\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 1\r\nHas CUDA: True\r\nCUDA version: 11.1\r\ncuDNN enabled: True\r\ncuDNN version: 8005\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_37', 'sm_50', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'compute_37']\r\nGPU 0 Name: GeForce RTX 2080 SUPER\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 48\r\nGPU 0 Total memory (GB): 7.8\r\nGPU 0 CUDA capability (maj.min): 7.5\r\n```\r\n\r\n**Additional context**\r\nI'm using PyTorch Lightning 1.3.3\r\n\r\n**Solution**\r\nUsing `.reshape(...)` instead of `.view(...)` in lines 116 and 117 of `/monai/losses/focal_loss.py` solved the issue for me. \r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2275", "id": 905512858, "node_id": "MDU6SXNzdWU5MDU1MTI4NTg=", "number": 2275, "title": "SplitChannel has different behaviour depending on numpy/torch input", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444324, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzI0", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-28T14:29:54Z", "updated_at": "2021-06-29T13:45:03Z", "closed_at": "2021-06-29T13:45:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\n```python\r\nimport numpy as np\r\nimport torch\r\nfrom monai.transforms import SplitChannel\r\n\r\nt = SplitChannel()\r\n_np = np.random.randint(2, size=(3, 3, 4))\r\n_torch = torch.Tensor(_np)\r\n\r\nprint(t(_np)[0].shape)\r\nprint(t(_torch)[0].shape)\r\n```\r\nOutput is:\r\n```\r\n(1, 3, 4)\r\ntorch.Size([3, 1, 4])\r\n```\r\n\r\nI suspect this is because `slice` acts differently on torch and numpy. Is this behaviour to be expected? I'm not sure if it was intentional to let the different modules follow their own behaviour or if we expect the two to give the same result.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2248", "id": 901655842, "node_id": "MDU6SXNzdWU5MDE2NTU4NDI=", "number": 2248, "title": "Inverse Transforms don't seem to give the desired result on 3D data", "user": {"login": "devsam19", "id": 24407910, "node_id": "MDQ6VXNlcjI0NDA3OTEw", "avatar_url": "https://avatars.githubusercontent.com/u/24407910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devsam19", "html_url": "https://github.com/devsam19", "followers_url": "https://api.github.com/users/devsam19/followers", "following_url": "https://api.github.com/users/devsam19/following{/other_user}", "gists_url": "https://api.github.com/users/devsam19/gists{/gist_id}", "starred_url": "https://api.github.com/users/devsam19/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devsam19/subscriptions", "organizations_url": "https://api.github.com/users/devsam19/orgs", "repos_url": "https://api.github.com/users/devsam19/repos", "events_url": "https://api.github.com/users/devsam19/events{/privacy}", "received_events_url": "https://api.github.com/users/devsam19/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1948285550, "node_id": "MDU6TGFiZWwxOTQ4Mjg1NTUw", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Module:%20transform", "name": "Module: transform", "color": "382abf", "default": false, "description": "data transforms for preprocessing and postprocessing."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-26T02:38:18Z", "updated_at": "2021-07-15T14:43:21Z", "closed_at": "2021-07-15T14:43:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a simple transform like the following\r\n```\r\ncheck_transforms = Compose([ \r\n    LoadImaged(keys, reader='NibabelReader', as_closest_canonical=True),\r\n    AsChannelFirstd(keys, channel_dim = -1),\r\n    AddChanneld(keys,),\r\n    Resized(keys, spatial_size=(-1,128,128)),\r\n    Lambdad(keys=['label'], func=lambda x: map_labels(x, TRAIN_MAPPING_FN)),\r\n    ToTensord(keys=['image', 'label'])\r\n])\r\n```\r\n\r\nOn following the inverse transform tutorial notebook, it still fails to revert the image to their original size.\r\n```\r\n\r\nimg_dict = {\"label\": t,\r\n            \"label_transforms\": t_t}\r\n\r\nwith allow_missing_keys_mode(check_transforms):\r\n    inverted_img = check_transforms.inverse(img_dict)\r\n```\r\nAny suggestions?", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2248/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2236", "id": 899305480, "node_id": "MDU6SXNzdWU4OTkzMDU0ODA=", "number": 2236, "title": "CopyItemsd transform saves data into same key", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-05-24T06:18:03Z", "updated_at": "2021-05-24T15:59:44Z", "closed_at": "2021-05-24T15:59:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThis line of `CopyItemsd` seems not correct:\r\nhttps://github.com/Project-MONAI/MONAI/blob/dev/monai/transforms/utility/dictionary.py#L740\r\nIt saves all the data of keys into the same `new_key`.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2236/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2173", "id": 887018086, "node_id": "MDU6SXNzdWU4ODcwMTgwODY=", "number": 2173, "title": "Small Typo", "user": {"login": "lukasfolle", "id": 26490449, "node_id": "MDQ6VXNlcjI2NDkwNDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/26490449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukasfolle", "html_url": "https://github.com/lukasfolle", "followers_url": "https://api.github.com/users/lukasfolle/followers", "following_url": "https://api.github.com/users/lukasfolle/following{/other_user}", "gists_url": "https://api.github.com/users/lukasfolle/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukasfolle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukasfolle/subscriptions", "organizations_url": "https://api.github.com/users/lukasfolle/orgs", "repos_url": "https://api.github.com/users/lukasfolle/repos", "events_url": "https://api.github.com/users/lukasfolle/events{/privacy}", "received_events_url": "https://api.github.com/users/lukasfolle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-11T11:48:52Z", "updated_at": "2021-05-11T15:35:25Z", "closed_at": "2021-05-11T15:35:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Found a small typo here https://github.com/Project-MONAI/MONAI/blob/dev/monai/visualize/img2tensorboard.py#L147\r\nShould be HWD not CHWD.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2173/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2169", "id": 884478980, "node_id": "MDU6SXNzdWU4ODQ0Nzg5ODA=", "number": 2169, "title": "TransformInverter has `collate` arg but can't work", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-05-10T15:31:29Z", "updated_at": "2021-05-11T09:58:18Z", "closed_at": "2021-05-11T09:58:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, the `TransformInverter` hander can't support collate that doesn't generate 1 list of data.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2169/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2161", "id": 880446845, "node_id": "MDU6SXNzdWU4ODA0NDY4NDU=", "number": 2161, "title": "CUDA_VISIBLE_DEVICES environ setting not work in ver. 0.5.0", "user": {"login": "ChenglongWang", "id": 4251375, "node_id": "MDQ6VXNlcjQyNTEzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4251375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChenglongWang", "html_url": "https://github.com/ChenglongWang", "followers_url": "https://api.github.com/users/ChenglongWang/followers", "following_url": "https://api.github.com/users/ChenglongWang/following{/other_user}", "gists_url": "https://api.github.com/users/ChenglongWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChenglongWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChenglongWang/subscriptions", "organizations_url": "https://api.github.com/users/ChenglongWang/orgs", "repos_url": "https://api.github.com/users/ChenglongWang/repos", "events_url": "https://api.github.com/users/ChenglongWang/events{/privacy}", "received_events_url": "https://api.github.com/users/ChenglongWang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-05-08T07:38:02Z", "updated_at": "2021-05-12T15:52:35Z", "closed_at": "2021-05-12T15:52:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm using `os.environ[\"CUDA_VISIBLE_DEVICES\"] = '0'` to set available GPU instead of specifing device like `cuda:0`. \r\nEverthing works fine until updating to ver. 0.5.0.  Maybe some GPU-related operations were added in the latest version during import phase.\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Use one [tutorial](https://github.com/Project-MONAI/tutorials/blob/master/2d_segmentation/torch/unet_training_array.py) for example. \r\n2. Default behavior: All GPUs are detected and only one gpu is actually used\r\n3. Add `os.environ[\"CUDA_VISIBLE_DEVICES\"] = '0'` after `def main(tempdir):` on line 31.\r\n  - ver. 0.4.x : Only GPU-0 is detected and used.\r\n  - ver. 0.5.0 : All GPUs are detected.\r\n\r\n\r\n**Environment**\r\nMONAI version: 0.5.0\r\nNumpy version: 1.19.4\r\nPytorch version: 1.6.0\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 2707407fed8c78ccb1c18d1e994a68580457219e\r\n\r\nOptional dependencies:                                                                                                                                                                                                                                                        Pytorch Ignite version: 0.4.4\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.17.2  \r\nPillow version: 8.0.1\r\nTensorboard version: 2.5.0a20201221 \r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.                                                                                                                                                                                                                              TorchVision version: 0.7.0\r\nITK version: 5.1.2\r\ntqdm version: 4.54.1\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: 5.7.3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2152", "id": 877564764, "node_id": "MDU6SXNzdWU4Nzc1NjQ3NjQ=", "number": 2152, "title": "90percent of metric_summary should use 90 instead of 10", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-05-06T14:33:41Z", "updated_at": "2021-05-11T14:39:06Z", "closed_at": "2021-05-11T14:39:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nShould compute with `np.nanpercentile(90)` according to wiki: https://en.wikipedia.org/wiki/Percentile.\r\nFeature request from internal research team.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2152/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2148", "id": 877135741, "node_id": "MDU6SXNzdWU4NzcxMzU3NDE=", "number": 2148, "title": "Metrics report should compute on channel dim first then on batch", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-05-06T06:39:38Z", "updated_at": "2021-05-06T07:05:05Z", "closed_at": "2021-05-06T07:05:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, our metrics handlers compute `mean` of channel dim first then compute on batch dim, but the `metric_summary` report compute on batch dim first.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2146", "id": 876595287, "node_id": "MDU6SXNzdWU4NzY1OTUyODc=", "number": 2146, "title": "PersistentDataset tempfile issue", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-05-05T15:48:08Z", "updated_at": "2021-05-07T02:05:02Z", "closed_at": "2021-05-07T02:05:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nissue detected in v0.5.2:\r\nhttps://github.com/Project-MONAI/MONAI/blob/feb3a334b7bbf302b13a6da80e0b022a4cf75a4e/monai/data/dataset.py#L253\r\n```\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/worker.py\", line 202, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/monai/monai/data/dataset.py\", line 93, in __getitem__\r\n    return self._transform(index)\r\n  File \"/opt/monai/monai/data/dataset.py\", line 259, in _transform\r\n    pre_random_item = self._cachecheck(self.data[index])\r\n  File \"/opt/monai/monai/data/dataset.py\", line 253, in _cachecheck\r\n    temp_hash_file.rename(hashfile)\r\n  File \"/opt/conda/lib/python3.8/pathlib.py\", line 1358, in rename\r\n    self._accessor.rename(self, target)\r\nOSError: [Errno 18] Invalid cross-device link: '/tmp/tmpc9cd7k66/0e709abea045c1af2a5a94d166f81d65.pt' -> 'val_cache/0e709abea045c1af2a5a94d166f81d65.pt'\r\n```\r\n\r\nroot cause is that the default tempfile location `/tmp` is on a different filesystem than `val_cache`.\r\na potential workaround would be changing the default temp location of python:\r\n`export TMPDIR=/path/to/val_cache`", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2146/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2140", "id": 875393901, "node_id": "MDU6SXNzdWU4NzUzOTM5MDE=", "number": 2140, "title": "mypy gives legendre error", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}, {"id": 2977876151, "node_id": "MDU6TGFiZWwyOTc3ODc2MTUx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/Upstream%20fix%20required", "name": "Upstream fix required", "color": "d4c5f9", "default": false, "description": "Upstream fix required"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-04T12:04:59Z", "updated_at": "2021-09-01T09:10:35Z", "closed_at": "2021-09-01T09:10:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nOutput from runtests.sh is:\r\n\r\n```\r\nmypy\r\nmypy 0.812\r\nmonai/transforms/intensity/array.py:447:21: error: Module has no attribute \"legendre\"; maybe \"Legendre\"?  [attr-defined]\r\nmonai/transforms/intensity/array.py:458:21: error: Module has no attribute \"legendre\"; maybe \"Legendre\"?  [attr-defined]\r\n```\r\n\r\n**Environment**\r\n\r\nDebug info:\r\n```\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.5.2+21.g234d9c3\r\nNumpy version: 1.20.2\r\nPytorch version: 1.9.0a0+2ecb2c7\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: 234d9c3b9f6d1aa09358db9d4c894a0a5f5656a1\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.4.4\r\nNibabel version: 3.2.1\r\nscikit-image version: 0.18.1\r\nPillow version: 8.2.0\r\nTensorboard version: 2.5.0\r\ngdown version: 3.12.2\r\nTorchVision version: 0.9.1+cu102\r\nITK version: 5.1.2\r\ntqdm version: 4.60.0\r\nlmdb version: 1.2.1\r\npsutil version: 5.8.0\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 20.04.2 LTS\r\nPlatform: Linux-4.15.0-117-generic-x86_64-with-glibc2.10\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.8.8\r\nProcess name: ipython\r\nCommand: ['/opt/conda/bin/python', '/opt/conda/bin/ipython']\r\nOpen files: [popenfile(path='/home/rbrown/.ipython/profile_default/history.sqlite', fd=5, position=32768, mode='r+', flags=688130), popenfile(path='/home/rbrown/.ipython/profile_default/history.sqlite', fd=6, position=147456, mode='r+', flags=688130)]\r\nNum physical CPUs: 48\r\nNum logical CPUs: 96\r\nNum usable CPUs: 96\r\nCPU usage (%): [53.3, 48.2, 41.3, 55.0, 62.8, 62.2, 48.8, 58.1, 57.0, 38.6, 45.9, 53.5, 46.9, 50.9, 57.5, 48.5, 43.5, 69.7, 47.8, 54.6, 61.7, 40.3, 49.4, 51.6, 66.2, 56.4, 52.7, 47.1, 55.9, 47.5, 48.4, 46.1, 51.3, 52.3, 51.3, 54.5, 53.1, 56.9, 53.8, 52.9, 61.0, 54.4, 54.8, 55.6, 45.7, 44.0, 54.4, 53.9, 58.6, 43.9, 57.1, 43.9, 50.0, 42.5, 45.8, 44.7, 48.9, 60.7, 43.7, 49.3, 39.4, 42.2, 41.2, 51.2, 39.6, 43.4, 44.3, 48.1, 41.8, 52.6, 54.1, 50.4, 45.9, 45.8, 52.6, 63.0, 43.6, 47.1, 55.7, 57.8, 45.6, 45.0, 54.4, 54.0, 60.2, 54.7, 50.5, 51.6, 45.5, 45.6, 47.0, 48.4, 46.9, 68.7, 51.5, 50.2]\r\nCPU freq. (MHz): 3339\r\nLoad avg. in last 1, 5, 15 mins (%): [67.7, 86.9, 84.7]\r\nDisk usage (%): 51.1\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 1510.6\r\nAvailable memory (GB): 1162.0\r\nUsed memory (GB): 247.2\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 1\r\nHas CUDA: True\r\nCUDA version: 11.3\r\ncuDNN enabled: True\r\ncuDNN version: 8200\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_52', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'compute_86']\r\nGPU 0 Name: Tesla V100-SXM3-32GB\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 80\r\nGPU 0 Total memory (GB): 31.7\r\nGPU 0 CUDA capability (maj.min): 7.0\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2140/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2116", "id": 872192301, "node_id": "MDU6SXNzdWU4NzIxOTIzMDE=", "number": 2116, "title": "Collate error on the key 'img_transforms' of dictionary data.", "user": {"login": "ambroslins", "id": 45254659, "node_id": "MDQ6VXNlcjQ1MjU0NjU5", "avatar_url": "https://avatars.githubusercontent.com/u/45254659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ambroslins", "html_url": "https://github.com/ambroslins", "followers_url": "https://api.github.com/users/ambroslins/followers", "following_url": "https://api.github.com/users/ambroslins/following{/other_user}", "gists_url": "https://api.github.com/users/ambroslins/gists{/gist_id}", "starred_url": "https://api.github.com/users/ambroslins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ambroslins/subscriptions", "organizations_url": "https://api.github.com/users/ambroslins/orgs", "repos_url": "https://api.github.com/users/ambroslins/repos", "events_url": "https://api.github.com/users/ambroslins/events{/privacy}", "received_events_url": "https://api.github.com/users/ambroslins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-30T09:05:15Z", "updated_at": "2021-05-07T12:04:08Z", "closed_at": "2021-05-07T12:04:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhile using the `CacheDataset` and multiple workers and the `persistent_workers` option for the `DataLoader` following exception is raised in the second epoch:\r\n\r\n```\r\n  File \"C:\\Users\\Ambros\\Dev\\monai-issue\\env\\lib\\site-packages\\monai\\data\\utils.py\", line 277, in list_data_collate\r\n    raise RuntimeError(re_str)\r\nRuntimeError: each element in list of batch should be of equal size\r\nCollate error on the key 'img_transforms' of dictionary data.\r\n\r\nMONAI hint: if your transforms intentionally create images of different shapes, creating your `DataLoader` with `collate_fn=pad_list_data_collate` might solve this problem (check its documentation).\r\n\r\n````\r\n[see full output](https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859#file-output-txt)\r\n\r\n\r\n**To Reproduce**\r\nI wrote a [minimal example](https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859) based on [unet_training_dict.py](https://github.com/Project-MONAI/tutorials/blob/master/3d_segmentation/torch/unet_training_dict.py) from the tutorials repository.\r\n\r\nSteps to reproduce the behavior:\r\n1. Go to  [https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859#file-unet_training_dict-py](https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859#file-unet_training_dict-py) and download `unet_training_dict.py`\r\n2. Install [environment](https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859#file-environment-txt)\r\n3. Run command: `python unet_training_dict.py`\r\n\r\n**Expected behavior**\r\nI don't expect this expection to be raised, the same code worked fine on monai version 0.4.0.\r\n\r\n\r\n**Environment**\r\n[pip freeze](https://gist.github.com/ambroslins/9b079eac659c3483c6fceba5fcee8859#file-environment-txt)\r\n```\r\n> python -c 'import monai; monai.config.print_debug_info()'\r\n================================\r\nPrinting MONAI config...\r\n================================\r\nMONAI version: 0.5.2\r\nNumpy version: 1.20.2\r\nPytorch version: 1.8.1+cu111\r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False\r\nMONAI rev id: feb3a334b7bbf302b13a6da80e0b022a4cf75a4e\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: NOT INSTALLED or UNKNOWN VERSION.\r\nNibabel version: 3.2.1\r\nscikit-image version: NOT INSTALLED or UNKNOWN VERSION.\r\nPillow version: 8.2.0\r\nTensorboard version: 2.5.0\r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: 0.9.1+cu111\r\nITK version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: 4.60.0\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: NOT INSTALLED or UNKNOWN VERSION.\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\n`psutil` required for `print_system_info`\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 1\r\nHas CUDA: True\r\nCUDA version: 11.1\r\ncuDNN enabled: True\r\ncuDNN version: 8005\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_37', 'sm_50', 'sm_60', 'sm_61', 'sm_70', 'sm_75', 'sm_80', 'sm_86', 'compute_37']\r\nGPU 0 Name: NVIDIA GeForce RTX 2070 SUPER\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 40\r\nGPU 0 Total memory (GB): 8.0\r\nGPU 0 CUDA capability (maj.min): 7.5\r\n```\r\n\r\n**Additional context**\r\nThe problem occurs only if the `CacheDataset` is used and `persistent_workers=True` for the `DataLoader`.\r\nI tried to debug the problem and set a breakpoint on [monai/data/utils.py:256](https://github.com/Project-MONAI/MONAI/blob/dev/monai/data/utils.py#L256).\r\nOn the second epoch the transforms for one of the elements in `batch` changed:\r\n![image](https://user-images.githubusercontent.com/45254659/116672956-0f83ee80-a9a3-11eb-85ff-622678dee6b7.png)\r\nI don't expect that `RandAffined` and `ToTensord` are applied twice, I think this is what causes the exception in `default_collate` but I don't know what causes the transforms to be duplicated.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2103", "id": 869393301, "node_id": "MDU6SXNzdWU4NjkzOTMzMDE=", "number": 2103, "title": "Need to deepcopy data in RandCropByPosNegLabeld transform", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-04-28T01:05:12Z", "updated_at": "2021-04-28T10:59:28Z", "closed_at": "2021-04-28T10:59:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, when we crop samples in `RandCropByPosNegLabeld` transform, it uses shallow copy for meta_data and other information, then if we change some value in a sample, all the samples are changed.\r\nNeed to use `deepcopy` for it, similar issue to the `RandSpatialCropSamplesd`.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2103/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2098", "id": 868731932, "node_id": "MDU6SXNzdWU4Njg3MzE5MzI=", "number": 2098, "title": "Running CRF layer raises CUDA error: an illegal memory access was encountered", "user": {"login": "masadcv", "id": 3410225, "node_id": "MDQ6VXNlcjM0MTAyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/3410225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masadcv", "html_url": "https://github.com/masadcv", "followers_url": "https://api.github.com/users/masadcv/followers", "following_url": "https://api.github.com/users/masadcv/following{/other_user}", "gists_url": "https://api.github.com/users/masadcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/masadcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masadcv/subscriptions", "organizations_url": "https://api.github.com/users/masadcv/orgs", "repos_url": "https://api.github.com/users/masadcv/repos", "events_url": "https://api.github.com/users/masadcv/events{/privacy}", "received_events_url": "https://api.github.com/users/masadcv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2021-04-27T11:02:25Z", "updated_at": "2023-03-16T11:00:02Z", "closed_at": "2021-05-19T21:10:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nRunning CRF layer raises \"*CUDA error: an illegal memory access was encountered*\"\r\nI am running CRF on volumetric data having probability with 2 classes. Typical input shapes for my cases are: (1, 2, 512, 512, 96) and (1, 1, 512, 512, 96). I have also tried with shapes (1, 2, 128, 128, 96) and (1, 1, 128, 128, 96) it fails with same error after a few calls (see example below).\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install using:\r\n``` \r\nBUILD_MONAI=1 pip install git+https://github.com/Project-MONAI/MONAI#egg=monai\r\n```\r\n2. Run code\r\n```\r\nimport torch\r\nimport monai\r\n\r\nprint('Pytorch version: {}'.format(torch.__version__))\r\nprint('MONAI version: {}\\n\\n'.format(monai.__version__))\r\n\r\nfrom monai.networks.blocks import CRF\r\n\r\ndevice = torch.device('cuda')\r\n\r\nprint('Total GPU memory: {}mb'.format(torch.cuda.get_device_properties(device).total_memory/(1024**2)))\r\nsh = 512\r\nin1 = torch.nn.functional.softmax(torch.rand((1, 2, sh, sh, 96)).cuda(), dim=1) # make probability\r\nin2 = torch.rand((1, 1, sh, sh, 96)).cuda()\r\nprint('Allocated memory: {}mb'.format(torch.cuda.memory_allocated(device=device)/(1024**2))) # Allocated memory: 396.0mb\r\nprint('Input shapes: {} | {}'.format(tuple(in1.shape), tuple(in2.shape)))\r\nout = CRF(3.0, 1.0, 5.0, 0.5, 5.0, 1, 5)(in1, in2) # RuntimeError: CUDA error: an illegal memory access was encountered\r\n```\r\n\r\nor run with smaller input shape multiple times as:\r\n```\r\nprint('Total GPU memory: {}mb'.format(torch.cuda.get_device_properties(device).total_memory/(1024**2)))\r\nITR = 50\r\nfor itr in range(ITR):\r\n  sh = 128\r\n  in1 = torch.nn.functional.softmax(torch.rand((1, 2, sh, sh, 96)).cuda(), dim=1) # make probability\r\n  in2 = torch.rand((1, 1, sh, sh, 96)).cuda()\r\n\r\n  print('Iteration: {}/{} | Allocated memory: {}mb'.format(itr, ITR-1, torch.cuda.memory_allocated(device=device)/(1024**2))) # Allocated memory: 30.0mb\r\n  print('Input shapes: {} | {}'.format(tuple(in1.shape), tuple(in2.shape)))\r\n  out = CRF(3.0, 1.0, 5.0, 0.5, 5.0, 1, 5)(in1, in2) # After few iterations: RuntimeError: CUDA error: an illegal memory access was encountered\r\n  \r\n  # double check to ensure memory is cleared\r\n  del in1\r\n  del in2\r\n```\r\n\r\nBoth above cases give the following error message:\r\n```\r\n/usr/local/lib/python3.7/dist-packages/monai/networks/layers/filtering.py in forward(ctx, input, features, sigmas)\r\n     91 \r\n     92         ctx.save_for_backward(scaled_features)\r\n---> 93         output_data = _C.phl_filter(input, scaled_features)\r\n     94         return output_data\r\n     95 \r\n\r\nRuntimeError: CUDA error: an illegal memory access was encountered\r\n```\r\n\r\nI have put the code along with error messages into this colab notebook:\r\nhttps://colab.research.google.com/drive/18lSBxYjZgkcPM96bponiyKutwWoUKTUu?usp=sharing\r\n\r\n**Expected behavior**\r\nIt should work with the given input shapes. It does not seem like there is a GPU out of memory issue here as both cases in the above example consume < 500mb memory on GPU. \r\n\r\n**Environment**\r\nSee: https://colab.research.google.com/drive/18lSBxYjZgkcPM96bponiyKutwWoUKTUu?usp=sharing\r\nfor complete notebook with all messages. Copied below is output of monai config:\r\n```\r\n================================\r\nPrinting system config...\r\n================================\r\nSystem: Linux\r\nLinux version: Ubuntu 18.04.5 LTS\r\nPlatform: Linux-4.19.112+-x86_64-with-Ubuntu-18.04-bionic\r\nProcessor: x86_64\r\nMachine: x86_64\r\nPython version: 3.7.10\r\nProcess name: python3\r\nCommand: ['python3', '-c', 'import monai; monai.config.print_debug_info()']\r\nOpen files: []\r\nNum physical CPUs: 1\r\nNum logical CPUs: 2\r\nNum usable CPUs: 2\r\nCPU usage (%): [26.5, 100.0]\r\nCPU freq. (MHz): UNKNOWN for given OS\r\nLoad avg. in last 1, 5, 15 mins (%): UNKNOWN for given OS\r\nDisk usage (%): 57.9\r\nAvg. sensor temp. (Celsius): UNKNOWN for given OS\r\nTotal physical memory (GB): 12.7\r\nAvailable memory (GB): 10.8\r\nUsed memory (GB): 3.1\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 1\r\nHas CUDA: True\r\nCUDA version: 10.1\r\ncuDNN enabled: True\r\ncuDNN version: 7603\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_37', 'sm_50', 'sm_60', 'sm_70']\r\nGPU 0 Name: Tesla K80\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 13\r\nGPU 0 Total memory (GB): 11.2\r\nGPU 0 CUDA capability (maj.min): 3.7\r\n```\r\n\r\n**Additional context**\r\nThe above toy example is for illustrating/reproducing the error. I first saw this error while working with real volumetric data. I have omitted those from this report as it is reproducible with/without them. \r\n\r\ncc: @charliebudd ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2098/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2095", "id": 868473356, "node_id": "MDU6SXNzdWU4Njg0NzMzNTY=", "number": 2095, "title": "ClassificationSaver can't work if ranks have different iterations", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-04-27T05:34:20Z", "updated_at": "2021-04-27T14:08:06Z", "closed_at": "2021-04-27T14:08:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, if the ranks have different iteration number, it will hang when it try to `all_gather` info from ranks.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2095/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2087", "id": 867498997, "node_id": "MDU6SXNzdWU4Njc0OTg5OTc=", "number": 2087, "title": "DeepGrow transform broken as `SpatialCrop` changed properties", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-04-26T09:42:36Z", "updated_at": "2021-04-26T15:39:15Z", "closed_at": "2021-04-26T15:39:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe CropTransform of DeepGrow app depends on the `SpatialCrop` transform, but recent PR changed it, so this line can't work anymore:\r\nhttps://github.com/Project-MONAI/MONAI/blob/master/monai/apps/deepgrow/transforms.py#L481", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2023", "id": 859756200, "node_id": "MDU6SXNzdWU4NTk3NTYyMDA=", "number": 2023, "title": "CRFTestCaseCuda test case issue", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-04-16T12:10:16Z", "updated_at": "2021-05-04T13:13:14Z", "closed_at": "2021-05-04T13:13:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\none of the test cases of `tests.test_crf_cuda.CRFTestCaseCuda` fails randomly (with a small chance)\r\n\r\n**To Reproduce**\r\nthis error \r\ne.g. CI log: https://github.com/Project-MONAI/MONAI/runs/2361733732?check_suite_focus=true#step:6:7821\r\n```\r\n======================================================================\r\nFAIL: test_2_1_batche_s_3_dimension_s_2_classe_s_1_channel_s_ (tests.test_crf_cuda.CRFTestCaseCuda)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/__w/MONAI/MONAI/tests/test_crf_cuda.py\", line 447, in test\r\n    np.testing.assert_allclose(output, expected, atol=1e-3, rtol=1e-3)\r\n  File \"/usr/local/lib/python3.6/dist-packages/numpy/testing/_private/utils.py\", line 1528, in assert_allclose\r\n    verbose=verbose, header=header, equal_nan=equal_nan)\r\n  File \"/usr/local/lib/python3.6/dist-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.001, atol=0.001\r\n\r\nMismatched elements: 63 / 250 (25.2%)\r\nMax absolute difference: 0.021\r\nMax relative difference: 0.114\r\n```\r\n\r\n**Expected behavior**\r\nno failure for this test case\r\n\r\ncc @charliebudd \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2018", "id": 859033060, "node_id": "MDU6SXNzdWU4NTkwMzMwNjA=", "number": 2018, "title": "Missing inverse for `LoadImageD` transform", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-04-15T16:08:54Z", "updated_at": "2021-04-22T00:03:13Z", "closed_at": "2021-04-22T00:03:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs the `LoadImageD` transform may convert input data and `affine` here:\r\nhttps://github.com/Project-MONAI/MONAI/blob/master/monai/data/image_reader.py#L389\r\nNeed to support inverse operations.\r\nOtherwise, we can't get proper results to compare with the input image if set `as_closest_canonical=True`.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2011", "id": 858651414, "node_id": "MDU6SXNzdWU4NTg2NTE0MTQ=", "number": 2011, "title": "Inverse of SpacingD transform can't work with SegmentationSaver resample", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-04-15T08:49:05Z", "updated_at": "2021-04-15T12:54:17Z", "closed_at": "2021-04-15T12:54:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf we set `resample=True` in the SegmentationSaver and save the inverted results of SpacingD transform, it will output a data with wrong content, seems somewhere modified `affine`.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2009", "id": 858299149, "node_id": "MDU6SXNzdWU4NTgyOTkxNDk=", "number": 2009, "title": "Duplicated records of `RandSpatialCropSamplesd` in `key_transforms` in case of preceding transforms", "user": {"login": "djoerch", "id": 3168589, "node_id": "MDQ6VXNlcjMxNjg1ODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3168589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djoerch", "html_url": "https://github.com/djoerch", "followers_url": "https://api.github.com/users/djoerch/followers", "following_url": "https://api.github.com/users/djoerch/following{/other_user}", "gists_url": "https://api.github.com/users/djoerch/gists{/gist_id}", "starred_url": "https://api.github.com/users/djoerch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djoerch/subscriptions", "organizations_url": "https://api.github.com/users/djoerch/orgs", "repos_url": "https://api.github.com/users/djoerch/repos", "events_url": "https://api.github.com/users/djoerch/events{/privacy}", "received_events_url": "https://api.github.com/users/djoerch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-04-14T22:03:08Z", "updated_at": "2021-04-21T21:42:54Z", "closed_at": "2021-04-21T21:42:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWhen using `RandSpatialCropSamplesd` in a transform chain in a dataset the record of transforms (`key_transforms`) of a single output patch differs depending on whether another transform has been called before or not.\r\n\r\n**To Reproduce**\r\n```\r\nimport numpy as np\r\n\r\nfrom monai.data import Dataset\r\nfrom monai.transforms import RandSpatialCropSamplesd, Compose, ToTensord, DeleteItemsd\r\nfrom monai.utils import first\r\n\r\nsz = (1, 10, 11, 12)\r\nsamples_per_img = 3\r\n\r\nlist_of_data = [dict(img=np.ones(sz), label='a')] * 100\r\n\r\nsampler = RandSpatialCropSamplesd(\r\n    keys=[\"img\"],\r\n    roi_size=(3, 3, 3),\r\n    num_samples=samples_per_img,\r\n    random_center=True,\r\n    random_size=False,\r\n)\r\n\r\ntrafo_chains = [\r\n    [ToTensord(keys=\"img\"), sampler],\r\n    [sampler],\r\n    [ToTensord(keys=\"img\"), DeleteItemsd(keys=\"img_transforms\"), sampler]\r\n]\r\n\r\nfor trafo_chain in trafo_chains:\r\n    ds = Dataset(data=list_of_data, transform=Compose(trafo_chain))\r\n    sample = first(ds)\r\n    print([d[\"class\"] for d in sample[0][\"img_transforms\"]])\r\n\r\n```\r\n\r\nThe output I got from this is:\r\n```\r\n['ToTensord', 'RandSpatialCropd', 'RandSpatialCropd', 'RandSpatialCropd']\r\n['RandSpatialCropd']\r\n['RandSpatialCropd']\r\n```\r\n\r\n**Expected behavior**\r\nI would expect that the `RandSpatialCropSamplesd` appears only once in the record `key_transforms` if it is applied only once to create the patch. Or do I misunderstand the use of this transform?\r\n\r\n**Environment**\r\n\r\n```\r\n================================                                                                                                                                                                 \r\nPrinting MONAI config...                                                                                                                                                                         \r\n================================                                                                                                                                                                 \r\nMONAI version: 0.5.0                                                                                                                                                                             \r\nNumpy version: 1.18.5                                                                                                                                                                            \r\nPytorch version: 1.7.1                                                                                                                                                                           \r\nMONAI flags: HAS_EXT = False, USE_COMPILED = False                                                                                                                                               \r\nMONAI rev id: 2707407fed8c78ccb1c18d1e994a68580457219e                                                                                                                                           \r\n                                                                                                                                                                                                 \r\nOptional dependencies:                                                                                                                                                                           \r\nPytorch Ignite version: 0.4.4                                                                                                                                                                    \r\nNibabel version: 3.2.1                                                                                                                                                                           \r\nscikit-image version: 0.17.2                                                                                                                                                                     \r\nPillow version: 8.2.0                                                                                                                                                                            \r\nTensorboard version: 2.4.1                                                                                                                                                                       \r\ngdown version: NOT INSTALLED or UNKNOWN VERSION.\r\nTorchVision version: 0.8.2\r\nITK version: NOT INSTALLED or UNKNOWN VERSION.\r\ntqdm version: 4.60.0\r\nlmdb version: NOT INSTALLED or UNKNOWN VERSION.\r\npsutil version: NOT INSTALLED or UNKNOWN VERSION.\r\n\r\nFor details about installing the optional dependencies, please visit:\r\n    https://docs.monai.io/en/latest/installation.html#installing-the-recommended-dependencies\r\n\r\n\r\n================================\r\nPrinting system config...\r\n================================\r\n`psutil` required for `print_system_info`\r\n\r\n================================\r\nPrinting GPU config...\r\n================================\r\nNum GPUs: 2\r\nHas CUDA: True\r\nCUDA version: 10.2\r\ncuDNN enabled: True\r\ncuDNN version: 7605\r\nCurrent device: 0\r\nLibrary compiled for CUDA architectures: ['sm_37', 'sm_50', 'sm_60', 'sm_70', 'sm_75']\r\nGPU 0 Name: GeForce RTX 2070 SUPER\r\nGPU 0 Is integrated: False\r\nGPU 0 Is multi GPU board: False\r\nGPU 0 Multi processor count: 40\r\nGPU 0 Total memory (GB): 7.8\r\nGPU 0 Cached memory (GB): 0.0\r\nGPU 0 Allocated memory (GB): 0.0\r\nGPU 0 CUDA capability (maj.min): 7.5\r\nGPU 1 Name: GeForce RTX 2070 SUPER\r\nGPU 1 Is integrated: False\r\nGPU 1 Is multi GPU board: False\r\nGPU 1 Multi processor count: 40\r\nGPU 1 Total memory (GB): 7.8\r\nGPU 1 Cached memory (GB): 0.0\r\nGPU 1 Allocated memory (GB): 0.0\r\nGPU 1 CUDA capability (maj.min): 7.5\r\n```\r\n\r\n**Additional context**\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/5f47407416c8391d9267efb4d7fe5275697374aa/monai/transforms/croppad/dictionary.py#L537-L539\r\n\r\nIt could be that the cause of this is in the code snippet below where the incoming dict is shallow-copied which results in the list types (e.g. `key_transforms`) to be shared among all copies of `d`.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2009/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/2007", "id": 857829325, "node_id": "MDU6SXNzdWU4NTc4MjkzMjU=", "number": 2007, "title": "MapLabelValue is incorrect when mapping strings", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-04-14T12:03:26Z", "updated_at": "2021-04-14T17:33:06Z", "closed_at": "2021-04-14T17:33:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nthe issue is mainly with the string mapping\r\n\r\n**To Reproduce**\r\n```py\r\nfrom monai.transforms import MapLabelValue\r\nxform = MapLabelValue([\"label3\", \"label2\", \"label1\"], [\"label3\", \"label2\", \"label1\"])\r\nxform([[\"label3\", \"label1\"], [\"label1\", \"label2\"]])\r\n```\r\noutput:\r\n```\r\narray([[0., 0.],\r\n       [0., 0.]], dtype=float32)\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/2007/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1979", "id": 853706748, "node_id": "MDU6SXNzdWU4NTM3MDY3NDg=", "number": 1979, "title": "TestTimeAugmentation assumes label is present", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-04-08T17:48:34Z", "updated_at": "2021-07-26T02:05:10Z", "closed_at": "2021-07-26T02:05:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nDuring training/testing/validation, ground truth labels are often present. However, at deployment only the image will be present. The way TTA is currently set up assumes that both image and label are present, which needs to be modified.\r\n\r\ncc @diazandr3s ", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1979/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1960", "id": 852038721, "node_id": "MDU6SXNzdWU4NTIwMzg3MjE=", "number": 1960, "title": "Always print warning message about min_package", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-04-07T06:00:13Z", "updated_at": "2021-04-07T14:59:08Z", "closed_at": "2021-04-07T14:59:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n/opt/monai/monai/utils/module.py:100: UserWarning: <module 'pkg_resources' from '/opt/conda/lib/python3.8/site-packages/pkg_resources/__init__.py'> has no attribute __version__ in min_version check.\r\n  warnings.warn(f\"{the_module} has no attribute __version__ in min_version check.\")\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1955", "id": 851396568, "node_id": "MDU6SXNzdWU4NTEzOTY1Njg=", "number": 1955, "title": "style issue with readthedocs", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-04-06T12:56:08Z", "updated_at": "2021-04-07T07:26:20Z", "closed_at": "2021-04-07T07:26:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "part of #1889 \r\n\r\nthe current build's style isn't quite right:\r\n![Screenshot 2021-04-06 at 13 55 00](https://user-images.githubusercontent.com/831580/113713849-b09ec280-96df-11eb-8733-19e88b97d3bc.png)\r\n\r\nthe expected style is something like that in v0.4:\r\n![Screenshot 2021-04-06 at 13 55 31](https://user-images.githubusercontent.com/831580/113713895-c1e7cf00-96df-11eb-9bd4-a6bcdcad69d1.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1955/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1905", "id": 846359007, "node_id": "MDU6SXNzdWU4NDYzNTkwMDc=", "number": 1905, "title": "ConvertToMultiChannelBasedOnBratsClasses should support channel first input", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-03-31T10:16:12Z", "updated_at": "2021-03-31T12:39:53Z", "closed_at": "2021-03-31T12:39:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nCurrently, `ConvertToMultiChannelBasedOnBratsClasses` transform expects the input data has no channel dim, should also support channel-first data.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1902", "id": 844358665, "node_id": "MDU6SXNzdWU4NDQzNTg2NjU=", "number": 1902, "title": "Problem with pip install monai and monai-weekly", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-03-30T10:44:30Z", "updated_at": "2022-03-17T23:30:20Z", "closed_at": "2022-03-17T23:30:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere seem to be some confusing things going on with `pip install monai` and `pip install monai-weekly`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior (monai installed first):\r\n1. Fresh python venv\r\n2. pip install monai monai-weekly\r\n3. python -c \"import monai\"\r\n\r\nError:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/__init__.py\", line 46, in <module>\r\n    load_submodules(sys.modules[__name__], True, exclude_pattern=excludes)\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/utils/module.py\", line 75, in load_submodules\r\n    mod = import_module(name)\r\n  File \"/home/rbrown/.conda/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/data/nifti_reader.py\", line 17, in <module>\r\n    from monai.transforms import LoadNifti, Randomizable, apply_transform\r\nImportError: cannot import name 'LoadNifti' from 'monai.transforms' (/home/rbrown/.conda/lib/python3.8/site-packages/monai/transforms/__init__.py)\r\n```\r\n\r\nSteps to reproduce the behavior (monai-weekly installed first):\r\n1. Fresh python venv\r\n2. pip install monai-weekly monai\r\n3. python -c \"import monai\"\r\n\r\nError:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/__init__.py\", line 43, in <module>\r\n    load_submodules(sys.modules[__name__], False, exclude_pattern=excludes)\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/utils/module.py\", line 75, in load_submodules\r\n    mod = import_module(name)\r\n  File \"/home/rbrown/.conda/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/apps/pathology/__init__.py\", line 12, in <module>\r\n    from .datasets import PatchWSIDataset, SmartCacheDataset\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/monai/apps/pathology/datasets.py\", line 18, in <module>\r\n    from monai.data.image_reader import WSIReader\r\nImportError: cannot import name 'WSIReader' from 'monai.data.image_reader' (/home/rbrown/.conda/lib/python3.8/site-packages/monai/data/image_reader.py)\r\n```\r\n\r\nIt seems the two are treated as two separate packages but installed on top of each other, causing conflicts.\r\n\r\nI think if we solve this we can also simplify the `python -c \"import monai\" || pip install monai-weekly` back to how it was previously (`%pip install monai-weekly`), which will improve readability.\r\n\r\nWould it be possible to remove `monai-weekly` and enable something like this: `pip install monai==weekly`? In that fashion we would only have one repository so the problem would have to resolve itself.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1862", "id": 841855328, "node_id": "MDU6SXNzdWU4NDE4NTUzMjg=", "number": 1862, "title": "Checkpoint handler save files with wrong permissions", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-03-26T11:25:55Z", "updated_at": "2021-03-26T17:22:55Z", "closed_at": "2021-03-26T17:22:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWe always run programs in dockers, usually it's root user, and found an issue that: pure PyTorch program saves model(torch.save) and has the read permission for non-root users, but ignite Checkpoint handler saves model and only has read permission for root users.\r\nReproduce this issue by below 2 MONAI examples:\r\n1. https://github.com/Project-MONAI/tutorials/blob/master/3d_segmentation/torch/unet_training_dict.py\r\nThe saved model will be:\r\n```\r\n-rw-r--r-- 1 root root 19253862 Mar 26 02:08 best_metric_model_segmentation3d_dict.pth\r\n```\r\n2. https://github.com/Project-MONAI/tutorials/blob/master/3d_segmentation/ignite/unet_training_dict.py\r\nThe saved model will be:\r\n```\r\n-rw------- 1 root root 57738580 Mar 26 01:54 net_checkpoint_50.pt\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1862/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1857", "id": 841679914, "node_id": "MDU6SXNzdWU4NDE2Nzk5MTQ=", "number": 1857, "title": "randelastic2d on gpu is broken", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-03-26T07:38:06Z", "updated_at": "2021-03-26T09:36:09Z", "closed_at": "2021-03-26T09:36:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nfrom transforms_demo_2d tutorial:\r\n```python\r\n# create an elsatic deformation transform\r\ndeform = Rand2DElastic(\r\n    prob=1.0,\r\n    spacing=(30, 30),\r\n    magnitude_range=(5, 6),\r\n    rotate_range=(np.pi / 4,),\r\n    scale_range=(0.2, 0.2),\r\n    translate_range=(100, 100),\r\n    padding_mode=\"zeros\",\r\n    device=torch.device(\"cuda:0\"),\r\n)\r\n# transform both image and segmentation using different interpolation mode\r\ndeform.set_random_state(seed=123)\r\nnew_img = deform(im_data, (224, 224), mode=\"bilinear\")\r\n```\r\nresult:\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-10-44c62f7490ae> in <module>()\r\n     12 # transform both image and segmentation using different interpolation mode\r\n     13 deform.set_random_state(seed=123)\r\n---> 14 new_img = deform(im_data, (224, 224), mode=\"bilinear\")\r\n     15 deform.set_random_state(seed=123)\r\n     16 new_seg = deform(seg_data, (224, 224), mode=\"nearest\")\r\n\r\n2 frames\r\n/usr/local/lib/python3.7/dist-packages/monai/transforms/spatial/array.py in __call__(self, img, spatial_size, mode, padding_mode)\r\n   1564                 align_corners=False,\r\n   1565             )\r\n-> 1566             grid = CenterSpatialCrop(roi_size=sp_size)(np.asarray(grid[0]))\r\n   1567         else:\r\n   1568             grid = create_grid(spatial_size=sp_size)\r\n\r\n/usr/local/lib/python3.7/dist-packages/numpy/core/_asarray.py in asarray(a, dtype, order)\r\n     81 \r\n     82     \"\"\"\r\n---> 83     return array(a, dtype, copy=False, order=order)\r\n     84 \r\n     85 \r\n\r\n/usr/local/lib/python3.7/dist-packages/torch/tensor.py in __array__(self, dtype)\r\n    619             return handle_torch_function(Tensor.__array__, (self,), self, dtype=dtype)\r\n    620         if dtype is None:\r\n--> 621             return self.numpy()\r\n    622         else:\r\n    623             return self.numpy().astype(dtype, copy=False)\r\n\r\nTypeError: can't convert cuda:0 device type tensor to numpy. Use Tensor.cpu() to copy the tensor to host memory first.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1857/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1852", "id": 841339761, "node_id": "MDU6SXNzdWU4NDEzMzk3NjE=", "number": 1852, "title": "SmartCache is not working in Clara Train", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-03-25T21:48:26Z", "updated_at": "2021-03-26T06:34:38Z", "closed_at": "2021-03-26T06:34:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n`SmartCache` is not working when used in an MMAR of Clara Train despite using `SmartCacheHandler` as the first handler.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Take a Clara Train MMAR\r\n2. Use `SmartCachePatchWSIDataset` as the dataset.\r\n3. Run MMAR\r\n\r\n**Additional context**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/opt/conda/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/workspace/clara-train/pt/src/medl/apps/train.py\", line 35, in <module>\r\n    main()\r\n  File \"/workspace/clara-train/pt/src/medl/apps/train.py\", line 27, in main\r\n    train_mmar(args)\r\n  File \"/workspace/clara-train/pt/src/medl/apps/mmar_conf.py\", line 28, in train_mmar\r\n    trainer.run()\r\n  File \"/workspace/monai/monai/engines/trainer.py\", line 48, in run\r\n    super().run()\r\n  File \"/workspace/monai/monai/engines/workflow.py\", line 197, in run\r\n    super().run(data=self.data_loader, max_epochs=self.state.max_epochs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 702, in run\r\n    return self._internal_run()\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 775, in _internal_run\r\n    self._handle_exception(e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 467, in _handle_exception\r\n    self._fire_event(Events.EXCEPTION_RAISED, e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 424, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/workspace/monai/monai/handlers/checkpoint_saver.py\", line 274, in exception_raised\r\n    raise e\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 745, in _internal_run\r\n    time_taken = self._run_once_on_dataset()\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 850, in _run_once_on_dataset\r\n    self._handle_exception(e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 467, in _handle_exception\r\n    self._fire_event(Events.EXCEPTION_RAISED, e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 424, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/workspace/monai/monai/handlers/checkpoint_saver.py\", line 274, in exception_raised\r\n    raise e\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 801, in _run_once_on_dataset\r\n    self.state.batch = next(self._dataloader_iter)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 519, in __next__\r\n    data = self._next_data()\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 1169, in _next_data\r\n    return self._process_data(data)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/dataloader.py\", line 1195, in _process_data\r\n    data.reraise()\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/_utils.py\", line 428, in reraise\r\n    raise self.exc_type(msg)\r\nRuntimeError: Caught RuntimeError in DataLoader worker process 0.\r\nOriginal Traceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/worker.py\", line 202, in _worker_loop\r\n    data = fetcher.fetch(index)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in fetch\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/utils/data/_utils/fetch.py\", line 44, in <listcomp>\r\n    data = [self.dataset[idx] for idx in possibly_batched_index]\r\n  File \"/workspace/monai/monai/data/dataset.py\", line 809, in __getitem__\r\n    raise RuntimeError(\r\nRuntimeError: if using MONAI workflows, please add `SmartCacheHandler` to the handler list of trainer,otherwise, please make sure to call `start()`, `update_cache()`, `shutdown()` during training.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1827", "id": 838516637, "node_id": "MDU6SXNzdWU4Mzg1MTY2Mzc=", "number": 1827, "title": "AffineGrid GPU tensor error", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-03-23T09:19:48Z", "updated_at": "2021-03-25T14:35:39Z", "closed_at": "2021-03-25T14:35:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\na transform error from `AffineGrid` when running tutorial `transforms_demo_2d`\r\nfull logs: https://github.com/Project-MONAI/MONAI/runs/2172199805?check_suite_focus=true\r\n\r\n```\r\nRunning ./modules/transforms_demo_2d.ipynb\r\nChecking PEP8 compliance...\r\nRunning notebook...\r\n\r\nExecuting:   0%|          | 0/20 [00:00<?, ?cell/s]\r\nExecuting:   5%|\u258c         | 1/20 [00:01<00:22,  1.18s/cell]\r\nExecuting:  15%|\u2588\u258c        | 3/20 [00:06<00:26,  1.58s/cell]\r\nExecuting:  20%|\u2588\u2588        | 4/20 [00:08<00:28,  1.78s/cell]\r\nExecuting:  50%|\u2588\u2588\u2588\u2588\u2588     | 10/20 [00:26<00:21,  2.15s/cell]\r\nExecuting:  60%|\u2588\u2588\u2588\u2588\u2588\u2588    | 12/20 [00:26<00:12,  1.56s/cell]\r\nExecuting:  70%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588   | 14/20 [00:29<00:09,  1.53s/cell]\r\nExecuting:  70%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588   | 14/20 [00:31<00:13,  2.23s/cell]\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/papermill\", line 8, in <module>\r\n    sys.exit(papermill())\r\n  File \"/opt/conda/lib/python3.8/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/conda/lib/python3.8/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/conda/lib/python3.8/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/papermill/cli.py\", line 250, in papermill\r\n    execute_notebook(\r\n  File \"/opt/conda/lib/python3.8/site-packages/papermill/execute.py\", line 122, in execute_notebook\r\n    raise_for_execution_errors(nb, output_path)\r\n  File \"/opt/conda/lib/python3.8/site-packages/papermill/execute.py\", line 234, in raise_for_execution_errors\r\n    raise error\r\npapermill.exceptions.PapermillExecutionError: \r\n---------------------------------------------------------------------------\r\nException encountered at \"In [8]\":\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-8-63f386481380> in <module>\r\n     13 # convert both image and segmentation using different interpolation mode\r\n     14 new_img = affine(im_data, (300, 400), mode=\"bilinear\")\r\n---> 15 new_seg = affine(seg_data, (300, 400), mode=\"nearest\")\r\n     16 print(new_img.shape, new_seg.shape)\r\n\r\n/__w/MONAI/MONAI/monai/transforms/spatial/array.py in __call__(self, img, spatial_size, mode, padding_mode)\r\n   1327         \"\"\"\r\n   1328         sp_size = fall_back_tuple(spatial_size or self.spatial_size, img.shape[1:])\r\n-> 1329         grid = self.affine_grid(spatial_size=sp_size)\r\n   1330         return self.resampler(\r\n   1331             img=img, grid=grid, mode=mode or self.mode, padding_mode=padding_mode or self.padding_mode\r\n\r\n/__w/MONAI/MONAI/monai/transforms/spatial/array.py in __call__(self, spatial_size, grid)\r\n    991             self.affine = affine\r\n    992 \r\n--> 993         self.affine = torch.as_tensor(np.ascontiguousarray(self.affine), device=self.device)\r\n    994 \r\n    995         grid = torch.tensor(grid) if not isinstance(grid, torch.Tensor) else grid.detach().clone()\r\n\r\n/opt/conda/lib/python3.8/site-packages/numpy/core/_asarray.py in ascontiguousarray(a, dtype)\r\n    175 \r\n    176     \"\"\"\r\n--> 177     return array(a, dtype, copy=False, order='C', ndmin=1)\r\n    178 \r\n    179 \r\n\r\n/opt/conda/lib/python3.8/site-packages/torch/tensor.py in __array__(self, dtype)\r\n    599             return handle_torch_function(Tensor.__array__, (self,), self, dtype=dtype)\r\n    600         if dtype is None:\r\n--> 601             return self.numpy()\r\n    602         else:\r\n    603             return self.numpy().astype(dtype, copy=False)\r\n\r\nTypeError: can't convert cuda:0 device type tensor to numpy. Use Tensor.cpu() to copy the tensor to host memory first.\r\n```\r\n\r\ncontext:\r\nhttps://github.com/Project-MONAI/MONAI/blob/c4bb4cbf3bb4f476d0b84ae9698321d897faa58e/monai/transforms/spatial/array.py#L993", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/1824", "id": 837932942, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk4MTkzNTQ3", "number": 1824, "title": "[1823] allow None for switch endianness", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-22T17:08:01Z", "updated_at": "2021-05-04T10:44:09Z", "closed_at": "2021-03-22T21:42:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/1824", "html_url": "https://github.com/Project-MONAI/MONAI/pull/1824", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/1824.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/1824.patch", "merged_at": "2021-03-22T21:42:42Z"}, "body": "Fixes https://github.com/Project-MONAI/MONAI/issues/1823.\r\n\r\n### Description\r\nAllow None as type for switching endianness. Also improve print statement for previously unseen data types.\r\n\r\n### Status\r\n**Ready**\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [x] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [x] Quick tests passed locally by running `./runtests.sh --quick --unittests`.\r\n- [x] In-line docstrings updated.\r\n- [x] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1824/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801/events", "html_url": "https://github.com/Project-MONAI/MONAI/pull/1801", "id": 834643826, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk1NDE5NjM3", "number": 1801, "title": "[1798] fix RandZoomd collation", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-03-18T10:47:39Z", "updated_at": "2021-03-18T21:09:38Z", "closed_at": "2021-03-18T19:21:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/pulls/1801", "html_url": "https://github.com/Project-MONAI/MONAI/pull/1801", "diff_url": "https://github.com/Project-MONAI/MONAI/pull/1801.diff", "patch_url": "https://github.com/Project-MONAI/MONAI/pull/1801.patch", "merged_at": "2021-03-18T19:21:17Z"}, "body": "Fixes https://github.com/Project-MONAI/MONAI/issues/1798.\r\n\r\n### Description\r\n`self._zoom` was handled differently depending on `self._do_transform`. Modified to be the same, such that they can be collated together. \r\n\r\nAlso add testing for all invertible random transforms.\r\n\r\n### Status\r\n**Ready**\r\n\r\n### Types of changes\r\n<!--- Put an `x` in all the boxes that apply, and remove the not applicable items -->\r\n- [x] Non-breaking change (fix or new feature that would not break existing functionality).\r\n- [x] New tests added to cover the changes.\r\n- [x] Integration tests passed locally by running `./runtests.sh -f -u --net --coverage`.\r\n- [x] Quick tests passed locally by running `./runtests.sh --quick --unittests`.\r\n- [x] Documentation updated, tested `make html` command in the `docs/` folder.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1801/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1710", "id": 824331032, "node_id": "MDU6SXNzdWU4MjQzMzEwMzI=", "number": 1710, "title": "GradCam giving inconsistent results", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-03-08T08:46:47Z", "updated_at": "2021-03-10T10:57:30Z", "closed_at": "2021-03-10T10:57:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen GradCam is called with `class_idx=None`, it should use the index of the class inferred by the network. If the network correctly classifies the image, the result should therefore be the same as `class_idx=y_true`. However, this is being reported as not being the case ([link](https://github.com/Project-MONAI/MONAI/discussions/1604#discussioncomment-435580_)). Seems to be a bug introduced since 0.4.0.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1710/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1688", "id": 821979844, "node_id": "MDU6SXNzdWU4MjE5Nzk4NDQ=", "number": 1688, "title": "Senet pretrained weights issue", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-03-04T10:13:46Z", "updated_at": "2021-03-04T12:35:54Z", "closed_at": "2021-03-04T12:35:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn #1120 , some layer names in  `Convolution` class have changed which lead to loading pre-trained weights unsuccessfully for Senet.\r\n\r\nI'll submit a PR to fix this issue, and add the consistency test case to prevent the same issues in the future.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1650", "id": 816650163, "node_id": "MDU6SXNzdWU4MTY2NTAxNjM=", "number": 1650, "title": "test_distributed_sampler not working (and not exiting)", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-25T17:37:22Z", "updated_at": "2021-02-25T23:58:30Z", "closed_at": "2021-02-25T23:58:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n`./runtests.sh --quick` (and more specifically `python tests/test_distributed_sampler.py`) is displays error, but doesn't exit and hangs there permanently.\r\n\r\nError is: \r\n\r\n```bash\r\n(base) rbrown@rb-monai-0:~/MONAI$ python tests/test_distributed_sampler.py \r\nProcess Process-2:\r\nTraceback (most recent call last):\r\n  File \"/home/rbrown/MONAI/tests/utils.py\", line 285, in run_process\r\n    raise e\r\n  File \"/home/rbrown/MONAI/tests/utils.py\", line 272, in run_process\r\n    torch.cuda.set_device(int(local_rank))\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/torch/cuda/__init__.py\", line 263, in set_device\r\n    torch._C._cuda_setDevice(device)\r\nRuntimeError: CUDA error: invalid device ordinal\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/rbrown/.conda/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\r\n    self.run()\r\n  File \"/home/rbrown/.conda/lib/python3.8/multiprocessing/process.py\", line 108, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/rbrown/MONAI/tests/utils.py\", line 289, in run_process\r\n    dist.destroy_process_group()\r\n  File \"/home/rbrown/.conda/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py\", line 573, in destroy_process_group\r\n    raise RuntimeError(\"Invalid process group specified\")\r\nRuntimeError: Invalid process group specified\r\n```\r\n\r\nMy guess is that it's because I only have 1 GPU, yet it's trying to use devices 0 and 1, but that's just a guess. The test works fine on my local machine -- it doesn't have cuda so it doesn't arrive in the problematic statement:\r\n\r\n```python\r\nif torch.cuda.is_available():\r\n    torch.cuda.set_device(int(local_rank))\r\n```\r\n\r\nIt seems to me that there are two problems:\r\n\r\n1. that it's not working\r\n2. that it's not exiting when the error is printed.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1633", "id": 815437557, "node_id": "MDU6SXNzdWU4MTU0Mzc1NTc=", "number": 1633, "title": "MetricsSaver Bug when filename is long", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2021-02-24T12:35:38Z", "updated_at": "2021-02-25T18:53:16Z", "closed_at": "2021-02-25T18:53:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using the `MetricsSaver` handler, a list of filenames will be joined as a string first (see [here](https://github.com/Project-MONAI/MONAI/blob/master/monai/handlers/metrics_saver.py#L111)), and then send to write the metric report.\r\n\r\nIn distributed mode, the way to join all filenames into a string is directly connect all filenames by the setted delimiter (see [here](https://github.com/Project-MONAI/MONAI/blob/db2dbb07379e3dff47777fef8c9ac66671457916/monai/handlers/utils.py#L88)), and all filenames need to be gathered via ignite's `all_gather` function first. However, this method has a limitation that if the length of the string to be gathered is larger than 1024, the string will be truncated and only keep the first 1024 characters (the ignite source code of this function is in [here](https://github.com/pytorch/ignite/blob/master/ignite/distributed/comp_models/base.py#L90)).\r\n\r\nTherefore, if the filename string is truncated, the number of metrics will be different from the number of filenames.\r\n\r\nIt is usual to get a larger than 1024 length string, for instance, a filename on my current working dataset is:\r\n`'/workspace/data/medical/Task04_Hippocampus/imagesTr/hippocampus_033.nii.gz'` that has the length 74, thus more than 14 samples will introduce the bug.\r\n\r\nHi @Nic-Ma @wyli , we may need to modify the metric saving way, and avoid gathering the string (tensor or float types do not have the limitation, see [here](https://github.com/pytorch/ignite/blob/master/ignite/distributed/comp_models/base.py#L142)). What do you think?\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1618", "id": 814286072, "node_id": "MDU6SXNzdWU4MTQyODYwNzI=", "number": 1618, "title": "pip install failed \"in get_topological_weights assert len(weights) == len(graph)\"", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-23T09:39:56Z", "updated_at": "2021-02-23T14:40:06Z", "closed_at": "2021-02-23T14:40:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nthe pip install command in Dockerfile failed due to the recent [base image upgrade](https://github.com/Project-MONAI/MONAI/pull/1613)\r\n\r\nlooks like an issue from https://github.com/pypa/pip/issues/9031\r\n\r\nhttps://github.com/Project-MONAI/MONAI/runs/1959756220?check_suite_focus=true#step:3:233\r\n```\r\n...\r\nsha256=552bd3a0ebe95e88c50727a6d5dbaa719f90311ff30b201af1422562c0efece3\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-s8fybs4_/wheels/e2/62/1e/926d1ebe7b1e733c78d627fd288d01b83feaf67efc06e0e4c3\r\n  Building wheel for black (PEP 517): started\r\n  Building wheel for black (PEP 517): finished with status 'done'\r\n  Created wheel for black: filename=black-20.8b1-py3-none-any.whl size=124184 sha256=2cfc4a1b33dd13c2f5a08176f5321114a91c6e92f00f6d74518237f08aee5147\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-s8fybs4_/wheels/95/a4/59/10cd5378d52f92cdb45025f040e4686e10ae5217961c25fd66\r\n  Building wheel for importlab (setup.py): started\r\n  Building wheel for importlab (setup.py): finished with status 'done'\r\n  Created wheel for importlab: filename=importlab-0.6.1-py2.py3-none-any.whl size=21290 sha256=0c4557ade6aee44d4bc41ccce04cf8246076d7e313d6f4c57233a489b1bf8e4b\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-s8fybs4_/wheels/cb/48/e1/ec5e64d1c678795cfeefb5ebde5eb7260c044ee3322ec151b8\r\nSuccessfully built gdown black importlab\r\nERROR: Exception:\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/pip/_internal/cli/base_command.py\", line 228, in _main\r\n    status = self.run(options, args)\r\n  File \"/opt/conda/lib/python3.8/site-packages/pip/_internal/cli/req_command.py\", line 182, in wrapper\r\n    return func(self, options, args)\r\n  File \"/opt/conda/lib/python3.8/site-packages/pip/_internal/commands/install.py\", line 378, in run\r\n    to_install = resolver.get_installation_order(\r\n  File \"/opt/conda/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/resolver.py\", line 191, in get_installation_order\r\n    weights = get_topological_weights(graph)\r\n  File \"/opt/conda/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/resolver.py\", line 242, in get_topological_weights\r\n    assert len(weights) == len(graph)\r\nAssertionError\r\nThe command '/bin/sh -c cp /tmp/requirements.txt /tmp/req.bak   && awk '!/torch/' /tmp/requirements.txt > /tmp/tmp && mv /tmp/tmp /tmp/requirements.txt   && python -m pip install --no-cache-dir --use-feature=2020-resolver -r /tmp/requirements-dev.txt' returned a non-zero code: 2\r\n```\r\n**To Reproduce**\r\nrun these commands locally\r\nhttps://github.com/Project-MONAI/MONAI/blob/75b78cd165362fb2b84f4d1fd242a83a7bd82318/Dockerfile#L22\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1576", "id": 805390500, "node_id": "MDU6SXNzdWU4MDUzOTA1MDA=", "number": 1576, "title": "Transforms with random size incompatible with default collater of data loader", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-10T10:38:17Z", "updated_at": "2021-02-25T11:48:34Z", "closed_at": "2021-02-25T11:48:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nTransforms that produce images of variable size are incompatible with default collator, since this expects all images to be the same size.\r\n\r\nExamples that I've found so far are (I guess same would apply to array versions)):\r\n- `RandSpatialCropd` (with `random_size==True`)\r\n- `RandRotated` (with `keep_size==False`)\r\n- `RandZoomd` (with `keep_size==False`)\r\n- `RandRotate90d` (if input wasn't square/cubic)\r\n\r\nYou wouldn't see this problem if you a) specify some custom collator, or b) followed up these transforms with other transforms that unified image shape (e.g., `SpatialPadd`). I can't imagine many people do the former, and for the latter I don't see the utility of allowing the image size to change if you are then going to crop/pad back to a fixed size. \r\n\r\nUnless I've mistaken something, I suggest removing functionality that could result in images inside the same batch having different sizes.\r\n\r\n**To Reproduce**\r\n```python\r\nimport numpy as np\r\nfrom monai.data import CacheDataset, DataLoader\r\nfrom monai.transforms import RandSpatialCropd, RandRotated\r\n\r\nim = np.arange(0, 10 * 9).reshape(1, 10, 9)\r\ndata = [{\"image\": im} for _ in range(2)]\r\n\r\n# alternate commenting these two lines\r\ntransform = RandSpatialCropd(\"image\", roi_size=[8, 7], random_size=True)\r\ntransform = RandRotated(\"image\", prob=1, range_x=np.pi, keep_size=False)\r\n\r\ndataset = CacheDataset(data, transform)\r\nloader = DataLoader(dataset, batch_size=2)\r\nfor _ in loader:\r\n    pass\r\n```\r\n\r\nExample error:\r\n```\r\nstack expects each tensor to be equal size, but got [1, 13, 13] at entry 0 and [1, 10, 11] at entry 1\r\n  File \"/Users/rich/Documents/Code/MONAI/monai/data/utils.py\", line 245, in list_data_collate\r\n    return default_collate(data)\r\n  File \"/Users/rich/Desktop/text.py\", line 14, in <module>\r\n    for _ in loader:\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1576/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1570", "id": 804145138, "node_id": "MDU6SXNzdWU4MDQxNDUxMzg=", "number": 1570, "title": "Classification can't work in distributed data parallel if has rich meta data", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-09T02:40:14Z", "updated_at": "2021-02-09T12:32:10Z", "closed_at": "2021-02-09T12:32:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen evaluate on nifti data, the meta data is very rich, and we only `all_gather` the file names.\r\nIt will cause the length of other meta data can't match model output:\r\n```\r\n2021-02-09 02:12:24,253 - ignite.engine.engine.SupervisedEvaluator - INFO - Engine run resuming from iteration 0, epoch 0 until 1 epochs\r\n2021-02-09 02:12:24,436 - ignite.engine.engine.SupervisedEvaluator - INFO - Restored all variables from /home/madil/dlmed/problems/pt_mmars/classification_chestxray_ea2/commands/../models/model.pt\r\n2021-02-09 02:12:29,927 - ignite.engine.engine.SupervisedEvaluator - ERROR - Current run is terminating due to exception: list index out of range.\r\n2021-02-09 02:12:29,928 - ignite.engine.engine.SupervisedEvaluator - ERROR - Exception: list index out of range\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.6/site-packages/ignite/engine/engine.py\", line 812, in _run_once_on_dataset\r\n    self._fire_event(Events.ITERATION_COMPLETED)\r\n  File \"/opt/conda/lib/python3.6/site-packages/ignite/engine/engine.py\", line 423, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/opt/monai/monai/handlers/classification_saver.py\", line 97, in __call__\r\n    self.saver.save_batch(_engine_output, _meta_data)\r\n  File \"/opt/monai/monai/data/csv_saver.py\", line 95, in save_batch\r\n    self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\r\n  File \"/opt/monai/monai/data/csv_saver.py\", line 95, in <dictcomp>\r\n    self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\r\nIndexError: list index out of range\r\n```\r\n\r\n**Expected behavior**\r\nOnly save file names in the meta data and call CSV saver.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1564", "id": 803446001, "node_id": "MDU6SXNzdWU4MDM0NDYwMDE=", "number": 1564, "title": "DynUnet get_feature_maps() issue when using distributed training", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2021-02-08T10:57:03Z", "updated_at": "2021-02-19T16:39:00Z", "closed_at": "2021-02-19T16:39:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf we use `DistributedDataParallel` to wrap the network, calling the 'get_feature_maps' function will raise the following error:\r\n\r\n![Screen Shot 2021-02-08 at 6 51 01 PM](https://user-images.githubusercontent.com/68361391/107210065-9aa5b600-6a3e-11eb-92f6-bbe4823d90ce.png)\r\n\r\nIt is common to return multiple variables in a network's forward function, not only for this case, but also for other situations such as for calculating triplet loss in metric learning based tasks. Therefore, here I think we should re-consider about what to return in the forward function of DynUnet.\r\n\r\nLet me think about it and submit a PR then we can discuss it later.\r\n@Nic-Ma @wyli @rijobro \r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1534", "id": 798474793, "node_id": "MDU6SXNzdWU3OTg0NzQ3OTM=", "number": 1534, "title": "static type checks fail since numpy 1.20", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-01T15:47:17Z", "updated_at": "2021-02-02T09:32:39Z", "closed_at": "2021-02-02T09:32:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the recent numpy update (https://github.com/numpy/numpy/releases/tag/v1.20.0) breaks the pull request's type checks https://github.com/Project-MONAI/MONAI/pull/1532/checks?check_run_id=1807350179#step:7:284", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1533", "id": 798310511, "node_id": "MDU6SXNzdWU3OTgzMTA1MTE=", "number": 1533, "title": "ClassificationSaver can't save all the data from ranks into CSV file", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-01T12:36:55Z", "updated_at": "2021-02-03T08:54:48Z", "closed_at": "2021-02-03T08:54:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen doing distributed training, `ClassificationSaver` runs on different ranks and write to the same CSV file, it causes a random output in the file and sometimes even only 1 rank can open the file.\r\n\r\n**Expected behavior**\r\nExpect `all_gather` image path and model output data, then only write CSV file in the specified rank.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1531", "id": 798245664, "node_id": "MDU6SXNzdWU3OTgyNDU2NjQ=", "number": 1531, "title": "AUC metric can't work in distributed validation if data length is different in ranks", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-01T11:10:38Z", "updated_at": "2021-02-03T16:07:12Z", "closed_at": "2021-02-03T16:07:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf the `predictions` and `labels` in different ranks have different lengths, the AUC metric will hang up when doing `all_gather` in ignite.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1478", "id": 790906909, "node_id": "MDU6SXNzdWU3OTA5MDY5MDk=", "number": 1478, "title": "TorchScript can't work for AHNet when num_psp=0", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-01-21T10:18:14Z", "updated_at": "2021-02-02T13:42:49Z", "closed_at": "2021-02-02T13:42:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen set num_psp=0 in AHNet, can't use TorchScript to export the model:\r\n```\r\nRuntimeError: \r\nModule 'AHNet' has no attribute 'psp' :\r\n  File \"/workspace/data/medical/MONAI/monai/networks/nets/ahnet.py\", line 514\r\n        d4 = self.dense4(sum4)\r\n        if self.psp_block_num > 0:\r\n            psp = self.psp(d4)\r\n                  ~~~~~~~~ <--- HERE\r\n            x = torch.cat((psp, d4), dim=1)\r\n        else:\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1472", "id": 789411591, "node_id": "MDU6SXNzdWU3ODk0MTE1OTE=", "number": 1472, "title": "A few tests failed/had errors in nvidia pytorch 20.12 container with A100 GPU", "user": {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2021-01-19T22:03:59Z", "updated_at": "2021-02-25T11:58:53Z", "closed_at": "2021-02-25T11:55:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nLog in detail at the end of this report\r\n\r\n**To Reproduce**\r\nLaunch nvcr.io/nvidia/pytorch:20.12-py3 in A100 host.\r\nnvidia-smi showed\r\n\r\n> +-----------------------------------------------------------------------------+\r\n> | NVIDIA-SMI 455.08       Driver Version: 455.08       CUDA Version: 11.1     |\r\n> |-------------------------------+----------------------+----------------------+\r\n> | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n> | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n> |                               |                      |               MIG M. |\r\n> |===============================+======================+======================|\r\n> |   0  A100-PCIE-40GB      On   | 00000000:65:00.0 Off |                    0 |\r\n> | N/A   33C    P0    37W / 250W |      0MiB / 40536MiB |      0%      Default |\r\n> |                               |                      |             Disabled |\r\n> +-------------------------------+----------------------+----------------------+\r\n>                                                                                \r\n> +-----------------------------------------------------------------------------+\r\n> | Processes:                                                                  |\r\n> |  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n> |        ID   ID                                                   Usage      |\r\n> |=============================================================================|\r\n> |  No running processes found                                                 |\r\n> +-----------------------------------------------------------------------------+\r\n> \r\n\r\nThen pip install -r requirements-dev.txt\r\nBUILD_MONAI=1 ./runtests.sh --coverage\r\n\r\n**Expected behavior**\r\nAll tests pass.\r\n\r\nMONAI rev id is 91cb8cd\r\n\r\n**Additional context**\r\n======================================================================\r\nERROR: test_training (tests.test_integration_determinism.TestDeterminism)\r\n----------------------------------------------------------------------\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 5.6044949e-05\r\nMax relative difference: 0.00010458\r\n x: array(0.535983)\r\n y: array(0.535927)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 409, in _wrapper\r\n    raise RuntimeError(res.traceback) from res\r\nRuntimeError: Traceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 348, in run_process\r\n    output = func(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 434, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_determinism.py\", line 84, in test_training\r\n    np.testing.assert_allclose(loss, 0.535927, rtol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.0001, atol=0\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 5.6044949e-05\r\nMax relative difference: 0.00010458\r\n x: array(0.535983)\r\n y: array(0.535927)\r\n\r\n\r\n======================================================================\r\nERROR: test_timing (tests.test_integration_segmentation_3d.IntegrationSegmentation3D)\r\n----------------------------------------------------------------------\r\nValueError: no matched results for integration_segmentation_3d, output_sums. [0.14197655735151385, 0.15187345208036218, 0.15151798637064173, 0.13981437171922162, 0.18797424777831578, 0.16945214449897825, 0.14668689379487942, 0.16789344992671038, 0.15692868772420235, 0.17890303083214196, 0.16228913079728044, 0.16761449125061936, 0.14524114928247697, 0.11657973897988946, 0.16152112759094686, 0.20063607303425035, 0.17549273136006815, 0.10394395512027575, 0.19296821173905265, 0.20234056500046443, 0.19596162310697743, 0.20778924939444293, 0.16200035873640076, 0.13186463537569404, 0.14872206861575096, 0.1424331264902646, 0.23080494038241672, 0.16095933686883251, 0.14811113251292585, 0.10420227534253262, 0.11886731056829931, 0.13106810760639204, 0.11427714341377837, 0.15350518705361246, 0.1628292835845796, 0.19326941589027985, 0.22188361089428374, 0.1803359227170212, 0.18965555393236588, 0.08550083029685855].\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 409, in _wrapper\r\n    raise RuntimeError(res.traceback) from res\r\nRuntimeError: Traceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 348, in run_process\r\n    output = func(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 434, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_segmentation_3d.py\", line 288, in test_timing\r\n    self.train_and_infer(idx=3)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_segmentation_3d.py\", line 274, in train_and_infer\r\n    self.assertTrue(test_integration_value(TASK, key=\"output_sums\", data=results[8:], rtol=1e-2))\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/testing_data/integration_answers.py\", line 327, in test_integration_value\r\n    raise ValueError(f\"no matched results for {test_name}, {key}. {data}.\")\r\nValueError: no matched results for integration_segmentation_3d, output_sums. [0.14197655735151385, 0.15187345208036218, 0.15151798637064173, 0.13981437171922162, 0.18797424777831578, 0.16945214449897825, 0.14668689379487942, 0.16789344992671038, 0.15692868772420235, 0.17890303083214196, 0.16228913079728044, 0.16761449125061936, 0.14524114928247697, 0.11657973897988946, 0.16152112759094686, 0.20063607303425035, 0.17549273136006815, 0.10394395512027575, 0.19296821173905265, 0.20234056500046443, 0.19596162310697743, 0.20778924939444293, 0.16200035873640076, 0.13186463537569404, 0.14872206861575096, 0.1424331264902646, 0.23080494038241672, 0.16095933686883251, 0.14811113251292585, 0.10420227534253262, 0.11886731056829931, 0.13106810760639204, 0.11427714341377837, 0.15350518705361246, 0.1628292835845796, 0.19326941589027985, 0.22188361089428374, 0.1803359227170212, 0.18965555393236588, 0.08550083029685855].\r\n\r\n\r\n======================================================================\r\nERROR: test_training (tests.test_integration_segmentation_3d.IntegrationSegmentation3D)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_segmentation_3d.py\", line 280, in test_training\r\n    results = self.train_and_infer(i)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_segmentation_3d.py\", line 274, in train_and_infer\r\n    self.assertTrue(test_integration_value(TASK, key=\"output_sums\", data=results[8:], rtol=1e-2))\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/testing_data/integration_answers.py\", line 327, in test_integration_value\r\n    raise ValueError(f\"no matched results for {test_name}, {key}. {data}.\")\r\nValueError: no matched results for integration_segmentation_3d, output_sums. [0.14197655735151385, 0.15187345208036218, 0.15151798637064173, 0.13981437171922162, 0.18797424777831578, 0.16945214449897825, 0.14668689379487942, 0.16789344992671038, 0.15692868772420235, 0.17890303083214196, 0.16228913079728044, 0.16761449125061936, 0.14524114928247697, 0.11657973897988946, 0.16152112759094686, 0.20063607303425035, 0.17549273136006815, 0.10394395512027575, 0.19296821173905265, 0.20234056500046443, 0.19596162310697743, 0.20778924939444293, 0.16200035873640076, 0.13186463537569404, 0.14872206861575096, 0.1424331264902646, 0.23080494038241672, 0.16095933686883251, 0.14811113251292585, 0.10420227534253262, 0.11886731056829931, 0.13106810760639204, 0.11427714341377837, 0.15350518705361246, 0.1628292835845796, 0.19326941589027985, 0.22188361089428374, 0.1803359227170212, 0.18965555393236588, 0.08550083029685855].\r\n\r\n======================================================================\r\nERROR: test_training (tests.test_integration_sliding_window.TestIntegrationSlidingWindow)\r\n----------------------------------------------------------------------\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 4.\r\nMax relative difference: 0.00011897\r\n x: array(33617.)\r\n y: array(33621)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 409, in _wrapper\r\n    raise RuntimeError(res.traceback) from res\r\nRuntimeError: Traceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 348, in run_process\r\n    output = func(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/utils.py\", line 434, in _call_original_func\r\n    return f(*args, **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_integration_sliding_window.py\", line 86, in test_training\r\n    np.testing.assert_allclose(np.sum(output_image), 33621)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0\r\n\r\nMismatched elements: 1 / 1 (100%)\r\nMax absolute difference: 4.\r\nMax relative difference: 0.00011897\r\n x: array(33617.)\r\n y: array(33621)\r\n\r\n\r\n======================================================================\r\nFAIL: test_affine_transform_2d (tests.test_affine_transform.TestAffineTransform)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 208, in test_affine_transform_2d\r\n    np.testing.assert_allclose(out, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 12 / 12 (100%)\r\nMax absolute difference: 0.00219655\r\nMax relative difference: 3070.99998842\r\n x: array([[[[2.197266e-03, 4.995321e-01, 9.994913e-01, 1.499634e+00],\r\n         [3.866943e+00, 1.365621e+00, 1.865580e+00, 2.365723e+00],\r\n         [7.732300e+00, 3.037472e+00, 2.731669e+00, 3.231812e+00]]]],\r\n      dtype=float32)\r\n y: array([[[[7.152557e-07, 4.999999e-01, 1.000000e+00, 1.500000e+00],\r\n         [3.866026e+00, 1.366025e+00, 1.866025e+00, 2.366025e+00],\r\n         [7.732052e+00, 3.035899e+00, 2.732051e+00, 3.232051e+00]]]])\r\n\r\n======================================================================\r\nFAIL: test_affine_transform_3d (tests.test_affine_transform.TestAffineTransform)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 258, in test_affine_transform_3d\r\n    np.testing.assert_allclose(out, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 44 / 48 (91.7%)\r\nMax absolute difference: 0.00202166\r\nMax relative difference: 31533.83072917\r\n x: array([[[[[1.892090e-03, 5.017701e-01],\r\n          [2.367615e+00, 1.367493e+00],\r\n          [4.733337e+00, 2.402832e+00],...\r\n y: array([[[[[6.000000e-08, 5.000001e-01],\r\n          [2.366025e+00, 1.366025e+00],\r\n          [4.732051e+00, 2.401924e+00],...\r\n\r\n======================================================================\r\nFAIL: test_to_norm_affine_0 (tests.test_affine_transform.TestToNormAffine)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 98, in test_to_norm_affine\r\n    np.testing.assert_allclose(new_affine, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 9 (22.2%)\r\nMax absolute difference: 0.00032559\r\nMax relative difference: 0.00097667\r\n x: array([[[ 1.333008,  0.      ,  0.333008],\r\n        [ 0.      ,  0.399902, -0.600098],\r\n        [ 0.      ,  0.      ,  1.      ]]], dtype=float32)\r\n y: array([[[ 1.333333,  0.      ,  0.333333],\r\n        [ 0.      ,  0.4     , -0.6     ],\r\n        [ 0.      ,  0.      ,  1.      ]]])\r\n\r\n======================================================================\r\nFAIL: test_to_norm_affine_1 (tests.test_affine_transform.TestToNormAffine)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 98, in test_to_norm_affine\r\n    np.testing.assert_allclose(new_affine, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 9 (22.2%)\r\nMax absolute difference: 0.00024414\r\nMax relative difference: 0.00048828\r\n x: array([[[ 1.25    ,  0.      ,  0.25    ],\r\n        [ 0.      ,  0.499878, -0.500244],\r\n        [ 0.      ,  0.      ,  1.      ]]], dtype=float32)\r\n y: array([[[ 1.25,  0.  ,  0.25],\r\n        [ 0.  ,  0.5 , -0.5 ],\r\n        [ 0.  ,  0.  ,  1.  ]]])\r\n\r\n======================================================================\r\nFAIL: test_to_norm_affine_2 (tests.test_affine_transform.TestToNormAffine)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 98, in test_to_norm_affine\r\n    np.testing.assert_allclose(new_affine, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 16 (12.5%)\r\nMax absolute difference: 0.00032559\r\nMax relative difference: 0.00097667\r\n x: array([[[ 2.      ,  0.      ,  0.      ,  1.      ],\r\n        [ 0.      ,  1.333008,  0.      ,  0.333008],\r\n        [ 0.      ,  0.      ,  0.399902, -0.600098],\r\n        [ 0.      ,  0.      ,  0.      ,  1.      ]]], dtype=float32)\r\n y: array([[[ 2.      ,  0.      ,  0.      ,  1.      ],\r\n        [ 0.      ,  1.333333,  0.      ,  0.333333],\r\n        [ 0.      ,  0.      ,  0.4     , -0.6     ],\r\n        [ 0.      ,  0.      ,  0.      ,  1.      ]]])\r\n\r\n======================================================================\r\nFAIL: test_to_norm_affine_3 (tests.test_affine_transform.TestToNormAffine)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_affine_transform.py\", line 98, in test_to_norm_affine\r\n    np.testing.assert_allclose(new_affine, expected, atol=1e-4)\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 1527, in assert_allclose\r\n    assert_array_compare(compare, actual, desired, err_msg=str(err_msg),\r\n  File \"/opt/conda/lib/python3.8/site-packages/numpy/testing/_private/utils.py\", line 840, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=1e-07, atol=0.0001\r\n\r\nMismatched elements: 2 / 16 (12.5%)\r\nMax absolute difference: 0.00024414\r\nMax relative difference: 0.00048828\r\n x: array([[[ 1.5     ,  0.      ,  0.      ,  0.5     ],\r\n        [ 0.      ,  1.25    ,  0.      ,  0.25    ],\r\n        [ 0.      ,  0.      ,  0.499878, -0.500244],\r\n        [ 0.      ,  0.      ,  0.      ,  1.      ]]], dtype=float32)\r\n y: array([[[ 1.5 ,  0.  ,  0.  ,  0.5 ],\r\n        [ 0.  ,  1.25,  0.  ,  0.25],\r\n        [ 0.  ,  0.  ,  0.5 , -0.5 ],\r\n        [ 0.  ,  0.  ,  0.  ,  1.  ]]])\r\n\r\n======================================================================\r\nFAIL: test_content (tests.test_ensemble_evaluator.TestEnsembleEvaluator)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_ensemble_evaluator.py\", line 60, in test_content\r\n    val_engine.run()\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/monai/engines/evaluator.py\", line 101, in run\r\n    super().run()\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/monai/engines/workflow.py\", line 166, in run\r\n    super().run(data=self.data_loader, max_epochs=self.state.max_epochs)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 691, in run\r\n    return self._internal_run()\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 762, in _internal_run\r\n    self._handle_exception(e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 467, in _handle_exception\r\n    raise e\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 730, in _internal_run\r\n    time_taken = self._run_once_on_dataset()\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 828, in _run_once_on_dataset\r\n    self._handle_exception(e)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 467, in _handle_exception\r\n    raise e\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 812, in _run_once_on_dataset\r\n    self._fire_event(Events.ITERATION_COMPLETED)\r\n  File \"/opt/conda/lib/python3.8/site-packages/ignite/engine/engine.py\", line 423, in _fire_event\r\n    func(*first, *(event_args + others), **kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_ensemble_evaluator.py\", line 58, in run_post_transform\r\n    torch.testing.assert_allclose(engine.state.output[f\"pred{i}\"], expected_value)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/__init__.py\", line 215, in assert_allclose\r\n    raise AssertionError(\"expected tensor shape {0} doesn't match with actual tensor \"\r\nAssertionError: expected tensor shape torch.Size([]) doesn't match with actual tensor shape torch.Size([1, 1])!\r\n\r\n======================================================================\r\nFAIL: test_one_save_one_load (tests.test_handler_checkpoint_loader.TestHandlerCheckpointLoader)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_handler_checkpoint_loader.py\", line 43, in test_one_save_one_load\r\n    torch.testing.assert_allclose(net2.state_dict()[\"weight\"], 0.1)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/__init__.py\", line 215, in assert_allclose\r\n    raise AssertionError(\"expected tensor shape {0} doesn't match with actual tensor \"\r\nAssertionError: expected tensor shape torch.Size([]) doesn't match with actual tensor shape torch.Size([1])!\r\n\r\n======================================================================\r\nFAIL: test_save_single_device_load_multi_devices (tests.test_handler_checkpoint_loader.TestHandlerCheckpointLoader)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_handler_checkpoint_loader.py\", line 86, in test_save_single_device_load_multi_devices\r\n    torch.testing.assert_allclose(net2.state_dict()[\"module.weight\"].cpu(), 0.1)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/__init__.py\", line 215, in assert_allclose\r\n    raise AssertionError(\"expected tensor shape {0} doesn't match with actual tensor \"\r\nAssertionError: expected tensor shape torch.Size([]) doesn't match with actual tensor shape torch.Size([1])!\r\n\r\n======================================================================\r\nFAIL: test_two_save_one_load (tests.test_handler_checkpoint_loader.TestHandlerCheckpointLoader)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_handler_checkpoint_loader.py\", line 65, in test_two_save_one_load\r\n    torch.testing.assert_allclose(net2.state_dict()[\"weight\"], 0.1)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/__init__.py\", line 215, in assert_allclose\r\n    raise AssertionError(\"expected tensor shape {0} doesn't match with actual tensor \"\r\nAssertionError: expected tensor shape torch.Size([]) doesn't match with actual tensor shape torch.Size([1])!\r\n\r\n======================================================================\r\nFAIL: test_value_cuda_0 (tests.test_lltm.TestLLTM)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.8/site-packages/parameterized/parameterized.py\", line 533, in standalone_func\r\n    return func(*(a + p.args), **p.kwargs)\r\n  File \"/home/jenkins/agent/workspace/MONAI-nightly/tests/test_lltm.py\", line 53, in test_value_cuda\r\n    torch.testing.assert_allclose(new_h, expected_h.to(device), rtol=0.0001, atol=1e-04)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/testing/__init__.py\", line 232, in assert_allclose\r\n    raise AssertionError(msg)\r\nAssertionError: With rtol=0.0001 and atol=0.0001, found 2 element(s) (out of 8) whose difference(s) exceeded the margin of error (including 0 nan comparisons). The greatest difference was 0.00022590160369873047 (0.616874098777771 vs. 0.6171000003814697), which occurred at index (2, 1).\r\n\r\n----------------------------------------------------------------------\r\nRan 1957 tests in 2009.114s\r\n\r\nFAILED (failures=11, errors=4, skipped=4)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1387", "id": 770746751, "node_id": "MDU6SXNzdWU3NzA3NDY3NTE=", "number": 1387, "title": "DynUNet different shape in eval mode?", "user": {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-18T09:52:31Z", "updated_at": "2020-12-18T11:58:23Z", "closed_at": "2020-12-18T09:56:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nLine 126 of [test_dynunet.py](https://github.com/Project-MONAI/MONAI/blob/master/tests/test_dynunet.py#L126) has:\r\n\r\n```\r\nwith torch.no_grad():\r\n    blah\r\n```\r\nbut when changing to:\r\n\r\n```\r\nnet.eval()\r\nwith torch.no_grad():\r\n    blah\r\n```\r\n\r\nthe unit test fails with the following error:\r\n\r\n```\r\n  File \"test_dynunet.py\", line 129, in test_shape\r\n    self.assertEqual(len(results), len(expected_shape))\r\nAssertionError: 1 != 3\r\n```\r\n\r\nSpotted in this PR, which calls `eval` and `no_grad` together: https://github.com/Project-MONAI/MONAI/pull/1384.\r\n\r\n**To Reproduce**\r\n1. run `python tests/test_dynunet.py` -- all ok\r\n1. insert `net.eval()` at line 126 of [test_dynunet.py](https://github.com/Project-MONAI/MONAI/blob/master/tests/test_dynunet.py#L126)\r\n2. run `python tests/test_dynunet.py` -- error\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1387/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1378", "id": 769871743, "node_id": "MDU6SXNzdWU3Njk4NzE3NDM=", "number": 1378, "title": "SegmentationSaver fails if dtype is np.uint8", "user": {"login": "elitap", "id": 9333139, "node_id": "MDQ6VXNlcjkzMzMxMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/9333139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elitap", "html_url": "https://github.com/elitap", "followers_url": "https://api.github.com/users/elitap/followers", "following_url": "https://api.github.com/users/elitap/following{/other_user}", "gists_url": "https://api.github.com/users/elitap/gists{/gist_id}", "starred_url": "https://api.github.com/users/elitap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elitap/subscriptions", "organizations_url": "https://api.github.com/users/elitap/orgs", "repos_url": "https://api.github.com/users/elitap/repos", "events_url": "https://api.github.com/users/elitap/events{/privacy}", "received_events_url": "https://api.github.com/users/elitap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-12-17T11:03:18Z", "updated_at": "2020-12-28T13:49:32Z", "closed_at": "2020-12-28T13:49:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "SegmentationSaver fails with RuntimeError: \"inverse_cpu\" not implemented for 'Byte' if dtype is np.uint8 in monai.networks.utils line 158. It hapens when the output image that should be written by the Segmentation Saver should be uint8 (which in my eyes is the most meaningfull datatype for saving labelmaps) and an affine transformation is to be applied to rescale the output to the same spacing as the inputimage was. \r\n\r\nIt debugged it down to monai.data.nifty_writer.py line 135 wehre the dtype of the SegmentationSaver is set before the transormation is done. This is happening since monai 3.0 and is still the case in monai 4.0. In monai 2.0 the dtype before the call off affine_xform was hardcoded to np.float32 so that the transformation worked out and the desired output dtype was just set at the end of nifti_writer.py. The workaround for now is to not set the output datatype for the SegmentationSaver so it defaults to np.float32, however the output labelmaps get much larger compared to using np.unit8.\r\n\r\n**To Reproduce**\r\nUse the SegmentationSaver with some integer dtype, and make it use an affine transformation (eg. rescale to the original spacing of the inputfile with batch_transform=lambda batch: batch[\"somedictkey_meta_dict\"])\r\n\r\n**Expected behavior**\r\nShould write uint8 labelmaps\r\n\r\n**Environment**\r\nmonai 4.0 and 3.0,\r\nworks in monai 2.0\r\n\r\nThank you guys once more for the amazing work :-)\r\nBest Eli\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1378/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1370", "id": 769080851, "node_id": "MDU6SXNzdWU3NjkwODA4NTE=", "number": 1370, "title": "Auto formatting includes '.venv' directory", "user": {"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-16T16:38:13Z", "updated_at": "2020-12-16T17:10:40Z", "closed_at": "2020-12-16T17:10:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nflake8 and isort are configured to ignore 'venv' not the also common '.venv' directory leading to false fails and corrupted virtual environments \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Setup dev environment with a virtual environment named '.venv' \r\n2. run './runtests.sh --codeformat --nounittests'\r\n3. tests will fail due to files in in the virtual environment folder\r\n\r\n**Expected behavior**\r\nvirtual environment folder ignored by flake8 and isort\r\n\r\n**Additional context**\r\n'.venv' is a common naming convention and is skipped by isorts default settings...\r\n [https://pycqa.github.io/isort/docs/configuration/options/](url)", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1367", "id": 767729756, "node_id": "MDU6SXNzdWU3Njc3Mjk3NTY=", "number": 1367, "title": "No Expected Model Output dimensions", "user": {"login": "patriciacs1994", "id": 54105193, "node_id": "MDQ6VXNlcjU0MTA1MTkz", "avatar_url": "https://avatars.githubusercontent.com/u/54105193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patriciacs1994", "html_url": "https://github.com/patriciacs1994", "followers_url": "https://api.github.com/users/patriciacs1994/followers", "following_url": "https://api.github.com/users/patriciacs1994/following{/other_user}", "gists_url": "https://api.github.com/users/patriciacs1994/gists{/gist_id}", "starred_url": "https://api.github.com/users/patriciacs1994/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patriciacs1994/subscriptions", "organizations_url": "https://api.github.com/users/patriciacs1994/orgs", "repos_url": "https://api.github.com/users/patriciacs1994/repos", "events_url": "https://api.github.com/users/patriciacs1994/events{/privacy}", "received_events_url": "https://api.github.com/users/patriciacs1994/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-12-15T15:45:43Z", "updated_at": "2020-12-16T18:53:36Z", "closed_at": "2020-12-16T18:53:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nI am using an autoencoder but the output channel dimension of the model does not correspond with the out-channel variable. \r\nHere is my code:\r\n```\r\n# create a training data loader\r\n    train_ds = ArrayDataset(img_train[0], train_imtrans, img_train[1], train_segtrans)\r\n    train_loader = DataLoader(train_ds, batch_size=16, num_workers=8, pin_memory=torch.cuda.is_available())\r\n    # create a validation data loader\r\n    val_ds = ArrayDataset(img_val[0], val_imtrans, img_val[1], val_segtrans)\r\n    val_loader = DataLoader(val_ds, batch_size=1, num_workers=4, pin_memory=torch.cuda.is_available())\r\n    \r\n    # create AE, MSELoss and Adam optimizer\r\n    device = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\r\n    model = monai.networks.nets.AutoEncoder(\r\n        dimensions=2,\r\n        in_channels=1,\r\n        out_channels=4,\r\n        channels=(16, 32, 64, 128, 256),\r\n        strides=(2, 2, 2, 2),\r\n        num_res_units = 2\r\n    )\r\n    loss_function = torch.nn.MSELoss()\r\n    optimizer = torch.optim.Adam(model.parameters(), 1e-3)\r\n    lr_scheduler = torch.optim.lr_scheduler.ReduceLROnPlateau(optimizer, patience=3, verbose=True)\r\n    # start a typical PyTorch training\r\n    val_interval = 2\r\n    best_metric = -1\r\n    best_metric_epoch = -1\r\n    best_val_loss = 10000\r\n    best_val_loss_epoch = 10000\r\n    epoch_loss_values = list()\r\n    val_loss_values = list()\r\n\r\n    metric_values = list()\r\n    writer = SummaryWriter()\r\n    post_pred = AsDiscrete(argmax=True, to_onehot=True, n_classes=4)\r\n    post_label = AsDiscrete(to_onehot=True, n_classes=4)\r\n    \r\n    for epoch in range(200):\r\n        print(\"-\" * 10)\r\n        print('Epoch {}/{}'.format(epoch + 1, 200))\r\n        model.train()\r\n        epoch_loss = 0\r\n        step = 0\r\n        for batch_data in train_loader:\r\n            metric_sum = 0.0\r\n            metric_count = 0\r\n            metric_batch = 0 \r\n            step += 1\r\n            inputs, labels = batch_data[0], batch_data[1]\r\n            optimizer.zero_grad()\r\n            outputs = model(inputs)\r\n            loss = loss_function(outputs, labels)\r\n            loss.backward()\r\n            optimizer.step()\r\n            epoch_loss += loss.item()\r\n            epoch_len = len(train_ds) // train_loader.batch_size\r\n            outputs1 = post_pred(outputs)\r\n            labels1 = post_label(labels)\r\n            value_train = monai.metrics.compute_meandice(y_pred=outputs1, y=labels1, include_background=False)\r\n            \r\n            metric_count += value_train.shape[1]\r\n            metric_batch += value_train.shape[0]\r\n            metric_sum += value_train.sum().item()\r\n            \r\n            writer.add_scalar(\"train_loss\", loss.item(), epoch_len * epoch + step)\r\n            \r\n        metric1 = metric_sum / (metric_count * metric_batch)        \r\n        epoch_loss /= step\r\n        epoch_loss_values.append(epoch_loss)\r\n        print(f\"epoch {epoch + 1} average loss: {epoch_loss:.4f} mean dice: {metric1:.4f}\")\r\n```\r\n\r\nI am getting this error: \r\n\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-7-779c911ab35f> in <module>\r\n    224 \r\n    225 with tempfile.TemporaryDirectory() as tempdir:\r\n--> 226     outputs, labels, outputs1, labels1, inputs, labels = main(tempdir, img_train, img_val)\r\n\r\n<ipython-input-7-779c911ab35f> in main(tempdir, img_train, img_val)\r\n    121             epoch_loss += loss.item()\r\n    122             epoch_len = len(train_ds) // train_loader.batch_size\r\n--> 123             outputs1 = post_pred(outputs)\r\n    124             labels1 = post_label(labels)\r\n    125             value_train = monai.metrics.compute_meandice(y_pred=outputs1, y=labels1, include_background=False)\r\n\r\n~\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\monai\\transforms\\post\\array.py in __call__(self, img, argmax, to_onehot, n_classes, threshold_values, logit_thresh)\r\n    156             _nclasses = self.n_classes if n_classes is None else n_classes\r\n    157             assert isinstance(_nclasses, int), \"One of self.n_classes or n_classes must be an integer\"\r\n--> 158             img = one_hot(img, _nclasses)\r\n    159 \r\n    160         if threshold_values or self.threshold_values:\r\n\r\n~\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\monai\\networks\\utils.py in one_hot(labels, num_classes, dtype, dim)\r\n     45 \r\n     46     o = torch.zeros(size=sh, dtype=dtype, device=labels.device)\r\n---> 47     labels = o.scatter_(dim=dim, index=labels.long(), value=1)\r\n     48 \r\n     49     return labels\r\n\r\nRuntimeError: index 5 is out of bounds for dimension 1 with size 4\r\n\r\nI have checked the input and output shapes of the model and I got the next:\r\ninputs: torch.Size([16, 1, 256, 256])\r\noutputs: torch.Size([16, 16, 256, 256])\r\n\r\nWhy if I set the out-channel to 4 I got a channel of 16 in the outputs?", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1357", "id": 762435820, "node_id": "MDU6SXNzdWU3NjI0MzU4MjA=", "number": 1357, "title": "Need to transpose array obtained from itk instead of reversing of itk.size() in ITKReader", "user": {"login": "take5v", "id": 1794068, "node_id": "MDQ6VXNlcjE3OTQwNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1794068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/take5v", "html_url": "https://github.com/take5v", "followers_url": "https://api.github.com/users/take5v/followers", "following_url": "https://api.github.com/users/take5v/following{/other_user}", "gists_url": "https://api.github.com/users/take5v/gists{/gist_id}", "starred_url": "https://api.github.com/users/take5v/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/take5v/subscriptions", "organizations_url": "https://api.github.com/users/take5v/orgs", "repos_url": "https://api.github.com/users/take5v/repos", "events_url": "https://api.github.com/users/take5v/events{/privacy}", "received_events_url": "https://api.github.com/users/take5v/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444324, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzI0", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 2852068321, "node_id": "MDU6TGFiZWwyODUyMDY4MzIx", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/WG:%20IO", "name": "WG: IO", "color": "419651", "default": false, "description": "For the IO working group"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-12-11T14:58:20Z", "updated_at": "2021-07-22T01:13:10Z", "closed_at": "2021-07-22T01:13:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description\r\n\r\nIn ITKReader, ```itk.size(img)``` should not be reversed since it outputs correct size of an image. Instead, itk.array_view_from_image(img, keep_axes=False) provides the transposed array and such numpy array must be transposed because of the differences of storing the data in numpy and itk.\r\n\r\nThis PR is wrong: https://github.com/Project-MONAI/MONAI/pull/1045. See also https://github.com/InsightSoftwareConsortium/ITK/issues/2006\r\n\r\n### Expected behavior\r\n1. Need to remove the reverse for itk.size.\r\n2. Transpose array obtained from itk.array_view_from_image.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1357/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1349", "id": 761748596, "node_id": "MDU6SXNzdWU3NjE3NDg1OTY=", "number": 1349, "title": "Missing \"astype(img.dtype)\" in NormalizeIntensity", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-12-11T00:41:10Z", "updated_at": "2020-12-11T15:40:51Z", "closed_at": "2020-12-11T15:40:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nNeed to add `astype(img.dtype)` in NormalizeIntensity transform, same as others.\r\nWorking on a PR, will fix it soon.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1349/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1319", "id": 756335280, "node_id": "MDU6SXNzdWU3NTYzMzUyODA=", "number": 1319, "title": "c++/cuda extention source files not included in build if in nested directory", "user": {"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "charliebudd", "id": 72921588, "node_id": "MDQ6VXNlcjcyOTIxNTg4", "avatar_url": "https://avatars.githubusercontent.com/u/72921588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/charliebudd", "html_url": "https://github.com/charliebudd", "followers_url": "https://api.github.com/users/charliebudd/followers", "following_url": "https://api.github.com/users/charliebudd/following{/other_user}", "gists_url": "https://api.github.com/users/charliebudd/gists{/gist_id}", "starred_url": "https://api.github.com/users/charliebudd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/charliebudd/subscriptions", "organizations_url": "https://api.github.com/users/charliebudd/orgs", "repos_url": "https://api.github.com/users/charliebudd/repos", "events_url": "https://api.github.com/users/charliebudd/events{/privacy}", "received_events_url": "https://api.github.com/users/charliebudd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-12-03T16:09:16Z", "updated_at": "2020-12-03T18:24:09Z", "closed_at": "2020-12-03T18:24:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The build process will currently fail to discover c++/cuda source which is more than a single nested directory deep in the csrc folder. \r\n\r\nThe issue is that while we use glob with ** to find the source files, we must add the recursive=True flag to the glob call. \r\n\r\nThis has been fixed just need to make the PR.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1315", "id": 755784309, "node_id": "MDU6SXNzdWU3NTU3ODQzMDk=", "number": 1315, "title": "Missing up_modules in AHNet when TorchScript", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-12-03T03:28:44Z", "updated_at": "2020-12-05T14:50:01Z", "closed_at": "2020-12-05T14:50:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen exporting model in TorchScript, it output error:\r\n```\r\nRuntimeError: \r\nModule 'PSP' has no attribute 'up_modules' :\r\n  File \"/workspace/data/medical/MONAI/monai/networks/nets/ahnet.py\", line 290\r\n        if self.upsample_mode == \"transpose\":\r\n            for (project_module, pool_module, up_module) in zip(\r\n                self.project_modules, self.pool_modules, self.up_modules\r\n                                                         ~~~~~~~~~~~~~~~ <--- HERE\r\n            ):\r\n                output = up_module(project_module(pool_module(x)))\r\n```\r\nI will fix it ASAP.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1315/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1244", "id": 744365282, "node_id": "MDU6SXNzdWU3NDQzNjUyODI=", "number": 1244, "title": "Issues with compute_confusion_matrix metric", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-11-17T02:56:58Z", "updated_at": "2020-11-18T18:54:07Z", "closed_at": "2020-11-18T18:54:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThere are 2 minor issues in `compute_confusion_matrix` metric:\r\n1. If reduction mode is `SUMBATCH`, should not do SUM on `not_nans`, otherwise we don't know which class is nan when computing the final result.\r\n2. If `compute_sample` is False, should return the confusion matrix elements of current batch directly, then compute the final metric value for the whole epoch. Current implementation computes metric for every batch, if batch size changed, the metric value will be different.\r\nSo in summary, should have 2 modes:\r\n(1) Compute metric for every sample image first, then average or sum the whole epoch to get the final result.\r\n(2) Keep the confusion matrix elements of every image, then average or sum the whole epoch, then compute metric.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1227", "id": 741896583, "node_id": "MDU6SXNzdWU3NDE4OTY1ODM=", "number": 1227, "title": "runtests.sh does not find integration tests", "user": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drbeh", "id": 3968947, "node_id": "MDQ6VXNlcjM5Njg5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3968947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drbeh", "html_url": "https://github.com/drbeh", "followers_url": "https://api.github.com/users/drbeh/followers", "following_url": "https://api.github.com/users/drbeh/following{/other_user}", "gists_url": "https://api.github.com/users/drbeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/drbeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drbeh/subscriptions", "organizations_url": "https://api.github.com/users/drbeh/orgs", "repos_url": "https://api.github.com/users/drbeh/repos", "events_url": "https://api.github.com/users/drbeh/events{/privacy}", "received_events_url": "https://api.github.com/users/drbeh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-12T20:13:38Z", "updated_at": "2020-11-12T22:35:12Z", "closed_at": "2020-11-12T22:35:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nruntests.sh does not find integration tests.\r\n\r\n**To Reproduce**\r\n`./runtests.sh --net --dryrun`\r\n\r\n**Expected behavior**\r\nIt should find and run each individual test files whose name contains \"integration\" in the `tests/` folder.\r\n\r\n**Screenshots**\r\n![runtests sh](https://user-images.githubusercontent.com/3968947/98990810-f7a1d680-24f8-11eb-9ffa-940108c18bf1.png)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1223", "id": 741255541, "node_id": "MDU6SXNzdWU3NDEyNTU1NDE=", "number": 1223, "title": "Can't save classification result if \"info\" is empty in meta_data", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-12T03:52:19Z", "updated_at": "2020-11-12T15:00:10Z", "closed_at": "2020-11-12T15:00:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nThanks @madil90 for raising this issue.\r\nMost of the PNG images don't have `info` field in the metadata, and we saved an empty {} in metadata.\r\nBut PyTorch `collate_fn` can't collate a batch of {} into `\"info\": [{}, {}, {}, ...]`, just a `info: {}`:\r\n```\r\n{'filename_or_obj': ['/workspace/data/CXR/PLCO/PLCO_256_original/AB02720121407113025_v2.png'], 'spatial_shape': [tensor([256]), tensor([256])], 'format': ['PNG'], 'mode': ['I'], 'width': tensor([256]), 'height': tensor([256]), 'info': {}}\r\n```\r\nSo we can't load meta_data correctly in `ClassificationSaver` handler with index `i`:\r\n```\r\n  File \"/home/madil/dlmed/code/MONAI/monai/handlers/classification_saver.py\", line 82, in __call__\r\n    self.saver.save_batch(engine_output, meta_data)\r\n  File \"/home/madil/dlmed/code/MONAI/monai/data/csv_saver.py\", line 91, in save_batch\r\n    self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\r\n  File \"/home/madil/dlmed/code/MONAI/monai/data/csv_saver.py\", line 91, in <dictcomp>\r\n    self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\r\nKeyError: 0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1223/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1204", "id": 738907203, "node_id": "MDU6SXNzdWU3Mzg5MDcyMDM=", "number": 1204, "title": "Integration test failed but report passed", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 2492622478, "node_id": "MDU6TGFiZWwyNDkyNjIyNDc4", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/CI/CD", "name": "CI/CD", "color": "b9dd40", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}, {"login": "rijobro", "id": 33289025, "node_id": "MDQ6VXNlcjMzMjg5MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/33289025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rijobro", "html_url": "https://github.com/rijobro", "followers_url": "https://api.github.com/users/rijobro/followers", "following_url": "https://api.github.com/users/rijobro/following{/other_user}", "gists_url": "https://api.github.com/users/rijobro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rijobro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rijobro/subscriptions", "organizations_url": "https://api.github.com/users/rijobro/orgs", "repos_url": "https://api.github.com/users/rijobro/repos", "events_url": "https://api.github.com/users/rijobro/events{/privacy}", "received_events_url": "https://api.github.com/users/rijobro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-11-09T10:36:54Z", "updated_at": "2020-11-09T18:25:08Z", "closed_at": "2020-11-09T13:50:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nI found an issue in our CI test env, the integration test failed in the log but the final result is \"passed\".\r\nTake the latest PR for example:\r\nhttps://github.com/Project-MONAI/MONAI/runs/1368333959#step:7:10824\r\n\r\nThanks.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1204/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1196", "id": 737443050, "node_id": "MDU6SXNzdWU3Mzc0NDMwNTA=", "number": 1196, "title": "Error using spatial size", "user": {"login": "shrutishrestha", "id": 33342277, "node_id": "MDQ6VXNlcjMzMzQyMjc3", "avatar_url": "https://avatars.githubusercontent.com/u/33342277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shrutishrestha", "html_url": "https://github.com/shrutishrestha", "followers_url": "https://api.github.com/users/shrutishrestha/followers", "following_url": "https://api.github.com/users/shrutishrestha/following{/other_user}", "gists_url": "https://api.github.com/users/shrutishrestha/gists{/gist_id}", "starred_url": "https://api.github.com/users/shrutishrestha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shrutishrestha/subscriptions", "organizations_url": "https://api.github.com/users/shrutishrestha/orgs", "repos_url": "https://api.github.com/users/shrutishrestha/repos", "events_url": "https://api.github.com/users/shrutishrestha/events{/privacy}", "received_events_url": "https://api.github.com/users/shrutishrestha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-06T04:14:01Z", "updated_at": "2020-11-09T23:45:54Z", "closed_at": "2020-11-09T23:45:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I do not understand this error. \r\n<img width=\"1291\" alt=\"Screen Shot 2020-11-06 at 9 55 16 AM\" src=\"https://user-images.githubusercontent.com/33342277/98325281-8785e300-2016-11eb-9e36-19fb8dcabd22.png\">\r\n    \r\nI used the transforamtion as below:\r\nval_transform = monai.transforms.Compose(\r\n    [\r\n        LoadPNGd(keys = [\"image\",\"label\"]),\r\n        AsChannelFirstd(keys = [\"image\",\"label\"], channel_dim = -1), \r\n        Lambdad(keys=['label'], func=lambda x: x[0:1]*0.2125 + x[1:2]*0.7154 + x[2:3]*0.0721),\r\n        Resized([\"image\",\"label\"],spatial_size=(256,256)),\r\n        ScaleIntensityd(keys = [\"image\",\"label\"], minv=0.0, maxv=1.0),\r\n        NormalizeIntensityd(keys=[\"image\"], subtrahend=mean, divisor=std),\r\n        ToTensord(keys = [\"image\",\"label\"])\r\n    ]\r\n    )", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1196/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1184", "id": 735841685, "node_id": "MDU6SXNzdWU3MzU4NDE2ODU=", "number": 1184, "title": "PyTorch 1.6 is not optimized for docker 20.08", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-11-04T06:14:23Z", "updated_at": "2020-11-04T16:53:13Z", "closed_at": "2020-11-04T16:53:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn order to avoid PyTorch 1.7 CI test errors, we temporarily forced PyTorch version to >=1.5 and < 1.7, it will uninstall the optimized PyTorch in docker 20.08 and install 1.6.0 instead.\r\nAccording to @IsaacYangSLA 's training test, the training speed is 2x times slower in latest MONAI docker(reinstall 1.6) because the original torch in the docker was optimized by NVIDIA team.\r\n\r\nNeed to restore the torch of PyTorch 20.08 docker as the base of MONAI docker.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1184/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1178", "id": 734916305, "node_id": "MDU6SXNzdWU3MzQ5MTYzMDU=", "number": 1178, "title": "CopyItemsd transform can't support tensor from model", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-02T23:53:37Z", "updated_at": "2020-11-03T01:38:37Z", "closed_at": "2020-11-03T01:38:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThanks for @madil90 's bug report, `CopyItemsd` transform can work on normal `torch.Tensor` data but can't work on a tensor in graph:\r\n```\r\nERROR - Exception: Applying transform <monai.transforms.compose.Compose object at 0x7f0700e9deb8>.\r\nTraceback (most recent call last):\r\n  File \"/home/madil/dlmed/code/MONAI/monai/transforms/utils.py\", line 309, in apply_transform\r\n    return transform(data)\r\n  File \"/home/madil/dlmed/code/MONAI/monai/transforms/utility/dictionary.py\", line 406, in __call__\r\n    d[new_key] = copy.deepcopy(d[key])\r\n  File \"/opt/conda/lib/python3.6/copy.py\", line 161, in deepcopy\r\n    y = copier(memo)\r\n  File \"/opt/conda/lib/python3.6/site-packages/torch/tensor.py\", line 38, in __deepcopy__\r\n    raise RuntimeError(\"Only Tensors created explicitly by the user \"\r\nRuntimeError: Only Tensors created explicitly by the user (graph leaves) support the deepcopy protocol at the moment\r\n```\r\nNeed to fix it for post transforms.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1149", "id": 730658468, "node_id": "MDU6SXNzdWU3MzA2NTg0Njg=", "number": 1149, "title": "compatibility with pytorch 1.7", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-10-27T17:19:25Z", "updated_at": "2020-11-09T23:45:54Z", "closed_at": "2020-11-09T23:45:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\npytorch 1.7 is available, there're some compatibility issues such as https://github.com/Project-MONAI/MONAI/runs/1315919388#step:8:15470", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1129", "id": 727001602, "node_id": "MDU6SXNzdWU3MjcwMDE2MDI=", "number": 1129, "title": "Some metrics don't handle batch and channel dims", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-10-22T02:54:19Z", "updated_at": "2020-11-06T21:13:00Z", "closed_at": "2020-11-06T21:13:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nRecently, we added several new medical metrics and I found some segmentation metrics don't handle `batch` and `channel` dims which are the aligned data shape in MONAI.\r\nLike `MeanDice` metric, I think we should compute segmentation metrics on [B, C, H, W, <D>] data and return `M x N` results, where M corresponding to batch dim and N corresponding to channel dim. Then compute the average value after 1 epoch.\r\nAnd it should handle both non-one-hot and one-hot labels.\r\n\r\nPlease feel free to correct me if I misunderstand anything.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1094", "id": 718288979, "node_id": "MDU6SXNzdWU3MTgyODg5Nzk=", "number": 1094, "title": "CI errors (not enough memory on the github windows runner?)", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-10-09T16:48:58Z", "updated_at": "2020-10-13T12:04:06Z", "closed_at": "2020-10-13T12:04:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\n`tests\\test_ahnet.py` sometimes raises an out of memory error on github default windows cpu runner\r\nfor example https://github.com/Project-MONAI/MONAI/runs/1231403189?check_suite_focus=true#step:9:4886\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1094/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1071", "id": 709784907, "node_id": "MDU6SXNzdWU3MDk3ODQ5MDc=", "number": 1071, "title": "cron tests failed on torch docker v20.08", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-27T17:55:05Z", "updated_at": "2020-09-28T09:20:28Z", "closed_at": "2020-09-28T09:20:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nplease see the log: \r\nhttps://github.com/Project-MONAI/MONAI/runs/1173160621\r\nthis is based on 695982df70914e876e65582f3693cf05c795bdf3", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1069", "id": 709748772, "node_id": "MDU6SXNzdWU3MDk3NDg3NzI=", "number": 1069, "title": "Fix implementation errors for dynUnet", "user": {"login": "yiheng-wang-nv", "id": 68361391, "node_id": "MDQ6VXNlcjY4MzYxMzkx", "avatar_url": "https://avatars.githubusercontent.com/u/68361391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yiheng-wang-nv", "html_url": "https://github.com/yiheng-wang-nv", "followers_url": "https://api.github.com/users/yiheng-wang-nv/followers", "following_url": "https://api.github.com/users/yiheng-wang-nv/following{/other_user}", "gists_url": "https://api.github.com/users/yiheng-wang-nv/gists{/gist_id}", "starred_url": "https://api.github.com/users/yiheng-wang-nv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yiheng-wang-nv/subscriptions", "organizations_url": "https://api.github.com/users/yiheng-wang-nv/orgs", "repos_url": "https://api.github.com/users/yiheng-wang-nv/repos", "events_url": "https://api.github.com/users/yiheng-wang-nv/events{/privacy}", "received_events_url": "https://api.github.com/users/yiheng-wang-nv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-27T14:19:34Z", "updated_at": "2020-09-27T19:46:30Z", "closed_at": "2020-09-27T19:46:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The implementations have two  different places compared with the refered network (see [here](https://github.com/Project-MONAI/MONAI/pull/1003)). \r\nGenerally speaking, two places need to be changed:\r\n\r\n1) the number of output channel for the transposed conv layer should be the same as the number for the whole upsample block (now it is the same as the number of input channel)\r\n2) the kernel size and stride for the transposed conv layer need extra parameters to control, since they are not always the same as in other conv layers in the upsample block.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1062", "id": 707939391, "node_id": "MDU6SXNzdWU3MDc5MzkzOTE=", "number": 1062, "title": "Fix random train/val split in Datasets", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-24T07:45:09Z", "updated_at": "2020-09-29T14:12:53Z", "closed_at": "2020-09-29T14:12:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nNow we use `if random number < 0.2, XXX` logic to select validation dataset which can't guarantee val image number for a small dataset.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1062/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1059", "id": 707491637, "node_id": "MDU6SXNzdWU3MDc0OTE2Mzc=", "number": 1059, "title": "RandHistogramShift dtype inconsistency", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-09-23T16:01:04Z", "updated_at": "2020-09-24T09:14:13Z", "closed_at": "2020-09-24T09:14:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nRandHistogramShift transform doesn't preserve the float32 precision\r\n\r\n**To Reproduce**\r\n```py\r\nimport numpy as np\r\nfrom monai.transforms import RandHistogramShift\r\n\r\ninputs = np.zeros((2, 2), dtype=np.float32)\r\nresult = RandHistogramShift(num_control_points=(5, 20), prob=1.0)(inputs)\r\nprint(inputs.dtype)  # float32\r\nprint(result.dtype)  # float64\r\n```\r\n\r\n**Expected behavior**\r\nresult type should be float32 if the input's is\r\n\r\n\r\n**Environment (please complete the following information):**\r\nMONAI version: 0.3.0rc3+0.g3f4e064.dirty\r\nPython version: 3.6.10 |Anaconda, Inc.| (default, Mar 25 2020, 18:53:43)  [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nNumpy version: 1.19.2\r\nPytorch version: 1.6.0\r\n\r\n--\r\nThanks for reporting the issue @Can-Zhao!\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1027", "id": 699414788, "node_id": "MDU6SXNzdWU2OTk0MTQ3ODg=", "number": 1027, "title": "Building MONAI from source fails on Ubuntu 20.04.1", "user": {"login": "ad12", "id": 12801331, "node_id": "MDQ6VXNlcjEyODAxMzMx", "avatar_url": "https://avatars.githubusercontent.com/u/12801331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ad12", "html_url": "https://github.com/ad12", "followers_url": "https://api.github.com/users/ad12/followers", "following_url": "https://api.github.com/users/ad12/following{/other_user}", "gists_url": "https://api.github.com/users/ad12/gists{/gist_id}", "starred_url": "https://api.github.com/users/ad12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ad12/subscriptions", "organizations_url": "https://api.github.com/users/ad12/orgs", "repos_url": "https://api.github.com/users/ad12/repos", "events_url": "https://api.github.com/users/ad12/events{/privacy}", "received_events_url": "https://api.github.com/users/ad12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, {"login": "IsaacYangSLA", "id": 5758988, "node_id": "MDQ6VXNlcjU3NTg5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsaacYangSLA", "html_url": "https://github.com/IsaacYangSLA", "followers_url": "https://api.github.com/users/IsaacYangSLA/followers", "following_url": "https://api.github.com/users/IsaacYangSLA/following{/other_user}", "gists_url": "https://api.github.com/users/IsaacYangSLA/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsaacYangSLA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsaacYangSLA/subscriptions", "organizations_url": "https://api.github.com/users/IsaacYangSLA/orgs", "repos_url": "https://api.github.com/users/IsaacYangSLA/repos", "events_url": "https://api.github.com/users/IsaacYangSLA/events{/privacy}", "received_events_url": "https://api.github.com/users/IsaacYangSLA/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-09-11T14:54:18Z", "updated_at": "2020-09-13T13:20:56Z", "closed_at": "2020-09-13T13:20:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nBuilding wheels for MONAI, which uses PEP 517, fails.\r\n\r\n**To Reproduce**\r\n```bash\r\npip install git+https://github.com/Project-MONAI/MONAI#egg=MONAI\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Ubuntu 20.04.1 LTS\r\n - Python version: 3.7\r\n - MONAI version [e.g. git commit hash]\r\n - CUDA/cuDNN version: 10.2\r\n - GPU models and configuration: Titan 2080Ti (1)\r\n - Miniconda: conda 4.8.3\r\n\r\n**Relevant Conda/Pip packages***\r\n```bash\r\npip                       20.2.2                   py37_0  \r\nwheel                     0.35.1                     py_0  \r\n```\r\n\r\n**Error Message**\r\n```bash\r\nERROR: Command errored out with exit status 1:\r\n   command: /miniconda3/envs/mtr_env/bin/python /miniconda3/envs/mtr_env/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py build_wheel /tmp/tmp1873hwq5\r\n       cwd: /tmp/pip-install-soyjh8vt/monai\r\n  Complete output (256 lines):\r\n  setup.py with torch 1.6.0\r\n  BUILD_MONAI_CPP=True, BUILD_MONAI_CUDA=True\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.linux-x86_64-3.7\r\n  creating build/lib.linux-x86_64-3.7/monai\r\n  copying monai/_version.py -> build/lib.linux-x86_64-3.7/monai\r\n  copying monai/__init__.py -> build/lib.linux-x86_64-3.7/monai\r\n  creating build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/classification_saver.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/validation_handler.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/mean_dice.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/checkpoint_loader.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/lr_schedule_handler.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/utils.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/smartcache_handler.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/metric_logger.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/segmentation_saver.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/stats_handler.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/roc_auc.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/__init__.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/tensorboard_handlers.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  copying monai/handlers/checkpoint_saver.py -> build/lib.linux-x86_64-3.7/monai/handlers\r\n  creating build/lib.linux-x86_64-3.7/monai/config\r\n  copying monai/config/deviceconfig.py -> build/lib.linux-x86_64-3.7/monai/config\r\n  copying monai/config/__init__.py -> build/lib.linux-x86_64-3.7/monai/config\r\n  copying monai/config/type_definitions.py -> build/lib.linux-x86_64-3.7/monai/config\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms\r\n  copying monai/transforms/adaptors.py -> build/lib.linux-x86_64-3.7/monai/transforms\r\n  copying monai/transforms/utils.py -> build/lib.linux-x86_64-3.7/monai/transforms\r\n  copying monai/transforms/compose.py -> build/lib.linux-x86_64-3.7/monai/transforms\r\n  copying monai/transforms/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms\r\n  creating build/lib.linux-x86_64-3.7/monai/inferers\r\n  copying monai/inferers/utils.py -> build/lib.linux-x86_64-3.7/monai/inferers\r\n  copying monai/inferers/inferer.py -> build/lib.linux-x86_64-3.7/monai/inferers\r\n  copying monai/inferers/__init__.py -> build/lib.linux-x86_64-3.7/monai/inferers\r\n  creating build/lib.linux-x86_64-3.7/monai/networks\r\n  copying monai/networks/utils.py -> build/lib.linux-x86_64-3.7/monai/networks\r\n  copying monai/networks/__init__.py -> build/lib.linux-x86_64-3.7/monai/networks\r\n  creating build/lib.linux-x86_64-3.7/monai/visualize\r\n  copying monai/visualize/img2tensorboard.py -> build/lib.linux-x86_64-3.7/monai/visualize\r\n  copying monai/visualize/__init__.py -> build/lib.linux-x86_64-3.7/monai/visualize\r\n  creating build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/module.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/enums.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/aliases.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/decorators.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/__init__.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  copying monai/utils/misc.py -> build/lib.linux-x86_64-3.7/monai/utils\r\n  creating build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/utils.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/trainer.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/multi_gpu_supervised_trainer.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/workflow.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/__init__.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  copying monai/engines/evaluator.py -> build/lib.linux-x86_64-3.7/monai/engines\r\n  creating build/lib.linux-x86_64-3.7/monai/apps\r\n  copying monai/apps/utils.py -> build/lib.linux-x86_64-3.7/monai/apps\r\n  copying monai/apps/datasets.py -> build/lib.linux-x86_64-3.7/monai/apps\r\n  copying monai/apps/__init__.py -> build/lib.linux-x86_64-3.7/monai/apps\r\n  creating build/lib.linux-x86_64-3.7/monai/losses\r\n  copying monai/losses/focal_loss.py -> build/lib.linux-x86_64-3.7/monai/losses\r\n  copying monai/losses/dice.py -> build/lib.linux-x86_64-3.7/monai/losses\r\n  copying monai/losses/tversky.py -> build/lib.linux-x86_64-3.7/monai/losses\r\n  copying monai/losses/__init__.py -> build/lib.linux-x86_64-3.7/monai/losses\r\n  creating build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/grid_dataset.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/csv_saver.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/nifti_saver.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/nifti_writer.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/nifti_reader.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/utils.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/png_writer.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/image_reader.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/synthetic.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/png_saver.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/dataloader.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/decathlon_datalist.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/__init__.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  copying monai/data/dataset.py -> build/lib.linux-x86_64-3.7/monai/data\r\n  creating build/lib.linux-x86_64-3.7/monai/metrics\r\n  copying monai/metrics/meandice.py -> build/lib.linux-x86_64-3.7/monai/metrics\r\n  copying monai/metrics/rocauc.py -> build/lib.linux-x86_64-3.7/monai/metrics\r\n  copying monai/metrics/confusion_matrix_utils.py -> build/lib.linux-x86_64-3.7/monai/metrics\r\n  copying monai/metrics/__init__.py -> build/lib.linux-x86_64-3.7/monai/metrics\r\n  copying monai/metrics/confusion_matrix.py -> build/lib.linux-x86_64-3.7/monai/metrics\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/io\r\n  copying monai/transforms/io/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/io\r\n  copying monai/transforms/io/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/io\r\n  copying monai/transforms/io/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/io\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/croppad\r\n  copying monai/transforms/croppad/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/croppad\r\n  copying monai/transforms/croppad/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/croppad\r\n  copying monai/transforms/croppad/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/croppad\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/post\r\n  copying monai/transforms/post/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/post\r\n  copying monai/transforms/post/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/post\r\n  copying monai/transforms/post/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/post\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/utility\r\n  copying monai/transforms/utility/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/utility\r\n  copying monai/transforms/utility/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/utility\r\n  copying monai/transforms/utility/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/utility\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/intensity\r\n  copying monai/transforms/intensity/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/intensity\r\n  copying monai/transforms/intensity/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/intensity\r\n  copying monai/transforms/intensity/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/intensity\r\n  creating build/lib.linux-x86_64-3.7/monai/transforms/spatial\r\n  copying monai/transforms/spatial/array.py -> build/lib.linux-x86_64-3.7/monai/transforms/spatial\r\n  copying monai/transforms/spatial/dictionary.py -> build/lib.linux-x86_64-3.7/monai/transforms/spatial\r\n  copying monai/transforms/spatial/__init__.py -> build/lib.linux-x86_64-3.7/monai/transforms/spatial\r\n  creating build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/generator.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/densenet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/highresnet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/vnet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/senet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/nnunet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/classifier.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/segresnet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/regressor.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/ahnet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/__init__.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  copying monai/networks/nets/unet.py -> build/lib.linux-x86_64-3.7/monai/networks/nets\r\n  creating build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/segresnet_block.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/nnunet_block.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/fcn.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/upsample.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/squeeze_and_excitation.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/downsample.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/aspp.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/convolutions.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  copying monai/networks/blocks/__init__.py -> build/lib.linux-x86_64-3.7/monai/networks/blocks\r\n  creating build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/networks/layers/simplelayers.py -> build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/networks/layers/spatial_transforms.py -> build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/networks/layers/__init__.py -> build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/networks/layers/factories.py -> build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/networks/layers/convutils.py -> build/lib.linux-x86_64-3.7/monai/networks/layers\r\n  copying monai/py.typed -> build/lib.linux-x86_64-3.7/monai\r\n  UPDATING build/lib.linux-x86_64-3.7/monai/_version.py\r\n  set build/lib.linux-x86_64-3.7/monai/_version.py to '0.2.0+156.ge6ac8bf'\r\n  running build_ext\r\n  building 'monai._C' extension\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc\r\n  creating /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm\r\n  Emitting ninja build file /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/build.ninja...\r\n  Compiling objects...\r\n  Allowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n  [1/3] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I/tmp/pip-install-soyjh8vt/monai/monai/csrc -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/TH -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/THC -I/usr/local/cuda/include -I/miniconda3/envs/mtr_env/include/python3.7m -c -c /tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cuda.cu -o /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cuda.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options ''\"'\"'-fPIC'\"'\"'' -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_75,code=sm_75 -std=c++14\r\n  FAILED: /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cuda.o\r\n  /usr/local/cuda/bin/nvcc -DWITH_CUDA -I/tmp/pip-install-soyjh8vt/monai/monai/csrc -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/TH -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/THC -I/usr/local/cuda/include -I/miniconda3/envs/mtr_env/include/python3.7m -c -c /tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cuda.cu -o /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cuda.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options ''\"'\"'-fPIC'\"'\"'' -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_75,code=sm_75 -std=c++14\r\n  In file included from /usr/local/cuda/include/cuda_runtime.h:83,\r\n                   from <command-line>:\r\n  /usr/local/cuda/include/crt/host_config.h:138:2: error: #error -- unsupported GNU version! gcc versions later than 8 are not supported!\r\n    138 | #error -- unsupported GNU version! gcc versions later than 8 are not supported!\r\n        |  ^~~~~\r\n  [2/3] c++ -MMD -MF /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cpu.o.d -pthread -B /miniconda3/envs/mtr_env/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DWITH_CUDA -I/tmp/pip-install-soyjh8vt/monai/monai/csrc -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/TH -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/THC -I/usr/local/cuda/include -I/miniconda3/envs/mtr_env/include/python3.7m -c -c /tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cpu.cpp -o /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cpu.o -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -std=c++14\r\n  cc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C/ObjC but not for C++\r\n  In file included from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/ATen/Parallel.h:149,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/utils.h:3,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn/cloneable.h:5,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn.h:3,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/all.h:7,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/extension.h:4,\r\n                   from /tmp/pip-install-soyjh8vt/monai/monai/csrc/lltm/lltm_cpu.cpp:14:\r\n  /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/ATen/ParallelOpenMP.h:84: warning: ignoring #pragma omp parallel [-Wunknown-pragmas]\r\n     84 | #pragma omp parallel for if ((end - begin) >= grain_size)\r\n        |\r\n  [3/3] c++ -MMD -MF /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/ext.o.d -pthread -B /miniconda3/envs/mtr_env/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DWITH_CUDA -I/tmp/pip-install-soyjh8vt/monai/monai/csrc -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/TH -I/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/THC -I/usr/local/cuda/include -I/miniconda3/envs/mtr_env/include/python3.7m -c -c /tmp/pip-install-soyjh8vt/monai/monai/csrc/ext.cpp -o /tmp/pip-install-soyjh8vt/monai/build/temp.linux-x86_64-3.7/tmp/pip-install-soyjh8vt/monai/monai/csrc/ext.o -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -std=c++14\r\n  cc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C/ObjC but not for C++\r\n  In file included from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/ATen/Parallel.h:149,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/utils.h:3,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn/cloneable.h:5,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn.h:3,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/all.h:7,\r\n                   from /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/torch/extension.h:4,\r\n                   from /tmp/pip-install-soyjh8vt/monai/monai/csrc/ext.cpp:14:\r\n  /tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/include/ATen/ParallelOpenMP.h:84: warning: ignoring #pragma omp parallel [-Wunknown-pragmas]\r\n     84 | #pragma omp parallel for if ((end - begin) >= grain_size)\r\n        |\r\n  ninja: build stopped: subcommand failed.\r\n  Traceback (most recent call last):\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/utils/cpp_extension.py\", line 1515, in _run_ninja_build\r\n      env=env)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/subprocess.py\", line 512, in run\r\n      output=stdout, stderr=stderr)\r\n  subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n  \r\n  During handling of the above exception, another exception occurred:\r\n  \r\n  Traceback (most recent call last):\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 280, in <module>\r\n      main()\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 263, in main\r\n      json_out['return_val'] = hook(**hook_input['kwargs'])\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 205, in build_wheel\r\n      metadata_directory)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 217, in build_wheel\r\n      wheel_directory, config_settings)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 202, in _build_with_temp_dir\r\n      self.run_setup()\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 254, in run_setup\r\n      self).run_setup(setup_script=setup_script)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 145, in run_setup\r\n      exec(compile(code, __file__, 'exec'), locals())\r\n    File \"setup.py\", line 95, in <module>\r\n      ext_modules=get_extensions(),\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/__init__.py\", line 153, in setup\r\n      return distutils.core.setup(**attrs)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/core.py\", line 148, in setup\r\n      dist.run_commands()\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/dist.py\", line 966, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/wheel/bdist_wheel.py\", line 290, in run\r\n      self.run_command('build')\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/command/build.py\", line 135, in run\r\n      self.run_command(cmd_name)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/dist.py\", line 985, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/command/build_ext.py\", line 79, in run\r\n      _build_ext.run(self)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/command/build_ext.py\", line 340, in run\r\n      self.build_extensions()\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/utils/cpp_extension.py\", line 649, in build_extensions\r\n      build_ext.build_extensions(self)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/command/build_ext.py\", line 449, in build_extensions\r\n      self._build_extensions_serial()\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/command/build_ext.py\", line 474, in _build_extensions_serial\r\n      self.build_extension(ext)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/setuptools/command/build_ext.py\", line 196, in build_extension\r\n      _build_ext.build_extension(self, ext)\r\n    File \"/miniconda3/envs/mtr_env/lib/python3.7/distutils/command/build_ext.py\", line 534, in build_extension\r\n      depends=ext.depends)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/utils/cpp_extension.py\", line 478, in unix_wrap_ninja_compile\r\n      with_cuda=with_cuda)\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/utils/cpp_extension.py\", line 1233, in _write_ninja_file_and_compile_objects\r\n      error_prefix='Error compiling objects for extension')\r\n    File \"/tmp/pip-build-env-5d2h2p6j/overlay/lib/python3.7/site-packages/torch/utils/cpp_extension.py\", line 1529, in _run_ninja_build\r\n      raise RuntimeError(message)\r\n  RuntimeError: Error compiling objects for extension\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for MONAI\r\nFailed to build MONAI\r\nERROR: Could not build wheels for MONAI which use PEP 517 and cannot be installed directly\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1025", "id": 698980783, "node_id": "MDU6SXNzdWU2OTg5ODA3ODM=", "number": 1025, "title": "ImageReader can't support multi-threads", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-11T07:54:43Z", "updated_at": "2020-09-15T04:10:00Z", "closed_at": "2020-09-15T04:10:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs we have some member variables in the ImageReaders, it can't support multi-threads so far, need to update it.\r\nPyTorch DataLoader is multi-processing, so we didn't realize this issue before.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1013", "id": 696651153, "node_id": "MDU6SXNzdWU2OTY2NTExNTM=", "number": 1013, "title": "Error in citation", "user": {"login": "FabianIsensee", "id": 11302164, "node_id": "MDQ6VXNlcjExMzAyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/11302164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabianIsensee", "html_url": "https://github.com/FabianIsensee", "followers_url": "https://api.github.com/users/FabianIsensee/followers", "following_url": "https://api.github.com/users/FabianIsensee/following{/other_user}", "gists_url": "https://api.github.com/users/FabianIsensee/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabianIsensee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabianIsensee/subscriptions", "organizations_url": "https://api.github.com/users/FabianIsensee/orgs", "repos_url": "https://api.github.com/users/FabianIsensee/repos", "events_url": "https://api.github.com/users/FabianIsensee/events{/privacy}", "received_events_url": "https://api.github.com/users/FabianIsensee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-09-09T09:30:28Z", "updated_at": "2020-09-19T11:04:11Z", "closed_at": "2020-09-19T11:04:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nthis architecture seems to be a reimplementation of the dynamic U-net used by nnU-Net:\r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/74a89f8eb2e1aa376e32b481f1bf5ffe11caca92/monai/networks/nets/nnunet.py#L20\r\n\r\nHowever, the paper you are providing as reference is my BraTS 2018 contribution which has nothing to do with that (it has a rather unfortunate Title, though :-) ):\r\nNo New-Net <https://arxiv.org/pdf/1809.10483.pdf>\r\n\r\nIt would be great if you could cite the correct paper(s): https://arxiv.org/abs/1904.08128, https://arxiv.org/abs/1809.10486\r\n\r\nAs a side-note: nnU-Net is so much more than the architecture. Automated configuration of the entire pipeline is the key contribution. In fact (and as we attempted to highlight by choosing the name) the architecture is quite irrelevant (as long as it is kind of okay-ish). So naming the dynamic U-Net architecture nnUNet seems misleading. \r\n\r\nBest,\r\nFabian\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/1007", "id": 696145196, "node_id": "MDU6SXNzdWU2OTYxNDUxOTY=", "number": 1007, "title": "LoadImage Fails to Load Certain JPEGs", "user": {"login": "ericspod", "id": 17726042, "node_id": "MDQ6VXNlcjE3NzI2MDQy", "avatar_url": "https://avatars.githubusercontent.com/u/17726042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericspod", "html_url": "https://github.com/ericspod", "followers_url": "https://api.github.com/users/ericspod/followers", "following_url": "https://api.github.com/users/ericspod/following{/other_user}", "gists_url": "https://api.github.com/users/ericspod/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericspod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericspod/subscriptions", "organizations_url": "https://api.github.com/users/ericspod/orgs", "repos_url": "https://api.github.com/users/ericspod/repos", "events_url": "https://api.github.com/users/ericspod/events{/privacy}", "received_events_url": "https://api.github.com/users/ericspod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-09-08T20:11:19Z", "updated_at": "2020-10-27T15:27:36Z", "closed_at": "2020-09-15T10:34:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nLoadImage fails to correctly load certain JPEGs. The produced array contains streaked information. Test image included:\r\n\r\n![bad_image](https://user-images.githubusercontent.com/17726042/92523062-a3882680-f217-11ea-9e48-3ac644559ca9.jpg)\r\n.\r\n\r\n**To Reproduce**\r\n\r\n```py\r\nim=LoadImage(image_only=True)(\"bad_image.jpg\")\r\nplt.imshow(im[0],cmap=\"gray\")\r\n```\r\n\r\nThis produces\r\n\r\n![result](https://user-images.githubusercontent.com/17726042/92523153-cb778a00-f217-11ea-9ec9-30ef1313f3c8.png)\r\n\r\n\r\n**Expected behavior**\r\nImage should look like the attached image but comes out corrupted when viewed with matplotlib, using `plt.imread` does work.\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Ubuntu\r\n - Python version 3.7\r\n - MONAI version 62903b6924e572edfb0d44ce333dd0251e659bfe\r\n - CUDA/cuDNN version 11, 7.5\r\n - GPU Titan Xp\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/1007/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/986", "id": 691849701, "node_id": "MDU6SXNzdWU2OTE4NDk3MDE=", "number": 986, "title": "monai suddenly stoped importing and produced errors", "user": {"login": "shrutishrestha", "id": 33342277, "node_id": "MDQ6VXNlcjMzMzQyMjc3", "avatar_url": "https://avatars.githubusercontent.com/u/33342277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shrutishrestha", "html_url": "https://github.com/shrutishrestha", "followers_url": "https://api.github.com/users/shrutishrestha/followers", "following_url": "https://api.github.com/users/shrutishrestha/following{/other_user}", "gists_url": "https://api.github.com/users/shrutishrestha/gists{/gist_id}", "starred_url": "https://api.github.com/users/shrutishrestha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shrutishrestha/subscriptions", "organizations_url": "https://api.github.com/users/shrutishrestha/orgs", "repos_url": "https://api.github.com/users/shrutishrestha/repos", "events_url": "https://api.github.com/users/shrutishrestha/events{/privacy}", "received_events_url": "https://api.github.com/users/shrutishrestha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-03T10:30:48Z", "updated_at": "2020-09-07T08:34:32Z", "closed_at": "2020-09-07T08:34:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used this:\r\npip install git+https://github.com/Project-MONAI/MONAI#egg=MONAI \r\nto import  and this issue occurred several times\r\n\r\n<img width=\"1413\" alt=\"Screen Shot 2020-09-03 at 4 13 32 PM\" src=\"https://user-images.githubusercontent.com/33342277/92104115-9d054380-ee00-11ea-926e-6a7b3c1393f8.png\">", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/965", "id": 687616539, "node_id": "MDU6SXNzdWU2ODc2MTY1Mzk=", "number": 965, "title": "Bug: Github repo readme says notebooks are in old examples folder.", "user": {"login": "gagandaroach", "id": 25407172, "node_id": "MDQ6VXNlcjI1NDA3MTcy", "avatar_url": "https://avatars.githubusercontent.com/u/25407172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gagandaroach", "html_url": "https://github.com/gagandaroach", "followers_url": "https://api.github.com/users/gagandaroach/followers", "following_url": "https://api.github.com/users/gagandaroach/following{/other_user}", "gists_url": "https://api.github.com/users/gagandaroach/gists{/gist_id}", "starred_url": "https://api.github.com/users/gagandaroach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gagandaroach/subscriptions", "organizations_url": "https://api.github.com/users/gagandaroach/orgs", "repos_url": "https://api.github.com/users/gagandaroach/repos", "events_url": "https://api.github.com/users/gagandaroach/events{/privacy}", "received_events_url": "https://api.github.com/users/gagandaroach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-08-28T00:03:50Z", "updated_at": "2020-08-28T17:47:31Z", "closed_at": "2020-08-28T17:47:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Github readme says tutorial notebooks are located in the old examples folder.\r\n\r\n**Screenshot**\r\n![image](https://user-images.githubusercontent.com/25407172/91506442-b1dd5680-e897-11ea-92f0-d47637059dcc.png)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/965/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/962", "id": 687274430, "node_id": "MDU6SXNzdWU2ODcyNzQ0MzA=", "number": 962, "title": "Document warning when make html", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-27T14:09:22Z", "updated_at": "2020-08-27T16:18:20Z", "closed_at": "2020-08-27T16:18:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nGot below warining when `make html`:\r\n```\r\n/workspace/data/medical/MONAI/monai/data/dataset.py:docstring of monai.data.SmartCacheDataset:51: WARNING: Unexpected indentation.\r\n/workspace/data/medical/MONAI/monai/data/dataset.py:docstring of monai.data.SmartCacheDataset:52: WARNING: Block quote ends without a blank line; unexpected unindent.\r\n/workspace/data/medical/MONAI/monai/networks/blocks/upsample.py:docstring of monai.networks.blocks.SubpixelUpsample:11: WARNING: Definition list ends without a blank line; unexpected unindent.\r\n/workspace/data/medical/MONAI/monai/networks/utils.py:docstring of monai.networks.utils.pixelshuffle:5: WARNING: Definition list ends without a blank line; unexpected unindent.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/962/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/952", "id": 686145068, "node_id": "MDU6SXNzdWU2ODYxNDUwNjg=", "number": 952, "title": "Preventing imports of all monai submodules", "user": {"login": "robogast", "id": 5969044, "node_id": "MDQ6VXNlcjU5NjkwNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5969044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robogast", "html_url": "https://github.com/robogast", "followers_url": "https://api.github.com/users/robogast/followers", "following_url": "https://api.github.com/users/robogast/following{/other_user}", "gists_url": "https://api.github.com/users/robogast/gists{/gist_id}", "starred_url": "https://api.github.com/users/robogast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robogast/subscriptions", "organizations_url": "https://api.github.com/users/robogast/orgs", "repos_url": "https://api.github.com/users/robogast/repos", "events_url": "https://api.github.com/users/robogast/events{/privacy}", "received_events_url": "https://api.github.com/users/robogast/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-26T09:01:55Z", "updated_at": "2020-08-31T14:35:26Z", "closed_at": "2020-08-31T14:35:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When importing monai in any way, all submodules are automatically made available, e.g.:\r\n`import monai` results in the root level `import transforms` being suddenly possible (instead of needing `from monai import transforms`)\r\n\r\nThis seems to me like undesirable behavior: any project that has a **local** `transforms` submodule is suddenly unable to import it, because this results in a name conflict with the imported monai modules.\r\nWhen looking at any other package, similar behavior doesn't occur: after performing `import torch`, one doesn't expect `import utils` to import `torch.utils`(!)\r\n\r\nTo conclude:\r\n--- Current (undesirable) situation ---\r\n```python\r\nimport monai\r\nimport transforms  # no error\r\n\r\n# do something with transforms\r\n# e.g. transforms.Compose([...])\r\n```\r\n\r\n--- Desired situation ---\r\n```python\r\nimport monai\r\n\r\n# do something with transforms\r\n# e.g. monai.transforms.Compose([...])\r\n```\r\nOr, with specific import:\r\n```python\r\nfrom monai import transforms\r\n\r\n# do something with transforms\r\n# e.g. transforms.Compose([...])\r\n```\r\nAnd when no local module is present:\r\n```python\r\nimport monai\r\nimport transforms\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'transforms'\r\n```\r\n\r\nThe same holds for all monai submodules (`utils`, `metrics`, `losses`, etc.)\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/952/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/910", "id": 681070260, "node_id": "MDU6SXNzdWU2ODEwNzAyNjA=", "number": 910, "title": "torchvision is missing at all the optional import related config", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-18T14:05:00Z", "updated_at": "2020-08-20T15:42:23Z", "closed_at": "2020-08-20T15:42:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nNow we have `torchvision` as optional import for AHNet, but haven't added `torchvision` and `gdown` to all the optional import related config.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/910/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/906", "id": 680626017, "node_id": "MDU6SXNzdWU2ODA2MjYwMTc=", "number": 906, "title": "sliding_window_inference() in monai.inferers went wrong when roi_size=(M,N,1)", "user": {"login": "Can-Zhao", "id": 69829124, "node_id": "MDQ6VXNlcjY5ODI5MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/69829124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Can-Zhao", "html_url": "https://github.com/Can-Zhao", "followers_url": "https://api.github.com/users/Can-Zhao/followers", "following_url": "https://api.github.com/users/Can-Zhao/following{/other_user}", "gists_url": "https://api.github.com/users/Can-Zhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Can-Zhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Can-Zhao/subscriptions", "organizations_url": "https://api.github.com/users/Can-Zhao/orgs", "repos_url": "https://api.github.com/users/Can-Zhao/repos", "events_url": "https://api.github.com/users/Can-Zhao/events{/privacy}", "received_events_url": "https://api.github.com/users/Can-Zhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-18T01:42:08Z", "updated_at": "2020-08-18T15:21:25Z", "closed_at": "2020-08-18T15:21:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nsliding_window_inference() gives NaN when roi_size=(M,N,1)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to sliding_window_inference() in monai.inferers\r\n2. Go to the line: run\r\nslices = dense_patch_slices( image_size=(450, 344, 450), roi_size=(96, 96, 1), scan_interval=(72,72,0))\r\n\r\n**Expected behavior**\r\nYou will get len(slices)=30, which should be 30*450 instead.\r\n\r\n\r\n - MONAI latest\r\n - docker monai:latest\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/877", "id": 675776516, "node_id": "MDU6SXNzdWU2NzU3NzY1MTY=", "number": 877, "title": "spleen_segmentation_3d_lightning Notebook Bug", "user": {"login": "gagandaroach", "id": 25407172, "node_id": "MDQ6VXNlcjI1NDA3MTcy", "avatar_url": "https://avatars.githubusercontent.com/u/25407172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gagandaroach", "html_url": "https://github.com/gagandaroach", "followers_url": "https://api.github.com/users/gagandaroach/followers", "following_url": "https://api.github.com/users/gagandaroach/following{/other_user}", "gists_url": "https://api.github.com/users/gagandaroach/gists{/gist_id}", "starred_url": "https://api.github.com/users/gagandaroach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gagandaroach/subscriptions", "organizations_url": "https://api.github.com/users/gagandaroach/orgs", "repos_url": "https://api.github.com/users/gagandaroach/repos", "events_url": "https://api.github.com/users/gagandaroach/events{/privacy}", "received_events_url": "https://api.github.com/users/gagandaroach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gagandaroach", "id": 25407172, "node_id": "MDQ6VXNlcjI1NDA3MTcy", "avatar_url": "https://avatars.githubusercontent.com/u/25407172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gagandaroach", "html_url": "https://github.com/gagandaroach", "followers_url": "https://api.github.com/users/gagandaroach/followers", "following_url": "https://api.github.com/users/gagandaroach/following{/other_user}", "gists_url": "https://api.github.com/users/gagandaroach/gists{/gist_id}", "starred_url": "https://api.github.com/users/gagandaroach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gagandaroach/subscriptions", "organizations_url": "https://api.github.com/users/gagandaroach/orgs", "repos_url": "https://api.github.com/users/gagandaroach/repos", "events_url": "https://api.github.com/users/gagandaroach/events{/privacy}", "received_events_url": "https://api.github.com/users/gagandaroach/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gagandaroach", "id": 25407172, "node_id": "MDQ6VXNlcjI1NDA3MTcy", "avatar_url": "https://avatars.githubusercontent.com/u/25407172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gagandaroach", "html_url": "https://github.com/gagandaroach", "followers_url": "https://api.github.com/users/gagandaroach/followers", "following_url": "https://api.github.com/users/gagandaroach/following{/other_user}", "gists_url": "https://api.github.com/users/gagandaroach/gists{/gist_id}", "starred_url": "https://api.github.com/users/gagandaroach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gagandaroach/subscriptions", "organizations_url": "https://api.github.com/users/gagandaroach/orgs", "repos_url": "https://api.github.com/users/gagandaroach/repos", "events_url": "https://api.github.com/users/gagandaroach/events{/privacy}", "received_events_url": "https://api.github.com/users/gagandaroach/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-09T21:38:25Z", "updated_at": "2020-08-13T11:53:36Z", "closed_at": "2020-08-10T02:52:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nLast cell in notebook \"Check best model output with the input image and label\"  does not execute.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run Spleen Segmentation 3d Lightning Notebook\r\n2. cell produces error: \r\n\r\n> RuntimeError: Input type (torch.cuda.FloatTensor) and weight type (torch.FloatTensor) should be the same\r\n\r\n**Expected behavior**\r\nModel should successfully be evaluated \r\n\r\n**Screenshots**\r\n\r\nIdentified by @benjamin-gorman in https://github.com/Project-MONAI/MONAI/blob/80e2976573a9dff92fd5cd41d830b606a2e956b0/examples/notebooks/spleen_segmentation_3d_lightning.ipynb\r\n\r\n**Environment (please complete the following information):**\r\nI reproduced the bug on\r\n - OS: Debian Buster\r\n - Python version:  3.8.3\r\n - MONAI version: master\r\n - CUDA/cuDNN version: 11.0\r\n - GPU models and configuration: GTX 1080TI \r\n\r\n**Additional context**\r\nAdding PR fix\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/877/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/863", "id": 674260747, "node_id": "MDU6SXNzdWU2NzQyNjA3NDc=", "number": 863, "title": "sphinx documentation warnings", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-06T12:04:26Z", "updated_at": "2020-08-06T15:57:26Z", "closed_at": "2020-08-06T15:57:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nbuilding the documentation locally generates a couple of warnings:\r\n```bash\r\nbuilding [mo]: targets for 0 po files that are out of date\r\nbuilding [html]: targets for 16 source files that are out of date\r\nupdating environment: [new config] 16 added, 0 changed, 0 removed\r\n/usr/local/anaconda3/envs/py36/lib/python3.6/site-packages/recommonmark/parser.py:75: UserWarning: Container node skipped: type=document\r\n  warn(\"Container node skipped: type={0}\".format(mdnode.t))\r\n/usr/local/anaconda3/envs/py36/lib/python3.6/site-packages/recommonmark/parser.py:75: UserWarning: Container node skipped: type=document\r\n  warn(\"Container node skipped: type={0}\".format(mdnode.t))\r\nreading sources... [100%] visualize                                                                                            \r\nWARNING: autodoc: failed to import class 'handlers.CheckpointLoader' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.CheckpointSaver' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.ClassificationSaver' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.MeanDice' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.ROCAUC' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.MetricLogger' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.SegmentationSaver' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.StatsHandler' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.TensorBoardStatsHandler' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.LrScheduleHandler' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nWARNING: autodoc: failed to import class 'handlers.ValidationHandler' from module 'monai'; the following exception was raised:\r\ncannot import name 'RemovableEventHandle'\r\nlooking for now-outdated files... none found\r\npickling environment... done\r\nchecking consistency... done\r\npreparing documents... done\r\nwriting output... [100%] visualize                              \r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to `MONAI/docs`\r\n2. ` pip install -U -r requirements.txt` to install doc deps\r\n3. Run `make clean; make html`\r\n\r\n**Expected behavior**\r\nno warnings in the building log\r\n\r\n**Environment (please complete the following information):**\r\n```\r\nMONAI version: 0.2.0+77.g783f6a1\r\nPython version: 3.6.10 |Anaconda, Inc.| (default, Mar 25 2020, 18:53:43)  [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nNumpy version: 1.19.1\r\nPytorch version: 1.6.0\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.3.0\r\nNibabel version: 3.1.1\r\nscikit-image version: 0.17.2\r\nPillow version: 7.2.0\r\nTensorboard version: 2.3.0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/854", "id": 673612448, "node_id": "MDU6SXNzdWU2NzM2MTI0NDg=", "number": 854, "title": "sliding_window_inference uses to much gpu memory if roi_size is small and images to infer large", "user": {"login": "elitap", "id": 9333139, "node_id": "MDQ6VXNlcjkzMzMxMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/9333139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elitap", "html_url": "https://github.com/elitap", "followers_url": "https://api.github.com/users/elitap/followers", "following_url": "https://api.github.com/users/elitap/following{/other_user}", "gists_url": "https://api.github.com/users/elitap/gists{/gist_id}", "starred_url": "https://api.github.com/users/elitap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elitap/subscriptions", "organizations_url": "https://api.github.com/users/elitap/orgs", "repos_url": "https://api.github.com/users/elitap/repos", "events_url": "https://api.github.com/users/elitap/events{/privacy}", "received_events_url": "https://api.github.com/users/elitap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-05T15:06:34Z", "updated_at": "2020-08-07T10:25:08Z", "closed_at": "2020-08-07T10:25:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nsliding_window_inference runns ot of memory if roi_size is small and images to infer large\r\n\r\n**To Reproduce**\r\nevaluete a highres3dnet with images larger than 512x512x256 and roi_size of the sliding_window_inference option of [16,16,16] and the required gpu memory exceeds 8gb \r\n\r\n**Expected behavior**\r\nless memory should be used\r\n\r\n**Environment (please complete the following information):**\r\nMONAI version: 0.2.0\r\nPython version: 3.6.9 (default, Jul 17 2020, 12:50:27)  [GCC 8.4.0]\r\nNumpy version: 1.19.0\r\nPytorch version: 1.5.0+cu101\r\n\r\n**Additional context**\r\nsliding window inference seems to be broken with the current nightlies, a runntime exception occures in monai.networks.utils in to_norm_affine at line: new_affine = src_xform @ affine @ torch.inverse(dst_xform). Seems that the segmentation saver is not correctely reading out the meta data dict from the batch.\r\n\r\nHave the bug fixed at least for version 0.2.0 and will send a pull request\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/854/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/832", "id": 668470576, "node_id": "MDU6SXNzdWU2Njg0NzA1NzY=", "number": 832, "title": "Integration test failed on PyTorch 1.6", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-07-30T08:07:15Z", "updated_at": "2020-07-31T02:29:09Z", "closed_at": "2020-07-31T02:29:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nAs PyTorch released v1.6 yesterday, we faced some issue when running 3D segmentation test:\r\n```\r\n======================================================================\r\nFAIL: test_training (__main__.IntegrationSegmentation3D)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"tests/test_integration_segmentation_3d.py\", line 257, in test_training\r\n    rtol=1e-3,\r\n  File \"/opt/conda/lib/python3.6/site-packages/numpy/testing/_private/utils.py\", line 1533, in assert_allclose\r\n    verbose=verbose, header=header, equal_nan=equal_nan)\r\n  File \"/opt/conda/lib/python3.6/site-packages/numpy/testing/_private/utils.py\", line 846, in assert_array_compare\r\n    raise AssertionError(msg)\r\nAssertionError: \r\nNot equal to tolerance rtol=0.001, atol=0\r\n\r\nMismatched elements: 6 / 6 (100%)\r\nMax absolute difference: 0.01720129\r\nMax relative difference: 0.04047175\r\n x: array([0.543151, 0.471052, 0.453605, 0.438546, 0.437794, 0.407818])\r\n y: array([0.544673, 0.475109, 0.444963, 0.427036, 0.433381, 0.42502 ])\r\n\r\n----------------------------------------------------------------------\r\nRan 1 test in 92.377s\r\n\r\nFAILED (failures=1)\r\n```\r\nSeems some behavior of PyTorch changed in v1.6.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/832/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/829", "id": 668349554, "node_id": "MDU6SXNzdWU2NjgzNDk1NTQ=", "number": 829, "title": "Error with tensor size using ArrayDataset, but not with CacheDataset?", "user": {"login": "jillianlee", "id": 56376166, "node_id": "MDQ6VXNlcjU2Mzc2MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/56376166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jillianlee", "html_url": "https://github.com/jillianlee", "followers_url": "https://api.github.com/users/jillianlee/followers", "following_url": "https://api.github.com/users/jillianlee/following{/other_user}", "gists_url": "https://api.github.com/users/jillianlee/gists{/gist_id}", "starred_url": "https://api.github.com/users/jillianlee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jillianlee/subscriptions", "organizations_url": "https://api.github.com/users/jillianlee/orgs", "repos_url": "https://api.github.com/users/jillianlee/repos", "events_url": "https://api.github.com/users/jillianlee/events{/privacy}", "received_events_url": "https://api.github.com/users/jillianlee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}, {"id": 1610444324, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzI0", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-07-30T04:02:53Z", "updated_at": "2020-08-06T15:09:11Z", "closed_at": "2020-08-06T15:09:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm trying to use `ArrayDataset` to train a UNet with a single channeled image. I have my own data augmentation procedure that passes array data of size (160, 160) to `ArrayDataset`. I use the only the minimum transforms as follows:\r\n```\r\ntransforms = Compose([\r\n    AddChannel(),\r\n    ToTensor()\r\n    ])\r\n```\r\nAfter running through the data loader, I get a tensor of size (1, 160, 160).\r\n\r\n I then try and use a UNet with configurations \r\n`model = monai.networks.nets.UNet(dimensions=2, in_channels=1, out_channels=1, channels=(16, 32, 64), strides=(2, 2), num_res_units=2, norm=Norm.BATCH).to(device)`\r\n\r\nThis throws the following error:\r\n`RuntimeError: Expected 4-dimensional input for 4-dimensional weight [16, 1, 3, 3], but got 3-dimensional input of size [1, 160, 160] instead`\r\n\r\nI had previously been able to train a UNet with these configurations with a `CacheDataset` structure, reading directly from the Nifti files and applying the following transforms:\r\n```\r\ntrain_transforms = Compose([\r\n    LoadNiftid(keys=['image', 'label']),\r\n    AddChanneld(keys=['image', 'label']),\r\n    Spacingd(keys=['image', 'label'], pixdim=(1.5, 1.5, 2.), mode=('bilinear', 'nearest')),\r\n    Orientationd(keys=['image', 'label'], axcodes='RAS'),\r\n    Resized(keys=['image'], spatial_size = (160, 160, 72)),\r\n    Resized(keys=['label'], spatial_size = (160, 160, 72)),\r\n    RandSpatialCropSamplesd(keys=['image', 'label'], roi_size=[160, 160, 1], num_samples = 72, random_center = True, random_size = False),\r\n    SqueezeDimd(keys=['image', 'label'], dim=-1),\r\n    ToNumpyd(keys=['image', 'label'])\r\n])\r\n```\r\nThe shape of the image tensor output from these transforms is (160, 160).\r\n\r\nIs the size of the output tensor the issue? Should I do an external squeeze or is there something else I'm doing wrong in setting up the ArrayDataset? \r\n\r\nThanks,\r\nJillian", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/829/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/826", "id": 667696161, "node_id": "MDU6SXNzdWU2Njc2OTYxNjE=", "number": 826, "title": "bug in GeneralizedWassersteinDiceLoss", "user": {"login": "michalhg", "id": 68947727, "node_id": "MDQ6VXNlcjY4OTQ3NzI3", "avatar_url": "https://avatars.githubusercontent.com/u/68947727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michalhg", "html_url": "https://github.com/michalhg", "followers_url": "https://api.github.com/users/michalhg/followers", "following_url": "https://api.github.com/users/michalhg/following{/other_user}", "gists_url": "https://api.github.com/users/michalhg/gists{/gist_id}", "starred_url": "https://api.github.com/users/michalhg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michalhg/subscriptions", "organizations_url": "https://api.github.com/users/michalhg/orgs", "repos_url": "https://api.github.com/users/michalhg/repos", "events_url": "https://api.github.com/users/michalhg/events{/privacy}", "received_events_url": "https://api.github.com/users/michalhg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-07-29T09:32:22Z", "updated_at": "2020-07-29T14:09:00Z", "closed_at": "2020-07-29T14:09:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "in **GeneralizedWassersteinDiceLoss** the forward() is missing : \r\n\r\nif not(target.type() in [torch.LongTensor, torch.cuda.LongTensor]):\r\n            target = target.long()\r\n\r\nsince the wasserstein_distance_map expects flat_target to be a long  integer type tensor\r\n\r\nplease fix. otherwise it throws an error", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/826/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/809", "id": 664544769, "node_id": "MDU6SXNzdWU2NjQ1NDQ3Njk=", "number": 809, "title": "black and mypy didn't format chars more than 120", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-07-23T14:53:32Z", "updated_at": "2021-02-18T10:37:36Z", "closed_at": "2021-02-18T10:37:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nI found some doc-strings > 120 but wasn't formatted or detected by CI, for example:\r\nhttps://github.com/Project-MONAI/MONAI/commit/68cfbd345aeb3622b5434cb8671cc95998be3341#diff-c320296cf3910802a1348c3e65c09f29L44\r\nand\r\nhttps://github.com/Project-MONAI/MONAI/pull/803/commits/68cfbd345aeb3622b5434cb8671cc95998be3341#diff-22747695a3870bf9f59c050fd75e0600L51\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/809/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/807", "id": 664310537, "node_id": "MDU6SXNzdWU2NjQzMTA1Mzc=", "number": 807, "title": "Training instability with Dice Loss/Tversky Loss", "user": {"login": "martaranzini", "id": 28106739, "node_id": "MDQ6VXNlcjI4MTA2NzM5", "avatar_url": "https://avatars.githubusercontent.com/u/28106739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martaranzini", "html_url": "https://github.com/martaranzini", "followers_url": "https://api.github.com/users/martaranzini/followers", "following_url": "https://api.github.com/users/martaranzini/following{/other_user}", "gists_url": "https://api.github.com/users/martaranzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/martaranzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martaranzini/subscriptions", "organizations_url": "https://api.github.com/users/martaranzini/orgs", "repos_url": "https://api.github.com/users/martaranzini/repos", "events_url": "https://api.github.com/users/martaranzini/events{/privacy}", "received_events_url": "https://api.github.com/users/martaranzini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 38, "created_at": "2020-07-23T09:00:32Z", "updated_at": "2022-07-29T09:23:33Z", "closed_at": "2020-10-28T19:38:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I am training a 2D UNet to segment fetal MR images using MONAI and I have been observing some instability in the training when using MONAI Dice loss formulation. After some iteration, the loss jumps up and the network stops learning, as the gradients drop to zero. Here is an example (orange is loss on training set computed over 2D slices, blue is loss on validation computed over 3D volume).\r\n![image](https://user-images.githubusercontent.com/28106739/88265546-9b0a7980-ccc5-11ea-9158-a716dafd32c7.png)\r\n\r\nAfter investigating several aspects (using the same deterministic seed), I've narrowed down the issue to the presence of the ```smooth``` term in both the numerator and denominator of the Dice Loss:\r\n```f = 1.0 - (2.0 * intersection + smooth) / (denominator + smooth)```\r\n\r\nWhen using the formulation:\r\n```f = 1.0 - (2.0 * intersection) / (denominator + smooth)```\r\nwithout the smooth term in the numerator, the training was stable and no longer showed unexpected behaviour:\r\n![image](https://user-images.githubusercontent.com/28106739/88266174-a27e5280-ccc6-11ea-8b5b-ec14c008a92f.png)\r\n[Note: this experiment was trained for much longer to make sure the jump would not appear later in the training]\r\n\r\nThe same pattern was observed also for the Tversky Loss, so it could be worth investigating the stability of the losses to identify the best default option.\r\n\r\n**Software version**\r\nMONAI version: 0.1.0+84.ga683c4e.dirty\r\nPython version: 3.7.4 (default, Jul  9 2019, 03:52:42)  [GCC 5.4.0 20160609]\r\nNumpy version: 1.18.2\r\nPytorch version: 1.4.0\r\nIgnite version: 0.3.0\r\n\r\n**Training information**\r\nUsing MONAI PersistentCache \r\n2D UNet (as default in MONAI)\r\nAdam optimiser, LR = 1e-3, no LR decay\r\nBatch size: 10\r\n\r\n**Other tests**\r\nThe following aspects were investigated but did **not** solve the instability issue:\r\n- Gradient clipping\r\n- Different optimisers (SGD, SGD + Momentum)\r\n- Transforming the binary segmentations to a two-channel approach ([background segmentation, foreground segmentation])\r\n- Choosing ```smooth = 1.0``` as default here (https://github.com/MIC-DKFZ/nnUNet/blob/master/nnunet/training/loss_functions/dice_loss.py). However, this made the behaviour even more severe and the jump would happen sooner in the training.\r\n\r\nThe following losses were also investigated\r\n- Binary Cross Entropy --> stable\r\n- Dice Loss + Binary Cross Entropy --> unstable\r\n- Dice Loss (no smooth at numerator) + Binary Cross Entropy --> stable\r\n- Tversky Loss --> Unstable\r\n- Tversky Loss (no smooth at numerator) --> stable\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/807/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/761", "id": 657343726, "node_id": "MDU6SXNzdWU2NTczNDM3MjY=", "number": 761, "title": "Incorrect operation of dense_patch_slices", "user": {"login": "murraycutforth", "id": 11088372, "node_id": "MDQ6VXNlcjExMDg4Mzcy", "avatar_url": "https://avatars.githubusercontent.com/u/11088372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/murraycutforth", "html_url": "https://github.com/murraycutforth", "followers_url": "https://api.github.com/users/murraycutforth/followers", "following_url": "https://api.github.com/users/murraycutforth/following{/other_user}", "gists_url": "https://api.github.com/users/murraycutforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/murraycutforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/murraycutforth/subscriptions", "organizations_url": "https://api.github.com/users/murraycutforth/orgs", "repos_url": "https://api.github.com/users/murraycutforth/repos", "events_url": "https://api.github.com/users/murraycutforth/events{/privacy}", "received_events_url": "https://api.github.com/users/murraycutforth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-07-15T13:18:54Z", "updated_at": "2020-07-15T22:50:27Z", "closed_at": "2020-07-15T18:11:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nI found that the sliding window inference function was much slower than expected. Looking into this, I found that the dense_patch_slices function is returning many duplicated slices for certain inputs.\r\n\r\n**To Reproduce**\r\nFor example:\r\n\r\n```\r\n>>> x = dense_patch_slices(image_size=(100,100), patch_size=(50,50), scan_interval=(25,25))\r\n>>> for slice in x:\r\n...     print(slice)\r\n... \r\n(slice(0, 50, None), slice(0, 50, None))\r\n(slice(0, 50, None), slice(25, 75, None))\r\n(slice(0, 50, None), slice(50, 100, None))\r\n(slice(0, 50, None), slice(50, 100, None))\r\n(slice(25, 75, None), slice(0, 50, None))\r\n(slice(25, 75, None), slice(25, 75, None))\r\n(slice(25, 75, None), slice(50, 100, None))\r\n(slice(25, 75, None), slice(50, 100, None))\r\n(slice(50, 100, None), slice(0, 50, None))\r\n(slice(50, 100, None), slice(25, 75, None))\r\n(slice(50, 100, None), slice(50, 100, None))\r\n(slice(50, 100, None), slice(50, 100, None))\r\n(slice(50, 100, None), slice(0, 50, None))\r\n(slice(50, 100, None), slice(25, 75, None))\r\n(slice(50, 100, None), slice(50, 100, None))\r\n(slice(50, 100, None), slice(50, 100, None))\r\n```\r\n\r\n**Expected behavior**\r\ndense_patch_slices should return a list of slice objects which cover the volume, overlap by the specified scan interval, but without any duplicates.\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Centos 7\r\n - MONAI version: 0.2.0+34.g267407f\r\n\r\n**Additional context**\r\nI would like to fix this problem, and add a few unit tests for this function at the same time.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/761/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/741", "id": 655075789, "node_id": "MDU6SXNzdWU2NTUwNzU3ODk=", "number": 741, "title": "MedNIST Example Fails on Colab under MONAI 0.2.0 but works on 0.1.0", "user": {"login": "brymrsh", "id": 67912160, "node_id": "MDQ6VXNlcjY3OTEyMTYw", "avatar_url": "https://avatars.githubusercontent.com/u/67912160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brymrsh", "html_url": "https://github.com/brymrsh", "followers_url": "https://api.github.com/users/brymrsh/followers", "following_url": "https://api.github.com/users/brymrsh/following{/other_user}", "gists_url": "https://api.github.com/users/brymrsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/brymrsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brymrsh/subscriptions", "organizations_url": "https://api.github.com/users/brymrsh/orgs", "repos_url": "https://api.github.com/users/brymrsh/repos", "events_url": "https://api.github.com/users/brymrsh/events{/privacy}", "received_events_url": "https://api.github.com/users/brymrsh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-07-10T22:54:54Z", "updated_at": "2020-07-27T20:44:51Z", "closed_at": "2020-07-16T18:42:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to Colab and run through example\r\n2. Install MONAI 0.1.0 to see that it works but fails under 0.2.0\r\n3. Run commands Documented in example\r\n\r\n**Expected behavior**\r\nCan you please update example to work under 0.2.0.\r\n\r\n.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/741/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/730", "id": 654199267, "node_id": "MDU6SXNzdWU2NTQxOTkyNjc=", "number": 730, "title": "Cannot resolve forward reference in type annotations", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-07-09T16:37:12Z", "updated_at": "2020-07-10T09:47:23Z", "closed_at": "2020-07-10T09:47:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n> WARNING: Cannot resolve forward reference in type annotations of \"{}\": name 'ignite' is not defined\r\n\r\nEven with the fix of [``set_type_checking_flag = True``](https://github.com/Project-MONAI/MONAI/blob/master/docs/source/conf.py#L98) there are still unresolved forward references.\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\n1. Go to ``docs/``\r\n2. With [``set_type_checking_flag = False``](https://github.com/Project-MONAI/MONAI/blob/master/docs/source/conf.py#L98)\r\n3. Run ``make html``\r\n\r\n```bash\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.multi_gpu_supervised_trainer.create_multigpu_supervised_evaluator\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.workflow.Workflow\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.Trainer\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.SupervisedTrainer\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.Evaluator\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.SupervisedEvaluator\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.CheckpointSaver.completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.CheckpointSaver.exception_raised\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.CheckpointSaver.interval_completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.CheckpointSaver.metrics_completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.StatsHandler.attach\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.StatsHandler.epoch_completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.StatsHandler.exception_raised\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.StatsHandler.iteration_completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.TensorBoardStatsHandler.attach\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.TensorBoardStatsHandler.epoch_completed\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.handlers.TensorBoardStatsHandler.iteration_completed\": name 'ignite' is not defined\r\n```\r\n\r\n2. With [``set_type_checking_flag = True``](https://github.com/Project-MONAI/MONAI/blob/master/docs/source/conf.py#L98)\r\n3. Run ``make html``\r\n\r\n```bash\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.multi_gpu_supervised_trainer.create_multigpu_supervised_evaluator\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.workflow.Workflow\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.Trainer\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.SupervisedTrainer\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.Evaluator\": name 'ignite' is not defined\r\nWARNING: Cannot resolve forward reference in type annotations of \"monai.engines.SupervisedEvaluator\": name 'ignite' is not defined\r\n```\r\n\r\n**Screenshots**\r\n\r\n![Untitled](https://user-images.githubusercontent.com/42684402/87065991-6d0e3b00-c1d7-11ea-9c2a-edc82aee2e4f.png)\r\n\r\n\r\n**Environment**\r\n- OS: Ubuntu 18.04\r\n- Python version: 3.7.5\r\n- MONAI version: 8516865\r\n\r\n```bash\r\nMONAI version: 0.2.0+28.g8516865\r\nPython version: 3.7.5 (default, Nov  7 2019, 10:50:52)  [GCC 8.3.0]\r\nNumpy version: 1.19.0\r\nPytorch version: 1.5.1\r\n\r\nOptional dependencies:\r\nPytorch Ignite version: 0.3.0\r\nNibabel version: 3.1.1\r\nscikit-image version: 0.17.2\r\nPillow version: 7.2.0\r\nTensorboard version: 2.2.2\r\n```", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/679", "id": 649719638, "node_id": "MDU6SXNzdWU2NDk3MTk2Mzg=", "number": 679, "title": "Missing links for many datasets and tutorials", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-07-02T07:56:10Z", "updated_at": "2020-07-02T09:57:43Z", "closed_at": "2020-07-02T09:57:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nNeed to add the corresponding links of Decathlon dataset in the related tutorials and add many tutorial links to highlight features page.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/679/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/665", "id": 648904483, "node_id": "MDU6SXNzdWU2NDg5MDQ0ODM=", "number": 665, "title": "align_corner should support multiple values", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-07-01T11:25:14Z", "updated_at": "2020-07-01T12:17:30Z", "closed_at": "2020-07-01T12:17:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently, for `Resized`, `Zoomd` and `RandZoomd` transforms, if set different `mode` for \"image\" and \"label\", can't set different `align_corner` for them.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/657", "id": 648140399, "node_id": "MDU6SXNzdWU2NDgxNDAzOTk=", "number": 657, "title": "Incorrect results for MaskedDiceLoss when softmax=True", "user": {"login": "JanSellner", "id": 11442755, "node_id": "MDQ6VXNlcjExNDQyNzU1", "avatar_url": "https://avatars.githubusercontent.com/u/11442755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JanSellner", "html_url": "https://github.com/JanSellner", "followers_url": "https://api.github.com/users/JanSellner/followers", "following_url": "https://api.github.com/users/JanSellner/following{/other_user}", "gists_url": "https://api.github.com/users/JanSellner/gists{/gist_id}", "starred_url": "https://api.github.com/users/JanSellner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JanSellner/subscriptions", "organizations_url": "https://api.github.com/users/JanSellner/orgs", "repos_url": "https://api.github.com/users/JanSellner/repos", "events_url": "https://api.github.com/users/JanSellner/events{/privacy}", "received_events_url": "https://api.github.com/users/JanSellner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-30T12:41:16Z", "updated_at": "2020-07-26T23:27:47Z", "closed_at": "2020-07-26T23:27:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When the softmax parameter `softmax=True` is used in `MaskedDiceLoss`, the masked pixels are not excluded from the computation since the softmax is still applied to the zeroed-out pixels. Example:\r\n\r\n```python\r\nimport math\r\nimport torch\r\nfrom monai.losses import MaskedDiceLoss, DiceLoss\r\n\r\n# shape: (batch, classes, height, width)\r\ninput_prob = torch.tensor([[[[0.1, 0.8]], [[0.9, 0.2]]]])  # [1, 2, 1, 2]\r\ninput_logits = torch.tensor([[[[math.log(0.1), math.log(0.8)]], [[math.log(0.9), math.log(0.2)]]]]) # [1, 2, 1, 2]\r\ntarget = torch.tensor([[[[1, 0]]]])  # [1, 1, 1, 2]\r\nmask = torch.tensor([[[[1, 0]]]])  # [1, 1, 1, 2]\r\n\r\ndice_loss_prob = MaskedDiceLoss(to_onehot_y=True, softmax=False, reduction='none')\r\ndice_loss_logits = MaskedDiceLoss(to_onehot_y=True, softmax=True, reduction='none')\r\n\r\n# This yields the same result\r\ndice_loss_prob(input_prob, target)  # tensor([[0.1579, 0.1429]])\r\ndice_loss_logits(input_logits, target)  # tensor([[0.1579, 0.1429]])\r\n\r\n# This does not (the first one is the correct result)\r\ndice_loss_prob(input_prob, target, mask=mask)  # tensor([[1.0000, 0.0526]])\r\ndice_loss_logits(input_logits, target, mask=mask)  # tensor([[0.3750, 0.2500]])\r\n```\r\n\r\nThe problem is that the [zeroing happens before the softmax](https://github.com/Project-MONAI/MONAI/blob/master/monai/losses/dice.py#L173).\r\n\r\nMy solution would be to apply the masking before [this line](https://github.com/Project-MONAI/MONAI/blob/master/monai/losses/dice.py#L118). Actually, I don't know why there is a `MaskedDiceLoss` class in the first place. I think an additional (optional) argument to the forward function of `DiceLoss` would be sufficient. So, I propose:\r\n- Remove the `MaskedDiceLoss` class.\r\n- Add an additional (optional) argument to the `DiceLoss` class for the mask.\r\n- Add the example above to the tests.\r\n\r\nIf this is fine with you, I could make a PR :-)\r\n\r\nBug is present in commit 11fc31dc1b6b37cf3ed6a3a89e39739629cd3147", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/657/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/653", "id": 647836588, "node_id": "MDU6SXNzdWU2NDc4MzY1ODg=", "number": 653, "title": "html format pictures can't show in docs.monai.io", "user": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-06-30T03:54:19Z", "updated_at": "2020-06-30T09:43:29Z", "closed_at": "2020-06-30T09:43:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nSome of the pictures integrated into the highlight features page in HTML format, can't show: https://docs.monai.io/en/latest/highlights.html\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/653/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/644", "id": 647253516, "node_id": "MDU6SXNzdWU2NDcyNTM1MTY=", "number": 644, "title": "Jaccard (IOU) loss issue", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "ericspod", "id": 17726042, "node_id": "MDQ6VXNlcjE3NzI2MDQy", "avatar_url": "https://avatars.githubusercontent.com/u/17726042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericspod", "html_url": "https://github.com/ericspod", "followers_url": "https://api.github.com/users/ericspod/followers", "following_url": "https://api.github.com/users/ericspod/following{/other_user}", "gists_url": "https://api.github.com/users/ericspod/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericspod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericspod/subscriptions", "organizations_url": "https://api.github.com/users/ericspod/orgs", "repos_url": "https://api.github.com/users/ericspod/repos", "events_url": "https://api.github.com/users/ericspod/events{/privacy}", "received_events_url": "https://api.github.com/users/ericspod/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ericspod", "id": 17726042, "node_id": "MDQ6VXNlcjE3NzI2MDQy", "avatar_url": "https://avatars.githubusercontent.com/u/17726042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericspod", "html_url": "https://github.com/ericspod", "followers_url": "https://api.github.com/users/ericspod/followers", "following_url": "https://api.github.com/users/ericspod/following{/other_user}", "gists_url": "https://api.github.com/users/ericspod/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericspod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericspod/subscriptions", "organizations_url": "https://api.github.com/users/ericspod/orgs", "repos_url": "https://api.github.com/users/ericspod/repos", "events_url": "https://api.github.com/users/ericspod/events{/privacy}", "received_events_url": "https://api.github.com/users/ericspod/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-06-29T10:09:12Z", "updated_at": "2020-06-29T15:07:48Z", "closed_at": "2020-06-29T15:07:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm using dice loss and Jaccard (IOU) loss for segmentation tasks. However, I found the Jaccard(IOU) loss is lower than 0.0 , when I check the code at 'monai/losses/dice.py', class DiceLoss, line128-133, I found the function is implemented as follow:\r\n\r\n ground_o = torch.sum(target, dim=reduce_axis)\r\n pred_o = torch.sum(input, dim=reduce_axis)\r\n denominator = ground_o + pred_o\r\n if self.jaccard:\r\n     denominator -= intersection\r\n f = 1.0 - (2.0 * intersection + smooth) / (denominator + smooth)\r\n\r\nthis means, the Jaccard loss function is written by:\r\njaccard loss function = 1.0 - 2.0 * A\u2229B/A\u222aB \r\n\r\nbut the actual jaccard loss should be:\r\njaccard loss function = 1.0 - A\u2229B/A\u222aB \r\n\r\n\r\n**To Reproduce**\r\ncurrent code has no problem to run optimizer, the loss value reduced even the value is smaller than 0, but I think it is better to fix with standard Jaccard (IOU) function.\r\n\r\n**Expected behavior**\r\nI think the corrected code is : \r\n\r\n ground_o = torch.sum(target, dim=reduce_axis)\r\n pred_o = torch.sum(input, dim=reduce_axis)\r\n denominator = ground_o + pred_o\r\n if self.jaccard:\r\n     denominator = 2.0 * (denominator - intersection)\r\n f = 1.0 - (2.0 * intersection + smooth) / (denominator + smooth)\r\n\r\n**Screenshots**\r\nNone\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Centos7, windows10\r\n - Python version, 3.7\r\n - MONAI version #632 \r\n - CUDA/cuDNN version, cuda 10.2\r\n - GPU models and configuration, None", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/608", "id": 643870532, "node_id": "MDU6SXNzdWU2NDM4NzA1MzI=", "number": 608, "title": "Checkpoint not saved even though loss improving (Pytorch Lighting example)", "user": {"login": "petteriTeikari", "id": 1060514, "node_id": "MDQ6VXNlcjEwNjA1MTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1060514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petteriTeikari", "html_url": "https://github.com/petteriTeikari", "followers_url": "https://api.github.com/users/petteriTeikari/followers", "following_url": "https://api.github.com/users/petteriTeikari/following{/other_user}", "gists_url": "https://api.github.com/users/petteriTeikari/gists{/gist_id}", "starred_url": "https://api.github.com/users/petteriTeikari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petteriTeikari/subscriptions", "organizations_url": "https://api.github.com/users/petteriTeikari/orgs", "repos_url": "https://api.github.com/users/petteriTeikari/repos", "events_url": "https://api.github.com/users/petteriTeikari/events{/privacy}", "received_events_url": "https://api.github.com/users/petteriTeikari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-06-23T14:05:34Z", "updated_at": "2020-06-29T15:32:34Z", "closed_at": "2020-06-29T15:32:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI was trying to implement the PyTorching example:\r\nhttps://github.com/Project-MONAI/MONAI/blob/master/examples/notebooks/spleen_segmentation_3d_lightning.ipynb (non-notebook code attached) and noticed that the checkpoints were not saved\r\n\r\n**Expected behavior**\r\nAs in screencap `mean_val_dice` was improving, but no checkpoint was saved to disk? Is the problem similar to here https://github.com/PyTorchLightning/pytorch-lightning/issues/511\r\n\r\nI replaced \r\n\r\n`return {'log': tensorboard_logs}`\r\n\r\nfrom `def validation_epoch_end(self, outputs):` to\r\n\r\n`return {'mean_val_dice': torch.tensor(mean_val_dice), 'log': tensorboard_logs}`\r\n\r\nAnd the checkpoints were saved now, but the `{val_loss:.2f}-{val_dice:.2f}` were not updated in checkpoint filename? \r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/1060514/85412790-e2d0a080-b561-11ea-91e5-3dfaf857918a.png)\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Ubuntu 18.04, see screencap for `monai.config.print_config()`\r\n\r\n**Additional context**\r\nNon-notebook code\r\n\r\n```python\r\nimport os\r\nimport sys\r\nimport glob\r\nimport numpy as np\r\nimport torch\r\nfrom torch.utils.data import DataLoader\r\nimport matplotlib.pyplot as plt\r\nimport monai\r\nfrom monai.transforms import \\\r\n    Compose, LoadNiftid, AddChanneld, ScaleIntensityRanged, RandCropByPosNegLabeld, \\\r\n    CropForegroundd, RandAffined, Spacingd, Orientationd, ToTensord\r\nfrom monai.data import list_data_collate\r\nfrom monai.inferers import sliding_window_inference\r\nfrom monai.networks.layers import Norm\r\nfrom monai.metrics import compute_meandice\r\nfrom monai.utils import set_determinism\r\nfrom pytorch_lightning import LightningModule, Trainer, loggers\r\nfrom pytorch_lightning.callbacks.model_checkpoint import ModelCheckpoint\r\n\r\nmonai.config.print_config()\r\n\r\nclass Net(LightningModule):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self._model = monai.networks.nets.UNet(dimensions=3, in_channels=1, out_channels=2,\r\n                                               channels=(16, 32, 64, 128, 256), strides=(2, 2, 2, 2),\r\n                                               num_res_units=2, norm=Norm.BATCH)\r\n        self.loss_function = monai.losses.DiceLoss(to_onehot_y=True, softmax=True)\r\n        self.best_val_dice = 0\r\n        self.best_val_epoch = 0\r\n\r\n    def forward(self, x):\r\n        return self._model(x)\r\n\r\n    def prepare_data(self):\r\n        # set up the correct data path\r\n        # 1.6 GB dataset from https://drive.google.com/drive/folders/1HqEgzS8BV2c7xYNrZdEAnrHk7osJJ--2\r\n        # http://medicaldecathlon.com/\r\n        # Medical Segmentation Decathlon: Generalisable 3D Semantic Segmentation\r\n        data_root = '/home/petteri/Task09_Spleen'\r\n        train_images = sorted(glob.glob(os.path.join(data_root, 'imagesTr', '*.nii.gz')))\r\n        train_labels = sorted(glob.glob(os.path.join(data_root, 'labelsTr', '*.nii.gz')))\r\n        data_dicts = [{'image': image_name, 'label': label_name}\r\n                      for image_name, label_name in zip(train_images, train_labels)]\r\n        train_files, val_files = data_dicts[:-9], data_dicts[-9:]\r\n\r\n        # set deterministic training for reproducibility\r\n        set_determinism(seed=0)\r\n\r\n        # define the data transforms\r\n        train_transforms = Compose([\r\n            LoadNiftid(keys=['image', 'label']),\r\n            AddChanneld(keys=['image', 'label']),\r\n            Spacingd(keys=['image', 'label'], pixdim=(1.5, 1.5, 2.), interp_order=('bilinear', 'nearest')),\r\n            Orientationd(keys=['image', 'label'], axcodes='RAS'),\r\n            ScaleIntensityRanged(keys=['image'], a_min=-57, a_max=164, b_min=0.0, b_max=1.0, clip=True),\r\n            CropForegroundd(keys=['image', 'label'], source_key='image'),\r\n            # randomly crop out patch samples from big image based on pos / neg ratio\r\n            # the image centers of negative samples must be in valid image area\r\n            RandCropByPosNegLabeld(keys=['image', 'label'], label_key='label', size=(96, 96, 96), pos=1,\r\n                                   neg=1, num_samples=4, image_key='image', image_threshold=0),\r\n            # user can also add other random transforms\r\n            # RandAffined(keys=['image', 'label'], mode=('bilinear', 'nearest'), prob=1.0, spatial_size=(96, 96, 96),\r\n            #             rotate_range=(0, 0, np.pi/15), scale_range=(0.1, 0.1, 0.1)),\r\n            ToTensord(keys=['image', 'label'])\r\n        ])\r\n        val_transforms = Compose([\r\n            LoadNiftid(keys=['image', 'label']),\r\n            AddChanneld(keys=['image', 'label']),\r\n            Spacingd(keys=['image', 'label'], pixdim=(1.5, 1.5, 2.), interp_order=('bilinear', 'nearest')),\r\n            Orientationd(keys=['image', 'label'], axcodes='RAS'),\r\n            ScaleIntensityRanged(keys=['image'], a_min=-57, a_max=164, b_min=0.0, b_max=1.0, clip=True),\r\n            CropForegroundd(keys=['image', 'label'], source_key='image'),\r\n            ToTensord(keys=['image', 'label'])\r\n        ])\r\n\r\n        # we use cached datasets - these are 10x faster than regular datasets\r\n        self.train_ds = monai.data.CacheDataset(\r\n            data=train_files, transform=train_transforms, cache_rate=1.0, num_workers=4\r\n        )\r\n        self.val_ds = monai.data.CacheDataset(\r\n            data=val_files, transform=val_transforms, cache_rate=1.0, num_workers=4\r\n        )\r\n        # self.train_ds = monai.data.Dataset(data=train_files, transform=train_transforms)\r\n        # self.val_ds = monai.data.Dataset(data=val_files, transform=val_transforms)\r\n\r\n    def train_dataloader(self):\r\n        train_loader = DataLoader(self.train_ds, batch_size=2, shuffle=True,\r\n                                  num_workers=4, collate_fn=list_data_collate)\r\n        return train_loader\r\n\r\n    def val_dataloader(self):\r\n        val_loader = DataLoader(self.val_ds, batch_size=1, num_workers=4)\r\n        return val_loader\r\n\r\n    def configure_optimizers(self):\r\n        optimizer = torch.optim.Adam(self._model.parameters(), 1e-4)\r\n        return optimizer\r\n\r\n    def training_step(self, batch, batch_idx):\r\n        images, labels = batch['image'], batch['label']\r\n        output = self.forward(images)\r\n        loss = self.loss_function(output, labels)\r\n        tensorboard_logs = {'train_loss': loss.item()}\r\n        return {'loss': loss, 'log': tensorboard_logs}\r\n\r\n    def validation_step(self, batch, batch_idx):\r\n        images, labels = batch['image'], batch['label']\r\n        roi_size = (160, 160, 160)\r\n        sw_batch_size = 4\r\n        outputs = sliding_window_inference(images, roi_size, sw_batch_size, self.forward)\r\n        loss = self.loss_function(outputs, labels)\r\n        value = compute_meandice(y_pred=outputs, y=labels, include_background=False,\r\n                                 to_onehot_y=True, mutually_exclusive=True)\r\n        return {'val_loss': loss, 'val_dice': value}\r\n\r\n    def validation_epoch_end(self, outputs):\r\n        val_dice = 0\r\n        num_items = 0\r\n        for output in outputs:\r\n            val_dice += output['val_dice'].sum().item()\r\n            num_items += len(output['val_dice'])\r\n        mean_val_dice = val_dice / num_items\r\n        tensorboard_logs = {'val_dice': mean_val_dice}\r\n        if mean_val_dice > self.best_val_dice:\r\n            self.best_val_dice = mean_val_dice\r\n            self.best_val_epoch = self.current_epoch\r\n            print('Validation loss improved, a new checkpoint _should be saved_ (Petteri)')\r\n        print('current epoch: {} current mean dice: {:.4f} best mean dice: {:.4f} at epoch {}'.format(\r\n            self.current_epoch, mean_val_dice, self.best_val_dice, self.best_val_epoch))\r\n        return {'log': tensorboard_logs}\r\n\r\n## Run the training\r\n# initialise the LightningModule\r\nnet = Net()\r\n\r\n# set up loggers and checkpoints\r\ntb_logger = loggers.TensorBoardLogger(save_dir='logs')\r\ncheckpoint_callback = ModelCheckpoint(filepath='logs/{epoch}-{val_loss:.2f}-{val_dice:.2f}')\r\n\r\n# initialise Lightning's trainer.\r\ntrainer = Trainer(gpus=[0],\r\n                  max_epochs=600,\r\n                  logger=tb_logger,\r\n                  checkpoint_callback=checkpoint_callback,\r\n                  show_progress_bar=True,\r\n                  num_sanity_val_steps=1\r\n                  )\r\n# train\r\ntrainer.fit(net)\r\n\r\nprint('train completed, best_metric: {:.4f} at epoch {}'.format(net.best_val_dice, net.best_val_epoch))\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/546", "id": 637559672, "node_id": "MDU6SXNzdWU2Mzc1NTk2NzI=", "number": 546, "title": "Classification_3d densenet_training_array example bug", "user": {"login": "oldMarcosVillacanas", "id": 48330663, "node_id": "MDQ6VXNlcjQ4MzMwNjYz", "avatar_url": "https://avatars.githubusercontent.com/u/48330663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oldMarcosVillacanas", "html_url": "https://github.com/oldMarcosVillacanas", "followers_url": "https://api.github.com/users/oldMarcosVillacanas/followers", "following_url": "https://api.github.com/users/oldMarcosVillacanas/following{/other_user}", "gists_url": "https://api.github.com/users/oldMarcosVillacanas/gists{/gist_id}", "starred_url": "https://api.github.com/users/oldMarcosVillacanas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oldMarcosVillacanas/subscriptions", "organizations_url": "https://api.github.com/users/oldMarcosVillacanas/orgs", "repos_url": "https://api.github.com/users/oldMarcosVillacanas/repos", "events_url": "https://api.github.com/users/oldMarcosVillacanas/events{/privacy}", "received_events_url": "https://api.github.com/users/oldMarcosVillacanas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-06-12T07:51:37Z", "updated_at": "2020-06-12T12:06:11Z", "closed_at": "2020-06-12T12:06:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen trying to run Classification_3d densenet_training_array example, Run-Time Exception is thrown because of data type conflict. Torch target attribute, which corresponds to Tensor, is expected to be of type Long, but it is Int.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Get the data used in this example from https://brain-development.org/ixi-dataset/\r\n2. Save it in the root of the project with this structure workspace\\data\\medical\\ixi\\IXI-T1\\xx.gz\r\n3. Run the example\r\n\r\n**Expected behavior**\r\nThere should be five epochs training process, but the execution is stopped due to this Run-Time Exception.\r\n\r\n**Screenshots**\r\n![screenshot](https://user-images.githubusercontent.com/48330663/84478413-8d5ae080-ac91-11ea-8c2d-02b8c5df21ed.png)\r\n\r\n**Environment**\r\n - Windows 10\r\n - Python version 3.7.5\r\n - MONAI version 0.1.0 Commit 01e4457d72acd228b5da0e91dcc0778adaf6b101 (06/11/2020)\r\n - Pytorch version: 1.5.0+cu101\r\n - GPU NVIDIA GeForce MX150\r\n\r\n**Possible Fix**\r\nThis error can be fixed by altering functional.py inside torch package, changing:\r\n![imagen](https://user-images.githubusercontent.com/48330663/84478589-e296f200-ac91-11ea-83b2-0332b0da98de.png)\r\nto:\r\n![imagen](https://user-images.githubusercontent.com/48330663/84478712-08bc9200-ac92-11ea-8aa7-c9bbab574b9f.png)\r\n\r\nSo that the Int is cast to Long.\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/546/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/512", "id": 635019094, "node_id": "MDU6SXNzdWU2MzUwMTkwOTQ=", "number": 512, "title": "Problem with data augmentation in spleen example notebook", "user": {"login": "neshang", "id": 25570730, "node_id": "MDQ6VXNlcjI1NTcwNzMw", "avatar_url": "https://avatars.githubusercontent.com/u/25570730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neshang", "html_url": "https://github.com/neshang", "followers_url": "https://api.github.com/users/neshang/followers", "following_url": "https://api.github.com/users/neshang/following{/other_user}", "gists_url": "https://api.github.com/users/neshang/gists{/gist_id}", "starred_url": "https://api.github.com/users/neshang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neshang/subscriptions", "organizations_url": "https://api.github.com/users/neshang/orgs", "repos_url": "https://api.github.com/users/neshang/repos", "events_url": "https://api.github.com/users/neshang/events{/privacy}", "received_events_url": "https://api.github.com/users/neshang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-06-09T00:26:18Z", "updated_at": "2020-06-09T08:41:31Z", "closed_at": "2020-06-09T08:41:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI was trying out the `spleen_segmentation_3d.ipynb` and encountered problem with data transformation. In the 'Setup transforms for training and validation' section, the line `Spacingd(keys=['image', 'label'], pixdim=(1.5, 1.5, 2.), interp_order=(3, 0), mode='nearest'),` keeps causing error. After I checked the documentation, it seems like the argument `interp_order`\r\n should be a string rather than a tuple of int. It seems like this is the case in other example notebooks as well, was there a code base change that leads to this problem or is there anything I missed?\r\n\r\n**To Reproduce**\r\nRun through the notebook.\r\n\r\n**Expected behavior**\r\nIt should run without any error.\r\n**Environment (please complete the following information):**\r\n - OS\r\n - Python version\r\n - MONAI version [e.g. git commit hash]: 0.1.0\r\n - CUDA/cuDNN version\r\n - GPU models and configuration\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/512/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/447", "id": 626687986, "node_id": "MDU6SXNzdWU2MjY2ODc5ODY=", "number": 447, "title": "rand zoom \"keep_size\" should default to True?", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-28T17:32:55Z", "updated_at": "2021-04-16T11:26:21Z", "closed_at": "2020-05-29T10:53:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\na few monai examples use `RandZoom` and `Resize`,\r\nbut when RandZoom's `keep_size` option is False (the current default)\r\nthe preprocessor generates outputs that are almost identical to the inputs.\r\n\r\n**To Reproduce**\r\nthis script tries to to 2x zoom and resize to `768x1024`:\r\n```python\r\nimport matplotlib.pyplot as plt\r\nimport scipy.misc\r\n\r\nfrom monai.transforms import RandZoom, Resize\r\n\r\nimg = scipy.misc.face(gray=True)[None]\r\nzoom = RandZoom(prob=1.0, min_zoom=2, max_zoom=2)\r\nresize = Resize(spatial_size=(768, 1024))\r\nnew_img = resize(zoom(img))\r\n\r\nplt.subplots(1, 2)\r\nplt.subplot(1, 2, 1)\r\nplt.imshow(img[0], cmap=\"gray\")\r\nplt.subplot(1, 2, 2)\r\nplt.imshow(new_img[0], cmap=\"gray\")\r\nplt.show()\r\n```\r\nthe output is:\r\n![Figure_1](https://user-images.githubusercontent.com/831580/83173251-a780b480-a110-11ea-938e-bce626eb28ce.png)\r\n\r\n\r\n**Expected behavior**\r\nsetting `keep_size` to True \r\n(`zoom = RandZoom(prob=1.0, min_zoom=2, max_zoom=2, keep_size=True)`) \r\ngives the expected output:\r\n![correct](https://user-images.githubusercontent.com/831580/83173377-d860e980-a110-11ea-8ada-75d9b9ed3e94.png)\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - OS macos\r\n - Python version 3.6\r\n - MONAI version 3181e3efb4b359acd7006c71e1146a299a51040e\r\n\r\n\r\n**Additional context**\r\nquit a few places use `RandZoom(..., keep_size=False)` and `Resize` together, they are probably wrong", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/447/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/442", "id": 625652882, "node_id": "MDU6SXNzdWU2MjU2NTI4ODI=", "number": 442, "title": "model checkpoint saver/loader dictionary", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-05-27T12:28:30Z", "updated_at": "2020-05-28T12:05:00Z", "closed_at": "2020-05-28T12:05:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\nwhen `save_dict` of `monai.handlers.CheckpointSaver` is a dictionary with a single item,\r\nloading the file with `monai.handlers.CheckpointLoader` raises an error. \r\n\r\n**To Reproduce**\r\nTo reproduce the issue:\r\n```python\r\nimport logging\r\nimport sys\r\n\r\nimport torch\r\nfrom ignite.engine import Engine\r\n\r\nfrom monai.handlers import CheckpointLoader, CheckpointSaver\r\n\r\nlogging.basicConfig(stream=sys.stdout, level=logging.INFO)\r\n\r\nnet = torch.nn.PReLU()\r\nengine = Engine(lambda e, b: None)\r\n\r\nCheckpointSaver(save_dir=\".\", save_dict={\"net\": net}, save_final=True).attach(engine)\r\nengine.run([0] * 8, max_epochs=5)\r\n\r\nCheckpointLoader(load_path=\"./net_final_iteration=40.pth\", load_dict={\"net\": net}).attach(engine)\r\nengine.run([0] * 8, max_epochs=1)\r\n```\r\nthe output (showing loader failure) is:\r\n```\r\nINFO:ignite.engine.engine.Engine:Engine run starting with max_epochs=5.\r\nINFO:ignite.engine.engine.Engine:Epoch[1] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[2] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[3] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[4] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[5] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Train completed, saved final checkpoint: ./net_final_iteration=40.pth\r\nINFO:ignite.engine.engine.Engine:Engine run complete. Time taken 00:00:00\r\nINFO:ignite.engine.engine.Engine:Engine run starting with max_epochs=1.\r\nERROR:ignite.engine.engine.Engine:Engine run is terminating due to exception: Object labeled by 'net' from `to_load` is not found in the checkpoint.\r\nINFO:ignite.engine.engine.Engine:Exception_raised, saved exception checkpoint: ./net_final_iteration=40.pth\r\n```\r\n\r\n**Expected behavior**\r\nthe loader should be able to read this dict structure, to be consistent with the case of  `save_dict` where the dict has more than one item, example:\r\n```python\r\nlogging.basicConfig(stream=sys.stdout, level=logging.INFO)\r\n\r\nnet = torch.nn.PReLU()\r\nengine = Engine(lambda e, b: None)\r\n\r\nCheckpointSaver(save_dir=\".\", save_dict={\"net\": net, 'net1': net}, save_final=True).attach(engine)\r\nengine.run([0] * 8, max_epochs=5)\r\n\r\nCheckpointLoader(load_path=\"./checkpoint_final_iteration=40.pth\", load_dict={\"net\": net}).attach(engine)\r\nengine.run([0] * 8, max_epochs=1)\r\n```\r\nthis example uses `{\"net\": net, 'net1': net}` and the output is expected:\r\n```\r\nINFO:ignite.engine.engine.Engine:Engine run starting with max_epochs=5.\r\nINFO:ignite.engine.engine.Engine:Epoch[1] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[2] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[3] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[4] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Epoch[5] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Train completed, saved final checkpoint: ./checkpoint_final_iteration=40.pth\r\nINFO:ignite.engine.engine.Engine:Engine run complete. Time taken 00:00:00\r\nINFO:ignite.engine.engine.Engine:Engine run starting with max_epochs=1.\r\nINFO:ignite.engine.engine.Engine:Restored all variables from ./checkpoint_final_iteration=40.pth\r\nINFO:ignite.engine.engine.Engine:Epoch[1] Complete. Time taken: 00:00:00\r\nINFO:ignite.engine.engine.Engine:Train completed, saved final checkpoint: ./checkpoint_final_iteration=40.pth\r\nINFO:ignite.engine.engine.Engine:Engine run complete. Time taken 00:00:00\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - OS macos\r\n - Python version 3.6\r\n - MONAI version 1d73f65f3a1c2bf47fb769cf21b0329acfabd114\r\n\r\n**Additional context**\r\nsee also https://github.com/pytorch/ignite/issues/770", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/378", "id": 615833755, "node_id": "MDU6SXNzdWU2MTU4MzM3NTU=", "number": 378, "title": "'None' type of label will be failed with multiple batchsize when using NiftiDataset as DataLoader ", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-05-11T12:07:31Z", "updated_at": "2020-05-25T11:55:33Z", "closed_at": "2020-05-25T11:55:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen I'm using NiftiDataset class, and set labels as None, it will return fail during iteration. The class function _getitem_ always return \"img, target\" or \"img, target, compatible_meta\", target is set from labels. DataLoader could not return with None type by multiple batch size. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to 'unet_training_array.py'\r\n2. remove labels, set it as None\r\n3. Run commands 'python unet_training_array.py'\r\n\r\n**Expected behavior**\r\nI think it has another output with only img from NiftiDataset.\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/20511588/81559727-886ced80-93c2-11ea-88db-6b8cc5da8b65.png)\r\n![image](https://user-images.githubusercontent.com/20511588/81560053-3a0c1e80-93c3-11ea-8322-4ca07194560d.png)\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Windows10/Centos7\r\n - Python 3.7\r\n - MONAI version [#374 ]\r\n - CUDA/cuDNN version 10.1\r\n - GPU models and configuration\uff1aGTX2080Ti, V100\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/378/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/375", "id": 615686991, "node_id": "MDU6SXNzdWU2MTU2ODY5OTE=", "number": 375, "title": "Bug in RandAffined transformations", "user": {"login": "murraycutforth", "id": 11088372, "node_id": "MDQ6VXNlcjExMDg4Mzcy", "avatar_url": "https://avatars.githubusercontent.com/u/11088372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/murraycutforth", "html_url": "https://github.com/murraycutforth", "followers_url": "https://api.github.com/users/murraycutforth/followers", "following_url": "https://api.github.com/users/murraycutforth/following{/other_user}", "gists_url": "https://api.github.com/users/murraycutforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/murraycutforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/murraycutforth/subscriptions", "organizations_url": "https://api.github.com/users/murraycutforth/orgs", "repos_url": "https://api.github.com/users/murraycutforth/repos", "events_url": "https://api.github.com/users/murraycutforth/events{/privacy}", "received_events_url": "https://api.github.com/users/murraycutforth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-11T08:20:55Z", "updated_at": "2020-05-11T13:52:55Z", "closed_at": "2020-05-11T13:52:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen RandAffined is called on a dict containing more than one array (for example an image and a segmentation), and if `self.rand_affine.do_transform` is false, then the transformation returns the wrong result for everything after the first array.\r\n\r\n\r\n**To Reproduce**\r\nThe transforms_demo_2d notebook can be easily repurposed to demonstrate this bug.\r\n\r\n**Screenshots**\r\nThis is the output from two identical RandAffined transformations.\r\n\r\nWith prob = 1.0:\r\n![image](https://user-images.githubusercontent.com/11088372/81538294-7b221580-9366-11ea-9556-582629de5e87.png)\r\n\r\nWith prob = 0.0:\r\n![image](https://user-images.githubusercontent.com/11088372/81538487-b6244900-9366-11ea-938d-7a4eb11db9e2.png)\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Centos 7\r\n - Python version: 3.7\r\n - MONAI version [e.g. git commit hash]: 0.1.0+34.gad06dff.dirty\r\n\r\n**Additional context**\r\nI did some digging on this in my own fork of the code. The relevant code in RandAffined is:\r\nhttps://github.com/Project-MONAI/MONAI/blob/ad06dff7f85711048690b2e85c99d51001612708/monai/transforms/spatial/dictionary.py#L313-L330\r\n\r\nThe bug occurs because \r\nhttps://github.com/Project-MONAI/MONAI/blob/ad06dff7f85711048690b2e85c99d51001612708/monai/transforms/spatial/dictionary.py#L321\r\nreturns a numpy array, whereas\r\nhttps://github.com/Project-MONAI/MONAI/blob/ad06dff7f85711048690b2e85c99d51001612708/monai/transforms/spatial/dictionary.py#L319\r\nreturns a ``torch.Tensor``. And the ``Resample`` class behaves differently with these different types of input. For ``torch.Tensor`` grids, Resample uses ``clone()``, and operates on a copy, whereas with numpy inputs, ``torch.as_tensor()`` is called which then references the original data. Just changing the constructor from ``torch.as_tensor()`` to ``torch.tensor()`` ensures that torch makes a copy of the grid, which means future calls to ``Resample`` will have the correct grid values.\r\n\r\nI'll submit a PR from my fork with the fix?\r\n\r\nNote that this bug will also happen with ``Rand2DElasticd`` and ``Rand3DElasticd`` since they follow the same pattern, but this fix to ``Resample`` will also apply to them.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/375/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/369", "id": 615213908, "node_id": "MDU6SXNzdWU2MTUyMTM5MDg=", "number": 369, "title": "Incorrect implementation of generalized Dice loss", "user": {"login": "cckao", "id": 13618269, "node_id": "MDQ6VXNlcjEzNjE4MjY5", "avatar_url": "https://avatars.githubusercontent.com/u/13618269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cckao", "html_url": "https://github.com/cckao", "followers_url": "https://api.github.com/users/cckao/followers", "following_url": "https://api.github.com/users/cckao/following{/other_user}", "gists_url": "https://api.github.com/users/cckao/gists{/gist_id}", "starred_url": "https://api.github.com/users/cckao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cckao/subscriptions", "organizations_url": "https://api.github.com/users/cckao/orgs", "repos_url": "https://api.github.com/users/cckao/repos", "events_url": "https://api.github.com/users/cckao/events{/privacy}", "received_events_url": "https://api.github.com/users/cckao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-05-09T16:37:57Z", "updated_at": "2020-05-11T12:15:11Z", "closed_at": "2020-05-11T12:15:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the line 195 of dice.py the element-wise division cancels out the weights (if `smooth` is negligible), which destroys the most important property of generalized Dice loss. \r\n\r\nhttps://github.com/Project-MONAI/MONAI/blob/ad06dff7f85711048690b2e85c99d51001612708/monai/losses/dice.py#L195\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/356", "id": 613926141, "node_id": "MDU6SXNzdWU2MTM5MjYxNDE=", "number": 356, "title": "RandGaussianNoise changes the type of the input to np.float64", "user": {"login": "murraycutforth", "id": 11088372, "node_id": "MDQ6VXNlcjExMDg4Mzcy", "avatar_url": "https://avatars.githubusercontent.com/u/11088372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/murraycutforth", "html_url": "https://github.com/murraycutforth", "followers_url": "https://api.github.com/users/murraycutforth/followers", "following_url": "https://api.github.com/users/murraycutforth/following{/other_user}", "gists_url": "https://api.github.com/users/murraycutforth/gists{/gist_id}", "starred_url": "https://api.github.com/users/murraycutforth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/murraycutforth/subscriptions", "organizations_url": "https://api.github.com/users/murraycutforth/orgs", "repos_url": "https://api.github.com/users/murraycutforth/repos", "events_url": "https://api.github.com/users/murraycutforth/events{/privacy}", "received_events_url": "https://api.github.com/users/murraycutforth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Nic-Ma", "id": 27533405, "node_id": "MDQ6VXNlcjI3NTMzNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/27533405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nic-Ma", "html_url": "https://github.com/Nic-Ma", "followers_url": "https://api.github.com/users/Nic-Ma/followers", "following_url": "https://api.github.com/users/Nic-Ma/following{/other_user}", "gists_url": "https://api.github.com/users/Nic-Ma/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nic-Ma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nic-Ma/subscriptions", "organizations_url": "https://api.github.com/users/Nic-Ma/orgs", "repos_url": "https://api.github.com/users/Nic-Ma/repos", "events_url": "https://api.github.com/users/Nic-Ma/events{/privacy}", "received_events_url": "https://api.github.com/users/Nic-Ma/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-05-07T09:55:28Z", "updated_at": "2020-05-07T16:15:59Z", "closed_at": "2020-05-07T16:15:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "First, thanks for creating a great library!\r\n\r\n**Describe the bug**\r\nApplying the RandGaussianNoise tranform to a np.float32 array changes the dtype to np.float64. This causes a crash down the line since pytorch expects np.float32 inputs.\r\n\r\n**Expected behavior**\r\nThe transformed image's dtype does not change\r\n\r\n**Screenshots**\r\n![image](https://user-images.githubusercontent.com/11088372/81280218-1017cc80-9050-11ea-87a6-7494da4288aa.png)\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Centos 7\r\n - Python version: 3.6\r\n - MONAI version: 0.1.0\r\n\r\nThis could be an easy fix, by changing\r\n`return img + self._noise if self._do_transform else img\r\n` \r\nto\r\n`return img + self._noise.astype(img.dtype) if self._do_transform else img\r\n`. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/356/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/319", "id": 608187120, "node_id": "MDU6SXNzdWU2MDgxODcxMjA=", "number": 319, "title": "pytorch dependency version", "user": {"login": "wyli", "id": 831580, "node_id": "MDQ6VXNlcjgzMTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/831580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wyli", "html_url": "https://github.com/wyli", "followers_url": "https://api.github.com/users/wyli/followers", "following_url": "https://api.github.com/users/wyli/following{/other_user}", "gists_url": "https://api.github.com/users/wyli/gists{/gist_id}", "starred_url": "https://api.github.com/users/wyli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wyli/subscriptions", "organizations_url": "https://api.github.com/users/wyli/orgs", "repos_url": "https://api.github.com/users/wyli/repos", "events_url": "https://api.github.com/users/wyli/events{/privacy}", "received_events_url": "https://api.github.com/users/wyli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-28T10:01:08Z", "updated_at": "2020-05-18T07:02:34Z", "closed_at": "2020-05-18T07:02:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Describe the bug**\r\naccording to [`MONAI/requirements.txt`](https://github.com/Project-MONAI/MONAI/blob/master/requirements.txt#L1),  the project depends on `torch>=1.4`.\r\nbut the codebase is only tested with torch 1.5, since #289 #291.\r\n\r\npossible fixes:\r\n- update CI to run tests with torch >=1.4 (currently means both 1.4 and 1.5)\r\n- change `requirements.txt` to have `torch == 1.5`\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/306", "id": 606826090, "node_id": "MDU6SXNzdWU2MDY4MjYwOTA=", "number": 306, "title": "Segmentation and classification examples throw runtime errors", "user": {"login": "gml16", "id": 7902440, "node_id": "MDQ6VXNlcjc5MDI0NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/7902440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gml16", "html_url": "https://github.com/gml16", "followers_url": "https://api.github.com/users/gml16/followers", "following_url": "https://api.github.com/users/gml16/following{/other_user}", "gists_url": "https://api.github.com/users/gml16/gists{/gist_id}", "starred_url": "https://api.github.com/users/gml16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gml16/subscriptions", "organizations_url": "https://api.github.com/users/gml16/orgs", "repos_url": "https://api.github.com/users/gml16/repos", "events_url": "https://api.github.com/users/gml16/events{/privacy}", "received_events_url": "https://api.github.com/users/gml16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-25T18:17:05Z", "updated_at": "2020-04-26T16:18:17Z", "closed_at": "2020-04-26T16:18:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nRunning any of the segmentation or classification training examples (ignite or not and for both dict and array) throws a runtime error.\r\n\r\nFor instance, running this:\r\n`python examples\\classification_3d_ignite\\densenet_training_array.py`\r\n\r\nWill give the following output:\r\n```\r\nMONAI version: 0.1.0\r\nPython version: 3.7.5rc1 (tags/v3.7.5rc1:4082f600a5, Oct  1 2019, 20:28:14) [MSC v.1916 64 bit (AMD64)]\r\nNumpy version: 1.17.3\r\nPytorch version: 1.5.0+cu92\r\nIgnite version: 0.3.0\r\nMONAI version: 0.1.0\r\nPython version: 3.7.5rc1 (tags/v3.7.5rc1:4082f600a5, Oct  1 2019, 20:28:14) [MSC v.1916 64 bit (AMD64)]\r\nNumpy version: 1.17.3\r\nPytorch version: 1.5.0+cu92\r\nIgnite version: 0.3.0\r\nMONAI version: 0.1.0\r\nPython version: 3.7.5rc1 (tags/v3.7.5rc1:4082f600a5, Oct  1 2019, 20:28:14) [MSC v.1916 64 bit (AMD64)]\r\nNumpy version: 1.17.3\r\nPytorch version: 1.5.0+cu92\r\nIgnite version: 0.3.0\r\nTraceback (most recent call last):\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"<string>\", line 1, in <module>\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main\r\n    exitcode = _main(fd)    exitcode = _main(fd)\r\n\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 114, in _main\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 114, in _main\r\n        prepare(preparation_data)\r\nprepare(preparation_data)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 225, in prepare\r\n\r\n    _fixup_main_from_path(data['init_main_from_path'])\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 225, in prepare\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 277, in _fixup_main_from_path\r\n    _fixup_main_from_path(data['init_main_from_path'])    run_name=\"__mp_main__\")\r\n\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 277, in _fixup_main_from_path\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 263, in run_path\r\n    run_name=\"__mp_main__\")\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 96, in _run_module_code\r\n    pkg_name=pkg_name, script_name=fname)\r\n    mod_name, mod_spec, pkg_name, script_name)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 96, in _run_module_code\r\n\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 85, in _run_code\r\n    mod_name, mod_spec, pkg_name, script_name)    exec(code, run_globals)\r\n\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 85, in _run_code\r\n  File \"C:\\Users\\gmler\\Git\\MONAI\\examples\\classification_3d_ignite\\densenet_training_array.py\", line 75, in <module>\r\n    exec(code, run_globals)    im, label = monai.utils.misc.first(check_loader)\r\n\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\monai\\utils\\misc.py\", line 36, in first\r\n  File \"C:\\Users\\gmler\\Git\\MONAI\\examples\\classification_3d_ignite\\densenet_training_array.py\", line 75, in <module>\r\n    for i in iterable:\r\nim, label = monai.utils.misc.first(check_loader)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 279, in __iter__\r\n\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 719, in __init__\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\monai\\utils\\misc.py\", line 36, in first\r\n        w.start()\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\process.py\", line 112, in start\r\nfor i in iterable:\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 279, in __iter__\r\n        self._popen = self._Popen(self)\r\nreturn _MultiProcessingDataLoaderIter(self)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 223, in _Popen\r\n\r\n      File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 719, in __init__\r\nreturn _default_context.get_context().Process._Popen(process_obj)\r\nw.start()  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 322, in _Popen\r\n\r\n      File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\process.py\", line 112, in start\r\nreturn Popen(process_obj)\r\nself._popen = self._Popen(self)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\popen_spawn_win32.py\", line 46, in __init__\r\n\r\n      File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 223, in _Popen\r\nprep_data = spawn.get_preparation_data(process_obj._name)\r\nreturn _default_context.get_context().Process._Popen(process_obj)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 143, in get_preparation_data\r\n\r\n      File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 322, in _Popen\r\n_check_not_importing_main()\r\nreturn Popen(process_obj)  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 136, in _check_not_importing_main\r\n\r\n      File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\popen_spawn_win32.py\", line 46, in __init__\r\nis not going to be frozen to produce an executable.''')\r\nprep_data = spawn.get_preparation_data(process_obj._name)RuntimeError\r\n:   File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 143, in get_preparation_data\r\n\r\n        An attempt has been made to start a new process before the\r\n        current process has finished its bootstrapping phase.\r\n\r\n        This probably means that you are not using fork to start your\r\n        child processes and you have forgotten to use the proper idiom\r\n        in the main module:\r\n\r\n            if __name__ == '__main__':\r\n                freeze_support()\r\n                ...\r\n\r\n        The \"freeze_support()\" line can be omitted if the program\r\n        is not going to be frozen to produce an executable.\r\n_check_not_importing_main()\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 136, in _check_not_importing_main\r\n    is not going to be frozen to produce an executable.''')\r\nRuntimeError:\r\n        An attempt has been made to start a new process before the\r\n        current process has finished its bootstrapping phase.\r\n\r\n        This probably means that you are not using fork to start your\r\n        child processes and you have forgotten to use the proper idiom\r\n        in the main module:\r\n\r\n            if __name__ == '__main__':\r\n                freeze_support()\r\n                ...\r\n\r\n        The \"freeze_support()\" line can be omitted if the program\r\n        is not going to be frozen to produce an executable.\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 761, in _try_get_data\r\n    data = self._data_queue.get(timeout=timeout)\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\queue.py\", line 178, in get\r\n    raise Empty\r\n_queue.Empty\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \".\\classification_3d_ignite\\densenet_training_array.py\", line 75, in <module>\r\n    im, label = monai.utils.misc.first(check_loader)\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\monai\\utils\\misc.py\", line 36, in first\r\n    for i in iterable:\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 345, in __next__\r\n    data = self._next_data()\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 841, in _next_data\r\n    idx, data = self._get_data()\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 798, in _get_data\r\n    success, data = self._try_get_data()\r\n  File \"C:\\Users\\gmler\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\torch\\utils\\data\\dataloader.py\", line 774, in _try_get_data\r\n    raise RuntimeError('DataLoader worker (pid(s) {}) exited unexpectedly'.format(pids_str))\r\nRuntimeError: DataLoader worker (pid(s) 22320, 18572) exited unexpectedly\r\n\r\n```\r\n**To Reproduce**\r\nRun `python examples\\classification_3d_ignite\\densenet_training_array.py`\r\n\r\n**Expected behavior**\r\nNo runtime error.\r\n\r\n**Environment (please complete the following information):**\r\n - OS: Windows 10\r\n - Python version: 3.7.5rc1 \r\n - MONAI version: 0.1.0, git hash: af9f654311175ee5660909501db2fc71cbe57cea\r\n - CUDA/cuDNN version: 10.2\r\n - GPU models and configuration:  GeForce mx250, driver version 442.53\r\n", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/306/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148", "repository_url": "https://api.github.com/repos/Project-MONAI/MONAI", "labels_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148/comments", "events_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148/events", "html_url": "https://github.com/Project-MONAI/MONAI/issues/148", "id": 576556237, "node_id": "MDU6SXNzdWU1NzY1NTYyMzc=", "number": 148, "title": "GPU zoom throws a TypeError", "user": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610444317, "node_id": "MDU6TGFiZWwxNjEwNDQ0MzE3", "url": "https://api.github.com/repos/Project-MONAI/MONAI/labels/bug", "name": "bug", "color": "fcb0c9", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "madil90", "id": 880718, "node_id": "MDQ6VXNlcjg4MDcxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/880718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madil90", "html_url": "https://github.com/madil90", "followers_url": "https://api.github.com/users/madil90/followers", "following_url": "https://api.github.com/users/madil90/following{/other_user}", "gists_url": "https://api.github.com/users/madil90/gists{/gist_id}", "starred_url": "https://api.github.com/users/madil90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madil90/subscriptions", "organizations_url": "https://api.github.com/users/madil90/orgs", "repos_url": "https://api.github.com/users/madil90/repos", "events_url": "https://api.github.com/users/madil90/events{/privacy}", "received_events_url": "https://api.github.com/users/madil90/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-05T21:58:23Z", "updated_at": "2020-03-06T01:41:24Z", "closed_at": "2020-03-06T01:41:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe current zoom implementation throws a TypeError if use_gpu is True.\r\n\r\n**Steps to reproduce:**\r\n1. Modify test and set use_gpu True.\r\n2. Run tests.\r\n\r\n**Solution:**\r\nError is in line 213: `zoomed = cupy.numpy`.", "reactions": {"url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Project-MONAI/MONAI/issues/148/timeline", "performed_via_github_app": null, "state_reason": "completed"}]