[{"url": "https://api.github.com/repos/borgbackup/borg/issues/7520", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7520/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7520/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7520/events", "html_url": "https://github.com/borgbackup/borg/issues/7520", "id": 1662791325, "node_id": "I_kwDOAh3yxs5jHC6d", "number": 7520, "title": "borg2 throws error for valid(?) chunker parameters", "user": {"login": "agrommek", "id": 76997441, "node_id": "MDQ6VXNlcjc2OTk3NDQx", "avatar_url": "https://avatars.githubusercontent.com/u/76997441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agrommek", "html_url": "https://github.com/agrommek", "followers_url": "https://api.github.com/users/agrommek/followers", "following_url": "https://api.github.com/users/agrommek/following{/other_user}", "gists_url": "https://api.github.com/users/agrommek/gists{/gist_id}", "starred_url": "https://api.github.com/users/agrommek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agrommek/subscriptions", "organizations_url": "https://api.github.com/users/agrommek/orgs", "repos_url": "https://api.github.com/users/agrommek/repos", "events_url": "https://api.github.com/users/agrommek/events{/privacy}", "received_events_url": "https://api.github.com/users/agrommek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/98", "html_url": "https://github.com/borgbackup/borg/milestone/98", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/98/labels", "id": 8832336, "node_id": "MI_kwDOAh3yxs4AhsVQ", "number": 98, "title": "2.0.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 34, "closed_issues": 26, "state": "open", "created_at": "2023-01-08T22:05:29Z", "updated_at": "2023-04-17T22:40:17Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2023-04-11T15:49:06Z", "updated_at": "2023-04-15T13:08:09Z", "closed_at": "2023-04-15T13:08:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open GitHub issues?\r\n\r\nYes\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nA bug, probably\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg-2.0.0b5\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch Linux \r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nLinux, borg-2.0.0b5 precompiled binary, ext4, backup to HDD\r\n\r\n#### How much data is handled by borg?\r\n\r\na few GB for testing borg2 beta\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nborg-2.0.0b5-linuxnew64 create --chunker-params buzhash,19,24,21,4095 MyArchive /path/to/source\r\n```\r\n(I didn't try this with borg-1.2.x)\r\n\r\n## Describe the problem you're observing.\r\n\r\ntl;dr: running the above command, I get the following error message:\r\n\r\n```\r\nborg-2.0.0b5-linuxnew64 create: error: argument --chunker-params: invalid ChunkerParams value: 'buzhash,19,24,21,4095'\r\n```\r\nNote the value of 24 for CHUNK_MAX_EXP.\r\n\r\nLong story: I have a backup source with only large (several hundred MiB each) and seldom-changing files and wanted to adjust the chunker parameters for that by going from the default `buzhash,19,23,21,4095` (512 kiB min, 8 MiB max, 2 MiB avg chunk size) to twice that size (i.e. 1 MiB / 16 MiB / 4 MiB)  with `buzhash,20,24,22,4095` (and maybe even to still larger chunk sizes). However, this throws the error message given above. Some try-and-error revealed that the CHUNK_MAX_EXP parameter is to blame. Selecting anything larger than 23 (i.e. 8 MiB)  for CHUNK_MAX_EXP will trigger the error.\r\n\r\nI could not find out why `--chunker-params buzhash,20,24,22,4095` should be invalid. The documentation says nothing about limits and/or inter-dependencies for the chunker values. \r\n\r\nIs this a bug? Maybe a leftover from the \"old attic times\" where nobody could imagine chunk sizes > 8 MiB? \r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7500", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7500/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7500/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7500/events", "html_url": "https://github.com/borgbackup/borg/issues/7500", "id": 1657795788, "node_id": "I_kwDOAh3yxs5iz_TM", "number": 7500, "title": "highlander options \"special effects\"", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "snsmac", "id": 13917969, "node_id": "MDQ6VXNlcjEzOTE3OTY5", "avatar_url": "https://avatars.githubusercontent.com/u/13917969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snsmac", "html_url": "https://github.com/snsmac", "followers_url": "https://api.github.com/users/snsmac/followers", "following_url": "https://api.github.com/users/snsmac/following{/other_user}", "gists_url": "https://api.github.com/users/snsmac/gists{/gist_id}", "starred_url": "https://api.github.com/users/snsmac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snsmac/subscriptions", "organizations_url": "https://api.github.com/users/snsmac/orgs", "repos_url": "https://api.github.com/users/snsmac/repos", "events_url": "https://api.github.com/users/snsmac/events{/privacy}", "received_events_url": "https://api.github.com/users/snsmac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "snsmac", "id": 13917969, "node_id": "MDQ6VXNlcjEzOTE3OTY5", "avatar_url": "https://avatars.githubusercontent.com/u/13917969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snsmac", "html_url": "https://github.com/snsmac", "followers_url": "https://api.github.com/users/snsmac/followers", "following_url": "https://api.github.com/users/snsmac/following{/other_user}", "gists_url": "https://api.github.com/users/snsmac/gists{/gist_id}", "starred_url": "https://api.github.com/users/snsmac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snsmac/subscriptions", "organizations_url": "https://api.github.com/users/snsmac/orgs", "repos_url": "https://api.github.com/users/snsmac/repos", "events_url": "https://api.github.com/users/snsmac/events{/privacy}", "received_events_url": "https://api.github.com/users/snsmac/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/90", "html_url": "https://github.com/borgbackup/borg/milestone/90", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/90/labels", "id": 8206190, "node_id": "MI_kwDOAh3yxs4AfTdu", "number": 90, "title": "2.0.0rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 26, "closed_issues": 2, "state": "open", "created_at": "2022-07-17T14:31:24Z", "updated_at": "2023-04-17T20:35:31Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2023-04-06T17:24:14Z", "updated_at": "2023-04-15T14:45:30Z", "closed_at": "2023-04-15T14:45:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "borg has some cli options with `action=Highlander`, which raises an error if there is more than one (see also #6269).\r\n\r\nE.g. it does not make sense to give `--umask` more than once (especially not with different values).\r\n\r\nBut, this error is not raised, if the first of these options happens to use the same value as the default value of the option.\r\n\r\nE.g.:\r\n```\r\nborg --umask 077 --umask 007 rlist --repo ...  # no error (0o077 is the default)\r\nborg --umask 007 --umask 077 rlist --repo ...  # error \"there can be only one\"\r\nborg --umask 777 --umask 007 rlist --repo ...  # error \"there can be only one\"\r\nborg --umask 007 --umask 777 rlist --repo ...  # error \"there can be only one\"\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7500/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7470", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7470/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7470/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7470/events", "html_url": "https://github.com/borgbackup/borg/issues/7470", "id": 1637508997, "node_id": "I_kwDOAh3yxs5hmmeF", "number": 7470, "title": "mode bug in tests (777 instead of 0o777)", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/98", "html_url": "https://github.com/borgbackup/borg/milestone/98", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/98/labels", "id": 8832336, "node_id": "MI_kwDOAh3yxs4AhsVQ", "number": 98, "title": "2.0.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 34, "closed_issues": 26, "state": "open", "created_at": "2023-01-08T22:05:29Z", "updated_at": "2023-04-17T22:40:17Z", "due_on": null, "closed_at": null}, "comments": 7, "created_at": "2023-03-23T13:05:04Z", "updated_at": "2023-03-24T11:10:08Z", "closed_at": "2023-03-24T11:10:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "testsuite.archiver:4531 (1.2-maint)", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7446", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7446/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7446/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7446/events", "html_url": "https://github.com/borgbackup/borg/issues/7446", "id": 1628213924, "node_id": "I_kwDOAh3yxs5hDJKk", "number": 7446, "title": "non-readable files in source directory massively stall backup (\"borg create\")", "user": {"login": "agrommek", "id": 76997441, "node_id": "MDQ6VXNlcjc2OTk3NDQx", "avatar_url": "https://avatars.githubusercontent.com/u/76997441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agrommek", "html_url": "https://github.com/agrommek", "followers_url": "https://api.github.com/users/agrommek/followers", "following_url": "https://api.github.com/users/agrommek/following{/other_user}", "gists_url": "https://api.github.com/users/agrommek/gists{/gist_id}", "starred_url": "https://api.github.com/users/agrommek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agrommek/subscriptions", "organizations_url": "https://api.github.com/users/agrommek/orgs", "repos_url": "https://api.github.com/users/agrommek/repos", "events_url": "https://api.github.com/users/agrommek/events{/privacy}", "received_events_url": "https://api.github.com/users/agrommek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/98", "html_url": "https://github.com/borgbackup/borg/milestone/98", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/98/labels", "id": 8832336, "node_id": "MI_kwDOAh3yxs4AhsVQ", "number": 98, "title": "2.0.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 34, "closed_issues": 26, "state": "open", "created_at": "2023-01-08T22:05:29Z", "updated_at": "2023-04-17T22:40:17Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2023-03-16T20:22:44Z", "updated_at": "2023-03-20T20:48:29Z", "closed_at": "2023-03-20T20:48:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open GitHub issues?\r\n\r\nyes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nIssue / Feature Request / bug?\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg-2.0.0b5\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nUbuntu Server 22.04\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nIntel(R) Core(TM) i3-8145U CPU @ 2.10GHz\r\n16 GB RAM\r\next4\r\n\r\n#### How much data is handled by borg?\r\n\r\nNot much, just test data. Maybe 5 MB.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n`/path/to/borg-2.0.0b5-linuxnew64 create --stats --list --checkpoint-interval=60 --repo /path/to/testrepo1 --verbose archive-{utcnow} /etc`\r\n\r\n## Describe the problem you're observing.\r\n\r\nI am getting my feet wet with the new syntax and related repositories coming in borg 2.0. For that purpose I created some test repos and backed up my /etc directory (as a dummy source directory - a directory with many text files which do not change while running borg). Some files under this directory are not readable for the user borg runs under. This causes borg to log a warning and retry for a total of about 15 seconds - for each file. Example:\r\n\r\n```\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.001s, next: retry: 1 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.003s, next: retry: 2 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.010s, next: retry: 3 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.032s, next: retry: 4 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.100s, next: retry: 5 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 0.316s, next: retry: 6 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 1.000s, next: retry: 7 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 3.162s, next: retry: 8 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README', slept 10.000s, next: retry: 9 of 9...\r\n/etc/sudoers.d/README: open: [Errno 13] Permission denied: 'README'\r\nE /etc/sudoers.d/README\r\n```\r\nWhile waiting for the file(s) to become accessible (which never happens, of course) the backup stalls. This causes the backup to run for about 14 minutes for a measly 4.6 MB of source files. For comparison: Running with the correct permissions (i.e. all files are readable by borg) the backup take WAY less than one second.\r\n\r\nSuggestion / feature request:\r\n\r\nEither make waiting for \"Permission denied\" errors non-blocking by using asyncio or threads (--> backup can continue while borg waits) and/or provide an option to skip non-accessible files. \r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nyes - does not appear to be a bug but rather \"works as intended\". But maybe not very smart... ;-)\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNone\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7445", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7445/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7445/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7445/events", "html_url": "https://github.com/borgbackup/borg/issues/7445", "id": 1625435617, "node_id": "I_kwDOAh3yxs5g4i3h", "number": 7445, "title": "wrong cache directories", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/98", "html_url": "https://github.com/borgbackup/borg/milestone/98", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/98/labels", "id": 8832336, "node_id": "MI_kwDOAh3yxs4AhsVQ", "number": 98, "title": "2.0.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 34, "closed_issues": 26, "state": "open", "created_at": "2023-01-08T22:05:29Z", "updated_at": "2023-04-17T22:40:17Z", "due_on": null, "closed_at": null}, "comments": 14, "created_at": "2023-03-15T12:30:17Z", "updated_at": "2023-03-29T22:24:45Z", "closed_at": "2023-03-29T22:24:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From a discussion post:\r\n\r\n> I noticed that with borg 2 the cache directories do *not* contain the \r\n> name borg which is a bit annoying and i would prefer the old behaviour.\r\n> \r\n> Borg 1.2 \r\n> /home/dietmar/.cache/borg/0a2cb8f22adaa78a1863b028f3d1629393ef0fdd99b3b61c11d871de9eaaee8b/README\r\n> \r\n> Borg 2.0.0b5 \r\n> /home/dietmar/.cache/fa673b73240ed3b75ba947fd98787fdf8ecd17204323e4a10c2754cdcc5fd547/README\r\n\r\nthis is likely due to us switching to `platformdirs` library and the related api change.\r\n\r\nconfig directories need also checking, there might be the same issue.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7445/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7355", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7355/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7355/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7355/events", "html_url": "https://github.com/borgbackup/borg/issues/7355", "id": 1583980724, "node_id": "I_kwDOAh3yxs5eaaC0", "number": 7355, "title": "fix Statistics.__add__", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/96", "html_url": "https://github.com/borgbackup/borg/milestone/96", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/96/labels", "id": 8693177, "node_id": "MI_kwDOAh3yxs4AhKW5", "number": 96, "title": "2.0.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2022-11-26T11:48:15Z", "updated_at": "2023-02-27T00:20:37Z", "due_on": null, "closed_at": "2023-02-27T00:20:37Z"}, "comments": 5, "created_at": "2023-02-14T11:22:01Z", "updated_at": "2023-02-20T17:07:23Z", "closed_at": "2023-02-20T17:07:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "because the file_stats defaultdict can contain different keys, it must iterate over `union(self.keys(), other.keys())` when adding up stats values.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7336", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7336/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7336/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7336/events", "html_url": "https://github.com/borgbackup/borg/issues/7336", "id": 1579432089, "node_id": "I_kwDOAh3yxs5eJDiZ", "number": 7336, "title": "borg recreate --exclude triggers rechunking", "user": {"login": "mischaelschill", "id": 20125202, "node_id": "MDQ6VXNlcjIwMTI1MjAy", "avatar_url": "https://avatars.githubusercontent.com/u/20125202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mischaelschill", "html_url": "https://github.com/mischaelschill", "followers_url": "https://api.github.com/users/mischaelschill/followers", "following_url": "https://api.github.com/users/mischaelschill/following{/other_user}", "gists_url": "https://api.github.com/users/mischaelschill/gists{/gist_id}", "starred_url": "https://api.github.com/users/mischaelschill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mischaelschill/subscriptions", "organizations_url": "https://api.github.com/users/mischaelschill/orgs", "repos_url": "https://api.github.com/users/mischaelschill/repos", "events_url": "https://api.github.com/users/mischaelschill/events{/privacy}", "received_events_url": "https://api.github.com/users/mischaelschill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 7, "created_at": "2023-02-10T10:31:48Z", "updated_at": "2023-02-11T13:11:05Z", "closed_at": "2023-02-11T13:11:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a rather large, remote backup repository (4TB), and wanted to remove directories from old archives to free up some space.\r\n\r\nI ran borg recreate -e \"directory/to/remove/*\" and a dry run seemed to do what I want after a few minutes. Now when I run the actual command, it didn't return for hours. nethogs shows that a lot of data is downloaded, so I assume that for some reason, the whole archive is downloaded. I assumed, since I only remove some files, the actual contents of the archive is not needed locally.\r\n\r\nI didn't specify --recompress, and neither did I add --chunker-params. However, I do have different chunker params than the borg default when I create archives, but I assumed from the manpage that recreate is not re-chunking if no chunker params are specified.\r\n\r\nI use borg 1.2.3.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7336/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7296", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7296/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7296/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7296/events", "html_url": "https://github.com/borgbackup/borg/issues/7296", "id": 1553221219, "node_id": "I_kwDOAh3yxs5clEZj", "number": 7296, "title": "fix --newer/older/newest/oldest options / support code", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-23T14:43:18Z", "updated_at": "2023-02-01T10:32:55Z", "closed_at": "2023-02-01T10:32:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "master branch only:\r\n\r\nas `define_archive_filters_group` defaults to adding these options, **all** commands calling this now suddenly \"support\" these options, according to their help.\r\n\r\nbut they do not really support these options, because the appropriate code is not there:\r\n- `list_considering` does not yet support them\r\n- check other places\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7250", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7250/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7250/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7250/events", "html_url": "https://github.com/borgbackup/borg/issues/7250", "id": 1524903307, "node_id": "I_kwDOAh3yxs5a5C2L", "number": 7250, "title": "test_size_on_disk_accurate on 1.2.3 breaks when run on ZFS", "user": {"login": "mweinelt", "id": 131599, "node_id": "MDQ6VXNlcjEzMTU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/131599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mweinelt", "html_url": "https://github.com/mweinelt", "followers_url": "https://api.github.com/users/mweinelt/followers", "following_url": "https://api.github.com/users/mweinelt/following{/other_user}", "gists_url": "https://api.github.com/users/mweinelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mweinelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mweinelt/subscriptions", "organizations_url": "https://api.github.com/users/mweinelt/orgs", "repos_url": "https://api.github.com/users/mweinelt/repos", "events_url": "https://api.github.com/users/mweinelt/events{/privacy}", "received_events_url": "https://api.github.com/users/mweinelt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 4, "created_at": "2023-01-09T04:14:41Z", "updated_at": "2023-01-13T09:49:43Z", "closed_at": "2023-01-13T09:49:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug/Regression\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nNixOS Unstable\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nZFS Root\r\n\r\n#### How much data is handled by borg?\r\n\r\nn/a\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nn/a\r\n\r\n## Describe the problem you're observing.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nRunning the test suite on ZFS breaks on `test_size_on_disk_accurate` since https://github.com/borgbackup/borg/commit/8ddfd94f0904449175151faed67f9640710b6454.\r\n\r\nZFS has a commit interval of 5 seconds, so a manual flush might be required for the size to be reflected instantly.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```python\r\n_______________ HashIndexSizeTestCase.test_size_on_disk_accurate _______________\r\n[gw42] linux -- Python 3.10.9 /nix/store/ar76b3831ydkmfhf0r9v3wbma5i61iz2-python3-3.10.9/bin/python3.10\r\nself = <borg.testsuite.hashindex.HashIndexSizeTestCase testMethod=test_size_on_disk_accurate>\r\n\r\n    def test_size_on_disk_accurate(self):\r\n        idx = ChunkIndex()\r\n        for i in range(1234):\r\n            idx[H(i)] = i, i**2, i**3\r\n        with tempfile.NamedTemporaryFile() as file:\r\n            idx.write(file)\r\n            size = os.path.getsize(file.fileno())\r\n>       assert idx.size() == size\r\nE       assert 90350 == 0\r\nE        +  where 90350 = <built-in method size of borg.hashindex.ChunkIndex object at 0xffffeea51b30>()\r\nE        +    where <built-in method size of borg.hashindex.ChunkIndex object at 0xffffeea51b30> = <borg.hashindex.ChunkIndex object at 0xffffeea51b30>.size\r\n\r\n/nix/store/0ppx77a4xk6nij2p1klgsnksmrfnx9lj-borgbackup-1.2.3/lib/python3.10/site-packages/borg/testsuite/hashindex.py:202: AssertionError\r\n```\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7250/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7234", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7234/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7234/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7234/events", "html_url": "https://github.com/borgbackup/borg/issues/7234", "id": 1513535887, "node_id": "I_kwDOAh3yxs5aNrmP", "number": 7234, "title": "extract: original mtime not preserved on files with ResourceFork", "user": {"login": "rxgh99", "id": 81989963, "node_id": "MDQ6VXNlcjgxOTg5OTYz", "avatar_url": "https://avatars.githubusercontent.com/u/81989963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxgh99", "html_url": "https://github.com/rxgh99", "followers_url": "https://api.github.com/users/rxgh99/followers", "following_url": "https://api.github.com/users/rxgh99/following{/other_user}", "gists_url": "https://api.github.com/users/rxgh99/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxgh99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxgh99/subscriptions", "organizations_url": "https://api.github.com/users/rxgh99/orgs", "repos_url": "https://api.github.com/users/rxgh99/repos", "events_url": "https://api.github.com/users/rxgh99/events{/privacy}", "received_events_url": "https://api.github.com/users/rxgh99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 443097088, "node_id": "MDU6TGFiZWw0NDMwOTcwODg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20extract", "name": "cmd: extract", "color": "654321", "default": false, "description": null}, {"id": 1710949300, "node_id": "MDU6TGFiZWwxNzEwOTQ5MzAw", "url": "https://api.github.com/repos/borgbackup/borg/labels/os:%20macOS", "name": "os: macOS", "color": "ffffff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 18, "created_at": "2022-12-29T09:08:49Z", "updated_at": "2023-01-06T21:25:45Z", "closed_at": "2023-01-06T21:25:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug. Originally logged under Vorta bug [#939](https://github.com/borgbase/vorta/issues/939).\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\nMacbook Air, M1. \r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.3\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nmacOS 12.6.2\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nLocal APFS (encrypted)\r\n\r\n#### How much data is handled by borg?\r\n\r\nn/a\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nborg extract\r\n\r\n## Describe the problem you're observing.\r\n\r\nAny file that has macOS xattr com.apple.ResourceFork is restored with a \"modified\" date equal to the date and time of the restore and not the original modified time of the file.  Example below. \r\n\r\n```\r\n$ touch test1.txt  //create test file 1\r\n$ touch test2.txt  //create test file 2\r\n$ xattr -w com.apple.ResourceFork mytestrf test1.txt  //Add com.apple.ResourceFork to test1.txt\r\n$ xattr -p com.apple.ResourceFork test1.txt           //Check xattr is added\r\nmytestrf\r\n\r\n$ ls -l test*.txt\r\n-rw-r--r--@ 1 rxgh99  admin  0 Dec 29 00:32 test1.txt  <-- Original modified date/time of test1\r\n-rw-r--r--  1 rxgh99  admin  0 Dec 29 00:31 test2.txt\r\n\r\n$ borg create test-repo::xattr2 test*.txt\r\n\r\n$ borg list test-repo::xattr2\r\n-rw-r--r-- rxgh99   admin         0 Thu, 2022-12-29 00:32:03 test1.txt  <-- As captured in the repo\r\n-rw-r--r-- rxgh99   admin         0 Thu, 2022-12-29 00:31:56 test2.txt\r\n\r\n$ cd restore\r\n$ borg extract ../test-repo::xattr2\r\n\r\n$ date\r\nThu Dec 29 00:41:36 PST 2022\r\n\r\n$ ls -l\r\n-rw-r--r--@ 1 rxgh99  admin  0 Dec 29 00:41 test1.txt  <-- Modified date/time at restore\r\n-rw-r--r--  1 rxgh99  admin  0 Dec 29 00:31 test2.txt\r\n\r\n$ xattr -p com.apple.ResourceFork test1.txt  //Check xattr is restored\r\nmytestrf\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes. Any restore of a file that includes com.apple.ResourceFork results in this behavior. \r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNo warnings or errors. \r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7234/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7175", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7175/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7175/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7175/events", "html_url": "https://github.com/borgbackup/borg/issues/7175", "id": 1467104757, "node_id": "I_kwDOAh3yxs5Xcj31", "number": 7175, "title": "hardlink_master bug", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 3, "created_at": "2022-11-28T21:16:18Z", "updated_at": "2023-03-10T20:57:02Z", "closed_at": "2023-03-10T20:57:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "BUG: borg 1.x does not set `item.hardlink_master = <boolean>` for fifos, block and char devices (but only for regular files).\r\n\r\nnote: it is not needed to be set for directories and symlinks, because they are not considered hard-linkable for borg1.\r\n\r\nthe borg2 upgrader code used for `borg transfer` used this up to 2.0.0b4:\r\n```\r\n    def borg1_hardlink_master(self, item):  # legacy\r\n        return item.get(\"hardlink_master\", True) and \"source\" not in item and self.borg1_hardlinkable(item.mode)\r\n```\r\nSo:\r\n- not hardlinked regular files: had `item.hardlink_master = False` set, ok\r\n- hardlink master regular files: had `item.hardlink_master = True` set, ok\r\n- fifos, block and char devices never had hard `.hardlink_master` set (neither True, nor False), so they **defaulted to True, which would be rather unpretty and unneeded in borg2 archives, because they all would get `item.hlid` set for no reason.** BUG\r\n- hardlink slaves (all hardlinkable types) have `.source` set (although they are not symlinks), ok\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7175/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7097", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7097/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7097/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7097/events", "html_url": "https://github.com/borgbackup/borg/issues/7097", "id": 1419175913, "node_id": "I_kwDOAh3yxs5Ulufp", "number": 7097, "title": "fix borg windows build", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 453497637, "node_id": "MDU6TGFiZWw0NTM0OTc2Mzc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/os:%20windows", "name": "os: windows", "color": "ffffff", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-22T08:20:37Z", "updated_at": "2022-10-27T13:06:36Z", "closed_at": "2022-10-27T13:06:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the borg windows build in master branch is broken currently.\r\n\r\nwe use appveyor to automatically build windows binaries on that service: see `appveyor.yml` and the misc. scripts below `scripts/` - these need some care by a windows-based developer, i personally can't fix this:\r\n\r\n- error handling: appveyor might report \"success\" although the build did not work at all. should fail early.\r\n- there is no bundled library source code in borg any more, thus the `BORG_USE_BUNDLED_XXX` env vars are pointless\r\n- library discovery (on the posix platforms) uses python `pkgconfig` which uses the cli command `pkg-config` which seems to be missing on appveyor. try to use pkgconfig on windows, too.\r\n- in case pkgconfig can't be made working, use BORG_LIBXXX_PREFIX vars to point to the development headers of the libraries\r\n- the libraries must be installed also, of course (lz4, zstd, xxhash, ...)\r\n- the openssl version used is severely outdated, should use latest openssl 1.1\r\n- python 3.9 or 3.10 must be used (guess this will also need using a more recent visual studio image on appveyor, like VS 2022 or 2019)\r\n\r\n\r\n---\r\n\r\n:moneybag: [there is a bounty for this](https://app.bountysource.com/issues/112947826-fix-borg-windows-build-on-appveyor)", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7097/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7097/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7077", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7077/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7077/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7077/events", "html_url": "https://github.com/borgbackup/borg/issues/7077", "id": 1401997094, "node_id": "I_kwDOAh3yxs5TkMcm", "number": 7077, "title": "2.0.0b3: AttributeError: 'borg.item.Item' object has no attribute '_dict'", "user": {"login": "pgerber", "id": 11895833, "node_id": "MDQ6VXNlcjExODk1ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/11895833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgerber", "html_url": "https://github.com/pgerber", "followers_url": "https://api.github.com/users/pgerber/followers", "following_url": "https://api.github.com/users/pgerber/following{/other_user}", "gists_url": "https://api.github.com/users/pgerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgerber/subscriptions", "organizations_url": "https://api.github.com/users/pgerber/orgs", "repos_url": "https://api.github.com/users/pgerber/repos", "events_url": "https://api.github.com/users/pgerber/events{/privacy}", "received_events_url": "https://api.github.com/users/pgerber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/95", "html_url": "https://github.com/borgbackup/borg/milestone/95", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/95/labels", "id": 8479757, "node_id": "MI_kwDOAh3yxs4AgWQN", "number": 95, "title": "2.0.0b4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2022-09-29T19:16:01Z", "updated_at": "2022-11-27T00:22:50Z", "due_on": null, "closed_at": "2022-11-27T00:22:50Z"}, "comments": 5, "created_at": "2022-10-08T16:34:15Z", "updated_at": "2022-10-10T17:45:08Z", "closed_at": "2022-10-10T17:45:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nIn command name.\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian 11 on Qubes OS 4.1\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nNotebook, local repo, BTRFS\r\n\r\n#### How much data is handled by borg?\r\n\r\n106 GiB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nuser@tmp-borg:~$ borg-1.2.2 check --verify stella\r\n\r\nuser@tmp-borg:~$ borg-2.0.0b3 rcreate -e repokey-blake2-chacha20-poly1305 --other-repo stella --repo stella_new\r\n\r\nIMPORTANT: you will need both KEY AND PASSPHRASE to access this repo!\r\nIf you used a repokey mode, the key is stored in the repo, but you should back it up separately.\r\nUse \"borg key export\" to export the key, optionally in printable format.\r\nWrite down the passphrase. Store both at safe place(s).\r\n\r\nuser@tmp-borg:~$ borg-2.0.0b3 transfer --other-repo stella --repo stella_new --upgrader=From12To20\r\nvm:debian-11:root:1650914346-back: copying archive to destination repo...\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver/__init__.py\", line 594, in main\r\n  File \"borg/archiver/__init__.py\", line 522, in run\r\n  File \"borg/archiver/_common.py\", line 223, in wrapper\r\n  File \"borg/archiver/_common.py\", line 155, in wrapper\r\n  File \"borg/archiver/transfer_cmd.py\", line 100, in do_transfer\r\n  File \"borg/upgrade.py\", line 80, in upgrade_item\r\nAttributeError: 'borg.item.Item' object has no attribute '_dict'\r\n\r\nPlatform: Linux tmp-borg 5.19.9-1.fc32.qubes.x86_64 #1 SMP PREEMPT_DYNAMIC Fri Sep 16 14:54:56 CEST 2022 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 2.0.0b3  Python: CPython 3.9.14 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 2844  CWD: /home/user\r\nsys.argv: ['borg-2.0.0b3', 'transfer', '--other-repo', 'stella', '--repo', 'stella_new', '--upgrader=From12To20']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThis still worked with v2.0.0b2:\r\n\r\n```\r\nuser@tmp-borg:~$ borg-2.0.0b2 rcreate -e repokey-blake2-chacha20-poly1305 --other-repo stella --repo stella_new\r\n\r\nIMPORTANT: you will need both KEY AND PASSPHRASE to access this repo!\r\nIf you used a repokey mode, the key is stored in the repo, but you should back it up separately.\r\nUse \"borg key export\" to export the key, optionally in printable format.\r\nWrite down the passphrase. Store both at safe place(s).\r\n\r\nuser@tmp-borg:~$ borg-2.0.0b2 transfer --other-repo stella --repo stella_new --upgrader=From12To20\r\nvm:debian-11:root:1650914346-back: copying archive to destination repo...\r\nvm:debian-11:root:1650914346-back: finished. transfer_size: 7.27 GB present_size: 3.47 GB\r\n\u2026\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7077/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7075", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7075/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7075/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7075/events", "html_url": "https://github.com/borgbackup/borg/issues/7075", "id": 1398289702, "node_id": "I_kwDOAh3yxs5TWDUm", "number": 7075, "title": "2.0.0b3: TypeError in borg benchmark cpu (compression section)", "user": {"login": "maurizio-emmex", "id": 10965847, "node_id": "MDQ6VXNlcjEwOTY1ODQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10965847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maurizio-emmex", "html_url": "https://github.com/maurizio-emmex", "followers_url": "https://api.github.com/users/maurizio-emmex/followers", "following_url": "https://api.github.com/users/maurizio-emmex/following{/other_user}", "gists_url": "https://api.github.com/users/maurizio-emmex/gists{/gist_id}", "starred_url": "https://api.github.com/users/maurizio-emmex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maurizio-emmex/subscriptions", "organizations_url": "https://api.github.com/users/maurizio-emmex/orgs", "repos_url": "https://api.github.com/users/maurizio-emmex/repos", "events_url": "https://api.github.com/users/maurizio-emmex/events{/privacy}", "received_events_url": "https://api.github.com/users/maurizio-emmex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/95", "html_url": "https://github.com/borgbackup/borg/milestone/95", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/95/labels", "id": 8479757, "node_id": "MI_kwDOAh3yxs4AgWQN", "number": 95, "title": "2.0.0b4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2022-09-29T19:16:01Z", "updated_at": "2022-11-27T00:22:50Z", "due_on": null, "closed_at": "2022-11-27T00:22:50Z"}, "comments": 1, "created_at": "2022-10-05T19:45:56Z", "updated_at": "2022-10-05T21:19:19Z", "closed_at": "2022-10-05T21:19:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n> ./borg.exe -V\r\nborg.exe 2.0.0b3\r\n\r\n#### Operating system (distribution) and version.\r\n> uname -a\r\nFreeBSD NomadBSD 13.1-RELEASE-p2 FreeBSD 13.1-RELEASE-p2 #0 releng/13.1-n250158-752f813d6cc-dirty: Tue Sep 27 22:49:04 CEST 2022     root@NomadBSD:/usr/obj/usr/src/amd64.amd64/sys/GENERIC amd64\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\ntested on\r\n1) Laptop Lenovo ThiinkPad T450 with /ZFS\r\n2) Server Dell PowerEdge R710 with ZFS\r\n#### How much data is handled by borg?\r\nNone with this version\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nOn the laptop:\r\n```\r\n> ./borg.exe benchmark cpu\r\nChunkers =======================================================\r\nbuzhash,19,23,21,4095    1GB        4.832s\r\nfixed,1048576            1GB        0.242s\r\nNon-cryptographic checksums / hashes ===========================\r\nxxh64                    1GB        0.233s\r\ncrc32 (zlib)             1GB        0.775s\r\nCryptographic hashes / MACs ====================================\r\nhmac-sha256              1GB        8.055s\r\nblake2b-256              1GB        7.411s\r\nEncryption =====================================================\r\naes-256-ctr-hmac-sha256  1GB        11.497s\r\naes-256-ctr-blake2b      1GB        9.507s\r\naes-256-ocb              1GB        2.196s\r\nchacha20-poly1305        1GB        2.752s\r\nKDFs (slow is GOOD, use argon2!) ===============================\r\npbkdf2                   5          0.874s\r\nargon2                   5          0.920s\r\nCompression ====================================================\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver/__init__.py\", line 594, in main\r\n  File \"borg/archiver/__init__.py\", line 522, in run\r\n  File \"borg/archiver/benchmark_cmd.py\", line 208, in do_benchmark_cpu\r\n  File \"timeit.py\", line 233, in timeit\r\n  File \"timeit.py\", line 177, in timeit\r\n  File \"<timeit-src>\", line 6, in inner\r\n  File \"borg/archiver/benchmark_cmd.py\", line 208, in <lambda>\r\n  File \"src/borg/compress.pyx\", line 172, in borg.compress.DecidingCompressor.compress\r\nTypeError: compress() takes exactly 2 positional arguments (1 given)\r\n\r\nPlatform: FreeBSD NomadBSD 13.1-RELEASE-p2 FreeBSD 13.1-RELEASE-p2 #0 releng/13.1-n250158-752f813d6cc-dirty: Tue Sep 27 22:49:04 CEST 2022     root@NomadBSD:/usr/obj/usr/src/amd64.amd64/sys/GENERIC amd64\r\nBorg: 2.0.0b3  Python: CPython 3.9.14 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 12021  CWD: /usr/local/borg2-dir\r\nsys.argv: ['./borg.exe', 'benchmark', 'cpu']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\n```\r\n## Describe the problem you're observing.\r\nThe command gives a Local Exception\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYes, run the `borg benchmark cpu` command in FreeBSD\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7073", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7073/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7073/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7073/events", "html_url": "https://github.com/borgbackup/borg/issues/7073", "id": 1394247312, "node_id": "I_kwDOAh3yxs5TGoaQ", "number": 7073, "title": "2.0.0b3: 'tuple' object has no attribute 'segment'", "user": {"login": "pgerber", "id": 11895833, "node_id": "MDQ6VXNlcjExODk1ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/11895833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgerber", "html_url": "https://github.com/pgerber", "followers_url": "https://api.github.com/users/pgerber/followers", "following_url": "https://api.github.com/users/pgerber/following{/other_user}", "gists_url": "https://api.github.com/users/pgerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgerber/subscriptions", "organizations_url": "https://api.github.com/users/pgerber/orgs", "repos_url": "https://api.github.com/users/pgerber/repos", "events_url": "https://api.github.com/users/pgerber/events{/privacy}", "received_events_url": "https://api.github.com/users/pgerber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/95", "html_url": "https://github.com/borgbackup/borg/milestone/95", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/95/labels", "id": 8479757, "node_id": "MI_kwDOAh3yxs4AgWQN", "number": 95, "title": "2.0.0b4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2022-09-29T19:16:01Z", "updated_at": "2022-11-27T00:22:50Z", "due_on": null, "closed_at": "2022-11-27T00:22:50Z"}, "comments": 10, "created_at": "2022-10-03T07:10:10Z", "updated_at": "2022-10-11T20:04:34Z", "closed_at": "2022-10-11T20:04:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nbug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\nuser@tmp-borg:~$ borg --version\r\nborg 2.0.0b3\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian 11\r\n\r\n#### How much data is handled by borg?\r\n\r\nSeen on two test repositories. Sizes: ~ 1MiB and 100 GiB.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\n$ tar -C /etc -c fstab | borg -r test import-tar test-4 -\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver/__init__.py\", line 594, in main\r\n  File \"borg/archiver/__init__.py\", line 522, in run\r\n  File \"borg/archiver/_common.py\", line 155, in wrapper\r\n  File \"borg/archiver/tar_cmds.py\", line 253, in do_import_tar\r\n  File \"borg/archiver/tar_cmds.py\", line 327, in _import_tar\r\n  File \"borg/archive.py\", line 681, in save\r\n  File \"borg/manifest.py\", line 287, in write\r\n  File \"borg/repository.py\", line 1311, in put\r\nAttributeError: 'tuple' object has no attribute 'segment'\r\n\r\nPlatform: Linux tmp-borg 5.19.9-1.fc32.qubes.x86_64 #1 SMP PREEMPT_DYNAMIC Fri Sep 16 14:54:56 CEST 2022 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 2.0.0b3  Python: CPython 3.9.14 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 120594  CWD: /home/user\r\nsys.argv: ['borg', '-r', 'test', 'import-tar', 'test-4', '-']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n## Describe the problem you're observing.\r\n\r\nThe above crash happens rather arbitrarily. Affected is one almost empty repository (trace above). I also get the same error trying to copy a repository using export-tar / import-tar for a repository where this worked just fine with 2.0.0b2.\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7073/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7073/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7072", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7072/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7072/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7072/events", "html_url": "https://github.com/borgbackup/borg/issues/7072", "id": 1394231201, "node_id": "I_kwDOAh3yxs5TGkeh", "number": 7072, "title": "2.0.0b3: attribute nfiles not found", "user": {"login": "pgerber", "id": 11895833, "node_id": "MDQ6VXNlcjExODk1ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/11895833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgerber", "html_url": "https://github.com/pgerber", "followers_url": "https://api.github.com/users/pgerber/followers", "following_url": "https://api.github.com/users/pgerber/following{/other_user}", "gists_url": "https://api.github.com/users/pgerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgerber/subscriptions", "organizations_url": "https://api.github.com/users/pgerber/orgs", "repos_url": "https://api.github.com/users/pgerber/repos", "events_url": "https://api.github.com/users/pgerber/events{/privacy}", "received_events_url": "https://api.github.com/users/pgerber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/95", "html_url": "https://github.com/borgbackup/borg/milestone/95", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/95/labels", "id": 8479757, "node_id": "MI_kwDOAh3yxs4AgWQN", "number": 95, "title": "2.0.0b4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2022-09-29T19:16:01Z", "updated_at": "2022-11-27T00:22:50Z", "due_on": null, "closed_at": "2022-11-27T00:22:50Z"}, "comments": 3, "created_at": "2022-10-03T06:55:46Z", "updated_at": "2022-10-08T17:59:12Z", "closed_at": "2022-10-08T17:59:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nyes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nbug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\n$ borg -V\r\nborg 2.0.0b3\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian 11\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nuser@tmp-borg:~$ BORG_PASSPHRASE=abc borg rcreate -e repokey-blake2-chacha20-poly1305 -r test\r\n\r\nIMPORTANT: you will need both KEY AND PASSPHRASE to access this repo!\r\nIf you used a repokey mode, the key is stored in the repo, but you should back it up separately.\r\nUse \"borg key export\" to export the key, optionally in printable format.\r\nWrite down the passphrase. Store both at safe place(s).\r\n\r\nuser@tmp-borg:~$ tar -C /etc -c fstab | BORG_PASSPHRASE=abc borg -r test import-tar test -\r\nuser@tmp-borg:~$ BORG_PASSPHRASE=abc borg info -r test -a test\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver/__init__.py\", line 594, in main\r\n  File \"borg/archiver/__init__.py\", line 522, in run\r\n  File \"borg/archiver/_common.py\", line 155, in wrapper\r\n  File \"borg/archiver/info_cmd.py\", line 34, in do_info\r\n  File \"borg/archive.py\", line 558, in info\r\n  File \"borg/archive.py\", line 714, in calc_stats\r\n  File \"src/borg/item.pyx\", line 219, in borg.item.PropDictProperty.__get__\r\nAttributeError: attribute nfiles not found\r\n\r\nPlatform: Linux tmp-borg 5.19.9-1.fc32.qubes.x86_64 #1 SMP PREEMPT_DYNAMIC Fri Sep 16 14:54:56 CEST 2022 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 2.0.0b3  Python: CPython 3.9.14 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 121613  CWD: /home/user\r\nsys.argv: ['borg', 'info', '-r', 'test', '-a', 'test']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\n`borg info` fails on archives created via `borg import-tar`.\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7072/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7072/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7056", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7056/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7056/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7056/events", "html_url": "https://github.com/borgbackup/borg/issues/7056", "id": 1387949340, "node_id": "I_kwDOAh3yxs5Sum0c", "number": 7056, "title": "`borg recreate` fails with `KeyError: 'sparse'` when using `fixed` chunker", "user": {"login": "MRWITEK", "id": 3463397, "node_id": "MDQ6VXNlcjM0NjMzOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3463397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MRWITEK", "html_url": "https://github.com/MRWITEK", "followers_url": "https://api.github.com/users/MRWITEK/followers", "following_url": "https://api.github.com/users/MRWITEK/following{/other_user}", "gists_url": "https://api.github.com/users/MRWITEK/gists{/gist_id}", "starred_url": "https://api.github.com/users/MRWITEK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MRWITEK/subscriptions", "organizations_url": "https://api.github.com/users/MRWITEK/orgs", "repos_url": "https://api.github.com/users/MRWITEK/repos", "events_url": "https://api.github.com/users/MRWITEK/events{/privacy}", "received_events_url": "https://api.github.com/users/MRWITEK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 2, "created_at": "2022-09-27T15:22:19Z", "updated_at": "2022-10-02T12:34:21Z", "closed_at": "2022-10-02T12:34:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n`borg 1.2.2`\r\n\r\n#### Operating system (distribution) and version.\r\nUp-to-date Arch Linux\r\n\r\n#### Filesystems used.\r\next4 and tmpfs\r\n\r\n#### How much data is handled by borg?\r\nAny amount\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n```\r\nborg recreate --chunker-params=fixed,4096 ./borg\r\n```\r\n\r\n## Describe the problem you're observing.\r\n`borg recreate` fails with `KeyError: 'sparse'`\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n```\r\nborg init --encryption none ./borg\r\necho testing | borg create ./borg::data -\r\nborg --debug recreate --chunker-params=fixed,4096 ./borg\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nusing builtin fallback logging configuration\r\n33 self tests completed in 0.10 seconds\r\nVerified integrity of /tmp/borg/index.5\r\nTAM-verified manifest\r\nsecurity: read previous location '/tmp/borg'\r\nsecurity: read manifest timestamp '2022-09-26T21:24:52.146884'\r\nsecurity: determined newest manifest timestamp as 2022-09-26T21:24:52.146884\r\nsecurity: repository checks ok, allowing access\r\nVerified integrity of /home/cat/.cache/borg/aafd5e0ed92a7d5fe9df2f810d49ce6713b4e4c0704179cbedeaa97616d9ca61/chunks\r\nsecurity: read previous location '/tmp/borg'\r\nsecurity: read manifest timestamp '2022-09-26T21:24:52.146884'\r\nsecurity: determined newest manifest timestamp as 2022-09-26T21:24:52.146884\r\nsecurity: repository checks ok, allowing access\r\nRechunking archives to ('fixed', 4096, 0)\r\nProcessing data\r\nRechunking archive from ('buzhash', 19, 23, 21, 4095) to ('fixed', 4096, 0)\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 5159, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 5090, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 181, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 1712, in do_recreate\r\n    if not recreater.recreate(name, args.comment):\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 2121, in recreate\r\n    target = self.create_target(archive, target_name)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 2312, in create_target\r\n    target.chunker = get_chunker(*target.chunker_params, seed=self.key.chunk_seed)\r\n  File \"src/borg/chunker.pyx\", line 288, in borg.chunker.get_chunker\r\nKeyError: 'sparse'\r\n\r\nPlatform: Linux deskcat 5.19.10-arch1-1 #1 SMP PREEMPT_DYNAMIC Tue, 20 Sep 2022 15:17:59 +0000 x86_64\r\nLinux: Unknown Linux\r\nBorg: 1.2.2  Python: CPython 3.10.7 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 26890  CWD: /tmp\r\nsys.argv: ['/usr/bin/borg', '--debug', 'recreate', '--chunker-params=fixed,4096', './borg']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7056/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7056/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7053", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7053/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7053/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7053/events", "html_url": "https://github.com/borgbackup/borg/issues/7053", "id": 1386726808, "node_id": "I_kwDOAh3yxs5Sp8WY", "number": 7053, "title": "borg 2.0.0b2: borg transfer crashes if user/group == None in borg1 archive", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/94", "html_url": "https://github.com/borgbackup/borg/milestone/94", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/94/labels", "id": 8366680, "node_id": "MI_kwDOAh3yxs4Af6pY", "number": 94, "title": "2.0.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2022-08-31T00:43:08Z", "updated_at": "2022-10-03T18:14:16Z", "due_on": null, "closed_at": "2022-10-02T18:21:00Z"}, "comments": 0, "created_at": "2022-09-26T21:08:04Z", "updated_at": "2022-09-28T12:35:41Z", "closed_at": "2022-09-28T12:35:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nsudo borgmatic transfer --source-repository ssh://backup@attic.schafweide.org/./x270o --upgrader From12To20\r\n\r\nx270-2022-09-18T01:47:43.241134: copying archive to destination repo...\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/__init__.py\", line 591, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/__init__.py\", line 519, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/_common.py\", line 223, in wrapper\r\n    return method(self, args, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/_common.py\", line 155, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/transfer_cmd.py\", line 66, in do_transfer\r\n    for item in other_archive.iter_items():\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 610, in iter_items\r\n    for item in self.pipeline.unpack_many(\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 284, in unpack_many\r\n    items = [Item(internal_dict=item) for item in unpacker]\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 284, in <listcomp>\r\n    items = [Item(internal_dict=item) for item in unpacker]\r\n  File \"src/borg/item.pyx\", line 143, in borg.item.PropDict.__init__\r\n  File \"src/borg/item.pyx\", line 369, in borg.item.Item.update_internal\r\n  File \"src/borg/item.pyx\", line 32, in borg.item.fix_str_value\r\n  File \"src/borg/item.pyx\", line 110, in borg.item.want_str\r\nAssertionError: not a str object, but None\r\nPlatform: Linux x270 5.19.10-arch1-1 #1 SMP PREEMPT_DYNAMIC Tue, 20 Sep 2022 15:17:59 +0000 x86_64\r\nLinux: Unknown Linux\r\nBorg: 2.0.0b2  Python: CPython 3.10.7 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 57524  CWD: /mnt/home.bjo\r\nsys.argv: ['/usr/bin/borg', 'transfer', '--upgrader', 'From12To20', '--repo', 'ssh://backup@attic.schafweide.org/./x270', '--other-repo', 'ssh://backup@attic.schafweide.org/./x270o']\r\nSSH_ORIGINAL_COMMAND: None\r\nssh://backup@attic.schafweide.org/./x270: Error running actions for repository\r\nCommand 'borg transfer --upgrader From12To20 --repo ssh://backup@attic.schafweide.org/./x270 --other-repo ssh://backup@attic.schafweide.org/./x270o' returned non-zero exit status 2.\r\n/etc/borgmatic/config.yaml: Error running configuration file\r\n\r\nsummary:\r\n/etc/borgmatic/config.yaml: Remote repository paths without ssh:// syntax are deprecated. Interpreting \"backup@attic.schafweide.org:x270\" as \"ssh://backup@attic.schafweide.org/./x270\"\r\n/etc/borgmatic/config.yaml: Error running configuration file\r\nssh://backup@attic.schafweide.org/./x270: Error running actions for repository\r\n...\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/__init__.py\", line 519, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/_common.py\", line 223, in wrapper\r\n    return method(self, args, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/_common.py\", line 155, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver/transfer_cmd.py\", line 66, in do_transfer\r\n    for item in other_archive.iter_items():\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 610, in iter_items\r\n    for item in self.pipeline.unpack_many(\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 284, in unpack_many\r\n    items = [Item(internal_dict=item) for item in unpacker]\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 284, in <listcomp>\r\n    items = [Item(internal_dict=item) for item in unpacker]\r\n  File \"src/borg/item.pyx\", line 143, in borg.item.PropDict.__init__\r\n  File \"src/borg/item.pyx\", line 369, in borg.item.Item.update_internal\r\n  File \"src/borg/item.pyx\", line 32, in borg.item.fix_str_value\r\n  File \"src/borg/item.pyx\", line 110, in borg.item.want_str\r\nAssertionError: not a str object, but None\r\nPlatform: Linux x270 5.19.10-arch1-1 #1 SMP PREEMPT_DYNAMIC Tue, 20 Sep 2022 15:17:59 +0000 x86_64\r\nLinux: Unknown Linux\r\nBorg: 2.0.0b2  Python: CPython 3.10.7 msgpack: 1.0.4 fuse: llfuse 1.4.2 [pyfuse3,llfuse]\r\nPID: 57524  CWD: /mnt/home.bjo\r\nsys.argv: ['/usr/bin/borg', 'transfer', '--upgrader', 'From12To20', '--repo', 'ssh://backup@attic.schafweide.org/./x270', '--other-repo', 'ssh://backup@attic.schafweide.org/./x270o']\r\nSSH_ORIGINAL_COMMAND: None\r\nCommand 'borg transfer --upgrader From12To20 --repo ssh://backup@attic.schafweide.org/./x270 --other-repo ssh://backup@attic.schafweide.org/./x270o' returned non-zero exit status 2.\r\n\r\nNeed some help? https://torsion.org/borgmatic/#issues\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/7034", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/7034/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/7034/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/7034/events", "html_url": "https://github.com/borgbackup/borg/issues/7034", "id": 1376814466, "node_id": "I_kwDOAh3yxs5SEIWC", "number": 7034, "title": "Running `borg check` causes `local variable 'segment' referenced before assignment`", "user": {"login": "WilliamDEdwards", "id": 12184311, "node_id": "MDQ6VXNlcjEyMTg0MzEx", "avatar_url": "https://avatars.githubusercontent.com/u/12184311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WilliamDEdwards", "html_url": "https://github.com/WilliamDEdwards", "followers_url": "https://api.github.com/users/WilliamDEdwards/followers", "following_url": "https://api.github.com/users/WilliamDEdwards/following{/other_user}", "gists_url": "https://api.github.com/users/WilliamDEdwards/gists{/gist_id}", "starred_url": "https://api.github.com/users/WilliamDEdwards/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WilliamDEdwards/subscriptions", "organizations_url": "https://api.github.com/users/WilliamDEdwards/orgs", "repos_url": "https://api.github.com/users/WilliamDEdwards/repos", "events_url": "https://api.github.com/users/WilliamDEdwards/events{/privacy}", "received_events_url": "https://api.github.com/users/WilliamDEdwards/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-17T16:24:39Z", "updated_at": "2022-09-17T19:22:46Z", "closed_at": "2022-09-17T19:22:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug report.\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nmacOS 12.5.1\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nAPFS\r\n\r\n#### How much data is handled by borg?\r\n\r\nRepository is empty.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n    BORG_PASSCOMMAND=test borg check koffer\r\n\r\n## Describe the problem you're observing.\r\n\r\nWhen a repository is corrupt, and `borg check` is run, the following error is written to stderr:\r\n\r\n    UnboundLocalError: local variable 'segment' referenced before assignment\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\n- Create repository\r\n- Corrupt it, e.g. by moving away files in `data/`\r\n- Run `borg check`\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Cellar/borgbackup/1.2.0/libexec/lib/python3.10/site-packages/borg/archiver.py\", line 5089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/local/Cellar/borgbackup/1.2.0/libexec/lib/python3.10/site-packages/borg/archiver.py\", line 5020, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/local/Cellar/borgbackup/1.2.0/libexec/lib/python3.10/site-packages/borg/archiver.py\", line 183, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/local/Cellar/borgbackup/1.2.0/libexec/lib/python3.10/site-packages/borg/archiver.py\", line 342, in do_check\r\n    if not repository.check(repair=args.repair, save_space=args.save_space, max_duration=args.max_duration):\r\n  File \"/usr/local/Cellar/borgbackup/1.2.0/libexec/lib/python3.10/site-packages/borg/repository.py\", line 1040, in check\r\n    logger.info('finished segment check at segment %d', segment)\r\nUnboundLocalError: local variable 'segment' referenced before assignment\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/7034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/7034/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6997", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6997/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6997/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6997/events", "html_url": "https://github.com/borgbackup/borg/issues/6997", "id": 1357617389, "node_id": "I_kwDOAh3yxs5Q65jt", "number": 6997, "title": "check xattr namespace behaviour", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 4484222215, "node_id": "LA_kwDOAh3yxs8AAAABC0fNBw", "url": "https://api.github.com/repos/borgbackup/borg/labels/os:%20bsd", "name": "os: bsd", "color": "ffffff", "default": false, "description": "FreeBSD, NetBSD, OpenBSD, ..."}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/92", "html_url": "https://github.com/borgbackup/borg/milestone/92", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/92/labels", "id": 8274548, "node_id": "MI_kwDOAh3yxs4AfkJ0", "number": 92, "title": "1.2.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2022-08-06T08:23:33Z", "updated_at": "2023-03-23T22:26:33Z", "due_on": null, "closed_at": "2023-03-23T22:26:33Z"}, "comments": 11, "created_at": "2022-08-31T17:00:32Z", "updated_at": "2023-03-13T16:20:30Z", "closed_at": "2023-03-13T16:20:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "there was a strange issue in #6988 and the root cause was a strange xattr named `user.security.selinux` (the correct name would be `security.selinux`).\r\n\r\nthe processing (or rather ignoring) of such invalid stuff was solved by #6990.\r\n\r\nbut the open question is still: where did that invalid xattr initially come from?\r\n\r\nwe should make sure it did not come from borg.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6997/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6988", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6988/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6988/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6988/events", "html_url": "https://github.com/borgbackup/borg/issues/6988", "id": 1347246996, "node_id": "I_kwDOAh3yxs5QTVuU", "number": 6988, "title": "EINVAL error when processing xattrs (borg 1.2.1)", "user": {"login": "Rudd-O", "id": 346306, "node_id": "MDQ6VXNlcjM0NjMwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/346306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rudd-O", "html_url": "https://github.com/Rudd-O", "followers_url": "https://api.github.com/users/Rudd-O/followers", "following_url": "https://api.github.com/users/Rudd-O/following{/other_user}", "gists_url": "https://api.github.com/users/Rudd-O/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rudd-O/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rudd-O/subscriptions", "organizations_url": "https://api.github.com/users/Rudd-O/orgs", "repos_url": "https://api.github.com/users/Rudd-O/repos", "events_url": "https://api.github.com/users/Rudd-O/events{/privacy}", "received_events_url": "https://api.github.com/users/Rudd-O/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/91", "html_url": "https://github.com/borgbackup/borg/milestone/91", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/91/labels", "id": 8241404, "node_id": "MI_kwDOAh3yxs4AfcD8", "number": 91, "title": "2.0.0b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2022-07-27T10:28:01Z", "updated_at": "2022-09-10T15:27:02Z", "due_on": null, "closed_at": "2022-09-10T15:27:02Z"}, "comments": 28, "created_at": "2022-08-23T02:41:35Z", "updated_at": "2022-09-09T22:53:42Z", "closed_at": "2022-09-09T22:53:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Some files on my system, when they are being backed up, cause `borg` to emit this:\r\n\r\n```\r\nAug 23 02:37:18 penny.dragonfear borg-offsite-backup[937998]: srv/shared/Albums/Bolitas de agua saltan/PXL_20220324_124712302.mp4: extended stat: [Errno 22] Invalid argument: '<FD 12>'\r\n```\r\n\r\nThis causes the backup to finish with error code 1.\r\n\r\nOf note is that the files have extended attributes:\r\n\r\n```\r\n[root@penny /]# getfattr 'srv/shared/Albums/Bolitas de agua saltan/PXL_20220324_124712302.mp4'\r\n# file: srv/shared/Albums/Bolitas de agua saltan/PXL_20220324_124712302.mp4\r\nuser.DOSATTRIB\r\nuser.security.selinux\r\n```\r\n\r\nThis did not appear to happen with `borg` 1.2.0.\r\n\r\nI use Fedora 36 and ZFS.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6988/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6966", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6966/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6966/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6966/events", "html_url": "https://github.com/borgbackup/borg/issues/6966", "id": 1337691705, "node_id": "I_kwDOAh3yxs5Pu445", "number": 6966, "title": "archive name placeholder replacement does not work", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/91", "html_url": "https://github.com/borgbackup/borg/milestone/91", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/91/labels", "id": 8241404, "node_id": "MI_kwDOAh3yxs4AfcD8", "number": 91, "title": "2.0.0b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2022-07-27T10:28:01Z", "updated_at": "2022-09-10T15:27:02Z", "due_on": null, "closed_at": "2022-09-10T15:27:02Z"}, "comments": 0, "created_at": "2022-08-12T20:43:38Z", "updated_at": "2022-09-09T22:23:47Z", "closed_at": "2022-09-09T22:23:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "master branch:\r\n\r\n```\r\nborg create arch-{now:%Y-%m-%d-%H:%M:%S%z} data --timestamp=2022-12-31-23:59:59.123456+09:30\r\n```\r\n\r\nresults in:\r\n```\r\narch-2022-08-12-21:21:31+0200\r\n```\r\n\r\nthere is some timestamp patching code for `args.location`, but not yet for `args.name`.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6933", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6933/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6933/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6933/events", "html_url": "https://github.com/borgbackup/borg/issues/6933", "id": 1328364930, "node_id": "I_kwDOAh3yxs5PLT2C", "number": 6933, "title": "Repository config file permissions wrong when using ACLs", "user": {"login": "PromyLOPh", "id": 13182, "node_id": "MDQ6VXNlcjEzMTgy", "avatar_url": "https://avatars.githubusercontent.com/u/13182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PromyLOPh", "html_url": "https://github.com/PromyLOPh", "followers_url": "https://api.github.com/users/PromyLOPh/followers", "following_url": "https://api.github.com/users/PromyLOPh/following{/other_user}", "gists_url": "https://api.github.com/users/PromyLOPh/gists{/gist_id}", "starred_url": "https://api.github.com/users/PromyLOPh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PromyLOPh/subscriptions", "organizations_url": "https://api.github.com/users/PromyLOPh/orgs", "repos_url": "https://api.github.com/users/PromyLOPh/repos", "events_url": "https://api.github.com/users/PromyLOPh/events{/privacy}", "received_events_url": "https://api.github.com/users/PromyLOPh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 6, "created_at": "2022-08-04T09:49:25Z", "updated_at": "2022-08-05T12:21:06Z", "closed_at": "2022-08-05T11:04:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n.borg-real 1.2.1\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nGNU Guix (Linux), commit d5ba31c19accdf14bca23ebc0c3baf1c5b08fb5f\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nAny filesystem with ACL support (ext4, tmpfs, \u2026)\r\n\r\n## Describe the problem you're observing.\r\n\r\n```console\r\n$ umask\r\n022\r\n$ mkdir withAcl\r\n$ setfacl -m d:g:audio:rx withAcl\r\n$ borg init -e none withAcl/repo\r\n$ ls -lh withAcl/repo/config\r\n-rw-------+ 1 user user 209  4. Aug 11:36 withAcl/repo/config\r\n$ getfacl withAcl/repo/config\r\n# file: withAcl/repo/config\r\n# owner: user\r\n# group: user\r\nuser::rw-\r\ngroup::r-x\t\t\t#effective:---\r\ngroup:audio:r-x\t\t\t#effective:---\r\nmask::---\r\nother::---\r\n```\r\n\r\nborg uses `mkstemp` to create its repository config file, which apparently clears the mask for ACLs. Thus the inherited group `audio` (and even the standard file group) does not have any permissions on that file.\r\n\r\nThe following patch fixes the issue, but I\u2019m not sure it applies to Windows/Darwin/BSD/\u2026 as well:\r\n\r\n```patch\r\ndiff -Naur borgbackup-1.2.1.orig/src/borg/platform/base.py borgbackup-1.2.1/src/borg/platform/base.py\r\n--- borgbackup-1.2.1.orig/src/borg/platform/base.py\t1970-01-01 01:00:01.000000000 +0100\r\n+++ borgbackup-1.2.1/src/borg/platform/base.py\t2022-08-04 11:18:06.205481514 +0200\r\n@@ -227,7 +227,14 @@\r\n\r\n     def __enter__(self):\r\n         from .. import platform\r\n-        self.tmp_fd, self.tmp_fname = tempfile.mkstemp(prefix=self.tmp_prefix, suffix='.tmp', dir=self.dir)\r\n+        i = 0\r\n+        while True:\r\n+            self.tmp_fname = os.path.join(self.dir, self.tmp_prefix + str(i) + '.tmp')\r\n+            try:\r\n+                self.tmp_fd = os.open(self.tmp_fname, flags=os.O_RDWR|os.O_CREAT|os.O_EXCL, mode=0o666)\r\n+                break\r\n+            except FileNotFoundError:\r\n+                i += 1\r\n         self.f = platform.SyncFile(self.tmp_fname, fd=self.tmp_fd, binary=self.binary)\r\n         return self.f\r\n\r\n@@ -239,14 +246,6 @@\r\n             safe_unlink(self.tmp_fname)  # with-body has failed, clean up tmp file\r\n             return  # continue processing the exception normally\r\n\r\n-        # tempfile.mkstemp always uses owner-only file permissions for the temp file,\r\n-        # but as we'll rename it to the non-temp permanent file now, we need to respect\r\n-        # the umask and change the file mode to what a normally created file would have.\r\n-        # thanks to the crappy os.umask api, we can't query the umask without setting it. :-(\r\n-        umask = os.umask(UMASK_DEFAULT)\r\n-        os.umask(umask)\r\n-        os.chmod(self.tmp_fname, mode=0o666 & ~ umask)\r\n-\r\n         try:\r\n             os.replace(self.tmp_fname, self.path)  # POSIX: atomic rename\r\n         except OSError:\r\n```\r\n\r\n```console\r\n$ ls -lh withAcl/repo2/config\r\n-rw-r--r--+ 1 user user 209  4. Aug 11:41 withAcl/repo2/config\r\n$ getfacl withAcl/repo2/config\r\n# file: withAcl/repo2/config\r\n# owner: user\r\n# group: user\r\nuser::rw-\r\ngroup::r-x\t\t\t#effective:r--\r\ngroup:audio:r-x\t\t\t#effective:r--\r\nmask::r--\r\nother::r--\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6811", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6811/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6811/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6811/events", "html_url": "https://github.com/borgbackup/borg/issues/6811", "id": 1287447424, "node_id": "I_kwDOAh3yxs5MvOOA", "number": 6811, "title": "do not require repo version = 2 for borg transfer --other-repo", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/87", "html_url": "https://github.com/borgbackup/borg/milestone/87", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/87/labels", "id": 8129834, "node_id": "MI_kwDOAh3yxs4AfA0q", "number": 87, "title": "2.0.0a3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2022-06-26T19:57:13Z", "updated_at": "2022-07-04T16:34:32Z", "due_on": null, "closed_at": "2022-07-04T16:34:32Z"}, "comments": 0, "created_at": "2022-06-28T14:34:49Z", "updated_at": "2022-06-29T19:20:49Z", "closed_at": "2022-06-29T19:20:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the old repos have version 1.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6786", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6786/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6786/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6786/events", "html_url": "https://github.com/borgbackup/borg/issues/6786", "id": 1282576934, "node_id": "I_kwDOAh3yxs5McpIm", "number": 6786, "title": "smb: Backups no longer working (1.2.1 patch regression)", "user": {"login": "sophie-h", "id": 3466497, "node_id": "MDQ6VXNlcjM0NjY0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3466497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sophie-h", "html_url": "https://github.com/sophie-h", "followers_url": "https://api.github.com/users/sophie-h/followers", "following_url": "https://api.github.com/users/sophie-h/following{/other_user}", "gists_url": "https://api.github.com/users/sophie-h/gists{/gist_id}", "starred_url": "https://api.github.com/users/sophie-h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sophie-h/subscriptions", "organizations_url": "https://api.github.com/users/sophie-h/orgs", "repos_url": "https://api.github.com/users/sophie-h/repos", "events_url": "https://api.github.com/users/sophie-h/events{/privacy}", "received_events_url": "https://api.github.com/users/sophie-h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 4, "created_at": "2022-06-23T15:19:18Z", "updated_at": "2022-08-07T18:35:37Z", "closed_at": "2022-06-23T16:09:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nNo\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.1\r\n\r\n#### Operating system (distribution) and version.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nDebian smb server / gvfs\r\n\r\n#### How much data is handled by borg?\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n`borg create ...` on `/run/user/1000/gvfs/smb-share:server`\r\n\r\n## Describe the problem you're observing.\r\n\r\n```\r\n    os.chmod(self.tmp_fname, mode=0o666 & ~ umask)\r\nOSError: [Errno 95] Operation not supported: '/run/user/1000/gvfs/smb-share:server=\u2026/test/nonce-wgo81cle.tmp'\r\n\r\nPlatform: Linux desktop 5.10.0-9-amd64 #1 SMP Debian 5.10.70-1 (2021-09-30) x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.2.1  Python: CPython 3.9.9 msgpack: 1.0.4 fuse: pyfuse3 3.2.1 [pyfuse3,llfuse]\r\n```\r\n\r\nLooks like this is a problem because SMB just doesn't support chmod (at least I can't do it via terminal with gvfs)? 0f9d88bf2e1f2d14be8fa30810948ef0e4107f42\r\n\r\nOriginal issue is https://gitlab.gnome.org/World/pika-backup/-/issues/241", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6778", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6778/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6778/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6778/events", "html_url": "https://github.com/borgbackup/borg/issues/6778", "id": 1276701289, "node_id": "I_kwDOAh3yxs5MGOpp", "number": 6778, "title": "create --paths-from-*: paths are not normalised by borg", "user": {"login": "pooryorick", "id": 49486, "node_id": "MDQ6VXNlcjQ5NDg2", "avatar_url": "https://avatars.githubusercontent.com/u/49486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooryorick", "html_url": "https://github.com/pooryorick", "followers_url": "https://api.github.com/users/pooryorick/followers", "following_url": "https://api.github.com/users/pooryorick/following{/other_user}", "gists_url": "https://api.github.com/users/pooryorick/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooryorick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooryorick/subscriptions", "organizations_url": "https://api.github.com/users/pooryorick/orgs", "repos_url": "https://api.github.com/users/pooryorick/repos", "events_url": "https://api.github.com/users/pooryorick/events{/privacy}", "received_events_url": "https://api.github.com/users/pooryorick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 10, "created_at": "2022-06-20T10:20:29Z", "updated_at": "2022-06-21T22:20:35Z", "closed_at": "2022-06-21T22:20:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Within archives created with borg 1.2.0/1.2.1 and the options \r\n\r\n```\r\n--paths-from-stdin --paths-delimiter \"\\0\"\r\n```\r\n\r\neach path begins with ```./```:\r\n\r\n```\r\n./path/to/file1\r\n./path/to/file2\r\netc...\r\n```\r\n\r\n```borg extract``` can extract the entire archive, but if a path is given no\r\nfiles are extracted because there is no way to match ```./``` \r\n\r\nIf the archive is mounted, the top directory under the mount is named ```.```\r\n(dot), and thus there is no way to access the files under it.\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6768", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6768/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6768/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6768/events", "html_url": "https://github.com/borgbackup/borg/issues/6768", "id": 1269381817, "node_id": "I_kwDOAh3yxs5LqTq5", "number": 6768, "title": "borg check causes corruption in hardlinked config file", "user": {"login": "jdchristensen", "id": 3374048, "node_id": "MDQ6VXNlcjMzNzQwNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/3374048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdchristensen", "html_url": "https://github.com/jdchristensen", "followers_url": "https://api.github.com/users/jdchristensen/followers", "following_url": "https://api.github.com/users/jdchristensen/following{/other_user}", "gists_url": "https://api.github.com/users/jdchristensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdchristensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdchristensen/subscriptions", "organizations_url": "https://api.github.com/users/jdchristensen/orgs", "repos_url": "https://api.github.com/users/jdchristensen/repos", "events_url": "https://api.github.com/users/jdchristensen/events{/privacy}", "received_events_url": "https://api.github.com/users/jdchristensen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 7, "created_at": "2022-06-13T12:42:57Z", "updated_at": "2022-06-13T17:41:25Z", "closed_at": "2022-06-13T17:41:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nTested on Ubuntu 20.04 and 21.10.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\next4\r\n\r\n#### How much data is handled by borg?\r\n\r\nDoesn't matter.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nmkdir /tmp/borgtest\r\ncd /tmp/borgtest\r\nborg init -e none test.repo\r\ncp -al test.repo copy.repo\r\nborg check -v test.repo\r\ncat copy.repo/config  [binary data]\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nAfter making a hardlink copy of a repo, running check on the original causes corruption of the config file in the copy.  It happens with archives in the repo too, but I omitted this to make the script as short as possible.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nReproducible using the steps above.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNone.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6709", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6709/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6709/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6709/events", "html_url": "https://github.com/borgbackup/borg/issues/6709", "id": 1243859719, "node_id": "I_kwDOAh3yxs5KI8sH", "number": 6709, "title": "consider adding repo cleanup for failed files", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/96", "html_url": "https://github.com/borgbackup/borg/milestone/96", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/96/labels", "id": 8693177, "node_id": "MI_kwDOAh3yxs4AhKW5", "number": 96, "title": "2.0.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2022-11-26T11:48:15Z", "updated_at": "2023-02-27T00:20:37Z", "due_on": null, "closed_at": "2023-02-27T00:20:37Z"}, "comments": 2, "created_at": "2022-05-21T04:01:49Z", "updated_at": "2023-03-04T14:10:03Z", "closed_at": "2023-02-03T01:08:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "there is a known issue that if a file somehow fails in the middle of processing (e.g. due to an I/O error within the input file), borg will have written some of the content chunks to the repo, but then will abort processing that single file without adding a file item to the archive that references these chunks. borg will process all other remaining files and then commit.\r\n\r\nthis is how orphaned chunks can get created. borg check will then report an issue and will clean up these orphaned chunks.\r\n\r\nin `item.chunks` we have the list of chunkids we'ld need to remove again within the exception handler or a `finally:`. \r\n\r\nBounty: https://app.bountysource.com/issues/108737475-consider-adding-repo-cleanup-for-failed-files\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6709/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6681", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6681/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6681/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6681/events", "html_url": "https://github.com/borgbackup/borg/issues/6681", "id": 1228699979, "node_id": "I_kwDOAh3yxs5JPHlL", "number": 6681, "title": "crashing with UnboundLocalError in create_filter_process", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 1, "created_at": "2022-05-07T19:03:39Z", "updated_at": "2022-05-08T17:15:37Z", "closed_at": "2022-05-08T17:15:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n        try:\r\n            yield stream\r\n    \r\n        except Exception:\r\n            # something went wrong with processing the stream by borg\r\n            logger.debug('Exception, killing the filter...')\r\n>           proc.kill()\r\nE           UnboundLocalError: local variable 'proc' referenced before assignment\r\n\r\nsrc/borg/helpers/process.py:335: UnboundLocalError\r\n```\r\n\r\nGuess cmd can be None and there should be a `if cmd:`.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6681/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6606", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6606/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6606/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6606/events", "html_url": "https://github.com/borgbackup/borg/issues/6606", "id": 1206121531, "node_id": "I_kwDOAh3yxs5H4_Q7", "number": 6606, "title": "--iec parameter ignored in some places", "user": {"login": "jernejs", "id": 1800143, "node_id": "MDQ6VXNlcjE4MDAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1800143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jernejs", "html_url": "https://github.com/jernejs", "followers_url": "https://api.github.com/users/jernejs/followers", "following_url": "https://api.github.com/users/jernejs/following{/other_user}", "gists_url": "https://api.github.com/users/jernejs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jernejs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jernejs/subscriptions", "organizations_url": "https://api.github.com/users/jernejs/orgs", "repos_url": "https://api.github.com/users/jernejs/repos", "events_url": "https://api.github.com/users/jernejs/events{/privacy}", "received_events_url": "https://api.github.com/users/jernejs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-04-16T14:15:21Z", "updated_at": "2023-01-16T20:03:03Z", "closed_at": "2023-01-16T20:03:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nIssue\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nGentoo Linux amd64\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n````\r\nexport BORG_REPO=/mnt/storage/borg\r\nborg --iec create --progress -v -s --compression=zstd ::deepthought-SSD-2022-04-16_15:02:22 / --exclude-from /root/scripts/backup/backup.exclude\r\n\r\nborg --iec prune --progress --prefix=deepthought-SSD- -v -s --list -H 24 -d 15 -w 12 -m 24 -y -1\r\n````\r\n## Describe the problem you're observing.\r\n\r\nWhen creating the archive, **storage quota is reported in decimal units** despite the `--iec` flag. `--stats` are reported in binary units:\r\n````\r\nCreating archive at \"/mnt/storage/borg::deepthought-SSD-2022-04-16_15:02:22\"\r\nStorage quota: 193.62 GB out of 17.65 TB used.DRASIL/ender/.wine/drive_c/windows/system32/slc.dll\r\nStorage quota: 193.77 GB out of 17.65 TB used.\r\n------------------------------------------------------------------------------\r\nRepository: /mnt/storage/borg\r\nArchive name: deepthought-SSD-2022-04-16_15:02:22\r\nArchive fingerprint: 89f4b63f7deefee5245b190fed80f9ebf2a9009a4a069e5a106f11000be11bb0\r\nTime (start): Sat, 2022-04-16 15:02:23\r\nTime (end):   Sat, 2022-04-16 15:08:45\r\nDuration: 6 minutes 22.57 seconds\r\nNumber of files: 953378\r\nUtilization of max. archive size: 0%\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              72.63 GiB            41.78 GiB           139.09 MiB\r\nAll archives:             558.34 GiB           490.62 GiB           180.43 GiB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  830602              2346427\r\n------------------------------------------------------------------------------\r\n````\r\nWhen **deleting or pruning** the archives, --stats are reported in decimal units (again, despite having used the --iec flag):\r\n````\r\nKeeping archive (rule: hourly #1):       deepthought-SSD-2022-04-16_01:27:21 Sat, 2022-04-16 01:27:21 [7fc4f37abc15ac65df9d7e98429631b2e36c18d3d543815dd6bec8ca8130bcad]\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nDeleted data:                    0 B                  0 B                  0 B\r\nAll archives:              299.75 GB            263.38 GB            193.55 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  829998              1173203\r\n------------------------------------------------------------------------------\r\n````\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nHappens every time.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nThis is just a cosmetic issue.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6587", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6587/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6587/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6587/events", "html_url": "https://github.com/borgbackup/borg/issues/6587", "id": 1203756598, "node_id": "I_kwDOAh3yxs5Hv942", "number": 6587, "title": "metadata all-zero chunk processing issue", "user": {"login": "DrBrynzo", "id": 37386883, "node_id": "MDQ6VXNlcjM3Mzg2ODgz", "avatar_url": "https://avatars.githubusercontent.com/u/37386883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrBrynzo", "html_url": "https://github.com/DrBrynzo", "followers_url": "https://api.github.com/users/DrBrynzo/followers", "following_url": "https://api.github.com/users/DrBrynzo/following{/other_user}", "gists_url": "https://api.github.com/users/DrBrynzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrBrynzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrBrynzo/subscriptions", "organizations_url": "https://api.github.com/users/DrBrynzo/orgs", "repos_url": "https://api.github.com/users/DrBrynzo/repos", "events_url": "https://api.github.com/users/DrBrynzo/events{/privacy}", "received_events_url": "https://api.github.com/users/DrBrynzo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 11, "created_at": "2022-04-13T20:26:27Z", "updated_at": "2022-04-14T07:57:56Z", "closed_at": "2022-04-14T01:53:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\nborg 1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\nmacOS Darwin mini 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:47:26 PDT 2022; root:xnu-8020.101.4~15/RELEASE_ARM64_T8101 arm64\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nAPFS source to different APFS-hosted repo, local backup (no networking)\r\n\r\n#### How much data is handled by borg?\r\n~700 GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n/Users/bryn/Library/Python/3.8/bin/borg -v create --exclude-from /Users/bryn/scripts/borgmatic/includes/excludes-global --exclude-caches --exclude-if-present .nobackup --compression zstd,8 --one-file-system --info --stats --progress /Volumes/crate/borg/repo::mini-bryn-{now} /Users/bryn/.config/rclone /Users/bryn/.ssh /Users/bryn/Documents /Users/bryn/KeePass /Users/bryn/Library/Mobile\\ Documents /Users/bryn/Movies /Users/bryn/Music /Users/bryn/Personal /Users/bryn/Pictures /Users/bryn/Source /Users/bryn/scripts /Volumes/crate/bryn /Volumes/wedge/movies /Volumes/wedge/photos\r\n\r\nNOTE: This is the pip-installed version. I've also tried the MacPorts version (appears to use Python 3.10 instead) with the same results.\r\n\r\n## Describe the problem you're observing.\r\n\r\nOkay, bear with me, this is weird (I think).\r\n\r\nI have two repos. Repo A (/Volumes/crate/borg/mini-bryn) is a backup just \"my\" data. Repo B (/Volumes/crate/borg/repo) is a backup of mine and my wife's data. Repo B is intended to be the \"way forward\" and I'm attempting to consolidate all our backups into a single repo with different prefixes and such but hopefully taking better advantage of deduplication to save some disk space on a local-connected RAID enclosure that hosts the repos. Just to be clear, I'm not attempting to import any \"old\" backups, just change which repo the backup command is pointed to.\r\n\r\nBackups to Repo A work fine.\r\nBackups to Repo B work fine.\r\n\r\nWhen I change the command line for the backup that was saving to Repo A to point at Repo B to start \"Backup A\" backing up to Repo B instead of Repo A the backup crashes with a \"Local Exception\".\r\n\r\nIf I switch the command line back to use Repo A (again, the ONLY change) it works fine again. A checkpoint is left in Repo B and the backups that were going to Repo B to start with continue to work with no problem as well.\r\n\r\nIn a nutshell, I simply can't add this particular backup to Repo B for some reason. I'm continuing to backup in parallel to both repos (Backup A to Repo A and Backup B to Repo B) with no problems for the time being.\r\n\r\nOne point of note is that the backups are failing during roughly the same part of the job where it gets to some big video files (a mix of raw *.dv, compressed .mp4, uncompressed and compressed MPEG) but it does NOT fail on the same video file each time, just at some point around the video folders. \r\n\r\nAll filesystems check out as clean.\r\nAll repos run full checks with no problems reported.\r\nPlease ignore the paths including \"borgmatic\". The failures were happening using borgmatic but all of my troubleshooting has been just using borg directly with no wrappers/scripts.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes, I can just run the same backup command line and switch the repo from A to B to produce the same error.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nThis is from the pip version of borg 1.2.0:\r\n\r\n```\r\nCreating archive at \"/Volumes/crate/borg/repo::mini-bryn-2022-04-13T12:42:49\"\r\nLocal Exception.93 GB C 2.80 GB D 31422 N Volumes/crate/bryn/iDVD/Joybang - Mellon J...2E8611DBBE98000A95BD93FA6D656E75_4000000_Main\r\nTraceback (most recent call last):\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 5089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 5020, in run\r\n    return set_ec(func(args))\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 183, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 668, in do_create\r\n    create_inner(archive, cache, fso)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 605, in create_inner\r\n    self._rec_walk(path=path, parent_fd=parent_fd, name=name,\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  [Previous line repeated 4 more times]\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 779, in _rec_walk\r\n    status = self._process_any(path=path, parent_fd=parent_fd, name=name, st=st, fso=fso, cache=cache,\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archiver.py\", line 681, in _process_any\r\n    return fso.process_file(path=path, parent_fd=parent_fd, name=name, st=st, cache=cache)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 1428, in process_file\r\n    return status\r\n  File \"/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/contextlib.py\", line 120, in __exit__\r\n    next(self.gen)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 1290, in create_helper\r\n    self.add_item(item, stats=self.stats)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 589, in add_item\r\n    self.items_buffer.add(item)\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 354, in add\r\n    self.flush()\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 368, in flush\r\n    chunks = list(bytes(chunk.data) for chunk in self.chunker.chunkify(self.buffer))\r\n  File \"/Users/bryn/Library/Python/3.8/lib/python/site-packages/borg/archive.py\", line 368, in <genexpr>\r\n    chunks = list(bytes(chunk.data) for chunk in self.chunker.chunkify(self.buffer))\r\nTypeError: cannot convert 'NoneType' object to bytes\r\n\r\nPlatform: Darwin mini 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:47:26 PDT 2022; root:xnu-8020.101.4~15/RELEASE_ARM64_T8101 arm64\r\nBorg: 1.2.0  Python: CPython 3.8.9 msgpack: 1.0.3 fuse: None [pyfuse3,llfuse]\r\nPID: 55848  CWD: /Users/bryn/scripts/borgmatic\r\nsys.argv: ['/Users/bryn/Library/Python/3.8/bin/borg', '-v', 'create', '--exclude-from', '/Users/bryn/scripts/borgmatic/includes/excludes-global', '--exclude-caches', '--exclude-if-present', '.nobackup', '--compression', 'zstd,8', '--one-file-system', '--info', '--stats', '--progress', '/Volumes/crate/borg/repo::mini-bryn-{now}', '/Users/bryn/.config/rclone', '/Users/bryn/.ssh', '/Users/bryn/Documents', '/Users/bryn/KeePass', '/Users/bryn/Library/Mobile Documents', '/Users/bryn/Movies', '/Users/bryn/Music', '/Users/bryn/Personal', '/Users/bryn/Pictures', '/Users/bryn/Source', '/Users/bryn/scripts', '/Volumes/crate/bryn', '/Volumes/wedge/movies', '/Volumes/wedge/photos']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThis is from the MacPorts version of borg 1.2.0:\r\n\r\n```\r\nCreating archive at \"/Volumes/crate/borg/repo::mini-bryn-2022-04-13T12:53:12\"\r\nLocal Exception.93 GB C 2.80 GB D 31422 N Volumes/crate/bryn/iDVD/Joybang - Mellon J...2E8611DBBE98000A95BD93FA6D656E75_4000000_Main\r\nTraceback (most recent call last):\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 5089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 5020, in run\r\n    return set_ec(func(args))\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 183, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 668, in do_create\r\n    create_inner(archive, cache, fso)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 605, in create_inner\r\n    self._rec_walk(path=path, parent_fd=parent_fd, name=name,\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 813, in _rec_walk\r\n    self._rec_walk(\r\n  [Previous line repeated 4 more times]\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 779, in _rec_walk\r\n    status = self._process_any(path=path, parent_fd=parent_fd, name=name, st=st, fso=fso, cache=cache,\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archiver.py\", line 681, in _process_any\r\n    return fso.process_file(path=path, parent_fd=parent_fd, name=name, st=st, cache=cache)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 1365, in process_file\r\n    with self.create_helper(path, st, None) as (item, status, hardlinked, hardlink_master):  # no status yet\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/contextlib.py\", line 142, in __exit__\r\n    next(self.gen)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 1290, in create_helper\r\n    self.add_item(item, stats=self.stats)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 589, in add_item\r\n    self.items_buffer.add(item)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 354, in add\r\n    self.flush()\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 368, in flush\r\n    chunks = list(bytes(chunk.data) for chunk in self.chunker.chunkify(self.buffer))\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/borg/archive.py\", line 368, in <genexpr>\r\n    chunks = list(bytes(chunk.data) for chunk in self.chunker.chunkify(self.buffer))\r\nTypeError: cannot convert 'NoneType' object to bytes\r\n\r\nPlatform: Darwin mini 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:47:26 PDT 2022; root:xnu-8020.101.4~15/RELEASE_ARM64_T8101 arm64\r\nBorg: 1.2.0  Python: CPython 3.10.4 msgpack: 1.0.3 fuse: None [pyfuse3,llfuse]\r\nPID: 55982  CWD: /Users/bryn/scripts/borgmatic\r\nsys.argv: ['/opt/local/bin/borg', '-v', 'create', '--exclude-from', '/Users/bryn/scripts/borgmatic/includes/excludes-global', '--exclude-caches', '--exclude-if-present', '.nobackup', '--compression', 'zstd,8', '--one-file-system', '--info', '--stats', '--progress', '/Volumes/crate/borg/repo::mini-bryn-{now}', '/Users/bryn/.config/rclone', '/Users/bryn/.ssh', '/Users/bryn/Documents', '/Users/bryn/KeePass', '/Users/bryn/Library/Mobile Documents', '/Users/bryn/Movies', '/Users/bryn/Music', '/Users/bryn/Personal', '/Users/bryn/Pictures', '/Users/bryn/Source', '/Users/bryn/scripts', '/Volumes/crate/bryn', '/Volumes/wedge/movies', '/Volumes/wedge/photos']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6570", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6570/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6570/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6570/events", "html_url": "https://github.com/borgbackup/borg/issues/6570", "id": 1200670065, "node_id": "I_kwDOAh3yxs5HkMVx", "number": 6570, "title": "borg create: Everything 0 archive_progress at end of backup", "user": {"login": "sophie-h", "id": 3466497, "node_id": "MDQ6VXNlcjM0NjY0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3466497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sophie-h", "html_url": "https://github.com/sophie-h", "followers_url": "https://api.github.com/users/sophie-h/followers", "following_url": "https://api.github.com/users/sophie-h/following{/other_user}", "gists_url": "https://api.github.com/users/sophie-h/gists{/gist_id}", "starred_url": "https://api.github.com/users/sophie-h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sophie-h/subscriptions", "organizations_url": "https://api.github.com/users/sophie-h/orgs", "repos_url": "https://api.github.com/users/sophie-h/repos", "events_url": "https://api.github.com/users/sophie-h/events{/privacy}", "received_events_url": "https://api.github.com/users/sophie-h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2022-04-11T23:27:19Z", "updated_at": "2022-07-25T11:09:26Z", "closed_at": "2022-05-08T17:45:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\n#### How much data is handled by borg?\r\n\r\nTested with very small test repos\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n## Describe the problem you're observing.\r\n\r\nDuring borg create I get the usual json output\r\n\r\n> {\"original_size\": 107384183, \"compressed_size\": 103279086, \"deduplicated_size\": 759473, \"nfiles\": 15, \"time\": 1649719099.1076434, \"type\": \"archive_progress\", \"path\": \"somepath\"}\r\n\r\nBut at the end I get\r\n\r\n> {\"original_size\": 0, \"compressed_size\": 0, \"deduplicated_size\": 0, \"nfiles\": 0, \"time\": 1649719099.2390628, \"type\": \"archive_progress\", \"path\": \"\"}\r\n\r\nand the next message is\r\n\r\n> {\"message\": \"Saving files cache\", \"operation\": 2, \"msgid\": \"cache.commit\", \"type\": \"progress_message\", \"finished\": false, \"time\": 1649719106.242265}\r\n\r\nI'm not sure how I should handle the archive_progress output with everything zero. Does it have a special meaning or is it a bug?\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6570/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6526", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6526/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6526/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6526/events", "html_url": "https://github.com/borgbackup/borg/issues/6526", "id": 1190946899, "node_id": "I_kwDOAh3yxs5G_GhT", "number": 6526, "title": "scp-style repo URL parsing broken for ip v6 addrs", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 3, "created_at": "2022-04-03T14:27:20Z", "updated_at": "2022-04-04T18:39:17Z", "closed_at": "2022-04-04T18:39:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported by @jeanrjc:\r\n\r\nHello, sorry to comment on this issue, but maybe I did not understand something.\r\n\r\nThe following does not work with borg 1.1.9:\r\n\r\n```bash\r\n$ borg check --archives-only backupNC@[2a02:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]:/media/pi/myCloudDrive/borgBKP --debug\r\nusing builtin fallback logging configuration\r\n35 self tests completed in 1.18 seconds\r\nSSH command line: ['ssh', 'backupNC@2a02', 'borg', 'serve', '--umask=077', '--debug']\r\nRemote: ssh: Could not resolve hostname 2a02: Name or service not known\r\nConnection closed by remote host. Is borg working on the server?\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4455, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4387, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 134, in wrapper\r\n    make_parent_dirs=make_parent_dirs, args=args)\r\n  File \"/usr/lib/python3/dist-packages/borg/remote.py\", line 577, in __init__\r\n    raise ConnectionClosedWithHint('Is borg working on the server?') from None\r\nborg.remote.ConnectionClosedWithHint: Connection closed by remote host. Is borg working on the server?\r\n\r\nPlatform: Linux nextcloudpi 5.10.103-v7l+ #1529 SMP Tue Mar 8 12:24:00 GMT 2022 armv7l\r\nLinux: debian 10.12 \r\nBorg: 1.1.9  Python: CPython 3.7.3\r\nPID: 4155  CWD: /home/pi\r\nsys.argv: ['/usr/bin/borg', 'check', '--archives-only', 'backupNC@[2a02:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx]:/media/pi/myCloudDrive/borgBKP', '--debug']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThe \"SSH command line\" is obviously wrong, what did I miss ? \r\n\r\nThanks\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6500", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6500/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6500/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6500/events", "html_url": "https://github.com/borgbackup/borg/issues/6500", "id": 1182219027, "node_id": "I_kwDOAh3yxs5GdzsT", "number": 6500, "title": "1.2.0 crashes when calculating statistics with older archives containing %", "user": {"login": "Jakeler", "id": 13378765, "node_id": "MDQ6VXNlcjEzMzc4NzY1", "avatar_url": "https://avatars.githubusercontent.com/u/13378765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jakeler", "html_url": "https://github.com/Jakeler", "followers_url": "https://api.github.com/users/Jakeler/followers", "following_url": "https://api.github.com/users/Jakeler/following{/other_user}", "gists_url": "https://api.github.com/users/Jakeler/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jakeler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jakeler/subscriptions", "organizations_url": "https://api.github.com/users/Jakeler/orgs", "repos_url": "https://api.github.com/users/Jakeler/repos", "events_url": "https://api.github.com/users/Jakeler/events{/privacy}", "received_events_url": "https://api.github.com/users/Jakeler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 1, "created_at": "2022-03-27T00:57:51Z", "updated_at": "2022-04-07T18:22:22Z", "closed_at": "2022-04-07T18:22:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes, error from #6063 looks similar, though this was in the filename instead of the archive name and affected an older version.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information\r\n\r\n```\r\nPlatform: Linux pc-arch 5.16.16-arch1-1 #1 SMP PREEMPT Mon, 21 Mar 2022 22:59:40 +0000 x86_64\r\nLinux: Arch Linux  \r\nBorg: 1.2.0  Python: CPython 3.10.3 msgpack: 1.0.3 fuse: llfuse 1.4.1 [pyfuse3,llfuse]\r\nPID: 112950  CWD: /mnt/backup/BorgRepos\r\nsys.argv: ['/usr/bin/borg', 'info', 'Laptop::Home_t440s-22.085']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n\r\n## Describe the problem you're observing.\r\nI created a new archive on this 5 years old repo, the first time with borg 1.2.0. It ran as usual, but failed at the end to get the statistics:\r\n```\r\n$ borg create -svp -C lz4 --patterns- .... 'Laptop::Home_t440s-{now:%y.%j}' $SRC\r\n\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 654, in calc_stats\r\n    stats = Statistics.from_raw_dict(**cache.pre12_meta[self.fpr])\r\nKeyError: '956cea6445100d48399f29e530cb1a994b86de3fcdb3978aa595e0dbadb93f52'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 5089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 5020, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 181, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 1392, in do_info\r\n    return self._info_archives(args, repository, manifest, key, cache)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archiver.py\", line 1417, in _info_archives\r\n    print(textwrap.dedent(\"\"\"\r\n  File \"/usr/lib/python3.10/site-packages/borg/cache.py\", line 414, in __str__\r\n    return self.str_format.format(self.format_tuple())\r\n  File \"/usr/lib/python3.10/site-packages/borg/cache.py\", line 441, in format_tuple\r\n    stats = self.stats()\r\n  File \"/usr/lib/python3.10/site-packages/borg/cache.py\", line 433, in stats\r\n    stats = archive.calc_stats(self, want_unique=False)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 656, in calc_stats\r\n    stats = self._calc_stats(cache, want_unique=want_unique)\r\n  File \"/usr/lib/python3.10/site-packages/borg/archive.py\", line 678, in _calc_stats\r\n    pi.show(increase=1)\r\n  File \"/usr/lib/python3.10/site-packages/borg/helpers/progress.py\", line 157, in show\r\n    return self.output(self.msg % pct)\r\nValueError: unsupported format character 'y' (0x79) at index 45\r\n```\r\nAlso checking with:\r\n```\r\nborg info Laptop::Home_t440s-22.085\r\n```\r\nfails with the same exception. Actually it fails for every archive in that repo. \r\nSo I looked into the repo and compared it with others that did not have this problem. Difference is one previous archive that has a `%` in the name.\r\nBorg 1.1.7 (and below) never had a problem with it.\r\n#### Can you reproduce the problem?\r\nYes, start with 1.1.7 or older:\r\n```sh\r\nborg init repo/ -e repokey\r\nborg create -svp 'repo::good-name' test/\r\nborg create -svp 'repo::bad-%-name' test/\r\nborg info repo::good-name # WORKS\r\n```\r\nThen update to 1.2.0, while keeping the same repo:\r\n```sh\r\nborg info repo::good-name # FAILS\r\n...\r\nValueError: unsupported format character 'n' (0x6e) at index 41\r\n```\r\nWorkaround:\r\n```sh\r\nborg rename repo::bad-%-name less-bad-name\r\nborg info repo::good-name # works again\r\n```\r\n\r\nBounty: https://app.bountysource.com/issues/106415617-1-2-0-crashes-when-calculating-statistics-with-older-archives-containing\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6500/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6483", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6483/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6483/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6483/events", "html_url": "https://github.com/borgbackup/borg/issues/6483", "id": 1178495221, "node_id": "I_kwDOAh3yxs5GPmj1", "number": 6483, "title": "borg diff contains path only entry", "user": {"login": "herrwusel", "id": 8242787, "node_id": "MDQ6VXNlcjgyNDI3ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/8242787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/herrwusel", "html_url": "https://github.com/herrwusel", "followers_url": "https://api.github.com/users/herrwusel/followers", "following_url": "https://api.github.com/users/herrwusel/following{/other_user}", "gists_url": "https://api.github.com/users/herrwusel/gists{/gist_id}", "starred_url": "https://api.github.com/users/herrwusel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/herrwusel/subscriptions", "organizations_url": "https://api.github.com/users/herrwusel/orgs", "repos_url": "https://api.github.com/users/herrwusel/repos", "events_url": "https://api.github.com/users/herrwusel/events{/privacy}", "received_events_url": "https://api.github.com/users/herrwusel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 14, "created_at": "2022-03-23T18:17:36Z", "updated_at": "2022-04-20T07:46:38Z", "closed_at": "2022-04-19T15:16:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nBackups are copied to an HDD via ssh.\r\n\r\n#### How much data is handled by borg?\r\n\r\n50G\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n\r\n## Describe the problem you're observing.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI'm using Vorta and discovered something odd: when I `borg diff` some lines are just paths without the change type and size:\r\n```\r\n                    home/jakob/Zotero/pipes/1647851804595\r\n```\r\nAccording to https://github.com/borgbase/vorta/issues/1228 this is not intended behaviour. Is this correct?\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6483/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6462", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6462/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6462/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6462/events", "html_url": "https://github.com/borgbackup/borg/issues/6462", "id": 1172056969, "node_id": "I_kwDOAh3yxs5F3CuJ", "number": 6462, "title": "borg info gives wrong info about encryption for \"authenticated\" mode", "user": {"login": "antipiot", "id": 26579988, "node_id": "MDQ6VXNlcjI2NTc5OTg4", "avatar_url": "https://avatars.githubusercontent.com/u/26579988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antipiot", "html_url": "https://github.com/antipiot", "followers_url": "https://api.github.com/users/antipiot/followers", "following_url": "https://api.github.com/users/antipiot/following{/other_user}", "gists_url": "https://api.github.com/users/antipiot/gists{/gist_id}", "starred_url": "https://api.github.com/users/antipiot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antipiot/subscriptions", "organizations_url": "https://api.github.com/users/antipiot/orgs", "repos_url": "https://api.github.com/users/antipiot/repos", "events_url": "https://api.github.com/users/antipiot/events{/privacy}", "received_events_url": "https://api.github.com/users/antipiot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 10, "created_at": "2022-03-17T08:09:28Z", "updated_at": "2022-04-19T21:38:45Z", "closed_at": "2022-04-19T21:38:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?  \r\nYes  \r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?  \r\nBUG\r\n\r\n#### Your borg version (borg -V).  \r\nborg 1.1.15\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)  \r\n```\r\nborg init --encryption=authenticated /path/to/repository\r\nborg info /path/to/repository\r\n```\r\n\r\n## Describe the problem you're observing.\r\nThe [documentation here](https://borgbackup.readthedocs.io/en/stable/usage/init.html) state \"If you do not want to encrypt the contents of your backups, but still want to detect malicious tampering use --encryption authenticated.\"\r\n\r\nBut `borg info` reports that:\r\n```\r\nEncrypted: Yes (authenticated)\r\n```\r\n\r\nWhat is the real status about that? All informations welcome!\r\n\r\nEDIT: following [this link](https://github.com/borgbackup/borg/issues/4042) it looks to not be encrypted.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6462/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6462/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6406", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6406/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6406/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6406/events", "html_url": "https://github.com/borgbackup/borg/issues/6406", "id": 1160089071, "node_id": "I_kwDOAh3yxs5FJY3v", "number": 6406, "title": "1.2.0: LANG=de_DE@euro crashes borg, works fine with 1.1.17.", "user": {"login": "slashbeast", "id": 180211, "node_id": "MDQ6VXNlcjE4MDIxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/180211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slashbeast", "html_url": "https://github.com/slashbeast", "followers_url": "https://api.github.com/users/slashbeast/followers", "following_url": "https://api.github.com/users/slashbeast/following{/other_user}", "gists_url": "https://api.github.com/users/slashbeast/gists{/gist_id}", "starred_url": "https://api.github.com/users/slashbeast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slashbeast/subscriptions", "organizations_url": "https://api.github.com/users/slashbeast/orgs", "repos_url": "https://api.github.com/users/slashbeast/repos", "events_url": "https://api.github.com/users/slashbeast/events{/privacy}", "received_events_url": "https://api.github.com/users/slashbeast/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 32, "created_at": "2022-03-04T22:06:21Z", "updated_at": "2022-06-03T09:43:15Z", "closed_at": "2022-06-03T09:43:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nGentoo ~amd64\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\n#### How much data is handled by borg?\r\n\r\n-\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nborg\r\n\r\n## Describe the problem you're observing.\r\n\r\nThe borg 1.2.0, unlike 1.1.17, crashes on locale set to de_DE@euro (ISO locale).\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python-exec/python3.9/borg\", line 33, in <module>\r\n    sys.exit(load_entry_point('borgbackup==1.2.0', 'console_scripts', 'borg')())\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 5077, in main\r\n    args = archiver.get_args(sys.argv, os.environ.get('SSH_ORIGINAL_COMMAND'))\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 4869, in get_args\r\n    result = self.parse_args(argv[1:])\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 4914, in parse_args\r\n    parser = self.build_parser()\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 4339, in build_parser\r\n    \"\"\") + ItemFormatter.keys_help()\r\n  File \"/usr/lib/python3.9/site-packages/borg/helpers/parseformat.py\", line 733, in keys_help\r\n    keys = cls.available_keys()\r\n  File \"/usr/lib/python3.9/site-packages/borg/helpers/parseformat.py\", line 727, in available_keys\r\n    keys.extend(formatter.get_item_data(fake_item).keys())\r\n  File \"/usr/lib/python3.9/site-packages/borg/helpers/parseformat.py\", line 797, in get_item_data\r\n    source = item.get('source', '')\r\nSystemError: <cyfunction PropDict._make_property.<locals>._get at 0x7f5b4a2dee10> returned NULL without setting an error\r\n```\r\nreported on https://bugs.gentoo.org/834575\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nJust run 'borg' with locale set to 'de_DE@euro'\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6406/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6406/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6401", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6401/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6401/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6401/events", "html_url": "https://github.com/borgbackup/borg/issues/6401", "id": 1159905521, "node_id": "I_kwDOAh3yxs5FIsDx", "number": 6401, "title": "borg import-tar hangs ", "user": {"login": "drewkett", "id": 2132248, "node_id": "MDQ6VXNlcjIxMzIyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/2132248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewkett", "html_url": "https://github.com/drewkett", "followers_url": "https://api.github.com/users/drewkett/followers", "following_url": "https://api.github.com/users/drewkett/following{/other_user}", "gists_url": "https://api.github.com/users/drewkett/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewkett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewkett/subscriptions", "organizations_url": "https://api.github.com/users/drewkett/orgs", "repos_url": "https://api.github.com/users/drewkett/repos", "events_url": "https://api.github.com/users/drewkett/events{/privacy}", "received_events_url": "https://api.github.com/users/drewkett/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 0, "created_at": "2022-03-04T17:57:40Z", "updated_at": "2022-03-05T23:18:45Z", "closed_at": "2022-03-05T23:18:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n1.2.0\r\n#### Operating system (distribution) and version.\r\narch linux (up to date as of 2022-03-04)\r\n#### Hardware / network configuration, and filesystems used.\r\nVM using local files on btrfs fs\r\n#### How much data is handled by borg?\r\n~500MB\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nborg import-tar -p -s path_to_repo::archive_name filename.tar.zstd\r\n\r\n## Describe the problem you're observing.\r\nThe command was hanging without any output. I *think* it is an error due to the archive already existing but not properly propagating back to user. If I unzstd the file before, and try it with an uncompressed tar file it correctly gives `Archive archive_name already exists`\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nTry running import-tar with a zstd compressed tar file when the archive_name already exists in the repo", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6400", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6400/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6400/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6400/events", "html_url": "https://github.com/borgbackup/borg/issues/6400", "id": 1159891513, "node_id": "I_kwDOAh3yxs5FIoo5", "number": 6400, "title": "1.2.0 Cache permission issues", "user": {"login": "santiagobiali", "id": 13974716, "node_id": "MDQ6VXNlcjEzOTc0NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/13974716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/santiagobiali", "html_url": "https://github.com/santiagobiali", "followers_url": "https://api.github.com/users/santiagobiali/followers", "following_url": "https://api.github.com/users/santiagobiali/following{/other_user}", "gists_url": "https://api.github.com/users/santiagobiali/gists{/gist_id}", "starred_url": "https://api.github.com/users/santiagobiali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/santiagobiali/subscriptions", "organizations_url": "https://api.github.com/users/santiagobiali/orgs", "repos_url": "https://api.github.com/users/santiagobiali/repos", "events_url": "https://api.github.com/users/santiagobiali/events{/privacy}", "received_events_url": "https://api.github.com/users/santiagobiali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 10, "created_at": "2022-03-04T17:39:17Z", "updated_at": "2022-03-09T18:01:00Z", "closed_at": "2022-03-09T18:00:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\nBUG/ISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\nDebian 11 as a Gen2 Hyper-V VM.\r\n\r\n#### Your borg version (borg -V).\r\n1.2.0 (does not work as intended) & 1.117 (works as intended)\r\n\r\n#### Operating system (distribution) and version.\r\nDebian 11 as a Gen2 Hyper-V VM. - 5.10.0-11-amd64\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nFilesystem: ext4\r\n\r\n## Describe the problem you're observing.\r\nBorg 1.2.0 is setting permission of cache files to 700, no matter what --umask or \"umask\" in script is set to.\r\nThis causes problems when running borg on different computers using a single shared cache (network share), as only the owner will have permission, and not the group.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYes,  script:\r\n```\r\n#!/bin/bash\r\n\r\nexport LC_ALL=C\r\nexport BORG_CONFIG_DIR=\"Borg_config_test\"\r\nexport BORG_CACHE_DIR=\"Borg_cache_test\"\r\nexport BORG_SECURITY_DIR=\"${BORG_CONFIG_DIR}/security\"\r\nexport BORG_KEYS_DIR=\"${BORG_CONFIG_DIR}/keys\"\r\nexport BORG_PASSPHRASE=\"SOMEPASSWORD\"\r\n\r\nrepo=repoTest\r\n\r\numask 0007\r\n\r\nborg init --encryption=keyfile-blake2 $repo &> /dev/null\r\n\r\nmkdir folderToBackup &> /dev/null\r\necho textToBackup > folderToBackup/file.txt\r\n\r\nchown root $repo -R\r\nchgrp root $repo -R\r\nchmod 770 $repo -R\r\nchmod 770 $BORG_CONFIG_DIR -R\r\nchmod 770 $BORG_CACHE_DIR -R\r\n\r\necho \"Permissions before backup:\"\r\nls -lha $BORG_CACHE_DIR/*/config\r\n\r\nborg create \\\r\n        --umask 0007 \\\r\n        --show-version \\\r\n        \"${repo}::archive1_$(date +%Y%m%d-%H%M%S)\" \"folderToBackup\" &> /dev/null\r\n\r\necho \"Permissions after borg create 1.2.0:\"\r\nls -lha $BORG_CACHE_DIR/*/config\r\n\r\n\r\necho -----------------------------------------------------------------------------\r\n\r\n#Resetting permissions\r\nchown root $repo -R\r\nchgrp root $repo -R\r\nchmod 770 $repo -R\r\nchmod 770 $BORG_CONFIG_DIR -R\r\nchmod 770 $BORG_CACHE_DIR -R\r\n\r\necho \"Permissions before backup:\"\r\nls -lha $BORG_CACHE_DIR/*/config\r\n\r\nborg1.1.17 create \\\r\n        --umask 0007 \\\r\n        --show-version \\\r\n        \"${repo}::archive1_$(date +%Y%m%d-%H%M%S)\" \"folderToBackup\" &> /dev/null\r\n\r\necho \"Permissions after borg create 1.1.17:\"\r\nls -lha $BORG_CACHE_DIR/*/config\r\n\r\necho -----------------------------------------------------------------------------\r\necho \"Permissions of file created using the 'touch' at the beggining of script:\"\r\nls -lha folderToBackup/file.txt\r\n```\r\n\r\nOutput:\r\n```\r\nPermissions before backup:\r\n-rwxrwx--- 1 root root 590 Mar  4 14:34 Borg_cache_test/7c07863b42def5d41bf0e64e057e1c774414d071ed743738cc925c806eec30dc/config\r\nPermissions after borg create 1.2.0:\r\n-rw------- 1 root root 590 Mar  4 14:36 Borg_cache_test/7c07863b42def5d41bf0e64e057e1c774414d071ed743738cc925c806eec30dc/config\r\n-----------------------------------------------------------------------------\r\nPermissions before backup:\r\n-rwxrwx--- 1 root root 590 Mar  4 14:36 Borg_cache_test/7c07863b42def5d41bf0e64e057e1c774414d071ed743738cc925c806eec30dc/config\r\nPermissions after borg create 1.1.17:\r\n-rw-rw---- 1 root root 590 Mar  4 14:36 Borg_cache_test/7c07863b42def5d41bf0e64e057e1c774414d071ed743738cc925c806eec30dc/config\r\n-----------------------------------------------------------------------------\r\nPermissions of file created using the 'touch' at the beggining of script:\r\n-rw-rw---- 1 root root 13 Mar  4 14:36 folderToBackup/file.txt\r\n ```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6374", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6374/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6374/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6374/events", "html_url": "https://github.com/borgbackup/borg/issues/6374", "id": 1152388756, "node_id": "I_kwDOAh3yxs5EsA6U", "number": 6374, "title": "borg create crashes if parent dir of recursion root can not be opened", "user": {"login": "skibbipl", "id": 4746858, "node_id": "MDQ6VXNlcjQ3NDY4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4746858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skibbipl", "html_url": "https://github.com/skibbipl", "followers_url": "https://api.github.com/users/skibbipl/followers", "following_url": "https://api.github.com/users/skibbipl/following{/other_user}", "gists_url": "https://api.github.com/users/skibbipl/gists{/gist_id}", "starred_url": "https://api.github.com/users/skibbipl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skibbipl/subscriptions", "organizations_url": "https://api.github.com/users/skibbipl/orgs", "repos_url": "https://api.github.com/users/skibbipl/repos", "events_url": "https://api.github.com/users/skibbipl/events{/privacy}", "received_events_url": "https://api.github.com/users/skibbipl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 4, "created_at": "2022-02-26T22:17:09Z", "updated_at": "2022-03-05T13:18:59Z", "closed_at": "2022-03-05T13:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug?\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\nborg 1.2.0\r\n\r\n#### Operating system (distribution) and version.\r\nLinux xxxx 5.16.0-1-amd64 #1 SMP PREEMPT Debian 5.16.7-2 (2022-02-09) x86_64 GNU/Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\next4, nothing fancy\r\n\r\n## Describe the problem you're observing.\r\nAfter upgrading to 1.2 borg crashes when it cannot find file from the configuration. In 1.1.x version it skipped it with warning.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nAdd non exisiting file to backup script.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 264, in OsOpen\r\n    fd = os_open(path=path, parent_fd=parent_fd, name=name, flags=flags, noatime=noatime)\r\n  File \"/usr/lib/python3/dist-packages/borg/helpers/fs.py\", line 290, in os_open\r\n    fd = os.open(fname, _flags_noatime, dir_fd=parent_fd)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/etc/dnsmasq.d'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 5089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 5020, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 183, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 668, in do_create\r\n    create_inner(archive, cache, fso)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 595, in create_inner\r\n    with OsOpen(path=parent_dir, flags=flags_root, noatime=True, op='open_root') as parent_fd:\r\n  File \"/usr/lib/python3.9/contextlib.py\", line 119, in __enter__\r\n    return next(self.gen)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 264, in OsOpen\r\n    fd = os_open(path=path, parent_fd=parent_fd, name=name, flags=flags, noatime=noatime)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 218, in __exit__\r\n    raise BackupOSError(self.op, exc_val) from exc_val\r\nborg.archive.BackupOSError: open_root: [Errno 2] No such file or directory: '/etc/dnsmasq.d'\r\n\r\nPlatform: Linux xxxxx 5.16.0-1-amd64 #1 SMP PREEMPT Debian 5.16.7-2 (2022-02-09) x86_64\r\nLinux: Unknown Linux\r\nBorg: 1.2.0  Python: CPython 3.9.10 msgpack: 1.0.3 fuse: pyfuse3 3.2.0 [pyfuse3,llfuse]\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6369", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6369/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6369/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6369/events", "html_url": "https://github.com/borgbackup/borg/issues/6369", "id": 1152301917, "node_id": "I_kwDOAh3yxs5Errtd", "number": 6369, "title": "zstd-libselect.h is wrong", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/81", "html_url": "https://github.com/borgbackup/borg/milestone/81", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/81/labels", "id": 7644563, "node_id": "MI_kwDOAh3yxs4AdKWT", "number": 81, "title": "1.2.1", "description": "whatever comes up as urgent fix for 1.2.0 (if anything).\r\n\r\nwhile waiting for feedback, we can do some uncritical updates, like:\r\n\r\n- docs\r\n- small features\r\n", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2022-02-05T22:07:02Z", "updated_at": "2022-06-05T21:44:17Z", "due_on": null, "closed_at": "2022-06-05T21:44:17Z"}, "comments": 1, "created_at": "2022-02-26T21:06:32Z", "updated_at": "2022-02-27T13:39:31Z", "closed_at": "2022-02-27T13:39:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "contains same include for both cases (see lz4-libselect.h for a correct example).\r\n\r\ncheck: 1.2-maint, 1.1-maint\r\n\r\nmaster will be changed otherwise, no need to check there.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6353", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6353/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6353/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6353/events", "html_url": "https://github.com/borgbackup/borg/issues/6353", "id": 1149277005, "node_id": "I_kwDOAh3yxs5EgJNN", "number": 6353, "title": "FileNotFoundError: [Errno 2] No such file or directory: '/mnt/sshfs/borg-cache/REPOID/txn.active/files'", "user": {"login": "FabioPedretti", "id": 3390837, "node_id": "MDQ6VXNlcjMzOTA4Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3390837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabioPedretti", "html_url": "https://github.com/FabioPedretti", "followers_url": "https://api.github.com/users/FabioPedretti/followers", "following_url": "https://api.github.com/users/FabioPedretti/following{/other_user}", "gists_url": "https://api.github.com/users/FabioPedretti/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabioPedretti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabioPedretti/subscriptions", "organizations_url": "https://api.github.com/users/FabioPedretti/orgs", "repos_url": "https://api.github.com/users/FabioPedretti/repos", "events_url": "https://api.github.com/users/FabioPedretti/events{/privacy}", "received_events_url": "https://api.github.com/users/FabioPedretti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 15, "created_at": "2022-02-24T13:15:43Z", "updated_at": "2022-04-19T19:16:30Z", "closed_at": "2022-04-19T19:16:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.17\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian 11\r\n\r\n\r\n## Describe the problem you're observing.\r\n\r\nI was doing a backup and the storage (mounted using sshfs and keeping both the repo and the borg cache) was unresponsive, so I had to restart the server.\r\nAfter the reboot I restarted a borg prune but I am getting this error:\r\n```\r\nborgbackup version 1.1.17\r\nKilled stale lock borg.server@345051709351.4131-0.\r\nRemoved stale exclusive roster lock for host borg.server@345051709351 pid 4131 thread 0.\r\nRemoved stale exclusive roster lock for host borg.server@345051709351 pid 4131 thread 0.\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4703, in main\r\n  File \"borg/archiver.py\", line 4635, in run\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/archiver.py\", line 1652, in do_prune\r\n  File \"borg/cache.py\", line 387, in __new__\r\n  File \"borg/cache.py\", line 381, in local\r\n  File \"borg/cache.py\", line 464, in __init__\r\n  File \"borg/cache.py\", line 512, in open\r\n  File \"borg/cache.py\", line 624, in rollback\r\n  File \"shutil.py\", line 248, in copy\r\n  File \"shutil.py\", line 120, in copyfile\r\nFileNotFoundError: [Errno 2] No such file or directory: '/mnt/sshfs/borg-cache/a0a213e2d7c13a3d80933520b7298d9ddf27ac25c0fbbd9c55c62acce94f8811/txn.active/files'\r\n\r\nPlatform: Linux borg 5.10.0-11-amd64 #1 SMP Debian 5.10.92-1 (2022-01-18) x86_64\r\nLinux: debian 11.2\r\nBorg: 1.1.17  Python: CPython 3.7.11 msgpack: 0.5.6.+borg1\r\nPID: 572  CWD: /root\r\nsys.argv: ['borg', 'prune', '-v', '--stats', '--show-rc', '--show-version', '--list', '--keep-within=188d']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\nterminating with error status, rc 2\r\n```\r\n\r\nSince I had a files.STORAGE inside the txn.active directory I did a:\r\n```\r\nln -s files.STORAGE files\r\n```\r\nand that was enough to make borg prune run again.\r\n\r\nSo borg is expecting the \"files\" file inside the txn.active directory even when using BORG_FILES_CACHE_SUFFIX.\r\n\r\nA similar issue happens with borg create.\r\n\r\nThe problem is that borg should not expect to have the \"files\" file when not needed, i.e. https://github.com/borgbackup/borg/pull/5777 should probably also be applied to 1.1 branch.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6353/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6120", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6120/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6120/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6120/events", "html_url": "https://github.com/borgbackup/borg/issues/6120", "id": 1099258192, "node_id": "I_kwDOAh3yxs5BhVlQ", "number": 6120, "title": "borg info: No output for empty repo with --last or --first supplied", "user": {"login": "sophie-h", "id": 3466497, "node_id": "MDQ6VXNlcjM0NjY0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3466497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sophie-h", "html_url": "https://github.com/sophie-h", "followers_url": "https://api.github.com/users/sophie-h/followers", "following_url": "https://api.github.com/users/sophie-h/following{/other_user}", "gists_url": "https://api.github.com/users/sophie-h/gists{/gist_id}", "starred_url": "https://api.github.com/users/sophie-h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sophie-h/subscriptions", "organizations_url": "https://api.github.com/users/sophie-h/orgs", "repos_url": "https://api.github.com/users/sophie-h/repos", "events_url": "https://api.github.com/users/sophie-h/events{/privacy}", "received_events_url": "https://api.github.com/users/sophie-h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 7, "created_at": "2022-01-11T14:53:33Z", "updated_at": "2022-01-22T20:10:56Z", "closed_at": "2022-01-22T18:05:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n$ borg --version\r\nborg 1.1.17\r\n```\r\n\r\n`borg info` or `borg info --json` do not give any output if `--last=1` or `--first=1` is supplied and there are no archives yet.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6105", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6105/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6105/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6105/events", "html_url": "https://github.com/borgbackup/borg/issues/6105", "id": 1093309060, "node_id": "I_kwDOAh3yxs5BKpKE", "number": 6105, "title": "build issue (with potential fix) on bigendian architectures", "user": {"login": "th0ma7", "id": 17141866, "node_id": "MDQ6VXNlcjE3MTQxODY2", "avatar_url": "https://avatars.githubusercontent.com/u/17141866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/th0ma7", "html_url": "https://github.com/th0ma7", "followers_url": "https://api.github.com/users/th0ma7/followers", "following_url": "https://api.github.com/users/th0ma7/following{/other_user}", "gists_url": "https://api.github.com/users/th0ma7/gists{/gist_id}", "starred_url": "https://api.github.com/users/th0ma7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/th0ma7/subscriptions", "organizations_url": "https://api.github.com/users/th0ma7/orgs", "repos_url": "https://api.github.com/users/th0ma7/repos", "events_url": "https://api.github.com/users/th0ma7/events{/privacy}", "received_events_url": "https://api.github.com/users/th0ma7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 25, "created_at": "2022-01-04T12:31:17Z", "updated_at": "2022-12-02T18:28:22Z", "closed_at": "2022-01-22T14:38:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug, seems already resolved in master but present in 1.1 branch (at least no sign of `__BIG_ENDIAN__` in `setup.py` in master)\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n1.1.17\r\n\r\n#### Operating system (distribution) and version.\r\nSynoCommunity, Synology DSM-6 (linux)\r\n\r\n#### Hardware / network configuration, and filesystems used. \r\nPPC qoriq arch\r\n\r\n#### How much data is handled by borg?\r\nn/a - build issue only on PPC due to endianess\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nn/a\r\n\r\n## Describe the problem you're observing.\r\nbuild log:\r\n```\r\nCollecting borgbackup==1.1.17\r\n  Using cached borgbackup-1.1.17.tar.gz (3.8 MB)\r\n  Preparing metadata (setup.py): started\r\n  Preparing metadata (setup.py): finished with status 'done'\r\nBuilding wheels for collected packages: borgbackup\r\n  Building wheel for borgbackup (setup.py): started\r\n  Building wheel for borgbackup (setup.py): finished with status 'error'\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/crossenv/cross/bin/python -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-wheel-t50qub2n/borgbackup_de5df87e60224e6ca41dbf5168a72ac2/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-wheel-t50qub2n/borgbackup_de5df87e60224e6ca41dbf5168a72ac2/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.StringIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-zr688xe_\r\n       cwd: /tmp/pip-wheel-t50qub2n/borgbackup_de5df87e60224e6ca41dbf5168a72ac2/\r\n  Complete output (125 lines):\r\n  Detected and preferring liblz4 over bundled LZ4\r\n  Detected and preferring libb2 over bundled BLAKE2\r\n  Detected and preferring libzstd over bundled ZSTD\r\n  /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/crossenv/build/lib/python3.10/site-packages/setuptools/__init__.py:148: SetuptoolsDeprecationWarning: setup_requires is deprecated. Supply build dependencies using PEP 517 pyproject.toml build-requires.\r\n    warnings.warn(\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/__main__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/_version.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/archive.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/archiver.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/cache.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/constants.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/fuse.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/helpers.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/locking.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/logger.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/lrucache.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/nanorst.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/patterns.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/remote.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/repository.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/selftest.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/shellpattern.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/upgrader.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/version.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/xattr.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms\r\n  copying src/borg/algorithms/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  copying src/borg/crypto/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  copying src/borg/crypto/file_integrity.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  copying src/borg/crypto/key.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  copying src/borg/crypto/keymanager.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  copying src/borg/crypto/nonces.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/crypto\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/platform\r\n  copying src/borg/platform/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/platform\r\n  copying src/borg/platform/base.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/platform\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/archive.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/archiver.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/benchmark.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/cache.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/checksums.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/chunker.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/compress.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/crypto.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/file_integrity.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/hashindex.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/helpers.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/item.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/key.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/locking.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/logger.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/lrucache.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/nanorst.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/nonces.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/patterns.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/platform.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/remote.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/repository.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/shellpattern.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/upgrader.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/version.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  copying src/borg/testsuite/xattr.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  creating build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms/msgpack\r\n  copying src/borg/algorithms/msgpack/__init__.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms/msgpack\r\n  copying src/borg/algorithms/msgpack/_version.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms/msgpack\r\n  copying src/borg/algorithms/msgpack/exceptions.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms/msgpack\r\n  copying src/borg/algorithms/msgpack/fallback.py -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/algorithms/msgpack\r\n  running egg_info\r\n  writing src/borgbackup.egg-info/PKG-INFO\r\n  writing dependency_links to src/borgbackup.egg-info/dependency_links.txt\r\n  writing entry points to src/borgbackup.egg-info/entry_points.txt\r\n  writing requirements to src/borgbackup.egg-info/requires.txt\r\n  writing top-level names to src/borgbackup.egg-info/top_level.txt\r\n  listing git files failed - pretending there aren't any\r\n  reading manifest file 'src/borgbackup.egg-info/SOURCES.txt'\r\n  reading manifest template 'MANIFEST.in'\r\n  warning: no previously-included files found matching '.coafile'\r\n  warning: no previously-included files found matching '.editorconfig'\r\n  warning: no previously-included files found matching '.gitattributes'\r\n  warning: no previously-included files found matching '.gitignore'\r\n  warning: no previously-included files found matching '.mailmap'\r\n  warning: no previously-included files found matching 'Vagrantfile'\r\n  no previously-included directories found matching '.github'\r\n  adding license file 'LICENSE'\r\n  adding license file 'AUTHORS'\r\n  writing manifest file 'src/borgbackup.egg-info/SOURCES.txt'\r\n  copying src/borg/paperkey.html -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg\r\n  copying src/borg/testsuite/attic.tar.gz -> build/lib.powerpc-e500v2-linux-gnuspe-3.10/borg/testsuite\r\n  running build_ext\r\n  skipping 'src/borg/algorithms/msgpack/_packer.cpp' Cython extension (up-to-date)\r\n  skipping 'src/borg/algorithms/msgpack/_unpacker.cpp' Cython extension (up-to-date)\r\n  skipping 'src/borg/compress.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/crypto/low_level.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/hashindex.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/item.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/chunker.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/algorithms/checksums.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/platform/posix.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/platform/linux.c' Cython extension (up-to-date)\r\n  skipping 'src/borg/platform/syncfilerange.c' Cython extension (up-to-date)\r\n  building 'borg.algorithms.msgpack._packer' extension\r\n  creating build/temp.powerpc-e500v2-linux-gnuspe-3.10\r\n  creating build/temp.powerpc-e500v2-linux-gnuspe-3.10/src\r\n  creating build/temp.powerpc-e500v2-linux-gnuspe-3.10/src/borg\r\n  creating build/temp.powerpc-e500v2-linux-gnuspe-3.10/src/borg/algorithms\r\n  creating build/temp.powerpc-e500v2-linux-gnuspe-3.10/src/borg/algorithms/msgpack\r\n  /home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/bin/powerpc-e500v2-linux-gnuspe-gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -I/home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include -mcpu=8548 -mhard-float -mfloat-gprs=double -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install//var/packages/borgbackup/target/include -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -L /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/lib -I /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include -mcpu=8548 -mhard-float -mfloat-gprs=double -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install//var/packages/borgbackup/target/include -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -L /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/lib -I /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include -mcpu=8548 -mhard-float -mfloat-gprs=double -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install//var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include/python3.10 -I/home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include -mcpu=8548 -mhard-float -mfloat-gprs=double -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install//var/packages/borgbackup/target/include -fPIC -D__LITTLE_ENDIAN__=1 -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include -Isrc/borg/algorithms/xxh64/. -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/crossenv/cross/include -I/home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include/python3.10 -c src/borg/algorithms/msgpack/_packer.cpp -o build/temp.powerpc-e500v2-linux-gnuspe-3.10/src/borg/algorithms/msgpack/_packer.o\r\n  In file included from /home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include/endian.h:36:0,\r\n                   from /home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include/bits/waitstatus.h:64,\r\n                   from /home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include/stdlib.h:42,\r\n                   from /home/spksrc/borgbackup-udpate/spksrc/spk/borgbackup/work-qoriq-6.1/install/var/packages/borgbackup/target/include/python3.10/Python.h:34,\r\n                   from src/borg/algorithms/msgpack/_packer.cpp:6:\r\n  /home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/powerpc-e500v2-linux-gnuspe/sysroot/usr/include/bits/endian.h:26:4: error: #error Both BIG_ENDIAN and LITTLE_ENDIAN defined!\r\n   #  error Both BIG_ENDIAN and LITTLE_ENDIAN defined!\r\n      ^\r\n  error: command '/home/spksrc/borgbackup-udpate/spksrc/toolchain/syno-qoriq-6.1/work/powerpc-e500v2-linux-gnuspe/bin/powerpc-e500v2-linux-gnuspe-gcc' failed with exit code 1\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for borgbackup\r\n  Running setup.py clean for borgbackup\r\nFailed to build borgbackup\r\nERROR: Failed to build one or more wheels\r\n\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nAlways, only fails on PPC.\r\n\r\n#### <s>Include any warning/errors/backtraces from the system logs</s> Actual patch we use to circumvent this (a workaround upstream part of next release would be really great!)\r\nhttps://github.com/SynoCommunity/spksrc/commit/72866f653fcff3f6862a417545a070f618c2d907#diff-7b228d5ca562f5bc3b0ebfbbe98d851ed882feab3721fbb04b57ad844256eb78\r\n```\r\nDisables pseudo logic made to enforce setting of macros which are actually already defined in corresponding headers.\r\n\r\n--- setup.py\r\n+++ setup.py\r\n@@ -804,20 +804,16 @@ if not on_rtd:\r\n                                                system_prefix=libb2_prefix, system=libb2_system,\r\n                                                **crypto_ext_kwargs)\r\n\r\n-    msgpack_endian = '__BIG_ENDIAN__' if (sys.byteorder == 'big') else '__LITTLE_ENDIAN__'\r\n-    msgpack_macros = [(msgpack_endian, '1')]\r\n     msgpack_packer_ext_kwargs = dict(\r\n         sources=[msgpack_packer_source],\r\n         include_dirs=include_dirs,\r\n         library_dirs=library_dirs,\r\n-        define_macros=msgpack_macros,\r\n         language='c++',\r\n     )\r\n     msgpack_unpacker_ext_kwargs = dict(\r\n         sources=[msgpack_unpacker_source],\r\n         include_dirs=include_dirs,\r\n         library_dirs=library_dirs,\r\n-        define_macros=msgpack_macros,\r\n         language='c++',\r\n     )\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6082", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6082/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6082/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6082/events", "html_url": "https://github.com/borgbackup/borg/issues/6082", "id": 1075283139, "node_id": "I_kwDOAh3yxs5AF4TD", "number": 6082, "title": "TypeError: hexdigest() missing required argument 'length' in helpers.py:in hash_item()", "user": {"login": "hexagonrecursion", "id": 52621858, "node_id": "MDQ6VXNlcjUyNjIxODU4", "avatar_url": "https://avatars.githubusercontent.com/u/52621858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hexagonrecursion", "html_url": "https://github.com/hexagonrecursion", "followers_url": "https://api.github.com/users/hexagonrecursion/followers", "following_url": "https://api.github.com/users/hexagonrecursion/following{/other_user}", "gists_url": "https://api.github.com/users/hexagonrecursion/gists{/gist_id}", "starred_url": "https://api.github.com/users/hexagonrecursion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hexagonrecursion/subscriptions", "organizations_url": "https://api.github.com/users/hexagonrecursion/orgs", "repos_url": "https://api.github.com/users/hexagonrecursion/repos", "events_url": "https://api.github.com/users/hexagonrecursion/events{/privacy}", "received_events_url": "https://api.github.com/users/hexagonrecursion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 5, "created_at": "2021-12-09T08:19:05Z", "updated_at": "2022-01-07T21:55:58Z", "closed_at": "2022-01-07T21:55:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.17\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nFedora release 33 (Thirty Three)\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nnetwork: irrelevant, filesystem: ext4\r\n\r\n#### How much data is handled by borg?\r\n\r\n1024 bytes (this is a toy example)\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```sh\r\nborg list --format \"{shake_256}{NL}\" /path/to/repo::ArchiveFoo\r\n```\r\n\r\n## Describe the problem you're observing.\r\nWhen I ask for a shake_256 or shake_128 hash, I get a TypeError instead.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n1. Create a borg archive /path/to/repo::ArchiveFoo with one file\r\n2. Run the above command\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 4703, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 4635, in run\r\n    return set_ec(func(args))\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 177, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 1460, in do_list\r\n    return self._list_archive(args, repository, manifest, key)\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 1489, in _list_archive\r\n    _list_inner(cache=None)\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/archiver.py\", line 1482, in _list_inner\r\n    sys.stdout.write(formatter.format_item(item))\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/helpers.py\", line 1763, in format_item\r\n    return self.format.format_map(self.get_item_data(item))\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/helpers.py\", line 2023, in get_item_data\r\n    item_data[key] = self.call_keys[key](item)\r\n  File \"/home/user/.local/pipx/venvs/borgbackup/lib64/python3.9/site-packages/borg/helpers.py\", line 2057, in hash_item\r\n    return hash.hexdigest()\r\nTypeError: hexdigest() missing required argument 'length' (pos 1)\r\n\r\nPlatform: Linux borg 5.4.156-1.fc25.qubes.x86_64 #1 SMP Fri Oct 29 02:51:34 CEST 2021 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.1.17  Python: CPython 3.9.9 msgpack: 0.5.6.+borg1\r\nPID: 4546  CWD: /home/user\r\nsys.argv: ['/home/user/.local/bin/borg', 'list', '--format', '{shake_256}{NL}', '/path/to/repo::ArchiveFoo']\r\nSSH_ORIGINAL_COMMAND: None\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6063", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6063/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6063/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6063/events", "html_url": "https://github.com/borgbackup/borg/issues/6063", "id": 1064445425, "node_id": "I_kwDOAh3yxs4_ciXx", "number": 6063, "title": "xattrs not supported warning during extract fails due to % in filename", "user": {"login": "petenewcomb", "id": 662061, "node_id": "MDQ6VXNlcjY2MjA2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/662061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petenewcomb", "html_url": "https://github.com/petenewcomb", "followers_url": "https://api.github.com/users/petenewcomb/followers", "following_url": "https://api.github.com/users/petenewcomb/following{/other_user}", "gists_url": "https://api.github.com/users/petenewcomb/gists{/gist_id}", "starred_url": "https://api.github.com/users/petenewcomb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petenewcomb/subscriptions", "organizations_url": "https://api.github.com/users/petenewcomb/orgs", "repos_url": "https://api.github.com/users/petenewcomb/repos", "events_url": "https://api.github.com/users/petenewcomb/events{/privacy}", "received_events_url": "https://api.github.com/users/petenewcomb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 0, "created_at": "2021-11-26T12:58:13Z", "updated_at": "2021-12-02T02:57:10Z", "closed_at": "2021-12-02T02:57:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.15\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nUbuntu 20.04\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nLocal repo, Ext4\r\n\r\n#### How much data is handled by borg?\r\n\r\n4.6TiB of Borg repositories total, archive in question is 776GiB but extract fails at 57GiB due to this bug.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nborg extract /backups/oldeyelow/repo::fluffy-2020-08-22T23:13:37.716949\r\n\r\n## Describe the problem you're observing.\r\n\r\nRestoring a file with `%p` in the name that includes xattrs (from Windows Subsystem for Linux) onto an ext4 partition causes an exception because the filename gets expanded into the LHS of the `%` formatting operator.  Excerpted log and full stack trace below.\r\n\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes, same results every time I attempted to extract the archive.  I tried using `--errors` to suppress, but the faulty logic still gets executed.  The version I'm using doesn't yet support `--noxattrs` as now exists in the `1.1-maint` branch, so that wasn't an option.  I therefore edited `/usr/lib/python3/dist-packages/borg/archive.py` to change the logic so that the LHS is always a constant string.  This allowed the archive extract completely while still generating the intended warnings.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\n[... many more \"xattrs not supported\" warnings like the following line ...]\r\n/data/oldbackups/flufftest/mnt/c/Users/isaac/AppData/Roaming/Mozilla/Firefox/Profiles/2416qrmh.default-release/storage/default/https+++mail.google.com/idb/953658429glmaaviyle-ks-w.files: when setting extended attribute system.wsl_case_sensitive: xattrs not supported on this filesystem\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 771, in restore_attrs\r\n    xattr.setxattr(fd or path, k, v, follow_symlinks=False)\r\n  File \"/usr/lib/python3/dist-packages/borg/xattr.py\", line 249, in setxattr\r\n    _setxattr_inner(func, path, name, value)\r\n  File \"/usr/lib/python3/dist-packages/borg/xattr.py\", line 188, in _setxattr_inner\r\n    _check(func(path, name, value, size), path, detect_buffer_too_small=False)\r\n  File \"/usr/lib/python3/dist-packages/borg/xattr.py\", line 143, in _check\r\n    raise OSError(e, msg, path)\r\nOSError: [Errno 95] Operation not supported: b'/data/oldbackups/flufftest/mnt/c/Users/isaac/AppData/Roaming/Mozilla/Firefox/Profiles/2416qrmh.default-release/storage/default/https+++mail.google.com/idb/555926040iddano6l%p4u0tcnoermn.files'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4621, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4553, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 177, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 190, in wrapper\r\n    return method(self, args, repository=repository, manifest=manifest, key=key, archive=archive, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 793, in do_extract\r\n    archive.extract_item(dir_item, stdout=stdout)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 684, in extract_item\r\n    self.restore_attrs(path, item)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 788, in restore_attrs\r\n    logger.warning(msg_format % err_str)\r\nValueError: unsupported format character 'p' (0x70) at index 173\r\n\r\nPlatform: Linux daneel 5.4.0-90-generic #101-Ubuntu SMP Fri Oct 15 20:00:55 UTC 2021 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.1.15  Python: CPython 3.8.10 msgpack: 0.5.6\r\nPID: 203540  CWD: /data/oldbackups/flufftest\r\nsys.argv: ['/usr/bin/borg', 'extract', '/backups/oldeyelow/repo::fluffy-2020-08-22T23:13:37.716949']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6060", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6060/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6060/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6060/events", "html_url": "https://github.com/borgbackup/borg/issues/6060", "id": 1058641962, "node_id": "I_kwDOAh3yxs4_GZgq", "number": 6060, "title": "borg delete with a non existing archive name leaves a outdated local cache", "user": {"login": "textshell", "id": 6579711, "node_id": "MDQ6VXNlcjY1Nzk3MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6579711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/textshell", "html_url": "https://github.com/textshell", "followers_url": "https://api.github.com/users/textshell/followers", "following_url": "https://api.github.com/users/textshell/following{/other_user}", "gists_url": "https://api.github.com/users/textshell/gists{/gist_id}", "starred_url": "https://api.github.com/users/textshell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/textshell/subscriptions", "organizations_url": "https://api.github.com/users/textshell/orgs", "repos_url": "https://api.github.com/users/textshell/repos", "events_url": "https://api.github.com/users/textshell/events{/privacy}", "received_events_url": "https://api.github.com/users/textshell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/77", "html_url": "https://github.com/borgbackup/borg/milestone/77", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/77/labels", "id": 6750250, "node_id": "MDk6TWlsZXN0b25lNjc1MDI1MA==", "number": 77, "title": "1.2.0rc1 (aka hydrogen-rc1)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2021-05-12T00:28:54Z", "updated_at": "2022-02-05T22:06:39Z", "due_on": "2022-02-06T08:00:00Z", "closed_at": "2022-02-05T22:06:39Z"}, "comments": 8, "created_at": "2021-11-19T15:18:57Z", "updated_at": "2022-01-30T22:35:14Z", "closed_at": "2022-01-30T22:35:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When trying to delete an archive that does not exist from a repository borg leaves the local cache in an outdated state (repo manifest time stamp does not match cache manifest timestamp). This causes the next access to the repository to do a costly cache rebuild.\r\n\r\nI think this is caused by _delete_archives forcing a manifest write in all cases but when no archive was deleted the local cache instance has no active transaction and thus does not update the cache configuration when _delete_archives triggers a commit of the cache.\r\n\r\nMaybe LocalCache.commit should check the manifest timestamp even if there is no active transaction and if it differs trigger an update for the local cache config anyway. If that is seen as to risky we could add code in _delete_archives to force a transaction in LocalCache and this avoid leaving an seemingly outdated cache. Or maybe not write the manifest if nothing changed.\r\n\r\nI've encountered this problem on a system using a fairly old borg version (1.10+git1+0d9e88d) but source inspection says that this is likely still true in master. I didn't look at latest 1.1.x but this is like there also.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6060/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6037", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6037/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6037/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6037/events", "html_url": "https://github.com/borgbackup/borg/issues/6037", "id": 1047147022, "node_id": "I_kwDOAh3yxs4-ajIO", "number": 6037, "title": "Borg extract crashes with --strip-components option", "user": {"login": "ianandhum", "id": 38727945, "node_id": "MDQ6VXNlcjM4NzI3OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/38727945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianandhum", "html_url": "https://github.com/ianandhum", "followers_url": "https://api.github.com/users/ianandhum/followers", "following_url": "https://api.github.com/users/ianandhum/following{/other_user}", "gists_url": "https://api.github.com/users/ianandhum/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianandhum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianandhum/subscriptions", "organizations_url": "https://api.github.com/users/ianandhum/orgs", "repos_url": "https://api.github.com/users/ianandhum/repos", "events_url": "https://api.github.com/users/ianandhum/events{/privacy}", "received_events_url": "https://api.github.com/users/ianandhum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 1, "created_at": "2021-11-08T08:17:58Z", "updated_at": "2021-11-16T14:26:01Z", "closed_at": "2021-11-16T14:26:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n`borg 1.1.17`\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nOS: Ubuntu 20.04.3 LTS\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nFileSystem: ext4\r\n\r\n#### How much data is handled by borg?\r\n\r\n<10 GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nborg extract --list --strip-components 2 /tmp/TMP_TESTS/borg_bug/borg-extract-bug/repository::archive_1::archive_1\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nBorg extract command prematurely exits with the following trace. Also, it is to be noted that extract command works as expected when --strip-components argument is not provided.\r\n```\r\n\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4703, in main\r\n  File \"borg/archiver.py\", line 4635, in run\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/archiver.py\", line 192, in wrapper\r\n  File \"borg/archiver.py\", line 794, in do_extract\r\n  File \"borg/archive.py\", line 474, in iter_items\r\n  File \"borg/archive.py\", line 237, in unpack_many\r\nKeyError: 'tmp/TMP_TESTS/borg_bug/borg-extract-bug/data_dir/fifo_file'\r\n\r\nPlatform: Linux <user-name> 5.4.0-89-generic #100-Ubuntu SMP Fri Sep 24 14:50:10 UTC 2021 x86_64\r\nLinux: debian bullseye/sid \r\nBorg: 1.1.17  Python: CPython 3.7.11 msgpack: 0.5.6.+borg1\r\nPID: 19654  CWD: /tmp/TMP_TESTS/borg_bug/borg-extract-bug/extract_dir\r\nsys.argv: ['/tmp/TMP_TESTS/borg_bug/borg-extract-bug/borg', 'extract', '--list', '--strip-components', '2', '/tmp/TMP_TESTS/borg_bug/borg-extract-bug/repository::archive_1']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes. \r\n\r\nHow to reproduce this issue?\r\n1. Create a fifo file and create a hardlink to it. \r\n2. Execute borg create with absolute path to the data directory.\r\n3. Extract the archive created in step 2 with appropriate  --strip-components argument.\r\n\r\nI'm able to reproduce the same behavior using the following script.\r\n\r\n```\r\n#! /bin/bash\r\n\r\n# Make directories\r\nmkdir borg-extract-bug\r\npushd borg-extract-bug\r\nBORG_DIR=$(pwd)\r\n\r\nmkdir data_dir repository extract_dir\r\n\r\n# Download borg binary\r\ncurl -L https://github.com/borgbackup/borg/releases/download/1.1.17/borg-linux64 -o borg\r\nchmod +x borg\r\nBORG_EXEC=\"${BORG_DIR}/borg\"\r\n\r\n# Add data\r\nmkfifo $(pwd)/data_dir/fifo_file\r\nln $(pwd)/data_dir/fifo_file $(pwd)/data_dir/hfifo_file\r\n\r\n# Borg repository\r\nBORG_REPOSITORY=\"$(pwd)/repository\"\r\n\r\n$BORG_EXEC init -e=none ${BORG_REPOSITORY}\r\n$BORG_EXEC create ${BORG_REPOSITORY}::archive_1 $(pwd)/data_dir\r\n\r\n# Borg extract \r\npushd extract_dir\r\n$BORG_EXEC extract --list --strip-components 2 ${BORG_REPOSITORY}::archive_1\r\npopd\r\n\r\npopd\r\n```\r\n\r\n\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nN/A\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6028", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6028/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6028/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6028/events", "html_url": "https://github.com/borgbackup/borg/issues/6028", "id": 1040419045, "node_id": "I_kwDOAh3yxs4-A4jl", "number": 6028, "title": "race condition, when calling borg init first time for two repositories simultaneously", "user": {"login": "hmb", "id": 128550, "node_id": "MDQ6VXNlcjEyODU1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/128550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hmb", "html_url": "https://github.com/hmb", "followers_url": "https://api.github.com/users/hmb/followers", "following_url": "https://api.github.com/users/hmb/following{/other_user}", "gists_url": "https://api.github.com/users/hmb/gists{/gist_id}", "starred_url": "https://api.github.com/users/hmb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hmb/subscriptions", "organizations_url": "https://api.github.com/users/hmb/orgs", "repos_url": "https://api.github.com/users/hmb/repos", "events_url": "https://api.github.com/users/hmb/events{/privacy}", "received_events_url": "https://api.github.com/users/hmb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 8, "created_at": "2021-10-31T09:24:11Z", "updated_at": "2022-02-19T17:39:47Z", "closed_at": "2022-01-29T18:36:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\nborg 1.1.15\r\n\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04.3 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nIt's on a cloud system, using ext4. The bug is probably unrelated to the hardware.\r\n\r\n#### How much data is handled by borg?\r\n\r\nNone, bug happens at `init` time.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n    BORG_PASSCOMMAND=\"cat borgpasswd-client1.pwd\" borg init --encryption=keyfile ssh://backupstore-key/./client1\r\n\r\n`backupstore-key` is a ssh configuration in `.ssh/config`:\r\n\r\n```\r\nHost backupstore-key\r\n  Hostname u0000.server.de\r\n  Port 23\r\n  User u0000\r\n  IdentityFile ~/.ssh/backup-host00\r\n  IdentitiesOnly yes\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nThe host has multiple client VMs using LXC/LXD, which are all backuped with borg running from the host. When initializing the host with *Ansible* the above `borg init` is run for every client. Due to the scripted nature of Ansible this happens - more or less - simultaneously. Sometimes Ansible stops with an exception:\r\n\r\n    FileExistsError: [Errno 17] File exists: '/root/.config/borg'\r\n\r\nThis is on a freshly installed system that is setup from scratch with two client VMs. My sight on what happens is, as the two `borg init` commands are issued shortly after another, both find the `.config/borg/` directory missing, so both try to create it. This obvoiusly leads to one process creating the directory first and the second trying to create it again with the already existing directory. Apparently python does not like that. It crashes with the followin stack trace:\r\n\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \\\"/usr/lib/python3/dist-packages/borg/archiver.py\\\", line 4621, in main\r\n    exit_code = archiver.run(args)\r\n  File \\\"/usr/lib/python3/dist-packages/borg/archiver.py\\\", line 4553, in run\r\n    return set_ec(func(args))\r\n  File \\\"/usr/lib/python3/dist-packages/borg/archiver.py\\\", line 177, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \\\"/usr/lib/python3/dist-packages/borg/archiver.py\\\", line 291, in do_init\r\n    key = key_creator(repository, args)\r\n  File \\\"/usr/lib/python3/dist-packages/borg/crypto/key.py\\\", line 110, in key_creator\r\n    return key.create(repository, args)\r\n  File \\\"/usr/lib/python3/dist-packages/borg/crypto/key.py\\\", line 688, in create\r\n    key.init_ciphers()\r\n  File \\\"/usr/lib/python3/dist-packages/borg/crypto/key.py\\\", line 419, in init_ciphers\r\n    self.nonce_manager = NonceManager(self.repository, self.enc_cipher, manifest_nonce)\r\n  File \\\"/usr/lib/python3/dist-packages/borg/crypto/nonces.py\\\", line 22, in __init__\r\n    self.nonce_file = os.path.join(get_security_dir(self.repository.id_str), 'nonce')\r\n  File \\\"/usr/lib/python3/dist-packages/borg/helpers.py\\\", line 542, in get_security_dir\r\n    security_dir = os.environ.get('BORG_SECURITY_DIR', os.path.join(get_config_dir(), 'security'))\r\n  File \\\"/usr/lib/python3/dist-packages/borg/helpers.py\\\", line 585, in get_config_dir\r\n    os.makedirs(config_dir)\r\n  File \\\"/usr/lib/python3.8/os.py\\\", line 223, in makedirs\r\n    mkdir(name, mode)\r\nFileExistsError: [Errno 17] File exists: '/root/.config/borg'\r\n\r\nPlatform: Linux host00 5.4.0-72-generic #80-Ubuntu SMP Mon Apr 12 17:35:00 UTC 2021 x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.1.15  Python: CPython 3.8.10 msgpack: 0.5.6\r\nPID: 94179  CWD: /root\r\nsys.argv: ['/usr/bin/borg', 'init', '--encryption=keyfile', 'ssh://backupstore-key/./client1']\r\nSSH_ORIGINAL_COMMAND: Non\r\n```\r\n\r\nThe Ansible message, (omitting the stack trace, for brevity) is:\r\n\r\n```\r\n{\r\n  \"changed\": true,\r\n  \"cmd\": \"BORG_PASSCOMMAND=\\\"cat .borgpasswd/client1.pwd\\\" borg init --encryption=keyfile ssh://backupstore-key/./client1\",\r\n  \"delta\": \"0:00:01.983646\",\r\n  \"end\": \"2021-07-26 00:33:58.498176\",\r\n  \"msg\": \"non-zero return code\",\r\n  \"rc\": 2,\r\n  \"start\": \"2021-07-26 00:33:56.514530\",\r\n  \"stderr\": \"Local Exception\\nTraceback (most recent call last):...  [truncated, stack trace]\",\r\n  \"stderr_lines\": [\r\n    \"Local Exception\",\r\n    \"Traceback (most recent call last):\",\r\n    [truncated, stack trace]\r\n    \"Platform: Linux host00 5.4.0-72-generic #80-Ubuntu SMP Mon Apr 12 17:35:00 UTC 2021 x86_64\",\r\n    \"Linux: Unknown Linux  \",\r\n    \"Borg: 1.1.15  Python: CPython 3.8.10 msgpack: 0.5.6\",\r\n    \"PID: 94179  CWD: /root\",\r\n    \"sys.argv: ['/usr/bin/borg', 'init', '--encryption=keyfile', 'ssh://backupstore-key/./client1']\",\r\n    \"SSH_ORIGINAL_COMMAND: None\"\r\n  ],\r\n  \"stdout\": \"\",\r\n  \"stdout_lines\": []\r\n}\r\n```\r\n\r\nI solved the problem on the outside by setting the Ansible switch `serial` to 1, thus serializing the calls to `borg init`. While this works for me, it does not fix the problem itself.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nDue to the nature of the problem it's hard to reproduce. It happens only randomly, when the timing is just right.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6028/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6026", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6026/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6026/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6026/events", "html_url": "https://github.com/borgbackup/borg/issues/6026", "id": 1039971738, "node_id": "I_kwDOAh3yxs49_LWa", "number": 6026, "title": "giving some options repeatedly does not give an error msg", "user": {"login": "BloodBlight", "id": 3953102, "node_id": "MDQ6VXNlcjM5NTMxMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3953102?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BloodBlight", "html_url": "https://github.com/BloodBlight", "followers_url": "https://api.github.com/users/BloodBlight/followers", "following_url": "https://api.github.com/users/BloodBlight/following{/other_user}", "gists_url": "https://api.github.com/users/BloodBlight/gists{/gist_id}", "starred_url": "https://api.github.com/users/BloodBlight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BloodBlight/subscriptions", "organizations_url": "https://api.github.com/users/BloodBlight/orgs", "repos_url": "https://api.github.com/users/BloodBlight/repos", "events_url": "https://api.github.com/users/BloodBlight/events{/privacy}", "received_events_url": "https://api.github.com/users/BloodBlight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/77", "html_url": "https://github.com/borgbackup/borg/milestone/77", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/77/labels", "id": 6750250, "node_id": "MDk6TWlsZXN0b25lNjc1MDI1MA==", "number": 77, "title": "1.2.0rc1 (aka hydrogen-rc1)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2021-05-12T00:28:54Z", "updated_at": "2022-02-05T22:06:39Z", "due_on": "2022-02-06T08:00:00Z", "closed_at": "2022-02-05T22:06:39Z"}, "comments": 10, "created_at": "2021-10-29T22:41:13Z", "updated_at": "2022-02-04T21:33:18Z", "closed_at": "2022-02-04T21:33:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\nLocal repo\r\n\r\n#### Your borg version (borg -V).\r\nborg 1.1.15\r\n\r\n#### Operating system (distribution) and version.\r\nUbuntu Server 20.04\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nLizardFS\r\n\r\n#### How much data is handled by borg?\r\n```\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:               49.20 TB             26.39 TB              4.73 TB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                11835460            117566592\r\n```\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nSee below.\r\n\r\n## Describe the problem you're observing.\r\nI have a large archive that I wanted to do some cleaning on, so I was building a list of globs to remove what I wanted.  When I did a dry run it only reported two archive...  Thought that was odd so I switched to prefix as that covered 90% of what I wanted to remove.  I ended up with the same result.  After some trial and error, I found that after adding a third prifix filter option, it stopped processing past the first one (not always in that order).\r\n\r\nExamples:\r\n```\r\nroot@mediaserver:/$$$$$$/Backups# borg delete --dry -vsp -P \"OS-TheMonolith-2019*\" ./Borg\r\nIgnoring --stats. It is not supported when using --dry-run.\r\nEnter passphrase for key /LizardFS/Files/MediaStore/Backups/Borg: \r\nWould delete archive: OS-TheMonolith-2019-07-04_16-04      Thu, 2019-07-04 16:04:46 [e096112de753322d50bc438f70c93f69d0b415bd44096dc551624325a0be3f07] (1/10)\r\nWould delete archive: OS-TheMonolith-2019-07-18_21-48      Thu, 2019-07-18 21:48:18 [198604fdca61a85be3157e886c5c80bcb0d73f0fe2f59467f3672e1734872717] (2/10)\r\nWould delete archive: OS-TheMonolith-2019-08-07_13-50      Wed, 2019-08-07 13:50:11 [1a3ce6315325535c3249b42076623c6b377234a21df8385715b07eff107e7bff] (3/10)\r\nWould delete archive: OS-TheMonolith-2019-08-10_12-01      Sat, 2019-08-10 12:01:11 [287541f3f5fde91dabfd31292f4b14d9071f247286db3bd5b29a9b0f46e581c6] (4/10)\r\nWould delete archive: OS-TheMonolith-2019-09-02_14-19      Mon, 2019-09-02 14:21:53 [3ca76805f37df815508b94eddd913632e2a4b48dcb06838a552b924facb35886] (5/10)\r\nWould delete archive: OS-TheMonolith-2019-09-03_14-41      Tue, 2019-09-03 14:41:20 [074bcc84a2cd2e177a4bf8795fe90cad861dac3b9b136306b013a62142dcc00a] (6/10)\r\nWould delete archive: OS-TheMonolith-2019-09-11_18-33      Wed, 2019-09-11 18:41:46 [bed89fe7bc9c44d7039e02701f093486d85439a1e4d106443ccbc59b0af94860] (7/10)\r\nWould delete archive: OS-TheMonolith-2019-09-28_15-32      Sat, 2019-09-28 15:32:09 [3507da2ad95973680c80189f809da31001d0b43b75fc899ef13ed81905b127c7] (8/10)\r\nWould delete archive: OS-TheMonolith-2019-10-25_13-02      Fri, 2019-10-25 13:02:50 [471f4353c05846e2fc1c8cd4a9730d8dbc04e231bbdc650f48e64e7c5a97cffe] (9/10)\r\nWould delete archive: OS-TheMonolith-2019-12-06_21-54      Fri, 2019-12-06 21:55:22 [67c591e5eabdfdc53ad9ded73159e964483006fb80d0be8b1960a20657b20a45] (10/10)\r\n\r\n-----\r\n\r\nroot@mediaserver:/$$$$$$/Backups# borg delete --dry -vsp -P \"OS-TheMonolith-2019*\" -P \"OS-TheMonolith-2020*\" ./Borg\r\nIgnoring --stats. It is not supported when using --dry-run.\r\nWould delete archive: OS-TheMonolith-2020-02-09_19-02      Sun, 2020-02-09 19:03:02 [e9ec520302816ae2e36c87071e8c2ab7331201eafd65150f127690761303b4f0] (1/22)\r\nWould delete archive: OS-TheMonolith-2020-03-15_18-33      Sun, 2020-03-15 18:33:47 [4d831a285d684872aeccc4ce8361636d17a832103aeb7ac0710d23b5175b3278] (2/22)\r\nWould delete archive: OS-TheMonolith-2020-03-24_16-32      Tue, 2020-03-24 21:31:35 [511d1e9cda41927c2ea90a7b169707ff674dbf78df74f576f48a948143f954c1] (3/22)\r\nWould delete archive: OS-TheMonolith-2020-04-01_07-25      Wed, 2020-04-01 07:25:13 [62c51645d1260c34616915a2bea98a0bcf8e3357f102b02038ab4b06414beaa4] (4/22)\r\nWould delete archive: OS-TheMonolith-2020-04-01_07-35      Wed, 2020-04-01 07:35:17 [1ccf71c8ca68026f67792f7ba35625b904eabfd6a9ec33a509db6cf788235217] (5/22)\r\nWould delete archive: OS-TheMonolith-2020-04-02_11-09      Thu, 2020-04-02 11:09:24 [4a981c566695f06bb2900b7eda3afc0b7d6daf25e5b1c6142c08bb104fccd9e4] (6/22)\r\nWould delete archive: OS-TheMonolith-2020-04-02_12-58      Thu, 2020-04-02 12:58:42 [608ae5d2d9f8729339c4c0ce11cecf041ab7c38080bf3ccfe06db7958832d1b2] (7/22)\r\nWould delete archive: OS-TheMonolith-2020-04-19_20-23      Sun, 2020-04-19 20:23:52 [c8971a2b5c9b1975ce0f95637eb797923a776a678db38cc3dc830799ad5bb961] (8/22)\r\nWould delete archive: OS-TheMonolith-2020-05-05_07-54      Tue, 2020-05-05 07:54:28 [dac0ab07a7a4571dbb2d33c5a037b1b6b0011ae97ebee5813923387bb0fb5af6] (9/22)\r\nWould delete archive: OS-TheMonolith-2020-05-08_11-27      Fri, 2020-05-08 12:07:09 [3fec23cdb746f932fd4da4ce5ac61312876abc3412fcf1ded2ac4a33113d03ef] (10/22)\r\nWould delete archive: OS-TheMonolith-2020-05-08_12-38      Fri, 2020-05-08 12:38:25 [20c91d812766a5de94484c6efcf4a960f11bcfa2079e0d0d93e07ccdd3cb8d55] (11/22)\r\nWould delete archive: OS-TheMonolith-2020-05-19_07-42      Tue, 2020-05-19 07:43:11 [23190deeb2bd632840d6d05e2e0c467292b461f9c00e9074385ace391f36add2] (12/22)\r\nWould delete archive: OS-TheMonolith-2020-05-31_11-09      Sun, 2020-05-31 11:09:36 [6a71eda23196d14fe940dc2996f4b91a9b9a89f73756b5d7b116d9c4055bbf01] (13/22)\r\nWould delete archive: OS-TheMonolith-2020-06-13_11-03      Sat, 2020-06-13 11:03:21 [9fb28a51d295042caa9ee8f7e5df5e8a50636f54093a26d78b0a1a8772cfd092] (14/22)\r\nWould delete archive: OS-TheMonolith-2020-08-12_16-02      Wed, 2020-08-12 16:02:46 [9c2b538b9d90f3dba338a8cecaaf26ff357e762e33169c19111f1685d4b1cbcf] (15/22)\r\nWould delete archive: OS-TheMonolith-2020-09-02_14-36      Wed, 2020-09-02 14:36:42 [e9b3bbe27312996b39a553e276de957814eb5a23afc7a4973faa4e61b2191b4a] (16/22)\r\nWould delete archive: OS-TheMonolith-2020-09-18_12-35      Fri, 2020-09-18 12:35:59 [e74ab109d0a5c1aa7da67e25fd963246c39a13879cbd4ece20d531ca80a78ce6] (17/22)\r\nWould delete archive: OS-TheMonolith-2020-10-02_16-22      Fri, 2020-10-02 16:22:19 [195ced5b99510eb854451c53c47301e5af5c33468a576bf6eefedbe8ae162c2f] (18/22)\r\nWould delete archive: OS-TheMonolith-2020-11-03_11-45      Tue, 2020-11-03 11:45:28 [fe40dc6f86b79a12a5cb91bb6640b562d5e9dd3d11dc0e139aad32916fd708af] (19/22)\r\nWould delete archive: OS-TheMonolith-2020-11-23_16-19      Mon, 2020-11-23 16:19:44 [fec70a0d715daae95b55cf57c62350f2eb5ed3db70beb15a0b7a8d1b0ad9b632] (20/22)\r\nWould delete archive: OS-TheMonolith-2020-12-03_09-39      Thu, 2020-12-03 09:57:33 [ab0c80627e528f78882436a6da8f4be143871a6a73581007d2af30a2d0cd165a] (21/22)\r\nWould delete archive: OS-TheMonolith-2020-12-16_12-05      Wed, 2020-12-16 12:07:47 [de0e0f91a6e01410cda9233ac33f705349e2e1b478df0b43c8db9270890ff620] (22/22)\r\n\r\n-----\r\n\r\nroot@mediaserver:/$$$$$$/Backups# borg delete --dry -vsp -P \"OS-TheMonolith-2019*\" -P \"OS-TheMonolith-2020*\" -P \"OS-MediaServer-2019-*\" ./Borg\r\nIgnoring --stats. It is not supported when using --dry-run.\r\nWould delete archive: OS-MediaServer-2019-05-16_09-20      Thu, 2019-05-16 09:20:28 [d107b311ec03d6b5341b176500fd6a6fbc684c525f45987cd0809565173beee4] (1/10)\r\nWould delete archive: OS-MediaServer-2019-05-22_05-53      Wed, 2019-05-22 05:53:54 [fa72a86dd2942e34883274345aab56370fcf3ebd700e526d7e1ba41d9f8cbdb9] (2/10)\r\nWould delete archive: OS-MediaServer-2019-07-18_20-32      Thu, 2019-07-18 20:32:24 [afac386126dad5808c2d4f465aa9fc47f33edb0602e5fc4996c14e5a49c54371] (3/10)\r\nWould delete archive: OS-MediaServer-2019-08-08_18-55      Thu, 2019-08-08 18:55:21 [e4b63d511fee5415ef1f70de64bf6e3d22f7fca8fdfc045dc77330879ede5949] (4/10)\r\nWould delete archive: OS-MediaServer-2019-10-20_22-18      Sun, 2019-10-20 22:18:33 [a9cb807eeac1eb99703e8116a78c248c3d933d2551cff1a4cb65f252b08bf0bb] (5/10)\r\nWould delete archive: OS-MediaServer-2019-10-21_12-25      Mon, 2019-10-21 12:26:50 [2610d7bad819e9e4bb9f44a28f3eaa851ed8a895be807166c078f8b34f161aa8] (6/10)\r\nWould delete archive: OS-MediaServer-2019-11-09_19-16      Sat, 2019-11-09 19:17:05 [2a3b6fa2e2310a2d17d8752c4c68552bb7fa354e2167fe500e42126ca7abe408] (7/10)\r\nWould delete archive: OS-MediaServer-2019-11-22_16-23      Fri, 2019-11-22 16:23:53 [6eb8e6bef73cb030fda25837ae77048b1334278335e3bf0306729ca67258bd7c] (8/10)\r\nWould delete archive: OS-MediaServer-2019-11-23_17-31      Sat, 2019-11-23 17:31:56 [0c58b0098530b1c8e2ddecf4cbba2e65a8266b4ed37757dd24dee7cb637d44d9] (9/10)\r\nWould delete archive: OS-MediaServer-2019-12-13_20-11      Fri, 2019-12-13 20:18:46 [151e0b689f4f9ddbfc4519c8a5cb0f005daa3eb7a3671b2669931ee01b21feb3] (10/10)\r\n\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYes, see above.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\nN/A\r\n\r\n\r\nI am holding off on doing the delete to do any testing your would like.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6026/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6015", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6015/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6015/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6015/events", "html_url": "https://github.com/borgbackup/borg/issues/6015", "id": 1028481983, "node_id": "I_kwDOAh3yxs49TWO_", "number": 6015, "title": "Error pruning when there are no archives", "user": {"login": "jimparis", "id": 204930, "node_id": "MDQ6VXNlcjIwNDkzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/204930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimparis", "html_url": "https://github.com/jimparis", "followers_url": "https://api.github.com/users/jimparis/followers", "following_url": "https://api.github.com/users/jimparis/following{/other_user}", "gists_url": "https://api.github.com/users/jimparis/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimparis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimparis/subscriptions", "organizations_url": "https://api.github.com/users/jimparis/orgs", "repos_url": "https://api.github.com/users/jimparis/repos", "events_url": "https://api.github.com/users/jimparis/events{/privacy}", "received_events_url": "https://api.github.com/users/jimparis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/77", "html_url": "https://github.com/borgbackup/borg/milestone/77", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/77/labels", "id": 6750250, "node_id": "MDk6TWlsZXN0b25lNjc1MDI1MA==", "number": 77, "title": "1.2.0rc1 (aka hydrogen-rc1)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2021-05-12T00:28:54Z", "updated_at": "2022-02-05T22:06:39Z", "due_on": "2022-02-06T08:00:00Z", "closed_at": "2022-02-05T22:06:39Z"}, "comments": 2, "created_at": "2021-10-18T00:20:48Z", "updated_at": "2021-10-28T15:43:35Z", "closed_at": "2021-10-28T15:43:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nBorg.bin 1.2.0b4.dev85+gbc700c008a55\r\n\r\n## Describe the problem you're observing.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nWith borg 1.2:\r\n\r\n```bash\r\nexport BORG_PASSPHRASE=asdf\r\nexport BORG_REPO=/tmp/test-repo\r\nrm -r /tmp/test-repo\r\n/opt/borg/Borg.bin init --encryption=repokey\r\n/opt/borg/Borg.bin prune --verbose --progress --stats --keep-daily=14\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4984, in main\r\n  File \"borg/archiver.py\", line 4915, in run\r\n  File \"borg/archiver.py\", line 183, in wrapper\r\n  File \"borg/archiver.py\", line 1512, in do_prune\r\n  File \"borg/helpers/misc.py\", line 62, in prune_split\r\nUnboundLocalError: local variable 'a' referenced before assignment\r\n```\r\n\r\nThis comes from #5332\r\nping @amikula", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6015/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6015/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6014", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6014/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6014/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6014/events", "html_url": "https://github.com/borgbackup/borg/issues/6014", "id": 1028428163, "node_id": "I_kwDOAh3yxs49TJGD", "number": 6014, "title": "borg create: bad error msg when repo not found", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 2, "created_at": "2021-10-17T20:22:32Z", "updated_at": "2021-11-10T23:27:40Z", "closed_at": "2021-11-10T23:27:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "borg 1.1.16 on debian bullseye:\r\n\r\n```\r\nRepository ssh://borg@backup:22/mnt/backup/server::server-home-2021-10-16T23:50:01 does not exist.\r\n```\r\n\r\nGuess the backup disk was not mounted at that moment, so the repo at that path was not found.\r\n\r\nIt's a bit bad though that the error message also mentions the **archive name** which it intended to create.\r\n\r\nOf course, the full location specified on the command line for borg create included the to-be-created archive name, but it should not be shown in that error msg, but only the repo part.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6014/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/6009", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/6009/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/6009/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/6009/events", "html_url": "https://github.com/borgbackup/borg/issues/6009", "id": 1025676900, "node_id": "I_kwDOAh3yxs49IpZk", "number": 6009, "title": "Passing device file paths via `--paths-from-stdin` triggers a TypeError exception", "user": {"login": "jimparis", "id": 204930, "node_id": "MDQ6VXNlcjIwNDkzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/204930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimparis", "html_url": "https://github.com/jimparis", "followers_url": "https://api.github.com/users/jimparis/followers", "following_url": "https://api.github.com/users/jimparis/following{/other_user}", "gists_url": "https://api.github.com/users/jimparis/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimparis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimparis/subscriptions", "organizations_url": "https://api.github.com/users/jimparis/orgs", "repos_url": "https://api.github.com/users/jimparis/repos", "events_url": "https://api.github.com/users/jimparis/events{/privacy}", "received_events_url": "https://api.github.com/users/jimparis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/77", "html_url": "https://github.com/borgbackup/borg/milestone/77", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/77/labels", "id": 6750250, "node_id": "MDk6TWlsZXN0b25lNjc1MDI1MA==", "number": 77, "title": "1.2.0rc1 (aka hydrogen-rc1)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2021-05-12T00:28:54Z", "updated_at": "2022-02-05T22:06:39Z", "due_on": "2022-02-06T08:00:00Z", "closed_at": "2022-02-05T22:06:39Z"}, "comments": 3, "created_at": "2021-10-13T20:40:30Z", "updated_at": "2021-10-15T19:48:44Z", "closed_at": "2021-10-15T19:48:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.2.0b4.dev83+g93e0d0f614ae\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian bullseye\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\next4\r\n\r\n#### How much data is handled by borg?\r\n\r\nn/a\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nsee below\r\n\r\n## Describe the problem you're observing.\r\n\r\nPassing device file paths via `--paths-from-stdin` triggers a TypeError exception.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\n```bash\r\n#!/bin/bash                                                                                                                                                                                                             \r\nset -e\r\nexport BORG_PASSPHRASE=asdf\r\nborg init --encryption=repokey /tmp/test-repo\r\n# this works                                                                                                                                                                                                            \r\nborg create --verbose --stats /tmp/test-repo::test1 /dev/zero\r\n# this fails                                                                                                                                                                                                            \r\necho /dev/zero | borg create --verbose --stats --paths-from-stdin /tmp/test-repo::test2\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nCreating archive at \"/tmp/test-repo::test2\"\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 4984, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 4915, in run\r\n    return set_ec(func(args))\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 183, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 663, in do_create\r\n    create_inner(archive, cache, fso)\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 555, in create_inner\r\n    status = self._process_any(path=path, parent_fd=None, name=None, st=st, fso=fso,\r\n  File \"/home/jim/git/borg/src/borg/archiver.py\", line 702, in _process_any\r\n    return fso.process_dev(path=path, parent_fd=parent_fd, name=name, st=st, dev_type='c')\r\n  File \"/home/jim/git/borg/src/borg/archive.py\", line 1287, in process_dev\r\n    st = stat_update_check(st, os.stat(name, dir_fd=parent_fd, follow_symlinks=False))\r\nTypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType\r\n\r\nPlatform: Linux basis 5.10.0-4-amd64 #1 SMP Debian 5.10.19-1 (2021-03-02) x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.2.0b4.dev83+g93e0d0f614ae  Python: CPython 3.9.1+ msgpack: 1.0.2 fuse: None [pyfuse3,llfuse]\r\nPID: 1061187  CWD: /home/jim/git/borg\r\nsys.argv: ['/home/jim/git/borg/borg-env/bin/borg', 'create', '--verbose', '--stats', '--paths-from-stdin', '/tmp/test-repo::test2']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/6009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/6009/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5899", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5899/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5899/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5899/events", "html_url": "https://github.com/borgbackup/borg/issues/5899", "id": 937232031, "node_id": "MDU6SXNzdWU5MzcyMzIwMzE=", "number": 5899, "title": "Segfault with borg 1.1.16 on Alpine Linux", "user": {"login": "rkunze", "id": 1738397, "node_id": "MDQ6VXNlcjE3MzgzOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1738397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rkunze", "html_url": "https://github.com/rkunze", "followers_url": "https://api.github.com/users/rkunze/followers", "following_url": "https://api.github.com/users/rkunze/following{/other_user}", "gists_url": "https://api.github.com/users/rkunze/gists{/gist_id}", "starred_url": "https://api.github.com/users/rkunze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rkunze/subscriptions", "organizations_url": "https://api.github.com/users/rkunze/orgs", "repos_url": "https://api.github.com/users/rkunze/repos", "events_url": "https://api.github.com/users/rkunze/events{/privacy}", "received_events_url": "https://api.github.com/users/rkunze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 59, "created_at": "2021-07-05T16:21:32Z", "updated_at": "2023-02-08T22:26:31Z", "closed_at": "2022-06-30T18:57:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\nborg 1.1.16\r\n\r\n#### Operating system (distribution) and version.\r\nAlpine Linux \"edge\" (rolling release)\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\n* Borgbackup metadata (cache and configuration) is in a btrfs partition on the host machine\r\n* Data to back up (LXC/LXD container metadata and filesystems) is ext4 on Ceph RBD block devices \r\n\r\n#### How much data is handled by borg?\r\nOriginal data: ~ 500GB (filesystems and metadata of ~20 containers)\r\nAfter deduplication: ~10GB per backup run in 20 archives (1 archive per container)\r\nTotal (all archives): ~3TB\r\n\r\n## Describe the problem you're observing.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI use borgbackup to take daily backups of LXC/LXD containers on a dedicated container host. Each backup run calls \r\n```\r\nborg create \"$ARCHIVE_URL::$CONTAINER-{now:%Y-%m-%dT%H:%M:%S}\" . --stats\r\n```\r\nin the toplevel directory of a snapshot of the container file system (snapshots are created outside of borgbackup using Ceph tools). `$ARCHIVE_URL` is the SSH URL of an archive on a remote borgbackup server, and `$CONTAINER` is the container ID.\r\n\r\nThe first call to `borg create` in this backup run fails with a segfault on about every second run (see below for the backtrace). \r\n\r\nThe subsequent calls to back up different containers in the same run have had no errors so far. \r\n\r\nThe segfault is not specific to one container: If I change the order of the containers for backup I get the same error for a different container - but always for the first `borg create` call of a backup run.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nThe crash occurs always in the same line in python code:\r\n\r\n```\r\nFatal Python error: Segmentation fault\r\n\r\nCurrent thread 0x00007fe4c6126b48 (most recent call first):\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 740 in write_archive_index\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 736 in fetch_and_build_idx\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 824 in create_master_idx\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 870 in sync\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 474 in __init__\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 379 in local\r\n  File \"/usr/lib/python3.9/site-packages/borg/cache.py\", line 387 in __new__\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 586 in do_create\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 177 in wrapper\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 4622 in run\r\n  File \"/usr/lib/python3.9/site-packages/borg/archiver.py\", line 4690 in main\r\n  File \"/usr/bin/borg\", line 33 in <module>\r\nSegmentation fault\r\n```\r\nLine 740 in /usr/lib/python3.9/site-packages/borg/cache.py is simply\r\n```\r\ncompact_chunks_archive_saved_space += chunk_idx.compact()\r\n```\r\nwhere `chunk_idx` is an instance of `ChunkIndex`, which is implemeted in C as far as I can see. \r\nSo I suspect a bug in  `chunk_idx.compact()`\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5897", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5897/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5897/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5897/events", "html_url": "https://github.com/borgbackup/borg/issues/5897", "id": 936404532, "node_id": "MDU6SXNzdWU5MzY0MDQ1MzI=", "number": 5897, "title": "pyinstaller ssh/openssh library loading issue / OpenSSL version mismatch", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/76", "html_url": "https://github.com/borgbackup/borg/milestone/76", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/76/labels", "id": 6440099, "node_id": "MDk6TWlsZXN0b25lNjQ0MDA5OQ==", "number": 76, "title": "1.1.17", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-02-16T17:32:51Z", "updated_at": "2021-07-12T21:03:14Z", "due_on": null, "closed_at": "2021-07-12T21:03:14Z"}, "comments": 2, "created_at": "2021-07-04T08:15:13Z", "updated_at": "2021-07-11T11:48:30Z", "closed_at": "2021-07-11T11:48:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From the mailing list, reported by cherio:\r\n```\r\nRemote: OpenSSL version mismatch. Built against 1010106f, you have 101000cf\r\n```\r\nIt seems issue #514 is there again.\r\nThis was observed using `borg-linux64` and `borg-linux64.tgz` 1.1.15 and 1.1.16, but not with 1.1.14.\r\n\r\n1.1.14 was last borg built with pyinstaller 3.2.1.\r\n1.1.15 was built with 4.0, 1.1.16 was built with 4.2.\r\n\r\nThe user uses borg binaries on Ubuntu 20.04. \r\n```\r\n> openssl version\r\nOpenSSL 1.1.1f  31 Mar 2020\r\n\r\n> ssh -V\r\nOpenSSH_8.2p1 Ubuntu-4ubuntu0.2, OpenSSL 1.1.1f  31 Mar 2020\r\n\r\n> python\r\nPython 3.8.5 (default, May 27 2021, 13:30:53)\r\n[GCC 9.3.0] on linux\r\n>>> import ssl\r\n>>> ssl.OPENSSL_VERSION\r\n'OpenSSL 1.1.1f  31 Mar 2020'\r\n```\r\nSo, system openssl is 1.1.1f, system ssh wants 1.1.1f.\r\nVery likely the pyi bundle has 1.1.0 (for bundled python).\r\n\r\nRelated borg code:\r\n- https://github.com/borgbackup/borg/blob/1.1.16/src/borg/helpers.py#L2407\r\n- https://github.com/borgbackup/borg/blob/1.1.16/src/borg/remote.py#L553", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5897/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5857", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5857/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5857/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5857/events", "html_url": "https://github.com/borgbackup/borg/issues/5857", "id": 924775818, "node_id": "MDU6SXNzdWU5MjQ3NzU4MTg=", "number": 5857, "title": "leading slash required for include/exclude matching of full paths", "user": {"login": "Alexander-Shukaev", "id": 911281, "node_id": "MDQ6VXNlcjkxMTI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/911281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexander-Shukaev", "html_url": "https://github.com/Alexander-Shukaev", "followers_url": "https://api.github.com/users/Alexander-Shukaev/followers", "following_url": "https://api.github.com/users/Alexander-Shukaev/following{/other_user}", "gists_url": "https://api.github.com/users/Alexander-Shukaev/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexander-Shukaev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexander-Shukaev/subscriptions", "organizations_url": "https://api.github.com/users/Alexander-Shukaev/orgs", "repos_url": "https://api.github.com/users/Alexander-Shukaev/repos", "events_url": "https://api.github.com/users/Alexander-Shukaev/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexander-Shukaev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/76", "html_url": "https://github.com/borgbackup/borg/milestone/76", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/76/labels", "id": 6440099, "node_id": "MDk6TWlsZXN0b25lNjQ0MDA5OQ==", "number": 76, "title": "1.1.17", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-02-16T17:32:51Z", "updated_at": "2021-07-12T21:03:14Z", "due_on": null, "closed_at": "2021-07-12T21:03:14Z"}, "comments": 2, "created_at": "2021-06-18T10:36:39Z", "updated_at": "2021-06-26T00:23:46Z", "closed_at": "2021-06-26T00:23:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\nborg 1.1.16\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nEXT4\r\n\r\n## Describe the problem you're observing.\r\n\r\nI tried\r\n\r\n```\r\nsh:home/*/Projects/**/*.log\r\n```\r\n\r\nand it appears that this pattern does not match.  I suspect that it's because double asterisk (star) is only supported in the beginning of the pattern.  Is that true?  Is there any technical limitation that prevents them from being present anywhere?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5857/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5834", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5834/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5834/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5834/events", "html_url": "https://github.com/borgbackup/borg/issues/5834", "id": 921346410, "node_id": "MDU6SXNzdWU5MjEzNDY0MTA=", "number": 5834, "title": "`--dry-run` does not show exclude tag file being present in the list of archived files as per `--keep-exclude-tags`", "user": {"login": "Alexander-Shukaev", "id": 911281, "node_id": "MDQ6VXNlcjkxMTI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/911281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexander-Shukaev", "html_url": "https://github.com/Alexander-Shukaev", "followers_url": "https://api.github.com/users/Alexander-Shukaev/followers", "following_url": "https://api.github.com/users/Alexander-Shukaev/following{/other_user}", "gists_url": "https://api.github.com/users/Alexander-Shukaev/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexander-Shukaev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexander-Shukaev/subscriptions", "organizations_url": "https://api.github.com/users/Alexander-Shukaev/orgs", "repos_url": "https://api.github.com/users/Alexander-Shukaev/repos", "events_url": "https://api.github.com/users/Alexander-Shukaev/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexander-Shukaev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/76", "html_url": "https://github.com/borgbackup/borg/milestone/76", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/76/labels", "id": 6440099, "node_id": "MDk6TWlsZXN0b25lNjQ0MDA5OQ==", "number": 76, "title": "1.1.17", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-02-16T17:32:51Z", "updated_at": "2021-07-12T21:03:14Z", "due_on": null, "closed_at": "2021-07-12T21:03:14Z"}, "comments": 7, "created_at": "2021-06-15T12:31:49Z", "updated_at": "2021-06-21T16:08:51Z", "closed_at": "2021-06-16T13:07:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\nborg 1.1.16\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nEXT4\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nborg ... --dry-run ... --exclude-if-present .nobackup --keep-exclude-tags ...\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nThe `.nobackup` file is not present in the list of output files to be backed up.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5828", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5828/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5828/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5828/events", "html_url": "https://github.com/borgbackup/borg/issues/5828", "id": 915984611, "node_id": "MDU6SXNzdWU5MTU5ODQ2MTE=", "number": 5828, "title": "FileExistsError/FileNotFoundError when locking", "user": {"login": "pgerber", "id": 11895833, "node_id": "MDQ6VXNlcjExODk1ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/11895833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgerber", "html_url": "https://github.com/pgerber", "followers_url": "https://api.github.com/users/pgerber/followers", "following_url": "https://api.github.com/users/pgerber/following{/other_user}", "gists_url": "https://api.github.com/users/pgerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgerber/subscriptions", "organizations_url": "https://api.github.com/users/pgerber/orgs", "repos_url": "https://api.github.com/users/pgerber/repos", "events_url": "https://api.github.com/users/pgerber/events{/privacy}", "received_events_url": "https://api.github.com/users/pgerber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/76", "html_url": "https://github.com/borgbackup/borg/milestone/76", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/76/labels", "id": 6440099, "node_id": "MDk6TWlsZXN0b25lNjQ0MDA5OQ==", "number": 76, "title": "1.1.17", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-02-16T17:32:51Z", "updated_at": "2021-07-12T21:03:14Z", "due_on": null, "closed_at": "2021-07-12T21:03:14Z"}, "comments": 9, "created_at": "2021-06-09T09:20:50Z", "updated_at": "2021-06-16T13:47:57Z", "closed_at": "2021-06-16T13:47:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nbug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\n$ borg -V\r\nborg 1.1.16\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\n```\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04.2 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\n```\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nBTRFS on target host\r\n\r\n## Describe the problem you're observing.\r\n\r\nI've been seeing locking-related errors for some time. See backtraces below. So far, I've only seen this issue on one out of two servers. The only difference I'm aware of is that the machine is using BTRFS as filesystem.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nNo, but the issue reappears sporadically. \r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"borg/locking.py\", line 130, in acquire\r\nFileExistsError: [Errno 17] File exists: '/backup/borg_repos/backup01/lock.exclusive'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"borg/remote.py\", line 247, in serve\r\n  File \"borg/remote.py\", line 375, in open\r\n  File \"borg/repository.py\", line 190, in __enter__\r\n  File \"borg/repository.py\", line 421, in open\r\n  File \"borg/locking.py\", line 350, in acquire\r\n  File \"borg/locking.py\", line 363, in _wait_for_readers_finishing\r\n  File \"borg/locking.py\", line 134, in acquire\r\n  File \"borg/locking.py\", line 159, in kill_stale_lock\r\nFileNotFoundError: [Errno 2] No such file or directory: '/backup/borg_repos/backup01/lock.exclusive'\r\n\r\nBorg server: Platform: Linux backup02 5.4.0-73-generic #82-Ubuntu SMP Wed Apr 14 17:39:42 UTC 2021 x86_64\r\nBorg server: Linux: debian bullseye/sid \r\nBorg server: Borg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nBorg server: PID: 1808518  CWD: /backup/borg_repos/backup01\r\nBorg server: sys.argv: ['borg', 'serve', '--restrict-to-path', '/backup/borg_repos/backup01']\r\nBorg server: SSH_ORIGINAL_COMMAND: 'borg serve --umask=077 --error'\r\nPlatform: Linux backup01 5.4.0-73-generic #82-Ubuntu SMP Wed Apr 14 17:39:42 UTC 2021 x86_64\r\nLinux: debian bullseye/sid \r\nBorg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nPID: 67423  CWD: /root\r\nsys.argv: ['borg', 'create', '--error', '--compression', 'zstd', '--lock-wait', '43200', '--noatime', '--patterns-from', '/etc/borg/patterns-main', '--', 'borg-backup01@backup02.tocco.ch:~::main-{now:%Y-%m-%dT%H:%M:%S}']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"borg/locking.py\", line 130, in acquire\r\nFileExistsError: [Errno 17] File exists: '/backup/borg_repos/backup01/lock.exclusive'\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"borg/remote.py\", line 247, in serve\r\n  File \"borg/remote.py\", line 375, in open\r\n  File \"borg/repository.py\", line 190, in __enter__\r\n  File \"borg/repository.py\", line 421, in open\r\n  File \"borg/locking.py\", line 350, in acquire\r\n  File \"borg/locking.py\", line 363, in _wait_for_readers_finishing\r\n  File \"borg/locking.py\", line 134, in acquire\r\n  File \"borg/locking.py\", line 159, in kill_stale_lock\r\nFileNotFoundError: [Errno 2] No such file or directory: '/backup/borg_repos/backup01/lock.exclusive'\r\n\r\nBorg server: Platform: Linux backup02 5.4.0-73-generic #82-Ubuntu SMP Wed Apr 14 17:39:42 UTC 2021 x86_64\r\nBorg server: Linux: debian bullseye/sid \r\nBorg server: Borg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nBorg server: PID: 1808518  CWD: /backup/borg_repos/backup01\r\nBorg server: sys.argv: ['borg', 'serve', '--restrict-to-path', '/backup/borg_repos/backup01']\r\nBorg server: SSH_ORIGINAL_COMMAND: 'borg serve --umask=077 --error'\r\nPlatform: Linux backup01 5.4.0-73-generic #82-Ubuntu SMP Wed Apr 14 17:39:42 UTC 2021 x86_64\r\nLinux: debian bullseye/sid \r\nBorg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nPID: 67423  CWD: /root\r\nsys.argv: ['borg', 'create', '--error', '--compression', 'zstd', '--lock-wait', '43200', '--noatime', '--patterns-from', '/etc/borg/patterns-main', '--', 'borg-backup01@backup02.tocco.ch:~::main-{now:%Y-%m-%dT%H:%M:%S}']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5827", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5827/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5827/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5827/events", "html_url": "https://github.com/borgbackup/borg/issues/5827", "id": 914156220, "node_id": "MDU6SXNzdWU5MTQxNTYyMjA=", "number": 5827, "title": "Pull mode documentation: Security: Client is able to run code on server", "user": {"login": "pcworld", "id": 1506734, "node_id": "MDQ6VXNlcjE1MDY3MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1506734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcworld", "html_url": "https://github.com/pcworld", "followers_url": "https://api.github.com/users/pcworld/followers", "following_url": "https://api.github.com/users/pcworld/following{/other_user}", "gists_url": "https://api.github.com/users/pcworld/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcworld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcworld/subscriptions", "organizations_url": "https://api.github.com/users/pcworld/orgs", "repos_url": "https://api.github.com/users/pcworld/repos", "events_url": "https://api.github.com/users/pcworld/events{/privacy}", "received_events_url": "https://api.github.com/users/pcworld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211515661, "node_id": "MDU6TGFiZWwyMTE1MTU2NjE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/security", "name": "security", "color": "ff002f", "default": false, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/77", "html_url": "https://github.com/borgbackup/borg/milestone/77", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/77/labels", "id": 6750250, "node_id": "MDk6TWlsZXN0b25lNjc1MDI1MA==", "number": 77, "title": "1.2.0rc1 (aka hydrogen-rc1)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2021-05-12T00:28:54Z", "updated_at": "2022-02-05T22:06:39Z", "due_on": "2022-02-06T08:00:00Z", "closed_at": "2022-02-05T22:06:39Z"}, "comments": 3, "created_at": "2021-06-08T02:04:29Z", "updated_at": "2021-07-19T21:04:51Z", "closed_at": "2021-07-19T21:04:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nIssue\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.16 (current documentation)\r\n\r\n---\r\n\r\nThe [pull backup](https://borgbackup.readthedocs.io/en/stable/deployment/pull-backup.html) documentation suggests to set up a chroot to back up remote servers.\r\nThere is already a security warning that a compromised backup server will be able to \"cause unlimited damage to the client\".\r\n\r\nHowever, this security issue goes both ways: A compromised client is likely to be able to run _arbitrary code as root on the backup server_.\r\nFor example, a malicious client can replace its own shell binary. This is then run as root on the backup machine in the chroot context. Escaping the chroot is easy, e.g. the client is able to load malicious kernel modules on the backup host via `insmod`, or use one of the bind-mounted file systems (/dev /proc /sys) to escape the chroot, e.g. by manipulating /dev/mem.\r\n\r\nThe warning should be expanded that the compromise can work both ways.\r\nIdeally, the chroot solution should be replaced by something more secure.\r\nAccording to the pull backup documentation, the chroot is just performed so that borg will be able to read /etc/passwd and /etc/group. borg could introduce parameters to specify the path to these files so that chrooting will not be needed.\r\n\r\nFurther, the FAQ [How can I protect against a hacked backup client?](https://borgbackup.readthedocs.io/en/stable/faq.html#how-can-i-protect-against-a-hacked-backup-client) suggests that the pull mode documentation \"protect[s] against\" \"the attacker could then use borg on C to delete all backups residing on S\". For the reasons outlined above, the chroot solution _does not prevent that_.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5822", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5822/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5822/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5822/events", "html_url": "https://github.com/borgbackup/borg/issues/5822", "id": 912135551, "node_id": "MDU6SXNzdWU5MTIxMzU1NTE=", "number": 5822, "title": "borg check --repair --verify-data: inconsistent/sporadic chunk id verification failure", "user": {"login": "jurgenhaas", "id": 1475675, "node_id": "MDQ6VXNlcjE0NzU2NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1475675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jurgenhaas", "html_url": "https://github.com/jurgenhaas", "followers_url": "https://api.github.com/users/jurgenhaas/followers", "following_url": "https://api.github.com/users/jurgenhaas/following{/other_user}", "gists_url": "https://api.github.com/users/jurgenhaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jurgenhaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jurgenhaas/subscriptions", "organizations_url": "https://api.github.com/users/jurgenhaas/orgs", "repos_url": "https://api.github.com/users/jurgenhaas/repos", "events_url": "https://api.github.com/users/jurgenhaas/events{/privacy}", "received_events_url": "https://api.github.com/users/jurgenhaas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 491632559, "node_id": "MDU6TGFiZWw0OTE2MzI1NTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/hardware-issue", "name": "hardware-issue", "color": "e6e6e6", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-06-05T07:32:01Z", "updated_at": "2021-09-13T13:43:41Z", "closed_at": "2021-06-18T12:21:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.16\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nUbuntu 20.04\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nIntel NUC with ect4\r\n\r\n#### How much data is handled by borg?\r\n\r\n400GB on that host, 274GB in the problematic repository\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nborg check --repair --verify-data --verbose /var/backups/borg/nextcloud_privat\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nMy monthly check reported a problem with the integrity of some chunks, so I started to analyse the repository. The command above logs the following statement:\r\n\r\n```\r\nStarting repository check\r\nStarting repository index check\r\nCompleted repository check, no problems found.\r\nStarting archive consistency check...\r\nEnter passphrase for key /var/backups/borg/nextcloud_privat:\r\nStarting cryptographic data integrity verification...\r\nchunk f856bf715978bb1a4acc9d2f4b23bfc319a2452058541ae5c8ee086b75279ff9, integrity error: Data integrity error: Chunk f856bf715978bb1a4acc9d2f4b23bfc319a2452058541ae5c8ee086b75279ff9: id verification failed\r\nFound defect chunks. They will be deleted now, so affected files can get repaired now and maybe healed later.\r\nchunk %s not deleted, did not consistently fail.\r\nFinished cryptographic data integrity verification, verified 298463 chunks with 1 integrity errors.\r\nAnalyzing archive ps1-2020-05-31T04:07:42.711754 (1/28)\r\nAnalyzing archive ps1-2020-06-30T04:12:33.529670 (2/28)\r\nAnalyzing archive ps1-2020-07-31T04:13:08.699011 (3/28)\r\n\r\n\r\nAnalyzing archive ps1-2021-06-03T04:33:13.815852 (27/28)\r\nAnalyzing archive ps1-2021-06-04T05:15:33.195727 (28/28)\r\nWriting Manifest.\r\nCommitting repo (may take a while, due to compact_segments)...\r\nFinished committing repo.\r\nArchive consistency check complete, problems found.\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes, no matter how often I run this. It continues reporting that integrity error but still doesn't delete the reported chunk.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5806", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5806/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5806/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5806/events", "html_url": "https://github.com/borgbackup/borg/issues/5806", "id": 891509341, "node_id": "MDU6SXNzdWU4OTE1MDkzNDE=", "number": 5806, "title": "borg check --verify-data crashing", "user": {"login": "rsyring", "id": 109467, "node_id": "MDQ6VXNlcjEwOTQ2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/109467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsyring", "html_url": "https://github.com/rsyring", "followers_url": "https://api.github.com/users/rsyring/followers", "following_url": "https://api.github.com/users/rsyring/following{/other_user}", "gists_url": "https://api.github.com/users/rsyring/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsyring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsyring/subscriptions", "organizations_url": "https://api.github.com/users/rsyring/orgs", "repos_url": "https://api.github.com/users/rsyring/repos", "events_url": "https://api.github.com/users/rsyring/events{/privacy}", "received_events_url": "https://api.github.com/users/rsyring/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/76", "html_url": "https://github.com/borgbackup/borg/milestone/76", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/76/labels", "id": 6440099, "node_id": "MDk6TWlsZXN0b25lNjQ0MDA5OQ==", "number": 76, "title": "1.1.17", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-02-16T17:32:51Z", "updated_at": "2021-07-12T21:03:14Z", "due_on": null, "closed_at": "2021-07-12T21:03:14Z"}, "comments": 8, "created_at": "2021-05-14T01:32:14Z", "updated_at": "2021-07-10T15:48:45Z", "closed_at": "2021-07-10T15:48:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes.  Possibly related to #3225\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.16\r\n\r\n#### Operating system (distribution) and version.\r\n\r\n```\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=20.04\r\nDISTRIB_CODENAME=focal\r\nDISTRIB_DESCRIPTION=\"Ubuntu 20.04.2 LTS\"\r\n```\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nWD Elements external drive, USB 3 connection\r\n\r\n#### How much data is handled by borg?\r\n\r\nThe repo in question is 95G on disk according to `du`\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n`borg check --verify-data /mnt/extborg2/nanex/borg-system`\r\n\r\n## Describe the problem you're observing.\r\n\r\nI can run a repository check without issue:\r\n\r\n```\r\nroot@nanex:~# borg check /mnt/extborg2/nanex/borg-system\r\nEnter passphrase for key /mnt/extborg2/nanex/borg-system: \r\nroot@nanex:~#\r\n```\r\n\r\nBut when checking with verify data, I get an exception after it runs for some time (10s of minutes):\r\n\r\n```\r\nroot@nanex:~# borg check --verify-data /mnt/extborg2/nanex/borg-system\r\nEnter passphrase for key /mnt/extborg2/nanex/borg-system: \r\nException ignored in: <function Repository.__del__ at 0x7fcb6f68d0e0>\r\nTraceback (most recent call last):\r\n  File \"borg/repository.py\", line 179, in __del__\r\n  File \"borg/repository.py\", line 460, in close\r\n  File \"borg/locking.py\", line 383, in release\r\n  File \"borg/locking.py\", line 282, in modify\r\nKeyError: (('nanex@79871138881880', 3701717, 0),)\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/archiver.py\", line 350, in do_check\r\n  File \"borg/archive.py\", line 1249, in check\r\n  File \"borg/archive.py\", line 1639, in rebuild_refcounts\r\n  File \"borg/archive.py\", line 268, in add\r\n  File \"borg/archive.py\", line 285, in flush\r\n  File \"borg/archive.py\", line 1440, in add_callback\r\n  File \"borg/crypto/key.py\", line 370, in encrypt\r\n  File \"borg/crypto/nonces.py\", line 72, in ensure_reservation\r\n  File \"borg/crypto/nonces.py\", line 39, in get_repo_free_nonce\r\n  File \"borg/repository.py\", line 336, in get_free_nonce\r\nAssertionError: bug in code, exclusive lock should exist here\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4690, in main\r\n  File \"borg/archiver.py\", line 4622, in run\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/repository.py\", line 204, in __exit__\r\n  File \"borg/repository.py\", line 460, in close\r\n  File \"borg/locking.py\", line 383, in release\r\n  File \"borg/locking.py\", line 282, in modify\r\nKeyError: ('nanex@79871138881880', 3701717, 0)\r\n\r\nPlatform: Linux nanex 5.4.0-72-generic #80-Ubuntu SMP Mon Apr 12 17:35:00 UTC 2021 x86_64\r\nLinux: debian bullseye/sid \r\nBorg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nPID: 3701717  CWD: /root\r\nsys.argv: ['borg', 'check', '--verify-data', '/mnt/extborg2/nanex/borg-system']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\nI might also get a different exception, same command:\r\n\r\n```\r\nroot@nanex:~# borg check --verify-data /mnt/extborg2/nanex/borg-system\r\nException ignored in: <function Repository.__del__ at 0x7f270a22f0e0>\r\nTraceback (most recent call last):\r\n  File \"borg/repository.py\", line 179, in __del__\r\n  File \"borg/repository.py\", line 460, in close\r\n  File \"borg/locking.py\", line 383, in release\r\n  File \"borg/locking.py\", line 282, in modify\r\nKeyError: (('nanex@79871138881880', 1281064, 0),)\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/repository.py\", line 1376, in get_fd\r\n  File \"borg/lrucache.py\", line 21, in __getitem__\r\nKeyError: 14788\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/archiver.py\", line 343, in do_check\r\n  File \"borg/repository.py\", line 979, in check\r\n  File \"borg/repository.py\", line 1424, in iter_objects\r\n  File \"borg/repository.py\", line 1378, in get_fd\r\n  File \"borg/repository.py\", line 1359, in open_fd\r\nFileNotFoundError: [Errno 2] No such file or directory: '/mnt/extborg2/nanex/borg-system/data/14/14788'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4690, in main\r\n  File \"borg/archiver.py\", line 4622, in run\r\n  File \"borg/archiver.py\", line 177, in wrapper\r\n  File \"borg/repository.py\", line 204, in __exit__\r\n  File \"borg/repository.py\", line 460, in close\r\n  File \"borg/locking.py\", line 383, in release\r\n  File \"borg/locking.py\", line 282, in modify\r\nKeyError: ('nanex@79871138881880', 1281064, 0)\r\n\r\nPlatform: Linux nanex 5.4.0-72-generic #80-Ubuntu SMP Mon Apr 12 17:35:00 UTC 2021 x86_64\r\nLinux: debian bullseye/sid \r\nBorg: 1.1.16  Python: CPython 3.7.9 msgpack: 0.5.6.+borg1\r\nPID: 1281064  CWD: /root\r\nsys.argv: ['borg', 'check', '--verify-data', '/mnt/extborg2/nanex/borg-system']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThat directory is missing:\r\n\r\n```\r\nls /mnt/extborg2/nanex/borg-system/data/14/1478*\r\n/mnt/extborg2/nanex/borg-system/data/14/14780  /mnt/extborg2/nanex/borg-system/data/14/14783  /mnt/extborg2/nanex/borg-system/data/14/14789\r\n/mnt/extborg2/nanex/borg-system/data/14/14781  /mnt/extborg2/nanex/borg-system/data/14/14785\r\n/mnt/extborg2/nanex/borg-system/data/14/14782  /mnt/extborg2/nanex/borg-system/data/14/14787\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes.  Just run the command again.\r\n\r\nI did run e2fsck on the unmounted file system.  No errors detected and didn't fix the problem.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nIncluded above.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5688", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5688/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5688/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5688/events", "html_url": "https://github.com/borgbackup/borg/issues/5688", "id": 807901833, "node_id": "MDU6SXNzdWU4MDc5MDE4MzM=", "number": 5688, "title": "Doesn't work when invoked via a symlink", "user": {"login": "cherio", "id": 2200569, "node_id": "MDQ6VXNlcjIyMDA1Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2200569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cherio", "html_url": "https://github.com/cherio", "followers_url": "https://api.github.com/users/cherio/followers", "following_url": "https://api.github.com/users/cherio/following{/other_user}", "gists_url": "https://api.github.com/users/cherio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cherio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cherio/subscriptions", "organizations_url": "https://api.github.com/users/cherio/orgs", "repos_url": "https://api.github.com/users/cherio/repos", "events_url": "https://api.github.com/users/cherio/events{/privacy}", "received_events_url": "https://api.github.com/users/cherio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/73", "html_url": "https://github.com/borgbackup/borg/milestone/73", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/73/labels", "id": 6091344, "node_id": "MDk6TWlsZXN0b25lNjA5MTM0NA==", "number": 73, "title": "1.1.16", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-11-10T17:58:06Z", "updated_at": "2021-03-22T19:40:28Z", "due_on": null, "closed_at": "2021-03-22T19:40:28Z"}, "comments": 3, "created_at": "2021-02-14T06:41:34Z", "updated_at": "2021-02-14T20:17:01Z", "closed_at": "2021-02-14T20:17:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "This looks like a regression in 1.1.15 as it used to work with 1.1.14.\r\n\r\nI extract `borg` versions from `borg-linux64.tgz` into version specific directories e.g.\r\n`/home/user/opt/.versions/borg-1.1.14`\r\n`/home/user/opt/.versions/borg-1.1.15`\r\n\r\nThen I symlink it into the user bin directory, e.g.\r\n`ln -sf /home/user/opt/.versions/borg-1.1.14/borg.exe /home/user/bin/borg`\r\n\r\nThis works when invoked from anywhere by the user `user` e.g.\r\n`borg --help`\r\n\r\nThe same no longer works if I symlink to 1.1.15\r\n`ln -sf /home/user/opt/.versions/borg-1.1.15/borg.exe /home/user/bin/borg`\r\n`borg --help`\r\nproduces this error\r\n`[1576546] Error loading Python lib '/home/user/bin/libpython3.7m.so.1.0': dlopen: /home/user/bin/libpython3.7m.so.1.0: cannot open shared object file: No such file or directory`", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5679", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5679/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5679/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5679/events", "html_url": "https://github.com/borgbackup/borg/issues/5679", "id": 803660342, "node_id": "MDU6SXNzdWU4MDM2NjAzNDI=", "number": 5679, "title": "\"borg compact\" reports a wrong \"freed space\" value", "user": {"login": "LaurentBonnaud", "id": 2168323, "node_id": "MDQ6VXNlcjIxNjgzMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/2168323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaurentBonnaud", "html_url": "https://github.com/LaurentBonnaud", "followers_url": "https://api.github.com/users/LaurentBonnaud/followers", "following_url": "https://api.github.com/users/LaurentBonnaud/following{/other_user}", "gists_url": "https://api.github.com/users/LaurentBonnaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaurentBonnaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaurentBonnaud/subscriptions", "organizations_url": "https://api.github.com/users/LaurentBonnaud/orgs", "repos_url": "https://api.github.com/users/LaurentBonnaud/repos", "events_url": "https://api.github.com/users/LaurentBonnaud/events{/privacy}", "received_events_url": "https://api.github.com/users/LaurentBonnaud/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/55", "html_url": "https://github.com/borgbackup/borg/milestone/55", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/55/labels", "id": 3378290, "node_id": "MDk6TWlsZXN0b25lMzM3ODI5MA==", "number": 55, "title": "1.2.0 release (aka hydrogen)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 50, "state": "closed", "created_at": "2018-05-26T12:32:09Z", "updated_at": "2022-03-07T11:43:27Z", "due_on": "2022-02-22T08:00:00Z", "closed_at": "2022-02-22T21:26:51Z"}, "comments": 19, "created_at": "2021-02-08T15:19:50Z", "updated_at": "2022-02-17T19:14:58Z", "closed_at": "2022-02-13T17:25:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\nIntel with 16GB of RAM\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.2.0b2\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nUbuntu 20.10\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nlocal repo on btrfs\r\n\r\n#### How much data is handled by borg?\r\n\r\n1.1TB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n```\r\n$ borg-1.2b2 -v compact /myrepo\r\ncompaction freed about 244.55 MB repository space.\r\n\r\n$ borg-1.2b2 -v compact /myrepo\r\ncompaction freed about 106.94 MB repository space.\r\n\r\n$ borg-1.2b2 -v compact /myrepo\r\ncompaction freed about 106.93 MB repository space.\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nborg compact needs several iterations to reach a final state and does not seem to compact as much as it should.  More precisely a lot of 17 bytes files remain after compacttion:\r\n```\r\n# find /myrepo | wc\r\n 200649  200649 2351093\r\n\r\n# find /myrepo -size 17c | wc\r\n  20344   20344  244128\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI observed the same behavior on several machines/systems/repos.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5679/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5673", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5673/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5673/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5673/events", "html_url": "https://github.com/borgbackup/borg/issues/5673", "id": 802714647, "node_id": "MDU6SXNzdWU4MDI3MTQ2NDc=", "number": 5673, "title": "[1.2.0b2] borg info: error about missing \"files\" cache file and not getting actual info", "user": {"login": "FabioPedretti", "id": 3390837, "node_id": "MDQ6VXNlcjMzOTA4Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3390837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabioPedretti", "html_url": "https://github.com/FabioPedretti", "followers_url": "https://api.github.com/users/FabioPedretti/followers", "following_url": "https://api.github.com/users/FabioPedretti/following{/other_user}", "gists_url": "https://api.github.com/users/FabioPedretti/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabioPedretti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabioPedretti/subscriptions", "organizations_url": "https://api.github.com/users/FabioPedretti/orgs", "repos_url": "https://api.github.com/users/FabioPedretti/repos", "events_url": "https://api.github.com/users/FabioPedretti/events{/privacy}", "received_events_url": "https://api.github.com/users/FabioPedretti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/75", "html_url": "https://github.com/borgbackup/borg/milestone/75", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/75/labels", "id": 6346466, "node_id": "MDk6TWlsZXN0b25lNjM0NjQ2Ng==", "number": 75, "title": "hydrogen-b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-01-24T22:06:41Z", "updated_at": "2021-05-12T00:28:31Z", "due_on": null, "closed_at": "2021-05-12T00:28:31Z"}, "comments": 10, "created_at": "2021-02-06T14:35:10Z", "updated_at": "2022-06-11T10:17:35Z", "closed_at": "2021-04-19T21:09:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n```\r\n# ./borg-1.2.0b2 -V\r\nborg-1.2.0b2 1.2.0b2\r\n# borg -V\r\nborg 1.1.15\r\n```\r\n#### Operating system (distribution) and version.\r\nUp to date 64 bit Debian 10:\r\n```\r\n# uname -a\r\nLinux borg 4.19.0-14-amd64 #1 SMP Debian 4.19.171-2 (2021-01-30) x86_64 GNU/Linux\r\n```\r\n#### Hardware / network configuration, and filesystems used.\r\nA vsphere VM, repo + cache on SSHFS, files to backup mounted with NFS.\r\n\r\n#### How much data is handled by borg?\r\nSee output of borg info below.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nborg info (detailed below)\r\n\r\n## Describe the problem you're observing.\r\n\r\nWith 1.2.0b2 borg info shows an error* and get stuck until I kill it. Using a repo created with previous 1.1 release.\r\n*Note that I am using borg 1.1.15 with BORG_FILES_CACHE_SUFFIX set to a different value for every archive, so the \"files\" file doesn't exist, but there are many \"files.archive-number\" files.\r\nThe BORG_FILES_CACHE_SUFFIX env var is set just during the create, not while doing borg info.\r\n\r\nNo issues with borg 1.1.15 (completes in about 15 seconds):\r\n```\r\n# borg info\r\nRepository ID: xxx\r\nLocation: /mnt/sshfs/borg-repo\r\nEncrypted: Yes (repokey BLAKE2b)\r\nCache: /mnt/sshfs/borg-cache/xxx\r\nSecurity dir: /root/.config/borg/security/xxx\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:              570.08 TB            433.07 TB              2.45 TB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                 5142003           1124036218\r\n```\r\nError + getting stuck for some minutes (until I kill it) with borg 1.2.0b2:\r\n```\r\n# ./borg-1.2.0b2 info\r\nThe files cache can't be read. [[Errno 2] No such file or directory: '/mnt/sshfs/borg-cache/xxx/files']\r\nContinuing without files cache - expect lower performance.\r\nRepository ID: xxx\r\nLocation: /mnt/sshfs/borg-repo\r\nEncrypted: Yes (repokey BLAKE2b)\r\nCache: /mnt/sshfs/borg-cache/xxx\r\nSecurity dir: /root/.config/borg/security/xxx\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\n^C^C^C^CKeyboard interrupt\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5668", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5668/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5668/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5668/events", "html_url": "https://github.com/borgbackup/borg/issues/5668", "id": 797716310, "node_id": "MDU6SXNzdWU3OTc3MTYzMTA=", "number": 5668, "title": "repository problems with checkpoint archives and multiple clients", "user": {"login": "dietmargoldbeck", "id": 76568877, "node_id": "MDQ6VXNlcjc2NTY4ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/76568877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dietmargoldbeck", "html_url": "https://github.com/dietmargoldbeck", "followers_url": "https://api.github.com/users/dietmargoldbeck/followers", "following_url": "https://api.github.com/users/dietmargoldbeck/following{/other_user}", "gists_url": "https://api.github.com/users/dietmargoldbeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/dietmargoldbeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dietmargoldbeck/subscriptions", "organizations_url": "https://api.github.com/users/dietmargoldbeck/orgs", "repos_url": "https://api.github.com/users/dietmargoldbeck/repos", "events_url": "https://api.github.com/users/dietmargoldbeck/events{/privacy}", "received_events_url": "https://api.github.com/users/dietmargoldbeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/74", "html_url": "https://github.com/borgbackup/borg/milestone/74", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/74/labels", "id": 6181836, "node_id": "MDk6TWlsZXN0b25lNjE4MTgzNg==", "number": 74, "title": "hydrogen-b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2020-12-04T18:15:31Z", "updated_at": "2021-02-05T23:02:49Z", "due_on": null, "closed_at": "2021-02-05T23:02:49Z"}, "comments": 11, "created_at": "2021-01-31T13:52:15Z", "updated_at": "2021-02-05T16:06:05Z", "closed_at": "2021-02-03T15:36:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nyes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg-1.2 1.2.0b1\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nLinux (Client 1 is debian, Client 2 fedora and borg  server archlinux)\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nNotebooks with ext4 filesystem. Borg server on zfs\r\n\r\n#### How much data is handled by borg?\r\n\r\n60GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nOn Client 1\r\n \r\n```\r\nborg-1.2 create --stats --show-rc -C lz4 -c 900 --lock-wait 7200 -v -p archlinux:/home/borgtest \\\r\n    /archiv::felsenpinguin.full.20210131_1612091393  /  --exclude /proc ...\r\n```\r\nAfter 20 minutes i simulated a network problem and killed the ssh process\r\n\r\nOn Client 2\r\n\r\n```\r\nborg-1.2 create --stats --show-rc -C lz4 -c 900  --lock-wait 7200  -v -p archlinux:/home/borgtest \\\r\n    /archiv::brillenpinguin.full.20210131_1612093028  /  --exclude /proc ...\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nThe second backup runs to the end and gives a traceback trying to calculate the statistics.\r\n\r\nborg check of the archive finds lots of orphaned objects\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI can reproduce it with creating a checkpoint archive and then use the server from *another* machine.\r\n\r\nIf i continue to connect from the same machine i can resume without problems after a checkpoint archive.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nLocal Exceptionnfig                                                             \r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4736, in main\r\n  File \"borg/archiver.py\", line 4667, in run\r\n  File \"borg/archiver.py\", line 181, in wrapper\r\n  File \"borg/archiver.py\", line 657, in do_create\r\n  File \"borg/archiver.py\", line 628, in create_inner\r\n  File \"borg/cache.py\", line 407, in __str__\r\n  File \"borg/cache.py\", line 434, in format_tuple\r\n  File \"borg/cache.py\", line 426, in stats\r\n  File \"borg/archive.py\", line 607, in calc_stats\r\n  File \"borg/archive.py\", line 602, in add\r\n  File \"src/borg/hashindex.pyx\", line 299, in borg.hashindex.ChunkIndex.__getitem__\r\nKeyError: b'\\x12;\\x99\\xfe\\x9f\\xec\\x87\\xdeD\\xf7\\n\\xb3\\x10x\\\\\\xc7\\xea\\x14v\\xf8\\xaa\\xc0h\\xbc\\x14\\xf7\\xdb<\\x99\\xc9t\\x82'\r\n\r\nPlatform: Linux brillenpinguin 5.10.10-200.fc33.x86_64 #1 SMP Sun Jan 24 19:58:54 UTC 2021 x86_64\r\nLinux: Fedora 33 Thirty Three\r\nBorg: 1.2.0b1  Python: CPython 3.7.9 msgpack: 1.0.0 fuse: llfuse 1.3.8 [pyfuse3,llfuse]\r\nPID: 22014  CWD: /root\r\nsys.argv: ['borg-1.2', 'create', '--stats', '--show-rc', '-C', 'lz4', '-c', '900', '--lock-wait', '7200', '-v', '-p', 'archlinux:/home/borgtest/archiv::brillenpinguin.full.20210131_1612093028', '/', '--exclude', '/proc', '--exclude', '/sys', '--exclude', '/dev', '--exclude', '/run', '--exclude', '/tmp', '--exclude', '/var/tmp', '--exclude', '/var/lib/libvirt', '--exclude', '/var/www/html/ftp', '--exclude', '/backup', '--exclude', '/media', '--exclude', '/zfs_usbdisk2-88411', '--exclude', '/backup-z1e721b5']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5603", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5603/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5603/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5603/events", "html_url": "https://github.com/borgbackup/borg/issues/5603", "id": 776363939, "node_id": "MDU6SXNzdWU3NzYzNjM5Mzk=", "number": 5603, "title": "Specifying the same path twice breaks hardlink during extraction", "user": {"login": "unilynx", "id": 2772353, "node_id": "MDQ6VXNlcjI3NzIzNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2772353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unilynx", "html_url": "https://github.com/unilynx", "followers_url": "https://api.github.com/users/unilynx/followers", "following_url": "https://api.github.com/users/unilynx/following{/other_user}", "gists_url": "https://api.github.com/users/unilynx/gists{/gist_id}", "starred_url": "https://api.github.com/users/unilynx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unilynx/subscriptions", "organizations_url": "https://api.github.com/users/unilynx/orgs", "repos_url": "https://api.github.com/users/unilynx/repos", "events_url": "https://api.github.com/users/unilynx/events{/privacy}", "received_events_url": "https://api.github.com/users/unilynx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/74", "html_url": "https://github.com/borgbackup/borg/milestone/74", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/74/labels", "id": 6181836, "node_id": "MDk6TWlsZXN0b25lNjE4MTgzNg==", "number": 74, "title": "hydrogen-b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2020-12-04T18:15:31Z", "updated_at": "2021-02-05T23:02:49Z", "due_on": null, "closed_at": "2021-02-05T23:02:49Z"}, "comments": 4, "created_at": "2020-12-30T09:40:06Z", "updated_at": "2021-01-11T15:51:52Z", "closed_at": "2021-01-11T15:51:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you accidentally specify a path to be backed up twice and this path contain hardlinks, you cannot succesfully extract these files\r\n\r\nEg:\r\n```\r\nmkdir /tmp/borgtest /tmp/borgrepo /tmp/borgtest/a /tmp/borgtest/b /tmp/extractlocation\r\nborg init -e none /tmp/borgrepo\r\necho \"Hi Everybody\" > /tmp/borgtest/a/hardlink\r\nln /tmp/borgtest/a/hardlink /tmp/borgtest/b/hardlink\r\n\r\nborg create /tmp/borgrepo::testarchive /tmp/borgtest/ /tmp/borgtest/\r\nborg list /tmp/borgrepo::testarchive\r\n\r\ncd /tmp/extractlocation\r\nborg extract /tmp/borgrepo::testarchive\r\n```\r\n\r\nreturns\r\n\r\n```\r\ntmp/borgtest/a/hardlink: link: [Errno 2] No such file or directory: '/private/tmp/extractlocation/tmp/borgtest/a/hardlink' -> '/private/tmp/extractlocation/tmp/borgtest/a/hardlink'\r\ntmp/borgtest/b/hardlink: link: [Errno 2] No such file or directory: '/private/tmp/extractlocation/tmp/borgtest/a/hardlink' -> '/private/tmp/extractlocation/tmp/borgtest/b/hardlink'\r\n```\r\n\r\nand both the hardlink and the file it was pointing to will be gone\r\n\r\nWhen I list the archive I can see the file and the hardlink are both there\r\n\r\n```\r\nborg list /tmp/borgrepo::testarchive\r\n\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:21 tmp/borgtest\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:24 tmp/borgtest/a\r\n-rw-r--r-- arnold wheel        13 Wed, 2020-12-30 10:27:45 tmp/borgtest/a/hardlink\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:28 tmp/borgtest/b\r\nhrw-r--r-- arnold wheel         0 Wed, 2020-12-30 10:27:45 tmp/borgtest/b/hardlink link to tmp/borgtest/a/hardlink\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:21 tmp/borgtest\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:24 tmp/borgtest/a\r\nhrw-r--r-- arnold wheel         0 Wed, 2020-12-30 10:27:45 tmp/borgtest/a/hardlink link to tmp/borgtest/a/hardlink\r\ndrwxr-xr-x arnold wheel         0 Wed, 2020-12-30 10:27:28 tmp/borgtest/b\r\nhrw-r--r-- arnold wheel         0 Wed, 2020-12-30 10:27:45 tmp/borgtest/b/hardlink link to tmp/borgtest/a/hardlink\r\n```\r\n\r\nSo I assume I could probably still rescue the file somehow if i wanted, and that the file is actually written to disk during restore and then removed.\r\n\r\nNow of course, one shouldn't do this in the first place - but shouldn't borg have realised it's creating a hardlink to itself (.. a/hardlink to ../a/hardlink) and ignore/bail out on that point ? Or ignore/fail duplicate pathnames on the command line?\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5568", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5568/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5568/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5568/events", "html_url": "https://github.com/borgbackup/borg/issues/5568", "id": 767573835, "node_id": "MDU6SXNzdWU3Njc1NzM4MzU=", "number": 5568, "title": "memory leak in borg export-tar with remote (ssh:) repo", "user": {"login": "Sephtex", "id": 25793199, "node_id": "MDQ6VXNlcjI1NzkzMTk5", "avatar_url": "https://avatars.githubusercontent.com/u/25793199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sephtex", "html_url": "https://github.com/Sephtex", "followers_url": "https://api.github.com/users/Sephtex/followers", "following_url": "https://api.github.com/users/Sephtex/following{/other_user}", "gists_url": "https://api.github.com/users/Sephtex/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sephtex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sephtex/subscriptions", "organizations_url": "https://api.github.com/users/Sephtex/orgs", "repos_url": "https://api.github.com/users/Sephtex/repos", "events_url": "https://api.github.com/users/Sephtex/events{/privacy}", "received_events_url": "https://api.github.com/users/Sephtex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/72", "html_url": "https://github.com/borgbackup/borg/milestone/72", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/72/labels", "id": 5855664, "node_id": "MDk6TWlsZXN0b25lNTg1NTY2NA==", "number": 72, "title": "1.1.15", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2020-09-08T16:32:31Z", "updated_at": "2021-01-03T16:15:08Z", "due_on": "2020-12-24T08:00:00Z", "closed_at": "2020-12-24T23:37:22Z"}, "comments": 16, "created_at": "2020-12-15T13:07:32Z", "updated_at": "2020-12-18T10:11:08Z", "closed_at": "2020-12-18T10:11:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Archive size: 400-500G (20~30 archive dates, expected restore size of ~90% of the total archive size)\r\n\r\nAfter restoring around 60-70G, RAM usage was going up exponentially (very fast: few minutes?), going from 100-200mb to a few gigs (10-16G) till killed by OOM while the system became unstable as also other things where killed by OOM (when no RAM or SWAP was free anymore).\r\n\r\nWhen RAM went up, it seemed that nothing, or hardly anything was saved to the disk. I had the feeling that nothing was written to disk but the data was kept in memory. (but this last can be a wrong assumption, and might point to a memory leak or a recursion,..)\r\n\r\nexample vars:\r\n```\r\nbackfrom=user@192.168.2.123\r\npath=/mount/backups/borgarchivename\r\narchive_backup_date=2020-05-01\r\nrestore_path=/mount/restored\r\n```\r\n\r\ncommand used with using the internal ssh of borg:\r\n```\r\nborg export-tar \"${backfrom}:${path}::${archive_backup_date}\" - | tar -C $restore_path -x\r\n```\r\n\r\nBut using borg over ssh resolved that issue, and only ~200mb was used on the system that had the backup (where we connect to):\r\n```\r\nssh ${backfrom} \"borg export-tar --tar-filter='gzip -2' \\\"${path}::${archive_backup_date}\\\" -\" | tar -C $restore_path -xz\r\n```\r\n\r\nThe filesystem on source and target is ZFS.\r\nNetwork transfer was at least 100Mbit, could have been 1Gbit. (transfer speed was for site ~10mb/s, maybe it was 2-3 times faster, but can't remember)\r\n\r\nChecked and tested with 1.1.13.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5439", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5439/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5439/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5439/events", "html_url": "https://github.com/borgbackup/borg/issues/5439", "id": 730729825, "node_id": "MDU6SXNzdWU3MzA3Mjk4MjU=", "number": 5439, "title": "Race condition with get_cache_dir()", "user": {"login": "sophie-h", "id": 3466497, "node_id": "MDQ6VXNlcjM0NjY0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3466497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sophie-h", "html_url": "https://github.com/sophie-h", "followers_url": "https://api.github.com/users/sophie-h/followers", "following_url": "https://api.github.com/users/sophie-h/following{/other_user}", "gists_url": "https://api.github.com/users/sophie-h/gists{/gist_id}", "starred_url": "https://api.github.com/users/sophie-h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sophie-h/subscriptions", "organizations_url": "https://api.github.com/users/sophie-h/orgs", "repos_url": "https://api.github.com/users/sophie-h/repos", "events_url": "https://api.github.com/users/sophie-h/events{/privacy}", "received_events_url": "https://api.github.com/users/sophie-h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811711, "node_id": "MDU6TGFiZWwyMTA4MTE3MTE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/72", "html_url": "https://github.com/borgbackup/borg/milestone/72", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/72/labels", "id": 5855664, "node_id": "MDk6TWlsZXN0b25lNTg1NTY2NA==", "number": 72, "title": "1.1.15", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2020-09-08T16:32:31Z", "updated_at": "2021-01-03T16:15:08Z", "due_on": "2020-12-24T08:00:00Z", "closed_at": "2020-12-24T23:37:22Z"}, "comments": 7, "created_at": "2020-10-27T19:02:04Z", "updated_at": "2020-11-07T16:49:21Z", "closed_at": "2020-11-07T16:48:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My integration tests for borg bindings fail from time to time because there is a race condition here\r\n\r\n```py\r\ndef get_cache_dir():\r\n\u2026\r\n    # Create path if it doesn't exist yet\r\n    if not os.path.exists(cache_dir):\r\n        os.makedirs(cache_dir)\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5439/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5419", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5419/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5419/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5419/events", "html_url": "https://github.com/borgbackup/borg/issues/5419", "id": 720944833, "node_id": "MDU6SXNzdWU3MjA5NDQ4MzM=", "number": 5419, "title": "cygwin issue with bundled msgpack in borg 1.1.x", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "fadedreamz", "id": 570877, "node_id": "MDQ6VXNlcjU3MDg3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/570877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fadedreamz", "html_url": "https://github.com/fadedreamz", "followers_url": "https://api.github.com/users/fadedreamz/followers", "following_url": "https://api.github.com/users/fadedreamz/following{/other_user}", "gists_url": "https://api.github.com/users/fadedreamz/gists{/gist_id}", "starred_url": "https://api.github.com/users/fadedreamz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fadedreamz/subscriptions", "organizations_url": "https://api.github.com/users/fadedreamz/orgs", "repos_url": "https://api.github.com/users/fadedreamz/repos", "events_url": "https://api.github.com/users/fadedreamz/events{/privacy}", "received_events_url": "https://api.github.com/users/fadedreamz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fadedreamz", "id": 570877, "node_id": "MDQ6VXNlcjU3MDg3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/570877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fadedreamz", "html_url": "https://github.com/fadedreamz", "followers_url": "https://api.github.com/users/fadedreamz/followers", "following_url": "https://api.github.com/users/fadedreamz/following{/other_user}", "gists_url": "https://api.github.com/users/fadedreamz/gists{/gist_id}", "starred_url": "https://api.github.com/users/fadedreamz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fadedreamz/subscriptions", "organizations_url": "https://api.github.com/users/fadedreamz/orgs", "repos_url": "https://api.github.com/users/fadedreamz/repos", "events_url": "https://api.github.com/users/fadedreamz/events{/privacy}", "received_events_url": "https://api.github.com/users/fadedreamz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2020-10-13T22:47:41Z", "updated_at": "2021-01-22T13:59:07Z", "closed_at": "2021-01-21T19:25:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "current borg 1.1.x:\r\n\r\nthe usual developer setup with virtualenv, requirements.d/development.txt and finally `pip install -e .` does not work on cygwin.\r\n\r\nit breaks when trying to compile the bundled msgpack due to not finding `pack.h`, which is in same directory as the file including it.\r\n\r\nadding `.` to include path does not help either.\r\n\r\nmaybe somebody actually using borg on cygwin could debug / fix this. :-)\r\n\r\nBounty: https://www.bountysource.com/issues/93406061-cygwin-issue-with-bundled-msgpack-in-borg-1-1-x", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5419/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5415", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5415/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5415/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5415/events", "html_url": "https://github.com/borgbackup/borg/issues/5415", "id": 720407468, "node_id": "MDU6SXNzdWU3MjA0MDc0Njg=", "number": 5415, "title": "stats gives a stoping error", "user": {"login": "EthraZa", "id": 1180641, "node_id": "MDQ6VXNlcjExODA2NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1180641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EthraZa", "html_url": "https://github.com/EthraZa", "followers_url": "https://api.github.com/users/EthraZa/followers", "following_url": "https://api.github.com/users/EthraZa/following{/other_user}", "gists_url": "https://api.github.com/users/EthraZa/gists{/gist_id}", "starred_url": "https://api.github.com/users/EthraZa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EthraZa/subscriptions", "organizations_url": "https://api.github.com/users/EthraZa/orgs", "repos_url": "https://api.github.com/users/EthraZa/repos", "events_url": "https://api.github.com/users/EthraZa/events{/privacy}", "received_events_url": "https://api.github.com/users/EthraZa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/72", "html_url": "https://github.com/borgbackup/borg/milestone/72", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/72/labels", "id": 5855664, "node_id": "MDk6TWlsZXN0b25lNTg1NTY2NA==", "number": 72, "title": "1.1.15", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2020-09-08T16:32:31Z", "updated_at": "2021-01-03T16:15:08Z", "due_on": "2020-12-24T08:00:00Z", "closed_at": "2020-12-24T23:37:22Z"}, "comments": 6, "created_at": "2020-10-13T15:17:10Z", "updated_at": "2020-11-03T14:49:14Z", "closed_at": "2020-11-03T14:49:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "`borg create: error: argument -n/--dry-run: not allowed with argument -s/--stats`\r\n\r\nIt could be a warning, but an error is a bit of overreact, I guess.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5415/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5325", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5325/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5325/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5325/events", "html_url": "https://github.com/borgbackup/borg/issues/5325", "id": 694291395, "node_id": "MDU6SXNzdWU2OTQyOTEzOTU=", "number": 5325, "title": "Aborting check --repair in recover_segment() may leave segment partially recovered", "user": {"login": "elho", "id": 4203035, "node_id": "MDQ6VXNlcjQyMDMwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4203035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elho", "html_url": "https://github.com/elho", "followers_url": "https://api.github.com/users/elho/followers", "following_url": "https://api.github.com/users/elho/following{/other_user}", "gists_url": "https://api.github.com/users/elho/gists{/gist_id}", "starred_url": "https://api.github.com/users/elho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elho/subscriptions", "organizations_url": "https://api.github.com/users/elho/orgs", "repos_url": "https://api.github.com/users/elho/repos", "events_url": "https://api.github.com/users/elho/events{/privacy}", "received_events_url": "https://api.github.com/users/elho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/69", "html_url": "https://github.com/borgbackup/borg/milestone/69", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/69/labels", "id": 5280913, "node_id": "MDk6TWlsZXN0b25lNTI4MDkxMw==", "number": 69, "title": "1.1.14", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-04-06T16:39:38Z", "updated_at": "2020-10-06T22:21:01Z", "due_on": null, "closed_at": "2020-10-06T22:21:01Z"}, "comments": 3, "created_at": "2020-09-06T08:26:57Z", "updated_at": "2020-09-08T19:28:05Z", "closed_at": "2020-09-08T19:28:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have not tested this, so may be missing something, but looking at the code:\r\n\r\n[`recover_segment`](https://github.com/borgbackup/borg/blob/85e6c0afd82f52182c56bfcc0b795aef33adc037/src/borg/repository.py#L1485) does rename a segment adding the [`.beforerecover`](https://github.com/borgbackup/borg/blob/85e6c0afd82f52182c56bfcc0b795aef33adc037/src/borg/repository.py#L1489) extension and then creates a new file with the original name, [**slowly**](https://github.com/borgbackup/borg/issues/4243#issuecomment-451702272) iterates over the renamed original segment, copying any parts with correct CRC over.\r\n\r\nThis code is the only occurrence of the string `beforerecover` within the source, so I conclude, that such a renamed original segment is never considered for repair again.\r\n\r\nThus, when a long running `borg check --repair` is interrupted for some reason and that interruption happens within above process, the original (renamed to `.beforerecover`) segment as well as the new segment, which however only has parts of the original data recovered yet, are left behind and a new run of `borg check --repair` would check than new segment only and skip on to the next, if its fine in itself (or if not (or is the new partial one always self-consistent?), maybe even overwrite the original by again renaming the partial new one to `.beforerecover`?).\r\n\r\nEither way, with no new errors showing up, the user will assume the `borg check --repair` to have resumed just fine, when it eventually skipped over what worst case could be a large part of a segment containing data that could have been recovered.\r\n\r\n[This comment](https://github.com/borgbackup/borg/issues/4243#issuecomment-451702455) seems to have observed that happening in practice, but seems to have went unnoticed within that question.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5325/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5325/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5273", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5273/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5273/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5273/events", "html_url": "https://github.com/borgbackup/borg/issues/5273", "id": 665781315, "node_id": "MDU6SXNzdWU2NjU3ODEzMTU=", "number": 5273, "title": "openindiana borg create --content-from-command return code", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-26T13:36:12Z", "updated_at": "2020-07-29T12:50:29Z", "closed_at": "2020-07-29T12:50:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "These tests are failing on openindiana:\r\n\r\n```\r\nself = <borg.testsuite.archiver.ArchiverTestCase testMethod=test_create_content_from_command_with_failed_command>\r\n\r\n    def test_create_content_from_command_with_failed_command(self):\r\n        self.cmd('init', '--encryption=repokey', self.repository_location)\r\n        output = self.cmd('create', '--content-from-command', self.repository_location + '::test',\r\n                          '--', 'false', '--arg-passed-to-false', exit_code=2)\r\n>       assert output.endswith(\"Command 'false' exited with status 1\\n\")\r\nE       AssertionError: assert False\r\nE        +  where False = <built-in method endswith of str object at 0xfffffd7feb435ea0>(\"Command 'false' exited with status 1\\n\")\r\nE        +    where <built-in method endswith of str object at 0xfffffd7feb435ea0> = \"Command 'false' exited with status 255\\n\".endswith\r\n\r\nsrc/borg/testsuite/archiver.py:1064: AssertionError\r\n_________________________________________________ RemoteArchiverTestCase.test_create_content_from_command_with_failed_command _________________________________________________\r\n\r\nself = <borg.testsuite.archiver.RemoteArchiverTestCase testMethod=test_create_content_from_command_with_failed_command>\r\n\r\n    def test_create_content_from_command_with_failed_command(self):\r\n        self.cmd('init', '--encryption=repokey', self.repository_location)\r\n        output = self.cmd('create', '--content-from-command', self.repository_location + '::test',\r\n                          '--', 'false', '--arg-passed-to-false', exit_code=2)\r\n>       assert output.endswith(\"Command 'false' exited with status 1\\n\")\r\nE       AssertionError: assert False\r\nE        +  where False = <built-in method endswith of str object at 0xfffffd7feac83d40>(\"Command 'false' exited with status 1\\n\")\r\nE        +    where <built-in method endswith of str object at 0xfffffd7feac83d40> = \"Command 'false' exited with status 255\\n\".endswith\r\n\r\nsrc/borg/testsuite/archiver.py:1064: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5271", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5271/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5271/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5271/events", "html_url": "https://github.com/borgbackup/borg/issues/5271", "id": 665743431, "node_id": "MDU6SXNzdWU2NjU3NDM0MzE=", "number": 5271, "title": "locking issues on openindiana", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/68", "html_url": "https://github.com/borgbackup/borg/milestone/68", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/68/labels", "id": 5179619, "node_id": "MDk6TWlsZXN0b25lNTE3OTYxOQ==", "number": 68, "title": "hydrogen-alpha9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2020-03-08T16:56:36Z", "updated_at": "2020-10-05T11:51:44Z", "due_on": null, "closed_at": "2020-10-05T11:51:44Z"}, "comments": 4, "created_at": "2020-07-26T09:19:58Z", "updated_at": "2020-07-26T17:38:42Z", "closed_at": "2020-07-26T16:17:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n    openindiana64:                     return self.count\r\n    openindiana64:     \r\n    openindiana64:         def print_locked(msg):\r\n    openindiana64:             with print_lock:\r\n    openindiana64:                 print(msg)\r\n    openindiana64:     \r\n    openindiana64:         def acquire_release_loop(id, timeout, thread_id, lock_owner_counter, exception_counter, print_lock, last_thread=None):\r\n    openindiana64:             print_locked(\"Thread %2d: Starting acquire_release_loop(id=%s, timeout=%d); lockpath=%s\" % (thread_id, id, timeout, lockpath))\r\n    openindiana64:             timer = TimeoutTimer(timeout, -1).start()\r\n    openindiana64:             cycle = 0\r\n    openindiana64:     \r\n    openindiana64:             while not timer.timed_out():\r\n    openindiana64:                 cycle += 1\r\n    openindiana64:                 try:\r\n    openindiana64:                     with ExclusiveLock(lockpath, id=id, timeout=timeout/20, sleep=-1):  # This timeout is only for not exceeding the given timeout by more than 5%. With sleep<0 it's constantly polling anyway.\r\n    openindiana64:                         lock_owner_count = lock_owner_counter.incr()\r\n    openindiana64:                         print_locked(\"Thread %2d: Acquired the lock. It's my %d. loop cycle. I am the %d. who has the lock concurrently.\" % (thread_id, cycle, lock_owner_count))\r\n    openindiana64:                         time.sleep(0.005)\r\n    openindiana64:                         lock_owner_count = lock_owner_counter.decr()\r\n    openindiana64:                         print_locked(\"Thread %2d: Releasing the lock, finishing my %d. loop cycle. Currently, %d colleagues still have the lock.\" % (thread_id, cycle, lock_owner_count))\r\n    openindiana64:                 except LockTimeout:\r\n    openindiana64:                     print_locked(\"Thread %2d: Got LockTimeout, finishing my %d. loop cycle.\" % (thread_id, cycle))\r\n    openindiana64:                 except:\r\n    openindiana64:                     exception_count = exception_counter.incr()\r\n    openindiana64:                     e = format_exc()\r\n    openindiana64:                     print_locked(\"Thread %2d: Exception thrown, finishing my %d. loop cycle. It's the %d. exception seen until now: %s\" % (thread_id, cycle, exception_count, e))\r\n    openindiana64:     \r\n    openindiana64:             print_locked(\"Thread %2d: Loop timed out--terminating after %d loop cycles.\" % (thread_id, cycle))\r\n    openindiana64:             if last_thread is not None:  # joining its predecessor, if any\r\n    openindiana64:                 last_thread.join()\r\n    openindiana64:     \r\n    openindiana64:         print('')\r\n    openindiana64:         lock_owner_counter = SynchronizedCounter()\r\n    openindiana64:         exception_counter = SynchronizedCounter()\r\n    openindiana64:         print_lock = ThreadingLock()\r\n    openindiana64:         thread = None\r\n    openindiana64:         for thread_id in range(RACE_TEST_NUM_THREADS):\r\n    openindiana64:             thread = Thread(target=acquire_release_loop, args=(('foo', thread_id, 0), RACE_TEST_DURATION, thread_id, lock_owner_counter, exception_counter, print_lock, thread))\r\n    openindiana64:             thread.start()\r\n    openindiana64:         thread.join()  # joining the last thread\r\n    openindiana64:     \r\n    openindiana64:         assert lock_owner_counter.maxvalue() > 0, 'Never gained the lock? Something went wrong here...'\r\n    openindiana64:         assert lock_owner_counter.maxvalue() <= 1, \"Maximal number of concurrent lock holders was %d. So exclusivity is broken.\" % (lock_owner_counter.maxvalue())\r\n    openindiana64: >       assert exception_counter.value() == 0, \"ExclusiveLock threw %d exceptions due to unclean concurrency handling.\" % (exception_counter.value())\r\n    openindiana64: E       AssertionError: ExclusiveLock threw 3 exceptions due to unclean concurrency handling.\r\n    openindiana64: E       assert 3 == 0\r\n    openindiana64: E         +3\r\n    openindiana64: E         -0\r\n    openindiana64: .tox/py35/lib/python3.5/site-packages/borg/testsuite/locking.py\r\n    openindiana64: :167: AssertionError\r\n    openindiana64: ----------------------------- Captured stdout call -----------------------------\r\n    openindiana64: \r\n    openindiana64: Thread  0: Starting acquire_release_loop(id=('foo', 0, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  1: Starting acquire_release_loop(id=('foo', 1, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  2: Starting acquire_release_loop(id=('foo', 2, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  0: Acquired the lock. It's my 1. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread  3: Starting acquire_release_loop(id=('foo', 3, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  4: Starting acquire_release_loop(id=('foo', 4, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  5: Starting acquire_release_loop(id=('foo', 5, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  6: Starting acquire_release_loop(id=('foo', 6, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  7: Starting acquire_release_loop(id=('foo', 7, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  8: Starting acquire_release_loop(id=('foo', 8, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  9: Starting acquire_release_loop(id=('foo', 9, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 10: Starting acquire_release_loop(id=('foo', 10, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 11: Starting acquire_release_loop(id=('foo', 11, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 12: Starting acquire_release_loop(id=('foo', 12, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 13: Starting acquire_release_loop(id=('foo', 13, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 14: Starting acquire_release_loop(id=('foo', 14, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 15: Starting acquire_release_loop(id=('foo', 15, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  0: Releasing the lock, finishing my 1. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 16: Starting acquire_release_loop(id=('foo', 16, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 17: Starting acquire_release_loop(id=('foo', 17, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 18: Starting acquire_release_loop(id=('foo', 18, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 19: Starting acquire_release_loop(id=('foo', 19, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 20: Starting acquire_release_loop(id=('foo', 20, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 21: Starting acquire_release_loop(id=('foo', 21, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 22: Starting acquire_release_loop(id=('foo', 22, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 23: Starting acquire_release_loop(id=('foo', 23, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 24: Starting acquire_release_loop(id=('foo', 24, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 25: Starting acquire_release_loop(id=('foo', 25, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 26: Starting acquire_release_loop(id=('foo', 26, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 27: Starting acquire_release_loop(id=('foo', 27, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 28: Starting acquire_release_loop(id=('foo', 28, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 29: Starting acquire_release_loop(id=('foo', 29, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 30: Starting acquire_release_loop(id=('foo', 30, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 18: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 32: Starting acquire_release_loop(id=('foo', 32, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 33: Starting acquire_release_loop(id=('foo', 33, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 34: Starting acquire_release_loop(id=('foo', 34, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 35: Starting acquire_release_loop(id=('foo', 35, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 36: Starting acquire_release_loop(id=('foo', 36, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 37: Starting acquire_release_loop(id=('foo', 37, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 38: Starting acquire_release_loop(id=('foo', 38, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 10: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 39: Starting acquire_release_loop(id=('foo', 39, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  0: Acquired the lock. It's my 2. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread  1: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  4: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 29: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  6: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  8: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  7: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  2: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 13: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 15: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 31: Starting acquire_release_loop(id=('foo', 31, 0), timeout=0); lockpath=/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 21: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 22: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 14: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 20: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 23: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 27: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 32: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 26: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 30: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 18: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 28: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  5: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 17: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  0: Releasing the lock, finishing my 2. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 14: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 10: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 33: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 36: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 34: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  1: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  4: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 29: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  8: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  6: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  7: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 13: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 31: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 20: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 26: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 32: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 23: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 15: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 22: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 21: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 35: Acquired the lock. It's my 2. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 18: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 28: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 17: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 39: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread  5: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 34: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 36: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 29: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  7: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 13: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  1: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  8: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  6: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 20: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 32: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 26: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 35: Releasing the lock, finishing my 2. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 21: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  5: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 29: Acquired the lock. It's my 4. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 38: Got LockTimeout, finishing my 1. loop cycle.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 34: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 28: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 29: Releasing the lock, finishing my 4. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 17: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 32: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 39: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 26: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  1: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 20: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 21: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread  5: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 34: Acquired the lock. It's my 4. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 17: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 28: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 39: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 34: Releasing the lock, finishing my 4. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 25: Acquired the lock. It's my 7. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 30: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 24: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread  2: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread  2: Loop timed out--terminating after 2 loop cycles.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread  0: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  0: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread  9: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread  9: Loop timed out--terminating after 6 loop cycles.\r\n    openindiana64: Thread 31: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 25: Releasing the lock, finishing my 7. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 11: Got LockTimeout, finishing my 7. loop cycle.\r\n    openindiana64: Thread 11: Loop timed out--terminating after 7 loop cycles.\r\n    openindiana64: Thread 15: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 24: Acquired the lock. It's my 7. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 23: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 33: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 18: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  6: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  6: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 24: Releasing the lock, finishing my 7. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 39: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 16: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 16: Loop timed out--terminating after 6 loop cycles.\r\n    openindiana64: Thread 24: Loop timed out--terminating after 7 loop cycles.\r\n    openindiana64: Thread 39: Acquired the lock. It's my 5. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 19: Got LockTimeout, finishing my 7. loop cycle.\r\n    openindiana64: Thread  8: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  8: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 29: Exception thrown, finishing my 4. loop cycle. It's the 1. exception seen until now: Traceback (most recent call last):\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/testsuite/locking.py\", line 143, in acquire_release_loop\r\n    openindiana64:     print_locked(\"Thread %2d: Releasing the lock, finishing my %d. loop cycle. Currently, %d colleagues still have the lock.\r\n    openindiana64: \" % (thread_id, cycle, lock_owner_count))\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 118, in __exit__\r\n    openindiana64:     self.release()\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 176, in release\r\n    openindiana64:     raise err\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 172, in release\r\n    openindiana64:     os.rmdir(self.path)\r\n    openindiana64: FileExistsError: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: \r\n    openindiana64: Thread 36: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  4: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  4: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread 14: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 14: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread 21: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 12: Got LockTimeout, finishing my 7. loop cycle.\r\n    openindiana64: Thread 12: Loop timed out--terminating after 7 loop cycles.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 39: Releasing the lock, finishing my 5. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread  7: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread  7: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 39: Exception thrown, finishing my 5. loop cycle. It's the 2. exception seen until now: Traceback (most recent call last):\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/testsuite/locking.py\", line 143, in acquire_release_loop\r\n    openindiana64:     print_locked(\"Thread %2d: Releasing the lock, finishing my %d. loop cycle. Currently, %d colleagues still have the lock.\" % (thread_id, cycle, lock_owner_count))\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 118, in __exit__\r\n    openindiana64:     self.release()\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 176, in release\r\n    openindiana64:     raise err\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 172, in release\r\n    openindiana64:     os.rmdir(self.path)\r\n    openindiana64: FileExistsError: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: \r\n    openindiana64: Thread 33: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 23: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 23: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 10: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread  3: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 10: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread 39: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 39: Loop timed out--terminating after 6 loop cycles.\r\n    openindiana64: Thread 26: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 26: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 33: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 33: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 21: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 28: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 28: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 36: Acquired the lock. It's my 4. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 19: Loop timed out--terminating after 7 loop cycles.\r\n    openindiana64: Thread 29: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 29: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread  3: Loop timed out--terminating after 6 loop cycles.\r\n    openindiana64: Thread 37: Got LockTimeout, finishing my 6. loop cycle.\r\n    openindiana64: Thread 37: Loop timed out--terminating after 6 loop cycles.\r\n    openindiana64: Thread 34: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 34: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 15: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 15: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 38: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 38: Loop timed out--terminating after 2 loop cycles.\r\n    openindiana64: Thread 13: Got LockTimeout, finishing my 4. loop cycle.\r\n    openindiana64: Thread 13: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 18: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 30: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 30: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread 18: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 31: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 27: Got LockTimeout, finishing my 2. loop cycle.\r\n    openindiana64: Thread 27: Loop timed out--terminating after 2 loop cycles.\r\n    openindiana64: Thread  1: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread  1: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 22: Got LockTimeout, finishing my 3. loop cycle.\r\n    openindiana64: Thread 22: Loop timed out--terminating after 3 loop cycles.\r\n    openindiana64: Thread 25: Got LockTimeout, finishing my 8. loop cycle.\r\n    openindiana64: Thread 25: Loop timed out--terminating after 8 loop cycles.\r\n    openindiana64: Thread  5: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread  5: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 36: Releasing the lock, finishing my 4. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 32: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 32: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 31: Acquired the lock. It's my 4. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 36: Exception thrown, finishing my 4. loop cycle. It's the 3. exception seen until now: Traceback (most recent call last):\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/testsuite/locking.py\", line 143, in acquire_release_loop\r\n    openindiana64:     print_locked(\"Thread %2d: Releasing the lock, finishing my %d. loop cycle. Currently, %d colleagues still have the lock.\" % (thread_id, cycle, lock_owner_count))\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 118, in __exit__\r\n    openindiana64:     self.release()\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 176, in release\r\n    openindiana64:     raise err\r\n    openindiana64:   File \"/export/home/vagrant/borg/borg/.tox/py35/lib/python3.5/site-packages/borg/locking.py\", line 172, in release\r\n    openindiana64:     os.rmdir(self.path)\r\n    openindiana64: FileExistsError: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: \r\n    openindiana64: Thread 36: Loop timed out--terminating after 4 loop cycles.\r\n    openindiana64: Thread 20: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 20: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 17: Got LockTimeout, finishing my 5. loop cycle.\r\n    openindiana64: Thread 17: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: Thread 35: Got LockTimeout, finishing my 7. loop cycle.\r\n    openindiana64: Thread 35: Loop timed out--terminating after 7 loop cycles.\r\n    openindiana64: Thread 31: Releasing the lock, finishing my 4. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 31: Acquired the lock. It's my 5. loop cycle. I am the 1. who has the lock concurrently.\r\n    openindiana64: Thread 31: Releasing the lock, finishing my 5. loop cycle. Currently, 0 colleagues still have the lock.\r\n    openindiana64: Thread 31: Loop timed out--terminating after 5 loop cycles.\r\n    openindiana64: ----------------------------- Captured stderr call -----------------------------\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ------------------------------ Captured log call -------------------------------\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: ERROR    borg.locking:logger.py:203 Failed to remove lock dir: [Errno 17] File exists: '/tmp/pytest-of-vagrant/pytest-0/popen-gw3/test_race_condition0/lock'\r\n    openindiana64: _ RemoteArchiverTestCase.test_create_content_from_command_with_failed_command __\r\n    openindiana64: [gw2] sunos5 -- Python 3.5.7 /export/home/vagrant/borg/borg/.tox/py35/bin/python\r\n    openindiana64: self = <borg.testsuite.archiver.RemoteArchiverTestCase testMethod=test_create_content_from_command_with_failed_command>\r\n    openindiana64:     def test_create_content_from_command_with_failed_command(self):\r\n    openindiana64:         self.cmd('init', '--encryption=repokey', self.repository_location)\r\n    openindiana64:         output = self.cmd('create', '--content-from-command', self.repository_location + '::test',\r\n    openindiana64:                           '--', 'false', '--arg-passed-to-false', exit_code=2)\r\n    openindiana64: >       assert output.endswith(\"Command 'false' exited with status 1\\n\")\r\n    openindiana64: E       AssertionError: assert False\r\n    openindiana64: E        +  where False = <built-in method endswith of str object at 0xfffffd7feaede3f8>(\"Command 'false' exited with status 1\\n\")\r\n    openindiana64: E        +    where <built-in method endswith of str object at 0xfffffd7feaede3f8> = \"Command 'false' exited with status 255\\n\".endswith\r\n    openindiana64: .tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py\r\n    openindiana64: :1064: AssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5216", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5216/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5216/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5216/events", "html_url": "https://github.com/borgbackup/borg/issues/5216", "id": 632727789, "node_id": "MDU6SXNzdWU2MzI3Mjc3ODk=", "number": 5216, "title": "Setting BORG_CACHE_DIR to an empty string crashes borg", "user": {"login": "lelutin", "id": 108728, "node_id": "MDQ6VXNlcjEwODcyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/108728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lelutin", "html_url": "https://github.com/lelutin", "followers_url": "https://api.github.com/users/lelutin/followers", "following_url": "https://api.github.com/users/lelutin/following{/other_user}", "gists_url": "https://api.github.com/users/lelutin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lelutin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lelutin/subscriptions", "organizations_url": "https://api.github.com/users/lelutin/orgs", "repos_url": "https://api.github.com/users/lelutin/repos", "events_url": "https://api.github.com/users/lelutin/events{/privacy}", "received_events_url": "https://api.github.com/users/lelutin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811712, "node_id": "MDU6TGFiZWwyMTA4MTE3MTI=", "url": "https://api.github.com/repos/borgbackup/borg/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/72", "html_url": "https://github.com/borgbackup/borg/milestone/72", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/72/labels", "id": 5855664, "node_id": "MDk6TWlsZXN0b25lNTg1NTY2NA==", "number": 72, "title": "1.1.15", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2020-09-08T16:32:31Z", "updated_at": "2021-01-03T16:15:08Z", "due_on": "2020-12-24T08:00:00Z", "closed_at": "2020-12-24T23:37:22Z"}, "comments": 9, "created_at": "2020-06-06T20:59:04Z", "updated_at": "2020-11-22T14:07:14Z", "closed_at": "2020-11-22T14:07:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI've just hit something strange (from the user's point of view) when adding functionality for a helper-script to using borg within backupninja. The feature I was adding was the possibility of displacing the cache dir. For this I set the BORG_CACHE_DIR env var to what users set in the configuration file.\r\n\r\nNow the issue that happened was that if somehow the variable BORG_CACHE_DIR ends up empty (and exported as such to the environment), borg uses this empty string as the path to the cache dir and obviously fails, which is confusing for users:\r\n\r\n~~~\r\n$ export BORG_CACHE_DIR=\r\n$ borg create ./testborg::blah somesourcedir \r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4529, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4461, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 157, in wrapper\r\n    assert_secure(repository, kwargs['manifest'], self.lock_wait)\r\n  File \"/usr/lib/python3/dist-packages/borg/cache.py\", line 205, in assert_secure\r\n    sm = SecurityManager(repository)\r\n  File \"/usr/lib/python3/dist-packages/borg/cache.py\", line 63, in __init__\r\n    self.cache_dir = cache_dir(repository)\r\n  File \"/usr/lib/python3/dist-packages/borg/cache.py\", line 226, in cache_dir\r\n    return path or os.path.join(get_cache_dir(), repository.id_str)\r\n  File \"/usr/lib/python3/dist-packages/borg/helpers.py\", line 553, in get_cache_dir\r\n    os.makedirs(cache_dir)\r\n  File \"/usr/lib/python3.8/os.py\", line 223, in makedirs\r\n    mkdir(name, mode)\r\nFileNotFoundError: [Errno 2] No such file or directory: ''\r\n\r\nPlatform: Linux meevyl 5.6.0-1-amd64 #1 SMP Debian 5.6.7-1 (2020-04-29) x86_64\r\nLinux: Unknown Linux  \r\nBorg: 1.1.11  Python: CPython 3.8.3 msgpack: 0.5.6\r\nPID: 990872  CWD: /home/gabster/dev\r\nsys.argv: ['/usr/bin/borg', 'create', './testborg::blah', 'backupninja']\r\nSSH_ORIGINAL_COMMAND: None\r\n~~~\r\n\r\nIf the env var BORG_CACHE_DIR exists, I would argue that borg should probably add a check to make sure that it is non-empty. if it is, then it should be discarded and the default cache dir placement should be used.\r\n\r\nBounty: https://www.bountysource.com/issues/91660210-setting-borg_cache_dir-to-an-empty-string-crashes-borg", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5214", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5214/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5214/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5214/events", "html_url": "https://github.com/borgbackup/borg/issues/5214", "id": 632520252, "node_id": "MDU6SXNzdWU2MzI1MjAyNTI=", "number": 5214, "title": "1.1.12 pip package fails to install on python 3.8.x", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/70", "html_url": "https://github.com/borgbackup/borg/milestone/70", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/70/labels", "id": 5513529, "node_id": "MDk6TWlsZXN0b25lNTUxMzUyOQ==", "number": 70, "title": "1.1.13", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2020-06-06T15:27:29Z", "updated_at": "2020-07-07T22:02:23Z", "due_on": "2020-06-06T07:00:00Z", "closed_at": "2020-06-06T23:02:22Z"}, "comments": 6, "created_at": "2020-06-06T15:07:28Z", "updated_at": "2020-07-07T22:02:23Z", "closed_at": "2020-07-07T22:02:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "while borg 1.1.11 works on py38, 1.1.12 does not.\r\n\r\nseems to be related to the bundled msgpack code (which did not change between 1.1.11 and 1.1.12, so maybe it is a cython code generation issue due to a different cython version):\r\n\r\n```\r\n    running build_ext\r\n    building 'borg.algorithms.msgpack._packer' extension\r\n    creating build/temp.linux-x86_64-3.8\r\n    creating build/temp.linux-x86_64-3.8/src\r\n    creating build/temp.linux-x86_64-3.8/src/borg\r\n    creating build/temp.linux-x86_64-3.8/src/borg/algorithms\r\n    creating build/temp.linux-x86_64-3.8/src/borg/algorithms/msgpack\r\n    gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -fPIC -D__LITTLE_ENDIAN__=1 -I/usr/include -I/usr/include -Isrc/borg/algorithms/zstd/lib -Isrc/borg/algorithms/zstd/lib/common -Isrc/borg/algorithms/zstd/lib/compress -Isrc/borg/algorithms/zstd/lib/decompress -Isrc/borg/algorithms/zstd/lib/dictBuilder -I/usr/include -I/home/user/w/aa/env/include -I/home/user/.pyenv/versions/3.8.3/include/python3.8 -c src/borg/algorithms/msgpack/_packer.cpp -o build/temp.linux-x86_64-3.8/src/borg/algorithms/msgpack/_packer.o\r\n    src/borg/algorithms/msgpack/_packer.cpp: In function \u2018PyCodeObject* __Pyx_CreateCodeObjectForTraceback(const char*, int, int, const char*)\u2019:\r\n    src/borg/algorithms/msgpack/_packer.cpp:332:86: error: invalid conversion from \u2018PyObject* {aka _object*}\u2019 to \u2018int\u2019 [-fpermissive]\r\n               PyCode_New(a, 0, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\r\n                                                                                          ^\r\n    src/borg/algorithms/msgpack/_packer.cpp:8310:15: note: in expansion of macro \u2018__Pyx_PyCode_New\u2019\r\n         py_code = __Pyx_PyCode_New(\r\n                   ^~~~~~~~~~~~~~~~\r\n    src/borg/algorithms/msgpack/_packer.cpp:332:86: error: invalid conversion from \u2018int\u2019 to \u2018PyObject* {aka _object*}\u2019 [-fpermissive]\r\n               PyCode_New(a, 0, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\r\n                                                                                          ^\r\n    src/borg/algorithms/msgpack/_packer.cpp:8310:15: note: in expansion of macro \u2018__Pyx_PyCode_New\u2019\r\n         py_code = __Pyx_PyCode_New(\r\n                   ^~~~~~~~~~~~~~~~\r\n    src/borg/algorithms/msgpack/_packer.cpp:332:86: error: too many arguments to function \u2018PyCodeObject* PyCode_New(int, int, int, int, int, PyObject*, PyObject*, PyObject*, PyObject*, PyObject*, PyObject*, PyObject*, PyObject*, int, PyObject*)\u2019\r\n               PyCode_New(a, 0, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\r\n                                                                                          ^\r\n    src/borg/algorithms/msgpack/_packer.cpp:8310:15: note: in expansion of macro \u2018__Pyx_PyCode_New\u2019\r\n         py_code = __Pyx_PyCode_New(\r\n                   ^~~~~~~~~~~~~~~~\r\n    In file included from /home/user/.pyenv/versions/3.8.3/include/python3.8/compile.h:5:0,\r\n                     from /home/user/.pyenv/versions/3.8.3/include/python3.8/Python.h:138,\r\n                     from src/borg/algorithms/msgpack/_packer.cpp:4:\r\n    /home/user/.pyenv/versions/3.8.3/include/python3.8/code.h:122:28: note: declared here\r\n     PyAPI_FUNC(PyCodeObject *) PyCode_New(\r\n                                ^~~~~~~~~~\r\n    error: command 'gcc' failed with exit status 1\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5214/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5211", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5211/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5211/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5211/events", "html_url": "https://github.com/borgbackup/borg/issues/5211", "id": 632074921, "node_id": "MDU6SXNzdWU2MzIwNzQ5MjE=", "number": 5211, "title": "borg.1 manpage generation regression", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/69", "html_url": "https://github.com/borgbackup/borg/milestone/69", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/69/labels", "id": 5280913, "node_id": "MDk6TWlsZXN0b25lNTI4MDkxMw==", "number": 69, "title": "1.1.14", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-04-06T16:39:38Z", "updated_at": "2020-10-06T22:21:01Z", "due_on": null, "closed_at": "2020-10-06T22:21:01Z"}, "comments": 3, "created_at": "2020-06-06T00:07:41Z", "updated_at": "2020-07-02T22:44:14Z", "closed_at": "2020-07-02T22:43:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "while working on 1.1.12 release, i found this diff being generated after running `python setup.py build_man`:\r\n\r\n```\r\ndiff --git a/docs/man/borg.1 b/docs/man/borg.1\r\nindex 2d9d3078..701d0c3c 100644\r\n--- a/docs/man/borg.1\r\n+++ b/docs/man/borg.1\r\n@@ -1,8 +1,8 @@\r\n .\\\" Man page generated from reStructuredText.\r\n .\r\n-.TH BORG 1 \"2017-02-05\" \"\" \"borg backup tool\"\r\n+.TH   \"\" \"\" \"\"\r\n .SH NAME\r\n-borg \\- deduplicating and encrypting backup tool\r\n+ \\- \r\n .\r\n .nr rst2man-indent-level 0\r\n .\r\n@@ -30,10 +30,26 @@ level margin: \\\\n[rst2man-indent\\\\n[rst2man-indent-level]]\r\n .\\\" new: \\\\n[rst2man-indent\\\\n[rst2man-indent-level]]\r\n .in \\\\n[rst2man-indent\\\\n[rst2man-indent-level]]u\r\n ..\r\n-.SH SYNOPSIS\r\n+.SH BORG\r\n+.SS deduplicating and encrypting backup tool\r\n+.INDENT 0.0\r\n+.TP\r\n+.B Author\r\n+The Borg Collective\r\n+.TP\r\n+.B Date\r\n+2017\\-02\\-05\r\n+.TP\r\n+.B Manual section\r\n+1\r\n+.TP\r\n+.B Manual group\r\n+borg backup tool\r\n+.UNINDENT\r\n+.SS SYNOPSIS\r\n .sp\r\n borg [common options] <command> [options] [arguments]\r\n-.SH DESCRIPTION\r\n+.SS DESCRIPTION\r\n .\\\" we don't include the README.rst here since we want to keep this terse.\r\n .\r\n .sp\r\n@@ -50,7 +66,7 @@ Borg stores a set of files in an \\fIarchive\\fP\\&. A \\fIrepository\\fP is a collec\r\n of \\fIarchives\\fP\\&. The format of repositories is Borg\\-specific. Borg does not\r\n distinguish archives from each other in any way other than their name,\r\n it does not matter when or where archives were created (e.g. different hosts).\r\n-.SH EXAMPLES\r\n+.SS EXAMPLES\r\n .SS A step\\-by\\-step example\r\n .INDENT 0.0\r\n .IP 1. 3\r\n@@ -185,7 +201,7 @@ reports during command execution.  You can also add the \\fB\\-v\\fP (or\r\n get other informational messages.\r\n .UNINDENT\r\n .UNINDENT\r\n-.SH NOTES\r\n+.SS NOTES\r\n .SS Positional Arguments and Options: Order matters\r\n .sp\r\n Borg only supports taking options (\\fB\\-s\\fP and \\fB\\-\\-progress\\fP in the example)\r\n@@ -465,9 +481,6 @@ in systemd.nspawn containers on some architectures (e.g. ARM).\r\n Using this does not affect data safety, but might result in a more bursty\r\n write to disk behaviour (not continuously streaming to disk).\r\n .UNINDENT\r\n-.TP\r\n-.B TMPDIR\r\n-where temporary files are stored (might need a lot of temporary space for some operations), see \\fI\\%tempfile\\fP for details\r\n .UNINDENT\r\n .TP\r\n .B Some automatic \"answerers\" (if set, they automatically answer confirmation questions):\r\n@@ -497,27 +510,47 @@ allowed). So please test your scripts interactively before making them a non\\-in\r\n .INDENT 7.0\r\n .TP\r\n .B BORG_BASE_DIR\r\n-Default to \\(aq$HOME\\(aq, \\(aq~$USER\\(aq, \\(aq~\\(aq (in that order)\\(aq.\r\n-If we refer to ~ below, we in fact mean BORG_BASE_DIR.\r\n+Defaults to \\fB$HOME\\fP or \\fB~$USER\\fP or \\fB~\\fP (in that order).\r\n+If you want to move all borg\\-specific folders to a custom path at once, all you need to do is\r\n+to modify \\fBBORG_BASE_DIR\\fP: the other paths for cache, config etc. will adapt accordingly\r\n+(assuming you didn\\(aqt set them to a different custom value).\r\n .TP\r\n .B BORG_CACHE_DIR\r\n-Default to \\(aq~/.cache/borg\\(aq. This directory contains the local cache and might need a lot\r\n+Defaults to \\fB$BORG_BASE_DIR/.cache/borg\\fP\\&. If \\fBBORG_BASE_DIR\\fP is not explicitly set while\r\n+\r\n+.nf\r\n+\\(gaXDG env var\\(ga_\r\n+.fi\r\n+ \\fBXDG_CACHE_HOME\\fP is set, then \\fB$XDG_CACHE_HOME/borg\\fP is being used instead.\r\n+This directory contains the local cache and might need a lot\r\n of space for dealing with big repositories. Make sure you\\(aqre aware of the associated\r\n security aspects of the cache location: \\fIcache_security\\fP\r\n .TP\r\n .B BORG_CONFIG_DIR\r\n-Default to \\(aq~/.config/borg\\(aq. This directory contains the whole config directories.\r\n+Defaults to \\fB$BORG_BASE_DIR/.config/borg\\fP\\&. If \\fBBORG_BASE_DIR\\fP is not explicitly set while\r\n+\r\n+.nf\r\n+\\(gaXDG env var\\(ga_\r\n+.fi\r\n+ \\fBXDG_CONFIG_HOME\\fP is set, then \\fB$XDG_CONFIG_HOME/borg\\fP is being used instead.\r\n+This directory contains all borg configuration directories, see the FAQ\r\n+for a security advisory about the data in this directory: \\fIhome_config_borg\\fP\r\n .TP\r\n .B BORG_SECURITY_DIR\r\n-Default to \\(aq~/.config/borg/security\\(aq. This directory contains information borg uses to\r\n-track its usage of NONCES (\"numbers used once\" \\- usually in encryption context) and other\r\n-security relevant data. Will move with BORG_CONFIG_DIR variable unless specified.\r\n+Defaults to \\fB$BORG_CONFIG_DIR/security\\fP\\&.\r\n+This directory contains information borg uses to track its usage of NONCES (\"numbers used\r\n+once\" \\- usually in encryption context) and other security relevant data.\r\n .TP\r\n .B BORG_KEYS_DIR\r\n-Default to \\(aq~/.config/borg/keys\\(aq. This directory contains keys for encrypted repositories.\r\n+Defaults to \\fB$BORG_CONFIG_DIR/keys\\fP\\&.\r\n+This directory contains keys for encrypted repositories.\r\n .TP\r\n .B BORG_KEY_FILE\r\n When set, use the given filename as repository key file.\r\n+.TP\r\n+.B TMPDIR\r\n+This is where temporary files are stored (might need a lot of temporary space for some\r\n+operations), see \\fI\\%tempfile\\fP for details.\r\n .UNINDENT\r\n .TP\r\n .B Building:\r\n@@ -543,10 +576,10 @@ will be linked against the system libzstd instead of a bundled implementation. (\r\n Please note:\r\n .INDENT 0.0\r\n .IP \\(bu 2\r\n-be very careful when using the \"yes\" sayers, the warnings with prompt exist for your / your data\\(aqs security/safety\r\n+Be very careful when using the \"yes\" sayers, the warnings with prompt exist for your / your data\\(aqs security/safety.\r\n .IP \\(bu 2\r\n-also be very careful when putting your passphrase into a script, make sure it has appropriate file permissions\r\n-(e.g. mode 600, root:root).\r\n+Also be very careful when putting your passphrase into a script, make sure it has appropriate file permissions (e.g.\r\n+mode 600, root:root).\r\n .UNINDENT\r\n .SS File systems\r\n .sp\r\n@@ -681,7 +714,7 @@ $TMPDIR, $TEMP, or $TMP environment variable is properly set for the sshd\r\n process.\r\n For some OSes, this can be done just by setting the correct value in the\r\n .bashrc (or equivalent login config file for other shells), however in\r\n-other cases it may be neccessary to first enable \\fBPermitUserEnvironment yes\\fP\r\n+other cases it may be necessary to first enable \\fBPermitUserEnvironment yes\\fP\r\n in your \\fBsshd_config\\fP file, then add \\fBenvironment=\"TMPDIR=/my/big/tmpdir\"\\fP\r\n at the start of the public key to be used in the \\fBauthorized_hosts\\fP file.\r\n .TP\r\n@@ -847,7 +880,7 @@ This includes resource forks on Mac OS X.\r\n .IP [7] 5\r\n aka \\fIBSD flags\\fP\\&. The Linux set of flags [1] is portable across platforms.\r\n The BSDs define additional flags.\r\n-.SH SEE ALSO\r\n+.SS SEE ALSO\r\n .sp\r\n \\fIborg\\-common(1)\\fP for common command line options\r\n .sp\r\n@@ -870,7 +903,12 @@ GitHub \\fI\\%https://github.com/borgbackup/borg\\fP\r\n .IP \\(bu 2\r\n Security contact \\fI\\%https://borgbackup.readthedocs.io/en/latest/support.html#security\\-contact\\fP\r\n .UNINDENT\r\n-.SH AUTHOR\r\n-The Borg Collective\r\n+.SH DOCUTILS SYSTEM MESSAGES\r\n+.IP \"System Message: ERROR/3 (docs/usage/general/environment.rst.inc:, line 103)\"\r\n+Unknown target name: \"xdg env var\".\r\n+.IP \"System Message: ERROR/3 (docs/usage/general/environment.rst.inc:, line 109)\"\r\n+Unknown target name: \"xdg env var\".\r\n+\r\n+orphan: \r\n .\\\" Generated by docutils manpage writer.\r\n .\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5211/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5202", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5202/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5202/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5202/events", "html_url": "https://github.com/borgbackup/borg/issues/5202", "id": 627783292, "node_id": "MDU6SXNzdWU2Mjc3ODMyOTI=", "number": 5202, "title": "borg uses too much memory (with misc. operations)", "user": {"login": "antlarr", "id": 4385446, "node_id": "MDQ6VXNlcjQzODU0NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/4385446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antlarr", "html_url": "https://github.com/antlarr", "followers_url": "https://api.github.com/users/antlarr/followers", "following_url": "https://api.github.com/users/antlarr/following{/other_user}", "gists_url": "https://api.github.com/users/antlarr/gists{/gist_id}", "starred_url": "https://api.github.com/users/antlarr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antlarr/subscriptions", "organizations_url": "https://api.github.com/users/antlarr/orgs", "repos_url": "https://api.github.com/users/antlarr/repos", "events_url": "https://api.github.com/users/antlarr/events{/privacy}", "received_events_url": "https://api.github.com/users/antlarr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/67", "html_url": "https://github.com/borgbackup/borg/milestone/67", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/67/labels", "id": 5153387, "node_id": "MDk6TWlsZXN0b25lNTE1MzM4Nw==", "number": 67, "title": "1.1.12", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-02-29T16:20:04Z", "updated_at": "2020-06-06T00:31:15Z", "due_on": null, "closed_at": "2020-06-06T00:31:15Z"}, "comments": 11, "created_at": "2020-05-30T17:45:17Z", "updated_at": "2020-10-12T08:34:54Z", "closed_at": "2020-06-02T00:39:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nclient: 1.1.11 (openSUSE TW system package)\r\nserver: 1.1.11 (built locally from debian package)\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nclient: openSUSE Tumbleweed (20200516)\r\nserver: osmc (2020.03-1).  Debian-based distribution for mediacenters.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nclient: x86_64\r\nserver: aarch64 (a vero 4k mediacenter with external usb hard disk)\r\n\r\n#### How much data is handled by borg?\r\n\r\nOriginal size of all archives: 2.11 TB\r\nEach archive original size is between 31 and 60 GB\r\nThere's a total of 43 archives.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n`borg recreate -e 'home/user/large-directory' -e 'home/user/large-file' ssh://borgbackup@server/home/borgbackup/repositories/hostname::hostname-2019-09-30T00:01:57`\r\n\r\n## Describe the problem you're observing.\r\n\r\nRecreating the archive consumes a lot of memory. I checked it kept growing during the execution of the recreate command peaking just at the end at a VmSize of 34155864 k (~34GB).\r\n\r\nAfter some debugging, I could observe the problem lies in the self.responses dictionary in remote.py, which keeps all the messages received during the processing.\r\n\r\nIn the middle of a debugging session I got this:\r\n```\r\n(Pdb) p total_size(self.responses)\r\n25272256788\r\n(Pdb) p len(self.responses.keys())\r\n89057\r\n```\r\n(total_size is the function from https://code.activestate.com/recipes/577504/ which returns the total size in memory of an object and its contents)\r\n\r\nIt seems the only way for an item to be removed from the responses dictionary is by first getting its msgid into the waiting_for list. I checked (in a different debugging session than the commands above) and waiting_for doesn't seem to change at all during the execution. It stayed with the same single content every time I checked:\r\n\r\n```\r\n(Pdb) p waiting_for               \r\n[45112]\r\n(Pdb) p max(self.responses.keys())\r\n24628\r\n```\r\n\r\nOf course, the max msgid value of self.responses.keys() kept growing every time I checked, just as its length.\r\n\r\nI don't know where waiting_for got that value from, but I'd say maybe waiting_for is waiting for the last msgid coming from the server, so every response will just be stored in self.responses and never discarded.\r\n\r\nNote that all this happens inside the `self.repository.commit()` call in Archive.save . This is the backtrace that can be seen by stopping the execution at mostly any time during the recreate (after a few seconds after starting):\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.8/site-packages/borg/archiver.py\", line 164, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib64/python3.8/site-packages/borg/archiver.py\", line 1727, in do_recreate\r\n    if not recreater.recreate(name, args.comment, args.target):\r\n  File \"/usr/lib64/python3.8/site-packages/borg/archive.py\", line 1718, in recreate\r\n    self.save(archive, target, comment, replace_original=replace_original)\r\n  File \"/usr/lib64/python3.8/site-packages/borg/archive.py\", line 1841, in save\r\n    target.save(comment=comment, timestamp=self.timestamp,\r\n  File \"/usr/lib64/python3.8/site-packages/borg/archive.py\", line 519, in save\r\n    self.repository.commit()\r\n  File \"/usr/lib64/python3.8/site-packages/borg/remote.py\", line 527, in do_rpc\r\n    return self.call(f.__name__, named, **extra)\r\n  File \"/usr/lib64/python3.8/site-packages/borg/remote.py\", line 768, in call\r\n    for resp in self.call_many(cmd, [args], **kw):\r\n  File \"/usr/lib64/python3.8/site-packages/borg/remote.py\", line 897, in call_many\r\n    self.unpacker.feed(data)\r\n```\r\n\r\nPlease note that the line numbers in archive.py and remote.py might be different than yours since I added some debug code to those files.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI can reproduce it every time.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nThe system logs don't show any problem in the client or the server. I also did a `borg check` which didin't find any problem.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5202/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5196", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5196/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5196/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5196/events", "html_url": "https://github.com/borgbackup/borg/issues/5196", "id": 623613175, "node_id": "MDU6SXNzdWU2MjM2MTMxNzU=", "number": 5196, "title": "ArchiverTestCase: flaky test \"test_delete_force\"?", "user": {"login": "FelixSchwarz", "id": 212753, "node_id": "MDQ6VXNlcjIxMjc1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/212753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FelixSchwarz", "html_url": "https://github.com/FelixSchwarz", "followers_url": "https://api.github.com/users/FelixSchwarz/followers", "following_url": "https://api.github.com/users/FelixSchwarz/following{/other_user}", "gists_url": "https://api.github.com/users/FelixSchwarz/gists{/gist_id}", "starred_url": "https://api.github.com/users/FelixSchwarz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FelixSchwarz/subscriptions", "organizations_url": "https://api.github.com/users/FelixSchwarz/orgs", "repos_url": "https://api.github.com/users/FelixSchwarz/repos", "events_url": "https://api.github.com/users/FelixSchwarz/events{/privacy}", "received_events_url": "https://api.github.com/users/FelixSchwarz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/67", "html_url": "https://github.com/borgbackup/borg/milestone/67", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/67/labels", "id": 5153387, "node_id": "MDk6TWlsZXN0b25lNTE1MzM4Nw==", "number": 67, "title": "1.1.12", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-02-29T16:20:04Z", "updated_at": "2020-06-06T00:31:15Z", "due_on": null, "closed_at": "2020-06-06T00:31:15Z"}, "comments": 4, "created_at": "2020-05-23T08:54:04Z", "updated_at": "2020-06-01T21:14:41Z", "closed_at": "2020-06-01T15:58:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It seems as if `test_delete_force` in `ArchiverTestCase` is a bit flaky. In Fedora's build infrastructure the test suite passes most of the time but sometimes it does not (this is with borgbackup 1.1.11). I've seen this in EPEL 7 as well as Fedora 31/32/33.\r\n\r\nKoschei is Fedora's \"background build service\" and you can see the failures in 2020-05-08 and 2020-05-16. Without any changes to the borgbackup package the test suite passed next time (check `build.log` for details):\r\nhttps://koschei.fedoraproject.org/package/borgbackup?collection=f33\r\n\r\nI hit the same problem yesterday in F31:\r\n\r\n- scratch build passes: https://koji.fedoraproject.org/koji/taskinfo?taskID=44835124\r\n- actual build a few minutes later fails: https://koji.fedoraproject.org/koji/taskinfo?taskID=44835853\r\n\r\nAny idea how to debug this? I suspect it happens more often when there is quite a bit of load on the builders.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5196/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5196/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5161", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5161/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5161/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5161/events", "html_url": "https://github.com/borgbackup/borg/issues/5161", "id": 607946393, "node_id": "MDU6SXNzdWU2MDc5NDYzOTM=", "number": 5161, "title": "Borg Return Code is 2 when Killed by Signal (Expecting 128 + N)", "user": {"login": "timwest95", "id": 64447561, "node_id": "MDQ6VXNlcjY0NDQ3NTYx", "avatar_url": "https://avatars.githubusercontent.com/u/64447561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timwest95", "html_url": "https://github.com/timwest95", "followers_url": "https://api.github.com/users/timwest95/followers", "following_url": "https://api.github.com/users/timwest95/following{/other_user}", "gists_url": "https://api.github.com/users/timwest95/gists{/gist_id}", "starred_url": "https://api.github.com/users/timwest95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timwest95/subscriptions", "organizations_url": "https://api.github.com/users/timwest95/orgs", "repos_url": "https://api.github.com/users/timwest95/repos", "events_url": "https://api.github.com/users/timwest95/events{/privacy}", "received_events_url": "https://api.github.com/users/timwest95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/68", "html_url": "https://github.com/borgbackup/borg/milestone/68", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/68/labels", "id": 5179619, "node_id": "MDk6TWlsZXN0b25lNTE3OTYxOQ==", "number": 68, "title": "hydrogen-alpha9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2020-03-08T16:56:36Z", "updated_at": "2020-10-05T11:51:44Z", "due_on": null, "closed_at": "2020-10-05T11:51:44Z"}, "comments": 13, "created_at": "2020-04-28T00:54:22Z", "updated_at": "2020-07-06T14:00:01Z", "closed_at": "2020-07-01T16:55:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Summary:\r\nBorg returns code 2 when killed by signal, but the expected return code per the documentation is 128 + N.\r\n(https://borgbackup.readthedocs.io/en/stable/usage/general.html#return-codes)\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\nYes.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\nBug/issue report\r\n\r\n## System information. For client/server mode post info for both machines.\r\nLinux 5.5.0-2-amd64 #1 SMP Debian 5.5.17-1 (2020-04-15) x86_64 GNU/Linux\r\nI am running locally to a test repo. However, the issue also occurred during production to a remote repo.\r\n\r\n#### Your borg version (borg -V).\r\nborg 1.1.11\r\nusing pre-built binary\r\n\r\n#### Operating system (distribution) and version.\r\nDebian 9 \"Stretch\" x64\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nThinkpad T430\r\nIntel(R) Core(TM) i5-3360M\r\n16GB DDR3\r\n500GB SSD\r\next4\r\n\r\n#### How much data is handled by borg?\r\n6GB test directory\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nusr/bin/borg create /home/me/borgtmp::me-thinkpad-test /home/me/downloads --show-rc\r\n\r\n## Describe the problem you're observing.\r\nI am expecting borg to return an exit code of 128 + N, where N equals the signal number, when killed by a signal such as SIGINT or SIGTERM. Instead, I am always receiving a return code of 2.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYes, the issue can be reproduced.\r\n1. Be me.\r\n2. Run borg create command\r\n3. Wait 30 seconds\r\n4. Send CTRL + C to the terminal, or run 'pkill -TERM borg' in a separate terminal\r\n\r\nThe expected return code is 130 for CTRL + C (128 + 2), or 143 for SIGTERM (128 + 15).\r\nInstead, I invariably get rc = 2.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n```\r\nme@me-thinkpad:~/scripts/borg-backup-script$ /usr/bin/borg create /home/me/borgtmp::me-thinkpad-test /home/me/downloads --show-rc\r\nEnter passphrase for key /home/me/borgtmp: \r\n^CKeyboard interrupt\r\nterminating with error status, rc 2\r\n```\r\n\r\n```\r\nme@me-thinkpad:~/scripts/borg-backup-script$ /usr/bin/borg create /home/me/borgtmp::me-thinkpad-test /home/me/downloads --show-rc\r\nEnter passphrase for key /home/me/borgtmp: \r\nReceived SIGTERM\r\nterminating with error status, rc 2\r\n```\r\n\r\nThoughts? Thank you for reading.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/5064", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/5064/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/5064/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/5064/events", "html_url": "https://github.com/borgbackup/borg/issues/5064", "id": 590344430, "node_id": "MDU6SXNzdWU1OTAzNDQ0MzA=", "number": 5064, "title": " Input/output error trying to access repository mounted via borg mount", "user": {"login": "n0ctua", "id": 20678151, "node_id": "MDQ6VXNlcjIwNjc4MTUx", "avatar_url": "https://avatars.githubusercontent.com/u/20678151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/n0ctua", "html_url": "https://github.com/n0ctua", "followers_url": "https://api.github.com/users/n0ctua/followers", "following_url": "https://api.github.com/users/n0ctua/following{/other_user}", "gists_url": "https://api.github.com/users/n0ctua/gists{/gist_id}", "starred_url": "https://api.github.com/users/n0ctua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/n0ctua/subscriptions", "organizations_url": "https://api.github.com/users/n0ctua/orgs", "repos_url": "https://api.github.com/users/n0ctua/repos", "events_url": "https://api.github.com/users/n0ctua/events{/privacy}", "received_events_url": "https://api.github.com/users/n0ctua/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/67", "html_url": "https://github.com/borgbackup/borg/milestone/67", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/67/labels", "id": 5153387, "node_id": "MDk6TWlsZXN0b25lNTE1MzM4Nw==", "number": 67, "title": "1.1.12", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-02-29T16:20:04Z", "updated_at": "2020-06-06T00:31:15Z", "due_on": null, "closed_at": "2020-06-06T00:31:15Z"}, "comments": 16, "created_at": "2020-03-30T14:38:02Z", "updated_at": "2020-10-12T09:17:49Z", "closed_at": "2020-04-02T19:15:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nIssue\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\nBorg: 1.1.11  \r\nPython: CPython 3.5.2\r\nmsgpack: 0.5.6\r\n\r\n#### Operating system (distribution) and version.\r\nLinux: Ubuntu 16.04 xenial\r\nKernel:  4.4.0-176-generic\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n- backup repository on an external hdd, fully encrypted with veracrypt\r\n- mount point on ext4 internal ssd\r\n\r\n#### How much data is handled by borg?\r\n~ 60GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n```\r\nsudo mkdir /mnt/repo\r\nsudo borg mount /media/veracrypt1/Backup/ /mnt/repo\r\n```\r\n\r\n## Describe the problem you're observing.\r\nTrying to access the mounted directory in any way throws an Input/output error.\r\nBorg itself does not report any problems.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n```\r\nsudo ls /mnt/repo\r\nls: cannot access '/mnt/repo': Input/output error\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\nI could not find any errors or backtraces in the log. `borg check` doesn't report any problems with my repo. Also the `--debug` option did not reveal any issues.\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/5064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/5064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4934", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4934/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4934/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4934/events", "html_url": "https://github.com/borgbackup/borg/issues/4934", "id": 557605966, "node_id": "MDU6SXNzdWU1NTc2MDU5NjY=", "number": 4934, "title": "borg extract --strip-components --list has confusing output", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 4, "created_at": "2020-01-30T16:24:35Z", "updated_at": "2020-03-03T22:35:46Z", "closed_at": "2020-03-03T22:35:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The list output gives the original paths, without --strip-components applied. So if you are looking to extract files, the list output actually does not represent the paths Borg is or would be (--dry-run) writing.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4934/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4911", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4911/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4911/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4911/events", "html_url": "https://github.com/borgbackup/borg/issues/4911", "id": 545681012, "node_id": "MDU6SXNzdWU1NDU2ODEwMTI=", "number": 4911, "title": "Running `borg recreate --exclude-caches` on a specific archive raises a KeyError", "user": {"login": "intelfx", "id": 1158172, "node_id": "MDQ6VXNlcjExNTgxNzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1158172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/intelfx", "html_url": "https://github.com/intelfx", "followers_url": "https://api.github.com/users/intelfx/followers", "following_url": "https://api.github.com/users/intelfx/following{/other_user}", "gists_url": "https://api.github.com/users/intelfx/gists{/gist_id}", "starred_url": "https://api.github.com/users/intelfx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/intelfx/subscriptions", "organizations_url": "https://api.github.com/users/intelfx/orgs", "repos_url": "https://api.github.com/users/intelfx/repos", "events_url": "https://api.github.com/users/intelfx/events{/privacy}", "received_events_url": "https://api.github.com/users/intelfx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/68", "html_url": "https://github.com/borgbackup/borg/milestone/68", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/68/labels", "id": 5179619, "node_id": "MDk6TWlsZXN0b25lNTE3OTYxOQ==", "number": 68, "title": "hydrogen-alpha9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2020-03-08T16:56:36Z", "updated_at": "2020-10-05T11:51:44Z", "due_on": null, "closed_at": "2020-10-05T11:51:44Z"}, "comments": 3, "created_at": "2020-01-06T11:31:05Z", "updated_at": "2020-06-19T22:29:59Z", "closed_at": "2020-06-19T22:29:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\n$ borg -V\r\nborg 1.2.0a8.dev61+gfc96fc4b\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\n- borg host: btrfs RAID5 on HDD\r\n- borg client: btrfs on SSD\r\n- `borg create` over SSH, `borg recreate` locally on host\r\n\r\n#### How much data is handled by borg?\r\n\r\n```\r\n$ du -hs /mnt/data/Backups/Hosts/able/borg\r\n609G    /mnt/data/Backups/Hosts/able/borg\r\n```\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\n$ export BORG_PASSCOMMAND=\"pass misc/borg\"\r\n$ export BORG_REPO=\"/mnt/data/Backups/Hosts/able/borg\"\r\n$ borg recreate --exclude-caches --keep-exclude-tags --progress --stats ::able-2019-08-21\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nUsing `borg recreate --exclude-caches` on a single specific archive in my repository raises a KeyError.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nThe problem can be reproduced on this specific archive 100% of the time.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\n$ export BORG_PASSCOMMAND=\"pass misc/borg\"\r\n$ export BORG_REPO=\"/mnt/data/Backups/Hosts/able/borg\"\r\n$ borg recreate --exclude-caches --keep-exclude-tags --progress --stats ::able-2019-08-21\r\nrecreate is an experimental feature.\r\nType 'YES' if you understand this and want to continue: YES\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 4476, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 4407, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 165, in wrapper\r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 1570, in do_recreate\r\n    if not recreater.recreate(name, args.comment, args.target):\r\n  File \"/usr/lib/python3.8/site-packages/borg/archive.py\", line 1887, in recreate\r\n    self.matcher_add_tagged_dirs(archive)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archive.py\", line 2042, in matcher_add_tagged_dirs\r\n    file = open_item(archive, cachedir_masters[item.source])\r\nKeyError: 'arch/var/lib/flatpak/repo/objects/50/7741d5f44a0b8c6d81e907afb1160bb7f3aba3e44779d2bcb0b04a556a70f7.file'\r\n\r\nPlatform: Linux stratofortress.nexus.i.intelfx.name 5.4.7-arch1-1 #1 SMP PREEMPT Tue, 31 Dec 2019 17:20:16 +0000 x86_64\r\nLinux: Unknown Linux\r\nBorg: 1.2.0a8.dev61+gfc96fc4b  Python: CPython 3.8.1 msgpack: 0.6.2\r\nPID: 2148059  CWD: /mnt/data/Backups/Hosts/able/borg\r\nsys.argv: ['/usr/bin/borg', 'recreate', '--exclude-caches', '--keep-exclude-tags', '--progress', '--stats', '::able-2019-08-21']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n## Additional notes:\r\n\r\nMounting the problematic archive reveals that `arch/var/lib/flatpak/repo/objects/50/7741d5f44a0b8c6d81e907afb1160bb7f3aba3e44779d2bcb0b04a556a70f7.file` contains valid cachedir tag contents, and adding a `print()` to the crash site reveals that this file is a hardlink destination for a properly named cachedir tag:\r\n\r\n```\r\n$ borg recreate --exclude-caches --keep-exclude-tags --progress --stats ::able-2019-08-21\r\nrecreate is an experimental feature.                                                                               \r\nType 'YES' if you understand this and want to continue: YES                                                        \r\nXXX: going to crash:\r\n        item.path=arch/var/lib/flatpak/runtime/org.freedesktop.Platform/x86_64/18.08/365d62760000772f8cf401cfb6389252a2c1e2a0ebb39d99302fb730abfd8b74/files/cache/fontconfig/CACHEDIR.TAG\r\n        item.source=arch/var/lib/flatpak/repo/objects/50/7741d5f44a0b8c6d81e907afb1160bb7f3aba3e44779d2bcb0b04a556a70f7.file\r\nLocal Exception\r\n<...>\r\n```\r\n\r\nAs I understand the situation, the crash occurs when a `CACHEDIR.TAG` is a hardlink to another file that is _not_ named `CACHEDIR.TAG` (which can and will happen with deduplicating content-addressable stores such as flatpak, ostree etc).\r\n\r\nI have worked around this issue locally by simply skipping tag content verification when the hardlink cannot be resolved, but I don't see a good way to fix this properly without either loading the whole archive contents into the hashmap or making `matcher_add_tagged_dirs()` quadratic.\r\n\r\nAny ideas?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4893", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4893/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4893/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4893/events", "html_url": "https://github.com/borgbackup/borg/issues/4893", "id": 541488813, "node_id": "MDU6SXNzdWU1NDE0ODg4MTM=", "number": 4893, "title": "strip-components and hardlink_masters in 1.1.10", "user": {"login": "favonia", "id": 1471328, "node_id": "MDQ6VXNlcjE0NzEzMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1471328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/favonia", "html_url": "https://github.com/favonia", "followers_url": "https://api.github.com/users/favonia/followers", "following_url": "https://api.github.com/users/favonia/following{/other_user}", "gists_url": "https://api.github.com/users/favonia/gists{/gist_id}", "starred_url": "https://api.github.com/users/favonia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/favonia/subscriptions", "organizations_url": "https://api.github.com/users/favonia/orgs", "repos_url": "https://api.github.com/users/favonia/repos", "events_url": "https://api.github.com/users/favonia/events{/privacy}", "received_events_url": "https://api.github.com/users/favonia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811711, "node_id": "MDU6TGFiZWwyMTA4MTE3MTE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 6, "created_at": "2019-12-22T18:55:30Z", "updated_at": "2019-12-27T03:01:37Z", "closed_at": "2019-12-22T22:28:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nPossibly a regression BUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.10\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nArch Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\n1. backup system: external USB hard drive using btrfs\r\n2. main systems: using ext4\r\n\r\nThe USB connection and the filesystems have been checked.\r\n\r\n#### How much data is handled by borg?\r\n\r\n```\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:                1.49 TB              1.29 TB            176.28 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  684439              4486059\r\n```\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nsudo borg extract --progress --debug --strip-components 2 /mnt/backup::2019.12.19\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nThe problem seems to go away without `--strip-components 2`. I suspect that there is a regression bug about the component stripper and/or the hardlink mapping.\r\n\r\n```\r\nusing builtin fallback logging configuration\r\n35 self tests completed in 0.08 seconds\r\nVerified integrity of /mnt/backup/index.370\r\nEnter passphrase for key /mnt/backup: \r\nTAM-verified manifest\r\nsecurity: read previous location '/mnt/backup'\r\nsecurity: read manifest timestamp '2019-12-20T06:16:18.569254'\r\nsecurity: determined newest manifest timestamp as 2019-12-20T06:16:18.569254\r\nsecurity: repository checks ok, allowing access\r\nLocal Exceptionng: .rbenv/versions/2.4.2/lib/ruby/gems/2.4.0/gems/parser-2.4.0.0/lib/parser/lexer.rb                                     \r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 4501, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 4433, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 166, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 179, in wrapper\r\n    return method(self, args, repository=repository, manifest=manifest, key=key, archive=archive, **kwargs)\r\n  File \"/usr/lib/python3.8/site-packages/borg/archiver.py\", line 759, in do_extract\r\n    for item in archive.iter_items(filter, partial_extract=partial_extract,\r\n  File \"/usr/lib/python3.8/site-packages/borg/archive.py\", line 465, in iter_items\r\n    for item in self.pipeline.unpack_many(self.metadata.items, partial_extract=partial_extract,\r\n  File \"/usr/lib/python3.8/site-packages/borg/archive.py\", line 236, in unpack_many\r\n    chunks, _ = hardlink_masters[source]\r\nKeyError: 'path/to/some/file/in/the/archive'\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI downgraded borg to 1.1.8 (by rebuilding the package from the older official PKGBUILD) and everything worked again. These archives are a bit large and I am not sure where to start to create a smaller example. I am happy to try different things if there are concrete suggestions.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNothing caught by journald.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4893/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4891", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4891/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4891/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4891/events", "html_url": "https://github.com/borgbackup/borg/issues/4891", "id": 541396488, "node_id": "MDU6SXNzdWU1NDEzOTY0ODg=", "number": 4891, "title": "`borg init` failing on Raspbian (1.1.9) with 64-bit kernel", "user": {"login": "noma", "id": 1556185, "node_id": "MDQ6VXNlcjE1NTYxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1556185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noma", "html_url": "https://github.com/noma", "followers_url": "https://api.github.com/users/noma/followers", "following_url": "https://api.github.com/users/noma/following{/other_user}", "gists_url": "https://api.github.com/users/noma/gists{/gist_id}", "starred_url": "https://api.github.com/users/noma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noma/subscriptions", "organizations_url": "https://api.github.com/users/noma/orgs", "repos_url": "https://api.github.com/users/noma/repos", "events_url": "https://api.github.com/users/noma/events{/privacy}", "received_events_url": "https://api.github.com/users/noma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/66", "html_url": "https://github.com/borgbackup/borg/milestone/66", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/66/labels", "id": 4639150, "node_id": "MDk6TWlsZXN0b25lNDYzOTE1MA==", "number": 66, "title": "hydrogen-alpha8", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-09-06T19:51:43Z", "updated_at": "2020-04-21T20:46:05Z", "due_on": null, "closed_at": "2020-04-21T20:46:05Z"}, "comments": 60, "created_at": "2019-12-22T02:00:23Z", "updated_at": "2022-03-19T20:24:39Z", "closed_at": "2020-03-04T10:12:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG / ISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\nUsing an external drive USB drive on a Raspberry Pi 4, the partition is btrfs formatted.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.9 (Raspbian distribution package)\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nRaspbian\r\n4.19.88-v8+ #1284 SMP PREEMPT Wed Dec 11 13:57:50 GMT 2019 aarch64 GNU/Linux\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nRaspberry Pi 4, 4 GB, plenty of free space on SD card and  external USB drive.\r\n\r\n#### How much data is handled by borg?\r\n\r\nNone so far, repo creation fails.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```terminal\r\nborg init --encryption=repokey </local/path>\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\n```terminal\r\nEnter new passphrase: \r\nEnter same passphrase again: \r\nDo you want your passphrase to be displayed for verification? [yN]: \r\nFatal Python error: Bus error\r\n\r\nCurrent thread 0xf7e898e0 (most recent call first):\r\n  File \"/usr/lib/python3/dist-packages/borg/crypto/file_integrity.py\", line 75 in write\r\n  File \"/usr/lib/python3/dist-packages/borg/crypto/file_integrity.py\", line 29 in write\r\n  File \"/usr/lib/python3/dist-packages/msgpack/__init__.py\", line 38 in pack\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 580 in write_index\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 443 in commit\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 275 in do_init\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 154 in wrapper\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4387 in run\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4455 in main\r\n  File \"/usr/bin/borg\", line 11 in <module>\r\nBus error\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes, it is fully reproducible. The same happens if I use a a Ubuntu client running Borg 1.1.5 accessing the Raspberry Pi via ssh.\r\n\r\nEncryption argument does not change the observed behaviour.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNothing relevant in syslog etc. drive seems healthy.\r\n\r\nRepo content:\r\n```terminal\r\n$ ls -lR\r\n.:\r\ntotal 16\r\n-rw------- 1 user user  73 Dec 22 02:41 README\r\n-rw------- 1 user user 700 Dec 22 02:41 config\r\ndrwx------ 1 user user   2 Dec 22 02:41 data\r\n-rw------- 1 user user   0 Dec 22 02:41 hints.1.tmp\r\ndrwx------ 1 user user  52 Dec 22 02:41 lock.exclusive\r\n-rw------- 1 user user  49 Dec 22 02:41 lock.roster\r\n-rw------- 1 user user  16 Dec 22 02:41 nonce\r\n\r\n./data:\r\ntotal 0\r\ndrwx------ 1 user user 4 Dec 22 02:41 0\r\n\r\n./data/0:\r\ntotal 8\r\n-rw------- 1 user user 530 Dec 22 02:41 0\r\n-rw------- 1 user user  17 Dec 22 02:41 1\r\n\r\n./lock.exclusive:\r\ntotal 0\r\n-rw------- 1 user user 0 Dec 22 02:41 host@242606366411512.778-0\r\n```\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4891/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4868", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4868/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4868/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4868/events", "html_url": "https://github.com/borgbackup/borg/issues/4868", "id": 534438953, "node_id": "MDU6SXNzdWU1MzQ0Mzg5NTM=", "number": 4868, "title": "borg delete repo::archive nonexistingarchive", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 1, "created_at": "2019-12-07T18:57:58Z", "updated_at": "2019-12-07T19:11:29Z", "closed_at": "2019-12-07T19:09:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n# borg delete -v --show-rc --progress --stats ::20191112L213957_WRONG_PATH .\r\nDeleting archive: 20191112L213957_WRONG_PATH           Wed, 2019-11-13 00:54:45 [988119b298e628e9f00ee45298f8dc70fc1cdc56be0987b268393c3adedcda8e] (1/2)\r\nDecrementing references  30%\r\n\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 166, in wrapper\r\n  File \"borg/archiver.py\", line 1257, in do_delete\r\n  File \"borg/archiver.py\", line 1304, in _delete_archives\r\n  File \"borg/helpers.py\", line 244, in __getitem__\r\nKeyError\r\n\r\nPlatform: Darwin REDACTED 17.7.0 Darwin Kernel Version 17.7.0: Fri Jul  6 19:54:51 PDT 2018; root:xnu-4570.71.3~2/RELEASE_X86_64 x86_64\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 92649  CWD: /REDACTED/00CLONE2BORG\r\nsys.argv: ['borg', 'delete', '-v', '--show-rc', '--progress', '--stats', '::20191112L213957_WRONG_PATH', '.']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\nterminating with error status, rc 2\r\n```\r\n\r\nThis is due to the (unintended) `.` at the end, which is interpreted as another archive name to delete. Then borg does not find that archive in the archives list and throws a KeyError.\r\n\r\nIt should just say \"archive . does not exist\" or so.\r\n\r\nWe recently fixed another similar issue.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4868/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4845", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4845/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4845/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4845/events", "html_url": "https://github.com/borgbackup/borg/issues/4845", "id": 525200936, "node_id": "MDU6SXNzdWU1MjUyMDA5MzY=", "number": 4845, "title": "borg check --repair not working", "user": {"login": "knutov", "id": 255869, "node_id": "MDQ6VXNlcjI1NTg2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/255869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/knutov", "html_url": "https://github.com/knutov", "followers_url": "https://api.github.com/users/knutov/followers", "following_url": "https://api.github.com/users/knutov/following{/other_user}", "gists_url": "https://api.github.com/users/knutov/gists{/gist_id}", "starred_url": "https://api.github.com/users/knutov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/knutov/subscriptions", "organizations_url": "https://api.github.com/users/knutov/orgs", "repos_url": "https://api.github.com/users/knutov/repos", "events_url": "https://api.github.com/users/knutov/events{/privacy}", "received_events_url": "https://api.github.com/users/knutov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 491632559, "node_id": "MDU6TGFiZWw0OTE2MzI1NTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/hardware-issue", "name": "hardware-issue", "color": "e6e6e6", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 10, "created_at": "2019-11-19T18:59:27Z", "updated_at": "2019-11-23T06:28:59Z", "closed_at": "2019-11-22T22:17:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "`borg check --repair`is not working with error: \"UnicodeDecodeError: 'utf-8' codec can't decode byte 0xb4 in position 0: invalid start byte\".\r\n\r\nHow to fix it?\r\n\r\n\r\n```\r\n./borg1.1.10 check -v -p --repair repo\r\n'check --repair' is an experimental feature that might result in data loss.\r\nType 'YES' if you understand this and want to continue: YES (from BORG_CHECK_I_KNOW_WHAT_I_AM_DOING)\r\nStarting repository check\r\nChecking segments 70.5%\r\nStarting repository index check\r\nCompleted repository check, no problems found.\r\nStarting archive consistency check...\r\nAnalyzing archive repo-2018-05-31-012111 (1/120)\r\n...\r\nAnalyzing archive repo-2019-07-15-024527 (39/120)\r\nException while unpacking item metadata [chunk: 001604_b63ed1dca930a6932e280705c80c6d068e8985b8b94797b0e2fa61b081be7fb8]\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 166, in wrapper\r\n  File \"borg/archiver.py\", line 334, in do_check\r\n  File \"borg/archive.py\", line 1225, in check\r\n  File \"borg/archive.py\", line 1612, in rebuild_refcounts\r\n  File \"borg/archive.py\", line 1559, in robust_iterator\r\n  File \"borg/archive.py\", line 1541, in valid_item\r\n  File \"borg/archive.py\", line 1529, in list_keys_safe\r\n  File \"borg/archive.py\", line 1529, in <genexpr>\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xb4 in position 0: invalid start byte\r\n\r\nPlatform: Linux server1 5.0.0-29-generic #31~18.04.1-Ubuntu SMP Thu Sep 12 18:29:21 UTC 2019 x86_64\r\nLinux: debian buster/sid\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 26224  CWD: /home/bak01/borg\r\nsys.argv: ['./borg1.1.10', 'check', '-v', '-p', '--repair', 'repo']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nRepo was made with borg 1.1.9 if it does matter.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4829", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4829/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4829/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4829/events", "html_url": "https://github.com/borgbackup/borg/issues/4829", "id": 519449846, "node_id": "MDU6SXNzdWU1MTk0NDk4NDY=", "number": 4829, "title": "Borg repositories constantly getting corrupted on server grade hardware", "user": {"login": "bd830dbd7432", "id": 57500594, "node_id": "MDQ6VXNlcjU3NTAwNTk0", "avatar_url": "https://avatars.githubusercontent.com/u/57500594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bd830dbd7432", "html_url": "https://github.com/bd830dbd7432", "followers_url": "https://api.github.com/users/bd830dbd7432/followers", "following_url": "https://api.github.com/users/bd830dbd7432/following{/other_user}", "gists_url": "https://api.github.com/users/bd830dbd7432/gists{/gist_id}", "starred_url": "https://api.github.com/users/bd830dbd7432/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bd830dbd7432/subscriptions", "organizations_url": "https://api.github.com/users/bd830dbd7432/orgs", "repos_url": "https://api.github.com/users/bd830dbd7432/repos", "events_url": "https://api.github.com/users/bd830dbd7432/events{/privacy}", "received_events_url": "https://api.github.com/users/bd830dbd7432/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 70, "created_at": "2019-11-07T18:54:51Z", "updated_at": "2020-05-20T09:38:05Z", "closed_at": "2020-03-01T17:56:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nIssue.\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nCurrently 1.1.10 on client and server, using the official binary, but the issue persists all the way from 1.1.4. Always used official binaries from this page.\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nThe issues persists from Debian 8 (Jessie) to Debian 10 (Buster), on client and/or server.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nVarious Dell PowerEdges, with ECC RAM, disks in RAID-10 (mdadm), gigabit network, ext4 filesystems.\r\n\r\n#### How much data is handled by borg?\r\n\r\nWe backup ~1TB with Borg on total, but using several smaller repositories by VM/data type.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nborg create -vsx --files-cache=mtime,size --show-rc --one-file-system --list --filter AME -C zstd borg@borg1.xxxxxxxxx:postgresql::{now} .\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nWe use Borg for backups for almost two years. Most data are backup-ed from an LVM snapshot. Most are backup-ed every hour, but some data (ex: databases) are backed up every 10 minutes. Some VMs (qcow2 disks) are backup-ed up daily (they are shutdown off-hours for the backup).\r\n\r\nWith this setup, since we started using Borg, we usually experience 1 or 2 problems per month with Borg repository corruption. In every case, we could fix the problem with `borg check --repair`.\r\n\r\nEvery backup is done using SSH.\r\n\r\nWe had this issue backing-up from VMs and physical servers.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nWe could never reproduce the issue.\r\n\r\nWe checked every disk from every server with a complete S.M.A.R.T. test, with no error detected.\r\n\r\nWe checked RAM with memtest86 for hours and nothing were found.\r\n\r\nWe checked that every backup BEFORE the backup job that broke finished successfully.\r\n\r\nDestination server never got short on RAM or disk space.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\n + borg create -vsx --files-cache=mtime,size --show-rc --one-file-system --list --filter AME -C zstd borg@borg1.xxxxxxxxxxx:postgresql::{now} .\r\nCreating archive at \"borg@borg1.xxxxxxxxxxx:postgresql::{now}\"\r\nM 9.6/main/base/141585/171760\r\nM 9.6/main/base/16507/156896\r\nM 9.6/main/base/16507/1259\r\nM 9.6/main/base/16507/2619\r\nM 9.6/main/base/16507/16551\r\nM 9.6/main/base/16507/16577\r\nM 9.6/main/base/16507/16582\r\nM 9.6/main/base/16507/16606\r\nM 9.6/main/base/16507/16731\r\nM 9.6/main/base/16507/16606_fsm\r\nM 9.6/main/base/16507/17268\r\nM 9.6/main/base/16507/17274\r\nM 9.6/main/base/16507/17326\r\nM 9.6/main/base/16507/17327\r\nM 9.6/main/base/16507/16606_vm\r\nM 9.6/main/pg_clog/0003\r\nA 9.6/main/pg_xlog/000000010000001200000078\r\nM 9.6/main/global/pg_control\r\nTraceback (most recent call last):\r\n\r\n  File \"borg/remote.py\", line 247, in serve\r\n\r\n  File \"borg/repository.py\", line 442, in commit\r\n\r\n  File \"borg/repository.py\", line 789, in compact_segments\r\n\r\nAssertionError: Corrupted segment reference count - corrupted index or hints\r\n\r\nBorg server: Platform: Linux vm-borg-1 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u3 (2019-06-16) x86_64\r\nBorg server: Linux: debian 9.9\r\nBorg server: Borg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nBorg server: PID: 15222  CWD: /srv/borg/root@vm-postgres-1\r\nBorg server: sys.argv: ['borg', 'serve', '--restrict-to-path', '/srv/borg/root@vm-postgres-1']\r\nBorg server: SSH_ORIGINAL_COMMAND: 'borg serve --umask=077 --info'\r\nPlatform: Linux vm-postgres-1 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u3 (2019-06-16) x86_64\r\nLinux: debian 9.9\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 3953  CWD: /mnt\r\nsys.argv: ['borg', 'create', '-vsx', '--files-cache=mtime,size', '--show-rc', '--one-file-system', '--list', '--filter', 'AME', '-C', 'zstd', 'borg@borg1.xxxxxxxxxxx:postgresql::{now}', '.']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\nterminating with error status, rc 2\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4829/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4796", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4796/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4796/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4796/events", "html_url": "https://github.com/borgbackup/borg/issues/4796", "id": 509607697, "node_id": "MDU6SXNzdWU1MDk2MDc2OTc=", "number": 4796, "title": "persistent crash in free space check after ctrl-c-ing borg operation", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/55", "html_url": "https://github.com/borgbackup/borg/milestone/55", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/55/labels", "id": 3378290, "node_id": "MDk6TWlsZXN0b25lMzM3ODI5MA==", "number": 55, "title": "1.2.0 release (aka hydrogen)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 50, "state": "closed", "created_at": "2018-05-26T12:32:09Z", "updated_at": "2022-03-07T11:43:27Z", "due_on": "2022-02-22T08:00:00Z", "closed_at": "2022-02-22T21:26:51Z"}, "comments": 5, "created_at": "2019-10-20T15:09:20Z", "updated_at": "2020-03-09T15:01:59Z", "closed_at": "2020-03-09T15:01:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From the borgbackup mailing list:\r\n\r\nI decided to start from scratch for various unrelated reasons.\r\nHowever, I made a different mistake this time, and the repo won't allow\r\ncreations of any more archives as a result. Here are the details:\r\n\r\n```\r\n$ borg init --encryption none borgrepo\r\n\r\n$ borg create --exclude-if-present '.nobackup' --stats borgrepo::first /home/me\r\n\r\n$ borg create --exclude-if-present '.nobackup' --stats borgrepo::second /home/me\r\n```\r\n\r\nall worked, then the mistake (the actual user name wasn't 'me', so the\r\nactual typo wasn't 'notme' - it was a single letter omission):\r\n\r\n```\r\n$ borg create --exclude-if-present '.nobackup' --stats borgrepo::third /home/notme\r\n/home/notme: [Errno 2] No such file or directory: '/home/notme'\r\n```\r\n\r\n---> ^C'ed it here - immediately after the error message, and\r\nretried without the mistake:\r\n\r\n```\r\n$ borg create --exclude-if-present '.nobackup' --stats borgrepo::third /home/me\r\nArchive third already exists\r\n```\r\n\r\nit made the archive, or part of it, even though it had no source:\r\n\r\n```\r\n$ borg list borgrepo\r\nfirst                                Sat, 2019-10-19 17:43:39\r\n[32e1e882ef4948ba8a59abcfbfb655df71704f88366506ba307b8b8d12bc52a1]\r\nsecond                               Sat, 2019-10-19 17:45:12\r\n[b0459333ddece1ce236aecf55f666c5ab639c596f088d86c2fed09596b448a07]\r\nthird                                Sun, 2019-10-20 08:54:22\r\n[e6277e63fe56ddbff1cd410dfe6826efd2e703a91a306d113e870a4df80c1bf4]\r\n```\r\n\r\nbut won't let go:\r\n\r\n```\r\n$ borg delete borgrepo::third\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4501,\r\nin main exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4433,\r\nin run return set_ec(func(args))\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 166,\r\nin wrapper return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 1257,\r\nin do_delete return self._delete_archives(args, repository)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 1310,\r\nin _delete_archives repository.commit(save_space=args.save_space)\r\n  File \"/usr/lib/python3.7/site-packages/borg/repository.py\", line 438,\r\nin commit self.check_free_space()\r\n  File \"/usr/lib/python3.7/site-packages/borg/repository.py\", line 644,\r\nin check_free_space compact_working_space =\r\nsum(self.io.segment_size(segment) - free for segment, free in\r\nself.compact.items()) File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 644, in\r\n<genexpr> compact_working_space = sum(self.io.segment_size(segment) -\r\nfree for segment, free in self.compact.items()) File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 1349, in\r\nsegment_size return os.path.getsize(self.segment_filename(segment))\r\nFile \"/usr/lib/python3.7/genericpath.py\", line 50, in getsize return\r\nos.stat(filename).st_size FileNotFoundError: [Errno 2] No such file or\r\ndirectory: '/<...>/borgrepo/data/0/7'\r\n\r\nPlatform: Linux <...> 5.3.6-1-MANJARO #1 SMP PREEMPT Sat Oct 12\r\n09:30:05 UTC 2019 x86_64 Linux: arch Manjaro Linux\r\nBorg: 1.1.10  Python: CPython 3.7.4 msgpack: 0.5.6\r\nPID: 1650  CWD: /home/me/Desktop\r\nsys.argv: ['/usr/bin/borg', 'delete',\r\n'/<...>/borgrepo::third'] SSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n```\r\n$ borg info borgrepo::third\r\nArchive name: third\r\nArchive fingerprint:\r\ne6277e63fe56ddbff1cd410dfe6826efd2e703a91a306d113e870a4df80c1bf4\r\nComment: Hostname: <...>\r\nUsername: me\r\nTime (start): Sun, 2019-10-20 08:54:22\r\nTime (end): Sun, 2019-10-20 08:54:22\r\nDuration: 0.07 seconds\r\nNumber of files: 0\r\nCommand line: /usr/bin/borg create --exclude-if-present .nobackup --stats borgrepo::third /home/notme\r\nUtilization of maximum supported archive size: 0%\r\n------------------------------------------------------------------------------\r\nOriginal size      Compressed size    Deduplicated size This archive:\r\n                 0 B                  0 B                429 B All\r\narchives:              480.81 MB            260.03 MB            129.74\r\nMB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                    2244                 4823\r\n```\r\n\r\n\r\nWorst of all, further creates fail:\r\n\r\n```\r\n$ borg create --exclude-if-present '.nobackup' --stats borgrepo::fourth /home/me\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4501,\r\nin main exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4433,\r\nin run return set_ec(func(args))\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 166,\r\nin wrapper return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 573,\r\nin do_create create_inner(archive, cache)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 538,\r\nin create_inner archive.save(comment=args.comment,\r\ntimestamp=args.timestamp) File\r\n\"/usr/lib/python3.7/site-packages/borg/archive.py\", line 515, in save\r\nself.repository.commit() File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 438, in\r\ncommit self.check_free_space() File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 644, in\r\ncheck_free_space compact_working_space =\r\nsum(self.io.segment_size(segment) - free for segment, free in\r\nself.compact.items()) File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 644, in\r\n<genexpr> compact_working_space = sum(self.io.segment_size(segment) -\r\nfree for segment, free in self.compact.items()) File\r\n\"/usr/lib/python3.7/site-packages/borg/repository.py\", line 1349, in\r\nsegment_size return os.path.getsize(self.segment_filename(segment))\r\nFile \"/usr/lib/python3.7/genericpath.py\", line 50, in getsize return\r\nos.stat(filename).st_size FileNotFoundError: [Errno 2] No such file or\r\ndirectory: '/.../borgrepo/data/0/7'\r\n\r\nPlatform: Linux <...> 5.3.6-1-MANJARO #1 SMP PREEMPT Sat Oct 12\r\n09:30:05 UTC 2019 x86_64 Linux: arch Manjaro Linux\r\nBorg: 1.1.10  Python: CPython 3.7.4 msgpack: 0.5.6\r\nPID: 1669  CWD: /home/me/Desktop\r\nsys.argv: ['/usr/bin/borg', 'create', '--exclude-if-present',\r\n'.nobackup', '--stats', '/<...>/borgrepo::fourth',\r\n'/home/me'] SSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n```\r\n$ borg list borgrepo\r\nfirst                                Sat, 2019-10-19 17:43:39\r\n[32e1e882ef4948ba8a59abcfbfb655df71704f88366506ba307b8b8d12bc52a1]\r\nsecond                               Sat, 2019-10-19 17:45:12\r\n[b0459333ddece1ce236aecf55f666c5ab639c596f088d86c2fed09596b448a07]\r\nthird                                Sun, 2019-10-20 08:54:22\r\n[e6277e63fe56ddbff1cd410dfe6826efd2e703a91a306d113e870a4df80c1bf4]\r\n```\r\n\r\n\r\n```\r\n$ borg check --verify-data borgrepo\r\n$ echo $?\r\n0\r\n```\r\n\r\nSure, once I do adequate testing and have this all scripted, there won't be anymore such pilot errors.  Still...\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4796/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4793", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4793/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4793/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4793/events", "html_url": "https://github.com/borgbackup/borg/issues/4793", "id": 509507968, "node_id": "MDU6SXNzdWU1MDk1MDc5Njg=", "number": 4793, "title": "traceback when trying to delete non-existent archive", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 5, "created_at": "2019-10-19T20:48:15Z", "updated_at": "2019-11-16T09:56:04Z", "closed_at": "2019-11-16T09:56:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From the borgbackup mailing list:\r\n\r\nI am testing out borg, and accidentally did:\r\n\r\n```\r\nborg create borgrepo::test4 ~\r\n```\r\n\r\nafter 3 previous test archives were created using an --exclude-if-present .nobackup option.\r\n\r\nWhen I noticed the missing --exclude-if-present in the above create (because it was taking too\r\nlong), I ^C'ed it, then tried:\r\n\r\n```\r\nborg delete borgrepo::test4\r\n```\r\n\r\nand got this failure (<...> obfuscations added):\r\n\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4501, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4433, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 166, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 1257, in do_delete\r\n    return self._delete_archives(args, repository)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 1304, in _delete_archives\r\n    logger.info(msg.format(format_archive(manifest.archives[archive_name]), i, len(archive_names)))\r\n  File \"/usr/lib/python3.7/site-packages/borg/helpers.py\", line 244, in __getitem__\r\n    raise KeyError\r\nKeyError\r\n\r\nPlatform: Linux <...> 5.3.6-1-MANJARO #1 SMP PREEMPT Sat Oct 12 09:30:05\r\nUTC 2019 x86_64 Linux: arch Manjaro Linux\r\nBorg: 1.1.10  Python: CPython 3.7.4 msgpack: 0.5.6\r\nPID: 10547  CWD: <...>\r\nsys.argv: ['/usr/bin/borg', 'delete', 'borgrepo::test4']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nIs this borgrepo now fried?  If not, how can I recover it?\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4793/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4777", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4777/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4777/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4777/events", "html_url": "https://github.com/borgbackup/borg/issues/4777", "id": 502980921, "node_id": "MDU6SXNzdWU1MDI5ODA5MjE=", "number": 4777, "title": "borg check --repair: Data integrity error: id verification failed", "user": {"login": "axxelh", "id": 25542815, "node_id": "MDQ6VXNlcjI1NTQyODE1", "avatar_url": "https://avatars.githubusercontent.com/u/25542815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/axxelh", "html_url": "https://github.com/axxelh", "followers_url": "https://api.github.com/users/axxelh/followers", "following_url": "https://api.github.com/users/axxelh/following{/other_user}", "gists_url": "https://api.github.com/users/axxelh/gists{/gist_id}", "starred_url": "https://api.github.com/users/axxelh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/axxelh/subscriptions", "organizations_url": "https://api.github.com/users/axxelh/orgs", "repos_url": "https://api.github.com/users/axxelh/repos", "events_url": "https://api.github.com/users/axxelh/events{/privacy}", "received_events_url": "https://api.github.com/users/axxelh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/78", "html_url": "https://github.com/borgbackup/borg/milestone/78", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/78/labels", "id": 6915053, "node_id": "MDk6TWlsZXN0b25lNjkxNTA1Mw==", "number": 78, "title": "1.1.18", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 39, "state": "closed", "created_at": "2021-07-04T12:52:28Z", "updated_at": "2022-06-05T14:47:01Z", "due_on": null, "closed_at": "2022-06-05T14:47:01Z"}, "comments": 28, "created_at": "2019-10-05T16:00:24Z", "updated_at": "2022-04-12T16:13:53Z", "closed_at": "2022-04-12T16:13:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes, many hardware issues seem related, but this appears _after_ a hardware issue was resolved.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.9 (Debian Buster package) for Debian client/server. I've also tested with borg 1.1.10 binary from the site.\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nBackup severs Debian Buster (Proxmox 6.0)\r\nBackup clients: Debian Buster (Proxmox 6.0), macOS X 10.13 and 10.14.\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nBackup server is a Proxmox/Debian machine, actual backups are made to a Buster-based Proxmox container. No overclocking, ECC RAM. Storage disk is a USB3 volume, using dmcrypt for block-level encryption. Encrypted device is managed as Linux ZFS.\r\n\r\nServer memtest86 passed (4 full passes), ZFS scrub of backup disk (and all disks for that matter) report no issues.\r\n\r\nBackup clients:\r\n\r\n- The onsite Proxmox server itself (the actual hypervisor, not a container).\r\n- Various Macs (2 laptops, 1 iMac).\r\n\r\nAll connectivity is via SSH, even when the hypervisor is backing up to a container it hosts itself. \r\n\r\n#### How much data is handled by borg?\r\n\r\nRoughly 3TB total across all clients stored at each location.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nSeveral affected commands:\r\n\r\ncheck --repair --verbose ::\r\ncheck --repair --verbose --verify-data  ::\r\n\r\nCurrent failing command:\r\n\r\ncheck --repair --verbose ::\r\n\r\n## Describe the problem you're observing.\r\n\r\nI appear to have had widespread backup corruption on this server. 3 Mac clients and the hypervisor backup itself were reporting errors during \"borg check\", even though memtest86 and ZFS scrub were clean. All 4 clients were reporting no check errors for the same backups to an offsite server (separate Borg destination, not a rsync or clone of the onsite backup).\r\n\r\nDespite the lack of memory or disk errors, I have replaced most of the hardware on this machine. After one pass of check --repair, no errors are now reported on the Macs.\r\n\r\nHowever the Debian/Proxmox backup cannot complete its check repair. Issues DB indicates that its expected that \"Data integrity error\" will block some operations, but check --repair is called out as the fix for these.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI've been repeatedly running check --repair for several days, and other repairs have been made. I believe any hardware issues are resolved as all 3 other clients are clean, the prior instability in detecting errors (errors would be reported in different places) is gone.\r\n\r\nAt this point I appear to be stuck as several runs have all halted with the same error.\r\n\r\nI will try delete --force to remove the affected archive next, but I believe based on documentation that check --repair should not fail due to data integrity.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nTraceback encountered with borg 1.1.10:\r\n\r\n```\r\nFull-1568690224: <filename redacted>: New missing file chunk detected (Byte 2226083-3571440). Replacing with all-zero chunk.\r\nData integrity error: Chunk 5d767a5c23c6c6ca22478db09312b3181ec2f0b25e610a3f86b1b5ba325e4caf: id verification failed\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 166, in wrapper\r\n  File \"borg/archiver.py\", line 334, in do_check\r\n  File \"borg/archive.py\", line 1225, in check\r\n  File \"borg/archive.py\", line 1612, in rebuild_refcounts\r\n  File \"borg/archive.py\", line 1555, in robust_iterator\r\n  File \"borg/crypto/key.py\", line 396, in decrypt\r\n  File \"borg/crypto/key.py\", line 197, in assert_id\r\nborg.helpers.IntegrityError: Data integrity error: Chunk 5d767a5c23c6c6ca22478db09312b3181ec2f0b25e610a3f86b1b5ba325e4caf: id verification failed\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4769", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4769/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4769/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4769/events", "html_url": "https://github.com/borgbackup/borg/issues/4769", "id": 499938822, "node_id": "MDU6SXNzdWU0OTk5Mzg4MjI=", "number": 4769, "title": "data loss: borg prune -P-- affects all archives", "user": {"login": "horazont", "id": 271710, "node_id": "MDQ6VXNlcjI3MTcxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/271710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/horazont", "html_url": "https://github.com/horazont", "followers_url": "https://api.github.com/users/horazont/followers", "following_url": "https://api.github.com/users/horazont/following{/other_user}", "gists_url": "https://api.github.com/users/horazont/gists{/gist_id}", "starred_url": "https://api.github.com/users/horazont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/horazont/subscriptions", "organizations_url": "https://api.github.com/users/horazont/orgs", "repos_url": "https://api.github.com/users/horazont/repos", "events_url": "https://api.github.com/users/horazont/events{/privacy}", "received_events_url": "https://api.github.com/users/horazont/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 13, "created_at": "2019-09-29T16:25:21Z", "updated_at": "2019-10-19T19:43:12Z", "closed_at": "2019-10-19T19:43:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nborg 1.1.10\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian testing, Debian stable (both)\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\next4, tmpfs\r\n\r\n#### How much data is handled by borg?\r\n\r\nseveral TB, a few MB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\n$ borg prune -d7 --stats -P-- io\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes:\r\n\r\n```\r\n$ borg init -e none test\r\n$ borg create \"test::test-$(date --iso-8601=seconds)\" icons\r\n$ borg create \"test::--$(date --iso-8601=seconds)\" icons\r\n$ borg create \"test::test-$(date --iso-8601=seconds)\" icons\r\n$ borg create \"test::--$(date --iso-8601=seconds)\" icons\r\n$ borg prune -n --list --keep-hourly 1 -Ptest- test\r\nKeeping archive: test-2019-09-29T18:11:06+02:00       Sun, 2019-09-29 18:11:06 [9d1c048374200473d4c2155488e24e8e6ea37c1b257e2bd684dff0c49f1f73cf]\r\nWould prune:     test-2019-09-29T18:10:57+02:00       Sun, 2019-09-29 18:10:57 [f2d53c6752713f68d7e1409784ee22cdb2e8ca7094286e0199bbf919c5548c86]\r\n$ borg prune -n --list --keep-hourly 1 -P-- test\r\nKeeping archive: --2019-09-29T18:11:09+02:00          Sun, 2019-09-29 18:11:09 [6f59a4b2575626a2a8fa748be6e44abd6bb4db17ee1db0dfe67ab10b095ea71e]\r\nWould prune:     test-2019-09-29T18:11:06+02:00       Sun, 2019-09-29 18:11:06 [9d1c048374200473d4c2155488e24e8e6ea37c1b257e2bd684dff0c49f1f73cf]\r\nWould prune:     --2019-09-29T18:11:02+02:00          Sun, 2019-09-29 18:11:03 [795d5c84deb4d646135ae7fcf853a2f7537418b81f91aefba74a8e9bc097e5bb]\r\nWould prune:     test-2019-09-29T18:10:57+02:00       Sun, 2019-09-29 18:10:57 [f2d53c6752713f68d7e1409784ee22cdb2e8ca7094286e0199bbf919c5548c86]\r\n```\r\n\r\nAs you can see, ``borg prune`` will prune *all* archives when invoked with ``-P--``. This does not happen with ``-P-`` or ``-P---``. It also happens with  ``--prefix=--``, but not with ``'-a--*'``.\r\n\r\nI would expect borg to either:\r\n\r\n- Complain about a malformed argument if it can\u2019t deal with ``--`` for whatever reason, or\r\n- Operate correctly only pruning archives starting with ``--``\r\n\r\nInstead, it pruned away many my backups because I assumed this would work :/ and did not do another ``--dry-run``.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4769/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4769/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4764", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4764/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4764/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4764/events", "html_url": "https://github.com/borgbackup/borg/issues/4764", "id": 496882351, "node_id": "MDU6SXNzdWU0OTY4ODIzNTE=", "number": 4764, "title": "borg info tracebacks on empty directory", "user": {"login": "witten", "id": 17146, "node_id": "MDQ6VXNlcjE3MTQ2", "avatar_url": "https://avatars.githubusercontent.com/u/17146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/witten", "html_url": "https://github.com/witten", "followers_url": "https://api.github.com/users/witten/followers", "following_url": "https://api.github.com/users/witten/following{/other_user}", "gists_url": "https://api.github.com/users/witten/gists{/gist_id}", "starred_url": "https://api.github.com/users/witten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/witten/subscriptions", "organizations_url": "https://api.github.com/users/witten/orgs", "repos_url": "https://api.github.com/users/witten/repos", "events_url": "https://api.github.com/users/witten/events{/privacy}", "received_events_url": "https://api.github.com/users/witten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 6, "created_at": "2019-09-23T03:51:28Z", "updated_at": "2019-11-05T00:16:23Z", "closed_at": "2019-11-04T23:18:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes, all three. Specifically, read through usage init/info docs, FAQ, and searched open and closed issues.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.10\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nManjaro Linux 18.1-rc10 with Linux kernel 4.19.69\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nLenovo ThinkPad X1 Carbon. No network used with Borg. ext4 filesystem.\r\n\r\n#### How much data is handled by borg?\r\n\r\nNone.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\nmkdir empty-dir ; borg info empty-dir\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nBorg experiences a traceback and exits unceremoniously with an error exit code when `borg info` is run on an empty directory. Instead, I would expect Borg *not* to traceback and exit gracefully (with an error exit code). Side note: This directory is empty because it is a [Docker volume](https://docs.docker.com/storage/volumes/) mount, which when mounted for the first time (if it doesn't exist on the host previously), manifests as an empty directory.\r\n\r\nMy use case, for context: Within a [Borg wrapper script](https://torsion.org/borgmatic/), I'm trying to use `borg info` to probe for whether a Borg repository already exists, so I know whether I need to run `borg init` or not. I can't just run `borg init` unconditionally, because I can't tell from its exit code whether the repository already exists. (And I can't capture stderr and try to parse the \"A repository already exists\" message, because I need stderr to pass through to the user in case there are interactive repository creation messages on stderr.)\r\n\r\nSo, I'm hoping that I can use `borg info` or a similar Borg sub-command to determine whether a repository exists.. Even if it's on an empty directory. The existing traceback is [confusing to my users](https://projects.torsion.org/witten/borgmatic/issues/201#issuecomment-1813), so it would be great to have a traceback-free way to determine whether a repository exists in a directory.\r\n\r\nI originally thought of just probing for the existence of the `<repository-directory-name>/config` path without using Borg, but that doesn't handle the remote repository case.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nYes. Just run `borg info empty-dir` again on the empty directory.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/borg/repository.py\", line 179, in __del__\r\n    assert False, \"cleanup happened in Repository.__del__\"\r\nAssertionError: cleanup happened in Repository.__del__\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4501, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 4433, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.7/site-packages/borg/archiver.py\", line 151, in wrapper\r\n    with repository:\r\n  File \"/usr/lib/python3.7/site-packages/borg/repository.py\", line 189, in __enter__\r\n    self.open(self.path, bool(self.exclusive), lock_wait=self.lock_wait, lock=self.do_lock)\r\n  File \"/usr/lib/python3.7/site-packages/borg/repository.py\", line 396, in open\r\n    with open(os.path.join(self.path, 'config')) as fd:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/root/tmp/empty-dir/config'\r\n\r\nPlatform: Linux flux 4.19.69-1-MANJARO #1 SMP PREEMPT Thu Aug 29 08:51:46 UTC 2019 x86_64\r\nLinux: arch Manjaro Linux\r\nBorg: 1.1.10  Python: CPython 3.7.4 msgpack: 0.5.6\r\nPID: 988  CWD: /root/tmp\r\nsys.argv: ['/usr/bin/borg', 'info', 'empty-dir']\r\nSSH_ORIGINAL_COMMAND: None\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4695", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4695/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4695/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4695/events", "html_url": "https://github.com/borgbackup/borg/issues/4695", "id": 473722551, "node_id": "MDU6SXNzdWU0NzM3MjI1NTE=", "number": 4695, "title": "Borg prints out \"Repository XXX does not exist\" if the read/write permissions are not granted", "user": {"login": "Forceu", "id": 1593467, "node_id": "MDQ6VXNlcjE1OTM0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/1593467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Forceu", "html_url": "https://github.com/Forceu", "followers_url": "https://api.github.com/users/Forceu/followers", "following_url": "https://api.github.com/users/Forceu/following{/other_user}", "gists_url": "https://api.github.com/users/Forceu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Forceu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Forceu/subscriptions", "organizations_url": "https://api.github.com/users/Forceu/orgs", "repos_url": "https://api.github.com/users/Forceu/repos", "events_url": "https://api.github.com/users/Forceu/events{/privacy}", "received_events_url": "https://api.github.com/users/Forceu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 4, "created_at": "2019-07-28T09:04:34Z", "updated_at": "2019-08-09T14:02:33Z", "closed_at": "2019-08-09T14:02:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG / ISSUE\r\n\r\n## System information. For client/server mode post info for both machines.\r\nLinux x64\r\n\r\n#### Your borg version (borg -V).\r\n1.1.9\r\n\r\n#### Operating system (distribution) and version.\r\nUbuntu 18.04LTS\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nExt4 / Cryptsetup\r\n\r\n#### How much data is handled by borg?\r\n8TB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\nAll borg commands\r\n\r\n## Describe the problem you're observing.\r\nI attached my harddrive including the Borg repository to a different server with more perfomance. Apparently the folder settings were set incorrectly, therefore Borg was unable to create a new archive. It always gave the error \"Repository XXXXX does not exist.\", it would be a lot better however if it put out some thing that tells the user that the permissions were denied. I tried finding out why it thinks that the repository doesn't exist for almost an hour, until I saw that the permissions were set incorrectly.\r\n\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps \r\n\r\nChown the folder with the repository to a different user, so borg cannot access it.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\nRepository XXXXX does not exist.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4660", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4660/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4660/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4660/events", "html_url": "https://github.com/borgbackup/borg/issues/4660", "id": 462892652, "node_id": "MDU6SXNzdWU0NjI4OTI2NTI=", "number": 4660, "title": "Current docs (for 1.1.10) reference `borg compact` which doesn't exist yet", "user": {"login": "russelldavis", "id": 551404, "node_id": "MDQ6VXNlcjU1MTQwNA==", "avatar_url": "https://avatars.githubusercontent.com/u/551404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russelldavis", "html_url": "https://github.com/russelldavis", "followers_url": "https://api.github.com/users/russelldavis/followers", "following_url": "https://api.github.com/users/russelldavis/following{/other_user}", "gists_url": "https://api.github.com/users/russelldavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/russelldavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russelldavis/subscriptions", "organizations_url": "https://api.github.com/users/russelldavis/orgs", "repos_url": "https://api.github.com/users/russelldavis/repos", "events_url": "https://api.github.com/users/russelldavis/events{/privacy}", "received_events_url": "https://api.github.com/users/russelldavis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 2, "created_at": "2019-07-01T20:18:02Z", "updated_at": "2019-08-09T19:36:20Z", "closed_at": "2019-08-09T19:36:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "At https://borgbackup.readthedocs.io/en/stable/usage/notes.html, it has a reference to running `borg compact repo`. It looks like that command only exists in an unreleased version of borg.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4652", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4652/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4652/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4652/events", "html_url": "https://github.com/borgbackup/borg/issues/4652", "id": 462127994, "node_id": "MDU6SXNzdWU0NjIxMjc5OTQ=", "number": 4652, "title": "borg recreate with --exclude failing with KeyError 'data'", "user": {"login": "simonmichael", "id": 10144, "node_id": "MDQ6VXNlcjEwMTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/10144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonmichael", "html_url": "https://github.com/simonmichael", "followers_url": "https://api.github.com/users/simonmichael/followers", "following_url": "https://api.github.com/users/simonmichael/following{/other_user}", "gists_url": "https://api.github.com/users/simonmichael/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonmichael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonmichael/subscriptions", "organizations_url": "https://api.github.com/users/simonmichael/orgs", "repos_url": "https://api.github.com/users/simonmichael/repos", "events_url": "https://api.github.com/users/simonmichael/events{/privacy}", "received_events_url": "https://api.github.com/users/simonmichael/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 17, "created_at": "2019-06-28T17:03:53Z", "updated_at": "2019-07-07T12:39:35Z", "closed_at": "2019-07-07T12:39:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYup\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\nclient: 1.1.10\r\nserver: 0.29.0  (rsync.net)\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nclient: Ubuntu 14.04.6 LTS\r\nserver: FreeBSD 11.1-RELEASE-p6\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\nclient: ext3\r\nserver: ZFS\r\n\r\n#### How much data is handled by borg?\r\n\r\nIn this repo:\r\n```\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:                3.70 GB              1.55 GB              1.46 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                   51533                72737\r\n```\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```\r\necho YES | borg recreate -vp USER@SERVER.rsync.net:conf.borg\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nThis recreate command & repo is giving a reproducible KeyError:\r\n```\r\nroot@mail:/backup# echo YES | borg recreate -vp --exclude '*/tarsnap-cache' USER@SERVER.rsync.net:conf.borg\r\nRemote: Borg 0.29.0: exception in RPC call:\r\nRemote: Traceback (most recent call last):\r\nRemote:   File \"/usr/home/kibab/borgbackup-0.29.0/borg/remote.py\", line 96, in serve\r\nRemote: TypeError: open() takes from 2 to 5 positional arguments but 7 were given\r\nRemote: Platform: FreeBSD SERVER.rsync.net 11.1-RELEASE-p6 FreeBSD 11.1-RELEASE-p6 #0: Tue Dec 19 13:52:29 PST 2017     user@11_1:/usr/src/sys/amd64/compile/kernel.11_1amd64 amd64\r\nRemote: Python: CPython 3.4.3\r\nRemote:\r\nPlease note:\r\nIf you see a TypeError complaining about the number of positional arguments\r\ngiven to open(), you can ignore it if it comes from a borg version < 1.0.7.\r\nThis TypeError is a cosmetic side effect of the compatibility code borg\r\nclients >= 1.0.7 have to support older borg servers.\r\nThis problem will go away as soon as the server has been upgraded to 1.0.7+.\r\nrecreate is an experimental feature.\r\nType 'YES' if you understand this and want to continue: Processing 20151231\r\nRemote: Borg 0.29.0: exception in RPC call:\r\nRemote: Traceback (most recent call last):\r\nRemote:   File \"/usr/home/kibab/borgbackup-0.29.0/borg/remote.py\", line 96, in serve\r\nRemote: TypeError: get() missing 1 required positional argument: 'id_'\r\nRemote: Platform: FreeBSD SERVER.rsync.net 11.1-RELEASE-p6 FreeBSD 11.1-RELEASE-p6 #0: Tue Dec 19 13:52:29 PST 2017     user@11_1:/usr/src/sys/amd64/compile/kernel.11_1amd64 amd64\r\nRemote: Python: CPython 3.4.3\r\nRemote:\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 164, in wrapper\r\n  File \"borg/archiver.py\", line 1725, in do_recreate\r\n  File \"borg/archive.py\", line 1700, in recreate\r\n  File \"borg/archive.py\", line 1794, in save\r\n  File \"borg/archive.py\", line 510, in save\r\n  File \"borg/cache.py\", line 898, in add_chunk\r\n  File \"borg/remote.py\", line 477, in do_rpc\r\n  File \"borg/remote.py\", line 712, in call\r\n  File \"borg/remote.py\", line 883, in call_many\r\n  File \"borg/remote.py\", line 709, in named_to_positional\r\n  File \"borg/remote.py\", line 709, in <listcomp>\r\nKeyError: 'data'\r\n\r\nPlatform: Linux CLIENT 5.1.11-x86_64-linode127 #1 SMP PREEMPT Mon Jun 17 21:18:26 UTC 2019 x86_64\r\nLinux: debian jessie/sid\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 7767  CWD: /backup\r\nsys.argv: ['borg', 'recreate', '-vp', '--exclude', '*/tarsnap-cache', 'USER@SERVER.rsync.net:conf.borg']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nI'm pretty sure I successfully ran recreate on this same repo yesterday. Yes, the failure is triggered by the `--exclude '*/tarsnap-cache' ` option which I added today. A dry run of this recreate showed these files scheduled for deletion:\r\n```\r\nx usr/local/tarsnap-cache\r\nx usr/local/tarsnap-cache/cseq\r\nx usr/local/tarsnap-cache/directory\r\nx usr/local/tarsnap-cache/lockf\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4652/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4607", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4607/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4607/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4607/events", "html_url": "https://github.com/borgbackup/borg/issues/4607", "id": 453464218, "node_id": "MDU6SXNzdWU0NTM0NjQyMTg=", "number": 4607, "title": "extract fails with KeyError in archiver.py ", "user": {"login": "arathunku", "id": 749393, "node_id": "MDQ6VXNlcjc0OTM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/749393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arathunku", "html_url": "https://github.com/arathunku", "followers_url": "https://api.github.com/users/arathunku/followers", "following_url": "https://api.github.com/users/arathunku/following{/other_user}", "gists_url": "https://api.github.com/users/arathunku/gists{/gist_id}", "starred_url": "https://api.github.com/users/arathunku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arathunku/subscriptions", "organizations_url": "https://api.github.com/users/arathunku/orgs", "repos_url": "https://api.github.com/users/arathunku/repos", "events_url": "https://api.github.com/users/arathunku/events{/privacy}", "received_events_url": "https://api.github.com/users/arathunku/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 23, "created_at": "2019-06-07T11:22:07Z", "updated_at": "2019-06-10T20:41:49Z", "closed_at": "2019-06-10T19:09:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n```\r\n> borg -V\r\nborg 1.1.10\r\n```\r\n\r\n#### Operating system (distribution) and version.\r\n```\r\n> lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Debian\r\nDescription:    Debian GNU/Linux 9.9 (stretch)\r\nRelease:        9.9\r\nCodename:       stretch\r\n\r\n```\r\n\r\n(I've the same problem on Ubuntu 18.04)\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\next4 on encrypted luks volume\r\n\r\n#### How much data is handled by borg?\r\n```\r\n> borg info\r\nRepository ID: 7c59174561a2f9cbbad17fc9b3d6738a03adb61c2a2d663b9f108b8d5c1447ac\r\nLocation: /tmp/borg-backups-blake2\r\nEncrypted: Yes (repokey BLAKE2b)\r\nCache: /home/arathunku/.cache/borg/7c59174561a2f9cbbad17fc9b3d6738a03adb61c2a2d663b9f108b8d5c1447ac\r\nSecurity dir: /home/arathunku/.config/borg/security/7c59174561a2f9cbbad17fc9b3d6738a03adb61c2a2d663b9f108b8d5c1447ac\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:               16.74 GB             13.60 GB             13.32 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  314126               347949\r\n\r\n```\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n```bash\r\nborg init --encryption=repokey-blake2 $BORG_REPO\r\n\r\nborg create                           \\\r\n      --verbose                       \\\r\n      --filter AME                    \\\r\n      --stats                         \\\r\n      --show-rc                       \\\r\n      --progress                      \\\r\n      --compression lz4               \\\r\n      --exclude-caches                \\\r\n      --exclude '/home/*/.cache/*'    \\\r\n      --exclude '/var/cache/*'        \\\r\n      --exclude '/var/tmp/*'          \\\r\n      --exclude '/home/**/*.cache/*'  \\\r\n      --exclude '**/target/*/debug'   \\\r\n      --exclude '**/target/debug'     \\\r\n      --exclude '**/code/**/_build/*' \\\r\n      --exclude '**/node_modules/*'   \\\r\n      --exclude '**/android/app/build'\\\r\n      --exclude '**/etc/ssh/ssh_*'    \\\r\n      --exclude '**/tmp/*'            \\\r\n                                      \\\r\n      ::'{hostname}-{now}'            \\\r\n      \"$HOME/code\"                    \r\n\r\nFri Jun  7 12:34:43 CEST 2019 Starting backup to: /tmp/borg-backups-blake2\r\n\r\n\r\nFri Jun  7 12:34:43 CEST 2019 You can observe it progress via tail -f run.log\r\n\r\nCreating archive at \"/tmp/borg-backups-blake2::arath-tp-2019-06-07T12:34:44\"\r\n------------------------------------------------------------------------------\r\nArchive name: arath-tp-2019-06-07T12:34:44\r\nArchive fingerprint: 2a98f567ccf4fd68258f4cec835a71e3aef62104ecd42ea08e6295bc7d227868\r\nTime (start): Fri, 2019-06-07 12:34:45\r\nTime (end):   Fri, 2019-06-07 12:56:57\r\nDuration: 22 minutes 11.91 seconds\r\nNumber of files: 342848\r\nUtilization of max. archive size: 0%\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               16.74 GB             13.60 GB             13.32 GB\r\nAll archives:               16.74 GB             13.60 GB             13.32 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  314126               347949\r\n------------------------------------------------------------------------------\r\nterminating with success status, rc 0\r\n\r\nFri Jun  7 12:57:05 CEST 2019 Pruning repository\r\n\r\n\r\n> borg list\r\narath-tp-2019-06-07T12:34:44         Fri, 2019-06-07 12:34:45 [2a98f567ccf4fd68258f4cec835a71e3aef62104ecd42ea08e6295bc7d227868]\r\n\r\n\r\n> borg extract $BORG_REPO::arath-tp-2019-06-07T12:34:44 home/arathunku/code/alacritty\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 166, in wrapper\r\n  File \"borg/archiver.py\", line 179, in wrapper\r\n  File \"borg/archiver.py\", line 760, in do_extract\r\n  File \"borg/archive.py\", line 467, in iter_items\r\n  File \"borg/archive.py\", line 236, in unpack_many\r\nKeyError: 'home/arathunku/code/alacritty/target/release/deps/alacritty-aa39d744337c2a77'\r\n\r\nPlatform: Linux arath-tp 4.9.0-8-amd64 #1 SMP Debian 4.9.144-3 (2019-02-02) x86_64\r\nLinux: debian 9.9\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 8272  CWD: /home/arathunku/dotfiles/backups\r\nsys.argv: ['borg', 'extract', '/tmp/borg-backups-blake2::arath-tp-2019-06-07T12:34:44', 'home/arathunku/code/alacritty']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n## Describe the problem you're observing.\r\n\r\nExtract fails\r\n```\r\n> borg extract --debug $BORG_REPO::arath-tp-2019-06-07T12:34:44 home/arathunku/code/alacritty\r\nusing builtin fallback logging configuration\r\n35 self tests completed in 0.12 seconds\r\nVerified integrity of /tmp/borg-backups-blake2/index.29\r\nTAM-verified manifest\r\nsecurity: read previous location '/tmp/borg-backups-blake2'\r\nsecurity: read manifest timestamp '2019-06-07T10:56:57.680016'\r\nsecurity: determined newest manifest timestamp as 2019-06-07T10:56:57.680016\r\nsecurity: repository checks ok, allowing access\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4501, in main\r\n  File \"borg/archiver.py\", line 4433, in run\r\n  File \"borg/archiver.py\", line 166, in wrapper\r\n  File \"borg/archiver.py\", line 179, in wrapper\r\n  File \"borg/archiver.py\", line 760, in do_extract\r\n  File \"borg/archive.py\", line 467, in iter_items\r\n  File \"borg/archive.py\", line 236, in unpack_many\r\nKeyError: 'home/arathunku/code/alacritty/target/release/deps/alacritty-aa39d744337c2a77'\r\n\r\nPlatform: Linux arath-tp 4.9.0-8-amd64 #1 SMP Debian 4.9.144-3 (2019-02-02) x86_64\r\nLinux: debian 9.9\r\nBorg: 1.1.10  Python: CPython 3.5.7 msgpack: 0.5.6\r\nPID: 12589  CWD: /home/arathunku/dotfiles/backups\r\nsys.argv: ['borg', 'extract', '--debug', '/tmp/borg-backups-blake2::arath-tp-2019-06-07T12:34:44', 'home/arathunku/code/alacritty']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nfile permissions:\r\n```\r\n> ls -al /home/arathunku/code/alacritty/target/release/deps/alacritty-aa39d744337c2a77\r\n.rwxr-xr-x 6.9M arathunku 17 Sep  2018 /home/arathunku/code/alacritty/target/release/deps/alacritty-aa39d744337c2a77\r\n```\r\n\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nI can reproduce the problem when I backup all of my projects in \"code\".\r\nI cannot reproduce the issue when I backup ONLY this one project - `alacritty` which is very strange.\r\nI was able to reproduce the issue on newly created repo (logs are from that one)\r\n\r\n```\r\n> borg check --info\r\nStarting repository check\r\nStarting repository index check\r\nCompleted repository check, no problems found.\r\nStarting archive consistency check...\r\nAnalyzing archive arath-tp-2019-06-07T12:34:44 (1/1)\r\nArchive consistency check complete, no problems found.\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nNo backtraces/warnings in sys log.\r\n\r\n<!--\r\n\r\nIf this complaint relates to borg performance, please include CRUD benchmark\r\nresults and any steps you took to troubleshoot.\r\nHow to run benchmark: http://borgbackup.readthedocs.io/en/stable/usage/benchmark.html\r\n\r\n*IMPORTANT* - Please mark logs and text output from terminal commands \r\nor else Github will not display them correctly. \r\nAn example is provided below.\r\n\r\nExample:\r\n```\r\nthis is an example how log text should be marked (wrap it with ```)\r\n```\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4411", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4411/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4411/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4411/events", "html_url": "https://github.com/borgbackup/borg/issues/4411", "id": 415973251, "node_id": "MDU6SXNzdWU0MTU5NzMyNTE=", "number": 4411, "title": "Compatibility issue (minor), error message in case of invalid repo.", "user": {"login": "jk-1", "id": 15061997, "node_id": "MDQ6VXNlcjE1MDYxOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/15061997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jk-1", "html_url": "https://github.com/jk-1", "followers_url": "https://api.github.com/users/jk-1/followers", "following_url": "https://api.github.com/users/jk-1/following{/other_user}", "gists_url": "https://api.github.com/users/jk-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jk-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jk-1/subscriptions", "organizations_url": "https://api.github.com/users/jk-1/orgs", "repos_url": "https://api.github.com/users/jk-1/repos", "events_url": "https://api.github.com/users/jk-1/events{/privacy}", "received_events_url": "https://api.github.com/users/jk-1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/59", "html_url": "https://github.com/borgbackup/borg/milestone/59", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/59/labels", "id": 4045439, "node_id": "MDk6TWlsZXN0b25lNDA0NTQzOQ==", "number": 59, "title": "1.1.10", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2019-02-11T01:56:21Z", "updated_at": "2019-12-22T12:02:53Z", "due_on": null, "closed_at": "2019-05-16T03:30:39Z"}, "comments": 0, "created_at": "2019-03-01T07:19:27Z", "updated_at": "2019-04-20T16:24:04Z", "closed_at": "2019-04-20T16:24:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compatibility issue (minor), error message in case of invalid repo.\r\n\r\nOld version\r\n\r\n\tjk@paju:~$ borg  --version\r\n\tborg 1.1.8\r\n\r\nRepo dir is not valid repo:\r\n\r\n\tjk@paju:~$ borg create ~/tmp::foo ~/tmp\r\n\t/home/jk/tmp is not a valid repository. Check repo config.\r\n\r\n\r\nRepo dir does not exist:\r\n\r\n\tjk@paju:~$ borg create ~/tmp/foo::foo ~/tmp\r\n\tRepository /home/jk/tmp/foo does not exist.\r\n\r\nLatest version\r\n\r\n\tjk@tiira:~$ borg --version\r\n\tborg 1.1.9\r\n\r\nRepo dir is not valid repo:\r\n\r\n\tjk@tiira:~$ borg create ~/tmp::foo ~/tmp\r\n\tException ignored in: <bound method Repository.__del__ of <Repository /home/jk/tmp>>\r\n\tTraceback (most recent call last):\r\n\t  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 179, in __del__\r\n\t    assert False, \"cleanup happened in Repository.__del__\"\r\n\tAssertionError: cleanup happened in Repository.__del__\r\n\tLocal Exception\r\n\tTraceback (most recent call last):\r\n\t  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4455, in main\r\n\t    exit_code = archiver.run(args)\r\n\t  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4387, in run\r\n    \treturn set_ec(func(args))\r\n\t  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 139, in wrapper\r\n    \twith repository:\r\n\t  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 189, in __enter__\r\n\t    self.open(self.path, bool(self.exclusive), lock_wait=self.lock_wait, lock=self.do_lock)\r\n\t  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 396, in open\r\n\t    with open(os.path.join(self.path, 'config')) as fd:\r\n\tFileNotFoundError: [Errno 2] No such file or directory: '/home/jk/tmp/config'\r\n\t\r\n\tPlatform: Linux tiira 4.4.0-142-generic #168-Ubuntu SMP Wed Jan 16 21:00:45 UTC 2019 x86_64\r\n\tLinux: Ubuntu 16.04 xenial\r\n\tBorg: 1.1.9  Python: CPython 3.5.2\r\n\tPID: 23536  CWD: /home/jk\r\n\tsys.argv: ['/usr/bin/borg', 'create', '/home/jk/tmp::foo', '/home/jk/tmp']\r\n\tSSH_ORIGINAL_COMMAND: None\r\n\r\nRepo dir does not exist:\r\n\t\r\n\tjk@tiira:~$ borg create ~/tmp/foo::foo ~/tmp\r\n\tRepository /home/jk/tmp/foo does not exist.\r\n\r\n\r\nPlease restore the v1.1.8 type of error message in case of invalid repo dir.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4405", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4405/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4405/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4405/events", "html_url": "https://github.com/borgbackup/borg/issues/4405", "id": 414514535, "node_id": "MDU6SXNzdWU0MTQ1MTQ1MzU=", "number": 4405, "title": "borg 1.2.0a2 cannot create backup of \"/\"", "user": {"login": "fantasya-pbem", "id": 39634976, "node_id": "MDQ6VXNlcjM5NjM0OTc2", "avatar_url": "https://avatars.githubusercontent.com/u/39634976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fantasya-pbem", "html_url": "https://github.com/fantasya-pbem", "followers_url": "https://api.github.com/users/fantasya-pbem/followers", "following_url": "https://api.github.com/users/fantasya-pbem/following{/other_user}", "gists_url": "https://api.github.com/users/fantasya-pbem/gists{/gist_id}", "starred_url": "https://api.github.com/users/fantasya-pbem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fantasya-pbem/subscriptions", "organizations_url": "https://api.github.com/users/fantasya-pbem/orgs", "repos_url": "https://api.github.com/users/fantasya-pbem/repos", "events_url": "https://api.github.com/users/fantasya-pbem/events{/privacy}", "received_events_url": "https://api.github.com/users/fantasya-pbem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/61", "html_url": "https://github.com/borgbackup/borg/milestone/61", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/61/labels", "id": 4082565, "node_id": "MDk6TWlsZXN0b25lNDA4MjU2NQ==", "number": 61, "title": "hydrogen-alpha4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-02-24T21:13:25Z", "updated_at": "2019-03-11T00:01:47Z", "due_on": null, "closed_at": "2019-03-11T00:01:47Z"}, "comments": 0, "created_at": "2019-02-26T09:35:40Z", "updated_at": "2019-02-26T10:58:34Z", "closed_at": "2019-02-26T10:58:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\nYes \u2013 I was advised by TW to create this issue.\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n```borg 1.2.0a2```\r\n\r\n#### Operating system (distribution) and version.\r\nDebian Stretch\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\next4\r\n\r\n#### How much data is handled by borg?\r\n~ 100 GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n```borg create /repo::complete_manual_4 /```\r\n\r\n## Describe the problem you're observing.\r\nBorg outputs error message:\r\n```/: [Errno 2] No such file or directory: ''```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYES\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\nnone\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4403", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4403/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4403/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4403/events", "html_url": "https://github.com/borgbackup/borg/issues/4403", "id": 414444741, "node_id": "MDU6SXNzdWU0MTQ0NDQ3NDE=", "number": 4403, "title": "1.2.0a2: Failing tests on OpenBSD current", "user": {"login": "bket", "id": 1864835, "node_id": "MDQ6VXNlcjE4NjQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1864835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bket", "html_url": "https://github.com/bket", "followers_url": "https://api.github.com/users/bket/followers", "following_url": "https://api.github.com/users/bket/following{/other_user}", "gists_url": "https://api.github.com/users/bket/gists{/gist_id}", "starred_url": "https://api.github.com/users/bket/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bket/subscriptions", "organizations_url": "https://api.github.com/users/bket/orgs", "repos_url": "https://api.github.com/users/bket/repos", "events_url": "https://api.github.com/users/bket/events{/privacy}", "received_events_url": "https://api.github.com/users/bket/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/61", "html_url": "https://github.com/borgbackup/borg/milestone/61", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/61/labels", "id": 4082565, "node_id": "MDk6TWlsZXN0b25lNDA4MjU2NQ==", "number": 61, "title": "hydrogen-alpha4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-02-24T21:13:25Z", "updated_at": "2019-03-11T00:01:47Z", "due_on": null, "closed_at": "2019-03-11T00:01:47Z"}, "comments": 5, "created_at": "2019-02-26T05:58:12Z", "updated_at": "2019-02-26T21:34:39Z", "closed_at": "2019-02-26T21:34:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I started playing with 1.2.0a2 on OpenBSD current by running the testsuite. Result is that there are numerous failing tests some of which the root cause is easy to fix, others I do not understand. What I found so far:\r\n\r\n- [x] `getxattr()` raises an `OSError` in [platform/base.py](https://github.com/borgbackup/borg/blob/master/src/borg/platform/base.py#L49) resulting in tests not even running\r\n- [x] `acl_get()` should accept an `fd` in  [platform/base.py](https://github.com/borgbackup/borg/blob/master/src/borg/platform/base.py#L64)\r\n- [x] `acl_set()` should accept an `fd` in  [platform/base.py](https://github.com/borgbackup/borg/blob/master/src/borg/platform/base.py#L72)\r\n- [x] self test `test_*` (borg.testsuite.crypto.CryptoTestCase). Any idea how to address the issue below?\r\n```\r\nborgbackup version 1.2.0a2\r\nself test test_AE (borg.testsuite.crypto.CryptoTestCase) FAILED:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ports/pobj/borgbackup-1.2.0a2/borgbackup-1.2.0a2/src/borg/testsuite/crypto.py\", line 115, in test_AE\r\n    hdr_mac_iv_cdata = cs.encrypt(data, header=header)\r\n  File \"src/borg/crypto/low_level.pyx\", line 544, in borg.crypto.low_level._AEAD_BASE.encrypt\r\nborg.crypto.low_level.CryptoError: EVP_EncryptInit_ex failed\r\n\r\nself test test_AEAD (borg.testsuite.crypto.CryptoTestCase) FAILED:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ports/pobj/borgbackup-1.2.0a2/borgbackup-1.2.0a2/src/borg/testsuite/crypto.py\", line 159, in test_AEAD\r\n    hdr_mac_iv_cdata = cs.encrypt(data, header=header)\r\n  File \"src/borg/crypto/low_level.pyx\", line 544, in borg.crypto.low_level._AEAD_BASE.encrypt\r\nborg.crypto.low_level.CryptoError: EVP_EncryptInit_ex failed\r\n\r\nself test failed\r\nThis is a bug either in Borg or in the package / distribution you use.\r\n```\r\nLatter issue has been fixed by #4407.\r\n\r\nAll tests run successfully on OpenBSD\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4403/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4350", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4350/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4350/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4350/events", "html_url": "https://github.com/borgbackup/borg/issues/4350", "id": 408681518, "node_id": "MDU6SXNzdWU0MDg2ODE1MTg=", "number": 4350, "title": "test runs hang frequently at the end", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/59", "html_url": "https://github.com/borgbackup/borg/milestone/59", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/59/labels", "id": 4045439, "node_id": "MDk6TWlsZXN0b25lNDA0NTQzOQ==", "number": 59, "title": "1.1.10", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2019-02-11T01:56:21Z", "updated_at": "2019-12-22T12:02:53Z", "due_on": null, "closed_at": "2019-05-16T03:30:39Z"}, "comments": 11, "created_at": "2019-02-11T08:49:13Z", "updated_at": "2019-05-11T20:14:44Z", "closed_at": "2019-05-11T20:14:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "happens in 1.1-maint branch (e.g. 1.1.9), not sure about other branches.\r\n\r\ntox runs on travis-ci and also in the vagrant machines frequently, but not always hang at the end (short before the test results are output). high cpu, no output.\r\n\r\ncould be related to coverage extension maybe?\r\n\r\nalso check if some version upgrade of testing tools / libs is causing this.\r\n\r\nhappens since ~4 weeks or so.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4289", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4289/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4289/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4289/events", "html_url": "https://github.com/borgbackup/borg/issues/4289", "id": 405087307, "node_id": "MDU6SXNzdWU0MDUwODczMDc=", "number": 4289, "title": "Disk space is calculated wrongly on macOS (and possibly elsewhere)", "user": {"login": "m3nu", "id": 3916435, "node_id": "MDQ6VXNlcjM5MTY0MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3916435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m3nu", "html_url": "https://github.com/m3nu", "followers_url": "https://api.github.com/users/m3nu/followers", "following_url": "https://api.github.com/users/m3nu/following{/other_user}", "gists_url": "https://api.github.com/users/m3nu/gists{/gist_id}", "starred_url": "https://api.github.com/users/m3nu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m3nu/subscriptions", "organizations_url": "https://api.github.com/users/m3nu/orgs", "repos_url": "https://api.github.com/users/m3nu/repos", "events_url": "https://api.github.com/users/m3nu/events{/privacy}", "received_events_url": "https://api.github.com/users/m3nu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/58", "html_url": "https://github.com/borgbackup/borg/milestone/58", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/58/labels", "id": 3882623, "node_id": "MDk6TWlsZXN0b25lMzg4MjYyMw==", "number": 58, "title": "1.1.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2018-12-09T03:10:41Z", "updated_at": "2019-02-11T01:56:11Z", "due_on": null, "closed_at": "2019-02-11T01:56:11Z"}, "comments": 2, "created_at": "2019-01-31T05:26:59Z", "updated_at": "2019-01-31T07:34:48Z", "closed_at": "2019-01-31T07:34:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n`1.2.0.dev`\r\n\r\n#### Operating system (distribution) and version.\r\nmacOS 10.14.3\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nAPFS file system\r\n\r\n#### How much data is handled by borg?\r\nless than 1 GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n`$ borg create --debug ~/Downloads/test-repo::jdkdjfdd ~/Pictures/wallpapers`\r\n\r\n## Describe the problem you're observing.\r\n\r\nI noticed that the free space calculation, as [done by borg](https://github.com/borgbackup/borg/blob/2bcff382cbe8d390cf526003697dfa2cf6b4cf47/src/borg/repository.py#L661) doesn't make sense on macOS:\r\n\r\n```\r\nIn [7]: st_vfs = os.statvfs('/')\r\n\r\nIn [8]: st_vfs.f_bavail * st_vfs.f_frsize\r\nOut[8]: 50595008512\r\n\r\nIn [9]: st_vfs.f_bavail * st_vfs.f_bsize\r\nOut[9]: 12952322179072\r\n\r\nIn [10]: os.statvfs('/')\r\nOut[10]: os.statvfs_result(f_bsize=1048576, f_frsize=4096, f_blocks=61202533, f_bfree=13309382, f_bavail=12351802, f_files=4294967295, f_ffree=4292317517, f_favail=4292317517, f_flag=0, f_namemax=255)\r\n```\r\n\r\n`f_bsize` is too high and results in ~13 TB of free space. (real value: ~50 GB). Apple's [docs](https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/statvfs.3.html) say that `f_bsize` is \"The preferred length of I/O requests for files on this file system.\", which doesn't sound like the block size.\r\n\r\n`f_frsize` may be the right variable. This is also mentioned in this older [SO issue](https://stackoverflow.com/questions/787776/find-free-disk-space-in-python-on-os-x). For Borg it may be best to just use the higher-level `shutil.disk_usage`. It seems to give the result we need: (same system as above)\r\n\r\n```\r\nIn [13]: shutil.disk_usage('/')\r\nOut[13]: usage(total=250685575168, used=196174888960, free=50588438528)\r\n```\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nYes\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n`$ borg create --debug ~/Downloads/test-repo::jdkdjfdd ~/Pictures/wallpapers`\r\n```\r\nusing builtin fallback logging configuration\r\n37 self tests completed in 0.14 seconds\r\nVerified integrity of /Users/manu/Downloads/test-repo/index.137\r\nEnter passphrase for key /Users/manu/Downloads/test-repo:\r\nTAM-verified manifest\r\nsecurity: read previous location '/Users/manu/Downloads/test-repo'\r\nsecurity: read manifest timestamp '2019-01-31T03:55:02.282390'\r\nsecurity: determined newest manifest timestamp as 2019-01-31T03:55:02.282390\r\nsecurity: repository checks ok, allowing access\r\nCreating archive at \"/Users/manu/Downloads/test-repo::jdkdjfdd\"\r\nVerified integrity of /Users/manu/.cache/borg/cc8bc42b3ae0b89e9d90453afa48a489601a5dc3c5769089ac7c6f22140b7593/chunks\r\nReading files cache ...\r\nVerified integrity of /Users/manu/.cache/borg/cc8bc42b3ae0b89e9d90453afa48a489601a5dc3c5769089ac7c6f22140b7593/files\r\nsecurity: read previous location '/Users/manu/Downloads/test-repo'\r\nsecurity: read manifest timestamp '2019-01-31T03:55:02.282390'\r\nsecurity: determined newest manifest timestamp as 2019-01-31T03:55:02.282390\r\nsecurity: repository checks ok, allowing access\r\nProcessing files ...\r\nCleaned up 0 uncommitted segment files (== everything after segment 137).\r\nVerified integrity of /Users/manu/Downloads/test-repo/hints.137\r\ncheck_free_space: few segments, not requiring a full free segment\r\ncheck_free_space: calculated working space for compact as 59173757 bytes\r\ncheck_free_space: required bytes -1999940656985, free bytes 13431432282112\r\n```\r\n\r\nLast line gives the wrong free disk space.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4289/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4272", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4272/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4272/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4272/events", "html_url": "https://github.com/borgbackup/borg/issues/4272", "id": 403831671, "node_id": "MDU6SXNzdWU0MDM4MzE2NzE=", "number": 4272, "title": "hardlinked repositories: a bad idea?", "user": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/58", "html_url": "https://github.com/borgbackup/borg/milestone/58", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/58/labels", "id": 3882623, "node_id": "MDk6TWlsZXN0b25lMzg4MjYyMw==", "number": 58, "title": "1.1.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2018-12-09T03:10:41Z", "updated_at": "2019-02-11T01:56:11Z", "due_on": null, "closed_at": "2019-02-11T01:56:11Z"}, "comments": 20, "created_at": "2019-01-28T14:09:29Z", "updated_at": "2019-01-30T15:07:59Z", "closed_at": "2019-01-29T18:37:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n\r\n1.1.8\r\n\r\n#### Operating system (distribution) and version.\r\n\r\nDebian buster 10\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\n\r\next4, external USB 1.5TB HDD\r\n\r\n#### How much data is handled by borg?\r\n\r\nAround two 80GB original size sets, 200GB deduplicated, after a dozen archives.\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\nSee below.\r\n\r\n## Describe the problem you're observing.\r\n\r\nI am seeing the same error as #3737 after doing some crazy hacks on a repository, but it's probably not due to a memory error and more a user error. Since others might have that trouble (and it might be something we want to avoid in the future), I figured I would report it as a bug, but maybe it could be resolved with a \"hell no don't do that\" FAQ... (for example [here](https://borgbackup.readthedocs.io/en/stable/faq.html#can-i-copy-or-synchronize-my-repo-to-another-location)). Here's the story:\r\n\r\nI had a repository (`/media/calyx/borg`, 1.5TB  HDD external USB) where I would backup my workstation (`curie`) and laptop (`angela`). It was a nice experiment showing that while you *can* backup multiple machines to the same repository, and it does save space in the repository, but it implies resyncing caches and files so it felt a bit slow.\r\n\r\nSo I figured I would try to split the repository in two. The plan was simple: copy the repository to `borg-curie` (and rename the original one to `borg-angela`) and remove the \"foreign\" archives from the other. So I started:\r\n\r\n    cp -al borg borg-curie\r\n    mv borg borg-angela\r\n    borg delete borg-angela::curie-2017-09-18\r\n\r\nThat archive was the oldest curie backup, if my memory is exact. Also note that I used hardlinks to avoid using too much space, a technique I took from the originally successful approach taken by `borg upgrade -i`. This probably is the cause of all my problems here.\r\n\r\nI lost the backtrace here, but once the `borg delete` completed on `borg-angela`, I couldn't create an archive in `borg-curie`. It failed with an error similar to #3737 which I can reproduce with `check`, below.\r\n\r\nAlso note that I tried to create a new archive while the delete was happening, but it led to a locking issue (which is fine). I also don't have the backtrace on that, unfortunately.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\nSimple reproducer:\r\n\r\n```\r\nanarcat@curie:test(master)$ borg init -e none borg\r\nanarcat@curie:test(master)$ borg create borg::curie-0 /etc/motd\r\nanarcat@curie:test(master)$ borg create borg::angela-0 /etc/motd\r\nanarcat@curie:test(master)$ cp -al borg borg-curie\r\nanarcat@curie:test(master)$ mv borg borg-angela\r\nanarcat@curie:test(master)$ borg list borg-angela\r\nWarning: The repository at location /home/anarcat/test/borg-angela was previously located at /home/anarcat/test/borg\r\nDo you want to continue? [yN] y\r\ncurie-0                              Mon, 2019-01-28 09:15:39 [2977f5f2cbe86cc04177038ff95775c0522a0e383c88bf94cd3c93be1a574fa6]\r\nangela-0                             Mon, 2019-01-28 09:15:55 [2e236af1c92ca1a9a371d21df7afcbb9bc16a3181297e7cf643170e6501e55a5]\r\nanarcat@curie:test(master)$ borg delete borg-angela::curie-0\r\nanarcat@curie:test(master)$ borg list borg-angela\r\nangela-0                             Mon, 2019-01-28 09:15:55 [2e236af1c92ca1a9a371d21df7afcbb9bc16a3181297e7cf643170e6501e55a5]\r\nanarcat@curie:test(master)$ borg list borg-curie\r\nData integrity error: Invalid segment entry header [segment 8, offset 2161]: unpack requires a buffer of 41 bytes\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4436, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4368, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 139, in wrapper\r\n    kwargs['manifest'], kwargs['key'] = Manifest.load(repository, compatibility)\r\n  File \"/usr/lib/python3/dist-packages/borg/helpers.py\", line 330, in load\r\n    cdata = repository.get(cls.MANIFEST_ID)\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1061, in get\r\n    return self.io.read(segment, offset, id)\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1392, in read\r\n    size, tag, key, data = self._read(fd, self.put_header_fmt, header, segment, offset, (TAG_PUT, ), read_data)\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1404, in _read\r\n    segment, offset, err)) from None\r\nborg.helpers.IntegrityError: Data integrity error: Invalid segment entry header [segment 8, offset 2161]: unpack requires a buffer of 41 bytes\r\n\r\nPlatform: Linux curie 4.19.0-1-amd64 #1 SMP Debian 4.19.12-1 (2018-12-22) x86_64\r\nLinux: debian buster/sid \r\nBorg: 1.1.8  Python: CPython 3.7.2\r\nPID: 341  CWD: /home/anarcat/test\r\nsys.argv: ['/usr/bin/borg', 'list', 'borg-curie']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThat's pretty close to what happened, except that in the above the `borg-angela` repository is still intact. In my situation, it's also corrupt.\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n\r\nAfter the crash, I have moved the repositories around and tried to fix my mistake by copying the repository in multiple copies I could work on:\r\n\r\n```\r\ncp -a borg-curie borg-curie2 && mv borg-curie borg-curie-hardlinks && mv borg-curie2 borg-curie-corrupt && cp -a borg-curie-corrupt borg-curie-corrupt-work\r\n```\r\n\r\nNow I have a copy of a copy of the repository in `borg-curie-corrupt-work` which I'll try to restore. It fails:\r\n\r\n```\r\nroot@curie:/media/calyx# borg check --repair --progress --verbose borg-curie-corrupt-work\r\n'check --repair' is an experimental feature that might result in data loss.\r\nType 'YES' if you understand this and want to continue: YES\r\nStarting repository check\r\nData integrity error: Invalid segment magic [segment 13193, offset 0]                                                                                                  \r\nattempting to recover /media/calyx/borg-curie-corrupt-work/data/1/13193\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 911, in check\r\n    objects = list(self.io.iter_objects(segment))\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1335, in iter_objects\r\n    raise IntegrityError('Invalid segment magic [segment {}, offset {}]'.format(segment, 0))\r\nborg.helpers.IntegrityError: Data integrity error: Invalid segment magic [segment 13193, offset 0]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4436, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4368, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 152, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 313, in do_check\r\n    if not repository.check(repair=args.repair, save_space=args.save_space):\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 916, in check\r\n    self.io.recover_segment(segment, filename)\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1364, in recover_segment\r\n    with mmap.mmap(backup_fd.fileno(), 0, access=mmap.ACCESS_READ) as mm:\r\nValueError: cannot mmap an empty file\r\n\r\nPlatform: Linux curie 4.19.0-1-amd64 #1 SMP Debian 4.19.12-1 (2018-12-22) x86_64\r\nLinux: debian buster/sid \r\nBorg: 1.1.8  Python: CPython 3.7.2\r\nPID: 16572  CWD: /media/calyx\r\nsys.argv: ['/usr/bin/borg', 'check', '--repair', '--progress', '--verbose', 'borg-curie-corrupt-work']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nWhat's \"funny\" is that even the `borg-angela` repository seems corrupt. I attached the output of `borg check` on the angela repository because it's fairly large.\r\n\r\n[angela-check.txt](https://github.com/borgbackup/borg/files/2803315/angela-check.txt)\r\n\r\nI'm currently running a `--repair` on that one as well, but makes me wonder if those repositories were healthy in the first place. But I was able to make a backup about a month ago without problems, here's the list of archives in `borg-angela` *before* the fateful move deleting that archive:\r\n\r\n```\r\nroot@curie:/media/calyx# borg list borg-angela\r\nWarning: The repository at location /media/calyx/borg-angela was previously located at /media/calyx/borg\r\nDo you want to continue? [yN] y\r\nangela-2015-10-15                    Thu, 2015-10-15 20:18:07 [3273fdc18f8a6a0622d52fea5fa7088f7d1c040e787a20a15182ef743a53884a]\r\nangela-2016-11-22                    Tue, 2016-11-22 18:36:58 [fbac7796fa580890d972da0b5dbcceb792744b1e6c5bafc159aaa63ed5ce41b6]\r\ncurie-2017-09-18                     Mon, 2017-09-18 18:49:05 [a8e51d8a2fe3d42bc0f7cafc576dbfa55ee362bc2e38256dd5afff4ef4bf924d]\r\ncurie-2018-08-22                     Wed, 2018-08-22 12:02:15 [4b5e7f0558f74a37b8cbb0036350120266fa8c2c023f92c33caf5e338a976dc8]\r\nangela-2018-10-23                    Tue, 2018-10-23 21:01:35 [8f958138dcb4079ab6dc317eb32235dc95abef9ab83107a6d17286587a2b8dbc]\r\ncurie-2018-11-14                     Wed, 2018-11-14 18:00:45 [3439b8d4dd2b6c82849e33d09b11c27bd7d1d78ea40d8e480b6eccb6f5ce75b6]\r\ncurie-2018-12-31                     Mon, 2018-12-31 15:11:25 [495fbcdaa375675651caac869ef1bdbb5e8747cfa17e7ab157e611dd31124f5b]\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4252", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4252/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4252/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4252/events", "html_url": "https://github.com/borgbackup/borg/issues/4252", "id": 398609396, "node_id": "MDU6SXNzdWUzOTg2MDkzOTY=", "number": 4252, "title": "Interrupted repo initialization creates broken remote repo", "user": {"login": "m3nu", "id": 3916435, "node_id": "MDQ6VXNlcjM5MTY0MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3916435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m3nu", "html_url": "https://github.com/m3nu", "followers_url": "https://api.github.com/users/m3nu/followers", "following_url": "https://api.github.com/users/m3nu/following{/other_user}", "gists_url": "https://api.github.com/users/m3nu/gists{/gist_id}", "starred_url": "https://api.github.com/users/m3nu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m3nu/subscriptions", "organizations_url": "https://api.github.com/users/m3nu/orgs", "repos_url": "https://api.github.com/users/m3nu/repos", "events_url": "https://api.github.com/users/m3nu/events{/privacy}", "received_events_url": "https://api.github.com/users/m3nu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/96", "html_url": "https://github.com/borgbackup/borg/milestone/96", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/96/labels", "id": 8693177, "node_id": "MI_kwDOAh3yxs4AhKW5", "number": 96, "title": "2.0.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2022-11-26T11:48:15Z", "updated_at": "2023-02-27T00:20:37Z", "due_on": null, "closed_at": "2023-02-27T00:20:37Z"}, "comments": 9, "created_at": "2019-01-13T01:32:34Z", "updated_at": "2023-02-01T14:18:51Z", "closed_at": "2023-02-01T14:18:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\nLinux on the server, macOS on the client. Latest Borg 1.1.8\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n`borg init --encryption=repokey backups.example.com:test-repo`\r\n\r\n## Describe the problem you're observing.\r\nThis was reported by BorgBase user Benjamin and successfully reproduced by me: When interrupting the `init` command at the password prompt, while using a remote repo, a broken repo without Manifest is created and can't be used. Doing the same locally results in no repo at all and the user can try again (expected behavior).\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n```\r\nmanu@nyx2: ~/Downloads $ borg init --encryption=repokey backups.example.com:test-repo\r\nEnter new passphrase: Connection closed by remote host  # Interrupted with Ctrl-C\r\nmanu@nyx2: ~/Downloads $ borg init --encryption=repokey backups.example.com:test-repo\r\nA repository already exists at backups.example.com:test-repo.\r\nmanu@nyx2: ~/Downloads $ borg info backups.example.com:test-repo\r\nRepository has no manifest.\r\n```\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\n```\r\nmanu@nyx2: ~/Downloads $ borg info --debug backups.example.com:test-repo\r\nusing builtin fallback logging configuration\r\n35 self tests completed in 0.11 seconds\r\nSSH command line: ['ssh', 'backups.example.com', 'borg', 'serve', '--umask=077', '--debug']\r\nRemote: using builtin fallback logging configuration\r\nRemote: 35 self tests completed in 0.16 seconds\r\nRemote: using builtin fallback logging configuration\r\nRemote: Initialized logging system for JSON-based protocol\r\nRemote: Resolving repository path b'test-repo'\r\nRemote: Resolved repository path to '/home/manu/test-repo'\r\nRemote: Traceback (most recent call last):\r\n\r\n  File \"/usr/local/lib/python3.4/dist-packages/borg/remote.py\", line 248, in serve\r\n    res = f(**args)\r\n\r\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 1063, in get\r\n    raise self.ObjectNotFound(id, self.path) from None\r\n\r\nborg.repository.ObjectNotFound: Object with key 0000000000000000000000000000000000000000000000000000000000000000 not found in repository /home/manu/test-repo.\r\n\r\nRemoteRepository: 182 B bytes sent, 2.45 kB bytes received, 4 messages sent\r\nRepository has no manifest.\r\nTraceback (most recent call last):\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/helpers.py\", line 330, in load\r\n    cdata = repository.get(cls.MANIFEST_ID)\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/remote.py\", line 924, in get\r\n    for resp in self.get_many([id]):\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/remote.py\", line 928, in get_many\r\n    for resp in self.call_many('get', [{'id': id} for id in ids], is_preloaded=is_preloaded):\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/remote.py\", line 773, in call_many\r\n    handle_error(unpacked)\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/remote.py\", line 750, in handle_error\r\n    raise Repository.ObjectNotFound(args[0].decode(), self.location.orig)\r\nborg.repository.Repository.ObjectNotFound: Object with key 0000000000000000000000000000000000000000000000000000000000000000 not found in repository backups.example.com:test-repo.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/archiver.py\", line 4436, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/archiver.py\", line 4368, in run\r\n    return set_ec(func(args))\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/archiver.py\", line 139, in wrapper\r\n    kwargs['manifest'], kwargs['key'] = Manifest.load(repository, compatibility)\r\n  File \"/Users/manu/.pyenv/versions/3.7.1/lib/python3.7/site-packages/borg/helpers.py\", line 332, in load\r\n    raise NoManifestError\r\nborg.helpers.NoManifestError: Repository has no manifest.\r\n\r\nPlatform: Darwin nyx2 18.2.0 Darwin Kernel Version 18.2.0: Mon Nov 12 20:24:46 PST 2018; root:xnu-4903.231.4~2/RELEASE_X86_64 x86_64\r\nBorg: 1.1.8  Python: CPython 3.7.1\r\nPID: 64051  CWD: /Users/manu/Downloads\r\nsys.argv: ['/Users/manu/.pyenv/versions/3.7.1/bin/borg', 'info', '--debug', 'backups.example.com:test-repo']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\nmanu@nyx2: ~/Downloads $ borg -V\r\nborg 1.1.8\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4249", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4249/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4249/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4249/events", "html_url": "https://github.com/borgbackup/borg/issues/4249", "id": 397936751, "node_id": "MDU6SXNzdWUzOTc5MzY3NTE=", "number": 4249, "title": "BORG_PASSCOMMAND example in FAQ wrong", "user": {"login": "reyman", "id": 466329, "node_id": "MDQ6VXNlcjQ2NjMyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/466329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyman", "html_url": "https://github.com/reyman", "followers_url": "https://api.github.com/users/reyman/followers", "following_url": "https://api.github.com/users/reyman/following{/other_user}", "gists_url": "https://api.github.com/users/reyman/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyman/subscriptions", "organizations_url": "https://api.github.com/users/reyman/orgs", "repos_url": "https://api.github.com/users/reyman/repos", "events_url": "https://api.github.com/users/reyman/events{/privacy}", "received_events_url": "https://api.github.com/users/reyman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/58", "html_url": "https://github.com/borgbackup/borg/milestone/58", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/58/labels", "id": 3882623, "node_id": "MDk6TWlsZXN0b25lMzg4MjYyMw==", "number": 58, "title": "1.1.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2018-12-09T03:10:41Z", "updated_at": "2019-02-11T01:56:11Z", "due_on": null, "closed_at": "2019-02-11T01:56:11Z"}, "comments": 14, "created_at": "2019-01-10T17:28:34Z", "updated_at": "2019-01-30T15:18:04Z", "closed_at": "2019-01-30T15:18:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* -  *before* creating a new issue please look around:\r\n - Borgbackup documentation: http://borgbackup.readthedocs.io/en/stable/index.html\r\n - FAQ: https://borgbackup.readthedocs.io/en/stable/faq.html\r\n and\r\n - open issues in Github tracker: https://github.com/borgbackup/borg/issues\r\n  \r\nIf you cannot find a similar problem, then create a new issue.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBug\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n1.1.8\r\n\r\n#### Operating system (distribution) and version.\r\nUbuntu 18.04 / zsh \r\n\r\n#### Hardware / network configuration, and filesystems used.\r\next 4\r\n\r\n#### How much data is handled by borg?\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n\r\n## Describe the problem you're observing.\r\n\r\nImpossibility to pass BORG_PASSCOMMAND using ohmyzsh and python virtual env\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\n\r\n\r\n1- Create a borg passphrase like indicated in the doc\r\n\r\n```\r\necho \"42spinAxis\" >> ~/.borg-passphrase\r\nchmod 400 ~/.borg-passphrase\r\n```\r\n\r\n2- Try to run borg create using PASSCOMMAND in a shell script : \r\n\r\n```\r\nexport REPOSITORY=/home/xxx/folder/to/save\r\nexport BORG_PASSCOMMAND=\"$(cat ~/.borg-passphrase)\"\r\nborg create --compression zlib,9 ${REPOSITORY}::'{hostname}-{now:%Y-%m-%d}' /home/reyman/backup\r\n```\r\n\r\nReturn this error : \r\n\r\n```\r\npasscommand supplied in BORG_PASSCOMMAND failed: [Errno 2] No such file or directory: '42spinAxis'\r\n```\r\n\r\nPs : i also try without success : \r\n\r\n```\r\nexport BORG_PASSCOMMAND=\"cat ~/.borg-passphrase\"\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/4093", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/4093/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/4093/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/4093/events", "html_url": "https://github.com/borgbackup/borg/issues/4093", "id": 366116912, "node_id": "MDU6SXNzdWUzNjYxMTY5MTI=", "number": 4093, "title": "Client can override server storage-quota", "user": {"login": "m3nu", "id": 3916435, "node_id": "MDQ6VXNlcjM5MTY0MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3916435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m3nu", "html_url": "https://github.com/m3nu", "followers_url": "https://api.github.com/users/m3nu/followers", "following_url": "https://api.github.com/users/m3nu/following{/other_user}", "gists_url": "https://api.github.com/users/m3nu/gists{/gist_id}", "starred_url": "https://api.github.com/users/m3nu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m3nu/subscriptions", "organizations_url": "https://api.github.com/users/m3nu/orgs", "repos_url": "https://api.github.com/users/m3nu/repos", "events_url": "https://api.github.com/users/m3nu/events{/privacy}", "received_events_url": "https://api.github.com/users/m3nu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211515661, "node_id": "MDU6TGFiZWwyMTE1MTU2NjE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/security", "name": "security", "color": "ff002f", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/57", "html_url": "https://github.com/borgbackup/borg/milestone/57", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/57/labels", "id": 3562692, "node_id": "MDk6TWlsZXN0b25lMzU2MjY5Mg==", "number": 57, "title": "1.1.8", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2018-08-11T19:46:33Z", "updated_at": "2018-12-09T03:10:27Z", "due_on": null, "closed_at": "2018-12-09T03:10:27Z"}, "comments": 7, "created_at": "2018-10-02T23:22:46Z", "updated_at": "2018-12-06T20:00:25Z", "closed_at": "2018-10-06T18:38:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nBUG\r\n\r\n## System information. For client/server mode post info for both machines.\r\n\r\n#### Your borg version (borg -V).\r\n1.1.7\r\n\r\n#### Operating system (distribution) and version.\r\nDebian 9\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\nExt4\r\n\r\n#### How much data is handled by borg?\r\n10MB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n- command run on client: `borg init -e none ssh://$REPO_HOST --storage-quota 1000M`\r\n- forced ssh command on server:`borg serve --restrict-to-repository /srv/repos/nz71ss19/repo --storage-quota 10M --append-only` (server)\r\n- result: backup repo on server is initialized with 1000M instead of 10M. Client was able to override the server quota.\r\n\r\n## Describe the problem you're observing.\r\nThe repo-config file always gets the quota specified by the client. Quota-enforcement is also as per client-set quota.\r\n\r\n#### Can you reproduce the problem? If so, describe how. If not, describe troubleshooting steps you took before opening the issue.\r\nRun client and server commands (set in ssh `command=`)\r\n\r\n#### Include any warning/errors/backtraces from the system logs\r\nNo errors\r\n\r\nPossible fix by extending `forced_result` as done in #4091", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/4093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/4093/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3808", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3808/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3808/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3808/events", "html_url": "https://github.com/borgbackup/borg/issues/3808", "id": 320772314, "node_id": "MDU6SXNzdWUzMjA3NzIzMTQ=", "number": 3808, "title": "attrs: [Errno 28] No space left on device: '<FD x>'", "user": {"login": "Thuffir", "id": 6106671, "node_id": "MDQ6VXNlcjYxMDY2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6106671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thuffir", "html_url": "https://github.com/Thuffir", "followers_url": "https://api.github.com/users/Thuffir/followers", "following_url": "https://api.github.com/users/Thuffir/following{/other_user}", "gists_url": "https://api.github.com/users/Thuffir/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thuffir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thuffir/subscriptions", "organizations_url": "https://api.github.com/users/Thuffir/orgs", "repos_url": "https://api.github.com/users/Thuffir/repos", "events_url": "https://api.github.com/users/Thuffir/events{/privacy}", "received_events_url": "https://api.github.com/users/Thuffir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/53", "html_url": "https://github.com/borgbackup/borg/milestone/53", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/53/labels", "id": 3231474, "node_id": "MDk6TWlsZXN0b25lMzIzMTQ3NA==", "number": 53, "title": "1.1.6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2018-03-30T16:33:49Z", "updated_at": "2018-06-11T11:14:35Z", "due_on": null, "closed_at": "2018-06-11T11:14:35Z"}, "comments": 16, "created_at": "2018-05-07T11:40:25Z", "updated_at": "2018-05-18T17:01:03Z", "closed_at": "2018-05-18T17:01:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\nNot sure. Probably just a question.\r\n\r\n## System information. For client/server mode post info for both machines.\r\n#### Your borg version (borg -V).\r\n    borg 1.1.5\r\n\r\n#### Operating system (distribution) and version.\r\n    Linux 4.9.0-6-amd64 #1 SMP Debian 4.9.82-1+deb9u2 (2018-02-21) x86_64 GNU/Linux\r\n    ntfs-3g 2016.2.22AR.1 integrated FUSE 28\r\n\r\n#### Hardware / network configuration, and filesystems used.\r\next4 / ntfs\r\n\r\n#### How much data is handled by borg?\r\napprox 500 GB\r\n\r\n#### Full borg commandline that lead to the problem (leave away excludes and passwords)\r\n    borg extract ::archivename\r\n\r\n## Describe the problem you're observing.\r\nI did a full backup of an NTFS drive (mounted on linux over ntfs-3g in read only mode).\r\n\r\nWhen I try to restore the files to an ext4 filesystem I get the following errors for some files:\r\n\r\n    attrs: [Errno 28] No space left on device: '<FD xx>'\r\n\r\nInterestingly the files I get those errors for are always picture files (BMP, TIFF,  JPG etc).\r\n\r\nSo I guess this might be some (x)attr incompatibility / limitation between NTFS and ext4 and nothing to worry about right?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3802", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3802/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3802/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3802/events", "html_url": "https://github.com/borgbackup/borg/issues/3802", "id": 319928804, "node_id": "MDU6SXNzdWUzMTk5Mjg4MDQ=", "number": 3802, "title": "Cannot configure a remote keyfile repository", "user": {"login": "vphantom", "id": 3063161, "node_id": "MDQ6VXNlcjMwNjMxNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3063161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vphantom", "html_url": "https://github.com/vphantom", "followers_url": "https://api.github.com/users/vphantom/followers", "following_url": "https://api.github.com/users/vphantom/following{/other_user}", "gists_url": "https://api.github.com/users/vphantom/gists{/gist_id}", "starred_url": "https://api.github.com/users/vphantom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vphantom/subscriptions", "organizations_url": "https://api.github.com/users/vphantom/orgs", "repos_url": "https://api.github.com/users/vphantom/repos", "events_url": "https://api.github.com/users/vphantom/events{/privacy}", "received_events_url": "https://api.github.com/users/vphantom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/53", "html_url": "https://github.com/borgbackup/borg/milestone/53", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/53/labels", "id": 3231474, "node_id": "MDk6TWlsZXN0b25lMzIzMTQ3NA==", "number": 53, "title": "1.1.6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2018-03-30T16:33:49Z", "updated_at": "2018-06-11T11:14:35Z", "due_on": null, "closed_at": "2018-06-11T11:14:35Z"}, "comments": 1, "created_at": "2018-05-03T13:49:15Z", "updated_at": "2018-05-18T23:05:24Z", "closed_at": "2018-05-18T23:05:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Have you checked borgbackup docs, FAQ, and open Github issues?\r\n\r\nYes\r\n\r\n## Is this a BUG / ISSUE report or a QUESTION?\r\n\r\nMore of an impossibility, not a bug per se.\r\n\r\n## Describe the problem you're observing.\r\n\r\nI created a remote repository with a local key:\r\n\r\n```sh\r\nborg init --remote-path=borg1 --encryption=keyfile userid@hostname:borg-repo-name\r\n```\r\n\r\nI cannot use `borg config` on that repository because it is remote:\r\n```text\r\nborg config --remote-path=borg1 userid@hostname:borg-repo-name additional_free_space 2G\r\n[...usage...]\r\nborg config: error: argument REPOSITORY: \"userid@hostname:borg-repo-name\": Repository must be local\r\n```\r\n\r\nI also cannot use `borg config` remotely either because Borg thinks it requires a key to do so (which it doesn't actually, as the config file is in clear text):\r\n```text\r\n$ ssh userid@hostname borg1 config borg-repo-name additional_free_space 2G\r\nNo key file for repository /data2/home/userid/borg-repo-name found in /data2/home/userid/.config/borg/keys.\r\n```\r\n\r\nMy recourse will be to download the file, modify it manually and upload it back.  Ideally, one of the two methods above should be made to work.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3606", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3606/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3606/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3606/events", "html_url": "https://github.com/borgbackup/borg/issues/3606", "id": 296124562, "node_id": "MDU6SXNzdWUyOTYxMjQ1NjI=", "number": 3606, "title": "zstd tests: are erroneously skipped", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 0, "created_at": "2018-02-10T19:03:41Z", "updated_at": "2018-02-10T20:49:42Z", "closed_at": "2018-02-10T20:49:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "in master and 1.1.x, the zstd tests were skipped because a not anymore used zstd import.\r\n\r\nborg initially used the \"zstd\" python binding, but later replaced this by an own Cython-based binding, so we do not have the zstd module installed any more - thus the tests checking for that were always skipped.\r\n\r\nnote: no impact on productive use of borg.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3574", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3574/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3574/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3574/events", "html_url": "https://github.com/borgbackup/borg/issues/3574", "id": 290991522, "node_id": "MDU6SXNzdWUyOTA5OTE1MjI=", "number": 3574, "title": "extract always fails with \"No space left on device\"", "user": {"login": "keepitsimpleengineer", "id": 18517338, "node_id": "MDQ6VXNlcjE4NTE3MzM4", "avatar_url": "https://avatars.githubusercontent.com/u/18517338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keepitsimpleengineer", "html_url": "https://github.com/keepitsimpleengineer", "followers_url": "https://api.github.com/users/keepitsimpleengineer/followers", "following_url": "https://api.github.com/users/keepitsimpleengineer/following{/other_user}", "gists_url": "https://api.github.com/users/keepitsimpleengineer/gists{/gist_id}", "starred_url": "https://api.github.com/users/keepitsimpleengineer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keepitsimpleengineer/subscriptions", "organizations_url": "https://api.github.com/users/keepitsimpleengineer/orgs", "repos_url": "https://api.github.com/users/keepitsimpleengineer/repos", "events_url": "https://api.github.com/users/keepitsimpleengineer/events{/privacy}", "received_events_url": "https://api.github.com/users/keepitsimpleengineer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/49", "html_url": "https://github.com/borgbackup/borg/milestone/49", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/49/labels", "id": 2888021, "node_id": "MDk6TWlsZXN0b25lMjg4ODAyMQ==", "number": 49, "title": "1.1.x", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2017-11-04T21:04:31Z", "updated_at": "2022-06-29T17:50:51Z", "due_on": null, "closed_at": "2022-02-20T14:05:16Z"}, "comments": 14, "created_at": "2018-01-23T21:02:16Z", "updated_at": "2018-09-14T15:26:41Z", "closed_at": "2018-09-14T15:26:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "A 201 GB backup for simple Windows 10 system from a USB drive extract always fails with No space left on device.\r\n\r\nAll on local system\r\nSource partition:797.6 GB free (USB3)\r\nCache partition:66.6 GB free (SSD)\r\nDestination partition: 976.6 GB free (HDD)\r\nSystem memory: 15.6 GB\r\nborg (borgbackup) 1.1.4-1\r\nencryption  none\r\ncompression zlib,5\r\npython 3.6.4-1\r\n\r\nOSError: [Errno 28] No space left on device\r\n\r\nOutput with trace back at https://pastebin.com/arH7Pjbu\r\n\r\nSuggestion to post this as an issue at  https://bbs.archlinux.org/viewtopic.php?id=233815\r\n\r\nWorkaround was to add a few hundred GB to ~/.cache/borg", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3574/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3574/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3566", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3566/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3566/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3566/events", "html_url": "https://github.com/borgbackup/borg/issues/3566", "id": 290083230, "node_id": "MDU6SXNzdWUyOTAwODMyMzA=", "number": 3566, "title": "borg config does not validate values which prevent further operations against repository", "user": {"login": "MichaelDays", "id": 13177547, "node_id": "MDQ6VXNlcjEzMTc3NTQ3", "avatar_url": "https://avatars.githubusercontent.com/u/13177547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaelDays", "html_url": "https://github.com/MichaelDays", "followers_url": "https://api.github.com/users/MichaelDays/followers", "following_url": "https://api.github.com/users/MichaelDays/following{/other_user}", "gists_url": "https://api.github.com/users/MichaelDays/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaelDays/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaelDays/subscriptions", "organizations_url": "https://api.github.com/users/MichaelDays/orgs", "repos_url": "https://api.github.com/users/MichaelDays/repos", "events_url": "https://api.github.com/users/MichaelDays/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaelDays/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 8, "created_at": "2018-01-19T19:32:49Z", "updated_at": "2022-12-23T23:05:20Z", "closed_at": "2018-03-05T22:40:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "If additional_free_space is set to a value that cannot be converted to a float, further operations against the repo fail, including setting it to an appropriate value or deleting the config key with `borg config -d additional_free_space`.\r\n\r\n(I encountered this because I set `additional_free_space` to `2Gb` not `2G`, with hilarious results).\r\n\r\nTo reproduce:\r\n\r\n```\r\n $ brew cask install borgbackup\r\n $ borg init --encryption=repokey '/tmp/testrepo' \r\n $ borg create '/tmp/testrepo'::archive1 ~/testfile\r\n $ borg config '/tmp/testrepo' additional_free_space splatvalue\r\n $ borg create '/tmp/testrepo'::archive2 ~/testfile\r\n \r\n Exception ignored in: <bound method Repository.__del__ of <Repository /tmp/testrepo>>\r\n Traceback (most recent call last):\r\n   File \"borg/repository.py\", line 171, in __del__\r\n AssertionError: cleanup happened in Repository.__del__\r\n Local Exception\r\n Traceback (most recent call last):\r\n   File \"borg/archiver.py\", line 4175, in main\r\n   File \"borg/archiver.py\", line 4107, in run\r\n   File \"borg/archiver.py\", line 137, in wrapper\r\n   File \"borg/repository.py\", line 181, in __enter__\r\n   File \"borg/repository.py\", line 387, in open\r\n   File \"borg/helpers.py\", line 828, in parse_file_size\r\n ValueError: could not convert string to float: 'splatvalue'\r\n \r\n Platform: Darwin kyriarchy.local 17.3.0 Darwin Kernel Version 17.3.0: Thu Nov  9 18:09:22 PST 017; root:xnu-4570.31.3~1/RELEASE_X86_64 x86_64 i386\r\n Borg: 1.1.4  Python: CPython 3.5.4\r\n PID: 40474  CWD: /Users/additional_free_space\r\n sys.argv: ['borg', 'create', 'splatvalue::2018-01-19-18-52', '/Users/days']\r\n SSH_ORIGINAL_COMMAND: None\r\n \r\n $borg config -d ''/tmp/testrepo' additional_free_space\r\nException ignored in: <bound method Repository.__del__ of <Repository /tmp/test>>\r\nTraceback (most recent call last):\r\n  File \"borg/repository.py\", line 171, in __del__\r\nAssertionError: cleanup happened in Repository.__del__\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4175, in main\r\n  File \"borg/archiver.py\", line 4107, in run\r\n  File \"borg/archiver.py\", line 137, in wrapper\r\n  File \"borg/repository.py\", line 181, in __enter__\r\n  File \"borg/repository.py\", line 387, in open\r\n  File \"borg/helpers.py\", line 828, in parse_file_size\r\nValueError: could not convert string to float: 'splat'\r\n\r\nPlatform: Darwin kyriarchy.local 17.3.0 Darwin Kernel Version 17.3.0: Thu Nov  9 18:09:22 PST 2017; root:xnu-4570.31.3~1/RELEASE_X86_64 x86_64 i386\r\nBorg: 1.1.4  Python: CPython 3.5.4\r\nPID: 40642  CWD: /Users/days\r\nsys.argv: ['borg', 'config', '-d', '/tmp/test', 'additional_free_space']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3566/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3553", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3553/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3553/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3553/events", "html_url": "https://github.com/borgbackup/borg/issues/3553", "id": 289014609, "node_id": "MDU6SXNzdWUyODkwMTQ2MDk=", "number": 3553, "title": "bad files cache stops backup - instead of recreating cache", "user": {"login": "nealpalmer", "id": 20478462, "node_id": "MDQ6VXNlcjIwNDc4NDYy", "avatar_url": "https://avatars.githubusercontent.com/u/20478462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nealpalmer", "html_url": "https://github.com/nealpalmer", "followers_url": "https://api.github.com/users/nealpalmer/followers", "following_url": "https://api.github.com/users/nealpalmer/following{/other_user}", "gists_url": "https://api.github.com/users/nealpalmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/nealpalmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nealpalmer/subscriptions", "organizations_url": "https://api.github.com/users/nealpalmer/orgs", "repos_url": "https://api.github.com/users/nealpalmer/repos", "events_url": "https://api.github.com/users/nealpalmer/events{/privacy}", "received_events_url": "https://api.github.com/users/nealpalmer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 2, "created_at": "2018-01-16T18:42:30Z", "updated_at": "2018-01-21T11:14:13Z", "closed_at": "2018-01-21T11:14:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Problem happened again.  I upgraded to 1.1.4, and it doesn't automatically re-create the \"files\" cache when I run \"create\".\r\n\r\nHow do I force Borg to recreate the files cache?  Shouldn't it automatically recreate it when it is found to be invalid?\r\n\r\nSee also: #3537 \r\n\r\n> File failed integrity check: /home/pi/.cache/53f95bf25bdb1d96526e6de3ac66acb9b1e01a3d3bf30b184a4dab2f1057135b/files\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4175, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4107, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 150, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 545, in do_create\r\n    create_inner(archive, cache)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 508, in create_inner\r\n    read_special=args.read_special, dry_run=dry_run, st=st)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 619, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 596, in _process\r\n    status = archive.process_file(path, st, cache, self.ignore_inode, self.files_cache_mode)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 988, in process_file\r\n    ids = cache.file_known_and_unchanged(path_hash, st, ignore_inode, files_cache_mode)\r\n  File \"/usr/lib/python3/dist-packages/borg/cache.py\", line 917, in file_known_and_unchanged\r\n    self._read_files()\r\n  File \"/usr/lib/python3/dist-packages/borg/cache.py\", line 523, in _read_files\r\n    return\r\n  File \"/usr/lib/python3/dist-packages/borg/crypto/file_integrity.py\", line 193, in __exit__\r\n    self.hash_part('final', is_final=True)\r\n  File \"/usr/lib/python3/dist-packages/borg/crypto/file_integrity.py\", line 188, in hash_part\r\n    raise FileIntegrityError(self.path)\r\nborg.crypto.file_integrity.FileIntegrityError: File failed integrity check: /home/pi/.cache/53f95bf25bdb1d96526e6de3ac66acb9b1e01a3d3bf30b184a4dab2f1057135b/files\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3548", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3548/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3548/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3548/events", "html_url": "https://github.com/borgbackup/borg/issues/3548", "id": 288720452, "node_id": "MDU6SXNzdWUyODg3MjA0NTI=", "number": 3548, "title": "Placeholders {now} and {utcnow} are replaced with timestamps microseconds apart", "user": {"login": "BlessJah", "id": 835808, "node_id": "MDQ6VXNlcjgzNTgwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/835808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlessJah", "html_url": "https://github.com/BlessJah", "followers_url": "https://api.github.com/users/BlessJah/followers", "following_url": "https://api.github.com/users/BlessJah/following{/other_user}", "gists_url": "https://api.github.com/users/BlessJah/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlessJah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlessJah/subscriptions", "organizations_url": "https://api.github.com/users/BlessJah/orgs", "repos_url": "https://api.github.com/users/BlessJah/repos", "events_url": "https://api.github.com/users/BlessJah/events{/privacy}", "received_events_url": "https://api.github.com/users/BlessJah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-01-15T21:26:28Z", "updated_at": "2018-03-27T20:52:38Z", "closed_at": "2018-03-27T20:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Both `{now}` and `{utcnow}` should point to exact same moment, save for timezone adjustment. They are not, because current time is queried twice when replacing placeholders:\r\n\r\nBorg version: 1.0.11, but master is also affected.\r\n\r\nhttps://github.com/borgbackup/borg/blob/26f1cd148603e2c2762c5f27ef56bf5b9ca17d18/src/borg/helpers/parseformat.py#L189\r\n\r\n```\r\n$ borg create \\\r\n  --info \\\r\n  --stats \\\r\n  ':: utcnow: {utcnow:%H:%M:%S.%f}, now: {now:%H:%M:%S.%f}' \\\r\n  /dev/null\r\n------------------------------------------------------------------------------\r\nArchive name:  utcnow: 21:16:01.582465, now: 22:16:01.582458\r\nArchive fingerprint: ...\r\nTime (start): Mon, 2018-01-15 22:16:03\r\nTime (end):   Mon, 2018-01-15 22:16:03\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3545", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3545/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3545/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3545/events", "html_url": "https://github.com/borgbackup/borg/issues/3545", "id": 288619825, "node_id": "MDU6SXNzdWUyODg2MTk4MjU=", "number": 3545, "title": "stat() errors in scandir_generic() cause the whole directory to be skipped", "user": {"login": "leo-b", "id": 6097948, "node_id": "MDQ6VXNlcjYwOTc5NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/6097948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leo-b", "html_url": "https://github.com/leo-b", "followers_url": "https://api.github.com/users/leo-b/followers", "following_url": "https://api.github.com/users/leo-b/following{/other_user}", "gists_url": "https://api.github.com/users/leo-b/gists{/gist_id}", "starred_url": "https://api.github.com/users/leo-b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leo-b/subscriptions", "organizations_url": "https://api.github.com/users/leo-b/orgs", "repos_url": "https://api.github.com/users/leo-b/repos", "events_url": "https://api.github.com/users/leo-b/events{/privacy}", "received_events_url": "https://api.github.com/users/leo-b/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 4, "created_at": "2018-01-15T14:52:10Z", "updated_at": "2018-01-19T21:43:57Z", "closed_at": "2018-01-19T21:43:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When backing up a directory, ``scandir_inorder()`` is used to read the directory entries ordered by inode number:\r\nhttps://github.com/borgbackup/borg/blob/1.1.4/src/borg/archiver.py#L613-L614\r\nhttps://github.com/borgbackup/borg/blob/1.1.4/src/borg/helpers.py#L2104-L2105\r\n\r\n If the ``scandir_generic()`` implementation is used (python3.4 without the scandir package installed), the implicit `stat()` that is done on ``dirent.inode()`` will raise `Permission denied` e.g. on fuse mountpoints without `allow_other`. As a result, the whole directory will be skipped just because of one failing stat.\r\nhttps://github.com/borgbackup/borg/blob/1.1.4/src/borg/helpers.py#L2046-L2090\r\n\r\n1.) A failing ``stat()`` should only skip the corresponding directory entry.\r\n2.) If the ``stat()`` fails on a directory entry that is going to be skipped anyway, the error message should be suppressed.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3544", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3544/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3544/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3544/events", "html_url": "https://github.com/borgbackup/borg/issues/3544", "id": 288575427, "node_id": "MDU6SXNzdWUyODg1NzU0Mjc=", "number": 3544, "title": "ascii decoding of header files can lead to UnicodeDecodeError", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 717220983, "node_id": "MDU6TGFiZWw3MTcyMjA5ODM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/good%20first%20issue", "name": "good first issue", "color": "7536af", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 1, "created_at": "2018-01-15T12:17:23Z", "updated_at": "2018-01-29T16:50:44Z", "closed_at": "2018-01-29T16:50:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/borgbackup/borg/blob/1.1.4/setup_lz4.py#L27 e.g. there, but also some other places for other header files.\r\n\r\nhttps://github.com/openbsd/ports/commit/1232bc2b8d672eb5b4fa1873e0402f2d94da3101", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3470", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3470/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3470/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3470/events", "html_url": "https://github.com/borgbackup/borg/issues/3470", "id": 284136151, "node_id": "MDU6SXNzdWUyODQxMzYxNTE=", "number": 3470, "title": "`borg init --storage-quota` not working properly?", "user": {"login": "sersorrel", "id": 9433472, "node_id": "MDQ6VXNlcjk0MzM0NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/9433472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sersorrel", "html_url": "https://github.com/sersorrel", "followers_url": "https://api.github.com/users/sersorrel/followers", "following_url": "https://api.github.com/users/sersorrel/following{/other_user}", "gists_url": "https://api.github.com/users/sersorrel/gists{/gist_id}", "starred_url": "https://api.github.com/users/sersorrel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sersorrel/subscriptions", "organizations_url": "https://api.github.com/users/sersorrel/orgs", "repos_url": "https://api.github.com/users/sersorrel/repos", "events_url": "https://api.github.com/users/sersorrel/events{/privacy}", "received_events_url": "https://api.github.com/users/sersorrel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/51", "html_url": "https://github.com/borgbackup/borg/milestone/51", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/51/labels", "id": 2938217, "node_id": "MDk6TWlsZXN0b25lMjkzODIxNw==", "number": 51, "title": "1.1.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2017-11-27T05:16:20Z", "updated_at": "2017-12-30T12:11:28Z", "due_on": null, "closed_at": "2017-12-30T12:11:28Z"}, "comments": 5, "created_at": "2017-12-22T11:05:31Z", "updated_at": "2017-12-23T00:18:36Z", "closed_at": "2017-12-23T00:18:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I ran `borg init --encryption keyfile --storage-quota 300G --progress --show-version --show-rc /repo`, but the `/repo/config` file has `storage_quota = 0`. Is this expected? If not, what format should the number in the config file be in? (looks like bytes from reading the source, but I'd like to check)", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3448", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3448/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3448/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3448/events", "html_url": "https://github.com/borgbackup/borg/issues/3448", "id": 282642716, "node_id": "MDU6SXNzdWUyODI2NDI3MTY=", "number": 3448, "title": "borg extract --dry-run return code ", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/52", "html_url": "https://github.com/borgbackup/borg/milestone/52", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/52/labels", "id": 3004400, "node_id": "MDk6TWlsZXN0b25lMzAwNDQwMA==", "number": 52, "title": "1.1.5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 33, "state": "closed", "created_at": "2017-12-30T12:12:14Z", "updated_at": "2018-03-30T16:33:35Z", "due_on": null, "closed_at": "2018-03-30T16:33:35Z"}, "comments": 1, "created_at": "2017-12-16T18:52:24Z", "updated_at": "2018-03-25T18:47:40Z", "closed_at": "2018-03-25T18:47:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "when extracting an archive that has files with all-zero replacement chunks, `borg extract --dry-run` emits warnings about these files being damaged.\r\n\r\nbut still it returns with rc = 0.\r\n\r\ncheck also without --dry-run.\r\n\r\nborg 1.1.3+", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3444", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3444/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3444/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3444/events", "html_url": "https://github.com/borgbackup/borg/issues/3444", "id": 282575601, "node_id": "MDU6SXNzdWUyODI1NzU2MDE=", "number": 3444, "title": "borg check --repair runs very slow (and corrupts archives)", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/51", "html_url": "https://github.com/borgbackup/borg/milestone/51", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/51/labels", "id": 2938217, "node_id": "MDk6TWlsZXN0b25lMjkzODIxNw==", "number": 51, "title": "1.1.4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2017-11-27T05:16:20Z", "updated_at": "2017-12-30T12:11:28Z", "due_on": null, "closed_at": "2017-12-30T12:11:28Z"}, "comments": 3, "created_at": "2017-12-15T23:31:33Z", "updated_at": "2017-12-17T02:13:13Z", "closed_at": "2017-12-17T02:13:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from @bebehei on IRC (IRC log shortened):\r\n\r\nborg 1.1.3 on client and server, running borg check --repair on a corrupt repository hangs for >5h after emitting a msg about missing metadata.\r\n\r\n\r\n```\r\n23:11  bebehei$ Now it happened: Oh, the metadata chunk is missing.\r\n23:12  bebehei$ strace output slowed down immediately\r\n23:16  bebehei$ item metadata chunk missing [chunk: 001056_bdee87d...a3e50d]\r\n23:16  bebehei$ But the borg serve process is dead.\r\n23:22  ThomasWaldmann$ archive.py:1497 is the place where that msg gets emitted\r\n```\r\n\r\nBounty: https://www.bountysource.com/issues/52774936-borg-check-repair-hangs-infinitely", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3444/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3347", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3347/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3347/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3347/events", "html_url": "https://github.com/borgbackup/borg/issues/3347", "id": 276064542, "node_id": "MDU6SXNzdWUyNzYwNjQ1NDI=", "number": 3347, "title": "FUSE should suppress .borg_part_N files", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/50", "html_url": "https://github.com/borgbackup/borg/milestone/50", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/50/labels", "id": 2890017, "node_id": "MDk6TWlsZXN0b25lMjg5MDAxNw==", "number": 50, "title": "1.1.3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2017-11-06T10:04:11Z", "updated_at": "2017-11-27T05:16:02Z", "due_on": "2017-11-26T08:00:00Z", "closed_at": "2017-11-27T05:16:02Z"}, "comments": 1, "created_at": "2017-11-22T13:19:00Z", "updated_at": "2017-11-23T21:43:42Z", "closed_at": "2017-11-23T21:43:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from IRC user Stumpz:\r\n\r\nWhen a volume is mounted, why do you see files that say .borg_part_1 and .borg_part_2 at the end?\r\n\r\nLooks like the whole file might be above that. Is there a reason the parts are displayed?\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3347/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3347/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3317", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3317/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3317/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3317/events", "html_url": "https://github.com/borgbackup/borg/issues/3317", "id": 273226625, "node_id": "MDU6SXNzdWUyNzMyMjY2MjU=", "number": 3317, "title": "crc32_slice_by_8 alignment issue on armhf", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/50", "html_url": "https://github.com/borgbackup/borg/milestone/50", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/50/labels", "id": 2890017, "node_id": "MDk6TWlsZXN0b25lMjg5MDAxNw==", "number": 50, "title": "1.1.3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2017-11-06T10:04:11Z", "updated_at": "2017-11-27T05:16:02Z", "due_on": "2017-11-26T08:00:00Z", "closed_at": "2017-11-27T05:16:02Z"}, "comments": 6, "created_at": "2017-11-12T12:50:22Z", "updated_at": "2017-11-14T17:40:56Z", "closed_at": "2017-11-14T17:40:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "seen in ubuntu bionic testing by @LocutusOfBorg, reproduced by Elladan (IRC):\r\n\r\n```\r\nNov 11 19:17:36 pumpkin kernel: [25372.479551] Alignment trap: python3.6 (9704)\r\n                 PC=0x75427c78 Instr=0xe955b402 Address=0x76f65039 FSR 0x001\r\n```\r\nAlignment trap confirmed :-)\r\n\r\nBus error raised by:\r\n```\r\n#4  crc32_slice_by_8\r\n    (data=0x76fa2039, length=<optimized out>, previousCrc32=<optimized out>)\r\n    at src/borg/algorithms/crc32_slice_by_8.c:358\r\n#5  0x76462e4e in __pyx_pf_4borg_10algorithms_9checksums_crc32_slice_by_8\r\n    (__pyx_self=<optimized out>, __pyx_v_value=<optimized out>, __pyx_v_data=<optimized out>)\r\n    at src/borg/algorithms/checksums.c:1341\r\n```\r\nBug was no repro with armhf xenial w/Python 3.5, reprod with bionic w/Python 3.6.\r\n\r\nLegible stack trace here: http://rn0.me/show/8jem6kLzNkvHWldCYfzq/\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3265", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3265/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3265/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3265/events", "html_url": "https://github.com/borgbackup/borg/issues/3265", "id": 271167999, "node_id": "MDU6SXNzdWUyNzExNjc5OTk=", "number": 3265, "title": "stale file handle when checkpointing", "user": {"login": "richardilles", "id": 33366014, "node_id": "MDQ6VXNlcjMzMzY2MDE0", "avatar_url": "https://avatars.githubusercontent.com/u/33366014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richardilles", "html_url": "https://github.com/richardilles", "followers_url": "https://api.github.com/users/richardilles/followers", "following_url": "https://api.github.com/users/richardilles/following{/other_user}", "gists_url": "https://api.github.com/users/richardilles/gists{/gist_id}", "starred_url": "https://api.github.com/users/richardilles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richardilles/subscriptions", "organizations_url": "https://api.github.com/users/richardilles/orgs", "repos_url": "https://api.github.com/users/richardilles/repos", "events_url": "https://api.github.com/users/richardilles/events{/privacy}", "received_events_url": "https://api.github.com/users/richardilles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/55", "html_url": "https://github.com/borgbackup/borg/milestone/55", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/55/labels", "id": 3378290, "node_id": "MDk6TWlsZXN0b25lMzM3ODI5MA==", "number": 55, "title": "1.2.0 release (aka hydrogen)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 50, "state": "closed", "created_at": "2018-05-26T12:32:09Z", "updated_at": "2022-03-07T11:43:27Z", "due_on": "2022-02-22T08:00:00Z", "closed_at": "2022-02-22T21:26:51Z"}, "comments": 16, "created_at": "2017-11-04T05:22:25Z", "updated_at": "2020-05-04T00:08:01Z", "closed_at": "2018-06-29T21:46:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since upgrading this error keeps happening when I hit large zip files. tried all types of compression, no difference. this was working fine with 1.0.1\r\n```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4024, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 3952, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 148, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 528, in do_create\r\n    create_inner(archive, cache)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 492, in create_inner\r\n    read_special=args.read_special, dry_run=dry_run, st=st)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 593, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 593, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 593, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 593, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 571, in _process\r\n    status = archive.process_file(path, st, cache, self.ignore_inode, self.files_cache_mode)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 991, in process_file\r\n    self.chunk_file(item, cache, self.stats, backup_io_iter(self.chunker.chunkify(fd, fh)))\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 923, in chunk_file\r\n    from_chunk, part_number = self.write_part_file(item, from_chunk, part_number)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 905, in write_part_file\r\n    self.write_checkpoint()\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 438, in write_checkpoint\r\n    self.save(self.checkpoint_name)\r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 476, in save\r\n    self.manifest.write()\r\n  File \"/usr/lib/python3/dist-packages/borg/helpers.py\", line 410, in write\r\n    self.repository.put(self.MANIFEST_ID, self.key.encrypt(data))\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1048, in put\r\n    size = self.io.read(segment, offset, id, read_data=False)\r\n  File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 1356, in read\r\n    header = fd.read(self.put_header_fmt.size)\r\nOSError: [Errno 116] Stale file handle\r\n\r\nPlatform: Linux Alexis-Machine 4.11.0-14-generic #20~16.04.1-Ubuntu SMP Wed Aug 9 09:06:22 UTC 2017 x86_64 x86_64\r\nLinux: LinuxMint 18.2 sonya\r\nBorg: 1.1.0  Python: CPython 3.5.2\r\nPID: 22212  CWD: /etc/cron.monthly\r\nsys.argv: ['/usr/bin/borg', 'create', '--debug', '--exclude-caches', '--list', '--one-file-system', '/mnt/backup/borg-data-repo::data-{now:%Y-%m-%d}', '/media/ironStorage/mail', '/media/ironStorage/Users', '/media/ironStorage/media/_Books', '/media/ironStorage/media/_NewMusic', '/media/ironStorage/Files', '/media/ironStorage/sys-backups', '/media/ironStorage/media/mp3', '/media/ironStorage/Temp', '/media/redStorage/Public', '/media/redStorage/HockeyVideos']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\nArchive data-2017-11-04 does not exist\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3263", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3263/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3263/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3263/events", "html_url": "https://github.com/borgbackup/borg/issues/3263", "id": 271098921, "node_id": "MDU6SXNzdWUyNzEwOTg5MjE=", "number": 3263, "title": "When extracting a macOS locked file, some metadata is lost with \"Operation not permitted\"", "user": {"login": "smammy", "id": 2546386, "node_id": "MDQ6VXNlcjI1NDYzODY=", "avatar_url": "https://avatars.githubusercontent.com/u/2546386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smammy", "html_url": "https://github.com/smammy", "followers_url": "https://api.github.com/users/smammy/followers", "following_url": "https://api.github.com/users/smammy/following{/other_user}", "gists_url": "https://api.github.com/users/smammy/gists{/gist_id}", "starred_url": "https://api.github.com/users/smammy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smammy/subscriptions", "organizations_url": "https://api.github.com/users/smammy/orgs", "repos_url": "https://api.github.com/users/smammy/repos", "events_url": "https://api.github.com/users/smammy/events{/privacy}", "received_events_url": "https://api.github.com/users/smammy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 5, "created_at": "2017-11-03T19:45:54Z", "updated_at": "2020-04-09T13:46:58Z", "closed_at": "2017-11-04T19:10:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Description\r\n\r\nWhen restoring a file that is locked using the macOS HFS \"Locked\" Finder flag, the file should be locked _last_ to avoid causing other metadata operations to fail.\r\n\r\n## Environment\r\n\r\n* macOS 10.12.6\r\n* Borg 1.1.1\r\n\r\n## Steps to replicate\r\n\r\n1. Prepare a locked file that also has an extended attribute:\r\n```\r\nmkdir test; cd test\r\nmkdir src; cd src\r\necho \"file contents\" > locked-file\r\nxattr -w extra.data \"this is an xattr\" locked-file\r\nSetFile -a L locked-file\r\ncd ..\r\n```\r\n\r\n2. Back up the file:\r\n```\r\nsudo borg init -e repokey sam@keep:/storage/backupdisk/borg/lock-test\r\nsudo borg create sam@keep:/storage/backupdisk/borg/lock-test::test1 src\r\n```\r\n\r\n3. Restore the file:\r\n```\r\nmkdir dst; cd dst\r\nsudo borg extract --strip-components=1 sam@keep:/storage/backupdisk/borg/lock-test::test1 src\r\ncd -\r\n```\r\n\r\n## Expected result\r\n\r\n* `borg extract` has no output.\r\n* Resulting file has an extended attribute named `extra.data` with contents `this is an xattr`.\r\n    * Verify this with `xattr -pl extra.data dst/locked-file`.\r\n\r\n## Actual result\r\n\r\n* `borg extract` says: `attrs: [Errno 1] Operation not permitted: '<FD 7>'`\r\n* Resulting file has no extended attribute named `extra.data`.\r\n\r\n## Notes\r\n\r\n* No other Finder flags are restored properly. Except `Invisible` for some reason.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3245", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3245/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3245/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3245/events", "html_url": "https://github.com/borgbackup/borg/issues/3245", "id": 270685003, "node_id": "MDU6SXNzdWUyNzA2ODUwMDM=", "number": 3245, "title": "1.1.1 gives a BrokenPipeError when sending output to | less", "user": {"login": "FabioPedretti", "id": 3390837, "node_id": "MDQ6VXNlcjMzOTA4Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3390837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FabioPedretti", "html_url": "https://github.com/FabioPedretti", "followers_url": "https://api.github.com/users/FabioPedretti/followers", "following_url": "https://api.github.com/users/FabioPedretti/following{/other_user}", "gists_url": "https://api.github.com/users/FabioPedretti/gists{/gist_id}", "starred_url": "https://api.github.com/users/FabioPedretti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FabioPedretti/subscriptions", "organizations_url": "https://api.github.com/users/FabioPedretti/orgs", "repos_url": "https://api.github.com/users/FabioPedretti/repos", "events_url": "https://api.github.com/users/FabioPedretti/events{/privacy}", "received_events_url": "https://api.github.com/users/FabioPedretti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 2, "created_at": "2017-11-02T14:58:00Z", "updated_at": "2017-11-04T23:57:56Z", "closed_at": "2017-11-04T23:57:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With 1.1.1 when I run `borg list | less` I get this exception. It works fine on 1.0.11.\r\n\r\n> Local Exception\r\n> Traceback (most recent call last):\r\n>   File \"borg/archiver.py\", line 4049, in main\r\n>   File \"borg/archiver.py\", line 3977, in run\r\n>   File \"borg/archiver.py\", line 148, in wrapper\r\n>   File \"borg/archiver.py\", line 1356, in do_list\r\n>   File \"borg/archiver.py\", line 1399, in _list_repository\r\n> BrokenPipeError: [Errno 32] Broken pipe\r\n> \r\n> Platform: Linux borg 4.9.0-4-amd64 #1 SMP Debian 4.9.51-1 (2017-09-28) x86_64\r\n> Linux: debian 9.2\r\n> Borg: 1.1.1  Python: CPython 3.5.4\r\n> PID: 1956  CWD: /root/borg-script/1.1\r\n> sys.argv: ['./borg-1.1.1', 'list']\r\n> SSH_ORIGINAL_COMMAND: None\r\n> \r\n> Exception ignored in: <_io.TextIOWrapper name='<stdout>' encoding='UTF-8'>\r\n> BrokenPipeError: [Errno 32] Broken pipe\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3244", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3244/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3244/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3244/events", "html_url": "https://github.com/borgbackup/borg/issues/3244", "id": 270670625, "node_id": "MDU6SXNzdWUyNzA2NzA2MjU=", "number": 3244, "title": "Borg 1.1.x failing to handle exceptions for servers < 1.0.7", "user": {"login": "beardedlinuxgeek", "id": 1005076, "node_id": "MDQ6VXNlcjEwMDUwNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1005076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beardedlinuxgeek", "html_url": "https://github.com/beardedlinuxgeek", "followers_url": "https://api.github.com/users/beardedlinuxgeek/followers", "following_url": "https://api.github.com/users/beardedlinuxgeek/following{/other_user}", "gists_url": "https://api.github.com/users/beardedlinuxgeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/beardedlinuxgeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beardedlinuxgeek/subscriptions", "organizations_url": "https://api.github.com/users/beardedlinuxgeek/orgs", "repos_url": "https://api.github.com/users/beardedlinuxgeek/repos", "events_url": "https://api.github.com/users/beardedlinuxgeek/events{/privacy}", "received_events_url": "https://api.github.com/users/beardedlinuxgeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 5, "created_at": "2017-11-02T14:20:32Z", "updated_at": "2017-11-04T12:44:13Z", "closed_at": "2017-11-04T12:44:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "When `borg list server:repo` is run on version 1.0.11:\r\n\r\n```\r\nRemote: Borg 0.29.0: exception in RPC call:\r\nRemote: Traceback (most recent call last):\r\nRemote:   File \"/usr/home/username/borgbackup-0.29.0/borg/remote.py\", line 96, in serve\r\nRemote: TypeError: open() takes from 2 to 5 positional arguments but 7 were given\r\nRemote: Platform: FreeBSD servername.net 10.3-RELEASE FreeBSD 10.3-RELEASE #0: Wed Aug 30 20:40:07 CEST 2017     root@servername.net:/usr/src/sys/amd64/compile/servername_10.3 amd64\r\nRemote: Python: CPython 3.4.3\r\nRemote: \r\nPlease note:\r\nIf you see a TypeError complaining about the number of positional arguments\r\ngiven to open(), you can ignore it if it comes from a borg version < 1.0.7.\r\nThis TypeError is a cosmetic side effect of the compatibility code borg\r\nclients >= 1.0.7 have to support older borg servers.\r\nThis problem will go away as soon as the server has been upgraded to 1.0.7+.\r\nbackup-2017-10-21T20:49:41.602262   Sat, 2017-10-21 20:49:49\r\nbackup-2017-10-23T10:44:59.177504   Mon, 2017-10-23 10:45:06\r\n```\r\n\r\nThe same command run on version 1.1.1\r\n\r\n```\r\nRemote: Borg 0.29.0: exception in RPC call:\r\nRemote: Traceback (most recent call last):\r\nRemote:   File \"/usr/home/username/borgbackup-0.29.0/borg/remote.py\", line 96, in serve\r\nRemote: TypeError: open() takes from 2 to 5 positional arguments but 7 were given\r\nRemote: Platform: FreeBSD servername.net 10.3-RELEASE FreeBSD 10.3-RELEASE #0: Wed Aug 30 20:40:07 CEST 2017     root@servername.net:/usr/src/sys/amd64/compile/servername_10.3 amd64\r\nRemote: Python: CPython 3.4.3\r\nRemote: \r\nPlease note:\r\nIf you see a TypeError complaining about the number of positional arguments\r\ngiven to open(), you can ignore it if it comes from a borg version < 1.0.7.\r\nThis TypeError is a cosmetic side effect of the compatibility code borg\r\nclients >= 1.0.7 have to support older borg servers.\r\nThis problem will go away as soon as the server has been upgraded to 1.0.7+.\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 591, in __init__\r\n    do_open()\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 584, in do_open\r\n    lock=lock, exclusive=exclusive, append_only=append_only)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 476, in do_rpc\r\n    return self.call(f.__name__, named, **extra)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 707, in call\r\n    for resp in self.call_many(cmd, [args], **kw):\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 773, in call_many\r\n    handle_error(unpacked)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 757, in handle_error\r\n    raise self.RPCError(unpacked)\r\nborg.remote.RemoteRepository.RPCError: {b'i': 2, b'exception_class': b'TypeError'}\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 4049, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 3977, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 130, in wrapper\r\n    lock_wait=self.lock_wait, lock=lock, append_only=append_only, args=args)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 608, in __init__\r\n    do_open()\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 584, in do_open\r\n    lock=lock, exclusive=exclusive, append_only=append_only)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 476, in do_rpc\r\n    return self.call(f.__name__, named, **extra)\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 707, in call\r\n    for resp in self.call_many(cmd, [args], **kw):\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 867, in call_many\r\n    self.to_send = msgpack.packb((1, self.msgid, cmd, self.named_to_positional(cmd, args)))\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 704, in named_to_positional\r\n    return [kwargs[name] for name in compatMap[method]]\r\n  File \"/usr/lib/python3.6/site-packages/borg/remote.py\", line 704, in <listcomp>\r\n    return [kwargs[name] for name in compatMap[method]]\r\nKeyError: ('path', 'create', 'lock_wait', 'lock')\r\n\r\nPlatform: Linux mycomputer 4.13.8-1-ARCH #1 SMP PREEMPT Wed Oct 18 11:49:44 CEST 2017 x86_64 \r\nLinux: arch  \r\nBorg: 1.1.1  Python: CPython 3.6.3\r\nPID: 23092  CWD: /root\r\nsys.argv: ['/usr/bin/borg', 'list', 'server:repo']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\nI have also tested on 1.1.0. It seems all the 1.1.x branches have this issue.\r\n\r\nNote: I'm connecting to the remote repo over SSH. In `~/.ssh/config` there is an entry called \"server\" that defines the HostName, User, and IdentityFile for the remote borg server.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3228", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3228/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3228/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3228/events", "html_url": "https://github.com/borgbackup/borg/issues/3228", "id": 269316415, "node_id": "MDU6SXNzdWUyNjkzMTY0MTU=", "number": 3228, "title": "borg recreate: keep chunks_healthy of excluded hardlink masters", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 1, "created_at": "2017-10-28T13:15:30Z", "updated_at": "2017-11-04T19:07:27Z", "closed_at": "2017-11-04T19:07:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "found while working on #3218:\r\n\r\nwhen you exclude an hardlink master, borg transfers the chunks list to the next not included item.\r\n\r\nchunks_healthy is not transferred, but should be transferred, if present.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3224", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3224/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3224/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3224/events", "html_url": "https://github.com/borgbackup/borg/issues/3224", "id": 268741796, "node_id": "MDU6SXNzdWUyNjg3NDE3OTY=", "number": 3224, "title": "wrong original size in borg create", "user": {"login": "GiuseppeArvati", "id": 33123684, "node_id": "MDQ6VXNlcjMzMTIzNjg0", "avatar_url": "https://avatars.githubusercontent.com/u/33123684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GiuseppeArvati", "html_url": "https://github.com/GiuseppeArvati", "followers_url": "https://api.github.com/users/GiuseppeArvati/followers", "following_url": "https://api.github.com/users/GiuseppeArvati/following{/other_user}", "gists_url": "https://api.github.com/users/GiuseppeArvati/gists{/gist_id}", "starred_url": "https://api.github.com/users/GiuseppeArvati/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GiuseppeArvati/subscriptions", "organizations_url": "https://api.github.com/users/GiuseppeArvati/orgs", "repos_url": "https://api.github.com/users/GiuseppeArvati/repos", "events_url": "https://api.github.com/users/GiuseppeArvati/events{/privacy}", "received_events_url": "https://api.github.com/users/GiuseppeArvati/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 1, "created_at": "2017-10-26T12:32:51Z", "updated_at": "2017-11-05T01:40:27Z", "closed_at": "2017-11-05T01:40:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n[borg 1.1.1  python 3.4.5 CentOs 6]\r\nI tried 2 times with same command but different files ( oracle dump ) and both times I had\r\nan original size reported twice bigger than the real one.\r\nThe file is 109 GB.\r\nI tried even with smaller files but the problem did not appear.\r\n\r\n```\r\n# borg create -p --stats /opt/mnt/test.borg::test2 ads_orcl_daily_dmp_5\r\n------------------------------------------------------------------------------\r\nArchive name: test2\r\nArchive fingerprint: ba34d3cb846d521388a14ea5cf1b9a8addb114de386a042738b99fac01e48a42\r\nTime (start): Thu, 2017-10-26 12:33:18\r\nTime (end):   Thu, 2017-10-26 13:33:38\r\nDuration: 1 hours 20.12 seconds\r\nNumber of files: 1\r\nUtilization of max. archive size: 0%\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              232.90 GB            205.06 GB            102.53 GB\r\nAll archives:              232.90 GB            205.06 GB            102.53 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                   44512                89022\r\n------------------------------------------------------------------------------\r\n```\r\ngiuseppe\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3224/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3218", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3218/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3218/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3218/events", "html_url": "https://github.com/borgbackup/borg/issues/3218", "id": 268309062, "node_id": "MDU6SXNzdWUyNjgzMDkwNjI=", "number": 3218, "title": "AssertionError verify_file_chunks", "user": {"login": "fsironman", "id": 6130672, "node_id": "MDQ6VXNlcjYxMzA2NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6130672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fsironman", "html_url": "https://github.com/fsironman", "followers_url": "https://api.github.com/users/fsironman/followers", "following_url": "https://api.github.com/users/fsironman/following{/other_user}", "gists_url": "https://api.github.com/users/fsironman/gists{/gist_id}", "starred_url": "https://api.github.com/users/fsironman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fsironman/subscriptions", "organizations_url": "https://api.github.com/users/fsironman/orgs", "repos_url": "https://api.github.com/users/fsironman/repos", "events_url": "https://api.github.com/users/fsironman/events{/privacy}", "received_events_url": "https://api.github.com/users/fsironman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 5, "created_at": "2017-10-25T08:28:49Z", "updated_at": "2017-11-04T19:07:26Z", "closed_at": "2017-11-04T19:07:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run a borg check  it always trows an exception at the same archive and file.\r\nIt does not matter if I supply --repair or not.\r\n\r\nIt did occur after the upgrade to borg 1.1.1. I did a recreate of my whole repository with:\r\nborg recreate -v --chunker-params 16,23,20,4095 -C auto,lzma,9 --recompress if-different --debug --progress\r\nI cant say though if the recreate is responsible for the error.\r\n```\r\nAnalyzing archive root-2016-10-30-22_01 (7/44)\r\nsomefile_backup_2016.10.12_13.41.16.zip: Previously missing file chunk is still missing (Byte 0-491063). It has a all-zero replacement chunk already.\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 4049, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 3977, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 148, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 309, in do_check\r\n    verify_data=args.verify_data, save_space=args.save_space):\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 1158, in check\r\n    self.rebuild_refcounts(archive=archive, first=first, last=last, sort_by=sort_by, glob=glob)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 1535, in rebuild_refcounts\r\n    verify_file_chunks(item)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 1377, in verify_file_chunks\r\n    assert len(chunks_current) == len(chunks_healthy)\r\nAssertionError\r\n\r\nPlatform: Linux hostname 4.4.0-96-generic #119-Ubuntu SMP Tue Sep 12 14:59:54 UTC 2017 x86_64 x86_64\r\nLinux: Ubuntu 16.04 xenial\r\nBorg: 1.1.1  Python: CPython 3.5.2\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3209", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3209/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3209/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3209/events", "html_url": "https://github.com/borgbackup/borg/issues/3209", "id": 267625921, "node_id": "MDU6SXNzdWUyNjc2MjU5MjE=", "number": 3209, "title": "excluded directory still accessed, causing backup to fail on missing permissions", "user": {"login": "mbunkus", "id": 414282, "node_id": "MDQ6VXNlcjQxNDI4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/414282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbunkus", "html_url": "https://github.com/mbunkus", "followers_url": "https://api.github.com/users/mbunkus/followers", "following_url": "https://api.github.com/users/mbunkus/following{/other_user}", "gists_url": "https://api.github.com/users/mbunkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbunkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbunkus/subscriptions", "organizations_url": "https://api.github.com/users/mbunkus/orgs", "repos_url": "https://api.github.com/users/mbunkus/repos", "events_url": "https://api.github.com/users/mbunkus/events{/privacy}", "received_events_url": "https://api.github.com/users/mbunkus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/48", "html_url": "https://github.com/borgbackup/borg/milestone/48", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/48/labels", "id": 2837554, "node_id": "MDk6TWlsZXN0b25lMjgzNzU1NA==", "number": 48, "title": "1.1.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-10-14T20:11:49Z", "updated_at": "2017-11-06T00:10:25Z", "due_on": null, "closed_at": "2017-11-06T00:10:25Z"}, "comments": 15, "created_at": "2017-10-23T11:01:48Z", "updated_at": "2019-03-11T21:43:24Z", "closed_at": "2017-10-28T11:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is a regression in borg 1.1.0.\r\n\r\nI'm running backups as `root` while regular users have some directories mounted via FUSE. `root` is not allowed to access those directories. Therefore I exclude them from being backed up with `--exclude /path/to/fuse-mount-point`.\r\n\r\nIn borg 1.0.9 this used to work fine. The directories were not backed up, borg did not emit an error message, and barring any other errors borg exited with code 0 signalling success.\r\n\r\nIn borg 1.1.0 it still tries to access that mount point. That fails, and borg emits an error message \"Permission denied\". The whole borg run exits with error code 1 in that case signalling an error.\r\n\r\nHere's how to reproduce:\r\n\r\n1. Create a repository\r\n2. Set up a tree to back up with some files and a directory to be used as the FUSE mount point\r\n3. Configure FUSE not to allow access to mounted directories by other users (in `/etc/fuse.conf`: option `user_allow_other` must not be active)\r\n4. Mount a file system as a regular user on said mount point, e.g. with `sshfs`\r\n5. Try to create a borg backup as root while excluding said mount point\r\n\r\nHere's an example I've just run:\r\n\r\n``` sh\r\n[0 mbunkus@chai-latte ~] mkdir -p tmp/test/{tree,repo}\r\n[0 mbunkus@chai-latte ~] cd ~/tmp/test/tree\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] borg init -e none ~/tmp/test/repo\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] echo chunky > bacon.txt\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] echo foo > bar.txt\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] mkdir fuse\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] sshfs sweet-chili: fuse\r\n[0 mbunkus@chai-latte ~/tmp/test/tree] ls -l\r\ntotal 12\r\n-rw-rw-r-- 1 mbunkus Domain Users    7 Oct 23 12:41 bacon.txt\r\n-rw-rw-r-- 1 mbunkus Domain Users    4 Oct 23 12:43 bar.txt\r\ndrwxr-xr-x 1    1000        10002 2468 Oct 23 10:38 fuse/\r\n[2 mbunkus@chai-latte ~/tmp/test/tree] sudo borg create --exclude ~/tmp/test/tree/bar.txt --exclude ~/tmp/test/tree/fuse $HOME/tmp/test/repo::test ~/tmp/test/tree\r\nWarning: Attempting to access a previously unknown unencrypted repository!\r\nDo you want to continue? [yN] y\r\n/home/mbunkus/tmp/test/tree: stat: [Errno 13] Permission denied: '/home/mbunkus/tmp/test/tree/fuse'\r\n[1 mbunkus@chai-latte ~/tmp/test/tree] sudo borg list $HOME/tmp/test/repo::test\r\ndrwxrwxr-x mbunkus Domain Users        0 Mon, 2017-10-23 12:43:30 home/mbunkus/tmp/test/tree\r\n-rw-rw-r-- mbunkus Domain Users        7 Mon, 2017-10-23 12:41:55 home/mbunkus/tmp/test/tree/bacon.txt\r\n[0 mbunkus@chai-latte ~/tmp/test/tree]\r\n```\r\n\r\nThe test shows that the `--exclude` statements are correct. The first exclusion of the file `bar.txt` is handled correctly by borg; the file isn't present in the archive. The second exclusion isn't handled correctly as the error message shows.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3205", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3205/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3205/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3205/events", "html_url": "https://github.com/borgbackup/borg/issues/3205", "id": 267433221, "node_id": "MDU6SXNzdWUyNjc0MzMyMjE=", "number": 3205, "title": "review set_defaults (fallback_)func usage", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 2, "created_at": "2017-10-22T03:48:26Z", "updated_at": "2017-10-22T21:32:00Z", "closed_at": "2017-10-22T21:32:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Looks like there are argparse compatibility issues, had a ton of test fails with python 3.4.0 and 3.4.2 due to that change:\r\n```\r\n +        parser.set_defaults(func=functools.partial(self.do_maincommand_help, parser)) \r\n```\r\n\r\nAdded here: https://github.com/borgbackup/borg/pull/3155/commits/c768999a05d27bacd272298e3cd2a14c9deee70b to fix the traceback seen in #3142. \r\n\r\nOn such old pythons, with that change, stuff like this does not work any more, it just shows the help:\r\n```\r\nborg create repo::arch input\r\n```\r\n\r\nTODO: review all set_defaults calls and add some explanation when to use what. Test on 3.4.0 or 3.4.2.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3197", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3197/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3197/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3197/events", "html_url": "https://github.com/borgbackup/borg/issues/3197", "id": 267241935, "node_id": "MDU6SXNzdWUyNjcyNDE5MzU=", "number": 3197, "title": "crash with relative BORG_KEY_FILE", "user": {"login": "kbabioch", "id": 1918279, "node_id": "MDQ6VXNlcjE5MTgyNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1918279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kbabioch", "html_url": "https://github.com/kbabioch", "followers_url": "https://api.github.com/users/kbabioch/followers", "following_url": "https://api.github.com/users/kbabioch/following{/other_user}", "gists_url": "https://api.github.com/users/kbabioch/gists{/gist_id}", "starred_url": "https://api.github.com/users/kbabioch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kbabioch/subscriptions", "organizations_url": "https://api.github.com/users/kbabioch/orgs", "repos_url": "https://api.github.com/users/kbabioch/repos", "events_url": "https://api.github.com/users/kbabioch/events{/privacy}", "received_events_url": "https://api.github.com/users/kbabioch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 5, "created_at": "2017-10-20T17:06:53Z", "updated_at": "2017-10-20T19:27:47Z", "closed_at": "2017-10-20T19:19:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm backing up into multiple repositories, but I want to use a single keyfile for all of them. However I don't see a way to generate a keyfile with borg itself:\r\n\r\n    [kbabioch@antares ~]$ BORG_KEY_FILE=keyfile borg init -e keyfile repo\r\n    Enter new passphrase: \r\n    Enter same passphrase again: \r\n    Do you want your passphrase to be displayed for verification? [yN]: \r\n    Local Exception\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 4024, in main\r\n        exit_code = archiver.run(args)\r\n      File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 3952, in run\r\n        return set_ec(func(args))\r\n      File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 148, in wrapper\r\n        return method(self, args, repository=repository, **kwargs)\r\n      File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 248, in do_init\r\n        key = key_creator(repository, args)\r\n      File \"/usr/lib/python3.6/site-packages/borg/crypto/key.py\", line 106, in key_creator\r\n        return key.create(repository, args)\r\n      File \"/usr/lib/python3.6/site-packages/borg/crypto/key.py\", line 657, in create\r\n        key.save(target, passphrase)\r\n      File \"/usr/lib/python3.6/site-packages/borg/crypto/key.py\", line 728, in save\r\n        fd.write('\\n')\r\n      File \"/usr/lib/python3.6/site-packages/borg/platform/base.py\", line 175, in __exit__\r\n        platform.sync_dir(os.path.dirname(self.path))\r\n      File \"/usr/lib/python3.6/site-packages/borg/platform/base.py\", line 56, in sync_dir\r\n        fd = os.open(path, os.O_RDONLY)\r\n    FileNotFoundError: [Errno 2] No such file or directory: ''\r\n\r\n    Platform: Linux antares 4.13.7-1-ARCH #1 SMP PREEMPT Sat Oct 14 20:13:26 CEST 2017 x86_64 \r\n    Linux: arch Arch Linux\r\n    Borg: 1.1.0  Python: CPython 3.6.2\r\n    PID: 25811  CWD: /home/kbabioch\r\n    sys.argv: ['/usr/bin/borg', 'init', '-e', 'keyfile', 'repo']\r\n    SSH_ORIGINAL_COMMAND: None\r\n\r\nI think either the use case mentioned above should work, or there should be some \"borg --genkey\" option, e.g. as with `openvpn(8)`.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3197/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3197/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3192", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3192/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3192/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3192/events", "html_url": "https://github.com/borgbackup/borg/issues/3192", "id": 267134989, "node_id": "MDU6SXNzdWUyNjcxMzQ5ODk=", "number": 3192, "title": "IndexError: tuple index out of range (1.1.0 server)", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 4, "created_at": "2017-10-20T10:40:04Z", "updated_at": "2017-10-21T22:45:38Z", "closed_at": "2017-10-21T22:45:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "1.0.6 client talking to 1.1.0 server:\r\n```\r\nCreating a backup at Fri Oct 20 04:30:02 CEST 2017 on x ...\r\npyimod03_importers Remote: Local Exception\r\npyimod03_importers Remote: Traceback (most recent call last):\r\nRemote:   File \"borg/archiver.py\", line 4024, in main\r\nRemote:   File \"borg/archiver.py\", line 3952, in run\r\nRemote:   File \"borg/archiver.py\", line 238, in do_serve\r\nRemote:   File \"borg/remote.py\", line 227, in serve\r\nRemote:   File \"borg/remote.py\", line 183, in positional_to_named\r\nRemote:   File \"borg/remote.py\", line 183, in <dictcomp>\r\nRemote: IndexError: tuple index out of range\r\nRemote: \r\nRemote: Platform: FreeBSD x.rsync.net 10.3-RELEASE FreeBSD 10.3-RELEASE #0: Wed Aug 30 20:40:07 CEST 2017     root@x.rsync.net:/usr/src/sys/amd64/compile/x_10.3 amd64 \r\nRemote: Borg: 1.1.0  Python: CPython 3.5.2\r\nRemote: PID: 88751  CWD: /data1/home/x\r\nRemote: sys.argv: ['/usr/local/bin/borg1/borg1', 'serve', '--restrict-to-path', 'x']\r\nRemote: SSH_ORIGINAL_COMMAND: None\r\nRemote: \r\nConnection closed by remote host\r\nterminating with error status, rc 2\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3157", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3157/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3157/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3157/events", "html_url": "https://github.com/borgbackup/borg/issues/3157", "id": 265269300, "node_id": "MDU6SXNzdWUyNjUyNjkzMDA=", "number": 3157, "title": "borg recreate: wrong size of part files", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 3, "created_at": "2017-10-13T12:17:23Z", "updated_at": "2017-10-15T00:49:53Z", "closed_at": "2017-10-14T17:52:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from irc:\r\n```\r\nganja\\_$ When borg finds broken chunks like \"var/lib/mysql/backup/mysqldump.sql.borg_part_1:\r\n         size inconsistency detected: size 7546242262, chunks size 3184051881\",\r\n         wouldn't it be reasonable to be able to list all archives that are affected by that?\r\n```\r\n\r\n```\r\nThomasWaldmann$ do you have more details about the size inconsistency?\r\nganja\\_$  Not except that it happened after a recreate and that check --repair isn't fixing it.\r\nganja\\_$ And that it's consistent through multiple checks with several days between them.\r\n       It's likely to be an effect from recreate since it has happened to 3 repos I ran\r\n       recreate on (recompress).\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3146", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3146/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3146/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3146/events", "html_url": "https://github.com/borgbackup/borg/issues/3146", "id": 264787510, "node_id": "MDU6SXNzdWUyNjQ3ODc1MTA=", "number": 3146, "title": "borg: error: unrecognized arguments: --files-cache=disabled", "user": {"login": "knutov", "id": 255869, "node_id": "MDQ6VXNlcjI1NTg2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/255869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/knutov", "html_url": "https://github.com/knutov", "followers_url": "https://api.github.com/users/knutov/followers", "following_url": "https://api.github.com/users/knutov/following{/other_user}", "gists_url": "https://api.github.com/users/knutov/gists{/gist_id}", "starred_url": "https://api.github.com/users/knutov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/knutov/subscriptions", "organizations_url": "https://api.github.com/users/knutov/orgs", "repos_url": "https://api.github.com/users/knutov/repos", "events_url": "https://api.github.com/users/knutov/events{/privacy}", "received_events_url": "https://api.github.com/users/knutov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 7, "created_at": "2017-10-12T01:38:40Z", "updated_at": "2017-11-03T05:03:24Z", "closed_at": "2017-10-13T18:16:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "$ borg -V\r\nborg 1.1.0\r\n\r\n```\r\nborg prune ... -v -s --list --no-files-cache ...\r\n...\r\nWarning: \"--no-files-cache\" has been deprecated. Use \"--files-cache=disabled\" instead.\r\n```\r\nand\r\n\r\n```bash\r\nborg prune ... -v -s --list --files-cache=disabled ...\r\n...\r\nborg: error: unrecognized arguments: --files-cache=disabled\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3146/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3142", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3142/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3142/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3142/events", "html_url": "https://github.com/borgbackup/borg/issues/3142", "id": 264610224, "node_id": "MDU6SXNzdWUyNjQ2MTAyMjQ=", "number": 3142, "title": "--show-version in the docs, but --version in borg", "user": {"login": "SanskritFritz", "id": 209814, "node_id": "MDQ6VXNlcjIwOTgxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/209814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SanskritFritz", "html_url": "https://github.com/SanskritFritz", "followers_url": "https://api.github.com/users/SanskritFritz/followers", "following_url": "https://api.github.com/users/SanskritFritz/following{/other_user}", "gists_url": "https://api.github.com/users/SanskritFritz/gists{/gist_id}", "starred_url": "https://api.github.com/users/SanskritFritz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SanskritFritz/subscriptions", "organizations_url": "https://api.github.com/users/SanskritFritz/orgs", "repos_url": "https://api.github.com/users/SanskritFritz/repos", "events_url": "https://api.github.com/users/SanskritFritz/events{/privacy}", "received_events_url": "https://api.github.com/users/SanskritFritz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-10-11T14:32:29Z", "updated_at": "2017-10-12T20:50:21Z", "closed_at": "2017-10-12T18:32:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think --show-version doesn't exist:\r\n```\r\nfrank@HomeC ~/Downloads> ./borg-linux64 --version\r\nborg-linux64 1.1.0\r\nfrank@HomeC ~/Downloads> ./borg-linux64 --show-version\r\nTraceback (most recent call last):\r\n  File \"borg/__main__.py\", line 2, in <module>\r\n  File \"borg/archiver.py\", line 4013, in main\r\n  File \"borg/archiver.py\", line 3849, in get_args\r\n  File \"borg/archiver.py\", line 3873, in parse_args\r\nAttributeError: 'Namespace' object has no attribute 'fallback_func'\r\nFailed to execute script __main__\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3142/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3130", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3130/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3130/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3130/events", "html_url": "https://github.com/borgbackup/borg/issues/3130", "id": 264396104, "node_id": "MDU6SXNzdWUyNjQzOTYxMDQ=", "number": 3130, "title": "1.1.0: strange slowdown when backupping device node files", "user": {"login": "shartge", "id": 684712, "node_id": "MDQ6VXNlcjY4NDcxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/684712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shartge", "html_url": "https://github.com/shartge", "followers_url": "https://api.github.com/users/shartge/followers", "following_url": "https://api.github.com/users/shartge/following{/other_user}", "gists_url": "https://api.github.com/users/shartge/gists{/gist_id}", "starred_url": "https://api.github.com/users/shartge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shartge/subscriptions", "organizations_url": "https://api.github.com/users/shartge/orgs", "repos_url": "https://api.github.com/users/shartge/repos", "events_url": "https://api.github.com/users/shartge/events{/privacy}", "received_events_url": "https://api.github.com/users/shartge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 7, "created_at": "2017-10-10T22:22:21Z", "updated_at": "2017-10-13T21:54:06Z", "closed_at": "2017-10-13T21:54:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have several Debian build-roots, all created with pbuilder/cowbuilder on one system.\r\n\r\nDuring the backup of those build-roots, borgbackup slows down to a crawl, when it hits devices in <chroot>/dev/ where no hardware exists in the host, for example in my case the floppy drive devices.\r\n\r\nstrace shows this:\r\n\r\n```\r\n[...]\r\n     0.000000 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1680\", \"system.posix_acl_access\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000370 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1680\", \"system.posix_acl_default\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000270 ioctl(1, TIOCGWINSZ, {ws_row=44, ws_col=166, ws_xpixel=1848, ws_ypixel=1030}) = 0\r\n     0.000462 write(2, \"15.85 GB O 8.82 GB C 245.00 MB D\"..., 167) = 167\r\n     0.000389 lstat(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", {st_mode=S_IFBLK|0660, st_rdev=makedev(2, 60), ...}) = 0\r\n     0.000218 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.082317 llistxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", \"\", 4096) = 0\r\n     0.000133 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.315956 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", \"system.posix_acl_access\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000138 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1722\", \"system.posix_acl_default\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000216 ioctl(1, TIOCGWINSZ, {ws_row=44, ws_col=166, ws_xpixel=1848, ws_ypixel=1030}) = 0\r\n     0.000313 write(2, \"15.85 GB O 8.82 GB C 245.00 MB D\"..., 167) = 167\r\n     0.000309 lstat(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", {st_mode=S_IFBLK|0660, st_rdev=makedev(2, 76), ...}) = 0\r\n     0.000175 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.085720 llistxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", \"\", 4096) = 0\r\n     0.000083 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.316940 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", \"system.posix_acl_access\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000113 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1743\", \"system.posix_acl_default\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000296 ioctl(1, TIOCGWINSZ, {ws_row=44, ws_col=166, ws_xpixel=1848, ws_ypixel=1030}) = 0\r\n     0.000429 write(2, \"15.85 GB O 8.82 GB C 245.00 MB D\"..., 167) = 167\r\n     0.000288 lstat(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", {st_mode=S_IFBLK|0660, st_rdev=makedev(2, 96), ...}) = 0\r\n     0.000167 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.075010 llistxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", \"\", 4096) = 0\r\n     0.000162 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.063643 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", \"system.posix_acl_access\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000138 getxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1760\", \"system.posix_acl_default\", NULL, 0) = -1 ENODATA (No data available)\r\n     0.000219 ioctl(1, TIOCGWINSZ, {ws_row=44, ws_col=166, ws_xpixel=1848, ws_ypixel=1030}) = 0\r\n     0.000327 write(2, \"15.85 GB O 8.82 GB C 245.00 MB D\"..., 167) = 167\r\n     0.000256 lstat(\"/var/cache/pbuilder/base.cow/dev/fd0u1840\", {st_mode=S_IFBLK|0660, st_rdev=makedev(2, 116), ...}) = 0\r\n     0.000165 open(\"/var/cache/pbuilder/base.cow/dev/fd0u1840\", O_RDONLY|O_NONBLOCK|O_NOFOLLOW|O_CLOEXEC) = -1 ENXIO (No such device or address)\r\n     3.083064 llistxattr(\"/var/cache/pbuilder/base.cow/dev/fd0u1840\", \"\", 4096) = 0\r\n[...]\r\n```\r\nNote the 3 second delay after each `open(\".../dev/fd0...\")`. (According to strace(1) the timestamp at the start of a line is the time elapsed since the start of the syscall on the line before.)\r\n\r\nA normal \"living\" system wouldn't have any devices without the needed hardware, because `/dev` is a tmpfs populated by udev. But in the build-roots, borgbackup hits the real filesystem below the tmpfs with tons on unneeded devices nodes and things get strange.\r\n\r\nIn my case, the backup time regresses from ~45 seconds with 1.0.11 to over 12 minutes with 1.1.0.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3130/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3114", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3114/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3114/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3114/events", "html_url": "https://github.com/borgbackup/borg/issues/3114", "id": 263963959, "node_id": "MDU6SXNzdWUyNjM5NjM5NTk=", "number": 3114, "title": "1.1.0: using a logging config causes exception", "user": {"login": "e477", "id": 7443910, "node_id": "MDQ6VXNlcjc0NDM5MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7443910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e477", "html_url": "https://github.com/e477", "followers_url": "https://api.github.com/users/e477/followers", "following_url": "https://api.github.com/users/e477/following{/other_user}", "gists_url": "https://api.github.com/users/e477/gists{/gist_id}", "starred_url": "https://api.github.com/users/e477/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e477/subscriptions", "organizations_url": "https://api.github.com/users/e477/orgs", "repos_url": "https://api.github.com/users/e477/repos", "events_url": "https://api.github.com/users/e477/events{/privacy}", "received_events_url": "https://api.github.com/users/e477/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 1, "created_at": "2017-10-09T17:02:48Z", "updated_at": "2017-10-10T23:08:33Z", "closed_at": "2017-10-10T23:08:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been using Borg 1.0.x with a [simple logging config](https://github.com/borgbackup/borg/files/1369192/logging.conf.txt) to get a logging behaviour suitable for cronjobs, that is: everything goes to the logfile, errors and warnings also go to stderr (and are sent via mail, by cron). Using the same logging config with Borg 1.1.0 causes an exception:\r\n\r\n```\r\n2017-10-09 06:05:09 [ERROR] Local Exception\r\n2017-10-09 06:05:09 [ERROR] Traceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4024, in main\r\n  File \"borg/archiver.py\", line 3952, in run\r\n  File \"borg/archiver.py\", line 130, in wrapper\r\n  File \"borg/remote.py\", line 562, in __init__\r\n  File \"borg/remote.py\", line 699, in call\r\n  File \"borg/remote.py\", line 841, in call_many\r\n  File \"borg/remote.py\", line 989, in handle_remote_line\r\nAttributeError: 'Logger' object has no attribute 'json'\r\n```\r\n\r\nWhen not using a logging config, `setup_logging` will set up two loggers, the second one explicitly named `borg` and having a custom `json` attribute (see logging.py, lines 97-99). While I could add a `borg` logger to my logging config there seems to be no way to add the required custom `json` attribute within the fileConfig format.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3114/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3109", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3109/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3109/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3109/events", "html_url": "https://github.com/borgbackup/borg/issues/3109", "id": 263831705, "node_id": "MDU6SXNzdWUyNjM4MzE3MDU=", "number": 3109, "title": "borg recreate AttributeError: attribute time_end not found", "user": {"login": "bazuchan", "id": 4991018, "node_id": "MDQ6VXNlcjQ5OTEwMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4991018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bazuchan", "html_url": "https://github.com/bazuchan", "followers_url": "https://api.github.com/users/bazuchan/followers", "following_url": "https://api.github.com/users/bazuchan/following{/other_user}", "gists_url": "https://api.github.com/users/bazuchan/gists{/gist_id}", "starred_url": "https://api.github.com/users/bazuchan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bazuchan/subscriptions", "organizations_url": "https://api.github.com/users/bazuchan/orgs", "repos_url": "https://api.github.com/users/bazuchan/repos", "events_url": "https://api.github.com/users/bazuchan/events{/privacy}", "received_events_url": "https://api.github.com/users/bazuchan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 1, "created_at": "2017-10-09T09:26:28Z", "updated_at": "2017-10-10T22:55:25Z", "closed_at": "2017-10-10T22:55:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to change chunker params of an old repo that was migrated from attic.\r\n\r\n```\r\ntarantula!root# borg recreate -v --stats --compression zlib --chunker-params default /mnt/tarantula.atticbackup/tarantula.attic\r\nWarning: Attempting to access a previously unknown unencrypted repository!                 \r\nDo you want to continue? [yN] y              \r\nrecreate is an experimental feature.         \r\nType 'YES' if you understand this and want to continue: YES                                \r\nProcessing rdiff-root-2010-11-10T18:23:51+03:00                                            \r\nLocal Exception                              \r\nTraceback (most recent call last):           \r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 4024, in main               \r\n    exit_code = archiver.run(args)           \r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 3952, in run                \r\n    return set_ec(func(args))                \r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 146, in wrapper             \r\n    return method(self, args, repository=repository, cache=cache_, **kwargs)               \r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 1658, in do_recreate        \r\n    if not recreater.recreate(name, args.comment):                                         \r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 1611, in recreate            \r\n    self.save(archive, target, comment, replace_original=replace_original)                 \r\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 1700, in save                \r\n    'time_end': archive.metadata.time_end,   \r\n  File \"src/borg/item.pyx\", line 99, in borg.item.PropDict._make_property._get (src/borg/item.c:3603)                                                                                 \r\nAttributeError: attribute time_end not found \r\n\r\nPlatform: Linux tarantula 4.13.0-12-generic #13-Ubuntu SMP Sat Sep 23 03:40:16 UTC 2017 x86_64 x86_64                                                                                 \r\nLinux: Ubuntu 17.10 artful                   \r\nBorg: 1.1.0  Python: CPython 3.6.3rc1        \r\nPID: 14290  CWD: /home/baz                   \r\nsys.argv: ['/usr/bin/borg', 'recreate', '-v', '--stats', '--compression', 'zlib', '--chunker-params', 'default', '/mnt/tarantula.atticbackup/tarantula.attic']                        \r\nSSH_ORIGINAL_COMMAND: None                   \r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3108", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3108/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3108/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3108/events", "html_url": "https://github.com/borgbackup/borg/issues/3108", "id": 263821362, "node_id": "MDU6SXNzdWUyNjM4MjEzNjI=", "number": 3108, "title": "Exception: Path should be relative and local", "user": {"login": "Mathiasdm", "id": 176335, "node_id": "MDQ6VXNlcjE3NjMzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/176335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mathiasdm", "html_url": "https://github.com/Mathiasdm", "followers_url": "https://api.github.com/users/Mathiasdm/followers", "following_url": "https://api.github.com/users/Mathiasdm/following{/other_user}", "gists_url": "https://api.github.com/users/Mathiasdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mathiasdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mathiasdm/subscriptions", "organizations_url": "https://api.github.com/users/Mathiasdm/orgs", "repos_url": "https://api.github.com/users/Mathiasdm/repos", "events_url": "https://api.github.com/users/Mathiasdm/events{/privacy}", "received_events_url": "https://api.github.com/users/Mathiasdm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 3, "created_at": "2017-10-09T08:45:46Z", "updated_at": "2017-10-10T23:01:20Z", "closed_at": "2017-10-10T23:01:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am backing up buildroot builds (~5 GB), to be used by other users on other machines eventually. Unfortunately, when restoring a buildroot build, I get the following error (late in the restore process)::\r\n\r\n  ```Local Exception\r\n  Traceback (most recent call last):\r\n    File \"borg/archiver.py\", line 4024, in main\r\n    File \"borg/archiver.py\", line 3952, in run\r\n    File \"borg/archiver.py\", line 148, in wrapper\r\n    File \"borg/archiver.py\", line 159, in wrapper\r\n    File \"borg/archiver.py\", line 724, in do_extract\r\n    File \"borg/archive.py\", line 561, in extract_item\r\n  Exception: Path should be relative and local\r\n  ```\r\n\r\nThe error doesn't contain more details about the file or path causing the problem, unfortunately. I'm trying to get the borg build working locally to add this info (CentOS 7), but I haven't had too much success so far.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3107", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3107/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3107/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3107/events", "html_url": "https://github.com/borgbackup/borg/issues/3107", "id": 263815427, "node_id": "MDU6SXNzdWUyNjM4MTU0Mjc=", "number": 3107, "title": "Issue on FS that does not support HardLinking", "user": {"login": "willyvmm", "id": 24528286, "node_id": "MDQ6VXNlcjI0NTI4Mjg2", "avatar_url": "https://avatars.githubusercontent.com/u/24528286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willyvmm", "html_url": "https://github.com/willyvmm", "followers_url": "https://api.github.com/users/willyvmm/followers", "following_url": "https://api.github.com/users/willyvmm/following{/other_user}", "gists_url": "https://api.github.com/users/willyvmm/gists{/gist_id}", "starred_url": "https://api.github.com/users/willyvmm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willyvmm/subscriptions", "organizations_url": "https://api.github.com/users/willyvmm/orgs", "repos_url": "https://api.github.com/users/willyvmm/repos", "events_url": "https://api.github.com/users/willyvmm/events{/privacy}", "received_events_url": "https://api.github.com/users/willyvmm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 3, "created_at": "2017-10-09T08:20:11Z", "updated_at": "2017-10-10T22:32:41Z", "closed_at": "2017-10-10T22:32:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "For some reason i have to use SMBFS that does not support hard linking as a repo storage.\r\n\r\nit fails in file repository.py arround line 267:\r\n\r\n```python\r\n        if os.path.isfile(config_path):\r\n            try:\r\n                os.link(config_path, old_config_path)\r\n            except OSError as e:\r\n                if e.errno in (errno.EMLINK, errno.ENOSYS, errno.EPERM):\r\n                    logger.warning(\"Hardlink failed, cannot securely erase old config file\")\r\n                else:\r\n                    raise\r\n```\r\n\r\nThe workaround is to replace os.link with os.rename\r\n\r\n```python\r\n        if os.path.isfile(config_path):\r\n            try:\r\n                os.rename(config_path, old_config_path)\r\n            except OSError as e:\r\n                if e.errno in (errno.EMLINK, errno.ENOSYS, errno.EPERM):\r\n                    logger.warning(\"Hardlink failed, cannot securely erase old config file\")\r\n                else:\r\n                    raise\r\n```\r\n\r\nBest Regards\r\nwilly.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3107/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3103", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3103/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3103/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3103/events", "html_url": "https://github.com/borgbackup/borg/issues/3103", "id": 263699496, "node_id": "MDU6SXNzdWUyNjM2OTk0OTY=", "number": 3103, "title": "Encryption authenticated-blake2 not available in version 1.1", "user": {"login": "adaitche", "id": 25004501, "node_id": "MDQ6VXNlcjI1MDA0NTAx", "avatar_url": "https://avatars.githubusercontent.com/u/25004501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adaitche", "html_url": "https://github.com/adaitche", "followers_url": "https://api.github.com/users/adaitche/followers", "following_url": "https://api.github.com/users/adaitche/following{/other_user}", "gists_url": "https://api.github.com/users/adaitche/gists{/gist_id}", "starred_url": "https://api.github.com/users/adaitche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adaitche/subscriptions", "organizations_url": "https://api.github.com/users/adaitche/orgs", "repos_url": "https://api.github.com/users/adaitche/repos", "events_url": "https://api.github.com/users/adaitche/events{/privacy}", "received_events_url": "https://api.github.com/users/adaitche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/45", "html_url": "https://github.com/borgbackup/borg/milestone/45", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/45/labels", "id": 2740876, "node_id": "MDk6TWlsZXN0b25lMjc0MDg3Ng==", "number": 45, "title": "1.1.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2017-09-02T17:45:15Z", "updated_at": "2017-10-22T21:32:13Z", "due_on": null, "closed_at": "2017-10-22T21:32:13Z"}, "comments": 0, "created_at": "2017-10-08T07:29:53Z", "updated_at": "2017-10-09T02:15:07Z", "closed_at": "2017-10-09T02:15:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the [docs](https://borgbackup.readthedocs.io/en/stable/usage/init.html#) for version 1.1, the encryption mode `authenticated-blake2` should be available. However running \r\n\r\n```\r\nborg init --encryption=authenticated-blake2 .\r\n```\r\nyields\r\n```\r\nusage: borg init [-h] [--critical] [--error] [--warning] [--info] [--debug]\r\n                 [--debug-topic TOPIC] [-p] [--log-json] [--lock-wait SECONDS]\r\n                 [--show-version] [--show-rc] [--no-files-cache] [--umask M]\r\n                 [--remote-path PATH] [--remote-ratelimit RATE]\r\n                 [--consider-part-files] [--debug-profile FILE] -e MODE\r\n                 [--append-only] [--storage-quota QUOTA]\r\n                 [REPOSITORY]\r\nborg init: error: argument -e/--encryption: invalid choice: 'authenticated-blake2' (choose from 'none', 'keyfile', 'repokey', 'keyfile-blake2', 'repokey-blake2', 'authenticated')\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3103/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3077", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3077/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3077/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3077/events", "html_url": "https://github.com/borgbackup/borg/issues/3077", "id": 261923920, "node_id": "MDU6SXNzdWUyNjE5MjM5MjA=", "number": 3077, "title": "1.1.0rc4: pyi-binary subprocess env broken when LD_LIBRARY_PATH is empty", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/47", "html_url": "https://github.com/borgbackup/borg/milestone/47", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/47/labels", "id": 2787099, "node_id": "MDk6TWlsZXN0b25lMjc4NzA5OQ==", "number": 47, "title": "1.1.0", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2017-09-23T19:01:24Z", "updated_at": "2019-02-16T10:22:02Z", "due_on": "2017-10-08T07:00:00Z", "closed_at": "2017-10-08T00:42:10Z"}, "comments": 1, "created_at": "2017-10-01T15:26:49Z", "updated_at": "2017-10-01T18:48:58Z", "closed_at": "2017-10-01T18:48:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There is a small bug in the rc4 **pyinstaller-made single-file binaries** (it does not affect other installation methods, only when you use the pyinstaller-made binary).\r\n\r\nYou can work around it by:\r\n\r\n```\r\nexport LD_LIBRARY_PATH=/doesntexist\r\n```\r\n\r\nCause: wrong assumption about \"else\" branch in https://github.com/borgbackup/borg/pull/3060/commits/5dd16672c0e82e1bde24c53a45629527bda77d2a.\r\n\r\nWe still need the else-branch with pyi v3.2.1 because it is not only for ancient pyinstallers that do not support LD_LIBRARY_PATH_ORIG at all, but also for the case when LD_LIBRARY_PATH was not set when pyinstaller bootloader gets executed. It won't put LD_LIBRARY_PATH_ORIG into the environment in that case.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3077/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3050", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3050/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3050/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3050/events", "html_url": "https://github.com/borgbackup/borg/issues/3050", "id": 260016649, "node_id": "MDU6SXNzdWUyNjAwMTY2NDk=", "number": 3050, "title": "Zenity does not work with BORG_PASSCOMMAND", "user": {"login": "rugk", "id": 11966684, "node_id": "MDQ6VXNlcjExOTY2Njg0", "avatar_url": "https://avatars.githubusercontent.com/u/11966684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rugk", "html_url": "https://github.com/rugk", "followers_url": "https://api.github.com/users/rugk/followers", "following_url": "https://api.github.com/users/rugk/following{/other_user}", "gists_url": "https://api.github.com/users/rugk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rugk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rugk/subscriptions", "organizations_url": "https://api.github.com/users/rugk/orgs", "repos_url": "https://api.github.com/users/rugk/repos", "events_url": "https://api.github.com/users/rugk/events{/privacy}", "received_events_url": "https://api.github.com/users/rugk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/46", "html_url": "https://github.com/borgbackup/borg/milestone/46", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/46/labels", "id": 2754882, "node_id": "MDk6TWlsZXN0b25lMjc1NDg4Mg==", "number": 46, "title": "1.1.0rc4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-09-09T22:10:07Z", "updated_at": "2017-10-01T03:01:38Z", "due_on": "2017-09-24T07:00:00Z", "closed_at": "2017-10-01T03:01:38Z"}, "comments": 1, "created_at": "2017-09-23T15:49:10Z", "updated_at": "2017-09-25T03:27:31Z", "closed_at": "2017-09-25T03:27:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### STR\r\n1. Make sure `zenity --password` works, when you enter it into the CLI.\r\n2. `export BORG_PASSCOMMAND='zenity --password'`\r\n3. Run `borg create`\r\n\r\n### What happens\r\n``` \r\nzenity: /tmp/_MEIomrn2c/libz.so.1: version `ZLIB_1.2.9' not found (required by /lib64/libpng16.so.16)\r\npasscommand supplied in BORG_PASSCOMMAND failed: Command '['zenity', '--password']' returned non-zero exit status 1\r\n```\r\n\r\n### What should happen\r\nThe same as when I run the command manually.\r\n\r\nI assume the tempdir `/tmp/_MEIomrn2c/` is created by borg.\r\n\r\n### Workaround\r\n\r\n```\r\nexport BORG_PASSPHRASE=\"$( zenity --password )\"\r\n```\r\n\r\n### More info\r\n\r\nusing same user (no sudo, nothing else)\r\nborg 1.1.0rc3\r\nFedora 26", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3050/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/3030", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/3030/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/3030/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/3030/events", "html_url": "https://github.com/borgbackup/borg/issues/3030", "id": 257892902, "node_id": "MDU6SXNzdWUyNTc4OTI5MDI=", "number": 3030, "title": "Archive lost after one-byte change to data.", "user": {"login": "dseomn", "id": 15314936, "node_id": "MDQ6VXNlcjE1MzE0OTM2", "avatar_url": "https://avatars.githubusercontent.com/u/15314936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dseomn", "html_url": "https://github.com/dseomn", "followers_url": "https://api.github.com/users/dseomn/followers", "following_url": "https://api.github.com/users/dseomn/following{/other_user}", "gists_url": "https://api.github.com/users/dseomn/gists{/gist_id}", "starred_url": "https://api.github.com/users/dseomn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dseomn/subscriptions", "organizations_url": "https://api.github.com/users/dseomn/orgs", "repos_url": "https://api.github.com/users/dseomn/repos", "events_url": "https://api.github.com/users/dseomn/events{/privacy}", "received_events_url": "https://api.github.com/users/dseomn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/82", "html_url": "https://github.com/borgbackup/borg/milestone/82", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/82/labels", "id": 7696357, "node_id": "MI_kwDOAh3yxs4AdW_l", "number": 82, "title": "1.2.2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-02-20T16:01:48Z", "updated_at": "2022-08-20T20:00:47Z", "due_on": null, "closed_at": "2022-08-20T20:00:47Z"}, "comments": 8, "created_at": "2017-09-15T00:22:10Z", "updated_at": "2022-06-13T18:13:06Z", "closed_at": "2022-06-13T18:13:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "After making a one-byte change to data from one of my archives, I lose the entire archive. The commands I ran are below, and the output from both `get-obj` calls is in [manifest.zip](https://github.com/borgbackup/borg/files/1304930/manifest.zip).\r\n\r\n```\r\n# ~/.local/bin/borg -V\r\nborg 1.0.11\r\n# cp -a /tmp/tmp.BwIGMQH0FT/dev/in-progress.2017-09-14T22\\:09\\:35Z/repos/borg/chusuk-root test\r\n# ~/.local/bin/borg list test\r\nstatic-chusuk-root-files-2017-09-05T19:53:31Z Wed, 2017-09-13 23:44:08\r\nstatic-chusuk-root-dpkgselections-2017-09-05T19:53:31Z Wed, 2017-09-13 23:44:09\r\n# ~/.local/bin/borg debug get-obj test 0000000000000000000000000000000000000000000000000000000000000000 test.manifest.pre-change\r\nobject 0000000000000000000000000000000000000000000000000000000000000000 fetched.\r\n# sed -i 's/acpi-support/bcpi-support/' test/data/0/2\r\n# ~/.local/bin/borg debug get-obj test 0000000000000000000000000000000000000000000000000000000000000000 test.manifest.post-change\r\nobject 0000000000000000000000000000000000000000000000000000000000000000 fetched.\r\n# ~/.local/bin/borg list test\r\nstatic-chusuk-root-files-2017-09-05T19:53:31Z Wed, 2017-09-13 23:44:08\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/3030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/3030/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2994", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2994/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2994/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2994/events", "html_url": "https://github.com/borgbackup/borg/issues/2994", "id": 254824064, "node_id": "MDU6SXNzdWUyNTQ4MjQwNjQ=", "number": 2994, "title": "timestamp microseconds parsing issue", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/24", "html_url": "https://github.com/borgbackup/borg/milestone/24", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/24/labels", "id": 1872754, "node_id": "MDk6TWlsZXN0b25lMTg3Mjc1NA==", "number": 24, "title": "1.1.0rc3", "description": "", "creator": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-07-08T18:19:55Z", "updated_at": "2017-09-10T01:29:42Z", "due_on": "2017-09-17T07:00:00Z", "closed_at": "2017-09-10T01:29:42Z"}, "comments": 8, "created_at": "2017-09-02T17:10:56Z", "updated_at": "2018-12-18T13:16:45Z", "closed_at": "2017-09-07T12:54:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Spurious failure seen in a unrelated 1.1-maint PR on py 3.4:\r\n```\r\n.tox/py34/lib/python3.4/site-packages/borg/archiver.py:1232: in _delete_archives\r\n    manifest.write()\r\n.tox/py34/lib/python3.4/site-packages/borg/helpers.py:393: in write\r\n    prev_ts = self.last_timestamp\r\n.tox/py34/lib/python3.4/site-packages/borg/helpers.py:321: in last_timestamp\r\n    return datetime.strptime(self.timestamp, \"%Y-%m-%dT%H:%M:%S.%f\")\r\n\r\nE           ValueError: time data '2017-09-02T16:16:34' does not match format '%Y-%m-%dT%H:%M:%S.%f'\r\n```\r\n\r\nSuspicion: crappy standard formatting behaviour of stdlib to only add `.uuu` for the microsecs if microsecs != 0, which then causes complications when trying to parse that.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2982", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2982/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2982/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2982/events", "html_url": "https://github.com/borgbackup/borg/issues/2982", "id": 253644879, "node_id": "MDU6SXNzdWUyNTM2NDQ4Nzk=", "number": 2982, "title": "with-lock crashes with 1.1.0-rc2", "user": {"login": "magma1447", "id": 1918311, "node_id": "MDQ6VXNlcjE5MTgzMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1918311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magma1447", "html_url": "https://github.com/magma1447", "followers_url": "https://api.github.com/users/magma1447/followers", "following_url": "https://api.github.com/users/magma1447/following{/other_user}", "gists_url": "https://api.github.com/users/magma1447/gists{/gist_id}", "starred_url": "https://api.github.com/users/magma1447/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magma1447/subscriptions", "organizations_url": "https://api.github.com/users/magma1447/orgs", "repos_url": "https://api.github.com/users/magma1447/repos", "events_url": "https://api.github.com/users/magma1447/events{/privacy}", "received_events_url": "https://api.github.com/users/magma1447/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/24", "html_url": "https://github.com/borgbackup/borg/milestone/24", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/24/labels", "id": 1872754, "node_id": "MDk6TWlsZXN0b25lMTg3Mjc1NA==", "number": 24, "title": "1.1.0rc3", "description": "", "creator": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-07-08T18:19:55Z", "updated_at": "2017-09-10T01:29:42Z", "due_on": "2017-09-17T07:00:00Z", "closed_at": "2017-09-10T01:29:42Z"}, "comments": 14, "created_at": "2017-08-29T12:44:43Z", "updated_at": "2017-09-07T08:36:10Z", "closed_at": "2017-09-07T08:36:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just upgraded from borgbackup-1.1.0-b3 to rc2, found an issue within minutes.\r\n\r\nA simple example, borgbackup is version 1.1.0-rc2\r\n> $ borgbackup --version\r\nborgbackup 1.1.0rc2\r\n> $ borgbackup with-lock mail-01.borg ls\r\n[Files are listed here]\r\n> Data integrity error: Segment entry data short read [segment 391, offset 1590]: expected 1890652, got 2497 bytes\r\n> Traceback (most recent call last):\r\n>   File \"borg/archiver.py\", line 3968, in main\r\n>   File \"borg/archiver.py\", line 3896, in run\r\n>   File \"borg/archiver.py\", line 148, in wrapper\r\n>   File \"borg/archiver.py\", line 1677, in do_with_lock\r\n>   File \"borg/repository.py\", line 411, in commit\r\n>   File \"borg/repository.py\", line 685, in compact_segments\r\n>   File \"borg/repository.py\", line 1292, in iter_objects\r\n>   File \"borg/repository.py\", line 1373, in _read\r\n> borg.helpers.IntegrityError: Data integrity error: Segment entry data short read [segment 391, offset 1590]: expected 1890652, got 2497 bytes\r\n> \r\n> Platform: Linux thor 4.8.0-1-amd64 #1 SMP Debian 4.8.5-1 (2016-10-28) x86_64 \r\n> Linux: debian stretch/sid \r\n> Borg: 1.1.0rc2  Python: CPython 3.5.3\r\n> PID: 31905  CWD: /data/borg-WedFriSun\r\n> sys.argv: ['borgbackup', 'with-lock', 'mail-01.borg', 'ls']\r\n> SSH_ORIGINAL_COMMAND: None\r\n> \r\n\r\nWith 1.1.0-b3 it works fine.\r\n\r\nNo errors when running check\r\n> $ borgbackup check mail-01.borg\r\n> Enter passphrase for key /data/borg-WedFriSun/mail-01.borg: \r\n>\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2982/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2957", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2957/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2957/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2957/events", "html_url": "https://github.com/borgbackup/borg/issues/2957", "id": 252280610, "node_id": "MDU6SXNzdWUyNTIyODA2MTA=", "number": 2957, "title": "--timestamp time (vs list time)", "user": {"login": "taam", "id": 15984287, "node_id": "MDQ6VXNlcjE1OTg0Mjg3", "avatar_url": "https://avatars.githubusercontent.com/u/15984287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taam", "html_url": "https://github.com/taam", "followers_url": "https://api.github.com/users/taam/followers", "following_url": "https://api.github.com/users/taam/following{/other_user}", "gists_url": "https://api.github.com/users/taam/gists{/gist_id}", "starred_url": "https://api.github.com/users/taam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taam/subscriptions", "organizations_url": "https://api.github.com/users/taam/orgs", "repos_url": "https://api.github.com/users/taam/repos", "events_url": "https://api.github.com/users/taam/events{/privacy}", "received_events_url": "https://api.github.com/users/taam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-08-23T13:20:42Z", "updated_at": "2017-08-25T02:36:47Z", "closed_at": "2017-08-25T02:36:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "The time set with `--timestamp` is the end time, whereas `list` shows the start time, e.g.:\r\n\r\n```\r\n$ borg create --timestamp 2017-01-01T00:00:00 ::foo bar\r\n$ borg list\r\nfoo                                  Sat, 2016-12-31 23:59:59\r\n$ borg info ::foo\r\n[...]\r\nTime (start): Sat, 2016-12-31 23:59:59\r\nTime (end):   Sun, 2017-01-01 00:00:00\r\nCommand line: borg create --timestamp 2017-01-01T00:00:00 ::foo bar\r\n[...]\r\n```\r\n\r\nHaving a start and end time is weird with only a single timestamp given. But if current design should not be changed and the start time is considered the important one, that's what `--timestamp` should set.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2923", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2923/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2923/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2923/events", "html_url": "https://github.com/borgbackup/borg/issues/2923", "id": 248256372, "node_id": "MDU6SXNzdWUyNDgyNTYzNzI=", "number": 2923, "title": "lock.roster left behind after umount in 1.1.0 rc1", "user": {"login": "cwygerde", "id": 30776877, "node_id": "MDQ6VXNlcjMwNzc2ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/30776877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cwygerde", "html_url": "https://github.com/cwygerde", "followers_url": "https://api.github.com/users/cwygerde/followers", "following_url": "https://api.github.com/users/cwygerde/following{/other_user}", "gists_url": "https://api.github.com/users/cwygerde/gists{/gist_id}", "starred_url": "https://api.github.com/users/cwygerde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cwygerde/subscriptions", "organizations_url": "https://api.github.com/users/cwygerde/orgs", "repos_url": "https://api.github.com/users/cwygerde/repos", "events_url": "https://api.github.com/users/cwygerde/events{/privacy}", "received_events_url": "https://api.github.com/users/cwygerde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/44", "html_url": "https://github.com/borgbackup/borg/milestone/44", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/44/labels", "id": 2687140, "node_id": "MDk6TWlsZXN0b25lMjY4NzE0MA==", "number": 44, "title": "1.1.0rc2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2017-08-08T03:20:17Z", "updated_at": "2017-08-28T00:43:44Z", "due_on": "2017-08-27T07:00:00Z", "closed_at": "2017-08-28T00:43:44Z"}, "comments": 8, "created_at": "2017-08-06T16:14:47Z", "updated_at": "2017-08-13T17:49:38Z", "closed_at": "2017-08-13T17:49:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have been testing v1.1.0 rc1 and found the following issue:\r\nBefore doing a backup I check if a backup is neccessary by mounting the repo and comparing the latest archive with the source.\r\nThen the repo is unmounted.\r\nAt the beginning of the next backup I get a message that lock.roster files are removed for PID ...\r\nA workaround is doing a borg break-lock after each borg umount.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2910", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2910/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2910/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2910/events", "html_url": "https://github.com/borgbackup/borg/issues/2910", "id": 247275536, "node_id": "MDU6SXNzdWUyNDcyNzU1MzY=", "number": 2910, "title": "Invoking \"borg serve\" compares None with int in version 1.0.11", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/43", "html_url": "https://github.com/borgbackup/borg/milestone/43", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/43/labels", "id": 2651217, "node_id": "MDk6TWlsZXN0b25lMjY1MTIxNw==", "number": 43, "title": "1.0.12", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 19, "state": "closed", "created_at": "2017-07-19T22:32:15Z", "updated_at": "2018-04-08T18:14:50Z", "due_on": null, "closed_at": "2018-04-08T18:14:50Z"}, "comments": 1, "created_at": "2017-08-02T05:16:19Z", "updated_at": "2017-08-06T08:56:37Z", "closed_at": "2017-08-06T08:56:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$LOG ERROR Remote: Local Exception.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2168, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2104, in run\r\n    return set_ec(func(args))\r\n  File \"/usr/lib64/python3.4/site-packages/borg/helpers.py\", line 85, in set_ec\r\n    exit_code = max(exit_code, ec)\r\nTypeError: unorderable types: NoneType() > int()\r\n\r\nPlatform: REDACTED\r\nLinux: Gentoo Base System 2.3 \r\nBorg: 1.0.11  Python: CPython 3.4.5\r\nPID: 11348  CWD: /var/lib/borg\r\nsys.argv: ['/usr/lib/python-exec/python3.4/borg', 'serve', '--append-only', '--restrict-to-path', '/var/lib/borg/REDACTED']\r\n```\r\n\r\nIt looks like **Archiver.run** is calling **Archiver.do_serve**, which is expecting a return value from **RepositoryServer.serve**, but **RepositoryServer.serve** doesn't return anything.\r\n\r\nThe actual backup is completed successfully, prior to the exception being raised.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2910/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2878", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2878/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2878/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2878/events", "html_url": "https://github.com/borgbackup/borg/issues/2878", "id": 245101697, "node_id": "MDU6SXNzdWUyNDUxMDE2OTc=", "number": 2878, "title": "get_cache_dir crashes with bad symlink", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/24", "html_url": "https://github.com/borgbackup/borg/milestone/24", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/24/labels", "id": 1872754, "node_id": "MDk6TWlsZXN0b25lMTg3Mjc1NA==", "number": 24, "title": "1.1.0rc3", "description": "", "creator": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-07-08T18:19:55Z", "updated_at": "2017-09-10T01:29:42Z", "due_on": "2017-09-17T07:00:00Z", "closed_at": "2017-09-10T01:29:42Z"}, "comments": 1, "created_at": "2017-07-24T14:37:46Z", "updated_at": "2017-07-24T15:15:30Z", "closed_at": "2017-07-24T15:15:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n# borg mount repo mnt\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 3956, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 3884, in run\r\n    return set_ec(func(args))\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 1285, in do_mount\r\n    return self._do_mount(args)\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 140, in wrapper\r\n    assert_secure(repository, kwargs['manifest'])\r\n  File \"/home/tw/w/borg/src/borg/cache.py\", line 196, in assert_secure\r\n    sm = SecurityManager(repository)\r\n  File \"/home/tw/w/borg/src/borg/cache.py\", line 62, in __init__\r\n    self.cache_dir = cache_dir(repository)\r\n  File \"/home/tw/w/borg/src/borg/cache.py\", line 217, in cache_dir\r\n    return path or os.path.join(get_cache_dir(), repository.id_str)\r\n  File \"/home/tw/w/borg/src/borg/helpers.py\", line 510, in get_cache_dir\r\n    os.makedirs(cache_dir)\r\n  File \"/home/tw/w/borg-env/lib/python3.4/os.py\", line 237, in makedirs\r\n    mkdir(name, mode)\r\nFileExistsError: [Errno 17] File exists: '/root/.cache/borg'\r\n\r\nPlatform: Linux tux 4.11.9-tw1 #4 SMP Sat Jul 8 05:48:55 CEST 2017 x86_64 x86_64\r\nLinux: Ubuntu 16.04 xenial\r\nBorg: 1.1.0rc2.dev1+gb85076d  Python: CPython 3.4.5\r\nPID: 28369  CWD: /home/tw/w/borg\r\nsys.argv: ['/home/tw/w/borg-env/bin/borg', 'mount', 'repo', 'mnt']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\n# ls -l /root/.cache/borg\r\nlrwxrwxrwx 1 root root 16 Sep 15  2015 /root/.cache/borg -> /cache/root/borg\r\n```\r\n\r\nNote: target of symlink does not exist.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2878/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2866", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2866/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2866/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2866/events", "html_url": "https://github.com/borgbackup/borg/issues/2866", "id": 244913976, "node_id": "MDU6SXNzdWUyNDQ5MTM5NzY=", "number": 2866, "title": "When merging/pulling chunk index --progress-like output is used despite not passed", "user": {"login": "rugk", "id": 11966684, "node_id": "MDQ6VXNlcjExOTY2Njg0", "avatar_url": "https://avatars.githubusercontent.com/u/11966684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rugk", "html_url": "https://github.com/rugk", "followers_url": "https://api.github.com/users/rugk/followers", "following_url": "https://api.github.com/users/rugk/following{/other_user}", "gists_url": "https://api.github.com/users/rugk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rugk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rugk/subscriptions", "organizations_url": "https://api.github.com/users/rugk/orgs", "repos_url": "https://api.github.com/users/rugk/repos", "events_url": "https://api.github.com/users/rugk/events{/privacy}", "received_events_url": "https://api.github.com/users/rugk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-07-23T14:35:12Z", "updated_at": "2017-10-20T17:04:48Z", "closed_at": "2017-10-18T03:07:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When you need to merge the chunk index as you deleted the local chunk index/cache, then you always get this log output: (when piping/directing it to a log file as you usually do in automated systems):\r\n```\r\nMerging chunk index... (0.00%)\r\nMerging chunk index... (1.22%)\r\nMerging chunk index... (3.32%)\r\n[\u2026]\r\nMerging chunk index... (100.00%)\r\n```\r\n(no original log file, just how I remember it)\r\n\r\nHowever the command I executed there (borg create), did not have the `--progress` parameter passed, but just some usual ones (`-v` and `--stats`), whcih do have such a progress bar/indicator. Thus, IMHO, the behaviour of borg is wrong here. The output without `--progress` should be something like `Merging chunk index...` without any percentage.\r\n\r\nv1.0.10\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2863", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2863/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2863/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2863/events", "html_url": "https://github.com/borgbackup/borg/issues/2863", "id": 244874870, "node_id": "MDU6SXNzdWUyNDQ4NzQ4NzA=", "number": 2863, "title": "Can mount, but not umount", "user": {"login": "rugk", "id": 11966684, "node_id": "MDQ6VXNlcjExOTY2Njg0", "avatar_url": "https://avatars.githubusercontent.com/u/11966684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rugk", "html_url": "https://github.com/rugk", "followers_url": "https://api.github.com/users/rugk/followers", "following_url": "https://api.github.com/users/rugk/following{/other_user}", "gists_url": "https://api.github.com/users/rugk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rugk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rugk/subscriptions", "organizations_url": "https://api.github.com/users/rugk/orgs", "repos_url": "https://api.github.com/users/rugk/repos", "events_url": "https://api.github.com/users/rugk/events{/privacy}", "received_events_url": "https://api.github.com/users/rugk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-07-22T22:12:42Z", "updated_at": "2017-07-24T19:08:44Z", "closed_at": "2017-07-24T19:08:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "v1.0.9\r\n\r\nSTR (working as a non-root user by default):\r\n1. mkdir mnt\r\n2. setting repo/passphrase\r\n3. ```shell\r\n    $ borg mount :: ./mnt\r\n    fuse: failed to exec fusermount: No such file or directory\r\n    ``` \r\n4. Retried with `sudo borg mount :: ./mnt` works. (`borg mount :: ./mnt  4,81s user 0,75s system 27% cpu 19,883 total`) on a btrfs filesystem BTW. (Also set repo etc. again, so it works.)\r\n5. browse in it\r\n(interestingly for non-root users no username/password were shown and they could not access it)\r\n6. Unmounting fails:\r\n```shell \r\nborg umount ./mnt\r\nLocal Exception.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 2052, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 1997, in run\r\n    return func(args)\r\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 564, in do_umount\r\n    return umount(args.mountpoint)\r\n  File \"borg/platform_linux.pyx\", line 148, in borg.platform_linux.umount (borg/platform_linux.c:4217)\r\n  File \"/usr/lib/python3.5/subprocess.py\", line 247, in call\r\n    with Popen(*popenargs, **kwargs) as p:\r\n  File \"/usr/lib/python3.5/subprocess.py\", line 676, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"/usr/lib/python3.5/subprocess.py\", line 1282, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg)\r\nFileNotFoundError: [Errno 2] No such file or directory: 'fusermount'\r\n\r\nPlatform: XXXXXXX #2 SMP Sat May 6 19:26:50 UTC 2017 armv7l \r\nLinux: debian 9.0 \r\nBorg: 1.0.9  Python: CPython 3.5.3\r\nPID: 9277  CWD XXXXX\r\nsys.argv: ['/usr/bin/borg', 'umount', './mnt']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nWith `umount ./mnt` I could finally unmount the repo anyway\u2026", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2853", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2853/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2853/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2853/events", "html_url": "https://github.com/borgbackup/borg/issues/2853", "id": 244815814, "node_id": "MDU6SXNzdWUyNDQ4MTU4MTQ=", "number": 2853, "title": "crash with 1.1.0b6 on borg create with --no-cache-sync", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653081047, "node_id": "MDU6TGFiZWw2NTMwODEwNDc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20cache", "name": "c: cache", "color": "4B0082", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/30", "html_url": "https://github.com/borgbackup/borg/milestone/30", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/30/labels", "id": 1943086, "node_id": "MDk6TWlsZXN0b25lMTk0MzA4Ng==", "number": 30, "title": "1.1.0rc1", "description": "issues / fixes coming up in 1.1 beta testing.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2016-08-15T17:59:51Z", "updated_at": "2017-07-23T23:30:54Z", "due_on": "2017-07-23T07:00:00Z", "closed_at": "2017-07-23T23:30:54Z"}, "comments": 1, "created_at": "2017-07-22T01:40:36Z", "updated_at": "2017-07-23T12:31:10Z", "closed_at": "2017-07-23T12:31:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 4063, in main\r\n  File \"borg/archiver.py\", line 3991, in run\r\n  File \"borg/archiver.py\", line 146, in wrapper\r\n  File \"borg/archiver.py\", line 514, in do_create\r\n  File \"borg/archiver.py\", line 479, in create_inner\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 579, in _process\r\n  File \"borg/archiver.py\", line 557, in _process\r\n  File \"borg/archive.py\", line 990, in process_file\r\n  File \"borg/archive.py\", line 936, in chunk_file\r\n  File \"borg/cache.py\", line 1005, in chunk_incref\r\n  File \"borg/archive.py\", line 61, in update\r\nTypeError: unsupported operand type(s) for +=: 'int' and 'NoneType'\r\n\r\nPlatform: Linux server 4.8.0-58-generic #63~16.04.1-Ubuntu SMP Mon Jun 26 18:08:51 UTC 2017 x86_64 x86_64\r\nLinux: debian stretch/sid\r\nBorg: 1.1.0b6  Python: CPython 3.5.3\r\nPID: 27736  CWD: /usr/local/bin\r\nsys.argv: ['borg-1.1', 'create', '-v', '--list', '--filter=AME', '--compression', 'auto,lzma,6',\r\n '--stats', '--no-cache-sync', '--chunker-params', '17,23,20,4095',\r\n 'ssh://borg@server/./repo::myserver-2017-07-22-00:13:07', '/mnt/rootfs/',\r\n '--exclude-caches', ...]\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2850", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2850/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2850/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2850/events", "html_url": "https://github.com/borgbackup/borg/issues/2850", "id": 244646804, "node_id": "MDU6SXNzdWUyNDQ2NDY4MDQ=", "number": 2850, "title": "recreate leaves emtpy segments behind", "user": {"login": "fsironman", "id": 6130672, "node_id": "MDQ6VXNlcjYxMzA2NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6130672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fsironman", "html_url": "https://github.com/fsironman", "followers_url": "https://api.github.com/users/fsironman/followers", "following_url": "https://api.github.com/users/fsironman/following{/other_user}", "gists_url": "https://api.github.com/users/fsironman/gists{/gist_id}", "starred_url": "https://api.github.com/users/fsironman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fsironman/subscriptions", "organizations_url": "https://api.github.com/users/fsironman/orgs", "repos_url": "https://api.github.com/users/fsironman/repos", "events_url": "https://api.github.com/users/fsironman/events{/privacy}", "received_events_url": "https://api.github.com/users/fsironman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 653084310, "node_id": "MDU6TGFiZWw2NTMwODQzMTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20repository", "name": "c: repository", "color": "9683EC", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/55", "html_url": "https://github.com/borgbackup/borg/milestone/55", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/55/labels", "id": 3378290, "node_id": "MDk6TWlsZXN0b25lMzM3ODI5MA==", "number": 55, "title": "1.2.0 release (aka hydrogen)", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 50, "state": "closed", "created_at": "2018-05-26T12:32:09Z", "updated_at": "2022-03-07T11:43:27Z", "due_on": "2022-02-22T08:00:00Z", "closed_at": "2022-02-22T21:26:51Z"}, "comments": 36, "created_at": "2017-07-21T11:52:31Z", "updated_at": "2021-10-30T21:32:23Z", "closed_at": "2018-07-14T23:21:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "After running the recreate command with borg-linux64_1.1.0b6 there are a lot of emtpy segment files left in the data dir\r\n\r\nls -lh borg/data/0\r\n[...]\r\n`-rw-rw-r-x 1 myuser localsamba   17 Jul 21 12:23 4338`\r\n`-rw-rw-r-x 1 myuser localsamba   17 Jul 21 12:24 4340`\r\n`-rw-rw-r-x 1 myuser localsamba   17 Jul 21 12:24 4342`\r\n`-rw-rw-r-x 1 myuser localsamba   17 Jul 21 12:24 4344`\r\n`-rw-rw-r-x 1 myuser localsamba   17 Jul 21 12:24 4346`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 13:31 4348`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 13:32 4356`\r\n`-rw-rw-r-x 1 myuser localsamba  31M Jul 21 13:32 4357`\r\n[...]\r\n\r\nFull paste:\r\nhttps://pastebin.com/6y0Gxy0X\r\n\r\nThey stay there even after a new delete or create into the repository.\r\nThe only way for me to fix this was was to run borg check --repair\r\nAt the end of the repository check the \"empty\"  17 byte segments were deleted.\r\n\r\nls -lh    \r\n\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 10:55 4032`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 10:55 4033`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 10:55 4034`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 13:31 4348`\r\n`-rw-rw-r-x 1 myuser localsamba 201M Jul 21 13:32 4356`\r\n`-rw-rw-r-x 1 myuser localsamba  31M Jul 21 13:44 4360`\r\n\r\nI changed the max_segment_size = 209715200 in the config\r\nnot sure if this might be causing the problem", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2850/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2809", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2809/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2809/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2809/events", "html_url": "https://github.com/borgbackup/borg/issues/2809", "id": 242117428, "node_id": "MDU6SXNzdWUyNDIxMTc0Mjg=", "number": 2809, "title": "1.1.0b6 alpine linux build fails", "user": {"login": "schors", "id": 3613666, "node_id": "MDQ6VXNlcjM2MTM2NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3613666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schors", "html_url": "https://github.com/schors", "followers_url": "https://api.github.com/users/schors/followers", "following_url": "https://api.github.com/users/schors/following{/other_user}", "gists_url": "https://api.github.com/users/schors/gists{/gist_id}", "starred_url": "https://api.github.com/users/schors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schors/subscriptions", "organizations_url": "https://api.github.com/users/schors/orgs", "repos_url": "https://api.github.com/users/schors/repos", "events_url": "https://api.github.com/users/schors/events{/privacy}", "received_events_url": "https://api.github.com/users/schors/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/30", "html_url": "https://github.com/borgbackup/borg/milestone/30", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/30/labels", "id": 1943086, "node_id": "MDk6TWlsZXN0b25lMTk0MzA4Ng==", "number": 30, "title": "1.1.0rc1", "description": "issues / fixes coming up in 1.1 beta testing.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2016-08-15T17:59:51Z", "updated_at": "2017-07-23T23:30:54Z", "due_on": "2017-07-23T07:00:00Z", "closed_at": "2017-07-23T23:30:54Z"}, "comments": 2, "created_at": "2017-07-11T17:01:32Z", "updated_at": "2017-07-14T15:45:15Z", "closed_at": "2017-07-14T15:45:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dockerfile:\r\n```\r\nFROM alpine:3.6\r\n\r\nRUN apk add --no-cache bash python3 lz4-libs libattr libacl libressl ca-certificates \\\r\n        && pip3 install --upgrade pip \\\r\n        && apk add --no-cache --virtual .build-deps \\\r\n           gcc libc-dev make pcre-dev zlib-dev \\\r\n           python3-dev lz4-dev acl-dev attr-dev libressl-dev linux-headers\\\r\n        && pip3 install borgbackup==1.1.0b6 \\\r\n        && apk del .build-deps\r\n\r\n```\r\n\r\nSome error output:\r\n```\r\n\r\n...\r\n    running build_ext\r\n    building 'borg.compress' extension\r\n    creating build/temp.linux-x86_64-3.6\r\n    creating build/temp.linux-x86_64-3.6/src\r\n    creating build/temp.linux-x86_64-3.6/src/borg\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include -I/usr/include -I/usr/include/python3.6m -c src/borg/compress.c -o build/temp.linux-x86_64-3.6/src/borg/compress.o\r\n    src/borg/compress.c: In function '__pyx_pf_4borg_8compress_3LZ4_2compress':\r\n    src/borg/compress.c:2517:9: warning: 'LZ4_compress_limitedOutput' is deprecated: use LZ4_compress_default() instead [-Wdeprecated-declarations]\r\n             __pyx_v_osize = LZ4_compress_limitedOutput(__pyx_v_source, __pyx_v_dest, __pyx_v_isize, __pyx_v_osize);\r\n             ^~~~~~~~~~~~~\r\n    In file included from src/borg/compress.c:432:0:\r\n    /usr/include/lz4.h:432:58: note: declared here\r\n     LZ4_DEPRECATED(\"use LZ4_compress_default() instead\") int LZ4_compress_limitedOutput (const char* source, char* dest, int sourceSize, int maxOutputSize);\r\n                                                              ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    gcc -shared -Wl,--as-needed -Wl,--as-needed build/temp.linux-x86_64-3.6/src/borg/compress.o -L/usr/lib -L/usr/lib -L/usr/lib -llz4 -lpython3.6m -o build/lib.linux-x86_64-3.6/borg/compress.cpython-36m-x86_64-linux-gnu.so\r\n    building 'borg.crypto.low_level' extension\r\n    creating build/temp.linux-x86_64-3.6/src/borg/crypto\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include -I/usr/include -I/usr/include/python3.6m -c src/borg/crypto/low_level.c -o build/temp.linux-x86_64-3.6/src/borg/crypto/low_level.o\r\n    gcc -shared -Wl,--as-needed -Wl,--as-needed build/temp.linux-x86_64-3.6/src/borg/crypto/low_level.o -L/usr/lib -L/usr/lib -L/usr/lib -lcrypto -lpython3.6m -o build/lib.linux-x86_64-3.6/borg/crypto/low_level.cpython-36m-x86_64-linux-gnu.so\r\n    building 'borg.hashindex' extension\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include/python3.6m -c src/borg/hashindex.c -o build/temp.linux-x86_64-3.6/src/borg/hashindex.o\r\n    gcc -shared -Wl,--as-needed -Wl,--as-needed build/temp.linux-x86_64-3.6/src/borg/hashindex.o -L/usr/lib -lpython3.6m -o build/lib.linux-x86_64-3.6/borg/hashindex.cpython-36m-x86_64-linux-gnu.so\r\n    building 'borg.item' extension\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include/python3.6m -c src/borg/item.c -o build/temp.linux-x86_64-3.6/src/borg/item.o\r\n    gcc -shared -Wl,--as-needed -Wl,--as-needed build/temp.linux-x86_64-3.6/src/borg/item.o -L/usr/lib -lpython3.6m -o build/lib.linux-x86_64-3.6/borg/item.cpython-36m-x86_64-linux-gnu.so\r\n    building 'borg.chunker' extension\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include/python3.6m -c src/borg/chunker.c -o build/temp.linux-x86_64-3.6/src/borg/chunker.o\r\n    gcc -shared -Wl,--as-needed -Wl,--as-needed build/temp.linux-x86_64-3.6/src/borg/chunker.o -L/usr/lib -lpython3.6m -o build/lib.linux-x86_64-3.6/borg/chunker.cpython-36m-x86_64-linux-gnu.so\r\n    building 'borg.algorithms.checksums' extension\r\n    creating build/temp.linux-x86_64-3.6/src/borg/algorithms\r\n    gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Os -fomit-frame-pointer -Os -fomit-frame-pointer -Os -fomit-frame-pointer -fPIC -I/usr/include/python3.6m -c src/borg/algorithms/checksums.c -o build/temp.linux-x86_64-3.6/src/borg/algorithms/checksums.o\r\n    In file included from src/borg/algorithms/crc32_dispatch.c:3:0,\r\n                     from src/borg/algorithms/checksums.c:435:\r\n    src/borg/algorithms/crc32_slice_by_8.c:40:2: error: #error Unknown byte order\r\n     #error Unknown byte order\r\n      ^~~~~\r\n    error: command 'gcc' failed with exit status 1\r\n    \r\n    ----------------------------------------\r\nCommand \"/usr/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-ir8htrzr/borgbackup/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-d3cfom2r-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-ir8htrzr/borgbackup/\r\nThe command '/bin/sh -c apk add --no-cache bash python3 lz4-libs libattr libacl libressl ca-certificates         && pip3 install --upgrade pip         && apk add --no-cache --virtual .build-deps            gcc libc-dev make pcre-dev zlib-dev            python3-dev lz4-dev acl-dev attr-dev libressl-dev linux-headers        && pip3 install borgbackup==1.1.0b6         && apk del .build-deps' returned a non-zero code: 1\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2809/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2783", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2783/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2783/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2783/events", "html_url": "https://github.com/borgbackup/borg/issues/2783", "id": 240037734, "node_id": "MDU6SXNzdWUyNDAwMzc3MzQ=", "number": 2783, "title": "--last accepts negative values", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811716, "node_id": "MDU6TGFiZWwyMTA4MTE3MTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/40", "html_url": "https://github.com/borgbackup/borg/milestone/40", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/40/labels", "id": 2332085, "node_id": "MDk6TWlsZXN0b25lMjMzMjA4NQ==", "number": 40, "title": "1.0.11", "description": "", "creator": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2017-02-18T17:38:48Z", "updated_at": "2017-07-21T01:54:48Z", "due_on": "2017-07-16T07:00:00Z", "closed_at": "2017-07-21T01:54:48Z"}, "comments": 0, "created_at": "2017-07-02T22:08:07Z", "updated_at": "2017-07-02T22:08:10Z", "closed_at": "2017-07-02T22:08:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It wraps around with the usual Python semantics, i.e. --last -1 means the first six archives. --last 0 is largely equivalent to --repository-only.\r\n\r\nResolution: wontfix.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2783/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2782", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2782/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2782/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2782/events", "html_url": "https://github.com/borgbackup/borg/issues/2782", "id": 240037576, "node_id": "MDU6SXNzdWUyNDAwMzc1NzY=", "number": 2782, "title": "--last reverses list of archives", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/30", "html_url": "https://github.com/borgbackup/borg/milestone/30", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/30/labels", "id": 1943086, "node_id": "MDk6TWlsZXN0b25lMTk0MzA4Ng==", "number": 30, "title": "1.1.0rc1", "description": "issues / fixes coming up in 1.1 beta testing.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2016-08-15T17:59:51Z", "updated_at": "2017-07-23T23:30:54Z", "due_on": "2017-07-23T07:00:00Z", "closed_at": "2017-07-23T23:30:54Z"}, "comments": 0, "created_at": "2017-07-02T22:05:01Z", "updated_at": "2017-07-02T22:05:10Z", "closed_at": "2017-07-02T22:05:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Fixed by #2780 ", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2782/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2781", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2781/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2781/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2781/events", "html_url": "https://github.com/borgbackup/borg/issues/2781", "id": 240037559, "node_id": "MDU6SXNzdWUyNDAwMzc1NTk=", "number": 2781, "title": "--first and --last accept negative values and zero", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/30", "html_url": "https://github.com/borgbackup/borg/milestone/30", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/30/labels", "id": 1943086, "node_id": "MDk6TWlsZXN0b25lMTk0MzA4Ng==", "number": 30, "title": "1.1.0rc1", "description": "issues / fixes coming up in 1.1 beta testing.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 28, "state": "closed", "created_at": "2016-08-15T17:59:51Z", "updated_at": "2017-07-23T23:30:54Z", "due_on": "2017-07-23T07:00:00Z", "closed_at": "2017-07-23T23:30:54Z"}, "comments": 0, "created_at": "2017-07-02T22:04:37Z", "updated_at": "2017-07-02T22:04:42Z", "closed_at": "2017-07-02T22:04:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Fixed by #2780 ", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2781/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2718", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2718/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2718/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2718/events", "html_url": "https://github.com/borgbackup/borg/issues/2718", "id": 237377103, "node_id": "MDU6SXNzdWUyMzczNzcxMDM=", "number": 2718, "title": "local tox testing on 1.0-maint broken", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 4, "created_at": "2017-06-20T23:52:03Z", "updated_at": "2017-06-26T19:55:11Z", "closed_at": "2017-06-26T19:55:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n(borg-env) tw@tux:~/w/borg$ tox -e py34\r\nGLOB sdist-make: /home/tw/w/borg/setup.py\r\npy34 inst-nodeps: /home/tw/w/borg/.tox/dist/borgbackup-1.0.11.dev102+g6ce476a.zip\r\npy34 installed: You are using pip version 7.1.2, however version 9.0.1 is available.,You should consider upgrading via the 'pip install --upgrade pip' command.,apipkg==1.4,Attic==0.16,borgbackup==1.0.11.dev102+g6ce476a,coverage==4.4.1,Cython==0.25.2,execnet==1.4.1,llfuse==1.2,msgpack-python==0.4.8,pluggy==0.4.0,py==1.4.34,pytest==3.1.2,pytest-benchmark==3.0.0,pytest-cov==2.5.1,pytest-xdist==1.17.1,setuptools-scm==1.15.6,tox==2.7.0,virtualenv==13.1.2,wheel==0.24.0\r\npy34 runtests: PYTHONHASHSEED='2412370842'\r\npy34 runtests: commands[0] | py.test -n 4 -rs --cov=borg --cov-config=../.coveragerc --benchmark-skip --pyargs borg.testsuite\r\nTraceback (most recent call last):\r\n  File \"/home/tw/w/borg/.tox/py34/lib/python3.4/site-packages/_pytest/config.py\", line 336, in _getconftestmodules\r\n    return self._path2confmods[path]\r\nKeyError: local('/home/tw/w/borg/.tox')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/home/tw/w/borg/.tox/py34/lib/python3.4/site-packages/_pytest/config.py\", line 367, in _importconftest\r\n    return self._conftestpath2mod[conftestpath]\r\nKeyError: local('/home/tw/w/borg/conftest.py')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/home/tw/w/borg/.tox/py34/lib/python3.4/site-packages/_pytest/config.py\", line 373, in _importconftest\r\n    mod = conftestpath.pyimport()\r\n  File \"/home/tw/w/borg/.tox/py34/lib/python3.4/site-packages/py/_path/local.py\", line 662, in pyimport\r\n    __import__(modname)\r\n  File \"/home/tw/w/borg/.tox/py34/lib/python3.4/site-packages/_pytest/assertion/rewrite.py\", line 215, in load_module\r\n    py.builtin.exec_(co, mod.__dict__)\r\n  File \"/home/tw/w/borg/conftest.py\", line 7, in <module>\r\n    import borg.cache\r\n  File \"/home/tw/w/borg/borg/cache.py\", line 2, in <module>\r\n    from .remote import cache_if_remote\r\n  File \"/home/tw/w/borg/borg/remote.py\", line 15, in <module>\r\n    from .helpers import Error, IntegrityError, sysinfo\r\n  File \"/home/tw/w/borg/borg/helpers.py\", line 33, in <module>\r\n    from . import hashindex\r\nImportError: cannot import name 'hashindex'\r\nERROR: could not load /home/tw/w/borg/conftest.py\r\n\r\nERROR: InvocationError: '/home/tw/w/borg/.tox/py34/bin/py.test -n 4 -rs --cov=borg --cov-config=../.coveragerc --benchmark-skip --pyargs borg.testsuite'\r\n____________________________________________________________ summary ____________________________________________________________\r\nERROR:   py34: commands failed\r\n```\r\n\r\nSeems like this was introduced by 6ce476a42b7a6044fdaf8e0c97f8c8b1eb52b518 - that commit fails like seen above, the commit right before that works for me.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2702", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2702/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2702/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2702/events", "html_url": "https://github.com/borgbackup/borg/issues/2702", "id": 236714816, "node_id": "MDU6SXNzdWUyMzY3MTQ4MTY=", "number": 2702, "title": "div by zero on freebsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653081047, "node_id": "MDU6TGFiZWw2NTMwODEwNDc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20cache", "name": "c: cache", "color": "4B0082", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-06-18T11:09:00Z", "updated_at": "2017-07-23T10:38:07Z", "closed_at": "2017-06-18T12:34:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "found in 1.1.0b6 release testing:\r\n```\r\n==> freebsd64: __________________ ArchiverTestCase.test_create_no_cache_sync __________________\r\n...\r\n==> freebsd64:         duration = perf_counter() - t0\r\n==> freebsd64:         pi.finish()\r\n==> freebsd64:         logger.debug('AdHocCache: downloaded %d chunk IDs in %.2f s (%d requests), ~%s/s',\r\n==> freebsd64: >                    num_chunks, duration, num_requests, format_file_size(num_chunks * 34 / duration))\r\n==> freebsd64: E       ZeroDivisionError: float division by zero\r\n==> freebsd64: \r\n==> freebsd64: .tox/py36/lib/python3.6/site-packages/borg/cache.py:1066: ZeroDivisionError\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2702/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2674", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2674/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2674/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2674/events", "html_url": "https://github.com/borgbackup/borg/issues/2674", "id": 235632951, "node_id": "MDU6SXNzdWUyMzU2MzI5NTE=", "number": 2674, "title": "FUSE crashes when encountering negative uid/gid", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 1, "created_at": "2017-06-13T17:42:02Z", "updated_at": "2017-06-30T15:18:47Z", "closed_at": "2017-06-13T17:53:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "moved from #2595, reported by @smariot:\r\n\r\nMy archive contains a lot of files with UID and GID set to -1. borg mount aborts because fuse throws an exception when it encounters the negative group id.\r\n\r\nThe archive was created in Windows under Cygwin, and these 'ownerless' files came from an external drive.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2674/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2659", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2659/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2659/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2659/events", "html_url": "https://github.com/borgbackup/borg/issues/2659", "id": 235057057, "node_id": "MDU6SXNzdWUyMzUwNTcwNTc=", "number": 2659, "title": "Feature flags: cache does not obey READ operation", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653081047, "node_id": "MDU6TGFiZWw2NTMwODEwNDc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20cache", "name": "c: cache", "color": "4B0082", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2017-06-11T10:31:31Z", "updated_at": "2017-07-23T10:38:07Z", "closed_at": "2017-06-16T07:48:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```py\r\n@with_repository(fake='dry_run', exclusive=True, compatibility=(Manifest.Operation.WRITE,))\r\ndef do_create(self, args, repository, manifest=None, key=None):\r\n```\r\n\r\nBut the cache may be synced, which needs Operation.READ, which is not checked.\r\n\r\nThe cache sync thus needs to perform another operation check with READ, independent of what the command opening the cache may have checked.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2645", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2645/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2645/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2645/events", "html_url": "https://github.com/borgbackup/borg/issues/2645", "id": 234921634, "node_id": "MDU6SXNzdWUyMzQ5MjE2MzQ=", "number": 2645, "title": "borg extract --stdout also writes to disk when dir is restored", "user": {"login": "rugk", "id": 11966684, "node_id": "MDQ6VXNlcjExOTY2Njg0", "avatar_url": "https://avatars.githubusercontent.com/u/11966684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rugk", "html_url": "https://github.com/rugk", "followers_url": "https://api.github.com/users/rugk/followers", "following_url": "https://api.github.com/users/rugk/following{/other_user}", "gists_url": "https://api.github.com/users/rugk/gists{/gist_id}", "starred_url": "https://api.github.com/users/rugk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rugk/subscriptions", "organizations_url": "https://api.github.com/users/rugk/orgs", "repos_url": "https://api.github.com/users/rugk/repos", "events_url": "https://api.github.com/users/rugk/events{/privacy}", "received_events_url": "https://api.github.com/users/rugk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 6, "created_at": "2017-06-09T19:44:26Z", "updated_at": "2017-06-16T00:39:06Z", "closed_at": "2017-06-13T07:25:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "From the doc I would have expected that `borg extract --stdout` *only* writes to the STDOUT. However, it actually writes to stdout and \u2013 as usual without the parameter \u2013 to the file path.\r\n\r\nIMHO this is unexpected, or is this even a bug? (borg 1.0.10)\r\n\r\nActually I am also not sure what would happen if you restore a RAW device like in your doc example:\r\n```shell\r\n$ borg extract --stdout /path/to/repo::my-sdx | dd of=/dev/sdx bs=10M\r\n```\r\n\r\nMaybe the file is dumped somewhere too, or in this case it works as I expected? I only tested it with a usual text file.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2645/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2645/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2637", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2637/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2637/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2637/events", "html_url": "https://github.com/borgbackup/borg/issues/2637", "id": 234670105, "node_id": "MDU6SXNzdWUyMzQ2NzAxMDU=", "number": 2637, "title": "truncated json", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/46", "html_url": "https://github.com/borgbackup/borg/milestone/46", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/46/labels", "id": 2754882, "node_id": "MDk6TWlsZXN0b25lMjc1NDg4Mg==", "number": 46, "title": "1.1.0rc4", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2017-09-09T22:10:07Z", "updated_at": "2017-10-01T03:01:38Z", "due_on": "2017-09-24T07:00:00Z", "closed_at": "2017-10-01T03:01:38Z"}, "comments": 19, "created_at": "2017-06-08T22:09:10Z", "updated_at": "2017-09-28T03:55:40Z", "closed_at": "2017-09-26T20:03:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n_______________ RemoteArchiverTestCase.test_corrupted_repository _______________\r\n[gw0] cygwin -- Python 3.6.1 /home/admin/w/borg/.tox/py36/bin/python3.6\r\nself = <borg.testsuite.archiver.RemoteArchiverTestCase testMethod=test_corrupted_repository>\r\n\r\n    def test_corrupted_repository(self):\r\n        self.cmd('init', '--encryption=repokey', self.repository_location)\r\n        self.create_src_archive('test')\r\n        self.cmd('extract', '--dry-run', self.repository_location + '::test')\r\n        output = self.cmd('check', '--show-version', self.repository_location)\r\n        self.assert_in('borgbackup version', output)  # implied output even without --info given\r\n        self.assert_not_in('Starting repository check', output)  # --info not given for root logger\r\n\r\n        name = sorted(os.listdir(os.path.join(self.tmpdir, 'repository', 'data', '0')), reverse=True)[1]\r\n        with open(os.path.join(self.tmpdir, 'repository', 'data', '0', name), 'r+b') as fd:\r\n            fd.seek(100)\r\n            fd.write(b'XXXX')\r\n>       output = self.cmd('check', '--info', self.repository_location, exit_code=1)\r\n\r\n.tox/py36/lib/python3.6/site-packages/borg/testsuite/archiver.py:1392:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n.tox/py36/lib/python3.6/site-packages/borg/testsuite/archiver.py:280: in cmd\r\n    ret, output = exec_cmd(*args, fork=fork, exe=self.EXE, archiver=self.archiver, **kw)\r\n.tox/py36/lib/python3.6/site-packages/borg/testsuite/archiver.py:99: in exec_cmd\r\n    ret = archiver.run(args)\r\n.tox/py36/lib/python3.6/site-packages/borg/archiver.py:3951: in run\r\n    return set_ec(func(args))\r\n.tox/py36/lib/python3.6/site-packages/borg/archiver.py:131: in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n.tox/py36/lib/python3.6/site-packages/borg/archiver.py:270: in do_check\r\n    if not repository.check(repair=args.repair, save_space=args.save_space):\r\n.tox/py36/lib/python3.6/site-packages/borg/remote.py:480: in do_rpc\r\n    return self.call(f.__name__, named, **extra)\r\n.tox/py36/lib/python3.6/site-packages/borg/remote.py:720: in call\r\n    for resp in self.call_many(cmd, [args], **kw):\r\n.tox/py36/lib/python3.6/site-packages/borg/remote.py:850: in call_many\r\n    handle_remote_line(line)\r\n.tox/py36/lib/python3.6/site-packages/borg/remote.py:984: in handle_remote_line\r\n    msg = json.loads(line)\r\n/usr/lib/python3.6/json/__init__.py:354: in loads\r\n    return _default_decoder.decode(s)\r\n/usr/lib/python3.6/json/decoder.py:339: in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <json.decoder.JSONDecoder object at 0x6ffff544518>\r\ns = '{\"type\": \"log_message\", \"time\": 1496955191.276449, \"message\": \"49934fdb70dd0194252f4649f659fe2f2a'\r\nidx = 0\r\n\r\n    def raw_decode(self, s, idx=0):\r\n        \"\"\"Decode a JSON document from ``s`` (a ``str`` beginning with\r\n            a JSON document) and return a 2-tuple of the Python\r\n            representation and the index in ``s`` where the document ended.\r\n\r\n            This can be used to decode a JSON document from a string that may\r\n            have extraneous data at the end.\r\n\r\n            \"\"\"\r\n        try:\r\n>           obj, end = self.scan_once(s, idx)\r\nE           json.decoder.JSONDecodeError: Unterminated string starting at: line 1 column 63 (char 62)\r\n\r\n/usr/lib/python3.6/json/decoder.py:355: JSONDecodeError\r\n```\r\nWhen it happens, it is always in test_corrupted_repository.\r\nBut not every run of this test fails. Looks like some race condition.\r\n\r\nNote: this log output could be from repository index check where it uses a line_format of:\r\n'ID', 'rebuilt index', 'committed index'.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2610", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2610/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2610/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2610/events", "html_url": "https://github.com/borgbackup/borg/issues/2610", "id": 233477741, "node_id": "MDU6SXNzdWUyMzM0Nzc3NDE=", "number": 2610, "title": "Confusing exception when passing invalid --keep-within interval", "user": {"login": "edgewood", "id": 60952, "node_id": "MDQ6VXNlcjYwOTUy", "avatar_url": "https://avatars.githubusercontent.com/u/60952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edgewood", "html_url": "https://github.com/edgewood", "followers_url": "https://api.github.com/users/edgewood/followers", "following_url": "https://api.github.com/users/edgewood/following{/other_user}", "gists_url": "https://api.github.com/users/edgewood/gists{/gist_id}", "starred_url": "https://api.github.com/users/edgewood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edgewood/subscriptions", "organizations_url": "https://api.github.com/users/edgewood/orgs", "repos_url": "https://api.github.com/users/edgewood/repos", "events_url": "https://api.github.com/users/edgewood/events{/privacy}", "received_events_url": "https://api.github.com/users/edgewood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-05T02:03:39Z", "updated_at": "2017-06-25T21:28:22Z", "closed_at": "2017-06-25T21:28:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I made some changes to my borg wrapper scripts which impacted how borg prune was called, and in the process stopped adding a timespan to \"--keep-within\" without really meaning to.  In my tests I got a very confusing exception that took me a few minutes to decode.\r\n```\r\nborg prune --info --stats --list --prefix projects=loghyr --keep-within 5 --keep-daily 30 --keep-weekly 26 --keep-monthly 60 borg@cantard.lan:/srv/borg/ephemeral\r\nLocal Exception.\r\nTraceback (most recent call last):\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/helpers.py\", line 190, in prune_within\r\n    hours = int(within[:-1]) * multiplier[within[-1]]\r\nValueError: invalid literal for int() with base 10: ''\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/archiver.py\", line 2089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/archiver.py\", line 2025, in run\r\n    return func(args)\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/archiver.py\", line 91, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/archiver.py\", line 698, in do_prune\r\n    keep += prune_within(archives, args.within)\r\n  File \"/home/backups/borg/venv/lib/python3.5/site-packages/borg/helpers.py\", line 193, in prune_within\r\n    raise argparse.ArgumentTypeError('Unable to parse --within option: \"%s\"' % within)\r\nargparse.ArgumentTypeError: Unable to parse --within option: \"5\"\r\n```\r\nThere's a hint at the problem in that last line of the stack trace (note, not the last line of the output), but it's not very explicit, and I missed it entirely for a minute or two.\r\n\r\nI'd suggest \"Invalid interval \"5\", expected one of [\"d\", ... ]\" with no stacktrace, either by adding a custom argparse validator for WITHIN, or by more granular parsing of the argument in prune_within.\r\n\r\nI'd be willing to take a shot at fixing this, especially if the custom argparse validator is the preferred solution (which I think it should be, to catch errors as early as possible).\r\n\r\nHere's the end of the exception output for completeness:\r\n```\r\nPlatform: Linux loghyr 3.2.0-120-generic #163-Ubuntu SMP Tue Dec 20 15:13:12 UTC 2016 i686 i686\r\nLinux: Ubuntu 12.04 precise\r\nBorg: 1.0.10  Python: CPython 3.5.2\r\nPID: 2809  CWD: /home/backups\r\nsys.argv: ['/home/backups/borg/venv/bin/borg', 'prune', '--info', '--stats', '--list', '--prefix',\r\n'projects=loghyr', '--keep-within', '5', '--keep-daily', '30', '--keep-weekly', '26',\r\n'--keep-monthly', '60', 'borg@cantard.lan:/srv/borg/ephemeral']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2610/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2595", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2595/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2595/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2595/events", "html_url": "https://github.com/borgbackup/borg/issues/2595", "id": 233379221, "node_id": "MDU6SXNzdWUyMzMzNzkyMjE=", "number": 2595, "title": "rsync from a borg mount throws \"Transport endpoint is not connected\"", "user": {"login": "jsalatiel", "id": 5522389, "node_id": "MDQ6VXNlcjU1MjIzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/5522389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsalatiel", "html_url": "https://github.com/jsalatiel", "followers_url": "https://api.github.com/users/jsalatiel/followers", "following_url": "https://api.github.com/users/jsalatiel/following{/other_user}", "gists_url": "https://api.github.com/users/jsalatiel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsalatiel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsalatiel/subscriptions", "organizations_url": "https://api.github.com/users/jsalatiel/orgs", "repos_url": "https://api.github.com/users/jsalatiel/repos", "events_url": "https://api.github.com/users/jsalatiel/events{/privacy}", "received_events_url": "https://api.github.com/users/jsalatiel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 25, "created_at": "2017-06-03T16:16:47Z", "updated_at": "2019-02-10T11:31:17Z", "closed_at": "2017-06-16T00:25:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have lost several files from my disk and i am trying to recover from my backup from last night. This is what i am doing:\r\n```\r\n# borg mount SOURCE /tmp/BACKUP\r\n# rsync -avhH  /tmp/BACKUP/data/ /home/user/data/\r\n```\r\nafter a few seconds, the rsync dies with lots of rsync: opendir \"...\" failed: Transport endpoint is not connected (107)\r\n\r\n\r\nI tried to run borg mount -f , and i do not see any error, the borg running in foreground just exit.\r\n\r\nAny ideas ?\r\n\r\ndebian jessie\r\nborgbackup                           1.0.9-1~bpo8+1\r\n```\r\n# borg -V\r\nborg 1.0.9\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2556", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2556/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2556/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2556/events", "html_url": "https://github.com/borgbackup/borg/issues/2556", "id": 230564243, "node_id": "MDU6SXNzdWUyMzA1NjQyNDM=", "number": 2556, "title": "version parsing code blows up with a dirty workdir", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 8, "created_at": "2017-05-23T01:42:29Z", "updated_at": "2017-06-07T00:04:27Z", "closed_at": "2017-06-07T00:04:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2556/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2538", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2538/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2538/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2538/events", "html_url": "https://github.com/borgbackup/borg/issues/2538", "id": 230202246, "node_id": "MDU6SXNzdWUyMzAyMDIyNDY=", "number": 2538, "title": "Very confusing error message when _version.py contains misdetected version", "user": {"login": "textshell", "id": 6579711, "node_id": "MDQ6VXNlcjY1Nzk3MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6579711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/textshell", "html_url": "https://github.com/textshell", "followers_url": "https://api.github.com/users/textshell/followers", "following_url": "https://api.github.com/users/textshell/following{/other_user}", "gists_url": "https://api.github.com/users/textshell/gists{/gist_id}", "starred_url": "https://api.github.com/users/textshell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/textshell/subscriptions", "organizations_url": "https://api.github.com/users/textshell/orgs", "repos_url": "https://api.github.com/users/textshell/repos", "events_url": "https://api.github.com/users/textshell/events{/privacy}", "received_events_url": "https://api.github.com/users/textshell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-21T07:11:20Z", "updated_at": "2017-05-23T13:19:58Z", "closed_at": "2017-05-23T13:19:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When installing borg from a git repository without tags or when setuptools_scm can not get the correct version for some other reason, borg fails with very confusing error messages.\r\n\r\n```\r\nborg list: error: argument REPOSITORY_OR_ARCHIVE: invalid validator value: '/tmp/borg-repo'\r\n```\r\n\r\n*How to reproduce:*\r\neasiest way without messing up the repository is to replace _version.py with\r\n```\r\nversion = '0.1.dev1+aaaa'\r\n```\r\nBut installing from a git repository without tags should reproduce this too.\r\n\r\n*Cause:*\r\nWhile parsing arguments `replace_placeholders` tries to use the version, but throws an exception which is somehow replaced by a confusing message in the argument parser exception handling.\r\n```\r\n>>> borg.helpers.Location('/tmp/borg-repo')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/martin/sw-dev/borg/src/borg/helpers.py\", line 979, in __init__\r\n    if not self.parse(self.orig):\r\n  File \"/home/martin/sw-dev/borg/src/borg/helpers.py\", line 983, in parse\r\n    text = replace_placeholders(text)\r\n  File \"/home/martin/sw-dev/borg/src/borg/helpers.py\", line 696, in replace_placeholders\r\n    'borgpatch': '%d.%d.%d' % borg_version_tuple[:3],\r\nTypeError: %d format: a number is required, not str\r\n```\r\n\r\n*Possible solution:*\r\nDo some sanity checking in `borg/__init__.py` and abort early with a clear error message?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2534", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2534/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2534/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2534/events", "html_url": "https://github.com/borgbackup/borg/issues/2534", "id": 230149466, "node_id": "MDU6SXNzdWUyMzAxNDk0NjY=", "number": 2534, "title": "null value in fuse", "user": {"login": "RonnyPfannschmidt", "id": 156838, "node_id": "MDQ6VXNlcjE1NjgzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RonnyPfannschmidt", "html_url": "https://github.com/RonnyPfannschmidt", "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers", "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}", "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions", "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs", "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos", "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 3, "created_at": "2017-05-20T12:03:39Z", "updated_at": "2017-05-20T17:31:50Z", "closed_at": "2017-05-20T17:31:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n$ borg mount manual_backup/borg_original/ mounted-backup/ --debug --foreground\r\nusing builtin fallback logging configuration\r\nEnter passphrase for key /run/media/rpfannsc/backups/manual_backup/borg_original: \r\nTAM not found and not required\r\nmount data cache capacity: 8 chunks\r\nMounting filesystem\r\nInitializing llfuse\r\nCalling fuse_mount\r\nCalling fuse_lowlevel_new\r\nCalling fuse_session_add_chan\r\nCalling fuse_session_loop\r\nhandler raised <class 'TypeError'> exception (expected bytes, NoneType found), terminating main loop.\r\nTerminated main loop because request handler raised exception, re-raising..\r\nCalling fuse_session_remove_chan\r\nCalling fuse_session_destroy\r\nLocal Exception.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.5/site-packages/borg/archiver.py\", line 2089, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib64/python3.5/site-packages/borg/archiver.py\", line 2025, in run\r\n    return func(args)\r\n  File \"/usr/lib64/python3.5/site-packages/borg/archiver.py\", line 91, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib64/python3.5/site-packages/borg/archiver.py\", line 566, in do_mount\r\n    operations.mount(args.mountpoint, args.options, args.foreground)\r\n  File \"/usr/lib64/python3.5/site-packages/borg/fuse.py\", line 101, in mount\r\n    signal = fuse_main()\r\n  File \"/usr/lib64/python3.5/site-packages/borg/fuse.py\", line 27, in fuse_main\r\n    return llfuse.main(workers=1)\r\n  File \"src/fuse_api.pxi\", line 343, in llfuse.main (src/llfuse.c:35968)\r\n  File \"src/handlers.pxi\", line 624, in llfuse.fuse_getxattr (src/llfuse.c:22336)\r\nTypeError: expected bytes, NoneType found\r\n\r\nPlatform: Linux ronny 4.10.15-200.fc25.x86_64 #1 SMP Mon May 8 18:46:06 UTC 2017 x86_64 x86_64\r\nLinux: Fedora 25 Twenty Five\r\nBorg: 1.0.10  Python: CPython 3.5.3\r\nPID: 2051  CWD: /run/media/rpfannsc/backups\r\nsys.argv: ['/usr/bin/borg', 'mount', 'manual_backup/borg_original/', 'mounted-backup/', '--debug', '--foreground']\r\nSSH_ORIGINAL_COMMAND: None\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2513", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2513/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2513/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2513/events", "html_url": "https://github.com/borgbackup/borg/issues/2513", "id": 228879760, "node_id": "MDU6SXNzdWUyMjg4Nzk3NjA=", "number": 2513, "title": "crash when failing to acquire lock", "user": {"login": "goerz", "id": 112306, "node_id": "MDQ6VXNlcjExMjMwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/112306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goerz", "html_url": "https://github.com/goerz", "followers_url": "https://api.github.com/users/goerz/followers", "following_url": "https://api.github.com/users/goerz/following{/other_user}", "gists_url": "https://api.github.com/users/goerz/gists{/gist_id}", "starred_url": "https://api.github.com/users/goerz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goerz/subscriptions", "organizations_url": "https://api.github.com/users/goerz/orgs", "repos_url": "https://api.github.com/users/goerz/repos", "events_url": "https://api.github.com/users/goerz/events{/privacy}", "received_events_url": "https://api.github.com/users/goerz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 5, "created_at": "2017-05-16T00:05:16Z", "updated_at": "2017-05-17T17:49:36Z", "closed_at": "2017-05-17T17:49:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "If two borg processes try to access the same repository at the same time, I get an Exception. For example if I try `borg list` while an (automated) `borg create` is running, I get the following:\r\n\r\n    goerz@mlhpc2:~/bin> borg list  mlhpc1:~/storage/backup/mlhpc2\r\n    Traceback (most recent call last):\r\n    File \"borg/archiver.py\", line 3482, in main\r\n    File \"borg/archiver.py\", line 3410, in run\r\n    File \"borg/archiver.py\", line 106, in wrapper\r\n    File \"borg/remote.py\", line 566, in __init__\r\n    File \"borg/remote.py\", line 563, in do_open\r\n    File \"borg/remote.py\", line 453, in do_rpc\r\n    File \"borg/remote.py\", line 672, in call\r\n    File \"borg/remote.py\", line 730, in call_many\r\n    File \"borg/remote.py\", line 714, in handle_error\r\n    borg.remote.RPCError: {b'exception_args': (b'/data/goerz/backup/mlhpc2/lock.exclusive',), b'exception_short': b'Failed to create/acquire the lock /data/goerz/backup/mlhpc2/lock.exclusive (timeout).', b'exception_class': b'LockTimeout', b'exception_full': (b'Traceback (most recent call last):\\n', b'  File \"borg/locking.py\", line 129, in acquire\\n', b\"FileExistsError: [Errno 17] File exists: '/data/goerz/backup/mlhpc2/lock.exclusive'\\n\", b'\\nDuring handling of the above exception, another exception occurred:\\n\\n', b'Traceback (most recent call last):\\n', b'  File \"borg/remote.py\", line 245, in serve\\n', b'  File \"borg/remote.py\", line 351, in open\\n', b'  File \"borg/repository.py\", line 141, in __enter__\\n', b'  File \"borg/repository.py\", line 285, in open\\n', b'  File \"borg/locking.py\", line 320, in acquire\\n', b'  File \"borg/locking.py\", line 113, in __enter__\\n', b'  File \"borg/locking.py\", line 135, in acquire\\n', b'borg.locking.LockTimeout: Failed to create/acquire the lock /data/goerz/backup/mlhpc2/lock.exclusive (timeout).\\n'), b'i': 2, b'sysinfo': b\"Platform: Linux mlhpc1 4.4.0-62-generic #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017 x86_64 x86_64\\nLinux: debian stretch/sid \\nBorg: 1.1.0b5  Python: CPython 3.5.3\\nPID: 16359  CWD: /home/goerz\\nsys.argv: ['borg', 'serve', '--umask=077']\\nSSH_ORIGINAL_COMMAND: None\\n\"}\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n    File \"borg/__main__.py\", line 2, in <module>\r\n    File \"borg/archiver.py\", line 3496, in main\r\n    File \"borg/remote.py\", line 469, in get_message\r\n    TypeError: sequence item 0: expected a bytes-like object, int found\r\n    Failed to execute script __main__\r\n\r\nOther `borg` sub-commands besides `list` (e.g. another `create`) also crash. I'm using the latest standalone executable of `borg` both on the client and the server.\r\n\r\nThis is not a huge deal, but you probably want to exit with an error message instead of showing the user the exception traceback. The `TypeError` in `remote.py` might also be an actual bug.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2507", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2507/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2507/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2507/events", "html_url": "https://github.com/borgbackup/borg/issues/2507", "id": 228521478, "node_id": "MDU6SXNzdWUyMjg1MjE0Nzg=", "number": 2507, "title": "follow_symlinks unavailable on this platform", "user": {"login": "goerz", "id": 112306, "node_id": "MDQ6VXNlcjExMjMwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/112306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goerz", "html_url": "https://github.com/goerz", "followers_url": "https://api.github.com/users/goerz/followers", "following_url": "https://api.github.com/users/goerz/following{/other_user}", "gists_url": "https://api.github.com/users/goerz/gists{/gist_id}", "starred_url": "https://api.github.com/users/goerz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goerz/subscriptions", "organizations_url": "https://api.github.com/users/goerz/orgs", "repos_url": "https://api.github.com/users/goerz/repos", "events_url": "https://api.github.com/users/goerz/events{/privacy}", "received_events_url": "https://api.github.com/users/goerz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 9, "created_at": "2017-05-14T06:10:55Z", "updated_at": "2017-05-25T07:26:11Z", "closed_at": "2017-05-25T07:26:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Restoring any data with (`borg` installed in anaconda via `pip`) results in a crash:\r\n\r\n    [...]\r\n    Local Exception.\r\n    Traceback (most recent call last):\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archiver.py\", line 2089, in main\r\n        exit_code = archiver.run(args)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archiver.py\", line 2025, in run\r\n        return func(args)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archiver.py\", line 91, in wrapper\r\n        return method(self, args, repository=repository, **kwargs)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archiver.py\", line 101, in wrapper\r\n        return method(self, args, repository=repository, manifest=manifest, key=key, archive=archive, **kwargs)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archiver.py\", line 477, in do_extract\r\n        archive.extract_item(item, stdout=stdout, sparse=sparse)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archive.py\", line 452, in extract_item\r\n        raise Exception('Unknown archive item type %r' % item[b'mode'])\r\n    File \"/opt/anaconda/lib/python3.5/contextlib.py\", line 77, in __exit__\r\n        self.gen.throw(type, value, traceback)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archive.py\", line 79, in backup_io\r\n        yield\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archive.py\", line 442, in extract_item\r\n        self.restore_attrs(path, item, symlink=True)\r\n    File \"/opt/anaconda/lib/python3.5/site-packages/borg/archive.py\", line 489, in restore_attrs\r\n        os.utime(path, None, ns=(atime, mtime), follow_symlinks=False)\r\n    NotImplementedError: utime: follow_symlinks unavailable on this platform\r\n\r\n    Platform: Linux webserver 3.13.0-85-generic #129-Ubuntu SMP Thu Mar 17 20:50:15 UTC 2016 x86_64 x86_64\r\n    Linux: debian jessie/sid\r\n    Borg: 1.0.10  Python: CPython 3.5.1\r\n    PID: 4083  CWD: /root/restore\r\n    sys.argv: ['/opt/anaconda/bin/borg', 'extract', 'goerz@backupserver:borg_backup::blub', 'root']\r\n    SSH_ORIGINAL_COMMAND: None\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2469", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2469/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2469/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2469/events", "html_url": "https://github.com/borgbackup/borg/issues/2469", "id": 225445521, "node_id": "MDU6SXNzdWUyMjU0NDU1MjE=", "number": 2469, "title": "--exclude is broken", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 0, "created_at": "2017-05-01T14:38:06Z", "updated_at": "2017-05-06T12:39:13Z", "closed_at": "2017-05-06T12:39:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Task:** --exclude and --exclude-from were inadvertently changed to recurse during the latest --patterns fixup. Restore correct behaviour.\r\n\r\nReported by @jdchristensen ", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2469/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2455", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2455/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2455/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2455/events", "html_url": "https://github.com/borgbackup/borg/issues/2455", "id": 225108214, "node_id": "MDU6SXNzdWUyMjUxMDgyMTQ=", "number": 2455, "title": "Fix the flaky builds on Travis", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 553536487, "node_id": "MDU6TGFiZWw1NTM1MzY0ODc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/testsuite", "name": "testsuite", "color": "009bdb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-04-28T15:04:20Z", "updated_at": "2017-05-04T18:23:57Z", "closed_at": "2017-05-04T13:05:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "srsly. I don't want to get any more of these \"The build has been broken\" mails just to find that yet again some random test failed with some random error. This is also annoying for PRs. And while these race conditions usually appear on Travis, they're still annoying from time to time for all contributors.\r\n\r\nSome random tracebacks were posted to #2048 and some other tickets.\r\n\r\n---\r\n\r\n:moneybag: [There is a bounty on this](https://www.bountysource.com/issues/44643135-fix-the-flaky-builds-on-travis)", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2442", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2442/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2442/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2442/events", "html_url": "https://github.com/borgbackup/borg/issues/2442", "id": 224136925, "node_id": "MDU6SXNzdWUyMjQxMzY5MjU=", "number": 2442, "title": "verify_data: fix defect chunk processing", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/41", "html_url": "https://github.com/borgbackup/borg/milestone/41", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/41/labels", "id": 2363016, "node_id": "MDk6TWlsZXN0b25lMjM2MzAxNg==", "number": 41, "title": "1.1.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2017-03-04T19:46:05Z", "updated_at": "2017-04-30T12:31:34Z", "due_on": "2017-04-30T07:00:00Z", "closed_at": "2017-04-30T12:31:34Z"}, "comments": 0, "created_at": "2017-04-25T13:25:41Z", "updated_at": "2017-04-28T08:50:27Z", "closed_at": "2017-04-28T08:50:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While re-reading that code, I noticed it does not catch IntegrityError there:\r\n\r\nhttps://github.com/borgbackup/borg/blob/1.1.0b4/src/borg/archive.py#L1242\r\n\r\ncompare to:\r\n\r\nhttps://github.com/borgbackup/borg/blob/1.1.0b4/src/borg/archive.py#L1202\r\n\r\nGuess it should catch IntegrityError there also?\r\n\r\nNote: it does not need to catch ObjectNotFound as missing object ids do not get added to the defect chunks list.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2405", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2405/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2405/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2405/events", "html_url": "https://github.com/borgbackup/borg/issues/2405", "id": 220405015, "node_id": "MDU6SXNzdWUyMjA0MDUwMTU=", "number": 2405, "title": "hardlink issue", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/41", "html_url": "https://github.com/borgbackup/borg/milestone/41", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/41/labels", "id": 2363016, "node_id": "MDk6TWlsZXN0b25lMjM2MzAxNg==", "number": 41, "title": "1.1.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2017-03-04T19:46:05Z", "updated_at": "2017-04-30T12:31:34Z", "due_on": "2017-04-30T07:00:00Z", "closed_at": "2017-04-30T12:31:34Z"}, "comments": 1, "created_at": "2017-04-08T15:02:19Z", "updated_at": "2017-04-08T17:01:37Z", "closed_at": "2017-04-08T17:01:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n16:50  PatrickGoering$ secure erase of configfiles gives an uncatched exception when\r\n              run on a filesystem without hardlink support (borgbackup 1.1.0b4)\r\n16:51  PatrickGoering$ i suggest catching errno.ENOSYS\r\n16:56  ThomasWaldmann$ PatrickGoering: oops\r\n16:56  ThomasWaldmann$ iirc we catch a exception there, so is it the wrong one?\r\n16:57  ThomasWaldmann$ PatrickGoering: on what filesystem / operating system did you test it?\r\n17:03  PatrickGoering$ there are two exceptions catched there: errno.EMLINK, errno.EPERM\r\n17:04  PatrickGoering$ i have a webdav mount that does not support hard links\r\n17:04  PatrickGoering$ and it gives an errno.ENOSYS\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2386", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2386/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2386/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2386/events", "html_url": "https://github.com/borgbackup/borg/issues/2386", "id": 219331018, "node_id": "MDU6SXNzdWUyMTkzMzEwMTg=", "number": 2386, "title": "borg rename using template doesn't eval", "user": {"login": "Artiavis", "id": 1834136, "node_id": "MDQ6VXNlcjE4MzQxMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1834136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Artiavis", "html_url": "https://github.com/Artiavis", "followers_url": "https://api.github.com/users/Artiavis/followers", "following_url": "https://api.github.com/users/Artiavis/following{/other_user}", "gists_url": "https://api.github.com/users/Artiavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Artiavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Artiavis/subscriptions", "organizations_url": "https://api.github.com/users/Artiavis/orgs", "repos_url": "https://api.github.com/users/Artiavis/repos", "events_url": "https://api.github.com/users/Artiavis/events{/privacy}", "received_events_url": "https://api.github.com/users/Artiavis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 4, "created_at": "2017-04-04T17:49:36Z", "updated_at": "2017-04-06T07:06:49Z", "closed_at": "2017-04-06T07:06:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I realized I created an archive using ENVIRONMENT_VARIABLE_NAME instead of $ENVIRONMENT_VARIABLE_NAME, so I tried running\r\n     borg rename ::ENVIRONMENT_VARIABLE_NAME '{hostname}-{utcnow:%Y-%m-%d}'\r\n\r\nBut somehow the command changed the archive name to the literal string  '{hostname}-{utcnow:%Y-%m-%d}'! I'm trying to rename it again but it seems like the eval only works on the existing archive name, not the targeted name. And now that my archive has that name, I don't know how to rename it. This seems like a bug, and also maybe something that should be covere in the docs. Can you please help me out? Using borg 1.0.10 on macOS via homebrew. ", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2384", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2384/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2384/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2384/events", "html_url": "https://github.com/borgbackup/borg/issues/2384", "id": 219311222, "node_id": "MDU6SXNzdWUyMTkzMTEyMjI=", "number": 2384, "title": "recreate mixes original and recreated start/end time", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 453494169, "node_id": "MDU6TGFiZWw0NTM0OTQxNjk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20recreate", "name": "cmd: recreate", "color": "005252", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 8, "created_at": "2017-04-04T16:37:09Z", "updated_at": "2017-06-05T07:59:20Z", "closed_at": "2017-06-05T07:59:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\nTime (start): Mon, 2017-04-03 21:27:35\r\nTime (end):   Tue, 2017-04-04 18:36:10\r\nDuration: 21 hours 8 minutes 34.32 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2363", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2363/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2363/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2363/events", "html_url": "https://github.com/borgbackup/borg/issues/2363", "id": 218309814, "node_id": "MDU6SXNzdWUyMTgzMDk4MTQ=", "number": 2363, "title": "Second run of upgrade --tam doesn't modify keys", "user": {"login": "edgewood", "id": 60952, "node_id": "MDQ6VXNlcjYwOTUy", "avatar_url": "https://avatars.githubusercontent.com/u/60952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edgewood", "html_url": "https://github.com/edgewood", "followers_url": "https://api.github.com/users/edgewood/followers", "following_url": "https://api.github.com/users/edgewood/following{/other_user}", "gists_url": "https://api.github.com/users/edgewood/gists{/gist_id}", "starred_url": "https://api.github.com/users/edgewood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edgewood/subscriptions", "organizations_url": "https://api.github.com/users/edgewood/orgs", "repos_url": "https://api.github.com/users/edgewood/repos", "events_url": "https://api.github.com/users/edgewood/events{/privacy}", "received_events_url": "https://api.github.com/users/edgewood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 5, "created_at": "2017-03-30T19:55:30Z", "updated_at": "2017-04-11T21:10:02Z", "closed_at": "2017-04-11T21:10:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I upgraded from borg 1.0.7 to 1.0.10, and saw the release notes about running borg upgrade --tam on all clients.  I did so, and saw that the upgrade for each repo modified the associated repo key, but only on the first client that I ran the upgrade on.\r\n\r\nI was making some related changes, and ran ansible to update my borg clients.  Unfortunately, I forgot that I have ansible set up to install the keys, so the modified keys were overwritten by the originals.\r\n\r\nRerunning upgrade --tam doesn't modify the keys, even with --force.\r\n\r\nDo I need the key modifications?  If so, how do I get borg to make them again?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2353", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2353/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2353/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2353/events", "html_url": "https://github.com/borgbackup/borg/issues/2353", "id": 217751412, "node_id": "MDU6SXNzdWUyMTc3NTE0MTI=", "number": 2353, "title": "giving env var doesn't work for forced cmd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/41", "html_url": "https://github.com/borgbackup/borg/milestone/41", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/41/labels", "id": 2363016, "node_id": "MDk6TWlsZXN0b25lMjM2MzAxNg==", "number": 41, "title": "1.1.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2017-03-04T19:46:05Z", "updated_at": "2017-04-30T12:31:34Z", "due_on": "2017-04-30T07:00:00Z", "closed_at": "2017-04-30T12:31:34Z"}, "comments": 4, "created_at": "2017-03-29T03:04:46Z", "updated_at": "2017-04-04T16:26:40Z", "closed_at": "2017-04-04T14:27:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From IRC / bket:\r\n```\r\nmacbook:~/bin$ borg-wrapper list --debug\r\nusing builtin fallback logging configuration\r\n35 self tests completed in 0.23 seconds\r\nSSH command line: ['ssh', '-i', '/Users/bket/.snapshot/keys/snapshot_ssh', '-o', 'IdentitiesOnly=yes', 'snapshot@aurora.lan', 'BORG_HOSTNAME_IS_UNIQUE=yes', 'borg', 'serve', '--umask=077', '--debug']\r\nRemote: usage: borg [-h] [-V] <command> ...\r\nRemote: borg: error: argument <command>: invalid choice: 'borg' (choose from 'serve', 'init', 'check', 'change-passphrase', 'key', 'migrate-to-repokey', 'create', 'extract', 'rename', 'delete', 'list', 'mount', 'umount', 'info', 'break-lock', 'prune', 'upgrade', 'help', 'debug', 'debug-info', 'debug-dump-archive-items', 'debug-dump-repo-objs', 'debug-get-obj', 'debug-put-obj', 'debug-delete-obj', 'debug-refcount-obj')\r\nConnection closed by remote host. Is borg working on the server?\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 3476, in main\r\n  File \"borg/archiver.py\", line 3404, in run\r\n  File \"borg/archiver.py\", line 102, in wrapper\r\n  File \"borg/remote.py\", line 553, in __init__\r\nborg.remote.ConnectionClosedWithHint: Connection closed by remote host. Is borg working on the server?\r\n\r\nPlatform: Darwin macbook 16.4.0 Darwin Kernel Version 16.4.0: Thu Dec 22 22:53:21 PST 2016; root:xnu-3789.41.3~3/RELEASE_X86_64 x86_64 i386\r\nBorg: 1.1.0b4  Python: CPython 3.5.3\r\nPID: 3279  CWD: /Users/bket/bin\r\nsys.argv: ['borg', 'list', '--debug']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\n\r\n---\r\n\r\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/43561139-giving-env-var-doesn-t-work-for-forced-cmd)\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2353/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2331", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2331/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2331/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2331/events", "html_url": "https://github.com/borgbackup/borg/issues/2331", "id": 216273392, "node_id": "MDU6SXNzdWUyMTYyNzMzOTI=", "number": 2331, "title": "borg did no compression with auto,lzma,6", "user": {"login": "jdchristensen", "id": 3374048, "node_id": "MDQ6VXNlcjMzNzQwNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/3374048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdchristensen", "html_url": "https://github.com/jdchristensen", "followers_url": "https://api.github.com/users/jdchristensen/followers", "following_url": "https://api.github.com/users/jdchristensen/following{/other_user}", "gists_url": "https://api.github.com/users/jdchristensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdchristensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdchristensen/subscriptions", "organizations_url": "https://api.github.com/users/jdchristensen/orgs", "repos_url": "https://api.github.com/users/jdchristensen/repos", "events_url": "https://api.github.com/users/jdchristensen/events{/privacy}", "received_events_url": "https://api.github.com/users/jdchristensen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 14, "created_at": "2017-03-23T02:49:27Z", "updated_at": "2017-03-25T21:54:38Z", "closed_at": "2017-03-25T14:25:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Looking back on my logs, I just realized that the first backup I did into my \"system\" repo (basically, everything except /home) didn't do any compression.  Right before that, the first backup of /home into my \"home\" repo that was launched using the same script *did* do compression.  I tested redoing the system backup in a fresh repo, and it does do significant compression (> 50%), so it's not because the data isn't compressible.  Moreover, I can't reproduce this, with the same borg version and command line.  That's what is really puzzling to me.  I'm 99% sure I was using the prebuilt binary for 1.1.0b3 when these backups ran.  Any ideas what could have caused this?\r\n\r\nFirst comes the logged output from when the bad backup ran and then the output of `borg info` for the bad one.  Then the same two things for the good one.\r\n\r\n```\r\nborg create --stats --compression auto,lzma,6 \"--exclude-from=/etc/borg/volumes/system.exclude\" \"/Backups/borg/system.borg::jdc-system-20170225-13:34:33\" / \r\n------------------------------------------------------------------------------\r\nArchive name: jdc-system-20170225-13:34:33\r\nArchive fingerprint: 92fa914204c5ae24ec3d4e4f4f8e814bc7f076b3bffc21b2a289ebb013c834d9\r\nTime (start): Sat, 2017-02-25 13:34:33\r\nTime (end):   Sat, 2017-02-25 13:58:46\r\nDuration: 24 minutes 13.06 seconds\r\nNumber of files: 340225\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               13.87 GB             13.87 GB             13.08 GB\r\nAll archives:               13.87 GB             13.87 GB             13.08 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  286790               328115\r\n------------------------------------------------------------------------------\r\n```\r\n\r\n```\r\n# borg info '/Backups/borg/system.borg::jdc-system-20170225-13:34:33'\r\nArchive name: jdc-system-20170225-13:34:33\r\nArchive fingerprint: 92fa914204c5ae24ec3d4e4f4f8e814bc7f076b3bffc21b2a289ebb013c834d9\r\nComment: \r\nHostname: jdc\r\nUsername: root\r\nTime (start): Sat, 2017-02-25 13:34:33\r\nTime (end):   Sat, 2017-02-25 13:58:46\r\nDuration: 24 minutes 13.06 seconds\r\nNumber of files: 340225\r\nCommand line: borg create --stats --compression auto,lzma,6 --exclude-from=/etc/borg/volumes/system.exclude /Backups/borg/system.borg::jdc-system-20170225-13:34:33 /\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               13.87 GB             13.87 GB              2.79 GB\r\nAll archives:              335.69 GB            307.93 GB             21.23 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  375649              9483069\r\n```\r\n\r\n```\r\nborg create --stats --compression auto,lzma,6 \"--exclude-from=/etc/borg/volumes/home.exclude\" \"/Backups/borg/home.borg::jdc-home-20170225-12:44:33\" /home \r\n------------------------------------------------------------------------------\r\nArchive name: jdc-home-20170225-12:44:33\r\nArchive fingerprint: ae9b39e1207273862bd284850eef9f6229effe16c90d1e158202c26ed64d238e\r\nTime (start): Sat, 2017-02-25 12:44:34\r\nTime (end):   Sat, 2017-02-25 13:34:21\r\nDuration: 49 minutes 46.86 seconds\r\nNumber of files: 198455\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               13.78 GB              7.42 GB              6.48 GB\r\nAll archives:               13.78 GB              7.42 GB              6.48 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  164581               189165\r\n------------------------------------------------------------------------------\r\n```\r\n\r\n```\r\n# borg info '/Backups/borg/home.borg::jdc-home-20170225-12:44:33'\r\nArchive name: jdc-home-20170225-12:44:33\r\nArchive fingerprint: ae9b39e1207273862bd284850eef9f6229effe16c90d1e158202c26ed64d238e\r\nComment: \r\nHostname: jdc\r\nUsername: root\r\nTime (start): Sat, 2017-02-25 12:44:34\r\nTime (end):   Sat, 2017-02-25 13:34:21\r\nDuration: 49 minutes 46.86 seconds\r\nNumber of files: 198457\r\nCommand line: borg create --stats --compression auto,lzma,6 --exclude-from=/etc/borg/volumes/home.exclude /Backups/borg/home.borg::jdc-home-20170225-12:44:33 /home\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               13.78 GB              7.42 GB            858.78 MB\r\nAll archives:              299.99 GB            175.12 GB              8.86 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  213232              4388611\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2319", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2319/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2319/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2319/events", "html_url": "https://github.com/borgbackup/borg/issues/2319", "id": 215323360, "node_id": "MDU6SXNzdWUyMTUzMjMzNjA=", "number": 2319, "title": "Python int too large to convert to C unsigned long", "user": {"login": "gmatht", "id": 390613, "node_id": "MDQ6VXNlcjM5MDYxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/390613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmatht", "html_url": "https://github.com/gmatht", "followers_url": "https://api.github.com/users/gmatht/followers", "following_url": "https://api.github.com/users/gmatht/following{/other_user}", "gists_url": "https://api.github.com/users/gmatht/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmatht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmatht/subscriptions", "organizations_url": "https://api.github.com/users/gmatht/orgs", "repos_url": "https://api.github.com/users/gmatht/repos", "events_url": "https://api.github.com/users/gmatht/events{/privacy}", "received_events_url": "https://api.github.com/users/gmatht/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-03-20T03:31:01Z", "updated_at": "2017-07-23T10:38:43Z", "closed_at": "2017-03-22T12:32:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using borg 1.1.0b3 and Ubuntu 16.04.2 I got the following error:\r\n\r\n```\r\nLocal Exception2 GB C 143.90 GB D 919652 N 8/Users/John/AppData/Local/Temp/2b2cb.msi                                                                                                                                                                                                                                                                                                          \r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 2915, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 2843, in run\r\n    return func(args)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 106, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 379, in do_create\r\n    create_inner(archive, cache)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 350, in create_inner\r\n    read_special=args.read_special, dry_run=dry_run, st=st)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 442, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archiver.py\", line 414, in _process\r\n    status = archive.process_file(path, st, cache, self.ignore_inode)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 892, in process_file\r\n    self.add_item(item)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 375, in add_item\r\n    self.items_buffer.add(item)\r\n  File \"/usr/local/lib/python3.5/dist-packages/borg/archive.py\", line 208, in add\r\n    self.buffer.write(self.packer.pack(item.as_dict()))\r\n  File \"msgpack/_packer.pyx\", line 223, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:223)\r\n  File \"msgpack/_packer.pyx\", line 225, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:225)\r\n  File \"msgpack/_packer.pyx\", line 195, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:195)\r\n  File \"msgpack/_packer.pyx\", line 140, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:140)\r\nOverflowError: Python int too large to convert to C unsigned long\r\n\r\nPlatform: Linux compaqt 4.4.0-59-generic #80-Ubuntu SMP Fri Jan 6 17:47:47 UTC 2017 x86_64 x86_64\r\nLinux: Ubuntu 16.04 xenial\r\nBorg: 1.1.0b3  Python: CPython 3.5.2\r\nPID: 13917  CWD: /root/tmp3\r\nsys.argv: ['/usr/local/bin/borg', 'create', '-s', '-p', '-C', 'lz4', '/media/gandalf/Seagate Expansion Drive/v11.borg::Lenovo1TB2016_AsFiles2', '.']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2315", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2315/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2315/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2315/events", "html_url": "https://github.com/borgbackup/borg/issues/2315", "id": 214902204, "node_id": "MDU6SXNzdWUyMTQ5MDIyMDQ=", "number": 2315, "title": "review bigint timestamp change", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 0, "created_at": "2017-03-17T04:01:14Z", "updated_at": "2017-03-21T18:04:30Z", "closed_at": "2017-03-21T18:04:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See there: 8b2e7ec68099fc85ac7298d462db14b5f0ee7486 and b7eaeee26631f145a2b7d73f73f20fb56314c3a8.\r\n\r\nI guess the files cache related change is ok (far in the future, no problem).\r\nAlso, the msgpack range issue has been fixed differently by introducing safe_(n)s recently.\r\n\r\nBut the fuse change might be problematic, if an old archive (e.g. of borg 1.0) is read and a file back then has triggered the \"int as bytes\" branch of int_to_bigint (> 2^63 ns). Guess it would just crash if it tried to use that as timestamp without the bigint_to_int conversion.\r\n\r\nSo:\r\n- removals in cache.py are somehow ok, but would break loading existing file caches, so better not\r\n- readd bigint functions\r\n- re-add the tests (removals in both changesets)\r\n- revert the item.pyx change, add a comment that bigint is needed for old archives.\r\n- add a test that tests bigint-bytes item metadata -> int timestamp?\r\n- check if bigint needed in safe_timestamp\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2315/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2307", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2307/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2307/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2307/events", "html_url": "https://github.com/borgbackup/borg/issues/2307", "id": 214363766, "node_id": "MDU6SXNzdWUyMTQzNjM3NjY=", "number": 2307, "title": "mount requires num(archives) * 8 MiB of unnecessary memory", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-03-15T11:42:46Z", "updated_at": "2017-03-15T16:08:08Z", "closed_at": "2017-03-15T16:08:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\nCurrently mapped 1814888465 bytes; peak was 1814939609 bytes\r\nTracer used 1472072 bytes (before stopping)\r\nTop 20 allocators\r\n#1: borg/archive.py:331: 1761286.9 KiB\r\n    self.zeros = b'\\0' * (1 << chunker_params[1])\r\n#2: borg/helpers.py:948: 9011.3 KiB\r\n    self._thread_local.buffer = self.allocator(size)\r\n#3: python3.6/linecache.py:137: 836.6 KiB  [this is part of the instrumentation code]\r\n    lines = fp.readlines()\r\n#4: borg/archive.py:335: 652.0 KiB\r\n    metadata = ArchiveItem(internal_dict=msgpack.unpackb(data, unicode_errors='surrogateescape'))\r\n```\r\n\r\n(About 99.3 % of all memory allocated [excluding the repository index since Python does not know about that])\r\n\r\nSuggested fix: ~~Global zero block.~~ ~~If we just mmap it we can make it sufficiently large enough for all cases, and won't even be using any relevant memory for it until used.~~ (does not work due to Python API limitation) => allocate when needed.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2307/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2307/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2273", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2273/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2273/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2273/events", "html_url": "https://github.com/borgbackup/borg/issues/2273", "id": 212780200, "node_id": "MDU6SXNzdWUyMTI3ODAyMDA=", "number": 2273, "title": "JSON API: Encoding?", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 574513529, "node_id": "MDU6TGFiZWw1NzQ1MTM1Mjk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20json%20api", "name": "c: json api", "color": "663096", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/96", "html_url": "https://github.com/borgbackup/borg/milestone/96", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/96/labels", "id": 8693177, "node_id": "MI_kwDOAh3yxs4AhKW5", "number": 96, "title": "2.0.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2022-11-26T11:48:15Z", "updated_at": "2023-02-27T00:20:37Z", "due_on": null, "closed_at": "2023-02-27T00:20:37Z"}, "comments": 13, "created_at": "2017-03-08T16:14:59Z", "updated_at": "2023-02-01T23:35:24Z", "closed_at": "2023-02-01T23:35:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "From #2249 \r\n\r\n> Or we fix IO encoding to UTF-8 (irrespective of locale) in JSON mode, which probably makes more sense and is less error prone for downstream developers anyway.\r\n> \r\n> I.e., --log-json \u2192 stderr text is always UTF-8, stdin text (so not \"borg create -\") is always UTF-8 (prompts, passwords), env-vars are read as UTF-8 (dito)\r\n> \r\n> --json \u2192 stdout text is always UTF-8", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2273/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2267", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2267/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2267/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2267/events", "html_url": "https://github.com/borgbackup/borg/issues/2267", "id": 212477718, "node_id": "MDU6SXNzdWUyMTI0Nzc3MTg=", "number": 2267, "title": "Key export impossible for encryption types: keyfile-blake2 repokey-blake2 authenticated", "user": {"login": "LucasBartosch", "id": 26244148, "node_id": "MDQ6VXNlcjI2MjQ0MTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/26244148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LucasBartosch", "html_url": "https://github.com/LucasBartosch", "followers_url": "https://api.github.com/users/LucasBartosch/followers", "following_url": "https://api.github.com/users/LucasBartosch/following{/other_user}", "gists_url": "https://api.github.com/users/LucasBartosch/gists{/gist_id}", "starred_url": "https://api.github.com/users/LucasBartosch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LucasBartosch/subscriptions", "organizations_url": "https://api.github.com/users/LucasBartosch/orgs", "repos_url": "https://api.github.com/users/LucasBartosch/repos", "events_url": "https://api.github.com/users/LucasBartosch/events{/privacy}", "received_events_url": "https://api.github.com/users/LucasBartosch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 1, "created_at": "2017-03-07T16:05:01Z", "updated_at": "2017-03-08T16:08:55Z", "closed_at": "2017-03-08T16:08:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "```bash\r\n#!/bin/bash\r\nencryption=\"keyfile-blake2 repokey-blake2 authenticated\"\r\nfor type in $encryption; do\r\n\techo \"########\"\r\n\techo $type\r\n\trm -r test_repo\r\n\tborg init -e $type test_repo\r\n\tborg key export --paper test_repo/ dummy.key\r\n\techo \"########\"\r\ndone\r\n```\r\n\r\ngives:\r\n\r\n########\r\nkeyfile-blake2\r\nEnter new passphrase: \r\nEnter same passphrase again: \r\nDo you want your passphrase to be displayed for verification? [yN]: n\r\n[infomessage]\r\nKeytype 4 is unknown.\r\n########\r\n########\r\nrepokey-blake2\r\nEnter new passphrase: \r\nEnter same passphrase again: \r\nDo you want your passphrase to be displayed for verification? [yN]: \r\n[infomessage]\r\nKeytype 5 is unknown.\r\n########\r\n########\r\nauthenticated\r\nEnter new passphrase: \r\nEnter same passphrase again: \r\nDo you want your passphrase to be displayed for verification? [yN]: \r\n[infomessage]\r\nKeytype 6 is unknown.\r\n########\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2256", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2256/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2256/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2256/events", "html_url": "https://github.com/borgbackup/borg/issues/2256", "id": 211963981, "node_id": "MDU6SXNzdWUyMTE5NjM5ODE=", "number": 2256, "title": "Please enable IPv6 addresses for remote repositories", "user": {"login": "wararjey", "id": 3463770, "node_id": "MDQ6VXNlcjM0NjM3NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3463770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wararjey", "html_url": "https://github.com/wararjey", "followers_url": "https://api.github.com/users/wararjey/followers", "following_url": "https://api.github.com/users/wararjey/following{/other_user}", "gists_url": "https://api.github.com/users/wararjey/gists{/gist_id}", "starred_url": "https://api.github.com/users/wararjey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wararjey/subscriptions", "organizations_url": "https://api.github.com/users/wararjey/orgs", "repos_url": "https://api.github.com/users/wararjey/repos", "events_url": "https://api.github.com/users/wararjey/events{/privacy}", "received_events_url": "https://api.github.com/users/wararjey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 6, "created_at": "2017-03-05T16:23:09Z", "updated_at": "2022-04-03T14:38:25Z", "closed_at": "2017-05-23T12:03:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI was trying to specify a remote borg repo as something like that\r\nssh://user@[ipv6_address_string]:/path/to/repo\r\n(and tried with leaving out the ssh:// in front, as well)\r\n\r\nborg then somehow tried to read the ipv6 address as a hostname, and the hostname lookup naturally failed.\r\n\r\nssh supports ipv6 address string, by putting the address into a square bracket.\r\n\r\nI have a use case where I want to backup to a remote repository via ssh onto a machine by ipv6. However, I do not want to expose machines IPv6 address to DNS, that's why I would like to use an address literal instead of a dns domain name in the remote repo url.\r\n\r\nRegards,\r\nwararjey", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2256/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2245", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2245/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2245/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2245/events", "html_url": "https://github.com/borgbackup/borg/issues/2245", "id": 211251553, "node_id": "MDU6SXNzdWUyMTEyNTE1NTM=", "number": 2245, "title": "A very slow repository", "user": {"login": "magma1447", "id": 1918311, "node_id": "MDQ6VXNlcjE5MTgzMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1918311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magma1447", "html_url": "https://github.com/magma1447", "followers_url": "https://api.github.com/users/magma1447/followers", "following_url": "https://api.github.com/users/magma1447/following{/other_user}", "gists_url": "https://api.github.com/users/magma1447/gists{/gist_id}", "starred_url": "https://api.github.com/users/magma1447/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magma1447/subscriptions", "organizations_url": "https://api.github.com/users/magma1447/orgs", "repos_url": "https://api.github.com/users/magma1447/repos", "events_url": "https://api.github.com/users/magma1447/events{/privacy}", "received_events_url": "https://api.github.com/users/magma1447/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653080173, "node_id": "MDU6TGFiZWw2NTMwODAxNzM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20hashindex", "name": "c: hashindex", "color": "9400D3", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2017-03-02T00:22:47Z", "updated_at": "2017-07-23T10:39:16Z", "closed_at": "2017-03-04T18:16:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Each host I backup, I backup into 3 different repositories. For one of my hosts, one of the repositories have started to become really slow. I started noticing after I upgraded to beta 3, but I am not sure it's relevant.\r\n\r\nI have been running a few tests this evening to narrow the issue down, and show the issue itself. All three repositories are about the same age and should have about the same data, except that one of them is used 3 days per week, while the others are used twice per week. My test case only includes two repositories, one for 2 days and one for 3 days (can be seen on the repository names as well).\r\n\r\nInitial setup\r\n-------------\r\n\r\n```\r\ncd /tmp\r\ncp /var/log/syslog .\r\ndu -hs syslog\r\n3.3M    syslog\r\n```\r\n\r\nClient has borgbackup-1.1.0-b3, Server has borgbackup-1.1.0-b3\r\n--------------------------------------------------------------\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup create --verbose --compression auto,zlib,3 borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1 syslog\r\nreal    1m40.940s\r\nuser    0m1.000s\r\nsys     0m0.180s\r\n\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup delete --verbose borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1\r\nreal    1m39.064s\r\nuser    0m0.948s\r\nsys     0m0.220s\r\n```\r\n\r\nClient has borgbackup-1.1.0-b3, Server has borgbackup-1.1.0-b2\r\n--------------------------------------------------------------\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup create --verbose --compression auto,zlib,3 borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1 syslog\r\nreal    1m39.648s\r\nuser    0m1.532s\r\nsys     0m0.216s\r\n\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup delete --verbose borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1\r\nreal    1m44.195s\r\nuser    0m0.896s\r\nsys     0m0.168s\r\n```\r\n\r\nClient has borgbackup-1.1.0-b2, Server has borgbackup-1.1.0-b2\r\n--------------------------------------------------------------\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup create --verbose --compression auto,zlib,3 borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1 syslog\r\nreal    1m36.910s\r\nuser    0m0.964s\r\nsys     0m0.168s\r\n\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup delete --verbose borg@thor:/data/borg-WedFriSun/pgc-db-01.borg::test_1\r\nreal    1m37.225s\r\nuser    0m1.008s\r\nsys     0m0.160s\r\n```\r\n\r\nSwitching destination repo\r\n--------------------------\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup create --verbose --compression auto,zlib,3 borg@thor:/data/borg-TueSat/pgc-db-01.borg::test_1 syslog\r\nreal    0m11.295s\r\nuser    0m1.168s\r\nsys     0m0.208s\r\n\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup delete --verbose borg@thor:/data/borg-TueSat/pgc-db-01.borg::test_1\r\nreal    0m4.010s\r\nuser    0m1.036s\r\nsys     0m0.168s\r\n```\r\n\r\nInfo of the repos\r\n-----------------\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup info borg@thor:/data/borg-WedFriSun/pgc-db-01.borg\r\nEnter passphrase for key ssh://borg@thor/data/borg-WedFriSun/pgc-db-01.borg:\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:                2.22 TB              1.67 TB            874.72 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  397232               892912\r\n\r\nreal    0m2.974s\r\nuser    0m0.964s\r\nsys     0m0.084s\r\n```\r\n```\r\ntime BORG_RSH='ssh -i /root/.ssh/thor-borg' borgbackup info borg@thor:/data/borg-TueSat/pgc-db-01.borg\r\nEnter passphrase for key ssh://borg@thor/data/borg-TueSat/pgc-db-01.borg:\r\n                       Original size      Compressed size    Deduplicated size\r\nAll archives:                1.93 TB              1.18 TB            630.24 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                  373184               757871\r\n\r\nreal    0m3.569s\r\nuser    0m1.292s\r\nsys     0m0.132s\r\n```\r\n\r\nMy conclusion is that it doesn't matter if I use beta 2 or beta 3. But there is a clear difference in time for creating the backups. For the above test cases the server used 50-100% cpu. It's a i5-3570K. In my real backups it's stuck at 100% for a very long time (hours).\r\n\r\nThe slower repository is a bit bigger, but doesn't have that many more chunks that I think the speed difference is reasonable.\r\n\r\nFor my real backups it's mainly an SQL dump. Uncompressed for borg-backup, which compresses it with zlib,3. The dumps are ~12 GB or ~70 GB. The bigger is created ones per day and the smaller ~20 times. Due to the fact that the small one doesn't finish within an hour, the bigger one isn't run on the slow repository.\r\n\r\nBacking up the smaller ones takes about 8 minutes for the two good repositories, and somewhere around 5 hours for the slow repository. I haven't clocked it because I haven't been running it manually. But it starts once per hour and I get an email if the pid-file already exists. I have estimated the time by counting the number of emails in a row.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2241", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2241/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2241/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2241/events", "html_url": "https://github.com/borgbackup/borg/issues/2241", "id": 211035534, "node_id": "MDU6SXNzdWUyMTEwMzU1MzQ=", "number": 2241, "title": "--progress for serve/RPC doesn't work", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/42", "html_url": "https://github.com/borgbackup/borg/milestone/42", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/42/labels", "id": 2477649, "node_id": "MDk6TWlsZXN0b25lMjQ3NzY0OQ==", "number": 42, "title": "1.1.0b6", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-04-24T16:55:27Z", "updated_at": "2017-06-18T14:59:41Z", "due_on": null, "closed_at": "2017-06-18T14:59:41Z"}, "comments": 3, "created_at": "2017-03-01T10:14:15Z", "updated_at": "2017-05-22T16:13:55Z", "closed_at": "2017-05-20T12:52:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think this was broken with the implied logging stuff?\r\n\r\n---\r\n\r\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/42549881-progress-for-serve-rpc-doesn-t-work)\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2241/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2241/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2240", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2240/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2240/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2240/events", "html_url": "https://github.com/borgbackup/borg/issues/2240", "id": 210976630, "node_id": "MDU6SXNzdWUyMTA5NzY2MzA=", "number": 2240, "title": "borg key crashes", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 2, "created_at": "2017-03-01T04:25:10Z", "updated_at": "2017-03-12T10:55:46Z", "closed_at": "2017-03-12T10:55:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$ BORG_REPO=abc borg key\r\nTraceback (most recent call last):\r\n  File \"/home/tw/w/borg-env/bin/borg\", line 11, in <module>\r\n    load_entry_point('borgbackup', 'console_scripts', 'borg')()\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 3423, in main\r\n    args = archiver.get_args(sys.argv, os.environ.get('SSH_ORIGINAL_COMMAND'))\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 3296, in get_args\r\n    result = self.parse_args(argv[1:])\r\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 3315, in parse_args\r\n    if args.func == self.do_create:\r\nAttributeError: 'Namespace' object has no attribute 'func'\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2240/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2237", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2237/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2237/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2237/events", "html_url": "https://github.com/borgbackup/borg/issues/2237", "id": 210966142, "node_id": "MDU6SXNzdWUyMTA5NjYxNDI=", "number": 2237, "title": "empty commit -> boom", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653084310, "node_id": "MDU6TGFiZWw2NTMwODQzMTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20repository", "name": "c: repository", "color": "9683EC", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/41", "html_url": "https://github.com/borgbackup/borg/milestone/41", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/41/labels", "id": 2363016, "node_id": "MDk6TWlsZXN0b25lMjM2MzAxNg==", "number": 41, "title": "1.1.0b5", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2017-03-04T19:46:05Z", "updated_at": "2017-04-30T12:31:34Z", "due_on": "2017-04-30T07:00:00Z", "closed_at": "2017-04-30T12:31:34Z"}, "comments": 2, "created_at": "2017-03-01T03:00:43Z", "updated_at": "2017-07-23T10:45:37Z", "closed_at": "2017-03-11T04:18:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "while experimenting about #2225, I found that doing an empty commit raises an exception:\r\n\r\n```\r\nRemoteArchiverTestCase.test_delete_force ________________________________________________________\r\n[gw0] linux -- Python 3.5.2 /home/tw/w/borg-env/bin/python3\r\nself = <borg.testsuite.archiver.RemoteArchiverTestCase testMethod=test_delete_force>\r\n\r\n    def test_delete_force(self):\r\n        self.cmd('init', '--encryption=none', self.repository_location)\r\n        self.create_src_archive('test')\r\n        with Repository(self.repository_path, exclusive=True) as repository:\r\n            manifest, key = Manifest.load(repository)\r\n            archive = Archive(repository, key, manifest, 'test')\r\n            for item in archive.iter_items(): # note: adding list() here does not help with #2225\r\n                if 'chunks' in item:\r\n                    first_chunk_id = item.chunks[0].id\r\n                    #repository.delete(first_chunk_id)\r\n>                   repository.commit()\r\n\r\nsrc/borg/testsuite/archiver.py:1223: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nsrc/borg/repository.py:292: in commit\r\n    self.check_free_space()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <Repository /tmp/tmplen8iwy4/repository>\r\n\r\n    def check_free_space(self):\r\n        \"\"\"Pre-commit check for sufficient free space to actually perform the commit.\"\"\"\r\n        # As a baseline we take four times the current (on-disk) index size.\r\n        # At this point the index may only be updated by compaction, which won't resize it.\r\n        # We still apply a factor of four so that a later, separate invocation can free space\r\n        # (journaling all deletes for all chunks is one index size) or still make minor additions\r\n        # (which may grow the index up to twice it's current size).\r\n        # Note that in a subsequent operation the committed index is still on-disk, therefore we\r\n        # arrive at index_size * (1 + 2 + 1).\r\n        # In that order: journaled deletes (1), hashtable growth (2), persisted index (1).\r\n        required_free_space = self.index.size() * 4\r\n    \r\n        # Conservatively estimate hints file size:\r\n        # 10 bytes for each segment-refcount pair, 10 bytes for each segment-space pair\r\n        # Assume maximum of 5 bytes per integer. Segment numbers will usually be packed more densely (1-3 bytes),\r\n        # as will refcounts and free space integers. For 5 MiB segments this estimate is good to ~20 PB repo size.\r\n        # Add 4K to generously account for constant format overhead.\r\n>       hints_size = len(self.segments) * 10 + len(self.compact) * 10 + 4096\r\nE       AttributeError: 'Repository' object has no attribute 'segments'\r\n\r\nsrc/borg/repository.py:426: AttributeError\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2225", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2225/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2225/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2225/events", "html_url": "https://github.com/borgbackup/borg/issues/2225", "id": 210370352, "node_id": "MDU6SXNzdWUyMTAzNzAzNTI=", "number": 2225, "title": "borg delete --force sometimes crashes with ObjectNotFound", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 3, "created_at": "2017-02-27T02:01:39Z", "updated_at": "2017-03-26T16:15:13Z", "closed_at": "2017-03-26T16:15:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "although that was the use case it was made for. strange is that it only happens sometimes.\r\n\r\n```\r\n[gw0] darwin -- Python 3.5.2 /Users/travis/build/borgbackup/borg/.tox/py35/bin/python3.5\r\nself = <borg.testsuite.archiver.RemoteArchiverTestCase testMethod=test_delete_force>\r\n    def test_delete_force(self):\r\n        self.cmd('init', '--encryption=none', self.repository_location)\r\n        self.create_src_archive('test')\r\n        with Repository(self.repository_path, exclusive=True) as repository:\r\n            manifest, key = Manifest.load(repository)\r\n            archive = Archive(repository, key, manifest, 'test')\r\n            for item in archive.iter_items():\r\n                if 'chunks' in item:\r\n                    first_chunk_id = item.chunks[0].id\r\n                    repository.delete(first_chunk_id)\r\n                    repository.commit()\r\n                    break\r\n>       self.cmd('delete', '--force', self.repository_location + '::test')\r\n.tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:1208: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n.tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:258: in cmd\r\n    ret, output = exec_cmd(*args, fork=fork, exe=self.EXE, archiver=self.archiver, **kw)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:89: in exec_cmd\r\n    ret = archiver.run(args)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/archiver.py:3228: in run\r\n    return func(args)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/archiver.py:114: in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/archiver.py:832: in do_delete\r\n    return self._delete_archives(args, repository)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/archiver.py:877: in _delete_archives\r\n    manifest.write()\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/helpers.py:275: in write\r\n    self.repository.put(self.MANIFEST_ID, self.key.encrypt(Chunk(data, compression={'name': 'none'})))\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/remote.py:454: in do_rpc\r\n    return self.call(f.__name__, named, **extra)\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/remote.py:664: in call\r\n    for resp in self.call_many(cmd, [args], **kw):\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/remote.py:753: in call_many\r\n    handle_error(unpacked)\r\n\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nunpacked = {b'exception_args': (b'7d89594e325bf4feec683407c10955c1070e81b46fba163b609959158a54be11', b'/private/tmp/tmpls7oz55d/r...4feec683407c10955c1070e81b46fba163b609959158a54be11 not found in repository /private/tmp/tmpls7oz55d/repository.', ...}\r\n    def handle_error(unpacked):\r\n        error = unpacked[b'exception_class'].decode()\r\n        old_server = b'exception_args' not in unpacked\r\n        args = unpacked.get(b'exception_args')\r\n        if error == 'DoesNotExist':\r\n            raise Repository.DoesNotExist(self.location.orig)\r\n        elif error == 'AlreadyExists':\r\n            raise Repository.AlreadyExists(self.location.orig)\r\n        elif error == 'CheckNeeded':\r\n            raise Repository.CheckNeeded(self.location.orig)\r\n        elif error == 'IntegrityError':\r\n            if old_server:\r\n                raise IntegrityError('(not available)')\r\n            else:\r\n                raise IntegrityError(args[0].decode())\r\n        elif error == 'PathNotAllowed':\r\n            raise PathNotAllowed()\r\n        elif error == 'ObjectNotFound':\r\n            if old_server:\r\n                raise Repository.ObjectNotFound('(not available)', self.location.orig)\r\n            else:\r\n>               raise Repository.ObjectNotFound(args[0].decode(), self.location.orig)\r\nE               borg.repository.Repository.ObjectNotFound: Object with key 7d89594e325bf4feec683407c10955c1070e81b46fba163b609959158a54be11 not found in repository __testsuite__:/tmp/tmpls7oz55d/repository::test.\r\n\r\n.tox/py35/lib/python3.5/site-packages/borg/remote.py:699: ObjectNotFound\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2221", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2221/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2221/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2221/events", "html_url": "https://github.com/borgbackup/borg/issues/2221", "id": 210334308, "node_id": "MDU6SXNzdWUyMTAzMzQzMDg=", "number": 2221, "title": "bug in --verify-data", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 2, "created_at": "2017-02-26T17:42:33Z", "updated_at": "2017-03-03T23:01:06Z", "closed_at": "2017-03-03T23:01:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/borgbackup/borg/pull/2220/files#r103111041\r\n\r\nif data is corrupted in a way that the decompression code fails, it won't get as far as to verify the cryptographic hash over the (decompressed) plaintext data, but will crash with an exception first.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2221/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2187", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2187/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2187/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2187/events", "html_url": "https://github.com/borgbackup/borg/pull/2187", "id": 208796056, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA2OTQ3NjEx", "number": 2187, "title": "fix ChunkIndex.__contains__ assertion  for big-endian archs", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 1, "created_at": "2017-02-20T06:40:31Z", "updated_at": "2017-03-10T18:09:26Z", "closed_at": "2017-02-20T08:30:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/borgbackup/borg/pulls/2187", "html_url": "https://github.com/borgbackup/borg/pull/2187", "diff_url": "https://github.com/borgbackup/borg/pull/2187.diff", "patch_url": "https://github.com/borgbackup/borg/pull/2187.patch", "merged_at": "2017-02-20T08:30:06Z"}, "body": "also: add some missing assertion messages\r\n\r\nseverity:\r\n\r\n- no issue on little-endian platforms (== most, including x86/x64)\r\n- harmless even on big-endian as long as refcount is below 0xfffbffff,\r\n  which is very likely always the case in practice anyway.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2187/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2186", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2186/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2186/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2186/events", "html_url": "https://github.com/borgbackup/borg/issues/2186", "id": 208748434, "node_id": "MDU6SXNzdWUyMDg3NDg0MzQ=", "number": 2186, "title": "Borg (cygwin) 1.0.10 don't like smb paths", "user": {"login": "theChaosCoder", "id": 3579830, "node_id": "MDQ6VXNlcjM1Nzk4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3579830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theChaosCoder", "html_url": "https://github.com/theChaosCoder", "followers_url": "https://api.github.com/users/theChaosCoder/followers", "following_url": "https://api.github.com/users/theChaosCoder/following{/other_user}", "gists_url": "https://api.github.com/users/theChaosCoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/theChaosCoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theChaosCoder/subscriptions", "organizations_url": "https://api.github.com/users/theChaosCoder/orgs", "repos_url": "https://api.github.com/users/theChaosCoder/repos", "events_url": "https://api.github.com/users/theChaosCoder/events{/privacy}", "received_events_url": "https://api.github.com/users/theChaosCoder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 3, "created_at": "2017-02-19T21:37:36Z", "updated_at": "2017-02-25T15:51:34Z", "closed_at": "2017-02-25T15:11:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know that cygwin is not really supported, but it worked with smb paths with no problems until version 1.0.10. \r\nI also tested the cygwin version from billyc [https://github.com/borgbackup/borg/issues/440](https://github.com/borgbackup/borg/issues/440)\r\nSame result.\r\n\r\n/cygdrive/x/abc still works\r\n\r\n> borg list //synology/Backups/My-PC/Borg\r\n> \r\n> usage: borg list [-h] [--critical] [--error] [--warning] [--info] [--debug]\r\n> [--lock-wait N] [--show-rc] [--no-files-cache] [--umask M]\r\n> [--remote-path PATH] [--short] [--list-format LISTFORMAT]\r\n> [-P PREFIX]\r\n> [REPOSITORY_OR_ARCHIVE]\r\n> \r\n> borg list: error: argument REPOSITORY_OR_ARCHIVE: Invalid location format: \"//synology/Backups/My-PC/Borg\"", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2186/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2185", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2185/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2185/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2185/events", "html_url": "https://github.com/borgbackup/borg/issues/2185", "id": 208731661, "node_id": "MDU6SXNzdWUyMDg3MzE2NjE=", "number": 2185, "title": "network speed regression in 1.1.0b3", "user": {"login": "jdchristensen", "id": 3374048, "node_id": "MDQ6VXNlcjMzNzQwNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/3374048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdchristensen", "html_url": "https://github.com/jdchristensen", "followers_url": "https://api.github.com/users/jdchristensen/followers", "following_url": "https://api.github.com/users/jdchristensen/following{/other_user}", "gists_url": "https://api.github.com/users/jdchristensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdchristensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdchristensen/subscriptions", "organizations_url": "https://api.github.com/users/jdchristensen/orgs", "repos_url": "https://api.github.com/users/jdchristensen/repos", "events_url": "https://api.github.com/users/jdchristensen/events{/privacy}", "received_events_url": "https://api.github.com/users/jdchristensen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/37", "html_url": "https://github.com/borgbackup/borg/milestone/37", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/37/labels", "id": 2245934, "node_id": "MDk6TWlsZXN0b25lMjI0NTkzNA==", "number": 37, "title": "1.1.0b4", "description": "shifted some stuff to b5, we should get b4 out asap to fix the slow (broken?) b3.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2017-01-12T00:33:55Z", "updated_at": "2017-03-27T00:03:00Z", "due_on": null, "closed_at": "2017-03-27T00:03:00Z"}, "comments": 28, "created_at": "2017-02-19T17:28:10Z", "updated_at": "2017-02-23T13:50:39Z", "closed_at": "2017-02-23T13:50:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I started to use borg 1.1.0b3, and noticed that it was unusually slow\r\nwhen network bound.  So I did some benchmarks comparing various versions\r\nof borg, as well as attic 0.16.\r\n\r\nIn most cases I did a single backup of a 112MB directory into a fresh\r\nrepo.  Sometimes I followed this with a backup that included the same\r\ndirectory (unchanged) and a second directory of similar size.\r\n\r\nClient is a laptop, connected via a solid wifi connection to a home\r\nrouter, and then over the internet to a remote machine.  Outbound\r\nnetwork can sustain ~500kB/s over ssh.  Tests were repeated multiple times\r\nto rule out network variations, and the results were always consistent.\r\nI can't ping the server, but interactive usage is snappy.\r\n\r\nRemote disk is a very fast M.2 SSD raid array.  Remote cpu is very fast,\r\nlocal is decent.  Local drive is an SSD, but files were in cache\r\nanyways, as shown by the find commands below.\r\n\r\nNo encryption for any repos.  Default chunker parameters.\r\n\r\nI sometimes varied the compression method, as shown.\r\n\r\nAll borg versions were run using the pre-compiled 64-bit binaries.\r\n\r\nFirst a summary table, and then selected logs.  The table shows the\r\ncreate time and the deduplicated size.  It some cases, it shows a\r\nfollowup backup.\r\n\r\n```\r\n  borg 1.1.0b3 zlib:    4m55s  76.0MB ; 3m10s 77.7MB  [cpu usage < 10%]\r\n  borg 1.1.0b2 zlib:    2m27s  76.0MB ; 2m30s 77.7MB  [cpu usage < 10%]\r\n  borg 1.0.10 zlib:     2m21s  76.0MB                 [cpu usage < 10%]\r\n  attic 0.16 (zlib):    2m26s  75.6MB ; 2m25s 74.8MB  [cpu usage < 10%]\r\n\r\n  borg 1.1.0b3 lzma,6: 10m30s  74.9MB                 [cpu usage 20-60%]\r\n  borg 1.1.0b3 none:    5m35s 102.4MB                 [cpu usage < 10%]\r\n```\r\n\r\nNote that attic and the older borg versions fully utilize the network: 76/147 = 0.5MB/s.\r\n\r\nI'm happy to test other versions as well.\r\n\r\nDan\r\n\r\n\r\n```\r\nBORG 1.1.0b3:\r\n\r\n$ borg init -e none bu@host:test.borg\r\n$ find dir1 dir2 -type f -exec cat {} \\; > /dev/null\r\n$ borg create -C zlib -s bu@host:test.borg::1 dir1\r\n------------------------------------------------------------------------------\r\nArchive name: 1\r\nArchive fingerprint: d27ba2f333f713f21903f02051de77e456f36b5f527e75c870ae14e982842014\r\nTime (start): Sun, 2017-02-19 10:50:48\r\nTime (end):   Sun, 2017-02-19 10:55:44\r\nDuration: 4 minutes 55.17 seconds\r\nNumber of files: 4318\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              112.38 MB             80.18 MB             76.02 MB\r\nAll archives:              112.38 MB             80.18 MB             76.02 MB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                    3643                 4319\r\n------------------------------------------------------------------------------\r\n$ find dir1 dir2 -type f -exec cat {} \\; > /dev/null\r\n$ borg create -C zlib -s bu@host:test.borg::2 dir1 dir2\r\n------------------------------------------------------------------------------\r\nArchive name: 2\r\nArchive fingerprint: de85bc5bb47782276fbd3d4012b0d3b13aa74f9d8b8983a7b39aedd674434b1d\r\nTime (start): Sun, 2017-02-19 10:56:25\r\nTime (end):   Sun, 2017-02-19 10:59:35\r\nDuration: 3 minutes 10.01 seconds\r\nNumber of files: 5219\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              212.35 MB            158.40 MB             77.69 MB\r\nAll archives:              324.73 MB            238.58 MB            153.71 MB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                    4454                 9551\r\n------------------------------------------------------------------------------\r\n\r\n\r\nBORG 1.1.0b2:\r\n\r\n$ /tmp/borg-1.1.0b2 init --remote-path /tmp/borg-1.1.0b2 -e none bu@host:test-1.1.0b2.borg\r\n$ find dir1 -type f -exec cat {} \\; > /dev/null\r\n$ /tmp/borg-1.1.0b2 create --remote-path /tmp/borg-1.1.0b2 -C zlib -s -v bu@host:test-1.1.0b2.borg::1 dir1\r\n------------------------------------------------------------------------------\r\nArchive name: 1\r\nArchive fingerprint: a2686687772f84e4a03e5f518d32765007b1d4f3b223d0e4c985e8229bb0a3b3\r\nTime (start): Sun, 2017-02-19 11:38:44\r\nTime (end):   Sun, 2017-02-19 11:41:11\r\nDuration: 2 minutes 26.73 seconds\r\nNumber of files: 4318\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              112.38 MB             80.18 MB             76.02 MB\r\nAll archives:              112.38 MB             80.18 MB             76.02 MB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                    3643                 4319\r\n------------------------------------------------------------------------------\r\n$ find dir1 dir2 -type f -exec cat {} \\; > /dev/null\r\n$ /tmp/borg-1.1.0b2 create --remote-path /tmp/borg-1.1.0b2 -C zlib -s -v bu@host:test-1.1.0b2.borg::2 dir1 dir2\r\n------------------------------------------------------------------------------\r\nArchive name: 2\r\nArchive fingerprint: 77b8968738388f264a7be46221ef420667d9d42aaad8c416d4d6b36e349dd9f4\r\nTime (start): Sun, 2017-02-19 12:12:45\r\nTime (end):   Sun, 2017-02-19 12:15:14\r\nDuration: 2 minutes 29.77 seconds\r\nNumber of files: 5219\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              212.35 MB            158.40 MB             77.69 MB\r\nAll archives:              324.73 MB            238.58 MB            153.71 MB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                    4454                 9551\r\n------------------------------------------------------------------------------\r\n\r\n\r\nATTIC 0.16:\r\n\r\n$ attic init bu@host:test.attic\r\n$ find dir1 dir2 -type f -exec cat {} \\; > /dev/null\r\n$ attic create -s bu@host:test.attic::1 dir1\r\n------------------------------------------------------------------------------\r\nArchive name: 1\r\nArchive fingerprint: e1900edf848f2a30deb55adf8f3dc141dae5579a7ca1f4990c584418fe488f86\r\nStart time: Sun Feb 19 10:36:58 2017\r\nEnd time: Sun Feb 19 10:39:25 2017\r\nDuration: 2 minutes 26.22 seconds\r\nNumber of files: 4318\r\n\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              112.22 MB             80.46 MB             75.56 MB\r\nAll archives:              112.22 MB             80.46 MB             75.56 MB\r\n------------------------------------------------------------------------------\r\n$ find dir1 dir2 -type f -exec cat {} \\; > /dev/null\r\n$ attic create -s bu@host:test.attic::2 dir1 dir2\r\n------------------------------------------------------------------------------\r\nArchive name: 2\r\nArchive fingerprint: cd297c727ee2fa0e7c1643ecea4a709a6c566b9f6e1853451ccc9916d4639ba8\r\nStart time: Sun Feb 19 10:46:15 2017\r\nEnd time: Sun Feb 19 10:48:40 2017\r\nDuration: 2 minutes 25.03 seconds\r\nNumber of files: 5219\r\n\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:              212.20 MB            159.11 MB             74.83 MB\r\nAll archives:              324.42 MB            239.56 MB            150.39 MB\r\n------------------------------------------------------------------------------\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2185/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2180", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2180/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2180/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2180/events", "html_url": "https://github.com/borgbackup/borg/issues/2180", "id": 208678753, "node_id": "MDU6SXNzdWUyMDg2Nzg3NTM=", "number": 2180, "title": "verify_file_chunks(): verify replacement chunks also", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-02-18T23:05:06Z", "updated_at": "2017-02-21T20:57:26Z", "closed_at": "2017-02-21T20:57:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "check the case of *lost* all-zero replacement chunks (== chunk ids in chunks list that are not in chunks_healthy list). guess they go undetected right now.\r\n\r\nborg 1.0 / 1.1.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2161", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2161/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2161/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2161/events", "html_url": "https://github.com/borgbackup/borg/issues/2161", "id": 207643686, "node_id": "MDU6SXNzdWUyMDc2NDM2ODY=", "number": 2161, "title": "Argument list too long error probably due to xattrs", "user": {"login": "cluelesscoder", "id": 1661350, "node_id": "MDQ6VXNlcjE2NjEzNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1661350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cluelesscoder", "html_url": "https://github.com/cluelesscoder", "followers_url": "https://api.github.com/users/cluelesscoder/followers", "following_url": "https://api.github.com/users/cluelesscoder/following{/other_user}", "gists_url": "https://api.github.com/users/cluelesscoder/gists{/gist_id}", "starred_url": "https://api.github.com/users/cluelesscoder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cluelesscoder/subscriptions", "organizations_url": "https://api.github.com/users/cluelesscoder/orgs", "repos_url": "https://api.github.com/users/cluelesscoder/repos", "events_url": "https://api.github.com/users/cluelesscoder/events{/privacy}", "received_events_url": "https://api.github.com/users/cluelesscoder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 443097088, "node_id": "MDU6TGFiZWw0NDMwOTcwODg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20extract", "name": "cmd: extract", "color": "654321", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 5, "created_at": "2017-02-14T21:36:47Z", "updated_at": "2017-03-25T14:27:14Z", "closed_at": "2017-03-04T16:54:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Reported and discussed this in IRC. Data which was originally on Windows was transferred to OSX, and from there sent to a Linux Ubuntu 14.04 machine with ext4 filesystem where the errors happened upon typing borg extract backup::<repo_name>\r\n\r\nSee log on pastebin: http://rn0.me/show/QOGX3zmqQDB2f8AMb3dD/\r\n\r\nSeems like it has something to do with the icon files; checked the xattrs there. Note this doesn't happen when running it on OSX.\r\n\r\nxattrs:\r\n```\r\nls -l -@ google_drive/Archive/Something/Something_Finance/Monthly\\ financials/Icon?\r\n-rw-r--r--@ 1 cluelesscoder  staff  0 Feb 14 12:48 google_drive/Archive/Something/Something_Finance/Monthly financials/Icon?\r\n\tcom.apple.FinderInfo\t32\r\n\tcom.apple.ResourceFork\t340647\r\n```\r\n\r\n---\r\n\r\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/42034922-argument-list-too-long-error-probably-due-to-xattrs)", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2158", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2158/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2158/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2158/events", "html_url": "https://github.com/borgbackup/borg/issues/2158", "id": 207562729, "node_id": "MDU6SXNzdWUyMDc1NjI3Mjk=", "number": 2158, "title": "Uncaught error while reading symlink", "user": {"login": "jast", "id": 1774, "node_id": "MDQ6VXNlcjE3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jast", "html_url": "https://github.com/jast", "followers_url": "https://api.github.com/users/jast/followers", "following_url": "https://api.github.com/users/jast/following{/other_user}", "gists_url": "https://api.github.com/users/jast/gists{/gist_id}", "starred_url": "https://api.github.com/users/jast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jast/subscriptions", "organizations_url": "https://api.github.com/users/jast/orgs", "repos_url": "https://api.github.com/users/jast/repos", "events_url": "https://api.github.com/users/jast/events{/privacy}", "received_events_url": "https://api.github.com/users/jast/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/38", "html_url": "https://github.com/borgbackup/borg/milestone/38", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/38/labels", "id": 2264110, "node_id": "MDk6TWlsZXN0b25lMjI2NDExMA==", "number": 38, "title": "1.0.11rc1", "description": "Due to increasing difficulties when trying to merge 1.0-maint into master (1.1), policy from now on for 1.0-maint changes:\r\n\r\n- data loss fixes,\r\n- data inaccessibility fixes,\r\n- corruption fixes,\r\n- small security fixes,\r\n- forward looking compatibility improvements,\r\n- docs fixes (easy to merge).\r\n\r\nSee http://borgbackup.readthedocs.io/en/latest/development.html#branching-model", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 42, "state": "closed", "created_at": "2017-01-19T13:37:30Z", "updated_at": "2017-06-26T22:55:48Z", "due_on": "2017-06-25T07:00:00Z", "closed_at": "2017-06-26T22:55:48Z"}, "comments": 1, "created_at": "2017-02-14T16:19:04Z", "updated_at": "2017-02-14T19:40:14Z", "closed_at": "2017-02-14T19:40:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "In some slightly more exotic setups, specifically VirtualBox shared folders in my case, `readlink` calls can fail with an exception:\r\n\r\n```\r\nLocal Exception.   \r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/borg/archive.py\", line 79, in backup_io\r\n    yield\r\n  File \"/usr/lib/python3.6/site-packages/borg/archive.py\", line 626, in process_symlink\r\n    source = os.readlink(path)\r\nOSError: [Errno 71] Protocol error: '/media/sf_C_DRIVE/ProgramData/Anwendungsdaten'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 2052, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 1997, in run\r\n    return func(args)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 90, in wrapper\r\n    return method(self, args, repository=repository, **kwargs)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 305, in do_create\r\n    create_inner(archive, cache)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 278, in create_inner\r\n    read_special=args.read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 359, in _process\r\n    read_special=read_special, dry_run=dry_run)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archiver.py\", line 363, in _process\r\n    status = archive.process_symlink(path, st)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archive.py\", line 626, in process_symlink\r\n    source = os.readlink(path)\r\n  File \"/usr/lib/python3.6/contextlib.py\", line 100, in __exit__\r\n    self.gen.throw(type, value, traceback)\r\n  File \"/usr/lib/python3.6/site-packages/borg/archive.py\", line 81, in backup_io\r\n    raise BackupOSError(os_error) from os_error\r\nborg.archive.BackupOSError: [Errno 71] Protocol error: '/media/sf_C_DRIVE/ProgramData/Anwendungsdaten'\r\n\r\nPlatform: Linux perceptron 4.9.8-1-ARCH #1 SMP PREEMPT Mon Feb 6 12:59:40 CET 2017 x86_64 \r\nLinux: arch  \r\nBorg: 1.0.9  Python: CPython 3.6.0\r\nPID: 9062  CWD: [snip1]\r\nsys.argv: ['/sbin/borg', 'create', '-p', '-C', 'lz4', '[snip1]/borg::[snip]-20170214-1711', '/media/sf_C_DRIVE/ProgramData', [snip2]]\r\n```\r\n\r\nI believe that VirtualBox stopped allowing symlink reads in shared folders altogether because they don't have a sensible security model for it.\r\n\r\nMaybe this exception should be caught and the symlink skipped, similar to how permission errors are treated?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2150", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2150/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2150/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2150/events", "html_url": "https://github.com/borgbackup/borg/issues/2150", "id": 207108663, "node_id": "MDU6SXNzdWUyMDcxMDg2NjM=", "number": 2150, "title": "paperkey.html - test failure on bsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 553536487, "node_id": "MDU6TGFiZWw1NTM1MzY0ODc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/testsuite", "name": "testsuite", "color": "009bdb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/39", "html_url": "https://github.com/borgbackup/borg/milestone/39", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/39/labels", "id": 2284200, "node_id": "MDk6TWlsZXN0b25lMjI4NDIwMA==", "number": 39, "title": "1.0.10", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2017-01-28T20:43:16Z", "updated_at": "2017-02-13T11:12:36Z", "due_on": "2017-02-13T08:00:00Z", "closed_at": "2017-02-13T11:12:36Z"}, "comments": 3, "created_at": "2017-02-13T02:34:23Z", "updated_at": "2017-03-05T11:37:23Z", "closed_at": "2017-02-13T03:29:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n==> openbsd64:         with open(export_file, 'r') as fd:\r\n==> openbsd64: >           export_contents = fd.read()\r\n==> openbsd64: \r\n==> openbsd64: py34/lib/python3.4/site-packages/borg/testsuite/archiver.py:1284: \r\n==> openbsd64: _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n==> openbsd64: \r\n==> openbsd64: self = <encodings.ascii.IncrementalDecoder object at 0x1f152dd20f0>\r\n==> openbsd64: input = b'<!doctype html>\\n<html moznomarginboxes mozdisallowselectionprint>\\n<!--\\n    Notes:\\n        This may never cause e...false);\\n    }\\n\\n    update();\\n}\\n\\nwindow.addEventListener(\"load\", loaded, false);\\n\\n</script>\\n\\n</body>\\n</html>'\r\n==> openbsd64: final = True\r\n==> openbsd64: \r\n==> openbsd64:     def decode(self, input, final=False):\r\n==> openbsd64: >       return codecs.ascii_decode(input, self.errors)[0]\r\n==> openbsd64: E       UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 544: ordinal not in range(128)\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2141", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2141/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2141/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2141/events", "html_url": "https://github.com/borgbackup/borg/issues/2141", "id": 206993632, "node_id": "MDU6SXNzdWUyMDY5OTM2MzI=", "number": 2141, "title": "`borg create -x` traverses filesystems if parent_fs == child_fs", "user": {"login": "bebehei", "id": 2073458, "node_id": "MDQ6VXNlcjIwNzM0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2073458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bebehei", "html_url": "https://github.com/bebehei", "followers_url": "https://api.github.com/users/bebehei/followers", "following_url": "https://api.github.com/users/bebehei/following{/other_user}", "gists_url": "https://api.github.com/users/bebehei/gists{/gist_id}", "starred_url": "https://api.github.com/users/bebehei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bebehei/subscriptions", "organizations_url": "https://api.github.com/users/bebehei/orgs", "repos_url": "https://api.github.com/users/bebehei/repos", "events_url": "https://api.github.com/users/bebehei/events{/privacy}", "received_events_url": "https://api.github.com/users/bebehei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}, {"id": 405267535, "node_id": "MDU6TGFiZWw0MDUyNjc1MzU=", "url": "https://api.github.com/repos/borgbackup/borg/labels/filesystem", "name": "filesystem", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-02-11T17:12:02Z", "updated_at": "2017-02-12T18:37:43Z", "closed_at": "2017-02-12T18:37:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm currently migrating towards borgbackup. As always while switching infrastructure, you sometimes hit old yet unknown bugs: For some reasons my root-partition was mounted on `/` and for some reasons on `/mnt/`, too.\r\n\r\nWhile creating a borgbackup archive of `/`, borg traverses the mountpoint of `/mnt`. It's the same filesystem (but it's still a mountpoint!).\r\n\r\nAlthough calling `borg create ` with `-x`-option, both `/` and `/mnt` get archived.\r\n\r\n```\r\n[root@nsd:~]$ mount | grep /dev/vda\r\n/dev/vda2 on / type ext4 (rw,relatime,data=ordered)\r\n/dev/vda2 on /mnt type ext4 (rw,relatime,data=ordered)\r\n[root@nsd:~]$ borg create -x steak:nsd::$(date +'%Y-%m-%d-%H:%M') /\r\n[root@nsd ~]$ borg info steak:nsd::2017-02-11-15:27\r\nName: 2017-02-11-15:27\r\nFingerprint: c4775b04d5ebf8d81b5243b59616ba191290b5b9663d8392a558250f05d086b2\r\nHostname: nsd\r\nUsername: root\r\nTime (start): Sat, 2017-02-11 15:27:58\r\nTime (end):   Sat, 2017-02-11 15:34:33\r\nCommand line: /usr/bin/borg create -x steak:nsd::2017-02-11-15:27 /\r\nNumber of files: 132670\r\n\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:                4.85 GB              4.85 GB              2.41 GB\r\nAll archives:                4.85 GB              4.85 GB              2.41 GB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                   61225               133578\r\n[root@nsd ~]$ borg list --short steak:nsd::2017-02-11-15:27  | wc -l\r\n160025\r\n[root@nsd ~]$ borg list --short steak:nsd::2017-02-11-15:27 | grep '^mnt' | wc -l\r\n80015\r\n```\r\nSo, creating an archive always yields to the double the Original Size but because of borg's deduplication strategy this is just a minor issue.\r\n\r\nAlso someone has to be as stupid as me and has to mount the backed up volume twice.\r\n\r\nBut pain starts when extracting the archive, when copying out the doubled size of the harddisk and restoring takes doubled time.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2141/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2140", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2140/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2140/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2140/events", "html_url": "https://github.com/borgbackup/borg/issues/2140", "id": 206802099, "node_id": "MDU6SXNzdWUyMDY4MDIwOTk=", "number": 2140, "title": "borg truncates last cmdline argument", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/39", "html_url": "https://github.com/borgbackup/borg/milestone/39", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/39/labels", "id": 2284200, "node_id": "MDk6TWlsZXN0b25lMjI4NDIwMA==", "number": 39, "title": "1.0.10", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2017-01-28T20:43:16Z", "updated_at": "2017-02-13T11:12:36Z", "due_on": "2017-02-13T08:00:00Z", "closed_at": "2017-02-13T11:12:36Z"}, "comments": 5, "created_at": "2017-02-10T13:57:02Z", "updated_at": "2017-02-10T17:25:05Z", "closed_at": "2017-02-10T17:25:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from the borgbackup mailing list:\r\n\r\nthis is a strange issue - i get this only on one system (yet). (SLES 12 SP2)\r\n\r\nI'm using borg 1.0.9, the \"all in one\" binary from the github page and it seems to cut off the last letter from the hostname...\r\n\r\n```\r\n# borg init ssh://testname\r\nRemote: ssh: Could not resolve hostname testnam: Name or service not known\r\n```\r\nonly borg seems to do this (ssh straight to the machine works from the same prompt).\r\n\r\nadding a space to the end fixes the name: (well obviously testname doesn't exist, but it's looking up the right name now)\r\n```\r\n# borg init \"ssh://testname \"\r\nRemote: ssh: Could not resolve hostname testname: Name or service not known\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2140/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2099", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2099/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2099/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2099/events", "html_url": "https://github.com/borgbackup/borg/issues/2099", "id": 202617820, "node_id": "MDU6SXNzdWUyMDI2MTc4MjA=", "number": 2099, "title": "IntegrityError: Invalid segment entry size", "user": {"login": "bket", "id": 1864835, "node_id": "MDQ6VXNlcjE4NjQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1864835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bket", "html_url": "https://github.com/bket", "followers_url": "https://api.github.com/users/bket/followers", "following_url": "https://api.github.com/users/bket/following{/other_user}", "gists_url": "https://api.github.com/users/bket/gists{/gist_id}", "starred_url": "https://api.github.com/users/bket/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bket/subscriptions", "organizations_url": "https://api.github.com/users/bket/orgs", "repos_url": "https://api.github.com/users/bket/repos", "events_url": "https://api.github.com/users/bket/events{/privacy}", "received_events_url": "https://api.github.com/users/bket/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 653084310, "node_id": "MDU6TGFiZWw2NTMwODQzMTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20repository", "name": "c: repository", "color": "9683EC", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 10, "created_at": "2017-01-23T18:48:42Z", "updated_at": "2017-07-23T10:45:24Z", "closed_at": "2017-01-28T13:22:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In an attempt to expunge multiple checkpoints I used a script similar to:\r\n\r\n```\r\n#!/bin/sh\r\nset -eu\r\n    borg list :: | grep checkpoint | cut -d ' ' -f1 | while read l; do\r\n    borg delete ::${l}\r\ndone\r\n```\r\n\r\nThe client is running borg 1.0.9 on OSX and the server (OpenBSD) is also running 1.0.9. Connection is via SSH.\r\nAfter some time the client errored with:\r\n\r\n```\r\nRemote: Borg 1.0.9: exception in RPC call:\r\nRemote: Traceback (most recent call last):\r\nRemote:   File \"/usr/local/lib/python3.6/site-packages/borg/remote.py\", line 113, in serve\r\nRemote:     res = f(*args)\r\nRemote:   File \"/usr/local/lib/python3.6/site-packages/borg/repository.py\", line 200, in commit\r\nRemote:     self.compact_segments(save_space=save_space)\r\nRemote:   File \"/usr/local/lib/python3.6/site-packages/borg/repository.py\", line 300, in compact_segments\r\nRemote:     for tag, key, offset, data in self.io.iter_objects(segment, include_data=True):\r\nRemote:   File \"/usr/local/lib/python3.6/site-packages/borg/repository.py\", line 705, in iter_objects\r\nRemote:     (TAG_PUT, TAG_DELETE, TAG_COMMIT))\r\nRemote:   File \"/usr/local/lib/python3.6/site-packages/borg/repository.py\", line 770, in _read\r\nRemote:     size, segment, offset))\r\nRemote: borg.helpers.IntegrityError: Invalid segment entry size 1195725663 - too big [segment 131098, offset 5300305]Remote:\r\nRemote: Platform: OpenBSD aurora.lan 6.0 GENERIC#136 i386 i386\r\nRemote: Borg: 1.0.9  Python: CPython 3.6.0\r\nRemote: PID: 44224  CWD: /home/snapshot\r\nRemote: sys.argv: ['/usr/local/bin/borg', 'serve', '--restrict-to-path', '/storage/d66e1f9b5845327b.a/borg/macbook-n_nancy.mac']\r\nRemote: SSH_ORIGINAL_COMMAND: 'borg serve --umask=077 --info'\r\nRemote:\r\nData integrity error: b'Remote Exception (see remote log for the traceback)'\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 2052, in main\r\n  File \"borg/archiver.py\", line 1997, in run\r\n  File \"borg/archiver.py\", line 90, in wrapper\r\n  File \"borg/archiver.py\", line 503, in do_delete\r\n  File \"borg/remote.py\", line 403, in commit\r\n  File \"borg/remote.py\", line 288, in call\r\n  File \"borg/remote.py\", line 327, in call_many\r\n  File \"borg/remote.py\", line 309, in handle_error\r\nborg.helpers.IntegrityError: b'Remote Exception (see remote log for the traceback)'\r\n\r\nPlatform: Darwin macbook-n 16.3.0 Darwin Kernel Version 16.3.0: Thu Nov 17 20:23:58 PST 2016; root:xnu-3789.31.2~1/RELEASE_X86_64 x86_64 i386\r\nBorg: 1.0.9  Python: CPython 3.5.2\r\nPID: 29277  CWD: /Users/n.mac/.snapshot/keys\r\nsys.argv: ['borg', 'delete', '-v', '::macbook-n_nancy.mac_1485099919.checkpoint']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nSubsequential delete (or create) attempts resulted in the same error. Error was resolved by running borg check --repair.\r\n\r\nOutput of the specific segment file 131098 at offset 5300305 is included (dd if=131098 of=output\r\n bs=1 skip=5300305 count=1024). What is interesting is that offset 0 as well as 5300305 start with \"BORG_SEG\".\r\n\r\n[output.zip](https://github.com/borgbackup/borg/files/724636/output.zip)\r\n\r\nIssue has been discussed on IRC:\r\n\r\n```\r\n2017-01-23 19:16:21     ThomasWaldmann  if that superfluous BORG_SEG magic header was the only problem, it should be able to recover all data\r\n2017-01-23 19:16:51     bket    other strange thing is the file size: ~2 * 5MB\r\n2017-01-23 19:17:15     bket    I expected a segment to be ~5M\r\n2017-01-23 19:17:29     ThomasWaldmann  as these were checkpoints, there likely was some issue interrupting the backup. otherwise they would not exist.\r\n2017-01-23 19:18:02     ThomasWaldmann  so dime segments were written to, but no final commit entry.\r\n2017-01-23 19:18:08     ThomasWaldmann  some*\r\n2017-01-23 19:19:15     ThomasWaldmann  the bug might be an \"ab\" file mode. if a seg file already exists, that appends...\r\n2017-01-23 19:20:12     bket    that explains the double BORG_SEG I guess?\r\n2017-01-23 19:20:15     ThomasWaldmann              self._write_fd = open(self.segment_filename(self.segment), 'ab')\r\n2017-01-23 19:20:17     ThomasWaldmann              self._write_fd.write(MAGIC)\r\n2017-01-23 19:20:25     ThomasWaldmann  that looks suspicious\r\n2017-01-23 19:21:16     ThomasWaldmann  will to some digging into code and history\r\n2017-01-23 19:21:39     ThomasWaldmann  but as i said, recover_segment() can cope with that, so no data loss, right?\r\n2017-01-23 19:22:32     ThomasWaldmann  it skips forward bytewise until crc matches again\r\n2017-01-23 19:23:50     ThomasWaldmann  if you look into that seg file, it also starts with BORG_SEG at the beginning (offset 0), right?\r\n2017-01-23 19:24:04     bket    yes\r\n2017-01-23 19:26:14     ThomasWaldmann  19:21  ThomasWaldmann$ but as i said, recover_segment() can cope with that, so no data loss, right?\r\n2017-01-23 19:28:12     bket    I have not observed data loss\r\n2017-01-23 19:29:30     bket    Both offests start with BORG_SEG\r\n2017-01-23 19:33:38     ThomasWaldmann  e22fcdc0 darc/repository.py  (Jonas Borgstr\u00f6m  2013-06-20 12:48:54 +0200 673)             self._write_fd = open(self.segment_filename(self.se\r\n2017-01-23 19:33:41     ThomasWaldmann  gment), 'ab')\r\n2017-01-23 19:33:43     ThomasWaldmann  b718a443 attic/repository.py (Jonas Borgstr\u00f6m  2013-07-08 23:38:27 +0200 674)             self._write_fd.write(MAGIC)\r\n2017-01-23 19:33:52     ThomasWaldmann  hah, ancient code\r\n2017-01-23 19:37:32     ThomasWaldmann  about that time, Jonas renamed from \"darc\" to \"attic\"\r\n```\r\n\r\n\r\n \r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2099/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2092", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2092/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2092/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2092/events", "html_url": "https://github.com/borgbackup/borg/issues/2092", "id": 202334089, "node_id": "MDU6SXNzdWUyMDIzMzQwODk=", "number": 2092, "title": "inaccessible hard links are stored", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 405267535, "node_id": "MDU6TGFiZWw0MDUyNjc1MzU=", "url": "https://api.github.com/repos/borgbackup/borg/labels/filesystem", "name": "filesystem", "color": "d4c5f9", "default": false, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 5, "created_at": "2017-01-21T19:13:36Z", "updated_at": "2017-01-24T21:54:39Z", "closed_at": "2017-01-24T21:54:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "similar to: https://github.com/jborg/attic/issues/393\r\n```\r\n$ touch hl1\r\n$ chmod 000 hl1\r\n$ ln hl1 hl2\r\n$ borg create repo::hl-check .\r\nhl1: [Errno 13] Permission denied: 'hl1'\r\n$ mkdir extract\r\n$ cd extract\r\n$ borg extract ../repo::hl-check\r\nhl2: [Errno 2] No such file or directory: '/home/tw/w/borg/extract/hl1' -> '/home/tw/w/borg/extract/hl2'\r\n$ ls -l hl*\r\nls: cannot access 'hl*': No such file or directory\r\n$ borg list ../repo::hl-check | grep hl\r\nh--------- tw     tw            0 Sat, 2017-01-21 20:08:04 hl2 link to hl1\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2092/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2092/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2073", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2073/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2073/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2073/events", "html_url": "https://github.com/borgbackup/borg/issues/2073", "id": 200938035, "node_id": "MDU6SXNzdWUyMDA5MzgwMzU=", "number": 2073, "title": "Compilation failure on MinGW-w64 (x86_64)", "user": {"login": "oroppas", "id": 885380, "node_id": "MDQ6VXNlcjg4NTM4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/885380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oroppas", "html_url": "https://github.com/oroppas", "followers_url": "https://api.github.com/users/oroppas/followers", "following_url": "https://api.github.com/users/oroppas/following{/other_user}", "gists_url": "https://api.github.com/users/oroppas/gists{/gist_id}", "starred_url": "https://api.github.com/users/oroppas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oroppas/subscriptions", "organizations_url": "https://api.github.com/users/oroppas/orgs", "repos_url": "https://api.github.com/users/oroppas/repos", "events_url": "https://api.github.com/users/oroppas/events{/privacy}", "received_events_url": "https://api.github.com/users/oroppas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 9, "created_at": "2017-01-16T06:09:11Z", "updated_at": "2017-01-22T03:17:54Z", "closed_at": "2017-01-22T01:09:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n`building 'borg.hashindex' extension`\r\n`C:\\msys64\\mingw64\\bin/x86_64-w64-mingw32-gcc.exe -DNDEBUG -march=x86-64 -mtune=generic -O2 -pipe -D_FORTIFY_SOURCE=2 -IC:/msys64/mingw64/include/python3.5m -c borg/hashindex.c -o build/temp.mingw-3.5/borg/hashindex.o`\r\n`In file included from borg/hashindex.c:433:0:`\r\n`borg/_hashindex.c:24:2: error: #error Unknown byte order`\r\n` #error Unknown byte order`\r\n ` ^~~~~`\r\n`borg/_hashindex.c: In function 'hashindex_index':`\r\n`borg/_hashindex.c:108:12: warning: implicit declaration of function '_le32toh' [-Wimplicit-function-declaration]`\r\n`     return _le32toh(*((uint32_t *)key)) % index->num_buckets;`\r\n`            ^~~~~~~~`\r\n`borg/_hashindex.c: In function 'hashindex_lookup':`\r\n`borg/_hashindex.c:76:15: warning: implicit declaration of function '_htole32' [-Wimplicit-function-declaration]`\r\n` #define EMPTY _htole32(0xffffffff)`\r\n`               ^`\r\n`borg/_hashindex.c:84:100: note: in expansion of macro 'EMPTY'`\r\n` #define BUCKET_IS_EMPTY(index, idx) (*((uint32_t *)(BUCKET_ADDR(index, idx) + index->key_size)) == EMPTY)`\r\n`                                                                                                    ^~~~~`\r\n`borg/_hashindex.c:118:12: note: in expansion of macro 'BUCKET_IS_EMPTY'`\r\n `        if(BUCKET_IS_EMPTY(index, idx))`\r\n`            ^~~~~~~~~~~~~~~`\r\n`error: command 'C:\\\\msys64\\\\mingw64\\\\bin/x86_64-w64-mingw32-gcc.exe' failed with exit status 1`\r\n`==> ERROR: A failure occurred in build().`\r\n `   Aborting...`\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2073/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2052", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2052/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2052/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2052/events", "html_url": "https://github.com/borgbackup/borg/issues/2052", "id": 200829751, "node_id": "MDU6SXNzdWUyMDA4Mjk3NTE=", "number": 2052, "title": "crc32.c (cythonized crc32.pyx) is missing from pypi package", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 5, "created_at": "2017-01-14T21:06:13Z", "updated_at": "2017-01-14T21:55:32Z", "closed_at": "2017-01-14T21:55:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2043", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2043/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2043/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2043/events", "html_url": "https://github.com/borgbackup/borg/issues/2043", "id": 200784467, "node_id": "MDU6SXNzdWUyMDA3ODQ0Njc=", "number": 2043, "title": "crc32 issues on openbsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 3, "created_at": "2017-01-14T06:09:36Z", "updated_at": "2017-01-14T16:43:52Z", "closed_at": "2017-01-14T14:57:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n==> openbsd64:     cc -pthread -fno-strict-aliasing -DNDEBUG -O2 -pipe -fPIC -O2 -pipe -fPIC -I/usr/local/include/python3.4m -c src/borg/crc32.c -o build/temp.openbsd-6.0-amd64-3.4/src/borg/crc32.o\r\n==> openbsd64:     In file included from src/borg/_crc32/crc32.c:66,\r\n==> openbsd64:                      from src/borg/crc32.c:433:\r\n==> openbsd64:     src/borg/_crc32/clmul.c:36:23: error: smmintrin.h: No such file or directory\r\n==> openbsd64:     src/borg/_crc32/clmul.c:37:23: error: wmmintrin.h: No such file or directory\r\n==> openbsd64:     In file included from src/borg/_crc32/crc32.c:66,\r\n==> openbsd64:                      from src/borg/crc32.c:433:\r\n==> openbsd64:     src/borg/_crc32/clmul.c:87: error: expected ')' before '*' token\r\n==> openbsd64:     src/borg/_crc32/clmul.c:113: error: expected ')' before '*' token\r\n==> openbsd64:     src/borg/_crc32/clmul.c:147: error: expected ')' before '*' token\r\n==> openbsd64:     src/borg/_crc32/clmul.c:187: error: expected ')' before '*' token\r\n==> openbsd64:     src/borg/_crc32/clmul.c:254: error: expected declaration specifiers or '...' before '__m128i'\r\n==> openbsd64:     src/borg/_crc32/clmul.c:254: error: expected declaration specifiers or '...' before '__m128i'\r\n...\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/2039", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/2039/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/2039/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/2039/events", "html_url": "https://github.com/borgbackup/borg/issues/2039", "id": 200777397, "node_id": "MDU6SXNzdWUyMDA3NzczOTc=", "number": 2039, "title": "crc32 compile error on wheezy VM", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 1, "created_at": "2017-01-14T03:34:58Z", "updated_at": "2017-01-14T11:23:16Z", "closed_at": "2017-01-14T11:23:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n==> wheezy32:     In file included from src/borg/_crc32/crc32.c:3:0,\r\n==> wheezy32:                      from src/borg/crc32.c:433:\r\n==> wheezy32:     src/borg/_crc32/slice_by_8.c: In function \u2018crc32_slice_by_8\u2019:\r\n==> wheezy32:     src/borg/_crc32/slice_by_8.c:389:3: error: ISO C90 forbids mixed declarations and code [-Werror=declaration-after-statement]\r\n==> wheezy32:     cc1: some warnings being treated as errors\r\n==> wheezy32:     error: command 'gcc' failed with exit status 1\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/2039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/2039/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1997", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1997/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1997/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1997/events", "html_url": "https://github.com/borgbackup/borg/issues/1997", "id": 198604141, "node_id": "MDU6SXNzdWUxOTg2MDQxNDE=", "number": 1997, "title": "borg check does not exit with failure status when archive is absent", "user": {"login": "dluijkx", "id": 24904555, "node_id": "MDQ6VXNlcjI0OTA0NTU1", "avatar_url": "https://avatars.githubusercontent.com/u/24904555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dluijkx", "html_url": "https://github.com/dluijkx", "followers_url": "https://api.github.com/users/dluijkx/followers", "following_url": "https://api.github.com/users/dluijkx/following{/other_user}", "gists_url": "https://api.github.com/users/dluijkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/dluijkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dluijkx/subscriptions", "organizations_url": "https://api.github.com/users/dluijkx/orgs", "repos_url": "https://api.github.com/users/dluijkx/repos", "events_url": "https://api.github.com/users/dluijkx/events{/privacy}", "received_events_url": "https://api.github.com/users/dluijkx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 1, "created_at": "2017-01-04T00:31:17Z", "updated_at": "2017-01-12T02:09:19Z", "closed_at": "2017-01-12T02:09:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "when running a command such as:\r\nborg check -v repo::archive1           (archive1 is not actually part of the repo)\r\n...if archive1 does not exist in the repo, the command should report an error ( that archive \"archive1\" does not exist ), then exit with a non-zero status.\r\nInstead, it says the archive consistency check is complete(see below), and exits with a 0 status.\r\n\r\nStarting repository check\r\nCompleted repository check, no problems found.\r\nStarting archive consistency check...\r\nOrphaned objects check skipped (needs all archives checked).\r\nArchive consistency check complete, no problems found.\r\n[root@chlxfs1 trc]# echo $?\r\n0\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1997/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1992", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1992/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1992/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1992/events", "html_url": "https://github.com/borgbackup/borg/issues/1992", "id": 198416452, "node_id": "MDU6SXNzdWUxOTg0MTY0NTI=", "number": 1992, "title": "broken error handling for broken xattr FS implementation", "user": {"login": "MarkusMuellerAU", "id": 7237729, "node_id": "MDQ6VXNlcjcyMzc3Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/7237729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkusMuellerAU", "html_url": "https://github.com/MarkusMuellerAU", "followers_url": "https://api.github.com/users/MarkusMuellerAU/followers", "following_url": "https://api.github.com/users/MarkusMuellerAU/following{/other_user}", "gists_url": "https://api.github.com/users/MarkusMuellerAU/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkusMuellerAU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkusMuellerAU/subscriptions", "organizations_url": "https://api.github.com/users/MarkusMuellerAU/orgs", "repos_url": "https://api.github.com/users/MarkusMuellerAU/repos", "events_url": "https://api.github.com/users/MarkusMuellerAU/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkusMuellerAU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 7, "created_at": "2017-01-03T06:23:14Z", "updated_at": "2017-01-05T23:15:35Z", "closed_at": "2017-01-05T14:26:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Backing up a FUSE based ObjectiveFS filesystem results in the following error:\r\n\r\n```Local Exception.\r\nTraceback (most recent call last):\r\n  File \"borg/archiver.py\", line 2052, in main\r\n  File \"borg/archiver.py\", line 1997, in run\r\n  File \"borg/archiver.py\", line 90, in wrapper\r\n  File \"borg/archiver.py\", line 305, in do_create\r\n  File \"borg/archiver.py\", line 278, in create_inner\r\n  File \"borg/archiver.py\", line 348, in _process\r\n  File \"borg/archive.py\", line 605, in process_dir\r\n  File \"borg/archive.py\", line 594, in stat_attrs\r\n  File \"borg/xattr.py\", line 43, in get_all\r\n  File \"borg/xattr.py\", line 220, in getxattr\r\n  File \"borg/xattr.py\", line 164, in _getxattr_inner\r\n  File \"borg/helpers.py\", line 735, in get\r\n  File \"borg/helpers.py\", line 725, in resize\r\nValueError: Requested buffer size 33554432 is above the limit of 16777216.\r\n\r\nPlatform: Linux ip-172-31-12-165 3.13.0-101-lowlatency #148-Ubuntu SMP PREEMPT Thu Oct 20 22:48:47 UTC 2016 x86_64 x86_64\r\nLinux: debian jessie/sid\r\nBorg: 1.0.9  Python: CPython 3.5.2\r\nPID: 2542  CWD: /tmp\r\nsys.argv: ['./borg-linux64', 'create', '--stats', '--debug', '/mnt/borg_backup::OFS-Backup-now', '/ofs/']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nThis is the relevant strace:\r\n\r\n```\r\n[pid  2542] 04:52:48 lstat(\"/ofs\", {st_mode=S_IFDIR|S_ISVTX|0777, st_size=0, ...}) = 0\r\n[pid  2542] 04:52:48 open(\"/etc/passwd\", O_RDONLY|O_CLOEXEC) = 5\r\n[pid  2542] 04:52:48 open(\"/etc/group\", O_RDONLY|O_CLOEXEC) = 5\r\n[pid  2542] 04:52:48 llistxattr(\"/ofs\", \"\\0\\0\\0\\0\\0\\0\\0\\0\", 4096) = 8\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1e9fc80, 4096) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1f1d5b0, 8192) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1f1f5c0, 16384) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1f235d0, 32768) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1f2b5e0, 65536) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x1f3b5f0, 131072) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f2922027010, 262144) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f2921fa6010, 524288) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f2921ea5010, 1048576) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f2921ca4010, 2097152) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f29218a3010, 4194304) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f29210a2010, 8388608) = -1 ERANGE (Numerical result out of range)\r\n[pid  2542] 04:52:48 lgetxattr(\"/ofs\", \"\", 0x7f29200a1010, 16777216) = -1 ERANGE (Numerical result out of range)\r\n```\r\n\r\nFrom my understanding it looks like the array of null-terminated character strings \\0\\0\\0\\0\\0\\0\\0\\0 is causing the issue? \r\n\r\nNot sure if this is a bug in Borg or ObjectiveFS, as the linux attr command works as expected:\r\n```\r\nstrace -f -t -e trace=file attr -l /ofs\r\n06:04:31 execve(\"/usr/bin/attr\", [\"attr\", \"-l\", \"/ofs\"], [/* 23 vars */]) = 0\r\n06:04:31 llistxattr(\"/ofs\", \"\\0\\0\\0\\0\\0\\0\\0\\0\", 65536) = 8\r\n06:04:31 +++ exited with 0 +++\r\n```\r\n\r\n```\r\nstrace -f -t -e trace=file attr -l /ofs/all_dbs.sql.gz\r\n05:57:04 execve(\"/usr/bin/attr\", [\"attr\", \"-l\", \"/ofs/all_dbs.sql.gz\"], [/* 23 vars */]) = 0\r\n05:57:04 llistxattr(\"/ofs/all_dbs.sql.gz\", \"user.user.name\\0\", 65536) = 15\r\n05:57:04 lgetxattr(\"/ofs/all_dbs.sql.gz\", \"user.user.name\", 0x0, 0) = 4\r\n\r\nAttribute \"user.name\" has a 4 byte value for /ofs/all_dbs.sql.gz\r\n05:57:04 +++ exited with 0 +++\r\n```\r\n\r\nBacking up a file with an extended attribute set results in a successful backup:\r\n\r\n```\r\nattr -s user.name -V test /ofs/all_dbs.sql.gz\r\n\r\n./borg-linux64 create --stats --debug /mnt/borg_backup::OFS-Backup-now /ofs/all_dbs.sql.gz\r\nusing builtin fallback logging configuration\r\nEnter passphrase for key /mnt/borg_backup:\r\nTAM-verified manifest\r\nReading files cache ...\r\nProcessing files ...\r\n------------------------------------------------------------------------------\r\nArchive name: OFS-Backup-now\r\nArchive fingerprint: 565567fefdd19bbe577b88d49ec7f7c2d2fb138d71e99709751573cf0c2edb78\r\nTime (start): Tue, 2017-01-03 05:30:45\r\nTime (end):   Tue, 2017-01-03 05:30:52\r\nDuration: 6.98 seconds\r\nNumber of files: 1\r\n------------------------------------------------------------------------------\r\n                       Original size      Compressed size    Deduplicated size\r\nThis archive:               76.94 MB             76.94 MB             76.94 MB\r\nAll archives:               76.94 MB             76.94 MB             76.94 MB\r\n\r\n                       Unique chunks         Total chunks\r\nChunk index:                      29                   29\r\n------------------------------------------------------------------------------\r\n```\r\n\r\nThank you very much in advance for your help and if you need any further data please let me know.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1981", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1981/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1981/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1981/events", "html_url": "https://github.com/borgbackup/borg/issues/1981", "id": 197503475, "node_id": "MDU6SXNzdWUxOTc1MDM0NzU=", "number": 1981, "title": "add non-encrypted repo check for --tam repo upgrades (or at least better docs)", "user": {"login": "DrupaListo-com", "id": 15360654, "node_id": "MDQ6VXNlcjE1MzYwNjU0", "avatar_url": "https://avatars.githubusercontent.com/u/15360654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrupaListo-com", "html_url": "https://github.com/DrupaListo-com", "followers_url": "https://api.github.com/users/DrupaListo-com/followers", "following_url": "https://api.github.com/users/DrupaListo-com/following{/other_user}", "gists_url": "https://api.github.com/users/DrupaListo-com/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrupaListo-com/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrupaListo-com/subscriptions", "organizations_url": "https://api.github.com/users/DrupaListo-com/orgs", "repos_url": "https://api.github.com/users/DrupaListo-com/repos", "events_url": "https://api.github.com/users/DrupaListo-com/events{/privacy}", "received_events_url": "https://api.github.com/users/DrupaListo-com/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 3, "created_at": "2016-12-25T14:37:20Z", "updated_at": "2017-01-03T16:31:38Z", "closed_at": "2017-01-03T16:31:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, while reading the release notes for the new 1.0.9 version, I saw I need to run a command similar to --tam upgrade or sth like that. It upgrades the repo to make it more secure.\r\n\r\nThe problem is the docs don't say specifically that the repo needs to have some encryption. For non-encrypted repo-s the upgrade command fails with some python error that looks ugly.\r\n\r\nTwo simple things could remedy this situation:\r\n1. Add one sentence to docs/release notes that specifies we need to upgrade ONLY repos with encryption.\r\n2. Add a simple if-check for the --tam option that would print \"this repo is not encrypted, you don't need to run this upgrade at all. Bye bye...\"\r\n\r\nAgree?\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1981/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1978", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1978/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1978/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1978/events", "html_url": "https://github.com/borgbackup/borg/issues/1978", "id": 197437825, "node_id": "MDU6SXNzdWUxOTc0Mzc4MjU=", "number": 1978, "title": "change-passphrase crashes for plaintext repos", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/36", "html_url": "https://github.com/borgbackup/borg/milestone/36", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/36/labels", "id": 2194963, "node_id": "MDk6TWlsZXN0b25lMjE5NDk2Mw==", "number": 36, "title": "1.0.10rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 35, "state": "closed", "created_at": "2016-12-13T19:55:38Z", "updated_at": "2017-01-29T02:42:50Z", "due_on": null, "closed_at": "2017-01-29T02:42:50Z"}, "comments": 1, "created_at": "2016-12-23T23:45:26Z", "updated_at": "2017-01-03T16:31:52Z", "closed_at": "2017-01-03T16:31:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It doesn't work -- as promised -- but it's kinda ugly as well.\r\n\r\n```\r\nAttributeError: 'PlaintextKey' object has no attribute 'change_passphrase'\r\n```\r\n\r\nShould be:\r\n\r\n```\r\n$repo is not encrypted, cannot change passphrase.\r\n(exit 1 or 2)\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1932", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1932/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1932/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1932/events", "html_url": "https://github.com/borgbackup/borg/issues/1932", "id": 193726023, "node_id": "MDU6SXNzdWUxOTM3MjYwMjM=", "number": 1932, "title": "`borg debug` call fails due to missing logger setup", "user": {"login": "RonnyPfannschmidt", "id": 156838, "node_id": "MDQ6VXNlcjE1NjgzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RonnyPfannschmidt", "html_url": "https://github.com/RonnyPfannschmidt", "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers", "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}", "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions", "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs", "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos", "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/35", "html_url": "https://github.com/borgbackup/borg/milestone/35", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/35/labels", "id": 2158951, "node_id": "MDk6TWlsZXN0b25lMjE1ODk1MQ==", "number": 35, "title": "1.0.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-11-26T23:24:02Z", "updated_at": "2016-12-20T04:06:36Z", "due_on": "2016-12-16T08:00:00Z", "closed_at": "2016-12-20T04:06:36Z"}, "comments": 1, "created_at": "2016-12-06T09:46:11Z", "updated_at": "2016-12-14T01:50:31Z", "closed_at": "2016-12-14T01:50:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n[nix-shell:/run/media/ronny/backups/borg_test/borg_recreate_repair_test]$ borg debug\r\nTraceback (most recent call last):\r\n  File \"/run/user/1000/tmp.53SX7QRY7s/bin/borg\", line 11, in <module>\r\n    load_entry_point('borgbackup', 'console_scripts', 'borg')()\r\n  File \"/home/ronny/Projects/borgbackup/borg/src/borg/archiver.py\", line 2800, in main\r\n    logger.error(msg)\r\n  File \"/home/ronny/Projects/borgbackup/borg/src/borg/logger.py\", line 178, in error\r\n    return self.__logger.error(*args, **kw)\r\n  File \"/home/ronny/Projects/borgbackup/borg/src/borg/logger.py\", line 150, in __logger\r\n    raise Exception(\"tried to call a logger before setup_logging() was called\")\r\nException: tried to call a logger before setup_logging() was called\r\n\r\n[nix-shell:/run/media/ronny/backups/borg_test/borg_recreate_repair_test]$ borg --version\r\nborg 1.1.0.dev76+ng7e5ed40\r\n```", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1932/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1920", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1920/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1920/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1920/events", "html_url": "https://github.com/borgbackup/borg/issues/1920", "id": 193013900, "node_id": "MDU6SXNzdWUxOTMwMTM5MDA=", "number": 1920, "title": "rechunk lost all file content", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 453494169, "node_id": "MDU6TGFiZWw0NTM0OTQxNjk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20recreate", "name": "cmd: recreate", "color": "005252", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 1, "created_at": "2016-12-02T01:58:06Z", "updated_at": "2016-12-02T23:02:01Z", "closed_at": "2016-12-02T23:02:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Note: it looks like this is a bug in (unreleased) borg 1.1, borg 1.0.x is not affected.\r\n\r\nborg 1.1 (master branch), while trying to reproduce #1658, all went apparently(!) well, all checks succeeded, no tracebacks, no error msgs.\r\n\r\nbut then I noticed that in an archive list, all file lengths are 0.\r\nwhen extracting the file, a 0 bytes file was extracted.\r\nother metadata looked ok (uid/gid/timestamp/path).\r\n\r\nwhat i roughly did was:\r\n\r\n- copied bigger production repo to usb3 disk\r\n- borg check --repository-only\r\n- borg recreate (changed compression) on some archives\r\n- borg delete on bigger number of archives\r\n- borg prune, reducing the whole repo to ~ 10 archives\r\n- borg check (complete, archives too)\r\n- borg recreate with --exclude on a bigger directory\r\n- borg check (complete, archives too)\r\n- borg check --verify-data\r\n\r\nI'll try to reproduce with lesser actions.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1920/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1903", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1903/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1903/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1903/events", "html_url": "https://github.com/borgbackup/borg/issues/1903", "id": 192428670, "node_id": "MDU6SXNzdWUxOTI0Mjg2NzA=", "number": 1903, "title": "borg mount: TypeError in error handler vol2", "user": {"login": "nmiculinic", "id": 3183610, "node_id": "MDQ6VXNlcjMxODM2MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3183610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmiculinic", "html_url": "https://github.com/nmiculinic", "followers_url": "https://api.github.com/users/nmiculinic/followers", "following_url": "https://api.github.com/users/nmiculinic/following{/other_user}", "gists_url": "https://api.github.com/users/nmiculinic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmiculinic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmiculinic/subscriptions", "organizations_url": "https://api.github.com/users/nmiculinic/orgs", "repos_url": "https://api.github.com/users/nmiculinic/repos", "events_url": "https://api.github.com/users/nmiculinic/events{/privacy}", "received_events_url": "https://api.github.com/users/nmiculinic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 491632559, "node_id": "MDU6TGFiZWw0OTE2MzI1NTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/hardware-issue", "name": "hardware-issue", "color": "e6e6e6", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/35", "html_url": "https://github.com/borgbackup/borg/milestone/35", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/35/labels", "id": 2158951, "node_id": "MDk6TWlsZXN0b25lMjE1ODk1MQ==", "number": 35, "title": "1.0.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-11-26T23:24:02Z", "updated_at": "2016-12-20T04:06:36Z", "due_on": "2016-12-16T08:00:00Z", "closed_at": "2016-12-20T04:06:36Z"}, "comments": 13, "created_at": "2016-11-29T23:10:06Z", "updated_at": "2016-11-30T10:45:09Z", "closed_at": "2016-11-30T01:08:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Similar issue as in #1894 \r\n\r\n```\r\n/t/borg \u00bb ~/.local/bin/borg mount /mnt/data/gdrive/backup-borg /mnt/data\r\nEnter passphrase for key /mnt/data/gdrive/backup-borg: \r\nLocal Exception.\r\nTraceback (most recent call last):\r\n  File \"/tmp/borg/borg/archiver.py\", line 1957, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/tmp/borg/borg/archiver.py\", line 1902, in run\r\n    return args.func(args)\r\n  File \"/tmp/borg/borg/archiver.py\", line 82, in wrapper\r\n    kwargs['manifest'], kwargs['key'] = Manifest.load(repository)\r\n  File \"/tmp/borg/borg/helpers.py\", line 119, in load\r\n    data = key.decrypt(None, cdata)\r\n  File \"/tmp/borg/borg/key.py\", line 150, in decrypt\r\n    raise IntegrityError('Chunk %s: Encryption envelope checksum mismatch' % bin_to_hex(id))\r\n  File \"/tmp/borg/borg/helpers.py\", line 768, in bin_to_hex\r\n    return hexlify(binary).decode('ascii')\r\nTypeError: a bytes-like object is required, not 'NoneType'\r\n\r\nPlatform: Linux protagonist 4.8.10-1-ARCH #1 SMP PREEMPT Mon Nov 21 11:55:43 CET 2016 x86_64 \r\nLinux: arch  \r\nBorg: 1.0.9rc2.dev11+ngb25de0a  Python: CPython 3.5.2\r\nPID: 10175  CWD: /tmp/borg\r\nsys.argv: ['/home/lpp/.local/bin/borg', 'mount', '/mnt/data/gdrive/backup-borg', '/mnt/data']\r\nSSH_ORIGINAL_COMMAND: None\r\n```\r\n\r\nI've manually installed commit b25de0ab38e396854646c1e6e96b41402372308f which is One after Merge #1895  was merged into 1.0-maintenance", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1903/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1894", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1894/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1894/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1894/events", "html_url": "https://github.com/borgbackup/borg/issues/1894", "id": 192152322, "node_id": "MDU6SXNzdWUxOTIxNTIzMjI=", "number": 1894, "title": "borg mount: TypeError in error handler", "user": {"login": "nmiculinic", "id": 3183610, "node_id": "MDQ6VXNlcjMxODM2MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3183610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmiculinic", "html_url": "https://github.com/nmiculinic", "followers_url": "https://api.github.com/users/nmiculinic/followers", "following_url": "https://api.github.com/users/nmiculinic/following{/other_user}", "gists_url": "https://api.github.com/users/nmiculinic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmiculinic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmiculinic/subscriptions", "organizations_url": "https://api.github.com/users/nmiculinic/orgs", "repos_url": "https://api.github.com/users/nmiculinic/repos", "events_url": "https://api.github.com/users/nmiculinic/events{/privacy}", "received_events_url": "https://api.github.com/users/nmiculinic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 491632559, "node_id": "MDU6TGFiZWw0OTE2MzI1NTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/hardware-issue", "name": "hardware-issue", "color": "e6e6e6", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/35", "html_url": "https://github.com/borgbackup/borg/milestone/35", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/35/labels", "id": 2158951, "node_id": "MDk6TWlsZXN0b25lMjE1ODk1MQ==", "number": 35, "title": "1.0.9", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-11-26T23:24:02Z", "updated_at": "2016-12-20T04:06:36Z", "due_on": "2016-12-16T08:00:00Z", "closed_at": "2016-12-20T04:06:36Z"}, "comments": 3, "created_at": "2016-11-29T00:05:59Z", "updated_at": "2016-11-30T10:44:29Z", "closed_at": "2016-11-29T19:15:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nborg mount backup-borg/ /mnt/backup                   :(\r\nEnter passphrase for key /mnt/data/gdrive/backup-borg: \r\nLocal Exception\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 2769, in main\r\n    exit_code = archiver.run(args)\r\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 2706, in run\r\n    return args.func(args)\r\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 95, in wrapper\r\n    kwargs['manifest'], kwargs['key'] = Manifest.load(repository)\r\n  File \"/usr/lib/python3.5/site-packages/borg/helpers.py\", line 210, in load\r\n    _, data = key.decrypt(None, cdata)\r\n  File \"/usr/lib/python3.5/site-packages/borg/key.py\", line 217, in decrypt\r\n    raise IntegrityError('Chunk %s: Encryption envelope checksum mismatch' % bin_to_hex(id))\r\n  File \"/usr/lib/python3.5/site-packages/borg/helpers.py\", line 880, in bin_to_hex\r\n    return hexlify(binary).decode('ascii')\r\nTypeError: a bytes-like object is required, not 'NoneType'\r\n\r\nPlatform: Linux protagonist 4.8.10-1-ARCH #1 SMP PREEMPT Mon Nov 21 11:55:43 CET 2016 x86_64 \r\nLinux: arch  \r\nBorg: 1.1.0.dev35+ng701e26a  Python: CPython 3.5.2\r\nPID: 10538  CWD: /mnt/data/gdrive\r\nsys.argv: ['/usr/bin/borg', 'mount', 'backup-borg/', '/mnt/backup']\r\nSSH_ORIGINAL_COMMAND: None\r\n\r\n```\r\n\r\nI've also tested with 1.0.8 version in arch repositories, same issue.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1894/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1887", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1887/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1887/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1887/events", "html_url": "https://github.com/borgbackup/borg/issues/1887", "id": 191868878, "node_id": "MDU6SXNzdWUxOTE4Njg4Nzg=", "number": 1887, "title": "RPC versioning issue", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 9, "created_at": "2016-11-27T16:01:41Z", "updated_at": "2016-11-27T20:16:42Z", "closed_at": "2016-11-27T20:16:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From https://travis-ci.org/borgbackup/borg/jobs/179186074 : \r\n\r\n```\r\nself = <RemoteRepository ssh://__testsuite__/tmp/tmpluqbot0p/repository>\r\nargs = (), kwargs = {}, sig = <inspect.Signature object at 0x7f1272e94dd8>\r\nbound_args = <inspect.BoundArguments object at 0x7f1272d74c50>\r\nnamed = {'limit': None, 'marker': None}, name = 'marker'\r\nparam = <Parameter at 0x7f1271e16990 'marker'>\r\n\r\n    @functools.wraps(f)\r\n    def do_rpc(self, *args, **kwargs):\r\n        sig = inspect.signature(f)\r\n        bound_args = sig.bind(self, *args, **kwargs)\r\n        named = {}\r\n        for name, param in sig.parameters.items():\r\n            if name == 'self':\r\n                continue\r\n            if name in bound_args.arguments:\r\n                named[name] = bound_args.arguments[name]\r\n            else:\r\n                if param.default is not param.empty:\r\n                    named[name] = param.default\r\n    \r\n        if self.server_version < since:\r\n>           raise self.RPCServerOutdated(f.__name__, format_version(since))\r\nE           borg.remote.RPCServerOutdated: ('scan', '1.1.0b3')\r\n\r\n.tox/py34/lib/python3.4/site-packages/borg/remote.py:375: RPCServerOutdated\r\n```\r\n\r\nIf installed locally the verson is 1.1.0b3.dev243+ng5917822.\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1860", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1860/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1860/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1860/events", "html_url": "https://github.com/borgbackup/borg/issues/1860", "id": 190472692, "node_id": "MDU6SXNzdWUxOTA0NzI2OTI=", "number": 1860, "title": "mtime cache misbehaving on nested backups", "user": {"login": "gleb", "id": 4870, "node_id": "MDQ6VXNlcjQ4NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/4870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gleb", "html_url": "https://github.com/gleb", "followers_url": "https://api.github.com/users/gleb/followers", "following_url": "https://api.github.com/users/gleb/following{/other_user}", "gists_url": "https://api.github.com/users/gleb/gists{/gist_id}", "starred_url": "https://api.github.com/users/gleb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gleb/subscriptions", "organizations_url": "https://api.github.com/users/gleb/orgs", "repos_url": "https://api.github.com/users/gleb/repos", "events_url": "https://api.github.com/users/gleb/events{/privacy}", "received_events_url": "https://api.github.com/users/gleb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/34", "html_url": "https://github.com/borgbackup/borg/milestone/34", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/34/labels", "id": 2102698, "node_id": "MDk6TWlsZXN0b25lMjEwMjY5OA==", "number": 34, "title": "1.0.9rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2016-10-31T00:07:32Z", "updated_at": "2016-11-27T05:32:50Z", "due_on": "2016-11-26T08:00:00Z", "closed_at": "2016-11-27T05:32:50Z"}, "comments": 26, "created_at": "2016-11-19T03:08:35Z", "updated_at": "2016-11-19T23:57:58Z", "closed_at": "2016-11-19T23:24:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am seeing borg mtime cache consistently become ineffective during my backups.  I am suspecting it has something to do with how these are structured.  This is just a guess, but I am hoping somebody will recognize the pattern.\r\n\r\nGiven file hierarchy:\r\n```\r\n/foo\r\n/foo/a\r\n/foo/b/\r\n```\r\n\r\nI am backing it up as 3 archives:\r\n* /foo/a \r\n* /foo/b\r\n* then /foo <- here borg cache becomes ineffective and it rescans all the files\r\n\r\nI am running with `export BORG_FILES_CACHE_TTL=10000` \r\nBorg Version: 1.0.7-0ubuntu1.16.04.1\r\n\r\nThis seems related to #1430 but the fix for that was already included in 1.0.7", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1860/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1837", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1837/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1837/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1837/events", "html_url": "https://github.com/borgbackup/borg/issues/1837", "id": 188928268, "node_id": "MDU6SXNzdWUxODg5MjgyNjg=", "number": 1837, "title": "Errors in check of repo converted from attic", "user": {"login": "cyril42e", "id": 7440361, "node_id": "MDQ6VXNlcjc0NDAzNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/7440361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cyril42e", "html_url": "https://github.com/cyril42e", "followers_url": "https://api.github.com/users/cyril42e/followers", "following_url": "https://api.github.com/users/cyril42e/following{/other_user}", "gists_url": "https://api.github.com/users/cyril42e/gists{/gist_id}", "starred_url": "https://api.github.com/users/cyril42e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cyril42e/subscriptions", "organizations_url": "https://api.github.com/users/cyril42e/orgs", "repos_url": "https://api.github.com/users/cyril42e/repos", "events_url": "https://api.github.com/users/cyril42e/events{/privacy}", "received_events_url": "https://api.github.com/users/cyril42e/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/34", "html_url": "https://github.com/borgbackup/borg/milestone/34", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/34/labels", "id": 2102698, "node_id": "MDk6TWlsZXN0b25lMjEwMjY5OA==", "number": 34, "title": "1.0.9rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2016-10-31T00:07:32Z", "updated_at": "2016-11-27T05:32:50Z", "due_on": "2016-11-26T08:00:00Z", "closed_at": "2016-11-27T05:32:50Z"}, "comments": 12, "created_at": "2016-11-12T19:00:26Z", "updated_at": "2016-11-23T19:04:06Z", "closed_at": "2016-11-13T14:27:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I made a \"borg check\" on my compressed unencrypted repo stored on an USB external hard drive because of #1138 (with borg 1.0.8), and though repository analysis shows no error, during archives analysis I am getting plenty of errors such as :\r\n`Did not get expected metadata dict when unpacking item metadata [chunk: 000026_a40edec797ea5a6c57452c3c5400b2566fffd75d86699fa6a144d207946237de]`\r\n(with tens of errors for the same chunk, and thousands of chunks). Orphaned objects have been found as well.\r\n\r\nI verified each archive independently, and it appears that only the older archives that were created with attic show this problem, not the archives that were created with borg after the conversion. The complete history of my repo is the following :\r\n- September 2014 : created repo with attic 0.13\r\n- September 2014 - October 2014 : created several archives with attic 0.13\r\n- August 2015 : converted the repo with borg 0.23.0\r\n- August 2015 - December 2015 : created several archives with borg 0.23.0 (and maybe other versions <= 0.29.0)\r\n\r\nI ran \"attic check\" (with attic 0.16) on the original attic repository (which I kept), and it did not find any problem.\r\n\r\nI focused on the latest archive created with attic (also the latest that has the problem). I attached the complete output of \"borg check -v --archives-only\" ([check.log.gz](https://github.com/borgbackup/borg/files/587393/check.log.gz)), and the result of \"borg debug-dump-archive-items\" ([items.log.gz](https://github.com/borgbackup/borg/files/587394/items.log.gz)). There are 4237 chunks, with 6 groups of duplicated chunks, each group with 2 or 3 duplicated chunks :\r\n`\r\n% ls | sort -k 1.8,1.24 | uniq -D -s 7\r\n000752_06e338c1e28099ca2ad07ec728ba265f842db9754d21a94eb5f1e96bc320c517.items\r\n000784_06e338c1e28099ca2ad07ec728ba265f842db9754d21a94eb5f1e96bc320c517.items\r\n000444_1a5a6c364d47290cb2c776542ff3b8cd8158f31867eb46f2a396ea96ef2090d6.items\r\n001098_1a5a6c364d47290cb2c776542ff3b8cd8158f31867eb46f2a396ea96ef2090d6.items\r\n001137_1a5a6c364d47290cb2c776542ff3b8cd8158f31867eb46f2a396ea96ef2090d6.items\r\n000761_2eabd1d3873fd061e0a24614e4d3ac9775421caa2ab96a37dfac1e3d69d7e454.items\r\n000793_2eabd1d3873fd061e0a24614e4d3ac9775421caa2ab96a37dfac1e3d69d7e454.items\r\n000750_4909761a9103abb057d075b9a4b4cf1c25971cb107feac064ca1362e4ff786a8.items\r\n000782_4909761a9103abb057d075b9a4b4cf1c25971cb107feac064ca1362e4ff786a8.items\r\n000751_fb370bb6b3edaa9e6c79fd75a7fca949041e655e4e8a6f39c17d6c6d727c9410.items\r\n000783_fb370bb6b3edaa9e6c79fd75a7fca949041e655e4e8a6f39c17d6c6d727c9410.items\r\n000450_fbd07dcf5e9e67fc579446d4e66b010afd7398a0384779afe8353935323541eb.items\r\n001100_fbd07dcf5e9e67fc579446d4e66b010afd7398a0384779afe8353935323541eb.items\r\n001139_fbd07dcf5e9e67fc579446d4e66b010afd7398a0384779afe8353935323541eb.items\r\n`\r\n\r\nTwo of these groups are less than 4kB (2.4kB and 3.9kB).\r\n\r\nAny idea of what could have happened ?", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1821", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1821/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1821/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1821/events", "html_url": "https://github.com/borgbackup/borg/issues/1821", "id": 188416966, "node_id": "MDU6SXNzdWUxODg0MTY5NjY=", "number": 1821, "title": "check_free_space triggers TypeError in LoggedIO.cleanup", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 553536487, "node_id": "MDU6TGFiZWw1NTM1MzY0ODc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/testsuite", "name": "testsuite", "color": "009bdb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 1, "created_at": "2016-11-10T04:19:32Z", "updated_at": "2017-03-05T11:38:29Z", "closed_at": "2016-11-12T00:23:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While testing PR #1820 this showed up when testing on tmpfs:\r\n```\r\n  ==> xenial64:     def test_recreate_dry_run(self):\r\n  ==> xenial64:         self.create_regular_file('compressible', size=10000)\r\n> ==> xenial64: >       self.cmd('init', self.repository_location)\r\n  ==> xenial64: \r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:1713: \r\n  ==> xenial64: _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:247: in cmd\r\n  ==> xenial64:     ret, output = exec_cmd(*args, fork=fork, exe=self.EXE, archiver=self.archiver, **kw)\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/testsuite/archiver.py:78: in exec_cmd\r\n  ==> xenial64:     ret = archiver.run(args)\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/archiver.py:2666: in run\r\n  ==> xenial64:     return args.func(args)\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/archiver.py:101: in wrapper\r\n  ==> xenial64:     return method(self, args, repository=repository, **kwargs)\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/archiver.py:193: in do_init\r\n  ==> xenial64:     repository.commit()\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/repository.py:290: in commit\r\n> ==> xenial64:     self.check_free_space()\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/repository.py:440: in check_free_space\r\n  ==> xenial64:     self.rollback(cleanup=True)\r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/repository.py:742: in rollback\r\n> ==> xenial64:     self.io.cleanup(self.io.get_segments_transaction_id())\r\n  ==> xenial64: _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n  ==> xenial64: \r\n  ==> xenial64: self = <borg.repository.LoggedIO object at 0x7f0b30b736d8>\r\n  ==> xenial64: transaction_id = None\r\n  ==> xenial64: \r\n  ==> xenial64:     def cleanup(self, transaction_id):\r\n  ==> xenial64:         \"\"\"Delete segment files left by aborted transactions\r\n  ==> xenial64:             \"\"\"\r\n> ==> xenial64: >       self.segment = transaction_id + 1\r\n  ==> xenial64: E       TypeError: unsupported operand type(s) for +: 'NoneType' and 'int'\r\n  ==> xenial64: \r\n  ==> xenial64: .tox/py35/lib/python3.5/site-packages/borg/repository.py:932: TypeError\r\n```\r\n\r\nMaybe it is not related to tmpfs, maybe this is just a filesystem where it ran (nearly?) out of space.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1815", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1815/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1815/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1815/events", "html_url": "https://github.com/borgbackup/borg/issues/1815", "id": 188065503, "node_id": "MDU6SXNzdWUxODgwNjU1MDM=", "number": 1815, "title": "check crashes if repo is valid but completely empty", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/34", "html_url": "https://github.com/borgbackup/borg/milestone/34", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/34/labels", "id": 2102698, "node_id": "MDk6TWlsZXN0b25lMjEwMjY5OA==", "number": 34, "title": "1.0.9rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2016-10-31T00:07:32Z", "updated_at": "2016-11-27T05:32:50Z", "due_on": "2016-11-26T08:00:00Z", "closed_at": "2016-11-27T05:32:50Z"}, "comments": 1, "created_at": "2016-11-08T18:17:59Z", "updated_at": "2016-11-14T21:59:08Z", "closed_at": "2016-11-14T21:59:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is because of\r\n\r\n```py\r\n    def identify_key(self, repository):\r\n        try:\r\n            some_chunkid, _ = next(self.chunks.iteritems())\r\n        except StopIteration:\r\n            # repo is completely empty, no chunks\r\n            return None                                             <--\r\n        cdata = repository.get(some_chunkid)\r\n        return key_factory(repository, cdata)\r\n```\r\n\r\nIt later tries to use `self.key` thereby crashes.\r\n\r\nI think this case should either abort and tell to delete repository & start over, or basically do a re-initialize.", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1815/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1815/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1801", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1801/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1801/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1801/events", "html_url": "https://github.com/borgbackup/borg/issues/1801", "id": 187357836, "node_id": "MDU6SXNzdWUxODczNTc4MzY=", "number": 1801, "title": "ubuntu/debian testing issue with 1.0.8", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 553536487, "node_id": "MDU6TGFiZWw1NTM1MzY0ODc=", "url": "https://api.github.com/repos/borgbackup/borg/labels/testsuite", "name": "testsuite", "color": "009bdb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/34", "html_url": "https://github.com/borgbackup/borg/milestone/34", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/34/labels", "id": 2102698, "node_id": "MDk6TWlsZXN0b25lMjEwMjY5OA==", "number": 34, "title": "1.0.9rc1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2016-10-31T00:07:32Z", "updated_at": "2016-11-27T05:32:50Z", "due_on": "2016-11-26T08:00:00Z", "closed_at": "2016-11-27T05:32:50Z"}, "comments": 12, "created_at": "2016-11-04T15:08:30Z", "updated_at": "2017-03-05T11:38:29Z", "closed_at": "2016-11-13T10:32:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n12:53  LocutusOfBorg$ ThomasWaldmann, latest borgbackup breaks testsuite with older pyversions\r\n12:53  LocutusOfBorg$ I mean with older python-py\r\n12:53  LocutusOfBorg$ __________________ ERROR collecting borg/testsuite/archive.py __________________\r\n12:53  LocutusOfBorg$ import file mismatch:\r\n12:53  LocutusOfBorg$ imported module 'borg.testsuite.archive' has this __file__ attribute:\r\n12:53  LocutusOfBorg$   /<<PKGBUILDDIR>>/borg/testsuite/archive.py\r\n12:53  LocutusOfBorg$ which is not the same as the test file we want to collect:\r\n12:53  LocutusOfBorg$   /<<PKGBUILDDIR>>/.pybuild/pythonX.Y_3.4/build/borg/testsuite/archive.py\r\n12:53  LocutusOfBorg$ HINT: remove __pycache__ / .pyc files and/or use a unique basename for your test file modules\r\n12:53  LocutusOfBorg$ _________________ ERROR collecting borg/testsuite/archiver.py __________________\r\n12:53  LocutusOfBorg$ import file mismatch:\r\n12:53  LocutusOfBorg$ I backported python-py to my ppa, but please fix if possible\r\n12:54  LocutusOfBorg$ I had to backport  python-hypothesis - 3.4.2-2~ubuntu16.10.1~ppa1   python-py - 1.4.31-2~ubuntu16.10.1~ppa1  \r\n                      pytest - 3.0.3-1~ubuntu16.10.1~ppa1 \r\n12:54  LocutusOfBorg$ to yakkety, even more to xenial\r\n12:54  LocutusOfBorg$ and trusty is still ongoing\r\n12:55  LocutusOfBorg$ this will make impossible to stable-release upgrade it in the future, because I can't backport half python to official releases\r\n14:57  ThomasWaldmann$ LocutusOfBorg: i've also seen that now and then, but i fixed it by cleaning up the __pycache__\r\n14:58  ThomasWaldmann$ not sure what is causing this, did you find out more? I suspect conftest.py.\r\n15:00  ThomasWaldmann$ python-py is the name of the pytest (py.test) package?\r\n15:01  ThomasWaldmann$ we don't use hypothesis for borg\r\n15:02  ThomasWaldmann$ and, what precisely do you mean with \"latest borgbackup\"? 1.0.x or 1.1 / master branch / 1.1.0bN?\r\n15:45  LocutusOfBorg$ ThomasWaldmann, https://packages.qa.debian.org/p/python-py.html I need at least 1.4.31-2\r\n15:45  LocutusOfBorg$ and python-py 1.4.31 needs hypothesis and pytest 3.0.3-1\r\n15:45  LocutusOfBorg$ so, even if not directly, such issue is dragging 3 updates, on yakkety, and many more on trusty of course\r\n15:46  LocutusOfBorg$ talking about 1.0.8\r\n15:46  LocutusOfBorg$ uploaded yesterday in unstable\r\n15:59  ThomasWaldmann$ i wonder a bit about that python-py - it is nothing we require directly\r\n15:59  ThomasWaldmann$ same for hypothesis. so wouldn't pytest be enough?\r\n16:00  ThomasWaldmann$ (and maybe tox, depending on how you invoke the tests)\r\n16:00  ThomasWaldmann$ LocutusOfBorg: ^\r\n16:01  ThomasWaldmann$ https://github.com/borgbackup/borg/commits/1.0-maint/conftest.py maybe it is triggered by that\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1801/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1705", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1705/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1705/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1705/events", "html_url": "https://github.com/borgbackup/borg/issues/1705", "id": 181899251, "node_id": "MDU6SXNzdWUxODE4OTkyNTE=", "number": 1705, "title": "Invalid location format on cifs/smb", "user": {"login": "DurandA", "id": 3709037, "node_id": "MDQ6VXNlcjM3MDkwMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3709037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DurandA", "html_url": "https://github.com/DurandA", "followers_url": "https://api.github.com/users/DurandA/followers", "following_url": "https://api.github.com/users/DurandA/following{/other_user}", "gists_url": "https://api.github.com/users/DurandA/gists{/gist_id}", "starred_url": "https://api.github.com/users/DurandA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DurandA/subscriptions", "organizations_url": "https://api.github.com/users/DurandA/orgs", "repos_url": "https://api.github.com/users/DurandA/repos", "events_url": "https://api.github.com/users/DurandA/events{/privacy}", "received_events_url": "https://api.github.com/users/DurandA/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 10, "created_at": "2016-10-09T17:26:59Z", "updated_at": "2020-01-14T21:39:22Z", "closed_at": "2016-10-12T22:21:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got a samba share mounted on _/run/user/1000/gvfs/smb-share:server=diskstation.local,share=backup_.\n\nWhen initializing a repo using `borg init /run/user/1000/gvfs/smb-share:server=diskstation.local,share=backup` I get:\n_borg init: error: argument REPOSITORY: Invalid location format: \"/run/user/1000/gvfs/smb-share:server=diskstation.local,share=backup\"_\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1658", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1658/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1658/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1658/events", "html_url": "https://github.com/borgbackup/borg/issues/1658", "id": 179904715, "node_id": "MDU6SXNzdWUxNzk5MDQ3MTU=", "number": 1658, "title": "ObjectNotFound on delete (repo had recreates and one cache clean)", "user": {"login": "RonnyPfannschmidt", "id": 156838, "node_id": "MDQ6VXNlcjE1NjgzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RonnyPfannschmidt", "html_url": "https://github.com/RonnyPfannschmidt", "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers", "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}", "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions", "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs", "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos", "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 453494169, "node_id": "MDU6TGFiZWw0NTM0OTQxNjk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20recreate", "name": "cmd: recreate", "color": "005252", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/32", "html_url": "https://github.com/borgbackup/borg/milestone/32", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/32/labels", "id": 2009270, "node_id": "MDk6TWlsZXN0b25lMjAwOTI3MA==", "number": 32, "title": "1.1.0b3", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2016-09-16T14:13:08Z", "updated_at": "2017-01-15T19:08:57Z", "due_on": "2016-12-11T08:00:00Z", "closed_at": "2017-01-15T19:08:57Z"}, "comments": 17, "created_at": "2016-09-28T22:11:05Z", "updated_at": "2016-12-06T11:40:52Z", "closed_at": "2016-12-06T11:40:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n$ borg delete borg::home-ronny-pc-2016-05-07T15:02:35+0200 --progress\nObject with key ed09942013aca9bccee00f207335245795f70152bd09ce0b5eb656fe6e6988b4 not found in repository /run/media/ronny/backups/borg.\nTraceback (most recent call last):\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/archiver.py\", line 2675, in main\n    exit_code = archiver.run(args)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/archiver.py\", line 2612, in run\n    return args.func(args)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/archiver.py\", line 99, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/archiver.py\", line 774, in do_delete\n    with Cache(repository, key, manifest, lock_wait=self.lock_wait) as cache:\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/cache.py\", line 103, in __init__\n    self.sync()\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/cache.py\", line 382, in sync\n    self.chunks = create_master_idx(self.chunks)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/cache.py\", line 349, in create_master_idx\n    archive_chunk_idx = fetch_and_build_idx(archive_id, repository, self.key)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/cache.py\", line 301, in fetch_and_build_idx\n    for item_id, chunk in zip(archive.items, repository.get_many(archive.items)):\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/remote.py\", line 546, in get_many\n    for data in self.repository.get_many(keys):\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/repository.py\", line 768, in get_many\n    yield self.get(id_)\n  File \"/nix/store/2v84q6cxzgscwsr1hzjcjmaxyixm3x6c-borgbackup-1.0.7/lib/python3.4/site-packages/borg/repository.py\", line 764, in get\n    raise self.ObjectNotFound(id_, self.path) from None\nborg.repository.ObjectNotFound: ('ed09942013aca9bccee00f207335245795f70152bd09ce0b5eb656fe6e6988b4', '/run/media/ronny/backups/borg')\n\nPlatform: Linux ronny-rh-work-nix 4.4.20 #1-NixOS SMP Wed Sep 7 06:32:59 UTC 2016 x86_64 \nLinux:   \nBorg: 1.1+git  Python: CPython 3.4.5\nPID: 31558  CWD: /run/media/ronny/backups\nsys.argv: ['borg', 'delete', 'borg::home-ronny-pc-2016-05-07T15:02:35+0200', '--progress']\nSSH_ORIGINAL_COMMAND: None\n```\n\nborg revision is 62bec8ab1c08abeacaa537020433c2aa08dfab78\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1658/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1628", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1628/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1628/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1628/events", "html_url": "https://github.com/borgbackup/borg/issues/1628", "id": 178729512, "node_id": "MDU6SXNzdWUxNzg3Mjk1MTI=", "number": 1628, "title": "borg crashes in narrow terminal", "user": {"login": "lightonflux", "id": 1377943, "node_id": "MDQ6VXNlcjEzNzc5NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1377943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lightonflux", "html_url": "https://github.com/lightonflux", "followers_url": "https://api.github.com/users/lightonflux/followers", "following_url": "https://api.github.com/users/lightonflux/following{/other_user}", "gists_url": "https://api.github.com/users/lightonflux/gists{/gist_id}", "starred_url": "https://api.github.com/users/lightonflux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lightonflux/subscriptions", "organizations_url": "https://api.github.com/users/lightonflux/orgs", "repos_url": "https://api.github.com/users/lightonflux/repos", "events_url": "https://api.github.com/users/lightonflux/events{/privacy}", "received_events_url": "https://api.github.com/users/lightonflux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 1, "created_at": "2016-09-22T21:48:24Z", "updated_at": "2016-09-23T08:30:53Z", "closed_at": "2016-09-23T08:30:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "System info:\n- Debian 7\n- Borg 1.0.7\n- tmux 1.9.6\n## How to reproduce (hopefully):\n1. Open tmux\n2. open 4 panes (`ctrl+b` then `shift + 2` opens new pane)\n3. make sure your terminal windows is not too big, font size 13 in a window circa 1202x739px is perfect\n4. start `borg create -v --list`\n5. change tmux layout with `ctrl+b` then `space`\n6. do that several times so you get the the narrow-st view\n7. hope that borg crashes\n## Traceback\n\n```\n423.63 GB O 113.70 GB C 80.11 GB D 8393152 N vps_...4ac52ne3\nTraceback (most recent call last):\n  File \"borg/archiver.py\", line 1684, in main\n  File \"borg/archiver.py\", line 1621, in run\n  File \"borg/archiver.py\", line 85, in wrapper\n  File \"borg/archiver.py\", line 249, in do_create\n  File \"borg/archiver.py\", line 223, in create_inner\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 277, in _process\n  File \"borg/archive.py\", line 647, in process_file\n  File \"borg/archive.py\", line 287, in add_item\n  File \"borg/helpers.py\", line 228, in show_progress\nValueError: Sign not allowed in string format specifier\n\nPlatform: Linux atlas 3.14-0.bpo.1-amd64 #1 SMP Debian 3.14.12-1~bpo70+1 (2014-07-13) x86_64 \nLinux: debian 7.11 \nBorg: 1.0.7  Python: CPython 3.5.2\nPID: 7017  CWD: /root\nsys.argv: ['borg', 'create', '-vpsC', 'lz4', '/mnt/nas-03/borgbackup/::{now:%Y-%m-%d}-vps', '/vps', '--exclude=*[cC]ache*']\nSSH_ORIGINAL_COMMAND: None\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1622", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1622/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1622/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1622/events", "html_url": "https://github.com/borgbackup/borg/issues/1622", "id": 178298332, "node_id": "MDU6SXNzdWUxNzgyOTgzMzI=", "number": 1622, "title": "yes() / confirmation question: enter 'yes' and ux doesnt help to notice a PEBCAC problem", "user": {"login": "RonnyPfannschmidt", "id": 156838, "node_id": "MDQ6VXNlcjE1NjgzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/156838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RonnyPfannschmidt", "html_url": "https://github.com/RonnyPfannschmidt", "followers_url": "https://api.github.com/users/RonnyPfannschmidt/followers", "following_url": "https://api.github.com/users/RonnyPfannschmidt/following{/other_user}", "gists_url": "https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RonnyPfannschmidt/subscriptions", "organizations_url": "https://api.github.com/users/RonnyPfannschmidt/orgs", "repos_url": "https://api.github.com/users/RonnyPfannschmidt/repos", "events_url": "https://api.github.com/users/RonnyPfannschmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/RonnyPfannschmidt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/65", "html_url": "https://github.com/borgbackup/borg/milestone/65", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/65/labels", "id": 4332849, "node_id": "MDk6TWlsZXN0b25lNDMzMjg0OQ==", "number": 65, "title": "1.1.11", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2019-05-20T21:47:28Z", "updated_at": "2023-02-09T13:57:33Z", "due_on": null, "closed_at": "2020-03-08T00:13:07Z"}, "comments": 9, "created_at": "2016-09-21T09:49:27Z", "updated_at": "2020-03-03T13:26:40Z", "closed_at": "2020-03-03T13:26:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "i am on current master\ni entered \n\n```\n$ borg recreate borg/ --chunker-params=default --progress --debug\nusing builtin fallback logging configuration\n29 self tests completed in 0.12 seconds\nrecreate is an experimental feature.\nType 'YES' if you understand this and want to continue: yes\n```\n\nno progress bar or progress indication shows up\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1622/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1620", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1620/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1620/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1620/events", "html_url": "https://github.com/borgbackup/borg/issues/1620", "id": 178051762, "node_id": "MDU6SXNzdWUxNzgwNTE3NjI=", "number": 1620, "title": "cache lock is not released on ctrl-c", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 13, "created_at": "2016-09-20T12:56:09Z", "updated_at": "2016-09-26T15:48:54Z", "closed_at": "2016-09-26T15:48:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\n$ /usr/local/bin/borg create --compression lz4 -v --stats --one-file-system --show-rc --exclude-from excludes.txt '/mnt/repo::{hostname}-{user}-{now:%Y-%m-%d_%H:%M:%S}' /root /etc /mnt/data/homes/m /mnt/data/homes/t\n^CKeyboard interrupt.\nTraceback (most recent call last):\n  File \"borg/archiver.py\", line 249, in do_create\n  File \"borg/archiver.py\", line 223, in create_inner\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 303, in _process\n  File \"borg/archiver.py\", line 277, in _process\n  File \"borg/archive.py\", line 655, in process_file\n  File \"borg/cache.py\", line 416, in file_known_and_unchanged\n  File \"msgpack/__init__.py\", line 47, in packb\n\nKeyboardInterrupt\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n File \"borg/archiver.py\", line 1684, in main\n File \"borg/archiver.py\", line 1621, in run\n File \"borg/archiver.py\", line 85, in wrapper\n File \"borg/archiver.py\", line 249, in do_create\n\nKeyboardInterrupt\n\nPlatform: Linux v 3.13.0-92-generic #139-Ubuntu SMP Tue Jun 28 20:42:32 UTC 2016 i686 i686\nLinux: debian jessie/sid\nBorg: 1.0.7  Python: CPython 3.5.2\nsys.argv: ['/usr/local/bin/borg', 'create', '--compression', 'lz4', '-v', '--stats', '--one-file-system', '--show-rc', '--exclude-from', 'excludes.txt', '/mnt/repo::{hostname}-{user}-{now:%Y-%m-%d_%H:%M:%S}', '/root', '/etc', '/mnt/data/homes/m', '/mnt/data/homes/t']\nSSH_ORIGINAL_COMMAND: None\n\nterminating with error status, rc 2\n\n$ /usr/local/bin/borg prune --prefix '{hostname}-{user}-' --stats --list -v --keep-with 1d --keep-daily 7 --keep-weekly 4 --keep-monthly 12 --keep-yearly 1 /mnt/repo\nFailed to create/acquire the lock /mnt/.../cache/2c...35/lock.exclusive (timeout).\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1620/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1599", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1599/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1599/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1599/events", "html_url": "https://github.com/borgbackup/borg/issues/1599", "id": 177145827, "node_id": "MDU6SXNzdWUxNzcxNDU4Mjc=", "number": 1599, "title": "fuse: \"Invalid argument\" OSError with negative number for seek (-o versions)", "user": {"login": "blueyed", "id": 9766, "node_id": "MDQ6VXNlcjk3NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blueyed", "html_url": "https://github.com/blueyed", "followers_url": "https://api.github.com/users/blueyed/followers", "following_url": "https://api.github.com/users/blueyed/following{/other_user}", "gists_url": "https://api.github.com/users/blueyed/gists{/gist_id}", "starred_url": "https://api.github.com/users/blueyed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blueyed/subscriptions", "organizations_url": "https://api.github.com/users/blueyed/orgs", "repos_url": "https://api.github.com/users/blueyed/repos", "events_url": "https://api.github.com/users/blueyed/events{/privacy}", "received_events_url": "https://api.github.com/users/blueyed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/31", "html_url": "https://github.com/borgbackup/borg/milestone/31", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/31/labels", "id": 1967454, "node_id": "MDk6TWlsZXN0b25lMTk2NzQ1NA==", "number": 31, "title": "1.1.0b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-08-27T20:49:21Z", "updated_at": "2016-10-01T21:21:44Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-01T21:21:44Z"}, "comments": 7, "created_at": "2016-09-15T10:52:15Z", "updated_at": "2016-10-03T11:05:24Z", "closed_at": "2016-09-16T17:52:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have tried to use the `-o versions` option with `borg mount`, but got the following error:\n\n```\nLocal Exception\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 2436, in main\n    exit_code = archiver.run(args)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 2353, in run\n    return args.func(args)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 98, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 799, in do_mount\n    operations.mount(args.mountpoint, args.options, args.foreground)\n  File \"/usr/lib/python3.5/site-packages/borg/fuse.py\", line 108, in mount\n    self._create_filesystem()\n  File \"/usr/lib/python3.5/site-packages/borg/fuse.py\", line 86, in _create_filesystem\n    self.process_archive(archive)\n  File \"/usr/lib/python3.5/site-packages/borg/fuse.py\", line 159, in process_archive\n    self.process_leaf(segments[-1], item, parent, prefix, is_dir)\n  File \"/usr/lib/python3.5/site-packages/borg/fuse.py\", line 176, in process_leaf\n    item = self.cache.get(inode)\n  File \"/usr/lib/python3.5/site-packages/borg/fuse.py\", line 46, in get\n    self.fd.seek(inode - self.offset, io.SEEK_SET)\nOSError: [Errno 22] Invalid argument\n\nPlatform: Linux lena.thequod.de 4.7.2-1-ARCH #1 SMP PREEMPT Sat Aug 20 23:02:56 CEST 2016 x86_64 \nLinux: arch Arch Linux\nBorg: 1.1.0b2.dev35+ng783d01f  Python: CPython 3.5.2\nPID: 16776  CWD: /home/user\nsys.argv: ['/usr/bin/borg', 'mount', '-o', 'versions', 'tmp/borg-backup', 'tmp/mnt']\nSSH_ORIGINAL_COMMAND: None\n```\n\nThe problem is that `inode - self.offset` is negative here:\n\n```\n> /usr/lib/python3.5/site-packages/borg/fuse.py(48)get()\n-> self.fd.seek(inode - self.offset, io.SEEK_SET)\n(Pdb) inode\n16069\n(Pdb) self.offset\n1000000\n(Pdb) io.SEEK_SET\n0\n(Pdb) self.fd\n<_io.BufferedRandom name=4>\n(Pdb) self.fd.seek(inode - self.offset, io.SEEK_SET)\n*** OSError: [Errno 22] Invalid argument\n(Pdb) \n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1598", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1598/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1598/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1598/events", "html_url": "https://github.com/borgbackup/borg/issues/1598", "id": 177123629, "node_id": "MDU6SXNzdWUxNzcxMjM2Mjk=", "number": 1598, "title": "Index object count mismatch. 51251 != 51250", "user": {"login": "magma1447", "id": 1918311, "node_id": "MDQ6VXNlcjE5MTgzMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1918311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magma1447", "html_url": "https://github.com/magma1447", "followers_url": "https://api.github.com/users/magma1447/followers", "following_url": "https://api.github.com/users/magma1447/following{/other_user}", "gists_url": "https://api.github.com/users/magma1447/gists{/gist_id}", "starred_url": "https://api.github.com/users/magma1447/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magma1447/subscriptions", "organizations_url": "https://api.github.com/users/magma1447/orgs", "repos_url": "https://api.github.com/users/magma1447/repos", "events_url": "https://api.github.com/users/magma1447/events{/privacy}", "received_events_url": "https://api.github.com/users/magma1447/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/31", "html_url": "https://github.com/borgbackup/borg/milestone/31", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/31/labels", "id": 1967454, "node_id": "MDk6TWlsZXN0b25lMTk2NzQ1NA==", "number": 31, "title": "1.1.0b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-08-27T20:49:21Z", "updated_at": "2016-10-01T21:21:44Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-01T21:21:44Z"}, "comments": 21, "created_at": "2016-09-15T08:58:36Z", "updated_at": "2016-09-28T01:38:05Z", "closed_at": "2016-09-25T21:09:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am currently having 18 borg-repos. Backups from 6 different servers, 3 repos per server. My idea is to rotate them for different weekdays (Mon+Thu, TueSat, Wed+Fri+Sun) in case a repo breaks. My way of protecting against the downside of deduplication. Even with three mirrors of the data I am saving lots of space. The backup scripts does a create, prune, check.\n\nI have been running this for 1-2 weeks now, with the last 4 days or so using the 1.1.0-b1 version. After I started to use the beta version I started to get the Index object count mismatch from the check-jobs. I currently have the issue with 4 of my 18 repos. The interesting fact is that this far, all of them has a mismatch of **one**.\n\nAt first I only noticed the issue with one host. I deleted a repo to make sure I started over from scratch, and removed the prune job from the backup script, hoping the prune was the issue. This did not help.\n\nEarlier I was using version 1.0.7 and did not get these issues, so I assume it's something with the new code, though I can't be certain.\n\nI assume this isn't a known issue since I couldn't find anything about it. Any ideas what could be the cause? Anything I could do to help finding the issue? Any other ideas?\n\nOne of my simplest repos are backed up like this:\n${BORG} create --compression lzma,1 borg@${DESTHOST}:${DESTPATH}${BORGREPO}.borg::{now} /etc /usr/local/bin /root /home\nEg, no weird options at all, and it happened to this one early this morning.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/37897778-index-object-count-mismatch-51251-51250)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1593", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1593/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1593/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1593/events", "html_url": "https://github.com/borgbackup/borg/issues/1593", "id": 176728939, "node_id": "MDU6SXNzdWUxNzY3Mjg5Mzk=", "number": 1593, "title": "Does not catch SIGHUP", "user": {"login": "julian-klode", "id": 6325588, "node_id": "MDQ6VXNlcjYzMjU1ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6325588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/julian-klode", "html_url": "https://github.com/julian-klode", "followers_url": "https://api.github.com/users/julian-klode/followers", "following_url": "https://api.github.com/users/julian-klode/following{/other_user}", "gists_url": "https://api.github.com/users/julian-klode/gists{/gist_id}", "starred_url": "https://api.github.com/users/julian-klode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/julian-klode/subscriptions", "organizations_url": "https://api.github.com/users/julian-klode/orgs", "repos_url": "https://api.github.com/users/julian-klode/repos", "events_url": "https://api.github.com/users/julian-klode/events{/privacy}", "received_events_url": "https://api.github.com/users/julian-klode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 1, "created_at": "2016-09-13T19:30:17Z", "updated_at": "2016-09-13T21:54:47Z", "closed_at": "2016-09-13T21:54:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "borg does not catch SIGHUP, which means that the repository might remain locked if the SSH connection between the server and the client is lost in a remote operation. This seems to manifest especially with systemd-logind having KillUserProcesses set to yes, for unknown reasons.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1593/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1584", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1584/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1584/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1584/events", "html_url": "https://github.com/borgbackup/borg/issues/1584", "id": 175754454, "node_id": "MDU6SXNzdWUxNzU3NTQ0NTQ=", "number": 1584, "title": "--read-special crashes borgbackup upon broken symlink", "user": {"login": "magma1447", "id": 1918311, "node_id": "MDQ6VXNlcjE5MTgzMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1918311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magma1447", "html_url": "https://github.com/magma1447", "followers_url": "https://api.github.com/users/magma1447/followers", "following_url": "https://api.github.com/users/magma1447/following{/other_user}", "gists_url": "https://api.github.com/users/magma1447/gists{/gist_id}", "starred_url": "https://api.github.com/users/magma1447/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magma1447/subscriptions", "organizations_url": "https://api.github.com/users/magma1447/orgs", "repos_url": "https://api.github.com/users/magma1447/repos", "events_url": "https://api.github.com/users/magma1447/events{/privacy}", "received_events_url": "https://api.github.com/users/magma1447/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 6, "created_at": "2016-09-08T13:32:29Z", "updated_at": "2016-09-08T23:07:29Z", "closed_at": "2016-09-08T23:07:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When creating a backup and using --read-special borgbackup crashes if there is a broken symlink in the source data.\n\nTested with 1.1.0-beta1 and 1.0.7.\n\nReproduction case:\n\n`\nuser@computer:/tmp/b$ LD_LIBRARY_PATH=/foo ./borg-linux64  init test1\nEnter new passphrase: \nEnter same passphrase again: \nDo you want your passphrase to be displayed for verification? [yN]: \n\nuser@computer:/tmp/b$ mkdir source\nuser@computer:/tmp/b$ cd source/\nuser@computer:/tmp/b/source$ touch foo\nuser@computer:/tmp/b/source$ ln -s foo bar\nuser@computer:/tmp/b/source$ rm foo\nuser@computer:/tmp/b/source$ cd ..\n\nuser@computer:/tmp/b$ LD_LIBRARY_PATH=/foo ./borg-linux64  create test1::a source\n(OK)\n\nuser@computer:/tmp/b$ LD_LIBRARY_PATH=/foo ./borg-linux64  create --read-special test1::b source\nLocal Exception\nTraceback (most recent call last):\n  File \"borg/archiver.py\", line 2414, in main\n  File \"borg/archiver.py\", line 2344, in run\n  File \"borg/archiver.py\", line 98, in wrapper\n  File \"borg/archiver.py\", line 313, in do_create\n  File \"borg/archiver.py\", line 286, in create_inner\n  File \"borg/archiver.py\", line 376, in _process\n  File \"borg/archiver.py\", line 382, in _process\nFileNotFoundError: [Errno 2] No such file or directory: 'source/bar'\n\nPlatform: Linux computer 4.4.0-34-generic #53-Ubuntu SMP Wed Jul 27 16:06:39 UTC 2016 x86_64 x86_64\nLinux: debian stretch/sid \nBorg: 1.1.0b1  Python: CPython 3.5.2\nPID: 4634  CWD: /tmp/b\nsys.argv: ['./borg-linux64', 'create', '--read-special', 'test1::b', 'source']\nSSH_ORIGINAL_COMMAND: None\n`\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1578", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1578/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1578/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1578/events", "html_url": "https://github.com/borgbackup/borg/issues/1578", "id": 175236885, "node_id": "MDU6SXNzdWUxNzUyMzY4ODU=", "number": 1578, "title": "segfault with borg 1.1.0b1 binary", "user": {"login": "nizedk", "id": 13115493, "node_id": "MDQ6VXNlcjEzMTE1NDkz", "avatar_url": "https://avatars.githubusercontent.com/u/13115493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nizedk", "html_url": "https://github.com/nizedk", "followers_url": "https://api.github.com/users/nizedk/followers", "following_url": "https://api.github.com/users/nizedk/following{/other_user}", "gists_url": "https://api.github.com/users/nizedk/gists{/gist_id}", "starred_url": "https://api.github.com/users/nizedk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nizedk/subscriptions", "organizations_url": "https://api.github.com/users/nizedk/orgs", "repos_url": "https://api.github.com/users/nizedk/repos", "events_url": "https://api.github.com/users/nizedk/events{/privacy}", "received_events_url": "https://api.github.com/users/nizedk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 445253481, "node_id": "MDU6TGFiZWw0NDUyNTM0ODE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/binaries", "name": "binaries", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/31", "html_url": "https://github.com/borgbackup/borg/milestone/31", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/31/labels", "id": 1967454, "node_id": "MDk6TWlsZXN0b25lMTk2NzQ1NA==", "number": 31, "title": "1.1.0b2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-08-27T20:49:21Z", "updated_at": "2016-10-01T21:21:44Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-01T21:21:44Z"}, "comments": 12, "created_at": "2016-09-06T12:41:13Z", "updated_at": "2016-09-19T10:45:01Z", "closed_at": "2016-09-16T14:29:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Segmentation fault on Ubuntu 16.04.1, borg-linux64 1.1.0b1\n\nHi,\n\nI have a problem with the binary build of borg-linux64 1.1.0b1; it segfaults on all of the machines I've tried it on (3 different boxes).\n\n[  139.479365] borg-linux64[1459]: segfault at 0 ip 00007f26a1908d16 sp 00007ffece574c58 error 4 in libc-2.23.so[7f26a187e000+1c0000]\n\nI download it with wget, I chmod +rx it, and that have worked everywhere until now.\n\nI've tried removing my borg folder from .cache without any result.\n\nI have attached a strace file for reference; [strace.txt](https://github.com/borgbackup/borg/files/456654/strace.txt) - if a core dump would be of use, I can provide that as well.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1578/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1551", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1551/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1551/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1551/events", "html_url": "https://github.com/borgbackup/borg/issues/1551", "id": 173736308, "node_id": "MDU6SXNzdWUxNzM3MzYzMDg=", "number": 1551, "title": "Borg crashes after canceling of deletion", "user": {"login": "BlackLotus", "id": 20885, "node_id": "MDQ6VXNlcjIwODg1", "avatar_url": "https://avatars.githubusercontent.com/u/20885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlackLotus", "html_url": "https://github.com/BlackLotus", "followers_url": "https://api.github.com/users/BlackLotus/followers", "following_url": "https://api.github.com/users/BlackLotus/following{/other_user}", "gists_url": "https://api.github.com/users/BlackLotus/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlackLotus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlackLotus/subscriptions", "organizations_url": "https://api.github.com/users/BlackLotus/orgs", "repos_url": "https://api.github.com/users/BlackLotus/repos", "events_url": "https://api.github.com/users/BlackLotus/events{/privacy}", "received_events_url": "https://api.github.com/users/BlackLotus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 6, "created_at": "2016-08-29T09:42:59Z", "updated_at": "2016-09-26T08:19:12Z", "closed_at": "2016-09-26T07:31:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "After a delete got cancelled by accident borg now throws an exception like this https://gist.github.com/BlackLotus/5b435559c95d7ff819eec1b5fe66ecca\n\nI'm using borg from git revision e4e678790610a67ef866d569143157d80c7f6c26 (note: master branch, changeset not in 1.0-maint).\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1551/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1524", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1524/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1524/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1524/events", "html_url": "https://github.com/borgbackup/borg/issues/1524", "id": 172507023, "node_id": "MDU6SXNzdWUxNzI1MDcwMjM=", "number": 1524, "title": "Cache\u2019s previous_location is only updated on cache commit", "user": {"login": "textshell", "id": 6579711, "node_id": "MDQ6VXNlcjY1Nzk3MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6579711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/textshell", "html_url": "https://github.com/textshell", "followers_url": "https://api.github.com/users/textshell/followers", "following_url": "https://api.github.com/users/textshell/following{/other_user}", "gists_url": "https://api.github.com/users/textshell/gists{/gist_id}", "starred_url": "https://api.github.com/users/textshell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/textshell/subscriptions", "organizations_url": "https://api.github.com/users/textshell/orgs", "repos_url": "https://api.github.com/users/textshell/repos", "events_url": "https://api.github.com/users/textshell/events{/privacy}", "received_events_url": "https://api.github.com/users/textshell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/27", "html_url": "https://github.com/borgbackup/borg/milestone/27", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/27/labels", "id": 1921291, "node_id": "MDk6TWlsZXN0b25lMTkyMTI5MQ==", "number": 27, "title": "1.0.8rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 41, "state": "closed", "created_at": "2016-08-03T15:57:55Z", "updated_at": "2020-03-03T12:53:16Z", "due_on": "2016-10-17T07:00:00Z", "closed_at": "2016-10-17T16:06:58Z"}, "comments": 2, "created_at": "2016-08-22T17:19:41Z", "updated_at": "2016-10-10T09:15:10Z", "closed_at": "2016-10-10T09:14:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When the \"Warning: The repository at location {} was previously located at\" prompt is answered the location should be be updated immediately instead of only on the next commit.\n\nRational: Automated backup scripts often have no way to answer such prompts. A natural first try is to do a quick operation from the shell to fix that problem like a borg list or borg info. But these commands don\u2019t commit a cache transaction so previous_location is never updated.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1487", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1487/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1487/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1487/events", "html_url": "https://github.com/borgbackup/borg/issues/1487", "id": 171484707, "node_id": "MDU6SXNzdWUxNzE0ODQ3MDc=", "number": 1487, "title": "crash: manifest.timestamp == None?", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 1, "created_at": "2016-08-16T18:26:18Z", "updated_at": "2016-08-16T19:28:33Z", "closed_at": "2016-08-16T19:28:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "current git master:\n\n```\n[nix-shell:/run/media/ronny/backups]$ borg list borg::home-ronny-pc-2016-05-07T15:02:35+0200 --format '{path}{LF}'\nLocal Exception.\nTraceback (most recent call last):\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/archiver.py\", line 2368, in main\n    exit_code = archiver.run(args)\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/archiver.py\", line 2301, in run\n    return args.func(args)\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/archiver.py\", line 97, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/archiver.py\", line 792, in do_list\n    with Cache(repository, key, manifest, lock_wait=self.lock_wait) as cache:\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/cache.py\", line 102, in __init__\n    self.commit()\n  File \"/nix/store/lskgyhvci1wzzc4nv02g6f8c4dl3bhaf-borgbackup-1.0.6/lib/python3.4/site-packages/borg/cache.py\", line 227, in commit\n    self.config.set('cache', 'timestamp', self.manifest.timestamp)\n  File \"/nix/store/n9p1x3ss0y0fj7j7h5mrzrajjhi08m3z-python3-3.4.5/lib/python3.4/configparser.py\", line 1165, in set\n    self._validate_value_types(option=option, value=value)\n  File \"/nix/store/n9p1x3ss0y0fj7j7h5mrzrajjhi08m3z-python3-3.4.5/lib/python3.4/configparser.py\", line 1154, in _validate_value_types\n    raise TypeError(\"option values must be strings\")\nTypeError: option values must be strings\n\nPlatform: Linux ronny-rh-work-nix 4.4.17 #1-NixOS SMP Wed Aug 10 09:49:43 UTC 2016 x86_64 \nLinux:   \nBorg: 1.1+git  Python: CPython 3.4.5\nPID: 31509  CWD: /run/media/ronny/backups\nsys.argv: ['borg', 'list', 'borg::home-ronny-pc-2016-05-07T15:02:35+0200', '--format', '{path}{LF}']\nSSH_ORIGINAL_COMMAND: None\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1486", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1486/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1486/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1486/events", "html_url": "https://github.com/borgbackup/borg/issues/1486", "id": 171476570, "node_id": "MDU6SXNzdWUxNzE0NzY1NzA=", "number": 1486, "title": "crash: logging not yet set up in preprocess_args", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 1, "created_at": "2016-08-16T17:48:07Z", "updated_at": "2016-08-16T19:35:25Z", "closed_at": "2016-08-16T19:35:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "current git master:\n\n```\n$ borg list --list-format '{formatkeys}{LF}' repo::1\nTraceback (most recent call last):\n  File \"/home/tw/w/borg-env/bin/borg\", line 9, in <module>\n    load_entry_point('borgbackup==1.1.dev333-ngd5edaa5', 'console_scripts', 'borg')()\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2359, in main\n    args = archiver.get_args(sys.argv, os.environ.get('SSH_ORIGINAL_COMMAND'))\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2243, in get_args\n    result = self.parse_args(argv[1:])\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2259, in parse_args\n    args = self.preprocess_args(args)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 1254, in preprocess_args\n    self.print_warning(warning)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 127, in print_warning\n    logger.warning(msg)\n  File \"/home/tw/w/borg/src/borg/logger.py\", line 175, in warning\n    return self.__logger.warning(*args, **kw)\n  File \"/home/tw/w/borg/src/borg/logger.py\", line 150, in __logger\n    raise Exception(\"tried to call a logger before setup_logging() was called\")\nException: tried to call a logger before setup_logging() was called\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1485", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1485/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1485/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1485/events", "html_url": "https://github.com/borgbackup/borg/issues/1485", "id": 171460780, "node_id": "MDU6SXNzdWUxNzE0NjA3ODA=", "number": 1485, "title": "online docs: search results incomplete", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2016-08-16T16:35:30Z", "updated_at": "2017-06-17T12:43:31Z", "closed_at": "2017-06-07T08:00:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the docs search (sphinx / readthedocs.io) is a bit broken. searching for \"append-only\" brings up everything except the section \"Append-only mode\", which would be the most important result.\n\nhttp://borgbackup.readthedocs.io/en/stable/search.html?q=append-only&check_keywords=yes&area=default#\n\nhttp://borgbackup.readthedocs.io/en/stable/usage.html#append-only-mode\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/36995508-online-docs-search-results-incomplete)\n\nNote: this bug is likely not in borg repo, but located in sphinx project or on readthedocs.\n\nhttps://github.com/sphinx-doc/sphinx/issues/2989 related sphinx issue\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1485/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1485/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1462", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1462/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1462/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1462/events", "html_url": "https://github.com/borgbackup/borg/issues/1462", "id": 170550575, "node_id": "MDU6SXNzdWUxNzA1NTA1NzU=", "number": 1462, "title": "Crash: listxattr failed", "user": {"login": "pepa65", "id": 6505000, "node_id": "MDQ6VXNlcjY1MDUwMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6505000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pepa65", "html_url": "https://github.com/pepa65", "followers_url": "https://api.github.com/users/pepa65/followers", "following_url": "https://api.github.com/users/pepa65/following{/other_user}", "gists_url": "https://api.github.com/users/pepa65/gists{/gist_id}", "starred_url": "https://api.github.com/users/pepa65/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pepa65/subscriptions", "organizations_url": "https://api.github.com/users/pepa65/orgs", "repos_url": "https://api.github.com/users/pepa65/repos", "events_url": "https://api.github.com/users/pepa65/events{/privacy}", "received_events_url": "https://api.github.com/users/pepa65/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/28", "html_url": "https://github.com/borgbackup/borg/milestone/28", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/28/labels", "id": 1925877, "node_id": "MDk6TWlsZXN0b25lMTkyNTg3Nw==", "number": 28, "title": "1.0.7rc2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-08-05T16:36:45Z", "updated_at": "2016-08-14T17:27:34Z", "due_on": "2016-08-13T07:00:00Z", "closed_at": "2016-08-13T03:36:01Z"}, "comments": 23, "created_at": "2016-08-11T00:45:33Z", "updated_at": "2016-08-13T13:20:52Z", "closed_at": "2016-08-12T16:22:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "(Same issue as https://github.com/jborg/attic/issues/120 it seems, very similar traceback.)\n\nBorg (1.0.6-2~ubuntu14.04.1~ppa1) failed just now. From xfs to xfs (on same file system), on Ubuntu 14.04 trusty. Of my five directories (each a separate archive, same repo) only one worked. Yesterday all five worked.\nExample failure:\n\n```\nborg create -v --show-rc --stats -C lz4 /data/store/borg::Public-20160810 /data/Public\nEnter passphrase for key /data/store/borg:\nLocal Exception.\nTraceback (most recent call last):\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 1609, in main\n    exit_code = archiver.run(args)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 1546, in run\n    return args.func(args)\nFile \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 81, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 247, in do_create\n    create_inner(archive, cache)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 219, in create_inner\n    read_special=args.read_special, dry_run=dry_run)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 301, in _process     read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3/dist-packages/borg/archiver.py\", line 275, in _process\n     status = archive.process_file(path, st, cache, self.ignore_inode)\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 683, in process_file\n    item.update(self.stat_attrs(st, path))\n  File \"/usr/lib/python3/dist-packages/borg/archive.py\", line 573, in stat_attrs\n    xattrs = xattr.get_all(path, follow_symlinks=False)\n  File \"/usr/lib/python3/dist-packages/borg/xattr.py\", line 31, in get_all\n    for name in listxattr(path, follow_symlinks=follow_symlinks))\n  File \"/usr/lib/python3/dist-packages/borg/xattr.py\", line 115, in listxattr\n    raise Exception('listxattr failed')\nException: listxattr failed\n\nPlatform: Linux brain2 3.13.0-92-generic #139-Ubuntu SMP Tue Jun 28 20:42:26 UTC 2016 x86_64 x86_64\nLinux: Ubuntu 14.04 trusty\nBorg: 1.0.6  Python: CPython 3.4.3\nPID: 21726  CWD: /home/administrator\nsys.argv: ['/usr/bin/borg', 'create', '-v', '--show-rc', '--stats', '-C', 'lz4', '/data/store/borg::Public-20160810', '/data/Public']\nSSH_ORIGINAL_COMMAND: None\n\nterminating with error status, rc 2\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1462/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1462/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1453", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1453/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1453/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1453/events", "html_url": "https://github.com/borgbackup/borg/issues/1453", "id": 169989312, "node_id": "MDU6SXNzdWUxNjk5ODkzMTI=", "number": 1453, "title": "COMPR_BUFFER can be too small", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/28", "html_url": "https://github.com/borgbackup/borg/milestone/28", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/28/labels", "id": 1925877, "node_id": "MDk6TWlsZXN0b25lMTkyNTg3Nw==", "number": 28, "title": "1.0.7rc2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-08-05T16:36:45Z", "updated_at": "2016-08-14T17:27:34Z", "due_on": "2016-08-13T07:00:00Z", "closed_at": "2016-08-13T03:36:01Z"}, "comments": 2, "created_at": "2016-08-08T18:16:38Z", "updated_at": "2016-08-09T16:37:22Z", "closed_at": "2016-08-09T16:37:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://mail.python.org/pipermail/borgbackup/2016q3/000354.html\n\n```\n> Exception: lz4 compress failed\n```\n\ncrash very likely is because the lz4-compressed data did not fit into the COMPR_BUFFER, which is 1.1 \\* 2 *\\* 23 (8.8MB) size currently. the lz4 compressor code checks this and does not overflow the buffer, but fails.\n\n2**23 == 8MB is the chunk buffer size, so normal file content data chunks can never need more buffer (neither for compression nor for decompression).\n\nBut: the archive item creation code does not use the chunker, so it can yield much more data, so that the buffer is not enough for the compressed data.\n\nBoth compression and decompression might or might not work, depending on whether the result fits into that 8.8MB buffer.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1451", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1451/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1451/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1451/events", "html_url": "https://github.com/borgbackup/borg/issues/1451", "id": 169978359, "node_id": "MDU6SXNzdWUxNjk5NzgzNTk=", "number": 1451, "title": "Repository: MAX_OBJECT_SIZE is not enforced at write-time", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/28", "html_url": "https://github.com/borgbackup/borg/milestone/28", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/28/labels", "id": 1925877, "node_id": "MDk6TWlsZXN0b25lMTkyNTg3Nw==", "number": 28, "title": "1.0.7rc2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-08-05T16:36:45Z", "updated_at": "2016-08-14T17:27:34Z", "due_on": "2016-08-13T07:00:00Z", "closed_at": "2016-08-13T03:36:01Z"}, "comments": 1, "created_at": "2016-08-08T17:26:37Z", "updated_at": "2016-08-09T16:17:35Z", "closed_at": "2016-08-09T16:17:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "E.g.\n\n``` py\n\n>>> with borg.repository.Repository(\"repo\", exclusive=True) as r:\n...     r.put(b'0' * 32, bytes(50*1024*1024))\n...     r.get(b'0' * 32)\nTraceback (most recent call last):\n  File \"<stdin>\", line 3, in <module>\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 474, in get\n    return self.io.read(segment, offset, id_)\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 695, in read\n    size, tag, key, data = self._read(fd, self.put_header_fmt, header, segment, offset, (TAG_PUT, ))\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 717, in _read\n    segment, offset))\nborg.helpers.IntegrityError: Invalid segment entry size [segment 1, offset 8]\nInvalid segment entry size [segment 1, offset 8]\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1451/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1442", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1442/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1442/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1442/events", "html_url": "https://github.com/borgbackup/borg/issues/1442", "id": 169712616, "node_id": "MDU6SXNzdWUxNjk3MTI2MTY=", "number": 1442, "title": "Untracked segment", "user": {"login": "PostalBlab", "id": 2878587, "node_id": "MDQ6VXNlcjI4Nzg1ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2878587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PostalBlab", "html_url": "https://github.com/PostalBlab", "followers_url": "https://api.github.com/users/PostalBlab/followers", "following_url": "https://api.github.com/users/PostalBlab/following{/other_user}", "gists_url": "https://api.github.com/users/PostalBlab/gists{/gist_id}", "starred_url": "https://api.github.com/users/PostalBlab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PostalBlab/subscriptions", "organizations_url": "https://api.github.com/users/PostalBlab/orgs", "repos_url": "https://api.github.com/users/PostalBlab/repos", "events_url": "https://api.github.com/users/PostalBlab/events{/privacy}", "received_events_url": "https://api.github.com/users/PostalBlab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/28", "html_url": "https://github.com/borgbackup/borg/milestone/28", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/28/labels", "id": 1925877, "node_id": "MDk6TWlsZXN0b25lMTkyNTg3Nw==", "number": 28, "title": "1.0.7rc2", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2016-08-05T16:36:45Z", "updated_at": "2016-08-14T17:27:34Z", "due_on": "2016-08-13T07:00:00Z", "closed_at": "2016-08-13T03:36:01Z"}, "comments": 1, "created_at": "2016-08-05T23:12:08Z", "updated_at": "2016-08-14T17:27:34Z", "closed_at": "2016-08-13T00:27:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "If borg enters Repository.compact_segments() with an untracked segment it is possible the segment never gets deleted and stays in REPO/data\nCopy paste from my explanation in #borgbackup:\n\n> my repo has 3626 segments and one archive. by deleting the archive, in Archiver.do_delete() with archive.delete(), 2 more segments (3627 and 3628) are created because of all the write_delete() calls. both getting added to Repository.compact. after archive.delete() got called repository.commit() is called. because of the self.io.write_commit() call, segment 3629 gets created and then repository.compact_segments() is called. segment 1-3626 are getting thrown into \"unnused\" but 3627 and 3628 have all these TAG_DELETE entries which triggers new write_delete() calls and more TAG_DELETE entries. 3629 gets stuffed with TAG_DELETED entries and reaches max_segment_size. 3630 is created and 3629 gets completly untracked.\n\nThis happens with 1.0.6\n\nThe bug still exist in 1.1.dev and is getting worse.\nIn Repository.compact_segments(), write_put() and write_delete() are called with raise_full=True. When max_segment_size is reached write_*() throws an LoggedIO.SegmentFull exception, complete_xfer() is called, which leads to closing the current segment and opening a new one and closing it because of the write_commit() call. This leads to more untracked segment files with only 17 byte.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1430", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1430/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1430/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1430/events", "html_url": "https://github.com/borgbackup/borg/issues/1430", "id": 169112759, "node_id": "MDU6SXNzdWUxNjkxMTI3NTk=", "number": 1430, "title": "unintended file cache eviction", "user": {"login": "e477", "id": 7443910, "node_id": "MDQ6VXNlcjc0NDM5MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7443910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e477", "html_url": "https://github.com/e477", "followers_url": "https://api.github.com/users/e477/followers", "following_url": "https://api.github.com/users/e477/following{/other_user}", "gists_url": "https://api.github.com/users/e477/gists{/gist_id}", "starred_url": "https://api.github.com/users/e477/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e477/subscriptions", "organizations_url": "https://api.github.com/users/e477/orgs", "repos_url": "https://api.github.com/users/e477/repos", "events_url": "https://api.github.com/users/e477/events{/privacy}", "received_events_url": "https://api.github.com/users/e477/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/23", "html_url": "https://github.com/borgbackup/borg/milestone/23", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/23/labels", "id": 1872403, "node_id": "MDk6TWlsZXN0b25lMTg3MjQwMw==", "number": 23, "title": "1.0.7rc1 fixes", "description": "ok: jessie64, openbsd64, netbsd64", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2016-07-08T15:21:08Z", "updated_at": "2016-08-05T21:29:12Z", "due_on": null, "closed_at": "2016-08-05T21:29:12Z"}, "comments": 4, "created_at": "2016-08-03T11:48:25Z", "updated_at": "2016-08-05T13:06:44Z", "closed_at": "2016-08-05T13:06:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "When creating archives, the newest file will not be registered in the file cache in order to avoid data loss when working with snapshots (see FAQ). At the end of the backup borg simply removes everything from the file cache with with an mtime the same or newer than the newest mtime seen during the current run. This can result in unintended file cache eviction in the following situations:\n\n1) when interrupting the backup process\n\n2) when a mount point is unavailable during the backup\n\n3) when creating multiple archives from different sources in one repository\n\nIn the latter situation the backup is still okay, but a lot of files will be re-hashed over and over again, resulting in long backup times.\n\nThe question is... do we really have to forget the newest file when working with nanosecond timestamps? And if so, would it be possible to only evict this single cache entry instead of everything with a newer mtime?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1428", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1428/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1428/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1428/events", "html_url": "https://github.com/borgbackup/borg/issues/1428", "id": 168938573, "node_id": "MDU6SXNzdWUxNjg5Mzg1NzM=", "number": 1428, "title": "security issue with remote repository access", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211515661, "node_id": "MDU6TGFiZWwyMTE1MTU2NjE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/security", "name": "security", "color": "ff002f", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/29", "html_url": "https://github.com/borgbackup/borg/milestone/29", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/29/labels", "id": 1933272, "node_id": "MDk6TWlsZXN0b25lMTkzMzI3Mg==", "number": 29, "title": "1.0.7 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2016-08-09T18:42:57Z", "updated_at": "2016-08-18T23:41:34Z", "due_on": "2016-08-19T07:00:00Z", "closed_at": "2016-08-18T23:41:34Z"}, "comments": 1, "created_at": "2016-08-02T17:09:50Z", "updated_at": "2016-08-19T20:07:19Z", "closed_at": "2016-08-18T23:41:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From changes.rst of 1.0.7:\n\nborg serve: fix security issue with remote repository access, #1428\n\nIf you used e.g. --restrict-to-path /path/client1/ (with or without trailing\nslash does not make a difference), it acted like a path prefix match using\n/path/client1 (note the missing trailing slash) - the code then also allowed\nworking in e.g. /path/client13 or /path/client1000.\n\nAs this could accidentally lead to major security/privacy issues depending on\nthe pathes you use, the behaviour was changed to be a strict directory match.\n\nThat means --restrict-to-path /path/client1 (with or without trailing slash\ndoes not make a difference) now uses /path/client1/ internally (note the\ntrailing slash here!) for matching and allows precisely that path AND any\npath below it. So, /path/client1 is allowed, /path/client1/repo1 is allowed,\nbut not /path/client13 or /path/client1000.\n\nIf you willingly used the undocumented (dangerous) previous behaviour, you\nmay need to rearrange your --restrict-to-path pathes now. We are sorry if\nthat causes work for you, but we did not want a potentially dangerous\nbehaviour in the software (not even using a for-backwards-compat option).\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1396", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1396/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1396/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1396/events", "html_url": "https://github.com/borgbackup/borg/issues/1396", "id": 168139084, "node_id": "MDU6SXNzdWUxNjgxMzkwODQ=", "number": 1396, "title": "borg check --repair does not repair object count mismatch", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}, {"id": 653084310, "node_id": "MDU6TGFiZWw2NTMwODQzMTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20repository", "name": "c: repository", "color": "9683EC", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 4, "created_at": "2016-07-28T16:28:28Z", "updated_at": "2017-07-23T10:45:24Z", "closed_at": "2016-08-19T12:09:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Tried to repair the broken repo from #1395, but couldn't:\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v repo\nStarting repository check\nCompleted repository check, no problems found.\nStarting archive consistency check...\nAnalyzing archive 3.checkpoint (3/3)\nAnalyzing archive 2.checkpoint (2/3)\nAnalyzing archive 1.checkpoint (1/3)\nArchive consistency check complete, no problems found.\n```\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v --repair repo\n'check --repair' is an experimental feature that might result in data loss.\nType 'YES' if you understand this and want to continue: YES\nStarting repository check\nCompleted repository check, no problems found.\nStarting archive consistency check...\nAnalyzing archive 3.checkpoint (3/3)\nAnalyzing archive 2.checkpoint (2/3)\nAnalyzing archive 1.checkpoint (1/3)\nArchive consistency check complete, no problems found.\n```\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v repo\nStarting repository check\nIndex object count mismatch. 92 != 93\nCompleted repository check, errors found.\n```\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v --repair repo\n'check --repair' is an experimental feature that might result in data loss.\nType 'YES' if you understand this and want to continue: YES\nStarting repository check\nCompleted repository check, no problems found.\nStarting archive consistency check...\nAnalyzing archive 3.checkpoint (3/3)\nAnalyzing archive 2.checkpoint (2/3)\nAnalyzing archive 1.checkpoint (1/3)\n1 orphaned objects found!\nArchive consistency check complete, problems found.\n```\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v --repair repo\n'check --repair' is an experimental feature that might result in data loss.\nType 'YES' if you understand this and want to continue: YES\nStarting repository check\nCompleted repository check, no problems found.\nStarting archive consistency check...\nAnalyzing archive 3.checkpoint (3/3)\nAnalyzing archive 2.checkpoint (2/3)\nAnalyzing archive 1.checkpoint (1/3)\n1 orphaned objects found!\nArchive consistency check complete, problems found.\n```\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v repo\nStarting repository check\nIndex object count mismatch. 92 != 93\nCompleted repository check, errors found.\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1395", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1395/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1395/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1395/events", "html_url": "https://github.com/borgbackup/borg/issues/1395", "id": 168135744, "node_id": "MDU6SXNzdWUxNjgxMzU3NDQ=", "number": 1395, "title": "borg check --verify-data crashes", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 4, "created_at": "2016-07-28T16:13:13Z", "updated_at": "2016-09-15T12:44:53Z", "closed_at": "2016-07-28T17:13:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This showed up while practically testing my in-file-checkpoints branch code:\nFirst, I started a backup and interrupted it in the middle using Ctrl-C:\n\n```\n(borg-env)tw@tux:~/w/borg$ borg create --checkpoint-interval=1 repo::3 ~/Downloads/pycharm-2016.1/pycharm-professional-2016.1.2.tar.gz \n^CKeyboard interrupt.\nTraceback (most recent call last):\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2282, in main\n    exit_code = archiver.run(args)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2215, in run\n    return args.func(args)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 94, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 308, in do_create\n    create_inner(archive, cache)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 282, in create_inner\n    read_special=args.read_special, dry_run=dry_run, st=st)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 342, in _process\n    status = archive.process_file(path, st, cache, self.ignore_inode)\n  File \"/home/tw/w/borg/src/borg/archive.py\", line 825, in process_file\n    self.chunk_file(item, cache, self.stats, fd, fh, compress=compress)\n  File \"/home/tw/w/borg/src/borg/archive.py\", line 737, in chunk_file\n    for data in backup_io_iter(self.chunker.chunkify(fd, fh)):\n  File \"/home/tw/w/borg/src/borg/archive.py\", line 139, in backup_io_iter\n    item = next(iterator)\nKeyboardInterrupt\n\nPlatform: Linux tux 4.6.4-tw2 #4 SMP Mon Jul 18 15:44:28 CEST 2016 x86_64 x86_64\nLinux: Ubuntu 16.04 xenial\nBorg: 1.1.dev191+ng0c89218  Python: CPython 3.5.1+\nPID: 17878  CWD: /home/tw/w/borg\nsys.argv: ['/home/tw/w/borg-env/bin/borg', 'create', '--checkpoint-interval=1', 'repo::3', '/home/tw/Downloads/pycharm-2016.1/pycharm-professional-2016.1.2.tar.gz']\nSSH_ORIGINAL_COMMAND: None\n```\n\nThen checked repo state:\n\n```\n(borg-env)tw@tux:~/w/borg$ borg check -v --verify-data repo\nStarting repository check\nCompleted repository check, no problems found.\nStarting archive consistency check...\nAnalyzing archive 3.checkpoint (3/3)\nAnalyzing archive 2.checkpoint (2/3)\nAnalyzing archive 1.checkpoint (1/3)\nStarting cryptographic data integrity verification...\nObject with key b\"\\xa4\\xb7Wi\\xebe*E\\x901\\xfa\\x9f\\x1b\\x95\\xa3Jja%\\xa2\\xe6\\xb0\\x84('i\\xbaI\\xce\\t\\xcd\\xd9\" not found in repository /home/tw/w/borg/repo.\nTraceback (most recent call last):\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2282, in main\n    exit_code = archiver.run(args)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 2215, in run\n    return args.func(args)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 94, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/home/tw/w/borg/src/borg/archiver.py\", line 210, in do_check\n    save_space=args.save_space):\n  File \"/home/tw/w/borg/src/borg/archive.py\", line 968, in check\n    self.verify_data()\n  File \"/home/tw/w/borg/src/borg/archive.py\", line 1011, in verify_data\n    encrypted_data = self.repository.get(chunk_id)\n  File \"/home/tw/w/borg/src/borg/repository.py\", line 574, in get\n    raise self.ObjectNotFound(id_, self.path) from None\nborg.repository.Repository.ObjectNotFound: (b\"\\xa4\\xb7Wi\\xebe*E\\x901\\xfa\\x9f\\x1b\\x95\\xa3Jja%\\xa2\\xe6\\xb0\\x84('i\\xbaI\\xce\\t\\xcd\\xd9\", '/home/tw/w/borg/repo')\n\nPlatform: Linux tux 4.6.4-tw2 #4 SMP Mon Jul 18 15:44:28 CEST 2016 x86_64 x86_64\nLinux: Ubuntu 16.04 xenial\nBorg: 1.1.dev191+ng0c89218  Python: CPython 3.5.1+\nPID: 17889  CWD: /home/tw/w/borg\nsys.argv: ['/home/tw/w/borg-env/bin/borg', 'check', '-v', '--verify-data', 'repo']\nSSH_ORIGINAL_COMMAND: None\n```\n\nNot sure yet if the missing object is somehow related to my code changes in that branch or a general problem.\n\nBut likely, verify_data should not crash if a chunk is missing, but just report it.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1351", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1351/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1351/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1351/events", "html_url": "https://github.com/borgbackup/borg/issues/1351", "id": 166443446, "node_id": "MDU6SXNzdWUxNjY0NDM0NDY=", "number": 1351, "title": "borg-check doesn't handle one case of truncated metadata chunks", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 443097016, "node_id": "MDU6TGFiZWw0NDMwOTcwMTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20check", "name": "cmd: check", "color": "123456", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/23", "html_url": "https://github.com/borgbackup/borg/milestone/23", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/23/labels", "id": 1872403, "node_id": "MDk6TWlsZXN0b25lMTg3MjQwMw==", "number": 23, "title": "1.0.7rc1 fixes", "description": "ok: jessie64, openbsd64, netbsd64", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2016-07-08T15:21:08Z", "updated_at": "2016-08-05T21:29:12Z", "due_on": null, "closed_at": "2016-08-05T21:29:12Z"}, "comments": 1, "created_at": "2016-07-19T21:46:18Z", "updated_at": "2016-09-15T12:44:52Z", "closed_at": "2016-07-30T13:47:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://gist.github.com/esteigler/7a9b21a7b91d20b6463bdc30e9bcbd80\n\n``` pytraceback\nException while unpacking item metadata [chunk: 020920_c393225222c0b08962d01582c2ae30adb488becda8b23fde3cd651a02f89037f]\nLocal Exception.\nTraceback (most recent call last):\n  File \"borg/archiver.py\", line 1609, in main\n  File \"borg/archiver.py\", line 1546, in run\n  File \"borg/archiver.py\", line 81, in wrapper\n  File \"borg/archiver.py\", line 148, in do_check\n  File \"borg/archive.py\", line 823, in check\n  File \"borg/archive.py\", line 1058, in rebuild_refcounts\n  File \"borg/archive.py\", line 1015, in robust_iterator\n  File \"borg/archive.py\", line 801, in __next__\n  File \"msgpack/_unpacker.pyx\", line 469, in msgpack._unpacker.Unpacker.__next__ (msgpack/_unpacker.cpp:469)\n  File \"msgpack/_unpacker.pyx\", line 400, in msgpack._unpacker.Unpacker._unpack (msgpack/_unpacker.cpp:400)\nTypeError: unhashable type: 'StableDict'\n```\n\nWhat likely happened here is that one metadata chunk was truncated in a msgpack-map (#1138) where a key is expected. As the next chunk contains an item dict which is not hashable and therefore not a valid key in any dict. This error condition is not handled by RobustUnpacker, but should be.\n\nA possible workaround is to debug-delete-obj the metadata chunks (one should be enough) causing the error, which switches to resync-mode in the RobustUnpacker.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/36171983-borg-check-doesn-t-handle-one-case-of-truncated-metadata-chunks)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1316", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1316/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1316/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1316/events", "html_url": "https://github.com/borgbackup/borg/issues/1316", "id": 165043031, "node_id": "MDU6SXNzdWUxNjUwNDMwMzE=", "number": 1316, "title": "flush of closed file", "user": {"login": "patatetom", "id": 14196171, "node_id": "MDQ6VXNlcjE0MTk2MTcx", "avatar_url": "https://avatars.githubusercontent.com/u/14196171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patatetom", "html_url": "https://github.com/patatetom", "followers_url": "https://api.github.com/users/patatetom/followers", "following_url": "https://api.github.com/users/patatetom/following{/other_user}", "gists_url": "https://api.github.com/users/patatetom/gists{/gist_id}", "starred_url": "https://api.github.com/users/patatetom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patatetom/subscriptions", "organizations_url": "https://api.github.com/users/patatetom/orgs", "repos_url": "https://api.github.com/users/patatetom/repos", "events_url": "https://api.github.com/users/patatetom/events{/privacy}", "received_events_url": "https://api.github.com/users/patatetom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811711, "node_id": "MDU6TGFiZWwyMTA4MTE3MTE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-12T10:16:33Z", "updated_at": "2016-07-12T11:42:33Z", "closed_at": "2016-07-12T10:38:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi,\n\nrecent upgrade of borg :\n\n```\n~ # strings pacman.log | grep borg\n[2016-04-15 15:55] [PACMAN] Running 'pacman -S borg'\n[2016-04-15 15:55] [ALPM] installed borg (1.0.1-1)\n[2016-04-25 09:29] [ALPM] upgraded borg (1.0.1-1 -> 1.0.2-1)\n[2016-06-01 10:12] [ALPM] upgraded borg (1.0.2-1 -> 1.0.3-1)\n[2016-07-11 13:22] [ALPM] upgraded borg (1.0.3-1 -> 1.0.5-1)\n```\n\nand now backup fails :\n\n```\n~ $ borg list /backup  ## /backup is cifs (w$ server)\nEnter passphrase for key /backup: \n20160613                             Mon, 2016-06-13 11:34:32\n20160615                             Wed, 2016-06-15 15:15:19\n20160621                             Tue, 2016-06-21 09:57:41\n\n\n\n~ $ borg info /backup::20160621\nEnter passphrase for key /backup: \nName: 20160621\nFingerprint: 40271f59866f87c293a8f0634f4ebca9f617ce8ad9d02041bc862d8485ef470\nHostname: archlinux\nUsername: user\nTime (start): Tue, 2016-06-21 09:57:41\nTime (end):   Tue, 2016-06-21 09:58:50\nCommand line: /usr/bin/borg create -v --stats /backup::20160621 /home/user\nNumber of files: 134298\n\n                       Original size      Compressed size    Deduplicated size\nThis archive:                7.75 GB              7.76 GB             89.27 MB\nAll archives:               23.06 GB             23.08 GB              7.37 GB\n\n                       Unique chunks         Total chunks\nChunk index:                   93078               399192\n\n\n\n~ $ borg create -v --stats /backup::20160712 ~\nEnter passphrase for key /backup: \nException ignored in: <bound method Repository.__del__ of <Repository /backup>>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 72, in __del__\n    self.close()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 189, in close\n    self.io.close()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 532, in close\n    self.close_segment()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 752, in close_segment\n    self._write_fd.flush()\nValueError: flush of closed file\nLocal Exception.\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 81, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 247, in do_create\n    create_inner(archive, cache)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 219, in create_inner\n    read_special=args.read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 275, in _process\n    status = archive.process_file(path, st, cache, self.ignore_inode)\n  File \"/usr/lib/python3.5/site-packages/borg/archive.py\", line 666, in process_file\n    chunks.append(cache.add_chunk(self.key.id_hash(chunk), chunk, self.stats))\n  File \"/usr/lib/python3.5/site-packages/borg/cache.py\", line 365, in add_chunk\n    self.repository.put(id, data, wait=False)\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 481, in put\n    segment, offset = self.io.write_put(id, data)\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 721, in write_put\n    fd = self.get_write_fd(raise_full=raise_full)\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 608, in get_write_fd\n    self.close_segment()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 759, in close_segment\n    sync_dir(os.path.dirname(self._write_fd.name))\n  File \"/usr/lib/python3.5/site-packages/borg/platform.py\", line 9, in sync_dir\n    os.fsync(fd)\nOSError: [Errno 22] Invalid argument\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 1601, in main\n    exit_code = archiver.run(args)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 1538, in run\n    return args.func(args)\n  File \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 81, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 94, in __exit__\n    self.close()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 189, in close\n    self.io.close()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 532, in close\n    self.close_segment()\n  File \"/usr/lib/python3.5/site-packages/borg/repository.py\", line 752, in close_segment\n    self._write_fd.flush()\nValueError: flush of closed file\n\nPlatform: Linux archlinux 4.4.14-1-lts #1 SMP Fri Jun 24 21:35:25 CEST 2016 x86_64 \nLinux: arch  \nBorg: 1.0.5  Python: CPython 3.5.2\nPID: 8978  CWD: /home/user\nsys.argv: ['/usr/bin/borg', 'create', '-v', '--stats', '/backup::20160712', '/home/user']\nSSH_ORIGINAL_COMMAND: None\n\n\n\n~ $ borg list /backup/\nFailed to create/acquire the lock /backup/lock.exclusive (timeout).\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1302", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1302/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1302/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1302/events", "html_url": "https://github.com/borgbackup/borg/issues/1302", "id": 164681741, "node_id": "MDU6SXNzdWUxNjQ2ODE3NDE=", "number": 1302, "title": "deal with damaged files for FUSE somehow", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/22", "html_url": "https://github.com/borgbackup/borg/milestone/22", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/22/labels", "id": 1870828, "node_id": "MDk6TWlsZXN0b25lMTg3MDgyOA==", "number": 22, "title": "1.0.6rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2016-07-07T18:49:16Z", "updated_at": "2016-07-10T22:45:34Z", "due_on": "2016-07-11T07:00:00Z", "closed_at": "2016-07-10T22:45:34Z"}, "comments": 3, "created_at": "2016-07-09T19:28:13Z", "updated_at": "2016-10-03T11:05:24Z", "closed_at": "2016-07-10T15:47:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "currently, FUSE (borg mount) just lets you read the file with the all-zero replacement chunks.\n\nyou won't notice that the file has problems.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1287", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1287/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1287/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1287/events", "html_url": "https://github.com/borgbackup/borg/issues/1287", "id": 164535065, "node_id": "MDU6SXNzdWUxNjQ1MzUwNjU=", "number": 1287, "title": "borg create throws os.fsync error on cifs mounted repo", "user": {"login": "alraban", "id": 15115939, "node_id": "MDQ6VXNlcjE1MTE1OTM5", "avatar_url": "https://avatars.githubusercontent.com/u/15115939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alraban", "html_url": "https://github.com/alraban", "followers_url": "https://api.github.com/users/alraban/followers", "following_url": "https://api.github.com/users/alraban/following{/other_user}", "gists_url": "https://api.github.com/users/alraban/gists{/gist_id}", "starred_url": "https://api.github.com/users/alraban/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alraban/subscriptions", "organizations_url": "https://api.github.com/users/alraban/orgs", "repos_url": "https://api.github.com/users/alraban/repos", "events_url": "https://api.github.com/users/alraban/events{/privacy}", "received_events_url": "https://api.github.com/users/alraban/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/22", "html_url": "https://github.com/borgbackup/borg/milestone/22", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/22/labels", "id": 1870828, "node_id": "MDk6TWlsZXN0b25lMTg3MDgyOA==", "number": 22, "title": "1.0.6rc1 fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2016-07-07T18:49:16Z", "updated_at": "2016-07-10T22:45:34Z", "due_on": "2016-07-11T07:00:00Z", "closed_at": "2016-07-10T22:45:34Z"}, "comments": 10, "created_at": "2016-07-08T13:49:35Z", "updated_at": "2016-07-08T17:19:33Z", "closed_at": "2016-07-08T17:18:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Observed both on Arch linux systems running the binary package and Debian GNU/Linux systems compiling from pip. With borg 1.05, any attempt to create a new archive in a repository that is accessible via cifs begins to run the create and then errors as soon as it reaches the first new file that needs to be written.  Backups to purely local filesystems or remote backups via ssh with the same repositories appear to work perfectly.\n\nThe systems in question had no similar problem with any prior versions of borg, and a repository check on the relevant repositories comes back clean.\n\nAn example of the errors thrown:\n\n```\nException ignored in: <bound method Repository.__del__ of <Repository /mnt/backups/Saturnine.borg>>\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 72, in __del__\n    self.close()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 189, in close\n    self.io.close()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 532, in close\n    self.close_segment()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 752, in close_segment\n    self._write_fd.flush()\nValueError: flush of closed file\nLocal Exception.\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 81, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 247, in do_create\n    create_inner(archive, cache)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 219, in create_inner\n    read_special=args.read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 301, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 275, in _process\n    status = archive.process_file(path, st, cache, self.ignore_inode)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archive.py\", line 681, in process_file\n    self.add_item(item)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archive.py\", line 279, in add_item\n    self.items_buffer.add(item)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archive.py\", line 133, in add\n    self.flush()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archive.py\", line 148, in flush\n    self.chunks.append(self.write_chunk(chunk))\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archive.py\", line 164, in write_chunk\n    id_, _, _ = self.cache.add_chunk(self.key.id_hash(chunk), chunk, self.stats)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/cache.py\", line 365, in add_chunk\n    self.repository.put(id, data, wait=False)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 481, in put\n    segment, offset = self.io.write_put(id, data)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 721, in write_put\n    fd = self.get_write_fd(raise_full=raise_full)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 608, in get_write_fd\n    self.close_segment()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 759, in close_segment\n    sync_dir(os.path.dirname(self._write_fd.name))\n  File \"/usr/local/lib/python3.4/dist-packages/borg/platform.py\", line 9, in sync_dir\n    os.fsync(fd)\nOSError: [Errno 22] Invalid argument\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 1601, in main\n    exit_code = archiver.run(args)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 1538, in run\n    return args.func(args)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/archiver.py\", line 81, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 94, in __exit__\n    self.close()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 189, in close\n    self.io.close()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 532, in close\n    self.close_segment()\n  File \"/usr/local/lib/python3.4/dist-packages/borg/repository.py\", line 752, in close_segment\n    self._write_fd.flush()\nValueError: flush of closed file\n\nPlatform: Linux Saturnine 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt25-2+deb8u2 (2016-06-25) x86_64 \nLinux: debian 8.5 \nBorg: 1.0.5  Python: CPython 3.4.2\nPID: 19650  CWD: /home/alraban\nsys.argv: ['/usr/local/bin/borg', 'create', '-sv', '-C', 'lz4', '-e', '/proc/', '-e', '/sys/', '-e', '/run/', '-e', '/tmp/', '-e', '/dev/', '-e', '/mnt/', '-e', '/home/pi/backups', '/mnt/backups/Saturnine.borg::2016-07-08-09', '/']\n\n```\n\nThe error on the Arch systems is substantially similar. Let me know if I can provide any additional information or testing.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1282", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1282/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1282/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1282/events", "html_url": "https://github.com/borgbackup/borg/issues/1282", "id": 164381410, "node_id": "MDU6SXNzdWUxNjQzODE0MTA=", "number": 1282, "title": "FUSE xattr code broken on Linux", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/21", "html_url": "https://github.com/borgbackup/borg/milestone/21", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/21/labels", "id": 1855544, "node_id": "MDk6TWlsZXN0b25lMTg1NTU0NA==", "number": 21, "title": "1.0.5 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2016-06-29T16:37:34Z", "updated_at": "2016-07-08T15:20:24Z", "due_on": null, "closed_at": "2016-07-08T15:20:24Z"}, "comments": 4, "created_at": "2016-07-07T18:52:39Z", "updated_at": "2016-10-03T11:05:24Z", "closed_at": "2016-07-07T20:27:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "borg mount crashes on Linux.\n\n```\n# ls -l /mnt\nls: /mnt: Input/output error\nls: cannot open directory /mnt: Transport endpoint is not connected\n```\n\nWhen running borg mount -f, the real problem gets visible:\n\n```\n$ ls -ld /mnt\nFile \"/home/askalski/private/src/borg/borg/fuse.py\", line 197, in getxattr\n    raise llfuse.FUSEError(errno.ENOATTR) from None\nAttributeError: module 'errno' has no attribute 'ENOATTR'\n```\n\nReason:\n\nAfter the initial fix for FUSE xattr code on OS X, it is now broken on Linux (in borg 1.0.4), because OS X Python has errno.ENOATTR, but Linux Python does not. :-(\n\nThe llfuse documentation just said that ENOATTR needs to be returned, but did not point out that it means llfuse.ENOATTR and _not_ errno.ENOATTR.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1241", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1241/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1241/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1241/events", "html_url": "https://github.com/borgbackup/borg/issues/1241", "id": 163525187, "node_id": "MDU6SXNzdWUxNjM1MjUxODc=", "number": 1241, "title": "--read-special mode and known files cache", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 6, "created_at": "2016-07-02T16:20:00Z", "updated_at": "2016-07-04T12:31:50Z", "closed_at": "2016-07-04T12:31:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the known files cache must be avoided when in `--read-special` mode.\n\nsame size, mtime, inode are no indicator of \"no change\" for e.g. a block device.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1241/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1241/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1231", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1231/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1231/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1231/events", "html_url": "https://github.com/borgbackup/borg/issues/1231", "id": 163271486, "node_id": "MDU6SXNzdWUxNjMyNzE0ODY=", "number": 1231, "title": "Misleading error reporting in borg-extract", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 3, "created_at": "2016-06-30T21:30:08Z", "updated_at": "2016-07-04T07:03:24Z", "closed_at": "2016-07-04T07:03:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello darkness my old friend\n\n```\n            try:\n                if dry_run:\n                    archive.extract_item(item, dry_run=True)\n                else:\n                    if stat.S_ISDIR(item.mode):\n                        dirs.append(item)\n                        archive.extract_item(item, restore_attrs=False)\n                    else:\n                        archive.extract_item(item, stdout=stdout, sparse=sparse, hardlink_masters=hardlink_masters,\n                                             original_path=orig_path)\n            except OSError as e:\n                self.print_warning('%s: %s', remove_surrogates(orig_path), e)\n```\n\nGuess we'll just rename input_io => something_else_io (say backup_io or ... or io_io!) and apply the same fix.\n\nNote that this isn't nearly as critical as the other error handling bug, since nothing is written. So it's \"merely\" misleading error reporting.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1222", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1222/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1222/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1222/events", "html_url": "https://github.com/borgbackup/borg/issues/1222", "id": 162971096, "node_id": "MDU6SXNzdWUxNjI5NzEwOTY=", "number": 1222, "title": "add input_io wrapper around get_flags", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 0, "created_at": "2016-06-29T16:33:13Z", "updated_at": "2016-07-08T11:49:52Z", "closed_at": "2016-07-08T11:49:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "in master branch (\"1.1\") get_flags() is also working on the input file on some OSes, so it needs wrapping / error handling. fix all the places.\n\nSee also #1211.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1222/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1220", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1220/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1220/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1220/events", "html_url": "https://github.com/borgbackup/borg/issues/1220", "id": 162854283, "node_id": "MDU6SXNzdWUxNjI4NTQyODM=", "number": 1220, "title": "deadlocks with multiple borg create", "user": {"login": "erikhydro", "id": 20124653, "node_id": "MDQ6VXNlcjIwMTI0NjUz", "avatar_url": "https://avatars.githubusercontent.com/u/20124653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikhydro", "html_url": "https://github.com/erikhydro", "followers_url": "https://api.github.com/users/erikhydro/followers", "following_url": "https://api.github.com/users/erikhydro/following{/other_user}", "gists_url": "https://api.github.com/users/erikhydro/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikhydro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikhydro/subscriptions", "organizations_url": "https://api.github.com/users/erikhydro/orgs", "repos_url": "https://api.github.com/users/erikhydro/repos", "events_url": "https://api.github.com/users/erikhydro/events{/privacy}", "received_events_url": "https://api.github.com/users/erikhydro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/23", "html_url": "https://github.com/borgbackup/borg/milestone/23", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/23/labels", "id": 1872403, "node_id": "MDk6TWlsZXN0b25lMTg3MjQwMw==", "number": 23, "title": "1.0.7rc1 fixes", "description": "ok: jessie64, openbsd64, netbsd64", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2016-07-08T15:21:08Z", "updated_at": "2016-08-05T21:29:12Z", "due_on": null, "closed_at": "2016-08-05T21:29:12Z"}, "comments": 9, "created_at": "2016-06-29T06:59:17Z", "updated_at": "2016-08-05T17:50:04Z", "closed_at": "2016-08-05T17:50:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "the attached script shows a problem with locking. the script simulates what happens if you have multiple servers where on each of them a cronjob does a backup to the same borg repository on a central server at the same time. because of locking an option --lock-wait 86400 is added to have a maximum waiting time of 24 hours. longer is not good, because then the next cronjob backup is started. so after 24 hours continuous blocking i want to get error output which cron will send me by mail. so far so good. every server should automatically do its backup. one after another because of locking. but it does not work.\n\nthe script shows why. you need two computers. on the server you create a borg repo with borg init. on the client you run the script.\n\nit will run 10 backups in parallel.\n\nyou will get lots of messages like these:\n\nRemote: Borg 1.0.2: exception in RPC call:\nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/lib/python3/dist-packages/borg/remote.py\", line 96, in serve\nRemote:     res = f(*args)\nRemote:   File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 455, in put\nRemote:     self.prepare_txn(self.get_transaction_id())\nRemote:   File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 199, in prepare_txn\nRemote:     self.lock.upgrade()\nRemote:   File \"/usr/lib/python3/dist-packages/borg/locking.py\", line 299, in upgrade\nRemote:     self.acquire(exclusive=True, remove=SHARED)\nRemote:   File \"/usr/lib/python3/dist-packages/borg/locking.py\", line 258, in acquire\nRemote:     self._wait_for_readers_finishing(remove, sleep)\nRemote:   File \"/usr/lib/python3/dist-packages/borg/locking.py\", line 287, in _wait_for_readers_finishing\nRemote:     raise LockTimeout(self.path)\nRemote: borg.locking.LockTimeout: /root/foorepo/lock\nRemote: Platform: Linux nagios 3.16.0-4-686-pae #1 SMP Debian 3.16.7-ckt25-2 (2016-04-08) i686\nRemote: Linux: debian 8.5 \nRemote: Borg: 1.0.2  Python: CPython 3.4.2\nRemote: PID: 5658  CWD: /root\nRemote: sys.argv: ['/usr/bin/borg', 'serve', '--umask=077']\nRemote: SSH_ORIGINAL_COMMAND: None\n\nthe script won't terminate. there will not be 10 finished backups. if you then kill the script, you will have zero backups.\n\n[borglockchecker.zip](https://github.com/borgbackup/borg/files/338675/borglockchecker.zip)\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/35589335-deadlocks-with-multiple-borg-create)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1220/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1215", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1215/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1215/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1215/events", "html_url": "https://github.com/borgbackup/borg/issues/1215", "id": 162731818, "node_id": "MDU6SXNzdWUxNjI3MzE4MTg=", "number": 1215, "title": "read-special mode behaves inconsistent", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 3, "created_at": "2016-06-28T16:40:30Z", "updated_at": "2017-11-30T00:44:37Z", "closed_at": "2016-06-29T16:29:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Moved from #1003:\n\n@gpoudrel said:\n\nI have a case where I backup a special device \n/dev/vg/lv-server-snap which is a symlink to /dev/dm-10\n\nI use borg to backup /dev/vg/lv-server it follows the symlink and backup the special device.\n\n```\n# borg create --read-special /repo::today lvdisplay.txt /dev/vg/lv-server-snap\n```\n\nI mount the archive, it is odd.\n\n```\n# borg mount /repo::today /mnt\n# ls /mnt/dev/\ndev tmp\n# ls -l /mnt/dev/vg\nls: cannot read symbolic link /mnt/dev/vg/lv-server-snap: Input/output error\nls: reading directory /mnt/dev/vg/: Software caused connection abort\ntotal 20971520\nlrwxrwxrwx 1 root root 21474836480 Jun 28 05:05 lv-server-snap\n```\n\nWhen I use a device which is not a symlink it works.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1215/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1206", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1206/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1206/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1206/events", "html_url": "https://github.com/borgbackup/borg/issues/1206", "id": 162336942, "node_id": "MDU6SXNzdWUxNjIzMzY5NDI=", "number": 1206, "title": "OverflowError: value too large to convert to int", "user": {"login": "trassl", "id": 7685583, "node_id": "MDQ6VXNlcjc2ODU1ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/7685583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trassl", "html_url": "https://github.com/trassl", "followers_url": "https://api.github.com/users/trassl/followers", "following_url": "https://api.github.com/users/trassl/following{/other_user}", "gists_url": "https://api.github.com/users/trassl/gists{/gist_id}", "starred_url": "https://api.github.com/users/trassl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trassl/subscriptions", "organizations_url": "https://api.github.com/users/trassl/orgs", "repos_url": "https://api.github.com/users/trassl/repos", "events_url": "https://api.github.com/users/trassl/events{/privacy}", "received_events_url": "https://api.github.com/users/trassl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 1, "created_at": "2016-06-26T17:08:46Z", "updated_at": "2016-06-26T18:46:36Z", "closed_at": "2016-06-26T18:46:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since b5362fa5c88fb24d039b7d4293d63824189864c3.\n\nRelevant stacktrace:\n\n```\nFile \"/usr/lib/python3.5/site-packages/borg/archive.py\", line 666, in process_file\nself.stats))\nFile \"/usr/lib/python3.5/site-packages/borg/cache.py\", line 384, in add_chunk\ndata = self.key.encrypt(chunk)\nFile \"/usr/lib/python3.5/site-packages/borg/key.py\", line 164, in encrypt\ndata = b''.join((self.enc_cipher.iv[8:], self.enc_cipher.encrypt(chunk.data)))\nFile \"src/borg/crypto.pyx\", line 156, in borg.crypto.AES.encrypt (src/borg/crypto.c:3038)\n```\n\nRelevant code:\n\n```\n cdef int blocks\n ...\n self.blocks += num_aes_blocks(ctl)\n```\n\nSeems that `int blocks` overflows. Perhaps use `cdef long long blocks` instead.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1205", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1205/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1205/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1205/events", "html_url": "https://github.com/borgbackup/borg/issues/1205", "id": 162336770, "node_id": "MDU6SXNzdWUxNjIzMzY3NzA=", "number": 1205, "title": "TypeError: acl_access value must be surrogate-escaped str or None", "user": {"login": "trassl", "id": 7685583, "node_id": "MDQ6VXNlcjc2ODU1ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/7685583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trassl", "html_url": "https://github.com/trassl", "followers_url": "https://api.github.com/users/trassl/followers", "following_url": "https://api.github.com/users/trassl/following{/other_user}", "gists_url": "https://api.github.com/users/trassl/gists{/gist_id}", "starred_url": "https://api.github.com/users/trassl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trassl/subscriptions", "organizations_url": "https://api.github.com/users/trassl/orgs", "repos_url": "https://api.github.com/users/trassl/repos", "events_url": "https://api.github.com/users/trassl/events{/privacy}", "received_events_url": "https://api.github.com/users/trassl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 2, "created_at": "2016-06-26T17:03:25Z", "updated_at": "2016-06-27T15:22:13Z", "closed_at": "2016-06-27T15:22:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "`acl_get` in `platform/linux.pyx` returns type of `bytes` for `acl_access`, `acl_default`, `acl_extended`, `acl_nfs4` on Linux x86_64. Those `bytes` are not converted to `str` afterwards.\n\nRelevant stacktrace:\n\n```\nFile \"/usr/lib/python3.5/site-packages/borg/archiver.py\", line 332, in _process\nstatus = archive.process_file(path, st, cache, self.ignore_inode)\nFile \"/usr/lib/python3.5/site-packages/borg/archive.py\", line 669, in process_file\nitem.update(self.stat_attrs(st, path))\nFile \"/usr/lib/python3.5/site-packages/borg/item.py\", line 40, in update\nsetattr(self, self._check_key(k), v)\nFile \"/usr/lib/python3.5/site-packages/borg/item.py\", line 95, in _set\nraise TypeError(type_error_msg)\nTypeError: acl_access value must be surrogate-escaped str or None\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1138", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1138/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1138/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1138/events", "html_url": "https://github.com/borgbackup/borg/issues/1138", "id": 158550488, "node_id": "MDU6SXNzdWUxNTg1NTA0ODg=", "number": 1138, "title": "confused I/O Error reporting / handling", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 13, "created_at": "2016-06-05T11:42:19Z", "updated_at": "2016-06-29T16:31:06Z", "closed_at": "2016-06-29T16:31:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am moving this comment by @nesneros which was originally in #1130 to a separate ticket:\n\nError message seen in log output:\n\n```\n/home/jan/projects/spark/core/target/scala-2.11/test-classes/org/apache/spark/rdd/AsyncRDDActionsSuite$$anonfun$1.class: [Errno 5] Input/output error\n```\n\nI was thinking more about these I/O errors and disconnection to the target drive. I would think one could experience I/O errors on the target if it suddenly is disconnected. Could the I/O errors be a \"reporting bug\" in borg? That the I/O error is  related to a file on the target, but is reported for the file being processed on the source? \n\nI archiver.py around line 328 there is code like:\n\n```\n                try:\n                    status = archive.process_file(path, st, cache, self.ignore_inode)\n                except OSError as e:\n                    status = 'E'\n                    self.print_warning('%s: %s', path, e)\n```\n\nIf the process_file function is writing to target I think this could explain the behaviour. My Python skills are basically non-existing so I might be completely off track.\n\n---\n\nAs seen in #1130 just ignoring the OSError when writing to the repo and continuing with next file leads to a corrupt, but completed transaction committed to the repo.\n\nIf the error would be handled as a fatal error, the transaction would be incomplete and (I guess) easily rolled back.\n\nThe bounty is for fixing the wrong log output and the wrong exception handling leading to corruption.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/34878887-confused-i-o-error-reporting-handling)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1138/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1135", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1135/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1135/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1135/events", "html_url": "https://github.com/borgbackup/borg/issues/1135", "id": 158524576, "node_id": "MDU6SXNzdWUxNTg1MjQ1NzY=", "number": 1135, "title": "borg check: false negative for item metadata qualifier", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811712, "node_id": "MDU6TGFiZWwyMTA4MTE3MTI=", "url": "https://api.github.com/repos/borgbackup/borg/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 6, "created_at": "2016-06-04T21:18:18Z", "updated_at": "2016-06-11T01:01:09Z", "closed_at": "2016-06-11T01:01:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While analyzing #1130, I found a bug in borg check's internal \"resync\" code.\n\nIf an item metadata chunk is missing somehow, resync mode is triggered.\nWhile it is active, it skips byte-wise over input data as long as the metadata dict qualifier returns a negative result.\n\nThe qualifier works by looking directly at the bytes in the input data (which is msgpacked serialized data) and looks for the bytes that introduce a mapping (dict) and a bytestring (key name inside the dict).\n\nThe problem was that it only checked for fixmap and that is only used for metadata dicts up to 15 items. If an item had more metadata, map16 is used and the qualifier did not check for that and thus returned a false negative, skipping over the (valid) data.\n\nAnother (theoretical) problem is that it only checked for fixstr and that is only used for bytestrings up to 31 bytes. If a metadata dict key were longer than that, str16 (or str8 or str32) would be used and the qualifier would not check for that and thus return a false negative, skipping over the (valid) data. This is not a real problem for borg, as (currently and in the past) all dict keys are shorter than 32 bytes.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1126", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1126/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1126/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1126/events", "html_url": "https://github.com/borgbackup/borg/issues/1126", "id": 158410056, "node_id": "MDU6SXNzdWUxNTg0MTAwNTY=", "number": 1126, "title": "OS X: borg mount files are not accessible by finder", "user": {"login": "tristan-k", "id": 732025, "node_id": "MDQ6VXNlcjczMjAyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/732025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tristan-k", "html_url": "https://github.com/tristan-k", "followers_url": "https://api.github.com/users/tristan-k/followers", "following_url": "https://api.github.com/users/tristan-k/following{/other_user}", "gists_url": "https://api.github.com/users/tristan-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/tristan-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tristan-k/subscriptions", "organizations_url": "https://api.github.com/users/tristan-k/orgs", "repos_url": "https://api.github.com/users/tristan-k/repos", "events_url": "https://api.github.com/users/tristan-k/events{/privacy}", "received_events_url": "https://api.github.com/users/tristan-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 20, "created_at": "2016-06-03T16:56:12Z", "updated_at": "2016-10-03T11:05:24Z", "closed_at": "2016-07-07T02:02:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Mounting the borg repo works fine but the actual files stored inside are not accessible. In the mac os x finder (file browser) they all have a size of 0 Byte. Trying to copy one file outside the fuse volume results in a `Error -36`.\n\n```\n$ borg --version\nborg 1.0.4.dev273+ngbf5406d\n$ borg mount --foreground ~/Desktop/borg-repo ~/Desktop/BorgBackup\n```\n\n---\n\nThe bounty is for finding the root cause of this issue and showing a way to fix it.\nA PR with a fix would be welcome (if major work, bounty could be increased / new bounty filed for the code).\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/34843144-os-x-borg-mount-files-are-not-accessible-by-finder)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1125", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1125/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1125/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1125/events", "html_url": "https://github.com/borgbackup/borg/issues/1125", "id": 158409503, "node_id": "MDU6SXNzdWUxNTg0MDk1MDM=", "number": 1125, "title": "borg mount crashes with empty archive", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2016-06-03T16:52:58Z", "updated_at": "2016-10-03T11:05:23Z", "closed_at": "2016-07-31T00:11:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "if one tries to mount a completely empty archive, borg mount crashes.\n\nnote: usually this never happens as one does not have empty archives.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1121", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1121/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1121/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1121/events", "html_url": "https://github.com/borgbackup/borg/issues/1121", "id": 158393309, "node_id": "MDU6SXNzdWUxNTgzOTMzMDk=", "number": 1121, "title": "adapt Vagrantfile to new borg package directory location", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}, {"id": 453410391, "node_id": "MDU6TGFiZWw0NTM0MTAzOTE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/vagrant", "name": "vagrant", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-06-03T15:28:31Z", "updated_at": "2016-10-01T17:43:48Z", "closed_at": "2016-06-03T18:47:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Fix the vagrant file concerning the move to src/:\n\n```\nscript '/vagrant/borg/borg/borg/__main__.py' not found\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1078", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1078/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1078/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1078/events", "html_url": "https://github.com/borgbackup/borg/issues/1078", "id": 156127369, "node_id": "MDU6SXNzdWUxNTYxMjczNjk=", "number": 1078, "title": "socket causing crash (regression)", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 0, "created_at": "2016-05-21T23:57:23Z", "updated_at": "2016-05-22T11:38:23Z", "closed_at": "2016-05-22T11:38:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "current master branch code:\n\n```\nTraceback (most recent call last):\n  File \"/home/tw/w/borg/borg/archiver.py\", line 2156, in main\n    exit_code = archiver.run(args)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 2097, in run\n    return args.func(args)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 83, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 295, in do_create\n    create_inner(archive, cache)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 269, in create_inner\n    read_special=args.read_special, dry_run=dry_run, st=st)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 350, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 350, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 350, in _process\n    read_special=read_special, dry_run=dry_run)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 319, in _process\n    if get_flags(path, st) & stat.UF_NODUMP:\n  File \"borg/platform_linux.pyx\", line 92, in borg.platform_linux.get_flags (borg/platform_linux.c:2156)\n    fd = os.open(path, os.O_RDONLY|os.O_NONBLOCK|os.O_NOFOLLOW)\nOSError: [Errno 6] No such device or address: '/home/tw/w/xxx/run/gunicorn.sock'\n\nPlatform: Linux tux 4.5.4-tw1 #2 SMP Sun May 15 04:36:09 CEST 2016 x86_64 x86_64\nLinux: Ubuntu 16.04 xenial\nBorg: 1.0.4.dev210+ng1a02770  Python: CPython 3.5.1+\nPID: 5821  CWD: /home/tw/w/borg\nsys.argv: ['/home/tw/w/borg-env/bin/borg', 'create', '--progress', '--info', '--stats', '--compression', 'lz4', '/extra/repo::master', '/home/tw/w']\nSSH_ORIGINAL_COMMAND: None\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1078/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1069", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1069/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1069/events", "html_url": "https://github.com/borgbackup/borg/issues/1069", "id": 156034608, "node_id": "MDU6SXNzdWUxNTYwMzQ2MDg=", "number": 1069, "title": "fix capabilities extraction on linux", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 2, "created_at": "2016-05-20T19:27:44Z", "updated_at": "2017-01-04T00:27:41Z", "closed_at": "2016-05-20T19:29:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "when extracting files that have \"capabilities\" in the extended attributes (xattrs), the xattrs were extracted first and then a chown call was used to set the owner.\n\nchown has the side effects of killing the capabilities again, so the result was not as expected.\n\nchanging the order to first do chown and then set xattrs fixes this.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1064", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1064/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1064/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1064/events", "html_url": "https://github.com/borgbackup/borg/issues/1064", "id": 155797225, "node_id": "MDU6SXNzdWUxNTU3OTcyMjU=", "number": 1064, "title": "borg extract --stdout fails with TypeError: '_Chunk' does not support the buffer interface", "user": {"login": "zougloub", "id": 998040, "node_id": "MDQ6VXNlcjk5ODA0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/998040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zougloub", "html_url": "https://github.com/zougloub", "followers_url": "https://api.github.com/users/zougloub/followers", "following_url": "https://api.github.com/users/zougloub/following{/other_user}", "gists_url": "https://api.github.com/users/zougloub/gists{/gist_id}", "starred_url": "https://api.github.com/users/zougloub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zougloub/subscriptions", "organizations_url": "https://api.github.com/users/zougloub/orgs", "repos_url": "https://api.github.com/users/zougloub/repos", "events_url": "https://api.github.com/users/zougloub/events{/privacy}", "received_events_url": "https://api.github.com/users/zougloub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-05-19T17:55:46Z", "updated_at": "2016-05-24T21:11:03Z", "closed_at": "2016-05-24T21:11:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Easy one...\n\n```\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2127, in main\n    exit_code = archiver.run(args)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2077, in run\n    return args.func(args)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 82, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 92, in wrapper\n    return method(self, args, repository=repository, manifest=manifest, key=key, archive=archive, **kwargs)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 429, in do_extract\n    original_path=orig_path)\n  File \"/usr/lib64/python3.4/site-packages/borg/archive.py\", line 323, in extract_item\n    sys.stdout.buffer.write(data)\nTypeError: '_Chunk' does not support the buffer interface\n\nPlatform: Linux Cabochon 4.5.0-Vantage-dirty #1 SMP PREEMPT Tue Mar 29 13:02:33 EDT 2016 x86_64 Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz\nLinux: Gentoo Base System 2.2 \nBorg: 1.0.3.dev210+ng088bccc  Python: CPython 3.4.3\nPID: 30005  CWD: /home/cJ\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1063", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1063/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1063/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1063/events", "html_url": "https://github.com/borgbackup/borg/issues/1063", "id": 155796864, "node_id": "MDU6SXNzdWUxNTU3OTY4NjQ=", "number": 1063, "title": "caching repo uses large amounts of temp. disk space", "user": {"login": "zougloub", "id": 998040, "node_id": "MDQ6VXNlcjk5ODA0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/998040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zougloub", "html_url": "https://github.com/zougloub", "followers_url": "https://api.github.com/users/zougloub/followers", "following_url": "https://api.github.com/users/zougloub/following{/other_user}", "gists_url": "https://api.github.com/users/zougloub/gists{/gist_id}", "starred_url": "https://api.github.com/users/zougloub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zougloub/subscriptions", "organizations_url": "https://api.github.com/users/zougloub/orgs", "repos_url": "https://api.github.com/users/zougloub/repos", "events_url": "https://api.github.com/users/zougloub/events{/privacy}", "received_events_url": "https://api.github.com/users/zougloub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 7, "created_at": "2016-05-19T17:53:59Z", "updated_at": "2016-10-03T11:07:15Z", "closed_at": "2016-05-20T12:01:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Contexts (I think it's not super relevant, as I have another repo with another context and the same issue):\n1. An attic repository, containing incremental snapshots, done on a server which a high uptime and ECC memory. Made a copy, did a conversion.\n2. borg check passes without problem\n\nScenario: perform a \"tar c\" of the contents of the mount, just to read all the files.\nExpected result: borg mount doesn't crash, doesn't show errors, because `borg check` succeeded.\nActual result: \n\n`tar c` says:\n\n```\ntar: Removing leading `/' from member names\ntar: [...]/borg-mount/2015-09-10T07-50-24/[...]/filename: File shrank by 8532154 bytes; padding with zeros\ntar: [...]/borg-mount/2015-09-10T07-50-24/[...]/next-filename: Cannot stat: Transport endpoint is not connected\n```\n\n`borg mount` says:\n\n```\nLocal Exception.\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.4/site-packages/borg/remote.py\", line 437, in get_many\n    yield self.caching_repo.get(key)\n  File \"/usr/lib64/python3.4/site-packages/borg/repository.py\", line 450, in get\n    raise self.ObjectNotFound(id_, self.path) from None\nborg.repository.ObjectNotFound: (b'\\xd2u\\xe0\\xef\\xe0\\xfb\\xeb\\xde\\xdcVF-j\\xf6\\x1e\\xcf\\x81iW\\xb2\\xec\\xe2\\xec\\x8arv\\xae\\x18\\xa0\\xa4\\x86\\x02', '/tmp/borg-tmpnrievx_4')\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2127, in main\n    exit_code = archiver.run(args)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 2077, in run\n    return args.func(args)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 82, in wrapper\n    return method(self, args, repository=repository, **kwargs)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 716, in do_mount\n    operations.mount(args.mountpoint, args.options, args.foreground)\n  File \"/usr/lib64/python3.4/site-packages/borg/fuse.py\", line 281, in mount\n    signal = fuse_main()\n  File \"/usr/lib64/python3.4/site-packages/borg/fuse.py\", line 24, in fuse_main\n    return llfuse.main(workers=1)\n  File \"src/fuse_api.pxi\", line 337, in llfuse.main (src/llfuse.c:35111)\n  File \"src/handlers.pxi\", line 324, in llfuse.fuse_read (src/llfuse.c:14688)\n  File \"src/handlers.pxi\", line 325, in llfuse.fuse_read (src/llfuse.c:14638)\n  File \"/usr/lib64/python3.4/site-packages/borg/fuse.py\", line 245, in read\n    _, data = self.key.decrypt(id, self.repository.get(id))\n  File \"/usr/lib64/python3.4/site-packages/borg/remote.py\", line 409, in get\n    return next(self.get_many([key]))\n  File \"/usr/lib64/python3.4/site-packages/borg/remote.py\", line 441, in get_many\n    self.caching_repo.put(key, data)\n  File \"/usr/lib64/python3.4/site-packages/borg/repository.py\", line 468, in put\n    segment, offset = self.io.write_put(id, data)\n  File \"/usr/lib64/python3.4/site-packages/borg/repository.py\", line 706, in write_put\n    fd.write(b''.join((crc, header, id, data)))\n  File \"borg/platform_linux.pyx\", line 235, in borg.platform_linux.SyncFile.write (borg/platform_linux.c:5721)\nOSError: [Errno 28] No space left on device\n\nPlatform: Linux Cabochon 4.5.0-Vantage-dirty #1 SMP PREEMPT Tue Mar 29 13:02:33 EDT 2016 x86_64 Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz\nLinux: Gentoo Base System 2.2\nBorg: 1.0.3.dev210+ng088bccc  Python: CPython 3.4.3\nPID: 27885  CWD: /home/cJ\n```\n\nNote that here all is running on a faster consumer CPU, but I swear I have the same problem with ECC stuff. I have observed that borg mount file access is just significantly slower on the server.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1056", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1056/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1056/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1056/events", "html_url": "https://github.com/borgbackup/borg/issues/1056", "id": 155521157, "node_id": "MDU6SXNzdWUxNTU1MjExNTc=", "number": 1056, "title": "crash related to (non-borg) binary files in keys directory", "user": {"login": "christian-comsolit", "id": 6513131, "node_id": "MDQ6VXNlcjY1MTMxMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6513131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christian-comsolit", "html_url": "https://github.com/christian-comsolit", "followers_url": "https://api.github.com/users/christian-comsolit/followers", "following_url": "https://api.github.com/users/christian-comsolit/following{/other_user}", "gists_url": "https://api.github.com/users/christian-comsolit/gists{/gist_id}", "starred_url": "https://api.github.com/users/christian-comsolit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christian-comsolit/subscriptions", "organizations_url": "https://api.github.com/users/christian-comsolit/orgs", "repos_url": "https://api.github.com/users/christian-comsolit/repos", "events_url": "https://api.github.com/users/christian-comsolit/events{/privacy}", "received_events_url": "https://api.github.com/users/christian-comsolit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 6, "created_at": "2016-05-18T14:48:46Z", "updated_at": "2017-01-04T00:27:58Z", "closed_at": "2016-05-18T15:58:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "If i try to list/mount a remote repository i get this error:\n\n`Local Exception.`\n`Traceback (most recent call last):`\n`File \"borg/archiver.py\", line 1498, in main`\n`File \"borg/archiver.py\", line 1452, in run`\n`File \"borg/archiver.py\", line 74, in wrapper`\n`File \"borg/helpers.py\", line 95, in load`\n`File \"borg/key.py\", line 53, in key_factory`\n`File \"borg/key.py\", line 289, in detect`\n`File \"borg/key.py\", line 402, in find_key`\n`File \"/home/vagrant/.pyenv/versions/3.5.1/lib/python3.5/codecs.py\", line 321, in decode`\n`UnicodeDecodeError: 'utf-8' codec can't decode byte 0x9b in position 12: invalid start byte`\n\n`Platform: Linux xxx 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt25-2 (2016-04-08) x86_64`\n`Linux: debian 8.4`\n`Borg: 1.0.2  Python: CPython 3.5.1`\n\nI'm using the standalone binary version 1.0.2 on debian 8.4.0 (server and client) with locales configured as en_US.UTF-8.\nThe generated key file seems to be correctly encoded:\n`file -i` outputs \"us-ascii\" which according to http://stackoverflow.com/a/11303410 is correct.\n\nHas anybody a clue what could be the issue here?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1056/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1056/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1054", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1054/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1054/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1054/events", "html_url": "https://github.com/borgbackup/borg/issues/1054", "id": 155499799, "node_id": "MDU6SXNzdWUxNTU0OTk3OTk=", "number": 1054, "title": "check for platform_darwin.c missing", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 1, "created_at": "2016-05-18T13:21:55Z", "updated_at": "2016-05-18T16:08:33Z", "closed_at": "2016-05-18T16:08:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "darwin is missing here in setup.py:\n\n```\n        ..., platform_linux_source, platform_freebsd_source]):\n        raise ImportError('The GIT version of Borg needs Cython. Install Cython or use a released version.')\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1052", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1052/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1052/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1052/events", "html_url": "https://github.com/borgbackup/borg/pull/1052", "id": 155393746, "node_id": "MDExOlB1bGxSZXF1ZXN0NzA0NTM1OTY=", "number": 1052, "title": "Repository: fix commit tags being seen in data", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 6, "created_at": "2016-05-18T00:41:04Z", "updated_at": "2016-11-13T01:39:39Z", "closed_at": "2016-05-19T15:12:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/borgbackup/borg/pulls/1052", "html_url": "https://github.com/borgbackup/borg/pull/1052", "diff_url": "https://github.com/borgbackup/borg/pull/1052.diff", "patch_url": "https://github.com/borgbackup/borg/pull/1052.patch", "merged_at": "2016-05-19T15:12:52Z"}, "body": "I have a slightly different fix for master that doesn't destroy performance with larger segments (i.e. put commits in their own segment)\n\nProblem description: is_committed_segment() seeked to the end of a segment file and checked whether there is a COMMIT_TAG there. This can also be the case when a PUT ends with a structure that is a COMMIT_TAG and is thus no valid way to check for the commit state of a segment.\n\nThis is a luck-based bug. You'll need to back something up where a chunk ends with a commit tag (another borg repo) and then that has to end up at the end of a segment file and _then_ you'll need a kill/crash and _then_ you _can theoretically_ get an inconsistent repo (with some other conditions applying as well).\n\nNow:\n- Early segment magic check by iterator setup in iter_objects\n- Sanity check: Do we have a COMMIT_TAG at the end? (<-- this is also the fast-bail-out for practically all uncomitted segments)\n- If no: can't be committed\n- If yes: iterate objects, check if that's an actual commit tag\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1052/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1052/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1051", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1051/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1051/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1051/events", "html_url": "https://github.com/borgbackup/borg/issues/1051", "id": 155360400, "node_id": "MDU6SXNzdWUxNTUzNjA0MDA=", "number": 1051, "title": "cjk screen output formatting trouble", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-05-17T20:59:36Z", "updated_at": "2016-05-18T22:29:15Z", "closed_at": "2016-05-18T22:29:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "chinese, japanese, korean \"monospace\" terminal fonts use 2 cells per glyph, so using len(text) gives an incorrect value if text has cjk unicode code points.\n\nthis leads to wrong output in the `--progress` \"single line output\" - the amount of spaces to \"fill\" the line and erase previous output is computed wrongly.\n\nthere is https://pypi.python.org/pypi/wcwidth to compute the correct width.\n\n3 ideas:\n- just require it via setup.py\n- bundle it in borg.support\n- use a try / except ImportError and use a len(text) dummy if it can't be imported.\n\nScreenshot: ![borg_jap](https://cloud.githubusercontent.com/assets/356103/15339816/7b97a3dc-1c86-11e6-8be9-a31e366b7370.png)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1051/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/1027", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/1027/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/1027/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/1027/events", "html_url": "https://github.com/borgbackup/borg/issues/1027", "id": 153605681, "node_id": "MDU6SXNzdWUxNTM2MDU2ODE=", "number": 1027, "title": "prune: does not accept format tags (like \"create\")", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/20", "html_url": "https://github.com/borgbackup/borg/milestone/20", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/20/labels", "id": 1774460, "node_id": "MDk6TWlsZXN0b25lMTc3NDQ2MA==", "number": 20, "title": "1.0.4 fixes for 1.0-maint", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 44, "state": "closed", "created_at": "2016-05-18T16:36:49Z", "updated_at": "2016-07-07T03:07:40Z", "due_on": "2016-07-08T07:00:00Z", "closed_at": "2016-07-07T03:07:40Z"}, "comments": 4, "created_at": "2016-05-07T17:10:22Z", "updated_at": "2016-06-25T15:18:44Z", "closed_at": "2016-06-25T15:18:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Works:\n\n```\nborg create repo::{hostname}-{now}\n```\n\nDoes not:\n\n```\nborg prune repo --prefix {hostname}- ...\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/1027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/1027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/997", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/997/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/997/events", "html_url": "https://github.com/borgbackup/borg/issues/997", "id": 151994327, "node_id": "MDU6SXNzdWUxNTE5OTQzMjc=", "number": 997, "title": "prune - ignore .checkpoint archives", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 1, "created_at": "2016-04-30T00:40:13Z", "updated_at": "2016-05-02T01:14:06Z", "closed_at": "2016-05-02T01:14:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "currently, pruning works just based on the archive timestamp.\n\nit does not consider the archive name except for `--prefix`, so it does not specially treat the .checkpoint archives.\n\ni think this can lead to unwanted behaviour in such a case:\n\n```\nbackup-2015-12-31-21:00:00\nbackup-2015-12-31-23:00:00.checkpoint\n```\n\nObviously, archive names are created here so that they include the datetime - a popular way to avoid duplicate names. The 21:00 backup worked, but it seems the 23:00 backup was interrupted.\n\nAs pruning always keeps the last backup of a day / week / month / year, it would keep the interrupted backup and delete the complete backup.\n\nfix: ignore checkpoints in pruning.\n\nbranch: 1.0-maint (avoid data loss)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/997/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/942", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/942/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/942/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/942/events", "html_url": "https://github.com/borgbackup/borg/issues/942", "id": 149277401, "node_id": "MDU6SXNzdWUxNDkyNzc0MDE=", "number": 942, "title": "mix of neg. & pos. --keep-xxx may trigger validation error", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 0, "created_at": "2016-04-18T21:28:01Z", "updated_at": "2016-04-18T23:18:25Z", "closed_at": "2016-04-18T23:18:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It is valid to give positive or negative numbers X for `--keep-TIMEUNIT X`.\n\nA validator was implemented badly so that if you gave e.g. -1 once and +1 once (or in general: if the sum of them all was zero), it triggered a validation error telling you that you have to give at least one of these options.\n\nWorkaround: as any negative value means the same, just give another negative value so that the sum is not 0.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/942/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/933", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/933/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/933/events", "html_url": "https://github.com/borgbackup/borg/issues/933", "id": 148967423, "node_id": "MDU6SXNzdWUxNDg5Njc0MjM=", "number": 933, "title": "missing lzma support in borg-macosx64 binary", "user": {"login": "aravindhsampath", "id": 1080908, "node_id": "MDQ6VXNlcjEwODA5MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1080908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aravindhsampath", "html_url": "https://github.com/aravindhsampath", "followers_url": "https://api.github.com/users/aravindhsampath/followers", "following_url": "https://api.github.com/users/aravindhsampath/following{/other_user}", "gists_url": "https://api.github.com/users/aravindhsampath/gists{/gist_id}", "starred_url": "https://api.github.com/users/aravindhsampath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aravindhsampath/subscriptions", "organizations_url": "https://api.github.com/users/aravindhsampath/orgs", "repos_url": "https://api.github.com/users/aravindhsampath/repos", "events_url": "https://api.github.com/users/aravindhsampath/events{/privacy}", "received_events_url": "https://api.github.com/users/aravindhsampath/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2016-04-17T16:23:19Z", "updated_at": "2016-04-24T00:37:04Z", "closed_at": "2016-04-24T00:37:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "borg-macosx64 1.0.0 binary\n\nI'm trying to create a repo with lzma compression as per the docs. \n\n`borg init --encryption=keyfile ~/borg_backup/europe_photos`\n\n`borg create -s -p --exclude-caches -C lzma ~/borg_backup/europe_photos/::17-apr-2015 ~/Pictures/Europe_trip_pass#1/`\nI get: \n\n```\nEnter passphrase for key /Users/asampath/.config/borg/keys/Users_asampath_borg_backup_europe_photos:\nLocal Exception.\nTraceback (most recent call last):\n  File \"borg/archiver.py\", line 1466, in main\n  File \"borg/archiver.py\", line 1420, in run\n  File \"borg/archiver.py\", line 211, in do_create\n  File \"borg/compress.pyx\", line 183, in borg.compress.Compressor.__init__ (borg/compress.c:3806)\n  File \"borg/compress.pyx\", line 173, in borg.compress.get_compressor (borg/compress.c:3651)\n  File \"borg/compress.pyx\", line 122, in borg.compress.LZMA.__init__ (borg/compress.c:2435)\nValueError: No lzma support found.\n\nPlatform: Darwin Aravindhs-MacBook-Pro.local 15.4.0 Darwin Kernel Version 15.4.0: Fri Feb 26 22:08:05 PST 2016; root:xnu-3248.40.184~3/RELEASE_X86_64 x86_64 i386\nBorg: 1.0.0  Python: Python 3.5.1\nPID: 24599  CWD: /Users/asampath\nsys.argv: ['borg', 'create', '-s', '-p', '--exclude-caches', '-C', 'lzma', '/Users/asampath/borg_backup/europe_photos/::17-apr-2015', '/Users/asampath/Pictures/Europe_trip_pass#1/']\nSSH_ORIGINAL_COMMAND: None\n```\n\nI do have lzma installed and available.\n\n```\nAravindhs-MacBook-Pro:~ asampath$ lama -V\nxz (XZ Utils) 5.2.2\nliblzma 5.2.2\nAravindhs-MacBook-Pro:~ asampath$ pip show pylzma\n\n---\nMetadata-Version: 2.0\nName: pylzma\nVersion: 0.4.8\nSummary: Python bindings for the LZMA library by Igor Pavlov.\nHome-page: http://www.joachim-bauch.de/projects/pylzma/\nAuthor: Joachim Bauch\nAuthor-email: mail@joachim-bauch.de\nInstaller: pip\nLicense: LGPL\nLocation: /usr/local/lib/python2.7/site-packages\nRequires:\nClassifiers:\n  Development Status :: 5 - Production/Stable\n  Programming Language :: Python\n  Programming Language :: Python :: 3\n  Topic :: Software Development :: Libraries :: Python Modules\n  Intended Audience :: Developers\n  License :: OSI Approved :: GNU Library or Lesser General Public License (LGPL)\n  Operating System :: OS Independent\n```\n\nCan anybody help me figure this out?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/921", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/921/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/921/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/921/events", "html_url": "https://github.com/borgbackup/borg/issues/921", "id": 148882420, "node_id": "MDU6SXNzdWUxNDg4ODI0MjA=", "number": 921, "title": "Borg does not extract Linux capabilities", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/18", "html_url": "https://github.com/borgbackup/borg/milestone/18", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/18/labels", "id": 1711361, "node_id": "MDk6TWlsZXN0b25lMTcxMTM2MQ==", "number": 18, "title": "1.0.3 fixes for 1.0-maint", "description": "fixes only, really! needs to go into ubuntu stable.\r\n\r\nSystems check at  938628f\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* freebsd64\r\n* wheezy32\r\n* wheezy64\r\n* OSX \r\n* netbsd64 ok (enkore) one test flaky as before (the mtime issue)\r\n* trusty64 ok (enkore)\r\n* jessie64 ok (enkore)\r\n* jessie ppc py34 ok (enkore)\r\n* arch64 py34+py35 ok (enkore)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-04-16T12:52:23Z", "updated_at": "2016-05-20T19:29:20Z", "due_on": "2016-05-20T07:00:00Z", "closed_at": "2016-05-20T18:28:50Z"}, "comments": 1, "created_at": "2016-04-16T19:29:10Z", "updated_at": "2017-01-04T00:28:14Z", "closed_at": "2016-04-17T23:02:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While they are stored correctly upon archive creation, they are not restored when an archive is extracted. The reason for this is that the extended file attributes - which includes the `security.capabilities` attribute used by Linux to store capabilities - are restored before a `chown` call, which deletes the `security.capabilities` attribute again.\n\nExample session reproducing the issue:\n\n```\n[root@tiger xyz]# borg create testrepo::ping /usr/bin/ping\n[root@tiger xyz]# mkdir output\n[root@tiger xyz]# cd output\n[root@tiger output]# borg extract ../testrepo::ping\n[root@tiger output]# getfattr -d -m- usr/bin/ping\n[root@tiger output]# getfattr -d -m- /usr/bin/ping\ngetfattr: Removing leading '/' from absolute path names\n# file: usr/bin/ping\nsecurity.capability=0sAQAAAgAgAAAAAAAAAAAAAAAAAAA=\n[root@tiger output]# getcap usr/bin/ping\n[root@tiger output]# getcap /usr/bin/ping\n/usr/bin/ping = cap_net_raw+ep\n```\n\nIn this case the extracted `ping` would not work for normal users.\n\nFix in #920\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/921/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/889", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/889/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/889/events", "html_url": "https://github.com/borgbackup/borg/issues/889", "id": 147578489, "node_id": "MDU6SXNzdWUxNDc1Nzg0ODk=", "number": 889, "title": "malfunction on big-endian archs", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/16", "html_url": "https://github.com/borgbackup/borg/milestone/16", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/16/labels", "id": 1695511, "node_id": "MDk6TWlsZXN0b25lMTY5NTUxMQ==", "number": 16, "title": "1.0.2 fixes for 1.0-maint branch", "description": "Systems check (2) for 8662202:\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* wheezy32 (enkore)\r\n  * ArchiverTestCase.test_overwrite fail\r\n  * ArchiverTestCaseBinary.test_basic_functionality fail\r\n  * [Log](https://gist.github.com/enkore/f683a754dc16941756b8a1079e4a29f6)\r\n  * Same test failures on wheezy64\r\n  * Both for py34 and py35\r\n  * Failing delta is mode, uid, gid\r\n* wheezy64 **same as wheezy32** (enkore)\r\n* trusty64 **ok** (enkore)\r\n* jessie64 **ok** (enkore)\r\n* netbsd64 **1 fail, ArchiverTestCase.test_overwrite** (first diff element 7) = **ok** (known flaky) (enkore)\r\n* jessie ppc py34 **ok** (enkore)\r\n* arch64 py35 **ok** (enkore)\r\n* OSX ?\r\n\r\nSystems check (1):\r\n\r\n* netbsd64 ok (tw)\r\n* trusty64 ok (tw)\r\n* jessie64 ok (tw)\r\n* openbsd - vagrant machine broken, unable to test\r\n* jessie ppc py34 ok (enkore)\r\n* freebsd64 py34 ok (tw)\r\n* arch64 py35 ok (enkore)\r\n* OSX (?)\r\n\r\nGreen across the board.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2016-04-09T20:49:49Z", "updated_at": "2016-04-16T12:51:35Z", "due_on": null, "closed_at": "2016-04-16T12:51:35Z"}, "comments": 5, "created_at": "2016-04-11T22:52:52Z", "updated_at": "2016-04-15T01:13:04Z", "closed_at": "2016-04-15T01:13:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "some refcount computations might go very wrong due to byte-order issues on big-endian architectures (like ppc, mips, s390, sparc, m68k, ...) - often denoted as \"BE\" or \"*eb\".\n\n**do not use borg on these architectures for now until these issues have been fixed, repository corruption and data loss is not unlikely.** if you already have begun using borg on big-endian arch, never delete or prune anything from the existing repository and stop using it until a fix is available.\n\nthis issue **does not affect the widespread little-endian archs like x86, x64 / amd64 and it also does not affect bi-endian archs when run in little-endian mode (like often the case for ARM and also for mipsel).** These are usually denoted as \"LE\" or \"*el\".\n\nwe didn't encounter these issues before (in unit tests, in practical testing) as big-endian machines are rather rare nowadays (and even bi-endian archs are mostly run in little-endian mode). borg tried to support different endianness, but it didn't do it at all required places.\n\n@verygreen can you check hashindex merge on ppc64? just create some remote archives, remove the local cache and let it rebuild it. maybe you find more things going very wrong.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/32843802-malfunction-on-big-endian-archs)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/889/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/886", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/886/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/886/events", "html_url": "https://github.com/borgbackup/borg/issues/886", "id": 147523036, "node_id": "MDU6SXNzdWUxNDc1MjMwMzY=", "number": 886, "title": "borg info incorrect output on ppc64", "user": {"login": "verygreen", "id": 625925, "node_id": "MDQ6VXNlcjYyNTkyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/625925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/verygreen", "html_url": "https://github.com/verygreen", "followers_url": "https://api.github.com/users/verygreen/followers", "following_url": "https://api.github.com/users/verygreen/following{/other_user}", "gists_url": "https://api.github.com/users/verygreen/gists{/gist_id}", "starred_url": "https://api.github.com/users/verygreen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/verygreen/subscriptions", "organizations_url": "https://api.github.com/users/verygreen/orgs", "repos_url": "https://api.github.com/users/verygreen/repos", "events_url": "https://api.github.com/users/verygreen/events{/privacy}", "received_events_url": "https://api.github.com/users/verygreen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/16", "html_url": "https://github.com/borgbackup/borg/milestone/16", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/16/labels", "id": 1695511, "node_id": "MDk6TWlsZXN0b25lMTY5NTUxMQ==", "number": 16, "title": "1.0.2 fixes for 1.0-maint branch", "description": "Systems check (2) for 8662202:\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* wheezy32 (enkore)\r\n  * ArchiverTestCase.test_overwrite fail\r\n  * ArchiverTestCaseBinary.test_basic_functionality fail\r\n  * [Log](https://gist.github.com/enkore/f683a754dc16941756b8a1079e4a29f6)\r\n  * Same test failures on wheezy64\r\n  * Both for py34 and py35\r\n  * Failing delta is mode, uid, gid\r\n* wheezy64 **same as wheezy32** (enkore)\r\n* trusty64 **ok** (enkore)\r\n* jessie64 **ok** (enkore)\r\n* netbsd64 **1 fail, ArchiverTestCase.test_overwrite** (first diff element 7) = **ok** (known flaky) (enkore)\r\n* jessie ppc py34 **ok** (enkore)\r\n* arch64 py35 **ok** (enkore)\r\n* OSX ?\r\n\r\nSystems check (1):\r\n\r\n* netbsd64 ok (tw)\r\n* trusty64 ok (tw)\r\n* jessie64 ok (tw)\r\n* openbsd - vagrant machine broken, unable to test\r\n* jessie ppc py34 ok (enkore)\r\n* freebsd64 py34 ok (tw)\r\n* arch64 py35 ok (enkore)\r\n* OSX (?)\r\n\r\nGreen across the board.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2016-04-09T20:49:49Z", "updated_at": "2016-04-16T12:51:35Z", "due_on": null, "closed_at": "2016-04-16T12:51:35Z"}, "comments": 12, "created_at": "2016-04-11T19:06:22Z", "updated_at": "2017-01-04T00:28:36Z", "closed_at": "2016-04-11T21:43:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using ppc64 Fedora22 with self-compiled python-msgpack 0.4.7 backing up to x86 box and self-compiled borg 1.0.0 (with pip), I have this:\n\n```\n                       Original size      Compressed size    Deduplicated size\nThis archive:               15.07 GB              8.63 GB             62.27 MB\nAll archives:                4.50 EB             -7.23 EB            -12.31 TB\n\n                       Unique chunks         Total chunks\nChunk index:                  274262       10289249058816\n```\n\nMeanwhile same archive accessed from the x86 box locally yields:\n\n```\n                       Original size      Compressed size    Deduplicated size\nThis archive:               15.07 GB              8.63 GB             62.27 MB\nAll archives:               29.93 GB             17.22 GB              8.18 GB\n\n                       Unique chunks         Total chunks\nChunk index:                  274262               618151\n```\n\nApparently the problem does not have anything to do with cross-endianness communication too as it's reproduceable locally as well:\n\n```\n[root@powermac ~]# borg init --encryption none /tmp/backup\n[root@powermac ~]# borg create /tmp/backup::first /etc/\n[root@powermac ~]# touch /etc/file\n[root@powermac ~]# borg create /tmp/backup::second /etc/\n[root@powermac ~]# borg info /tmp/backup::second\nName: second\nFingerprint: fe9ba71131e7d07915369259c01a7a448f09fd727c9ed91121e399c25c19eaa6\nHostname: powermac.localnet\nUsername: root\nTime (start): Mon, 2016-04-11 15:04:50\nTime (end):   Mon, 2016-04-11 15:04:51\nCommand line: /usr/bin/borg create /tmp/backup::second /etc/\nNumber of files: 2013\n\n                       Original size      Compressed size    Deduplicated size\nThis archive:               25.58 MB             25.59 MB            498.40 kB\nAll archives:                6.86 EB              8.11 EB            331.42 GB\n\n                       Unique chunks         Total chunks\nChunk index:                    1965          67813507072\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/886/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/874", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/874/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/874/events", "html_url": "https://github.com/borgbackup/borg/issues/874", "id": 147228803, "node_id": "MDU6SXNzdWUxNDcyMjg4MDM=", "number": 874, "title": "\"borg delete --cache-only\" does not work if cache is newer than repository", "user": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/16", "html_url": "https://github.com/borgbackup/borg/milestone/16", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/16/labels", "id": 1695511, "node_id": "MDk6TWlsZXN0b25lMTY5NTUxMQ==", "number": 16, "title": "1.0.2 fixes for 1.0-maint branch", "description": "Systems check (2) for 8662202:\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* wheezy32 (enkore)\r\n  * ArchiverTestCase.test_overwrite fail\r\n  * ArchiverTestCaseBinary.test_basic_functionality fail\r\n  * [Log](https://gist.github.com/enkore/f683a754dc16941756b8a1079e4a29f6)\r\n  * Same test failures on wheezy64\r\n  * Both for py34 and py35\r\n  * Failing delta is mode, uid, gid\r\n* wheezy64 **same as wheezy32** (enkore)\r\n* trusty64 **ok** (enkore)\r\n* jessie64 **ok** (enkore)\r\n* netbsd64 **1 fail, ArchiverTestCase.test_overwrite** (first diff element 7) = **ok** (known flaky) (enkore)\r\n* jessie ppc py34 **ok** (enkore)\r\n* arch64 py35 **ok** (enkore)\r\n* OSX ?\r\n\r\nSystems check (1):\r\n\r\n* netbsd64 ok (tw)\r\n* trusty64 ok (tw)\r\n* jessie64 ok (tw)\r\n* openbsd - vagrant machine broken, unable to test\r\n* jessie ppc py34 ok (enkore)\r\n* freebsd64 py34 ok (tw)\r\n* arch64 py35 ok (enkore)\r\n* OSX (?)\r\n\r\nGreen across the board.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2016-04-09T20:49:49Z", "updated_at": "2016-04-16T12:51:35Z", "due_on": null, "closed_at": "2016-04-16T12:51:35Z"}, "comments": 0, "created_at": "2016-04-10T14:18:37Z", "updated_at": "2016-04-11T16:12:55Z", "closed_at": "2016-04-11T16:12:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "... but it probably should work.\n\n```\n$ borg delete -c somerepo\nCache is newer than repository, refusing to continue\nexit 2\n$\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/873", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/873/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/873/events", "html_url": "https://github.com/borgbackup/borg/issues/873", "id": 147228785, "node_id": "MDU6SXNzdWUxNDcyMjg3ODU=", "number": 873, "title": "borg create --one-file-system traverses into other filesystems", "user": {"login": "bket", "id": 1864835, "node_id": "MDQ6VXNlcjE4NjQ4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1864835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bket", "html_url": "https://github.com/bket", "followers_url": "https://api.github.com/users/bket/followers", "following_url": "https://api.github.com/users/bket/following{/other_user}", "gists_url": "https://api.github.com/users/bket/gists{/gist_id}", "starred_url": "https://api.github.com/users/bket/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bket/subscriptions", "organizations_url": "https://api.github.com/users/bket/orgs", "repos_url": "https://api.github.com/users/bket/repos", "events_url": "https://api.github.com/users/bket/events{/privacy}", "received_events_url": "https://api.github.com/users/bket/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/16", "html_url": "https://github.com/borgbackup/borg/milestone/16", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/16/labels", "id": 1695511, "node_id": "MDk6TWlsZXN0b25lMTY5NTUxMQ==", "number": 16, "title": "1.0.2 fixes for 1.0-maint branch", "description": "Systems check (2) for 8662202:\r\n\r\n* openbsd - vagrant machine broken, unable to test\r\n* wheezy32 (enkore)\r\n  * ArchiverTestCase.test_overwrite fail\r\n  * ArchiverTestCaseBinary.test_basic_functionality fail\r\n  * [Log](https://gist.github.com/enkore/f683a754dc16941756b8a1079e4a29f6)\r\n  * Same test failures on wheezy64\r\n  * Both for py34 and py35\r\n  * Failing delta is mode, uid, gid\r\n* wheezy64 **same as wheezy32** (enkore)\r\n* trusty64 **ok** (enkore)\r\n* jessie64 **ok** (enkore)\r\n* netbsd64 **1 fail, ArchiverTestCase.test_overwrite** (first diff element 7) = **ok** (known flaky) (enkore)\r\n* jessie ppc py34 **ok** (enkore)\r\n* arch64 py35 **ok** (enkore)\r\n* OSX ?\r\n\r\nSystems check (1):\r\n\r\n* netbsd64 ok (tw)\r\n* trusty64 ok (tw)\r\n* jessie64 ok (tw)\r\n* openbsd - vagrant machine broken, unable to test\r\n* jessie ppc py34 ok (enkore)\r\n* freebsd64 py34 ok (tw)\r\n* arch64 py35 ok (enkore)\r\n* OSX (?)\r\n\r\nGreen across the board.", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2016-04-09T20:49:49Z", "updated_at": "2016-04-16T12:51:35Z", "due_on": null, "closed_at": "2016-04-16T12:51:35Z"}, "comments": 6, "created_at": "2016-04-10T14:18:15Z", "updated_at": "2016-04-15T01:13:33Z", "closed_at": "2016-04-15T01:13:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running borg 1.0.1 on OpenBSD 5.9 with --one-file-system traverses excluded mount points.\n\nExpected behaviour of 'borg create --one-file-system /' is that all mounts excluding '/' are ignored. On OpenBSD this is not the case and all mount points are traversed and back-upped. Workaround is to use --exclude /mountpoint1 --exclude /mountpoint2.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/844", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/844/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/844/events", "html_url": "https://github.com/borgbackup/borg/issues/844", "id": 146143623, "node_id": "MDU6SXNzdWUxNDYxNDM2MjM=", "number": 844, "title": "test crash on freebsd ", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 453410391, "node_id": "MDU6TGFiZWw0NTM0MTAzOTE=", "url": "https://api.github.com/repos/borgbackup/borg/labels/vagrant", "name": "vagrant", "color": "f9d0c4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/15", "html_url": "https://github.com/borgbackup/borg/milestone/15", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/15/labels", "id": 1594973, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3Mw==", "number": 15, "title": "1.0.1 - fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-02-20T19:34:19Z", "updated_at": "2017-05-07T15:09:08Z", "due_on": "2016-04-09T07:00:00Z", "closed_at": "2016-04-09T15:38:15Z"}, "comments": 4, "created_at": "2016-04-05T23:59:05Z", "updated_at": "2016-10-01T17:43:48Z", "closed_at": "2016-04-06T21:43:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Testing the borg binary runs into an issue on freebsd:\n\n```\n==> freebsd64: ___________________ ArchiverTestCaseBinary.test_delete_repo ____________________\n==> freebsd64: self = <borg.testsuite.archiver.ArchiverTestCaseBinary testMethod=test_delete_repo>\n==> freebsd64:     def test_delete_repo(self):\n==> freebsd64:         self.create_regular_file('file1', size=1024 * 80)\n==> freebsd64:         self.create_regular_file('dir2/file2', size=1024 * 80)\n==> freebsd64:         self.cmd('init', self.repository_location)\n==> freebsd64:         self.cmd('create', self.repository_location + '::test', 'input')\n==> freebsd64:         self.cmd('create', self.repository_location + '::test.2', 'input')\n==> freebsd64:         os.environ['BORG_DELETE_I_KNOW_WHAT_I_AM_DOING'] = 'no'\n==> freebsd64:         self.cmd('delete', self.repository_location, exit_code=2)\n==> freebsd64: >       self.archiver.exit_code = 0\n==> freebsd64: E       AttributeError: 'NoneType' object has no attribute 'exit_code'\n==> freebsd64: py34/lib/python3.4/site-packages/borg/testsuite/archiver.py:736: AttributeError\n==> freebsd64: ======= 1 failed, 441 passed, 112 skipped, 3 xpassed in 2917.08 seconds ========\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/804", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/804/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/804/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/804/events", "html_url": "https://github.com/borgbackup/borg/issues/804", "id": 143768349, "node_id": "MDU6SXNzdWUxNDM3NjgzNDk=", "number": 804, "title": "failing hashindex tests on netbsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653080173, "node_id": "MDU6TGFiZWw2NTMwODAxNzM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20hashindex", "name": "c: hashindex", "color": "9400D3", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/15", "html_url": "https://github.com/borgbackup/borg/milestone/15", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/15/labels", "id": 1594973, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3Mw==", "number": 15, "title": "1.0.1 - fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-02-20T19:34:19Z", "updated_at": "2017-05-07T15:09:08Z", "due_on": "2016-04-09T07:00:00Z", "closed_at": "2016-04-09T15:38:15Z"}, "comments": 2, "created_at": "2016-03-27T02:03:23Z", "updated_at": "2017-07-23T10:32:27Z", "closed_at": "2016-03-27T23:14:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've bisected the issue and this is the changeset breaking the tests: https://github.com/borgbackup/borg/commit/f63be633470128a84a2640cd3202d28c62223e21\n\n@pyhalov can you fix it in a way so it does not break netbsd (64bit)?\n\n`py.test -k hashindex` shows the failing tests.\n\nI think the issue is that you check for _BIG_ENDIAN or _LITTLE_ENDIAN being defined. They are both defined on netbsd (and have a 4321, 1234 value).\n\nhttp://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/sys/sys/endian.h\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/804/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/773", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/773/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/773/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/773/events", "html_url": "https://github.com/borgbackup/borg/issues/773", "id": 142070032, "node_id": "MDU6SXNzdWUxNDIwNzAwMzI=", "number": 773, "title": "borg client waiting forever to acquire the lock", "user": {"login": "jperville", "id": 834791, "node_id": "MDQ6VXNlcjgzNDc5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/834791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jperville", "html_url": "https://github.com/jperville", "followers_url": "https://api.github.com/users/jperville/followers", "following_url": "https://api.github.com/users/jperville/following{/other_user}", "gists_url": "https://api.github.com/users/jperville/gists{/gist_id}", "starred_url": "https://api.github.com/users/jperville/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jperville/subscriptions", "organizations_url": "https://api.github.com/users/jperville/orgs", "repos_url": "https://api.github.com/users/jperville/repos", "events_url": "https://api.github.com/users/jperville/events{/privacy}", "received_events_url": "https://api.github.com/users/jperville/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/15", "html_url": "https://github.com/borgbackup/borg/milestone/15", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/15/labels", "id": 1594973, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3Mw==", "number": 15, "title": "1.0.1 - fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-02-20T19:34:19Z", "updated_at": "2017-05-07T15:09:08Z", "due_on": "2016-04-09T07:00:00Z", "closed_at": "2016-04-09T15:38:15Z"}, "comments": 8, "created_at": "2016-03-19T15:15:17Z", "updated_at": "2016-03-19T21:05:07Z", "closed_at": "2016-03-19T21:02:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have been experimenting with borg 1.0.0 and I am wondering how locking is supposed to work.\n\nI have 2 computers being backed up to the same shared repository over SSH (eg. 192.168.0.1:/var/tmp/mybackup').\n\nEach client is run like this: `borg create --lock-wait=10000 [lots of --excludes] 192.168.0.1:/var/tmp/mybackup::$(hostname)-$(date '+%Y-%m-%d_%H:%M:%S' ) /`\n\nWhen I start backup at the same time on all clients, only 1 client can start the backup and the others are waiting on the lock. So far so good. But when the first client finishes its backup then I expect the next client to acquire the lock yet all stay stuck waiting on the lock!\n\nHere is what `ps aux | grep borg` displays on the backup server:\n\n``` sh\nroot@backupserver:/etc# ps aux | grep borg\nroot     19833  0.0  0.0  93012 27412 ?        Ss   15:46   0:00 /usr/bin/python3 /usr/local/bin/borg serve --umask=077 --info\n```\n\nI have to CTRL-C the waiting clients then restart them manually; then again only the first to acquire the lock can complete, all other clients stay stuck.\n\nWorse, the 'borg serve' processes on the server keep running, even after I CTRL-C out of the clients.\n\nAm I doing anything wrong?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/773/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/761", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/761/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/761/events", "html_url": "https://github.com/borgbackup/borg/issues/761", "id": 141560276, "node_id": "MDU6SXNzdWUxNDE1NjAyNzY=", "number": 761, "title": "Extracting archive with hard-linked files and --strip-components fails", "user": {"login": "snhrdt", "id": 21608, "node_id": "MDQ6VXNlcjIxNjA4", "avatar_url": "https://avatars.githubusercontent.com/u/21608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snhrdt", "html_url": "https://github.com/snhrdt", "followers_url": "https://api.github.com/users/snhrdt/followers", "following_url": "https://api.github.com/users/snhrdt/following{/other_user}", "gists_url": "https://api.github.com/users/snhrdt/gists{/gist_id}", "starred_url": "https://api.github.com/users/snhrdt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snhrdt/subscriptions", "organizations_url": "https://api.github.com/users/snhrdt/orgs", "repos_url": "https://api.github.com/users/snhrdt/repos", "events_url": "https://api.github.com/users/snhrdt/events{/privacy}", "received_events_url": "https://api.github.com/users/snhrdt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/15", "html_url": "https://github.com/borgbackup/borg/milestone/15", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/15/labels", "id": 1594973, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3Mw==", "number": 15, "title": "1.0.1 - fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-02-20T19:34:19Z", "updated_at": "2017-05-07T15:09:08Z", "due_on": "2016-04-09T07:00:00Z", "closed_at": "2016-04-09T15:38:15Z"}, "comments": 4, "created_at": "2016-03-17T11:48:40Z", "updated_at": "2017-01-04T00:29:23Z", "closed_at": "2016-03-17T23:46:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use borg to backup dovecot maildirs. Dovecot uses hard-links for copied mail to avoid storing messages multiple times if users copy them.\n\nWhen you restore an archive with a backup of a Dovecot maildir and that maildir contains hard-links, the restore works just fine. Look at this example of a restored mail message that has been copied by the user from the inbox to some other folder:\n\n`root@node4:/tmp# ls -l /tmp/large/vmail/somedomain.com/someuser/.Newsletter.Logistics\\ Viewpoints/cur/1457623913.M965480P3612*`\n\n`-rw-r--r-- 2 vmail vmail 59K Mar 10 15:31 /tmp/large/vmail/somedomain/someuser/.Newsletter.Logistics Viewpoints/cur/1457623913.M965480P3612.node4,S=59664,W=60637:2,Sab`\n\nNotice the two links to this file.\n\nThe same message can be found in the restored inbox of this user, and it is hard-linked to the same file on disk. Perfect!\n\nNow, let's use borg's great --strip-components feature, as we really do not care for all that prefixed stuff and only want to restore the somedomain part of the archive:\n\n`root@node4:/tmp# time borg extract --verbose --sparse --strip-components 2 /path-to-borg-repo/vmail.borg::vmail.2016-03-17.05-00 large/vmail/somedomain`\n\nThe extraction works fine in general, but it complains about missing directories or files when trying to make the hard-links contained in the archive:\n\n`large/vmail/somedomain/someuser/cur/1457623913.M965480P3612.node4,S=59664,W=60637:2,STac: [Errno 2] No such file or directory: '/tmp/large/vmail/somedomain/someuser/.Newsletter.Logistics Viewpoints/cur/1457623913.M965480P3612.node4,S=59664,W=60637:2,Sab' -> '/tmp/somedomain/someuser/cur/1457623913.M965480P3612.node4,S=59664,W=60637:2,STac'`\n\nTo me, it seems that the --strip-components option is not taken into account when computing the source and destination for hard-linking files.\n\nPlease let me know if you need any more information or clarification.\n\nThanks for working on borg - it is an awesome piece of backup software!\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/761/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/748", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/748/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/748/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/748/events", "html_url": "https://github.com/borgbackup/borg/issues/748", "id": 140719169, "node_id": "MDU6SXNzdWUxNDA3MTkxNjk=", "number": 748, "title": "Borg silently skips disk I/O errors and includes truncated files into archive", "user": {"login": "seambeat", "id": 2095662, "node_id": "MDQ6VXNlcjIwOTU2NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2095662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seambeat", "html_url": "https://github.com/seambeat", "followers_url": "https://api.github.com/users/seambeat/followers", "following_url": "https://api.github.com/users/seambeat/following{/other_user}", "gists_url": "https://api.github.com/users/seambeat/gists{/gist_id}", "starred_url": "https://api.github.com/users/seambeat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seambeat/subscriptions", "organizations_url": "https://api.github.com/users/seambeat/orgs", "repos_url": "https://api.github.com/users/seambeat/repos", "events_url": "https://api.github.com/users/seambeat/events{/privacy}", "received_events_url": "https://api.github.com/users/seambeat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 211516348, "node_id": "MDU6TGFiZWwyMTE1MTYzNDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/corruption", "name": "corruption", "color": "ff0000", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "enkore", "id": 1330164, "node_id": "MDQ6VXNlcjEzMzAxNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1330164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enkore", "html_url": "https://github.com/enkore", "followers_url": "https://api.github.com/users/enkore/followers", "following_url": "https://api.github.com/users/enkore/following{/other_user}", "gists_url": "https://api.github.com/users/enkore/gists{/gist_id}", "starred_url": "https://api.github.com/users/enkore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enkore/subscriptions", "organizations_url": "https://api.github.com/users/enkore/orgs", "repos_url": "https://api.github.com/users/enkore/repos", "events_url": "https://api.github.com/users/enkore/events{/privacy}", "received_events_url": "https://api.github.com/users/enkore/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/15", "html_url": "https://github.com/borgbackup/borg/milestone/15", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/15/labels", "id": 1594973, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3Mw==", "number": 15, "title": "1.0.1 - fixes", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-02-20T19:34:19Z", "updated_at": "2017-05-07T15:09:08Z", "due_on": "2016-04-09T07:00:00Z", "closed_at": "2016-04-09T15:38:15Z"}, "comments": 10, "created_at": "2016-03-14T16:08:40Z", "updated_at": "2016-10-05T21:56:38Z", "closed_at": "2016-03-16T01:30:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When creating a new archive with files read from a disk with some bad sectors, Borg truncates files that are not fully readable and includes them into the archive. There is no error message or a warning, the return code is 0.\n\nSeems like Borg stops reading files on an I/O error and continues as if they were fully and correctly read. The result is an \"successfully\" created archive containing demaged files.\n\nThe same behavior can be reproduced using a fake block device instead of a disk with device mapper's error target on it.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/748/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/703", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/703/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/703/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/703/events", "html_url": "https://github.com/borgbackup/borg/issues/703", "id": 137377177, "node_id": "MDU6SXNzdWUxMzczNzcxNzc=", "number": 703, "title": "migrate-to-repokey endless passphrase loop on repokey repo", "user": {"login": "manwegit", "id": 5763495, "node_id": "MDQ6VXNlcjU3NjM0OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/5763495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manwegit", "html_url": "https://github.com/manwegit", "followers_url": "https://api.github.com/users/manwegit/followers", "following_url": "https://api.github.com/users/manwegit/following{/other_user}", "gists_url": "https://api.github.com/users/manwegit/gists{/gist_id}", "starred_url": "https://api.github.com/users/manwegit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manwegit/subscriptions", "organizations_url": "https://api.github.com/users/manwegit/orgs", "repos_url": "https://api.github.com/users/manwegit/repos", "events_url": "https://api.github.com/users/manwegit/events{/privacy}", "received_events_url": "https://api.github.com/users/manwegit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/3", "html_url": "https://github.com/borgbackup/borg/milestone/3", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/3/labels", "id": 1193946, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0Ng==", "number": 3, "title": "1.0 - dropping legacy", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2015-07-06T00:35:10Z", "updated_at": "2016-03-05T21:39:32Z", "due_on": "2016-03-05T08:00:00Z", "closed_at": "2016-03-05T21:39:32Z"}, "comments": 4, "created_at": "2016-02-29T21:12:11Z", "updated_at": "2016-03-05T01:19:14Z", "closed_at": "2016-03-05T01:19:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "borg migrate-to-repokey on a repokey repo created endless loop for asking passphrase\n\nExpected behaviour is to indicate repokey mode active after first passphrase query if repo is not passphrase repo.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/703/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/680", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/680/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/680/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/680/events", "html_url": "https://github.com/borgbackup/borg/issues/680", "id": 134861989, "node_id": "MDU6SXNzdWUxMzQ4NjE5ODk=", "number": 680, "title": "borg rename should reject invalid destinations", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/3", "html_url": "https://github.com/borgbackup/borg/milestone/3", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/3/labels", "id": 1193946, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0Ng==", "number": 3, "title": "1.0 - dropping legacy", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2015-07-06T00:35:10Z", "updated_at": "2016-03-05T21:39:32Z", "due_on": "2016-03-05T08:00:00Z", "closed_at": "2016-03-05T21:39:32Z"}, "comments": 2, "created_at": "2016-02-19T13:14:53Z", "updated_at": "2016-02-21T00:05:16Z", "closed_at": "2016-02-20T12:33:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "With a bad copy/paste, I ended up doing something like:\n\n```\nborg rename /path/to/repo::archive /path/to/repo::renamed-archive\n```\n\nAnd now, `borg list` shows `/path/to/repo::renamed-archive` as the archive name, and commands like `rename`, `delete`, `info` fail saying that `/path/to/repo::/path/to/repo::renamed-archive` is an invalid location format.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/680/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/657", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/657/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/657/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/657/events", "html_url": "https://github.com/borgbackup/borg/issues/657", "id": 133514721, "node_id": "MDU6SXNzdWUxMzM1MTQ3MjE=", "number": 657, "title": "Failing to open file with noatime", "user": {"login": "chebee7i", "id": 326005, "node_id": "MDQ6VXNlcjMyNjAwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/326005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chebee7i", "html_url": "https://github.com/chebee7i", "followers_url": "https://api.github.com/users/chebee7i/followers", "following_url": "https://api.github.com/users/chebee7i/following{/other_user}", "gists_url": "https://api.github.com/users/chebee7i/gists{/gist_id}", "starred_url": "https://api.github.com/users/chebee7i/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chebee7i/subscriptions", "organizations_url": "https://api.github.com/users/chebee7i/orgs", "repos_url": "https://api.github.com/users/chebee7i/repos", "events_url": "https://api.github.com/users/chebee7i/events{/privacy}", "received_events_url": "https://api.github.com/users/chebee7i/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/3", "html_url": "https://github.com/borgbackup/borg/milestone/3", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/3/labels", "id": 1193946, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0Ng==", "number": 3, "title": "1.0 - dropping legacy", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2015-07-06T00:35:10Z", "updated_at": "2016-03-05T21:39:32Z", "due_on": "2016-03-05T08:00:00Z", "closed_at": "2016-03-05T21:39:32Z"}, "comments": 9, "created_at": "2016-02-14T07:05:51Z", "updated_at": "2016-02-20T23:53:37Z", "closed_at": "2016-02-20T12:29:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a mount point with `noatime` set. In this situation, the logic in `Archive._open_rb` is roughly:\n1. Attempt to open the with noatime flags. \n2. If step 1 fails, try with normal flags and on success, assume step 1 failed because noatime was tried on a file we didn't have ownership on.  \n\nThe result is that files will be opened noatime only if we are the owner and are opened normal otherwise.\n\nIn my situation, the file fails to open with noatime even though I am the owner.  It seems like the code should check this scenario in the except clause. That is, rather than assume that opening noatime will work when I am the file owner, it should check that this is true. If not, then it should open normally.\n\nI'm not sure why the file can't be opened noatime, even though I am the owner.  FWIW, the mount point is a Mac OS Extended filesystem that is made available to Linux using Parallels. \n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/657/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/651", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/651/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/651/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/651/events", "html_url": "https://github.com/borgbackup/borg/issues/651", "id": 132196896, "node_id": "MDU6SXNzdWUxMzIxOTY4OTY=", "number": 651, "title": "start/end times in UTC", "user": {"login": "jungle-boogie", "id": 1111743, "node_id": "MDQ6VXNlcjExMTE3NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1111743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jungle-boogie", "html_url": "https://github.com/jungle-boogie", "followers_url": "https://api.github.com/users/jungle-boogie/followers", "following_url": "https://api.github.com/users/jungle-boogie/following{/other_user}", "gists_url": "https://api.github.com/users/jungle-boogie/gists{/gist_id}", "starred_url": "https://api.github.com/users/jungle-boogie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jungle-boogie/subscriptions", "organizations_url": "https://api.github.com/users/jungle-boogie/orgs", "repos_url": "https://api.github.com/users/jungle-boogie/repos", "events_url": "https://api.github.com/users/jungle-boogie/events{/privacy}", "received_events_url": "https://api.github.com/users/jungle-boogie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/3", "html_url": "https://github.com/borgbackup/borg/milestone/3", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/3/labels", "id": 1193946, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0Ng==", "number": 3, "title": "1.0 - dropping legacy", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2015-07-06T00:35:10Z", "updated_at": "2016-03-05T21:39:32Z", "due_on": "2016-03-05T08:00:00Z", "closed_at": "2016-03-05T21:39:32Z"}, "comments": 1, "created_at": "2016-02-08T16:54:33Z", "updated_at": "2016-02-08T22:47:57Z", "closed_at": "2016-02-08T22:47:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\n\nI'm now using `borg 1.0.0rc1`\n\nMy timezone is America/Los_Angeles:\n\n```\n% date\nMon Feb  8 08:45:54 PST 2016\n```\n\nWhen a backup is generated, the start and end times are in UTC:\n\n```\nStart time: Mon Feb  8 16:46:44 2016\nEnd time: Mon Feb  8 16:46:45 2016\nDuration: 1.25 seconds\nNumber of files: 168\n```\n\nHowever I save the file with my time and date: 2016-02-08-08-46\n\nI believe this is a new behavior for Borg but is it intended? My cron jobs will now report 7 - 8 hours ahead of when they started/ended. I can use the time I received the mail to know when it completed.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/651/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/633", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/633/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/633/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/633/events", "html_url": "https://github.com/borgbackup/borg/issues/633", "id": 131491543, "node_id": "MDU6SXNzdWUxMzE0OTE1NDM=", "number": 633, "title": "Exception when trying to use borg with llfuse 0.42.1", "user": {"login": "sigpipe", "id": 1299219, "node_id": "MDQ6VXNlcjEyOTkyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1299219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigpipe", "html_url": "https://github.com/sigpipe", "followers_url": "https://api.github.com/users/sigpipe/followers", "following_url": "https://api.github.com/users/sigpipe/following{/other_user}", "gists_url": "https://api.github.com/users/sigpipe/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigpipe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigpipe/subscriptions", "organizations_url": "https://api.github.com/users/sigpipe/orgs", "repos_url": "https://api.github.com/users/sigpipe/repos", "events_url": "https://api.github.com/users/sigpipe/events{/privacy}", "received_events_url": "https://api.github.com/users/sigpipe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811716, "node_id": "MDU6TGFiZWwyMTA4MTE3MTY=", "url": "https://api.github.com/repos/borgbackup/borg/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-02-04T22:26:11Z", "updated_at": "2016-10-03T11:07:09Z", "closed_at": "2016-02-07T18:56:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "It appears that the llfuse API for llfuse.main() has changed.  borg currently uses llfuse.main(single=True), and the new API call no longer accepts the _single_ keyword argument.  Instead, it appears that specifying _workers=1_ will mimic the old behavior.  See https://pythonhosted.org/llfuse/fuse_api.html#llfuse.main\n\n> using builtin fallback logging configuration\n> Remote: using builtin fallback logging configuration\n> Mounting filesystem\n> Initializing llfuse\n> Calling fuse_mount\n> Calling fuse_lowlevel_new\n> Calling fuse_session_add_chan\n> Calling fuse_session_remove_chan\n> Calling fuse_session_destroy\n> Calling fuse_unmount\n> Local Exception.\n> Traceback (most recent call last):\n>   File \"/data/borg-env/lib/python3.4/site-packages/borg/archiver.py\", line 1261, in main\n>     exit_code = archiver.run(args)\n>   File \"/data/borg-env/lib/python3.4/site-packages/borg/archiver.py\", line 1215, in run\n>     return args.func(args)\n>   File \"/data/borg-env/lib/python3.4/site-packages/borg/archiver.py\", line 385, in do_mount\n>     operations.mount(args.mountpoint, args.options, args.foreground)\n>   File \"/data/borg-env/lib/python3.4/site-packages/borg/fuse.py\", line 238, in mount\n>     llfuse.main(single=True)\n>   File \"src/fuse_api.pxi\", line 273, in llfuse.main (src/llfuse.c:34380)\n> TypeError: main() got an unexpected keyword argument 'single'\n> \n> Platform: Linux xyz 4.2.0-27-generic #32-Ubuntu SMP Fri Jan 22 04:49:08 UTC 2016 x86_64 x86_64\n> Linux: Ubuntu 15.10 wily  LibC: glibc 2.9\n> Python: CPython 3.4.3+\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/633/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/621", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/621/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/621/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/621/events", "html_url": "https://github.com/borgbackup/borg/issues/621", "id": 130364206, "node_id": "MDU6SXNzdWUxMzAzNjQyMDY=", "number": 621, "title": "python3.2: crash if segment file is too small (e.g. 0 size)", "user": {"login": "fsironman", "id": 6130672, "node_id": "MDQ6VXNlcjYxMzA2NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6130672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fsironman", "html_url": "https://github.com/fsironman", "followers_url": "https://api.github.com/users/fsironman/followers", "following_url": "https://api.github.com/users/fsironman/following{/other_user}", "gists_url": "https://api.github.com/users/fsironman/gists{/gist_id}", "starred_url": "https://api.github.com/users/fsironman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fsironman/subscriptions", "organizations_url": "https://api.github.com/users/fsironman/orgs", "repos_url": "https://api.github.com/users/fsironman/repos", "events_url": "https://api.github.com/users/fsironman/events{/privacy}", "received_events_url": "https://api.github.com/users/fsironman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/13", "html_url": "https://github.com/borgbackup/borg/milestone/13", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/13/labels", "id": 1555880, "node_id": "MDk6TWlsZXN0b25lMTU1NTg4MA==", "number": 13, "title": "0.30.1 - critical fixes for 0.30", "description": "branch: 0.xx-maint", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2016-02-01T15:17:52Z", "updated_at": "2016-02-08T00:07:06Z", "due_on": null, "closed_at": "2016-02-08T00:07:06Z"}, "comments": 5, "created_at": "2016-02-01T13:37:30Z", "updated_at": "2016-02-01T15:32:36Z", "closed_at": "2016-02-01T15:32:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I started a Backup with 0.30 during this Backup because of some configuration error on my part the target server of my backup went into standby.\n\nAfter waking him up and trying again i got an error that theres a lock:\n\n```\nRemote: Borg 0.30.0: exception in RPC call:\nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/locking.py\", line 134, in acquire\nRemote:     os.mkdir(self.path)\nRemote: OSError: [Errno 17] File exists: '[...]/borg/lock.exclusive'\nRemote: \nRemote: During handling of the above exception, another exception occurred:\nRemote: \nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/remote.py\", line 95, in serve\nRemote:     res = f(*args)\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/remote.py\", line 120, in open\nRemote:     self.repository = Repository(path, create, lock_wait=lock_wait, lock=lock)\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 63, in __init__\nRemote:     self.open(self.path, exclusive, lock_wait=lock_wait, lock=lock)\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 141, in open\nRemote:     self.lock = UpgradableLock(os.path.join(path, 'lock'), exclusive, timeout=lock_wait).acquire()\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/locking.py\", line 267, in acquire\nRemote:     with self._lock:\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/locking.py\", line 118, in __enter__\nRemote:     return self.acquire()\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/locking.py\", line 140, in acquire\nRemote:     raise LockTimeout(self.path)\nRemote: borg.locking.LockTimeout: [...]/borg/lock.exclusive\nRemote: Platform: Linux hostname 3.16.0-0.bpo.4-amd64 #1 SMP Debian 3.16.7-ckt11-1+deb8u6~bpo70+1 (2015-11-11) x86_64\nRemote: Linux: debian 7.9   LibC: glibc 2.9\nRemote: Borg: 0.30.0 Python: CPython 3.2.3\nRemote: \nRemote Exception (see remote log for the traceback)\nPlatform: Linux hostname 3.13.0-68-generic #111-Ubuntu SMP Fri Nov 6 18:17:06 UTC 2015 x86_64 x86_64\nLinux: Ubuntu 14.04 trusty  LibC: glibc 2.9\nBorg: 0.30.0 Python: CPython 3.4.3\n```\n\nSo i did a borg break-lock which did not return an error.\n\nAny kind of operation on the repository now returns the following error:\n\n```\nborg check hostname:/[...]/borg\nRemote: Borg 0.30.0: exception in RPC call:\nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 335, in check\nRemote:     transaction_id = self.get_transaction_id()\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 120, in get_transaction_id\nRemote:     segments_transaction_id = self.io.get_segments_transaction_id()\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 512, in get_segments_transaction_id\nRemote:     if self.is_committed_segment(filename):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 531, in is_committed_segment\nRemote:     fd.seek(-self.header_fmt.size, os.SEEK_END)\nRemote: IOError: [Errno 22] Invalid argument\nRemote: \nRemote: During handling of the above exception, another exception occurred:\nRemote: \nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/remote.py\", line 95, in serve\nRemote:     res = f(*args)\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 338, in check\nRemote:     transaction_id = self.io.get_segments_transaction_id()\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 512, in get_segments_transaction_id\nRemote:     if self.is_committed_segment(filename):\nRemote:   File \"/usr/local/lib/python3.2/dist-packages/borg/repository.py\", line 531, in is_committed_segment\nRemote:     fd.seek(-self.header_fmt.size, os.SEEK_END)\nRemote: IOError: [Errno 22] Invalid argument\nRemote: Platform: Linux ironbackup 3.16.0-0.bpo.4-amd64 #1 SMP Debian 3.16.7-ckt11-1+deb8u6~bpo70+1 (2015-11-11) x86_64\nRemote: Linux: debian 7.9   LibC: glibc 2.9\nRemote: Borg: 0.30.0 Python: CPython 3.2.3\nRemote: \nRemote Exception (see remote log for the traceback)\nPlatform: Linux hostname 3.13.0-68-generic #111-Ubuntu SMP Fri Nov 6 18:17:06 UTC 2015 x86_64 x86_64\nLinux: Ubuntu 14.04 trusty  LibC: glibc 2.9\nBorg: 0.30.0 Python: CPython 3.4.3\n```\n\nIs there a way to fix this ?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/610", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/610/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/610/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/610/events", "html_url": "https://github.com/borgbackup/borg/issues/610", "id": 129459100, "node_id": "MDU6SXNzdWUxMjk0NTkxMDA=", "number": 610, "title": "lock kept by declining repo path change?", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/3", "html_url": "https://github.com/borgbackup/borg/milestone/3", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/3/labels", "id": 1193946, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0Ng==", "number": 3, "title": "1.0 - dropping legacy", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2015-07-06T00:35:10Z", "updated_at": "2016-03-05T21:39:32Z", "due_on": "2016-03-05T08:00:00Z", "closed_at": "2016-03-05T21:39:32Z"}, "comments": 5, "created_at": "2016-01-28T13:54:08Z", "updated_at": "2016-02-05T16:04:02Z", "closed_at": "2016-02-05T16:04:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From IRC (Manwe):\nWhen repository location changes answering N (just by pressing enter) leaves the repo locked:\n\n```\n$ Warning: The repository at location ... Do you want to continue? [yN]\n$ Repository access aborted\n$ Now trying again with correct path\n$ Failed to create/acquire the lock \n```\n\nI came across this while running scripted backup job (that uses and creates about thousand borg repos).\nI made a change in the script after initial backup and it accidentally introduces /./ in to the repo path. That of course activated the repo changed question.\n\nthe repo should not be locked by declining to change repo path. this with borg 0.30.0.\n\nSteps to reproduce: \n\n```\n$ mkdir /tmp/demo; touch /tmp/demo/file.txt\n$ export BORG_CACHE_DIR=/tmp/bcache ; borg init -v /tmp/brepo ; borg create -v --stats /tmp/brepo::$(date +%s) /tmp/demo\n$ borg create -v --stats /tmp/./brepo::$(date +%s) /tmp/demo\n$ #(answer N)\n$ borg create -v --stats /tmp/brepo::$(date +%s) /tmp/demo\n$ # locked\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/610/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/576", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/576/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/576/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/576/events", "html_url": "https://github.com/borgbackup/borg/issues/576", "id": 127263004, "node_id": "MDU6SXNzdWUxMjcyNjMwMDQ=", "number": 576, "title": "upgrade fails without ~/.attic/keys", "user": {"login": "Profpatsch", "id": 3153638, "node_id": "MDQ6VXNlcjMxNTM2Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3153638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Profpatsch", "html_url": "https://github.com/Profpatsch", "followers_url": "https://api.github.com/users/Profpatsch/followers", "following_url": "https://api.github.com/users/Profpatsch/following{/other_user}", "gists_url": "https://api.github.com/users/Profpatsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Profpatsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Profpatsch/subscriptions", "organizations_url": "https://api.github.com/users/Profpatsch/orgs", "repos_url": "https://api.github.com/users/Profpatsch/repos", "events_url": "https://api.github.com/users/Profpatsch/events{/privacy}", "received_events_url": "https://api.github.com/users/Profpatsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/12", "html_url": "https://github.com/borgbackup/borg/milestone/12", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/12/labels", "id": 1457468, "node_id": "MDk6TWlsZXN0b25lMTQ1NzQ2OA==", "number": 12, "title": "0.30 misc fixes and improvements", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2015-12-12T20:28:51Z", "updated_at": "2016-03-21T14:43:05Z", "due_on": null, "closed_at": "2016-01-24T00:04:43Z"}, "comments": 1, "created_at": "2016-01-18T16:34:37Z", "updated_at": "2016-01-19T23:52:30Z", "closed_at": "2016-01-19T23:52:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I moved to a new system, but wish to upgrade an old attic repository on an external drive; I don\u2019t have any keys in `~/.attic/keys`, so borg throws:\n\n```\nLocal Exception.\nTraceback (most recent call last):\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/archiver.py\", line 1261, in main\n    exit_code = archiver.run(args)\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/archiver.py\", line 1215, in run\n    return args.func(args)\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/archiver.py\", line 515, in do_upgrade\n    repo.upgrade(args.dry_run, inplace=args.inplace)\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/upgrader.py\", line 45, in upgrade\n    keyfile = self.find_attic_keyfile()\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/upgrader.py\", line 128, in find_attic_keyfile\n    return AtticKeyfileKey.find_key_file(self)\n  File \"/nix/store/2smxfpi0kiz5lqzy3j6pqkvpkwhmxmf8-borgbackup-0.29.0/lib/python3.4/site-packages/borg/upgrader.py\", line 268, in find_key_file\n    for name in os.listdir(keys_dir):\nFileNotFoundError: [Errno 2] No such file or directory: '/home/philip/.attic/keys'\n\nPlatform: Linux katara 4.1.13 #1-NixOS SMP Thu Jan 1 00:00:01 UTC 1970 x86_64 \nLinux:     LibC: glibc 2.2.5\nPython: CPython 3.4.4\n```\n\nUpdate: It\u2019s actually pretty minor, since it will work with an empty `~/.attic/keys`.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/576/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/570", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/570/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/570/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/570/events", "html_url": "https://github.com/borgbackup/borg/issues/570", "id": 127225152, "node_id": "MDU6SXNzdWUxMjcyMjUxNTI=", "number": 570, "title": "dry-run fail with --keep-tag-files", "user": {"login": "infectormp", "id": 9958813, "node_id": "MDQ6VXNlcjk5NTg4MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9958813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infectormp", "html_url": "https://github.com/infectormp", "followers_url": "https://api.github.com/users/infectormp/followers", "following_url": "https://api.github.com/users/infectormp/following{/other_user}", "gists_url": "https://api.github.com/users/infectormp/gists{/gist_id}", "starred_url": "https://api.github.com/users/infectormp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infectormp/subscriptions", "organizations_url": "https://api.github.com/users/infectormp/orgs", "repos_url": "https://api.github.com/users/infectormp/repos", "events_url": "https://api.github.com/users/infectormp/events{/privacy}", "received_events_url": "https://api.github.com/users/infectormp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/12", "html_url": "https://github.com/borgbackup/borg/milestone/12", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/12/labels", "id": 1457468, "node_id": "MDk6TWlsZXN0b25lMTQ1NzQ2OA==", "number": 12, "title": "0.30 misc fixes and improvements", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2015-12-12T20:28:51Z", "updated_at": "2016-03-21T14:43:05Z", "due_on": null, "closed_at": "2016-01-24T00:04:43Z"}, "comments": 1, "created_at": "2016-01-18T13:19:24Z", "updated_at": "2016-01-18T15:16:55Z", "closed_at": "2016-01-18T15:16:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello.\n\nI run command: \n`borg create -n -s -v -C lz4 --exclude-if-present debug.txt --keep-tag-files --exclude-caches /backup/site.repo::site.(date +%d-%m-%Y_%H-%M-%S) /xxx/site`\n\nand get error: \n\n```\n/bin/sh: symbol lookup error: /bin/sh: undefined symbol: rl_signal_event_hook\nLocal Exception.\nTraceback (most recent call last):\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 1261, in main\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 1215, in run\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 183, in do_create\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 247, in _process\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 247, in _process\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 247, in _process\n  File \"/vagrant/borg/borg/borg/archiver.py\", line 229, in _process\nAttributeError: 'NoneType' object has no attribute 'process_dir'\n\nPlatform: Linux www 4.4.0-gentoo #4 SMP Fri Jan 15 00:21:41 MSK 2016 x86_64\nLinux: Gentoo Base System 2.2   LibC: glibc 2.3\nPython: CPython 3.5.1\n```\n\nborg 0.29.0\n\ndry-run work as expected if run command without --keep-tag-files\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/514", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/514/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/514/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/514/events", "html_url": "https://github.com/borgbackup/borg/issues/514", "id": 124273096, "node_id": "MDU6SXNzdWUxMjQyNzMwOTY=", "number": 514, "title": "Remote: OpenSSL version mismatch", "user": {"login": "niieani", "id": 563469, "node_id": "MDQ6VXNlcjU2MzQ2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/563469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niieani", "html_url": "https://github.com/niieani", "followers_url": "https://api.github.com/users/niieani/followers", "following_url": "https://api.github.com/users/niieani/following{/other_user}", "gists_url": "https://api.github.com/users/niieani/gists{/gist_id}", "starred_url": "https://api.github.com/users/niieani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niieani/subscriptions", "organizations_url": "https://api.github.com/users/niieani/orgs", "repos_url": "https://api.github.com/users/niieani/repos", "events_url": "https://api.github.com/users/niieani/events{/privacy}", "received_events_url": "https://api.github.com/users/niieani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/12", "html_url": "https://github.com/borgbackup/borg/milestone/12", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/12/labels", "id": 1457468, "node_id": "MDk6TWlsZXN0b25lMTQ1NzQ2OA==", "number": 12, "title": "0.30 misc fixes and improvements", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2015-12-12T20:28:51Z", "updated_at": "2016-03-21T14:43:05Z", "due_on": null, "closed_at": "2016-01-24T00:04:43Z"}, "comments": 6, "created_at": "2015-12-29T21:49:21Z", "updated_at": "2016-01-12T18:58:05Z", "closed_at": "2016-01-12T18:58:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using the binaries from the GitHub release page on the repository server:\nsha256: 5d8362f545aedf71be1893bd0fab30ecd79d40c89671323c804376b53f8886af\nhttps://github.com/borgbackup/borg/releases/download/0.29.0/borg-linux64\nNote: borg-linux64 binary built with openssl 1.0.1e (debian wheezy)\n\nInitially, on the client, the same binary was used.\n\nBut when running Borg I get:\n\n```\nRemote: OpenSSL version mismatch. Built against 1000204f, you have 1000105f\nConnection closed by remote host. Is borg working on the server?\n```\n\nDoes that mean I need to recompile borg? If so, where, on the repository-side or locally?\n\nOn the remote repo server, there is openssl 1.0.2d-0ubuntu1.2 installed.\n\nNote: \"Remote:\" does not always mean that the message to the right of it really came from the remote system. It is just stuff emitted on stderr on our side of the ssh tunnel. It can come from remote stderr, go through the tunnel and appear on our stderr. But it could be also emitted by our ssh client on stderr.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/503", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/503/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/503/events", "html_url": "https://github.com/borgbackup/borg/issues/503", "id": 123117683, "node_id": "MDU6SXNzdWUxMjMxMTc2ODM=", "number": 503, "title": "BORG_CHECK_I_KNOW_WHAT_I_AM_DOING", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/12", "html_url": "https://github.com/borgbackup/borg/milestone/12", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/12/labels", "id": 1457468, "node_id": "MDk6TWlsZXN0b25lMTQ1NzQ2OA==", "number": 12, "title": "0.30 misc fixes and improvements", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2015-12-12T20:28:51Z", "updated_at": "2016-03-21T14:43:05Z", "due_on": null, "closed_at": "2016-01-24T00:04:43Z"}, "comments": 0, "created_at": "2015-12-20T00:07:04Z", "updated_at": "2015-12-20T01:21:54Z", "closed_at": "2015-12-20T01:21:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "... is not only used for \"borg check\", but also for \"borg delete\".\n\nThis is due to a misinterpretation as (borg) + (check i know what i am doing), but it likely was meant as (borg check) + (i know what i am doing).\n\nThus, the latter one should be renamed to BORG_DELETE_I_KNOW_WHAT_I_AM_DOING.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/502", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/502/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/502/events", "html_url": "https://github.com/borgbackup/borg/issues/502", "id": 123044466, "node_id": "MDU6SXNzdWUxMjMwNDQ0NjY=", "number": 502, "title": "'Repository' object has no attribute 'segments'", "user": {"login": "skibbipl", "id": 4746858, "node_id": "MDQ6VXNlcjQ3NDY4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4746858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skibbipl", "html_url": "https://github.com/skibbipl", "followers_url": "https://api.github.com/users/skibbipl/followers", "following_url": "https://api.github.com/users/skibbipl/following{/other_user}", "gists_url": "https://api.github.com/users/skibbipl/gists{/gist_id}", "starred_url": "https://api.github.com/users/skibbipl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skibbipl/subscriptions", "organizations_url": "https://api.github.com/users/skibbipl/orgs", "repos_url": "https://api.github.com/users/skibbipl/repos", "events_url": "https://api.github.com/users/skibbipl/events{/privacy}", "received_events_url": "https://api.github.com/users/skibbipl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/12", "html_url": "https://github.com/borgbackup/borg/milestone/12", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/12/labels", "id": 1457468, "node_id": "MDk6TWlsZXN0b25lMTQ1NzQ2OA==", "number": 12, "title": "0.30 misc fixes and improvements", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2015-12-12T20:28:51Z", "updated_at": "2016-03-21T14:43:05Z", "due_on": null, "closed_at": "2016-01-24T00:04:43Z"}, "comments": 5, "created_at": "2015-12-18T23:40:44Z", "updated_at": "2016-08-15T22:55:25Z", "closed_at": "2016-01-16T17:47:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "So I upgraded server and client to borg 0.29 and one of my backups stopped working.\n`borg create --compression=lzma,9 --stats -v --filter=AME` generates following errors:\n\n```\nRemote: Borg 0.29.0: exception in RPC call:\nRemote: Traceback (most recent call last):\nRemote:   File \"/usr/lib/python3/dist-packages/borg/remote.py\", line 96, in serve\nRemote:     res = f(*args)\nRemote:   File \"/usr/lib/python3/dist-packages/borg/repository.py\", line 439, in put\nRemote:     self.segments.setdefault(segment, 0)\nRemote: AttributeError: 'Repository' object has no attribute 'segments'\nRemote: Platform: Linux copam 4.3.0-1-amd64 #1 SMP Debian 4.3.3-1 (2015-12-15) x86_64\nRemote: Linux: debian stretch/sid   LibC: glibc 2.9\nRemote: Python: CPython 3.4.4rc1\n```\n\nBoth client and remote are debian servers.\n\nUPDATE: OK, It seems I need some sleep. I forgot that I mounted my backup on remote.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/476", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/476/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/476/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/476/events", "html_url": "https://github.com/borgbackup/borg/issues/476", "id": 120965020, "node_id": "MDU6SXNzdWUxMjA5NjUwMjA=", "number": 476, "title": "progress-indication auto-enable conflicts with --verbose", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 6, "created_at": "2015-12-08T09:10:10Z", "updated_at": "2019-12-02T17:22:43Z", "closed_at": "2015-12-10T12:34:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the progress indicator for create needs to be able to output on the same line repeatedly (using the \\r trick to overwrite the line again and again).\n\nbut --verbose causes scrolling. that's not a problem per se as the user could decide between the two, but if a console user gives `borg create -v`, we automatically enable progress indication also because we always do that when a tty is connected.\n\ni suggest to remove the automatic progress indication enabling. too much magic.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/476/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/466", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/466/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/466/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/466/events", "html_url": "https://github.com/borgbackup/borg/issues/466", "id": 120464044, "node_id": "MDU6SXNzdWUxMjA0NjQwNDQ=", "number": 466, "title": "borg upgrade also upgrades the backup repo", "user": {"login": "jdchristensen", "id": 3374048, "node_id": "MDQ6VXNlcjMzNzQwNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/3374048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdchristensen", "html_url": "https://github.com/jdchristensen", "followers_url": "https://api.github.com/users/jdchristensen/followers", "following_url": "https://api.github.com/users/jdchristensen/following{/other_user}", "gists_url": "https://api.github.com/users/jdchristensen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdchristensen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdchristensen/subscriptions", "organizations_url": "https://api.github.com/users/jdchristensen/orgs", "repos_url": "https://api.github.com/users/jdchristensen/repos", "events_url": "https://api.github.com/users/jdchristensen/events{/privacy}", "received_events_url": "https://api.github.com/users/jdchristensen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 11, "created_at": "2015-12-04T18:59:33Z", "updated_at": "2015-12-14T18:31:38Z", "closed_at": "2015-12-14T14:09:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It uses hardlinks to create a backup repo, but then updates the files in place,\nwhich doesn't break the hardlinks.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/28861170-borg-upgrade-also-upgrades-the-backup-repo)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/464", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/464/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/464/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/464/events", "html_url": "https://github.com/borgbackup/borg/issues/464", "id": 120428432, "node_id": "MDU6SXNzdWUxMjA0Mjg0MzI=", "number": 464, "title": "borg upgrade missing from the docs", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 0, "created_at": "2015-12-04T15:48:31Z", "updated_at": "2015-12-08T09:34:30Z", "closed_at": "2015-12-08T09:34:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "http://borgbackup.readthedocs.org/en/latest/usage.html\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/464/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/463", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/463/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/463/events", "html_url": "https://github.com/borgbackup/borg/issues/463", "id": 120424469, "node_id": "MDU6SXNzdWUxMjA0MjQ0Njk=", "number": 463, "title": "wrong output formatting for umask", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 271074923, "node_id": "MDU6TGFiZWwyNzEwNzQ5MjM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/easy", "name": "easy", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 0, "created_at": "2015-12-04T15:29:10Z", "updated_at": "2015-12-07T18:27:20Z", "closed_at": "2015-12-07T18:27:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "from the upgrade help output:\n\n```\n  --umask M           set umask to M (local and remote, default: 63)\n```\n\nOf course that should not display 63, but rather 0077.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/463/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/461", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/461/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/461/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/461/events", "html_url": "https://github.com/borgbackup/borg/issues/461", "id": 120300900, "node_id": "MDU6SXNzdWUxMjAzMDA5MDA=", "number": 461, "title": "remote logging configuration / output selection", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 1, "created_at": "2015-12-04T00:02:05Z", "updated_at": "2015-12-13T13:27:13Z", "closed_at": "2015-12-13T13:27:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Noticed that the `borg check repo` progress indicator does not show with remote repos.\n\nSeems like there are multiple issues:\n- flush() issue?\n- logging level of remote borg in sync with local borg?\n- if we use BORG_LOGGING_CONF=logging.conf, how do we handle the remote borg?\n- in general (maybe not related to THIS issue): topical flags (like --progress) given to remote borg?\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/28836113-remote-logging-configuration-output-selection)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/450", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/450/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/450/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/450/events", "html_url": "https://github.com/borgbackup/borg/issues/450", "id": 119776530, "node_id": "MDU6SXNzdWUxMTk3NzY1MzA=", "number": 450, "title": "hashindex performance breakdown", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 653080173, "node_id": "MDU6TGFiZWw2NTMwODAxNzM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/c:%20hashindex", "name": "c: hashindex", "color": "9400D3", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 2, "created_at": "2015-12-01T18:17:11Z", "updated_at": "2017-07-23T10:32:27Z", "closed_at": "2015-12-02T16:00:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In _hashindex.c, we have a \"hashtable with linearing hashing\" implementation.\n\nUnder some circumstances, which are not totally clear yet, it has performance breakdowns by several orders of magnitude (observable e.g. when it is used to merge chunk indexes when resynchronizing the chunks cache - when it sometimes keeps the cpu at 100% for many minutes or hours).\n\nSuspicions:\n- the upper limit of 90% hashtable load seems to be too high (other hashtable implementations use 66% or 75%)\n- performance heavily depends on the initial size of the hashtable, powers of 2 are bad.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/447", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/447/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/447/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/447/events", "html_url": "https://github.com/borgbackup/borg/issues/447", "id": 119014455, "node_id": "MDU6SXNzdWUxMTkwMTQ0NTU=", "number": 447, "title": "0.28.2 borg-linux* binaries miss FUSE support", "user": {"login": "DrupaListo-com", "id": 15360654, "node_id": "MDQ6VXNlcjE1MzYwNjU0", "avatar_url": "https://avatars.githubusercontent.com/u/15360654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DrupaListo-com", "html_url": "https://github.com/DrupaListo-com", "followers_url": "https://api.github.com/users/DrupaListo-com/followers", "following_url": "https://api.github.com/users/DrupaListo-com/following{/other_user}", "gists_url": "https://api.github.com/users/DrupaListo-com/gists{/gist_id}", "starred_url": "https://api.github.com/users/DrupaListo-com/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DrupaListo-com/subscriptions", "organizations_url": "https://api.github.com/users/DrupaListo-com/orgs", "repos_url": "https://api.github.com/users/DrupaListo-com/repos", "events_url": "https://api.github.com/users/DrupaListo-com/events{/privacy}", "received_events_url": "https://api.github.com/users/DrupaListo-com/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 13, "created_at": "2015-11-26T10:27:24Z", "updated_at": "2016-10-03T11:07:48Z", "closed_at": "2015-12-13T17:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Related to #111 but somehow different case . Creating new issue cause I cant reopen the old one.\n\n@ThomasWaldmann\n\non linux ubuntu 12.04 LTS (codename precise) the \"borg mount\" is impossible to be made to work.\n\nerror I get is :\nLoading fuse support failed [ImportError: No module named 'llfuse']\n\nI am using:\n- the borg prebuilt 32 bit binary directly downloaded and installed in $PATH\n- ubuntu 12.04\n- I have succesfully run borg 0.28.2 ( latest release as of now ) and backed up OK\n\nBut I cant mount the backup to \"see\" its all there and/or test restore selectively only one folder/file.\n\nWhat I tried:\n- I tried installing distro packages for llfuse - for both python 2.7 and 3.2 - seems like although there ARE packages for both 2 and 3, they are the same package actually - by insepcting the real package version  in aptitude\n- I tried seeing where the borg binary searches for llfuse when mounting - via ldd and \"readelf -d borg\" but llfuse is not listed there\n- I tried setting  up python3 virtualenv and installing llfuse via its own venv pip, no luck - \"borg mount\" does not run from the venv NOR globally\n\nSo now I have to either find where to symlink the venv package in some /usr/local/python3.2/site-packages type of dir OR inspect the borg source to see how is llfuse loaded and why does it fail on my system.\n\nPS. Can llfuse be bundled INTO the borg standalone binary executable as other libs are ?\nPS2. Should I try compiling my own borg from the release/git master ? Will that fix it for me ?\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/28627351-0-28-2-borg-linux-binaries-miss-fuse-support)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/447/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/436", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/436/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/436/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/436/events", "html_url": "https://github.com/borgbackup/borg/issues/436", "id": 118109397, "node_id": "MDU6SXNzdWUxMTgxMDkzOTc=", "number": 436, "title": "--no-progress does not work", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 0, "created_at": "2015-11-20T19:27:45Z", "updated_at": "2015-11-20T20:04:08Z", "closed_at": "2015-11-20T20:04:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\nborg create --no-progress repo::test .  # bug: shows progress indicator.\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/436/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/432", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/432/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/432/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/432/events", "html_url": "https://github.com/borgbackup/borg/issues/432", "id": 117882744, "node_id": "MDU6SXNzdWUxMTc4ODI3NDQ=", "number": 432, "title": "--keep-tag-files issues", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/8", "html_url": "https://github.com/borgbackup/borg/milestone/8", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/8/labels", "id": 1342648, "node_id": "MDk6TWlsZXN0b25lMTM0MjY0OA==", "number": 8, "title": "0.29 - improve locking / logging", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2015-10-07T13:09:39Z", "updated_at": "2015-12-14T14:09:28Z", "due_on": null, "closed_at": "2015-12-13T17:53:29Z"}, "comments": 0, "created_at": "2015-11-19T18:58:11Z", "updated_at": "2015-11-19T19:04:05Z", "closed_at": "2015-11-19T19:04:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "it has 2 issues:\n- the tag files were saved with directory status (and thus extracted as directories)\n- if multiple tag files were present in some directory, only one of them was kept\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/384", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/384/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/384/events", "html_url": "https://github.com/borgbackup/borg/issues/384", "id": 115733427, "node_id": "MDU6SXNzdWUxMTU3MzM0Mjc=", "number": 384, "title": "borg has mock as build dependency now", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/9", "html_url": "https://github.com/borgbackup/borg/milestone/9", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/9/labels", "id": 1399993, "node_id": "MDk6TWlsZXN0b25lMTM5OTk5Mw==", "number": 9, "title": "0.28.1", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2015-11-08T13:16:13Z", "updated_at": "2015-11-14T21:32:47Z", "due_on": null, "closed_at": "2015-11-08T16:16:52Z"}, "comments": 14, "created_at": "2015-11-08T13:08:56Z", "updated_at": "2015-11-14T21:32:47Z", "closed_at": "2015-11-14T21:32:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "likely due to the \"get this working on readthedocs\", we have a new (and somehow unexpected) build dependency now:\n\n```\n# I ran this in a fresh virtualenv:\n(env)tw@tux:~/foo$ pip install borgbackup\nDownloading/unpacking borgbackup\n  Downloading borgbackup-0.28.0.tar.gz (396kB): 396kB downloaded\n  Running setup.py (path:/home/tw/foo/env/build/borgbackup/setup.py) egg_info for package borgbackup\n\n    Installed /home/tw/foo/env/build/borgbackup/setuptools_scm-1.8.0-py3.5.egg\n    your setuptools is too old (<12)\n    setuptools_scm functionality is degraded\n\n    warning: no previously-included files matching '*.pyc' found under directory 'docs'\n    warning: no previously-included files matching '*.pyo' found under directory 'docs'\n    no previously-included directories found matching 'docs/_build'\n    no previously-included directories found matching '.travis'\n    warning: no previously-included files found matching '.coveragerc'\n    warning: no previously-included files found matching '.gitattributes'\n    warning: no previously-included files found matching '.gitignore'\n    warning: no previously-included files found matching '.travis.yml'\n    warning: no previously-included files found matching 'Vagrantfile'\nDownloading/unpacking msgpack-python>=0.4.6 (from borgbackup)\n  Downloading msgpack-python-0.4.6.tar.gz (116kB): 116kB downloaded\n  Running setup.py (path:/home/tw/foo/env/build/msgpack-python/setup.py) egg_info for package msgpack-python\n\nInstalling collected packages: borgbackup, msgpack-python\n  Running setup.py install for borgbackup\n    your setuptools is too old (<12)\n    setuptools_scm functionality is degraded\n    calling custom build steps\n    building 'borg.compress' extension\n    gcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/include -I/usr/include -I/usr/local/include/python3.5m -c borg/compress.c -o build/temp.linux-x86_64-3.5/borg/compress.o\n    gcc -pthread -shared build/temp.linux-x86_64-3.5/borg/compress.o -L/usr/lib -L/usr/lib -llz4 -o build/lib.linux-x86_64-3.5/borg/compress.cpython-35m-x86_64-linux-gnu.so\n    building 'borg.crypto' extension\n    gcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/include -I/usr/include -I/usr/local/include/python3.5m -c borg/crypto.c -o build/temp.linux-x86_64-3.5/borg/crypto.o\n    gcc -pthread -shared build/temp.linux-x86_64-3.5/borg/crypto.o -L/usr/lib -L/usr/lib -lcrypto -o build/lib.linux-x86_64-3.5/borg/crypto.cpython-35m-x86_64-linux-gnu.so\n    building 'borg.chunker' extension\n    gcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/chunker.c -o build/temp.linux-x86_64-3.5/borg/chunker.o\n    In file included from borg/chunker.c:241:0:\n    borg/_chunker.c: In function \u2018chunker_process\u2019:\n    borg/_chunker.c:237:24: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n         while(c->remaining > c->window_size && ((sum & chunk_mask) || n < min_size)) {\n                            ^\n    borg/_chunker.c:237:69: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n         while(c->remaining > c->window_size && ((sum & chunk_mask) || n < min_size)) {\n                                                                         ^\n    gcc -pthread -shared build/temp.linux-x86_64-3.5/borg/chunker.o -o build/lib.linux-x86_64-3.5/borg/chunker.cpython-35m-x86_64-linux-gnu.so\n    building 'borg.hashindex' extension\n    gcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/hashindex.c -o build/temp.linux-x86_64-3.5/borg/hashindex.o\n    In file included from borg/hashindex.c:239:0:\n    borg/_hashindex.c: In function \u2018hashindex_read\u2019:\n    borg/_hashindex.c:174:15: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n         if(length != sizeof(HashHeader) + buckets_length) {\n                   ^\n    borg/_hashindex.c: In function \u2018hashindex_write\u2019:\n    borg/_hashindex.c:278:54: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n         if(fwrite(index->buckets, 1, buckets_length, fd) != buckets_length) {\n                                                          ^\n    gcc -pthread -shared build/temp.linux-x86_64-3.5/borg/hashindex.o -o build/lib.linux-x86_64-3.5/borg/hashindex.cpython-35m-x86_64-linux-gnu.so\n    building 'borg.platform_linux' extension\n    gcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/platform_linux.c -o build/temp.linux-x86_64-3.5/borg/platform_linux.o\n    gcc -pthread -shared build/temp.linux-x86_64-3.5/borg/platform_linux.o -lacl -o build/lib.linux-x86_64-3.5/borg/platform_linux.cpython-35m-x86_64-linux-gnu.so\n    auto-generating API documentation\n    examining module borg/archiver.py\n    examining module borg/upgrader.py\n    examining module borg/__main__.py\n    examining module borg/archive.py\n    examining module borg/fuse.py\n    examining module borg/platform.py\n    examining module borg/locking.py\n    examining module borg/repository.py\n    examining module borg/lrucache.py\n    examining module borg/remote.py\n    examining module borg/__init__.py\n    examining module borg/xattr.py\n    examining module borg/helpers.py\n    examining module borg/cache.py\n    examining module borg/_version.py\n    examining module borg/key.py\n    examining module borg/logger.py\n    examining module borg/platform_darwin.pyx\n    examining module borg/platform_linux.pyx\n    examining module borg/hashindex.pyx\n    examining module borg/compress.pyx\n    examining module borg/chunker.pyx\n    examining module borg/crypto.pyx\n    examining module borg/platform_freebsd.pyx\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 297, in <module>\n        install_requires=install_requires,\n      File \"/usr/local/lib/python3.5/distutils/core.py\", line 148, in setup\n        dist.run_commands()\n      File \"/usr/local/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n        self.run_command(cmd)\n      File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/home/tw/foo/env/lib/python3.5/site-packages/setuptools/command/install.py\", line 59, in run\n        return orig.install.run(self)\n      File \"/usr/local/lib/python3.5/distutils/command/install.py\", line 539, in run\n        self.run_command('build')\n      File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/usr/local/lib/python3.5/distutils/command/build.py\", line 135, in run\n        self.run_command(cmd_name)\n      File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 231, in run\n        self.run_command('build_usage')\n      File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 142, in run\n        from borg.archiver import Archiver\n      File \"/home/tw/foo/env/build/borgbackup/borg/archiver.py\", line 33, in <module>\n        from .archive import Archive, ArchiveChecker, CHUNKER_PARAMS\n      File \"/home/tw/foo/env/build/borgbackup/borg/archive.py\", line 29, in <module>\n        import mock\n    ImportError: No module named 'mock'\n    generating usage docs\n    Complete output from command /home/tw/foo/env/bin/python3.5 -c \"import setuptools, tokenize;__file__='/home/tw/foo/env/build/borgbackup/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-rl8izl90-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/tw/foo/env/include/site/python3.5:\n    your setuptools is too old (<12)\n\nsetuptools_scm functionality is degraded\n\nrunning install\n\nrunning build\n\nrunning build_py\n\ncreating build\n\ncreating build/lib.linux-x86_64-3.5\n\ncreating build/lib.linux-x86_64-3.5/borg\n\ncopying borg/archiver.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/upgrader.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/__main__.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/archive.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/fuse.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/platform.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/locking.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/repository.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/lrucache.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/remote.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/__init__.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/xattr.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/helpers.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/cache.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/_version.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/key.py -> build/lib.linux-x86_64-3.5/borg\n\ncopying borg/logger.py -> build/lib.linux-x86_64-3.5/borg\n\ncreating build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/archiver.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/hashindex.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/upgrader.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/archive.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/platform.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/locking.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/chunker.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/repository.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/lrucache.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/crypto.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/benchmark.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/__init__.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/compress.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/xattr.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/helpers.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/key.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncopying borg/testsuite/logger.py -> build/lib.linux-x86_64-3.5/borg/testsuite\n\ncreating build/lib.linux-x86_64-3.5/borg/support\n\ncopying borg/support/argparse.py -> build/lib.linux-x86_64-3.5/borg/support\n\ncopying borg/support/__init__.py -> build/lib.linux-x86_64-3.5/borg/support\n\ncalling custom build steps\n\nrunning build_ext\n\nbuilding 'borg.compress' extension\n\ncreating build/temp.linux-x86_64-3.5\n\ncreating build/temp.linux-x86_64-3.5/borg\n\ngcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/include -I/usr/include -I/usr/local/include/python3.5m -c borg/compress.c -o build/temp.linux-x86_64-3.5/borg/compress.o\n\ngcc -pthread -shared build/temp.linux-x86_64-3.5/borg/compress.o -L/usr/lib -L/usr/lib -llz4 -o build/lib.linux-x86_64-3.5/borg/compress.cpython-35m-x86_64-linux-gnu.so\n\nbuilding 'borg.crypto' extension\n\ngcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/include -I/usr/include -I/usr/local/include/python3.5m -c borg/crypto.c -o build/temp.linux-x86_64-3.5/borg/crypto.o\n\ngcc -pthread -shared build/temp.linux-x86_64-3.5/borg/crypto.o -L/usr/lib -L/usr/lib -lcrypto -o build/lib.linux-x86_64-3.5/borg/crypto.cpython-35m-x86_64-linux-gnu.so\n\nbuilding 'borg.chunker' extension\n\ngcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/chunker.c -o build/temp.linux-x86_64-3.5/borg/chunker.o\n\nIn file included from borg/chunker.c:241:0:\n\nborg/_chunker.c: In function \u2018chunker_process\u2019:\n\nborg/_chunker.c:237:24: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n\n     while(c->remaining > c->window_size && ((sum & chunk_mask) || n < min_size)) {\n\n                        ^\n\nborg/_chunker.c:237:69: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n\n     while(c->remaining > c->window_size && ((sum & chunk_mask) || n < min_size)) {\n\n                                                                     ^\n\ngcc -pthread -shared build/temp.linux-x86_64-3.5/borg/chunker.o -o build/lib.linux-x86_64-3.5/borg/chunker.cpython-35m-x86_64-linux-gnu.so\n\nbuilding 'borg.hashindex' extension\n\ngcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/hashindex.c -o build/temp.linux-x86_64-3.5/borg/hashindex.o\n\nIn file included from borg/hashindex.c:239:0:\n\nborg/_hashindex.c: In function \u2018hashindex_read\u2019:\n\nborg/_hashindex.c:174:15: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n\n     if(length != sizeof(HashHeader) + buckets_length) {\n\n               ^\n\nborg/_hashindex.c: In function \u2018hashindex_write\u2019:\n\nborg/_hashindex.c:278:54: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n\n     if(fwrite(index->buckets, 1, buckets_length, fd) != buckets_length) {\n\n                                                      ^\n\ngcc -pthread -shared build/temp.linux-x86_64-3.5/borg/hashindex.o -o build/lib.linux-x86_64-3.5/borg/hashindex.cpython-35m-x86_64-linux-gnu.so\n\nbuilding 'borg.platform_linux' extension\n\ngcc -pthread -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include/python3.5m -c borg/platform_linux.c -o build/temp.linux-x86_64-3.5/borg/platform_linux.o\n\ngcc -pthread -shared build/temp.linux-x86_64-3.5/borg/platform_linux.o -lacl -o build/lib.linux-x86_64-3.5/borg/platform_linux.cpython-35m-x86_64-linux-gnu.so\n\nrunning build_api\n\nauto-generating API documentation\n\nexamining module borg/archiver.py\n\nexamining module borg/upgrader.py\n\nexamining module borg/__main__.py\n\nexamining module borg/archive.py\n\nexamining module borg/fuse.py\n\nexamining module borg/platform.py\n\nexamining module borg/locking.py\n\nexamining module borg/repository.py\n\nexamining module borg/lrucache.py\n\nexamining module borg/remote.py\n\nexamining module borg/__init__.py\n\nexamining module borg/xattr.py\n\nexamining module borg/helpers.py\n\nexamining module borg/cache.py\n\nexamining module borg/_version.py\n\nexamining module borg/key.py\n\nexamining module borg/logger.py\n\nexamining module borg/platform_darwin.pyx\n\nexamining module borg/platform_linux.pyx\n\nexamining module borg/hashindex.pyx\n\nexamining module borg/compress.pyx\n\nexamining module borg/chunker.pyx\n\nexamining module borg/crypto.pyx\n\nexamining module borg/platform_freebsd.pyx\n\nrunning build_usage\n\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n\n  File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 297, in <module>\n\n    install_requires=install_requires,\n\n  File \"/usr/local/lib/python3.5/distutils/core.py\", line 148, in setup\n\n    dist.run_commands()\n\n  File \"/usr/local/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n\n    self.run_command(cmd)\n\n  File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n\n    cmd_obj.run()\n\n  File \"/home/tw/foo/env/lib/python3.5/site-packages/setuptools/command/install.py\", line 59, in run\n\n    return orig.install.run(self)\n\n  File \"/usr/local/lib/python3.5/distutils/command/install.py\", line 539, in run\n\n    self.run_command('build')\n\n  File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n\n    self.distribution.run_command(command)\n\n  File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n\n    cmd_obj.run()\n\n  File \"/usr/local/lib/python3.5/distutils/command/build.py\", line 135, in run\n\n    self.run_command(cmd_name)\n\n  File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n\n    self.distribution.run_command(command)\n\n  File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n\n    cmd_obj.run()\n\n  File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 231, in run\n\n    self.run_command('build_usage')\n\n  File \"/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n\n    self.distribution.run_command(command)\n\n  File \"/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n\n    cmd_obj.run()\n\n  File \"/home/tw/foo/env/build/borgbackup/setup.py\", line 142, in run\n\n    from borg.archiver import Archiver\n\n  File \"/home/tw/foo/env/build/borgbackup/borg/archiver.py\", line 33, in <module>\n\n    from .archive import Archive, ArchiveChecker, CHUNKER_PARAMS\n\n  File \"/home/tw/foo/env/build/borgbackup/borg/archive.py\", line 29, in <module>\n\n    import mock\n\nImportError: No module named 'mock'\n\ngenerating usage docs\n\n----------------------------------------\nCleaning up...\nCommand /home/tw/foo/env/bin/python3.5 -c \"import setuptools, tokenize;__file__='/home/tw/foo/env/build/borgbackup/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-rl8izl90-record/install-record.txt --single-version-externally-managed --compile --install-headers /home/tw/foo/env/include/site/python3.5 failed with error code 1 in /home/tw/foo/env/build/borgbackup\nStoring debug log for failure in /home/tw/.pip/pip.log\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/364", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/364/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/364/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/364/events", "html_url": "https://github.com/borgbackup/borg/issues/364", "id": 114711794, "node_id": "MDU6SXNzdWUxMTQ3MTE3OTQ=", "number": 364, "title": "\"create\" + disk full makes \"check --repair\" crash", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 5, "created_at": "2015-11-02T23:55:09Z", "updated_at": "2015-11-06T20:05:31Z", "closed_at": "2015-11-06T20:05:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This was found by archiver.test_disk_full.\n\nrepos + corresponding tracebacks: https://paste.thinkmo.de/bqyrsTv6#borg-corrupt-repos.tgz\n\nE.g. repo1:\n\n```\n$ borg check --repair /tmp/mnt/repo\n'check --repair' is an experimental feature that might result in data loss.\nType 'YES' if you understand this and want to continue: YES\nStarting repository check...\nSegment entry data short read [segment 9, offset 575059]: expected 80786, got 65657 bytes\nattempting to recover /tmp/mnt/repo/data/0/9\nLocal Exception.\nTraceback (most recent call last):\n  File \"/home/tw/w/borg/borg/archiver.py\", line 1069, in main\n    exit_code = archiver.run(args)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 1023, in run\n    return args.func(args)\n  File \"/home/tw/w/borg/borg/archiver.py\", line 99, in do_check\n    if repository.check(repair=args.repair):\n  File \"/home/tw/w/borg/borg/repository.py\", line 348, in check\n    self.compact_segments()\n  File \"/home/tw/w/borg/borg/repository.py\", line 230, in compact_segments\n    assert segments[segment] == 0\nAssertionError\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/364/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/364/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/359", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/359/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/359/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/359/events", "html_url": "https://github.com/borgbackup/borg/issues/359", "id": 114535075, "node_id": "MDU6SXNzdWUxMTQ1MzUwNzU=", "number": 359, "title": "rename", "user": {"login": "ClipperS87", "id": 15605975, "node_id": "MDQ6VXNlcjE1NjA1OTc1", "avatar_url": "https://avatars.githubusercontent.com/u/15605975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ClipperS87", "html_url": "https://github.com/ClipperS87", "followers_url": "https://api.github.com/users/ClipperS87/followers", "following_url": "https://api.github.com/users/ClipperS87/following{/other_user}", "gists_url": "https://api.github.com/users/ClipperS87/gists{/gist_id}", "starred_url": "https://api.github.com/users/ClipperS87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ClipperS87/subscriptions", "organizations_url": "https://api.github.com/users/ClipperS87/orgs", "repos_url": "https://api.github.com/users/ClipperS87/repos", "events_url": "https://api.github.com/users/ClipperS87/events{/privacy}", "received_events_url": "https://api.github.com/users/ClipperS87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 4, "created_at": "2015-11-02T06:34:56Z", "updated_at": "2015-11-03T13:12:50Z", "closed_at": "2015-11-02T19:55:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nborg rename reponame::oldname reponame::newname\n# (obviously wrong, due to lack of sample in documentation\"\nborg list reponame\n reponame:newname\n```\n\noops\n\n```\nborg rename reponame::reponame::newname newname\nborg rename: error: argument ARCHIVE: Invalid location format:  \"reponame::reponame::newname\"\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/359/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/342", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/342/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/342/events", "html_url": "https://github.com/borgbackup/borg/issues/342", "id": 113859636, "node_id": "MDU6SXNzdWUxMTM4NTk2MzY=", "number": 342, "title": "investigate reason of centos6 binary slowness", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 2, "created_at": "2015-10-28T16:19:18Z", "updated_at": "2015-10-31T18:53:26Z", "closed_at": "2015-10-31T18:53:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The first pyinstaller-based binaries I made using centos6 were strangely slow, binaries built on debian7 were much faster.\n\nIs it maybe msgpack pure-python fallback? See #259.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/338", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/338/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/338/events", "html_url": "https://github.com/borgbackup/borg/issues/338", "id": 113466820, "node_id": "MDU6SXNzdWUxMTM0NjY4MjA=", "number": 338, "title": "Extracting a path with spaces fails", "user": {"login": "AnttiBoman", "id": 3209996, "node_id": "MDQ6VXNlcjMyMDk5OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3209996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AnttiBoman", "html_url": "https://github.com/AnttiBoman", "followers_url": "https://api.github.com/users/AnttiBoman/followers", "following_url": "https://api.github.com/users/AnttiBoman/following{/other_user}", "gists_url": "https://api.github.com/users/AnttiBoman/gists{/gist_id}", "starred_url": "https://api.github.com/users/AnttiBoman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AnttiBoman/subscriptions", "organizations_url": "https://api.github.com/users/AnttiBoman/orgs", "repos_url": "https://api.github.com/users/AnttiBoman/repos", "events_url": "https://api.github.com/users/AnttiBoman/events{/privacy}", "received_events_url": "https://api.github.com/users/AnttiBoman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2015-10-26T22:43:13Z", "updated_at": "2015-10-27T13:38:52Z", "closed_at": "2015-10-27T13:24:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Borg (0.27.0) fails if you try to extract a path that has spaces. I verified this with multiple paths, and all with spaces failed. I tried it with quotes, apostrophes, backslashes in front of the spaces, and even double quoting and double backslashes, but no luck.\n\n```\n$ borg extract -v repository::archive 'home/username/Desktop/This Has Spaces'\n\nborg: Warning: Include pattern 'home/username/Desktop/This' never matched.\nborg: Warning: Include pattern 'Has' never matched.\nborg: Warning: Include pattern 'Spaces' never matched.\nborg: Exiting with failure status due to previous errors\n```\n\nIt clearly breaks the argument into pieces because of the spaces, whereas it should honour the quoting (of bash shell, in my case).\n\nI'd provide you with a patch, but I'm not that familiar with the source.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/338/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/336", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/336/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/336/events", "html_url": "https://github.com/borgbackup/borg/issues/336", "id": 113304769, "node_id": "MDU6SXNzdWUxMTMzMDQ3Njk=", "number": 336, "title": "borg-freebsd64 binary: Cannot open self", "user": {"login": "breyer", "id": 1859075, "node_id": "MDQ6VXNlcjE4NTkwNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1859075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/breyer", "html_url": "https://github.com/breyer", "followers_url": "https://api.github.com/users/breyer/followers", "following_url": "https://api.github.com/users/breyer/following{/other_user}", "gists_url": "https://api.github.com/users/breyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/breyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/breyer/subscriptions", "organizations_url": "https://api.github.com/users/breyer/orgs", "repos_url": "https://api.github.com/users/breyer/repos", "events_url": "https://api.github.com/users/breyer/events{/privacy}", "received_events_url": "https://api.github.com/users/breyer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 16, "created_at": "2015-10-26T08:16:38Z", "updated_at": "2015-11-07T23:45:39Z", "closed_at": "2015-11-07T23:45:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\ni switched from the pip installation to the borg-freebsd64 binary.\nAfter installation i receive following error:\n\n> root@muenchen:/home/mono # borg\n> Cannot open self /usr/home/mono/borg or archive /usr/home/mono/borg.pkg\n\nit does't occurs if i start borg like that:\n\n> root@muenchen:/home/mono # /usr/local/bin/borg\n> usage: borg [-h]\n>            {serve,init,check,change->passphrase,create,extract,rename,delete,list,mount,info,prune,upgrade,help}\n>           ...\n> Borg 0.27.0 - Deduplicated Backups\n> \n> optional arguments:\n> -h, --help            show this help message and exit\n> \n> Available commands:\n>  {serve,init,check,change->passphrase,create,extract,rename,delete,list,mount,info,prune,upgrade,help}\n\nNot sure what the problem is, but found a similar issue with docker-compose here:\nhttps://github.com/docker/compose/issues/1135\nMay this helps to solve this issue.\n\nFreeBSD version:\n\n> root@muenchen:/home/mono # uname -a\n> FreeBSD muenchen 10.2-RELEASE FreeBSD 10.2-RELEASE #0 r286666: Wed Aug 12 15:26:37 UTC 2015     root@releng1.nyi.freebsd.org:/usr/obj/usr/src/sys/GENERIC  amd64\n\nThanks\nMark\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/334", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/334/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/334/events", "html_url": "https://github.com/borgbackup/borg/issues/334", "id": 113267387, "node_id": "MDU6SXNzdWUxMTMyNjczODc=", "number": 334, "title": "atime is touched at backup time", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 1, "created_at": "2015-10-26T01:03:59Z", "updated_at": "2015-10-26T01:04:40Z", "closed_at": "2015-10-26T01:04:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the atime of backupped files is touched, even on systems supporting O_NOATIME.\n\nthis is due to a typo that happened during a refactoring of the code.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/331", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/331/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/331/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/331/events", "html_url": "https://github.com/borgbackup/borg/issues/331", "id": 113176833, "node_id": "MDU6SXNzdWUxMTMxNzY4MzM=", "number": 331, "title": "locking issue with FUSE mount", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 1, "created_at": "2015-10-24T18:47:48Z", "updated_at": "2016-10-03T11:07:48Z", "closed_at": "2015-10-27T22:01:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reproduce like this:\n\n```\nborg mount repo mnt\nfusermount -u mnt\nborg delete repo\n# will hang here waiting for exclusive lock\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/321", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/321/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/321/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/321/events", "html_url": "https://github.com/borgbackup/borg/issues/321", "id": 112493626, "node_id": "MDU6SXNzdWUxMTI0OTM2MjY=", "number": 321, "title": "review all log levels, adjust default loglevel of logger to INFO", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 1, "created_at": "2015-10-21T01:31:53Z", "updated_at": "2015-10-28T01:05:03Z", "closed_at": "2015-10-28T01:05:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "once we have #302, all log levels need to be reviewed/fixed:\n\ndebug = debug information, for developers\ninfo = normal output, filtered by topical flags\nwarning = some issue occurred, but it was not fatal / not terminating borg, so normal end of operation may still be reached\nerror = some fatal error / exception occurred, borg dies and does not reach the operation's normal end\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/309", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/309/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/309/events", "html_url": "https://github.com/borgbackup/borg/issues/309", "id": 112051469, "node_id": "MDU6SXNzdWUxMTIwNTE0Njk=", "number": 309, "title": "Progress flag doesn't handle unicode gracefully.", "user": {"login": "alraban", "id": 15115939, "node_id": "MDQ6VXNlcjE1MTE1OTM5", "avatar_url": "https://avatars.githubusercontent.com/u/15115939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alraban", "html_url": "https://github.com/alraban", "followers_url": "https://api.github.com/users/alraban/followers", "following_url": "https://api.github.com/users/alraban/following{/other_user}", "gists_url": "https://api.github.com/users/alraban/gists{/gist_id}", "starred_url": "https://api.github.com/users/alraban/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alraban/subscriptions", "organizations_url": "https://api.github.com/users/alraban/orgs", "repos_url": "https://api.github.com/users/alraban/repos", "events_url": "https://api.github.com/users/alraban/events{/privacy}", "received_events_url": "https://api.github.com/users/alraban/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 10, "created_at": "2015-10-19T00:02:56Z", "updated_at": "2015-10-21T01:50:58Z", "closed_at": "2015-10-21T01:50:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "The progress flag sometimes produces corrupted output when ellipsizing with certain unicode characters, presumably because they can have non-standard width, so the next printed progress report doesn't fully erase them.  So for example, a file with kanji in the name will be backed up, and then the following file will look like this:\n\n`3.60 TB O   3.58 TB C   3.58 TB D home/$USERNAME/data3/A...gren's Syndrome.flacd \u6f22 \u5b57 \u6f22 \u5b57 .flac`\n\nThe extra characters stick around until another kanji file is written, or until the backup is completed.  \n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/285", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/285/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/285/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/285/events", "html_url": "https://github.com/borgbackup/borg/issues/285", "id": 111943279, "node_id": "MDU6SXNzdWUxMTE5NDMyNzk=", "number": 285, "title": "lock.exclusive directory can be left behind in certain scenarios", "user": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/14", "html_url": "https://github.com/borgbackup/borg/milestone/14", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/14/labels", "id": 1594971, "node_id": "MDk6TWlsZXN0b25lMTU5NDk3MQ==", "number": 14, "title": "1.1.0b1 - near(er) future goals", "description": "Milestone for 1.1b1 (1.1 beta 1)", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2016-02-20T19:33:25Z", "updated_at": "2016-08-28T02:11:04Z", "due_on": "2016-08-27T07:00:00Z", "closed_at": "2016-08-28T02:11:04Z"}, "comments": 11, "created_at": "2015-10-17T04:22:47Z", "updated_at": "2018-01-12T12:47:58Z", "closed_at": "2016-03-31T17:30:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "it seems that our lock cleanup procedure can sometimes fail to remove locks during shutdown.\n\ni have seen at least one case of this happening, here's a transcript of my console:\n\n```\n(borg)root@angela:/home/anarcat/bin# borg create -v --exclude-caches -e /home/anarcat/mp3/ -e /home/pbuilder/ -e /home/anarcat/video/ -e /home/anarcat/iso/ -e  /home/anarcat/books -e /home/anarcat/books-incoming -e .cache --stats --do-not-cross-mountpoints /media/anarcat/calyx/borg-angela-conv::2015-10-15-test / 2>&1 | grep -v ^U\n^C\n(borg)root@angela:/home/anarcat/bin# borg create --progress --exclude-caches -e /home/anarcat/mp3/ -e /home/pbuilder/ -e /home/anarcat/video/ -e /home/anarcat/iso/ -e  /home/anarcat/books -e /home/anarcat/books-incoming -e .cache --stats --do-not-cross-mountpoints /media/anarcat/calyx/borg-angela-conv::2015-10-15-test /\n^Cborg: Error: Keyboard interrupt.\nTraceback (most recent call last):\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 118, in acquire\n    os.mkdir(self.path)\nFileExistsError: [Errno 17] File exists: '/media/anarcat/calyx/borg-angela-conv/lock.exclusive'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 1033, in main\n    exit_code = archiver.run(sys.argv[1:])\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 989, in run\n    return args.func(args)\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 111, in do_create\n    repository = self.open_repository(args.archive, exclusive=True)\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 46, in open_repository\n    repository = Repository(location.path, create=create, exclusive=exclusive)\n  File \"/home/anarcat/src/borg/borg/repository.py\", line 64, in __init__\n    self.open(self.path, exclusive)\n  File \"/home/anarcat/src/borg/borg/repository.py\", line 138, in open\n    self.lock = UpgradableLock(os.path.join(path, 'lock'), exclusive).acquire()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 248, in acquire\n    self._wait_for_readers_finishing(remove, sleep)\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 266, in _wait_for_readers_finishing\n    self._lock.acquire()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 123, in acquire\n    if timer.timed_out_or_sleep():\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 70, in timed_out_or_sleep\n    self.sleep()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 61, in sleep\n    time.sleep(self.sleep_interval)\nKeyboardInterrupt\n\nborg: Exiting with failure status due to previous errors\n(borg)root@angela:/home/anarcat/bin# borg create --progress -v --exclude-caches -e /home/anarcat/mp3/ -e /home/pbuilder/ -e /home/anarcat/video/ -e /home/anarcat/iso/ -e  /home/anarcat/books -e /home/anarcat/books-incoming -e .cache --stats --do-not-cross-mountpoints /media/anarcat/calyx/borg-angela-conv::2015-10-15-test /\n^Cborg: Error: Keyboard interrupt.\nTraceback (most recent call last):\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 118, in acquire\n    os.mkdir(self.path)\nFileExistsError: [Errno 17] File exists: '/media/anarcat/calyx/borg-angela-conv/lock.exclusive'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 1033, in main\n    exit_code = archiver.run(sys.argv[1:])\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 989, in run\n    return args.func(args)\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 111, in do_create\n    repository = self.open_repository(args.archive, exclusive=True)\n  File \"/home/anarcat/src/borg/borg/archiver.py\", line 46, in open_repository\n    repository = Repository(location.path, create=create, exclusive=exclusive)\n  File \"/home/anarcat/src/borg/borg/repository.py\", line 64, in __init__\n    self.open(self.path, exclusive)\n  File \"/home/anarcat/src/borg/borg/repository.py\", line 138, in open\n    self.lock = UpgradableLock(os.path.join(path, 'lock'), exclusive).acquire()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 248, in acquire\n    self._wait_for_readers_finishing(remove, sleep)\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 266, in _wait_for_readers_finishing\n    self._lock.acquire()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 123, in acquire\n    if timer.timed_out_or_sleep():\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 70, in timed_out_or_sleep\n    self.sleep()\n  File \"/home/anarcat/src/borg/borg/locking.py\", line 61, in sleep\n    time.sleep(self.sleep_interval)\nKeyboardInterrupt\n\nborg: Exiting with failure status due to previous errors\n(borg)root@angela:/home/anarcat/bin# jobs\n(borg)root@angela:/home/anarcat/bin# ps axfu | grep borg\nroot     12308  0.0  0.0  13960  2228 pts/4    S+   20:40   0:00          |                   \\_ grep borg\n(borg)root@angela:/home/anarcat/bin# ls /media/anarcat/calyx/borg-angela-conv/lock.exclusive\nangela.12158-d5c59700\n(borg)root@angela:/home/anarcat/bin# ps 12158\n  PID TTY      STAT   TIME COMMAND\n(borg)root@angela:/home/anarcat/bin# file 12158\n12158: cannot open `12158' (No such file or directory)\n(borg)root@angela:/home/anarcat/bin# file /media/anarcat/calyx/borg-angela-conv/lock.exclusive\n/media/anarcat/calyx/borg-angela-conv/lock.exclusive: directory\n(borg)root@angela:/home/anarcat/bin# ls -al /media/anarcat/calyx/borg-angela-conv/lock.exclusive\ntotal 8\ndrwx------ 2 root    root    4096 oct 15 20:29 .\ndrwxr-xr-x 4 anarcat anarcat 4096 oct 15 20:29 ..\n-rw------- 1 root    root       0 oct 15 20:29 angela.12158-d5c59700\n```\n\nPresumably interrupted during listing.. Would need a test case to\nreproduce reliably, but it's not easy because we need to send an\ninterrupt at just the right moment...\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/285/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/281", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/281/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/281/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/281/events", "html_url": "https://github.com/borgbackup/borg/pull/281", "id": 111942840, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc5Nzg4MDg=", "number": 281, "title": "fix cascading failure with the index conversion code", "user": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-17T04:08:53Z", "updated_at": "2015-10-17T14:01:17Z", "closed_at": "2015-10-17T06:31:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/borgbackup/borg/pulls/281", "html_url": "https://github.com/borgbackup/borg/pull/281", "diff_url": "https://github.com/borgbackup/borg/pull/281.diff", "patch_url": "https://github.com/borgbackup/borg/pull/281.patch", "merged_at": "2015-10-17T06:31:43Z"}, "body": "this resolves bug #269 where the index file could not be\nconverted, completely breaking conversion.\n\nit seems that, during some refactoring, the index conversion code was\ncompletely dropped. this was missed by the unit tests because the repo\ncan still be opened by the constructor even though the index is\ninvalid, so tests need improvements there.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/281/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/277", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/277/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/277/events", "html_url": "https://github.com/borgbackup/borg/issues/277", "id": 111837793, "node_id": "MDU6SXNzdWUxMTE4Mzc3OTM=", "number": 277, "title": "crash with non-ascii ACLs", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 257883699, "node_id": "MDU6TGFiZWwyNTc4ODM2OTk=", "url": "https://api.github.com/repos/borgbackup/borg/labels/Bountysource", "name": "Bountysource", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 2, "created_at": "2015-10-16T13:59:30Z", "updated_at": "2015-10-19T09:41:48Z", "closed_at": "2015-10-19T09:41:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See there: https://github.com/jborg/attic/issues/351\n\nThis can be fixed by just not doing the decode/encode, but processing the information as (undecoded) byte strings.\n\nOn UNIX-like systems filenames are just bytestrings, maybe we should treat ACLs in the same way.\nAs we do not know the encoding, there is no other way anyway. Even if we could find out one \"correct\" encoding, then especially on Samba shares, encoding could be mixed up. Sometimes one even sees total crap there, like double-encoded stuff.\n\nTrying to guess the encoding does not work reliably for many cases.\nTrying to decode and react to UnicodeDecodeErrors by decoding differently also only works for utf-8 (and ascii, which is a subset of utf-8), but does not for all single-byte encodings (because for them, usually all 256 possible values are mapped to characters).\n\nThus: just work with bytestrings, do not try to decode.\n\nNote: this is platform-specific code, so this has to be checked and tested for all supported platforms.\n\n---\n\n:moneybag: [there is a bounty for this](https://www.bountysource.com/issues/27462845-crash-with-non-ascii-acls)\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/277/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/275", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/275/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/275/events", "html_url": "https://github.com/borgbackup/borg/issues/275", "id": 111285336, "node_id": "MDU6SXNzdWUxMTEyODUzMzY=", "number": 275, "title": "Deduplicated size larger than attic", "user": {"login": "ddaff", "id": 5931601, "node_id": "MDQ6VXNlcjU5MzE2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/5931601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ddaff", "html_url": "https://github.com/ddaff", "followers_url": "https://api.github.com/users/ddaff/followers", "following_url": "https://api.github.com/users/ddaff/following{/other_user}", "gists_url": "https://api.github.com/users/ddaff/gists{/gist_id}", "starred_url": "https://api.github.com/users/ddaff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ddaff/subscriptions", "organizations_url": "https://api.github.com/users/ddaff/orgs", "repos_url": "https://api.github.com/users/ddaff/repos", "events_url": "https://api.github.com/users/ddaff/events{/privacy}", "received_events_url": "https://api.github.com/users/ddaff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 239211853, "node_id": "MDU6TGFiZWwyMzkyMTE4NTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/documentation", "name": "documentation", "color": "bfe5bf", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 8, "created_at": "2015-10-13T22:31:10Z", "updated_at": "2015-10-15T23:21:08Z", "closed_at": "2015-10-15T23:19:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Wonder if I'm doing something wrong. I'm seeing a much better deduplication ratio with attic than with borg using the same dataset. The attic repo has 7 days worth of daily data from about 10 servers, mostly persona, mysql and mongo backups. The borg repo has only 2 days worth of the same exact data and is already nearly double the size of the attic repo. Both repos are using encryption, borg repo was created yesterday with 0.27.0 pre-compiled binary on Centos 6.5.\n### Borg 0.27.0\n\n```\nArchive name: nfs2-web1-20151012\nArchive fingerprint: 2d6706e9ce9acb7be3f4d9c5a4de101cd98bcc1276e4899c1221e81839473017\nStart time: Tue Oct 13 04:24:36 2015\nEnd time: Tue Oct 13 04:24:37 2015\nDuration: 1.16 seconds\nNumber of files: 2\n\n                       Original size      Compressed size    Deduplicated size\nThis archive:               15.33 MB             15.34 MB            588.39 kB\nAll archives:              197.95 GB            198.07 GB            111.81 GB\n\n                       Unique chunks         Total chunks\nChunk index:                 1406967              2659644\n```\n### Attic 0.16\n\n```\nArchive name: nfs2-web1-20151012\nArchive fingerprint: 36877cf8c6c79997d6b3435998f42f3c13771e14b256f44bdefab32a2c75d0c6\nStart time: Tue Oct 13 00:14:56 2015\nEnd time: Tue Oct 13 00:15:00 2015\nDuration: 3.51 seconds\nNumber of files: 2\n\n                       Original size      Compressed size    Deduplicated size\nThis archive:               15.32 MB             15.33 MB            616.77 kB\nAll archives:              683.57 GB            319.04 GB             66.40 GB\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/269", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/269/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/269/events", "html_url": "https://github.com/borgbackup/borg/issues/269", "id": 110829558, "node_id": "MDU6SXNzdWUxMTA4Mjk1NTg=", "number": 269, "title": "Index needs to be manually deleted & recreated after conversion from attic repo", "user": {"login": "jscinoz", "id": 850958, "node_id": "MDQ6VXNlcjg1MDk1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/850958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jscinoz", "html_url": "https://github.com/jscinoz", "followers_url": "https://api.github.com/users/jscinoz/followers", "following_url": "https://api.github.com/users/jscinoz/following{/other_user}", "gists_url": "https://api.github.com/users/jscinoz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jscinoz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jscinoz/subscriptions", "organizations_url": "https://api.github.com/users/jscinoz/orgs", "repos_url": "https://api.github.com/users/jscinoz/repos", "events_url": "https://api.github.com/users/jscinoz/events{/privacy}", "received_events_url": "https://api.github.com/users/jscinoz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/7", "html_url": "https://github.com/borgbackup/borg/milestone/7", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/7/labels", "id": 1336252, "node_id": "MDk6TWlsZXN0b25lMTMzNjI1Mg==", "number": 7, "title": "0.28", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2015-10-03T17:43:21Z", "updated_at": "2022-06-06T11:27:44Z", "due_on": null, "closed_at": "2015-11-08T01:20:11Z"}, "comments": 6, "created_at": "2015-10-11T02:40:20Z", "updated_at": "2015-10-20T13:51:49Z", "closed_at": "2015-10-20T13:51:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Migrating this over from a comment on jborg/attic#354.\n\nAfter converting an existing attic repository to a borg repository, while the process completed without errors, any subsequent attempts to use the repository encountered an error when reading the index (unfortunately, I do not have a copy of the stack trace, and had to delete the original attic repository to recover space).\n\nDeleting the index.XXXXX file in the repository and running `borg check` to rebuild it results in a functioning repository once more.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/255", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/255/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/255/events", "html_url": "https://github.com/borgbackup/borg/issues/255", "id": 110127777, "node_id": "MDU6SXNzdWUxMTAxMjc3Nzc=", "number": 255, "title": "ssh_cmd() missing 1 required positional argument: 'location'", "user": {"login": "tgharold", "id": 4880437, "node_id": "MDQ6VXNlcjQ4ODA0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4880437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgharold", "html_url": "https://github.com/tgharold", "followers_url": "https://api.github.com/users/tgharold/followers", "following_url": "https://api.github.com/users/tgharold/following{/other_user}", "gists_url": "https://api.github.com/users/tgharold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgharold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgharold/subscriptions", "organizations_url": "https://api.github.com/users/tgharold/orgs", "repos_url": "https://api.github.com/users/tgharold/repos", "events_url": "https://api.github.com/users/tgharold/events{/privacy}", "received_events_url": "https://api.github.com/users/tgharold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/5", "html_url": "https://github.com/borgbackup/borg/milestone/5", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/5/labels", "id": 1291743, "node_id": "MDk6TWlsZXN0b25lMTI5MTc0Mw==", "number": 5, "title": "0.27", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2015-09-05T09:52:03Z", "updated_at": "2015-10-07T14:37:35Z", "due_on": null, "closed_at": "2015-10-07T13:00:31Z"}, "comments": 2, "created_at": "2015-10-07T00:07:27Z", "updated_at": "2015-10-07T14:24:35Z", "closed_at": "2015-10-07T01:33:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Could be PEBKAC... but I did install the lz4 libraries.\n\n```\n$ pip3 install git+https://github.com/borgbackup/borg.git@master\nYou are using pip version 7.1.0, however version 7.1.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\nCollecting git+https://github.com/borgbackup/borg.git@master\n  Cloning https://github.com/borgbackup/borg.git (to master) to /tmp/pip-955x9xke-build\nRequirement already satisfied (use --upgrade to upgrade): msgpack-python>=0.4.6 in /usr/lib/python3.4/site-packages (from borgbackup==0.26.2.dev100+ng8d529f9)\nInstalling collected packages: borgbackup\n  Found existing installation: borgbackup 0.24.0+1.g8223790\n    Uninstalling borgbackup-0.24.0+1.g8223790:\n      Successfully uninstalled borgbackup-0.24.0+1.g8223790\n  Running setup.py install for borgbackup\nSuccessfully installed borgbackup-0.26.2.dev100+ng8d529f9\n```\n\nRunning the check (even against two different repos)\n\n```\n$ borg check --archives-only ssh://backups.example.com/backup/thomast61p/borgs/borgmatic.borg\nborg: Error: Local Exception.\nTraceback (most recent call last):\n  File \"/usr/lib/python3.4/site-packages/borg/archiver.py\", line 1030, in main\n    exit_code = archiver.run(sys.argv[1:])\n  File \"/usr/lib/python3.4/site-packages/borg/archiver.py\", line 986, in run\n    return args.func(args)\n  File \"/usr/lib/python3.4/site-packages/borg/archiver.py\", line 79, in do_check\n    repository = self.open_repository(args.repository, exclusive=args.repair)\n  File \"/usr/lib/python3.4/site-packages/borg/archiver.py\", line 41, in open_repository\n    repository = RemoteRepository(location, create=create)\n  File \"/usr/lib/python3.4/site-packages/borg/remote.py\", line 137, in __init__\n    args = self.ssh_cmd()\nTypeError: ssh_cmd() missing 1 required positional argument: 'location'\n\nborg: Exiting with failure status due to previous errors\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/255/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/232", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/232/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/232/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/232/events", "html_url": "https://github.com/borgbackup/borg/issues/232", "id": 109299240, "node_id": "MDU6SXNzdWUxMDkyOTkyNDA=", "number": 232, "title": "crash when reading corrupt lock.roster file", "user": {"login": "anarcat", "id": 796623, "node_id": "MDQ6VXNlcjc5NjYyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/796623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anarcat", "html_url": "https://github.com/anarcat", "followers_url": "https://api.github.com/users/anarcat/followers", "following_url": "https://api.github.com/users/anarcat/following{/other_user}", "gists_url": "https://api.github.com/users/anarcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/anarcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anarcat/subscriptions", "organizations_url": "https://api.github.com/users/anarcat/orgs", "repos_url": "https://api.github.com/users/anarcat/repos", "events_url": "https://api.github.com/users/anarcat/events{/privacy}", "received_events_url": "https://api.github.com/users/anarcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/5", "html_url": "https://github.com/borgbackup/borg/milestone/5", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/5/labels", "id": 1291743, "node_id": "MDk6TWlsZXN0b25lMTI5MTc0Mw==", "number": 5, "title": "0.27", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2015-09-05T09:52:03Z", "updated_at": "2015-10-07T14:37:35Z", "due_on": null, "closed_at": "2015-10-07T13:00:31Z"}, "comments": 4, "created_at": "2015-10-01T13:30:13Z", "updated_at": "2015-10-05T22:14:31Z", "closed_at": "2015-10-05T22:14:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "maybe it's just my fiddling around in #231, but when i interrupt `borg convert`, it leaves a `lock.roster` file lying around. then when i try to run it again, i get an exception. i can't reproduce now, unfortunately, but there was an empty `lock.roster` file lying around. doing `rm lock.roster` solve the problem.\n\nmaybe some weird race condition?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/222", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/222/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/222/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/222/events", "html_url": "https://github.com/borgbackup/borg/issues/222", "id": 108778868, "node_id": "MDU6SXNzdWUxMDg3Nzg4Njg=", "number": 222, "title": "Much slower list files with borg 0.26.1 vs. 0.26.0", "user": {"login": "storcium", "id": 13825051, "node_id": "MDQ6VXNlcjEzODI1MDUx", "avatar_url": "https://avatars.githubusercontent.com/u/13825051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/storcium", "html_url": "https://github.com/storcium", "followers_url": "https://api.github.com/users/storcium/followers", "following_url": "https://api.github.com/users/storcium/following{/other_user}", "gists_url": "https://api.github.com/users/storcium/gists{/gist_id}", "starred_url": "https://api.github.com/users/storcium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/storcium/subscriptions", "organizations_url": "https://api.github.com/users/storcium/orgs", "repos_url": "https://api.github.com/users/storcium/repos", "events_url": "https://api.github.com/users/storcium/events{/privacy}", "received_events_url": "https://api.github.com/users/storcium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/5", "html_url": "https://github.com/borgbackup/borg/milestone/5", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/5/labels", "id": 1291743, "node_id": "MDk6TWlsZXN0b25lMTI5MTc0Mw==", "number": 5, "title": "0.27", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2015-09-05T09:52:03Z", "updated_at": "2015-10-07T14:37:35Z", "due_on": null, "closed_at": "2015-10-07T13:00:31Z"}, "comments": 15, "created_at": "2015-09-29T01:40:09Z", "updated_at": "2015-10-07T19:44:56Z", "closed_at": "2015-10-07T14:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Timing listing of files in a repo between borg 0.26.0 and 0.26.1.  The backup source size is about 3TB\n\n[0.26.0]\ntime ./borg list /vault/sn201509281917::vault1-2015-09-27-0900\n...\nreal    0m52.276s\nuser    0m6.108s\nsys     0m11.420s\n\n[0.26.1] - visually much slower line by line, 39 minutes!\n...\nreal    39m52.519s\nuser    39m0.488s\nsys     0m19.992s\n\nsha256sum borg (this is 0.26.0)\n8bb7b0659c3ad78a39e115b9a320735af1ef0da101df19ed436ec2dac20b21ae  borg\n\nsha256sum borg-linux64 (this is 0.26.1)\nd67c53fb7dec1aa94c67a6a768de4913333b07ad82bb343ea75b051e8e8f3d89  borg-linux64\n\nuname -a\nLinux issapl1 3.19.0-25-generic #26~14.04.1-Ubuntu SMP Fri Jul 24 21:16:20 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\ncat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n\nldd --version\nldd (Ubuntu EGLIBC 2.19-0ubuntu6.6) 2.19\nCopyright (C) 2014 Free Software Foundation, Inc.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/222/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/218", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/218/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/218/events", "html_url": "https://github.com/borgbackup/borg/issues/218", "id": 107835565, "node_id": "MDU6SXNzdWUxMDc4MzU1NjU=", "number": 218, "title": "0.26.0 binary: borg mount fails with ImportError, can't find \"queue\" module", "user": {"login": "lfam", "id": 6568228, "node_id": "MDQ6VXNlcjY1NjgyMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6568228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lfam", "html_url": "https://github.com/lfam", "followers_url": "https://api.github.com/users/lfam/followers", "following_url": "https://api.github.com/users/lfam/following{/other_user}", "gists_url": "https://api.github.com/users/lfam/gists{/gist_id}", "starred_url": "https://api.github.com/users/lfam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lfam/subscriptions", "organizations_url": "https://api.github.com/users/lfam/orgs", "repos_url": "https://api.github.com/users/lfam/repos", "events_url": "https://api.github.com/users/lfam/events{/privacy}", "received_events_url": "https://api.github.com/users/lfam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 454180508, "node_id": "MDU6TGFiZWw0NTQxODA1MDg=", "url": "https://api.github.com/repos/borgbackup/borg/labels/cmd:%20mount", "name": "cmd: mount", "color": "112233", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/6", "html_url": "https://github.com/borgbackup/borg/milestone/6", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/6/labels", "id": 1320288, "node_id": "MDk6TWlsZXN0b25lMTMyMDI4OA==", "number": 6, "title": "0.26.1", "description": "fix the binary stuff, make it more compatible, document it", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2015-09-23T12:56:23Z", "updated_at": "2015-09-28T00:14:15Z", "due_on": null, "closed_at": "2015-09-28T00:14:15Z"}, "comments": 4, "created_at": "2015-09-23T01:43:58Z", "updated_at": "2016-10-03T11:07:48Z", "closed_at": "2015-09-27T00:39:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While testing binaries that were recently announced on the ML, the fuse mount feature failed. I have actually been getting FUSE errors intermittently with borg-0.25 and attic-0.16 (most recent release), but this error message is different from what I get from borg-0.25.\n\nI have no idea if this is reproducible but here is what I did to get the failure. I have hidden standard output from the successful commands. \n\n```\n$ ./borg-trusty64 init --encryption=repokey test\n$ ./borg-trusty64 create -C lz4 test::\"notes_$(date -u +\"%FT%T%Z\")\" ~/notes\n$ mkdir restore\n$ ./borg-trusty64 mount test::notes_2015-09-23T01:30:04UTC restore\nborg: loading fuse support failed [ImportError: No module named 'queue']\nborg: Exiting with failure status due to previous errors\n```\n\nI am testing the binaries distributed here:\nhttps://paste.thinkmo.de/NUoRZ2Vr\n\nHere is all the information requested by the README on that page.\n\n```\n$ ./borg-trusty64\nusage: borg-trusty64 [-h]\n[...]\nBorg 0.26.0 - Deduplicated Backups\n[...]\n\n$ sha256sum borg-trusty64\n8bb7b0659c3ad78a39e115b9a320735af1ef0da101df19ed436ec2dac20b21ae  borg-trusty64\n\n$ lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    2\nCore(s) per socket:    2\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 58\nModel name:            Intel(R) Core(TM) i5-3320M CPU @ 2.60GHz\nStepping:              9\nCPU MHz:               1199.960\nCPU max MHz:           3300.0000\nCPU min MHz:           1200.0000\nBogoMIPS:              5188.17\nVirtualization:        VT-x\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              3072K\nNUMA node0 CPU(s):     0-3\n\n$ uname -a\nLinux hostname 4.1.0-2-amd64 #1 SMP Debian 4.1.6-1 (2015-08-23) x86_64 GNU/Linux\n# this is Debian testing / Stretch / what will become Debian 9\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/213", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/213/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/213/events", "html_url": "https://github.com/borgbackup/borg/issues/213", "id": 107402046, "node_id": "MDU6SXNzdWUxMDc0MDIwNDY=", "number": 213, "title": "use pyinstaller to create standalone executables", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811712, "node_id": "MDU6TGFiZWwyMTA4MTE3MTI=", "url": "https://api.github.com/repos/borgbackup/borg/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/6", "html_url": "https://github.com/borgbackup/borg/milestone/6", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/6/labels", "id": 1320288, "node_id": "MDk6TWlsZXN0b25lMTMyMDI4OA==", "number": 6, "title": "0.26.1", "description": "fix the binary stuff, make it more compatible, document it", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2015-09-23T12:56:23Z", "updated_at": "2015-09-28T00:14:15Z", "due_on": null, "closed_at": "2015-09-28T00:14:15Z"}, "comments": 21, "created_at": "2015-09-20T16:22:18Z", "updated_at": "2015-09-27T11:16:36Z", "closed_at": "2015-09-27T11:16:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "pyinstaller has a 3.0.dev2 pre-release now on PyPi (for some platforms git repo code is needed).\n\n```\n . env/bin/activate\ncd borg\npip install -e .\npip install 'pyinstaller==3.0.dev2'\npyinstaller -F -n borg-PLATFORM --hidden-import=logging.config borg/__main__.py\n```\n\nSee issue #214 for latest binaries.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/213/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/209", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/209/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/209/events", "html_url": "https://github.com/borgbackup/borg/issues/209", "id": 107333863, "node_id": "MDU6SXNzdWUxMDczMzM4NjM=", "number": 209, "title": "`borg extract --stdout` with leading slashes fails silently", "user": {"login": "chrysn", "id": 442326, "node_id": "MDQ6VXNlcjQ0MjMyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/442326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrysn", "html_url": "https://github.com/chrysn", "followers_url": "https://api.github.com/users/chrysn/followers", "following_url": "https://api.github.com/users/chrysn/following{/other_user}", "gists_url": "https://api.github.com/users/chrysn/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrysn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrysn/subscriptions", "organizations_url": "https://api.github.com/users/chrysn/orgs", "repos_url": "https://api.github.com/users/chrysn/repos", "events_url": "https://api.github.com/users/chrysn/events{/privacy}", "received_events_url": "https://api.github.com/users/chrysn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-09-19T13:40:06Z", "updated_at": "2015-09-19T16:56:06Z", "closed_at": "2015-09-19T16:56:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "i recently had to restore my .zsh_history file. as many runnign processes might overwrite it, i went for extraction to --stdout (to redirect it to ~/.zsh_history-extracted; i might instead as well have used direct extraction in another directory had i read the changelog of 0.24 before).\n\nwhile\n\n```\nborg extract prometheus:hephaistos.borg::chrysn-full-2015-09-17-10:20 home/chrysn/.zsh_history --stdout >! .zsh_history-borg-stdoutrestored\n```\n\nworked fine,\n\n```\nborg extract prometheus:hephaistos.borg::chrysn-full-2015-09-17-10:20 /home/chrysn/.zsh_history --stdout >! .zsh_history-borg-stdoutrestored-leadingslash\n```\n\ncreated an empty file without indicating any error. at least, it should give an error message when it doesn't find the file at all, but practically, it should either accept the leading slash or immediately err out. the issue is especially present in user directories, where one would be tempted to do `borg extract ... ~/.zsh_history`, which is expanded by the shell to the leading-slash form.\n\nthe borg version used that showed that behavior was 0.23.0, apologies if it's already fixed in later versions.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/204", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/204/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/204/events", "html_url": "https://github.com/borgbackup/borg/issues/204", "id": 106630668, "node_id": "MDU6SXNzdWUxMDY2MzA2Njg=", "number": 204, "title": "st_mtime_ns test fail on netbsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-09-15T19:42:29Z", "updated_at": "2015-09-19T13:19:59Z", "closed_at": "2015-09-17T22:02:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\nself = <borg.testsuite.archiver.ArchiverTestCase testMethod=test_overwrite>\n\n    def test_overwrite(self):\n        self.create_regular_file('file1', size=1024 * 80)\n        self.create_regular_file('dir2/file2', size=1024 * 80)\n        self.cmd('init', self.repository_location)\n        self.cmd('create', self.repository_location + '::test', 'input')\n        # Overwriting regular files and directories should be supported\n        os.mkdir('output/input')\n        os.mkdir('output/input/file1')\n        os.mkdir('output/input/dir2')\n        with changedir('output'):\n            self.cmd('extract', self.repository_location + '::test')\n>       self.assert_dirs_equal('input', 'output/input')\n\npy34/lib/python3.4/site-packages/borg/testsuite/archiver.py:405: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npy34/lib/python3.4/site-packages/borg/testsuite/__init__.py:53: in assert_dirs_equal\n    self._assert_dirs_equal_cmp(diff)\npy34/lib/python3.4/site-packages/borg/testsuite/__init__.py:84: in _assert_dirs_equal_cmp\n    self.assert_equal(d1, d2)\nE   AssertionError: Lists differ: ['dir2', 16832, 1000, 0, 1132527, 0, 2, 1442345591007673321, {}] != ['dir2', 16832, 1000, 0, 1135623, 0, 2, 1442345591007673000, {}]\nE   \nE   First differing element 4:\nE   1132527\nE   1135623\nE   \nE   - ['dir2', 16832, 1000, 0, 1132527, 0, 2, 1442345591007673321, {}]\nE   ?                              ^^^                        ^^^\nE   \nE   + ['dir2', 16832, 1000, 0, 1135623, 0, 2, 1442345591007673000, {}]\nE   ?                             ++ ^                        ^^^\n```\n\nThe order of items in that list is: filename, st_mode, st_uid, st_gid, st_rdev, st_nlink, st_mtime_ns, xattr_dict.\n\nThe st_rdev difference is maybe similar cause as on openbsd, see issue #203.\n\nSo, st_mtime_ns seems to have less resolution here somehow.\nThis difference only happens on netbsd - not on linux, freebsd, darwin.\n\nReproducing:\n\n```\nvagrant up netbsd\nvagrant ssh netbsd\n```\n\nThen:\n\ncd /vagrant/borg\n. borg-env/bin/activate\ncd borg\ntox\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/204/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/203", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/203/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/203/events", "html_url": "https://github.com/borgbackup/borg/issues/203", "id": 106444327, "node_id": "MDU6SXNzdWUxMDY0NDQzMjc=", "number": 203, "title": "st_rdev test fails on openbsd", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-09-14T22:56:44Z", "updated_at": "2015-09-17T20:42:45Z", "closed_at": "2015-09-17T20:42:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\n__________________ ArchiverTestCase.test_basic_functionality ___________________\n\nself = <borg.testsuite.archiver.ArchiverTestCase testMethod=test_basic_functionality>\n\n    def test_basic_functionality(self):\n        have_root = self.create_test_files()\n        self.cmd('init', self.repository_location)\n        self.cmd('create', self.repository_location + '::test', 'input')\n        self.cmd('create', '--stats', self.repository_location + '::test.2', 'input')\n        with changedir('output'):\n            self.cmd('extract', self.repository_location + '::test')\n        self.assert_equal(len(self.cmd('list', self.repository_location).splitlines()), 2)\n        expected =  [\n            'input',\n            'input/bdev',\n            'input/cdev',\n            'input/dir2',\n            'input/dir2/file2',\n            'input/empty',\n            'input/fifo1',\n            'input/file1',\n            'input/flagfile',\n            'input/hardlink',\n            'input/link1',\n        ]\n        if not have_root:\n            # we could not create these device files without (fake)root\n            expected.remove('input/bdev')\n            expected.remove('input/cdev')\n        if has_lchflags:\n            # remove the file we did not backup, so input and output become equal\n            expected.remove('input/flagfile') # this file is UF_NODUMP\n            os.remove(os.path.join('input', 'flagfile'))\n        self.assert_equal(self.cmd('list', '--short', self.repository_location + '::test').splitlines(), expected)\n>       self.assert_dirs_equal('input', 'output/input')\n\npy34/lib/python3.4/site-packages/borg/testsuite/archiver.py:227: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npy34/lib/python3.4/site-packages/borg/testsuite/__init__.py:53: in assert_dirs_equal\n    self._assert_dirs_equal_cmp(diff)\npy34/lib/python3.4/site-packages/borg/testsuite/__init__.py:84: in _assert_dirs_equal_cmp\n    self.assert_equal(d1, d2)\nE   AssertionError: Lists differ: ['file1', 36333, 1000, 0, 137408, 2, 1442270569924832948, {}] != ['file1', 36333, 1000, 0, 137584, 2, 1442270569924832948, {}]\nE   \nE   First differing element 4:\nE   137408\nE   137584\nE   \nE   - ['file1', 36333, 1000, 0, 137408, 2, 1442270569924832948, {}]\nE   ?                               --\nE   \nE   + ['file1', 36333, 1000, 0, 137584, 2, 1442270569924832948, {}]\nE   ?                              ++\n```\n\nThe order of items in that list is: filename, st_mode, st_uid, st_gid, st_rdev, st_nlink, st_mtime_ns, xattr_dict.\n\nSo, why is st_rdev different here? This difference only happens on openbsd - not on linux, freebsd, darwin. What does st_rdev mean for a regular file (on openbsd, on other systems)?\n\nReproducing:\n- vagrant up openbsd\n- vagrant ssh openbsd\n\nThen:\n\n```\ncd /vagrant/borg\n. borg-env/bin/activate\ncd borg\ntox\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/203/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/194", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/194/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/194/events", "html_url": "https://github.com/borgbackup/borg/issues/194", "id": 105517165, "node_id": "MDU6SXNzdWUxMDU1MTcxNjU=", "number": 194, "title": "Tox failures in archiver.py", "user": {"login": "edgewood", "id": 60952, "node_id": "MDQ6VXNlcjYwOTUy", "avatar_url": "https://avatars.githubusercontent.com/u/60952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edgewood", "html_url": "https://github.com/edgewood", "followers_url": "https://api.github.com/users/edgewood/followers", "following_url": "https://api.github.com/users/edgewood/following{/other_user}", "gists_url": "https://api.github.com/users/edgewood/gists{/gist_id}", "starred_url": "https://api.github.com/users/edgewood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edgewood/subscriptions", "organizations_url": "https://api.github.com/users/edgewood/orgs", "repos_url": "https://api.github.com/users/edgewood/repos", "events_url": "https://api.github.com/users/edgewood/events{/privacy}", "received_events_url": "https://api.github.com/users/edgewood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/4", "html_url": "https://github.com/borgbackup/borg/milestone/4", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/4/labels", "id": 1261329, "node_id": "MDk6TWlsZXN0b25lMTI2MTMyOQ==", "number": 4, "title": "0.26", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-08-18T19:49:39Z", "updated_at": "2019-12-17T21:42:56Z", "due_on": null, "closed_at": "2015-09-19T19:02:15Z"}, "comments": 11, "created_at": "2015-09-09T04:43:27Z", "updated_at": "2015-09-14T16:12:51Z", "closed_at": "2015-09-12T23:20:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On current git master I get 53 failures in borg/archiver.py.  Git bisection finds the problematic commit is b3f5231.\n\nAll output at http://pastebin.com/Ykn5C5pr\n\nTravis CI shows green on GitHub, and I can get a mostly clean run in a Debian Jessie chroot (two errors with sparse files that might be chroot related).  There must be something wrong in my environment, but I'm unable to figure out what.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/182", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/182/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/182/events", "html_url": "https://github.com/borgbackup/borg/issues/182", "id": 105095821, "node_id": "MDU6SXNzdWUxMDUwOTU4MjE=", "number": 182, "title": "borg delete repo asks again if you do not answer \"YES\"", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/4", "html_url": "https://github.com/borgbackup/borg/milestone/4", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/4/labels", "id": 1261329, "node_id": "MDk6TWlsZXN0b25lMTI2MTMyOQ==", "number": 4, "title": "0.26", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-08-18T19:49:39Z", "updated_at": "2019-12-17T21:42:56Z", "due_on": null, "closed_at": "2015-09-19T19:02:15Z"}, "comments": 0, "created_at": "2015-09-06T13:53:49Z", "updated_at": "2015-09-06T19:33:24Z", "closed_at": "2015-09-06T19:33:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "workaround: Ctrl-C\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/182/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/178", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/178/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/178/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/178/events", "html_url": "https://github.com/borgbackup/borg/issues/178", "id": 105018689, "node_id": "MDU6SXNzdWUxMDUwMTg2ODk=", "number": 178, "title": "32bit platforms: >=4GiB input file issue with chunker", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/4", "html_url": "https://github.com/borgbackup/borg/milestone/4", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/4/labels", "id": 1261329, "node_id": "MDk6TWlsZXN0b25lMTI2MTMyOQ==", "number": 4, "title": "0.26", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-08-18T19:49:39Z", "updated_at": "2019-12-17T21:42:56Z", "due_on": null, "closed_at": "2015-09-19T19:02:15Z"}, "comments": 5, "created_at": "2015-09-05T10:15:32Z", "updated_at": "2015-09-06T20:42:43Z", "closed_at": "2015-09-06T20:42:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See there: https://github.com/borgbackup/borg/pull/159\n\nCode should be tested before applying that change (reproduce issue with >4GiB files - use a 5GB file to test it). And afterwards (issue fixed?).\n\nAlso: keep an eye on compiler warnings (post them here if you see any).\n\nWould be nice to have this tested on x86 32bit and maybe one other 32bit platform.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/165", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/165/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/165/events", "html_url": "https://github.com/borgbackup/borg/issues/165", "id": 103745056, "node_id": "MDU6SXNzdWUxMDM3NDUwNTY=", "number": 165, "title": "Negative \"all archives\" size?  32-bit integer overflow?", "user": {"login": "sourcejedi", "id": 14057, "node_id": "MDQ6VXNlcjE0MDU3", "avatar_url": "https://avatars.githubusercontent.com/u/14057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sourcejedi", "html_url": "https://github.com/sourcejedi", "followers_url": "https://api.github.com/users/sourcejedi/followers", "following_url": "https://api.github.com/users/sourcejedi/following{/other_user}", "gists_url": "https://api.github.com/users/sourcejedi/gists{/gist_id}", "starred_url": "https://api.github.com/users/sourcejedi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sourcejedi/subscriptions", "organizations_url": "https://api.github.com/users/sourcejedi/orgs", "repos_url": "https://api.github.com/users/sourcejedi/repos", "events_url": "https://api.github.com/users/sourcejedi/events{/privacy}", "received_events_url": "https://api.github.com/users/sourcejedi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2015-08-28T15:58:40Z", "updated_at": "2015-08-29T10:48:56Z", "closed_at": "2015-08-29T02:46:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "![screenshot from 2015-08-28 16-20-47](https://cloud.githubusercontent.com/assets/14057/9550136/7cd23b90-4da1-11e5-96c5-efa1286a0256.png)\n\nborg 0.24.0-57-g034e347\n\nThis is after two archives of 1gb and then 2gb (all zeros).  Then I ran the 2gb with --stat and this weirdess showed up.  Negative 1gb \"all archives\".\n\nBetween the 1gb and 2gb run, `borg info` shows the expected positive number.  After the 2gb run, it shows the silly negative number.\n\nChange 2gb to 3gb and \"all archives\" falls to 24.27kB.\n\nChange it to 700mb.  First run ok.  Add a second 700mb archive, and \"all archives\" falls to -1.75GB.\n\nInteger overflow?! (32-bit signed) It happens on x86_64, although the original screenshot is from a 32-bit test VM.\n\n<pre>\ntruncate -s 1G 1gb\ntruncate -s 2G 2gb\nborg init borg\nborg create -v --stat borg::1gb 1gb\nborg create -v --stat borg::2gb 2gb\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/162", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/162/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/162/events", "html_url": "https://github.com/borgbackup/borg/issues/162", "id": 103141962, "node_id": "MDU6SXNzdWUxMDMxNDE5NjI=", "number": 162, "title": "Directory PermissionError during extraction", "user": {"login": "erikswanson", "id": 210161, "node_id": "MDQ6VXNlcjIxMDE2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/210161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikswanson", "html_url": "https://github.com/erikswanson", "followers_url": "https://api.github.com/users/erikswanson/followers", "following_url": "https://api.github.com/users/erikswanson/following{/other_user}", "gists_url": "https://api.github.com/users/erikswanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikswanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikswanson/subscriptions", "organizations_url": "https://api.github.com/users/erikswanson/orgs", "repos_url": "https://api.github.com/users/erikswanson/repos", "events_url": "https://api.github.com/users/erikswanson/events{/privacy}", "received_events_url": "https://api.github.com/users/erikswanson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/2", "html_url": "https://github.com/borgbackup/borg/milestone/2", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/2/labels", "id": 1193945, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0NQ==", "number": 2, "title": "0.25", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2015-07-06T00:35:03Z", "updated_at": "2015-08-29T14:45:09Z", "due_on": null, "closed_at": "2015-08-29T14:45:09Z"}, "comments": 10, "created_at": "2015-08-26T00:05:50Z", "updated_at": "2015-08-28T22:26:39Z", "closed_at": "2015-08-28T22:26:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to restore from a backup (in a test scenario) but `borg extract` fails every time for me when it gets to a directory.\n\nExtract failure:\n\n```\n[root@eed86ffdf96c /]# borg extract --verbose --umask 0o000 borg:/borg/cah-demo::1440546045 var/lib/cassandra\nWarning: File system encoding is \"ascii\", extracting non-ascii filenames will not be supported.\nvar/lib/cassandra\nvar/lib/cassandra/commitlog\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707708.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707709.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707710.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707711.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707712.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707713.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707714.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707715.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707716.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707717.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707718.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707719.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707720.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707721.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707722.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707723.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707724.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707725.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707726.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707727.log\nvar/lib/cassandra/commitlog/CommitLog-4-1440542707728.log\nborg: Error: Local Exception.\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 903, in main\n    exit_code = archiver.run(sys.argv[1:])\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 859, in run\n    return args.func(args)\n  File \"/usr/lib64/python3.4/site-packages/borg/archiver.py\", line 242, in do_extract\n    archive.extract_item(dirs.pop(-1), stdout=stdout)\n  File \"/usr/lib64/python3.4/site-packages/borg/archive.py\", line 305, in extract_item\n    self.restore_attrs(path, item)\n  File \"/usr/lib64/python3.4/site-packages/borg/archive.py\", line 330, in restore_attrs\n    xattr.setxattr(fd or path, k, v, follow_symlinks=False)\n  File \"/usr/lib64/python3.4/site-packages/borg/xattr.py\", line 101, in setxattr\n    _check(func(path, name, value, len(value) if value else 0, 0), path)\n  File \"/usr/lib64/python3.4/site-packages/borg/xattr.py\", line 36, in _check\n    raise OSError(get_errno(), path)\nPermissionError: [Errno 13] b'/var/lib/cassandra/commitlog'\n\nborg: Exiting with failure status due to previous errors\n```\n\nCheck success:\n\n```\n[root@eed86ffdf96c /]# borg check borg:/borg/cah-demo::1440546045\nStarting repository check...\nRepository check complete, no problems found.\nStarting archive consistency check...\nAnalyzing archive 1440546045 (1/1)\nOrphaned objects check skipped (needs all archives checked)\nArchive consistency check complete, no problems found.\n```\n\nEnvironment details:\n\nI'm running borg in a Docker container, and /var/lib/cassandra is a volume in a different docker container that I have mounted into the borg container by means of --volumes-from. \n\nFrom inside the container running borg:\n\n```\n[root@eed86ffdf96c /]# mount | grep cassandra\n/dev/mapper/storage-volumes on /var/lib/cassandra type xfs (rw,relatime,seclabel,attr2,inode64,logbsize=64k,sunit=128,swidth=128,noquota)\n```\n\nThis is with Docker 1.8.1 on an up-to-date Fedora Atomic 22 install, so selinux is in play at the host level, but will of course appear to be off from within the container.\n\n```\n$ ostree admin status\n* fedora-atomic 64b9c0305c485e07e729f1630ce853653d03484fcb1fa6c527f9360f78f355ae.0\n    Version: 22.96\n    origin refspec: fedora-atomic:fedora-atomic/f22/x86_64/docker-host\n```\n\nIs there any way to completely suppress xattr restoration?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/162/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/154", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/154/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/154/events", "html_url": "https://github.com/borgbackup/borg/issues/154", "id": 101316440, "node_id": "MDU6SXNzdWUxMDEzMTY0NDA=", "number": 154, "title": "chunker params error", "user": {"login": "storcium", "id": 13825051, "node_id": "MDQ6VXNlcjEzODI1MDUx", "avatar_url": "https://avatars.githubusercontent.com/u/13825051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/storcium", "html_url": "https://github.com/storcium", "followers_url": "https://api.github.com/users/storcium/followers", "following_url": "https://api.github.com/users/storcium/following{/other_user}", "gists_url": "https://api.github.com/users/storcium/gists{/gist_id}", "starred_url": "https://api.github.com/users/storcium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/storcium/subscriptions", "organizations_url": "https://api.github.com/users/storcium/orgs", "repos_url": "https://api.github.com/users/storcium/repos", "events_url": "https://api.github.com/users/storcium/events{/privacy}", "received_events_url": "https://api.github.com/users/storcium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/2", "html_url": "https://github.com/borgbackup/borg/milestone/2", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/2/labels", "id": 1193945, "node_id": "MDk6TWlsZXN0b25lMTE5Mzk0NQ==", "number": 2, "title": "0.25", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2015-07-06T00:35:03Z", "updated_at": "2015-08-29T14:45:09Z", "due_on": null, "closed_at": "2015-08-29T14:45:09Z"}, "comments": 7, "created_at": "2015-08-17T01:14:23Z", "updated_at": "2015-08-29T14:44:49Z", "closed_at": "2015-08-29T14:44:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, trying to run a test from https://borgbackup.github.io/borgbackup/usage.html:\n# Backup huge files with little chunk management overhead\n\n$ borg create --chunker-params 19,23,21,4095 /mnt/backup::VMs /srv/VMs\n\nThat is failing:\n\nroot@lab2-b1:/usr/local/ISS/borg# borg create --chunker-params 19,23,21,4095  /vault/repo1::tst1 /data/volume1\nusage: borg create [-h] [-v] [--no-files-cache] [--umask M]\n                   [--remote-path PATH] [-s] [-p] [-e PATTERN]\n                   [--exclude-from EXCLUDEFILE] [--exclude-caches]\n                   [-c SECONDS] [--do-not-cross-mountpoints] [--numeric-owner]\n                   [--timestamp yyyy-mm-ddThh:mm:ss]\n                   [--chunker-params CHUNK_MIN_EXP,CHUNK_MAX_EXP,HASH_MASK_BITS,HASH_WINDOW_SIZE]\n                   [-C COMPRESSION]\n                   ARCHIVE PATH [PATH ...]\nborg create: error: argument --chunker-params: invalid ChunkerParams value: '19,23,21,4095'\n\nThank you,\nAlex\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/144", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/144/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/144/events", "html_url": "https://github.com/borgbackup/borg/issues/144", "id": 99889533, "node_id": "MDU6SXNzdWU5OTg4OTUzMw==", "number": 144, "title": "fix borg check's \"--repair\" mode", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-08-09T11:53:20Z", "updated_at": "2015-08-09T11:53:57Z", "closed_at": "2015-08-09T11:53:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "if one uses --last (or since shortly: gave an archive name), verify_chunks (old method name) was not called because it requires all archives having been checked.\n\nthe problem is that also the final manifest.write() and repository.commit() is done in that method, so all other repair work does not get committed in that case.\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/143", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/143/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/143/events", "html_url": "https://github.com/borgbackup/borg/issues/143", "id": 99888025, "node_id": "MDU6SXNzdWU5OTg4ODAyNQ==", "number": 143, "title": "OS X testing of unusual filenames (non-ascii)", "user": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}, {"id": 210811713, "node_id": "MDU6TGFiZWwyMTA4MTE3MTM=", "url": "https://api.github.com/repos/borgbackup/borg/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/borgbackup/borg/milestones/4", "html_url": "https://github.com/borgbackup/borg/milestone/4", "labels_url": "https://api.github.com/repos/borgbackup/borg/milestones/4/labels", "id": 1261329, "node_id": "MDk6TWlsZXN0b25lMTI2MTMyOQ==", "number": 4, "title": "0.26", "description": "", "creator": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-08-18T19:49:39Z", "updated_at": "2019-12-17T21:42:56Z", "due_on": null, "closed_at": "2015-09-19T19:02:15Z"}, "comments": 24, "created_at": "2015-08-09T11:29:53Z", "updated_at": "2015-09-10T21:03:39Z", "closed_at": "2015-09-10T21:03:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See: borg.testsuite.archiver.ArchiverTestCase.test_unusual_filenames\n\nCurrently tests filenames with blanks and with parens.\nInitially it also tested a filenames with non-ascii characters.\nThe non-ascii filename worked on linux, but failed on OS X (on travis-ci).\n\nAs it is hard to debug such stuff on travis, I removed the non-ascii filename again, but this should be checked by a developer with an OS X machine.\n\nIf a non-developer wants to help, try this in a OS X terminal:\n\n```\nborg init repo\nmkdir input\ntouch input/non_ascii_filename_\u00e4\u00f6\u00fc\u00df\nborg create repo::test input\nmkdir output\ncd output\nborg extract ../repo::test input/non_ascii_filename_\u00e4\u00f6\u00fc\u00df\nls -l input\n```\n\nIs the extracted file there?\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/borgbackup/borg/issues/114", "repository_url": "https://api.github.com/repos/borgbackup/borg", "labels_url": "https://api.github.com/repos/borgbackup/borg/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/borgbackup/borg/issues/114/comments", "events_url": "https://api.github.com/repos/borgbackup/borg/issues/114/events", "html_url": "https://github.com/borgbackup/borg/issues/114", "id": 97314146, "node_id": "MDU6SXNzdWU5NzMxNDE0Ng==", "number": 114, "title": "Error on remote delete (Error: RPC method is not valid)", "user": {"login": "mhe", "id": 45097, "node_id": "MDQ6VXNlcjQ1MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/45097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhe", "html_url": "https://github.com/mhe", "followers_url": "https://api.github.com/users/mhe/followers", "following_url": "https://api.github.com/users/mhe/following{/other_user}", "gists_url": "https://api.github.com/users/mhe/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhe/subscriptions", "organizations_url": "https://api.github.com/users/mhe/orgs", "repos_url": "https://api.github.com/users/mhe/repos", "events_url": "https://api.github.com/users/mhe/events{/privacy}", "received_events_url": "https://api.github.com/users/mhe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 210811710, "node_id": "MDU6TGFiZWwyMTA4MTE3MTA=", "url": "https://api.github.com/repos/borgbackup/borg/labels/bug", "name": "bug", "color": "dd0000", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ThomasWaldmann", "id": 356103, "node_id": "MDQ6VXNlcjM1NjEwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/356103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThomasWaldmann", "html_url": "https://github.com/ThomasWaldmann", "followers_url": "https://api.github.com/users/ThomasWaldmann/followers", "following_url": "https://api.github.com/users/ThomasWaldmann/following{/other_user}", "gists_url": "https://api.github.com/users/ThomasWaldmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThomasWaldmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThomasWaldmann/subscriptions", "organizations_url": "https://api.github.com/users/ThomasWaldmann/orgs", "repos_url": "https://api.github.com/users/ThomasWaldmann/repos", "events_url": "https://api.github.com/users/ThomasWaldmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ThomasWaldmann/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-07-26T12:53:28Z", "updated_at": "2015-07-26T15:46:29Z", "closed_at": "2015-07-26T15:46:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "While I was experimenting with borg I issued a delete command on a repository. This repository was remote repository. The delete command resulted in an error (shown below). Running on Mac OS X, linux (Ubuntu 14.04) remote, borg installed through pip3 on both ends.\n\n```\nYou requested to completely DELETE the repository *including* all archives it contains:\nfirst                                Sat Jul 25 21:15:35 2015\nsecond                               Sat Jul 25 21:16:07 2015\nthird                                Sat Jul 25 21:17:25 2015\nType \"YES\" if you understand this and want to continue.\n\nDo you want to continue? YES\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/site-packages/borg/archiver.py\", line 857, in main\n    exit_code = archiver.run(sys.argv[1:])\n  File \"/usr/local/lib/python3.4/site-packages/borg/archiver.py\", line 813, in run\n    return args.func(args)\n  File \"/usr/local/lib/python3.4/site-packages/borg/archiver.py\", line 291, in do_delete\n    repository.destroy()\n  File \"/usr/local/lib/python3.4/site-packages/borg/remote.py\", line 255, in destroy\n    return self.call('destroy')\n  File \"/usr/local/lib/python3.4/site-packages/borg/remote.py\", line 153, in call\n    for resp in self.call_many(cmd, [args], **kw):\n  File \"/usr/local/lib/python3.4/site-packages/borg/remote.py\", line 188, in call_many\n    raise InvalidRPCMethod(*res)\nborg.remote.InvalidRPCMethod: (82, 101, 109, 111, 116, 101, 32, 84, 114, 97, 99, 101, 98, 97, 99, 107, 32, 98, 121, 32, 66, 111, 114, 103, 32, 48, 46, 50, 51, 46, 48, 10, 84, 114, 97, 99, 101, 98, 97, 99, 107, 32, 40, 109, 111, 115, 116, 32, 114, 101, 99, 101, 110, 116, 32, 99, 97, 108, 108, 32, 108, 97, 115, 116, 41, 58, 10, 32, 32, 70, 105, 108, 101, 32, 34, 47, 117, 115, 114, 47, 108, 111, 99, 97, 108, 47, 108, 105, 98, 47, 112, 121, 116, 104, 111, 110, 51, 46, 52, 47, 100, 105, 115, 116, 45, 112, 97, 99, 107, 97, 103, 101, 115, 47, 98, 111, 114, 103, 47, 114, 101, 109, 111, 116, 101, 46, 112, 121, 34, 44, 32, 108, 105, 110, 101, 32, 55, 53, 44, 32, 105, 110, 32, 115, 101, 114, 118, 101, 10, 32, 32, 32, 32, 114, 97, 105, 115, 101, 32, 73, 110, 118, 97, 108, 105, 100, 82, 80, 67, 77, 101, 116, 104, 111, 100, 40, 109, 101, 116, 104, 111, 100, 41, 10, 98, 111, 114, 103, 46, 114, 101, 109, 111, 116, 101, 46, 73, 110, 118, 97, 108, 105, 100, 82, 80, 67, 77, 101, 116, 104, 111, 100, 58, 32, 100, 101, 115, 116, 114, 111, 121, 10)\nborg: Error: RPC method is not valid\n```\n", "reactions": {"url": "https://api.github.com/repos/borgbackup/borg/issues/114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/borgbackup/borg/issues/114/timeline", "performed_via_github_app": null, "state_reason": "completed"}]