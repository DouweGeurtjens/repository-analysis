[{"url": "https://api.github.com/repos/pallets/click/issues/1649", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1649/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1649/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1649/events", "html_url": "https://github.com/pallets/click/issues/1649", "id": 679926212, "node_id": "MDU6SXNzdWU2Nzk5MjYyMTI=", "number": 1649, "title": "wrong type detected from default=tuple when multiple=True", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 2180257270, "node_id": "MDU6TGFiZWwyMTgwMjU3Mjcw", "url": "https://api.github.com/repos/pallets/click/labels/f:parameters", "name": "f:parameters", "color": "e0647b", "default": false, "description": "feature: input parameter types"}], "state": "closed", "locked": true, "assignee": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 5, "created_at": "2020-08-17T04:37:30Z", "updated_at": "2020-11-13T07:08:54Z", "closed_at": "2020-10-12T01:34:36Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "body": "### Expected Behavior\r\n\r\nWhen creating a parameter with `multiple=True` and `default=(1, 2)`, the type should be detected as `INT`. Calling `get_default` should return the default.\r\n\r\n```python\r\nimport click\r\n\r\nopt = click.Option([\"-c\"], multiple=True, default=(1, 2))\r\nprint(opt.type)\r\nctx = click.Context(click.Command(\"test\"))\r\nvalue = opt.get_default(ctx)\r\nprint(value)\r\n```\r\n\r\n```\r\n(1, 2)\r\n```\r\n\r\n### Actual Behavior\r\n\r\nThe type is detected as `Tuple(INT, INT)`. This then causes problems when `get_default` calls `type_cast_value`.\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/home/david/Projects/click/example.py\", line 5, in <module>\r\n    value = opt.get_default(ctx)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 2248, in get_default\r\n    return super().get_default(ctx, call=call)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1808, in get_default\r\n    return self.type_cast_value(ctx, value)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1840, in type_cast_value\r\n    return tuple(self.type(x or (), self, ctx) for x in value or ())\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1840, in <genexpr>\r\n    return tuple(self.type(x or (), self, ctx) for x in value or ())\r\n  File \"/home/david/Projects/click/src/click/types.py\", line 62, in __call__\r\n    return self.convert(value, param, ctx)\r\n  File \"/home/david/Projects/click/src/click/types.py\", line 749, in convert\r\n    if len(value) != len(self.types):\r\nTypeError: object of type 'int' has no len()\r\n```\r\n\r\nIt fails in a different way if `default=(\"a\", \"b\")`.\r\n\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/home/david/Projects/click/example.py\", line 5, in <module>\r\n    value = opt.get_default(ctx)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 2248, in get_default\r\n    return super().get_default(ctx, call=call)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1808, in get_default\r\n    return self.type_cast_value(ctx, value)\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1840, in type_cast_value\r\n    return tuple(self.type(x or (), self, ctx) for x in value or ())\r\n  File \"/home/david/Projects/click/src/click/core.py\", line 1840, in <genexpr>\r\n    return tuple(self.type(x or (), self, ctx) for x in value or ())\r\n  File \"/home/david/Projects/click/src/click/types.py\", line 62, in __call__\r\n    return self.convert(value, param, ctx)\r\n  File \"/home/david/Projects/click/src/click/types.py\", line 750, in convert\r\n    raise TypeError(\r\nTypeError: It would appear that nargs is set to conflict with the composite type arity.\r\n```\r\n\r\n### Environment\r\n\r\n* Python version: 3.8.5\r\n* Click version: 8.0.0.dev0\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1649/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1548", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1548/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1548/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1548/events", "html_url": "https://github.com/pallets/click/issues/1548", "id": 615244093, "node_id": "MDU6SXNzdWU2MTUyNDQwOTM=", "number": 1548, "title": "show_default and default_map don't play nice together", "user": {"login": "ewjoachim", "id": 1457576, "node_id": "MDQ6VXNlcjE0NTc1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1457576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ewjoachim", "html_url": "https://github.com/ewjoachim", "followers_url": "https://api.github.com/users/ewjoachim/followers", "following_url": "https://api.github.com/users/ewjoachim/following{/other_user}", "gists_url": "https://api.github.com/users/ewjoachim/gists{/gist_id}", "starred_url": "https://api.github.com/users/ewjoachim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ewjoachim/subscriptions", "organizations_url": "https://api.github.com/users/ewjoachim/orgs", "repos_url": "https://api.github.com/users/ewjoachim/repos", "events_url": "https://api.github.com/users/ewjoachim/events{/privacy}", "received_events_url": "https://api.github.com/users/ewjoachim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 4, "created_at": "2020-05-09T19:25:14Z", "updated_at": "2020-11-13T07:08:53Z", "closed_at": "2020-10-12T02:20:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "```python\r\n#!/usr/bin/env python\r\nimport click\r\n\r\n@click.command(context_settings={\r\n    \"show_default\": True, \"default_map\": {\"a\": \"b\"}\r\n})\r\n@click.option(\"-a\", default=\"c\")\r\ndef func(a):\r\n    print(a)\r\n\r\nif __name__ == \"__main__\":\r\n    func()\r\n```\r\n```console\r\n$ # This is expected\r\n$ ./cli.py\r\nb\r\n$ # This is not (default should be b)\r\n$ ./cli.py --help\r\nUsage: cli.py [OPTIONS]\r\n\r\nOptions:\r\n  -a TEXT  [default: c]\r\n  --help   Show this message and exit.  [default: False]\r\n```\r\n\r\n### Expected Behavior\r\n\r\nI expect the default shown to be identical to the one being used.\r\n\r\n### Actual Behavior\r\n\r\nThe default shown was the value provided as `default`, without taking the `default_map` into account\r\n\r\n### Environment\r\n\r\n* Python version: 3.7\r\n* Click version: ``click==7.1.2``\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1513", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1513/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1513/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1513/events", "html_url": "https://github.com/pallets/click/issues/1513", "id": 589278675, "node_id": "MDU6SXNzdWU1ODkyNzg2NzU=", "number": 1513, "title": "Search on click website does not function.", "user": {"login": "tokuchan", "id": 1869319, "node_id": "MDQ6VXNlcjE4NjkzMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1869319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tokuchan", "html_url": "https://github.com/tokuchan", "followers_url": "https://api.github.com/users/tokuchan/followers", "following_url": "https://api.github.com/users/tokuchan/following{/other_user}", "gists_url": "https://api.github.com/users/tokuchan/gists{/gist_id}", "starred_url": "https://api.github.com/users/tokuchan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tokuchan/subscriptions", "organizations_url": "https://api.github.com/users/tokuchan/orgs", "repos_url": "https://api.github.com/users/tokuchan/repos", "events_url": "https://api.github.com/users/tokuchan/events{/privacy}", "received_events_url": "https://api.github.com/users/tokuchan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 104560051, "node_id": "MDU6TGFiZWwxMDQ1NjAwNTE=", "url": "https://api.github.com/repos/pallets/click/labels/docs", "name": "docs", "color": "207de5", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-27T17:09:36Z", "updated_at": "2020-11-13T07:31:05Z", "closed_at": "2020-06-23T17:45:08Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I didn't know where to report this issue, so here it is!\r\n\r\n---\r\n\r\n### Expected Behavior\r\n\r\nWhen I search for, say \"option\" on the website, by entering \"option\" into the search box and clicking \"Go\", the search results page includes relevant results.\r\n\r\n### Actual Behavior\r\n\r\nThe search results page provides almost no functional links. Instead, the vast majority, if not all results are \"Page not found\".\r\n\r\nhttps://click.palletsprojects.com/en/7.x/search/?q=option\r\nhttps://click.palletsprojects.com/en/7.x/options.html?highlight=option\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1513/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1501", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1501/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1501/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1501/events", "html_url": "https://github.com/pallets/click/issues/1501", "id": 581139425, "node_id": "MDU6SXNzdWU1ODExMzk0MjU=", "number": 1501, "title": "Launch/OpenUrl API is broken on Windows with 7.1+", "user": {"login": "ivankravets", "id": 1760209, "node_id": "MDQ6VXNlcjE3NjAyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1760209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivankravets", "html_url": "https://github.com/ivankravets", "followers_url": "https://api.github.com/users/ivankravets/followers", "following_url": "https://api.github.com/users/ivankravets/following{/other_user}", "gists_url": "https://api.github.com/users/ivankravets/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivankravets/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivankravets/subscriptions", "organizations_url": "https://api.github.com/users/ivankravets/orgs", "repos_url": "https://api.github.com/users/ivankravets/repos", "events_url": "https://api.github.com/users/ivankravets/events{/privacy}", "received_events_url": "https://api.github.com/users/ivankravets/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/8", "html_url": "https://github.com/pallets/click/milestone/8", "labels_url": "https://api.github.com/repos/pallets/click/milestones/8/labels", "id": 5304202, "node_id": "MDk6TWlsZXN0b25lNTMwNDIwMg==", "number": 8, "title": "7.1.2", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-04-13T18:02:29Z", "updated_at": "2020-04-27T21:50:22Z", "due_on": null, "closed_at": "2020-04-27T21:50:22Z"}, "comments": 2, "created_at": "2020-03-14T10:09:52Z", "updated_at": "2020-11-13T07:45:49Z", "closed_at": "2020-04-27T21:06:55Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "### Expected Behavior\r\n\r\n`click.launch()` API is broken with 7.1 on Windows. We are going to have a quick release of @PlatformIO and lock Click to <7.1. Something is going wrong with Click last time.\r\n\r\n```\r\n>>> import click\r\n>>> click.__version___\r\n>>> 7.1.1\r\n>>> click.launch(\"https://github.com?click_7_1=is_broken\")\r\n>>> The system cannot find the file 'https://github.com?click_7_1=is_broken'\r\n>>> 1\r\n```\r\n\r\n### Actual Behavior\r\n\r\nEverything works on Click < 7.1. See changes:\r\n\r\n- https://github.com/pallets/click/blob/7.0/click/_termui_impl.py#L503\r\n- https://github.com/pallets/click/blob/master/src/click/_termui_impl.py#L560\r\n\r\n### Environment\r\n\r\n* Python version: No matter\r\n* Click version: 7.1+\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1501/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1496", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1496/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1496/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1496/events", "html_url": "https://github.com/pallets/click/pull/1496", "id": 578112728, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1NzU0MTEx", "number": 1496, "title": "ClickException goes to stderr", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/7", "html_url": "https://github.com/pallets/click/milestone/7", "labels_url": "https://api.github.com/repos/pallets/click/milestones/7/labels", "id": 5183756, "node_id": "MDk6TWlsZXN0b25lNTE4Mzc1Ng==", "number": 7, "title": "7.1.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-03-09T18:06:25Z", "updated_at": "2020-03-09T18:51:27Z", "due_on": null, "closed_at": "2020-03-09T18:51:27Z"}, "comments": 0, "created_at": "2020-03-09T18:38:24Z", "updated_at": "2020-11-13T07:31:27Z", "closed_at": "2020-03-09T18:41:49Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "draft": false, "pull_request": {"url": "https://api.github.com/repos/pallets/click/pulls/1496", "html_url": "https://github.com/pallets/click/pull/1496", "diff_url": "https://github.com/pallets/click/pull/1496.diff", "patch_url": "https://github.com/pallets/click/pull/1496.patch", "merged_at": "2020-03-09T18:41:49Z"}, "body": "Misplaced paren caused `file` kwarg to get ignored by `format` rather than passed to `echo`.\r\n\r\nfixes #1495 ", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1496/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/pallets/click/issues/1495", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1495/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1495/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1495/events", "html_url": "https://github.com/pallets/click/issues/1495", "id": 578083065, "node_id": "MDU6SXNzdWU1NzgwODMwNjU=", "number": 1495, "title": "ClickException message goes to stdout instead of stderr with version 7.1", "user": {"login": "greschd", "id": 5692808, "node_id": "MDQ6VXNlcjU2OTI4MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5692808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greschd", "html_url": "https://github.com/greschd", "followers_url": "https://api.github.com/users/greschd/followers", "following_url": "https://api.github.com/users/greschd/following{/other_user}", "gists_url": "https://api.github.com/users/greschd/gists{/gist_id}", "starred_url": "https://api.github.com/users/greschd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greschd/subscriptions", "organizations_url": "https://api.github.com/users/greschd/orgs", "repos_url": "https://api.github.com/users/greschd/repos", "events_url": "https://api.github.com/users/greschd/events{/privacy}", "received_events_url": "https://api.github.com/users/greschd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/7", "html_url": "https://github.com/pallets/click/milestone/7", "labels_url": "https://api.github.com/repos/pallets/click/milestones/7/labels", "id": 5183756, "node_id": "MDk6TWlsZXN0b25lNTE4Mzc1Ng==", "number": 7, "title": "7.1.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-03-09T18:06:25Z", "updated_at": "2020-03-09T18:51:27Z", "due_on": null, "closed_at": "2020-03-09T18:51:27Z"}, "comments": 5, "created_at": "2020-03-09T17:49:05Z", "updated_at": "2020-11-13T07:46:06Z", "closed_at": "2020-03-09T18:42:08Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Thanks a lot for ``click`` - absolutely fantastic project. \r\n\r\nI've noticed the following change when upgrading to 7.1, and am not sure if it's intentional or not:\r\n\r\n### Expected Behavior\r\n\r\nWhen raising ``click.ClickException``, the corresponding ``Error: <message>`` goes to ``stderr`` using click version 7.0.\r\n\r\nMinimal reproducing code:\r\n\r\n```python\r\nimport click\r\n\r\n@click.command()\r\ndef run():\r\n    raise click.ClickException('exception message')\r\n\r\nif __name__ == '__main__':\r\n    run()\r\n```\r\n```bash\r\npython <filename>.py 1> stdout 2> stderr\r\n```\r\n\r\n### Actual Behavior\r\n\r\nWith version 7.1, the ``Error: exception message`` ends up in ``stdout`` instead of ``stderr``.\r\n\r\n### Environment\r\n\r\n* Python version: Python 3.7.5\r\n* Click version: 7.1\r\n* OS: Ubuntu 18.04 [through WSL1]\r\n* Shell: GNU bash, version 4.4.20\r\n\r\n### Additional comments\r\n\r\nAs mentioned above I'm not sure if this is an intended change, but I couldn't find any mention on the [Changelog](https://click.palletsprojects.com/en/7.x/changelog/#version-7-1), and [this part](https://click.palletsprojects.com/en/7.x/exceptions/#which-exceptions-exist) of the docs still referes to ``show`` being printed to ``stderr``.\r\n\r\nHappy to do some more digging if this happens only on my system.\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1289", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1289/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1289/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1289/events", "html_url": "https://github.com/pallets/click/issues/1289", "id": 440477560, "node_id": "MDU6SXNzdWU0NDA0Nzc1NjA=", "number": 1289, "title": "With `prompt=True` does not work with `click.Choice` and `multiple=True`", "user": {"login": "jcrotts", "id": 29685007, "node_id": "MDQ6VXNlcjI5Njg1MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/29685007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcrotts", "html_url": "https://github.com/jcrotts", "followers_url": "https://api.github.com/users/jcrotts/followers", "following_url": "https://api.github.com/users/jcrotts/following{/other_user}", "gists_url": "https://api.github.com/users/jcrotts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcrotts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcrotts/subscriptions", "organizations_url": "https://api.github.com/users/jcrotts/orgs", "repos_url": "https://api.github.com/users/jcrotts/repos", "events_url": "https://api.github.com/users/jcrotts/events{/privacy}", "received_events_url": "https://api.github.com/users/jcrotts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 4, "created_at": "2019-05-05T18:58:59Z", "updated_at": "2020-11-13T08:30:57Z", "closed_at": "2019-05-06T21:26:41Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "body": "With `prompt=True` this does not work with 7.0\r\n```\r\n@click.option('--environments', \r\n   prompt=True, \r\n   type=click.Choice(['prod','stg','dev']),\r\n   show_default=True,\r\n   multiple=True,\r\n   default=('prod'))\r\n```\r\n\r\n### Error\r\n> Environments (prod, stg, dev): [('prod',)]: stg\r\n> Error: invalid choice: p. (choose from prod, stg, dev)\r\n> Environments (prod, stg, dev): [('prod',)]: ('stg',)\r\n> Error: invalid choice: (. (choose from prod, stg, dev)\r\n\r\n_Originally posted by @NargiT in https://github.com/pallets/click/issues/1246#issuecomment-488970315_", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1289/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1231", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1231/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1231/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1231/events", "html_url": "https://github.com/pallets/click/issues/1231", "id": 411068308, "node_id": "MDU6SXNzdWU0MTEwNjgzMDg=", "number": 1231, "title": "Wrong line endings (CRCRLF) in the output win+py27", "user": {"login": "atugushev", "id": 7377671, "node_id": "MDQ6VXNlcjczNzc2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/7377671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atugushev", "html_url": "https://github.com/atugushev", "followers_url": "https://api.github.com/users/atugushev/followers", "following_url": "https://api.github.com/users/atugushev/following{/other_user}", "gists_url": "https://api.github.com/users/atugushev/gists{/gist_id}", "starred_url": "https://api.github.com/users/atugushev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atugushev/subscriptions", "organizations_url": "https://api.github.com/users/atugushev/orgs", "repos_url": "https://api.github.com/users/atugushev/repos", "events_url": "https://api.github.com/users/atugushev/events{/privacy}", "received_events_url": "https://api.github.com/users/atugushev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 1, "created_at": "2019-02-16T12:27:34Z", "updated_at": "2020-11-13T08:01:56Z", "closed_at": "2020-02-24T01:15:49Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Click generates output with `\\r\\r\\n` line endings. I've prepared a test to demonstrate it. See PR #1232 and failed jobs on [appveyour](https://ci.appveyor.com/project/pallets/click/builds/22420449).\r\n\r\n##### Environment Versions\r\n\r\n1. OS Type: Windows\r\n1. Python version: 2.7\r\n1. click version:  7.0\r\n\r\n##### Steps to replicate\r\n\r\n1. Prepare testfile.py\r\n\r\n```\r\ncat << EOF > testfile.py\r\nimport click\r\n\r\n@click.command()\r\n@click.option('--foo', help='bar')\r\ndef cli(foo):\r\n    click.echo(foo)\r\n\r\nif __name__ == '__main__':\r\n    cli()\r\nEOF\r\n```\r\n\r\n2. `python testfile.py --help`\r\n\r\n##### Expected result\r\n\r\nExpecting `\\r\\n` line endings.\r\n\r\n```\r\nUsage: testfile.py [OPTIONS]\r\n\r\nOptions:\r\n  --foo TEXT  bar\r\n  --help      Show this message and exit.\r\n```\r\n\r\n##### Actual result\r\n\r\nGot `\\r\\r\\n` line endings.\r\n\r\n```\r\nUsage: testfile.py [OPTIONS]\r\n\r\n\r\nOptions:\r\n\r\n  --foo TEXT  bar\r\n\r\n  --help      Show this message and exit.\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1193", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1193/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1193/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1193/events", "html_url": "https://github.com/pallets/click/issues/1193", "id": 394166411, "node_id": "MDU6SXNzdWUzOTQxNjY0MTE=", "number": 1193, "title": "Result's mix_stderr conflates an empty stderr with not having separate streams", "user": {"login": "Julian", "id": 329822, "node_id": "MDQ6VXNlcjMyOTgyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/329822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Julian", "html_url": "https://github.com/Julian", "followers_url": "https://api.github.com/users/Julian/followers", "following_url": "https://api.github.com/users/Julian/following{/other_user}", "gists_url": "https://api.github.com/users/Julian/gists{/gist_id}", "starred_url": "https://api.github.com/users/Julian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Julian/subscriptions", "organizations_url": "https://api.github.com/users/Julian/orgs", "repos_url": "https://api.github.com/users/Julian/repos", "events_url": "https://api.github.com/users/Julian/events{/privacy}", "received_events_url": "https://api.github.com/users/Julian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 0, "created_at": "2018-12-26T13:18:52Z", "updated_at": "2020-11-13T08:02:04Z", "closed_at": "2020-02-17T01:13:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "In trying to move to click's new support for not mixing stdout and stderr, I encountered that click misinterprets an empty stderr as not having asked to not mix stdout and stderr.\r\n\r\nhttps://github.com/pallets/click/blob/20a2bd8a13/click/testing.py#L105-L106 looks like the offending lines.\r\n\r\nFailing test case:\r\n\r\n```\r\nimport click\r\nfrom click.testing import CliRunner\r\n@click.command()\r\ndef cli_empty_stderr():\r\n    click.echo(\"stdout\")\r\n\r\nrunner = CliRunner(mix_stderr=False)\r\n\r\nresult = runner.invoke(cli_empty_stderr)\r\n\r\nassert result.output == 'stdout\\n'\r\nassert result.stdout == 'stdout\\n'\r\nassert result.stderr == ''\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1193/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1193/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1134", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1134/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1134/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1134/events", "html_url": "https://github.com/pallets/click/issues/1134", "id": 367060159, "node_id": "MDU6SXNzdWUzNjcwNjAxNTk=", "number": 1134, "title": "Click 7.0 ctx.exit() hangs.", "user": {"login": "msapiro", "id": 1622335, "node_id": "MDQ6VXNlcjE2MjIzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1622335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msapiro", "html_url": "https://github.com/msapiro", "followers_url": "https://api.github.com/users/msapiro/followers", "following_url": "https://api.github.com/users/msapiro/following{/other_user}", "gists_url": "https://api.github.com/users/msapiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/msapiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msapiro/subscriptions", "organizations_url": "https://api.github.com/users/msapiro/orgs", "repos_url": "https://api.github.com/users/msapiro/repos", "events_url": "https://api.github.com/users/msapiro/events{/privacy}", "received_events_url": "https://api.github.com/users/msapiro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-10-05T04:58:55Z", "updated_at": "2020-11-13T07:45:48Z", "closed_at": "2020-04-27T21:57:16Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "This is a mysterious issue. I an a GNU Mailman developer and more detail is at https://gitlab.com/mailman/mailman/issues/520. I have narrowed the cause to the commit at https://github.com/pallets/click/pull/1098/commits/1602436cd1bc65841ac0ac3b2ebe9ff94e7d1941.\r\n\r\nWe use click for our `mailman` command interface. The `mailman` command has a number of sub-commands. The issue is two of these sub-commands under some conditions call `ctx.exit()` and instead of exiting at that point, the process just hangs and never exits until it is manually killed. Further, the sub-commands all have their own --help and that too prints the help and hangs, but the main `mailman --help` does exit normally after printing the help.\r\n\r\nThis may have something to do with how we implement the sub-commands and I will try to provide more detail upon request.\r\n\r\nThe mystery is this hanging behavior only occurs in certain environments. I have observed it on three different Ubuntu 16.04 machines with Python 3.5.2 and bash and also on one of those with tcsh. I am unable to duplicate it on Mac OS 10.13.6 with Python 3.7.2. Another developer has tried and can't reproduce it with combinations of Python 3.6 and 3.7 under bash and zsh. It also doesn't hang under Python 3.5, 3.6 or 3.7 on our GitLab CI.\r\n\r\nAlso, I have run tox against the HEAD of the click master branch on one of the Ubuntu 16.04 machines and both py35 and py27 pass 196 tests with one expected failure.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1134/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1101", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1101/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1101/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1101/events", "html_url": "https://github.com/pallets/click/issues/1101", "id": 354902909, "node_id": "MDU6SXNzdWUzNTQ5MDI5MDk=", "number": 1101, "title": "CliRunner prompt input echos twice on Python 2", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 4, "created_at": "2018-08-28T21:02:48Z", "updated_at": "2021-04-29T00:13:48Z", "closed_at": "2021-04-14T14:52:24Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "body": "```python\r\nimport click\r\nfrom click.testing import CliRunner\r\n\r\n@click.command()\r\ndef cli():\r\n    prompt(\"value\")\r\n    click.echo(\"done\")\r\n\r\nrunner = CliRunner(echo_stdin=True)\r\nresult = runner.invoke(cli, input=\"test\")\r\nprint(result.output)\r\n```\r\n\r\nPython 3 output (correct):\r\n\r\n```\r\nvalue: test\r\ndone\r\n```\r\n\r\nPython 2 output:\r\n\r\n```\r\nvalue: testtest\r\ndone\r\n```\r\n\r\nI went back and this appears to be the case in every version since 1.x. The issue seems to be with the `visible_input` function in `CliRunner.isolation`. It uses `input` after that has been wrapped in `EchoingStdin`. It appears to work in Python 3 due to some weird lookup behavior, but that appears to be an accident.  There are no tests for `echo_stdin` and `prompt` at the same time.\r\n\r\nIt didn't show up in the docs because the docs runner overrode `isolation` with different code that had `visible_input` pull from the original input and only replaced `sys.stdin` with the EchoingStdin wrapper, rather than both with the wrapper. While porting the docs runner to pallets-sphinx-themes, I removed that code in favor of simpler subclassing, and noticed that the docs had double input, which led me to discover the full issue.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1066", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1066/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1066/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1066/events", "html_url": "https://github.com/pallets/click/issues/1066", "id": 340005665, "node_id": "MDU6SXNzdWUzNDAwMDU2NjU=", "number": 1066, "title": "When wrapping text, the first line of a subsequent paragraph is wrong.", "user": {"login": "pwhipp", "id": 1237673, "node_id": "MDQ6VXNlcjEyMzc2NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1237673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pwhipp", "html_url": "https://github.com/pwhipp", "followers_url": "https://api.github.com/users/pwhipp/followers", "following_url": "https://api.github.com/users/pwhipp/following{/other_user}", "gists_url": "https://api.github.com/users/pwhipp/gists{/gist_id}", "starred_url": "https://api.github.com/users/pwhipp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pwhipp/subscriptions", "organizations_url": "https://api.github.com/users/pwhipp/orgs", "repos_url": "https://api.github.com/users/pwhipp/repos", "events_url": "https://api.github.com/users/pwhipp/events{/privacy}", "received_events_url": "https://api.github.com/users/pwhipp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 5, "created_at": "2018-07-10T21:01:48Z", "updated_at": "2020-11-13T08:01:58Z", "closed_at": "2020-02-23T20:02:58Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "In click 6.7, python 3.6.4\r\n\r\nThis help text for an option:\r\n`'x\\n\\nI am going to get broken in the wrong place.\\n'`\r\n\r\nLooks fine:\r\n```\r\n  --test TEXT                     x\r\n                                  \r\n                                  I am going to get broken in the wrong\r\n                                  place.\r\n```\r\n\r\nBut if we make our first paragraph last line a bit longer:\r\n`'This will break the next paragraph.\\n\\nI am going to get broken in the wrong place.\\n'`\r\n\r\nThe line position for the first paragraph is carried forward incorrectly when wrapping the first line of the following paragraph so it breaks the line in the wrong place:\r\n```\r\n  --test TEXT                     This will break the next paragraph.\r\n                                  \r\n                                  I am\r\n                                  going to get broken in the wrong place.\r\n```\r\nThe result should be:\r\n```\r\n  --test TEXT                     This will break the next paragraph.\r\n                                  \r\n                                  I am going to get broken in the wrong\r\n                                  place.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1066/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1066/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1064", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1064/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1064/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1064/events", "html_url": "https://github.com/pallets/click/issues/1064", "id": 339357715, "node_id": "MDU6SXNzdWUzMzkzNTc3MTU=", "number": 1064, "title": "stdin click.File has `.name` attribute when running from CLI, but doesn't when using `CliRunner`", "user": {"login": "nils-werner", "id": 88704, "node_id": "MDQ6VXNlcjg4NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/88704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nils-werner", "html_url": "https://github.com/nils-werner", "followers_url": "https://api.github.com/users/nils-werner/followers", "following_url": "https://api.github.com/users/nils-werner/following{/other_user}", "gists_url": "https://api.github.com/users/nils-werner/gists{/gist_id}", "starred_url": "https://api.github.com/users/nils-werner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nils-werner/subscriptions", "organizations_url": "https://api.github.com/users/nils-werner/orgs", "repos_url": "https://api.github.com/users/nils-werner/repos", "events_url": "https://api.github.com/users/nils-werner/events{/privacy}", "received_events_url": "https://api.github.com/users/nils-werner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 2202112960, "node_id": "MDU6TGFiZWwyMjAyMTEyOTYw", "url": "https://api.github.com/repos/pallets/click/labels/f:test%20runner", "name": "f:test runner", "color": "e0647b", "default": false, "description": "feature: cli test runner"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 1, "created_at": "2018-07-09T08:46:11Z", "updated_at": "2020-11-13T07:18:50Z", "closed_at": "2020-08-14T06:20:31Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "### Expected Result\r\n\r\n`@click.argument('infile', type=click.File('r'))` has attribute `name` in all invokation scenarios\r\n\r\n### Actual result\r\n\r\n`@click.argument('infile', type=click.File('r'))` doesn't have attribute `name` when using `click.testing.CliRunner.invoke()`\r\n\r\n### Steps to reproduce\r\n\r\n    @click.command()\r\n    @click.argument('infile', type=click.File('r'))\r\n    def test(infile):\r\n        print(infile)\r\n        print(infile.name)\r\n    test()\r\n\r\nrun as\r\n\r\n    python test.py -\r\n\r\nreturns\r\n\r\n    <_io.TextIOWrapper name='<stdin>' mode='r' encoding='UTF-8'>\r\n    <stdin>\r\n\r\nwhereas\r\n\r\n    @click.command()\r\n    @click.argument('infile', type=click.File('r'))\r\n    def test(infile):\r\n        print(infile)\r\n        print(infile.name)  # Raises AttributeError\r\n\r\n    from click.testing import CliRunner\r\n\r\n    runner = CliRunner()\r\n    result = runner.invoke(test, ['-'], input=\"\")\r\n    print(result.output)\r\n    print(result)\r\n\r\nreturns\r\n\r\n    <_io.TextIOWrapper encoding='utf-8'>\r\n\r\n    <Result AttributeError(\"'_io.BytesIO' object has no attribute 'name'\",)>", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1026", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1026/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1026/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1026/events", "html_url": "https://github.com/pallets/click/issues/1026", "id": 326996572, "node_id": "MDU6SXNzdWUzMjY5OTY1NzI=", "number": 1026, "title": "click.edit() Support Editor Paths Containing Spaces", "user": {"login": "heyglen", "id": 6285388, "node_id": "MDQ6VXNlcjYyODUzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6285388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heyglen", "html_url": "https://github.com/heyglen", "followers_url": "https://api.github.com/users/heyglen/followers", "following_url": "https://api.github.com/users/heyglen/following{/other_user}", "gists_url": "https://api.github.com/users/heyglen/gists{/gist_id}", "starred_url": "https://api.github.com/users/heyglen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heyglen/subscriptions", "organizations_url": "https://api.github.com/users/heyglen/orgs", "repos_url": "https://api.github.com/users/heyglen/repos", "events_url": "https://api.github.com/users/heyglen/events{/privacy}", "received_events_url": "https://api.github.com/users/heyglen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 3, "created_at": "2018-05-28T11:37:16Z", "updated_at": "2020-11-13T07:45:47Z", "closed_at": "2020-02-24T03:11:49Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "**Environment**\r\n* Python 3.6.5\r\n* click 6.7\r\n* Windows 7\r\n\r\nWhen using click.edit(), an editor with a space in the path throws an error. For example :  \"C:\\Program Files\\Sublime Text 3\\sublime_text.exe\"\r\n\r\nIf I put quotes around the path name in the subprocess.Popen call [here](https://github.com/pallets/click/blob/master/click/_termui_impl.py#L425) the problem is fixed.\r\n\r\n**Before**\r\n```python\r\n            c = subprocess.Popen('%s \"%s\"' % (editor, filename),\r\n                                 env=environ, shell=True)\r\n```\r\n\r\n**After**\r\n```python\r\n            c = subprocess.Popen('\"%s\" \"%s\"' % (editor, filename),\r\n                                 env=environ, shell=True)\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1026/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1024", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1024/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1024/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1024/events", "html_url": "https://github.com/pallets/click/issues/1024", "id": 326311689, "node_id": "MDU6SXNzdWUzMjYzMTE2ODk=", "number": 1024, "title": "Options same shorthand letter overlap", "user": {"login": "smarlowucf", "id": 8006658, "node_id": "MDQ6VXNlcjgwMDY2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8006658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smarlowucf", "html_url": "https://github.com/smarlowucf", "followers_url": "https://api.github.com/users/smarlowucf/followers", "following_url": "https://api.github.com/users/smarlowucf/following{/other_user}", "gists_url": "https://api.github.com/users/smarlowucf/gists{/gist_id}", "starred_url": "https://api.github.com/users/smarlowucf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smarlowucf/subscriptions", "organizations_url": "https://api.github.com/users/smarlowucf/orgs", "repos_url": "https://api.github.com/users/smarlowucf/repos", "events_url": "https://api.github.com/users/smarlowucf/events{/privacy}", "received_events_url": "https://api.github.com/users/smarlowucf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-05-24T21:59:46Z", "updated_at": "2020-11-13T09:20:34Z", "closed_at": "2018-06-20T17:41:35Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "click==6.7\r\nPython 3.6.5\r\n\r\nIf you have two options which share a letter but have different case the lowercase option is placed as the value for the uppercase option when only it is provided:\r\n\r\nExample:\r\n```\r\n  -r, --region TEXT\r\n  -R, --running-instance TEXT\r\n```\r\n\r\n`> ... -r us-west-1`\r\n\r\nThis passes `running_instance=\"us-west-1\"` to the method.\r\n\r\nWhereas using both works fine:\r\n\r\n`> ... -r us-west-1 -R instance-123`\r\n\r\nPasses `running_instance=\"instance-123\", region=\"us-west-1\"`\r\n\r\nUpdate: This happens to the first option no matter the case:\r\n\r\nExample 2:\r\n```\r\n  -R, --running-instance TEXT\r\n  -r, --region TEXT\r\n```\r\n\r\n`> ... -R instance-123`\r\n\r\nYields `region=\"instance-123\"`.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/1021", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/1021/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/1021/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/1021/events", "html_url": "https://github.com/pallets/click/issues/1021", "id": 324444489, "node_id": "MDU6SXNzdWUzMjQ0NDQ0ODk=", "number": 1021, "title": "Click seems incompatible with Python's IDLE (on Windows)", "user": {"login": "doobeh", "id": 470417, "node_id": "MDQ6VXNlcjQ3MDQxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/470417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doobeh", "html_url": "https://github.com/doobeh", "followers_url": "https://api.github.com/users/doobeh/followers", "following_url": "https://api.github.com/users/doobeh/following{/other_user}", "gists_url": "https://api.github.com/users/doobeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/doobeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doobeh/subscriptions", "organizations_url": "https://api.github.com/users/doobeh/orgs", "repos_url": "https://api.github.com/users/doobeh/repos", "events_url": "https://api.github.com/users/doobeh/events{/privacy}", "received_events_url": "https://api.github.com/users/doobeh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 2, "created_at": "2018-05-18T14:57:57Z", "updated_at": "2020-11-13T08:01:57Z", "closed_at": "2020-02-24T00:39:22Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Open up IDLE (`python -m idlelib.idle`) and enter the following code:\r\n\r\n\r\n\r\n```\r\nimport click\r\n\r\n@click.command()\r\ndef hello():\r\n    click.echo('Hello World!')\r\n\r\n\r\nif __name__ == '__main__':\r\n    hello()\r\n```\r\n\r\nThen save, and hit F5 to run-- gives the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\username\\Desktop\\idler.py\", line 9, in <module>\r\n    hello()\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"C:\\Users\\username\\Desktop\\idler.py\", line 5, in hello\r\n    click.echo('Hello World!')\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\utils.py\", line 217, in echo\r\n    file = _default_text_stdout()\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\_compat.py\", line 621, in func\r\n    rv = wrapper_func()\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\_compat.py\", line 385, in get_text_stdout\r\n    rv = _get_windows_console_stream(sys.stdout, encoding, errors)\r\n  File \"C:\\Users\\username\\Environments\\idler\\lib\\site-packages\\click\\_winconsole.py\", line 261, in _get_windows_console_stream\r\n    func = _stream_factories.get(f.fileno())\r\nio.UnsupportedOperation: fileno\r\n```\r\n\r\nOSX Works fine.  Seems like same avenue as https://github.com/pallets/click/issues/770", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/1021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/1021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/958", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/958/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/958/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/958/events", "html_url": "https://github.com/pallets/click/issues/958", "id": 310286850, "node_id": "MDU6SXNzdWUzMTAyODY4NTA=", "number": 958, "title": "The `errors` argument in `click.open_file` is ignored on python3", "user": {"login": "ei-grad", "id": 78607, "node_id": "MDQ6VXNlcjc4NjA3", "avatar_url": "https://avatars.githubusercontent.com/u/78607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ei-grad", "html_url": "https://github.com/ei-grad", "followers_url": "https://api.github.com/users/ei-grad/followers", "following_url": "https://api.github.com/users/ei-grad/following{/other_user}", "gists_url": "https://api.github.com/users/ei-grad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ei-grad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ei-grad/subscriptions", "organizations_url": "https://api.github.com/users/ei-grad/orgs", "repos_url": "https://api.github.com/users/ei-grad/repos", "events_url": "https://api.github.com/users/ei-grad/events{/privacy}", "received_events_url": "https://api.github.com/users/ei-grad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 5, "created_at": "2018-04-01T02:11:04Z", "updated_at": "2020-11-13T08:02:01Z", "closed_at": "2020-02-20T05:39:01Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "The `errors` argument of `click.open_file` is not propagated to `sys.stdin` on python 3.x if there is no `encoding` argument in couple with `errors`.\r\n\r\nHow to reproduce:\r\n\r\n```bash\r\n> head -c64 /dev/urandom | python3 -c 'import click\r\nprint(click.open_file(\"-\", errors=\"ignore\").read())'\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/usr/lib/python3.6/codecs.py\", line 321, in decode\r\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xcd in position 1: invalid continuation byte\r\n```\r\n\r\nIt is because `_force_correct_text_reader` function checks that `_stream_is_misconfigured(text_reader)` call returns `False` and returns the `text_reader` as is.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/958/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/950", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/950/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/950/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/950/events", "html_url": "https://github.com/pallets/click/issues/950", "id": 307469317, "node_id": "MDU6SXNzdWUzMDc0NjkzMTc=", "number": 950, "title": "Context.invoke doesn't run callback on the other command", "user": {"login": "maroux", "id": 3266934, "node_id": "MDQ6VXNlcjMyNjY5MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3266934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maroux", "html_url": "https://github.com/maroux", "followers_url": "https://api.github.com/users/maroux/followers", "following_url": "https://api.github.com/users/maroux/following{/other_user}", "gists_url": "https://api.github.com/users/maroux/gists{/gist_id}", "starred_url": "https://api.github.com/users/maroux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maroux/subscriptions", "organizations_url": "https://api.github.com/users/maroux/orgs", "repos_url": "https://api.github.com/users/maroux/repos", "events_url": "https://api.github.com/users/maroux/events{/privacy}", "received_events_url": "https://api.github.com/users/maroux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-22T00:59:11Z", "updated_at": "2020-11-13T07:30:59Z", "closed_at": "2020-07-02T23:21:17Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When invoking a command using `ctx.invoke(other_cmd, ...)`, I expected that the parameters passed would be validated per `other_cmd`'s `callback` methods as declared on the arguments but that seems to be not the case.\r\n\r\nIs this a known thing? Is there a workaround?", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/950/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/950/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/942", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/942/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/942/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/942/events", "html_url": "https://github.com/pallets/click/issues/942", "id": 301306523, "node_id": "MDU6SXNzdWUzMDEzMDY1MjM=", "number": 942, "title": "With argument autocompletion, context is not passed properly", "user": {"login": "fqxp", "id": 1024609, "node_id": "MDQ6VXNlcjEwMjQ2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1024609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fqxp", "html_url": "https://github.com/fqxp", "followers_url": "https://api.github.com/users/fqxp/followers", "following_url": "https://api.github.com/users/fqxp/following{/other_user}", "gists_url": "https://api.github.com/users/fqxp/gists{/gist_id}", "starred_url": "https://api.github.com/users/fqxp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fqxp/subscriptions", "organizations_url": "https://api.github.com/users/fqxp/orgs", "repos_url": "https://api.github.com/users/fqxp/repos", "events_url": "https://api.github.com/users/fqxp/events{/privacy}", "received_events_url": "https://api.github.com/users/fqxp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 1375656074, "node_id": "MDU6TGFiZWwxMzc1NjU2MDc0", "url": "https://api.github.com/repos/pallets/click/labels/f:completion", "name": "f:completion", "color": "e0647b", "default": false, "description": "feature: shell completion"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 8, "created_at": "2018-03-01T07:43:11Z", "updated_at": "2020-11-13T07:08:59Z", "closed_at": "2020-10-03T21:41:26Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I used the current master revision:\r\n\r\n    $ pip3 install git+https://github.com/pallets/click.git@55682f6f5348f5220a557f89c3a796321a52aebf\r\n\r\nand an executable file `testclick`:\r\n\r\n```python\r\n#!/usr/bin/env python3\r\nimport click\r\n\r\ndef _complete(ctx, args, incomplete):\r\n    return ctx.obj['completions']\r\n\r\n@click.group()\r\n@click.pass_context\r\ndef entrypoint(ctx):\r\n    pass\r\n\r\n@entrypoint.command()\r\n@click.argument('arg', type=click.STRING, autocompletion=_complete)\r\n@click.pass_context\r\ndef subcommand(ctx, arg):\r\n    print('arg={}'.format(arg))\r\n\r\nentrypoint(obj={'completions': ['abc', 'def', 'ghi', ]})\r\n```\r\n\r\nand enabled bash completion with \r\n\r\n    eval \"$(_TESTCLICK_COMPLETE=source ./testclick)\"\r\n\r\nNow I am getting an error when trying to use autocompletion:\r\n\r\n```\r\n    $ ./testclick subcommand <TAB>Traceback (most recent call last):\r\n  File \"./testclick\", line 23, in <module>\r\n    entrypoint(obj={'completions': ['abc', 'def', 'ghi', ]})\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/core.py\", line 731, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/core.py\", line 701, in main\r\n    _bashcomplete(self, prog_name, complete_var)\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/core.py\", line 46, in _bashcomplete\r\n    if bashcomplete(cmd, prog_name, complete_var, complete_instr):\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/_bashcomplete.py\", line 216, in bashcomplete\r\n    return do_complete(cli, prog_name)\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/_bashcomplete.py\", line 205, in do_complete\r\n    for item in get_choices(cli, prog_name, args, incomplete):\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/_bashcomplete.py\", line 186, in get_choices\r\n    ctx, all_args, incomplete, param))\r\n  File \"/home/user/testclick/venv/lib/python3.6/site-packages/click/_bashcomplete.py\", line 124, in get_user_autocompletions\r\n    incomplete=incomplete)\r\n  File \"./testclick\", line 7, in _complete\r\n    return ctx.obj['completions']\r\nTypeError: 'NoneType' object is not subscriptable\r\n```\r\n\r\nExpected behavior was to get a list of completions `abc def ghi`.\r\n\r\nI am using Python 3.6.4", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/942/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/942/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/926", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/926/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/926/events", "html_url": "https://github.com/pallets/click/issues/926", "id": 295703851, "node_id": "MDU6SXNzdWUyOTU3MDM4NTE=", "number": 926, "title": "Option instance reuse with custom `cls` impossible", "user": {"login": "simonpercivall", "id": 153659, "node_id": "MDQ6VXNlcjE1MzY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/153659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonpercivall", "html_url": "https://github.com/simonpercivall", "followers_url": "https://api.github.com/users/simonpercivall/followers", "following_url": "https://api.github.com/users/simonpercivall/following{/other_user}", "gists_url": "https://api.github.com/users/simonpercivall/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonpercivall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonpercivall/subscriptions", "organizations_url": "https://api.github.com/users/simonpercivall/orgs", "repos_url": "https://api.github.com/users/simonpercivall/repos", "events_url": "https://api.github.com/users/simonpercivall/events{/privacy}", "received_events_url": "https://api.github.com/users/simonpercivall/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 2, "created_at": "2018-02-08T23:34:13Z", "updated_at": "2020-11-13T09:02:09Z", "closed_at": "2018-05-17T06:05:38Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Let's say I pre-define an `option` meant for multiple commands:\r\n\r\n```python\r\nopt = click.option('opt', cls=CustomOption)\r\n\r\n@opt\r\ndef cmd1(opt):\r\n    pass\r\n\r\n\r\n@opt\r\ndef cmd2(opt):\r\n    pass\r\n```\r\n\r\nThis will (click 6.7, and latest master when this issue was created) cause the `cls` parameter to be popped from `**attrs` \u2013\u00a0which is shared between all calls of the inner `decorator`, because of the closure \u2013 in the first call, leading to a broken option in the second call.\r\n\r\nOf course, it's possible to work around this by instead defining a function that returns the option, but it would be nice to just fix the decorators by copying `attrs` before popping `cls`.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/926/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/926/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/925", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/925/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/925/events", "html_url": "https://github.com/pallets/click/issues/925", "id": 294589746, "node_id": "MDU6SXNzdWUyOTQ1ODk3NDY=", "number": 925, "title": "Bash completion is broken when a default value is specified for a Choice Argument", "user": {"login": "atherra", "id": 9300197, "node_id": "MDQ6VXNlcjkzMDAxOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/9300197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atherra", "html_url": "https://github.com/atherra", "followers_url": "https://api.github.com/users/atherra/followers", "following_url": "https://api.github.com/users/atherra/following{/other_user}", "gists_url": "https://api.github.com/users/atherra/gists{/gist_id}", "starred_url": "https://api.github.com/users/atherra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atherra/subscriptions", "organizations_url": "https://api.github.com/users/atherra/orgs", "repos_url": "https://api.github.com/users/atherra/repos", "events_url": "https://api.github.com/users/atherra/events{/privacy}", "received_events_url": "https://api.github.com/users/atherra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 5, "created_at": "2018-02-06T00:23:27Z", "updated_at": "2020-11-13T09:02:08Z", "closed_at": "2018-09-12T18:00:18Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Adding a default value to an argument of the Choice type will hose autocompletion. Can be tested as follows:\r\n \r\nSlightly modifying test_argument_choice test example in test_bashcomplete.py to add a default argument:\r\n```\r\ndef test_argument_choice():\r\n    @click.command()\r\n    @click.argument('arg1', required=False, type=click.Choice(['arg11', 'arg12']))\r\n    @click.argument('arg2', required=False, type=click.Choice(['arg21', 'arg22']), default='arg21')\r\n    @click.argument('arg3', required=False, type=click.Choice(['arg', 'argument']))\r\n    def cli():\r\n        pass\r\n\r\n    assert list(get_choices(cli, 'lol', [], '')) == ['arg11', 'arg12']\r\n    assert list(get_choices(cli, 'lol', [], 'arg')) == ['arg11', 'arg12']\r\n    assert list(get_choices(cli, 'lol', ['arg11'], '')) == ['arg21', 'arg22']\r\n    assert list(get_choices(cli, 'lol', ['arg12', 'arg21'], '')) == ['arg', 'argument']\r\n    assert list(get_choices(cli, 'lol', ['arg12', 'arg21'], 'argu')) == ['argument']\r\n```\r\n\r\nResult:\r\n```\r\nTraceback (most recent call last):\r\n  File \"test_compl.py\", line 19, in <module>\r\n    test_argument_choice()\r\n  File \"test_compl.py\", line 14, in test_argument_choice\r\n    assert list(get_choices(cli, 'lol', ['arg11'], '')) == ['arg21', 'arg22']\r\nAssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/925/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/924", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/924/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/924/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/924/events", "html_url": "https://github.com/pallets/click/issues/924", "id": 293705534, "node_id": "MDU6SXNzdWUyOTM3MDU1MzQ=", "number": 924, "title": "Remove unicode_literals `warning` or some easier way to globally disable", "user": {"login": "cooperlees", "id": 3005596, "node_id": "MDQ6VXNlcjMwMDU1OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3005596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cooperlees", "html_url": "https://github.com/cooperlees", "followers_url": "https://api.github.com/users/cooperlees/followers", "following_url": "https://api.github.com/users/cooperlees/following{/other_user}", "gists_url": "https://api.github.com/users/cooperlees/gists{/gist_id}", "starred_url": "https://api.github.com/users/cooperlees/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cooperlees/subscriptions", "organizations_url": "https://api.github.com/users/cooperlees/orgs", "repos_url": "https://api.github.com/users/cooperlees/repos", "events_url": "https://api.github.com/users/cooperlees/events{/privacy}", "received_events_url": "https://api.github.com/users/cooperlees/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-02-01T22:23:37Z", "updated_at": "2020-11-13T07:45:54Z", "closed_at": "2020-04-20T16:21:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "We (@ Facebook) have been using click a lot with Python 3 and Python 2 with \r\n```\r\nfrom __future__ import unicode_literals\r\n```\r\nand yes, if used incorrectly unicode can blow up click, so I understand the warning, but feel we should fix the code and take this away.\r\n\r\nCan we look at fixing code to be more unicode friendly (maybe based on 'utf-8'). Today when ever we pull in click we have to modify it and this is painful as another upgrade happened and we forgot about this modification we made to set:\r\n```\r\nclick.disable_unicode_literals_warning = True\r\n```\r\nglobally.\r\n\r\nThoughts?", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/924/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/924/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/919", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/919/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/919/events", "html_url": "https://github.com/pallets/click/issues/919", "id": 291857931, "node_id": "MDU6SXNzdWUyOTE4NTc5MzE=", "number": 919, "title": "Completion of subcommand options after last argument does not work", "user": {"login": "zx8", "id": 8544900, "node_id": "MDQ6VXNlcjg1NDQ5MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8544900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zx8", "html_url": "https://github.com/zx8", "followers_url": "https://api.github.com/users/zx8/followers", "following_url": "https://api.github.com/users/zx8/following{/other_user}", "gists_url": "https://api.github.com/users/zx8/gists{/gist_id}", "starred_url": "https://api.github.com/users/zx8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zx8/subscriptions", "organizations_url": "https://api.github.com/users/zx8/orgs", "repos_url": "https://api.github.com/users/zx8/repos", "events_url": "https://api.github.com/users/zx8/events{/privacy}", "received_events_url": "https://api.github.com/users/zx8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 8, "created_at": "2018-01-26T10:27:14Z", "updated_at": "2020-11-13T09:02:08Z", "closed_at": "2018-09-12T18:00:19Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "* Install latest `HEAD` version of `click`:\r\n```\r\n$ pip3 install -e git+git://github.com/pallets/click.git@132d66ac7d69a2b0e8f218a4cd39e50be3e0bcb9#egg=click\r\n```\r\n* Save the following in a file called `foo` on your `PATH`, ensuring it's executable:\r\n```python\r\n#!/usr/bin/env python3\r\n\r\nimport click\r\n\r\ndef _complete(ctx, args, incomplete):\r\n    return ['abc', 'def', 'ghi', 'jkl', 'mno', 'pqr', 'stu', 'vwx', 'yz']\r\n\r\n@click.group()\r\ndef entrypoint():\r\n    pass\r\n\r\n@click.command()\r\n@click.option('--opt', autocompletion=_complete)\r\n@click.argument('arg', nargs=-1)\r\ndef subcommand(opt, arg):\r\n    pass\r\n\r\nentrypoint.add_command(subcommand)\r\n\r\nentrypoint()\r\n```\r\n* Source completion code\r\n```sh\r\nsource <(_FOO_COMPLETE=source foo)\r\n```\r\n---\r\n**Expected Behaviour**\r\n```\r\n$ foo subcommand --opt <TAB>\r\nabc  def  ghi  jkl  mno  pqr  stu  vwx  yz\r\n\r\n$ foo subcommand whatever --opt <TAB>\r\nabc  def  ghi  jkl  mno  pqr  stu  vwx  yz\r\n```\r\n**Actual Behaviour**\r\n```\r\n# WORKS\r\n$ foo subcommand --opt <TAB>\r\nabc  def  ghi  jkl  mno  pqr  stu  vwx  yz\r\n\r\n# BROKEN\r\n$ foo subcommand whatever --opt <TAB>\r\n<list of files in current directory (i.e. fallback when no results)>\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/914", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/914/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/914/events", "html_url": "https://github.com/pallets/click/issues/914", "id": 286816762, "node_id": "MDU6SXNzdWUyODY4MTY3NjI=", "number": 914, "title": "File option - prompting with pretty default?", "user": {"login": "mvolfik", "id": 31281386, "node_id": "MDQ6VXNlcjMxMjgxMzg2", "avatar_url": "https://avatars.githubusercontent.com/u/31281386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mvolfik", "html_url": "https://github.com/mvolfik", "followers_url": "https://api.github.com/users/mvolfik/followers", "following_url": "https://api.github.com/users/mvolfik/following{/other_user}", "gists_url": "https://api.github.com/users/mvolfik/gists{/gist_id}", "starred_url": "https://api.github.com/users/mvolfik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mvolfik/subscriptions", "organizations_url": "https://api.github.com/users/mvolfik/orgs", "repos_url": "https://api.github.com/users/mvolfik/repos", "events_url": "https://api.github.com/users/mvolfik/events{/privacy}", "received_events_url": "https://api.github.com/users/mvolfik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 5, "created_at": "2018-01-08T17:13:09Z", "updated_at": "2020-11-13T08:02:01Z", "closed_at": "2020-02-20T06:46:20Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Hello,\r\nI'm developing simple script, but I have found horrible default when using a file option with prompting with default value...\r\nI have this code:\r\n```python\r\nimport click\r\nimport os.path\r\n@click.command()\r\n@click.option('-f', default=os.path.realpath(\"subdir/file.txt\"), prompt=\"Please provide a file\", type=click.File('rt'))\r\ndef func(f):\r\n    pass\r\nfunc()\r\n```\r\nBut when I call it, it produces prompt like this:\r\n\r\n    me@computer:~/directory$ python3 script.py\r\n    Please provide a file [<_io.TextIOWrapper name='/home/me/directory/subdir/file.txt' mode='rt' encoding='UTF-8'>]:\r\nIs this solved anywhere or how difficult would it be to fix it, so it would show `[/home/me/directory/subdir/file.txt]`?\r\n\r\n`Ubuntu 16.04 LTS 32-bit, Python 3.5.2, click 6.7`\r\n\r\nPlease excuse any imperfections of this issue, I'm quite new to GitHub and haven't written any issues yet...", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/914/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/906", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/906/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/906/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/906/events", "html_url": "https://github.com/pallets/click/issues/906", "id": 284259984, "node_id": "MDU6SXNzdWUyODQyNTk5ODQ=", "number": 906, "title": "prompt + hide_input shows a GetPassWarning if no tty", "user": {"login": "eddawley", "id": 2414890, "node_id": "MDQ6VXNlcjI0MTQ4OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2414890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddawley", "html_url": "https://github.com/eddawley", "followers_url": "https://api.github.com/users/eddawley/followers", "following_url": "https://api.github.com/users/eddawley/following{/other_user}", "gists_url": "https://api.github.com/users/eddawley/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddawley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddawley/subscriptions", "organizations_url": "https://api.github.com/users/eddawley/orgs", "repos_url": "https://api.github.com/users/eddawley/repos", "events_url": "https://api.github.com/users/eddawley/events{/privacy}", "received_events_url": "https://api.github.com/users/eddawley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 933952159, "node_id": "MDU6TGFiZWw5MzM5NTIxNTk=", "url": "https://api.github.com/repos/pallets/click/labels/good%20first%20issue", "name": "good first issue", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 1, "created_at": "2017-12-22T22:06:00Z", "updated_at": "2020-11-13T07:30:59Z", "closed_at": "2020-07-02T12:56:46Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "getpass requires a tty so it can ensure output won't be echoed.  If it doesn't have one, it will warn.  The [docs](https://pymotw.com/2/getpass/) suggest checking for a tty before use so it would be nice if prompt() did that for us.\r\n\r\nSimple example:\r\n```\r\nimport click, sys\r\n\r\nprint sys.stdin.isatty()\r\nclick.prompt('test', hide_input=True)\r\n```\r\n\r\nExecution:\r\n```\r\n[vagrant@test ~]$ python a.py \r\nTrue\r\ntest: \r\n[vagrant@test ~]$ ssh localhost python a.py\r\nFalse\r\ntest: /usr/lib64/python2.7/getpass.py:83: GetPassWarning: Can not control echo on the terminal.\r\n  passwd = fallback_getpass(prompt, stream)\r\nWarning: Password input may be echoed.\r\nasdf\r\n\r\n[vagrant@test ~]$\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/905", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/905/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/905/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/905/events", "html_url": "https://github.com/pallets/click/issues/905", "id": 283409208, "node_id": "MDU6SXNzdWUyODM0MDkyMDg=", "number": 905, "title": "click.echo_via_pager() throws not enough memory on Windows7", "user": {"login": "abhisheksinha89", "id": 3588285, "node_id": "MDQ6VXNlcjM1ODgyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/3588285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhisheksinha89", "html_url": "https://github.com/abhisheksinha89", "followers_url": "https://api.github.com/users/abhisheksinha89/followers", "following_url": "https://api.github.com/users/abhisheksinha89/following{/other_user}", "gists_url": "https://api.github.com/users/abhisheksinha89/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhisheksinha89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhisheksinha89/subscriptions", "organizations_url": "https://api.github.com/users/abhisheksinha89/orgs", "repos_url": "https://api.github.com/users/abhisheksinha89/repos", "events_url": "https://api.github.com/users/abhisheksinha89/events{/privacy}", "received_events_url": "https://api.github.com/users/abhisheksinha89/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-20T00:07:28Z", "updated_at": "2020-11-13T08:01:57Z", "closed_at": "2020-02-23T23:38:42Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "echo_via_pager method causes the following issue on Windows 7 SP1:\r\nNot enough memory\r\n\r\nRepro:\r\n```\r\nimport click\r\n\r\nif __name__ == '__main__':\r\n    click.echo_via_pager(\"Hello mate!\")\r\n```\r\n\r\nMy investigation shows this line to be the issue:\r\nhttps://github.com/pallets/click/blob/92532b58b1205b70737f837567f67c59949f3dc2/click/_termui_impl.py#L360\r\n\r\nI am not aware of any good workarounds and this is causing users of https://github.com/dbcli/mssql-cli on windows7 this very same issue. \r\n\r\nCan you please let us know any workarounds you are aware of or does it need to fixed in click?\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/901", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/901/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/901/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/901/events", "html_url": "https://github.com/pallets/click/issues/901", "id": 280746383, "node_id": "MDU6SXNzdWUyODA3NDYzODM=", "number": 901, "title": "Pager eats color codes on Windows", "user": {"login": "MinchinWeb", "id": 1548809, "node_id": "MDQ6VXNlcjE1NDg4MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1548809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MinchinWeb", "html_url": "https://github.com/MinchinWeb", "followers_url": "https://api.github.com/users/MinchinWeb/followers", "following_url": "https://api.github.com/users/MinchinWeb/following{/other_user}", "gists_url": "https://api.github.com/users/MinchinWeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/MinchinWeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MinchinWeb/subscriptions", "organizations_url": "https://api.github.com/users/MinchinWeb/orgs", "repos_url": "https://api.github.com/users/MinchinWeb/repos", "events_url": "https://api.github.com/users/MinchinWeb/events{/privacy}", "received_events_url": "https://api.github.com/users/MinchinWeb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-09T19:17:24Z", "updated_at": "2020-11-13T08:30:48Z", "closed_at": "2019-05-22T13:54:38Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "`click.echo_with_pager()` eats the embedded ANSI colour codes, at least on my machine. I'm using Clcik 6.7 (from pip), Python 3.6.3 on Windows 10 x64.\r\n\r\nBelow is the same text, the first though the pager, and the second through the \"normal\" `click.echo()` function:\r\n\r\n![image](https://user-images.githubusercontent.com/1548809/33798713-e00d6340-dcda-11e7-9871-8f58c1a4527e.png)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/901/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/901/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/870", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/870/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/870/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/870/events", "html_url": "https://github.com/pallets/click/issues/870", "id": 265509059, "node_id": "MDU6SXNzdWUyNjU1MDkwNTk=", "number": 870, "title": "click.prompt kwargs `default` and `value_proc` seem to be behaving inconsistently", "user": {"login": "kunalbhagawati", "id": 8683984, "node_id": "MDQ6VXNlcjg2ODM5ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8683984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kunalbhagawati", "html_url": "https://github.com/kunalbhagawati", "followers_url": "https://api.github.com/users/kunalbhagawati/followers", "following_url": "https://api.github.com/users/kunalbhagawati/following{/other_user}", "gists_url": "https://api.github.com/users/kunalbhagawati/gists{/gist_id}", "starred_url": "https://api.github.com/users/kunalbhagawati/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kunalbhagawati/subscriptions", "organizations_url": "https://api.github.com/users/kunalbhagawati/orgs", "repos_url": "https://api.github.com/users/kunalbhagawati/repos", "events_url": "https://api.github.com/users/kunalbhagawati/events{/privacy}", "received_events_url": "https://api.github.com/users/kunalbhagawati/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-14T17:33:33Z", "updated_at": "2020-11-13T07:19:03Z", "closed_at": "2020-08-07T19:40:01Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "The `default` argument seems to behave inconsistently with `value_proc`.\r\n\r\nLets take a file\r\n\r\n```python\r\nfrom __future__ import absolute_import, unicode_literals\r\nimport click\r\n\r\ndef run():\r\n    def test_proc(val):\r\n        print('HERE')\r\n        return '* {} *'.format(val)\r\n\r\n    inp = click.prompt('test val', default=1, value_proc=test_proc)\r\n    print(inp)\r\n\r\n\r\nif __name__ == '__main__':\r\n    run()\r\n```\r\n\r\nRunning this script we get:\r\n\r\n```sh\r\ntest val [1]: 1\r\nHERE\r\n* 1 *\r\n```\r\n\r\nBut using the default, \r\n```sh\r\ntest val [1]:\r\n1\r\n```\r\n\r\nIt seems that the inner function is not invoked at all (verified using debugger)\r\n\r\nThe culprit seems to be here\r\n```python\r\n\r\n# click/termui.py:87\r\n\r\n    while 1:\r\n        while 1:\r\n            value = prompt_func(prompt)\r\n            if value:  # <<< since the user did not enter anything, `value` is ''\r\n                break\r\n            # If a default is set and used, then the confirmation\r\n            # prompt is always skipped because that's the only thing\r\n            # that really makes sense.\r\n            elif default is not None:  # <<< since default is not `None` this is returned \r\n                return default\r\n        try:\r\n            result = value_proc(value)  # and this is never called\r\n```\r\n\r\nmacOS Sierra (10.12.6)\r\nPython 2.7.10\r\nclick==6.7\r\n\r\nPR https://github.com/pallets/click/pull/872", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/870/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/848", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/848/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/848/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/848/events", "html_url": "https://github.com/pallets/click/issues/848", "id": 257001610, "node_id": "MDU6SXNzdWUyNTcwMDE2MTA=", "number": 848, "title": "Behavioural difference between unicode decoding in `click.testing.CliRunner` and outside of `click.testing` (`UnicodeDecodeError`)", "user": {"login": "adamtheturtle", "id": 797801, "node_id": "MDQ6VXNlcjc5NzgwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/797801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adamtheturtle", "html_url": "https://github.com/adamtheturtle", "followers_url": "https://api.github.com/users/adamtheturtle/followers", "following_url": "https://api.github.com/users/adamtheturtle/following{/other_user}", "gists_url": "https://api.github.com/users/adamtheturtle/gists{/gist_id}", "starred_url": "https://api.github.com/users/adamtheturtle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adamtheturtle/subscriptions", "organizations_url": "https://api.github.com/users/adamtheturtle/orgs", "repos_url": "https://api.github.com/users/adamtheturtle/repos", "events_url": "https://api.github.com/users/adamtheturtle/events{/privacy}", "received_events_url": "https://api.github.com/users/adamtheturtle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 2202112960, "node_id": "MDU6TGFiZWwyMjAyMTEyOTYw", "url": "https://api.github.com/repos/pallets/click/labels/f:test%20runner", "name": "f:test runner", "color": "e0647b", "default": false, "description": "feature: cli test runner"}], "state": "closed", "locked": true, "assignee": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 3, "created_at": "2017-09-12T10:57:07Z", "updated_at": "2021-04-19T00:13:49Z", "closed_at": "2021-04-04T15:09:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "```console\r\n(e2e) Adam@Adams-MBP ~/D/click-experiment> env | grep LANG\r\nLANG=en_gb.UTF-8\r\n(e2e) Adam@Adams-MBP ~/D/click-experiment> env | grep PYTHONIOENCODING\r\n(e2e) Adam@Adams-MBP ~/D/click-experiment>\r\n```\r\n\r\n```console\r\n(e2e) Adam@Adams-MBP ~/D/click-experiment> env\r\nApple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.VygZz7PVFg/Render\r\nEDITOR=vim\r\nHOME=/Users/Adam\r\nLANG=en_gb.UTF-8\r\nLOGNAME=Adam\r\nLSCOLORS=gxfxbEaEBxxEhEhBaDaCaD\r\nMYVIMRC=/Users/Adam/.config/nvim/init.vim\r\nNVIM_LISTEN_ADDRESS=/var/folders/3l/ffdytd9n2cnbgch4rwt6k7jm0000gn/T/nvimmMGW7R/0\r\nPATH=/Users/Adam/.virtualenvs/e2e/bin:/Users/Adam/.local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/Users/Ada\r\nm/.local/bin\r\nPWD=/Users/Adam/Desktop/click-experiment\r\nSECURITYSESSIONID=186a7\r\nSHELL=/usr/local/bin/fish\r\nSHLVL=3\r\nSSH_AUTH_SOCK=/private/tmp/com.apple.launchd.JaAq6mgZJg/Listeners\r\nTERM=xterm-256color\r\nTERM_PROGRAM=Apple_Terminal\r\nTERM_PROGRAM_VERSION=388.1.1\r\nTERM_SESSION_ID=33676A3D-5E6B-4BB7-8BFB-E16430E5ED91\r\nTMPDIR=/var/folders/3l/ffdytd9n2cnbgch4rwt6k7jm0000gn/T/\r\nUSER=Adam\r\nVIM=\r\nVIMRUNTIME=\r\nVIRTUAL_ENV=/Users/Adam/.virtualenvs/e2e\r\nXPC_FLAGS=0x0\r\nXPC_SERVICE_NAME=0\r\n__CF_USER_TEXT_ENCODING=0x1F5:0x0:0x2\r\n```\r\n\r\nThe expected behaviour of the `Result` object is that it includes `output` as a combined `stdout` and `stderr`.\r\nHowever, in the following case, the output in the `Result` object is not the same as the output would be from `stderr`.\r\n\r\n```python\r\nimport sys\r\nimport click\r\nfrom click.testing import CliRunner\r\n\r\nEXAMPLE = '\\udce2\\udc98\\udcba\\udced\\udca0\\udcbd\\udce4\\udcbd\\udca0\\udce5\\udca5\\udcbd'\r\n\r\n@click.command()\r\ndef write_to_stderr():\r\n    sys.stderr.write(EXAMPLE)\r\n\r\n\r\nrunner = CliRunner()\r\nresult = runner.invoke(write_to_stderr, [])\r\nprint(result)\r\nassert result.output == ''\r\n\r\nsys.stderr.write(EXAMPLE)\r\n```\r\n\r\nThis outputs:\r\n\r\n```console\r\n<Result UnicodeEncodeError('utf-8', '\\udce2\\udc98\\udcba\\udced\\udca0\\udcbd\\udce4\\udcbd\\udca0\\udce5\\udca5\\udcbd', 0, 12, 'surrogates not allowed')>\r\n\\udce2\\udc98\\udcba\\udced\\udca0\\udcbd\\udce4\\udcbd\\udca0\\udce5\\udca5\\udcbd\r\n```\r\n\r\nI would expect that the `result.output` would be the same as the `stderr` output.\r\n\r\nI believe that a solution to this problem is https://github.com/pallets/click/issues/371.\r\nI put this up as a new issue because https://github.com/pallets/click/issues/371 is a feature request but this is a bug.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/844", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/844/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/844/events", "html_url": "https://github.com/pallets/click/issues/844", "id": 253719578, "node_id": "MDU6SXNzdWUyNTM3MTk1Nzg=", "number": 844, "title": "show_default attempts to print lambdas when using dynamic defaults", "user": {"login": "Wilfred", "id": 70800, "node_id": "MDQ6VXNlcjcwODAw", "avatar_url": "https://avatars.githubusercontent.com/u/70800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wilfred", "html_url": "https://github.com/Wilfred", "followers_url": "https://api.github.com/users/Wilfred/followers", "following_url": "https://api.github.com/users/Wilfred/following{/other_user}", "gists_url": "https://api.github.com/users/Wilfred/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wilfred/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wilfred/subscriptions", "organizations_url": "https://api.github.com/users/Wilfred/orgs", "repos_url": "https://api.github.com/users/Wilfred/repos", "events_url": "https://api.github.com/users/Wilfred/events{/privacy}", "received_events_url": "https://api.github.com/users/Wilfred/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-08-29T16:03:51Z", "updated_at": "2020-11-13T09:30:58Z", "closed_at": "2018-05-15T14:38:38Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Given the code:\r\n\r\n```python\r\n#!/usr/bin/env python\r\n\r\nimport click\r\nfrom datetime import date\r\n\r\n\r\n@click.command()\r\n@click.option('--day', help=\"choose the day of the week\",\r\n              default=lambda: date.today().strftime(\"%A\"), show_default=True)\r\ndef main(day):\r\n    print \"Hello world! It's a wonderful {}.\".format(day)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nWe get the correct default value when running the script:\r\n\r\n```\r\n$ ./hello.py\r\nHello world! It's a wonderful Tuesday.\r\n```\r\n\r\nHowever, the help text tries to print the lambda:\r\n\r\n```\r\n$ ./hello.py --help\r\nUsage: hello.py [OPTIONS]\r\n\r\nOptions:\r\n  --day TEXT  choose the day of the week  [default: <function <lambda> at\r\n              0x109c028c0>]\r\n  --help      Show this message and exit.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/833", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/833/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/833/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/833/events", "html_url": "https://github.com/pallets/click/issues/833", "id": 244511459, "node_id": "MDU6SXNzdWUyNDQ1MTE0NTk=", "number": 833, "title": "Legacy 1.x option handling mis-identifying situation", "user": {"login": "joshorr", "id": 1890452, "node_id": "MDQ6VXNlcjE4OTA0NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1890452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshorr", "html_url": "https://github.com/joshorr", "followers_url": "https://api.github.com/users/joshorr/followers", "following_url": "https://api.github.com/users/joshorr/following{/other_user}", "gists_url": "https://api.github.com/users/joshorr/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshorr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshorr/subscriptions", "organizations_url": "https://api.github.com/users/joshorr/orgs", "repos_url": "https://api.github.com/users/joshorr/repos", "events_url": "https://api.github.com/users/joshorr/events{/privacy}", "received_events_url": "https://api.github.com/users/joshorr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-20T22:12:19Z", "updated_at": "2020-11-13T07:18:59Z", "closed_at": "2020-08-09T13:31:05Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When you use the `make_pass_decorator` with an option callback like in the code snippet at the end of this issue, it mid-identifies the method as a 1.0 option method, and passes the wrong arguments to the method.\r\n\r\nTraced the problem to `click.core.invoke_param_callback(...)`. It thinks the number of args is zero, because of the use of (*args, **kwargs) in the decorator.\r\n\r\nI can change my method to be `config_schema(__name__, option_value):`, but this will break when you get around to removing this legacy adaptation, as at that point it will go to the 2.0 style.\r\n\r\nNot sure what the best solution here is, but thought I would open an issue as it seems to be the incorrect behavior.\r\n\r\nCode Example/Reference:\r\n\r\n```\r\npass_config = click.make_pass_decorator(__name__, ensure=True)\r\n\r\n\r\n@pass_config\r\ndef config_schema(__name__, ctx, name, schema):\r\n    pass\r\n\r\n\r\nschema_option = click.Option(\r\n    param_decls=['--schema'],\r\n    default='testing',\r\n    help='Schema to use, defaults to \"testing\".',\r\n    callback=config_schema,\r\n)\r\n\r\n\r\ncommand.params.append(schema_option)\r\n```", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/825", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/825/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/825/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/825/events", "html_url": "https://github.com/pallets/click/issues/825", "id": 241621429, "node_id": "MDU6SXNzdWUyNDE2MjE0Mjk=", "number": 825, "title": "\"IOError: [Errno 12] Not enough space\" on Windows 7 and Python 2", "user": {"login": "segevfiner", "id": 24731903, "node_id": "MDQ6VXNlcjI0NzMxOTAz", "avatar_url": "https://avatars.githubusercontent.com/u/24731903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segevfiner", "html_url": "https://github.com/segevfiner", "followers_url": "https://api.github.com/users/segevfiner/followers", "following_url": "https://api.github.com/users/segevfiner/following{/other_user}", "gists_url": "https://api.github.com/users/segevfiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/segevfiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segevfiner/subscriptions", "organizations_url": "https://api.github.com/users/segevfiner/orgs", "repos_url": "https://api.github.com/users/segevfiner/repos", "events_url": "https://api.github.com/users/segevfiner/events{/privacy}", "received_events_url": "https://api.github.com/users/segevfiner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 0, "created_at": "2017-07-10T07:21:31Z", "updated_at": "2020-11-13T09:01:59Z", "closed_at": "2018-09-23T01:18:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "This is caused by [click/_winconsole.py:268-272](https://github.com/pallets/click/blob/5701c4000c39b5a90c45f1083c0cbf4e00731e81/click/_winconsole.py#L268-L272). It seems that switching the standard streams to binary mode reveals the underlying limit of the Windows console of limiting a single write to 64K (I think this limit was lifted in Windows 8). This affects `print`, `sys.stdout.write` and `click.echo`.\r\n\r\nIt seems that many libraries and Python itself limit a single write to 32767 bytes to workaround this. Python 3 for example: [Python/fileutils.c:1244-1250](https://github.com/python/cpython/blob/f7eae0adfcd4c50034281b2c69f461b43b68db84/Python/fileutils.c#L1244-L1250). It doesn't seem like Python 2 has this hack though.\r\n\r\nWe will have to either:\r\n1. Don't set the streams to binary and read/write to dupped stream fds (and file objects) that are set to binary.\r\n2. Wrap the standard streams and workaround this.\r\n3. Submit a patch to Python 2 which I'm not sure will ever be accepted.\r\n4. Other?\r\n\r\nTo reproduce:\r\n```py\r\nimport sys\r\nimport click\r\n\r\nclick.echo(\"spam\")\r\n\r\nprint('A' * 100000) # or\r\nsys.stdout.write('A' * 100000) # or\r\nclick.echo('A' * 100000)\r\n```\r\n\r\nWindows 7 SP1 x64\r\nPython: 2.7.10\r\nClick: 6.7", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/825/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/822", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/822/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/822/events", "html_url": "https://github.com/pallets/click/issues/822", "id": 241561347, "node_id": "MDU6SXNzdWUyNDE1NjEzNDc=", "number": 822, "title": "Inconsistent return type from click.getchar()", "user": {"login": "pkch", "id": 1593648, "node_id": "MDQ6VXNlcjE1OTM2NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1593648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkch", "html_url": "https://github.com/pkch", "followers_url": "https://api.github.com/users/pkch/followers", "following_url": "https://api.github.com/users/pkch/following{/other_user}", "gists_url": "https://api.github.com/users/pkch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkch/subscriptions", "organizations_url": "https://api.github.com/users/pkch/orgs", "repos_url": "https://api.github.com/users/pkch/repos", "events_url": "https://api.github.com/users/pkch/events{/privacy}", "received_events_url": "https://api.github.com/users/pkch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 6, "created_at": "2017-07-09T21:40:37Z", "updated_at": "2020-11-13T09:02:03Z", "closed_at": "2018-09-18T13:52:10Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "It [seems](https://github.com/python/typeshed/pull/1473#issuecomment-313962504) that `click.getchar()` will return `bytes` under python 3 / Windows, and `str` under any other combination of python version and platform. Is this the intended behavior or a bug?\r\n\r\nI wanted to update the stub for `click` but if it's a bug and can be fixed soon, I can leave the typeshed stub unchanged.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/821", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/821/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/821/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/821/events", "html_url": "https://github.com/pallets/click/issues/821", "id": 241554130, "node_id": "MDU6SXNzdWUyNDE1NTQxMzA=", "number": 821, "title": "Handling of special characters in getchar", "user": {"login": "pkch", "id": 1593648, "node_id": "MDQ6VXNlcjE1OTM2NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1593648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkch", "html_url": "https://github.com/pkch", "followers_url": "https://api.github.com/users/pkch/followers", "following_url": "https://api.github.com/users/pkch/following{/other_user}", "gists_url": "https://api.github.com/users/pkch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkch/subscriptions", "organizations_url": "https://api.github.com/users/pkch/orgs", "repos_url": "https://api.github.com/users/pkch/repos", "events_url": "https://api.github.com/users/pkch/events{/privacy}", "received_events_url": "https://api.github.com/users/pkch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-09T20:26:44Z", "updated_at": "2020-11-13T09:20:35Z", "closed_at": "2018-06-09T02:51:24Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When the user presses arrow up, the `click.getchar()` returns b'\\xe0'. This behavior is probably good, but I guess it should be documented (along with other special characters), since it's not a valid utf-8 value even though the terminal encoding is utf-8. (The naive `click.getchar().decode('utf-8')` would crash on this example with `UnicodeDecodeError: 'utf-8' codec can't decode byte 0xe0 in position 0: unexpected end of data`.)", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/816", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/816/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/816/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/816/events", "html_url": "https://github.com/pallets/click/issues/816", "id": 240225889, "node_id": "MDU6SXNzdWUyNDAyMjU4ODk=", "number": 816, "title": "Python 3.6 on Windows click.echo() truncates output click v6.7, unable to duplicate in test", "user": {"login": "pcapel", "id": 13007816, "node_id": "MDQ6VXNlcjEzMDA3ODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13007816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcapel", "html_url": "https://github.com/pcapel", "followers_url": "https://api.github.com/users/pcapel/followers", "following_url": "https://api.github.com/users/pcapel/following{/other_user}", "gists_url": "https://api.github.com/users/pcapel/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcapel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcapel/subscriptions", "organizations_url": "https://api.github.com/users/pcapel/orgs", "repos_url": "https://api.github.com/users/pcapel/repos", "events_url": "https://api.github.com/users/pcapel/events{/privacy}", "received_events_url": "https://api.github.com/users/pcapel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 2, "created_at": "2017-07-03T17:01:21Z", "updated_at": "2020-11-13T09:02:06Z", "closed_at": "2018-09-13T19:56:19Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "There appears to be a limit of ~16 383 character output when using click.echo() on a windows environment (Windows 7 64-bit) in python 3.6.0.  Similar behavior is **not** present using python 2.7.11.  This behavior seems to include escape characters to varying degrees.  I've checked it using the following:\r\n\r\n```\r\nimport click\r\n\r\ndef string_construct(string):\r\n    string_list = []\r\n    for i in range(17000):\r\n        string_list.append(string)\r\n    return string_list\r\n\r\n@click.command()\r\n@click.option('--first', '-1', default=False, is_flag=True)\r\n@click.option('--second', '-2', default=False, is_flag=True)\r\n@click.option('--third', '-3', default=False, is_flag=True)\r\n@click.option('--fourth', '-4', default=False, is_flag=True)\r\ndef main(first, second, third, fourth):\r\n    if first:\r\n        s = ''.join(string_construct('t'))\r\n        print(len(s))\r\n        click.echo(s)\r\n    elif second:\r\n        s = ''.join(string_construct('\\tt'))\r\n        print(len(s))\r\n        click.echo(s)\r\n    elif third:\r\n        n = 'A somewhat longer string to constrain console output\\n'\r\n        s = ''.join(string_construct(n))\r\n        print(len(s))\r\n        click.echo(s)\r\n    elif fourth:\r\n        s = ''.join(string_construct(' '))\r\n        print(len(s))\r\n        click.echo(s)\r\n```\r\n\r\nlist1:\r\n - output: 16 383 characters\r\n - no escaped\r\n\r\nlist2:\r\n - output: 8 191 characters\r\n - with tabs as 1 character: 16 382\r\n\r\nlist3:\r\n - output: 15 799 characters (spaces included)\r\n - with newline as 1 character: 16 092\r\n - with newline as 2 characters: 16 385\r\n\r\nlist4:\r\n - output: 16 235 characters\r\n\r\nI copied the output over to word to check character counts, which is probably were the discrepancies come from.  The output of `len(s)` is always what you would expect.   I've started working on a patch in `_compat.py` in an `elif WIN:` block below the following block:\r\n\r\n```\r\n# The io module is a place where the Python 3 text behavior\r\n    # was forced upon Python 2, so we need to unbreak\r\n    # it to look like Python 2.\r\n    if PY2:\r\n        def write(self, x):\r\n            if isinstance(x, str) or is_bytes(x):\r\n                try:\r\n                    self.flush()\r\n                except Exception:\r\n                    pass\r\n                return self.buffer.write(str(x))\r\n            return io.TextIOWrapper.write(self, x)\r\n\r\n        def writelines(self, lines):\r\n            for line in lines:\r\n                self.write(line)\r\n```\r\n\r\nRight now I have a working patch using the following code (extending the above if):\r\n\r\n```\r\nelif WIN:\r\n        def write(self, x):\r\n            MAX_LEN = 16000\r\n            message_len = len(x)\r\n            if message_len > MAX_LEN:\r\n                self.write(x[0:MAX_LEN])\r\n                return self.write(x[MAX_LEN:message_len])\r\n            else:\r\n                return io.TextIOWrapper.write(self, x)\r\n```\r\n\r\nI've tried to write a valid test, the trouble is that `runner` and `capsys.readouterr()` are both showing the output at the correct length.  I've double checked and my patch works to correct the error, I just can't duplicate the error in the test environment.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/816/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/814", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/814/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/814/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/814/events", "html_url": "https://github.com/pallets/click/issues/814", "id": 239741569, "node_id": "MDU6SXNzdWUyMzk3NDE1Njk=", "number": 814, "title": "Required options on parent command break --help on child commands", "user": {"login": "srjturner", "id": 5788784, "node_id": "MDQ6VXNlcjU3ODg3ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5788784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjturner", "html_url": "https://github.com/srjturner", "followers_url": "https://api.github.com/users/srjturner/followers", "following_url": "https://api.github.com/users/srjturner/following{/other_user}", "gists_url": "https://api.github.com/users/srjturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjturner/subscriptions", "organizations_url": "https://api.github.com/users/srjturner/orgs", "repos_url": "https://api.github.com/users/srjturner/repos", "events_url": "https://api.github.com/users/srjturner/events{/privacy}", "received_events_url": "https://api.github.com/users/srjturner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-06-30T10:35:07Z", "updated_at": "2019-12-02T18:40:55Z", "closed_at": "2019-12-02T18:40:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a command which has a required option, and sub-command(s):\r\n\r\n```\r\n@click.group()\r\n@click.option('-f', '--foo', required=True, help='The foo')\r\n@click.pass_context\r\ndef cli(ctx, foo):\r\n    ctx.obj = {'foo': foo}\r\n    print(\"cli, ctx.obj  = {}\".format(ctx.obj))\r\n\r\n@cli.command()\r\n@click.option('-b', '--bar', help=\"The bar\")\r\n@click.pass_obj\r\ndef child(context, bar):\r\n    print(\"aws, context = {}, bar = {}\".format(context, bar))\r\n```\r\nIf I use help on the top-level command then I get the expected text, and the fact that it requires the 'foo' option is not a problem:\r\n\r\n```\r\n> python example.py  --help\r\nUsage: example.py [OPTIONS] COMMAND [ARGS]...\r\n\r\nOptions:\r\n  -f, --foo TEXT  The foo  [required]\r\n  --help          Show this message and exit.\r\n\r\nCommands:\r\n  child\r\n```\r\n\r\nHowever, if I do help on the child command, I get an error unless I supply the parent's required option:\r\n\r\n```\r\n> python example.py child --help\r\nUsage: example.py [OPTIONS] COMMAND [ARGS]...\r\n\r\nError: Missing option \"-f\" / \"--foo\".\r\n```\r\n\r\nGiven that I am only invoking the (implicit) --help option of the child command, why does click still enforce the required on the parent command? Is it because the parent command actually fires when anything on the child is run *including help*? Is there any workaround (other than not using required or moving the options from the parent to each child)?", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/814/reactions", "total_count": 14, "+1": 14, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/814/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/795", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/795/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/795/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/795/events", "html_url": "https://github.com/pallets/click/issues/795", "id": 230031315, "node_id": "MDU6SXNzdWUyMzAwMzEzMTU=", "number": 795, "title": "click.prompt combined with click.Path skips path validation for prompt default", "user": {"login": "JWCook", "id": 419936, "node_id": "MDQ6VXNlcjQxOTkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/419936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JWCook", "html_url": "https://github.com/JWCook", "followers_url": "https://api.github.com/users/JWCook/followers", "following_url": "https://api.github.com/users/JWCook/following{/other_user}", "gists_url": "https://api.github.com/users/JWCook/gists{/gist_id}", "starred_url": "https://api.github.com/users/JWCook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JWCook/subscriptions", "organizations_url": "https://api.github.com/users/JWCook/orgs", "repos_url": "https://api.github.com/users/JWCook/repos", "events_url": "https://api.github.com/users/JWCook/events{/privacy}", "received_events_url": "https://api.github.com/users/JWCook/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 1, "created_at": "2017-05-19T16:52:56Z", "updated_at": "2020-11-13T09:02:12Z", "closed_at": "2018-05-18T14:00:19Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "If using `click.prompt` with both `click.Path` and a default value, any user input will be validated through `click.Path`, but the default value will not be.\r\n\r\nExample:\r\n\r\n```python\r\n>>> import click\r\n>>> click.prompt('Path', type=click.Path(exists=True), default='/invalid/path')\r\n# Invalid user input raises error\r\nPath [/invalid/path]: /some/other/invalid/path\r\nError: Path \"/some/other/invalid/path\" does not exist.\r\n# Invalid default value does not raise error\r\nPath [/invalid/path]:\r\n'/invalid/path'\r\n```\r\n\r\nTested with click 6.7, and python 2.7.13 and 3.6.1.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/784", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/784/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/784/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/784/events", "html_url": "https://github.com/pallets/click/issues/784", "id": 227724437, "node_id": "MDU6SXNzdWUyMjc3MjQ0Mzc=", "number": 784, "title": "click.Choice() doesn't like integers while getting --help", "user": {"login": "jsmedmar", "id": 8843150, "node_id": "MDQ6VXNlcjg4NDMxNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8843150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsmedmar", "html_url": "https://github.com/jsmedmar", "followers_url": "https://api.github.com/users/jsmedmar/followers", "following_url": "https://api.github.com/users/jsmedmar/following{/other_user}", "gists_url": "https://api.github.com/users/jsmedmar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsmedmar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsmedmar/subscriptions", "organizations_url": "https://api.github.com/users/jsmedmar/orgs", "repos_url": "https://api.github.com/users/jsmedmar/repos", "events_url": "https://api.github.com/users/jsmedmar/events{/privacy}", "received_events_url": "https://api.github.com/users/jsmedmar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-10T15:42:59Z", "updated_at": "2020-11-13T08:30:53Z", "closed_at": "2019-05-07T17:05:20Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "click.Choice() doesn't like integers while getting --help.\r\n\r\nGiven:\r\n```\r\nclick.option(\r\n    \"--pk\",\r\n    type=click.Choice([1, 2, 3]),\r\n    help=\"Select the primary key.\",\r\n    default=1\r\n    )\r\n```\r\n\r\nGives:\r\n```\r\n 803, in show_help\r\n    echo(ctx.get_help(), color=ctx.color)   \r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 495, in get_help\r\n    return self.command.get_help(self)\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 824, in get_help\r\n    self.format_help(ctx, formatter)\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 839, in format_help\r\n    self.format_options(ctx, formatter)\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 853, in format_options\r\n    rv = param.get_help_record(ctx)\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 1602, in get_help_record\r\n    rv = [_write_opts(self.opts)]\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 1599, in _write_opts\r\n    rv += ' ' + self.make_metavar()\r\n  File \"{...}/lib/python3.5/site-packages/click/core.py\", line 1292, in make_metavar\r\n    metavar = self.type.get_metavar(self)   \r\n  File \"{...}/lib/python3.5/site-packages/click/types.py\", line 140, in get_metavar\r\n    return '[%s]' % '|'.join(self.choices)  \r\nTypeError: sequence item 0: expected str instance, int found\r\n````", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/784/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/770", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/770/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/770/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/770/events", "html_url": "https://github.com/pallets/click/issues/770", "id": 224536713, "node_id": "MDU6SXNzdWUyMjQ1MzY3MTM=", "number": 770, "title": "Errors with new colorama", "user": {"login": "ericfrederich", "id": 1167238, "node_id": "MDQ6VXNlcjExNjcyMzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1167238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericfrederich", "html_url": "https://github.com/ericfrederich", "followers_url": "https://api.github.com/users/ericfrederich/followers", "following_url": "https://api.github.com/users/ericfrederich/following{/other_user}", "gists_url": "https://api.github.com/users/ericfrederich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericfrederich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericfrederich/subscriptions", "organizations_url": "https://api.github.com/users/ericfrederich/orgs", "repos_url": "https://api.github.com/users/ericfrederich/repos", "events_url": "https://api.github.com/users/ericfrederich/events{/privacy}", "received_events_url": "https://api.github.com/users/ericfrederich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 4, "created_at": "2017-04-26T17:04:22Z", "updated_at": "2020-11-13T08:01:56Z", "closed_at": "2020-02-24T00:41:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "Colorama fixed an issue ([here](https://github.com/tartley/colorama/issues/130)) by copying some CPython bug fix ([here](http://bugs.python.org/issue24402))\r\n\r\nNow this code fails with colorama==0.3.8:\r\n```bash\r\npython -c \"import colorama; import click; colorama.init(); click.echo('hi')\"\r\n```\r\nTo me it is unclear who is at fault here (click, colorama, the def fileno() which always raises an error?) ... but I thought bugs should be created in both projects.  If it turns out that Python *\"fix\"* was the problem, one should be opened there as well.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/770/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/751", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/751/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/751/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/751/events", "html_url": "https://github.com/pallets/click/issues/751", "id": 215202733, "node_id": "MDU6SXNzdWUyMTUyMDI3MzM=", "number": 751, "title": "get_os_args() returns wrong arguments on Python2 if click is imported after sys.argv has changed", "user": {"login": "NiklasRosenstein", "id": 1318438, "node_id": "MDQ6VXNlcjEzMTg0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1318438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NiklasRosenstein", "html_url": "https://github.com/NiklasRosenstein", "followers_url": "https://api.github.com/users/NiklasRosenstein/followers", "following_url": "https://api.github.com/users/NiklasRosenstein/following{/other_user}", "gists_url": "https://api.github.com/users/NiklasRosenstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/NiklasRosenstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NiklasRosenstein/subscriptions", "organizations_url": "https://api.github.com/users/NiklasRosenstein/orgs", "repos_url": "https://api.github.com/users/NiklasRosenstein/repos", "events_url": "https://api.github.com/users/NiklasRosenstein/events{/privacy}", "received_events_url": "https://api.github.com/users/NiklasRosenstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-18T15:54:14Z", "updated_at": "2020-11-13T08:30:54Z", "closed_at": "2019-05-07T16:09:47Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "If click is imported after `sys.argv` has already been modified, `click.utils.get_os_args()` returns a wrong arguments list. This is because `_initial_argv_hash` is initialized with the hash of the already modified `sys.argv` list.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/743", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/743/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/743/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/743/events", "html_url": "https://github.com/pallets/click/issues/743", "id": 210082393, "node_id": "MDU6SXNzdWUyMTAwODIzOTM=", "number": 743, "title": "Document supported Python versions", "user": {"login": "mjpieters", "id": 46775, "node_id": "MDQ6VXNlcjQ2Nzc1", "avatar_url": "https://avatars.githubusercontent.com/u/46775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjpieters", "html_url": "https://github.com/mjpieters", "followers_url": "https://api.github.com/users/mjpieters/followers", "following_url": "https://api.github.com/users/mjpieters/following{/other_user}", "gists_url": "https://api.github.com/users/mjpieters/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjpieters/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjpieters/subscriptions", "organizations_url": "https://api.github.com/users/mjpieters/orgs", "repos_url": "https://api.github.com/users/mjpieters/repos", "events_url": "https://api.github.com/users/mjpieters/events{/privacy}", "received_events_url": "https://api.github.com/users/mjpieters/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 104560051, "node_id": "MDU6TGFiZWwxMDQ1NjAwNTE=", "url": "https://api.github.com/repos/pallets/click/labels/docs", "name": "docs", "color": "207de5", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-24T15:47:30Z", "updated_at": "2020-11-13T09:30:56Z", "closed_at": "2018-05-15T15:02:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "Currently, there is no (easy to find) overview of what Python versions Click supports.\r\n\r\n* The README is silent on the subject\r\n* `setup.py` has trove identifiers for `Programming Language :: Python` and `Programming Language :: Python :: 3`, implying only Python 3 is supported.\r\n* Although the distributed wheel on PyPI is built to be version agnostic, the Py Version column is set to the confusing value of  *3.5* implying that the package only works on that Python version (_*_).\r\n* The [Python 3 page in the documentation](http://click.pocoo.org/6/python3/) decries Python 3 for how it handles text, and tells you to stick to Python 2 instead.\r\n* The [travis config](https://github.com/pallets/click/blob/master/.travis.yml) shows the project is tested against 2.6, 2.7, 3.3 - 3.5 and pypy. This may or may not amount to the officially supported version list.\r\n\r\nPlease add, to the README and perhaps to the quickstart, a clear list of officially supported Python versions, and update the project trove classifiers to include, at least, `Programming Language :: Python :: 2`, or preferably all supported versions.\r\n\r\n---\r\n(*) the Py Version column  was taken from the Python version that built the wheel; use [`twine`](https://pypi.python.org/pypi/twine) to upload wheels instead and [that column will be set correctly](http://stackoverflow.com/questions/40415349/what-does-the-py-version-in-pypi-project-page-mean-and-does-it-matter).", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/743/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/743/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/729", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/729/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/729/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/729/events", "html_url": "https://github.com/pallets/click/issues/729", "id": 206890413, "node_id": "MDU6SXNzdWUyMDY4OTA0MTM=", "number": 729, "title": "Can't mix nargs=-1 with envvar", "user": {"login": "mkomitee", "id": 826, "node_id": "MDQ6VXNlcjgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkomitee", "html_url": "https://github.com/mkomitee", "followers_url": "https://api.github.com/users/mkomitee/followers", "following_url": "https://api.github.com/users/mkomitee/following{/other_user}", "gists_url": "https://api.github.com/users/mkomitee/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkomitee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkomitee/subscriptions", "organizations_url": "https://api.github.com/users/mkomitee/orgs", "repos_url": "https://api.github.com/users/mkomitee/repos", "events_url": "https://api.github.com/users/mkomitee/events{/privacy}", "received_events_url": "https://api.github.com/users/mkomitee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 6, "created_at": "2017-02-10T19:50:53Z", "updated_at": "2020-11-13T07:19:05Z", "closed_at": "2020-08-06T01:58:02Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "`@click.argument(name, nargs=2, envvar=NAME)`\r\n\r\nWorks as expected. If you set `NAME=\"a b\"` and run your command `name` in the called function will be a tuple of `('a', 'b')`. \r\n\r\n`@click.argument(name, nargs=-1, envvar=NAME)`\r\n\r\non the other hand doesn't work as expected. If you call it in the same exact way, `name` will be set to the empty tuple.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/729/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/729/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/721", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/721/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/721/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/721/events", "html_url": "https://github.com/pallets/click/issues/721", "id": 204065011, "node_id": "MDU6SXNzdWUyMDQwNjUwMTE=", "number": 721, "title": "pressing tab gives me only root commands, even when rott command already typed", "user": {"login": "remort", "id": 1863452, "node_id": "MDQ6VXNlcjE4NjM0NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1863452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/remort", "html_url": "https://github.com/remort", "followers_url": "https://api.github.com/users/remort/followers", "following_url": "https://api.github.com/users/remort/following{/other_user}", "gists_url": "https://api.github.com/users/remort/gists{/gist_id}", "starred_url": "https://api.github.com/users/remort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/remort/subscriptions", "organizations_url": "https://api.github.com/users/remort/orgs", "repos_url": "https://api.github.com/users/remort/repos", "events_url": "https://api.github.com/users/remort/events{/privacy}", "received_events_url": "https://api.github.com/users/remort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 104560051, "node_id": "MDU6TGFiZWwxMDQ1NjAwNTE=", "url": "https://api.github.com/repos/pallets/click/labels/docs", "name": "docs", "color": "207de5", "default": false, "description": ""}, {"id": 1379115250, "node_id": "MDU6TGFiZWwxMzc5MTE1MjUw", "url": "https://api.github.com/repos/pallets/click/labels/save-for-sprint", "name": "save-for-sprint", "color": "b644d6", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-01-30T16:49:05Z", "updated_at": "2020-11-13T08:30:46Z", "closed_at": "2019-05-31T17:13:11Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I have subcomands and sub-subcommands in my cli app. But root groups added with `cli.add_command` in the top module where cli() is defined.\r\n\r\nBash completion script is generated with `eval \"$(_MYCLI_COMPLETE=source myclil)\";` successfully. But it is suspiciously short.\r\n\r\nBash completion is based on this `cli.add_command` as i get it, but I can't understand how to enable subcommands be shown in shell when i hit tab button.\r\n\r\nAnd as I mentioned above, top root commands shouldn't be shown since one of them is already typed in.\r\n\r\nDocumentation is silent about that, so please provide some guide on how to create a complex bash complpetion for cli applications made with click.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/721/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/721/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/714", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/714/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/714/events", "html_url": "https://github.com/pallets/click/issues/714", "id": 202242130, "node_id": "MDU6SXNzdWUyMDIyNDIxMzA=", "number": 714, "title": "Arguments not picking up environment variables", "user": {"login": "garettmd", "id": 7316933, "node_id": "MDQ6VXNlcjczMTY5MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7316933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garettmd", "html_url": "https://github.com/garettmd", "followers_url": "https://api.github.com/users/garettmd/followers", "following_url": "https://api.github.com/users/garettmd/following{/other_user}", "gists_url": "https://api.github.com/users/garettmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/garettmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garettmd/subscriptions", "organizations_url": "https://api.github.com/users/garettmd/orgs", "repos_url": "https://api.github.com/users/garettmd/repos", "events_url": "https://api.github.com/users/garettmd/events{/privacy}", "received_events_url": "https://api.github.com/users/garettmd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-20T21:05:46Z", "updated_at": "2020-11-13T07:31:02Z", "closed_at": "2020-06-29T21:53:53Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I have a setup that looks like this:\r\n\r\n```\r\n@click.group()\r\n@click.argument('url', envvar='KANBOARD_URL')\r\n@click.argument('user', envvar='KANBOARD_USER', default='jsonrpc')\r\n@click.argument('token', envvar='KANBOARD_TOKEN')\r\n@pass_connection\r\ndef cli(connection, url, user, token):\r\n    do stuff\r\n```\r\n\r\nand a subcommand that looks like this:\r\n\r\n```\r\n@cli.command()\r\n@click.option('-s', '--search-term', required=True, prompt=True)\r\n@click.option('-n', '--name', required=True, prompt=True)\r\n@click.option('-d', '--description', prompt=True)\r\n@click.option('-p', '--position', prompt=True)\r\n@pass_connection\r\ndef add(connection, search_term, name, description, position):\r\n    do stuff\r\n```\r\n\r\nRunning a command for it, with the necessary environment variables for the `cli` arguments created, would look like this:\r\n\r\n```\r\n$ myscript add -s test -n test -d test -p 1\r\n```\r\n\r\nBecause my environment variables are set, the command should run, but instead I get the help text for the main `cli` function. I've switched the arguments to being options and it picks up the environment variable with no problem. However, in my use case, it makes more sense for these parameters to be arguments, and the arguments should be picking up the env variables anyway", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/714/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/712", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/712/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/712/events", "html_url": "https://github.com/pallets/click/issues/712", "id": 201201136, "node_id": "MDU6SXNzdWUyMDEyMDExMzY=", "number": 712, "title": "BrokenPipeError when piping over stdin", "user": {"login": "wasade", "id": 474290, "node_id": "MDQ6VXNlcjQ3NDI5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/474290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasade", "html_url": "https://github.com/wasade", "followers_url": "https://api.github.com/users/wasade/followers", "following_url": "https://api.github.com/users/wasade/following{/other_user}", "gists_url": "https://api.github.com/users/wasade/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasade/subscriptions", "organizations_url": "https://api.github.com/users/wasade/orgs", "repos_url": "https://api.github.com/users/wasade/repos", "events_url": "https://api.github.com/users/wasade/events{/privacy}", "received_events_url": "https://api.github.com/users/wasade/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 3, "created_at": "2017-01-17T08:07:13Z", "updated_at": "2020-11-13T09:02:00Z", "closed_at": "2018-09-19T17:39:52Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I was very excited to see the contributions come in over #626 -- thank you for that. However, it looks like a `SIGPIPE` issue is still possible when piping in over stdin. An example is shown below. I want to note that I have not been able to absolutely isolate the problem as can be seen below where a small test is fine but a larger test results in the exception.\r\n\r\n```bash\r\n$ python --version\r\nPython 3.5.2 :: Continuum Analytics, Inc.\r\n$ python -c \"import click; print(click.__version__)\"\r\n6.7\r\n$ uname -a\r\nDarwin codinator.local 16.3.0 Darwin Kernel Version 16.3.0: Thu Nov 17 20:23:58 PST 2016; root:xnu-3789.31.2~1/RELEASE_X86_64 x86_64\r\n$ cat pipeerror\r\n#!/usr/bin/env python\r\n\r\nimport click\r\n\r\n@click.command()\r\n@click.option('--bar', type=click.File('r'))\r\ndef foo(bar):\r\n    for i in bar:\r\n        click.echo(i)\r\n\r\nif __name__ == '__main__':\r\n    foo() \r\n$ seq 1 10 | python pipeerror --bar - | head -n 2\r\n1\r\n\r\n$ seq 1 100 | python pipeerror --bar - | head -n 2\r\n1\r\n\r\nException ignored in: <_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>\r\nBrokenPipeError: [Errno 32] Broken pipe\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/688", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/688/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/688/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/688/events", "html_url": "https://github.com/pallets/click/issues/688", "id": 190996260, "node_id": "MDU6SXNzdWUxOTA5OTYyNjA=", "number": 688, "title": "UTF8 character support?", "user": {"login": "swaathi", "id": 5551587, "node_id": "MDQ6VXNlcjU1NTE1ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5551587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swaathi", "html_url": "https://github.com/swaathi", "followers_url": "https://api.github.com/users/swaathi/followers", "following_url": "https://api.github.com/users/swaathi/following{/other_user}", "gists_url": "https://api.github.com/users/swaathi/gists{/gist_id}", "starred_url": "https://api.github.com/users/swaathi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swaathi/subscriptions", "organizations_url": "https://api.github.com/users/swaathi/orgs", "repos_url": "https://api.github.com/users/swaathi/repos", "events_url": "https://api.github.com/users/swaathi/events{/privacy}", "received_events_url": "https://api.github.com/users/swaathi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-22T13:05:19Z", "updated_at": "2020-11-13T08:31:00Z", "closed_at": "2019-05-06T03:35:21Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I'm trying to create an CLI tool that analyzes some text. However this text contains UTF8 characters, such as emoticons, like \ud83c\udf89. \r\n\r\nThis is the function,\r\n\r\n```\r\n@main.command()\r\n@click.option('--text', '-t', help='Sample text')\r\ndef clean(text):\r\n    click.echo(text)\r\n```\r\n\r\nWhenever I pass in a text with an UTF8 symbol, this is what click throws,\r\n\r\n```\r\n\u279c  ~ unen clean -t \"Our vision is to make products that are insanely great, that would help people work smarter and better. I truly believe in this vision, and I know that some day, this is going to take us somewhere.\ud83c\udf55\"\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/unen\", line 9, in <module>\r\n    load_entry_point('UnderstandEngine==0.1.2', 'console_scripts', 'unen')()\r\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 716, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 696, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 1060, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 889, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Library/Python/2.7/site-packages/click/core.py\", line 534, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"build/bdist.macosx-10.11-x86_64/egg/understand_engine/cli/cli.py\", line 45, in clean\r\n  File \"/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py\", line 16, in decode\r\n    return codecs.utf_8_decode(input, errors, True)\r\nUnicodeEncodeError: 'ascii' codec can't encode characters in position 197-198: ordinal not in range(128)\r\n```\r\n\r\nI've tried to clean it out, but I realized it's an issue within click itself. Would be great if someone can point me in the right direction with this.", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/676", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/676/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/676/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/676/events", "html_url": "https://github.com/pallets/click/issues/676", "id": 183953272, "node_id": "MDU6SXNzdWUxODM5NTMyNzI=", "number": 676, "title": "Avoid rendering on highly frequent updates in progressbar", "user": {"login": "tilsche", "id": 9112758, "node_id": "MDQ6VXNlcjkxMTI3NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/9112758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tilsche", "html_url": "https://github.com/tilsche", "followers_url": "https://api.github.com/users/tilsche/followers", "following_url": "https://api.github.com/users/tilsche/following{/other_user}", "gists_url": "https://api.github.com/users/tilsche/gists{/gist_id}", "starred_url": "https://api.github.com/users/tilsche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tilsche/subscriptions", "organizations_url": "https://api.github.com/users/tilsche/orgs", "repos_url": "https://api.github.com/users/tilsche/repos", "events_url": "https://api.github.com/users/tilsche/events{/privacy}", "received_events_url": "https://api.github.com/users/tilsche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 2202112629, "node_id": "MDU6TGFiZWwyMjAyMTEyNjI5", "url": "https://api.github.com/repos/pallets/click/labels/f:progress%20bar", "name": "f:progress bar", "color": "e0647b", "default": false, "description": "feature: progress bar"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 0, "created_at": "2016-10-19T12:53:27Z", "updated_at": "2020-11-16T00:42:11Z", "closed_at": "2020-11-01T02:33:20Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I am using a progressbar in a loop with short iterations, which negatively affects performance. It would be good to supply a chunk size such that the heavy part of an update is only performed every nth time. \n\nCurrently I am using a small wrapper around it:\n\n```\nclass ChunkProgressbar:\n    def __init__(self, iterator, chunk_size=100, enabled=True, **kwargs):\n        self.iterator = iterator\n        self.chunk_size = chunk_size\n        self.bar = progressbar(iterator, **kwargs)\n        self.missed_updates = 0\n\n    def __enter__(self):\n        if self.bar is not None:\n            self.bar.__enter__()\n        return self\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.bar.update(self.missed_updates)\n        self.bar.__exit__(exc_type, exc_val, exc_tb)\n\n    def __iter__(self):\n        for index, elem in enumerate(self.iterator):\n            yield elem\n            self.missed_updates += 1\n            if index % self.chunk_size == self.chunk_size - 1:\n                self.bar.update(self.missed_updates)\n                self.missed_updates = 0\n```\n\nOne could also throttle the rendering based on timing information (like the eta calculation), but that might be costly again due to timing calls or mess with heterogeneous iteration times.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/676/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/676/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/667", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/667/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/667/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/667/events", "html_url": "https://github.com/pallets/click/issues/667", "id": 180331986, "node_id": "MDU6SXNzdWUxODAzMzE5ODY=", "number": 667, "title": "standalone_mode does not affect the help option", "user": {"login": "malkarouri", "id": 364625, "node_id": "MDQ6VXNlcjM2NDYyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/364625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malkarouri", "html_url": "https://github.com/malkarouri", "followers_url": "https://api.github.com/users/malkarouri/followers", "following_url": "https://api.github.com/users/malkarouri/following{/other_user}", "gists_url": "https://api.github.com/users/malkarouri/gists{/gist_id}", "starred_url": "https://api.github.com/users/malkarouri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malkarouri/subscriptions", "organizations_url": "https://api.github.com/users/malkarouri/orgs", "repos_url": "https://api.github.com/users/malkarouri/repos", "events_url": "https://api.github.com/users/malkarouri/events{/privacy}", "received_events_url": "https://api.github.com/users/malkarouri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 1, "created_at": "2016-09-30T15:23:58Z", "updated_at": "2020-11-13T09:20:25Z", "closed_at": "2018-08-28T04:23:40Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "If we use `standalone_mode=True` passing arguments to command execution will not call `sys.exit`, except if the argument to the command is `[\"--help\"]`.\n\nFrom inside ipython:\n\n> In [12]: import click\n> \n> In [13]: @click.command()\n>     ...: def hello():\n>     ...:     print(\"hello, world\")\n>     ...:\n> \n> In [14]: hello.main([], standalone_mode=False)\n> hello, world\n> \n> In [15]: hello.main(['wrong_arg'], standalone_mode=False)\n> ---\n> \n> UsageError                                Traceback (most recent call last)\n> <ipython-input-15-c2bf17950330> in <module>()\n> ...\n> UsageError: Got unexpected extra argument (wrong_arg)\n> \n> In [16]: hello.main(['--help'], standalone_mode=False)\n> Usage: ipython [OPTIONS]\n> \n> Options:\n>   --help  Show this message and exit.\n> An exception has occurred, use %tb to see the full traceback.\n> \n> SystemExit: 0\n> \n> /Users/malkarouri/Library/Python/2.7/lib/python/site-packages/IPython/core/interactiveshell.py:2889: UserWarning: To exit: use 'exit', 'quit', or Ctrl-D.\n>   warn(\"To exit: use 'exit', 'quit', or Ctrl-D.\", stacklevel=1)\n\nExpected:\n`--help` parameter in standalone mode does not call `sys.exit`.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/667/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/667/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/665", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/665/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/665/events", "html_url": "https://github.com/pallets/click/issues/665", "id": 179847833, "node_id": "MDU6SXNzdWUxNzk4NDc4MzM=", "number": 665, "title": "Click prompts do not cooperate with readline module", "user": {"login": "gumho", "id": 112738, "node_id": "MDQ6VXNlcjExMjczOA==", "avatar_url": "https://avatars.githubusercontent.com/u/112738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gumho", "html_url": "https://github.com/gumho", "followers_url": "https://api.github.com/users/gumho/followers", "following_url": "https://api.github.com/users/gumho/following{/other_user}", "gists_url": "https://api.github.com/users/gumho/gists{/gist_id}", "starred_url": "https://api.github.com/users/gumho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gumho/subscriptions", "organizations_url": "https://api.github.com/users/gumho/orgs", "repos_url": "https://api.github.com/users/gumho/repos", "events_url": "https://api.github.com/users/gumho/events{/privacy}", "received_events_url": "https://api.github.com/users/gumho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/5", "html_url": "https://github.com/pallets/click/milestone/5", "labels_url": "https://api.github.com/repos/pallets/click/milestones/5/labels", "id": 3655024, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyNA==", "number": 5, "title": "8.0.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 157, "state": "closed", "created_at": "2018-09-14T14:59:44Z", "updated_at": "2021-05-11T20:46:19Z", "due_on": null, "closed_at": "2021-05-11T20:46:19Z"}, "comments": 2, "created_at": "2016-09-28T18:16:24Z", "updated_at": "2021-04-21T00:13:34Z", "closed_at": "2021-04-06T16:29:34Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When readline is imported and a user presses backspace during a Click prompt, the entire prompt message is erased and cursor goes to beginning of the line. This can be reproduced with the following code:\n\n```\nimport click, readline\nclick.prompt(\"Input\")\n```\n\nThis is due to [Python issue 12833](https://bugs.python.org/issue12833). The official recommendation is that the prompt should be displayed with raw_input. I noticed that Click first displays the prompt message using echo() and then uses raw_input(\"\") for the prompt. There is also a workaround by passing \" \" to raw_input, however, that may be ugly in the display.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/665/reactions", "total_count": 12, "+1": 12, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/651", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/651/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/651/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/651/events", "html_url": "https://github.com/pallets/click/issues/651", "id": 175230910, "node_id": "MDU6SXNzdWUxNzUyMzA5MTA=", "number": 651, "title": "Progress bar should advance at end of loop", "user": {"login": "jdno", "id": 865550, "node_id": "MDQ6VXNlcjg2NTU1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/865550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdno", "html_url": "https://github.com/jdno", "followers_url": "https://api.github.com/users/jdno/followers", "following_url": "https://api.github.com/users/jdno/following{/other_user}", "gists_url": "https://api.github.com/users/jdno/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdno/subscriptions", "organizations_url": "https://api.github.com/users/jdno/orgs", "repos_url": "https://api.github.com/users/jdno/repos", "events_url": "https://api.github.com/users/jdno/events{/privacy}", "received_events_url": "https://api.github.com/users/jdno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 2, "created_at": "2016-09-06T12:09:17Z", "updated_at": "2020-11-13T09:02:17Z", "closed_at": "2018-05-14T21:49:28Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I'm using the progress bar with a piece of code like this:\n\n``` python\nwith click.progressbar(some_list) as bar:\n    for element in bar:\n        element.long_calculation\n```\n\nIt seems that the progress bar updates every time it enters the loop, which for the last element means the bar shows everything has been completed, although the last computation just started. It would be great if it would show the progress in terms of results, not as an iterator.\n\nI looked briefly at the implementation in [_termui_impl.py](https://github.com/pallets/click/blob/master/click/_termui_impl.py), but the rendering seems to be closely linked to the `pos` attribute and I don't feel comfortable to mess with that. \ud83d\ude12\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/651/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/635", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/635/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/635/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/635/events", "html_url": "https://github.com/pallets/click/issues/635", "id": 171624040, "node_id": "MDU6SXNzdWUxNzE2MjQwNDA=", "number": 635, "title": "Python 2.7: py2exe 0.6.9 bundling with click 6.6 fails", "user": {"login": "carlescufi", "id": 12450381, "node_id": "MDQ6VXNlcjEyNDUwMzgx", "avatar_url": "https://avatars.githubusercontent.com/u/12450381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlescufi", "html_url": "https://github.com/carlescufi", "followers_url": "https://api.github.com/users/carlescufi/followers", "following_url": "https://api.github.com/users/carlescufi/following{/other_user}", "gists_url": "https://api.github.com/users/carlescufi/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlescufi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlescufi/subscriptions", "organizations_url": "https://api.github.com/users/carlescufi/orgs", "repos_url": "https://api.github.com/users/carlescufi/repos", "events_url": "https://api.github.com/users/carlescufi/events{/privacy}", "received_events_url": "https://api.github.com/users/carlescufi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-08-17T10:24:46Z", "updated_at": "2020-11-13T08:30:55Z", "closed_at": "2019-05-07T14:54:31Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Bundling a script with py2exe 0.6.9 that contains click 6.6 seems to fail to run:\n\nhttps://github.com/pallets/flask/issues/1966\nhttps://github.com/NordicSemiconductor/pc-nrfutil/issues/9\n\nUsing an earlier version of click (5.1) seems to fix the issue\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/631", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/631/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/631/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/631/events", "html_url": "https://github.com/pallets/click/issues/631", "id": 170925085, "node_id": "MDU6SXNzdWUxNzA5MjUwODU=", "number": 631, "title": "Should `pass_context` be updating `co_argcount`? ", "user": {"login": "j2kun", "id": 2467754, "node_id": "MDQ6VXNlcjI0Njc3NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2467754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j2kun", "html_url": "https://github.com/j2kun", "followers_url": "https://api.github.com/users/j2kun/followers", "following_url": "https://api.github.com/users/j2kun/following{/other_user}", "gists_url": "https://api.github.com/users/j2kun/gists{/gist_id}", "starred_url": "https://api.github.com/users/j2kun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j2kun/subscriptions", "organizations_url": "https://api.github.com/users/j2kun/orgs", "repos_url": "https://api.github.com/users/j2kun/repos", "events_url": "https://api.github.com/users/j2kun/events{/privacy}", "received_events_url": "https://api.github.com/users/j2kun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-12T17:57:17Z", "updated_at": "2021-04-28T00:13:35Z", "closed_at": "2021-04-13T02:43:43Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "After upgrading from click 4.1 to click 6.6 (python 3.5, which may be relevant), I started getting a strange error message:\n\n```\n$ my_click_program\n/path/to/project/venv/lib/python3.5/dist-packages/click/core.py:874: Warning: Invoked legacy parameter callback \"<function my_function at 0x7f3004ecfd08>\".  The new signature for such callbacks starting with click 2.0 is (ctx, param, value).\n  value, args = param.handle_parse_result(ctx, opts, args)\n```\n\nI tracked this down to a CLI argument callback function that was wrapped with `@pass_context`. The quick fix is to remove that decorator, but in the interest of finding a root cause, I noticed that `@pass_context` appears to update the wrapped function metadata incorrectly. Specifically, the callback invoker looks for `callback.__code__.co_argcount` and expects it to be either completely missing or at least 3. Passing a callback through `pass_context` wipes away the argcount.\n\n```\nipdb> n\n> /path/to/project/venv/lib/python3.5/site-packages/click/decorators.py(19)pass_context()\n     17     def new_func(*args, **kwargs):\n     18         return f(get_current_context(), *args, **kwargs)\n---> 19     return update_wrapper(new_func, f)\n     20 \n     21 \n\nipdb> g = update_wrapper(new_func, f)\nipdb> g\n<function my_function at 0x10860bea0>\nipdb> g.__code__\n<code object new_func at 0x107947270, file \"/path/to/project/venv/lib/python3.5/site-packages/click/decorators.py\", line 17>\nipdb> g.__code__.co_argcount\n0\nipdb> f.__code__.co_argcount\n3\n```\n\nI don't know enough about Python to tell whether this is a bug in the `update_wrapper` function or a bug in click, or neither. It's clear that I shouldn't have placed `pass_context` on the callback in the first place, but I thought I'd let you folks know, in case it actually is a bug in click.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/631/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/625", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/625/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/625/events", "html_url": "https://github.com/pallets/click/issues/625", "id": 169189991, "node_id": "MDU6SXNzdWUxNjkxODk5OTE=", "number": 625, "title": "Handling of SIGPIPE", "user": {"login": "ob", "id": 4950, "node_id": "MDQ6VXNlcjQ5NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/4950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ob", "html_url": "https://github.com/ob", "followers_url": "https://api.github.com/users/ob/followers", "following_url": "https://api.github.com/users/ob/following{/other_user}", "gists_url": "https://api.github.com/users/ob/gists{/gist_id}", "starred_url": "https://api.github.com/users/ob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ob/subscriptions", "organizations_url": "https://api.github.com/users/ob/orgs", "repos_url": "https://api.github.com/users/ob/repos", "events_url": "https://api.github.com/users/ob/events{/privacy}", "received_events_url": "https://api.github.com/users/ob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-03T17:40:08Z", "updated_at": "2020-11-13T10:20:36Z", "closed_at": "2016-09-19T17:23:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "The simple example from the front page of click:\n\n```\nimport click\n\n@click.command()\n@click.option('--count', default=1, help='Number of greetings.')\n@click.option('--name', prompt='Your name',\n              help='The person to greet.')\ndef hello(count, name):\n    \"\"\"Simple program that greets NAME for a total of COUNT times.\"\"\"\n    for x in range(count):\n        click.echo('Hello %s!' % name)\n\nif __name__ == '__main__':\n    hello()\n```\n\nwhen piped to a command that closes the pipe prematurely, produces an ugly python stack trace:\n\n```\n$ python ./test-click.py --name ob --count 1000 | head -1\nHello ob!\nTraceback (most recent call last):\n  File \"./test-click.py\", line 13, in <module>\n    hello()\n  File \"/Users/obonilla/o/click/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/Users/obonilla/o/click/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/Users/obonilla/o/click/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/Users/obonilla/o/click/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"./test-click.py\", line 10, in hello\n    click.echo('Hello %s!' % name)\n  File \"/Users/obonilla/o/click/click/utils.py\", line 259, in echo\n    file.write(message)\n  File \"/Users/obonilla/o/click/click/_compat.py\", line 63, in write\n    return io.TextIOWrapper.write(self, x)\nIOError: [Errno 32] Broken pipe\n```\n\nPython maps the handling of SIGPIPE to an exception that I believe click.echo is not catching.\nIt seems it should silently exit in this particular case.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/625/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/611", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/611/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/611/events", "html_url": "https://github.com/pallets/click/issues/611", "id": 165635500, "node_id": "MDU6SXNzdWUxNjU2MzU1MDA=", "number": 611, "title": "Wrong parsing of argument when passing an option", "user": {"login": "nir0s", "id": 2003076, "node_id": "MDQ6VXNlcjIwMDMwNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/2003076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nir0s", "html_url": "https://github.com/nir0s", "followers_url": "https://api.github.com/users/nir0s/followers", "following_url": "https://api.github.com/users/nir0s/following{/other_user}", "gists_url": "https://api.github.com/users/nir0s/gists{/gist_id}", "starred_url": "https://api.github.com/users/nir0s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nir0s/subscriptions", "organizations_url": "https://api.github.com/users/nir0s/orgs", "repos_url": "https://api.github.com/users/nir0s/repos", "events_url": "https://api.github.com/users/nir0s/events{/privacy}", "received_events_url": "https://api.github.com/users/nir0s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-07-14T19:08:24Z", "updated_at": "2022-03-15T00:11:42Z", "closed_at": "2022-02-28T16:15:19Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "This is what happens to me.\n\n``` bash\ncfy blueprints upload /home/nir0s/repos/cloudify/simple-python-webserver-blueprint/blueprint.yaml --validate\nUsage: cfy [OPTIONS] BLUEPRINT_PATH\n\nError: Got unexpected extra arguments (h o m e / n i r 0 s / r e p o s / c l o u d i f y / s i m p l e - p y t h o n - w e b s e r v e r - b l u e p r i n t / b l u e p r i n t . y a m l)\n```\n\nThe command's code is:\n\n``` python\n@blueprints.command(name='upload')\n@click.argument('blueprint-path', nargs=1, required=True)\n@cfy.options.blueprint_id()\n@cfy.options.blueprint_filename()\n@cfy.options.validate\ndef upload(blueprint_path,\n           blueprint_id,\n           blueprint_filename,\n           validate):\n    \"\"\"Upload a blueprint to the manager\n    \"\"\"\n    ...\n```\n\nand `cfy.options.validate` is this:\n\n``` python\n        self.validate = click.option(\n            '--validate',\n            is_flag=True,\n            help=helptexts.VALIDATE_BLUEPRINT)\n...\n```\n\nWhere this command is a part of a group called blueprints which doesn't implement any special\n\nA few things to note:\n- When I don't provide the `--validate` flag, it parses well. \n- When I provide something that doesn't start with `/`, it also parses well.\n- I can't use the File type provided by click to verify the path because it can also be a url\n- I'm running Python 2.7.1\n- I tried Click 4 and updated 6.6 and it gave me the same error.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/602", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/602/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/602/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/602/events", "html_url": "https://github.com/pallets/click/issues/602", "id": 163651016, "node_id": "MDU6SXNzdWUxNjM2NTEwMTY=", "number": 602, "title": "Wrong argument handling when specifying 'ignore_unknown_options' in combination with options", "user": {"login": "cbandera", "id": 4852152, "node_id": "MDQ6VXNlcjQ4NTIxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4852152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbandera", "html_url": "https://github.com/cbandera", "followers_url": "https://api.github.com/users/cbandera/followers", "following_url": "https://api.github.com/users/cbandera/following{/other_user}", "gists_url": "https://api.github.com/users/cbandera/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbandera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbandera/subscriptions", "organizations_url": "https://api.github.com/users/cbandera/orgs", "repos_url": "https://api.github.com/users/cbandera/repos", "events_url": "https://api.github.com/users/cbandera/events{/privacy}", "received_events_url": "https://api.github.com/users/cbandera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-04T10:46:42Z", "updated_at": "2022-03-14T00:11:56Z", "closed_at": "2022-02-27T21:03:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "I am having trouble with argument handling when specifying the 'ignore_unknown_options' in combination with options.\n\nIn this specific case, I need to use the 'ignore_unknown_options' flag in order to pass a unknown amount of arguments AND options to an underlying process. (And prevent click from interpreting words beginning with a dash '-' as options).\n\nAt the same time, whenever you have an option specified with a letter, click will still steal this single letter from the argument. \n\nConsider this minimal example:\n\n``` python\nimport click\n\n@click.command(context_settings=dict(ignore_unknown_options=True, ))\n@click.option('-y', '--default_yes')\n@click.argument('compiler_args', nargs=-1)\ndef cli(  default_yes, compiler_args):\n        print(compiler_args)\n```\n\nWhen called with \n`cli -DCMAKE_CXX_FLAGS=-Wreturn-type`\nit will print \n    `(u'-DCMAKE_CXX_FLAGS=-Wreturn-t',)`\nand cut the rest off.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/602/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/600", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/600/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/600/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/600/events", "html_url": "https://github.com/pallets/click/issues/600", "id": 161079793, "node_id": "MDU6SXNzdWUxNjEwNzk3OTM=", "number": 600, "title": "Autocomplete does not work at a depth of 3 groups", "user": {"login": "objque", "id": 7000585, "node_id": "MDQ6VXNlcjcwMDA1ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/7000585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/objque", "html_url": "https://github.com/objque", "followers_url": "https://api.github.com/users/objque/followers", "following_url": "https://api.github.com/users/objque/following{/other_user}", "gists_url": "https://api.github.com/users/objque/gists{/gist_id}", "starred_url": "https://api.github.com/users/objque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/objque/subscriptions", "organizations_url": "https://api.github.com/users/objque/orgs", "repos_url": "https://api.github.com/users/objque/repos", "events_url": "https://api.github.com/users/objque/events{/privacy}", "received_events_url": "https://api.github.com/users/objque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-06-19T16:11:48Z", "updated_at": "2020-11-13T08:45:52Z", "closed_at": "2018-12-08T04:52:30Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I have this command structure.\n\n```\ncli        (group - entry point)\n-ip        (group)\n--static   (group)\n---foo     (method)\n--floating (group)\n---bar     (method)\n```\n\nAnd when I press <kbd>`Tab`</kbd><kbd>`Tab`</kbd> keys:\n1. attempt - i have correct autocomplete such as `ip` command\n2. attempt - i have correct autocomplete such as `floating` and `static` commands\n3. attempt - i have **incorrect** autocomplete - list of all files in current dir instead of `bar` command.\n\n[![screenshot](http://i.imgur.com/SisYVgQ.png)](http://i.imgur.com/SisYVgQ.png)\n\nHere's the code:\n**shell.py**\n\n```\n# coding=utf-8\nimport click\n\n\n@click.group()\ndef cli():\n    \"\"\"Entry point\"\"\"\n\n\n@cli.group()\ndef ip():\n    pass\n\n\n@ip.group()\ndef floating():\n    pass\n\n\n@floating.command()\ndef bar():\n    \"\"\"Is a ip floating command\"\"\"\n\n\n@ip.group()\ndef static():\n    pass\n\n\n@static.command()\ndef foo():\n    \"\"\"Is a ip static command\"\"\"\n```\n\n**setup.py**\n\n```\nfrom distutils.core import setup\n\nsetup(\n    name='sampleclick',\n    packages=['sampleclick'],\n    entry_points={\n        'console_scripts': [\n            'sc = sampleclick.shell:cli'\n        ]\n    },\n    install_requires=[\n        'click>=6.6',\n    ]\n)\n```\n\nIt is a bug in library or i doing something wrong?\nI tryed search some help on [ST](http://stackoverflow.com/questions/37780146/click-module-autocomplete-does-not-work-at-a-depth-of-3-groups), but it seems no one is faced with similar situation. \n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/598", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/598/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/598/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/598/events", "html_url": "https://github.com/pallets/click/issues/598", "id": 159936628, "node_id": "MDU6SXNzdWUxNTk5MzY2Mjg=", "number": 598, "title": "Argument metavar parameter not used with exception message", "user": {"login": "cdunklau", "id": 882547, "node_id": "MDQ6VXNlcjg4MjU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/882547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdunklau", "html_url": "https://github.com/cdunklau", "followers_url": "https://api.github.com/users/cdunklau/followers", "following_url": "https://api.github.com/users/cdunklau/following{/other_user}", "gists_url": "https://api.github.com/users/cdunklau/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdunklau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdunklau/subscriptions", "organizations_url": "https://api.github.com/users/cdunklau/orgs", "repos_url": "https://api.github.com/users/cdunklau/repos", "events_url": "https://api.github.com/users/cdunklau/events{/privacy}", "received_events_url": "https://api.github.com/users/cdunklau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 3, "created_at": "2016-06-13T12:16:01Z", "updated_at": "2020-11-13T09:20:24Z", "closed_at": "2018-05-14T20:32:20Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "#273 exists (again/still) in Click 6.6:\n# Code\n\n``` python\nimport click\nprint click.__version__\n\n@click.command()\n@click.argument('to_say', metavar='message')\ndef foo(to_say):\n    print to_say\n\n\nif __name__ == '__main__':\n    foo()\n```\n# Expected Output\n\n```\n6.6\nUsage: foo.py [OPTIONS] message\n\nError: Missing argument \"message\".\n```\n# Observed Output\n\n```\n6.6\nUsage: foo.py [OPTIONS] message\n\nError: Missing argument \"to_say\".\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/598/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/594", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/594/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/594/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/594/events", "html_url": "https://github.com/pallets/click/issues/594", "id": 159441224, "node_id": "MDU6SXNzdWUxNTk0NDEyMjQ=", "number": 594, "title": "Google App Engine ImportError: No module named msvcrt", "user": {"login": "davidstackio", "id": 2013388, "node_id": "MDQ6VXNlcjIwMTMzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/2013388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidstackio", "html_url": "https://github.com/davidstackio", "followers_url": "https://api.github.com/users/davidstackio/followers", "following_url": "https://api.github.com/users/davidstackio/following{/other_user}", "gists_url": "https://api.github.com/users/davidstackio/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidstackio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidstackio/subscriptions", "organizations_url": "https://api.github.com/users/davidstackio/orgs", "repos_url": "https://api.github.com/users/davidstackio/repos", "events_url": "https://api.github.com/users/davidstackio/events{/privacy}", "received_events_url": "https://api.github.com/users/davidstackio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": {"login": "mitsuhiko", "id": 7396, "node_id": "MDQ6VXNlcjczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitsuhiko", "html_url": "https://github.com/mitsuhiko", "followers_url": "https://api.github.com/users/mitsuhiko/followers", "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}", "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions", "organizations_url": "https://api.github.com/users/mitsuhiko/orgs", "repos_url": "https://api.github.com/users/mitsuhiko/repos", "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}", "received_events_url": "https://api.github.com/users/mitsuhiko/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mitsuhiko", "id": 7396, "node_id": "MDQ6VXNlcjczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitsuhiko", "html_url": "https://github.com/mitsuhiko", "followers_url": "https://api.github.com/users/mitsuhiko/followers", "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}", "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions", "organizations_url": "https://api.github.com/users/mitsuhiko/orgs", "repos_url": "https://api.github.com/users/mitsuhiko/repos", "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}", "received_events_url": "https://api.github.com/users/mitsuhiko/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-06-09T15:44:21Z", "updated_at": "2020-11-13T09:20:39Z", "closed_at": "2018-05-15T17:55:15Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Because Click was added to [Flask 0.11](http://flask.pocoo.org/docs/0.11/) for the [New Command Line Interface](http://flask.pocoo.org/docs/0.11/cli/), and Click imports the Windows only module [msvcrt](https://docs.python.org/2/library/msvcrt.html), and the [Google App Engine local development server](https://cloud.google.com/appengine/docs/python/tools/using-local-server) doesn't contain this module, an import error is thrown.\n\n![image](https://cloud.githubusercontent.com/assets/2013388/15935738/36ee00b6-2e1d-11e6-85a7-3b04de953659.png)\n\nI've [created a workaround](https://github.com/gae-init/gae-init/pull/527) for the [gae-init project](https://github.com/gae-init/gae-init) (by modifying the App Engine config file), but it would be best to have a fix come directly from Flask/Click since there are likely many more people who will experience this issue when using Flask 0.11 with Google App Engine.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/594/reactions", "total_count": 11, "+1": 11, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/594/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/586", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/586/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/586/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/586/events", "html_url": "https://github.com/pallets/click/issues/586", "id": 155696241, "node_id": "MDU6SXNzdWUxNTU2OTYyNDE=", "number": 586, "title": "testing.CliRunner.isolation(): Potential bug while trying to store the old process environment", "user": {"login": "jenisys", "id": 371945, "node_id": "MDQ6VXNlcjM3MTk0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/371945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jenisys", "html_url": "https://github.com/jenisys", "followers_url": "https://api.github.com/users/jenisys/followers", "following_url": "https://api.github.com/users/jenisys/following{/other_user}", "gists_url": "https://api.github.com/users/jenisys/gists{/gist_id}", "starred_url": "https://api.github.com/users/jenisys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jenisys/subscriptions", "organizations_url": "https://api.github.com/users/jenisys/orgs", "repos_url": "https://api.github.com/users/jenisys/repos", "events_url": "https://api.github.com/users/jenisys/events{/privacy}", "received_events_url": "https://api.github.com/users/jenisys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-05-19T09:48:55Z", "updated_at": "2020-11-13T07:46:11Z", "closed_at": "2020-02-24T01:49:15Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I stumbled over the following problem while inspecting the code (in the current repository HEAD).\nIt just does not look right that the new env-value is used to as env-key (name of the environment variable in the existing process environment).\n\nCONTEXT: [click/testing.py#L216](https://github.com/pallets/click/blob/master/click/testing.py#L216)\n\n``` python\n# -- FILE: click/texting.py:213ff in method CliRunner.isolation()\n       old_env = {}\n        try:\n            for key, value in iteritems(env):\n                old_env[key] = os.environ.get(value)    #< PROBLEMATIC LINE: new value usage as env-key\n                if value is None:\n```\n\nPROBABLY SHOULD BE:\n\n``` python\n               old_env[key] = os.environ.get(key)\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/583", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/583/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/583/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/583/events", "html_url": "https://github.com/pallets/click/issues/583", "id": 154859533, "node_id": "MDU6SXNzdWUxNTQ4NTk1MzM=", "number": 583, "title": "getchar() fails to raise KeyboardInterrupt on Python3", "user": {"login": "mbr", "id": 110577, "node_id": "MDQ6VXNlcjExMDU3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/110577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbr", "html_url": "https://github.com/mbr", "followers_url": "https://api.github.com/users/mbr/followers", "following_url": "https://api.github.com/users/mbr/following{/other_user}", "gists_url": "https://api.github.com/users/mbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbr/subscriptions", "organizations_url": "https://api.github.com/users/mbr/orgs", "repos_url": "https://api.github.com/users/mbr/repos", "events_url": "https://api.github.com/users/mbr/events{/privacy}", "received_events_url": "https://api.github.com/users/mbr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 2, "created_at": "2016-05-14T15:31:40Z", "updated_at": "2020-11-13T09:02:01Z", "closed_at": "2018-09-19T03:21:48Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "On Python3 (click6.6), getchar() will just pass on Ctrl+C instead of raising a KeyboardInterrupt. I would assume this is because `ch == '\\x03:` should be `ch == b'\\x03'` in `_termui_impl.py`.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/583/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/551", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/551/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/551/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/551/events", "html_url": "https://github.com/pallets/click/issues/551", "id": 145722575, "node_id": "MDU6SXNzdWUxNDU3MjI1NzU=", "number": 551, "title": "UnboundLocalError when combining allow_dash and dir_okay", "user": {"login": "DRMacIver", "id": 28623, "node_id": "MDQ6VXNlcjI4NjIz", "avatar_url": "https://avatars.githubusercontent.com/u/28623?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DRMacIver", "html_url": "https://github.com/DRMacIver", "followers_url": "https://api.github.com/users/DRMacIver/followers", "following_url": "https://api.github.com/users/DRMacIver/following{/other_user}", "gists_url": "https://api.github.com/users/DRMacIver/gists{/gist_id}", "starred_url": "https://api.github.com/users/DRMacIver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DRMacIver/subscriptions", "organizations_url": "https://api.github.com/users/DRMacIver/orgs", "repos_url": "https://api.github.com/users/DRMacIver/repos", "events_url": "https://api.github.com/users/DRMacIver/events{/privacy}", "received_events_url": "https://api.github.com/users/DRMacIver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": {"login": "untitaker", "id": 837573, "node_id": "MDQ6VXNlcjgzNzU3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/837573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untitaker", "html_url": "https://github.com/untitaker", "followers_url": "https://api.github.com/users/untitaker/followers", "following_url": "https://api.github.com/users/untitaker/following{/other_user}", "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions", "organizations_url": "https://api.github.com/users/untitaker/orgs", "repos_url": "https://api.github.com/users/untitaker/repos", "events_url": "https://api.github.com/users/untitaker/events{/privacy}", "received_events_url": "https://api.github.com/users/untitaker/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "untitaker", "id": 837573, "node_id": "MDQ6VXNlcjgzNzU3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/837573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untitaker", "html_url": "https://github.com/untitaker", "followers_url": "https://api.github.com/users/untitaker/followers", "following_url": "https://api.github.com/users/untitaker/following{/other_user}", "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions", "organizations_url": "https://api.github.com/users/untitaker/orgs", "repos_url": "https://api.github.com/users/untitaker/repos", "events_url": "https://api.github.com/users/untitaker/events{/privacy}", "received_events_url": "https://api.github.com/users/untitaker/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-04-04T15:42:25Z", "updated_at": "2020-11-13T10:30:47Z", "closed_at": "2016-04-04T16:41:33Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "``` python\nimport click\n\n@click.command()\n@click.argument('filename', type=click.Path(dir_okay=False, allow_dash=True))\ndef foo(filename):\n    pass\n\nif __name__ == '__main__':\n    foo()\n```\n\nWhen this script is invoked with the argument '-' I see the following error:\n\n```\n  File \"boo.py\", line 10, in <module>\n    foo()\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 695, in main\n    with self.make_context(prog_name, args, **extra) as ctx:\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 620, in make_context\n    self.parse_args(ctx, args)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 874, in parse_args\n    value, args = param.handle_parse_result(ctx, opts, args)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 1390, in handle_parse_result\n    value = self.full_process_value(ctx, value)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 1359, in full_process_value\n    value = self.process_value(ctx, value)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 1349, in process_value\n    return self.type_cast_value(ctx, value)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 1338, in type_cast_value\n    return _convert(value, (self.nargs != 1) + bool(self.multiple))\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/core.py\", line 1336, in _convert\n    return self.type(value, self, ctx)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/types.py\", line 38, in __call__\n    return self.convert(value, param, ctx)\n  File \"/home/david/projects/structureshrink/foo/lib/python3.5/site-packages/click-6.4-py3.5.egg/click/types.py\", line 426, in convert\n    if not self.dir_okay and stat.S_ISDIR(st.st_mode):\n```\n\nI am running Python 3.5.1 and using click version 6.4.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/551/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/547", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/547/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/547/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/547/events", "html_url": "https://github.com/pallets/click/issues/547", "id": 145188533, "node_id": "MDU6SXNzdWUxNDUxODg1MzM=", "number": 547, "title": "default=lambda and show_default behavior", "user": {"login": "jcejohnson", "id": 10442670, "node_id": "MDQ6VXNlcjEwNDQyNjcw", "avatar_url": "https://avatars.githubusercontent.com/u/10442670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcejohnson", "html_url": "https://github.com/jcejohnson", "followers_url": "https://api.github.com/users/jcejohnson/followers", "following_url": "https://api.github.com/users/jcejohnson/following{/other_user}", "gists_url": "https://api.github.com/users/jcejohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcejohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcejohnson/subscriptions", "organizations_url": "https://api.github.com/users/jcejohnson/orgs", "repos_url": "https://api.github.com/users/jcejohnson/repos", "events_url": "https://api.github.com/users/jcejohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/jcejohnson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-04-01T14:01:15Z", "updated_at": "2020-11-13T09:30:57Z", "closed_at": "2018-05-15T14:38:38Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "This:\n`@click.option('--username',  callback=set_option_value, default=lambda: get_option_default('username'), show_default=True)`\n\ngives this --help output:\n`--username TEXT                 [default: <function <lambda> at  0x104858a28>]`\n\nIf that is the intended behavior, is there an option to have it invoke the function during --help?\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/537", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/537/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/537/events", "html_url": "https://github.com/pallets/click/issues/537", "id": 140930080, "node_id": "MDU6SXNzdWUxNDA5MzAwODA=", "number": 537, "title": "click.getchar does not return Unicode on Windows", "user": {"login": "intrinseca", "id": 811746, "node_id": "MDQ6VXNlcjgxMTc0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/811746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/intrinseca", "html_url": "https://github.com/intrinseca", "followers_url": "https://api.github.com/users/intrinseca/followers", "following_url": "https://api.github.com/users/intrinseca/following{/other_user}", "gists_url": "https://api.github.com/users/intrinseca/gists{/gist_id}", "starred_url": "https://api.github.com/users/intrinseca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/intrinseca/subscriptions", "organizations_url": "https://api.github.com/users/intrinseca/orgs", "repos_url": "https://api.github.com/users/intrinseca/repos", "events_url": "https://api.github.com/users/intrinseca/events{/privacy}", "received_events_url": "https://api.github.com/users/intrinseca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 1, "created_at": "2016-03-15T10:17:42Z", "updated_at": "2020-11-13T09:02:03Z", "closed_at": "2018-09-18T13:52:25Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Test Script (Python 3.4.3 on Windows 7 x64):\n\n```\nimport click\nprint(click.getchar()) # press 'a' key, prints \"b'a'\" i.e. a byte string\n```\n\nWhen calling `click.getchar()` on Windows `mscvrt.getch` is used in `_termui_impl.getchar` rather than `mscvrt.getwch`.\n\nThis means you get a byte string back, which defeats the Ctrl-C/Ctrl-D processing in `_translate_ch_to_exc` and breaks comparisons with the return value. The [documentation for msvcrt](https://docs.python.org/3.4/library/msvcrt.html) advises that the wide char functions should be used wherever possible.\n\nI've patched this over by changing `getchar` to the following (also with a tweak to use the built in echoing rather than `putchar`, which is a typo for `putch` anyway):\n\n```\ndef getchar(echo):\n    if echo:\n        rv = msvcrt.getwche()\n    else:\n        rv = msvcrt.getwch()\n\n    _translate_ch_to_exc(rv)\n    if PY2:\n        enc = getattr(sys.stdin, 'encoding', None)\n        if enc is not None:\n            rv = rv.decode(enc, 'replace')\n        else:\n            rv = rv.decode('cp1252', 'replace')\n    return rv\n```\n\nBut I don't really want to embark on rigorously testing this (e.g. on Python 2), given the complexity of all the encoding handling. I'm not sure how you would even write a test for this, since it's so tied to the console I/O?\n\n(if click uses the wide char API, then does it even need the `PY2` branch?)\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/537/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/532", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/532/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/532/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/532/events", "html_url": "https://github.com/pallets/click/issues/532", "id": 139295064, "node_id": "MDU6SXNzdWUxMzkyOTUwNjQ=", "number": 532, "title": "prompt option fails with multiple=True", "user": {"login": "noqqe", "id": 203902, "node_id": "MDQ6VXNlcjIwMzkwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/203902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noqqe", "html_url": "https://github.com/noqqe", "followers_url": "https://api.github.com/users/noqqe/followers", "following_url": "https://api.github.com/users/noqqe/following{/other_user}", "gists_url": "https://api.github.com/users/noqqe/gists{/gist_id}", "starred_url": "https://api.github.com/users/noqqe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noqqe/subscriptions", "organizations_url": "https://api.github.com/users/noqqe/orgs", "repos_url": "https://api.github.com/users/noqqe/repos", "events_url": "https://api.github.com/users/noqqe/events{/privacy}", "received_events_url": "https://api.github.com/users/noqqe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 2177723746, "node_id": "MDU6TGFiZWwyMTc3NzIzNzQ2", "url": "https://api.github.com/repos/pallets/click/labels/f:prompt", "name": "f:prompt", "color": "e0647b", "default": false, "description": "feature: prompt for input"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-03-08T14:43:36Z", "updated_at": "2020-11-13T07:08:50Z", "closed_at": "2020-10-13T00:51:06Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Hi,\n\nImagine you have cli software (like me) with the following option:\n\n``` python\n@click.option('categories', '-c', '--categories',\n              type=str,\n              multiple=True,\n              prompt=\"Categories\",\n              default=\"foo\",\n              help='Set categories for this document')\n```\n\nSo if you dont provide this parameter, you get prompted for it. \n\n```\nCategories [(u'f', u'o', u'o')]:\n```\n\nPlease help me understand in what way splitting up the parameters this way makes sense. Im really having a hard time thinking about it.\n\nWouldn't it make much more sense to split them by space?\n\nIn the meantime, i worked around using the following, within my function:\n\n``` python\ncategories = ''.join(list(categories)).split()\n```\n\nI've also found Issue 218, but the answer is not really satisfying. \n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/532/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/530", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/530/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/530/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/530/events", "html_url": "https://github.com/pallets/click/issues/530", "id": 138602006, "node_id": "MDU6SXNzdWUxMzg2MDIwMDY=", "number": 530, "title": "click bashcomplete falls short of one argument, shows wrong options", "user": {"login": "untitaker", "id": 837573, "node_id": "MDQ6VXNlcjgzNzU3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/837573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untitaker", "html_url": "https://github.com/untitaker", "followers_url": "https://api.github.com/users/untitaker/followers", "following_url": "https://api.github.com/users/untitaker/following{/other_user}", "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions", "organizations_url": "https://api.github.com/users/untitaker/orgs", "repos_url": "https://api.github.com/users/untitaker/repos", "events_url": "https://api.github.com/users/untitaker/events{/privacy}", "received_events_url": "https://api.github.com/users/untitaker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-03-04T22:16:38Z", "updated_at": "2020-11-13T10:30:50Z", "closed_at": "2016-03-23T22:53:23Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "body": "Using the following application: https://gist.github.com/untitaker/b05a2c321b6303974152\nand this line to activate bash completion:\n\n```\neval \"$(_LOL_COMPLETE=source lol)\"\n```\n\nWe find a few bugs:\n- Typing `lol<space>`, and hitting tab N times, it completes to `lol sub sub sub`, where `sub` is repeated N times.\n- Typing `lol sub --` and hitting tab will suggest options that are registered on the group, and are invalid in this location.\n\nThis patch fixes both problems:\n\n``` diff\ndiff --git a/click/_bashcomplete.py b/click/_bashcomplete.py\nindex 43feffb..fd62137 100644\n--- a/click/_bashcomplete.py\n+++ b/click/_bashcomplete.py\n@@ -29,6 +29,7 @@ def get_completion_script(prog_name, complete_var):\n\n\n def resolve_ctx(cli, prog_name, args):\n+    args = [''] + args\n     ctx = cli.make_context(prog_name, args, resilient_parsing=True)\n     while ctx.args and isinstance(ctx.command, MultiCommand):\n         cmd = ctx.command.get_command(ctx, ctx.args[0])\n```\n\nand I have no idea why.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/530/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/524", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/524/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/524/events", "html_url": "https://github.com/pallets/click/issues/524", "id": 136422808, "node_id": "MDU6SXNzdWUxMzY0MjI4MDg=", "number": 524, "title": "click.File ignores the errors argument when encoding is not specified", "user": {"login": "dlukes", "id": 2734517, "node_id": "MDQ6VXNlcjI3MzQ1MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2734517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlukes", "html_url": "https://github.com/dlukes", "followers_url": "https://api.github.com/users/dlukes/followers", "following_url": "https://api.github.com/users/dlukes/following{/other_user}", "gists_url": "https://api.github.com/users/dlukes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlukes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlukes/subscriptions", "organizations_url": "https://api.github.com/users/dlukes/orgs", "repos_url": "https://api.github.com/users/dlukes/repos", "events_url": "https://api.github.com/users/dlukes/events{/privacy}", "received_events_url": "https://api.github.com/users/dlukes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 2, "created_at": "2016-02-25T15:35:47Z", "updated_at": "2020-11-13T07:46:12Z", "closed_at": "2020-02-24T01:28:35Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "See [click._compat.open_stream](https://github.com/mitsuhiko/click/blob/master/click/_compat.py#L429-L430):\n\n``` python\nif encoding is None:\n    return open(filename, mode), True\n```\n\nPersonally, I'm not sure why the case where the user doesn't explicitly specify an encoding is treated special, but I guess that's just because I'm unable to think through all of the compatibility ramifications :)\n\nIn any case, it would be nice to throw an error when a user tries to use the `errors` parameter on `click.File` without supplying `encoding`, because the current behavior is somewhat confusing:\n\n``` python\n#!/usr/bin/env python3\n\nimport click\nimport tempfile\n\nwith tempfile.NamedTemporaryFile(delete=False) as fh:\n    fh.write(\"\u010d\u00e1\u011b\u0161\u00ed\u010d\u00e1\u017e \".encode(\"utf-8\") +\n             bytearray.fromhex(\"ed\") +\n             \" \u011b\u00ed\u00e9\u0159\u00e1\u010d\u00e9\u0159\u017e\\n\".encode(\"utf-8\"))\n    name = fh.name\n\n\n@click.command()\n@click.option(\"--input\", type=click.File(\"r\", errors=\"surrogateescape\", encoding=\"utf-8\"), default=name)\ndef test(input):\n    click.echo(input.errors)\n    for line in input:\n        click.echo(line.encode(\"utf-8\", errors=\"surrogateescape\"))\n\n\nif __name__ == \"__main__\":\n    test()\n```\n\nWhen run this script outputs:\n\n```\nstrict\nTraceback (most recent call last):\n  File \"./test_click.py\", line 22, in <module>\n    test()\n  File \"/cnk/users/home/lukes/.linuxbrew/Cellar/python3/3.5.1/lib/python3.5/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/cnk/users/home/lukes/.linuxbrew/Cellar/python3/3.5.1/lib/python3.5/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/cnk/users/home/lukes/.linuxbrew/Cellar/python3/3.5.1/lib/python3.5/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/cnk/users/home/lukes/.linuxbrew/Cellar/python3/3.5.1/lib/python3.5/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"./test_click.py\", line 17, in test\n    for line in input:\n  File \"/cnk/users/home/lukes/.linuxbrew/bin/../Cellar/python3/3.5.1/lib/python3.5/codecs.py\", line 321, in decode\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xed in position 17: invalid continuation byte\n```\n\nNote `strict` on the first line. When `encoding=\"utf-8\"` is specified for `click.File`, everything works as expected. I think some validation along the following lines in `click.types.File.__init__` would help guide users towards the right solution:\n\n``` python\nif encoding is None and errors != \"strict\":\n    raise RuntimeError(\"Must specify ``encoding`` to set ``errors``.\")\n```\n\nPython 3.5, Click 598ad3313bd02b43cdceb990cca8893242d43e63\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/495", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/495/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/495/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/495/events", "html_url": "https://github.com/pallets/click/issues/495", "id": 124406471, "node_id": "MDU6SXNzdWUxMjQ0MDY0NzE=", "number": 495, "title": "Memory Leak in _winconsole", "user": {"login": "ibookstein", "id": 2357203, "node_id": "MDQ6VXNlcjIzNTcyMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/2357203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibookstein", "html_url": "https://github.com/ibookstein", "followers_url": "https://api.github.com/users/ibookstein/followers", "following_url": "https://api.github.com/users/ibookstein/following{/other_user}", "gists_url": "https://api.github.com/users/ibookstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibookstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibookstein/subscriptions", "organizations_url": "https://api.github.com/users/ibookstein/orgs", "repos_url": "https://api.github.com/users/ibookstein/repos", "events_url": "https://api.github.com/users/ibookstein/events{/privacy}", "received_events_url": "https://api.github.com/users/ibookstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 932642518, "node_id": "MDU6TGFiZWw5MzI2NDI1MTg=", "url": "https://api.github.com/repos/pallets/click/labels/windows", "name": "windows", "color": "30e8c9", "default": false, "description": "Issues pertaining to the Windows environment"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/4", "html_url": "https://github.com/pallets/click/milestone/4", "labels_url": "https://api.github.com/repos/pallets/click/milestones/4/labels", "id": 3655023, "node_id": "MDk6TWlsZXN0b25lMzY1NTAyMw==", "number": 4, "title": "7.1", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 85, "state": "closed", "created_at": "2018-09-14T14:59:39Z", "updated_at": "2020-03-09T15:22:28Z", "due_on": null, "closed_at": "2020-03-09T15:22:28Z"}, "comments": 1, "created_at": "2015-12-30T22:16:41Z", "updated_at": "2020-11-13T07:46:11Z", "closed_at": "2020-02-24T02:19:21Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Result of call to `CommandLineToArgvW` should be released by `LocalFree`.\nShould probably also check for failure of that function call (`NULL` is returned).\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/472", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/472/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/472/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/472/events", "html_url": "https://github.com/pallets/click/issues/472", "id": 119497120, "node_id": "MDU6SXNzdWUxMTk0OTcxMjA=", "number": 472, "title": "Tuples as Multi Value Options throw an TypeError", "user": {"login": "xsteadfastx", "id": 168397, "node_id": "MDQ6VXNlcjE2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/168397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xsteadfastx", "html_url": "https://github.com/xsteadfastx", "followers_url": "https://api.github.com/users/xsteadfastx/followers", "following_url": "https://api.github.com/users/xsteadfastx/following{/other_user}", "gists_url": "https://api.github.com/users/xsteadfastx/gists{/gist_id}", "starred_url": "https://api.github.com/users/xsteadfastx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xsteadfastx/subscriptions", "organizations_url": "https://api.github.com/users/xsteadfastx/orgs", "repos_url": "https://api.github.com/users/xsteadfastx/repos", "events_url": "https://api.github.com/users/xsteadfastx/events{/privacy}", "received_events_url": "https://api.github.com/users/xsteadfastx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-11-30T13:58:20Z", "updated_at": "2020-11-13T07:08:54Z", "closed_at": "2020-10-12T01:34:36Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Hi,\n\nsorry if i do something wrong but i dont even get the [example code](http://click.pocoo.org/6/options/#tuples-as-multi-value-options) working. i tried to put this into my code\n\n```\n@cli.command(help='Guess untranslated texts.')                                      \n@click.argument('xml_file', type=click.File('r'))                                   \n@click.option('--show', is_flag=True, help='Show untranslated texts.')              \n@click.option('--html', type=click.File('w'), nargs=1,                              \n              help='Write untranslated texts to html file.')                        \n@click.option('--edit', type=click.File('w'), nargs=1,                              \n              help='Edit untranslated texts.')                                      \n@click.option('--csv-export', type=click.File('w'), nargs=1,                        \n              help='Export untranslated texts to a csv file.')                      \n@click.option('--csv-import', type=(click.File('r'), click.File('w')),              \n              help='Imports csv changefile to another xml file.')                   \ndef untranslated(xml_file, show, html, edit, csv_export, csv_import):\n```\n\nAnd i will always get this\n\n```\nFile \"/home/xsteadfastx/Code/my-tools/env/lib/python3.4/site-packages/click/types.py\", line 472, in convert\n    raise TypeError('It would appear that nargs is set to conflict '\nTypeError: It would appear that nargs is set to conflict with the composite type arity.\n```\n\nso i tried it with Python2.7... still the same error. Then i created a fresh Python2.7 virtualenv and used the example\n\n```\nimport click\n\n\n@click.command()\n@click.option('--item', type=(unicode, int))\ndef putitem(item):\n    click.echo('name=%s id=%d' % item)\n\n\nputitem()\n```\n\nand running it with `python foo.py` still throws the error. I dont know if this is just a question, or if im doing something wrong and i know the \"issues\" section here is not for questions but maybe its some kind of a bug and i dont know what i else could do about this. so forgive me if its just my problem :smirk: \n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/471", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/471/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/471/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/471/events", "html_url": "https://github.com/pallets/click/issues/471", "id": 119256834, "node_id": "MDU6SXNzdWUxMTkyNTY4MzQ=", "number": 471, "title": "Bash completion for MultiCommands returns subcommands twice until it stops.", "user": {"login": "rubot", "id": 254139, "node_id": "MDQ6VXNlcjI1NDEzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/254139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rubot", "html_url": "https://github.com/rubot", "followers_url": "https://api.github.com/users/rubot/followers", "following_url": "https://api.github.com/users/rubot/following{/other_user}", "gists_url": "https://api.github.com/users/rubot/gists{/gist_id}", "starred_url": "https://api.github.com/users/rubot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rubot/subscriptions", "organizations_url": "https://api.github.com/users/rubot/orgs", "repos_url": "https://api.github.com/users/rubot/repos", "events_url": "https://api.github.com/users/rubot/events{/privacy}", "received_events_url": "https://api.github.com/users/rubot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-11-27T23:13:41Z", "updated_at": "2020-11-13T10:30:49Z", "closed_at": "2016-03-23T23:56:21Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Python 2.7.10\nbroken in click >= 6\nok in click (5.1)\n\n```\nmanage hello hello world world\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/471/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/447", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/447/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/447/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/447/events", "html_url": "https://github.com/pallets/click/issues/447", "id": 114390551, "node_id": "MDU6SXNzdWUxMTQzOTA1NTE=", "number": 447, "title": "progressbar does not allow update of 0", "user": {"login": "nchammas", "id": 1039369, "node_id": "MDQ6VXNlcjEwMzkzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1039369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nchammas", "html_url": "https://github.com/nchammas", "followers_url": "https://api.github.com/users/nchammas/followers", "following_url": "https://api.github.com/users/nchammas/following{/other_user}", "gists_url": "https://api.github.com/users/nchammas/gists{/gist_id}", "starred_url": "https://api.github.com/users/nchammas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nchammas/subscriptions", "organizations_url": "https://api.github.com/users/nchammas/orgs", "repos_url": "https://api.github.com/users/nchammas/repos", "events_url": "https://api.github.com/users/nchammas/events{/privacy}", "received_events_url": "https://api.github.com/users/nchammas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 933952159, "node_id": "MDU6TGFiZWw5MzM5NTIxNTk=", "url": "https://api.github.com/repos/pallets/click/labels/good%20first%20issue", "name": "good first issue", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pallets/click/milestones/3", "html_url": "https://github.com/pallets/click/milestone/3", "labels_url": "https://api.github.com/repos/pallets/click/milestones/3/labels", "id": 3355409, "node_id": "MDk6TWlsZXN0b25lMzM1NTQwOQ==", "number": 3, "title": "7.0", "description": "", "creator": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 137, "state": "closed", "created_at": "2018-05-17T17:59:58Z", "updated_at": "2018-11-20T15:54:12Z", "due_on": null, "closed_at": "2018-11-20T15:54:12Z"}, "comments": 2, "created_at": "2015-10-31T06:17:40Z", "updated_at": "2020-11-13T09:20:25Z", "closed_at": "2018-05-18T16:45:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "``` python\nwith click.progressbar(length=5) as progress_bar:\n    progress_bar.update(0)\n```\n\nThis throws a `float division by zero` error, which I believe is caused by [this line here](https://github.com/mitsuhiko/click/blob/89d3bfda52d151762e732738b828312a240bf89e/click/_termui_impl.py#L229).\n\nThe reason I ran into this is because I'm trying to use `progressbar` to track the status of remote resources which do work at unpredictable intervals. I pass in something like `work_remaining_start - work_remaining_end` to `progress_bar.update()` in a loop that periodically checks these remote resources, and sometimes this difference is 0.\n\nDoes it make sense for `update()` to accept a step of 0?\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/447/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/435", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/435/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/435/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/435/events", "html_url": "https://github.com/pallets/click/issues/435", "id": 110807828, "node_id": "MDU6SXNzdWUxMTA4MDc4Mjg=", "number": 435, "title": "Characters sometimes (rarely) echoed when using getchar", "user": {"login": "Stefan-Code", "id": 9949033, "node_id": "MDQ6VXNlcjk5NDkwMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/9949033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stefan-Code", "html_url": "https://github.com/Stefan-Code", "followers_url": "https://api.github.com/users/Stefan-Code/followers", "following_url": "https://api.github.com/users/Stefan-Code/following{/other_user}", "gists_url": "https://api.github.com/users/Stefan-Code/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stefan-Code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stefan-Code/subscriptions", "organizations_url": "https://api.github.com/users/Stefan-Code/orgs", "repos_url": "https://api.github.com/users/Stefan-Code/repos", "events_url": "https://api.github.com/users/Stefan-Code/events{/privacy}", "received_events_url": "https://api.github.com/users/Stefan-Code/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-10-10T17:49:37Z", "updated_at": "2020-11-13T09:30:55Z", "closed_at": "2018-05-15T16:03:33Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Please consider the following example:\n\n``` python\nfrom click import getchar\nESC = '\\x1b'\ni = 0\nwhile True:\n    c = getchar()\n    i += 1\n    if c == ESC:\n        print(\"\\n total characters typed:\", i)\n        exit()\n```\n\n(Press ESC to exit when running it)\nWhen I run this in `gnome-terminal` under `Linux User 3.13.0-37-generic #64-Ubuntu x86_64 x86_64 x86_64 GNU/Linux` and randomly smash on the keyboard, the output is similar to the following:\n\n```\n~/Programming/click $ python click-test.py \ndfsjakfh\ntotal characters typed: 205\n~/Programming/click-test $ \n```\n\nI am actually trying to solve [this bug](https://github.com/sloria/doitlive/issues/6) in case anyone is wondering why I am smashing on my keyboard ;)\nSo the problem is that a handful of characters gets printed instead of being catched by getchar(). I also suspect this is because of the nearly simultaneous key presses. \nDoes anyone know a solution to this problem?\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/429", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/429/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/429/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/429/events", "html_url": "https://github.com/pallets/click/issues/429", "id": 107719289, "node_id": "MDU6SXNzdWUxMDc3MTkyODk=", "number": 429, "title": "invoked commands do not prompt for missing arguments", "user": {"login": "larsimmisch", "id": 152872, "node_id": "MDQ6VXNlcjE1Mjg3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/152872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsimmisch", "html_url": "https://github.com/larsimmisch", "followers_url": "https://api.github.com/users/larsimmisch/followers", "following_url": "https://api.github.com/users/larsimmisch/following{/other_user}", "gists_url": "https://api.github.com/users/larsimmisch/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsimmisch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsimmisch/subscriptions", "organizations_url": "https://api.github.com/users/larsimmisch/orgs", "repos_url": "https://api.github.com/users/larsimmisch/repos", "events_url": "https://api.github.com/users/larsimmisch/events{/privacy}", "received_events_url": "https://api.github.com/users/larsimmisch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-22T13:51:40Z", "updated_at": "2020-11-13T09:30:53Z", "closed_at": "2018-05-15T17:53:43Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "I am trying to create a simple setup wizard with click.\n\nclick is used to create the cli, and one important usecase is that a setup function is called - typically without further commandline options - and the setup should prompt for all missing values.\n\nThis works in simple cases, but I'm trying to extend it with a bit of conditional logic, but in that case, invoked commands do not prompt for missing values.\n\nBelow is a nearly minimal script to demonstrate the behaviour. \n\n```\nimport os\nimport click\n\n@click.command()\n@click.option('--site-title',\n              default=\"Notizen\",\n              prompt='Enter site title.')\n@click.option('--user-backend',\n              default=\"db\",\n              type=click.Choice(['db', 'ldap']),\n              prompt='User backend?')\n@click.pass_context\ndef setup(ctx, **kw):\n    \"\"\" Start setup wizard\n    \"\"\"\n\n    if kw.get('user_backend', None) == 'db':\n        ctx.invoke(setup_db)\n\n@click.command()\n@click.option('--db-url',\n              default='sqlite://///tmp/notizen.sql',\n              prompt='Database URL?')\n@click.pass_context\ndef setup_db(ctx, **kw):\n    pass\n\nif __name__ == '__main__':\n    setup()\n```\n\nI would expect these prompts:\n\n```\nEnter site title. [Notizen]: \nUser backend? [db]:\nDatabase URL? [sqlite://///tmp/notizen.sql]\n```\n\nBut I only get:\n\n```\nEnter site title. [Notizen]: \nUser backend? [db]: \n```\n\nI discussed this on #pocoo, and there was agreement that this was an inconsistency, and I should file an issue.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/429/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/391", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/391/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/391/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/391/events", "html_url": "https://github.com/pallets/click/pull/391", "id": 97238507, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA4Mzk2NTc=", "number": 391, "title": "Fix @click.argument with nargs=-1 ignoring default", "user": {"login": "hugopeixoto", "id": 111554, "node_id": "MDQ6VXNlcjExMTU1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/111554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugopeixoto", "html_url": "https://github.com/hugopeixoto", "followers_url": "https://api.github.com/users/hugopeixoto/followers", "following_url": "https://api.github.com/users/hugopeixoto/following{/other_user}", "gists_url": "https://api.github.com/users/hugopeixoto/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugopeixoto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugopeixoto/subscriptions", "organizations_url": "https://api.github.com/users/hugopeixoto/orgs", "repos_url": "https://api.github.com/users/hugopeixoto/repos", "events_url": "https://api.github.com/users/hugopeixoto/events{/privacy}", "received_events_url": "https://api.github.com/users/hugopeixoto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": {"login": "mitsuhiko", "id": 7396, "node_id": "MDQ6VXNlcjczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitsuhiko", "html_url": "https://github.com/mitsuhiko", "followers_url": "https://api.github.com/users/mitsuhiko/followers", "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}", "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions", "organizations_url": "https://api.github.com/users/mitsuhiko/orgs", "repos_url": "https://api.github.com/users/mitsuhiko/repos", "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}", "received_events_url": "https://api.github.com/users/mitsuhiko/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mitsuhiko", "id": 7396, "node_id": "MDQ6VXNlcjczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitsuhiko", "html_url": "https://github.com/mitsuhiko", "followers_url": "https://api.github.com/users/mitsuhiko/followers", "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}", "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions", "organizations_url": "https://api.github.com/users/mitsuhiko/orgs", "repos_url": "https://api.github.com/users/mitsuhiko/repos", "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}", "received_events_url": "https://api.github.com/users/mitsuhiko/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2015-07-25T16:49:50Z", "updated_at": "2020-11-13T08:46:17Z", "closed_at": "2018-05-14T20:00:44Z", "author_association": "NONE", "active_lock_reason": "resolved", "draft": false, "pull_request": {"url": "https://api.github.com/repos/pallets/click/pulls/391", "html_url": "https://github.com/pallets/click/pull/391", "diff_url": "https://github.com/pallets/click/pull/391.diff", "patch_url": "https://github.com/pallets/click/pull/391.patch", "merged_at": null}, "body": "Fixes #390\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/391/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/pallets/click/issues/383", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/383/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/383/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/383/events", "html_url": "https://github.com/pallets/click/issues/383", "id": 95863742, "node_id": "MDU6SXNzdWU5NTg2Mzc0Mg==", "number": 383, "title": "click.IntRange() silently fails when non-int min/max are used.", "user": {"login": "geowurster", "id": 2676083, "node_id": "MDQ6VXNlcjI2NzYwODM=", "avatar_url": "https://avatars.githubusercontent.com/u/2676083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geowurster", "html_url": "https://github.com/geowurster", "followers_url": "https://api.github.com/users/geowurster/followers", "following_url": "https://api.github.com/users/geowurster/following{/other_user}", "gists_url": "https://api.github.com/users/geowurster/gists{/gist_id}", "starred_url": "https://api.github.com/users/geowurster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geowurster/subscriptions", "organizations_url": "https://api.github.com/users/geowurster/orgs", "repos_url": "https://api.github.com/users/geowurster/repos", "events_url": "https://api.github.com/users/geowurster/events{/privacy}", "received_events_url": "https://api.github.com/users/geowurster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-07-18T22:10:05Z", "updated_at": "2020-11-13T10:45:46Z", "closed_at": "2015-07-19T21:38:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "In this case `cpu_count()` isn't called so `click.IntRange()` receives a function rather than a value and the min/max validation is silently ignored.\n\n``` python\nfrom multiprocessing import cpu_count\n\nimport click\n\n@click.command()\n@click.option(\n    '-j', '--jobs', metavar='CORES', type=click.IntRange(min=1, max=cpu_count), default=1,\n    show_default=True, help=\"Process data across N cores.\"\n)\ndef cli(jobs):\n    \"\"\"Jobs\"\"\"\n\n    click.echo(jobs)\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/365", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/365/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/365/events", "html_url": "https://github.com/pallets/click/issues/365", "id": 90450694, "node_id": "MDU6SXNzdWU5MDQ1MDY5NA==", "number": 365, "title": "Windows \"Usage\" incorrect display and difficulty to get a command name correct displayed", "user": {"login": "pombreda", "id": 8384917, "node_id": "MDQ6VXNlcjgzODQ5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8384917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pombreda", "html_url": "https://github.com/pombreda", "followers_url": "https://api.github.com/users/pombreda/followers", "following_url": "https://api.github.com/users/pombreda/following{/other_user}", "gists_url": "https://api.github.com/users/pombreda/gists{/gist_id}", "starred_url": "https://api.github.com/users/pombreda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pombreda/subscriptions", "organizations_url": "https://api.github.com/users/pombreda/orgs", "repos_url": "https://api.github.com/users/pombreda/repos", "events_url": "https://api.github.com/users/pombreda/events{/privacy}", "received_events_url": "https://api.github.com/users/pombreda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2015-06-23T17:52:56Z", "updated_at": "2020-11-13T10:20:37Z", "closed_at": "2015-11-06T16:07:40Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When you create a  command with a setuptools console_scripts entry_points (for instance named mycli) the Usage displayed on POSIX (Linux, Mac,...) when running mycli --help will be:\n`Usage: mycli`\n\nIn contrast on Windows, I get the following:\n`Usage: mycli-script.py`  \n\nThis is annoying because the correct invocation on windows is to use mycli, not mycli-script.py. \nThe script is the same on all OSes, even though behind the scenes setuptools creates:\n- on posix, a bin/mycli python script with a correct shebang \n- on windows, a Scripts/mycli-script.py and Scripts/mycli.exe. This is called by invoking mycli like on POSIX  \n\nThe obvious way to force this would be to use the name arg in click.command. (\"This defaults to the function name.\"). But it does not default to the function name and always show the mycli-script.py instead of mycli. \n\nIt looks like this comes from Context.info_name which is computed somehow, but I could not find a way to get this info_name forced to something fixed.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/365/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/362", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/362/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/362/events", "html_url": "https://github.com/pallets/click/issues/362", "id": 89608569, "node_id": "MDU6SXNzdWU4OTYwODU2OQ==", "number": 362, "title": "CliRunner.invoke returns \"wrong\" error code when using sys.exit", "user": {"login": "torfsen", "id": 2877717, "node_id": "MDQ6VXNlcjI4Nzc3MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2877717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/torfsen", "html_url": "https://github.com/torfsen", "followers_url": "https://api.github.com/users/torfsen/followers", "following_url": "https://api.github.com/users/torfsen/following{/other_user}", "gists_url": "https://api.github.com/users/torfsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/torfsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/torfsen/subscriptions", "organizations_url": "https://api.github.com/users/torfsen/orgs", "repos_url": "https://api.github.com/users/torfsen/repos", "events_url": "https://api.github.com/users/torfsen/events{/privacy}", "received_events_url": "https://api.github.com/users/torfsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-06-19T16:41:02Z", "updated_at": "2020-11-13T10:45:52Z", "closed_at": "2015-06-21T21:23:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "`CliRunner.invoke` returns the \"wrong\" error code when the target function uses `sys.exit(error_string)`. Instead of a numerical code (as expected), `Result.error_code` contains the string message of the `SystemExit` exception raised by `sys.exit`. The reason is that `SystemExit.code` (which is [used by `CliRunner.invoke`](https://github.com/mitsuhiko/click/blob/master/click/testing.py#L280)) also contains that string:\n\n```\nIn [1]: import sys\n\nIn [2]: try:\n   ...:     sys.exit('error')\n   ...: except SystemExit as e:\n   ...:     print e.code\n   ...:     \nerror\n```\n\nThe [documentation of `sys.exit`](https://docs.python.org/2/library/sys.html#sys.exit) says that\n\n> The optional argument arg can be an integer giving the exit status (defaulting to zero), or another type of object. [...] If another type of object is passed, None is equivalent to passing zero, and any other object is printed to stderr and results in an exit code of 1.\n\nHowever, the actual exit code seems to be set somewhere else (and only if the `SystemExit` exception is not caught, obviously).\n\nIn my opinion, `CliRunner` should try to report the exit code that is reported to the OS. Hence, if `SystemExit.code` is not an integer, `Result.exit_code` should be 1.\n\nI'd be happy to provide a corresponding PR if that helps.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/362/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/346", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/346/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/346/events", "html_url": "https://github.com/pallets/click/issues/346", "id": 79073437, "node_id": "MDU6SXNzdWU3OTA3MzQzNw==", "number": 346, "title": "Very long command names cause help formatting degradation", "user": {"login": "jhermann", "id": 1068245, "node_id": "MDQ6VXNlcjEwNjgyNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1068245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhermann", "html_url": "https://github.com/jhermann", "followers_url": "https://api.github.com/users/jhermann/followers", "following_url": "https://api.github.com/users/jhermann/following{/other_user}", "gists_url": "https://api.github.com/users/jhermann/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhermann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhermann/subscriptions", "organizations_url": "https://api.github.com/users/jhermann/orgs", "repos_url": "https://api.github.com/users/jhermann/repos", "events_url": "https://api.github.com/users/jhermann/events{/privacy}", "received_events_url": "https://api.github.com/users/jhermann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-21T16:37:27Z", "updated_at": "2020-11-13T10:45:51Z", "closed_at": "2015-06-24T18:35:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "(for click==3.3)\n\nI give you this is quite exotic, but if your command's basename gets quite long, the help string looks\u2026 well, funny. Not a big deal, but reporting it anyway, the fix might be easy.\n\n``` sh\n$ bin/one-0.2.0-py2-none-any-pyrun-2.1.0-py2.7_ucs4-linux-x86_64.tgz.pex \\\n    bin/one-0.2.0-py2-none-any-pyrun-2.1.0-py2.7_ucs4-linux-x86_64.tgz.pex \nUsage: one-0.2.0-py2-none-any-pyrun-2.1.0-py2.7_ucs4-linux-x86_64.tgz.pex [OPTIONS]\n                                                                          C\n                                                                          O\n                                                                          M\n                                                                          M\n                                                                          A\n                                                                          N\n                                                                          D\n                                                                          [\n                                                                          A\n                                                                          R\n                                                                          G\n                                                                          S\n                                                                          ]\n                                                                          .\n                                                                          .\n                                                                          .\n\u2026\n```\n\nA better output would switch to a fixed indent (8 spaces?) when the command name gets \"too long\".\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/318", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/318/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/318/events", "html_url": "https://github.com/pallets/click/issues/318", "id": 66287612, "node_id": "MDU6SXNzdWU2NjI4NzYxMg==", "number": 318, "title": "failure in doc build in -4.0", "user": {"login": "idella", "id": 1655078, "node_id": "MDQ6VXNlcjE2NTUwNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1655078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/idella", "html_url": "https://github.com/idella", "followers_url": "https://api.github.com/users/idella/followers", "following_url": "https://api.github.com/users/idella/following{/other_user}", "gists_url": "https://api.github.com/users/idella/gists{/gist_id}", "starred_url": "https://api.github.com/users/idella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/idella/subscriptions", "organizations_url": "https://api.github.com/users/idella/orgs", "repos_url": "https://api.github.com/users/idella/repos", "events_url": "https://api.github.com/users/idella/events{/privacy}", "received_events_url": "https://api.github.com/users/idella/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 104560051, "node_id": "MDU6TGFiZWwxMDQ1NjAwNTE=", "url": "https://api.github.com/repos/pallets/click/labels/docs", "name": "docs", "color": "207de5", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2015-04-04T07:48:33Z", "updated_at": "2020-11-13T11:01:31Z", "closed_at": "2015-04-05T20:56:37Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "``` bash\n/work/click-4.0 $ make -C docs html\nmake: Entering directory '/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/docs'\nsphinx-build -b html -d _build/doctrees   . _build/html\nRunning Sphinx v1.3\nloading pickled environment... not yet created\nbuilding [mo]: targets for 0 po files that are out of date\nbuilding [html]: targets for 21 source files that are out of date\nupdating environment: 21 added, 0 changed, 0 removed\nreading sources... [ 57%] options                                                                                        \nException occurred:\n  File \"<docs>\", line 6, in info\nNameError: global name 'sys' is not defined\nThe full traceback has been saved in /tmp/sphinx-err-Ra4kt0.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\nMakefile:40: recipe for target 'html' failed\nmake: *** [html] Error 1\nmake: Leaving directory '/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/docs'\n```\n\nI hope 25 is enough.\n\n``` bash\nwork/click-4.0 $ tail -20 /tmp/sphinx-err-Ra4kt0.log \n    directive_class, match, type_name, option_presets)\n  File \"/usr/lib64/python2.7/site-packages/docutils/parsers/rst/states.py\", line 2103, in run_directive\n    result = directive_instance.run()\n  File \"/usr/lib64/python2.7/site-packages/sphinx/domains/__init__.py\", line 197, in run\n    return BaseDirective.run(self)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/docs/clickdoctools.py\", line 245, in run\n    rv = runner.run('\\n'.join(self.content))\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/docs/clickdoctools.py\", line 186, in run\n    'isolated_filesystem': isolated_filesystem,\n  File \"<docs>\", line 1, in <module>\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/docs/clickdoctools.py\", line 175, in invoke\n    **extra)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/click/core.py\", line 644, in main\n    rv = self.invoke(ctx)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/click/core.py\", line 837, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/mnt/gen2/TmpDir/portage/dev-python/click-4.0/work/click-4.0/click/core.py\", line 464, in invoke\n    return callback(*args, **kwargs)\n  File \"<docs>\", line 6, in info\nNameError: global name 'sys' is not defined\n```\n\nclick-4.0 $ python -V\nPython 2.7.9\nDo you require anything further?\nIf this need go to sphinx issue tracker please forward it.  I more suspect a missing import of sys but it's not clear to me which file in the output.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/316", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/316/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/316/events", "html_url": "https://github.com/pallets/click/issues/316", "id": 66211217, "node_id": "MDU6SXNzdWU2NjIxMTIxNw==", "number": 316, "title": "multiple argument, wrong order", "user": {"login": "liujoey", "id": 123727, "node_id": "MDQ6VXNlcjEyMzcyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/123727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liujoey", "html_url": "https://github.com/liujoey", "followers_url": "https://api.github.com/users/liujoey/followers", "following_url": "https://api.github.com/users/liujoey/following{/other_user}", "gists_url": "https://api.github.com/users/liujoey/gists{/gist_id}", "starred_url": "https://api.github.com/users/liujoey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liujoey/subscriptions", "organizations_url": "https://api.github.com/users/liujoey/orgs", "repos_url": "https://api.github.com/users/liujoey/repos", "events_url": "https://api.github.com/users/liujoey/events{/privacy}", "received_events_url": "https://api.github.com/users/liujoey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-03T19:16:19Z", "updated_at": "2020-11-13T10:45:48Z", "closed_at": "2015-07-14T17:33:30Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "```\n@click.command()\n@click.argument('src', type=click.Path(exists=True), nargs=-1)\n@click.argument('abstract', type=click.File('w', encoding='utf-8'), nargs=1)\n@click.argument('body', type=click.File('w', encoding='utf-8'), nargs=1)\ndef cli(src, abstract, body):\n```\n\nwith above code, when I call:\n`mycli input.txt abs.txt body.txt` I suppose in my cli function, `abstract` is the file of `abs.txt` and `body` is the file of `body.txt`.\nBut the fact is what I got `abstract` is `body.txt` and `body` is `abs.txt`\n\nSo, I reverse the `abstract` and `body` declaration like this:\n\n```\n@click.command()\n@click.argument('src', type=click.Path(exists=True), nargs=-1)\n@click.argument('body', type=click.File('w', encoding='utf-8'), nargs=1)\n@click.argument('abstract', type=click.File('w', encoding='utf-8'), nargs=1)\ndef cli(src, abstract, body):\n```\n\nNow my function getting the right files. But when I run `mycli --help` it shows:\n\n```\nUsage: mycli [OPTIONS] [SRC]... BODY ABSTRACT\n```\n\nWhich the sequence is wrong again.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/312", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/312/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/312/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/312/events", "html_url": "https://github.com/pallets/click/issues/312", "id": 65533674, "node_id": "MDU6SXNzdWU2NTUzMzY3NA==", "number": 312, "title": "Trailing 'None' in usage/error when a required argument or option is omitted", "user": {"login": "geowurster", "id": 2676083, "node_id": "MDQ6VXNlcjI2NzYwODM=", "avatar_url": "https://avatars.githubusercontent.com/u/2676083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geowurster", "html_url": "https://github.com/geowurster", "followers_url": "https://api.github.com/users/geowurster/followers", "following_url": "https://api.github.com/users/geowurster/following{/other_user}", "gists_url": "https://api.github.com/users/geowurster/gists{/gist_id}", "starred_url": "https://api.github.com/users/geowurster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geowurster/subscriptions", "organizations_url": "https://api.github.com/users/geowurster/orgs", "repos_url": "https://api.github.com/users/geowurster/repos", "events_url": "https://api.github.com/users/geowurster/events{/privacy}", "received_events_url": "https://api.github.com/users/geowurster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2015-03-31T20:00:44Z", "updated_at": "2020-11-13T11:01:29Z", "closed_at": "2015-04-24T18:18:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": "resolved", "body": "Executing a CLI command and omitting a required argument or option causes 'None' to be appended the the error message.\n\nConsider the following CLI:\n\n``` python\n#!/usr/bin/env python\n\n\nimport click\n\n\n@click.command()\n@click.argument('infile')\n@click.option('-o', '--outfile', required=True)\ndef main(infile, outfile):\n\n    pass\n\n\nif __name__ == \"__main__\":\n    main()\n\n```\n\nExecuting without any arguments yields the following output and a trailing 'None' on the last line:\n\n``` console\n(venv)Captain:click kwurster$ ./trailing-none.py \nUsage: trailing-none.py [OPTIONS] INFILE\n\nError: Missing argument \"infile\".None\n```\n\nExecuting with the required `infile` argument triggers an error for the required `--outfile` argument, which also contains a trailing 'None' on the last line:\n\n``` console\n(venv)Captain:click kwurster$ ./trailing-none.py something\nUsage: trailing-none.py [OPTIONS] INFILE\n\nError: Missing option \"-o\" / \"--outfile\".None\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/300", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/300/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/300/events", "html_url": "https://github.com/pallets/click/issues/300", "id": 58351237, "node_id": "MDU6SXNzdWU1ODM1MTIzNw==", "number": 300, "title": "Prompts write to STDOUT", "user": {"login": "dploeger", "id": 203453, "node_id": "MDQ6VXNlcjIwMzQ1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/203453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dploeger", "html_url": "https://github.com/dploeger", "followers_url": "https://api.github.com/users/dploeger/followers", "following_url": "https://api.github.com/users/dploeger/following{/other_user}", "gists_url": "https://api.github.com/users/dploeger/gists{/gist_id}", "starred_url": "https://api.github.com/users/dploeger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dploeger/subscriptions", "organizations_url": "https://api.github.com/users/dploeger/orgs", "repos_url": "https://api.github.com/users/dploeger/repos", "events_url": "https://api.github.com/users/dploeger/events{/privacy}", "received_events_url": "https://api.github.com/users/dploeger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2015-02-20T13:20:18Z", "updated_at": "2020-11-13T07:18:49Z", "closed_at": "2020-08-13T16:34:02Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "If you use a prompt option (with prompt=True), the prompt itself gets written to STDOUT. This is a different behaviour as in other programs, where the prompt is neither written to STDOUT nor STDERR (I don't know exactly, how they actually do it).\n\nThis is especially bad if you want to pipe STDOUT into a file: You will get the data alongside the password prompt.\n\nSo, please at least put the prompt on STDERR.\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/300/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/300/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/273", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/273/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/273/events", "html_url": "https://github.com/pallets/click/issues/273", "id": 52710116, "node_id": "MDU6SXNzdWU1MjcxMDExNg==", "number": 273, "title": "Argument metavar parameter not used with exception message", "user": {"login": "rsyring", "id": 109467, "node_id": "MDQ6VXNlcjEwOTQ2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/109467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsyring", "html_url": "https://github.com/rsyring", "followers_url": "https://api.github.com/users/rsyring/followers", "following_url": "https://api.github.com/users/rsyring/following{/other_user}", "gists_url": "https://api.github.com/users/rsyring/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsyring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsyring/subscriptions", "organizations_url": "https://api.github.com/users/rsyring/orgs", "repos_url": "https://api.github.com/users/rsyring/repos", "events_url": "https://api.github.com/users/rsyring/events{/privacy}", "received_events_url": "https://api.github.com/users/rsyring/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-12-23T03:03:53Z", "updated_at": "2020-11-13T11:01:33Z", "closed_at": "2015-03-31T13:38:50Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "## The Code\n\n``` python\n@app.command('mssql', short_help='Backup Microsoft SQL database(s).')\n@click.argument('backup_type', metavar='type')\ndef mssql(backup_type):\n    click.echo('Running the backup...')\n```\n## Expected Output\n\n``` console\n(backupdb)rsyring@loftex:~/projects/backup-db-src$ backupdb mssql\nUsage: backupdb mssql [OPTIONS] type\n\nError: Missing argument \"type\".\n```\n## Actual Output\n\nNote that the metavar parameter is used in \"Usage\" but not when notifying the user about the missing argument:\n\n``` console\n(backupdb)rsyring@loftex:~/projects/backup-db-src$ backupdb mssql\nUsage: backupdb mssql [OPTIONS] type\n\nError: Missing argument \"backup_type\".\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/255", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/255/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/255/events", "html_url": "https://github.com/pallets/click/issues/255", "id": 49447455, "node_id": "MDU6SXNzdWU0OTQ0NzQ1NQ==", "number": 255, "title": "autodoc params wrap poorly in --help and helptext is duplicated", "user": {"login": "WyseNynja", "id": 624221, "node_id": "MDQ6VXNlcjYyNDIyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/624221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WyseNynja", "html_url": "https://github.com/WyseNynja", "followers_url": "https://api.github.com/users/WyseNynja/followers", "following_url": "https://api.github.com/users/WyseNynja/following{/other_user}", "gists_url": "https://api.github.com/users/WyseNynja/gists{/gist_id}", "starred_url": "https://api.github.com/users/WyseNynja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WyseNynja/subscriptions", "organizations_url": "https://api.github.com/users/WyseNynja/orgs", "repos_url": "https://api.github.com/users/WyseNynja/repos", "events_url": "https://api.github.com/users/WyseNynja/events{/privacy}", "received_events_url": "https://api.github.com/users/WyseNynja/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 104560051, "node_id": "MDU6TGFiZWwxMDQ1NjAwNTE=", "url": "https://api.github.com/repos/pallets/click/labels/docs", "name": "docs", "color": "207de5", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-11-19T20:14:58Z", "updated_at": "2020-11-13T07:18:50Z", "closed_at": "2020-08-13T20:55:41Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "#234 will improve autodocs, but there are more issues.\n\nRight now all of my parameters have their help defined twice. Once in click's decorator for use with `--help` and once in the docstring for use with autodoc.\n\nFor example:\n\n```\n@click.option('bread'):\n@click.option('--heat', default=5, help='how much to burn your toast')\n@click.option('--slices', default=1, help='the number of slices to toast')\ndef toast(bread, heat, slices):\n    \"\"\"Make some toast.\n\n    :param int heat: how much to burn your toast\n    :param int slices: the number of slices to toast\n\n    .. WARNING::\n\n        This also wraps poorly if it ends up going to multiple lines.\n        It puts 4 spaces into the middle of the message\n\n    Here is an example::\n\n        \\b\n        toast pumpernickle 4\n        toast sourdough\n    \"\"\"\n    print 'toasting {} slice(s) of {} at heat level {}'.format(slices, bread, heat)\n```\n\nWhen you do `--help` with a function like this, the :param: lines get wrapped. I tried just adding a `/b` above them which fixes `--help` but the generated docs break with that and it seems silly to have to put a new line between every one.\n\nAlso, without the `/b` in the example, those lines wrap. However, with the `/b` there is a blank line at the start of all the autodoc codeblocks.\n\nWhat would be wonderful is if this worked:\n\n```\n@click.option('bread'):\n@click.option('--heat', default=5, help='how much to burn your toast')\n@click.option('--slices', default=1, help='the number of slices to toast')\ndef toast(bread, heat, slices):\n    \"\"\"Toast some bread.\n\n    Example::\n\n        toast pumpernickle 4\n        toast sourdough\n    \"\"\"\n    print 'toasting {} slice(s) of {} at heat level {}'.format(slices, bread, heat)\n```\n\nThe above works great with `--help` right now, but autodoc doesn't have any of the parameter help in it and the example is wrapper.\n\nAny ideas how to make `--help` and autodoc play nice?\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/255/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/255/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pallets/click/issues/231", "repository_url": "https://api.github.com/repos/pallets/click", "labels_url": "https://api.github.com/repos/pallets/click/issues/231/labels{/name}", "comments_url": "https://api.github.com/repos/pallets/click/issues/231/comments", "events_url": "https://api.github.com/repos/pallets/click/issues/231/events", "html_url": "https://github.com/pallets/click/issues/231", "id": 44267266, "node_id": "MDU6SXNzdWU0NDI2NzI2Ng==", "number": 231, "title": "Single-character wrapped lines with long options", "user": {"login": "OddBloke", "id": 62736, "node_id": "MDQ6VXNlcjYyNzM2", "avatar_url": "https://avatars.githubusercontent.com/u/62736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OddBloke", "html_url": "https://github.com/OddBloke", "followers_url": "https://api.github.com/users/OddBloke/followers", "following_url": "https://api.github.com/users/OddBloke/following{/other_user}", "gists_url": "https://api.github.com/users/OddBloke/gists{/gist_id}", "starred_url": "https://api.github.com/users/OddBloke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OddBloke/subscriptions", "organizations_url": "https://api.github.com/users/OddBloke/orgs", "repos_url": "https://api.github.com/users/OddBloke/repos", "events_url": "https://api.github.com/users/OddBloke/events{/privacy}", "received_events_url": "https://api.github.com/users/OddBloke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 94769817, "node_id": "MDU6TGFiZWw5NDc2OTgxNw==", "url": "https://api.github.com/repos/pallets/click/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2014-09-29T08:06:35Z", "updated_at": "2020-11-13T11:01:39Z", "closed_at": "2015-03-31T10:00:07Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "When I run the script at the bottom I get the following output. I would, obviously, expect ALSOLONG to be all together on the second row.\n\n```\nUsage: example.py relatively_long example [OPTIONS] FIRST SECOND LONGISH\n                                          A\n                                          L\n                                          S\n                                          O\n                                          L\n                                          O\n                                          N\n                                          G\n\nError: Missing argument \"first\".\n```\n## \n\n``` py\nimport click\n\n\n@click.group()\ndef foo():\n    pass\n\n\n@foo.group()\ndef relatively_long():\n    pass\n\n\n@relatively_long.command()\n@click.argument('first')\n@click.argument('second')\n@click.argument('longish')\n@click.argument('alsolong')\ndef example():\n    pass\n\n\nfoo()\n```\n", "reactions": {"url": "https://api.github.com/repos/pallets/click/issues/231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pallets/click/issues/231/timeline", "performed_via_github_app": null, "state_reason": "completed"}]