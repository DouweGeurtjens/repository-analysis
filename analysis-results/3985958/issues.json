[{"url": "https://api.github.com/repos/hypothesis/h/issues/7863", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7863/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7863/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7863/events", "html_url": "https://github.com/hypothesis/h/pull/7863", "id": 1597314856, "node_id": "PR_kwDOADutIc5KoXV1", "number": 7863, "title": "Add the faker library as required by the new bulk annotation end-point", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-02-23T18:10:37Z", "updated_at": "2023-02-23T18:17:14Z", "closed_at": "2023-02-23T18:17:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7863", "html_url": "https://github.com/hypothesis/h/pull/7863", "diff_url": "https://github.com/hypothesis/h/pull/7863.diff", "patch_url": "https://github.com/hypothesis/h/pull/7863.patch", "merged_at": "2023-02-23T18:17:12Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/h/issues/7857\r\n \r\nCaused in:\r\n\r\n * https://github.com/hypothesis/h/pull/7859\r\n  \r\nWeirdly I can't get this to trigger locally, although it should. I suspect our dev requirements are therefore not quite right.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7863/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7801", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7801/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7801/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7801/events", "html_url": "https://github.com/hypothesis/h/pull/7801", "id": 1535119262, "node_id": "PR_kwDOADutIc5HeevD", "number": 7801, "title": "Fix report functional tests", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-01-16T15:31:36Z", "updated_at": "2023-01-16T15:41:45Z", "closed_at": "2023-01-16T15:41:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7801", "html_url": "https://github.com/hypothesis/h/pull/7801", "diff_url": "https://github.com/hypothesis/h/pull/7801.diff", "patch_url": "https://github.com/hypothesis/h/pull/7801.patch", "merged_at": "2023-01-16T15:41:44Z"}, "body": "I was seeing some very inconsistent behavior, where running the tests manually would work, but running them via `make functest` would fail.\r\n\r\nThe first issue was that we were not clearing out the `report` schema, which can block clearing out other schema as a result of dependent views created in it.\r\n\r\nThis then revealed that we were not re-creating the schema as required in the func tests.\r\n\r\nThis does not appear to effect CI, as I suspect the DB is cleared out completely between runs when we create a new docker image for Postgres.\r\n\r\n## Testing notes\r\n\r\nI'm not sure if this is exactly the right case. In the first case you need the report to exist to cause the error. In the second you need it to _not_ exist. This should catch both? In order to test each separately you'd need to checkout the individual commits.\r\n\r\n * `make services args=down`\r\n * `make services`\r\n * `make functest` - Things fail here with only the first commit \r\n * `make functest` - Things fail here in `main` / with neither\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7801/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7741", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7741/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7741/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7741/events", "html_url": "https://github.com/hypothesis/h/pull/7741", "id": 1477099116, "node_id": "PR_kwDOADutIc5EX0-Q", "number": 7741, "title": "Use a subscription service to consolidate subscription preference behavior", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-12-05T17:55:42Z", "updated_at": "2022-12-07T14:23:54Z", "closed_at": "2022-12-07T14:03:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7741", "html_url": "https://github.com/hypothesis/h/pull/7741", "diff_url": "https://github.com/hypothesis/h/pull/7741.diff", "patch_url": "https://github.com/hypothesis/h/pull/7741.patch", "merged_at": "2022-12-07T14:03:45Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/h/issues/7724\r\n\r\nBased on refactors from:\r\n\r\n * https://github.com/hypothesis/h/pull/7742\r\n\r\nThis PR moves all the notification subscription access to a common service. This:\r\n\r\n * Simplifies the callers\r\n * Makes it easier to locate and understand the logic\r\n * Ensures that subscriptions are dealt with consistently\r\n * Ensures all subscriptions are created with a default if missing (this fixes a bug)\r\n\r\n## Review notes\r\n\r\nThis PR is split into three commits which add the methods one by one to the service. The first two aren't technically independant, as we remove a function in the first commit which we still rely on in the second. The third is completely independant.\r\n\r\nWe could split this by into commits 1+2 / 3 if that makes it easier to review.\r\n\r\n## Testing notes\r\n\r\n### Setting notification preferences\r\n\r\n * `make services`\r\n * `make dev`\r\n * Visit: http://localhost:5000/ and login\r\n * On the cog on the top right click on \"Notifications\" (or visit http://localhost:5000/account/settings/notifications)\r\n * Ensure the box is ticked\r\n * Refresh the page and see the box is still ticked\r\n * Untick the box\r\n * Refresh the page and see the box is unticked\r\n\r\nTesting the bug with missing subscriptions:\r\n\r\n * Do the above (box should be unticked)\r\n * `make sql`\r\n * `truncate subscriptions`\r\n * Refresh the page and see the box has changed from unticked to ticked\r\n * Check you can save your preference again\r\n\r\n### Test signing up as a new user\r\n\r\n * If the directory `mail/` exists in `h` run: `rm mail/*.eml`\r\n * In an incognito window visit: http://localhost:5000/signup\r\n * Fill out some values\r\n * The \"I would like to receive news about annotation and Hypothesis.\" is irrelevant and is stored on a separate \"comms_opt_in\" column on the user (:disappointed:  Why?)\r\n * Run `ls -lh mail/` in your `h` directory\r\n * Cat the most recent `eml` file and find the activiation link and copy it\r\n * Paste it into your incognito session and re-enter your password\r\n * Visit http://localhost:5000/account/settings/notifications\r\n * You should see the notification box ticked\r\n\r\n### Testing reply notifications\r\n\r\n * Do the above - You should be logged into an incognito window with one user and a main tab with another\r\n * If the directory `mail/` exists in `h` run: `rm mail/*.eml`\r\n * Start the Client, Via and ViaHTML\r\n * Open the following link in both tabs: http://localhost:9083/http://example.com/\r\n * Annotate as the user in the incognito tab\r\n * Check to see if a mail is created in the following three situations:\r\n    * Reply preference is enabled - Email **should** be sent\r\n    * Reply preference is disabled - Email **should not** be sent\r\n    * `make sql; truncate subscriptions` -  Email **should** be sent", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7741/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7691", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7691/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7691/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7691/events", "html_url": "https://github.com/hypothesis/h/pull/7691", "id": 1431753142, "node_id": "PR_kwDOADutIc5B-96M", "number": 7691, "title": "Try and fix permissions issues with FDW for LMS", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-11-01T16:52:01Z", "updated_at": "2022-11-01T17:00:31Z", "closed_at": "2022-11-01T17:00:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7691", "html_url": "https://github.com/hypothesis/h/pull/7691", "diff_url": "https://github.com/hypothesis/h/pull/7691.diff", "patch_url": "https://github.com/hypothesis/h/pull/7691.patch", "merged_at": "2022-11-01T17:00:30Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/report/issues/3\r\n\r\nWe are hitting permissions issues when trying to access things from LMS, which is confusing, as we seem to have granted the required permissions. This is a bit of a throw everything at the wall attempt to fix it.\r\n\r\nThe transaction bug is real, but we don't know if it's the cause. Trying permissions later is a random guess.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7691/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7666", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7666/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7666/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7666/events", "html_url": "https://github.com/hypothesis/h/pull/7666", "id": 1425554944, "node_id": "PR_kwDOADutIc5BqXec", "number": 7666, "title": "Add some debug information to see if we are getting the DSN we should", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-10-27T12:28:01Z", "updated_at": "2022-10-27T12:34:55Z", "closed_at": "2022-10-27T12:34:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7666", "html_url": "https://github.com/hypothesis/h/pull/7666", "diff_url": "https://github.com/hypothesis/h/pull/7666.diff", "patch_url": "https://github.com/hypothesis/h/pull/7666.patch", "merged_at": "2022-10-27T12:34:54Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/report/issues/3\r\n\r\nThis should help us find out if the correct value is getting as far as the script in CA.\r\n\r\nThe easiest way to test this is to run the corresponding func test which will print the output.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7666/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7659", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7659/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7659/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7659/events", "html_url": "https://github.com/hypothesis/h/pull/7659", "id": 1422673723, "node_id": "PR_kwDOADutIc5Bgtlr", "number": 7659, "title": "Finish the CI tasks for running report jobs", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1860275130, "node_id": "MDU6TGFiZWwxODYwMjc1MTMw", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20enabler", "name": "technical enabler", "color": "0c8714", "default": false, "description": "Technical work that facilitates further work"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-10-25T15:36:40Z", "updated_at": "2022-10-26T13:10:23Z", "closed_at": "2022-10-26T13:10:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7659", "html_url": "https://github.com/hypothesis/h/pull/7659", "diff_url": "https://github.com/hypothesis/h/pull/7659.diff", "patch_url": "https://github.com/hypothesis/h/pull/7659.patch", "merged_at": "2022-10-26T13:10:21Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/h/issues/7650\r\n\r\nSome notes here about mixing \"schedule\" with \"workflow_dispatch\", but I don't think we want to get into it necessarily.\r\n\r\n* https://dev.to/mrmike/github-action-handling-input-default-value-5f2g\r\n\r\nThis fixes the two SQL tasks related jobs so they actually work.\r\n\r\n## Testing notes\r\n\r\n * Visit: https://github.com/hypothesis/h/actions/workflows/report_tasks.yml\r\n * Click \"Run workflow\"\r\n * Choose \"Use workflow from\": `sql-actions-ci`\r\n * Noodle about. In particular:\r\n    * Try running `hello_world` in QA us-west-1 only\r\n    * Try running the breaking invalid SQL task\r\n    * Try running the \"dangerous\" tasks without giving approval\r\n\r\nYou can do the same thing with the dedicated refresh action with: https://github.com/hypothesis/h/actions/workflows/report_refresh.yml\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7659/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7723", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7723/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7723/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7723/events", "html_url": "https://github.com/hypothesis/h/issues/7723", "id": 1466729735, "node_id": "I_kwDOADutIc5XbIUH", "number": 7723, "title": "Activity Page search shows same results on page 50 and higher", "user": {"login": "mattdricker", "id": 71603629, "node_id": "MDQ6VXNlcjcxNjAzNjI5", "avatar_url": "https://avatars.githubusercontent.com/u/71603629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattdricker", "html_url": "https://github.com/mattdricker", "followers_url": "https://api.github.com/users/mattdricker/followers", "following_url": "https://api.github.com/users/mattdricker/following{/other_user}", "gists_url": "https://api.github.com/users/mattdricker/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattdricker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattdricker/subscriptions", "organizations_url": "https://api.github.com/users/mattdricker/orgs", "repos_url": "https://api.github.com/users/mattdricker/repos", "events_url": "https://api.github.com/users/mattdricker/events{/privacy}", "received_events_url": "https://api.github.com/users/mattdricker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 4854911537, "node_id": "LA_kwDOADutIc8AAAABIWASMQ", "url": "https://api.github.com/repos/hypothesis/h/labels/wontfix", "name": "wontfix", "color": "DD1C87", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-10T18:04:46Z", "updated_at": "2022-11-30T14:11:22Z", "closed_at": "2022-11-30T14:11:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Bug report form\r\nReported by user: https://app.hubspot.com/contacts/6291320/ticket/925726335\r\n### Steps to reproduce\r\n\r\n1. Perform a search that generates more that 50 pages of results, such as an unfiltered search in the public group: https://hypothes.is/search\r\n2. Jump to page 50: https://hypothes.is/search?page=50\r\n3. Visit page 51, 52, 53, etc., and compare the results of each page\r\n\r\n<img width=\"995\" alt=\"Screen Shot 2022-06-10 at 1 59 48 PM\" src=\"https://user-images.githubusercontent.com/71603629/173124888-60f19c8f-f391-48d2-b206-e6d2ab64790e.png\">\r\n<img width=\"995\" alt=\"Screen Shot 2022-06-10 at 2 00 00 PM\" src=\"https://user-images.githubusercontent.com/71603629/173124892-d31e1a7e-cb3c-4dc1-a22c-27949cc56b01.png\">\r\n<img width=\"995\" alt=\"Screen Shot 2022-06-10 at 2 00 31 PM\" src=\"https://user-images.githubusercontent.com/71603629/173124891-9ea43b4a-4f1f-4353-b27c-a1c8ad727e4d.png\">\r\n\r\n### Expected behavior\r\nEach page past 50 should show additional unique results.\r\n\r\n### Actual behaviour\r\nEvery page from 50+ on displays the same list of results.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7723/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7252", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7252/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7252/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7252/events", "html_url": "https://github.com/hypothesis/h/pull/7252", "id": 1114018590, "node_id": "PR_kwDOADutIc4xkMOx", "number": 7252, "title": "Replace \"body\" with \"detail\" which can be see in the output", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-01-25T15:18:14Z", "updated_at": "2022-01-25T17:19:04Z", "closed_at": "2022-01-25T17:19:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7252", "html_url": "https://github.com/hypothesis/h/pull/7252", "diff_url": "https://github.com/hypothesis/h/pull/7252.diff", "patch_url": "https://github.com/hypothesis/h/pull/7252.patch", "merged_at": "2022-01-25T17:19:03Z"}, "body": "Otherwise you get an error with a \"null\" in it.\r\n\r\nWhen things go wrong in the auth token stuff we set a \"body\" attribute, but nothing reads it. We only output the results of \"detail\". This results in a error like this:\r\n\r\n```{\"status\": \"failure\": \"reason\": null}```\r\n\r\nThe part where this gets serialised is here: https://github.com/hypothesis/h/blob/master/h/views/api/errors.py#L56", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7252/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7103", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7103/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7103/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7103/events", "html_url": "https://github.com/hypothesis/h/pull/7103", "id": 1022588448, "node_id": "PR_kwDOADutIc4tAzh1", "number": 7103, "title": "Fix a flakey test which failed 1 in 6 times as it required tags", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-10-11T11:27:32Z", "updated_at": "2021-10-11T11:38:09Z", "closed_at": "2021-10-11T11:38:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7103", "html_url": "https://github.com/hypothesis/h/pull/7103", "diff_url": "https://github.com/hypothesis/h/pull/7103.diff", "patch_url": "https://github.com/hypothesis/h/pull/7103.patch", "merged_at": "2021-10-11T11:38:09Z"}, "body": "We were relying on there being a tag in the output of a factory, but the factory returns between 0 and 5 tags, so 1 in 6 times it failed.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7103/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7062", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7062/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7062/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7062/events", "html_url": "https://github.com/hypothesis/h/pull/7062", "id": 1008193921, "node_id": "PR_kwDOADutIc4sUOHI", "number": 7062, "title": "Use dataclasses instead SQLAlchemy objects for identity", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-27T14:04:07Z", "updated_at": "2021-09-27T15:56:17Z", "closed_at": "2021-09-27T15:56:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7062", "html_url": "https://github.com/hypothesis/h/pull/7062", "diff_url": "https://github.com/hypothesis/h/pull/7062.diff", "patch_url": "https://github.com/hypothesis/h/pull/7062.patch", "merged_at": "2021-09-27T15:56:16Z"}, "body": "For: https://sentry.io/organizations/hypothesis/issues/2676845925/?referrer=slack\r\n\r\nThis stands up a parallel set of `dataclass` objects which mirror the elements we need from each SQLAlchemy object which is currently required by the auth system.\r\n\r\nThe only field which isn't strictly necessary is the `id` in all cases, but it seems like a sane addition.\r\n\r\n### Suspected cause\r\n\r\nThis happens out of the main session in an event handler. I think this happened as a result of starting to cache the identity object. Previously this would have started from scratch and resulted in issuing more queries that would bind the objects to the DB session inside the event handler.\r\n\r\nNow we authenticate in the main loop, keep the user, and attempt to re-use it in the event handler. This results in a user associated with the wrong SQLAlchemy session.\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7062/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7055", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7055/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7055/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7055/events", "html_url": "https://github.com/hypothesis/h/pull/7055", "id": 1006538964, "node_id": "PR_kwDOADutIc4sPkXG", "number": 7055, "title": "Fix the fallback link in the navbar settings to be a call not a string", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-24T14:42:36Z", "updated_at": "2021-09-27T12:25:28Z", "closed_at": "2021-09-27T12:25:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7055", "html_url": "https://github.com/hypothesis/h/pull/7055", "diff_url": "https://github.com/hypothesis/h/pull/7055.diff", "patch_url": "https://github.com/hypothesis/h/pull/7055.patch", "merged_at": "2021-09-27T12:25:27Z"}, "body": "Previously this was the string we intended to evaluate rather than the result. I don't know exactly why this is kicking in for me, but if\r\nit does it shouldn't be broken.\r\n\r\nI think this happens when the javascript bundle is broken or missing, and you run this separately (outside of `make dev`) which would re-create the bundle.\r\n\r\nYou might be able to re-create by blocking Javascript.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7055/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7049", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7049/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7049/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7049/events", "html_url": "https://github.com/hypothesis/h/pull/7049", "id": 1005448570, "node_id": "PR_kwDOADutIc4sMOtF", "number": 7049, "title": "Fix admin pages for staff members", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-23T13:38:54Z", "updated_at": "2021-09-27T12:39:36Z", "closed_at": "2021-09-27T12:39:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7049", "html_url": "https://github.com/hypothesis/h/pull/7049", "diff_url": "https://github.com/hypothesis/h/pull/7049.diff", "patch_url": "https://github.com/hypothesis/h/pull/7049.patch", "merged_at": "2021-09-27T12:39:35Z"}, "body": "It turns out there is a ton of permissions access hidden away in the templates for the admin page menus. These weren't working at all, but as admins have blanket access nothing appears wrong.\r\n\r\nStaff users however would see a blank bar. It turns out we don't actually have any staff users, but it seems wrong to leave it broken. It's also breaking the func tests in future releases.\r\n\r\nThis PR:\r\n\r\n * [bug] Fixes a small highlighting issue where groups didn't highlight correctly\r\n * [bug] Fixes staff members not being able to see any items\r\n * [bug] Fixes staff members not being able to see group and org creation elements\r\n * Creates a Jinja extension to provide the data required for the nav bar in Python\r\n * Uses the correct permissions to decide who should see what\r\n\r\n### Testing notes\r\n\r\nHighlighting\r\n\r\n * Run `make services dev`\r\n * Visit http://localhost:5000\r\n * Login as `devdata_admin`\r\n * Visit: http://localhost:5000/admin\r\n * Click through each item in the menu and sub-menus, the relevant tab should highlight \r\n \r\nStaff issue:\r\n\r\n * Login as `devdata_staff`\r\n * Visit: http://localhost:5000/admin\r\n * You should see a more limited selection of items\r\n * This should now include group and org create\r\n * Visit a page for editing a group (this is a special case) everything should look normal", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7049/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7036", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7036/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7036/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7036/events", "html_url": "https://github.com/hypothesis/h/pull/7036", "id": 999262264, "node_id": "PR_kwDOADutIc4r4zLP", "number": 7036, "title": "Revert \"Revert \"Remove `principals_allowed_by_permission`\"\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-17T11:46:20Z", "updated_at": "2021-09-17T14:10:53Z", "closed_at": "2021-09-17T14:10:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7036", "html_url": "https://github.com/hypothesis/h/pull/7036", "diff_url": "https://github.com/hypothesis/h/pull/7036.diff", "patch_url": "https://github.com/hypothesis/h/pull/7036.patch", "merged_at": "2021-09-17T14:10:53Z"}, "body": "Inception!\r\n\r\nReverts hypothesis/h#7032\r\n\r\nThis stuff has been reviewed before:\r\n\r\n * https://github.com/hypothesis/h/pull/6977 - Remove principals_allowed_by_permission (This one was broken)\r\n * https://github.com/hypothesis/h/pull/7031 - Add a permits method to make this a 2.0 compliant policy (This one is totally fine)\r\n\r\nThe bug here is that we end up accessing `user.groups`. By the time we do this the user is disconnected from the SQLAlchemy session and the lazy loading on that attr fails.\r\n\r\nThe solution here is to prime the pump by calling the method when we first receive a connection. This means we bake in the groups the user had when they connected. This could get out of date. This is equivalent to the previous solution which baked the groups into principals at the same point.\r\n\r\nThe advantage of this approach is it means we never hit the DB again when dealing with distributing annotation messages. This is a big deal as we can't afford to do anything expensive there.\r\n\r\n## How did this happen?\r\n\r\nI returned to the original PR after about 4 weeks. I think because the tests were passing I assumed it was ready to go but it actually wasn't. This was then reviewed, but it wasn't noticed in the review that it didn't work. Here are some places I think we could do better:\r\n\r\n* I should have re-tested instead of assuming it works\r\n* It's not a good idea to leave work this long\r\n* We need some functional coverage of the WS, we can't be blind in CI to this sort of thing - This is probably hard\r\n* The review was quite long on stylistic feedback, but it seems we missed the fact the PR didn't work\r\n* When reviewing the ticket we should run the code instead of relying on a visual inspection\r\n* This hit an un-connected bug about deployment of the WS which made it look like it was working when it wasn't\r\n\r\n## Testing notes\r\n\r\nUsual websocket dance. Open two tabs on the same page and do things.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7036/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7025", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7025/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7025/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7025/events", "html_url": "https://github.com/hypothesis/h/pull/7025", "id": 997264238, "node_id": "PR_kwDOADutIc4rytIG", "number": 7025, "title": "Separate the `Group.ADMIN` and `AdminPage.GROUPS` permission", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-09-15T16:09:42Z", "updated_at": "2021-09-16T12:20:39Z", "closed_at": "2021-09-16T12:18:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/7025", "html_url": "https://github.com/hypothesis/h/pull/7025", "diff_url": "https://github.com/hypothesis/h/pull/7025.diff", "patch_url": "https://github.com/hypothesis/h/pull/7025.patch", "merged_at": "2021-09-16T12:18:08Z"}, "body": "For:\r\n\r\n * https://github.com/hypothesis/h/issues/6595\r\n\r\nMore analysis here:\r\n\r\n * https://github.com/hypothesis/h/pull/6869\r\n\r\nThis PR sorts out a few permission confusions between `Group.ADMIN` and `AdminPage.GROUPS`\r\n\r\n * `AdminPage.GROUPS` is now the permission required for all admin pages actions (getting and deleting required `Group.ADMIN` before)\r\n * `Group.ADMIN` is no longer granted to admin and staff (as it was only used for the above I think?)\r\n * `Group.ADMIN` is called `Group.EDIT` now, as it _doesn't_ grant you any kind of broad permissions as the name implies and is only used for group edit and upsert actions.\r\n\r\n### Changes in behavior\r\n\r\n * Previously regular users with `Group.EDIT` could access our admin pages to manipulate their own groups (although that page crashes if you don't have an org)\r\n * Now regular users can't access admin pages even if they own the group\r\n * Previously admin and staff could use the public edit and update end-points for any group (but couldn't see then necessarily)\r\n * Now admin users can't access groups they are not creators of (outside of admin pages)\r\n\r\n## Testing notes\r\n\r\n * Login as the `devdata_user`\r\n * Create a group and get the pubid\r\n * Visit: http://localhost:5000/admin/groups/<PUB_ID>\r\n    * As the `devdata_user` you should **_now_** see \"Page not found\"\r\n    * As `devdata_admin` you get a 500 because that page crashes without an org as it doesn't support private pages\r\n * Visit: http://localhost:5000/groups/<PUB_ID>/edit\r\n   * As the `devdata_user` you should see your own group\r\n   * As the `devdata_admin` you should **_now_** see \"Page not found\"\r\n* Visit: http://localhost:5000/admin/groups/V3ZoedPa\r\n  * As `devdata_biopub_creator` you should **_now_** see \"Page not found\"\r\n  * Ad `devdata_admin` you should see the admin edit page\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7025/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6945", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6945/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6945/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6945/events", "html_url": "https://github.com/hypothesis/h/pull/6945", "id": 964960558, "node_id": "MDExOlB1bGxSZXF1ZXN0NzA3MzM0OTEz", "number": 6945, "title": "Revert \"Add a relationship between annotations and users\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-08-10T13:04:12Z", "updated_at": "2021-08-10T13:11:40Z", "closed_at": "2021-08-10T13:11:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6945", "html_url": "https://github.com/hypothesis/h/pull/6945", "diff_url": "https://github.com/hypothesis/h/pull/6945.diff", "patch_url": "https://github.com/hypothesis/h/pull/6945.patch", "merged_at": "2021-08-10T13:11:39Z"}, "body": "This reverts commit 87cf419b0fd7faf056db820d27ecaafba8af0fb2 and many more that came after.\r\n\r\nThis undoes:\r\n\r\n * https://github.com/hypothesis/h/pull/6932\r\n  * https://github.com/hypothesis/h/pull/6936\r\n  * https://github.com/hypothesis/h/pull/6939", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6945/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6935", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6935/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6935/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6935/events", "html_url": "https://github.com/hypothesis/h/pull/6935", "id": 962684920, "node_id": "MDExOlB1bGxSZXF1ZXN0NzA1NDM5MDk5", "number": 6935, "title": "Revert \"Gut the annotation moderation service\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-08-06T12:16:54Z", "updated_at": "2021-08-06T12:54:33Z", "closed_at": "2021-08-06T12:54:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6935", "html_url": "https://github.com/hypothesis/h/pull/6935", "diff_url": "https://github.com/hypothesis/h/pull/6935.diff", "patch_url": "https://github.com/hypothesis/h/pull/6935.patch", "merged_at": null}, "body": "Reverts hypothesis/h#6925\r\n\r\nThis seems to be hiding annotations from moderators in QA.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6935/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6922", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6922/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6922/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6922/events", "html_url": "https://github.com/hypothesis/h/pull/6922", "id": 960450620, "node_id": "MDExOlB1bGxSZXF1ZXN0NzAzNDcyNzY4", "number": 6922, "title": "Fix tests which passed the wrong arguments to AnnotationContext", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-08-04T13:26:21Z", "updated_at": "2021-08-04T13:55:53Z", "closed_at": "2021-08-04T13:55:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6922", "html_url": "https://github.com/hypothesis/h/pull/6922", "diff_url": "https://github.com/hypothesis/h/pull/6922.diff", "patch_url": "https://github.com/hypothesis/h/pull/6922.patch", "merged_at": "2021-08-04T13:55:52Z"}, "body": "This was a mistake I introduced (or failed to remove) when removing the links service from the annotation service.\r\n\r\nIt turns out the tests were passing it in in a few places and this was getting masked by the fact they did this using a positional argument which was actually getting mapped to `allow_read_on_delete`.\r\n\r\nWhen removing `allow_read_on_delete` these seemingly unconnected tests started failing.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6922/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6916", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6916/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6916/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6916/events", "html_url": "https://github.com/hypothesis/h/pull/6916", "id": 959219174, "node_id": "MDExOlB1bGxSZXF1ZXN0NzAyMzY3Nzc0", "number": 6916, "title": "Use the correct permission instead of the string", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-08-03T15:10:30Z", "updated_at": "2021-08-03T15:22:52Z", "closed_at": "2021-08-03T15:22:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6916", "html_url": "https://github.com/hypothesis/h/pull/6916", "diff_url": "https://github.com/hypothesis/h/pull/6916.diff", "patch_url": "https://github.com/hypothesis/h/pull/6916.patch", "merged_at": "2021-08-03T15:22:52Z"}, "body": "Also renamed the \"resource\" to \"annotation_context\" so we know what it is. Resource is a vague term and doesn't mean too much.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6916/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6886", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6886/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6886/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6886/events", "html_url": "https://github.com/hypothesis/h/pull/6886", "id": 955940055, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk5NjE1ODIy", "number": 6886, "title": "Hopefully fix the Queue test by making an order invariant comparison", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-29T15:07:04Z", "updated_at": "2021-07-29T15:14:39Z", "closed_at": "2021-07-29T15:14:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6886", "html_url": "https://github.com/hypothesis/h/pull/6886", "diff_url": "https://github.com/hypothesis/h/pull/6886.diff", "patch_url": "https://github.com/hypothesis/h/pull/6886.patch", "merged_at": "2021-07-29T15:14:38Z"}, "body": "I think this is just a sorting issue, where the DB insertion order and the order in Python don't match. The element they were failing on was the ID, which is the only thing that differs between the two cases.\r\n\r\nAlthough `h-matchers` obscured the cause of the issue here, it's also quite helpful in solving it if that's what it was.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6886/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6884", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6884/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6884/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6884/events", "html_url": "https://github.com/hypothesis/h/pull/6884", "id": 955873905, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk5NTU5Nzcx", "number": 6884, "title": "Add fine grained assertions to debug flakey test", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-29T13:59:17Z", "updated_at": "2021-07-29T14:25:12Z", "closed_at": "2021-07-29T14:25:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6884", "html_url": "https://github.com/hypothesis/h/pull/6884", "diff_url": "https://github.com/hypothesis/h/pull/6884.diff", "patch_url": "https://github.com/hypothesis/h/pull/6884.patch", "merged_at": "2021-07-29T14:25:11Z"}, "body": "We're seeing this test fail in CI, but not reliably and very rarely locally. This has happened on two unconnected PRs and looks like it's maybe a timing issue.\r\n\r\nUnfortunately the `h-matchers` assertion is kind of burying why this isn't matching.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6884/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6869", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6869/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6869/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6869/events", "html_url": "https://github.com/hypothesis/h/pull/6869", "id": 954815034, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk4NjUyMjQ5", "number": 6869, "title": "Use the admin page permission not the group edit one", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 546994724, "node_id": "MDU6TGFiZWw1NDY5OTQ3MjQ=", "url": "https://api.github.com/repos/hypothesis/h/labels/WIP", "name": "WIP", "color": "d4c5f9", "default": false, "description": null}, {"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 932810594, "node_id": "MDU6TGFiZWw5MzI4MTA1OTQ=", "url": "https://api.github.com/repos/hypothesis/h/labels/stale", "name": "stale", "color": "6addc8", "default": false, "description": "Used by https://github.com/probot/stale to label stale issues and pull requests before closing them"}, {"id": 2875423732, "node_id": "MDU6TGFiZWwyODc1NDIzNzMy", "url": "https://api.github.com/repos/hypothesis/h/labels/Backend", "name": "Backend", "color": "0EC85B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-07-28T12:42:05Z", "updated_at": "2021-09-16T12:59:36Z", "closed_at": "2021-09-04T10:03:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6869", "html_url": "https://github.com/hypothesis/h/pull/6869", "diff_url": "https://github.com/hypothesis/h/pull/6869.diff", "patch_url": "https://github.com/hypothesis/h/pull/6869.patch", "merged_at": null}, "body": "I don't think this is ever granted to Staff as it should be, but they are granted `AdminPage.GROUPS`.\r\n\r\nThis certainly seems correct to me, but I'd like to try and scry out why this is / isn't a problem currently.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6869/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6869/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6867", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6867/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6867/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6867/events", "html_url": "https://github.com/hypothesis/h/pull/6867", "id": 954121988, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk4MDY0ODM0", "number": 6867, "title": "Use the correct annotation (not group) permission for moderation", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}, {"id": 2875423732, "node_id": "MDU6TGFiZWwyODc1NDIzNzMy", "url": "https://api.github.com/repos/hypothesis/h/labels/Backend", "name": "Backend", "color": "0EC85B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-27T17:50:13Z", "updated_at": "2021-07-28T15:25:42Z", "closed_at": "2021-07-28T15:25:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6867", "html_url": "https://github.com/hypothesis/h/pull/6867", "diff_url": "https://github.com/hypothesis/h/pull/6867.diff", "patch_url": "https://github.com/hypothesis/h/pull/6867.patch", "merged_at": "2021-07-28T15:25:11Z"}, "body": "For: https://github.com/hypothesis/h/issues/6769", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6867/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6866", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6866/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6866/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6866/events", "html_url": "https://github.com/hypothesis/h/pull/6866", "id": 954115302, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk4MDU5MjE2", "number": 6866, "title": "Pass through `has_permission` instead of wrapping it", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}, {"id": 2875423732, "node_id": "MDU6TGFiZWwyODc1NDIzNzMy", "url": "https://api.github.com/repos/hypothesis/h/labels/Backend", "name": "Backend", "color": "0EC85B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-27T17:41:00Z", "updated_at": "2021-07-28T15:31:12Z", "closed_at": "2021-07-28T15:31:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6866", "html_url": "https://github.com/hypothesis/h/pull/6866", "diff_url": "https://github.com/hypothesis/h/pull/6866.diff", "patch_url": "https://github.com/hypothesis/h/pull/6866.patch", "merged_at": "2021-07-28T15:31:11Z"}, "body": "For: https://github.com/hypothesis/h/issues/6769\r\n\r\nAlso make it use the correct permission instead of the group one.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6866/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6771", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6771/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6771/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6771/events", "html_url": "https://github.com/hypothesis/h/pull/6771", "id": 939865172, "node_id": "MDExOlB1bGxSZXF1ZXN0Njg2MDIwMTU0", "number": 6771, "title": "Increase NGINX file limits to match the current hard limit", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-08T13:32:48Z", "updated_at": "2021-07-08T13:35:38Z", "closed_at": "2021-07-08T13:35:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6771", "html_url": "https://github.com/hypothesis/h/pull/6771", "diff_url": "https://github.com/hypothesis/h/pull/6771.diff", "patch_url": "https://github.com/hypothesis/h/pull/6771.patch", "merged_at": "2021-07-08T13:35:37Z"}, "body": "The `worker_rlimit_nofile` setting appears to cause NGINX to request it's file limit be increased from the soft limit. This cannot be increased to a value beyond the hard limit. \r\n\r\nThis matches the hard limit we currently have deployed.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6771/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6770", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6770/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6770/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6770/events", "html_url": "https://github.com/hypothesis/h/pull/6770", "id": 939839445, "node_id": "MDExOlB1bGxSZXF1ZXN0Njg1OTk3NjE5", "number": 6770, "title": "Increase the allowed open file handles for NGINX", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-08T13:05:59Z", "updated_at": "2021-07-08T13:16:36Z", "closed_at": "2021-07-08T13:16:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6770", "html_url": "https://github.com/hypothesis/h/pull/6770", "diff_url": "https://github.com/hypothesis/h/pull/6770.diff", "patch_url": "https://github.com/hypothesis/h/pull/6770.patch", "merged_at": "2021-07-08T13:16:35Z"}, "body": "This does nothing if the OS however doesn't make file handles available. From a quick check inside our containers, it looks to me like we have the required handles available (and then some):\r\n\r\n```shell\r\n~ $ whoami\r\nhypothesis\r\n~ $ ulimit -Hn\r\n1048576\r\n~ $ ulimit -Sn\r\n1048576\r\n```\r\n\r\nIt occurs to me that these limits might actually just be the limits I have on the system outside. So basically these values are just my systems Ubuntu defaults.\r\n\r\nThis is to attempt to address issues in live where are getting failures due to insufficient file handles being available.\r\n\r\n```2021/07/08 12:43:00 [crit] 15#15: accept4() failed (24: No file descriptors available)```\r\n\r\nSome random internet advice about fixing this:\r\n\r\n* https://gist.github.com/joewiz/4c39c9d061cf608cb62b - Recovery from nginx \"Too many open files\" error on Amazon AWS Linux (post mortem)\r\n* https://www.cyberciti.biz/faq/linux-unix-nginx-too-many-open-files/ - Nginx: 24: Too Many Open Files Error And Solution\r\n* https://serverfault.com/questions/516802/too-many-open-files-with-nginx-cant-seem-to-raise-limit - Too many open files with nginx, can't seem to raise limit\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6770/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7724", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7724/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7724/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7724/events", "html_url": "https://github.com/hypothesis/h/issues/7724", "id": 1466744024, "node_id": "MDU6SXNzdWUxNDY2NzQ0MDI0", "number": 7724, "title": "User unable to set notification preference", "user": {"login": "mattdricker", "id": 71603629, "node_id": "MDQ6VXNlcjcxNjAzNjI5", "avatar_url": "https://avatars.githubusercontent.com/u/71603629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattdricker", "html_url": "https://github.com/mattdricker", "followers_url": "https://api.github.com/users/mattdricker/followers", "following_url": "https://api.github.com/users/mattdricker/following{/other_user}", "gists_url": "https://api.github.com/users/mattdricker/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattdricker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattdricker/subscriptions", "organizations_url": "https://api.github.com/users/mattdricker/orgs", "repos_url": "https://api.github.com/users/mattdricker/repos", "events_url": "https://api.github.com/users/mattdricker/events{/privacy}", "received_events_url": "https://api.github.com/users/mattdricker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 2875423732, "node_id": "MDU6TGFiZWwyODc1NDIzNzMy", "url": "https://api.github.com/repos/hypothesis/h/labels/Backend", "name": "Backend", "color": "0EC85B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2021-05-27T15:41:30Z", "updated_at": "2022-12-08T18:46:13Z", "closed_at": "2022-12-07T14:27:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Per user report https://app.hubspot.com/contacts/6291320/ticket/426220295/\r\n\r\nHypothesis user (see above ticket for username) notes that on the [Notifications setting page](https://hypothes.is/account/settings/notifications), their option to receive email notifications is unchecked. They can check the box, but when they navigate away from the setting page and then return, the checkbox has reverted to unchecked.\r\n\r\nUser has confirmed the following:\r\n- Able to change other account settings (name, description, etc.) fine, and these changes stick.\r\n- Issue occurs using multiple browsers\r\n- Issue occurs using multiple devices/platforms\r\n- Viewing Browser Dev Tools, Network requests when toggling the checkbox all return 200 status\r\n- Console shows a few errors and warnings\r\n\r\n![network requests when checking and unchecking](https://user-images.githubusercontent.com/71603629/119855083-9d3df580-bedf-11eb-9ed9-86d4455b8752.png)\r\n\r\n![Firefox enhanced tracking protection OFF](https://user-images.githubusercontent.com/71603629/119855113-a5963080-bedf-11eb-920c-009421819ebd.png)\r\n\r\nUser tests on systems:\r\n- Linux KDE Neon (Ubuntu 20.04)\r\n- Windows\r\n- Linux Mint\r\n- Firefox 88\r\n- Vivaldi 3.8.2259\r\n- Chromium (latest)\r\n\r\nWe are unable to replicate behavior with any other user.\r\n\r\n## Tasks\r\n\r\n * https://github.com/hypothesis/h/pull/7727\r\n * https://github.com/hypothesis/h/pull/7742\r\n * https://github.com/hypothesis/h/pull/7741", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6645", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6645/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6645/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6645/events", "html_url": "https://github.com/hypothesis/h/pull/6645", "id": 893401249, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ1OTIxNTAy", "number": 6645, "title": "Fix password reset so it doesn't crash because of timezones", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1085964174, "node_id": "MDU6TGFiZWwxMDg1OTY0MTc0", "url": "https://api.github.com/repos/hypothesis/h/labels/Added%20to%20sprint", "name": "Added to sprint", "color": "FFDD00", "default": false, "description": "Issue added to sprint board after sprint planning"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-05-17T14:37:43Z", "updated_at": "2021-05-17T16:24:23Z", "closed_at": "2021-05-17T16:24:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6645", "html_url": "https://github.com/hypothesis/h/pull/6645", "diff_url": "https://github.com/hypothesis/h/pull/6645.diff", "patch_url": "https://github.com/hypothesis/h/pull/6645.patch", "merged_at": "2021-05-17T16:24:23Z"}, "body": "Support noticed this bug here:\r\n\r\n * https://hypothes-is.slack.com/archives/C2BLQDKHA/p1621258892083000\r\n \r\nThis is likely caused by this change:\r\n \r\n * https://github.com/hypothesis/h/pull/6639\r\n  * https://github.com/hypothesis/h/commit/6e7bd26e97517c0f59c26ee28550057319d04b3a#diff-10762e1094dbeeaba59c58cec8a91b71b99f2063f7f1f20e5c0e3e635f42b2df\r\n  * Details: https://itsdangerous.palletsprojects.com/en/2.0.x/changes/#version-2-0-0\r\n  \r\nIt looks like this has only started happening today, so it seems relatively few people have been affected", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6645/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6645/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6571", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6571/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6571/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6571/events", "html_url": "https://github.com/hypothesis/h/pull/6571", "id": 849255446, "node_id": "MDExOlB1bGxSZXF1ZXN0NjA4MDU5OTcx", "number": 6571, "title": "Prevent caching of the `h` status endpoint", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-04-02T14:37:55Z", "updated_at": "2021-04-02T16:55:08Z", "closed_at": "2021-04-02T16:55:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6571", "html_url": "https://github.com/hypothesis/h/pull/6571", "diff_url": "https://github.com/hypothesis/h/pull/6571.diff", "patch_url": "https://github.com/hypothesis/h/pull/6571.patch", "merged_at": "2021-04-02T16:55:07Z"}, "body": "For: https://github.com/hypothesis/product-backlog/issues/1198", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6571/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6387", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6387/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6387/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6387/events", "html_url": "https://github.com/hypothesis/h/pull/6387", "id": 736193492, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE1NDQ5OTc0", "number": 6387, "title": "Stop creating a random file called \"debug\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-04T15:12:13Z", "updated_at": "2020-11-04T19:04:15Z", "closed_at": "2020-11-04T19:04:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6387", "html_url": "https://github.com/hypothesis/h/pull/6387", "diff_url": "https://github.com/hypothesis/h/pull/6387.diff", "patch_url": "https://github.com/hypothesis/h/pull/6387.patch", "merged_at": "2020-11-04T19:04:14Z"}, "body": "This was left over by mistake from developing this.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6387/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/7725", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/7725/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/7725/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/7725/events", "html_url": "https://github.com/hypothesis/h/issues/7725", "id": 1466749569, "node_id": "MDU6SXNzdWUxNDY2NzQ5NTY5", "number": 7725, "title": "Page with rel=\"canonical\" href(unknown) incorrectly equates document", "user": {"login": "mkdir-washington-edu", "id": 22603275, "node_id": "MDQ6VXNlcjIyNjAzMjc1", "avatar_url": "https://avatars.githubusercontent.com/u/22603275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkdir-washington-edu", "html_url": "https://github.com/mkdir-washington-edu", "followers_url": "https://api.github.com/users/mkdir-washington-edu/followers", "following_url": "https://api.github.com/users/mkdir-washington-edu/following{/other_user}", "gists_url": "https://api.github.com/users/mkdir-washington-edu/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkdir-washington-edu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkdir-washington-edu/subscriptions", "organizations_url": "https://api.github.com/users/mkdir-washington-edu/orgs", "repos_url": "https://api.github.com/users/mkdir-washington-edu/repos", "events_url": "https://api.github.com/users/mkdir-washington-edu/events{/privacy}", "received_events_url": "https://api.github.com/users/mkdir-washington-edu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [{"login": "robertknight", "id": 2458, "node_id": "MDQ6VXNlcjI0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertknight", "html_url": "https://github.com/robertknight", "followers_url": "https://api.github.com/users/robertknight/followers", "following_url": "https://api.github.com/users/robertknight/following{/other_user}", "gists_url": "https://api.github.com/users/robertknight/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertknight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertknight/subscriptions", "organizations_url": "https://api.github.com/users/robertknight/orgs", "repos_url": "https://api.github.com/users/robertknight/repos", "events_url": "https://api.github.com/users/robertknight/events{/privacy}", "received_events_url": "https://api.github.com/users/robertknight/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-10-20T16:59:36Z", "updated_at": "2022-11-28T16:54:06Z", "closed_at": "2022-11-28T16:53:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\nA user found a page that uses rel=\"canonical\" but doesn't specify a URL. It seems like Hypothesis performs document equivalence but with a poor choice of page.\n\nhttps://hypothesis.zendesk.com/agent/tickets/14720\n\nThe page is: https://ieeexplore.ieee.org/document/9152704\nThe HTML is:\n![image](https://user-images.githubusercontent.com/22603275/96619108-c22c1380-12d3-11eb-84e0-3750bf61e631.png)\nHypothesis points to:\nhttps://ieeexplore.ieee.org/document/\n\n\n**To Reproduce**\nSteps to reproduce the behavior:\n1. Go to https://ieeexplore.ieee.org/document/9152704\n2. Create an annotation\n3. See that the share link for the annotation contains .../ieeexplore.ieee.org/document/\n\n\n**Expected behavior**\nThe annotation share link is for /9152704\n\n---\n\n## Ideas\n\nDetermine what to do if rel=\"canonical\" is used without pointing to a URL. When a site doesn't specify a URL in rel=\"canonical\" we probably shouldn't perform document equivalence.\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/7725/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/7725/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6337", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6337/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6337/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6337/events", "html_url": "https://github.com/hypothesis/h/pull/6337", "id": 724615138, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA1OTcxNTY1", "number": 6337, "title": "Use a config file to try and disable as much of New Relic as possible", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-19T13:34:35Z", "updated_at": "2020-10-19T14:22:06Z", "closed_at": "2020-10-19T14:22:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6337", "html_url": "https://github.com/hypothesis/h/pull/6337", "diff_url": "https://github.com/hypothesis/h/pull/6337.diff", "patch_url": "https://github.com/hypothesis/h/pull/6337.patch", "merged_at": "2020-10-19T14:22:04Z"}, "body": "The hope is that this might let us see if New Relic always causes problems or if it's just a specific issue with one of the things we turned off.\r\n\r\nIf we've turned all of this off and it's still a problem either it's nothing to do with New Relic, or we just can't use it.\r\n\r\nThis also includes a kill switch for the metrics specifically, allowing them to be turned off without deploying from scratch.\r\n\r\n# Review notes\r\n\r\nThis looks like a big commit, but it's mostly a config file which is generated by New Relic command line tools. There have been a lot of additions to it to attempt to turn off everything I could find in the docs.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6337/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6330", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6330/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6330/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6330/events", "html_url": "https://github.com/hypothesis/h/pull/6330", "id": 721864177, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAzNzEzNTA3", "number": 6330, "title": "Disable New Relic metrics for the Websocket", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-14T23:40:31Z", "updated_at": "2020-10-14T23:53:43Z", "closed_at": "2020-10-14T23:53:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6330", "html_url": "https://github.com/hypothesis/h/pull/6330", "diff_url": "https://github.com/hypothesis/h/pull/6330.diff", "patch_url": "https://github.com/hypothesis/h/pull/6330.patch", "merged_at": "2020-10-14T23:53:42Z"}, "body": "This is a debugging attempt to work out if the new relic things we've done have caused any problems.\r\n\r\nWe suspect this may be causing websocket failures.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6330/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6330/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6329", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6329/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6329/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6329/events", "html_url": "https://github.com/hypothesis/h/pull/6329", "id": 721846497, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAzNjk4NTA5", "number": 6329, "title": "Try and contain New Relic activity in the websocket", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-14T22:53:31Z", "updated_at": "2020-10-14T23:13:47Z", "closed_at": "2020-10-14T23:13:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6329", "html_url": "https://github.com/hypothesis/h/pull/6329", "diff_url": "https://github.com/hypothesis/h/pull/6329.diff", "patch_url": "https://github.com/hypothesis/h/pull/6329.patch", "merged_at": "2020-10-14T23:13:45Z"}, "body": " * We now run the metrics as push rather than pull (from New Relic)\r\n * All stats are gathered inside a read only transaction\r\n * The hope is this is less likely to be able to do terrible things\r\n\r\nTest notes of how to setup New Relic for testing locally here: https://github.com/hypothesis/h/pull/6246\r\n\r\n## Why\r\n\r\nSomething is causing this error:\r\n\r\n`sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) execute cannot be used while an asynchronous query is underway`\r\n\r\nOnce that happens the socket server seems totally dead. This is in hopeful expectation that New Relic might be executing db queries in a way that is causing this.\r\n\r\nThere isn't much direct evidence to suspect so. We don't do anything in this function that should call on the DB.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6329/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6324", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6324/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6324/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6324/events", "html_url": "https://github.com/hypothesis/h/pull/6324", "id": 721392096, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAzMzE4MTYw", "number": 6324, "title": "Prevent the websocket causing more exceptions during exception view handling", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-14T11:52:52Z", "updated_at": "2020-10-14T12:28:46Z", "closed_at": "2020-10-14T12:28:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6324", "html_url": "https://github.com/hypothesis/h/pull/6324", "diff_url": "https://github.com/hypothesis/h/pull/6324.diff", "patch_url": "https://github.com/hypothesis/h/pull/6324.patch", "merged_at": "2020-10-14T12:28:45Z"}, "body": "During exception handling:\r\n\r\n * `request` doesn't have a debug property, and appears to report fine in dev anyway\r\n * The `result` is None and can't be converted to a list\r\n\r\nThe effect of this is that when executing the error handler we cause a massive cascade of other exceptions to be emitted, obscuring the real problem.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6324/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6303", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6303/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6303/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6303/events", "html_url": "https://github.com/hypothesis/h/issues/6303", "id": 716623426, "node_id": "MDU6SXNzdWU3MTY2MjM0MjY=", "number": 6303, "title": "Fix visibility of deleted annotations in the websocket", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-10-07T15:16:01Z", "updated_at": "2020-10-08T11:20:57Z", "closed_at": "2020-10-08T11:20:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently the websocket doesn't notify on deletes due to using the `AnnotationContext` which prevents all actions on deleted annotations.\r\n\r\n * [x] https://github.com/hypothesis/h/pull/6302 - Refactor\r\n * [x] https://github.com/hypothesis/h/pull/6298 - Refactor\r\n * [x] https://github.com/hypothesis/h/pull/6294 - Actual fix", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6303/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6279", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6279/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6279/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6279/events", "html_url": "https://github.com/hypothesis/h/pull/6279", "id": 711962699, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk1NTIzMDEw", "number": 6279, "title": "Ensure we check the feature flag in a managed transaction", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-30T13:46:59Z", "updated_at": "2020-09-30T14:00:54Z", "closed_at": "2020-09-30T14:00:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6279", "html_url": "https://github.com/hypothesis/h/pull/6279", "diff_url": "https://github.com/hypothesis/h/pull/6279.diff", "patch_url": "https://github.com/hypothesis/h/pull/6279.patch", "merged_at": "2020-09-30T14:00:53Z"}, "body": "Checking feature flags opens a connection to the database. As this event is processed after the main transaction has closed, we must open a new transaction to ensure we don't leave an un-closed transaction", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6279/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6275", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6275/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6275/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6275/events", "html_url": "https://github.com/hypothesis/h/issues/6275", "id": 710225835, "node_id": "MDU6SXNzdWU3MTAyMjU4MzU=", "number": 6275, "title": "URL equivalence is never re-evaluated once a WebSocket connection is established", "user": {"login": "robertknight", "id": 2458, "node_id": "MDQ6VXNlcjI0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertknight", "html_url": "https://github.com/robertknight", "followers_url": "https://api.github.com/users/robertknight/followers", "following_url": "https://api.github.com/users/robertknight/following{/other_user}", "gists_url": "https://api.github.com/users/robertknight/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertknight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertknight/subscriptions", "organizations_url": "https://api.github.com/users/robertknight/orgs", "repos_url": "https://api.github.com/users/robertknight/repos", "events_url": "https://api.github.com/users/robertknight/events{/privacy}", "received_events_url": "https://api.github.com/users/robertknight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1085964174, "node_id": "MDU6TGFiZWwxMDg1OTY0MTc0", "url": "https://api.github.com/repos/hypothesis/h/labels/Added%20to%20sprint", "name": "Added to sprint", "color": "FFDD00", "default": false, "description": "Issue added to sprint board after sprint planning"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-28T12:33:57Z", "updated_at": "2021-03-26T13:27:54Z", "closed_at": "2021-03-26T13:27:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When annotation events are received by the websocket, they are dispatched to all connected clients that are configured to receive events for URIs that are \"equivalent\" to the annotation's target URI, using h's document equivalence database.\r\n\r\nDetermination of equivalence works by mapping the URIs a client is interested in to the set of equivalent URIs when the client configures its event filter. See https://github.com/hypothesis/h/blob/9bc3e502fa6a9d4d2e1f5ba5d4044c14f45a6bab/h/streamer/websocket.py#L227.\r\n\r\nThis means that if new URIs are added to the set of equivalent URIs for a particular document, that will not be reflected in updates sent to pre-existing connections.\r\n\r\nWe don't currently have a known use case where this is proving to be a significant problem, but I'm filing the issue anyway in case it comes up in future.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6269", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6269/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6269/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6269/events", "html_url": "https://github.com/hypothesis/h/pull/6269", "id": 708979611, "node_id": "MDExOlB1bGxSZXF1ZXN0NDkzMTA5NjQx", "number": 6269, "title": "Fail realtime annotation update messages quickly if Rabbit is down", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1860283367, "node_id": "MDU6TGFiZWwxODYwMjgzMzY3", "url": "https://api.github.com/repos/hypothesis/h/labels/enhancement", "name": "enhancement", "color": "5ae2d3", "default": true, "description": "A new feature or improvement"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-09-25T14:19:49Z", "updated_at": "2020-10-01T12:22:56Z", "closed_at": "2020-10-01T12:22:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6269", "html_url": "https://github.com/hypothesis/h/pull/6269", "diff_url": "https://github.com/hypothesis/h/pull/6269.diff", "patch_url": "https://github.com/hypothesis/h/pull/6269.patch", "merged_at": "2020-10-01T12:22:54Z"}, "body": "With https://github.com/hypothesis/h/pull/6267 we have cut Rabbit out of the mechanism for synchronising annotations to Elasticsearch, but we still need it to queue messages for the websocket. \r\n\r\nPreviously we would wait _forever_ attempting to get a connection to Rabbit when sending these messages meaning:\r\n\r\n * The client would never get a successful response\r\n * We would block the worker indefinitely (presumably until the Gunicorn timeout)\r\n * We would have additional service degradation as fewer workers would be available to respond to new requests\r\n\r\nThis puts a pretty short leash on how long we will wait around trying to get a connection. If we fail, we log and move on.\r\n\r\n### Testing\r\n\r\n**Old path:**\r\n\r\n- Start h, client, and via3\r\n- Goto: http://localhost:9083/html/v/http://example.com/?via.rewrite=on&via.client.openSidebar=1\r\n- Add an annotation\r\n- Refresh the page, it should be there still\r\n- Delete it\r\n- Refresh the page, it should be gone\r\n- Run `docker stop h_rabbit_1`\r\n- Repeat the tests above\r\n- The thread should hang indefintely\r\n\r\n**New path:**\r\n\r\n- Repeat the above\r\n- Everything should work fine\r\n- There should be logging output complaining about failures\r\n\r\n### Open questions\r\n\r\n * Are these numbers right? Are the timings correct?\r\n * Should we be only enabling this with `syncrhonous_indexing` enabled, or all the time? (It's presently all the time)\r\n * This only applies to the `producer` which adds messages, what about the `consumer` that is used in the websocket?", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6269/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6245", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6245/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6245/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6245/events", "html_url": "https://github.com/hypothesis/h/pull/6245", "id": 704361327, "node_id": "MDExOlB1bGxSZXF1ZXN0NDg5MzAyMDgx", "number": 6245, "title": "Prevent unexpected values from causing the websocket filtering to crash", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-09-18T13:03:23Z", "updated_at": "2020-09-18T13:34:49Z", "closed_at": "2020-09-18T13:34:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6245", "html_url": "https://github.com/hypothesis/h/pull/6245", "diff_url": "https://github.com/hypothesis/h/pull/6245.diff", "patch_url": "https://github.com/hypothesis/h/pull/6245.patch", "merged_at": "2020-09-18T13:34:48Z"}, "body": "Turns out we do get more different values than the three expected, so\r\nwe need to account for this. Otherwise a single consumer can poison\r\nthe well.\r\n\r\nThis tackles this from both sides, but not adding anything we don't\r\nexpect, and also not accepting it even if it gets through.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6245/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6242", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6242/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6242/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6242/events", "html_url": "https://github.com/hypothesis/h/pull/6242", "id": 703688626, "node_id": "MDExOlB1bGxSZXF1ZXN0NDg4NzUwMTU2", "number": 6242, "title": "Check to see if filter_rows have been added to sockets", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-17T15:25:24Z", "updated_at": "2020-09-17T15:34:04Z", "closed_at": "2020-09-17T15:34:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6242", "html_url": "https://github.com/hypothesis/h/pull/6242", "diff_url": "https://github.com/hypothesis/h/pull/6242.diff", "patch_url": "https://github.com/hypothesis/h/pull/6242.patch", "merged_at": "2020-09-17T15:34:03Z"}, "body": "When sockets are new, or if the filter was malformed the rows have not\r\nyet been added. This checks stops us from crashing.\r\n\r\nThe previous work had:\r\n\r\n```\r\nmatching_sockets = [\r\n    s for s in sockets if s.filter and s.filter.match(normalized_annotation)\r\n]\r\n```\r\n\r\nI missed the `if s.filter` which does similar work.\r\n\r\n----\r\n\r\nWe can see the instances of this in papertrail: https://my.papertrailapp.com/systems/h-prod_i-03161fef0bf92becd/events?focus=1243269601182224432&q=AttributeError%3A%20%27WebSocket%27&selected=1243269601182224432\r\n\r\nHopefully after deploying this will stop. Annoyingly my tests actually worked fine, so this clearly happens just _some_ of the time.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6242/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6223", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6223/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6223/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6223/events", "html_url": "https://github.com/hypothesis/h/pull/6223", "id": 701024304, "node_id": "MDExOlB1bGxSZXF1ZXN0NDg2NTUwNDg5", "number": 6223, "title": "Fix pattern to allow to catch no slash and prevent Vary header", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-09-14T11:47:42Z", "updated_at": "2020-09-14T12:59:11Z", "closed_at": "2020-09-14T12:59:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6223", "html_url": "https://github.com/hypothesis/h/pull/6223", "diff_url": "https://github.com/hypothesis/h/pull/6223.diff", "patch_url": "https://github.com/hypothesis/h/pull/6223.patch", "merged_at": "2020-09-14T12:59:09Z"}, "body": "I can't locally get the Vary header to be emitted in any way, so this\r\nis difficult to test. It happens everytime in prod though, so I'm\r\nhoping I can see this in QA.\r\n\r\n## Testing notes\r\n\r\nGetting this to occur in dev is tricky, but you can force the situation by:\r\n\r\nBroken:\r\n\r\n * Adding `search.Search(request)` to the top of the badge view\r\n * Removing `request.add_response_callback(disable_vary_header)`\r\n * Visiting a blocked site like: http://localhost:5000/api/badge?uri=https%3A%2F%2Ffacebook.com%2F\r\n * You should see the Vary header\r\n\r\nFixed:\r\n\r\n * Add back the `request.add_response_callback(disable_vary_header)` line\r\n * Re-test\r\n * You should now see no Vary header\r\n\r\nAs for why this triggers at all, I don't know, but anything which triggers a call to `authenticated_userid` will create this situation.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6223/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6177", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6177/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6177/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6177/events", "html_url": "https://github.com/hypothesis/h/pull/6177", "id": 689470376, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc2NTExNjE4", "number": 6177, "title": "Up the internal streamer queue size as we seem to be hitting in live", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-08-31T20:04:53Z", "updated_at": "2020-09-01T09:39:56Z", "closed_at": "2020-09-01T09:39:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6177", "html_url": "https://github.com/hypothesis/h/pull/6177", "diff_url": "https://github.com/hypothesis/h/pull/6177.diff", "patch_url": "https://github.com/hypothesis/h/pull/6177.patch", "merged_at": null}, "body": "The current RAM situation in live is good (2GB out of 8GB) but we are hitting limits on this queue. This part of an investigation to see if this helps\r\n\r\nIn live we are seeing:\r\n```Streamer work queue full! Unable to queue message from h.realtime having waited 0.1s: giving up.```\r\n\r\nI believe this is internal queuing inside gevent Queues not Rabbit as first thought.\r\n\r\nWe _think_ this may help if we are getting compounding issues where waiting for a spot in the queue begins consuming CPU, which means we don't have time to empty the queue.\r\n\r\nIt's equally possible that we just aren't emptying the queue fast enough and having a larger queue just means we will have a slight pause before hitting the same issue.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6177/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6175", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6175/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6175/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6175/events", "html_url": "https://github.com/hypothesis/h/pull/6175", "id": 689233513, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc2MzIwMTE0", "number": 6175, "title": "Add pyramid-sanity to h and fix the tests", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-31T14:03:30Z", "updated_at": "2020-09-02T14:35:49Z", "closed_at": "2020-09-02T14:35:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6175", "html_url": "https://github.com/hypothesis/h/pull/6175", "diff_url": "https://github.com/hypothesis/h/pull/6175.diff", "patch_url": "https://github.com/hypothesis/h/pull/6175.patch", "merged_at": "2020-09-02T14:35:48Z"}, "body": "This adds Pyramid-sanity for https://github.com/hypothesis/h/issues/6157 to prevent certain malformed requests from crashing us.\r\n\r\nThis also includes a fix to send the correct Content-Type for the Bulk API tests. This was originally part of fixing a bug with `pyramid-sanity`, but the library has since moved on and it's not technically required. So it seems very disconnected, and is now but :shrug: \r\n\r\n~This requires the fix in https://github.com/hypothesis/pyramid-sanity/pull/11, and so an update to the version number once that is done.~\r\n\r\nSome example URLs to show it kicking in:\r\n\r\n * http://localhost:5000/foo/?f%FC=123\r\n * http://localhost:5000/foo/f%FC", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6175/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6157", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6157/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6157/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6157/events", "html_url": "https://github.com/hypothesis/h/issues/6157", "id": 682723071, "node_id": "MDU6SXNzdWU2ODI3MjMwNzE=", "number": 6157, "title": "Any code which uses `requests.GET` can be made to crash with malformed query params", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1085964174, "node_id": "MDU6TGFiZWwxMDg1OTY0MTc0", "url": "https://api.github.com/repos/hypothesis/h/labels/Added%20to%20sprint", "name": "Added to sprint", "color": "FFDD00", "default": false, "description": "Issue added to sprint board after sprint planning"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-20T13:34:50Z", "updated_at": "2020-09-02T16:32:21Z", "closed_at": "2020-09-02T16:32:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a query parameter is added to a URL with invalid unicode encoding, it will crash h's routing. This causes 500s on any end-point, including those which don't exist.\r\n\r\nTo replicate visit:\r\n\r\n * http://localhost:5000/api/groups?a=%BF%B\r\n * http://localhost:5000/not_even_an_end_point?a=%BF%B\r\n\r\nThis causes a `UnicodeDecodeError` deep in webob. This appears to be caused by any attempt to access `request.GET` and is mostly centered in: `h/services/feature.py:_feature_overrides()`\r\n\r\nThere are other places that access `request.GET` and could be vulnerable.\r\n\r\n## Why this isn't great\r\n\r\n * This means anyone can spam our logs with errors\r\n * Some of the linked tickets suggest catching `UnicodeDecodeError` in an error view\r\n * This isn't a fantasic solution as there are presumably many different ways this could happen, many of which are not bad requests\r\n * We could try catch everywhere that uses `requests.GET` in our code\r\n * We can't really do that for everything else though\r\n\r\n## This appears to be a `pyramid`/`webob` issue rather than an `h` issue\r\n\r\n_edit_ This is much worse. _Anywhere_ that access GET is vulnerable. Even if we catch the error in all the places where we access it, we still fail to render a page as `pyramid` accesses it when rendering our error. I'm not sure what to do about this.\r\n\r\n * Webob error: https://github.com/Pylons/webob/issues/161\r\n * Pyramid error we run into if we catch: https://github.com/Pylons/pyramid/issues/3399\r\n\r\n----\r\n\r\nThis was highlighted by Sentry Issues:\r\n\r\n * https://sentry.io/organizations/hypothesis/issues/1405111776/\r\n * https://sentry.io/organizations/hypothesis/issues/1672711217/", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6156", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6156/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6156/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6156/events", "html_url": "https://github.com/hypothesis/h/pull/6156", "id": 682708720, "node_id": "MDExOlB1bGxSZXF1ZXN0NDcwOTAyOTcy", "number": 6156, "title": "Add a decorator to catch oauthlib errors", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-20T13:15:08Z", "updated_at": "2020-08-25T13:00:25Z", "closed_at": "2020-08-25T13:00:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6156", "html_url": "https://github.com/hypothesis/h/pull/6156", "diff_url": "https://github.com/hypothesis/h/pull/6156.diff", "patch_url": "https://github.com/hypothesis/h/pull/6156.patch", "merged_at": "2020-08-25T13:00:23Z"}, "body": "Previously these errors could be generated for a wide range of causes and would result in the app crashing (and therefore reporting).\r\n\r\nThis protects the end-point mentioned in https://github.com/hypothesis/h/issues/6155 and a few others.\r\n\r\nThis results in two things:\r\n\r\n * We don't crash\r\n * We render a nice page saying your OAuth request didn't work", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6156/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6155", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6155/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6155/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6155/events", "html_url": "https://github.com/hypothesis/h/issues/6155", "id": 682680998, "node_id": "MDU6SXNzdWU2ODI2ODA5OTg=", "number": 6155, "title": "Adding query parameters to /api/token causes it to crash", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 1085964174, "node_id": "MDU6TGFiZWwxMDg1OTY0MTc0", "url": "https://api.github.com/repos/hypothesis/h/labels/Added%20to%20sprint", "name": "Added to sprint", "color": "FFDD00", "default": false, "description": "Issue added to sprint board after sprint planning"}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-08-20T12:38:59Z", "updated_at": "2020-08-25T14:58:03Z", "closed_at": "2020-08-25T13:00:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sending a request to the `/api/token` end-point with any parameters causes it to crash. This is raising `InvalidRequestError` from the guts of OAuth code.\r\n\r\nThis can be easily triggered with a POST:\r\n\r\n> curl --request POST --url 'https://qa.hypothes.is/api/token?a=2' \r\n\r\nThis is from the sentry issue here: https://sentry.io/organizations/hypothesis/issues/1662961794/?project=37293&query=is%3Aunresolved+InvalidRequestError&statsPeriod=90d\r\n\r\nWe think this is from an unauthorised penetration test. We shouldn't fall over though, and we don't want errors about this in the logs.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6154", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6154/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6154/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6154/events", "html_url": "https://github.com/hypothesis/h/pull/6154", "id": 681899925, "node_id": "MDExOlB1bGxSZXF1ZXN0NDcwMjE0NzE3", "number": 6154, "title": "Use the correct authority to validate members of groups in the admin pages", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-19T14:45:56Z", "updated_at": "2020-08-21T10:50:10Z", "closed_at": "2020-08-21T10:50:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6154", "html_url": "https://github.com/hypothesis/h/pull/6154", "diff_url": "https://github.com/hypothesis/h/pull/6154.diff", "patch_url": "https://github.com/hypothesis/h/pull/6154.patch", "merged_at": "2020-08-21T10:50:09Z"}, "body": " * Previously members were always validated against the default authority\r\n * They are now validated against authority matching the organisation\r\n * This involved moving the member validation to the global validation method", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6154/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6144", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6144/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6144/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6144/events", "html_url": "https://github.com/hypothesis/h/pull/6144", "id": 678441407, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3Mzg4ODMy", "number": 6144, "title": "Revert \"Adding a comms opt-in that should store the users preference in the DB\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-08-13T13:33:50Z", "updated_at": "2020-08-13T13:36:21Z", "closed_at": "2020-08-13T13:36:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6144", "html_url": "https://github.com/hypothesis/h/pull/6144", "diff_url": "https://github.com/hypothesis/h/pull/6144.diff", "patch_url": "https://github.com/hypothesis/h/pull/6144.patch", "merged_at": "2020-08-13T13:36:03Z"}, "body": "Reverts hypothesis/h#6136\r\n\r\nMight be the cause of outages", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6144/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6143", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6143/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6143/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6143/events", "html_url": "https://github.com/hypothesis/h/pull/6143", "id": 678438184, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3Mzg2MTIx", "number": 6143, "title": "Revert \"Add a DB migration for the user comms_opt_in field\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-13T13:29:22Z", "updated_at": "2020-08-13T15:47:28Z", "closed_at": "2020-08-13T13:31:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6143", "html_url": "https://github.com/hypothesis/h/pull/6143", "diff_url": "https://github.com/hypothesis/h/pull/6143.diff", "patch_url": "https://github.com/hypothesis/h/pull/6143.patch", "merged_at": null}, "body": "Reverts hypothesis/h#6138", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6143/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6128", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6128/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6128/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6128/events", "html_url": "https://github.com/hypothesis/h/pull/6128", "id": 669754480, "node_id": "MDExOlB1bGxSZXF1ZXN0NDYwMDg5Nzkx", "number": 6128, "title": "Allow any object instead of an integer in the document log messages", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-07-31T12:14:38Z", "updated_at": "2020-07-31T12:20:19Z", "closed_at": "2020-07-31T12:20:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6128", "html_url": "https://github.com/hypothesis/h/pull/6128", "diff_url": "https://github.com/hypothesis/h/pull/6128.diff", "patch_url": "https://github.com/hypothesis/h/pull/6128.patch", "merged_at": "2020-07-31T12:20:18Z"}, "body": "We don't want to crash because one of the values is None while we are trying to log a warning.\r\n\r\nThis fixes the tests, but I'd be lying if I knew exactly why this has changed between `pytest` 5.x and 6.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6128/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6106", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6106/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6106/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6106/events", "html_url": "https://github.com/hypothesis/h/pull/6106", "id": 654035926, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODQwMTg3", "number": 6106, "title": "Revert \"Add the Google `authuser` to the list of banned params.\"", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-07-09T12:51:19Z", "updated_at": "2020-07-09T13:25:06Z", "closed_at": "2020-07-09T13:25:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6106", "html_url": "https://github.com/hypothesis/h/pull/6106", "diff_url": "https://github.com/hypothesis/h/pull/6106.diff", "patch_url": "https://github.com/hypothesis/h/pull/6106.patch", "merged_at": "2020-07-09T13:25:05Z"}, "body": "This reverts commit 84d56ca68e1f5fe17d711c577503ea0b6d966acc.\r\n\r\nI think this commit is dangerous in it's present state as users on pages without a \"canonical\" link, but with a \"authuser\" will lose access to their annotations.\r\n\r\nWe'll have to think about this a bit more carefully before deploying.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6106/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6102", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6102/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6102/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6102/events", "html_url": "https://github.com/hypothesis/h/pull/6102", "id": 652394381, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ1NDcwMzY0", "number": 6102, "title": "Add the Google `authuser` to the list of banned params.", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-07-07T14:58:24Z", "updated_at": "2020-07-08T12:42:10Z", "closed_at": "2020-07-08T12:42:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6102", "html_url": "https://github.com/hypothesis/h/pull/6102", "diff_url": "https://github.com/hypothesis/h/pull/6102.diff", "patch_url": "https://github.com/hypothesis/h/pull/6102.patch", "merged_at": "2020-07-08T12:42:08Z"}, "body": "This is to address: https://github.com/hypothesis/h/issues/6033", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6102/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6059", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6059/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6059/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6059/events", "html_url": "https://github.com/hypothesis/h/pull/6059", "id": 628461881, "node_id": "MDExOlB1bGxSZXF1ZXN0NDI1OTk5MDY1", "number": 6059, "title": "Catch exceptions which arise from duplicate groups", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-01T14:01:48Z", "updated_at": "2020-06-09T11:38:47Z", "closed_at": "2020-06-09T11:38:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6059", "html_url": "https://github.com/hypothesis/h/pull/6059", "diff_url": "https://github.com/hypothesis/h/pull/6059.diff", "patch_url": "https://github.com/hypothesis/h/pull/6059.patch", "merged_at": "2020-06-09T11:38:46Z"}, "body": "We're getting errors about this in Sentry. This doesn't really \"fix\" it but at least it means we don't emit 500's any more which might make debugging it a little swifter.\r\n\r\nMy best guess is that on occasion we are getting groups repeated from Canvas for some reason.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6059/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/6012", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/6012/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/6012/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/6012/events", "html_url": "https://github.com/hypothesis/h/pull/6012", "id": 604718473, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA3MjU4Mjg4", "number": 6012, "title": "Make the bulk api create private groups and add test coverage", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hypothesis/h/milestones/18", "html_url": "https://github.com/hypothesis/h/milestone/18", "labels_url": "https://api.github.com/repos/hypothesis/h/milestones/18/labels", "id": 5126354, "node_id": "MDk6TWlsZXN0b25lNTEyNjM1NA==", "number": 18, "title": "Create Bulk API for LMS", "description": "To support sections work and increase efficiency we need a bulk API", "creator": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 54, "state": "open", "created_at": "2020-02-20T15:43:19Z", "updated_at": "2021-06-28T12:00:09Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-04-22T12:29:13Z", "updated_at": "2020-04-22T13:15:31Z", "closed_at": "2020-04-22T13:15:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/6012", "html_url": "https://github.com/hypothesis/h/pull/6012", "diff_url": "https://github.com/hypothesis/h/pull/6012.diff", "patch_url": "https://github.com/hypothesis/h/pull/6012.patch", "merged_at": "2020-04-22T13:15:30Z"}, "body": "Previously we made groups with empty values for various fields required to make a safe and sane group to do with permissions.\r\n\r\nIt turns out all groups created via the API were private groups.\r\n\r\nWe also missed testing that we set the creator correctly (we did)", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/6012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/6012/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5961", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5961/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5961/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5961/events", "html_url": "https://github.com/hypothesis/h/pull/5961", "id": 583859772, "node_id": "MDExOlB1bGxSZXF1ZXN0MzkwNTQ1MDk0", "number": 5961, "title": "Skip empty lines when decoding in `from_lines`", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hypothesis/h/milestones/18", "html_url": "https://github.com/hypothesis/h/milestone/18", "labels_url": "https://api.github.com/repos/hypothesis/h/milestones/18/labels", "id": 5126354, "node_id": "MDk6TWlsZXN0b25lNTEyNjM1NA==", "number": 18, "title": "Create Bulk API for LMS", "description": "To support sections work and increase efficiency we need a bulk API", "creator": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 54, "state": "open", "created_at": "2020-02-20T15:43:19Z", "updated_at": "2021-06-28T12:00:09Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-03-18T16:39:10Z", "updated_at": "2020-03-18T17:27:00Z", "closed_at": "2020-03-18T17:26:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5961", "html_url": "https://github.com/hypothesis/h/pull/5961", "diff_url": "https://github.com/hypothesis/h/pull/5961.diff", "patch_url": "https://github.com/hypothesis/h/pull/5961.patch", "merged_at": "2020-03-18T17:26:59Z"}, "body": "This was introduced by the combination of two different PRs. I think this happened as each worked alone, but upon merging them both it broke.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5961/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5958", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5958/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5958/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5958/events", "html_url": "https://github.com/hypothesis/h/pull/5958", "id": 583059401, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg5ODc1Mzcx", "number": 5958, "title": "Bulk API - Byte stream - Make it the focus of tests and fix it", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-17T14:35:55Z", "updated_at": "2020-03-18T16:07:58Z", "closed_at": "2020-03-18T16:07:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5958", "html_url": "https://github.com/hypothesis/h/pull/5958", "diff_url": "https://github.com/hypothesis/h/pull/5958.diff", "patch_url": "https://github.com/hypothesis/h/pull/5958.patch", "merged_at": "2020-03-18T16:07:56Z"}, "body": "This was pretty broke, because we were testing and old path and being hyper vague about what we expected out of the process.\r\n\r\nThis was relying on the functional tests to prove the actual contents were correct, but they used `from_strings` rather than `from_bytes` and so didn't prove it out.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5958/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5957", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5957/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5957/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5957/events", "html_url": "https://github.com/hypothesis/h/pull/5957", "id": 582522033, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg5NDMwMTIx", "number": 5957, "title": "Reduce duplication and modernise group functests", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 932810594, "node_id": "MDU6TGFiZWw5MzI4MTA1OTQ=", "url": "https://api.github.com/repos/hypothesis/h/labels/stale", "name": "stale", "color": "6addc8", "default": false, "description": "Used by https://github.com/probot/stale to label stale issues and pull requests before closing them"}, {"id": 1214429577, "node_id": "MDU6TGFiZWwxMjE0NDI5NTc3", "url": "https://api.github.com/repos/hypothesis/h/labels/technical%20debt", "name": "technical debt", "color": "d3ef75", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-16T18:39:07Z", "updated_at": "2020-09-17T14:11:29Z", "closed_at": "2020-05-23T21:17:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5957", "html_url": "https://github.com/hypothesis/h/pull/5957", "diff_url": "https://github.com/hypothesis/h/pull/5957.diff", "patch_url": "https://github.com/hypothesis/h/pull/5957.patch", "merged_at": null}, "body": "**Refactor**\r\n\r\n * Use f-strings\r\n * Remove duplicated fixtures\r\n * Try and resolve horrible mess around users, 1st party, 3rd party and all the auth\r\n * We now have consistent user, auth_header, user_3rd_party, auth_header_3rd_party etc.\r\n\r\n**Bug**\r\n\r\n * Fixed a bug revealed by fixing the tests where adding a member to groups with invalid ids will cause a 500, instead of 404.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5957/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5955", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5955/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5955/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5955/events", "html_url": "https://github.com/hypothesis/h/pull/5955", "id": 582209072, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg5MTYyMTUz", "number": 5955, "title": "Bulk API - Fix degenerate calls", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hypothesis/h/milestones/18", "html_url": "https://github.com/hypothesis/h/milestone/18", "labels_url": "https://api.github.com/repos/hypothesis/h/milestones/18/labels", "id": 5126354, "node_id": "MDk6TWlsZXN0b25lNTEyNjM1NA==", "number": 18, "title": "Create Bulk API for LMS", "description": "To support sections work and increase efficiency we need a bulk API", "creator": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 54, "state": "open", "created_at": "2020-02-20T15:43:19Z", "updated_at": "2021-06-28T12:00:09Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-03-16T11:16:59Z", "updated_at": "2020-03-17T13:24:13Z", "closed_at": "2020-03-17T13:24:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5955", "html_url": "https://github.com/hypothesis/h/pull/5955", "diff_url": "https://github.com/hypothesis/h/pull/5955.diff", "patch_url": "https://github.com/hypothesis/h/pull/5955.patch", "merged_at": "2020-03-17T13:24:12Z"}, "body": "Upon starting to use this in the end-point in `h`, I immediately spotted some problems. You could pass through degenerate calls which would pass validation like:\r\n\r\n * A \"command\" with only an empty list (as the tuple validation in JSON Schema doesn't specify length like I thought it did)\r\n * No commands at all - As we only check that we match the declaration (no config, no declaration!)", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5955/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5943", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5943/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5943/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5943/events", "html_url": "https://github.com/hypothesis/h/pull/5943", "id": 579303000, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2NzIxMjA4", "number": 5943, "title": "#1 Fix group membership relationship validation", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hypothesis/h/milestones/18", "html_url": "https://github.com/hypothesis/h/milestone/18", "labels_url": "https://api.github.com/repos/hypothesis/h/milestones/18/labels", "id": 5126354, "node_id": "MDk6TWlsZXN0b25lNTEyNjM1NA==", "number": 18, "title": "Create Bulk API for LMS", "description": "To support sections work and increase efficiency we need a bulk API", "creator": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 54, "state": "open", "created_at": "2020-02-20T15:43:19Z", "updated_at": "2021-06-28T12:00:09Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2020-03-11T14:24:33Z", "updated_at": "2020-03-16T11:07:25Z", "closed_at": "2020-03-12T12:42:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5943", "html_url": "https://github.com/hypothesis/h/pull/5943", "diff_url": "https://github.com/hypothesis/h/pull/5943.diff", "patch_url": "https://github.com/hypothesis/h/pull/5943.patch", "merged_at": "2020-03-12T12:42:06Z"}, "body": "We weren't applying the schema correctly, so you could have any old nonsense in the relationship dicts.\r\n\r\nAlso fixed a misleading comment relating to this and some misnamed tests", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5943/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5919", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5919/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5919/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5919/events", "html_url": "https://github.com/hypothesis/h/pull/5919", "id": 572714924, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgxMzU2Njk5", "number": 5919, "title": "Move coverage from Travis to Jenkins", "user": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jon-betts", "id": 7131143, "node_id": "MDQ6VXNlcjcxMzExNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7131143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jon-betts", "html_url": "https://github.com/jon-betts", "followers_url": "https://api.github.com/users/jon-betts/followers", "following_url": "https://api.github.com/users/jon-betts/following{/other_user}", "gists_url": "https://api.github.com/users/jon-betts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jon-betts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jon-betts/subscriptions", "organizations_url": "https://api.github.com/users/jon-betts/orgs", "repos_url": "https://api.github.com/users/jon-betts/repos", "events_url": "https://api.github.com/users/jon-betts/events{/privacy}", "received_events_url": "https://api.github.com/users/jon-betts/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-28T12:04:48Z", "updated_at": "2020-02-28T12:51:14Z", "closed_at": "2020-02-28T12:51:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hypothesis/h/pulls/5919", "html_url": "https://github.com/hypothesis/h/pull/5919", "diff_url": "https://github.com/hypothesis/h/pull/5919.diff", "patch_url": "https://github.com/hypothesis/h/pull/5919.patch", "merged_at": "2020-02-28T12:51:12Z"}, "body": "Travis is currently failing for some reason which is the main\r\nmotivator here, but we also run the tests twice, which seems wasteful.\r\n\r\nBackend tests + coverage are no longer run in Travis at all, and coverage has been added to Jenkins (it was already running the tests).", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5919/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5656", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5656/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5656/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5656/events", "html_url": "https://github.com/hypothesis/h/issues/5656", "id": 468709275, "node_id": "MDU6SXNzdWU0Njg3MDkyNzU=", "number": 5656, "title": "Icon missing next to group name on web app", "user": {"login": "dwhly", "id": 1413074, "node_id": "MDQ6VXNlcjE0MTMwNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1413074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwhly", "html_url": "https://github.com/dwhly", "followers_url": "https://api.github.com/users/dwhly/followers", "following_url": "https://api.github.com/users/dwhly/following{/other_user}", "gists_url": "https://api.github.com/users/dwhly/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwhly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwhly/subscriptions", "organizations_url": "https://api.github.com/users/dwhly/orgs", "repos_url": "https://api.github.com/users/dwhly/repos", "events_url": "https://api.github.com/users/dwhly/events{/privacy}", "received_events_url": "https://api.github.com/users/dwhly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 238886807, "node_id": "MDU6TGFiZWwyMzg4ODY4MDc=", "url": "https://api.github.com/repos/hypothesis/h/labels/P3:%20Next%20sprint", "name": "P3: Next sprint", "color": "fbca04", "default": false, "description": null}, {"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}, {"id": 943758550, "node_id": "MDU6TGFiZWw5NDM3NTg1NTA=", "url": "https://api.github.com/repos/hypothesis/h/labels/activity%20page", "name": "activity page", "color": "f76ce4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-16T15:05:27Z", "updated_at": "2019-07-26T13:26:21Z", "closed_at": "2019-07-26T13:26:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue with Hypothesis! This is our bug tracker. If\r\nyou have any support questions please email support@hypothes.is instead.\r\n\r\nIn order to make it easy for us to help you, please note the following:\r\n\r\n1. Only report **bugs** with Hypothesis here. If you want to discuss potential\r\n   new features, please use our developer mailing list:\r\n\r\n       https://groups.google.com/a/list.hypothes.is/forum/#!forum/dev\r\n\r\n2. Be sure to check that the bug you're reporting isn't already reported. You\r\n   can use the GitHub issues search box to help with this.\r\n\r\n3. Fill out the information requested by the template below. If you can't supply\r\n   all the information, don't worry, but do please use the template.\r\n-->\r\n### Steps to reproduce\r\n1. Go to web app (https://hypothes.is/users/dwhly)\r\n2. Open an annotation card\r\n\r\n### Expected behaviour\r\nThere should be an icon next to the group name\r\n\r\n### Actual behaviour\r\nThere is no icon, the interface shows \"In   Public\" (for instance)\r\n\r\n### Browser/system information\r\nChrome\r\n\r\n### Additional details\r\n![Screen Shot 2019-07-16 at 7 20 40 AM](https://user-images.githubusercontent.com/1413074/61305816-5984eb80-a7a0-11e9-9315-2291ad5f0f4a.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5656/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5486", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5486/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5486/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5486/events", "html_url": "https://github.com/hypothesis/h/issues/5486", "id": 398340937, "node_id": "MDU6SXNzdWUzOTgzNDA5Mzc=", "number": 5486, "title": "Usernames showing up incorrectly in LMS context ", "user": {"login": "jeremydean", "id": 3261902, "node_id": "MDQ6VXNlcjMyNjE5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3261902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremydean", "html_url": "https://github.com/jeremydean", "followers_url": "https://api.github.com/users/jeremydean/followers", "following_url": "https://api.github.com/users/jeremydean/following{/other_user}", "gists_url": "https://api.github.com/users/jeremydean/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremydean/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremydean/subscriptions", "organizations_url": "https://api.github.com/users/jeremydean/orgs", "repos_url": "https://api.github.com/users/jeremydean/repos", "events_url": "https://api.github.com/users/jeremydean/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremydean/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-01-10T21:41:10Z", "updated_at": "2019-04-08T17:27:43Z", "closed_at": "2019-04-08T17:27:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've now seen or had this issue reported in 3 different LMSs: Sakai, Blackboard, and Schoology. The recipe for reproduction below is done for Sakai.\r\n\r\nLogin into a Sakai course and open a Hypothesis-enabled reading (in Lessons in Sakai) using two browser windows, one incognito. In this case I'm logged in as a Sakai Admin in one* and a student named Bhaktavatasalam in the other.  \r\n\r\nCreate an annotation as user 1 and everything looks good on their end:\r\n\r\n![image](https://user-images.githubusercontent.com/3261902/50998523-48a3a680-14ed-11e9-9834-4c9b61154fa9.png)\r\n\r\nAs user 2, refresh the Hypothesis enabled doc using the red icon in sidebar and user 1's annotation appears with user 2's name:\r\n\r\n![image](https://user-images.githubusercontent.com/3261902/50998555-6b35bf80-14ed-11e9-9e83-246779a33ea9.png)\r\n\r\nA hard refresh in user 2's window fixes the issue:\r\n\r\n![image](https://user-images.githubusercontent.com/3261902/50998625-a9cb7a00-14ed-11e9-8a7d-9e3a3282f5ed.png)\r\n\r\nIf I hard refresh initially, then the username for the new annotation shows up correctly.\r\n \r\n*I also was able to reproduce using a regular student level account as user 1 instead of admin.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5476", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5476/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5476/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5476/events", "html_url": "https://github.com/hypothesis/h/issues/5476", "id": 394547405, "node_id": "MDU6SXNzdWUzOTQ1NDc0MDU=", "number": 5476, "title": "roadmap redirect not working as configured", "user": {"login": "xolotl", "id": 997548, "node_id": "MDQ6VXNlcjk5NzU0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/997548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xolotl", "html_url": "https://github.com/xolotl", "followers_url": "https://api.github.com/users/xolotl/followers", "following_url": "https://api.github.com/users/xolotl/following{/other_user}", "gists_url": "https://api.github.com/users/xolotl/gists{/gist_id}", "starred_url": "https://api.github.com/users/xolotl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xolotl/subscriptions", "organizations_url": "https://api.github.com/users/xolotl/orgs", "repos_url": "https://api.github.com/users/xolotl/repos", "events_url": "https://api.github.com/users/xolotl/events{/privacy}", "received_events_url": "https://api.github.com/users/xolotl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-28T04:58:12Z", "updated_at": "2020-04-27T09:33:54Z", "closed_at": "2020-04-27T09:33:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Steps to reproduce\r\n1. Browse to https://hypothes.is/roadmap or https://hypothes.is/roadmap/\r\n\r\n### Expected behavior\r\nRedirect from https://hypothes.is/roadmap or https://hypothes.is/roadmap/ should travel through web.hypothes.is/roadmap/ to [new GitHub roadmap](https://github.com/hypothesis/product-backlog/projects/6).\r\n\r\n### Actual behavior\r\nRedirect from https://hypothes.is/roadmap or https://hypothes.is/roadmap/ goes to [old Trello roadmap](https://trello.com/b/2ajZ2dWe/public-roadmap).\r\n\r\n### Browser/system information\r\nMac OS 10.14.2/Firefox 64.0\r\n\r\n### Additional details\r\nIt is unclear why this redirect is not working as expected. A similar redirect to \"detailed-roadmap\" in the [h/redirects file](https://github.com/hypothesis/h/blob/809e2213f17e587a47ece67f4c87c2436074d884/h/redirects) is configured identically and works as expected.", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5476/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/5200", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/5200/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/5200/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/5200/events", "html_url": "https://github.com/hypothesis/h/issues/5200", "id": 345926009, "node_id": "MDU6SXNzdWUzNDU5MjYwMDk=", "number": 5200, "title": "unable to delete annotation (resolved itself, but may indicate es/pg sync issue?)", "user": {"login": "judell", "id": 46509, "node_id": "MDQ6VXNlcjQ2NTA5", "avatar_url": "https://avatars.githubusercontent.com/u/46509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/judell", "html_url": "https://github.com/judell", "followers_url": "https://api.github.com/users/judell/followers", "following_url": "https://api.github.com/users/judell/following{/other_user}", "gists_url": "https://api.github.com/users/judell/gists{/gist_id}", "starred_url": "https://api.github.com/users/judell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/judell/subscriptions", "organizations_url": "https://api.github.com/users/judell/orgs", "repos_url": "https://api.github.com/users/judell/repos", "events_url": "https://api.github.com/users/judell/events{/privacy}", "received_events_url": "https://api.github.com/users/judell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-30T20:40:29Z", "updated_at": "2018-11-22T14:52:35Z", "closed_at": "2018-11-22T14:52:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The annotation in question: https://hyp.is/KJ3-fpOyEeiEU3dP16qjvA/www.npr.org/2018/07/29/632994245/zimbabwes-rickety-trains-get-a-boost-from-expat-investors-next-door\r\n\r\nThe view from the client: \r\n\r\n![image](https://user-images.githubusercontent.com/46509/43422211-dd13157e-93fd-11e8-9978-c630458182f6.png)\r\n\r\nThe API search the client is making:\r\n\r\nhttps://hypothes.is/api/search?_separate_replies=true&group=__world__&limit=200&offset=0&order=asc&sort=created&uri=https%3A%2F%2Fwww.npr.org%2F2018%2F07%2F29%2F632994245%2Fzimbabwes-rickety-trains-get-a-boost-from-expat-investors-next-door\r\n\r\nUpdate: And now it's gone. So, a temporary disagreement between elasticsearch and postgres?\r\n\r\nAlso, however, the badge API call, https://hypothes.is/api/badge?uri=https%3A%2F%2Fwww.npr.org%2F2018%2F07%2F29%2F632994245%2Fzimbabwes-rickety-trains-get-a-boost-from-expat-investors-next-door , is returning:\r\n\r\n```\r\n{\"total\": 1}\r\n```\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/5200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/5200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hypothesis/h/issues/4727", "repository_url": "https://api.github.com/repos/hypothesis/h", "labels_url": "https://api.github.com/repos/hypothesis/h/issues/4727/labels{/name}", "comments_url": "https://api.github.com/repos/hypothesis/h/issues/4727/comments", "events_url": "https://api.github.com/repos/hypothesis/h/issues/4727/events", "html_url": "https://github.com/hypothesis/h/issues/4727", "id": 284261863, "node_id": "MDU6SXNzdWUyODQyNjE4NjM=", "number": 4727, "title": "long urls don't break in activity page cards", "user": {"login": "judell", "id": 46509, "node_id": "MDQ6VXNlcjQ2NTA5", "avatar_url": "https://avatars.githubusercontent.com/u/46509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/judell", "html_url": "https://github.com/judell", "followers_url": "https://api.github.com/users/judell/followers", "following_url": "https://api.github.com/users/judell/following{/other_user}", "gists_url": "https://api.github.com/users/judell/gists{/gist_id}", "starred_url": "https://api.github.com/users/judell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/judell/subscriptions", "organizations_url": "https://api.github.com/users/judell/orgs", "repos_url": "https://api.github.com/users/judell/repos", "events_url": "https://api.github.com/users/judell/events{/privacy}", "received_events_url": "https://api.github.com/users/judell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 825134869, "node_id": "MDU6TGFiZWw4MjUxMzQ4Njk=", "url": "https://api.github.com/repos/hypothesis/h/labels/bug", "name": "bug", "color": "B60205", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-12-22T22:21:16Z", "updated_at": "2018-05-08T11:27:04Z", "closed_at": "2018-05-08T11:27:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## We're doing this:\r\n\r\n![image](https://user-images.githubusercontent.com/46509/34313832-2e180f0c-e723-11e7-8ee8-747bca68d9cd.png)\r\n\r\n## But it looks like we also (or instead?) need to do this:\r\n\r\n![image](https://user-images.githubusercontent.com/46509/34313855-55373aa4-e723-11e7-8ac3-3749d05c9896.png)\r\n", "reactions": {"url": "https://api.github.com/repos/hypothesis/h/issues/4727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hypothesis/h/issues/4727/timeline", "performed_via_github_app": null, "state_reason": "completed"}]