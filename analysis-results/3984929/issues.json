[{"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3507", "id": 937793247, "node_id": "MDU6SXNzdWU5Mzc3OTMyNDc=", "number": 3507, "title": "PureCN tumor only error", "user": {"login": "kokyriakidis", "id": 33731293, "node_id": "MDQ6VXNlcjMzNzMxMjkz", "avatar_url": "https://avatars.githubusercontent.com/u/33731293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kokyriakidis", "html_url": "https://github.com/kokyriakidis", "followers_url": "https://api.github.com/users/kokyriakidis/followers", "following_url": "https://api.github.com/users/kokyriakidis/following{/other_user}", "gists_url": "https://api.github.com/users/kokyriakidis/gists{/gist_id}", "starred_url": "https://api.github.com/users/kokyriakidis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kokyriakidis/subscriptions", "organizations_url": "https://api.github.com/users/kokyriakidis/orgs", "repos_url": "https://api.github.com/users/kokyriakidis/repos", "events_url": "https://api.github.com/users/kokyriakidis/events{/privacy}", "received_events_url": "https://api.github.com/users/kokyriakidis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-06T11:23:14Z", "updated_at": "2021-12-18T02:52:11Z", "closed_at": "2021-12-18T02:52:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @naumenko-sa!\r\n \r\nI get the following error when I run PureCN as stated in the user story:\r\n\r\n```\r\nINFO [2021-07-06 14:18:28] ------------------------------------------------------------\r\nINFO [2021-07-06 14:18:28] PureCN 1.22.1\r\nINFO [2021-07-06 14:18:28] ------------------------------------------------------------\r\nINFO [2021-07-06 14:18:28] Arguments: -tumor.coverage.file /media/kokyriakidis/PRODUCTION/TMBFDA/NORMALS/ton/work/structural/A/purecn/A_coverage_loess.txt.gz -log.ratio  -seg.file  -vcf.file /media/kokyriakidis/PRODUCTION/TMBFDA/NORMALS/ton/work/mutect2/A-batch-effects-annotated.vcf.gz -genome hg19 -sex ? -args.setPriorVcf 6 -args.setMappingBiasVcf /media/kokyriakidis/PRODUCTION/TMBFDA/NORMALS/pon/final/2021-07-04_pon/mapping_bias_hg19.rds -args.filterIntervals 100 -args.segmentation 0.005,NULL, -sampleid A -min.ploidy 1.4 -max.ploidy 6 -max.non.clonal 0.2 -max.homozygous.loss 0.05,1e+07 -log.ratio.calibration 0.1 -model.homozygous FALSE -error 0.001 -interval.file /media/kokyriakidis/PRODUCTION/TMBFDA/NORMALS/ton/work/bedprep/cleaned-panel.padded100bp.merged.txt -max.segments 300 -plot.cnv TRUE -vcf.field.prefix PureCN. -DB.info.flag DB -POPAF.info.field POP_AF -model beta -post.optimize TRUE -log.file /media/kokyriakidis/PRODUCTION/TMBFDA/NORMALS/ton/work/structural/A/purecn/A.log -normal.coverage.file <data> -normalDB <data> -args.filterVcf <data> -fun.segmentation <data> -test.num.copy <data> -test.purity <data> -speedup.heuristics <data> -BPPARAM <data>\r\nINFO [2021-07-06 14:18:28] Using BiocParallel for parallel optimization.\r\nINFO [2021-07-06 14:18:28] Loading coverage files...\r\nINFO [2021-07-06 14:18:34] Mean target coverages: 271X (tumor) 259X (normal).\r\nINFO [2021-07-06 14:18:34] Mean coverages: chrX: 163.01, chrY: 303.08, chr1-22: 233.20.\r\nINFO [2021-07-06 14:18:34] Mean coverages: chrX: 184.35, chrY: 141.75, chr1-22: 233.16.\r\nINFO [2021-07-06 14:18:48] Removing 904 intervals with missing log.ratio.\r\nINFO [2021-07-06 14:18:48] Removing 6 low/high GC targets.\r\nINFO [2021-07-06 14:18:48] Removing 15753 intervals excluded in normalDB.\r\nINFO [2021-07-06 14:18:49] normalDB provided. Setting minimum coverage for segmentation to 0.0015X.\r\nINFO [2021-07-06 14:18:49] Removing 13591 low coverage (< 0.0015X) intervals.\r\nINFO [2021-07-06 14:18:49] Removing 213 low count (< 100 total reads) intervals.\r\nINFO [2021-07-06 14:18:49] Using 376283 intervals (354253 on-target, 22030 off-target).\r\nINFO [2021-07-06 14:18:49] Ratio of mean on-target vs. off-target read counts: 0.08\r\nINFO [2021-07-06 14:18:49] Mean off-target bin size: 89225\r\nINFO [2021-07-06 14:18:50] AT/GC dropout: 1.06 (tumor), 1.03 (normal), 1.04 (coverage log-ratio). \r\nINFO [2021-07-06 14:18:50] Loading VCF...\r\nINFO [2021-07-06 14:18:58] Found 162541 variants in VCF file.\r\nINFO [2021-07-06 14:18:59] Removing 10330 triallelic sites.\r\nINFO [2021-07-06 14:18:59] Maximum of POPAP INFO is > 1, assuming -log10 scaled values\r\nWARN [2021-07-06 14:18:59] vcf.file has no DB info field for membership in germline databases. Found and used valid population allele frequency > 0.001000 instead.\r\nINFO [2021-07-06 14:18:59] 109900 (72.2%) variants annotated as likely germline (DB INFO flag).\r\nWARN [2021-07-06 14:19:03] Found 1 variants with missing allelic fraction starting with chr17:40490484_TGAGGGAATACTCCTGGACCTGAGGGAATACTCCTTGACCTGAGGGAATACTCCTTGACCTGAGGGAATACTCCTG/T. Removing them.\r\nINFO [2021-07-06 14:19:03] A is tumor in VCF file.\r\nINFO [2021-07-06 14:19:04] 998 homozygous and 854 heterozygous variants on chrX.\r\nINFO [2021-07-06 14:19:04] Sex from VCF: F (Fisher's p-value: < 0.0001, odds-ratio: 0.66).\r\nWARN [2021-07-06 14:19:04] Sex mismatch of coverage and VCF. Could be because of noisy data, contamination, loss of chrY or a mis-alignment of coverage and VCF.\r\nINFO [2021-07-06 14:19:04] Detected MuTect2 VCF.\r\nINFO [2021-07-06 14:19:06] Removing 56842 Mutect2 calls due to blacklisted failure reasons.\r\nINFO [2021-07-06 14:19:10] Initial testing for significant sample cross-contamination: maybe\r\nINFO [2021-07-06 14:19:11] Removing 70619 variants with AF < 0.030 or AF >= 0.970 or less than 5 supporting reads or depth < 15.\r\nINFO [2021-07-06 14:19:12] Removing 1002 blacklisted variants.\r\nWARN [2021-07-06 14:19:12] Variant ids contain NAs at filter step BQ.\r\nINFO [2021-07-06 14:19:12] Removing 0 low quality variants with BQ < 25.\r\nINFO [2021-07-06 14:19:12] Total size of targeted genomic region: 103.60Mb (119.15Mb with 50bp padding).\r\nINFO [2021-07-06 14:19:12] 5.7% of targets contain variants.\r\nINFO [2021-07-06 14:19:12] Removing 2956 variants outside intervals.\r\nINFO [2021-07-06 14:19:12] Setting somatic prior probabilities for dbSNP hits to 0.000500 or to 0.500000 otherwise.\r\nINFO [2021-07-06 14:19:13] Loading mapping bias file mapping_bias_hg19.rds...\r\nINFO [2021-07-06 14:19:13] Found 18564 variants in mapping bias file.\r\nError in h(simpleError(msg, call)) : \r\n  error in evaluating the argument 'x' in selecting a method for function 'nrow': no method for coercing this S4 class to a vector\r\nCalls: runAbsoluteCN ... as.character -> .local -> as.vector -> .handleSimpleError -> h\r\nIn addition: Warning message:\r\nIn .bcfHeaderAsSimpleList(header) :\r\n  duplicate keys in header will be forced to unique rownames\r\nExecution halted\r\n' returned non-zero exit status 1.\r\n[2021-07-06T11:19Z] PureCN failed\r\nTraceback (most recent call last):\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/bin/bcbio_nextgen.py\", line 245, in <module>\r\n    main(**kwargs)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 50, in run_main\r\n    fc_dir, run_info_yaml)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 91, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 179, in variant2pipeline\r\n    samples = structural.run(samples, run_parallel, \"standard\")\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/__init__.py\", line 228, in run\r\n    for xs in to_process.values()))\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 28, in run_parallel\r\n    return run_multicore(fn, items, config, parallel=parallel)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 86, in run_multicore\r\n    for data in joblib.Parallel(parallel[\"num_jobs\"], batch_size=1, backend=\"multiprocessing\")(joblib.delayed(fn)(*x) for x in items):\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 1048, in __call__\r\n    if self.dispatch_one_batch(iterator):\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 866, in dispatch_one_batch\r\n    self._dispatch(tasks)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 784, in _dispatch\r\n    job = self._backend.apply_async(batch, callback=cb)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/_parallel_backends.py\", line 208, in apply_async\r\n    result = ImmediateResult(func)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/_parallel_backends.py\", line 572, in __init__\r\n    self.results = batch()\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 263, in __call__\r\n    for func, args, kwargs in self.items]\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 263, in <listcomp>\r\n    for func, args, kwargs in self.items]\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/utils.py\", line 59, in wrapper\r\n    return f(*args, **kwargs)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multitasks.py\", line 359, in detect_sv\r\n    return structural.detect_sv(*args)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/__init__.py\", line 254, in detect_sv\r\n    for svdata in caller_fn(items):\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/purecn.py\", line 36, in run\r\n    purecn_out = _run_purecn_dx(purecn_out, paired)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/purecn.py\", line 117, in _run_purecn_dx\r\n    out_base, out, all_files = _get_purecn_dx_files(paired, out)\r\n  File \"/media/kokyriakidis/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/purecn.py\", line 139, in _get_purecn_dx_files\r\n    out_base = utils.splitext_plus(out[\"rds\"])[0]\r\nKeyError: 'rds'\r\n```\r\n\r\nEDIT: Updating to version 1.23.5 solved the issue!", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3428", "id": 795224745, "node_id": "MDU6SXNzdWU3OTUyMjQ3NDU=", "number": 3428, "title": "Error in multiprocessing: run_rapmap_index", "user": {"login": "ryanccarelli", "id": 53981700, "node_id": "MDQ6VXNlcjUzOTgxNzAw", "avatar_url": "https://avatars.githubusercontent.com/u/53981700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanccarelli", "html_url": "https://github.com/ryanccarelli", "followers_url": "https://api.github.com/users/ryanccarelli/followers", "following_url": "https://api.github.com/users/ryanccarelli/following{/other_user}", "gists_url": "https://api.github.com/users/ryanccarelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanccarelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanccarelli/subscriptions", "organizations_url": "https://api.github.com/users/ryanccarelli/orgs", "repos_url": "https://api.github.com/users/ryanccarelli/repos", "events_url": "https://api.github.com/users/ryanccarelli/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanccarelli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-01-27T15:55:07Z", "updated_at": "2021-02-25T17:17:48Z", "closed_at": "2021-02-16T15:27:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Version info**\r\n- bcbio version (`bcbio_nextgen.py --version`): 1.2.5\r\n- OS name and version (`lsb_release -ds`): Ubuntu 18.04 LTS\r\n\r\n**To Reproduce**\r\nExact bcbio command you have used:\r\n```\r\nbcbio_nextgen.py hp5382_config.yaml\r\n```\r\nYour sample configuration file:\r\n```\r\ndetails:\r\n- algorithm:\r\n    cellular_barcode_correction: 1\r\n    minimum_barcode_depth: 1000\r\n    sample_barcodes: /home/ryc4001/data/scrnaseq/sample-barcodes-rc.txt\r\n    transcriptome_fasta: /home/ryc4001/Documents/bcbio/genomes/Mmusculus/mm10/rnaseq/ref-transcripts.fa\r\n    transcriptome_gtf: /home/ryc4001/Documents/bcbio/genomes/Mmusculus/mm10/rnaseq/ref-transcripts.gtf\r\n    umi_type: harvard-indrop-v3\r\n  analysis: scRNA-seq\r\n  description: prostate\r\n  files:\r\n  - /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R1_001.fastq.gz\r\n  - /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R2_001.fastq.gz\r\n  - /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R3_001.fastq.gz\r\n  - /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R4_001.fastq.gz\r\n  genome_build: mm10\r\n  metadata: {}\r\nfc_name: prostate-rerun\r\nupload:\r\n  dir: ../final\r\n```\r\n\r\n**Observed behavior**\r\nError message or bcbio output:\r\n```\r\nRunning bcbio version: 1.2.5\r\nglobal config: /home/ryc4001/data/scrnaseq/bcbio_system.yaml\r\nrun info config: /home/ryc4001/data/scrnaseq/hp5382_config.yaml\r\n[2021-01-26T23:40Z] System YAML configuration: /home/ryc4001/bcbio/galaxy/bcbio_system.yaml.\r\n[2021-01-26T23:40Z] Locale set to C.UTF-8.\r\n[2021-01-26T23:40Z] Resource requests: picard; memory: 4.00; cores: 16\r\n[2021-01-26T23:40Z] Configuring 1 jobs to run, using 1 cores each with 4.00g of memory reserved for each job\r\n[2021-01-26T23:40Z] Timing: organize samples\r\n[2021-01-26T23:40Z] multiprocessing: organize_samples\r\n[2021-01-26T23:40Z] Using input YAML configuration: /home/ryc4001/data/scrnaseq/hp5382_config.yaml\r\n[2021-01-26T23:40Z] Checking sample YAML configuration: /home/ryc4001/data/scrnaseq/hp5382_config.yaml\r\n[2021-01-26T23:40Z] Retreiving program versions from /home/ryc4001/bcbio/manifest/python-packages.yaml.\r\n[2021-01-26T23:40Z] Retreiving program versions from /home/ryc4001/bcbio/manifest/r-packages.yaml.\r\n[2021-01-26T23:40Z] Testing minimum versions of installed programs\r\n[2021-01-26T23:40Z] multiprocessing: prepare_sample\r\n[2021-01-26T23:40Z] Preparing prostate\r\n[2021-01-26T23:40Z] Resource requests: rapmap, samtools; memory: 4.00, 4.00; cores: 16, 16\r\n[2021-01-26T23:40Z] Configuring 1 jobs to run, using 1 cores each with 4.00g of memory reserved for each job\r\n[2021-01-26T23:40Z] Timing: singlecell-rnaseq\r\n[2021-01-26T23:40Z] multiprocessing: run_umi_transform\r\n[2021-01-26T23:40Z] Inserting UMI and barcode information into the read name of /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R1_001.fastq.gz\r\n[2021-01-26T23:40Z] INFO:umis.umis:Transforming /home/ryc4001/data/scrnaseq/hp5382/20180327_pool_HP5382_S1_R1_001.fastq.gz.\r\n[2021-01-26T23:40Z] INFO:umis.umis:Detected dual cellular indexes.\r\n[2021-01-26T23:40Z] INFO:umis.umis:Detected UMI.\r\n[2021-01-26T23:40Z] INFO:umis.umis:Detected sample.\r\n[2021-01-27T04:52Z] multiprocessing: demultiplex_samples\r\n[2021-01-27T04:52Z] Demultiplexing /home/ryc4001/data/scrnaseq/umis/prostate.umitransformed.fq.gz.\r\n[2021-01-27T05:52Z] multiprocessing: run_rapmap_index\r\nTraceback (most recent call last):\r\n  File \"/home/ryc4001/bcbio/anaconda/bin/bcbio_nextgen.py\", line 245, in <module>\r\n    main(**kwargs)\r\n  File \"/home/ryc4001/bcbio/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 50, in run_main\r\n    fc_dir, run_info_yaml)\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 91, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 316, in singlecellrnaseqpipeline\r\n    samples = rnaseq.singlecell_rnaseq(samples, run_parallel)\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/rnaseq.py\", line 36, in singlecell_rnaseq\r\n    samples = run_parallel(\"run_rapmap_index\", [samples])\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 28, in run_parallel\r\n    return run_multicore(fn, items, config, parallel=parallel)\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 82, in run_multicore\r\n    items = [config_utils.add_cores_to_config(x, parallel[\"cores_per_job\"]) for x in items]\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 82, in <listcomp>\r\n    items = [config_utils.add_cores_to_config(x, parallel[\"cores_per_job\"]) for x in items]\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/config_utils.py\", line 306, in add_cores_to_config\r\n    return _update_config(args, _update_cores)\r\n  File \"/home/ryc4001/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/config_utils.py\", line 321, in _update_config\r\n    raise ValueError(\"Could not find configuration in args: %s\" % str(args))\r\nValueError: Could not find configuration in args: []\r\n```\r\n\r\n**Expected behavior**\r\nI expected this to run the scrnaseq pipeline.\r\n\r\n**Log files**\r\nPlease attach (10MB max): `bcbio-nextgen.log`, `bcbio-nextgen-commands.log`, and `bcbio-nextgen-debug.log`.\r\n[bcbio-nextgen-commands.log](https://github.com/bcbio/bcbio-nextgen/files/5881356/bcbio-nextgen-commands.log)\r\n[bcbio-nextgen-debug.log](https://github.com/bcbio/bcbio-nextgen/files/5881357/bcbio-nextgen-debug.log)\r\n[bcbio-nextgen.log](https://github.com/bcbio/bcbio-nextgen/files/5881358/bcbio-nextgen.log)\r\n\r\n**Additional context**\r\nI am using a customized version of mm10 including human transgenes that was created using the bcbio_setup_genome.py script. I tried the obvious things (reinstallation, running on default mm10 instead of version with transgenes) but no luck.\r\nThanks for your help! Hopefully I am not missing something obvious here...", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3408", "id": 779636565, "node_id": "MDU6SXNzdWU3Nzk2MzY1NjU=", "number": 3408, "title": "Fresh installation - scramble issue", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-01-05T22:01:36Z", "updated_at": "2021-01-11T04:21:05Z", "closed_at": "2021-01-05T22:56:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello!\r\n\r\nI'm doing a fresh installation:\r\n\r\n```\r\nChecking for problematic or migrated packages in default environment\r\nInstalling initial set of packages for default environment with mamba\r\n\r\nEncountered problems while solving.\r\nProblem: package scramble-1.0.1-h516909a_0 requires htslib >=1.11,<1.12.0a0, but none of the providers can be installed\r\n```\r\n\r\nIt continues to solve, but, I think, without scramble.\r\n\r\nSN", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3408/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3398", "id": 768232884, "node_id": "MDU6SXNzdWU3NjgyMzI4ODQ=", "number": 3398, "title": "NF fraction bam in ATAC seq has reads only from one strand", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-15T21:48:53Z", "updated_at": "2020-12-17T00:28:07Z", "closed_at": "2020-12-17T00:28:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello everyone!\r\n\r\nIn a ATAA-seq run:\r\n```\r\ndetails:\r\n- analysis: chip-seq\r\n  genome_build: mm10\r\n  algorithm:\r\n    aligner: bwa\r\n    quality_format: standard\r\n    trim_reads: read_through\r\n    adapters: [nextera, nextera2, polya]\r\n    peakcaller: macs2\r\n    chip_method: atac\r\n    keep_duplicates: False\r\n    keep_multimapped: False\r\n  resources:\r\n    macs2:\r\n      options: [\"-g mm\"]\r\nupload:\r\n  dir: /project/results\r\n```\r\n\r\nsample-NF.bam has reads almost exclusively on one strand:\r\n```bash\r\n$ samtools view -F 16 sample-NF.bam | wc -l\r\n5695995\r\n$ samtools view -f 16 sample-NF.bam | wc -l\r\n2596\r\n```\r\nwhile sample-ready.bam has them on both strands (35 mln/35mln).\r\nAre we losing counts when creating the NF file? \r\n\r\nSN\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3395", "id": 766098758, "node_id": "MDU6SXNzdWU3NjYwOTg3NTg=", "number": 3395, "title": "Installation and upgrade use both mamba and conda", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-14T08:15:50Z", "updated_at": "2020-12-14T22:31:12Z", "closed_at": "2020-12-14T22:30:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is more of an issue in cloudbiolinux (which I will report) but since it affects bcbio, I'll report it also here.\r\n\r\n`conda` can be very slow, taking days, to resolve environments with very old installs of bcbio (this one has been constantly upgraded for a few years), while mamba doesn't.\r\n\r\nHowever, cloudbiolinux does two passes, one with mamba and one with conda, causing upgrades to take days unless the conda part is patched out. Conda should be used only as a fallback if mamba fails, instead.\r\n\r\nI'll report a separate issue in cloudbiolinux.", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3391", "id": 759299268, "node_id": "MDU6SXNzdWU3NTkyOTkyNjg=", "number": 3391, "title": "fastrna-seq can not combine counts", "user": {"login": "LMannarino", "id": 11782567, "node_id": "MDQ6VXNlcjExNzgyNTY3", "avatar_url": "https://avatars.githubusercontent.com/u/11782567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LMannarino", "html_url": "https://github.com/LMannarino", "followers_url": "https://api.github.com/users/LMannarino/followers", "following_url": "https://api.github.com/users/LMannarino/following{/other_user}", "gists_url": "https://api.github.com/users/LMannarino/gists{/gist_id}", "starred_url": "https://api.github.com/users/LMannarino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LMannarino/subscriptions", "organizations_url": "https://api.github.com/users/LMannarino/orgs", "repos_url": "https://api.github.com/users/LMannarino/repos", "events_url": "https://api.github.com/users/LMannarino/events{/privacy}", "received_events_url": "https://api.github.com/users/LMannarino/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-08T09:54:39Z", "updated_at": "2020-12-11T19:08:13Z", "closed_at": "2020-12-11T19:08:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nI'm running a fastrna-seq with 6 samples.\r\n\r\n**bcbio version: 1.2.4**\r\n\r\n**my configuration:**\r\n```\r\n---\r\ndetails:\r\n  - analysis: fastrna-seq\r\n    genome_build: hg19\r\n    algorithm: {}\r\nupload:\r\n  dir: ../final\r\n```\r\nbcbio raises this error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/bcbio/anaconda/bin/bcbio_nextgen.py\", line 245, in <module>\r\n    main(**kwargs)\r\n  File \"/opt/bcbio/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 58, in run_main\r\n    fc_dir, run_info_yaml)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 91, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 300, in fastrnaseqpipeline\r\n    samples = rnaseq.combine_files(samples)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/rnaseq.py\", line 444, in combine_files\r\n    combined = count.combine_count_files(count_files, ext=\".counts\")\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/rnaseq/count.py\", line 22, in combine_count_files\r\n    out_dir = os.path.join(os.path.dirname(files[0]))\r\nIndexError: list index out of range\r\n```\r\n\r\n@roryk I think this is related to this: https://github.com/bcbio/bcbio-nextgen/commit/c9a6922956974dd23eeace8022fe991eded96762 \r\n\r\nActually, I don't have any *.counts file in the work folder, so I guess it cannot find it, but maybe I'm wrong.\r\n\r\nThank you for your help!\r\nLaura \r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3391/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3390", "id": 758515630, "node_id": "MDU6SXNzdWU3NTg1MTU2MzA=", "number": 3390, "title": "excel file reading  - once deprecated now errror in Python 3.9", "user": {"login": "smoe", "id": 207407, "node_id": "MDQ6VXNlcjIwNzQwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/207407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoe", "html_url": "https://github.com/smoe", "followers_url": "https://api.github.com/users/smoe/followers", "following_url": "https://api.github.com/users/smoe/following{/other_user}", "gists_url": "https://api.github.com/users/smoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoe/subscriptions", "organizations_url": "https://api.github.com/users/smoe/orgs", "repos_url": "https://api.github.com/users/smoe/repos", "events_url": "https://api.github.com/users/smoe/events{/privacy}", "received_events_url": "https://api.github.com/users/smoe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-12-07T13:39:27Z", "updated_at": "2021-01-25T18:04:24Z", "closed_at": "2020-12-11T19:46:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Version info**\r\n- bcbio version (`bcbio_nextgen.py --version`):\r\n1.2.4\r\n- OS name and version (`lsb_release -ds`):\r\nDebian unstable\r\n\r\n**To Reproduce**\r\nExact bcbio command you have used:\r\n```\r\n$ tests/run_tests.sh explant\r\n```\r\n**Observed behavior**\r\nError message or bcbio output:\r\n```\r\n=============================================================== test session starts ===============================================================\r\nplatform linux -- Python 3.9.1rc1, pytest-4.6.11, py-1.9.0, pluggy-0.13.0 -- /usr/bin/python3\r\nrootdir: /home/steffen/med/bcbio\r\nplugins: mock-1.10.4, xonsh-0.9.24\r\ncollected 83 items / 82 deselected / 1 selected\r\n\r\ntests/integration/test_automated_analysis.py::test_explant_with_tophat Running bcbio version: 1.2.4\r\nglobal config: /tmp/bcbio_w9qvib0o/test_automated_output/bcbio_system.yaml\r\nflowcell directory: /tmp/bcbio_w9qvib0o/data/1_explant\r\nrun info config: /tmp/bcbio_w9qvib0o/data/automated/run_info-explant.yaml\r\n[2020-12-07T13:31Z] System YAML configuration: /tmp/bcbio_w9qvib0o/test_automated_output/bcbio_system.yaml.\r\n[2020-12-07T13:31Z] Locale set to C.UTF-8.\r\n[2020-12-07T13:31Z] Resource requests: atropos, picard; memory: 2.00; cores: 4, 1\r\n[2020-12-07T13:31Z] Configuring 1 jobs to run, using 1 cores each with 2.00g of memory reserved for each job\r\n[2020-12-07T13:31Z] Timing: organize samples\r\n[2020-12-07T13:31Z] multiprocessing: organize_samples\r\n[2020-12-07T13:31Z] Using input YAML configuration: /tmp/bcbio_w9qvib0o/data/automated/run_info-explant.yaml\r\n[2020-12-07T13:31Z] Checking sample YAML configuration: /tmp/bcbio_w9qvib0o/data/automated/run_info-explant.yaml\r\nTraceback (most recent call last):\r\n  File \"/home/steffen/med/bcbio/scripts/bcbio_nextgen.py\", line 245, in <module>\r\n    main(**kwargs)\r\n  File \"/home/steffen/med/bcbio/scripts/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/main.py\", line 49, in run_main\r\n    _run_toplevel(config, config_file, workdir, parallel,\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/main.py\", line 91, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/main.py\", line 239, in rnaseqpipeline\r\n    samples = rnaseq_prep_samples(config, run_info_yaml, parallel, dirs, samples)\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/main.py\", line 461, in rnaseq_prep_samples\r\n    samples = run_parallel(\"organize_samples\", [[dirs, config, run_info_yaml,\r\n  File \"/home/steffen/med/bcbio/bcbio/distributed/multi.py\", line 28, in run_parallel\r\n    return run_multicore(fn, items, config, parallel=parallel)\r\n  File \"/home/steffen/med/bcbio/bcbio/distributed/multi.py\", line 86, in run_multicore\r\n    for data in joblib.Parallel(parallel[\"num_jobs\"], batch_size=1, backend=\"multiprocessing\")(joblib.delayed(fn)(*x) for x in items):\r\n  File \"/usr/lib/python3/dist-packages/joblib/parallel.py\", line 1048, in __call__\r\n    if self.dispatch_one_batch(iterator):\r\n  File \"/usr/lib/python3/dist-packages/joblib/parallel.py\", line 866, in dispatch_one_batch\r\n    self._dispatch(tasks)\r\n  File \"/usr/lib/python3/dist-packages/joblib/parallel.py\", line 784, in _dispatch\r\n    job = self._backend.apply_async(batch, callback=cb)\r\n  File \"/usr/lib/python3/dist-packages/joblib/_parallel_backends.py\", line 208, in apply_async\r\n    result = ImmediateResult(func)\r\n  File \"/usr/lib/python3/dist-packages/joblib/_parallel_backends.py\", line 572, in __init__\r\n    self.results = batch()\r\n  File \"/usr/lib/python3/dist-packages/joblib/parallel.py\", line 262, in __call__\r\n    return [func(*args, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/joblib/parallel.py\", line 262, in <listcomp>\r\n    return [func(*args, **kwargs)\r\n  File \"/home/steffen/med/bcbio/bcbio/utils.py\", line 56, in wrapper\r\n    return f(*args, **kwargs)\r\n  File \"/home/steffen/med/bcbio/bcbio/distributed/multitasks.py\", line 459, in organize_samples\r\n    return run_info.organize(*args)\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/run_info.py\", line 81, in organize\r\n    item = add_reference_resources(item, remote_retriever)\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/run_info.py\", line 176, in add_reference_resources\r\n    data[\"reference\"] = genome.get_refs(data[\"genome_build\"], alignment.get_aligner_with_aliases(aligner, data),\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/genome.py\", line 229, in get_refs\r\n    galaxy_dt = _get_galaxy_data_table(name, galaxy_config[\"tool_data_table_config_path\"])\r\n  File \"/home/steffen/med/bcbio/bcbio/pipeline/genome.py\", line 215, in _get_galaxy_data_table\r\n    for t in tdtc.getiterator(\"table\"):\r\nAttributeError: 'ElementTree' object has no attribute 'getiterator'\r\nFAILED\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\nThis is a known issue\r\n```\r\n$ python3 --version\r\nPython 3.9.1rc1\r\n```\r\nand stackoverflow has something about it https://stackoverflow.com/questions/64264563/attributeerror-elementtree-object-has-no-attribute-getiterator-when-trying\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3389", "id": 758509346, "node_id": "MDU6SXNzdWU3NTg1MDkzNDY=", "number": 3389, "title": "Trivial syntax issues in structural/delly and heterogeneity/loh", "user": {"login": "smoe", "id": 207407, "node_id": "MDQ6VXNlcjIwNzQwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/207407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoe", "html_url": "https://github.com/smoe", "followers_url": "https://api.github.com/users/smoe/followers", "following_url": "https://api.github.com/users/smoe/following{/other_user}", "gists_url": "https://api.github.com/users/smoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoe/subscriptions", "organizations_url": "https://api.github.com/users/smoe/orgs", "repos_url": "https://api.github.com/users/smoe/repos", "events_url": "https://api.github.com/users/smoe/events{/privacy}", "received_events_url": "https://api.github.com/users/smoe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-07T13:30:54Z", "updated_at": "2020-12-11T20:44:37Z", "closed_at": "2020-12-11T20:44:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Version info**\r\n- bcbio version (`bcbio_nextgen.py --version`):\r\n1.2.4\r\n- OS name and version (`lsb_release -ds`):\r\nDebian unstable\r\n\r\n**To Reproduce**\r\nExact bcbio command you have used:\r\n```\r\ncd tests\r\n./run_tests.sh explant\r\n```\r\n**Observed behavior**\r\nError message or bcbio output:\r\n```\r\n/home/steffen/med/bcbio/bcbio/structural/delly.py:83\r\n  /home/steffen/med/bcbio/bcbio/structural/delly.py:83: DeprecationWarning: invalid escape sequence \\.\r\n    cmd = (\"bcftools view {bcf_file} | sed 's/\\.,\\.,\\././' | bgzip -c > {tx_out_file}\")\r\n\r\n/home/steffen/med/bcbio/bcbio/heterogeneity/loh.py:325\r\n  /home/steffen/med/bcbio/bcbio/heterogeneity/loh.py:325: SyntaxWarning: \"is not\" with a literal. Did you mean \"!=\"?\r\n    while c is not self.terminator and c is not \"\" and c not in _STOP_CHARS:\r\n\r\n/home/steffen/med/bcbio/bcbio/heterogeneity/loh.py:356\r\n  /home/steffen/med/bcbio/bcbio/heterogeneity/loh.py:356: SyntaxWarning: \"is not\" with a literal. Did you mean \"!=\"?\r\n    while c is not self.terminator and c is not \"\" and c not in _STOP_CHARS:\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3327", "id": 682713405, "node_id": "MDU6SXNzdWU2ODI3MTM0MDU=", "number": 3327, "title": "gnomAD genomes ggd recipe failing on vt normalize", "user": {"login": "ameynert", "id": 6746627, "node_id": "MDQ6VXNlcjY3NDY2Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/6746627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ameynert", "html_url": "https://github.com/ameynert", "followers_url": "https://api.github.com/users/ameynert/followers", "following_url": "https://api.github.com/users/ameynert/following{/other_user}", "gists_url": "https://api.github.com/users/ameynert/gists{/gist_id}", "starred_url": "https://api.github.com/users/ameynert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ameynert/subscriptions", "organizations_url": "https://api.github.com/users/ameynert/orgs", "repos_url": "https://api.github.com/users/ameynert/repos", "events_url": "https://api.github.com/users/ameynert/events{/privacy}", "received_events_url": "https://api.github.com/users/ameynert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-08-20T13:21:25Z", "updated_at": "2020-08-24T17:56:37Z", "closed_at": "2020-08-24T17:56:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've traced the error to vt normalize in this line of ggd-run.sh:\r\n\r\n```\r\nbcftools view -f PASS $vcf_file | bcftools annotate -x \"^$fields_to_keep\" -Ov | vt decompose -s - | vt normalize -r $ref -n - | vt uniq - | bgzip -c > variation/gnomad_genome.vcf.gz\r\n```\r\n\r\nI pulled out the first 10k lines of the downloaded gnomAD genomes VCF for testing:\r\n```\r\n[ameynert@ultra txtmp]$ ref=../seq/hg38.fa\r\n[ameynert@ultra txtmp]$ fields_to_keep=\"INFO/\"$(cat gnomad_fields_to_keep.txt | paste -s | sed s/\"\\t\"/\",INFO\\/\"/g)\r\n[ameynert@ultra txtmp]$ zcat gnomad_genome.annotated_decomposed.vcf.gz | head -n 10000 > test10k.vcf\r\n[ameynert@ultra txtmp]$ bcftools view -f PASS test10k.vcf | bcftools annotate -x \"^$fields_to_keep\" -Ov | vt decompose -s - > test10k_pass_ann_decomp.vcf\r\ndecompose v0.5\r\n\r\noptions:     input VCF file        -\r\n         [s] smart decomposition   true (experimental)\r\n         [o] output VCF file       -\r\n\r\n<snipped tag-related warnings>\r\n\r\nstats: no. variants                 : 6500\r\n       no. biallelic variants       : 6500\r\n       no. multiallelic variants    : 0\r\n\r\n       no. additional biallelics    : 0\r\n       total no. of biallelics      : 6500\r\n\r\nTime elapsed: 0.26s\r\n\r\n[ameynert@ultra txtmp]$ vt normalize -r $ref -n test10k_pass_ann_decomp.vcf > test10k_pass_ann_decomp_norm.vcf\r\nnormalize v0.5\r\n\r\noptions:     input VCF file                                  test10k_pass_ann_decomp.vcf\r\n         [o] output VCF file                                 -\r\n         [w] sorting window size                             10000\r\n         [n] no fail on reference inconsistency for non SNPs true\r\n         [q] quiet                                           false\r\n         [d] debug                                           false\r\n         [r] reference FASTA file                            ../seq/hg38.fa\r\n\r\nFloating point exception (core dumped)\r\n```\r\n\r\nFull bcbio install log from relevant point:\r\n```\r\n2020-08-19 16:10:19 (8.78 MB/s) - \u2018gnomad.genomes.r3.0.sites.vcf.bgz.tbi\u2019 saved [2933246/2933246]\r\n\r\ndecompose vuniq vnormalize v0.50.57\r\n0.5\r\n\r\n\r\n\r\noptions:     input VCF file        options:     input VCF file        \r\n--options:     input VCF file                                  \r\n\r\n-         [o] output VCF file                [s] smart decomposition   \r\n-true         [o] output VCF file                                 \r\n (experimental)\r\n-         [o] output VCF file       \r\n-         [w] sorting window size                             \r\n\r\n10000\r\n         [n] no fail on reference inconsistency for non SNPs true\r\n         [q] quiet                                           false\r\n         [d] debug                                           false\r\n         [r] reference FASTA file                            ../seq/hg38.fa\r\n\r\nWarning: The tag \"BaseQRankSum\" not defined in the header\r\nWarning: The tag \"ClippingRankSum\" not defined in the header\r\nWarning: The tag \"allele_type\" not defined in the header\r\nWarning: The tag \"AC_nfe_seu\" not defined in the header\r\nWarning: The tag \"AN_nfe_seu\" not defined in the header\r\nWarning: The tag \"AF_nfe_seu\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_seu\" not defined in the header\r\nWarning: The tag \"AC_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AN_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AF_nfe_bgr\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AC_nfe_onf\" not defined in the header\r\nWarning: The tag \"AN_nfe_onf\" not defined in the header\r\nWarning: The tag \"AF_nfe_onf\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_onf\" not defined in the header\r\nWarning: The tag \"AC_nfe_swe\" not defined in the header\r\nWarning: The tag \"AN_nfe_swe\" not defined in the header\r\nWarning: The tag \"AF_nfe_swe\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_swe\" not defined in the header\r\nWarning: The tag \"AC_nfe_nwe\" not defined in the header\r\nWarning: The tag \"AN_nfe_nwe\" not defined in the header\r\nWarning: The tag \"AF_nfe_nwe\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_nwe\" not defined in the header\r\nWarning: The tag \"AC_eas_jpn\" not defined in the header\r\nWarning: The tag \"AN_eas_jpn\" not defined in the header\r\nWarning: The tag \"AF_eas_jpn\" not defined in the header\r\nWarning: The tag \"nhomalt_eas_jpn\" not defined in the header\r\nWarning: The tag \"AC_eas_kor\" not defined in the header\r\nWarning: The tag \"AN_eas_kor\" not defined in the header\r\nWarning: The tag \"AF_eas_kor\" not defined in the header\r\nWarning: The tag \"nhomalt_eas_kor\" not defined in the header\r\nWarning: The tag \"AC_eas_oea\" not defined in the header\r\nWarning: The tag \"AN_eas_oea\" not defined in the header\r\nWarning: The tag \"AF_eas_oea\" not defined in the header\r\nWarning: The tag \"nhomalt_eas_oea\" not defined in the header\r\nWarning: The tag \"AC_nfe_est\" not defined in the header\r\nWarning: The tag \"AN_nfe_est\" not defined in the header\r\nWarning: The tag \"AF_nfe_est\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_est\" not defined in the header\r\nWarning: The tag \"faf95\" not defined in the header\r\nWarning: The tag \"faf99\" not defined in the header\r\nWarning: The tag \"popmax\" not defined in the header\r\nWarning: The tag \"AC_popmax\" not defined in the header\r\nWarning: The tag \"AN_popmax\" not defined in the header\r\nWarning: The tag \"AF_popmax\" not defined in the header\r\nWarning: The tag \"nhomalt_popmax\" not defined in the header\r\n\r\nstats: Total number of observed variants   0\r\n       Total number of unique variants     0\r\n\r\nTime elapsed: 0.00s\r\n\r\n/home/u035/project/software/bcbio/genomes/Hsapiens/hg38/txtmp/ggd-run.sh: line 15: 700340 Broken pipe             bcftools view -f PASS $vcf_file\r\n     700341                       | bcftools annotate -x \"^$fields_to_keep\" -Ov\r\n     700342                       | vt decompose -s -\r\n     700343 Floating point exception(core dumped) | vt normalize -r $ref -n -\r\n     700344 Done                    | vt uniq -\r\n     700345 Done                    | bgzip -c > variation/gnomad_genome.vcf.gz\r\nUpgrading bcbio\r\nUpgrading third party tools to latest versions\r\nReading packages from /home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/contrib/flavor/ngs_pipeline_minimal/packages-conda.yaml\r\nCreating conda environment: python3\r\nCreating conda environment: samtools0\r\nCreating conda environment: dv\r\nCreating conda environment: python2\r\nCreating conda environment: r36\r\nCreating conda environment: htslib1.10\r\nChecking for problematic or migrated packages in default environment\r\nInitalling initial set of packages for default environment with mamba\r\n# Installing into conda environment default: age-metasv, arriba, bamtools=2.4.0, bamutil, bbmap, bcbio-prioritize, bcbio-variation, bcbio-variation-recall, bcftools, bedops, bedtools=2.27.1, bio-vcf, biobambam, bowtie, bowtie2, break-point-inspector, bwa, bwakit, cage, cancerit-allelecount, chipseq-greylist, cnvkit, coincbc, cramtools, cufflinks, cyvcf2, deeptools, delly, duphold, ensembl-vep=100.*, express, extract-sv-reads, fastp, fastqc>=0.11.8=1, fgbio, freebayes=1.1.0.46, gatk, gatk4, geneimpacts, genesplicer, gffcompare, goleft, grabix, gridss, gsort, gvcfgenotyper, h5py, hmftools-amber, hmftools-cobalt, hmftools-purple, hmmlearn, hts-nim-tools, htslib, impute2, kallisto>=0.43.1, kraken, ldc>=1.13.0, lofreq, macs2, maxentscan, mbuffer, minimap2, mintmap, mirdeep2=2.0.0.7, mirtop, moreutils, multiqc, multiqc-bcbio, ngs-disambiguate, novoalign, octopus>=0.5.1b, oncofuse, optitype>=1.3.4, parallel, pbgzip, peddy, perl-sanger-cgp-battenberg, picard, pindel, pizzly, pyloh, pysam>=0.14.0, pythonpy, qsignature, qualimap, rapmap, razers3=3.5.0, rtg-tools, sailfish, salmon, sambamba, samblaster, samtools=1.10, scalpel, seq2c<2016, seqbuster, seqcluster, seqtk, sickle-trim, simple_sv_annotation, singlecell-barcodes, snap-aligner=1.0dev.97, snpeff=4.3.1t, solvebio, spades, staden_io_lib, star=2.6.1d, stringtie, subread, survivor, tdrmapper, tophat-recondition, trim-galore, ucsc-bedgraphtobigwig, ucsc-bedtobigbed, ucsc-bigbedinfo, ucsc-bigbedsummary, ucsc-bigbedtobed, ucsc-bigwiginfo, ucsc-bigwigsummary, ucsc-bigwigtobedgraph, ucsc-bigwigtowig, ucsc-fatotwobit, ucsc-gtftogenepred, ucsc-liftover, ucsc-wigtobigwig, umis, vardict, vardict-java, variantbam, varscan, vcfanno, vcflib, verifybamid2, viennarna, vqsr_cnn, vt, wham, anaconda-client, awscli, bzip2, ncurses, nodejs, p7zip, readline, s3gof3r, xz, perl-app-cpanminus, perl-archive-extract, perl-archive-zip, perl-bio-db-sam, perl-cgi, perl-dbi, perl-encode-locale, perl-file-fetch, perl-file-sharedir, perl-file-sharedir-install, perl-ipc-system-simple, perl-lwp-protocol-https, perl-lwp-simple, perl-statistics-descriptive, perl-time-hires, perl-vcftools-vcf, bioconductor-annotate, bioconductor-apeglm, bioconductor-biocgenerics, bioconductor-biocinstaller, bioconductor-biocstyle, bioconductor-biostrings, bioconductor-biovizbase, bioconductor-bsgenome.hsapiens.ucsc.hg19, bioconductor-bsgenome.hsapiens.ucsc.hg38, bioconductor-bubbletree, bioconductor-cn.mops, bioconductor-copynumber, bioconductor-degreport, bioconductor-deseq2, bioconductor-dexseq, bioconductor-dnacopy, bioconductor-genomeinfodbdata, bioconductor-genomicranges, bioconductor-iranges, bioconductor-limma, bioconductor-rtracklayer, bioconductor-snpchip, bioconductor-titancna, bioconductor-vsn>=3.50.0, r-base, r-basejump=0.7.2, r-bcbiornaseq>=0.2.7, r-cghflasso, r-chbutils, r-devtools, r-dplyr, r-dt, r-ggdendro, r-ggplot2, r-ggrepel>=0.7, r-gplots, r-gsalib, r-knitr, r-pheatmap, r-plyr, r-pscbs, r-reshape, r-rmarkdown, r-rsqlite, r-sleuth, r-snow, r-stringi, r-viridis>=0.5, r-wasabi, r=3.5.1, xorg-libxt\r\n# Installing into conda environment dv: deepvariant\r\n# Installing into conda environment htslib1.10: mosdepth\r\n# Installing into conda environment python2: bismark, cpat, cutadapt=1.16, dkfz-bias-filter, gemini, gvcf-regions, hap.py, hisat2, htseq=0.9.1, lumpy-sv, manta, metasv, mirge, phylowgs, platypus-variant, sentieon, smcounter2, smoove, strelka, svtools, svtyper, theta2, tophat, vawk, vcf2db\r\n# Installing into conda environment python3: atropos, crossmap\r\n# Installing into conda environment r36: ataqv, bioconductor-purecn>=1.16.0\r\n# Installing into conda environment samtools0: ericscript\r\nCreating manifest of installed packages in /home/u035/project/software/bcbio/manifest\r\nThird party tools upgrade complete.\r\nUpgrading bcbio-nextgen data files\r\nList of genomes to get (from the config file at '{'genomes': [{'dbkey': 'hg38', 'name': 'Human (hg38) full', 'indexes': ['seq', 'twobit', 'bwa', 'hisat2'], 'annotations': ['ccds', 'capture_regions', 'coverage', 'prioritize', 'dbsnp', 'hapmap_snps', '1000g_omni_snps', 'ACMG56_genes', '1000g_snps', 'mills_indels', '1000g_indels', 'clinvar', 'qsignature', 'genesplicer', 'effects_transcripts', 'varpon', 'vcfanno', 'viral', 'gnomad', 'dbnsfp'], 'validation': ['giab-NA12878', 'giab-NA24385', 'giab-NA24631', 'platinum-genome-NA12878', 'giab-NA12878-remap', 'giab-NA12878-crossmap', 'dream-syn4-crossmap', 'dream-syn3-crossmap', 'giab-NA12878-NA24385-somatic', 'giab-NA24143', 'giab-NA24149', 'giab-NA24694', 'giab-NA24695']}], 'genome_indexes': ['bwa', 'rtg'], 'install_liftover': False, 'install_uniref': False}'): Human (hg38) full\r\nRunning GGD recipe: hg38 seq 1000g-20150219_1\r\nRunning GGD recipe: hg38 bwa 1000g-20150219\r\nMoving on to next genome prep method after trying ggd\r\nGGD recipe not available for hg38 rtg\r\nDownloading genome from s3: hg38 rtg\r\nMoving on to next genome prep method after trying s3\r\nNo pre-computed indices for hg38 rtg\r\nPreparing genome hg38 with index rtg\r\nRunning GGD recipe: hg38 ccds r20\r\nRunning GGD recipe: hg38 capture_regions 20161202\r\nRunning GGD recipe: hg38 coverage 2018-10-16\r\nRunning GGD recipe: hg38 prioritize 20181227\r\nRunning GGD recipe: hg38 dbsnp 153-20180725\r\nRunning GGD recipe: hg38 hapmap_snps 20160105\r\nRunning GGD recipe: hg38 1000g_omni_snps 20160105\r\nRunning GGD recipe: hg38 ACMG56_genes 20160726\r\nRunning GGD recipe: hg38 1000g_snps 20160105\r\nRunning GGD recipe: hg38 mills_indels 20160105\r\nRunning GGD recipe: hg38 1000g_indels 2.8_hg38_20150522\r\nRunning GGD recipe: hg38 clinvar 20190513\r\nRunning GGD recipe: hg38 qsignature 20160526\r\nRunning GGD recipe: hg38 genesplicer 2004.04.03\r\nRunning GGD recipe: hg38 effects_transcript 2017-03-16\r\nRunning GGD recipe: hg38 varpon 20181105\r\nRunning GGD recipe: hg38 vcfanno 20190119\r\nRunning GGD recipe: hg38 viral 2017.02.04\r\nRunning GGD recipe: hg38 gnomad 3\r\nTraceback (most recent call last):\r\n  File \"/home/u035/project/software/bcbio/anaconda/bin/bcbio_nextgen.py\", line 228, in <module>\r\n    install.upgrade_bcbio(kwargs[\"args\"])\r\n  File \"/home/u035/project/software/bcbio/anaconda/lib/python3.7/site-packages/bcbio/install.py\", line 107, in upgrade_bcbio\r\n  File \"/home/u035/project/software/bcbio/anaconda/lib/python3.7/site-packages/bcbio/install.py\", line 377, in upgrade_bcbio_data\r\n  File \"/home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 354, in install_data_local\r\n    _prep_genomes(env, genomes, genome_indexes, ready_approaches, data_filedir)\r\n  File \"/home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 480, in _prep_genomes\r\n    retrieve_fn(env, manager, gid, idx)\r\n  File \"/home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 875, in _install_with_ggd\r\n    ggd.install_recipe(os.getcwd(), env.system_install, recipe_file, gid)\r\n  File \"/home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 30, in install_recipe\r\n    recipe[\"recipe\"][\"full\"][\"recipe_type\"], system_install)\r\n  File \"/home/u035/project/software/install/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 62, in _run_recipe\r\n    subprocess.check_output([\"bash\", run_file])\r\n  File \"/home/u035/project/software/bcbio/anaconda/lib/python3.7/subprocess.py\", line 411, in check_output\r\n  File \"/home/u035/project/software/bcbio/anaconda/lib/python3.7/subprocess.py\", line 512, in run\r\nsubprocess.CalledProcessError: Command '['bash', '/home/u035/project/software/bcbio/genomes/Hsapiens/hg38/txtmp/ggd-run.sh']' returned non-zero exit status 136.\r\nChecking required dependencies\r\nInstalling isolated base python installation\r\nInstalling mamba\r\nInstalling conda-build\r\nInstalling bcbio-nextgen\r\nInstalling data and third party dependencies\r\nTraceback (most recent call last):\r\n  File \"bcbio_nextgen_install.py\", line 290, in <module>\r\n    main(parser.parse_args(), sys.argv[1:])\r\n  File \"bcbio_nextgen_install.py\", line 51, in main\r\n    subprocess.check_call([bcbio, \"upgrade\"] + _clean_args(sys_argv, args))\r\n  File \"/usr/lib64/python2.7/subprocess.py\", line 542, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['/home/u035/project/software/bcbio/anaconda/bin/bcbio_nextgen.py', 'upgrade', '--tooldir', '/home/u035/project/software/bcbio/tools', '--genomes', 'hg38', '--aligners', 'bwa', '--datatarget', 'variation', '--datatarget', 'gnomad', '--datatarget', 'vep', '--datatarget', 'dbnsfp', '--cores', '64', '--data']' returned non-zero exit status 1\r\n```", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3327/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3320", "id": 672825499, "node_id": "MDU6SXNzdWU2NzI4MjU0OTk=", "number": 3320, "title": "Problem installing hg38", "user": {"login": "gescaramis", "id": 69203961, "node_id": "MDQ6VXNlcjY5MjAzOTYx", "avatar_url": "https://avatars.githubusercontent.com/u/69203961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gescaramis", "html_url": "https://github.com/gescaramis", "followers_url": "https://api.github.com/users/gescaramis/followers", "following_url": "https://api.github.com/users/gescaramis/following{/other_user}", "gists_url": "https://api.github.com/users/gescaramis/gists{/gist_id}", "starred_url": "https://api.github.com/users/gescaramis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gescaramis/subscriptions", "organizations_url": "https://api.github.com/users/gescaramis/orgs", "repos_url": "https://api.github.com/users/gescaramis/repos", "events_url": "https://api.github.com/users/gescaramis/events{/privacy}", "received_events_url": "https://api.github.com/users/gescaramis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-08-04T14:12:57Z", "updated_at": "2020-08-12T15:50:40Z", "closed_at": "2020-08-12T15:50:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSo far I have been working with the hg19 version, with clean installation and no issues. Now I want to upgrade to the hg38 version but I am having issues with the installation. Any indication of what may be happening?\r\n\r\n**Version info**\r\n- bcbio version: 1.2.3\r\n- OS name and version : CentOS Linux release 8.2.2004 (Core)\r\n\r\n**To Reproduce**\r\ngeorgia@localhost bcbio]$ bcbio_nextgen.py upgrade --data --genomes hg38\r\n\r\n```\r\n**Observed behavior**\r\n...\r\nMoving on to next genome prep method after trying ggd\r\nGGD recipe not available for hg38 star\r\nDownloading genome from s3: hg38 star\r\nMoving on to next genome prep method after trying s3\r\nNo pre-computed indices for hg38 star\r\nPreparing genome hg38 with index star\r\nhg38 detected, building a simple reference with no alts, decoys or HLA from /home/georgia/tools/bcbio/genomes/Hsapiens/hg38/seq/hg38.fa to /home/georgia/tools/bcbio/genomes/Hsapiens/hg38/seq/hg38-simple.fa.\r\nsamtools: error while loading shared libraries: libcrypto.so.1.0.0: cannot open shared object file: No such file or directory\r\nMoving on to next genome prep method after trying raw\r\nCommand '['samtools', 'faidx', '/home/georgia/tools/bcbio/genomes/Hsapiens/hg38/seq/hg38.fa', 'chr1', 'chr2', 'chr3', 'chr4', 'chr5', 'chr6', 'chr7', 'chr8', 'chr9', 'chr10', 'chr11', 'chr12', 'chr13', 'chr14', 'chr15', 'chr16', 'chr17', 'chr18', 'chr19', 'chr20', 'chr21', 'chr22', 'chrX', 'chrY', 'chrM', 'chr1_KI270706v1_random', 'chr1_KI270707v1_random', 'chr1_KI270708v1_random', 'chr1_KI270709v1_random', 'chr1_KI270710v1_random', 'chr1_KI270711v1_random', 'chr1_KI270712v1_random', 'chr1_KI270713v1_random', 'chr1_KI270714v1_random', 'chr2_KI270715v1_random', 'chr2_KI270716v1_random', 'chr3_GL000221v1_random', 'chr4_GL000008v2_random', 'chr5_GL000208v1_random', 'chr9_KI270717v1_random', 'chr9_KI270718v1_random', 'chr9_KI270719v1_random', 'chr9_KI270720v1_random', 'chr11_KI270721v1_random', 'chr14_GL000009v2_random', 'chr14_GL000225v1_random', 'chr14_KI270722v1_random', 'chr14_GL000194v1_random', 'chr14_KI270723v1_random', 'chr14_KI270724v1_random', 'chr14_KI270725v1_random', 'chr14_KI270726v1_random', 'chr15_KI270727v1_random', 'chr16_KI270728v1_random', 'chr17_GL000205v2_random', 'chr17_KI270729v1_random', 'chr17_KI270730v1_random', 'chr22_KI270731v1_random', 'chr22_KI270732v1_random', 'chr22_KI270733v1_random', 'chr22_KI270734v1_random', 'chr22_KI270735v1_random', 'chr22_KI270736v1_random', 'chr22_KI270737v1_random', 'chr22_KI270738v1_random', 'chr22_KI270739v1_random', 'chrY_KI270740v1_random', 'chrUn_KI270302v1', 'chrUn_KI270304v1', 'chrUn_KI270303v1', 'chrUn_KI270305v1', 'chrUn_KI270322v1', 'chrUn_KI270320v1', 'chrUn_KI270310v1', 'chrUn_KI270316v1', 'chrUn_KI270315v1', 'chrUn_KI270312v1', 'chrUn_KI270311v1', 'chrUn_KI270317v1', 'chrUn_KI270412v1', 'chrUn_KI270411v1', 'chrUn_KI270414v1', 'chrUn_KI270419v1', 'chrUn_KI270418v1', 'chrUn_KI270420v1', 'chrUn_KI270424v1', 'chrUn_KI270417v1', 'chrUn_KI270422v1', 'chrUn_KI270423v1', 'chrUn_KI270425v1', 'chrUn_KI270429v1', 'chrUn_KI270442v1', 'chrUn_KI270466v1', 'chrUn_KI270465v1', 'chrUn_KI270467v1', 'chrUn_KI270435v1', 'chrUn_KI270438v1', 'chrUn_KI270468v1', 'chrUn_KI270510v1', 'chrUn_KI270509v1', 'chrUn_KI270518v1', 'chrUn_KI270508v1', 'chrUn_KI270516v1', 'chrUn_KI270512v1', 'chrUn_KI270519v1', 'chrUn_KI270522v1', 'chrUn_KI270511v1', 'chrUn_KI270515v1', 'chrUn_KI270507v1', 'chrUn_KI270517v1', 'chrUn_KI270529v1', 'chrUn_KI270528v1', 'chrUn_KI270530v1', 'chrUn_KI270539v1', 'chrUn_KI270538v1', 'chrUn_KI270544v1', 'chrUn_KI270548v1', 'chrUn_KI270583v1', 'chrUn_KI270587v1', 'chrUn_KI270580v1', 'chrUn_KI270581v1', 'chrUn_KI270579v1', 'chrUn_KI270589v1', 'chrUn_KI270590v1', 'chrUn_KI270584v1', 'chrUn_KI270582v1', 'chrUn_KI270588v1', 'chrUn_KI270593v1', 'chrUn_KI270591v1', 'chrUn_KI270330v1', 'chrUn_KI270329v1', 'chrUn_KI270334v1', 'chrUn_KI270333v1', 'chrUn_KI270335v1', 'chrUn_KI270338v1', 'chrUn_KI270340v1', 'chrUn_KI270336v1', 'chrUn_KI270337v1', 'chrUn_KI270363v1', 'chrUn_KI270364v1', 'chrUn_KI270362v1', 'chrUn_KI270366v1', 'chrUn_KI270378v1', 'chrUn_KI270379v1', 'chrUn_KI270389v1', 'chrUn_KI270390v1', 'chrUn_KI270387v1', 'chrUn_KI270395v1', 'chrUn_KI270396v1', 'chrUn_KI270388v1', 'chrUn_KI270394v1', 'chrUn_KI270386v1', 'chrUn_KI270391v1', 'chrUn_KI270383v1', 'chrUn_KI270393v1', 'chrUn_KI270384v1', 'chrUn_KI270392v1', 'chrUn_KI270381v1', 'chrUn_KI270385v1', 'chrUn_KI270382v1', 'chrUn_KI270376v1', 'chrUn_KI270374v1', 'chrUn_KI270372v1', 'chrUn_KI270373v1', 'chrUn_KI270375v1', 'chrUn_KI270371v1', 'chrUn_KI270448v1', 'chrUn_KI270521v1', 'chrUn_GL000195v1', 'chrUn_GL000219v1', 'chrUn_GL000220v1', 'chrUn_GL000224v1', 'chrUn_KI270741v1', 'chrUn_GL000226v1', 'chrUn_GL000213v1', 'chrUn_KI270743v1', 'chrUn_KI270744v1', 'chrUn_KI270745v1', 'chrUn_KI270746v1', 'chrUn_KI270747v1', 'chrUn_KI270748v1', 'chrUn_KI270749v1', 'chrUn_KI270750v1', 'chrUn_KI270751v1', 'chrUn_KI270752v1', 'chrUn_KI270753v1', 'chrUn_KI270754v1', 'chrUn_KI270755v1', 'chrUn_KI270756v1', 'chrUn_KI270757v1', 'chrUn_GL000214v1', 'chrUn_KI270742v1', 'chrUn_GL000216v2', 'chrUn_GL000218v1', 'chrEBV']' returned non-zero exit status 127.\r\nTraceback (most recent call last):\r\n  File \"/home/georgia/tools/bcbio/anaconda/bin/bcbio_nextgen.py\", line 228, in <module>\r\n    install.upgrade_bcbio(kwargs[\"args\"])\r\n  File \"/home/georgia/tools/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 107, in upgrade_bcbio\r\n    upgrade_bcbio_data(args, REMOTES)\r\n  File \"/home/georgia/tools/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 359, in upgrade_bcbio_data\r\n    args.cores, [\"ggd\", \"s3\", \"raw\"])\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 354, in install_data_local\r\n    _prep_genomes(env, genomes, genome_indexes, ready_approaches, data_filedir)\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 495, in _prep_genomes\r\n    .format(idx, gid, last_exc))\r\nOSError: Could not prepare index star for hg38 by any method\r\nTraceback (most recent call last):\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 480, in _prep_genomes\r\n    retrieve_fn(env, manager, gid, idx)\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 519, in _prep_raw_index\r\n    get_index_fn(idx)(env, ref_file)\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 445, in decorator\r\n    return func(*args, **kwargs)\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 746, in _index_star\r\n    ref_file = prepare_simple_reference(ref_file, simple_file)\r\n  File \"/home/georgia/tools/bcbio/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 1053, in prepare_simple_reference\r\n    subprocess.check_call(cmd, stdout=out_handle)\r\n  File \"/home/georgia/tools/bcbio/anaconda/lib/python3.6/subprocess.py\", line 311, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['samtools', 'faidx', '/home/georgia/tools/bcbio/genomes/Hsapiens/hg38/seq/hg38.fa', 'chr1', 'chr2', 'chr3', 'chr4', 'chr5', 'chr6', 'chr7', 'chr8', 'chr9', 'chr10', 'chr11', 'chr12', 'chr13', 'chr14', 'chr15', 'chr16', 'chr17', 'chr18', 'chr19', 'chr20', 'chr21', 'chr22', 'chrX', 'chrY', 'chrM', 'chr1_KI270706v1_random', 'chr1_KI270707v1_random', 'chr1_KI270708v1_random', 'chr1_KI270709v1_random', 'chr1_KI270710v1_random', 'chr1_KI270711v1_random', 'chr1_KI270712v1_random', 'chr1_KI270713v1_random', 'chr1_KI270714v1_random', 'chr2_KI270715v1_random', 'chr2_KI270716v1_random', 'chr3_GL000221v1_random', 'chr4_GL000008v2_random', 'chr5_GL000208v1_random', 'chr9_KI270717v1_random', 'chr9_KI270718v1_random', 'chr9_KI270719v1_random', 'chr9_KI270720v1_random', 'chr11_KI270721v1_random', 'chr14_GL000009v2_random', 'chr14_GL000225v1_random', 'chr14_KI270722v1_random', 'chr14_GL000194v1_random', 'chr14_KI270723v1_random', 'chr14_KI270724v1_random', 'chr14_KI270725v1_random', 'chr14_KI270726v1_random', 'chr15_KI270727v1_random', 'chr16_KI270728v1_random', 'chr17_GL000205v2_random', 'chr17_KI270729v1_random', 'chr17_KI270730v1_random', 'chr22_KI270731v1_random', 'chr22_KI270732v1_random', 'chr22_KI270733v1_random', 'chr22_KI270734v1_random', 'chr22_KI270735v1_random', 'chr22_KI270736v1_random', 'chr22_KI270737v1_random', 'chr22_KI270738v1_random', 'chr22_KI270739v1_random', 'chrY_KI270740v1_random', 'chrUn_KI270302v1', 'chrUn_KI270304v1', 'chrUn_KI270303v1', 'chrUn_KI270305v1', 'chrUn_KI270322v1', 'chrUn_KI270320v1', 'chrUn_KI270310v1', 'chrUn_KI270316v1', 'chrUn_KI270315v1', 'chrUn_KI270312v1', 'chrUn_KI270311v1', 'chrUn_KI270317v1', 'chrUn_KI270412v1', 'chrUn_KI270411v1', 'chrUn_KI270414v1', 'chrUn_KI270419v1', 'chrUn_KI270418v1', 'chrUn_KI270420v1', 'chrUn_KI270424v1', 'chrUn_KI270417v1', 'chrUn_KI270422v1', 'chrUn_KI270423v1', 'chrUn_KI270425v1', 'chrUn_KI270429v1', 'chrUn_KI270442v1', 'chrUn_KI270466v1', 'chrUn_KI270465v1', 'chrUn_KI270467v1', 'chrUn_KI270435v1', 'chrUn_KI270438v1', 'chrUn_KI270468v1', 'chrUn_KI270510v1', 'chrUn_KI270509v1', 'chrUn_KI270518v1', 'chrUn_KI270508v1', 'chrUn_KI270516v1', 'chrUn_KI270512v1', 'chrUn_KI270519v1', 'chrUn_KI270522v1', 'chrUn_KI270511v1', 'chrUn_KI270515v1', 'chrUn_KI270507v1', 'chrUn_KI270517v1', 'chrUn_KI270529v1', 'chrUn_KI270528v1', 'chrUn_KI270530v1', 'chrUn_KI270539v1', 'chrUn_KI270538v1', 'chrUn_KI270544v1', 'chrUn_KI270548v1', 'chrUn_KI270583v1', 'chrUn_KI270587v1', 'chrUn_KI270580v1', 'chrUn_KI270581v1', 'chrUn_KI270579v1', 'chrUn_KI270589v1', 'chrUn_KI270590v1', 'chrUn_KI270584v1', 'chrUn_KI270582v1', 'chrUn_KI270588v1', 'chrUn_KI270593v1', 'chrUn_KI270591v1', 'chrUn_KI270330v1', 'chrUn_KI270329v1', 'chrUn_KI270334v1', 'chrUn_KI270333v1', 'chrUn_KI270335v1', 'chrUn_KI270338v1', 'chrUn_KI270340v1', 'chrUn_KI270336v1', 'chrUn_KI270337v1', 'chrUn_KI270363v1', 'chrUn_KI270364v1', 'chrUn_KI270362v1', 'chrUn_KI270366v1', 'chrUn_KI270378v1', 'chrUn_KI270379v1', 'chrUn_KI270389v1', 'chrUn_KI270390v1', 'chrUn_KI270387v1', 'chrUn_KI270395v1', 'chrUn_KI270396v1', 'chrUn_KI270388v1', 'chrUn_KI270394v1', 'chrUn_KI270386v1', 'chrUn_KI270391v1', 'chrUn_KI270383v1', 'chrUn_KI270393v1', 'chrUn_KI270384v1', 'chrUn_KI270392v1', 'chrUn_KI270381v1', 'chrUn_KI270385v1', 'chrUn_KI270382v1', 'chrUn_KI270376v1', 'chrUn_KI270374v1', 'chrUn_KI270372v1', 'chrUn_KI270373v1', 'chrUn_KI270375v1', 'chrUn_KI270371v1', 'chrUn_KI270448v1', 'chrUn_KI270521v1', 'chrUn_GL000195v1', 'chrUn_GL000219v1', 'chrUn_GL000220v1', 'chrUn_GL000224v1', 'chrUn_KI270741v1', 'chrUn_GL000226v1', 'chrUn_GL000213v1', 'chrUn_KI270743v1', 'chrUn_KI270744v1', 'chrUn_KI270745v1', 'chrUn_KI270746v1', 'chrUn_KI270747v1', 'chrUn_KI270748v1', 'chrUn_KI270749v1', 'chrUn_KI270750v1', 'chrUn_KI270751v1', 'chrUn_KI270752v1', 'chrUn_KI270753v1', 'chrUn_KI270754v1', 'chrUn_KI270755v1', 'chrUn_KI270756v1', 'chrUn_KI270757v1', 'chrUn_GL000214v1', 'chrUn_KI270742v1', 'chrUn_GL000216v2', 'chrUn_GL000218v1', 'chrEBV']' returned non-zero exit status 127.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3320/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3258", "id": 635154066, "node_id": "MDU6SXNzdWU2MzUxNTQwNjY=", "number": 3258, "title": "OSError: b'/work/strelka2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz' if not valid bcf or vcf", "user": {"login": "wenhuanling", "id": 52434854, "node_id": "MDQ6VXNlcjUyNDM0ODU0", "avatar_url": "https://avatars.githubusercontent.com/u/52434854?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wenhuanling", "html_url": "https://github.com/wenhuanling", "followers_url": "https://api.github.com/users/wenhuanling/followers", "following_url": "https://api.github.com/users/wenhuanling/following{/other_user}", "gists_url": "https://api.github.com/users/wenhuanling/gists{/gist_id}", "starred_url": "https://api.github.com/users/wenhuanling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wenhuanling/subscriptions", "organizations_url": "https://api.github.com/users/wenhuanling/orgs", "repos_url": "https://api.github.com/users/wenhuanling/repos", "events_url": "https://api.github.com/users/wenhuanling/events{/privacy}", "received_events_url": "https://api.github.com/users/wenhuanling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-09T06:39:25Z", "updated_at": "2020-06-12T00:58:36Z", "closed_at": "2020-06-12T00:58:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Bcbio team, \r\n\r\nI encountered this particular error, which I cannot understand what is going. According to the debug log file, the error is caused due to the step: Filter Strelka2 calls with allele fraction threshold of 0.1.\r\n\r\nPlease advise on this particular error. Is it due to some error in that particular region? Or is it because there are some hidden errors with Strelka2? Sorry about the format of posting, as it is my first time doing so.\r\n\r\n**Version info**\r\n - bcbio version: 1.2.0\r\n - Linux version 5.3.0-1019-aws\r\n\r\n**To Reproduce**\r\nCommand generated by bcbio:\r\n`unset JAVA_HOME && export PATH=/usr/local/share/bcbio/anaconda/bin:\"$PATH\" && gatk --java-options '-Xms681m -Xmx1363m -XX:+UseSerialGC -Djava.io.tmpdir=/mnt/volume1/HG38_information/work_      folder/B003/work/bcbiotx/tmphggx3hst' Mutect2 --annotation ClippingRankSumTest --annotation DepthPerSampleHC --reference /usr/local/share/bcbio/genomes/Hsapiens/hg38/seq/hg38.fa --annotation MappingQualityRa      nkSumTest --annotation MappingQualityZero --annotation QualByDepth --annotation ReadPosRankSumTest --annotation RMSMappingQuality --annotation FisherStrand --annotation MappingQuality --annotation DepthPerAl      leleBySample --annotation Coverage --read-validation-stringency LENIENT -I /mnt/volume1/HG38_information/work_folder/B003/work/align/WHT385/WHT385-sort.bam --tumor-sample WHT385 -I /mnt/volume1/HG38_informat      ion/work_folder/B003/work/align/WHT160/WHT160-sort.bam --normal-sample WHT160 -L /mnt/volume1/HG38_information/work_folder/B003/work/mutect2/chr3/batch6-chr3_45568726_80876695-regions.bed --interval-set-rule       INTERSECTION -O /mnt/volume1/HG38_information/work_folder/B003/work/mutect2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz && sed -i 's/callable\\t0.0/callable\\t10.0/' /mnt/volume1/HG38_information/work_folde      r/B003/work/mutect2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz.stats && unset JAVA_HOME && export PATH=/usr/local/share/bcbio/anaconda/bin:\"$PATH\" && gatk --java-options '-Xms681m -Xmx1363m -XX:+UseSerial      GC -Djava.io.tmpdir=/mnt/volume1/HG38_information/work_folder/B003/work/bcbiotx/tmphggx3hst' FilterMutectCalls --reference /usr/local/share/bcbio/genomes/Hsapiens/hg38/seq/hg38.fa --variant /mnt/volume1/HG38      _information/work_folder/B003/work/mutect2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz --output /mnt/volume1/HG38_information/work_folder/B003/work/bcbiotx/tmphggx3hst/batch6-chr3_45568726_80876695-raw-fil      t.vcf.gz`\r\n\r\n**Observed behavior**\r\nCommand error:\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\r\n      result = (True, func(*args, **kwds))\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/_parallel_backends.py\", line 608, in __call__\r\n      return self.func(*args, **kwargs)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 256, in __call__\r\n      for func, args, kwargs in self.items]\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 256, in <listcomp>\r\n      for func, args, kwargs in self.items]\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/utils.py\", line 55, in wrapper\r\n      return f(*args, **kwargs)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multitasks.py\", line 315, in variantcall_sample\r\n      return genotype.variantcall_sample(*args)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/variation/genotype.py\", line 377, in variantcall_sample\r\n      out_file = caller_fn(align_bams, items, ref_file, assoc_files, region, out_file)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/variation/strelka2.py\", line 34, in run\r\n      return _af_annotate_and_filter(paired, items, call_file, out_file)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/variation/strelka2.py\", line 243, in _af_annotate_and_filter\r\n      vcf = cyvcf2.VCF(in_file)\r\n    File \"cyvcf2/cyvcf2.pyx\", line 197, in cyvcf2.cyvcf2.VCF.__init__\r\n  OSError: b'/mnt/volume1/HG38_information/work_folder/B003/work/strelka2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz' if not valid bcf or vcf\r\n  \"\"\"\r\n\r\n  The above exception was the direct cause of the following exception:\r\n\r\n  Traceback (most recent call last):\r\n    File \"/usr/local/share/bcbio/anaconda/bin/bcbio_nextgen.py\", line 245, in <module>\r\n      main(**kwargs)\r\n    File \"/usr/local/share/bcbio/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n      run_main(**kwargs)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 50, in run_main\r\n      fc_dir, run_info_yaml)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 91, in _run_toplevel\r\n      for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 154, in variant2pipeline\r\n      samples = genotype.parallel_variantcall_region(samples, run_parallel)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/variation/genotype.py\", line 208, in parallel_variantcall_region\r\n      \"vrn_file\", [\"region\", \"sam_ref\", \"config\"]))\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/split.py\", line 35, in grouped_parallel_split_combine\r\n      final_output = parallel_fn(parallel_name, split_args)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 28, in run_parallel\r\n      return run_multicore(fn, items, config, parallel=parallel)\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 86, in run_multicore\r\n      for data in joblib.Parallel(parallel[\"num_jobs\"], batch_size=1, backend=\"multiprocessing\")(joblib.delayed(fn)(*x) for x in items):\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 1017, in __call__\r\n      self.retrieve()\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 909, in retrieve\r\n      self._output.extend(job.get(timeout=self.timeout))\r\n    File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/pool.py\", line 644, in get\r\n      raise self._value\r\n  OSError: b'/mnt/volume1/HG38_information/work_folder/B003/work/strelka2/chr3/batch6-chr3_45568726_80876695-raw.vcf.gz' if not valid bcf or vcf\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3255", "id": 632248605, "node_id": "MDU6SXNzdWU2MzIyNDg2MDU=", "number": 3255, "title": "Error while addign --aligner bbmap", "user": {"login": "kokyriakidis", "id": 33731293, "node_id": "MDQ6VXNlcjMzNzMxMjkz", "avatar_url": "https://avatars.githubusercontent.com/u/33731293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kokyriakidis", "html_url": "https://github.com/kokyriakidis", "followers_url": "https://api.github.com/users/kokyriakidis/followers", "following_url": "https://api.github.com/users/kokyriakidis/following{/other_user}", "gists_url": "https://api.github.com/users/kokyriakidis/gists{/gist_id}", "starred_url": "https://api.github.com/users/kokyriakidis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kokyriakidis/subscriptions", "organizations_url": "https://api.github.com/users/kokyriakidis/orgs", "repos_url": "https://api.github.com/users/kokyriakidis/repos", "events_url": "https://api.github.com/users/kokyriakidis/events{/privacy}", "received_events_url": "https://api.github.com/users/kokyriakidis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-06-06T06:33:42Z", "updated_at": "2020-06-06T17:56:26Z", "closed_at": "2020-06-06T17:25:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get the following memory error when trying to add bbmap aligner in the latest bcbio version\r\n\r\n```\r\nMoving on to next genome prep method after trying ggd\r\nGGD recipe not available for hg19 bbmap\r\nDownloading genome from s3: hg19 bbmap\r\nMoving on to next genome prep method after trying s3\r\nNo pre-computed indices for hg19 bbmap\r\nPreparing genome hg19 with index bbmap\r\njava -ea -Xmx3g -Xms1g -cp /RED/BCBIO/RESOURCES/bcbio/anaconda/opt/bbmap-38.84-0/current/ align2.BBMap build=1 overwrite=true fastareadlen=500 -Xms1g -Xmx3g path=bbmap ref=/RED/BCBIO/RESOURCES/bcbio/genomes/Hsapiens/hg19/seq/hg19.fa\r\nExecuting align2.BBMap [build=1, overwrite=true, fastareadlen=500, -Xms1g, -Xmx3g, path=bbmap, ref=/RED/BCBIO/RESOURCES/bcbio/genomes/Hsapiens/hg19/seq/hg19.fa]\r\nVersion 38.84\r\n\r\nNo output file.\r\nWriting reference.\r\nExecuting dna.FastaToChromArrays2 [/RED/BCBIO/RESOURCES/bcbio/genomes/Hsapiens/hg19/seq/hg19.fa, 1, writeinthread=false, genscaffoldinfo=true, retain, waitforwriting=false, gz=true, maxlen=536670912, writechroms=true, minscaf=1, midpad=300, startpad=8000, stoppad=8000, nodisk=false]\r\n\r\nSet genScaffoldInfo=true\r\nWriting chunk 1\r\nWriting chunk 2\r\nWriting chunk 3\r\nWriting chunk 4\r\njava.lang.OutOfMemoryError: Java heap space\r\n\tat shared.KillSwitch.allocByte1D(KillSwitch.java:225)\r\n\tat dna.ChromosomeArray.resize(ChromosomeArray.java:321)\r\n\tat dna.ChromosomeArray.set(ChromosomeArray.java:174)\r\n\tat dna.ChromosomeArray.set(ChromosomeArray.java:165)\r\n\tat dna.FastaToChromArrays2.makeNextChrom(FastaToChromArrays2.java:476)\r\n\tat dna.FastaToChromArrays2.makeChroms(FastaToChromArrays2.java:344)\r\n\tat dna.FastaToChromArrays2.main2(FastaToChromArrays2.java:152)\r\n\tat align2.RefToIndex.makeIndex(RefToIndex.java:147)\r\n\tat align2.BBMap.setup(BBMap.java:280)\r\n\tat align2.AbstractMapper.<init>(AbstractMapper.java:57)\r\n\tat align2.BBMap.<init>(BBMap.java:42)\r\n\tat align2.BBMap.main(BBMap.java:30)\r\n\r\nThis program ran out of memory.\r\nTry increasing the -Xmx flag and using tool-specific memory-related parameters.\r\nMoving on to next genome prep method after trying raw\r\nCommand 'bbmap.sh -Xms1g -Xmx3g path=bbmap ref=/RED/BCBIO/RESOURCES/bcbio/genomes/Hsapiens/hg19/seq/hg19.fa' returned non-zero exit status 1.\r\nTraceback (most recent call last):\r\n  File \"/RED/BCBIO/TOOLS/bin/bcbio_nextgen.py\", line 228, in <module>\r\n    install.upgrade_bcbio(kwargs[\"args\"])\r\n  File \"/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 107, in upgrade_bcbio\r\n    upgrade_bcbio_data(args, REMOTES)\r\n  File \"/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 359, in upgrade_bcbio_data\r\n    args.cores, [\"ggd\", \"s3\", \"raw\"])\r\n  File \"/home/kokyriakidis/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 354, in install_data_local\r\n    _prep_genomes(env, genomes, genome_indexes, ready_approaches, data_filedir)\r\n  File \"/home/kokyriakidis/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 495, in _prep_genomes\r\n    .format(idx, gid, last_exc))\r\nOSError: Could not prepare index bbmap for hg19 by any method\r\nTraceback (most recent call last):\r\n  File \"/home/kokyriakidis/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 480, in _prep_genomes\r\n    retrieve_fn(env, manager, gid, idx)\r\n  File \"/home/kokyriakidis/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 519, in _prep_raw_index\r\n    get_index_fn(idx)(env, ref_file)\r\n  File \"/home/kokyriakidis/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 678, in _index_bbmap\r\n    (cores, 3 * int(cores), dir_name, ref_file), shell=True)\r\n  File \"/RED/BCBIO/RESOURCES/bcbio/anaconda/lib/python3.6/subprocess.py\", line 311, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command 'bbmap.sh -Xms1g -Xmx3g path=bbmap ref=/RED/BCBIO/RESOURCES/bcbio/genomes/Hsapiens/hg19/seq/hg19.fa' returned non-zero exit status 1.\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3255/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3245", "id": 626066003, "node_id": "MDExOlB1bGxSZXF1ZXN0NDI0MTM3Njk3", "number": 3245, "title": "Update Python to version 3.7 in the installer", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-27T22:06:57Z", "updated_at": "2020-05-28T01:08:17Z", "closed_at": "2020-05-28T01:04:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/pulls/3245", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3245", "diff_url": "https://github.com/bcbio/bcbio-nextgen/pull/3245.diff", "patch_url": "https://github.com/bcbio/bcbio-nextgen/pull/3245.patch", "merged_at": "2020-05-28T01:04:22Z"}, "body": "Fix #3240 ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3245/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3234", "id": 623779662, "node_id": "MDU6SXNzdWU2MjM3Nzk2NjI=", "number": 3234, "title": "Installation failed - mamba not found", "user": {"login": "eyalbenda", "id": 10514913, "node_id": "MDQ6VXNlcjEwNTE0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/10514913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eyalbenda", "html_url": "https://github.com/eyalbenda", "followers_url": "https://api.github.com/users/eyalbenda/followers", "following_url": "https://api.github.com/users/eyalbenda/following{/other_user}", "gists_url": "https://api.github.com/users/eyalbenda/gists{/gist_id}", "starred_url": "https://api.github.com/users/eyalbenda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eyalbenda/subscriptions", "organizations_url": "https://api.github.com/users/eyalbenda/orgs", "repos_url": "https://api.github.com/users/eyalbenda/repos", "events_url": "https://api.github.com/users/eyalbenda/events{/privacy}", "received_events_url": "https://api.github.com/users/eyalbenda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-05-24T02:28:31Z", "updated_at": "2020-12-11T19:03:35Z", "closed_at": "2020-12-11T19:03:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "My installation fails on two separate clusters, due to the mamba binary not found (trying the path in the error indeed doesn't find mamba).\r\nI'm attaching output and error logs.\r\n\r\n \r\n\r\n\r\n**Version info**\r\n - bcbio version (bcbio_nextgen.py --version):\r\n - OS name and version: CentOS 6.6 and 6.10\r\n\r\n**To Reproduce**\r\n - Exact bcbio command you have used: python bcbio_nextgen_install.py.1 --cores 20 --nodata --isolate --distribution centos -u development ~/bcbio_nextgen --tooldir ~/bcbio_nextgen/tools\r\n\r\n**Observed behavior**\r\n[log_output.txt](https://github.com/bcbio/bcbio-nextgen/files/4672863/log_output.txt)\r\n[log_error.txt](https://github.com/bcbio/bcbio-nextgen/files/4672864/log_error.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3234/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3230", "id": 622378597, "node_id": "MDU6SXNzdWU2MjIzNzg1OTc=", "number": 3230, "title": "Running PureCN through bcbio", "user": {"login": "waemm", "id": 71687, "node_id": "MDQ6VXNlcjcxNjg3", "avatar_url": "https://avatars.githubusercontent.com/u/71687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waemm", "html_url": "https://github.com/waemm", "followers_url": "https://api.github.com/users/waemm/followers", "following_url": "https://api.github.com/users/waemm/following{/other_user}", "gists_url": "https://api.github.com/users/waemm/gists{/gist_id}", "starred_url": "https://api.github.com/users/waemm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waemm/subscriptions", "organizations_url": "https://api.github.com/users/waemm/orgs", "repos_url": "https://api.github.com/users/waemm/repos", "events_url": "https://api.github.com/users/waemm/events{/privacy}", "received_events_url": "https://api.github.com/users/waemm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509696, "node_id": "MDU6TGFiZWwyNzUwOTY5Ng==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-05-21T09:38:57Z", "updated_at": "2021-09-17T23:01:05Z", "closed_at": "2021-09-17T23:01:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys,\r\n\r\nI've been trying to run purecn through the bcbio workflow, there is very little documentation on how this works or whether I can provide mapping bias or panel of normal data. Some questions I had:\r\n\r\n1. From looking at the script it looks like a mapping bias RDS is included but how? Is this automatically calculated or do you provide it through the YAML? Any further detail here would be great!\r\n\r\n2. Also, does this run as tumor-only or tumor-normal or can it do both? \r\n\r\n3. Have there been any comparisons of samples run with this workflow to the standard PureCN workflow ?\r\n\r\nThanks!", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3209", "id": 610290994, "node_id": "MDU6SXNzdWU2MTAyOTA5OTQ=", "number": 3209, "title": "Error running bcbio_nextgen.py version sub-command", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-30T18:22:46Z", "updated_at": "2020-05-27T15:25:12Z", "closed_at": "2020-05-27T15:25:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Version info**\r\n - bcbio version (bcbio_nextgen.py --version): 1.2.3\r\n - OS name and version: 18.04.4 LTS\r\n\r\n**To Reproduce**\r\n - Exact bcbio command you have used: `bcbio_nextgen.py version`\r\n - Your sample configuration file: N/A\r\n\r\n**Observed behavior**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/vagrant/local/share/bcbio/anaconda/bin/bcbio_nextgen.py\", line 234, in <module>\r\n    programs.write_versions({\"work\": kwargs[\"args\"].workdir})\r\n  File \"/home/vagrant/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/provenance/programs.py\", line 244, in write_versions\r\n    for p in _get_versions(config):\r\n  File \"/home/vagrant/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/provenance/programs.py\", line 167, in _get_versions\r\n    \"version\": _get_cl_version(p, config)})\r\n  File \"/home/vagrant/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/provenance/programs.py\", line 120, in _get_cl_version\r\n    prog = config_utils.get_program(p[\"cmd\"], config)\r\n  File \"/home/vagrant/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/config_utils.py\", line 179, in get_program\r\n    config = config.get(\"config\", config)\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n```\r\n\r\n**Expected behavior**\r\nNo error and return version info?\r\n\r\n**Log files**\r\nN/A\r\n\r\n**Additional context**\r\nEither need to fix this or remove the `version` sub-command since it appears to be redundant with `bcbio_nextgen.py --version`\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3173", "id": 595928701, "node_id": "MDExOlB1bGxSZXF1ZXN0NDAwMzE3NTkz", "number": 3173, "title": "Enable running CWL tests in Vagrant and cleanup CWL tests", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-07T14:51:30Z", "updated_at": "2020-04-07T19:18:02Z", "closed_at": "2020-04-07T15:27:52Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/pulls/3173", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3173", "diff_url": "https://github.com/bcbio/bcbio-nextgen/pull/3173.diff", "patch_url": "https://github.com/bcbio/bcbio-nextgen/pull/3173.patch", "merged_at": "2020-04-07T15:27:52Z"}, "body": "Close #3148 ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3173/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3149", "id": 588094156, "node_id": "MDU6SXNzdWU1ODgwOTQxNTY=", "number": 3149, "title": "Error when installing bcbio_nextgen v1.2.0", "user": {"login": "gis-nlsim", "id": 52656209, "node_id": "MDQ6VXNlcjUyNjU2MjA5", "avatar_url": "https://avatars.githubusercontent.com/u/52656209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gis-nlsim", "html_url": "https://github.com/gis-nlsim", "followers_url": "https://api.github.com/users/gis-nlsim/followers", "following_url": "https://api.github.com/users/gis-nlsim/following{/other_user}", "gists_url": "https://api.github.com/users/gis-nlsim/gists{/gist_id}", "starred_url": "https://api.github.com/users/gis-nlsim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gis-nlsim/subscriptions", "organizations_url": "https://api.github.com/users/gis-nlsim/orgs", "repos_url": "https://api.github.com/users/gis-nlsim/repos", "events_url": "https://api.github.com/users/gis-nlsim/events{/privacy}", "received_events_url": "https://api.github.com/users/gis-nlsim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-26T01:41:37Z", "updated_at": "2020-03-31T16:51:34Z", "closed_at": "2020-03-31T16:51:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[bcbio.install.error.txt](https://github.com/bcbio/bcbio-nextgen/files/4384557/bcbio.install.error.txt)\r\n\r\nGreetings, \r\nI'm encountering this error when trying to install bcbio. This happens on 2 different servers:\r\n\r\n2020-03-26 09:30:07 (656 KB/s) - \u201crequirements-conda.txt\u201d saved [20/20]\r\n\r\nTraceback (most recent call last):\r\n  File \"./bcbio_nextgen_install.py\", line 301, in <module>\r\n    main(parser.parse_args(), sys.argv[1:])\r\n  File \"./bcbio_nextgen_install.py\", line 41, in main\r\n    bcbio = install_conda_pkgs(anaconda, args)\r\n  File \"./bcbio_nextgen_install.py\", line 117, in install_conda_pkgs\r\n    channels = _get_conda_channels(conda_bin)\r\n  File \"./bcbio_nextgen_install.py\", line 83, in _get_conda_channels\r\n    config = yaml.safe_load(subprocess.check_output([conda_bin, \"config\", \"--show\"]))\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/__init__.py\", line 162, in safe_load\r\n    return load(stream, SafeLoader)\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/__init__.py\", line 114, in load\r\n    return loader.get_single_data()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/constructor.py\", line 41, in get_single_data\r\n    node = self.get_single_node()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/composer.py\", line 36, in get_single_node\r\n    document = self.compose_document()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/composer.py\", line 58, in compose_document\r\n    self.get_event()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/parser.py\", line 118, in get_event\r\n    self.current_event = self.state()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/parser.py\", line 193, in parse_document_end\r\n    token = self.peek_token()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/scanner.py\", line 129, in peek_token\r\n    self.fetch_more_tokens()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/scanner.py\", line 223, in fetch_more_tokens\r\n    return self.fetch_value()\r\n  File \"/mnt/projects/simngl/wgs/tools/anaconda3/lib/python3.7/site-packages/yaml/scanner.py\", line 579, in fetch_value\r\n    self.get_mark())\r\nyaml.scanner.ScannerError: mapping values are not allowed here\r\n  in \"<byte string>\", line 19, column 15:\r\n            GitHub:  https://github.com/QuantStack ... \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3148", "id": 587784168, "node_id": "MDU6SXNzdWU1ODc3ODQxNjg=", "number": 3148, "title": "CalledProcessError in test_4_cwl_rnaseq", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-25T15:31:54Z", "updated_at": "2020-04-07T15:27:52Z", "closed_at": "2020-04-07T15:27:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Version info**\r\n - bcbio version (bcbio_nextgen.py --version): 1.2.0 (a0db761)\r\n - OS name and version: Ubuntu Bionic\r\n\r\n**To Reproduce**\r\n - Exact bcbio command you have used: `py.test -p no:cacheprovider -p no:stepwise tests/bcbio_vm -v -s -m cwl_docker_rnaseq`\r\n - Your sample configuration file: N/A\r\n\r\n**Observed behavior**\r\n```\r\n=================================== FAILURES ===================================\r\n__________________________ TestCWL.test_4_cwl_rnaseq ___________________________\r\n\r\nself = <test_docker.TestCWL object at 0x7f34f77cfa50>, install_test_files = None\r\ndata_dir = '/home/travis/build/bcbio/bcbio-nextgen/tests/data/automated'\r\n\r\n    @pytest.mark.cwl\r\n    @pytest.mark.cwl_docker_rnaseq\r\n    def test_4_cwl_rnaseq(self, install_test_files, data_dir):\r\n        \"\"\"CWL: run a RNA-seq workflow using Docker.\r\n        \"\"\"\r\n        with install_cwl_test_files(data_dir) as workdir:\r\n            with utils.chdir(os.path.join(workdir, \"rnaseq\")):\r\n                cl = [\"bash\", \"./run_generate_cwl.sh\"]\r\n                if os.path.exists(\"cromwell_work\"):\r\n                    shutil.rmtree(\"cromwell_work\")\r\n                cl = [\"bcbio_vm.py\", \"cwlrun\", \"cromwell\", \"rnaseq-workflow\"]\r\n>               subprocess.check_call(cl)\r\n\r\ntests/bcbio_vm/test_docker.py:99: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\npopenargs = (['bcbio_vm.py', 'cwlrun', 'cromwell', 'rnaseq-workflow'],)\r\nkwargs = {}, retcode = 1\r\ncmd = ['bcbio_vm.py', 'cwlrun', 'cromwell', 'rnaseq-workflow']\r\n\r\n    def check_call(*popenargs, **kwargs):\r\n        \"\"\"Run command with arguments.  Wait for command to complete.  If\r\n        the exit code was zero then return, otherwise raise\r\n        CalledProcessError.  The CalledProcessError object will have the\r\n        return code in the returncode attribute.\r\n    \r\n        The arguments are the same as for the call function.  Example:\r\n    \r\n        check_call([\"ls\", \"-l\"])\r\n        \"\"\"\r\n        retcode = call(*popenargs, **kwargs)\r\n        if retcode:\r\n            cmd = kwargs.get(\"args\")\r\n            if cmd is None:\r\n                cmd = popenargs[0]\r\n>           raise CalledProcessError(retcode, cmd)\r\nE           subprocess.CalledProcessError: Command '['bcbio_vm.py', 'cwlrun', 'cromwell', 'rnaseq-workflow']' returned non-zero exit status 1.\r\n\r\n../../../install/bcbio-vm/anaconda/lib/python3.7/subprocess.py:363: CalledProcessError\r\n```\r\n\r\n**Expected behavior**\r\nNo error\r\n\r\n**Log files**\r\nhttps://travis-ci.org/github/bcbio/bcbio-nextgen/jobs/666050606\r\n\r\n**Additional context**\r\nIn Vagrant:\r\n```\r\ncd tests/data/test_bcbio_cwl-master/rnaseq\r\nbcbio_vm.py cwlrun cromwell rnaseq-workflow\r\n```\r\nRelevant output:\r\n```\r\n[2020-03-25 11:34:00,92] [info] WorkflowManagerActor Workflow 638ba748-3d9d-4e32-a5d5-98233d140eac failed (during ExecutingWorkflowState): cromwell.backend.standard.StandardAsyncExecutionActor$$anon$2: Failed to evaluate job outputs:\r\nBad output 'prepare_sample.prep_rec': No output binding is defined. Are you expecting the output to be inferred from a cwl.output.json file ? If so please make sure the file was effectively created.\r\n\r\nWorkflow 638ba748-3d9d-4e32-a5d5-98233d140eac transitioned to state Failed\r\nFailed bcbio Cromwell run\r\n-------------------------\r\nFailure in step: prepare_sample.0\r\n  bcbio log file     : cromwell_work/cromwell-executions/main-rnaseq.cwl/638ba748-3d9d-4e32-a5d5-98233d140eac/call-prepare_sample/shard-0/execution/log/bcbio-nextgen-debug.log\r\n  bcbio commands file: cromwell_work/cromwell-executions/main-rnaseq.cwl/638ba748-3d9d-4e32-a5d5-98233d140eac/call-prepare_sample/shard-0/execution/log/bcbio-nextgen-commands.log\r\n  Cromwell directory : cromwell_work/cromwell-executions/main-rnaseq.cwl/638ba748-3d9d-4e32-a5d5-98233d140eac/call-prepare_sample/shard-0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3147", "id": 587480362, "node_id": "MDU6SXNzdWU1ODc0ODAzNjI=", "number": 3147, "title": "Running bcbio on PBSPro cluster ", "user": {"login": "jmiezitis", "id": 2838701, "node_id": "MDQ6VXNlcjI4Mzg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2838701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmiezitis", "html_url": "https://github.com/jmiezitis", "followers_url": "https://api.github.com/users/jmiezitis/followers", "following_url": "https://api.github.com/users/jmiezitis/following{/other_user}", "gists_url": "https://api.github.com/users/jmiezitis/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmiezitis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmiezitis/subscriptions", "organizations_url": "https://api.github.com/users/jmiezitis/orgs", "repos_url": "https://api.github.com/users/jmiezitis/repos", "events_url": "https://api.github.com/users/jmiezitis/events{/privacy}", "received_events_url": "https://api.github.com/users/jmiezitis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 33, "created_at": "2020-03-25T06:48:59Z", "updated_at": "2021-02-11T15:29:56Z", "closed_at": "2021-02-10T04:03:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Note I know nothing about how bcbio is run and works.  I am an HPC systems engineer trying determine why bcbio is not running on multiple nodes in our cluster.  The test data and config files have been provided to me by our researchers.\r\n\r\n**Version info**\r\n\r\n- bcbio version (bcbio_nextgen.py --version): 1.1.9a\r\n- OS name and version: CentOS Linux release 7.7.1908\r\n- HPC Cluster PBSPro 19.1.3\r\n\r\n**To Reproduce**\r\n - bcbio_nextgen.py ../config/test-gatk.yaml -t ipython -n 140 -s pbspro -q workq\r\n - Your sample configuration file: attached\r\n[test-gatk.yaml.txt](https://github.com/bcbio/bcbio-nextgen/files/4379427/test-gatk.yaml.txt)\r\n\r\n**Expected behavior & Observed behavior**\r\nGiven the line in the debug logs:\r\n\r\n_Configuring 5 jobs to run, using 28 cores each with 112.1g of memory reserved for each job_\r\n\r\nI expected 5 qsub jobs requesting 28 cores or one job requesting 5 nodes with 28 cores each. What I get is one job for the controller using one cpu another job for an engine with one cpu and one more engine with 28 cpus.  This doesn't change throughout the run.\r\n\r\n**Log files**\r\n[bcbio-nextgen.log](https://github.com/bcbio/bcbio-nextgen/files/4379409/bcbio-nextgen.log)\r\n[bcbio-nextgen.log.gz](https://github.com/bcbio/bcbio-nextgen/files/4379414/bcbio-nextgen.log.gz)\r\n[bcbio-nextgen-debug.log.gz](https://github.com/bcbio/bcbio-nextgen/files/4379415/bcbio-nextgen-debug.log.gz)\r\n[bcbio-nextgen-commands.log.gz](https://github.com/bcbio/bcbio-nextgen/files/4379417/bcbio-nextgen-commands.log.gz)\r\n\r\n**Comments**\r\nNote that /scratch is a CephFS system shared between all nodes.", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3147/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3102", "id": 567857681, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc3NDA0OTI2", "number": 3102, "title": "Clean up plink_to_vcf.py and make it Python 3 compatible", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-19T21:26:38Z", "updated_at": "2020-02-21T14:46:00Z", "closed_at": "2020-02-21T14:18:01Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/pulls/3102", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3102", "diff_url": "https://github.com/bcbio/bcbio-nextgen/pull/3102.diff", "patch_url": "https://github.com/bcbio/bcbio-nextgen/pull/3102.patch", "merged_at": "2020-02-21T14:18:01Z"}, "body": "See also #3101", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3102/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3101", "id": 567826800, "node_id": "MDU6SXNzdWU1Njc4MjY4MDA=", "number": 3101, "title": "Missing bx-python package", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-19T20:29:10Z", "updated_at": "2020-02-21T16:48:45Z", "closed_at": "2020-02-21T16:48:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "bcbio v1.2.0\r\n\r\n[bx-python](https://github.com/bxlab/bx-python) is required by [plink_to_vcf.py](https://github.com/bcbio/bcbio-nextgen/blob/v1.2.0/scripts/utils/plink_to_vcf.py#L26). However:\r\n```\r\nvagrant@bcbio:/vagrant/bcbio-nextgen$ python\r\nPython 3.6.7 | packaged by conda-forge | (default, Feb 28 2019, 09:07:38)\r\n[GCC 7.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from bx.seq import twobit\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'bx'\r\n```\r\n\r\nbx-python should be included during bcbio installation\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3090", "id": 564131960, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDE3MTk2", "number": 3090, "title": "Fix automated analysis integration test", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-12T16:52:56Z", "updated_at": "2020-02-14T19:15:07Z", "closed_at": "2020-02-14T18:53:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/pulls/3090", "html_url": "https://github.com/bcbio/bcbio-nextgen/pull/3090", "diff_url": "https://github.com/bcbio/bcbio-nextgen/pull/3090.diff", "patch_url": "https://github.com/bcbio/bcbio-nextgen/pull/3090.patch", "merged_at": "2020-02-14T18:53:33Z"}, "body": "Fix #3088", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3090/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3088", "id": 563296938, "node_id": "MDU6SXNzdWU1NjMyOTY5Mzg=", "number": 3088, "title": "Setting BCBIO_WORKDIR env var causes test errors", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-11T15:46:49Z", "updated_at": "2020-02-15T03:03:41Z", "closed_at": "2020-02-14T18:53:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Bcbio v1.2.0\r\n\r\n### Steps to reproduce\r\n```shell\r\nexport BCBIO_WORKDIR=/tmp/bcbio/test_automated_output\r\ncd /vagrant/bcbio-nextgen/tests\r\n~/local/share/bcbio/anaconda/bin/pytest integration/test_automated_analysis.py::test_5_bam\r\n```\r\n\r\n### Observed results\r\n```\r\nValueError: Did not find input file ../data/100326_FC6107FAAXX/7_100326_FC6107FAAXX.bam in ['/tmp/test_automated_output', None, '/tmp/test_automated_output']\r\n\r\nValueError: Configuration problem. BED file not found for coverage: ../data/automated/coverage_transcripts-bam.bed\r\n```\r\n\r\n### Expected results\r\nSpecified work directory is used. Test passes with no errors.\r\n\r\n### Notes\r\n* [BCBIO_WORKDIR](https://github.com/bcbio/bcbio-nextgen/blob/v1.2.0/tests/conftest.py#L33)\r\n* This should fix #3084 \r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3084", "id": 562611212, "node_id": "MDU6SXNzdWU1NjI2MTEyMTI=", "number": 3084, "title": "Error running test_5_bam in Vagrant VM", "user": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hackdna", "id": 452575, "node_id": "MDQ6VXNlcjQ1MjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/452575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hackdna", "html_url": "https://github.com/hackdna", "followers_url": "https://api.github.com/users/hackdna/followers", "following_url": "https://api.github.com/users/hackdna/following{/other_user}", "gists_url": "https://api.github.com/users/hackdna/gists{/gist_id}", "starred_url": "https://api.github.com/users/hackdna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hackdna/subscriptions", "organizations_url": "https://api.github.com/users/hackdna/orgs", "repos_url": "https://api.github.com/users/hackdna/repos", "events_url": "https://api.github.com/users/hackdna/events{/privacy}", "received_events_url": "https://api.github.com/users/hackdna/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-10T14:49:02Z", "updated_at": "2020-02-15T20:51:02Z", "closed_at": "2020-02-15T20:51:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Bcbio v1.2.0\r\n\r\n### Steps to reproduce\r\n[Install bcbio in Vagrant VM](https://github.com/bcbio/bcbio-nextgen/blob/master/scripts/vm/osx/vagrant_osx.sh) then\r\n```shell\r\ncd /vagrant/bcbio-nextgen\r\n~/local/share/bcbio/anaconda/bin/pytest tests/integration/test_automated_analysis.py::test_5_bam\r\n```\r\n\r\n### Expected results\r\nTest passes\r\n\r\n### Observed results\r\nTest fails: [log](https://gist.github.com/hackdna/46bae2bd018f8095b3097fa2c8555ea3)\r\n\r\n### Notes\r\nPotentially related issues:\r\n* https://github.com/ning/compress/issues/44\r\n* https://issues.apache.org/jira/browse/SPARK-18546\r\n* https://github.com/broadinstitute/gatk/issues/3605\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3063", "id": 552207529, "node_id": "MDU6SXNzdWU1NTIyMDc1Mjk=", "number": 3063, "title": "bcbio fails when testing with large numbers of (small) samples", "user": {"login": "amizeranschi", "id": 11562164, "node_id": "MDQ6VXNlcjExNTYyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/11562164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amizeranschi", "html_url": "https://github.com/amizeranschi", "followers_url": "https://api.github.com/users/amizeranschi/followers", "following_url": "https://api.github.com/users/amizeranschi/following{/other_user}", "gists_url": "https://api.github.com/users/amizeranschi/gists{/gist_id}", "starred_url": "https://api.github.com/users/amizeranschi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amizeranschi/subscriptions", "organizations_url": "https://api.github.com/users/amizeranschi/orgs", "repos_url": "https://api.github.com/users/amizeranschi/repos", "events_url": "https://api.github.com/users/amizeranschi/events{/privacy}", "received_events_url": "https://api.github.com/users/amizeranschi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-01-20T10:26:29Z", "updated_at": "2020-01-23T14:42:39Z", "closed_at": "2020-01-23T14:42:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\n\r\n\r\nI'm having some trouble getting bcbio to run with a large number of samples. My input data consists of very small FASTQ files containing only a few reads extracted from each of the 1000Genomes samples (2535 samples in total). My aim is to test if bcbio can cope with such a large number of samples at once without running into system limits due to e.g. too many open files or too many arguments etc.\r\n\r\nI'm running the analysis on an SGE cluster using ipython parallel. The nodes have 32 cores and around 128 GB of memory each.\r\n\r\nI've specified my resources as such:\r\n\r\n\r\n```\r\n---\r\ndetails:\r\n  - analysis: variant2\r\n    genome_build: hg38\r\n    resources:\r\n      default:\r\n        memory: 3G\r\n        cores: 16\r\n        jvm_opts: [\"-Xms800m\", \"-Xmx3000m\"]\r\n      gatk-haplotype:\r\n        options: [\"--verbosity ERROR\"]\r\n      gatk:\r\n        options: [\"--verbosity ERROR\"]\r\n      picard:\r\n        options: [\"VERBOSITY=ERROR\"]\r\n    algorithm:\r\n      aligner: bwa\r\n      mark_duplicates: true\r\n      recalibrate: false\r\n      realign: false\r\n      effects: false\r\n      tools_off: [gemini, contamination, peddy, vqsr]\r\n      tools_on: qualimap_full\r\n      variantcaller: gatk-haplotype\r\n      jointcaller: gatk-haplotype-joint\r\n      ploidy: 2\r\n      variant_regions: ../config/variant_regions.bed\r\n```\r\n\r\nHowever, it looks like the `jvm_opts` setting is not accounted for when running HaplotypeCaller. Instead, `-Xmx1g` seems to be hardcoded into the `--java-options` setting for gatk (see below). This results in memory issues (`Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space`).\r\n\r\n@chapmanb why are the gatk java memory settings ending up like this? \r\n\r\nThe full errors that I'm getting are listed below:\r\n\r\n```\r\nUsing GATK jar /export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/share/gatk4-4.1.4.1-1/gatk-package-4.1.4.1-local.jar\r\nRunning:\r\n    java -Dsamjdk.use_async_io_read_samtools=false -Dsamjdk.use_async_io_write_samtools=true -Dsamjdk.use_async_io_write_tribble=false -Dsamjdk.compression_level=2 -Xms681m -Xmx1g -XX:+UseSerialGC -Djava.io.tmpdir=/export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/bcbiotx/tmp6esj9s4r -jar /export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/share/gatk4-4.1.4.1-1/gatk-package-4.1.4.1-local.jar HaplotypeCaller -R /export/home/ncit/external/a.mizeranschi/bcbio_nextgen/genomes/Hsapiens/hg38/seq/hg38.fa --annotation MappingQualityRankSumTest --annotation MappingQualityZero --annotation QualByDepth --annotation ReadPosRankSumTest --annotation RMSMappingQuality --annotation BaseQualityRankSumTest --annotation FisherStrand --annotation MappingQuality --annotation DepthPerAlleleBySample --annotation Coverage -I /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/align/HG01518/HG01518-sort.bam -L /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/gatk-haplotype/chr1/HG01518-chr1_0_50142832-regions.bed --interval-set-rule INTERSECTION --annotation ClippingRankSumTest --annotation DepthPerSampleHC --native-pair-hmm-threads 1 --verbosity ERROR --emit-ref-confidence GVCF -GQB 10 -GQB 20 -GQB 30 -GQB 40 -GQB 60 -GQB 80 -ploidy 2 --output /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/bcbiotx/tmp6esj9s4r/HG01518-chr1_0_50142832.vcf.gz\r\n' returned non-zero exit status 1.\r\n[2020-01-20T08:09Z] haswell-wn35.grid.pub.ro: Unexpected error\r\nTraceback (most recent call last):\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 54, in _setup_logging\r\n    yield config\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 439, in variantcall_sample\r\n    return ipython.zip_args(apply(genotype.variantcall_sample, *args))\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 82, in apply\r\n    return object(*args, **kwargs)\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/variation/genotype.py\", line 377, in variantcall_sample\r\n    out_file = caller_fn(align_bams, items, ref_file, assoc_files, region, out_file)\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/variation/gatk.py\", line 180, in haplotype_caller\r\n    parallel_gc=_use_spark(num_cores, gatk_type, items, spark_opts))\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/broad/__init__.py\", line 365, in run_gatk\r\n    log_error=log_error)\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 26, in run\r\n    _do_run(cmd, checks, log_stdout, env=env)\r\n  File \"/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 106, in _do_run\r\n    raise subprocess.CalledProcessError(exitcode, error_msg)\r\nsubprocess.CalledProcessError: Command 'set -o pipefail; unset JAVA_HOME && export PATH=/export/home/ncit/external/a.mizeranschi/bcbio_nextgen/anaconda/bin:\"$PATH\" && gatk --java-options '-Xms681m -Xmx1g -XX:+UseSerialGC -Djava.io.tmpdir=/export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/bcbiotx/tmp6esj9s4r' HaplotypeCaller -R /export/home/ncit/external/a.mizeranschi/bcbio_nextgen/genomes/Hsapiens/hg38/seq/hg38.fa --annotation MappingQualityRankSumTest --annotation MappingQualityZero --annotation QualByDepth --annotation ReadPosRankSumTest --annotation RMSMappingQuality --annotation BaseQualityRankSumTest --annotation FisherStrand --annotation MappingQuality --annotation DepthPerAlleleBySample --annotation Coverage -I /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/align/HG01518/HG01518-sort.bam -L /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/gatk-haplotype/chr1/HG01518-chr1_0_50142832-regions.bed --interval-set-rule INTERSECTION --annotation ClippingRankSumTest --annotation DepthPerSampleHC --native-pair-hmm-threads 1 --verbosity ERROR --emit-ref-confidence GVCF -GQB 10 -GQB 20 -GQB 30 -GQB 40 -GQB 60 -GQB 80 -ploidy 2 --output /export/home/ncit/external/a.mizeranschi/automated-VC-test/testingVC/work/bcbiotx/tmp6esj9s4r/HG01518-chr1_0_50142832.vcf.gz\r\n[January 20, 2020 10:09:19 AM EET] org.broadinstitute.hellbender.tools.walkers.haplotypecaller.HaplotypeCaller done. Elapsed time: 1.44 minutes.\r\nRuntime.totalMemory()=1037959168\r\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\r\n\tat org.apache.commons.math3.util.MathArrays.copyOfRange(MathArrays.java:827)\r\n\tat org.apache.commons.math3.stat.descriptive.rank.Percentile.copyOf(Percentile.java:479)\r\n\tat org.apache.commons.math3.stat.descriptive.rank.Percentile.removeAndSlice(Percentile.java:527)\r\n\tat org.apache.commons.math3.stat.descriptive.rank.Percentile.getWorkArray(Percentile.java:455)\r\n\tat org.apache.commons.math3.stat.descriptive.rank.Percentile.evaluate(Percentile.java:351)\r\n\tat org.apache.commons.math3.stat.descriptive.rank.Percentile.evaluate(Percentile.java:302)\r\n\tat org.apache.commons.math3.stat.descriptive.AbstractUnivariateStatistic.evaluate(AbstractUnivariateStatistic.java:121)\r\n\tat org.broadinstitute.hellbender.utils.MathUtils.median(MathUtils.java:839)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.GVCFBlock.getMedianDP(GVCFBlock.java:75)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.HomRefBlock.createHomRefGenotype(HomRefBlock.java:73)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.GVCFBlock.toVariantContext(GVCFBlock.java:49)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.GVCFBlockCombiner.emitCurrentBlock(GVCFBlockCombiner.java:177)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.GVCFBlockCombiner.signalEndOfInput(GVCFBlockCombiner.java:227)\r\n\tat org.broadinstitute.hellbender.utils.variant.writers.GVCFWriter.close(GVCFWriter.java:70)\r\n\tat org.broadinstitute.hellbender.tools.walkers.haplotypecaller.HaplotypeCaller.closeTool(HaplotypeCaller.java:246)\r\n\tat org.broadinstitute.hellbender.engine.GATKTool.doWork(GATKTool.java:1052)\r\n\tat org.broadinstitute.hellbender.cmdline.CommandLineProgram.runTool(CommandLineProgram.java:139)\r\n\tat org.broadinstitute.hellbender.cmdline.CommandLineProgram.instanceMainPostParseArgs(CommandLineProgram.java:191)\r\n\tat org.broadinstitute.hellbender.cmdline.CommandLineProgram.instanceMain(CommandLineProgram.java:210)\r\n\tat org.broadinstitute.hellbender.Main.runCommandLineProgram(Main.java:163)\r\n\tat org.broadinstitute.hellbender.Main.mainEntry(Main.java:206)\r\n\tat org.broadinstitute.hellbender.Main.main(Main.java:292)\r\n\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3031", "id": 531557690, "node_id": "MDU6SXNzdWU1MzE1NTc2OTA=", "number": 3031, "title": "Did not find reference indices for aligner bismark in genome", "user": {"login": "HyunjunNam", "id": 56126961, "node_id": "MDQ6VXNlcjU2MTI2OTYx", "avatar_url": "https://avatars.githubusercontent.com/u/56126961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HyunjunNam", "html_url": "https://github.com/HyunjunNam", "followers_url": "https://api.github.com/users/HyunjunNam/followers", "following_url": "https://api.github.com/users/HyunjunNam/following{/other_user}", "gists_url": "https://api.github.com/users/HyunjunNam/gists{/gist_id}", "starred_url": "https://api.github.com/users/HyunjunNam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HyunjunNam/subscriptions", "organizations_url": "https://api.github.com/users/HyunjunNam/orgs", "repos_url": "https://api.github.com/users/HyunjunNam/repos", "events_url": "https://api.github.com/users/HyunjunNam/events{/privacy}", "received_events_url": "https://api.github.com/users/HyunjunNam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-02T21:42:52Z", "updated_at": "2019-12-08T02:38:55Z", "closed_at": "2019-12-08T02:38:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was testing bcbio to run bismark for BS-seq analysis, but I got the error below,\r\n\r\n`ValueError: Did not find reference indices for aligner bismark in genome: {'fasta': {'base': '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/seq/GRCh37.fa'}, 'fastagz': {'base': '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/seq/GRCh37.fa.gz', 'indexes': ['/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/seq/GRCh37.fa.gz.fai', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/seq/GRCh37.fa.gz.gzi', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/seq/GRCh37.dict']}, 'bismark': {}, 'rtg': {'base': '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/mainIndex', 'indexes': ['/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/sequenceIndex0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqdata1', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqdata0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqpointer2', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqpointer0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/progress', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqpointer3', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/summary.txt', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/suffixpointer0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/namepointer0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/suffixdata0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/namedata0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqdata2', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/reference.txt', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/nameIndex0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqpointer1', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/seqdata3', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/done', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/suffixIndex0', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/rtg/GRCh37.sdf/format.log']}, 'genome_context': ['/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/ENCODE/wgEncodeDacMapabilityConsensusExcludable.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/bad_promoter.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc15.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc15to20.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc20to25.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc25to30.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc65to70.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc70to75.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc75to80.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc80to85.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/gc85.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/heng_um75-hs37d5.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/low_complexity_51to200bp.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/low_complexity_gt200bp.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/GA4GH/self_chain.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/repeats/LCR.bed.gz', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/coverage/problem_regions/repeats/polyx.bed.gz'], 'viral': ['/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.dict', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.amb', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.ann', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.bwt', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.fai', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.pac', '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/viral/gdc-viral.fa.sa'], 'versions': '/isilon/prod2/bcbio/genomes/Hsapiens/GRCh37/versions.csv'}`\r\n\r\nAs you can see here, indice for bismark is empty. Is there any way to download or generate it?\r\n\r\nAnd currently it looks like bcbio can run bismark only based on the pair-end read, not single end. Is it correct?\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3031/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3024", "id": 527911041, "node_id": "MDU6SXNzdWU1Mjc5MTEwNDE=", "number": 3024, "title": "Peddy not running for runs using 'jointcaller'", "user": {"login": "matthdsm", "id": 11850640, "node_id": "MDQ6VXNlcjExODUwNjQw", "avatar_url": "https://avatars.githubusercontent.com/u/11850640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthdsm", "html_url": "https://github.com/matthdsm", "followers_url": "https://api.github.com/users/matthdsm/followers", "following_url": "https://api.github.com/users/matthdsm/following{/other_user}", "gists_url": "https://api.github.com/users/matthdsm/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthdsm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthdsm/subscriptions", "organizations_url": "https://api.github.com/users/matthdsm/orgs", "repos_url": "https://api.github.com/users/matthdsm/repos", "events_url": "https://api.github.com/users/matthdsm/events{/privacy}", "received_events_url": "https://api.github.com/users/matthdsm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2019-11-25T07:50:28Z", "updated_at": "2020-01-22T17:45:34Z", "closed_at": "2020-01-22T17:30:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi,\r\n\r\nWe're looking into leaning a bit more on Peddy for QC of our trio analysis. However, I noticed bcbio does not take the defined trio's into account and uses a single sample vcf instead of the joint called vcf.\r\n\r\nPoint in case: (bcbio-nextgen-commands.log)\r\n```\r\n[2019-11-20T11:34Z] /home/galaxy/bcbio/tools/bin/peddy -p 5 --sites hg38 --plot --prefix /tmp/bcbio/tmp0bup6pya/Proband_19_06349 /home/projects/bcbio_annotation/exomes/MISC/issues_1119/samples_issues1119-merged/work/gatk-haplotype/D1906123.vcf.gz /home/projects/bcbio_annotation/exomes/MISC/issues_1119/samples_issues1119-merged/work/gatk-haplotype/D1906123.ped 2> /tmp/bcbio/tmp0bup6pya/run-stderr.log\r\n```\r\n\r\nWhere `Proband_19_06349` (the prefix) is the trio name.\r\nSince peddy is kind of useless for single samples, I don't really think this makes much sense. \r\nHowever, I do think this is just a matter of selecting the right files for the job. The vcf's are sourced from the `gatk-haplotype` dir, so the files in the `joint` dir are completely neglected.\r\n\r\nSince bcbio already has systems in place to gather all the resulting vcf's in the `gemini` dir for annotation (regardless of variant calling strategy), I'd suggest sourcing the vcf's for peddy there.\r\nThe same applies for the ped files, since those are already generated for `vcf2db`.\r\n\r\n**TL;DR**\r\nPeddy should get its vcf inputs from the `gemini` dir instead of the `gatk-haplotype` dir, since the execution breaks when using joint calling.\r\n\r\nCheers\r\nM", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3010", "id": 522366204, "node_id": "MDU6SXNzdWU1MjIzNjYyMDQ=", "number": 3010, "title": "Report EBV in QC", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-13T17:27:22Z", "updated_at": "2019-12-09T05:11:20Z", "closed_at": "2019-12-09T05:11:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello!\r\n\r\nSome users want to report EBV reads when doing QC in somatic variant calling.\r\n\r\nBcbio allows to detect viral sequences in the sample by mapping reads unmapped to the genome to the viral reference /bcbio/biodata/genomes/Hsapiens/hg38/viral/gdc-viral.fa.\r\n\r\nCurrently https://github.com/chapmanb/cloudbiolinux/blob/master/ggd-recipes/hg38/viral.yaml\r\ndoes not have EBV, probably, because hg38 decoy already has EBV, so adding EBV to gdc-viral.fa does not make any sense, as we are mapping unmapped reads (and EBV reads were mapped to hg38 decoy).\r\n\r\nSo, adding EBV to gdc-viral.fa won't help to report it. There is mapping statistics in \r\nproject/work/coverage/sample/counts/fullgenome-sample-counts.txt | grep EBV.\r\n\r\nWe just need to report EBV it in /final/sample/qc/viral.\r\n\r\nSN", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/3000", "id": 516199082, "node_id": "MDU6SXNzdWU1MTYxOTkwODI=", "number": 3000, "title": "picard syntax changed", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-01T15:56:58Z", "updated_at": "2019-11-05T21:36:02Z", "closed_at": "2019-11-05T21:36:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nIt looks like we need to adjust our wrapper for new picard syntax.\r\n\r\n```\r\n Uncaught exception occurred\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/path/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 26, in run\r\n    _do_run(cmd, checks, log_stdout, env=env)\r\n\r\n  File \"/path/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 106, in _do_run\r\n    raise subprocess.CalledProcessError(exitcode, error_msg)\r\n\r\nsubprocess.CalledProcessError: Command 'set -o pipefail; unset JAVA_HOME && export PATH=/path/anaconda/bin:\"$PAT\r\n\r\nINFO    2019-10-18 21:14:01     ReorderSam\r\n\r\n********** NOTE: Picard's command line syntax is changing.\r\n\r\n**********\r\n\r\n********** For more information, please see:\r\n\r\n********** https://github.com/broadinstitute/picard/wiki/Command-Line-Syntax-Transition-For-Users-(Pre-Transition)\r\n\r\n**********\r\n\r\n********** The command line looks like this in the new syntax:\r\n\r\n**********\r\n\r\n**********    ReorderSam -INPUT /path/bam/sample-ready.bam -OUTPUT /path\r\n\r\n********** The command line looks like this in the new syntax:\r\n\r\n**********\r\n\r\n**********    ReorderSam -INPUT /path/bam/sample.bam -OUTPUT /path\r\n\r\n**********\r\n\r\nERROR: Unrecognized option: REFERENCE\r\n\r\nUSAGE: ReorderSam [options]\r\n\r\nDocumentation: http://broadinstitute.github.io/picard/command-line-overview.html#ReorderSam\r\n\r\nNot to be confused with SortSam which sorts a SAM or BAM file with a valid sequence dictionary, ReorderSam reorders\r\n\r\nreads in a SAM/BAM file to match the contig ordering in a provided reference file, as determined by exact name matching\r\n\r\nof contigs.  Reads mapped to contigs absent in the new reference are unmapped. Runs substantially faster if the input is\r\n\r\nan indexed BAM file.\r\n\r\nExample\r\n\r\njava -jar picard.jar ReorderSam \\\r\n\r\nINPUT=sample.bam \\\r\n\r\nOUTPUT=reordered.bam \\\r\n\r\nSEQUENCE_DICTIONARY=reference_with_different_order.dict\r\n\r\nVersion: 2.21.1-SNAPSHOT\r\n\r\nOptions:\r\n\r\n--help\r\n\r\n-h                            Displays options specific to this tool.\r\n\r\n--stdhelp\r\n\r\n-H                            Displays options specific to this tool AND options common to all Picard command line\r\n\r\n                              tools.\r\n\r\n--version                     Displays program version.\r\n\r\nINPUT=File\r\n\r\nI=File                        Input file (SAM or BAM) to extract reads from.  Required.\r\n\r\nOUTPUT=File\r\n\r\nO=File                        Output file (SAM or BAM) to write extracted reads to.  Required.\r\n\r\nSEQUENCE_DICTIONARY=File\r\n\r\nSD=File                       A Sequence Dictionary for the OUTPUT file (can be read from one of the following file\r\n\r\n                              types (SAM, BAM, VCF, BCF, Interval List, Fasta, or Dict)  Required.\r\n\r\nALLOW_INCOMPLETE_DICT_CONCORDANCE=Boolean\r\n\r\nS=Boolean                     If true, allows only a partial overlap of the original contigs with the new reference\r\n\r\n                              sequence contigs.  By default, this tool requires a corresponding contig in the new\r\n\r\n                              reference for each read contig  Default value: false. This option can be set to 'null' to\r\n\r\n                              clear the default value. Possible values: {true, false}\r\n\r\nALLOW_CONTIG_LENGTH_DISCORDANCE=Boolean\r\n\r\nU=Boolean                     If true, then permits mapping from a read contig to a new reference contig with the same\r\n\r\n                              name but a different length.  Highly dangerous, only use if you know what you are doing.\r\n\r\n                              Default value: false. This option can be set to 'null' to clear the default value.\r\n\r\n                              Possible values: {true, false}\r\n\r\nTMP_DIR=File                  One or more directories with space available to be used by this program for temporary\r\n\r\n                              storage of working files  Default value: null. This option may be specified 0 or more\r\n\r\n                              times.\r\n\r\nVERBOSITY=LogLevel            Control verbosity of logging.  Default value: INFO. This option can be set to 'null' to\r\n\r\n                              clear the default value. Possible values: {ERROR, WARNING, INFO, DEBUG}\r\n\r\nQUIET=Boolean                 Whether to suppress job-summary info on System.err.  Default value: false. This option can\r\n\r\n                              be set to 'null' to clear the default value. Possible values: {true, false}\r\n\r\nVALIDATION_STRINGENCY=ValidationStringency\r\n\r\n                              Validation stringency for all SAM files read by this program.  Setting stringency to\r\n\r\n                              SILENT can improve performance when processing a BAM file in which variable-length data\r\n\r\n                              (read, qualities, tags) do not otherwise need to be decoded.  Default value: STRICT. This\r\n\r\n                              option can be set to 'null' to clear the default value. Possible values: {STRICT, LENIENT,\r\n\r\n                              SILENT}\r\n\r\nCOMPRESSION_LEVEL=Integer     Compression level for all compressed files created (e.g. BAM and VCF).  Default value: 5.\r\n\r\n                              This option can be set to 'null' to clear the default value.\r\n\r\nMAX_RECORDS_IN_RAM=Integer    When writing files that need to be sorted, this will specify the number of records stored\r\n\r\n                              in RAM before spilling to disk. Increasing this number reduces the number of file handles\r\n\r\n                              needed to sort the file, and increases the amount of RAM needed.  Default value: 500000.\r\n\r\n                              This option can be set to 'null' to clear the default value.\r\n\r\nCREATE_INDEX=Boolean          Whether to create a BAM index when writing a coordinate-sorted BAM file.  Default value:\r\n\r\n                              false. This option can be set to 'null' to clear the default value. Possible values:\r\n\r\n                              {true, false}\r\n\r\nCREATE_MD5_FILE=Boolean       Whether to create an MD5 digest for any BAM or FASTQ files created.    Default value:\r\n\r\n                              false. This option can be set to 'null' to clear the default value. Possible values:\r\n\r\n                              {true, false}\r\n\r\nREFERENCE_SEQUENCE=File\r\n\r\nR=File                        Reference sequence file.  Default value: null.\r\n\r\nGA4GH_CLIENT_SECRETS=String   Google Genomics API client_secrets.json file path.  Default value: client_secrets.json.\r\n\r\n                              This option can be set to 'null' to clear the default value.\r\n\r\nUSE_JDK_DEFLATER=Boolean\r\n\r\nUSE_JDK_DEFLATER=Boolean      Use the JDK Deflater instead of the Intel Deflater for writing compressed output  Default\r\n\r\n                              value: false. This option can be set to 'null' to clear the default value. Possible\r\n\r\n                              values: {true, false}\r\n\r\nUSE_JDK_INFLATER=Boolean\r\n\r\nUSE_JDK_INFLATER=Boolean      Use the JDK Inflater instead of the Intel Inflater for reading compressed input  Default\r\n\r\n                              value: false. This option can be set to 'null' to clear the default value. Possible\r\n\r\n                              values: {true, false}\r\n\r\nOPTIONS_FILE=File             File of OPTION_NAME=value pairs.  No positional parameters allowed.  Unlike command-line\r\n\r\n                              options, unrecognized options are ignored.  A single-valued option set in an options file\r\n\r\n                              may be overridden by a subsequent command-line option.  A line starting with '#' is\r\n\r\n                              considered a comment.  Required.\r\n\r\n' returned non-zero exit status 1.\r\n\r\n[2019-10-18T21:14Z] seskscpn129.prim.scp: Uncaught exception occurred\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/path/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 26, in run\r\n\r\n    _do_run(cmd, checks, log_stdout, env=env)\r\n\r\n  File \"/path/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 106, in _do_run\r\n\r\n    raise subprocess.CalledProcessError(exitcode, error_msg)\r\n\r\nsubprocess.CalledProcessError: Command 'set -o pipefail; unset JAVA_HOME && export PATH=/path/anaconda/bin:\"$PAT\r\n\r\nINFO    2019-10-18 21:14:01     ReorderSam", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/3000/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2989", "id": 510840834, "node_id": "MDU6SXNzdWU1MTA4NDA4MzQ=", "number": 2989, "title": "fastqc is out of RAM", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-22T18:48:31Z", "updated_at": "2019-10-24T23:22:36Z", "closed_at": "2019-10-23T02:22:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nIn some rare cases 250m RAM is not enough for fastqc:\r\n\r\n```\r\n[2019-10-22T18:21Z] Started analysis of sort-downsample.bam\r\n[2019-10-22T18:21Z] Exception in thread \"Thread-1\" java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n[2019-10-22T18:21Z] \tat java.lang.String.toCharArray(String.java:2899)\r\n[2019-10-22T18:21Z] \tat uk.ac.babraham.FastQC.Modules.PerSequenceGCContent.truncateSequence(PerSequenceGCContent.java:222)\r\n[2019-10-22T18:21Z] \tat uk.ac.babraham.FastQC.Modules.PerSequenceGCContent.processSequence(PerSequenceGCContent.java:174)\r\n[2019-10-22T18:21Z] \tat uk.ac.babraham.FastQC.Analysis.AnalysisRunner.run(AnalysisRunner.java:88)\r\n[2019-10-22T18:21Z] \tat java.lang.Thread.run(Thread.java:748)\r\n[2019-10-22T18:21Z] Uncaught exception occurred\r\n```\r\nRunning fastqc from the command line with `-t 2` allocates 500M and works:\r\nhttps://github.com/s-andrews/FastQC/issues/24\r\n\r\nIt looks like we don't have an options to control fastqc threads or memory from bcbio.yaml.\r\nhttps://github.com/bcbio/bcbio-nextgen/blob/987656bec976fbcd7fc7c2b1cd469959a7dbc894/bcbio/qc/fastqc.py#L47\r\n\r\nAnd we need it.\r\n\r\nSN\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2989/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2923", "id": 486146884, "node_id": "MDU6SXNzdWU0ODYxNDY4ODQ=", "number": 2923, "title": "[404 error] Running GGD recipe: hg38 varpon 20181105", "user": {"login": "LimWChing", "id": 46955135, "node_id": "MDQ6VXNlcjQ2OTU1MTM1", "avatar_url": "https://avatars.githubusercontent.com/u/46955135?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LimWChing", "html_url": "https://github.com/LimWChing", "followers_url": "https://api.github.com/users/LimWChing/followers", "following_url": "https://api.github.com/users/LimWChing/following{/other_user}", "gists_url": "https://api.github.com/users/LimWChing/gists{/gist_id}", "starred_url": "https://api.github.com/users/LimWChing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LimWChing/subscriptions", "organizations_url": "https://api.github.com/users/LimWChing/orgs", "repos_url": "https://api.github.com/users/LimWChing/repos", "events_url": "https://api.github.com/users/LimWChing/events{/privacy}", "received_events_url": "https://api.github.com/users/LimWChing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-08-28T03:57:28Z", "updated_at": "2023-03-19T23:31:55Z", "closed_at": "2019-08-28T16:31:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\nI have installed bcbio through the following line, but it get terminated when it comes to the genome data. In the beginning, the error was the connection to Broad institute's server for the downloading of genome file (overloading of users), but this was resolved after a few tries. Thank you for your previous suggestion to retry! The current problem is that the hg38 varpon returns 404 error. I went to the link for the file and it is apparently unavailable https://nc.hartwigmedicalfoundation.nl/index.php/s/a8lgLsUrZI5gndd/download?path=%2FHMF-Pipeline-Resources&files=GermlineHetPon.hg38.bed.gz. Is there an alternative link to retrieve this file?\r\n\r\nThe error I received is as below.\r\n\r\n> [wanching@nscc04 wc]$ bcbio_nextgen.py upgrade --data\r\n> Upgrading bcbio\r\n> Data not installed, no genomes provided with '--genomes' flag\r\n> Upgrade completed successfully.\r\n> [wanching@nscc04 wc]$ bcbio_nextgen.py upgrade --data --genomes hg38\r\n> Upgrading bcbio\r\n> Upgrading bcbio-nextgen data files\r\n> List of genomes to get (from the config file at '{'genomes': [{'dbkey': 'hg38', 'name': 'Human (hg38) full', 'indexes': ['seq', 'twobit', 'bwa', 'hisat2'], 'annotations': ['ccds', 'capture_regions', 'coverage', 'prioritize', 'dbsnp', 'hapmap_snps', '1000g_omni_snps', 'ACMG56_genes', '1000g_snps', 'mills_indels', '1000g_indels', 'clinvar', 'qsignature', 'genesplicer', 'effects_transcripts', 'varpon', 'vcfanno', 'viral', 'transcripts', 'RADAR', 'rmsk', 'salmon-decoys', 'mirbase'], 'validation': ['giab-NA12878', 'giab-NA24385', 'giab-NA24631', 'platinum-genome-NA12878', 'giab-NA12878-remap', 'giab-NA12878-crossmap', 'dream-syn4-crossmap', 'dream-syn3-crossmap', 'giab-NA12878-NA24385-somatic', 'giab-NA24143', 'giab-NA24149']}], 'genome_indexes': ['rtg'], 'install_liftover': False, 'install_uniref': False}'): Human (hg38) full\r\n> Running GGD recipe: hg38 varpon 20181105\r\n> --2019-08-28 11:34:07--  https://nc.hartwigmedicalfoundation.nl/index.php/s/a8lgLsUrZI5gndd/download?path=%2FHMF-Pipeline-Resources&files=GermlineHetPon.hg38.bed.gz\r\n> Resolving nc.hartwigmedicalfoundation.nl (nc.hartwigmedicalfoundation.nl)... > gsort version 0.0.6\r\n> 89.255.203.115\r\n> Connecting to nc.hartwigmedicalfoundation.nl (nc.hartwigmedicalfoundation.nl)|89.255.203.115|:443... connected.\r\n> HTTP request sent, awaiting response... 404 Not Found\r\n> 2019-08-28 11:34:08 ERROR 404: Not Found.\r\n> \r\n> \r\n> gzip: stdin: unexpected end of file\r\n> 2019/08/28 11:34:08 EOF\r\n> Traceback (most recent call last):\r\n>   File \"/home/users/industry/perdana/wanching/scratch/wc/bcbio/bcbio_tooldir/bin/bcbio_nextgen.py\", line 221, in <module>\r\n>     install.upgrade_bcbio(kwargs[\"args\"])\r\n>   File \"/home/users/industry/perdana/wanching/scratch/wc/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 106, in upgrade_bcbio\r\n>     upgrade_bcbio_data(args, REMOTES)\r\n>   File \"/home/users/industry/perdana/wanching/scratch/wc/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 348, in upgrade_bcbio_data\r\n>     args.cores, [\"ggd\", \"s3\", \"raw\"])\r\n>   File \"/scratch/users/industry/perdana/wanching/wc/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 354, in install_data_local\r\n>     _prep_genomes(env, genomes, genome_indexes, ready_approaches, data_filedir)\r\n>   File \"/scratch/users/industry/perdana/wanching/wc/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 480, in _prep_genomes\r\n>     retrieve_fn(env, manager, gid, idx)\r\n>   File \"/scratch/users/industry/perdana/wanching/wc/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 856, in _install_with_ggd\r\n>     ggd.install_recipe(os.getcwd(), env.system_install, recipe_file, gid)\r\n>   File \"/scratch/users/industry/perdana/wanching/wc/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 30, in install_recipe\r\n>     recipe[\"recipe\"][\"full\"][\"recipe_type\"], system_install)\r\n>   File \"/scratch/users/industry/perdana/wanching/wc/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 62, in _run_recipe\r\n>     subprocess.check_output([\"bash\", run_file])\r\n>   File \"/home/users/industry/perdana/wanching/scratch/wc/bcbio/anaconda/lib/python3.6/subprocess.py\", line 336, in check_output\r\n>     **kwargs).stdout\r\n>   File \"/home/users/industry/perdana/wanching/scratch/wc/bcbio/anaconda/lib/python3.6/subprocess.py\", line 418, in run\r\n>     output=stdout, stderr=stderr)\r\n> subprocess.CalledProcessError: Command '['bash', '/scratch/users/industry/perdana/wanching/wc/bcbio/genomes/Hsapiens/hg38/txtmp/ggd-run.sh']' returned non-zero exit status 1.\r\n> ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2918", "id": 485157201, "node_id": "MDU6SXNzdWU0ODUxNTcyMDE=", "number": 2918, "title": "exclude_regions should also apply to copy number calling", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509694, "node_id": "MDU6TGFiZWwyNzUwOTY5NA==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-26T10:07:43Z", "updated_at": "2019-08-28T14:04:07Z", "closed_at": "2019-08-28T14:04:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As the subject says, I want to get rid of alt contigs in hg38: this happens (or should happen) when setting `altcontigs` in `exclude_regions`. \r\n\r\nIn my configuration file I have, for example\r\n\r\n```yaml\r\n- algorithm:\r\n    aligner: bwa\r\n    exclude_regions:\r\n    - altcontigs\r\n    - highdepth\r\n    - polyx\r\n```\r\n\r\nThis seems to work for variant callers, but it does *not* work for structural variants, where alt contigs are still included (and muddle up the plots). \r\n\r\nAs an example, these are some contigs found in a GATK4 CNV processed file:\r\n\r\n- chr1_KI270706v1_random\r\n- chr1_KI270711v1_random \r\n- chr4_GL000008v2_random", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2916", "id": 484999249, "node_id": "MDU6SXNzdWU0ODQ5OTkyNDk=", "number": 2916, "title": "Incomplete `programs.txt` for WGS runs", "user": {"login": "ohofmann", "id": 871172, "node_id": "MDQ6VXNlcjg3MTE3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/871172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ohofmann", "html_url": "https://github.com/ohofmann", "followers_url": "https://api.github.com/users/ohofmann/followers", "following_url": "https://api.github.com/users/ohofmann/following{/other_user}", "gists_url": "https://api.github.com/users/ohofmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ohofmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ohofmann/subscriptions", "organizations_url": "https://api.github.com/users/ohofmann/orgs", "repos_url": "https://api.github.com/users/ohofmann/repos", "events_url": "https://api.github.com/users/ohofmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ohofmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-26T01:04:46Z", "updated_at": "2019-09-04T04:18:02Z", "closed_at": "2019-09-04T04:17:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Wanted to formalize the discussion around this with an issue. With the last bcbio release I am seeing a few tools that are missing version information from `programs.txt` upon completion of the workflow:\r\n\r\n```\r\nchanjo,\r\nfeaturecounts,\r\nmutect,\r\nnovosort,\r\nrna-star,\r\nvariant-effect-predictor,\r\n```\r\n\r\nI don't think we're actively using any of these but maybe worth flagging. ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2916/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2912", "id": 484354431, "node_id": "MDU6SXNzdWU0ODQzNTQ0MzE=", "number": 2912, "title": "fastp missing in installation", "user": {"login": "gabeng", "id": 1035021, "node_id": "MDQ6VXNlcjEwMzUwMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1035021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabeng", "html_url": "https://github.com/gabeng", "followers_url": "https://api.github.com/users/gabeng/followers", "following_url": "https://api.github.com/users/gabeng/following{/other_user}", "gists_url": "https://api.github.com/users/gabeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabeng/subscriptions", "organizations_url": "https://api.github.com/users/gabeng/orgs", "repos_url": "https://api.github.com/users/gabeng/repos", "events_url": "https://api.github.com/users/gabeng/events{/privacy}", "received_events_url": "https://api.github.com/users/gabeng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-23T06:33:28Z", "updated_at": "2019-08-28T15:52:01Z", "closed_at": "2019-08-28T15:52:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I just noticed that in a clean docker install of 1.1.6a from 4 days ago using bcbio_docker (bcbio-vc) the package `fastp` was missing. I was able to manually install it with conda without any problem. Any idea how this could happen?", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2912/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2900", "id": 479960391, "node_id": "MDU6SXNzdWU0Nzk5NjAzOTE=", "number": 2900, "title": "File location resolver finds multiple locations on GCP", "user": {"login": "spearki", "id": 1217253, "node_id": "MDQ6VXNlcjEyMTcyNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1217253?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spearki", "html_url": "https://github.com/spearki", "followers_url": "https://api.github.com/users/spearki/followers", "following_url": "https://api.github.com/users/spearki/following{/other_user}", "gists_url": "https://api.github.com/users/spearki/gists{/gist_id}", "starred_url": "https://api.github.com/users/spearki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spearki/subscriptions", "organizations_url": "https://api.github.com/users/spearki/orgs", "repos_url": "https://api.github.com/users/spearki/repos", "events_url": "https://api.github.com/users/spearki/events{/privacy}", "received_events_url": "https://api.github.com/users/spearki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-13T05:02:30Z", "updated_at": "2019-08-14T11:55:20Z", "closed_at": "2019-08-13T14:17:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm following the [cloud docs](https://bcbio-nextgen.readthedocs.io/en/latest/contents/cloud.html#data-preparation) for generating CWL and running via GCP.\r\n\r\nDuring the `bcbio_vm.py cwl` step, I'm getting the following error:\r\n```kieran@bcbio:~/examples/bwa-gatk-illumina/config$ ~/install/bcbio-vm/anaconda/bin/bcbio_vm.py cwl --systemconfig bcbio-system.yaml  /home/kieran/examples/bwa-gatk-illumina/config/NA12878/config/NA12878.yaml\r\n[2019-07-29T03:50Z] INFO: Using input YAML configuration: /home/kieran/examples/bwa-gatk-illumina/config/NA12878/config/NA12878.yaml\r\n[2019-07-29T03:50Z] INFO: Checking sample YAML configuration: /home/kieran/examples/bwa-gatk-illumina/config/NA12878/config/NA12878.yaml\r\nTraceback (most recent call last):\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/bin/bcbio_vm.py\", line 354, in <module>\r\n    args.func(args)\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/cwl/main.py\", line 11, in run\r\n    world = run_info.organize(dirs, config, run_info_yaml, is_cwl=True, integrations=integrations)\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/pipeline/run_info.py\", line 82, in organize\r\n    item[\"config\"][\"algorithm\"][\"vcfanno\"] = vcfanno.find_annotations(item, remote_retriever)\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/variation/vcfanno.py\", line 123, in find_annotations\r\n    for x in retriever.add_remotes([conffn, luafn], data[\"config\"])]\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/variation/vcfanno.py\", line 123, in <listcomp>\r\n    for x in retriever.add_remotes([conffn, luafn], data[\"config\"])]\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/distributed/objectstore.py\", line 639, in is_remote\r\n    _get_storage_manager(fname)\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/distributed/objectstore.py\", line 627, in _get_storage_manager\r\n    if manager.check_resource(resource):\r\n  File \"/home/kieran/install/bcbio-vm/anaconda/lib/python3.7/site-packages/bcbio/distributed/objectstore.py\", line 356, in check_resource\r\n    if resource and resource.startswith(\"s3://\"):\r\nAttributeError: 'list' object has no attribute 'startswith'\r\n```\r\n\r\n\r\nI instrumented the bcbio code a bit and it looks like its picking up multiple files from different genomes in the reference data sets. Here's the example it originally choked on:\r\n```\r\n[2019-07-29T04:18Z] INFO: Checking sample YAML configuration: /home/kieran/examples/bwa-gatk-illumina/config/NA12878/config/NA12878.yaml\r\n['gs://bcbiodata/collections/GRCh37/validation/giab-NA12878/truth_small_variants.vcf.gz', 'gs://bcbiodata/collections/hg38/validation/giab-NA12878/truth_small_variants.vcf.gz']\r\n```\r\n\r\nI was able to work around this by copying data from just one of the datasets to another bucket and using that as the gs.ref value inside bcbio-system.yaml.\r\n\r\nIs this a bug or am I missing some config somewhere?\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2900/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2899", "id": 479814348, "node_id": "MDU6SXNzdWU0Nzk4MTQzNDg=", "number": 2899, "title": "smoove: command not found", "user": {"login": "ikeadeshina", "id": 20074316, "node_id": "MDQ6VXNlcjIwMDc0MzE2", "avatar_url": "https://avatars.githubusercontent.com/u/20074316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ikeadeshina", "html_url": "https://github.com/ikeadeshina", "followers_url": "https://api.github.com/users/ikeadeshina/followers", "following_url": "https://api.github.com/users/ikeadeshina/following{/other_user}", "gists_url": "https://api.github.com/users/ikeadeshina/gists{/gist_id}", "starred_url": "https://api.github.com/users/ikeadeshina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ikeadeshina/subscriptions", "organizations_url": "https://api.github.com/users/ikeadeshina/orgs", "repos_url": "https://api.github.com/users/ikeadeshina/repos", "events_url": "https://api.github.com/users/ikeadeshina/events{/privacy}", "received_events_url": "https://api.github.com/users/ikeadeshina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-08-12T19:35:27Z", "updated_at": "2019-08-21T14:58:52Z", "closed_at": "2019-08-21T14:58:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nMy svcaller run on one WGS sample was stopped with the same error as in the log below. In the process of debugging, I decided to run the Structural variant calling \u2013 whole genome NA12878 (50x) example pipeline provided on the bcbio website and got the error below. Is anyone familiar with this issue?\r\n\r\n[Issue_Log.txt](https://github.com/bcbio/bcbio-nextgen/files/3494027/Issue_Log.txt)\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2896", "id": 477687196, "node_id": "MDU6SXNzdWU0Nzc2ODcxOTY=", "number": 2896, "title": "Timeout at /home/jshi/local/share/bcbio/anaconda/lib/5.26.2/Net/FTP.pm line 583.", "user": {"login": "jxshi", "id": 28937112, "node_id": "MDQ6VXNlcjI4OTM3MTEy", "avatar_url": "https://avatars.githubusercontent.com/u/28937112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jxshi", "html_url": "https://github.com/jxshi", "followers_url": "https://api.github.com/users/jxshi/followers", "following_url": "https://api.github.com/users/jxshi/following{/other_user}", "gists_url": "https://api.github.com/users/jxshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jxshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jxshi/subscriptions", "organizations_url": "https://api.github.com/users/jxshi/orgs", "repos_url": "https://api.github.com/users/jxshi/repos", "events_url": "https://api.github.com/users/jxshi/events{/privacy}", "received_events_url": "https://api.github.com/users/jxshi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-08-07T03:26:11Z", "updated_at": "2019-08-11T13:26:49Z", "closed_at": "2019-08-11T13:24:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI tried to upgrade bcbio-nextgen to the latest development version by using the following command. \r\n```\r\nbcbio_nextgen.py upgrade -u development --tools --data --genomes rn6\r\n```\r\nBut it popped up an error message when install ```vep``` data. This is the error message.\r\n```\r\nList of genomes to get (from the config file at '{'genomes': [{'dbkey': 'rn6', 'name': 'Rat (rn6)', 'indexes': ['seq', 'twobit'], 'annotations': ['transcripts', 'mirbase']}], 'genome_indexes': ['bwa', 'bowtie2', 'rtg', 'twobit', 'star', 'hisat2', 'bowtie'], 'install_liftover': False, 'install_uniref': False}'): Rat (rn6)\r\n--2019-08-06 22:24:15--  http://ftp.ensembl.org/pub/release-97/variation/vep/homo_sapiens_merged_vep_97_GRCh38.tar.gz\r\nResolving ftp.ensembl.org (ftp.ensembl.org)... 193.62.193.8\r\nConnecting to ftp.ensembl.org (ftp.ensembl.org)|193.62.193.8|:80... connected.\r\nHTTP request sent, awaiting response... 416 Requested Range Not Satisfiable\r\n\r\n    The file is already fully retrieved; nothing to do.\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jshi/local/bin/bcbio_nextgen.py\", line 221, in <module>\r\n    install.upgrade_bcbio(kwargs[\"args\"])\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 106, in upgrade_bcbio\r\n    upgrade_bcbio_data(args, REMOTES)\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 352, in upgrade_bcbio_data\r\n    _upgrade_vep_data(galaxy_home, tooldir)\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 402, in _upgrade_vep_data\r\n    effects.prep_vep_cache(dbkey, ref_file, tooldir)\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/variation/effects.py\", line 117, in prep_vep_cache\r\n    do.run(\"%s && %s\" % (perl_exports, \" \".join(cmd)), \"Prepare VEP directory for %s\" % ensembl_name)\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 26, in run\r\n    _do_run(cmd, checks, log_stdout, env=env)\r\n  File \"/home/jshi/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/provenance/do.py\", line 106, in _do_run\r\n    raise subprocess.CalledProcessError(exitcode, error_msg)\r\nsubprocess.CalledProcessError: Command 'set -o pipefail; unset PERL5LIB && export PATH=/home/jshi/local/share/bcbio/anaconda/bin:\"$PATH\" && /home/jshi/local/bin/vep_install -a c -s homo_sapiens_merged_vep_97_GRCh38 -c /home/jshi/local/share/bcbio/genomes/Hsapiens/hg38/vep -u /home/jshi/local/share/bcbio/genomes/Hsapiens/hg38/vep/homo_sapiens_merged/txtmp --NO_UPDATE --VERSION 97\r\n - getting list of available cache files\r\nNB: Remember to use --merged when running the VEP with this cache!\r\n - downloading ftp://ftp.ensembl.org/pub/release-97/variation/indexed_vep_cache/homo_sapiens_merged_vep_97_GRCh38.tar.gz\r\nTimeout at /home/jshi/local/share/bcbio/anaconda/lib/5.26.2/Net/FTP.pm line 583.\r\n' returned non-zero exit status 255.\r\n```\r\n\r\nI tried to run the command separately to check if it would work. But it popped up the same error message.\r\n```\r\n /home/jshi/local/bin/vep_install -a c -s homo_sapiens_merged_vep_97_GRCh38 -c /home/jshi/local/share/bcbio/genomes/Hsapiens/hg38/vep -u /home/jshi/local/share/bcbio/genomes/Hsapiens/hg38/vep/homo_sapiens_merged/txtmp --merged --NO_UPDATE --VERSION 97\r\n```\r\nI tried for like ten times and all failed with the same error. Can you check for me please? Thank you!\r\n\r\nBest,\r\nJianxiang", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2893", "id": 474371615, "node_id": "MDU6SXNzdWU0NzQzNzE2MTU=", "number": 2893, "title": "Identical miRNA read counts versus multimapping", "user": {"login": "mxhp75", "id": 25469226, "node_id": "MDQ6VXNlcjI1NDY5MjI2", "avatar_url": "https://avatars.githubusercontent.com/u/25469226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mxhp75", "html_url": "https://github.com/mxhp75", "followers_url": "https://api.github.com/users/mxhp75/followers", "following_url": "https://api.github.com/users/mxhp75/following{/other_user}", "gists_url": "https://api.github.com/users/mxhp75/gists{/gist_id}", "starred_url": "https://api.github.com/users/mxhp75/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mxhp75/subscriptions", "organizations_url": "https://api.github.com/users/mxhp75/orgs", "repos_url": "https://api.github.com/users/mxhp75/repos", "events_url": "https://api.github.com/users/mxhp75/events{/privacy}", "received_events_url": "https://api.github.com/users/mxhp75/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lpantano", "id": 1621788, "node_id": "MDQ6VXNlcjE2MjE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1621788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpantano", "html_url": "https://github.com/lpantano", "followers_url": "https://api.github.com/users/lpantano/followers", "following_url": "https://api.github.com/users/lpantano/following{/other_user}", "gists_url": "https://api.github.com/users/lpantano/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpantano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpantano/subscriptions", "organizations_url": "https://api.github.com/users/lpantano/orgs", "repos_url": "https://api.github.com/users/lpantano/repos", "events_url": "https://api.github.com/users/lpantano/events{/privacy}", "received_events_url": "https://api.github.com/users/lpantano/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lpantano", "id": 1621788, "node_id": "MDQ6VXNlcjE2MjE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1621788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lpantano", "html_url": "https://github.com/lpantano", "followers_url": "https://api.github.com/users/lpantano/followers", "following_url": "https://api.github.com/users/lpantano/following{/other_user}", "gists_url": "https://api.github.com/users/lpantano/gists{/gist_id}", "starred_url": "https://api.github.com/users/lpantano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lpantano/subscriptions", "organizations_url": "https://api.github.com/users/lpantano/orgs", "repos_url": "https://api.github.com/users/lpantano/repos", "events_url": "https://api.github.com/users/lpantano/events{/privacy}", "received_events_url": "https://api.github.com/users/lpantano/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-30T04:53:07Z", "updated_at": "2020-05-29T05:14:29Z", "closed_at": "2020-05-29T05:14:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @lpantano \r\n\r\nI'm trying to understand a little better how the bcbio-nextgen smallRNA pipeline deals with multi-mapping sequences. I have a dataset of 96 samples, smallRNA-seq (QIAGEN), processed through the bcbio-nextgen smallRNA pipeline from fastq.gz files through to counts tables using default parameters and including trimming the adapter. For each of my 96 samples I have a number of mature miRNA (from the C19MC which have identical mature sequences) with identical counts. For example - my raw counts per million table looks something like this:\r\n`\r\n,sample1,sample2,sample3,sample...n\r\n`\r\n`\r\nhsa-miR-519b-5p,1125,1395,1728,1525\r\n`\r\n`\r\nhsa-miR-519c-5p,1125,1395,1728,1525\r\n`\r\n`\r\nhsa-miR-522-5p,1125,1395,1728,1525\r\n`\r\nI have checked the miRBase database and I can see that the mature sequence is identical for the miRNA in question and I can understand that the short reads we are talking about would easily map to all of these locations however, from reading the documentation, I though the bcbio-nextgen smallRNA pipeline would avoid counting these transcripts in multiple locations.\r\n\r\nAre you able to shed any light on this? My main concern is the inflation of the raw library size and the affect on normalisation as well as simply reporting miRNA that are not _actually there_, especially because these are amongst the highest expressed miRNA in my samples.\r\n\r\nAny support in this matter is appreciated.\r\n\r\nKind regards\r\n\r\nMelanie", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2893/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2890", "id": 473209857, "node_id": "MDU6SXNzdWU0NzMyMDk4NTc=", "number": 2890, "title": "Encoding errors with CIVIC svprioritize and IPython distributed tasks", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-07-26T07:05:24Z", "updated_at": "2020-05-29T05:33:48Z", "closed_at": "2020-05-29T05:33:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A typical error, which occurs somehow inside bedtools, is like this:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 52, in _setup_logging\r\n    yield config\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 447, in detect_sv\r\n    return ipython.zip_args(apply(structural.detect_sv, *args))\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/ipythontasks.py\", line 80, in apply\r\n    return object(*args, **kwargs)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/__init__.py\", line 205, in detect_sv\r\n    for svdata in caller_fn(items):\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 57, in run\r\n    return _cnvkit_by_type(items, background)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 67, in _cnvkit_by_type\r\n    return _run_cnvkit_single(items[0])\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 110, in _run_cnvkit_single\r\n    return _associate_cnvkit_out(ckouts, [data])\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 90, in _associate_cnvkit_out\r\n    ckout = _add_plots_to_output(ckout, data)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 640, in _add_plots_to_output\r\n    scatter = _add_scatter_plot(out, data)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/cnvkit.py\", line 710, in _add_scatter_plot\r\n    priority_bed = plot._prioritize_plot_regions(pybedtools.BedTool(priority_bed), data, os.path.dirname(out_file))\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/structural/plot.py\", line 91, in _prioritize_plot_regions\r\n    for r in region_bt:\r\n  File \"pybedtools/cbedtools.pyx\", line 754, in pybedtools.cbedtools.IntervalIterator.__next__\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/encodings/ascii.py\", line 26, in decode\r\n    return codecs.ascii_decode(input, self.errors)[0]\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 749: ordinal not in range(128)\r\n```\r\n\r\nNote that this *only* occurs when running distributed. Running local (`-t local`) even with multiprocessing, won't trigger this error. Testing this locally doesn't yield problems either. \r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2890/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2885", "id": 469760164, "node_id": "MDU6SXNzdWU0Njk3NjAxNjQ=", "number": 2885, "title": "R needs improved isolation", "user": {"login": "mjsteinbaugh", "id": 1760218, "node_id": "MDQ6VXNlcjE3NjAyMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1760218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjsteinbaugh", "html_url": "https://github.com/mjsteinbaugh", "followers_url": "https://api.github.com/users/mjsteinbaugh/followers", "following_url": "https://api.github.com/users/mjsteinbaugh/following{/other_user}", "gists_url": "https://api.github.com/users/mjsteinbaugh/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjsteinbaugh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjsteinbaugh/subscriptions", "organizations_url": "https://api.github.com/users/mjsteinbaugh/orgs", "repos_url": "https://api.github.com/users/mjsteinbaugh/repos", "events_url": "https://api.github.com/users/mjsteinbaugh/events{/privacy}", "received_events_url": "https://api.github.com/users/mjsteinbaugh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509694, "node_id": "MDU6TGFiZWwyNzUwOTY5NA==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-18T13:08:22Z", "updated_at": "2019-08-10T20:25:03Z", "closed_at": "2019-08-10T20:21:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, we're using `--no-environ` internally for some Rscript calls to isolate the R environment. This can be improved by using the `--vanilla` flag instead, which avoids potential issues with package library configuration defined in `~/.Rprofile`.\r\n\r\nHere's a search of files that we may want to patch:\r\nhttps://github.com/bcbio/bcbio-nextgen/search?q=rscript&type=Code\r\n\r\nI'm working on patching this in my development fork of bcbio.", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2885/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2874", "id": 465631159, "node_id": "MDU6SXNzdWU0NjU2MzExNTk=", "number": 2874, "title": "TitanCNA requires bioconductor-snpchip", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-07-09T08:02:01Z", "updated_at": "2019-08-23T17:32:17Z", "closed_at": "2019-08-23T17:31:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "But I don't think it's installed by default. ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2857", "id": 458049366, "node_id": "MDU6SXNzdWU0NTgwNDkzNjY=", "number": 2857, "title": "PureCN.R: no such file or directory", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-06-19T14:30:51Z", "updated_at": "2020-03-21T16:14:35Z", "closed_at": "2020-03-21T16:14:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Note, this is probably an issue in the PureCN bioconda package rather than bcbio itself.\r\n\r\nPureCN is invoked with\r\n\r\n```\r\nexport R_LIBS_USER=/opt/bcbio/anaconda/lib/R/library && unset R_HOME && unset R_LIBS && export PATH=/opt/bcbio/anaconda/bin:\"$PATH\" && PureCN.R\r\n```\r\n\r\nExcept there is no such command in the PATH. It looks like it's not even symlinked in the package (it's in `./library/PureCN/extdata/PureCN.R`) , and lacks a shebang.", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2857/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2844", "id": 451983310, "node_id": "MDU6SXNzdWU0NTE5ODMzMTA=", "number": 2844, "title": "Chr22 missing in esp.vcf.gz of build hg38", "user": {"login": "mmoisse", "id": 7941646, "node_id": "MDQ6VXNlcjc5NDE2NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/7941646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmoisse", "html_url": "https://github.com/mmoisse", "followers_url": "https://api.github.com/users/mmoisse/followers", "following_url": "https://api.github.com/users/mmoisse/following{/other_user}", "gists_url": "https://api.github.com/users/mmoisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmoisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmoisse/subscriptions", "organizations_url": "https://api.github.com/users/mmoisse/orgs", "repos_url": "https://api.github.com/users/mmoisse/repos", "events_url": "https://api.github.com/users/mmoisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mmoisse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-06-04T13:01:55Z", "updated_at": "2019-08-10T13:24:52Z", "closed_at": "2019-08-10T13:24:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It seems that chr22 is missing from the esp.vcf.gz file in build hg38 but not in build hg19\r\n\r\n    bcftools view /software/local/share/bcbio/genomes/Hsapiens/hg38/variation/esp.vcf.gz chr22 | grep -v '#' | wc -l\r\n    # 0\r\n    bcftools view /software/local/share/bcbio/genomes/Hsapiens/hg19/variation/esp.vcf.gz chr22 | grep -v '#' | wc -l\r\n    # 48315", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2836", "id": 448268995, "node_id": "MDU6SXNzdWU0NDgyNjg5OTU=", "number": 2836, "title": "Using DP to extract somatic AF in strelka2.py might be wrong", "user": {"login": "abenjak", "id": 37447134, "node_id": "MDQ6VXNlcjM3NDQ3MTM0", "avatar_url": "https://avatars.githubusercontent.com/u/37447134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abenjak", "html_url": "https://github.com/abenjak", "followers_url": "https://api.github.com/users/abenjak/followers", "following_url": "https://api.github.com/users/abenjak/following{/other_user}", "gists_url": "https://api.github.com/users/abenjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/abenjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abenjak/subscriptions", "organizations_url": "https://api.github.com/users/abenjak/orgs", "repos_url": "https://api.github.com/users/abenjak/repos", "events_url": "https://api.github.com/users/abenjak/events{/privacy}", "received_events_url": "https://api.github.com/users/abenjak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-24T17:06:17Z", "updated_at": "2020-05-29T05:21:32Z", "closed_at": "2020-05-29T05:21:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nCorrect me if I am wrong, but [strelka2.py](https://github.com/bcbio/bcbio-nextgen/blob/master/bcbio/variation/strelka2.py#L220) uses the following formula to calculate allele fractions (AF) from _srelka2_ somatic VCFs:\r\nsnps: `AF = {ALT}U[0] / DP`\r\nindels:  `AF = TIR[0] / DP`\r\n\r\nHowever, according to the _strelka2_ [manual](https://github.com/Illumina/strelka/blob/master/docs/userGuide/README.md#somatic), the correct formula should be\r\nsnps: `AF = {ALT}U[0] / ({ALT}U[0] + {REF}U[0])`\r\nindels: `AF = TIR[0] / (TIR[0] + TAR[0])`. \r\n\r\nThe problem with DP is that it includes also uninformative reads (reads that do not provide enough statistical evidence to support one allele over another).\r\n\r\nFrom the [GATK forum](http://gatkforums.broadinstitute.org/gatk/discussion/1268/what-is-a-vcf-and-how-should-i-interpret-it):\r\n_**AD and DP : Allele depth and depth of coverage.**\r\nThese are complementary fields that represent two important ways of thinking about the depth of the data for this sample at this site. \r\n**AD** is the unfiltered allele depth, i.e. the number of reads that support each of the reported alleles. All reads at the position (including reads that did not pass the variant caller\u2019s filters) are included in this number, except reads that were considered uninformative. Reads are considered uninformative when they do not provide enough statistical evidence to support one allele over another. \r\n**DP** is the filtered depth, at the sample level. This gives you the number of filtered reads that support each of the reported alleles. You can check the variant caller\u2019s documentation to see which filters are applied by default. Only reads that passed the variant caller\u2019s filters are included in this number. **However, unlike the AD calculation, uninformative reads are included in DP**._\r\n\r\n\r\nBest regards,\r\nAndrej", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2816", "id": 442602251, "node_id": "MDU6SXNzdWU0NDI2MDIyNTE=", "number": 2816, "title": "Install: gnomad for hg19 fails", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509694, "node_id": "MDU6TGFiZWwyNzUwOTY5NA==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 31, "created_at": "2019-05-10T08:35:10Z", "updated_at": "2019-08-22T13:03:55Z", "closed_at": "2019-08-22T13:03:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After downloading, this error occurs after some time (~30-40 min):\r\n\r\n```\r\n> gsort version 0.0.6\r\nuniq v0.57\r\n\r\noptions:     input VCF file        -normalize v\r\n0.5         [o] output VCF file       \r\n-\r\n\r\noptions:     input VCF file                                  -\r\n         [o] output VCF file                                 -\r\n         [w] sorting window size                             10000\r\n         [n] no fail on reference inconsistency for non SNPs true\r\n         [q] quiet                                           false\r\n         [d] debug                                           false\r\n         [r] reference FASTA file                            ../seq/hg19.fa\r\n\r\n[W::vcf_parse] Contig 'chr1' is not defined in the header. (Quick workaround: index the file with tabix.)\r\nWarning: The tag \"AC_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AN_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AF_nfe_bgr\" not defined in the header\r\nWarning: The tag \"nhomalt_nfe_bgr\" not defined in the header\r\nWarning: The tag \"AC_sas_male\" not defined in the header\r\nWarning: The tag \"AN_sas_male\" not defined in the header\r\nWarning: The tag \"AF_sas_male\" not defined in the header\r\n[W::vcf_parse] Contig 'chr1' is not defined in the header. (Quick workaround: index the file with tabix.)\r\nEncountered error, cannot proceed. Please check the error output above.\r\n\r\nstats: biallelic\r\n          no. left trimmed                      : 0\r\n          no. right trimmed                     : 0\r\n          no. left and right trimmed            : 0\r\n          no. right trimmed and left aligned    : 0\r\n          no. left aligned                      : 0\r\n\r\n       total no. biallelic normalized           : 0\r\n\r\n       multiallelic\r\n          no. left trimmed                      : 0\r\n          no. right trimmed                     : 0\r\n          no. left and right trimmed            : 0\r\n          no. right trimmed and left aligned    : 0\r\n          no. left aligned                      : 0\r\n\r\n       total no. multiallelic normalized        : 0\r\n\r\n       total no. variants normalized            : 0\r\n       total no. variants observed              : 0\r\n       total no. reference observed             : 0\r\n\r\nTime elapsed: 0.00s\r\n\r\n\r\nstats: Total number of observed variants   0\r\n       Total number of unique variants     0\r\n\r\nTime elapsed: 0.00s\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/bcbio/anaconda/bin/bcbio_nextgen.py\", line 221, in <module>\r\n    install.upgrade_bcbio(kwargs[\"args\"])\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 106, in upgrade_bcbio\r\n    upgrade_bcbio_data(args, REMOTES)\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/site-packages/bcbio/install.py\", line 348, in upgrade_bcbio_data\r\n    args.cores, [\"ggd\", \"s3\", \"raw\"])\r\n  File \"/tmp/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 354, in install_data_local\r\n    _prep_genomes(env, genomes, genome_indexes, ready_approaches, data_filedir)\r\n  File \"/tmp/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 480, in _prep_genomes\r\n    retrieve_fn(env, manager, gid, idx)\r\n  File \"/tmp/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/genomes.py\", line 850, in _install_with_ggd\r\n    ggd.install_recipe(os.getcwd(), env.system_install, recipe_file, gid)\r\n  File \"/tmp/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 30, in install_recipe\r\n    recipe[\"recipe\"][\"full\"][\"recipe_type\"], system_install)\r\n  File \"/tmp/tmpbcbio-install/cloudbiolinux/cloudbio/biodata/ggd.py\", line 62, in _run_recipe\r\n    subprocess.check_output([\"bash\", run_file])\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/subprocess.py\", line 336, in check_output\r\n    **kwargs).stdout\r\n  File \"/opt/bcbio/anaconda/lib/python3.6/subprocess.py\", line 418, in run\r\n    output=stdout, stderr=stderr)\r\nsubprocess.CalledProcessError: Command '['bash', '/opt/bcbio/genomes/Hsapiens/hg19/txtmp/ggd-run.sh']' returned non-zero exit status 255.\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2816/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2811", "id": 440766337, "node_id": "MDU6SXNzdWU0NDA3NjYzMzc=", "number": 2811, "title": "bcbio hangs during the bgzip/grabix indexing step", "user": {"login": "parlar", "id": 7408977, "node_id": "MDQ6VXNlcjc0MDg5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/7408977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/parlar", "html_url": "https://github.com/parlar", "followers_url": "https://api.github.com/users/parlar/followers", "following_url": "https://api.github.com/users/parlar/following{/other_user}", "gists_url": "https://api.github.com/users/parlar/gists{/gist_id}", "starred_url": "https://api.github.com/users/parlar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/parlar/subscriptions", "organizations_url": "https://api.github.com/users/parlar/orgs", "repos_url": "https://api.github.com/users/parlar/repos", "events_url": "https://api.github.com/users/parlar/events{/privacy}", "received_events_url": "https://api.github.com/users/parlar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-05-06T15:50:39Z", "updated_at": "2019-08-22T13:48:33Z", "closed_at": "2019-08-22T13:48:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've noticed that bcbio always hangs during bgzip+grabix indexing of fastq.gz files. I have to terminate the process (ctrl-c) and restart the pipeline to make it continue.\r\n\r\nCould be a local issue with my installation / vmware esxi centos 7.6 server. As mentioned in earlier issue, bcbio also fails to install the bioconductor-genomeinfodbdata package, so I have to make a work-around to install it (manual installation of the R package + otherfiles needed for conda to see the package as installed).\r\n\r\nPerhaps not so many people use Centos these days, would you rather recommend something like Ubuntu for bcbio-nextgen?\r\n\r\n```\r\n[2019-05-06T15:03Z] Configuring 2 jobs to run, using 1 cores each with 1.00g of memory reserved for each job\r\n[2019-05-06T15:03Z] Index input with grabix: Oncospan_S4_R1_001.ss_17532001.fastq.gz\r\n[2019-05-06T15:04Z] Index input with grabix: Oncospan_S4_R2_001.ss_17532001.fastq.gz\r\n^CProcess ForkPoolWorker-4:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\r\n    self.run()\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/process.py\", line 93, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/pool.py\", line 108, in worker\r\n    task = get()\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/pool.py\", line 149, in get\r\n    return recv()\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/connection.py\", line 250, in recv\r\n    buf = self._recv_bytes()\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/connection.py\", line 407, in _recv_bytes\r\n    buf = self._recv(4)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/connection.py\", line 379, in _recv\r\n    chunk = read(handle, remaining)\r\nKeyboardInterrupt\r\nTraceback (most recent call last):\r\n  File \"/usr/local/share/bcbio/anaconda/bin/bcbio_nextgen.py\", line 238, in <module>\r\n    main(**kwargs)\r\n  File \"/usr/local/share/bcbio/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 45, in run_main\r\n    fc_dir, run_info_yaml)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 89, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/pipeline/main.py\", line 128, in variant2pipeline\r\n    samples = run_parallel(\"prep_align_inputs\", samples)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 28, in run_parallel\r\n    return run_multicore(fn, items, config, parallel=parallel)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/bcbio/distributed/multi.py\", line 86, in run_multicore\r\n    for data in joblib.Parallel(parallel[\"num_jobs\"], batch_size=1, backend=\"multiprocessing\")(joblib.delayed(fn)(*x) for x in items):\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 934, in __call__\r\n    self.retrieve()\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/site-packages/joblib/parallel.py\", line 833, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/pool.py\", line 664, in get\r\n    self.wait(timeout)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/multiprocessing/pool.py\", line 661, in wait\r\n    self._event.wait(timeout)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/threading.py\", line 551, in wait\r\n    signaled = self._cond.wait(timeout)\r\n  File \"/usr/local/share/bcbio/anaconda/lib/python3.6/threading.py\", line 295, in wait\r\n    waiter.acquire()\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2738", "id": 427637859, "node_id": "MDU6SXNzdWU0Mjc2Mzc4NTk=", "number": 2738, "title": "Configuration check should not allow for duplicated \"description\" items", "user": {"login": "lbeltrame", "id": 25192, "node_id": "MDQ6VXNlcjI1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/25192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbeltrame", "html_url": "https://github.com/lbeltrame", "followers_url": "https://api.github.com/users/lbeltrame/followers", "following_url": "https://api.github.com/users/lbeltrame/following{/other_user}", "gists_url": "https://api.github.com/users/lbeltrame/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbeltrame/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbeltrame/subscriptions", "organizations_url": "https://api.github.com/users/lbeltrame/orgs", "repos_url": "https://api.github.com/users/lbeltrame/repos", "events_url": "https://api.github.com/users/lbeltrame/events{/privacy}", "received_events_url": "https://api.github.com/users/lbeltrame/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-04-01T10:52:28Z", "updated_at": "2020-05-29T04:33:15Z", "closed_at": "2020-05-29T04:33:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found out the hard way by mistakenly putting a number of samples with the same name: it caused many different files to be aligned with the same name, at least with the `smallrnaseq` pipeline, and of course all transaction checks screamed in my face.", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2715", "id": 418686426, "node_id": "MDU6SXNzdWU0MTg2ODY0MjY=", "number": 2715, "title": "feature request: cwl - detect default bcbio_system.yaml", "user": {"login": "matthdsm", "id": 11850640, "node_id": "MDQ6VXNlcjExODUwNjQw", "avatar_url": "https://avatars.githubusercontent.com/u/11850640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthdsm", "html_url": "https://github.com/matthdsm", "followers_url": "https://api.github.com/users/matthdsm/followers", "following_url": "https://api.github.com/users/matthdsm/following{/other_user}", "gists_url": "https://api.github.com/users/matthdsm/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthdsm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthdsm/subscriptions", "organizations_url": "https://api.github.com/users/matthdsm/orgs", "repos_url": "https://api.github.com/users/matthdsm/repos", "events_url": "https://api.github.com/users/matthdsm/events{/privacy}", "received_events_url": "https://api.github.com/users/matthdsm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-08T08:37:07Z", "updated_at": "2020-05-29T05:25:26Z", "closed_at": "2020-05-29T05:25:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi Brad,\r\n\r\nWould it be possible to let the `bcbio_vm.py` executable auto-detect the `bcbio_system.yaml` file in the galaxy subdir? This way, it'd be possible to add a default input repo and default dir for reference data, without having to add extra args when invoking the script (lazy, I know).\r\n\r\nThanks\r\nM", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2511", "id": 359968746, "node_id": "MDU6SXNzdWUzNTk5Njg3NDY=", "number": 2511, "title": "vcfanno and gemini don't work in RNA-seq analysis?", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-09-13T16:21:23Z", "updated_at": "2020-05-29T04:47:37Z", "closed_at": "2020-05-29T04:47:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello, bcbio developers and users!\r\n\r\nThanks for the great pipeline!\r\nI've read in the history that it is now possible to use vcfanno in RNA-seq analysis.\r\n\r\nWhen trying this:\r\n```\r\ndetails:\r\n- algorithm:\r\n    aligner: star\r\n    tools_off:\r\n    - gatk4\r\n    tools_on:\r\n    - bcbiornaseq\r\n    - gemini\r\n    variantcaller: gatk-haplotype\r\n    vcfanno:\r\n    - /home/naumenko/cre/cre.vcfanno.conf\r\n  analysis: RNA-seq\r\n  description: 181_121141J\r\n  files:\r\n  - /hpf/largeprojects/ccmbio/amahalanabis/181/input/181_121141J_1.fq.gz\r\n  - /hpf/largeprojects/ccmbio/amahalanabis/181/input/181_121141J_2.fq.gz\r\n  genome_build: GRCh37\r\n  metadata:\r\n    batch: 181\r\nfc_name: '181'\r\nresources:\r\n  default:\r\n    cores: 2\r\n    jvm_opts:\r\n    - -Xms750m\r\n    - -Xmx7000m\r\n    memory: 15G\r\nupload:\r\n  dir: ../final\r\n```\r\n\r\nvcf file is not annotated and there is no gemini database.\r\n\r\nShould I specify parameters differently in RNA-seq analysis, or this functionality is not available in RNA-seq?\r\n\r\nThanks!\r\nSergey", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2511/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2441", "id": 340184832, "node_id": "MDU6SXNzdWUzNDAxODQ4MzI=", "number": 2441, "title": "bcbio can't start on SGE queue that has dot in the queue name ", "user": {"login": "WimSpee", "id": 34706930, "node_id": "MDQ6VXNlcjM0NzA2OTMw", "avatar_url": "https://avatars.githubusercontent.com/u/34706930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WimSpee", "html_url": "https://github.com/WimSpee", "followers_url": "https://api.github.com/users/WimSpee/followers", "following_url": "https://api.github.com/users/WimSpee/following{/other_user}", "gists_url": "https://api.github.com/users/WimSpee/gists{/gist_id}", "starred_url": "https://api.github.com/users/WimSpee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WimSpee/subscriptions", "organizations_url": "https://api.github.com/users/WimSpee/orgs", "repos_url": "https://api.github.com/users/WimSpee/repos", "events_url": "https://api.github.com/users/WimSpee/events{/privacy}", "received_events_url": "https://api.github.com/users/WimSpee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-07-11T10:33:24Z", "updated_at": "2020-11-24T19:19:38Z", "closed_at": "2020-11-24T19:19:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi @roryk \r\n\r\nThe bcbio SGE cluster helper  split's the queue name on a \".\" via `base_queue = os.path.splitext(queue)[0]`  in `def _find_parallel_environment(queue):`\r\nhttps://github.com/roryk/ipython-cluster-helper/blob/master/cluster_helper/cluster.py#L348\r\n\r\nThis results in the following error when having a queue named main.regular \r\n ```\r\nbcbio_nextgen.py ../config/VSDA_1080_samples-merged.yaml  -t ipython -n 61 -s sge -q main.regular -r vf=4G,h_rss=40G\r\n[2018-07-11T09:32Z] machine_4: System YAML configuration: /data/prod/Tools/bcbio/1.0.8/galaxy/bcbio_system.yaml\r\n[2018-07-11T09:32Z] machine_4: Resource requests: bwa, sambamba, samtools; memory: 4.00, 4.00, 4.00; cores: 10, 10, 10\r\n[2018-07-11T09:32Z] machine_4: Configuring 6 jobs to run, using 10 cores each with 40.1g of memory reserved for each job\r\nNo cluster queue or queue instance matches the phrase \"main.q\"\r\nNo cluster queue or queue instance matches the phrase \"main\"\r\nTraceback (most recent call last):\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/bin/bcbio_nextgen.py\", line 241, in <module>\r\n    main(**kwargs)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/bin/bcbio_nextgen.py\", line 46, in main\r\n    run_main(**kwargs)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/bcbio/pipeline/main.py\", line 51, in run_main\r\n    fc_dir, run_info_yaml)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/bcbio/pipeline/main.py\", line 87, in _run_toplevel\r\n    for xs in pipeline(config, run_info_yaml, parallel, dirs, samples):\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/bcbio/pipeline/main.py\", line 117, in variant2pipeline\r\n    multiplier=alignprep.parallel_multiplier(samples)) as run_parallel:\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/bcbio/distributed/prun.py\", line 55, in start\r\n    with ipython.create(parallel, dirs, config) as view:\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/cluster_helper/cluster.py\", line 1146, in cluster_view\r\n    wait_for_all_engines=wait_for_all_engines)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/cluster_helper/cluster.py\", line 1033, in __init__\r\n    cores_per_job, self.cluster_id, extra_params)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/cluster_helper/cluster.py\", line 889, in _start\r\n    resources, specials = _scheduler_resources(scheduler, extra_params, queue)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/cluster_helper/cluster.py\", line 869, in _scheduler_resources\r\n    specials[\"pename\"] = _find_parallel_environment(queue)\r\n  File \"/data/prod/Tools/bcbio/1.0.8/anaconda/lib/python2.7/site-packages/cluster_helper/cluster.py\", line 361, in _find_parallel_environment\r\n    \"https://blogs.oracle.com/templedf/entry/configuring_a_new_parallel_environment\")\r\nValueError: Could not find an SGE environment configured for parallel execution. See https://blogs.oracle.com/templedf/entry/configuring_a_new_parallel_environment for SGE setup instructions.\r\n```\r\n\r\nChanging `base_queue = os.path.splitext(queue)[0]` to `base_queue = queue` solved the issue. \r\n\r\nI am not sure why the queue name is split on the \".\" .  Is there a good reason for this, otherwise it might be better to just take the queue name without splitting on \".\"  If \".\" is not allowed in SGE queue names or serves a special purpose we can change the queue name. \r\n\r\nThank you. \r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2441/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2439", "id": 339941781, "node_id": "MDU6SXNzdWUzMzk5NDE3ODE=", "number": 2439, "title": "Including piRNA quantification in smallRNAseq pipeline", "user": {"login": "mshadbolt", "id": 13007987, "node_id": "MDQ6VXNlcjEzMDA3OTg3", "avatar_url": "https://avatars.githubusercontent.com/u/13007987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mshadbolt", "html_url": "https://github.com/mshadbolt", "followers_url": "https://api.github.com/users/mshadbolt/followers", "following_url": "https://api.github.com/users/mshadbolt/following{/other_user}", "gists_url": "https://api.github.com/users/mshadbolt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mshadbolt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mshadbolt/subscriptions", "organizations_url": "https://api.github.com/users/mshadbolt/orgs", "repos_url": "https://api.github.com/users/mshadbolt/repos", "events_url": "https://api.github.com/users/mshadbolt/events{/privacy}", "received_events_url": "https://api.github.com/users/mshadbolt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-10T17:39:36Z", "updated_at": "2020-05-29T04:41:05Z", "closed_at": "2020-05-29T04:41:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys\r\n\r\nMore of a feature request than an issue but I was wondering if there is a reason why piRNAs aren't currently included in the smallrnaseq .gtf file (`~/bcbio-nextgen/data/genomes/Hsapiens/hg19/srnaseq/srna-transcripts.gtf`). It would be great if they were included as part of seqcluster quantification in the srnaseq pipeline.\r\n\r\nthanks\r\nMarion", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2439/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2410", "id": 329690078, "node_id": "MDU6SXNzdWUzMjk2OTAwNzg=", "number": 2410, "title": "Many false positives in RNA-seq variant calling since introduction of gatk4", "user": {"login": "naumenko-sa", "id": 13981803, "node_id": "MDQ6VXNlcjEzOTgxODAz", "avatar_url": "https://avatars.githubusercontent.com/u/13981803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naumenko-sa", "html_url": "https://github.com/naumenko-sa", "followers_url": "https://api.github.com/users/naumenko-sa/followers", "following_url": "https://api.github.com/users/naumenko-sa/following{/other_user}", "gists_url": "https://api.github.com/users/naumenko-sa/gists{/gist_id}", "starred_url": "https://api.github.com/users/naumenko-sa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naumenko-sa/subscriptions", "organizations_url": "https://api.github.com/users/naumenko-sa/orgs", "repos_url": "https://api.github.com/users/naumenko-sa/repos", "events_url": "https://api.github.com/users/naumenko-sa/events{/privacy}", "received_events_url": "https://api.github.com/users/naumenko-sa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509694, "node_id": "MDU6TGFiZWwyNzUwOTY5NA==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2018-06-06T02:40:00Z", "updated_at": "2020-05-29T04:35:48Z", "closed_at": "2020-05-29T04:35:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey guys!\r\n\r\nThanks for the great pipeline!\r\n\r\nHas anybody checked the precision of RNA-seq variant calling since the introduction of gatk4?\r\nPreviously, with gatk 3x after rna-editing filtration it was pretty decent (precision=90-95%).\r\n\r\nI have not done the NA12878 test for now, but the new output looks like having a crazy amount of low quality long indels.\r\n\r\nWould it be possible to fix gatk4 parameters/filters, or at least turn it off in RNA-seq (to use gatk3.8 instead)?\r\n\r\nI can run the NA12878 test if you need it.\r\n\r\nSergey", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2410/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2239", "id": 291883634, "node_id": "MDU6SXNzdWUyOTE4ODM2MzQ=", "number": 2239, "title": "fusion_caller oncofuse and ericscript did not run in RNA-seq pipeline", "user": {"login": "hliu2016", "id": 21173372, "node_id": "MDQ6VXNlcjIxMTczMzcy", "avatar_url": "https://avatars.githubusercontent.com/u/21173372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hliu2016", "html_url": "https://github.com/hliu2016", "followers_url": "https://api.github.com/users/hliu2016/followers", "following_url": "https://api.github.com/users/hliu2016/following{/other_user}", "gists_url": "https://api.github.com/users/hliu2016/gists{/gist_id}", "starred_url": "https://api.github.com/users/hliu2016/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hliu2016/subscriptions", "organizations_url": "https://api.github.com/users/hliu2016/orgs", "repos_url": "https://api.github.com/users/hliu2016/repos", "events_url": "https://api.github.com/users/hliu2016/events{/privacy}", "received_events_url": "https://api.github.com/users/hliu2016/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-01-26T12:10:57Z", "updated_at": "2018-01-28T11:08:21Z", "closed_at": "2018-01-28T11:04:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I have run the RNA-seq pipeline to process 12 samples. The yaml file is as below:\r\n\r\n> details:\r\n>   - analysis: RNA-seq\r\n>     algorithm:\r\n>       fusion_caller: [pizzly, oncofuse, ericscript]\r\n>       variantcaller: [gatk-haplotype]\r\n>       transcriptome_align: True\r\n>       aligner: star\r\n>       quality_format: standard\r\n>       #trim_reads: read_through\r\n>       #adapters: [truseq, polya]\r\n>       #tools_on: [gatk4]\r\n>       expression_caller: [stringtie, salmon]\r\n>       transcript_assembler: [stringtie]\r\n>       #spikein_fasta: ../data/spikeins/spikeins.fa\r\n>     metadata:\r\n>       batch: TestBatch1\r\n>     description: Test1\r\n>     genome_build: rn6\r\n> \r\n\r\nThe pipeline successfully finished and most files are upload to the final directory. However, I noticed that no results can be found for the fusion_caller oncofuse and ericscript, while pizzly has results. For oncofuse and ericscript, their executables are in the PATH environment and can be called directly. So, why they did not run? \r\n\r\nBesides, the variants (saved in vcf files) called by gatk have been uploaded to each sample directory, combined the variants with respect to the batch metadata. Would you like to merge the variants of all samples and upload a copy to the project directory in the final folder? I think this will greatly facilitate the downstream analysis. ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2227", "id": 289895291, "node_id": "MDU6SXNzdWUyODk4OTUyOTE=", "number": 2227, "title": "bcbio jobs on SGE crash because of running into default SGE job resource limits", "user": {"login": "WimSpee", "id": 34706930, "node_id": "MDQ6VXNlcjM0NzA2OTMw", "avatar_url": "https://avatars.githubusercontent.com/u/34706930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WimSpee", "html_url": "https://github.com/WimSpee", "followers_url": "https://api.github.com/users/WimSpee/followers", "following_url": "https://api.github.com/users/WimSpee/following{/other_user}", "gists_url": "https://api.github.com/users/WimSpee/gists{/gist_id}", "starred_url": "https://api.github.com/users/WimSpee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WimSpee/subscriptions", "organizations_url": "https://api.github.com/users/WimSpee/orgs", "repos_url": "https://api.github.com/users/WimSpee/repos", "events_url": "https://api.github.com/users/WimSpee/events{/privacy}", "received_events_url": "https://api.github.com/users/WimSpee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-01-19T08:20:18Z", "updated_at": "2020-05-29T03:48:57Z", "closed_at": "2020-05-29T03:48:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nSince recently my bcbio jobs crash on a SGE cluster because the jobs run into the default job memory limit. \r\n\r\nBy default all jobs on our cluster, unless overwitten, have these memory limits:\r\n`-l vf=2G,h_rss=6G`\r\n\r\n\r\nIn the `bcbio_system.yaml` configuration I have the default of 3G per CPU, and set default job size to 10 CPU. \r\n```\r\n# default options, used if other items below are not present\r\n--\r\n# avoids needing to configure/adjust for every program\r\ndefault:\r\nmemory: 3G\r\ncores: 10\r\n```\r\n\r\nAccording to the bcbio log this is also what is requested on the cluster. \r\n```\r\n[2018-01-17T09:44Z] clustermaster: Resource requests: bwa, sambamba, samtools; memory: 3.00, 3.00, 3.00; cores: 10, 10, 10\r\n--\r\n[2018-01-17T09:44Z] clustermaster: Configuring 10 jobs to run, using 10 cores each with 30.1g of memory reserved for each job\r\n```\r\n\r\nBut the `qstat -j`  job status shows that only `mem_free` was correctly requested by bcbio, `virtual_free` and `h_rss` still have the default limits. \r\n\r\n`hard resource_list:         virtual_free=2G,h_rss=6G,mem_free=30822M`\r\n\r\nThis causes bcbio jobs to crash the moment the BWA+Samtools sort pipe hits the 6G limit\r\n\r\n```\r\n01/17/2018 14:37:57.135|            main|noden24|W|could not find pid 18425 in job list\r\n01/17/2018 16:58:47.027|            main|noden24|W|job 16956975.1 exceeds job master hard limit \"h_rss\" (6466166784.00000 > limit:6442450944.00000) - initiate terminate method\r\n01/17/2018 16:58:47.860|            main|noden24|W|could not find pid 28912 in job list\r\n01/17/2018 16:59:06.570|            main|noden24|W|job 16956975.2 exceeds job master hard limit \"h_rss\" (6462726144.00000 > limit:6442450944.00000) - initiate terminate method\r\n01/17/2018 16:59:07.853|            main|noden24|W|could not find pid 29026 in job list\r\n01/17/2018 17:00:11.975|            main|noden24|W|job 16956975.3 exceeds job master hard limit \"h_rss\" (6570049536.00000 > limit:6442450944.00000) - initiate terminate method\r\n01/17/2018 17:00:12.740|            main|noden24|W|could not find pid 29210 in job list\r\n01/17/2018 17:00:36.882|            main|noden24|W|job 16956975.4 exceeds job master hard limit \"h_rss\" (6569807872.00000 > limit:6442450944.00000) - initiate terminate method\r\n```\r\n\r\nI can manually prevent this issue by providing higher resource limits for all bcbio at the invocation of the main bcbio script. \r\n`bcbio_nextgen.py ../config/DA_1052_01_15_samples-merged.yaml  -t ipython -n 101 -s sge -q main -r  vf=3G,h_rss=30G`\r\n\r\nThis wasn't necessary in the past. I don't know what changed, i.e. an update in bcbio 1.0.7, or an update to my cluster. \r\n\r\nWould it be possible to have bcbio always overwrite the `virtual_free` and `h_rss`  limits, using the configuration from the  `bcbio_system.yaml`  file?   This would be more consistent and user friendly then having to provide the extra resource requests at the invocation of the main script. \r\n\r\nThank you. \r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/2087", "id": 261814767, "node_id": "MDU6SXNzdWUyNjE4MTQ3Njc=", "number": 2087, "title": "kallisto bam for qualimap/multiqc", "user": {"login": "schelhorn", "id": 5024959, "node_id": "MDQ6VXNlcjUwMjQ5NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5024959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schelhorn", "html_url": "https://github.com/schelhorn", "followers_url": "https://api.github.com/users/schelhorn/followers", "following_url": "https://api.github.com/users/schelhorn/following{/other_user}", "gists_url": "https://api.github.com/users/schelhorn/gists{/gist_id}", "starred_url": "https://api.github.com/users/schelhorn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schelhorn/subscriptions", "organizations_url": "https://api.github.com/users/schelhorn/orgs", "repos_url": "https://api.github.com/users/schelhorn/repos", "events_url": "https://api.github.com/users/schelhorn/events{/privacy}", "received_events_url": "https://api.github.com/users/schelhorn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 27509694, "node_id": "MDU6TGFiZWwyNzUwOTY5NA==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-09-30T03:38:04Z", "updated_at": "2020-05-29T03:45:01Z", "closed_at": "2020-05-29T03:45:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi There,\n\nThanks @roryk and @pmelsted for all the awesomeness that is `kallisto` in bcbio. I know that the implementation is work in progress; may I suggest using the `kallisto` [pseudo bam output](https://pachterlab.github.io/kallisto/pseudobam.html) for making a QC bam for `qualimap`/`multiqc`? \n\nIn that manner, we could eventually move away from `star` (and it's memory requirements/hg38-alt incompatibility) for RNA-Seq analyses where QC is desired but no RNA variant calling is required. ", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/2087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/1334", "id": 148118507, "node_id": "MDU6SXNzdWUxNDgxMTg1MDc=", "number": 1334, "title": "Drop the incorrect genoype attributes for decomposes SNP's. ", "user": {"login": "NeillGibson", "id": 15608993, "node_id": "MDQ6VXNlcjE1NjA4OTkz", "avatar_url": "https://avatars.githubusercontent.com/u/15608993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NeillGibson", "html_url": "https://github.com/NeillGibson", "followers_url": "https://api.github.com/users/NeillGibson/followers", "following_url": "https://api.github.com/users/NeillGibson/following{/other_user}", "gists_url": "https://api.github.com/users/NeillGibson/gists{/gist_id}", "starred_url": "https://api.github.com/users/NeillGibson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NeillGibson/subscriptions", "organizations_url": "https://api.github.com/users/NeillGibson/orgs", "repos_url": "https://api.github.com/users/NeillGibson/repos", "events_url": "https://api.github.com/users/NeillGibson/events{/privacy}", "received_events_url": "https://api.github.com/users/NeillGibson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-04-13T16:47:34Z", "updated_at": "2020-05-29T01:55:47Z", "closed_at": "2020-05-29T01:55:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \n\nWould it be possible to drop the incorrect genotype attributes for decomposed variants?\n\nThe Freebayes variant calling pipe currently decomposes longer variants to SNPs/indels if possible and keeps all genotype attributes. \n\n```\nvcfallelicprimitives -t DECOMPOSED --keep-geno\n```\n\nhttps://github.com/chapmanb/bcbio-nextgen/blob/master/bcbio/variation/freebayes.py#L128\n\nThe total set of genotype attributes kept is \n\n```\nGT\nAO\nDP\nGQ\nPL\nQA\nQR\nRO\n```\n\nOf  these genotype attributes the following can be corrupt for decomposed multi-allelic variants. \nThey are corrupt because the number of values for these attributes doesn't correspond anymore with the number of alleles in the VCF ALT colum. \n\n```\nPL\nRO\nAO\nQA\nQR \n```\n\nThis causes a BCFTools assertions to fail that is used for some subset operations like for example \n\n```\nbcftools view -s ^sample_to_exclude --trim-alt-alleles    my_file.vcf  \n```\n\nhttps://github.com/samtools/bcftools/issues/404\n\nThis could be fixed by dropping the PL, AO and QA  attributes for the all or just the decomposed variants.  \n\nThis would leave the following attributes for the decomposed SNPs. \n\n```\nGT\nDP\nGQ\n```\n\nI tried dropping the PL,AO and QA attributes for the decomposed variants and the resulting VCF file still seems to be valid. I did this by first splitting the VCF file into decomposed and non-decomposed variants. \n\nI thought the following command would just remove the possible corrupt GT attributes from the decomposed variants and also output the non-decomposed variants unchanged. \n\n```\nbcftools annotate -x FMT/PL,FMT/AO,FMT/QA  -i INFO/DECOMPOSED=1 my.vcf\n```\n\nIt however filters all the non-decomposed variants / outputs only variants with the DECOMPOSED flag set. \n\nMaybe another tool could  be added that only removes the possible corrupt genotype attributes for the decomposed variants? \nOr I could open a ticket at vcflib to ask for an option \"--keep-minimal-geno\"  ? \n\nDo you have any ideas on how to handle this?\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/1334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/31", "id": 15536998, "node_id": "MDU6SXNzdWUxNTUzNjk5OA==", "number": 31, "title": "RNA-seq pipeline documentation missing", "user": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-06-14T00:15:08Z", "updated_at": "2013-08-14T20:05:21Z", "closed_at": "2013-08-14T20:05:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "There is no documentation at the moment for the RNA-seq pipeline at RTD or on the main README.\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/31/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30", "repository_url": "https://api.github.com/repos/bcbio/bcbio-nextgen", "labels_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30/comments", "events_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30/events", "html_url": "https://github.com/bcbio/bcbio-nextgen/issues/30", "id": 15536951, "node_id": "MDU6SXNzdWUxNTUzNjk1MQ==", "number": 30, "title": "RNA-seq pipeline summary unhelpful", "user": {"login": "roryk", "id": 414586, "node_id": "MDQ6VXNlcjQxNDU4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/414586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roryk", "html_url": "https://github.com/roryk", "followers_url": "https://api.github.com/users/roryk/followers", "following_url": "https://api.github.com/users/roryk/following{/other_user}", "gists_url": "https://api.github.com/users/roryk/gists{/gist_id}", "starred_url": "https://api.github.com/users/roryk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roryk/subscriptions", "organizations_url": "https://api.github.com/users/roryk/orgs", "repos_url": "https://api.github.com/users/roryk/repos", "events_url": "https://api.github.com/users/roryk/events{/privacy}", "received_events_url": "https://api.github.com/users/roryk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 27509692, "node_id": "MDU6TGFiZWwyNzUwOTY5Mg==", "url": "https://api.github.com/repos/bcbio/bcbio-nextgen/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-06-14T00:13:00Z", "updated_at": "2013-08-14T20:25:55Z", "closed_at": "2013-08-14T20:25:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "RNA-seq pipeline summary does not produce useful metrics specific for RNA-seq. Use the RNASeqMetrics summary from here: https://github.com/chapmanb/bcbio-nextgen/blob/master/bcbio/broad/metrics.py instead of the variant metrics.\n", "reactions": {"url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bcbio/bcbio-nextgen/issues/30/timeline", "performed_via_github_app": null, "state_reason": "completed"}]