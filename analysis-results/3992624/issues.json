[{"url": "https://api.github.com/repos/hylang/hy/issues/2430", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2430/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2430/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2430/events", "html_url": "https://github.com/hylang/hy/issues/2430", "id": 1660671221, "node_id": "I_kwDOAG2eyM5i-9T1", "number": 2430, "title": "One-character REPL input provokes a continuation line", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-10T11:46:38Z", "updated_at": "2023-04-14T19:27:28Z", "closed_at": "2023-04-14T19:27:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nHy 0.26.0+28.g0e3409ab using CPython(main) 3.10.7 on Linux\r\n=>  1\r\n1\r\n=> 1\r\n... \r\n1\r\n```\r\n\r\nI haven't yet bisected this, but I suspect it's a regression I introduced in #2399 or one of my recent reader changes.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2427", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2427/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2427/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2427/events", "html_url": "https://github.com/hylang/hy/issues/2427", "id": 1652618398, "node_id": "I_kwDOAG2eyM5igPSe", "number": 2427, "title": "Parse error on empty scripts", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-03T19:09:57Z", "updated_at": "2023-04-14T19:27:27Z", "closed_at": "2023-04-14T19:27:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is an embarrassing thing to forget to test for. A script consisting of two or more newlines is correctly understood as an empty program, but an empty script, or a script consisting solely of a single newline, is problematic.\r\n\r\n```\r\n$ /bin/echo -ne '' >ex.hy ; hy ex.hy  \r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/runpy.py\", line 288, in run_path\r\n    code, fname = _get_code_from_file(run_name, path_name)\r\n  File \"/tmp/ex.hy\", line 1\r\n    \r\nhy.reader.exceptions.PrematureEndOfInput: Premature end of input while peeking\r\n$ /bin/echo -ne '\\n' >ex.hy ; hy ex.hy\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/runpy.py\", line 288, in run_path\r\n    code, fname = _get_code_from_file(run_name, path_name)\r\n  File \"/tmp/ex.hy\", line 1\r\n    \r\nhy.reader.exceptions.PrematureEndOfInput: Premature end of input while peeking\r\n$ /bin/echo -ne '\\n\\n' >ex.hy ; hy ex.hy\r\n[no output]\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2427/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2422", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2422/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2422/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2422/events", "html_url": "https://github.com/hylang/hy/issues/2422", "id": 1640567192, "node_id": "I_kwDOAG2eyM5hyRGY", "number": 2422, "title": "Misplaced tracebacks from some models created in the reader", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-25T16:03:31Z", "updated_at": "2023-03-28T18:07:22Z", "closed_at": "2023-03-28T18:07:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$ echo ';;;;;;\\na.b' >ex.hy\r\n$ hy ex.hy \r\nTraceback (most recent call last):\r\n  \u2026\r\n  File \"/tmp/ex.hy\", line 1, in <module>\r\n    ;;;;;;\r\nNameError: name 'a' is not defined\r\n```\r\n\r\nThe error is wrongly attributed to line 1 because the reader fails to set position information for a model created during the expansion of `a.b` into `(. a b)`. Contrast with this case, which is correct:\r\n\r\n```\r\n$ echo ';;;;;;\\n(. a b)' >ex.hy\r\n$ hy ex.hy                     \r\nTraceback (most recent call last):\r\n  \u2026\r\n  File \"/tmp/ex.hy\", line 2, in <module>\r\n    (. a b)\r\nNameError: name 'a' is not defined\r\n```\r\n\r\nI believe it suffices to call `model.replace(model)` in `HyReader.fill_pos`, so that positions are fixed recursively. I just need to write a test.\r\n\r\nThis bug is more consequential than it sounds because it can crash pytest internally, when non-existent columns of the source are retrieved for a traceback. Hy's own error reporting doesn't fail so badly in such a case.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2422/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2419", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2419/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2419/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2419/events", "html_url": "https://github.com/hylang/hy/issues/2419", "id": 1620033402, "node_id": "I_kwDOAG2eyM5gj796", "number": 2419, "title": "Escaped braces in bracket f-strings are doubled in the output", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T14:41:22Z", "updated_at": "2023-03-20T13:00:34Z", "closed_at": "2023-03-20T13:00:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python:\r\n\r\n```\r\n>>> f\"{{foo}}\"\r\n'{foo}'\r\n```\r\n\r\nHy, correct:\r\n\r\n```\r\n=> f\"{{foo}}\"\r\n\"{foo}\"\r\n```\r\n\r\nHy, incorrect:\r\n\r\n```\r\n=> #[f-[{{foo}}]f-]\r\n\"{{foo}}\"\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2419/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2405", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2405/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2405/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2405/events", "html_url": "https://github.com/hylang/hy/issues/2405", "id": 1565468169, "node_id": "I_kwDOAG2eyM5dTyYJ", "number": 2405, "title": "Tracebacks in a file with a shebang point to the wrong line", "user": {"login": "glyh", "id": 12870742, "node_id": "MDQ6VXNlcjEyODcwNzQy", "avatar_url": "https://avatars.githubusercontent.com/u/12870742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glyh", "html_url": "https://github.com/glyh", "followers_url": "https://api.github.com/users/glyh/followers", "following_url": "https://api.github.com/users/glyh/following{/other_user}", "gists_url": "https://api.github.com/users/glyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/glyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glyh/subscriptions", "organizations_url": "https://api.github.com/users/glyh/orgs", "repos_url": "https://api.github.com/users/glyh/repos", "events_url": "https://api.github.com/users/glyh/events{/privacy}", "received_events_url": "https://api.github.com/users/glyh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-01T05:38:58Z", "updated_at": "2023-02-21T20:23:21Z", "closed_at": "2023-02-21T20:23:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "```hy\r\n#!/usr/bin/env hy\r\n;; wow\r\n(raise Exception)\r\n;; nothing\r\n```\r\n\r\n```\r\n$ hy test.hy\r\nTraceback (most recent call last):\r\n  File \"/home/lyh/.local/bin/hy\", line 8, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/usr/lib/python3.10/runpy.py\", line 289, in run_path\r\n    return _run_module_code(code, init_globals, run_name,\r\n  File \"/usr/lib/python3.10/runpy.py\", line 96, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/tmp/a.hy\", line 2, in <module>\r\n    ;; wow\r\nException\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2404", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2404/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2404/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2404/events", "html_url": "https://github.com/hylang/hy/issues/2404", "id": 1565290036, "node_id": "I_kwDOAG2eyM5dTG40", "number": 2404, "title": "Can't `match` on dotted type names", "user": {"login": "glyh", "id": 12870742, "node_id": "MDQ6VXNlcjEyODcwNzQy", "avatar_url": "https://avatars.githubusercontent.com/u/12870742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glyh", "html_url": "https://github.com/glyh", "followers_url": "https://api.github.com/users/glyh/followers", "following_url": "https://api.github.com/users/glyh/following{/other_user}", "gists_url": "https://api.github.com/users/glyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/glyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glyh/subscriptions", "organizations_url": "https://api.github.com/users/glyh/orgs", "repos_url": "https://api.github.com/users/glyh/repos", "events_url": "https://api.github.com/users/glyh/events{/privacy}", "received_events_url": "https://api.github.com/users/glyh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-01T02:02:35Z", "updated_at": "2023-02-05T12:47:22Z", "closed_at": "2023-02-05T12:47:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "```hy\r\n(let [a '+]\r\n  (match a \r\n    '+ 1\r\n    _ 2))\r\n```\r\nexpected output: 2\r\ngot:\r\n```\r\nTraceback (most recent call last):\r\n  File \"stdin-494d70fad1aae99772cfec1259def00daabbaec3\", line 1, in <module>\r\n    (let [a '+]\r\nNameError: name 'quote' is not defined\r\n```\r\nhere's the generated code:\r\n```py\r\nimport hy\r\n_hy_let_a_1 = hy.models.Symbol('+')\r\n_hy_anon_var_2 = None\r\nmatch _hy_let_a_1:\r\n    case quote(hyx_Xplus_signX):\r\n        _hy_anon_var_2 = 1\r\n    case _:\r\n        _hy_anon_var_2 = 2\r\n```\r\nmanual fix is not working:\r\n```hy\r\n(match '+ \r\n   (hy.models.Symbol \"+\") 1 \r\n    _ 2)\r\n```\r\noutput:\r\n```\r\nTraceback (most recent call last):\r\n  File \"stdin-8930588efcee2a15eccc4f2c562960b45e187fcb\", line 2\r\n    (hy.models.Symbol \"+\") 1 \r\n    ^\r\nhy.errors.HySyntaxError: parse error for pattern macro 'match': got unexpected token: hy.models.Expression([\r\n  hy.models.Symbol('quote'),\r\n  hy.models.Symbol('+')]), expected: some(...)\r\n```\r\n\r\nfor now I'm falling back to if&elif.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2321", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2321/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2321/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2321/events", "html_url": "https://github.com/hylang/hy/issues/2321", "id": 1310123947, "node_id": "I_kwDOAG2eyM5OFuer", "number": 2321, "title": "F-strings don't allow `\\N{\u2026}`", "user": {"login": "rpaulo", "id": 1491286, "node_id": "MDQ6VXNlcjE0OTEyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1491286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rpaulo", "html_url": "https://github.com/rpaulo", "followers_url": "https://api.github.com/users/rpaulo/followers", "following_url": "https://api.github.com/users/rpaulo/following{/other_user}", "gists_url": "https://api.github.com/users/rpaulo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rpaulo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rpaulo/subscriptions", "organizations_url": "https://api.github.com/users/rpaulo/orgs", "repos_url": "https://api.github.com/users/rpaulo/repos", "events_url": "https://api.github.com/users/rpaulo/events{/privacy}", "received_events_url": "https://api.github.com/users/rpaulo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-19T22:35:01Z", "updated_at": "2022-08-05T13:32:07Z", "closed_at": "2022-08-05T13:32:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nHy 0.24.0 using CPython(default) 3.9.6 on Darwin\r\n=> (print \"\\N{slightly smiling face}\")\r\n\ud83d\ude42\r\n=> (print f\"\\N{slightly smiling face}\")\r\nTraceback (most recent call last):\r\n  File \"stdin-eda06fe2e57521e633661e996d6216e5bab61d9b\", line 1\r\n    (print f\"\\N{slightly smiling face}\")\r\n               ^\r\nhy.reader.exceptions.LexException: (unicode error) 'unicodeescape' codec can't decode bytes in position 0-1: malformed \\N character escape (<string>, line 1)\r\n```\r\n\r\nPython 3.9 works fine:\r\n```\r\n>>> print(\"\\N{slightly smiling face}\")\r\n\ud83d\ude42\r\n>>> print(f\"\\N{slightly smiling face}\")\r\n\ud83d\ude42\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2319", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2319/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2319/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2319/events", "html_url": "https://github.com/hylang/hy/issues/2319", "id": 1308151928, "node_id": "I_kwDOAG2eyM5N-NB4", "number": 2319, "title": "Statements pulled out of `assert` still execute under `python3 -O`", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-18T15:45:10Z", "updated_at": "2022-07-27T02:48:34Z", "closed_at": "2022-07-27T02:48:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```sh\r\n$ echo '(assert (do (print \"hi\") 1))' >ex.hy\r\n$ python3 -Oc 'import hy, ex'\r\nhi\r\n```\r\n\r\nThe cause is pretty straightforward: after statements are pulled out of the `assert`, Python doesn't know it's supposed to remove them. This can probably be fixed by guarding the statements with `if __debug__: \u2026`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2318", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2318/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2318/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2318/events", "html_url": "https://github.com/hylang/hy/issues/2318", "id": 1307845048, "node_id": "I_kwDOAG2eyM5N9CG4", "number": 2318, "title": "`__file__` is sometimes missing the directory", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-18T11:56:40Z", "updated_at": "2022-07-22T12:09:52Z", "closed_at": "2022-07-22T12:09:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```sh\r\n$ cd /tmp\r\n$ echo 'print(__file__)' >a.py ; python3 a.py\r\n/tmp/a.py\r\n$ echo '(print __file__)' >b.hy ; hy b.hy\r\nb.hy\r\n```\r\n\r\nThe variable seems to be set correctly when the file is imported rather than run directly:\r\n\r\n```sh\r\n$ hy -c '(import a b) (print a.__file__ b.__file__)'\r\n/tmp/a.py\r\n/tmp/b.hy\r\n/tmp/a.py /tmp/b.hy\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2271", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2271/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2271/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2271/events", "html_url": "https://github.com/hylang/hy/issues/2271", "id": 1228177598, "node_id": "I_kwDOAG2eyM5JNIC-", "number": 2271, "title": "Decorating anonymous functions is inconsistent", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-06T18:02:19Z", "updated_at": "2022-05-09T18:44:13Z", "closed_at": "2022-05-09T18:44:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Attempting to decorate an `fn` that can compile down to a `lambda` fails, but it won't fail if the `fn` contains statements that force compilation to an anonymous `def`\r\n\r\n```clojure\r\n=> (with-decorator cache (fn [x] x))\r\nTraceback (most recent call last):\r\n  File \"stdin-ecb69bbf92e18e5e87b4bc8c6fd3222c5969d4a8\", line 1, in <module>\r\n    (with-decorator cache (fn [x] x))\r\n  File \"<stdin>\", line 1\r\n    (with-decorator cache (fn [x] x))\r\n                          ^\r\nhy.errors.HySyntaxError: Decorated a non-function\r\n```\r\n\r\n```clojure\r\n=> (with-decorator cache (fn [x] (print 1) x))\r\n@cache\r\ndef _hy_anon_var_2(x):\r\n    print(1)\r\n    return x\r\n_hy_anon_var_2\r\n```\r\n\r\nI think it makes the most sense to force the anon `def` when an `fn` uses a decorator like it already does when it contains statements or type annotations. ", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2258", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2258/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2258/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2258/events", "html_url": "https://github.com/hylang/hy/issues/2258", "id": 1199363236, "node_id": "I_kwDOAG2eyM5HfNSk", "number": 2258, "title": "Can't set python warning control arg via command line", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-11T04:14:43Z", "updated_at": "2022-04-11T11:30:58Z", "closed_at": "2022-04-11T11:30:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "python warning filters are controlled at the cli via the `-W` arg. Hy currently doesn't recognize this so we can't control warning filters without setting environment vars.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2254", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2254/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2254/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2254/events", "html_url": "https://github.com/hylang/hy/issues/2254", "id": 1198633491, "node_id": "I_kwDOAG2eyM5HcbIT", "number": 2254, "title": "Invalid string escape sequences become literal backslashes", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-09T14:24:54Z", "updated_at": "2022-04-21T02:41:37Z", "closed_at": "2022-04-21T02:41:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python's traditional behavior given something like `\"a\\p\"` is to silently treat it as `\"a\\\\p\"` (or equivalently, `r\"a\\p\"`), because there is no escape sequence `\\p`. Recent Pythons will produce a `DeprecationWarning` for this, although you may have to opt in to the warning. Hy currently treats  `\"a\\p\"` as `\"a\\\\p\"` with no warning and no error.\r\n\r\nSince we're still not at 1.0, I think we might as well jump headfirst into the future and treat invalid escape sequences as syntax errors, regardless of the underlying Python version. The literal-backslash fallback isn't useful and is liable to get the programmer into trouble.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2239", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2239/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2239/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2239/events", "html_url": "https://github.com/hylang/hy/issues/2239", "id": 1150936601, "node_id": "I_kwDOAG2eyM5EmeYZ", "number": 2239, "title": "In code with DOS-style newlines, literal newlines are treated differently in double-quoted strings and bracket strings", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-25T22:34:07Z", "updated_at": "2022-04-21T02:41:37Z", "closed_at": "2022-04-21T02:41:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This bug is most relevant to Windows users, but can be observed on Linux. For example, make a file with the contents\r\n\r\n```\r\n(print (repr r\"hello\r\ngoodbye\"))\r\n(print (repr #[[hello\r\ngoodbye]]))\r\n(print (repr #[[\r\nhello\r\ngoodbye]]))\r\n```\r\n\r\nwhere the newlines are all 0x0D 0x0A (`unix2dos` is handy). The output is then\r\n\r\n```\r\n'hello\\ngoodbye'\r\n'hello\\r\\ngoodbye'\r\n'\\r\\nhello\\r\\ngoodbye'\r\n```\r\n\r\nSo in the case of double-quoted strings, Hy reads in `\"\\n\"` for the newlines regardless of the newline style in the source code, as Python does for triple-quoted strings, but bracket strings keep whatever newline style was used in the source. (Furthermore, Hy doesn't trim a leading newline, as it's supposed to for bracket strings, if that newline is 0x0D 0x0A.) My feeling is that Python made the wrong choice here with this bit of magic, particularly for raw strings, but we should probably aim for consistency with it.\r\n\r\nTests for any fix to this bug should probably add the step `run: git config --global core.autocrlf false` to `.github/workflows/tests.yml`. By default, the GitHub Actions runner for Windows translates all newlines at checkout-time, which can complicate things.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2230", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2230/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2230/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2230/events", "html_url": "https://github.com/hylang/hy/pull/2230", "id": 1127927683, "node_id": "PR_kwDOAG2eyM4yRQ0g", "number": 2230, "title": "Fix: crash when using keywords as match value", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-02-09T01:06:15Z", "updated_at": "2022-02-12T13:24:12Z", "closed_at": "2022-02-12T13:24:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2230", "html_url": "https://github.com/hylang/hy/pull/2230", "diff_url": "https://github.com/hylang/hy/pull/2230.diff", "patch_url": "https://github.com/hylang/hy/pull/2230.patch", "merged_at": "2022-02-12T13:24:11Z"}, "body": "Something i noticed fiddling around today. \r\n\r\nHy would crash when trying to pattern match against keywords\r\n\r\n```clojure\r\n(match :hello\r\n       :hello 1\r\n       :world 2)\r\n=> hy.errors.HySyntaxError: parse error for pattern macro 'match': got unexpected token: :hello, expected: end of file\r\n```\r\n\r\nTurns out I forgot that Keywords are compiled into a class instantiation calls not values and need to be handled as such.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2230/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2228", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2228/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2228/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2228/events", "html_url": "https://github.com/hylang/hy/pull/2228", "id": 1125622979, "node_id": "PR_kwDOAG2eyM4yJvK0", "number": 2228, "title": "Fix:let loop clauses [2224]", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-02-07T07:42:51Z", "updated_at": "2022-03-17T23:54:28Z", "closed_at": "2022-03-17T23:54:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2228", "html_url": "https://github.com/hylang/hy/pull/2228", "diff_url": "https://github.com/hylang/hy/pull/2228.diff", "patch_url": "https://github.com/hylang/hy/pull/2228.patch", "merged_at": null}, "body": "fixes #2224\r\n\r\nThis makes `let` rebinding better respect the distinction in Python's scoping rules regarding for loops vs. comprehensions by not renaming comprehension iteration targets in generators (as generators introduce their own scopes), ***but*** renaming in `for` loops as `for` loops are not their own scopes and their iteration targets leak into the parent scope. \r\n\r\n```clojure\r\n(let [x 10]\r\n  (lfor x (range 5) :if (> x 1) x) ; => [2 3 4]\r\n  x) ; => 10\r\n\r\n(let [x 10]\r\n  (dfor x (range 5) :if (> x 1) [x x]) ; => {2 2  3 3  4 4}\r\n  x) ; => 10\r\n\r\n(let [x 10\r\n      l []]\r\n  (for [x (range 5) :if (> x 1)]\r\n    (l.append x))\r\n  [l x]) ; => [[2 3 4] 4]\r\n```\r\n\r\n```python\r\n_hy_let_x_50 = 10\r\n[x for x in range(5) if x > 1]\r\n_hy_let_x_50\r\n# >>> 10\r\n\r\n_hy_let_x_51 = 10\r\n{x: x for x in range(5) if x > 1}\r\n_hy_let_x_51\r\n# >>> 10\r\n\r\n_hy_let_x_52 = 10\r\n_hy_let_l_53 = []\r\nfor _hy_let_x_52 in range(5):\r\n    if _hy_let_x_52 > 1:\r\n        _hy_let_l_53.append(_hy_let_x_52)\r\n[_hy_let_l_53, _hy_let_x_52]\r\n# >>> [[2 3 4] 4]\r\n```\r\n\r\nalso split apart the comprehension/for result macro because it had become a 237 line monstrosity that was essentially impossible to understand in any meaningful way", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2228/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2224", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2224/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2224/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2224/events", "html_url": "https://github.com/hylang/hy/issues/2224", "id": 1124939263, "node_id": "I_kwDOAG2eyM5DDTX_", "number": 2224, "title": "`let` doesn't detect assignments in loop clauses of comprehension forms", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2022-02-05T14:06:06Z", "updated_at": "2022-03-17T23:54:10Z", "closed_at": "2022-03-17T23:54:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n=> (let [x 10] (lfor  x (range 5)  :if (> x 1)  x))\r\n[10 10 10 10 10]\r\n```\r\n\r\n`hy --spy` shows this compiles to:\r\n\r\n```\r\n_hy_let_x_1 = 10\r\n[_hy_let_x_1 for x in range(5) if _hy_let_x_1 > 1]\r\n```\r\n\r\n`let` is supposed to allow some kinds of assignments to shadow its own variables, while allowing other kinds to modify its variables, but its treatment of the loop variable seems inconsistent here.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2216", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2216/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2216/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2216/events", "html_url": "https://github.com/hylang/hy/issues/2216", "id": 1113963344, "node_id": "I_kwDOAG2eyM5CZbtQ", "number": 2216, "title": "Account for Python's normalization of Unicode identifiers", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-25T14:33:29Z", "updated_at": "2022-04-06T20:47:35Z", "closed_at": "2022-04-06T20:47:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "My friend @rebane2001 pointed out to me that thanks to the rule \"All identifiers are converted into the normal form NFKC while parsing; comparison of identifiers is based on NFKC.\" in [PEP 3131](https://www.python.org/dev/peps/pep-3131/), two seemingly distinct Python identifiers can be understood to be the same. For example, you can spell \"print\" as \"\ud835\udcc5\ud835\udcc7\ud835\udcbe\ud835\udcc3\ud835\udcc9\" or \"\ud835\udd95\ud835\udd97\ud835\udd8e\ud835\udd93\ud835\udd99\". Reserved words, at least, still have to be in ASCII: you can't spell \"if\" as \"\ud835\udd5a\ud835\udd57\".\r\n\r\nMy unawareness of this Python \"feature\" has led to several bugs in Hy. For example, given `PROGRAM='(setv \ud835\udd25\ud835\udd22\ud835\udd29\ud835\udd29\ud835\udd2c 1) (print hello)'`, `hy -c \"$PROGRAM\"` crashes with `NameError`, but `echo \"$PROGRAM\" | hy2py | python3` doesn't.\r\n\r\nThe situation also creates a weird opportunity. You know how we don't allow `(foo :if 3)` (#2081), because there's no equivalent Python code for `hy2py` to translate it into? Turns out there is: `foo(\ud835\udd5a\ud835\udd57 = 3)`. We'll have to judge whether this is too weird to take advantage of.\r\n\r\nRelatedly, however, a moment's thought (which is apparently more thought than was put into PEP 3131) reveals [a bug](https://bugs.python.org/issue46520) in Python's `ast.unparse`, and probably `astor` as well:\r\n\r\n    $ python3 -c 'import ast; print(ast.unparse(ast.parse(\"\ud835\udd55\ud835\udd56\ud835\udd57 = 1\")))' | python3\r\n      File \"<stdin>\", line 1\r\n        def = 1\r\n            ^\r\n    SyntaxError: invalid syntax", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2216/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2165", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2165/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2165/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2165/events", "html_url": "https://github.com/hylang/hy/issues/2165", "id": 994289812, "node_id": "MDU6SXNzdWU5OTQyODk4MTI=", "number": 2165, "title": "Tests are failing on Python 3.10.0rc2", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-12T21:41:39Z", "updated_at": "2021-09-17T19:07:33Z", "closed_at": "2021-09-17T19:07:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`(require tests.resources.macro-with-require)` leads to\r\n\r\n```\r\n\u2026\r\n  File \"/home/hippo/Workspace/hyenv/hy/hy/macros.py\", line 134, in require\r\n    parent_frame = inspect.stack()[1][0]\r\n  File \"/home/hippo/Workspace/Python-3.10.0rc2/mybuild/lib/python3.10/inspect.py\", line 1676, in stack\r\n    return getouterframes(sys._getframe(1), context)\r\n  File \"/home/hippo/Workspace/Python-3.10.0rc2/mybuild/lib/python3.10/inspect.py\", line 1653, in getouterframes\r\n    frameinfo = (frame,) + getframeinfo(frame, context)\r\n  File \"/home/hippo/Workspace/Python-3.10.0rc2/mybuild/lib/python3.10/inspect.py\", line 1625, in getframeinfo\r\n    start = lineno - 1 - context//2\r\nTypeError: unsupported operand type(s) for -: 'NoneType' and 'int\r\n```\r\n\r\nEvidently we failed to set a line number on a Hy model somewhere and the latest version of `inspect` needs it. I'm done fussing with this for today, but hopefully I'll find the guilty model sometime this coming week.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2156", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2156/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2156/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2156/events", "html_url": "https://github.com/hylang/hy/issues/2156", "id": 981696057, "node_id": "MDU6SXNzdWU5ODE2OTYwNTc=", "number": 2156, "title": "Generated Python code missing parentheses in dictionary unpacking", "user": {"login": "martibi", "id": 42938900, "node_id": "MDQ6VXNlcjQyOTM4OTAw", "avatar_url": "https://avatars.githubusercontent.com/u/42938900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martibi", "html_url": "https://github.com/martibi", "followers_url": "https://api.github.com/users/martibi/followers", "following_url": "https://api.github.com/users/martibi/following{/other_user}", "gists_url": "https://api.github.com/users/martibi/gists{/gist_id}", "starred_url": "https://api.github.com/users/martibi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martibi/subscriptions", "organizations_url": "https://api.github.com/users/martibi/orgs", "repos_url": "https://api.github.com/users/martibi/repos", "events_url": "https://api.github.com/users/martibi/events{/privacy}", "received_events_url": "https://api.github.com/users/martibi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-08-28T01:59:23Z", "updated_at": "2022-02-03T21:48:58Z", "closed_at": "2022-02-03T21:48:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "When doing a conditional dictionary unpacking, hy executes the code correctly:\r\n\r\n```hy\r\n=> {#**{} #**{\"foobar\" 1} #** (if True {\"other\" 4} {\"other\" 5})}\r\n{\"foobar\" 1  \"other\" 4}\r\n\r\n```\r\n\r\nHowever, when compiling it to Python code, the generated code is wrong:\r\n\r\n```hy\r\n=> (disassemble '{#**{} #**{\"foobar\" 1} #** (if True {\"other\" 4} {\"other\" 5})} True)\r\n\"{**{}, **{'foobar': 1}, **{'other': 4} if True else {'other': 5}}\\n\"\r\n```\r\n\r\n```python\r\n>>>> {**{}, **{'foobar': 1}, **{'other': 4} if True else {'other': 5}}\r\n  File \"<stdin>\", line 1\r\n    {**{}, **{'foobar': 1}, **{'other': 4} if True else {'other': 5}}\r\n                                           ^\r\nSyntaxError: invalid syntax (expected '}')\r\n```\r\n\r\nThe correct Python code should be:\r\n```python\r\n>>>> {**{}, **{'foobar': 1}, **({'other': 4} if True else {'other': 5})}\r\n{'foobar': 1, 'other': 4}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2142", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2142/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2142/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2142/events", "html_url": "https://github.com/hylang/hy/issues/2142", "id": 963224002, "node_id": "MDU6SXNzdWU5NjMyMjQwMDI=", "number": 2142, "title": "`(require foo *)` unconditionally gets all macros", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-07T12:46:09Z", "updated_at": "2022-04-06T21:03:53Z", "closed_at": "2022-04-06T21:03:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`(import foo *)`, [per Python](https://docs.python.org/3/reference/simple_stmts.html#the-import-statement), uses the variable `__all__` to decide what to import, or if `__all__` is not defined, it imports every name not beginning with an underscore. `(require foo *)`, by contrast, always gets all macros, although it's supposed to be analogous. So, what `(require foo *)` should do is:\r\n\r\n1. Check a module variable, say `_hy_all_macros`, for a list of public names.\r\n    - A name present in `_hy_all_macros` with no corresponding macro defined is an error at the time of `(require foo *)`.\r\n2. If there is no such variable, require all macros whose names don't begin with an underscore.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2142/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2116", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2116/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2116/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2116/events", "html_url": "https://github.com/hylang/hy/issues/2116", "id": 942467871, "node_id": "MDU6SXNzdWU5NDI0Njc4NzE=", "number": 2116, "title": "`let` duplicates the lambda list of function definitions", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-12T21:32:20Z", "updated_at": "2021-07-14T17:07:21Z", "closed_at": "2021-07-14T17:07:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$ echo '(require hy.contrib.walk [let]) (let [] (defn f [a] 1))' | hy2py\r\n...\r\ndef f(a):\r\n    [a]\r\n    return 1\r\n```\r\n\r\n`[a]` defines the parameters of `f` as it ought to, but is also then used as part of the function body. This is usually a no-op, but you can see a semantic fault when, for example, a default argument has side-effects:\r\n\r\n```\r\n(defn test-no-extra-eval-of-default-args []\r\n  (setv l [])\r\n  (defn f []\r\n    (.append l 1))\r\n  (let [a 1]\r\n    (assert (= a 1))\r\n    (defn g [[b (f)]]\r\n      5))\r\n  (assert (= (g) 5))\r\n  (assert (= l [1])))\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2114", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2114/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2114/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2114/events", "html_url": "https://github.com/hylang/hy/issues/2114", "id": 942244842, "node_id": "MDU6SXNzdWU5NDIyNDQ4NDI=", "number": 2114, "title": "Python 3.10 on Windows fails: AttributeError: module 'collections' has no attribute 'Callable'", "user": {"login": "tianon", "id": 161631, "node_id": "MDQ6VXNlcjE2MTYzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/161631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tianon", "html_url": "https://github.com/tianon", "followers_url": "https://api.github.com/users/tianon/followers", "following_url": "https://api.github.com/users/tianon/following{/other_user}", "gists_url": "https://api.github.com/users/tianon/gists{/gist_id}", "starred_url": "https://api.github.com/users/tianon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tianon/subscriptions", "organizations_url": "https://api.github.com/users/tianon/orgs", "repos_url": "https://api.github.com/users/tianon/repos", "events_url": "https://api.github.com/users/tianon/events{/privacy}", "received_events_url": "https://api.github.com/users/tianon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-07-12T16:43:04Z", "updated_at": "2021-12-30T13:13:57Z", "closed_at": "2021-07-14T14:13:43Z", "author_association": "MEMBER", "active_lock_reason": "off-topic", "body": "Thanks to https://github.com/pyreadline/pyreadline/issues/65, Hy on Python 3.10 on Windows no longer starts, and a backtrace similar to the following is the result:\r\n\r\n```console\r\nTraceback (most recent call last):\r\n  File \"c:\\python\\lib\\runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"c:\\python\\lib\\runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Python\\Scripts\\hy.exe\\__main__.py\", line 4, in <module>\r\n  File \"c:\\python\\lib\\site-packages\\hy\\cmdline.py\", line 37, in <module>\r\n    from hy.completer import completion, Completer\r\n  File \"c:\\python\\lib\\site-packages\\hy\\completer.py\", line 18, in <module>\r\n    import readline\r\n  File \"c:\\python\\lib\\site-packages\\readline.py\", line 34, in <module>\r\n    rl = Readline()\r\n  File \"c:\\python\\lib\\site-packages\\pyreadline\\rlmain.py\", line 422, in __init__\r\n    BaseReadline.__init__(self)\r\n  File \"c:\\python\\lib\\site-packages\\pyreadline\\rlmain.py\", line 62, in __init__\r\n    mode.init_editing_mode(None)\r\n  File \"c:\\python\\lib\\site-packages\\pyreadline\\modes\\emacs.py\", line 633, in init_editing_mode\r\n    self._bind_key('space',       self.self_insert)\r\n  File \"c:\\python\\lib\\site-packages\\pyreadline\\modes\\basemode.py\", line 162, in _bind_key\r\n    if not callable(func):\r\n  File \"c:\\python\\lib\\site-packages\\pyreadline\\py3k_compat.py\", line 8, in callable\r\n    return isinstance(x, collections.Callable)\r\nAttributeError: module 'collections' has no attribute 'Callable'\r\n```\r\n\r\nUnfortunately from that bug (and the repository in general), it would appear that `pyreadline` is no longer actively maintained (last update of any kind was in 2015), so for Hy to continue to support Windows on future Python versions will require some amount of workaround (a fork of `pyreadline`, dropping readline support on Windows, etc).\r\n\r\nI'm not sure if there's a way to specify that Python 3.10+ and Windows are simply mutually incompatible, but that would be the \"simplest\" workaround if there's a clean way to specify that. :see_no_evil:", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2114/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2070", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2070/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2070/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2070/events", "html_url": "https://github.com/hylang/hy/pull/2070", "id": 898428484, "node_id": "MDExOlB1bGxSZXF1ZXN0NjUwMzAxMTI2", "number": 2070, "title": "Fix: Manual is missing module names", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-21T20:08:56Z", "updated_at": "2021-05-25T03:30:45Z", "closed_at": "2021-05-25T03:30:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2070", "html_url": "https://github.com/hylang/hy/pull/2070", "diff_url": "https://github.com/hylang/hy/pull/2070.diff", "patch_url": "https://github.com/hylang/hy/pull/2070.patch", "merged_at": "2021-05-25T03:30:44Z"}, "body": "Closes #2068 \r\n\r\n* Added descriptions to Core and Additional modules that explain\r\n  importing/requiring non core methods/macros\r\n* pinned sphinx to 3.5.4 as hydomain doesn't support > 4.0 yet\r\n\r\nmade some changes to hydomain so that tag macros show up correctly and \r\nmacros now are prefixed with `macro` so that you know that you need to `require` them\r\ninstead of `import` them at a glance", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2070/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2061", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2061/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2061/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2061/events", "html_url": "https://github.com/hylang/hy/issues/2061", "id": 885231570, "node_id": "MDU6SXNzdWU4ODUyMzE1NzA=", "number": 2061, "title": "Python 3.10: required field \"lineno\" missing from alias", "user": {"login": "tianon", "id": 161631, "node_id": "MDQ6VXNlcjE2MTYzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/161631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tianon", "html_url": "https://github.com/tianon", "followers_url": "https://api.github.com/users/tianon/followers", "following_url": "https://api.github.com/users/tianon/following{/other_user}", "gists_url": "https://api.github.com/users/tianon/gists{/gist_id}", "starred_url": "https://api.github.com/users/tianon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tianon/subscriptions", "organizations_url": "https://api.github.com/users/tianon/orgs", "repos_url": "https://api.github.com/users/tianon/repos", "events_url": "https://api.github.com/users/tianon/events{/privacy}", "received_events_url": "https://api.github.com/users/tianon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-10T22:17:49Z", "updated_at": "2021-05-18T12:14:04Z", "closed_at": "2021-05-18T12:14:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python 3.10 has introduced a change that breaks Hy (feeling like a case of \"This Is The Way\" with Python pre-releases :trollface:).\r\n\r\nIt seems to be related to https://bugs.python.org/issue43798 (some potentially useful discussion in https://github.com/pytest-dev/pytest/issues/8539).\r\n\r\nHere's the full backtrace (on latest master; specifically e1150cf08106a727a1a3024044710576803a8292):\r\n\r\n```console\r\n$ python --version\r\nPython 3.10.0b1\r\n$ hy\r\nTraceback (most recent call last):\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 1648, in compile_eval_and_compile\r\n    hy_eval(new_expr + body,\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 1977, in hy_eval\r\n    eval(ast_compile(_ast, filename, \"exec\"),\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 62, in ast_compile\r\n    return compile(a, filename, mode, hy_ast_compile_flags)\r\nTypeError: required field \"lineno\" missing from alias\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/hy\", line 8, in <module>\r\n    from hy.cmdline import hy_main\r\n  File \"/opt/hylang/hy/hy/__init__.py\", line 14, in <module>\r\n    hy.importer._inject_builtins()\r\n  File \"/opt/hylang/hy/hy/importer.py\", line 178, in _inject_builtins\r\n    core = importlib.import_module('hy.core')\r\n  File \"/usr/local/lib/python3.10/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/opt/hylang/hy/hy/core/__init__.py\", line 1, in <module>\r\n    from .shadow import *\r\n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 879, in exec_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 1017, in get_code\r\n  File \"/opt/hylang/hy/hy/importer.py\", line 130, in _hy_source_to_code\r\n    data = hy_compile(hy_tree, module)\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 2066, in hy_compile\r\n    stdlib_ast = compiler.compile(mkexpr(\"eval-and-compile\", mkexpr(\"import\", \"hy\")))\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 379, in compile\r\n    raise e\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 370, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 364, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 1730, in compile_expression\r\n    return Result() + build_method(\r\n  File \"/opt/hylang/hy/hy/compiler.py\", line 1665, in compile_eval_and_compile\r\n    raise HyEvalError(str(e), self.filename, body, self.source)\r\nhy.errors.HyEvalError: \r\n  File \"[hy.models.Expression([\r\n  hy.models.Symbol('import'),\r\n  hy.models.Symbol('hy')])]\", line 1\r\n    ;; Copyright 2021 the authors.\r\n    ^----------------------------^\r\nrequired field \"lineno\" missing from alias\r\n\r\n```\r\n\r\n(I'm testing with the `Dockerfile` here in the repo by changing `python:3` to `python:3.10-rc`, but any way of getting a recent Python 3.10 pre-release should reproduce similarly.)", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2061/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2039", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2039/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2039/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2039/events", "html_url": "https://github.com/hylang/hy/pull/2039", "id": 860732233, "node_id": "MDExOlB1bGxSZXF1ZXN0NjE3NTMyMzQw", "number": 2039, "title": "Fix: hystartup affects tests", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-18T18:32:19Z", "updated_at": "2021-04-21T19:02:36Z", "closed_at": "2021-04-21T19:02:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2039", "html_url": "https://github.com/hylang/hy/pull/2039", "diff_url": "https://github.com/hylang/hy/pull/2039.diff", "patch_url": "https://github.com/hylang/hy/pull/2039.patch", "merged_at": "2021-04-21T19:02:35Z"}, "body": "closes #2029 also fixes macros not being able to find the hystartup module causing it to error out. ", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2039/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2027", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2027/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2027/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2027/events", "html_url": "https://github.com/hylang/hy/pull/2027", "id": 844096300, "node_id": "MDExOlB1bGxSZXF1ZXN0NjAzMzkxMzY5", "number": 2027, "title": "Fix `exec_module` usage", "user": {"login": "scauligi", "id": 15003857, "node_id": "MDQ6VXNlcjE1MDAzODU3", "avatar_url": "https://avatars.githubusercontent.com/u/15003857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scauligi", "html_url": "https://github.com/scauligi", "followers_url": "https://api.github.com/users/scauligi/followers", "following_url": "https://api.github.com/users/scauligi/following{/other_user}", "gists_url": "https://api.github.com/users/scauligi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scauligi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scauligi/subscriptions", "organizations_url": "https://api.github.com/users/scauligi/orgs", "repos_url": "https://api.github.com/users/scauligi/repos", "events_url": "https://api.github.com/users/scauligi/events{/privacy}", "received_events_url": "https://api.github.com/users/scauligi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-30T05:40:32Z", "updated_at": "2021-04-06T09:44:06Z", "closed_at": "2021-04-02T17:36:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2027", "html_url": "https://github.com/hylang/hy/pull/2027", "diff_url": "https://github.com/hylang/hy/pull/2027.diff", "patch_url": "https://github.com/hylang/hy/pull/2027.patch", "merged_at": "2021-04-02T17:36:06Z"}, "body": "Turns out `exec_module` requires the module be supplied as an argument; this broke HYSTARTUP after #1989.\r\nAlso fixes a test that was incorrectly passing.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2027/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2021", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2021/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2021/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2021/events", "html_url": "https://github.com/hylang/hy/issues/2021", "id": 842777130, "node_id": "MDU6SXNzdWU4NDI3NzcxMzA=", "number": 2021, "title": "`hy2py` cannot import local module during compile time", "user": {"login": "peaceamongworlds", "id": 48478251, "node_id": "MDQ6VXNlcjQ4NDc4MjUx", "avatar_url": "https://avatars.githubusercontent.com/u/48478251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peaceamongworlds", "html_url": "https://github.com/peaceamongworlds", "followers_url": "https://api.github.com/users/peaceamongworlds/followers", "following_url": "https://api.github.com/users/peaceamongworlds/following{/other_user}", "gists_url": "https://api.github.com/users/peaceamongworlds/gists{/gist_id}", "starred_url": "https://api.github.com/users/peaceamongworlds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peaceamongworlds/subscriptions", "organizations_url": "https://api.github.com/users/peaceamongworlds/orgs", "repos_url": "https://api.github.com/users/peaceamongworlds/repos", "events_url": "https://api.github.com/users/peaceamongworlds/events{/privacy}", "received_events_url": "https://api.github.com/users/peaceamongworlds/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-28T16:43:20Z", "updated_at": "2021-03-29T20:13:45Z", "closed_at": "2021-03-29T20:13:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`eggs.hy`:\r\n```hy\r\n(print 42)\r\n```\r\n`spam.hy`:\r\n```hy\r\n(eval-when-compile (import eggs))\r\n```\r\n\r\n`hy2py` fails to compile `spam.hy`:\r\n```bash\r\n$ > hy2py spam.hy \r\nTraceback (most recent call last):\r\n  File \"/usr/bin/hy2py\", line 12, in <module>\r\n    sys.exit(hy2py_main())\r\n  File \"spam.hy\", line 2, in <module>\r\n    (import eggs))\r\nhy.errors.HyEvalError: \r\n  File \"[HyExpression([\r\n  HySymbol('import'),\r\n  HySymbol('eggs')])]\", line 1\r\n    (eval-when-compile\r\n    ^----------------^\r\nNo module named 'eggs'\r\n```\r\nBut `hy` itself runs fine:\r\n```bash\r\n$ > hy spam.hy \r\n42\r\n```\r\nNote: this seems to be  unaffected by whether `pyc` files are present for any of the files.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2016", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2016/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2016/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2016/events", "html_url": "https://github.com/hylang/hy/issues/2016", "id": 839093968, "node_id": "MDU6SXNzdWU4MzkwOTM5Njg=", "number": 2016, "title": "Cannot `require` module from a package", "user": {"login": "peaceamongworlds", "id": 48478251, "node_id": "MDQ6VXNlcjQ4NDc4MjUx", "avatar_url": "https://avatars.githubusercontent.com/u/48478251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peaceamongworlds", "html_url": "https://github.com/peaceamongworlds", "followers_url": "https://api.github.com/users/peaceamongworlds/followers", "following_url": "https://api.github.com/users/peaceamongworlds/following{/other_user}", "gists_url": "https://api.github.com/users/peaceamongworlds/gists{/gist_id}", "starred_url": "https://api.github.com/users/peaceamongworlds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peaceamongworlds/subscriptions", "organizations_url": "https://api.github.com/users/peaceamongworlds/orgs", "repos_url": "https://api.github.com/users/peaceamongworlds/repos", "events_url": "https://api.github.com/users/peaceamongworlds/events{/privacy}", "received_events_url": "https://api.github.com/users/peaceamongworlds/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-23T20:26:55Z", "updated_at": "2021-03-29T18:22:38Z", "closed_at": "2021-03-29T18:22:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": " The following are all valid:\r\n```hy\r\n$ > hy --spy --repl-output-fn=hy.contrib.pprint.pformat\r\nimport hy\r\nhy 0.20.0+132.g2a6b79f1 using CPython(heads/makepkg-dirty:ba251c2ae66) 3.10.0a6+ on Linux\r\n=> (require hy.contrib.walk)\r\nhy.macros.require('hy.contrib.walk', None, assignments='ALL', prefix='hy.contrib.walk')\r\nNone\r\n=> (import hy.contrib.walk)\r\nimport hy.contrib.walk\r\nNone\r\n=> (require [hy.contrib.walk :as w])\r\nhy.macros.require('hy.contrib.walk', None, assignments='ALL', prefix='w')\r\nNone\r\n=> (import [hy.contrib.walk :as w])\r\nimport hy.contrib.walk as w\r\nNone\r\n=> (import [hy.contrib [walk]])\r\nfrom hy.contrib import walk\r\nNone\r\n```\r\nHowever, the following fails:\r\n```hy\r\n=> (require [hy.contrib [walk]])\r\nTraceback (most recent call last):\r\n  File \"stdin-fc566da3a366533698786e10deb0bc456fb8d19e\", line 1, in <module>\r\n    (require [hy.contrib [walk]])\r\nhy.errors.HyRequireError: The module <module 'hy.contrib' from '/home/peter/Programming/hy/hy-source/hy/hy/contrib/__init__.py'> has no macros\r\n```\r\nAs I understand, `import` and `require` should allow for the same syntax, and given that the previous `require` forms work as expected, I think that the last one should as well.\r\n\r\nJust to clarify, I think that `(require [hy.contrib [walk]])` should have the same effect as `(require [hy.contrib.walk :as walk])`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2016/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/2010", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2010/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2010/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2010/events", "html_url": "https://github.com/hylang/hy/pull/2010", "id": 836864111, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk3MzI0MTU3", "number": 2010, "title": "Fix: test eval can see locals", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-20T17:10:14Z", "updated_at": "2021-03-21T22:04:36Z", "closed_at": "2021-03-21T22:04:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2010", "html_url": "https://github.com/hylang/hy/pull/2010", "diff_url": "https://github.com/hylang/hy/pull/2010.diff", "patch_url": "https://github.com/hylang/hy/pull/2010.patch", "merged_at": "2021-03-21T22:04:35Z"}, "body": "closes #1041", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2010/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2009", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2009/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2009/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2009/events", "html_url": "https://github.com/hylang/hy/pull/2009", "id": 836804805, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk3Mjc4NTA5", "number": 2009, "title": "Fix: Add test for empty decorator call", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-20T13:13:01Z", "updated_at": "2021-03-21T22:06:39Z", "closed_at": "2021-03-21T22:06:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/2009", "html_url": "https://github.com/hylang/hy/pull/2009", "diff_url": "https://github.com/hylang/hy/pull/2009.diff", "patch_url": "https://github.com/hylang/hy/pull/2009.patch", "merged_at": "2021-03-21T22:06:38Z"}, "body": "closes #1565", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2009/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/2004", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/2004/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/2004/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/2004/events", "html_url": "https://github.com/hylang/hy/issues/2004", "id": 833303935, "node_id": "MDU6SXNzdWU4MzMzMDM5MzU=", "number": 2004, "title": "Incorrect errors displayed in HyREPL", "user": {"login": "scauligi", "id": 15003857, "node_id": "MDQ6VXNlcjE1MDAzODU3", "avatar_url": "https://avatars.githubusercontent.com/u/15003857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scauligi", "html_url": "https://github.com/scauligi", "followers_url": "https://api.github.com/users/scauligi/followers", "following_url": "https://api.github.com/users/scauligi/following{/other_user}", "gists_url": "https://api.github.com/users/scauligi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scauligi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scauligi/subscriptions", "organizations_url": "https://api.github.com/users/scauligi/orgs", "repos_url": "https://api.github.com/users/scauligi/repos", "events_url": "https://api.github.com/users/scauligi/events{/privacy}", "received_events_url": "https://api.github.com/users/scauligi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-17T00:51:55Z", "updated_at": "2021-04-22T12:29:20Z", "closed_at": "2021-04-22T12:29:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```hy\r\nhy 0.20.0+89.g33ff26a3.dirty using CPython(default) 3.9.2 on Linux\r\n\r\n=> (defn a [a a])\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.9/code.py\", line 63, in runsource\r\n    code = self.compile(source, filename, symbol)\r\n  File \"/usr/lib/python3.9/codeop.py\", line 178, in __call__\r\n    return _maybe_compile(self.compiler, source, filename, symbol)\r\n  File \"/usr/lib/python3.9/codeop.py\", line 143, in __call__\r\n    codeob = compile(source, filename, symbol, self.flags, True)\r\n  File \"stdin-c6000d2ccd1df263b2bd313815bfae618dc57cf3\", line 1\r\nSyntaxError: duplicate argument 'a' in function definition\r\nNone\r\n\r\n=> ; but...\r\n\r\n=> (defn a [/])\r\nTraceback (most recent call last):\r\n  File \"stdin-c4590d5b379ab946ccd4a96ce4e897f3dddb0494\", line 1, in <module>\r\n    (defn a [/])\r\n  File \"<stdin>\", line 1\r\n    (defn a [/])\r\n            ^\r\nhy.errors.HySyntaxError: positional only delimiter '/' must have an argument\r\n\r\n=> (defn a [a a])  ; wrong error is printed below!\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1\r\n    (defn a [/])\r\n            ^\r\nhy.errors.HySyntaxError: positional only delimiter '/' must have an argument\r\n```\r\n\r\nI think the error handling in the HyREPL will need a little refactoring to catch this one. The syntax error for duplicate arguments (and possibly other errors) somehow skips our try/except handling that catches most other syntax errors and simplifies stack traces, so when it gets printed it's using stale error info.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/2004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/2004/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1993", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1993/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1993/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1993/events", "html_url": "https://github.com/hylang/hy/issues/1993", "id": 831360483, "node_id": "MDU6SXNzdWU4MzEzNjA0ODM=", "number": 1993, "title": "`with` forms cannot parse multiple non-named with-exprs", "user": {"login": "scauligi", "id": 15003857, "node_id": "MDQ6VXNlcjE1MDAzODU3", "avatar_url": "https://avatars.githubusercontent.com/u/15003857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scauligi", "html_url": "https://github.com/scauligi", "followers_url": "https://api.github.com/users/scauligi/followers", "following_url": "https://api.github.com/users/scauligi/following{/other_user}", "gists_url": "https://api.github.com/users/scauligi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scauligi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scauligi/subscriptions", "organizations_url": "https://api.github.com/users/scauligi/orgs", "repos_url": "https://api.github.com/users/scauligi/repos", "events_url": "https://api.github.com/users/scauligi/events{/privacy}", "received_events_url": "https://api.github.com/users/scauligi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-03-15T02:52:22Z", "updated_at": "2021-04-02T17:34:38Z", "closed_at": "2021-04-02T17:34:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, `with` parses like so (simplification mine):\r\n```\r\n=> (with [a b c d e] ...)\r\nwith b as a:\r\n  with d as c:\r\n    with e:\r\n      ...\r\n```\r\n\r\nAs a result, there is no way of writing multiple non-named forms, nor is there any way to have a non-named form anywhere other than the end.\r\n\r\nI propose the following instead, with a set of outer brackets for the with-exprs and inner brackets for any named with-exprs:\r\n\r\n```\r\n=> (with [[a b] c d [e f]] ...)\r\nwith b as a, c, d, f as e:\r\n  ...\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1970", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1970/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1970/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1970/events", "html_url": "https://github.com/hylang/hy/issues/1970", "id": 807017591, "node_id": "MDU6SXNzdWU4MDcwMTc1OTE=", "number": 1970, "title": "Strange behavior or `#docs` / `__macros__` and `__tags__`", "user": {"login": "scauligi", "id": 15003857, "node_id": "MDQ6VXNlcjE1MDAzODU3", "avatar_url": "https://avatars.githubusercontent.com/u/15003857?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scauligi", "html_url": "https://github.com/scauligi", "followers_url": "https://api.github.com/users/scauligi/followers", "following_url": "https://api.github.com/users/scauligi/following{/other_user}", "gists_url": "https://api.github.com/users/scauligi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scauligi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scauligi/subscriptions", "organizations_url": "https://api.github.com/users/scauligi/orgs", "repos_url": "https://api.github.com/users/scauligi/repos", "events_url": "https://api.github.com/users/scauligi/events{/privacy}", "received_events_url": "https://api.github.com/users/scauligi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-12T07:30:31Z", "updated_at": "2021-02-23T06:07:44Z", "closed_at": "2021-02-23T06:07:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Minimum viable test case, must be run from its own file (not from the REPL):\r\n```hy\r\n;; (deftag bogus [-] -)  ; Uncomment to get help for `None`\r\n;; (macroexpand '#@ (foo (defn bar [])))  ; Uncomment to get help for `#@`\r\n#doc @\r\n```\r\nOk so this one is a little weird but I think I know why it's happening.\r\n**TL;DR** Hy patches in `__macros__` and `__tags__` to a module only on an as-needed basis and only during compilation. As a result, you can end up with Hy modules that don't have these defined.\r\n\r\nObserved symptoms:\r\n- If you run the above code, the `#doc @` fails with `'__tags__' is not defined`. \r\n- If you uncomment the `(deftag)`, the module now defines a `__tags__`, but it's only populated with the tag `bogus` &mdash; thus the `#doc @` brings up the help page for `None`.\r\n- If you uncomment the `(macroexpand)`, then Hy finally brings the `@` tag macro into `__tags__`, and you get the proper help page.\r\n\r\n**Further weirdness!**\r\nCreate two files like so:\r\n```hy\r\n;; file requireme.hy\r\n(defn bogus [-] -)\r\n#@(bogus (defn foo []))\r\n\r\n;; file runme.hy\r\n(require requireme)\r\n#doc @\r\n```\r\n\r\nWhen you run `runme.hy`, you get the help page for `None`.\r\nWithout changing anything, run it again &mdash; now it fails with `'__tags__' is not defined`!\r\n\r\nOn the first run the compiler patches in `__tags__` and `__macros__` for the compilation process, but every subsequent run skips compilation and loads the pyc files from the pycache &mdash; and no code was ever produced to actually create a `__tags__` in `runme.hy`.\r\n\r\nSo far I only foresee this as a weird edge case of `#doc` and don't expect this leading to any real bugs, but it does produce confusing behavior for anyone doing introspection on Hy modules.\r\n\r\nPossible solutions:\r\n- Always add `__macros__` and `__tags__` to every Hy module at runtime, possibly via the `import hy` statement, and pre-populate with the core macros/tags.\r\n- Document that `#doc` has strange behavior if you use it outside the REPL (and also fix the `test-doc` test, that's how I stumbled across this).\r\n- Something else?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1970/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1967", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1967/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1967/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1967/events", "html_url": "https://github.com/hylang/hy/issues/1967", "id": 806841983, "node_id": "MDU6SXNzdWU4MDY4NDE5ODM=", "number": 1967, "title": "Require fails to load tags with same name as macro in same module", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-12T00:01:27Z", "updated_at": "2021-02-21T15:42:51Z", "closed_at": "2021-02-21T15:42:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```hy\r\n;; foo.hy\r\n(deftag amacro [-name] `(print f\"Hello {~-name}\"))\r\n(defmacro amacro [-name] `(print f\"Hello {~-name}\"))\r\n```\r\n\r\n```hy\r\n;; bar.hy\r\n(require [foo [amacro]])\r\n;; (require [foo [*]]) ; This doesn't work either\r\n\r\n(amacro \"Allie\") ; => (print \"Hello Allie\")\r\n#amacro \"Allie\" ;  'amacro' is not a defined tag amcro\r\n```\r\n\r\nThis seems unexpected since we have `#doc` and `(doc ...)` macros that work just fine. \r\nThis seems like a pretty easy fix, changing `require` to import both just requires changing it to:\r\n```python\r\nif _name not in source_module.__macros__ and _name not in source_module.__tags__:\r\n    raise HyRequireError('Could not require name {} from {}'.format(\r\n        _name, source_module))\r\n\r\nif _name in source_module.__macros__:\r\n    target_macros[alias] = source_macros[_name]\r\nif _name in source_module.__tags__:\r\n    target_tags[alias] = source_tags[_name]\r\n```\r\nBut is this expected behavior? It's not documented as such as far as I can tell.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1967/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1965", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1965/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1965/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1965/events", "html_url": "https://github.com/hylang/hy/issues/1965", "id": 806764756, "node_id": "MDU6SXNzdWU4MDY3NjQ3NTY=", "number": 1965, "title": "Exceptions in tag macros crash the compiler", "user": {"login": "allison-casey", "id": 18231154, "node_id": "MDQ6VXNlcjE4MjMxMTU0", "avatar_url": "https://avatars.githubusercontent.com/u/18231154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allison-casey", "html_url": "https://github.com/allison-casey", "followers_url": "https://api.github.com/users/allison-casey/followers", "following_url": "https://api.github.com/users/allison-casey/following{/other_user}", "gists_url": "https://api.github.com/users/allison-casey/gists{/gist_id}", "starred_url": "https://api.github.com/users/allison-casey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allison-casey/subscriptions", "organizations_url": "https://api.github.com/users/allison-casey/orgs", "repos_url": "https://api.github.com/users/allison-casey/repos", "events_url": "https://api.github.com/users/allison-casey/events{/privacy}", "received_events_url": "https://api.github.com/users/allison-casey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-11T21:40:11Z", "updated_at": "2021-02-21T15:42:51Z", "closed_at": "2021-02-21T15:42:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Just ran into this. An exception raised in a tag macro will cause an internal compiler bug and crash while the same in a regular macro wont. \r\n\r\n```hy\r\n(deftag a []\r\n  (raise (ValueError)))\r\n\r\n(defmacro b []\r\n  (raise (ValueError)))\r\n\r\n(b) ; => ValueError\r\n;; (a) ; => Process Hy exited abnormally with code 1 (i'm a dumb dumb and this isn't what i mean to write :/\r\n#a() ; => Process Hy exited abnormally with code 1 \r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1965/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1962", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1962/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1962/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1962/events", "html_url": "https://github.com/hylang/hy/issues/1962", "id": 805324343, "node_id": "MDU6SXNzdWU4MDUzMjQzNDM=", "number": 1962, "title": "tox config doesn't match CI", "user": {"login": "jams2", "id": 29293125, "node_id": "MDQ6VXNlcjI5MjkzMTI1", "avatar_url": "https://avatars.githubusercontent.com/u/29293125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jams2", "html_url": "https://github.com/jams2", "followers_url": "https://api.github.com/users/jams2/followers", "following_url": "https://api.github.com/users/jams2/following{/other_user}", "gists_url": "https://api.github.com/users/jams2/gists{/gist_id}", "starred_url": "https://api.github.com/users/jams2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jams2/subscriptions", "organizations_url": "https://api.github.com/users/jams2/orgs", "repos_url": "https://api.github.com/users/jams2/repos", "events_url": "https://api.github.com/users/jams2/events{/privacy}", "received_events_url": "https://api.github.com/users/jams2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-10T09:14:18Z", "updated_at": "2021-02-20T13:16:37Z", "closed_at": "2021-02-20T13:16:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It would be good to have a local testing config that matches what's happening with TravisCI. Results from running on the master branch on my machine currently are:\r\n\r\n```\r\nERROR:   py27: commands failed\r\nERROR:   pypy: could not install deps [-rrequirements-dev.txt]; v = InvocationError('/home/joshua/build/hy-dev/.tox/pypy/bin/python -m pip install -rrequirements-dev.txt', 1)\r\nERROR:   py34: could not install deps [-rrequirements-dev.txt]; v = InvocationError('/home/joshua/build/hy-dev/.tox/py34/bin/python -m pip install -rrequirements-dev.txt', 1)\r\nERROR:   py35: commands failed\r\n  py36: commands succeeded\r\nERROR:   pypy3: commands failed\r\nERROR:   flake8: commands failed\r\n```\r\n\r\nA few suggestions:\r\n- I could start with dropping unsupported Python versions - judging from Travis this is anything < 3.6?\r\n- Travis is running pypy3 with Python 3.6, this could potentially be updated to 3.7.\r\n- The list of violations from flake8 is pretty long. Have you considered using an auto formatter, like black?\r\n\r\nAnother possibility to investigate would be using Docker for building testing environments, which would save on having to have each of the interpreter versions installed locally.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1962/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1946", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1946/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1946/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1946/events", "html_url": "https://github.com/hylang/hy/issues/1946", "id": 792657205, "node_id": "MDU6SXNzdWU3OTI2NTcyMDU=", "number": 1946, "title": "``doc`` doesn't work with names that require mangling", "user": {"login": "peaceamongworlds", "id": 48478251, "node_id": "MDQ6VXNlcjQ4NDc4MjUx", "avatar_url": "https://avatars.githubusercontent.com/u/48478251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peaceamongworlds", "html_url": "https://github.com/peaceamongworlds", "followers_url": "https://api.github.com/users/peaceamongworlds/followers", "following_url": "https://api.github.com/users/peaceamongworlds/following{/other_user}", "gists_url": "https://api.github.com/users/peaceamongworlds/gists{/gist_id}", "starred_url": "https://api.github.com/users/peaceamongworlds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peaceamongworlds/subscriptions", "organizations_url": "https://api.github.com/users/peaceamongworlds/orgs", "repos_url": "https://api.github.com/users/peaceamongworlds/repos", "events_url": "https://api.github.com/users/peaceamongworlds/events{/privacy}", "received_events_url": "https://api.github.com/users/peaceamongworlds/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-23T21:53:29Z", "updated_at": "2021-02-11T13:13:58Z", "closed_at": "2021-02-11T13:13:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The current implementation of ``doc`` doesn't work with macro names that require mangling, like ``->``.\r\n\r\nIt seems that this would be easy to change by just adding a call to ``mangle`` in the definition of ``doc``:\r\n```hy\r\n(defmacro doc [symbol]\r\n  `(help (.get __macros__ (mangle '~symbol) None)))\r\n```\r\nHowever, would it not make sense to combine ``help``, ``doc``, and ``#doc`` and have a single macro for looking up documentation? Especially as by default python's ``help`` isn't that helpful, showing the mangled names and opening up in a pager.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1946/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1944", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1944/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1944/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1944/events", "html_url": "https://github.com/hylang/hy/issues/1944", "id": 792636641, "node_id": "MDU6SXNzdWU3OTI2MzY2NDE=", "number": 1944, "title": "Compiler crash from invalid use of `#@`", "user": {"login": "peaceamongworlds", "id": 48478251, "node_id": "MDQ6VXNlcjQ4NDc4MjUx", "avatar_url": "https://avatars.githubusercontent.com/u/48478251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peaceamongworlds", "html_url": "https://github.com/peaceamongworlds", "followers_url": "https://api.github.com/users/peaceamongworlds/followers", "following_url": "https://api.github.com/users/peaceamongworlds/following{/other_user}", "gists_url": "https://api.github.com/users/peaceamongworlds/gists{/gist_id}", "starred_url": "https://api.github.com/users/peaceamongworlds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peaceamongworlds/subscriptions", "organizations_url": "https://api.github.com/users/peaceamongworlds/orgs", "repos_url": "https://api.github.com/users/peaceamongworlds/repos", "events_url": "https://api.github.com/users/peaceamongworlds/events{/privacy}", "received_events_url": "https://api.github.com/users/peaceamongworlds/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-23T19:49:31Z", "updated_at": "2021-01-28T03:24:00Z", "closed_at": "2021-01-28T03:24:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```hy\r\n$ > hy\r\nhy 0.19.0+36.g14b17afd using CPython(default) 3.9.1 on Linux\r\n=> (#@ a\r\n... b)\r\nTraceback (most recent call last):\r\n  File \"/home/peter/Programming/hy/hy-source/venv/bin/hy\", line 12, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/usr/lib/python3.9/code.py\", line 232, in interact\r\n    more = self.push(line)\r\n  File \"/usr/lib/python3.9/code.py\", line 258, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"/usr/lib/python3.9/code.py\", line 63, in runsource\r\n    code = self.compile(source, filename, symbol)\r\n  File \"/usr/lib/python3.9/codeop.py\", line 178, in __call__\r\n    return _maybe_compile(self.compiler, source, filename, symbol)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/errors.py\", line 62, in __init__\r\n    self.compute_lineinfo(expression, filename, source, lineno, colno)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/errors.py\", line 94, in compute_lineinfo\r\n    self.arrow_offset = len(self.text[0])\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 Traceback (most recent call last):\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/compiler.py\", line 435, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/compiler.py\", line 429, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/compiler.py\", line 1778, in compile_expression\r\n    return Result() + build_method(\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/compiler.py\", line 945, in compile_decorate_expression\r\n    raise self._syntax_error(args[-1],\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/compiler.py\", line 454, in _syntax_error\r\n    return HySyntaxError(message, expr, self.filename, self.source)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/errors.py\", line 62, in __init__\r\n    self.compute_lineinfo(expression, filename, source, lineno, colno)\r\n  File \"/home/peter/Programming/hy/hy-source/hy/hy/errors.py\", line 94, in compute_lineinfo\r\n    self.arrow_offset = len(self.text[0])\r\nIndexError: string index out of range\r\n```\r\nOnly seems to happen with the `#@` tag macro. Note the split line - doesn't happen otherwise.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1938", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1938/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1938/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1938/events", "html_url": "https://github.com/hylang/hy/issues/1938", "id": 782919332, "node_id": "MDU6SXNzdWU3ODI5MTkzMzI=", "number": 1938, "title": "hy.extra.anaphoric macros don't descend into f-strings", "user": {"login": "max-l", "id": 192660, "node_id": "MDQ6VXNlcjE5MjY2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/192660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/max-l", "html_url": "https://github.com/max-l", "followers_url": "https://api.github.com/users/max-l/followers", "following_url": "https://api.github.com/users/max-l/following{/other_user}", "gists_url": "https://api.github.com/users/max-l/gists{/gist_id}", "starred_url": "https://api.github.com/users/max-l/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/max-l/subscriptions", "organizations_url": "https://api.github.com/users/max-l/orgs", "repos_url": "https://api.github.com/users/max-l/repos", "events_url": "https://api.github.com/users/max-l/events{/privacy}", "received_events_url": "https://api.github.com/users/max-l/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-10T22:07:52Z", "updated_at": "2021-02-08T13:33:53Z", "closed_at": "2021-02-08T13:33:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nf-string works in these functions: \r\n\r\n```\r\n(defn p [x] f\"->{(+ 3 x)}\")\r\n\r\n=> (p 4)\r\n'->7'\r\n\r\n((fn [x] f\"->{(+ 3 x)}\") 4)\r\n'->7'\r\n\r\n```\r\nBut not in anonymous fonction defined with #%\r\n\r\n\r\n```\r\n(require [hy.extra.anaphoric [*]])\r\n\r\n(#%(f\"->{(+ 3 %1)}\") 4)\r\nstdin-4625cfffcbb8b22a8d640f29313ec5e7b2169a0f:1: SyntaxWarning: 'str' object is not callable; perhaps you missed a comma?\r\n  (#%(f\"->{(+ 3 %1)}\") 4)\r\nTraceback (most recent call last):\r\n  File \"stdin-4625cfffcbb8b22a8d640f29313ec5e7b2169a0f\", line 1, in <module>\r\n    (#%(f\"->{(+ 3 %1)}\") 4)\r\nTypeError: <lambda>() takes 0 positional arguments but 1 was given\r\n\r\n\r\n```\r\n\r\n hy --version\r\n\r\nhy 0.19.0\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1921", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1921/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1921/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1921/events", "html_url": "https://github.com/hylang/hy/issues/1921", "id": 746524455, "node_id": "MDU6SXNzdWU3NDY1MjQ0NTU=", "number": 1921, "title": "curses and SIGWINCH do not work properly with Hy.", "user": {"login": "atisharma", "id": 1932398, "node_id": "MDQ6VXNlcjE5MzIzOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1932398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atisharma", "html_url": "https://github.com/atisharma", "followers_url": "https://api.github.com/users/atisharma/followers", "following_url": "https://api.github.com/users/atisharma/following{/other_user}", "gists_url": "https://api.github.com/users/atisharma/gists{/gist_id}", "starred_url": "https://api.github.com/users/atisharma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atisharma/subscriptions", "organizations_url": "https://api.github.com/users/atisharma/orgs", "repos_url": "https://api.github.com/users/atisharma/repos", "events_url": "https://api.github.com/users/atisharma/events{/privacy}", "received_events_url": "https://api.github.com/users/atisharma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-11-19T12:06:59Z", "updated_at": "2022-01-27T02:46:27Z", "closed_at": "2022-01-27T02:46:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "After importing curses under hy, curses is unable to detect the size of the terminal as it is resized.\r\nThis manifests as curses.LINES and curses.COLS not being updated, stdscr.getmaxyx not working and so on.\r\n\r\nHowever, the workaround of launching the hy program from python with:\r\n```\r\nimport hy\r\nimport curses\r\nfrom main import main_event_loop\r\n\r\nif __name__ == \"__main__\":\r\n    curses.wrapper(main_event_loop, ...)\r\n```\r\nallows curses to dynamically detect the size of the terminal.\r\n\r\nI conclude therefore the problem is with the hy binary. My (limited) understanding acquired during tracking down the source of this problem is that curses uses the SIGWINCH signal, so perhaps that is a place to look.\r\n\r\nVoid linux x86 64bit, python 3.9.0\r\nFreebsd 12.2, python 3.8.6\r\nhy 0.19.0 (reported by pip) installed from git master branch via pip", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1921/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1920", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1920/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1920/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1920/events", "html_url": "https://github.com/hylang/hy/issues/1920", "id": 708061794, "node_id": "MDU6SXNzdWU3MDgwNjE3OTQ=", "number": 1920, "title": "`setv` in `defclass` with odd number of arguments crashes the compiler", "user": {"login": "TatriX", "id": 703150, "node_id": "MDQ6VXNlcjcwMzE1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/703150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TatriX", "html_url": "https://github.com/TatriX", "followers_url": "https://api.github.com/users/TatriX/followers", "following_url": "https://api.github.com/users/TatriX/following{/other_user}", "gists_url": "https://api.github.com/users/TatriX/gists{/gist_id}", "starred_url": "https://api.github.com/users/TatriX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TatriX/subscriptions", "organizations_url": "https://api.github.com/users/TatriX/orgs", "repos_url": "https://api.github.com/users/TatriX/repos", "events_url": "https://api.github.com/users/TatriX/events{/privacy}", "received_events_url": "https://api.github.com/users/TatriX/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-24T10:44:24Z", "updated_at": "2020-12-06T16:59:21Z", "closed_at": "2020-12-06T16:59:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "  The following code crashes the compiler:\r\n```lisp\r\n(import csv)\r\n(defclass my-dialect [csv.Dialect]\r\n  (setv lineterminator \"\\n\")\r\n  (setv delimiter = \";\")\r\n  (setv quotechar = \"\\\"\")\r\n  (setv quoting csv.QUOTE-MINIMAL))\r\n```\r\n\r\nAnd result:\r\n\r\n```lisp\r\n% hy\r\nhy 0.19.0 using CPython(default) 3.8.5 on Linux\r\n=> (import csv)\r\n=> (defclass my-dialect [csv.Dialect]\r\n...   (setv lineterminator \"\\n\")\r\n...   (setv delimiter = \";\")\r\n...   (setv quotechar = \"\\\"\")\r\n...   (setv quoting csv.QUOTE-MINIMAL))\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/hy\", line 12, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/usr/lib/python3.8/code.py\", line 232, in interact\r\n    more = self.push(line)\r\n  File \"/usr/lib/python3.8/code.py\", line 258, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"/usr/lib/python3.8/code.py\", line 63, in runsource\r\n    code = self.compile(source, filename, symbol)\r\n  File \"/usr/lib/python3.8/codeop.py\", line 176, in __call__\r\n    return _maybe_compile(self.compiler, source, filename, symbol)\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 Traceback (most recent call last):\r\n  File \"/usr/lib/python3.8/site-packages/hy/compiler.py\", line 438, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/usr/lib/python3.8/site-packages/hy/compiler.py\", line 432, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/usr/lib/python3.8/site-packages/hy/compiler.py\", line 1782, in compile_expression\r\n    return Result() + build_method(\r\n  File \"/usr/lib/python3.8/site-packages/hy/compiler.py\", line 1642, in compile_class_expression\r\n    e = self.compile(self._rewire_init(\r\n  File \"/usr/lib/python3.8/site-packages/hy/compiler.py\", line 1674, in _rewire_init\r\n    k, v = (decls.pop(0), decls.pop(0))\r\nIndexError: pop from empty list\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1920/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1911", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1911/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1911/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1911/events", "html_url": "https://github.com/hylang/hy/issues/1911", "id": 651332011, "node_id": "MDU6SXNzdWU2NTEzMzIwMTE=", "number": 1911, "title": "Can't `hy.eval` a `require` form in Python", "user": {"login": "zcaudate", "id": 1455572, "node_id": "MDQ6VXNlcjE0NTU1NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1455572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zcaudate", "html_url": "https://github.com/zcaudate", "followers_url": "https://api.github.com/users/zcaudate/followers", "following_url": "https://api.github.com/users/zcaudate/following{/other_user}", "gists_url": "https://api.github.com/users/zcaudate/gists{/gist_id}", "starred_url": "https://api.github.com/users/zcaudate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zcaudate/subscriptions", "organizations_url": "https://api.github.com/users/zcaudate/orgs", "repos_url": "https://api.github.com/users/zcaudate/repos", "events_url": "https://api.github.com/users/zcaudate/events{/privacy}", "received_events_url": "https://api.github.com/users/zcaudate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-06T08:01:23Z", "updated_at": "2020-08-10T14:39:01Z", "closed_at": "2020-08-10T14:39:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting an error when doing a `require` using the `hy.eval` functionality.\r\n\r\nThe version of python works when hy is loaded:\r\n\r\n```\r\nhy 0.18.0 using CPython(default) 3.7.5 on Darwin                                                                                                                                \r\n=> (require  [hy.contrib.walk [let]])                                                                                                                                           \r\nTrue\r\n```  \r\n\r\nbut fails when doing the same thing in python.\r\n\r\n```\r\n$ python\r\nPython 3.7.5 (default, Jun  8 2020, 17:36:22) \r\n[Clang 11.0.3 (clang-1103.0.32.29)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import hy\r\n>>> hy.eval(hy.read_str(\"(require  [hy.contrib.walk [let]])\"))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/chris/.pyenv/versions/3.7.5/lib/python3.7/site-packages/hy/compiler.py\", line 2099, in hy_eval\r\n    module.__dict__, locals)\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/chris/.pyenv/versions/3.7.5/lib/python3.7/site-packages/hy/macros.py\", line 170, in require\r\n    if _same_modules(source_module, target_module):\r\n  File \"/Users/chris/.pyenv/versions/3.7.5/lib/python3.7/site-packages/hy/macros.py\", line 118, in _same_modules\r\n    target_filename = _get_filename(target_module)\r\n  File \"/Users/chris/.pyenv/versions/3.7.5/lib/python3.7/site-packages/hy/macros.py\", line 109, in _get_filename\r\n    filename = loader.get_filename()\r\nAttributeError: type object 'BuiltinImporter' has no attribute 'get_filename'\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1903", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1903/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1903/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1903/events", "html_url": "https://github.com/hylang/hy/issues/1903", "id": 642699880, "node_id": "MDU6SXNzdWU2NDI2OTk4ODA=", "number": 1903, "title": "`hy2py` doesn't work for `require` multiple modules", "user": {"login": "fatestigma", "id": 3814129, "node_id": "MDQ6VXNlcjM4MTQxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/3814129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fatestigma", "html_url": "https://github.com/fatestigma", "followers_url": "https://api.github.com/users/fatestigma/followers", "following_url": "https://api.github.com/users/fatestigma/following{/other_user}", "gists_url": "https://api.github.com/users/fatestigma/gists{/gist_id}", "starred_url": "https://api.github.com/users/fatestigma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fatestigma/subscriptions", "organizations_url": "https://api.github.com/users/fatestigma/orgs", "repos_url": "https://api.github.com/users/fatestigma/repos", "events_url": "https://api.github.com/users/fatestigma/events{/privacy}", "received_events_url": "https://api.github.com/users/fatestigma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-22T02:22:25Z", "updated_at": "2020-07-09T18:55:51Z", "closed_at": "2020-07-09T18:55:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It seems that `hy2py` only generates the last module in `(require ...)`. It might be something wrong within `hy_compile` according to the generated AST.\r\n\r\nExample source file `test.hy`:\r\n```hy\r\n(require\r\n [hy.contrib.loop [loop]]\r\n [hy.contrib.walk [let]])\r\n```\r\n\r\nRun with `hy2py -sa test.hy`:\r\n```\r\nHyExpression([\r\n  HySymbol('do'),\r\n  HyExpression([\r\n    HySymbol('require'),\r\n    HyList([\r\n      HySymbol('hy.contrib.loop'),\r\n      HyList([\r\n        HySymbol('loop')])]),\r\n    HyList([\r\n      HySymbol('hy.contrib.walk'),\r\n      HyList([\r\n        HySymbol('let')])])])])\r\n\r\n\r\nModule(\r\n    body=[Import(names=[alias(name='hy.macros', asname=None)]),\r\n        Expr(\r\n            value=Call(\r\n                func=Attribute(value=Attribute(value=Name(id='hy'), attr='macros'), attr='require'),\r\n                args=[Str(s='hy.contrib.walk'), Name(id='None')],\r\n                keywords=[\r\n                    keyword(arg='assignments', value=List(elts=[List(elts=[Str(s='let'), Str(s='let')])])),\r\n                    keyword(arg='prefix', value=Str(s=''))]))])\r\n\r\n\r\nimport hy.macros\r\nhy.macros.require('hy.contrib.walk', None, assignments=[['let', 'let']],\r\n    prefix='')\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1903/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1897", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1897/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1897/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1897/events", "html_url": "https://github.com/hylang/hy/issues/1897", "id": 633622116, "node_id": "MDU6SXNzdWU2MzM2MjIxMTY=", "number": 1897, "title": "`require` with relative path crashes the compiler", "user": {"login": "daehwannam", "id": 35688291, "node_id": "MDQ6VXNlcjM1Njg4Mjkx", "avatar_url": "https://avatars.githubusercontent.com/u/35688291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daehwannam", "html_url": "https://github.com/daehwannam", "followers_url": "https://api.github.com/users/daehwannam/followers", "following_url": "https://api.github.com/users/daehwannam/following{/other_user}", "gists_url": "https://api.github.com/users/daehwannam/gists{/gist_id}", "starred_url": "https://api.github.com/users/daehwannam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daehwannam/subscriptions", "organizations_url": "https://api.github.com/users/daehwannam/orgs", "repos_url": "https://api.github.com/users/daehwannam/repos", "events_url": "https://api.github.com/users/daehwannam/events{/privacy}", "received_events_url": "https://api.github.com/users/daehwannam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-07T17:58:26Z", "updated_at": "2021-03-27T13:45:51Z", "closed_at": "2021-03-27T13:45:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wrote the following scripts where file_b.hy tries to get macro do-twice in file_a.hy via \"require\" with relative paths.\r\n\r\n[relative_test.zip](https://github.com/hylang/hy/files/4742639/relative_test.zip)\r\n\r\n\r\n* directories & files\r\nrelative_test\r\n\u251c\u2500\u2500 dir1\r\n\u2502   \u251c\u2500\u2500 dir2\r\n\u2502   \u2502   \u2514\u2500\u2500 file_a.hy\r\n\u2502   \u2514\u2500\u2500 dir3\r\n\u2502       \u2514\u2500\u2500 file_b.hy\r\n\u2514\u2500\u2500 main.hy\r\n\r\n* main.hy\r\n(import dir1.dir3.file_b)\r\n\r\n* file_a.hy\r\n(defmacro do-twice [x] `(do ~x ~x))\r\n(defn call-twice [f] (f) (f))\r\n\r\n* file_b.hy\r\n(import [..dir2.file_a [call-twice]])\r\n(call-twice (fn [] (print \"hello\")))\r\n;; the code below raise error\r\n(require [..dir2.file_a [do-twice]])  ; it works when \"..dir2.file_a\" is replaced with \"dir1.dir2.file_a\"\r\n(do-twice (print \"hello\"))\r\n\r\nWhen I run main.hy, the import statement in file_b.hy works to get function call-twice (if require statement is commented), but the require statement doesn't work. I think require statement works with absolute path but it doesn't work with relative path. Is it bug or unintended use of require statement?\r\n\r\nHere is the execution result of the scripts:\r\n----------------------------------------------shell-begin----------------------------------------------\r\nuser@ubuntu:/home/data/user/exercise/hy/relative_test$ hy main.hy\r\nTraceback (most recent call last):\r\n  File \"/home/user/bin/anaconda3/envs/test/bin/hy\", line 10, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/data/user/exercise/hy/relative_test/main.hy\", line 2, in <module>\r\n    (import dir1.dir3.file_b)\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 674, in exec_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 781, in get_code\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/importlib/__init__.py\", line 121, in import_module\r\n    raise TypeError(msg.format(name))\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 Traceback (most recent call last):\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/site-packages/hy/compiler.py\", line 433, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/site-packages/hy/compiler.py\", line 427, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/site-packages/hy/compiler.py\", line 1777, in compile_expression\r\n    self, expr, unmangle(sroot), *parse_tree)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/site-packages/hy/compiler.py\", line 1196, in compile_import_or_require\r\n    prefix=prefix):\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/site-packages/hy/macros.py\", line 175, in require\r\n    source_module = importlib.import_module(source_module)\r\n  File \"/home/user/bin/anaconda3/envs/test/lib/python3.6/importlib/__init__.py\", line 121, in import_module\r\n    raise TypeError(msg.format(name))\r\nTypeError: the 'package' argument is required to perform a relative import for '..dir2.file_a'\r\n\r\nuser@ubuntu:/home/data/user/exercise/hy/relative_test$\r\n----------------------------------------------shell-end----------------------------------------------", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1897/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1894", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1894/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1894/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1894/events", "html_url": "https://github.com/hylang/hy/issues/1894", "id": 623076858, "node_id": "MDU6SXNzdWU2MjMwNzY4NTg=", "number": 1894, "title": "`hy -c` doesn't clean up `sys.argv`", "user": {"login": "csabahenk", "id": 43937, "node_id": "MDQ6VXNlcjQzOTM3", "avatar_url": "https://avatars.githubusercontent.com/u/43937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csabahenk", "html_url": "https://github.com/csabahenk", "followers_url": "https://api.github.com/users/csabahenk/followers", "following_url": "https://api.github.com/users/csabahenk/following{/other_user}", "gists_url": "https://api.github.com/users/csabahenk/gists{/gist_id}", "starred_url": "https://api.github.com/users/csabahenk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csabahenk/subscriptions", "organizations_url": "https://api.github.com/users/csabahenk/orgs", "repos_url": "https://api.github.com/users/csabahenk/repos", "events_url": "https://api.github.com/users/csabahenk/events{/privacy}", "received_events_url": "https://api.github.com/users/csabahenk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-22T09:23:12Z", "updated_at": "2020-07-12T13:31:56Z", "closed_at": "2020-07-12T13:31:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$ echo  '(import sys) (print sys.argv)' > args.hy\r\n$ hy2py args.hy > args.py\r\n```\r\n\r\nIn Python command line arguments are placed into `sys.argv` from index 1 (and index 0 is the name of the program).\r\n\r\n```\r\n$ python args.py a b c\r\n['args.py', 'a', 'b', 'c']\r\n```\r\n\r\nCommand line snippets adhere to above layout, with `-c` used as program name.\r\n\r\n```\r\n$ python -c \"`cat args.py`\" a b c\r\n['-c', 'a', 'b', 'c']\r\n```\r\n\r\nHy uses the same layout when a file is run.\r\n\r\n```\r\n$ hy args.hy a b c\r\n['args.hy', 'a', 'b', 'c']\r\n```\r\n\r\nHowever, for a snippet it's something else.\r\n\r\n```\r\n$ hy -c \"`cat args.hy`\" a b c\r\n['/home/csaba/.local/bin/hy', '-c', '(import sys) (print sys.argv)', 'a', 'b', 'c']\r\n```\r\nI need `(get sys.argv 3)` to access the first argument.\r\n\r\nThis is an unjustified departure from Python's ways and an unexpected inconsistency when switching between running program files and command line snippets.\r\n\r\nFor me personally, it partially beats the purpose of using Hy as a tool that bestows powers to run Python one-liners (I apologize if this purpose sounds lowly for a Lisp hacker).\r\n\r\n```\r\n$ hy --version\r\nhy 0.18.0+18.gaa411bd\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1894/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1885", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1885/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1885/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1885/events", "html_url": "https://github.com/hylang/hy/issues/1885", "id": 585037195, "node_id": "MDU6SXNzdWU1ODUwMzcxOTU=", "number": 1885, "title": "Empty form crashes compiler", "user": {"login": "KnorrFG", "id": 15276246, "node_id": "MDQ6VXNlcjE1Mjc2MjQ2", "avatar_url": "https://avatars.githubusercontent.com/u/15276246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KnorrFG", "html_url": "https://github.com/KnorrFG", "followers_url": "https://api.github.com/users/KnorrFG/followers", "following_url": "https://api.github.com/users/KnorrFG/following{/other_user}", "gists_url": "https://api.github.com/users/KnorrFG/gists{/gist_id}", "starred_url": "https://api.github.com/users/KnorrFG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KnorrFG/subscriptions", "organizations_url": "https://api.github.com/users/KnorrFG/orgs", "repos_url": "https://api.github.com/users/KnorrFG/repos", "events_url": "https://api.github.com/users/KnorrFG/events{/privacy}", "received_events_url": "https://api.github.com/users/KnorrFG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-20T12:28:16Z", "updated_at": "2020-04-03T18:29:24Z", "closed_at": "2020-04-03T18:29:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "An empty form will crash the compiler as shown below. One would think, that this wouldn't matter, but I accidentally left a `()` in a 300 line file and it was quite hard to catch. A normal error with a line number would be nice\r\n\r\n```\r\nfelix@alienware:~$ hy --version\r\nhy 0.18.0\r\nfelix@alienware:~$ echo \"()\" > foo.hy && hy foo.hy\r\nTraceback (most recent call last):\r\n  File \"/home/felix/.pyenv/versions/3.8.0/bin/hy\", line 8, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/runpy.py\", line 261, in run_path\r\n    code, fname = _get_code_from_file(run_name, path_name)\r\n  File \"<frozen importlib._bootstrap_external>\", line 916, in get_code\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 Traceback (most recent call last):\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/site-packages/hy/compiler.py\", line 433, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/site-packages/hy/compiler.py\", line 427, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/site-packages/hy/compiler.py\", line 1730, in compile_expression\r\n    expr = macroexpand(expr, self.module, self)\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/site-packages/hy/macros.py\", line 316, in macroexpand\r\n    fn = tree[0]\r\n  File \"/home/felix/.pyenv/versions/3.8.0/lib/python3.8/site-packages/hy/models.py\", line 278, in __getitem__\r\n    ret = super(HySequence, self).__getitem__(item)\r\nIndexError: tuple index out of range\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1885/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1879", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1879/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1879/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1879/events", "html_url": "https://github.com/hylang/hy/issues/1879", "id": 569916079, "node_id": "MDU6SXNzdWU1Njk5MTYwNzk=", "number": 1879, "title": "`lfor` can't see an imported name in `hy -c`", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-24T15:05:19Z", "updated_at": "2020-06-28T13:54:06Z", "closed_at": "2020-06-28T13:54:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This one is deeply bizarre.\r\n\r\n```\r\n$ CODE='(import math) (print (lfor j [1] (math.sqrt 5)))' \r\n$ hy -c \"$CODE\"\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/hy\", line 8, in <module>\r\n    sys.exit(hy_main())\r\n  File \"<string>\", line 1, in <module>\r\n  File \"<string>\", line 1, in <listcomp>\r\nNameError: name 'math' is not defined\r\n$ echo \"$CODE\" | hy           \r\nhy 0.18.0 using CPython(default) 3.7.5 on Linux\r\n=> [2.23606797749979]\r\n=> \r\nnow exiting HyREPL...\r\n$ echo \"$CODE\" > /tmp/foo.hy && hy /tmp/foo.hy \r\n[2.23606797749979]\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1875", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1875/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1875/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1875/events", "html_url": "https://github.com/hylang/hy/issues/1875", "id": 568282144, "node_id": "MDU6SXNzdWU1NjgyODIxNDQ=", "number": 1875, "title": "parse-args requires values to be representable as Hy models", "user": {"login": "redraiment", "id": 932074, "node_id": "MDQ6VXNlcjkzMjA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/932074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redraiment", "html_url": "https://github.com/redraiment", "followers_url": "https://api.github.com/users/redraiment/followers", "following_url": "https://api.github.com/users/redraiment/following{/other_user}", "gists_url": "https://api.github.com/users/redraiment/gists{/gist_id}", "starred_url": "https://api.github.com/users/redraiment/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redraiment/subscriptions", "organizations_url": "https://api.github.com/users/redraiment/orgs", "repos_url": "https://api.github.com/users/redraiment/repos", "events_url": "https://api.github.com/users/redraiment/events{/privacy}", "received_events_url": "https://api.github.com/users/redraiment/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T12:58:35Z", "updated_at": "2020-03-31T15:03:01Z", "closed_at": "2020-03-31T15:03:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue\r\n\r\nThe behaviors between `:type` keyword argument of parse-args function in hylang and `type` of argparse.ArgumentParser.add_argument method in Python are different.\r\n\r\n* In Python: it's used for type conversion, and the value type is function, which accepts a string argument and returns the target type value. Therefore, I can define custom function to parse the string value.\r\n* However, in hylang, the value type is symbol (i.e. `:type 'int`), and cannot use custom function.\r\n\r\nFor example, I'd like to set image size with `<width>x<height>` format, i.e. `--size 800x600`.\r\n\r\nIn Python:\r\n\r\n```python\r\nimport argparse\r\n\r\ndef size(s):\r\n    width, height = s.split('x')\r\n    return int(width), int(height)\r\n\r\nparser = argparse.ArgumentParser()\r\nparser.add_argument('-s', type=size)\r\nparser.parse_args(['-s', '800x600']) #=> Namespace(s=(800, 600))\r\n```\r\n\r\nIn hylang will get an exception:\r\n\r\n```hy\r\n(defn size [s]\r\n   (setv [width height] (s.split \"x\"))\r\n   [(int width) (int height)])\r\n(parse-args [[\"-s\" :type size]] [\"-s\" \"800x600\"])\r\n```\r\n\r\nException message:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"stdin-29462993091ad78e6a5177ff794c993fe5d75f41\", line 1, in <module>\r\n    (parse-args [[\"-s\" :type size]] [\"-s\" \"800x600\"])\r\n  File \"/Users/redraiment/Library/Python/3.7/lib/python/site-packages/hy/core/language.hy\", line 404, in parse_args\r\n    (eval `(.add-argument parser ~@arg)))\r\nhy.errors.HyWrapperError: Don't know how to wrap <class 'function'>: <function size at 0x11094f0e0>\r\n```\r\n\r\n# Solution\r\n\r\nAfter research, I found the root cause.\r\n\r\n## Case 1: `:type size`\r\n\r\n```hy\r\n`(.add-argument parser ~@[\"-s\" :type size])\r\n```\r\n\r\nThe above code becomes `'(.add-argument parser \"-s\" :type <function size at 0x11094f0e0>)`, and `eval` couldn't works because `<function size at 0x11094f0e0>` is not function literal.\r\n\r\n## Case 2: `:type 'size`\r\n\r\n```hy\r\n`(.add-argument parser ~@[\"-s\" :type 'size])\r\n```\r\n\r\nThe above code becomes `'(.add-argument parser \"-s\" :type size)`, and `eval` would raise `NameError: name 'size' is not defined` exception because `size` function not in context.\r\n\r\n## Solution\r\n\r\nMy solution is call `add-argument` method direction with unpacking positional arguments and keywords arguments manually, rather than use `eval`.\r\n\r\n```hy\r\n(defn parse-args- [spec &optional args &kwargs parser-args]\r\n  (import argparse)\r\n  (setv parser (argparse.ArgumentParser #** parser-args))\r\n  (for [arg spec]\r\n    ;; (eval `(.add-argument parser ~@arg))\r\n    (parser.add-argument\r\n      ;; positional arguments\r\n      #* (take-while (complement keyword?) arg)\r\n      ;; keywords arguments\r\n      #** (dfor [key value] (partition (drop-while (complement keyword?) arg) 2)\r\n            [(name key) value])))\r\n  (.parse-args parser args))\r\n```\r\n\r\nAnd it works well for me:\r\n\r\n```hy\r\n(parse-args- [[\"-s\" :type size]] [\"-s\" \"800x600\"]) ;=> Namespace(s=[800, 600])\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1875/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1856", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1856/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1856/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1856/events", "html_url": "https://github.com/hylang/hy/issues/1856", "id": 542194903, "node_id": "MDU6SXNzdWU1NDIxOTQ5MDM=", "number": 1856, "title": "Support the Windows \"embeddable zip file\" releases of Python", "user": {"login": "dev-namespace", "id": 7818533, "node_id": "MDQ6VXNlcjc4MTg1MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/7818533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dev-namespace", "html_url": "https://github.com/dev-namespace", "followers_url": "https://api.github.com/users/dev-namespace/followers", "following_url": "https://api.github.com/users/dev-namespace/following{/other_user}", "gists_url": "https://api.github.com/users/dev-namespace/gists{/gist_id}", "starred_url": "https://api.github.com/users/dev-namespace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dev-namespace/subscriptions", "organizations_url": "https://api.github.com/users/dev-namespace/orgs", "repos_url": "https://api.github.com/users/dev-namespace/repos", "events_url": "https://api.github.com/users/dev-namespace/events{/privacy}", "received_events_url": "https://api.github.com/users/dev-namespace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-12-24T19:00:43Z", "updated_at": "2022-04-17T12:24:20Z", "closed_at": "2022-04-17T12:13:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hy fails to find hy modules when used in an embedded Python version.\r\n\r\ngiven two files main.py and foo.hy\r\n\r\n> import hy\r\n> import foo\r\n\r\n`ModuleNotFoundError: No module named foo`\r\n\r\nAny chance support for this or pyinstaller can be added so we can create stand-alone Hy programs?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1856/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1853", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1853/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1853/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1853/events", "html_url": "https://github.com/hylang/hy/issues/1853", "id": 541267786, "node_id": "MDU6SXNzdWU1NDEyNjc3ODY=", "number": 1853, "title": "ap-dotimes can not substitute variable for number", "user": {"login": "falloutphil", "id": 15717136, "node_id": "MDQ6VXNlcjE1NzE3MTM2", "avatar_url": "https://avatars.githubusercontent.com/u/15717136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/falloutphil", "html_url": "https://github.com/falloutphil", "followers_url": "https://api.github.com/users/falloutphil/followers", "following_url": "https://api.github.com/users/falloutphil/following{/other_user}", "gists_url": "https://api.github.com/users/falloutphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/falloutphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/falloutphil/subscriptions", "organizations_url": "https://api.github.com/users/falloutphil/orgs", "repos_url": "https://api.github.com/users/falloutphil/repos", "events_url": "https://api.github.com/users/falloutphil/events{/privacy}", "received_events_url": "https://api.github.com/users/falloutphil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-21T01:52:37Z", "updated_at": "2020-01-05T12:56:12Z", "closed_at": "2020-01-05T12:56:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'd expect these to uses of `ap-dotimes` to produce the same result?\r\n\r\nCould you confirm if this is a bug or if I've misunderstood us of the macro?\r\n\r\n```hy\r\n=> (ap-dotimes 3 (print it))\r\n0\r\n1\r\n2\r\n=> (setv i 3)\r\n=> (ap-dotimes i (print it))\r\nTraceback (most recent call last):\r\n  File \"stdin-156cdc3272dbec664aa1ca1a93db0b27f0d649f0\", line 1, in <module>\r\n    (ap-dotimes i (print it))\r\n  File \"/usr/lib/python3.6/contextlib.py\", line 99, in __exit__\r\n    self.gen.throw(type, value, traceback)\r\n  File \"/home/phil/.local/lib/python3.6/site-packages/hy/extra/anaphoric.hy\", line 70, in ap_dotimes\r\n    (raise (TypeError (.format \"{!r} is not a number\" n))))\r\nhy.errors.HyMacroExpansionError: \r\n  File \"<stdin>\", line 1\r\n    (ap-dotimes i (print it))\r\n    ^-----------------------^\r\nexpanding macro ap-dotimes\r\n  TypeError: HySymbol('i') is not a number\r\n\r\n\r\n=> \r\n```\r\n\r\nIn particular because this does work:\r\n\r\n```hy\r\n=> (ap-each (range i) (print it))\r\n0\r\n1\r\n2\r\n=> \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1848", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1848/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1848/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1848/events", "html_url": "https://github.com/hylang/hy/issues/1848", "id": 533065580, "node_id": "MDU6SXNzdWU1MzMwNjU1ODA=", "number": 1848, "title": "`ap-reduce` assumes that iterables can be `cut`", "user": {"login": "falloutphil", "id": 15717136, "node_id": "MDQ6VXNlcjE1NzE3MTM2", "avatar_url": "https://avatars.githubusercontent.com/u/15717136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/falloutphil", "html_url": "https://github.com/falloutphil", "followers_url": "https://api.github.com/users/falloutphil/followers", "following_url": "https://api.github.com/users/falloutphil/following{/other_user}", "gists_url": "https://api.github.com/users/falloutphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/falloutphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/falloutphil/subscriptions", "organizations_url": "https://api.github.com/users/falloutphil/orgs", "repos_url": "https://api.github.com/users/falloutphil/repos", "events_url": "https://api.github.com/users/falloutphil/events{/privacy}", "received_events_url": "https://api.github.com/users/falloutphil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-05T01:19:25Z", "updated_at": "2019-12-19T16:43:42Z", "closed_at": "2019-12-19T16:43:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIt looks like before passing an anaphoric macro the result of a map or zip, I first have to call list on it to explode the object into a list object (rather than directly pass the map or zip object).\r\n\r\nIt would be nice if the anaphoric macros could handle iterable objects directly - is this possible?  I'm guessing it would be a new feature request?\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1847", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1847/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1847/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1847/events", "html_url": "https://github.com/hylang/hy/issues/1847", "id": 532279118, "node_id": "MDU6SXNzdWU1MzIyNzkxMTg=", "number": 1847, "title": "hy.extra.anaphoric macros leak their anaphors", "user": {"login": "falloutphil", "id": 15717136, "node_id": "MDQ6VXNlcjE1NzE3MTM2", "avatar_url": "https://avatars.githubusercontent.com/u/15717136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/falloutphil", "html_url": "https://github.com/falloutphil", "followers_url": "https://api.github.com/users/falloutphil/followers", "following_url": "https://api.github.com/users/falloutphil/following{/other_user}", "gists_url": "https://api.github.com/users/falloutphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/falloutphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/falloutphil/subscriptions", "organizations_url": "https://api.github.com/users/falloutphil/orgs", "repos_url": "https://api.github.com/users/falloutphil/repos", "events_url": "https://api.github.com/users/falloutphil/events{/privacy}", "received_events_url": "https://api.github.com/users/falloutphil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-03T21:30:20Z", "updated_at": "2020-01-05T12:56:12Z", "closed_at": "2020-01-05T12:56:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nhy 0.17.0 using CPython(default) 3.6.8 on Linux\r\n\r\nIf ap-reduce is used twice as a parameter to a function call, it seems to screw up.  See simple example below:\r\n```hy\r\n#!/usr/bin/env hy                                                                                                                                                                                                    \r\n                                                                                                                                                                                                                     \r\n(require [hy.extra.anaphoric [*]])                                                                                                                                                                                   \r\n                                                                                                                                                                                                                     \r\n                                                                                                                                                                                                                     \r\n;; Success                                                                                                                                                                                                           \r\n(setv red1 (set (ap-reduce (+ acc [it]) [1 2 3 4] [])))                                                                                                                                                              \r\n(print red1)                                                                                                                                                                                                         \r\n(setv red2 (set (ap-reduce (+ acc [it]) [5 4 3 2] [])))                                                                                                                                                              \r\n(print red2)                                                                                                                                                                                                         \r\n(print (.intersection red1 red2))                                                                                                                                                                                    \r\n                                                                                                                                                                                                                     \r\n;; Failure                                                                                                                                                                                                           \r\n(print                                                                                                                                                                                                               \r\n  (.intersection                                                                                                                                                                                                     \r\n    (set (ap-reduce (+ acc [it]) [1 2 3 4] []))                                                                                                                                                                      \r\n    (set (ap-reduce (+ acc [it]) [5 4 3 2] []))))  \r\n```\r\n\r\nResult - note the extra 5 in the final set - I don't think it should be there?\r\n\r\n```\r\nhy set.hy                                                                                                                                                                                                            \r\n{1, 2, 3, 4}                                                                                                                                                                                                         \r\n{2, 3, 4, 5}                                                                                                                                                                                                         \r\n{2, 3, 4}                                                                                                                                                                                                            \r\n{2, 3, 4, 5} \r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1847/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1844", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1844/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1844/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1844/events", "html_url": "https://github.com/hylang/hy/issues/1844", "id": 526779455, "node_id": "MDU6SXNzdWU1MjY3Nzk0NTU=", "number": 1844, "title": "F-strings are evaluated in (quote \u2026)", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-21T18:54:25Z", "updated_at": "2020-04-02T12:40:22Z", "closed_at": "2020-04-02T12:40:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`'f\"{a}\"` raises `NameError: name 'a' is not defined`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1843", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1843/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1843/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1843/events", "html_url": "https://github.com/hylang/hy/issues/1843", "id": 526742547, "node_id": "MDU6SXNzdWU1MjY3NDI1NDc=", "number": 1843, "title": "`hy.contrib.walk` cannot see inside f-strings, fails to replace contained references", "user": {"login": "slippycheeze", "id": 306753, "node_id": "MDQ6VXNlcjMwNjc1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/306753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slippycheeze", "html_url": "https://github.com/slippycheeze", "followers_url": "https://api.github.com/users/slippycheeze/followers", "following_url": "https://api.github.com/users/slippycheeze/following{/other_user}", "gists_url": "https://api.github.com/users/slippycheeze/gists{/gist_id}", "starred_url": "https://api.github.com/users/slippycheeze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slippycheeze/subscriptions", "organizations_url": "https://api.github.com/users/slippycheeze/orgs", "repos_url": "https://api.github.com/users/slippycheeze/repos", "events_url": "https://api.github.com/users/slippycheeze/events{/privacy}", "received_events_url": "https://api.github.com/users/slippycheeze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-21T17:37:16Z", "updated_at": "2021-02-08T13:33:53Z", "closed_at": "2021-02-08T13:33:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "The AST walker in `hy.contrib.walk` doesn't see inside of an f-string, so the `let` macro built on it will fail when the inlined code references a let-bound variable:\r\n\r\n```\r\nhy unknown using CPython(default) 3.7.5 on Darwin\r\n=> (require [hy.contrib.walk [*]])\r\nTrue\r\n=> (let [a 1] f\"{a}\")\r\nTraceback (most recent call last):\r\n  File \"stdin-15ddbd2ca7b71de7866cc45806e8764b30264dcd\", line 1, in <module>\r\n    (let [a 1] f\"{a}\")\r\nNameError: name 'a' is not defined\r\n```\r\n\r\n\"unknown\" is \"master as of the time of submission\"", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1843/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1838", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1838/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1838/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1838/events", "html_url": "https://github.com/hylang/hy/issues/1838", "id": 523515685, "node_id": "MDU6SXNzdWU1MjM1MTU2ODU=", "number": 1838, "title": "multi.defn functions don't allow lists as arguments", "user": {"login": "ComedyTomedy", "id": 11634808, "node_id": "MDQ6VXNlcjExNjM0ODA4", "avatar_url": "https://avatars.githubusercontent.com/u/11634808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ComedyTomedy", "html_url": "https://github.com/ComedyTomedy", "followers_url": "https://api.github.com/users/ComedyTomedy/followers", "following_url": "https://api.github.com/users/ComedyTomedy/following{/other_user}", "gists_url": "https://api.github.com/users/ComedyTomedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ComedyTomedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ComedyTomedy/subscriptions", "organizations_url": "https://api.github.com/users/ComedyTomedy/orgs", "repos_url": "https://api.github.com/users/ComedyTomedy/repos", "events_url": "https://api.github.com/users/ComedyTomedy/events{/privacy}", "received_events_url": "https://api.github.com/users/ComedyTomedy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-15T14:55:36Z", "updated_at": "2019-11-20T01:38:55Z", "closed_at": "2019-11-20T01:38:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Functions defined with hy.contrib.multi's defn apparently can't take lists / unhashable types as arguments.\r\n\r\nI presume they're being stored as the keys of a dictionary, perhaps (as part of a tuple or something).\r\n\r\n```\r\n=> (require [hy.contrib.multi [*]])\r\nTrue\r\n=> (defn id ([x] x))\r\n=> (id 1)\r\n1\r\n=> (id [])\r\nTraceback (most recent call last):\r\n  File \"stdin-a7f4388ddf86af51cc96477cca4f89e4fa47470b\", line 1, in <module>\r\n    (id [])\r\n  File \"/home/t/.local/lib/python3.7/site-packages/hy/contrib/multi.hy\", line 31, in __call__\r\n    (when (.fn? self i args kwargs)\r\n  File \"/home/t/.local/lib/python3.7/site-packages/hy/contrib/multi.hy\", line 26, in is_fn\r\n    (.issubset (frozenset (.keys kwargs)) com)))\r\nTypeError: unhashable type: 'list'\r\n```\r\n\r\n(This was on hy 0.16.0, I tried to get/build a more recent version but can't figure out how)", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1838/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1838/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1823", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1823/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1823/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1823/events", "html_url": "https://github.com/hylang/hy/issues/1823", "id": 502925757, "node_id": "MDU6SXNzdWU1MDI5MjU3NTc=", "number": 1823, "title": "Unable to import Pip-installed & Conda-installed modules in Anaconda managed VirtualEnv environments", "user": {"login": "josiah14", "id": 1489462, "node_id": "MDQ6VXNlcjE0ODk0NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1489462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josiah14", "html_url": "https://github.com/josiah14", "followers_url": "https://api.github.com/users/josiah14/followers", "following_url": "https://api.github.com/users/josiah14/following{/other_user}", "gists_url": "https://api.github.com/users/josiah14/gists{/gist_id}", "starred_url": "https://api.github.com/users/josiah14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josiah14/subscriptions", "organizations_url": "https://api.github.com/users/josiah14/orgs", "repos_url": "https://api.github.com/users/josiah14/repos", "events_url": "https://api.github.com/users/josiah14/events{/privacy}", "received_events_url": "https://api.github.com/users/josiah14/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-10-05T06:49:02Z", "updated_at": "2022-11-07T17:52:34Z", "closed_at": "2022-11-07T17:52:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Most of the information you would need should be in the console output, below.  I'm running on Ubuntu 18.04 using ZSH as my shell.\r\n\r\n```bash\r\nhy/sequential/hyid3_and_seq  master \u2717                                                                                            18m \u2691\r\n\u25b6 conda activate hy-test\r\n(hy-test)\r\nhy/sequential/hyid3_and_seq  master \u2717                                                                                            19m \u2691\r\n\u25b6 pip install pandas\r\nRequirement already satisfied: pandas in /home/josiah/miniconda3/envs/hy-test/lib/python3.7/site-packages (0.25.1)\r\nRequirement already satisfied: pytz>=2017.2 in /home/josiah/miniconda3/envs/hy-test/lib/python3.7/site-packages (from pandas) (2019.2)\r\nRequirement already satisfied: numpy>=1.13.3 in /home/josiah/miniconda3/envs/hy-test/lib/python3.7/site-packages (from pandas) (1.17.2)\r\nRequirement already satisfied: python-dateutil>=2.6.1 in /home/josiah/miniconda3/envs/hy-test/lib/python3.7/site-packages (from pandas) (2.8.0)\r\nRequirement already satisfied: six>=1.5 in /home/josiah/miniconda3/envs/hy-test/lib/python3.7/site-packages (from python-dateutil>=2.6.1->pandas) (1.12.0)\r\n(hy-test)\r\nhy/sequential/hyid3_and_seq  master \u2717                                                                                            20m \u2691\r\n\u25b6 which pip\r\n/home/josiah/miniconda3/envs/hy-test/bin/pip\r\n(hy-test)\r\nhy/sequential/hyid3_and_seq  master \u2717                                                                                            20m \u2691\r\n\u25b6 hy\r\nhy 0.17.0 using CPython(default) 3.7.4 on Linux\r\n=> (import [pandas :as pd])\r\nTraceback (most recent call last):\r\n  File \"stdin-759175d9d1ec0dd5c0ef87379c3ce4cc23835447\", line 1, in <module>\r\n    (import [pandas :as pd])\r\nModuleNotFoundError: No module named 'pandas'\r\n=> (require [pandas :as pd])\r\nTraceback (most recent call last):\r\n  File \"stdin-8747230e0bb0ca2c98fa606abb6c56170c498599\", line 1, in <module>\r\n    (require [pandas :as pd])\r\nhy.errors.HyRequireError: No module named 'pandas'\r\n=> (exit)\r\n(hy-test)\r\nhy/sequential/hyid3_and_seq  master \u2717                                                                                            21m \u2691\r\n\u25b6 python\r\nPython 3.7.4 (default, Aug 13 2019, 20:35:49)\r\n[GCC 7.3.0] :: Anaconda, Inc. on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import pandas as pd\r\n>>>\r\n```\r\n\r\nThis issue also affects me on 0.16.0, so I'm currently doing my work on version 0.15.0 of Hy so that I can use Pip-installed dependencies from within a Pyenv environment.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1823/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1812", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1812/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1812/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1812/events", "html_url": "https://github.com/hylang/hy/issues/1812", "id": 481803718, "node_id": "MDU6SXNzdWU0ODE4MDM3MTg=", "number": 1812, "title": "REPL crashes when ~/.hy-history is inaccessible", "user": {"login": "tianon", "id": 161631, "node_id": "MDQ6VXNlcjE2MTYzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/161631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tianon", "html_url": "https://github.com/tianon", "followers_url": "https://api.github.com/users/tianon/followers", "following_url": "https://api.github.com/users/tianon/following{/other_user}", "gists_url": "https://api.github.com/users/tianon/gists{/gist_id}", "starred_url": "https://api.github.com/users/tianon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tianon/subscriptions", "organizations_url": "https://api.github.com/users/tianon/orgs", "repos_url": "https://api.github.com/users/tianon/repos", "events_url": "https://api.github.com/users/tianon/events{/privacy}", "received_events_url": "https://api.github.com/users/tianon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-16T22:10:21Z", "updated_at": "2019-08-19T17:40:09Z", "closed_at": "2019-08-19T17:40:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've been working on updating the Hy package in Debian and in running the tests, I've noticed that the `test_bin` tests appear to expect to be able to do something with `~/.hy-history` (not sure if it's trying to read or write) but I had to set `HOME` to a real directory after which they passed.  Looking at the tests, I imagine it's happening because they're interacting with the REPL via stdin so it's trying to load and/or use the history file?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1802", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1802/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1802/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1802/events", "html_url": "https://github.com/hylang/hy/issues/1802", "id": 474273706, "node_id": "MDU6SXNzdWU0NzQyNzM3MDY=", "number": 1802, "title": "f-strings tripping up hy2py", "user": {"login": "asemic-horizon", "id": 42865953, "node_id": "MDQ6VXNlcjQyODY1OTUz", "avatar_url": "https://avatars.githubusercontent.com/u/42865953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asemic-horizon", "html_url": "https://github.com/asemic-horizon", "followers_url": "https://api.github.com/users/asemic-horizon/followers", "following_url": "https://api.github.com/users/asemic-horizon/following{/other_user}", "gists_url": "https://api.github.com/users/asemic-horizon/gists{/gist_id}", "starred_url": "https://api.github.com/users/asemic-horizon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asemic-horizon/subscriptions", "organizations_url": "https://api.github.com/users/asemic-horizon/orgs", "repos_url": "https://api.github.com/users/asemic-horizon/repos", "events_url": "https://api.github.com/users/asemic-horizon/events{/privacy}", "received_events_url": "https://api.github.com/users/asemic-horizon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-29T21:52:26Z", "updated_at": "2019-08-13T20:13:02Z", "closed_at": "2019-08-13T20:13:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following code\r\n\r\n\r\n```  \r\n(defmain []\r\n\r\n  (setv some-stuff \"some stuff\")  \r\n  (print f\"{(hash some-stuff)}\"))\r\n```  \r\nwhen ran through hy2py leads to a long string of errors\r\n\r\n\r\n``` \r\n(hylearn) # hy2py minor.hy\r\nTraceback (most recent call last):\r\n  File \"/home/diego/hylearn/bin/hy2py\", line 12, in <module>\r\n    sys.exit(hy2py_main())\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/hy/cmdline.py\", line 690, in hy2py_main\r\n    print(astor.code_gen.to_source(_ast))\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 62, in to_source\r\n    generator.visit(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 876, in visit_Module\r\n    self.write(*node.body)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 177, in write\r\n    visit(item)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 370, in visit_If\r\n    self.body(node.body)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 225, in body\r\n    self.write(*statements)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 177, in write\r\n    visit(item)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 334, in visit_FunctionDef\r\n    self.body(node.body)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 225, in body\r\n    self.write(*statements)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 177, in write\r\n    visit(item)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 487, in visit_Return\r\n    self.conditional_write(' ', node.value)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 213, in conditional_write\r\n    self.write(*stuff)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 177, in write\r\n    visit(item)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 532, in visit_Call\r\n    write(write_comma, arg)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 177, in write\r\n    visit(item)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/node_util.py\", line 143, in visit\r\n    return visitor(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 564, in visit_JoinedStr\r\n    self._handle_string_constant(node, None, is_joined=True)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 620, in _handle_string_constant\r\n    recurse(node)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 612, in recurse\r\n    recurse(value.format_spec)\r\n  File \"/home/diego/hylearn/lib/python3.7/site-packages/astor/code_gen.py\", line 597, in recurse\r\n    for value in node.values:\r\nAttributeError: 'Str' object has no attribute 'values'\r\n\r\n``` \r\n\r\nbut otherwise runs fine by saying ` hy minor.hy`  (also in the more realistic situation where the bug came up in the first place). The output of ` hy --version` here is ` hy 0.17.0+41.ge777f25` ", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1790", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1790/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1790/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1790/events", "html_url": "https://github.com/hylang/hy/issues/1790", "id": 464882692, "node_id": "MDU6SXNzdWU0NjQ4ODI2OTI=", "number": 1790, "title": "The condition of a `while` may be compiled twice", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "refi64", "id": 1690697, "node_id": "MDQ6VXNlcjE2OTA2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1690697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refi64", "html_url": "https://github.com/refi64", "followers_url": "https://api.github.com/users/refi64/followers", "following_url": "https://api.github.com/users/refi64/following{/other_user}", "gists_url": "https://api.github.com/users/refi64/gists{/gist_id}", "starred_url": "https://api.github.com/users/refi64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refi64/subscriptions", "organizations_url": "https://api.github.com/users/refi64/orgs", "repos_url": "https://api.github.com/users/refi64/repos", "events_url": "https://api.github.com/users/refi64/events{/privacy}", "received_events_url": "https://api.github.com/users/refi64/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "refi64", "id": 1690697, "node_id": "MDQ6VXNlcjE2OTA2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1690697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refi64", "html_url": "https://github.com/refi64", "followers_url": "https://api.github.com/users/refi64/followers", "following_url": "https://api.github.com/users/refi64/following{/other_user}", "gists_url": "https://api.github.com/users/refi64/gists{/gist_id}", "starred_url": "https://api.github.com/users/refi64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refi64/subscriptions", "organizations_url": "https://api.github.com/users/refi64/orgs", "repos_url": "https://api.github.com/users/refi64/repos", "events_url": "https://api.github.com/users/refi64/events{/privacy}", "received_events_url": "https://api.github.com/users/refi64/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-06T19:13:57Z", "updated_at": "2019-07-22T18:10:33Z", "closed_at": "2019-07-22T18:10:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n=> (defmacro m [] (print \"hi\") '(do (setv x 1) 0))\r\n<function m at 0x7f09efca4620>\r\n=> (while (m) 2)\r\nhi\r\nhi\r\n```\r\n\r\nI created this bug in #1433. Oops.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1790/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1786", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1786/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1786/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1786/events", "html_url": "https://github.com/hylang/hy/issues/1786", "id": 457643126, "node_id": "MDU6SXNzdWU0NTc2NDMxMjY=", "number": 1786, "title": "Perhaps call `multiprocessing.set-executable` at startup", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-06-18T18:56:53Z", "updated_at": "2022-09-21T19:02:57Z", "closed_at": "2022-09-21T19:02:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As mentioned elsewhere, rightly or wrongly, runnng `hy` sets `sys.executable` to the Hy startup script rather than the underlying Python executable. One surprising consequence of this is that importing `sklearn`, for example, yields the message\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/bin/hy\", line 10, in <module>\r\n        sys.exit(hy_main())\r\n      File \"<string>\", line 1, in <module>\r\n    NameError: name 'hyx_from' is not defined\r\n\r\nfrom a child process, and then leaves that child as a zombie. The error is from a scikit-learn dependency, joblib, which tries to call `/usr/local/bin/hy -c 'from multiprocessing.semaphore_tracker import main;main(3)'` when it's imported.\r\n\r\nOne can avoid this problem by calling `multiprocessing.set_executable` to select a real Python executable, so perhaps Hy itself should do this.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1780", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1780/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1780/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1780/events", "html_url": "https://github.com/hylang/hy/issues/1780", "id": 447817625, "node_id": "MDU6SXNzdWU0NDc4MTc2MjU=", "number": 1780, "title": "Detection of illegal assignments is imperfect", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-23T18:46:18Z", "updated_at": "2021-03-01T19:56:42Z", "closed_at": "2021-03-01T19:56:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`(setv True 3)` is a `HySyntaxError`, but `(defn f [True] True) (f 3)` works without complaint, which is problematic because it leads to `hy2py` generating invalid Python code:\r\n\r\n    $ echo '(defn f [True] True)' | hy2py \r\n    def f(True):\r\n        return True", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1757", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1757/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1757/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1757/events", "html_url": "https://github.com/hylang/hy/issues/1757", "id": 421869697, "node_id": "MDU6SXNzdWU0MjE4Njk2OTc=", "number": 1757, "title": "bad macro causes repl to exit.", "user": {"login": "andrewchambers", "id": 962885, "node_id": "MDQ6VXNlcjk2Mjg4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewchambers", "html_url": "https://github.com/andrewchambers", "followers_url": "https://api.github.com/users/andrewchambers/followers", "following_url": "https://api.github.com/users/andrewchambers/following{/other_user}", "gists_url": "https://api.github.com/users/andrewchambers/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewchambers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewchambers/subscriptions", "organizations_url": "https://api.github.com/users/andrewchambers/orgs", "repos_url": "https://api.github.com/users/andrewchambers/repos", "events_url": "https://api.github.com/users/andrewchambers/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewchambers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-17T01:06:45Z", "updated_at": "2020-06-27T13:02:30Z", "closed_at": "2020-06-27T13:02:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$ hy \r\n=> #@()\r\nTraceback (most recent call last):\r\n  File \"/home/ac/src/test/venv/bin/hy\", line 11, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/nix/store/yv4pzx3lxk3lscq0pw3hqzs7k4x76xsm-python3-3.7.2/lib/python3.7/code.py\", line 232, in interact\r\n    more = self.push(line)\r\n  File \"/nix/store/yv4pzx3lxk3lscq0pw3hqzs7k4x76xsm-python3-3.7.2/lib/python3.7/code.py\", line 258, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"/nix/store/yv4pzx3lxk3lscq0pw3hqzs7k4x76xsm-python3-3.7.2/lib/python3.7/code.py\", line 63, in runsource\r\n    code = self.compile(source, filename, symbol)\r\n  File \"/nix/store/yv4pzx3lxk3lscq0pw3hqzs7k4x76xsm-python3-3.7.2/lib/python3.7/codeop.py\", line 168, in __call__\r\n    return _maybe_compile(self.compiler, source, filename, symbol)\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/core/macros.hy\", line 244, in hyx_Xnumber_signXXcommercial_atX\r\n    fndef (get expr -1))\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 Traceback (most recent call last):\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/compiler.py\", line 438, in compile\r\n    ret = self.compile_atom(tree)\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/compiler.py\", line 432, in compile_atom\r\n    return Result() + _model_compilers[type(atom)](self, atom)\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/compiler.py\", line 1703, in compile_expression\r\n    self, expr, unmangle(sroot), *parse_tree)\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/compiler.py\", line 1628, in compile_dispatch_tag_macro\r\n    self.module))\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/macros.py\", line 381, in tag_macroexpand\r\n    expr = tag_macro(tree)\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/core/macros.hy\", line 244, in hyx_Xnumber_signXXcommercial_atX\r\n    fndef (get expr -1))\r\n  File \"/home/ac/src/test/venv/lib/python3.7/site-packages/hy/models.py\", line 263, in __getitem__\r\n    ret = super(HySequence, self).__getitem__(item)\r\nIndexError: list index out of range\r\n\r\n(venv) \r\n[ac@black:~/src/test]$\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1754", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1754/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1754/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1754/events", "html_url": "https://github.com/hylang/hy/issues/1754", "id": 419250204, "node_id": "MDU6SXNzdWU0MTkyNTAyMDQ=", "number": 1754, "title": "HyKeyword __getstate__ w.r.t. pickle", "user": {"login": "ambrad", "id": 3401413, "node_id": "MDQ6VXNlcjM0MDE0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/3401413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ambrad", "html_url": "https://github.com/ambrad", "followers_url": "https://api.github.com/users/ambrad/followers", "following_url": "https://api.github.com/users/ambrad/following{/other_user}", "gists_url": "https://api.github.com/users/ambrad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ambrad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ambrad/subscriptions", "organizations_url": "https://api.github.com/users/ambrad/orgs", "repos_url": "https://api.github.com/users/ambrad/repos", "events_url": "https://api.github.com/users/ambrad/events{/privacy}", "received_events_url": "https://api.github.com/users/ambrad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-11T00:01:38Z", "updated_at": "2020-12-06T14:35:44Z", "closed_at": "2020-12-06T14:35:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "In approximately 0.14, this worked:\r\n```(with [f (open \"test.pickle\" \"w\")] (pickle.dump {:a 1} f))```\r\nIn 0.16 one gets:\r\n```TypeError: a class that defines __slots__ without defining __getstate__ cannot be pickled```\r\nbecause HyKeyword does not implement `__getstate__`. This is with\r\n```hy 0.16.0 using CPython(default) 2.7.7 on Linux```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1754/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1753", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1753/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1753/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1753/events", "html_url": "https://github.com/hylang/hy/issues/1753", "id": 419135196, "node_id": "MDU6SXNzdWU0MTkxMzUxOTY=", "number": 1753, "title": "Hy sys.executable may confuses python library", "user": {"login": "TristanCacqueray", "id": 154392, "node_id": "MDQ6VXNlcjE1NDM5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/154392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TristanCacqueray", "html_url": "https://github.com/TristanCacqueray", "followers_url": "https://api.github.com/users/TristanCacqueray/followers", "following_url": "https://api.github.com/users/TristanCacqueray/following{/other_user}", "gists_url": "https://api.github.com/users/TristanCacqueray/gists{/gist_id}", "starred_url": "https://api.github.com/users/TristanCacqueray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TristanCacqueray/subscriptions", "organizations_url": "https://api.github.com/users/TristanCacqueray/orgs", "repos_url": "https://api.github.com/users/TristanCacqueray/repos", "events_url": "https://api.github.com/users/TristanCacqueray/events{/privacy}", "received_events_url": "https://api.github.com/users/TristanCacqueray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-10T01:37:29Z", "updated_at": "2022-09-21T19:02:57Z", "closed_at": "2022-09-21T19:02:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For example this library: https://github.com/glumpy/glumpy/blob/master/glumpy/ext/glfw.py#L139\r\nuses \"sys.executable -c\" with python code, which is not working with hy and results in a import error.\r\n\r\nPerhaps the -c argument could check the command's dialect and fallback to hy.sys_executable if it's not hylang? Alternatively doing `(setv sys.executable hy.sys_executable)` fixes this issue.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1753/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1748", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1748/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1748/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1748/events", "html_url": "https://github.com/hylang/hy/issues/1748", "id": 411198547, "node_id": "MDU6SXNzdWU0MTExOTg1NDc=", "number": 1748, "title": "`native-tests.core.test-doc` fails in the second run of `pytest --ignore tests/test_bin.py`", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-17T15:20:38Z", "updated_at": "2020-12-06T16:56:47Z", "closed_at": "2020-12-06T16:56:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a weird one. I've tested it in a fresh virtualenv.\r\n\r\n<details>\r\n\r\n```\r\n$ git clean -dfx && pip install -e . && pytest --ignore tests/test_bin.py\r\nObtaining file:///tmp/testenv/hy\r\nCollecting rply>=0.7.7 (from hy==0.16.0)\r\n  Using cached https://files.pythonhosted.org/packages/e7/82/388e0845abda4bba5ba041aa32e411b3eed56f518c96c6565559e713a5ed/rply-0.7.7-py2.py3-none-any.whl\r\nCollecting astor>=0.7.1 (from hy==0.16.0)\r\n  Using cached https://files.pythonhosted.org/packages/35/6b/11530768cac581a12952a2aad00e1526b89d242d0b9f59534ef6e6a1752f/astor-0.7.1-py2.py3-none-any.whl\r\nCollecting funcparserlib>=0.3.6 (from hy==0.16.0)\r\nCollecting clint>=0.4 (from hy==0.16.0)\r\nCollecting appdirs (from rply>=0.7.7->hy==0.16.0)\r\n  Using cached https://files.pythonhosted.org/packages/56/eb/810e700ed1349edde4cbdc1b2a21e28cdf115f9faf263f6bbf8447c1abf3/appdirs-1.4.3-py2.py3-none-any.whl\r\nCollecting args (from clint>=0.4->hy==0.16.0)\r\nInstalling collected packages: appdirs, rply, astor, funcparserlib, args, clint, hy\r\n  Running setup.py develop for hy\r\nSuccessfully installed appdirs-1.4.3 args-0.1.0 astor-0.7.1 clint-0.5.1 funcparserlib-0.3.6 hy rply-0.7.7\r\n========================= test session starts ==========================\r\nplatform linux -- Python 3.7.2, pytest-4.2.1, py-1.7.0, pluggy-0.8.1\r\nrootdir: /tmp/testenv/hy, inifile: setup.cfg\r\ncollected 579 items                                                    \r\n\r\ntests/test_hy2py.py ..                                           [  0%]\r\ntests/test_lex.py ...............................                [  5%]\r\ntests/test_models.py ..............                              [  8%]\r\ntests/compilers/test_ast.py .................................... [ 14%]\r\n.......................................                          [ 21%] \r\ntests/compilers/test_compiler.py ..                              [ 21%]\r\ntests/importer/test_importer.py ............                     [ 23%]\r\ntests/importer/test_pyc.py .                                     [ 23%]\r\ntests/macros/test_macro_processor.py ....                        [ 24%]\r\ntests/macros/test_tag_macros.py .                                [ 24%]\r\ntests/native_tests/comprehensions.hy ............                [ 26%]\r\ntests/native_tests/core.hy ..................................... [ 32%]\r\n...................                                              [ 36%] \r\ntests/native_tests/defclass.hy ...........                       [ 38%]\r\ntests/native_tests/language.hy ................................. [ 43%]\r\n................................................................ [ 54%] \r\n...............x...                                              [ 58%] \r\ntests/native_tests/mangling.hy ...................               [ 61%]\r\ntests/native_tests/mathematics.hy ............................   [ 66%]\r\ntests/native_tests/model_patterns.hy ..                          [ 66%]\r\ntests/native_tests/native_macros.hy .......................      [ 70%]\r\ntests/native_tests/operators.hy ................................ [ 76%]\r\n........................                                         [ 80%] \r\ntests/native_tests/py35_only_tests.hy .........                  [ 81%]\r\ntests/native_tests/py36_only_tests.hy ...                        [ 82%]\r\ntests/native_tests/py3_only_tests.hy .......                     [ 83%]\r\ntests/native_tests/quote.hy ..........                           [ 85%]\r\ntests/native_tests/tag_macros.hy ..........                      [ 87%]\r\ntests/native_tests/unless.hy .                                   [ 87%]\r\ntests/native_tests/when.hy .                                     [ 87%]\r\ntests/native_tests/with_decorator.hy ....                        [ 88%]\r\ntests/native_tests/with_test.hy .....                            [ 88%]\r\ntests/native_tests/contrib/hy_repr.hy ...........                [ 90%]\r\ntests/native_tests/contrib/loop.hy ...                           [ 91%]\r\ntests/native_tests/contrib/multi.hy .......                      [ 92%]\r\ntests/native_tests/contrib/sequences.hy .....                    [ 93%]\r\ntests/native_tests/contrib/walk.hy .........................     [ 97%]\r\ntests/native_tests/extra/anaphoric.hy ............               [ 99%]\r\ntests/native_tests/extra/reserved.hy .                           [100%]\r\n\r\n================ 578 passed, 1 xfailed in 19.76 seconds ================\r\n$ pytest --ignore tests/test_bin.py \r\n========================= test session starts ==========================\r\nplatform linux -- Python 3.7.2, pytest-4.2.1, py-1.7.0, pluggy-0.8.1\r\nrootdir: /tmp/testenv/hy, inifile: setup.cfg\r\ncollected 579 items                                                    \r\n\r\ntests/test_hy2py.py ..                                           [  0%]\r\ntests/test_lex.py ...............................                [  5%]\r\ntests/test_models.py ..............                              [  8%]\r\ntests/compilers/test_ast.py .................................... [ 14%]\r\n.......................................                          [ 21%] \r\ntests/compilers/test_compiler.py ..                              [ 21%]\r\ntests/importer/test_importer.py ............                     [ 23%]\r\ntests/importer/test_pyc.py .                                     [ 23%]\r\ntests/macros/test_macro_processor.py ....                        [ 24%]\r\ntests/macros/test_tag_macros.py .                                [ 24%]\r\ntests/native_tests/comprehensions.hy ............                [ 26%]\r\ntests/native_tests/core.hy F.................................... [ 32%]\r\n...................                                              [ 36%] \r\ntests/native_tests/defclass.hy ...........                       [ 38%]\r\ntests/native_tests/language.hy ................................. [ 43%]\r\n................................................................ [ 54%] \r\n...............x...                                              [ 58%] \r\ntests/native_tests/mangling.hy ...................               [ 61%]\r\ntests/native_tests/mathematics.hy ............................   [ 66%]\r\ntests/native_tests/model_patterns.hy ..                          [ 66%]\r\ntests/native_tests/native_macros.hy .......................      [ 70%]\r\ntests/native_tests/operators.hy ................................ [ 76%]\r\n........................                                         [ 80%] \r\ntests/native_tests/py35_only_tests.hy .........                  [ 81%]\r\ntests/native_tests/py36_only_tests.hy ...                        [ 82%]\r\ntests/native_tests/py3_only_tests.hy .......                     [ 83%]\r\ntests/native_tests/quote.hy ..........                           [ 85%]\r\ntests/native_tests/tag_macros.hy ..........                      [ 87%]\r\ntests/native_tests/unless.hy .                                   [ 87%]\r\ntests/native_tests/when.hy .                                     [ 87%]\r\ntests/native_tests/with_decorator.hy ....                        [ 88%]\r\ntests/native_tests/with_test.hy .....                            [ 88%]\r\ntests/native_tests/contrib/hy_repr.hy ...........                [ 90%]\r\ntests/native_tests/contrib/loop.hy ...                           [ 91%]\r\ntests/native_tests/contrib/multi.hy .......                      [ 92%]\r\ntests/native_tests/contrib/sequences.hy .....                    [ 93%]\r\ntests/native_tests/contrib/walk.hy .........................     [ 97%]\r\ntests/native_tests/extra/anaphoric.hy ............               [ 99%]\r\ntests/native_tests/extra/reserved.hy .                           [100%]\r\n```\r\n</details>\r\n\r\n```\r\n=============================== FAILURES ===============================\r\n_______________________________ test_doc _______________________________\r\n\r\ncapsys = <_pytest.capture.CaptureFixture object at 0x7f47d14353c8>\r\n\r\n>   ;; Copyright 2019 the authors.\r\nE   NameError: name '__macros__' is not defined\r\n\r\ntests/native_tests/core.hy:1: NameError\r\n=========== 1 failed, 577 passed, 1 xfailed in 8.18 seconds ============\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1748/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1747", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1747/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1747/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1747/events", "html_url": "https://github.com/hylang/hy/issues/1747", "id": 409521112, "node_id": "MDU6SXNzdWU0MDk1MjExMTI=", "number": 1747, "title": "Slow startup when Hy is installed from a wheel", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-12T22:03:16Z", "updated_at": "2022-06-07T15:49:14Z", "closed_at": "2022-06-07T15:49:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Testing the new release of 0.16.0, I see that startup is much slower when installing from the wheel than from the source distribution or directly from the repository. Likewise for older Hy releases. Even when I make sure the `__pycache__`s are included in the wheel and I can see they're installed. Either there's something wonky with my system, or wheel installation doesn't play nicely with premade byte-compiled files.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1747/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1707", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1707/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1707/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1707/events", "html_url": "https://github.com/hylang/hy/issues/1707", "id": 384462705, "node_id": "MDU6SXNzdWUzODQ0NjI3MDU=", "number": 1707, "title": "`defmain` fails with no arguments", "user": {"login": "brandonwillard", "id": 971601, "node_id": "MDQ6VXNlcjk3MTYwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/971601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brandonwillard", "html_url": "https://github.com/brandonwillard", "followers_url": "https://api.github.com/users/brandonwillard/followers", "following_url": "https://api.github.com/users/brandonwillard/following{/other_user}", "gists_url": "https://api.github.com/users/brandonwillard/gists{/gist_id}", "starred_url": "https://api.github.com/users/brandonwillard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brandonwillard/subscriptions", "organizations_url": "https://api.github.com/users/brandonwillard/orgs", "repos_url": "https://api.github.com/users/brandonwillard/repos", "events_url": "https://api.github.com/users/brandonwillard/events{/privacy}", "received_events_url": "https://api.github.com/users/brandonwillard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-26T18:49:26Z", "updated_at": "2018-12-11T15:32:19Z", "closed_at": "2018-12-11T15:32:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From the command line (e.g. `hy test.hy`), the `defmain` macro fails with empty arguments (e.g. `(defmain [x] ...)` appears to work).\r\n\r\n## Example\r\n\r\n```clojure\r\n;; test.hy\r\n(defmain []\r\n  (print \"hi\"))\r\n```\r\n```bash\r\n> hy test.hy\r\nTraceback (most recent call last):\r\n  File \"/home/bwillard/apps/anaconda3/envs/hy-master-cpython36/bin/hy\", line 12, in <module>\r\n    sys.exit(hy_main())\r\n  File \"/home/bwillard/projects/code/python/hy-master/hy/cmdline.py\", line 381, in hy_main\r\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n  File \"/home/bwillard/projects/code/python/hy-master/hy/cmdline.py\", line 367, in cmdline_handler\r\n    runhy.run_path(filename, run_name='__main__')\r\n  File \"/home/bwillard/apps/anaconda3/envs/hy-master-cpython36/lib/python3.6/runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"/home/bwillard/apps/anaconda3/envs/hy-master-cpython36/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/home/bwillard/apps/anaconda3/envs/hy-master-cpython36/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/tmp/test.hy\", line 1, in <module>\r\n    (defmain []\r\nTypeError: <lambda>() takes 0 positional arguments but 1 was given\r\n```\r\n\r\n_Originally posted by @brandonwillard in https://github.com/hylang/hy/issues/1706#issuecomment-441751053_", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1707/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1694", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1694/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1694/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1694/events", "html_url": "https://github.com/hylang/hy/issues/1694", "id": 378893492, "node_id": "MDU6SXNzdWUzNzg4OTM0OTI=", "number": 1694, "title": "\"\\n\" isn't mangled appropriately", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-08T19:59:52Z", "updated_at": "2018-12-30T00:56:38Z", "closed_at": "2018-12-30T00:56:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "    => (mangle \"\\n\")\r\n    'hyx_XUnX'\r\n    => (unmangle (mangle \"\\n\"))\r\n    Traceback (most recent call last):\r\n    \u2026\r\n    ValueError: invalid literal for int() with base 16: 'n'\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1694/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1693", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1693/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1693/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1693/events", "html_url": "https://github.com/hylang/hy/issues/1693", "id": 378524400, "node_id": "MDU6SXNzdWUzNzg1MjQ0MDA=", "number": 1693, "title": "Remove internal `importlib` frames from traceback", "user": {"login": "brandonwillard", "id": 971601, "node_id": "MDQ6VXNlcjk3MTYwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/971601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brandonwillard", "html_url": "https://github.com/brandonwillard", "followers_url": "https://api.github.com/users/brandonwillard/followers", "following_url": "https://api.github.com/users/brandonwillard/following{/other_user}", "gists_url": "https://api.github.com/users/brandonwillard/gists{/gist_id}", "starred_url": "https://api.github.com/users/brandonwillard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brandonwillard/subscriptions", "organizations_url": "https://api.github.com/users/brandonwillard/orgs", "repos_url": "https://api.github.com/users/brandonwillard/repos", "events_url": "https://api.github.com/users/brandonwillard/events{/privacy}", "received_events_url": "https://api.github.com/users/brandonwillard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-08T00:13:46Z", "updated_at": "2021-07-26T00:44:36Z", "closed_at": "2021-07-26T00:44:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Python 3.x uses `_call_with_frames_removed` to remove internal frames from tracebacks.  I tried it in #1687, but couldn't get it to work; might be due to this [Python issue](https://bugs.python.org/issue23773).  \r\nRegardless, it would be good to remove those frames somehow.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1690", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1690/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1690/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1690/events", "html_url": "https://github.com/hylang/hy/issues/1690", "id": 374797499, "node_id": "MDU6SXNzdWUzNzQ3OTc0OTk=", "number": 1690, "title": "Hy repl doesn't open on clean install python 3.7", "user": {"login": "vshesh", "id": 2929957, "node_id": "MDQ6VXNlcjI5Mjk5NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2929957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vshesh", "html_url": "https://github.com/vshesh", "followers_url": "https://api.github.com/users/vshesh/followers", "following_url": "https://api.github.com/users/vshesh/following{/other_user}", "gists_url": "https://api.github.com/users/vshesh/gists{/gist_id}", "starred_url": "https://api.github.com/users/vshesh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vshesh/subscriptions", "organizations_url": "https://api.github.com/users/vshesh/orgs", "repos_url": "https://api.github.com/users/vshesh/repos", "events_url": "https://api.github.com/users/vshesh/events{/privacy}", "received_events_url": "https://api.github.com/users/vshesh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-28T20:55:51Z", "updated_at": "2021-08-18T12:33:35Z", "closed_at": "2021-08-18T12:33:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Did the following on a mac:\r\n\r\n```\r\n$ brew install python\r\n$ python3\r\nPython 3.7.0 ....\r\n$ pip3 install hy\r\n...\r\n$ hy\r\n-bash: /usr/local/bin/hy: /usr/local/opt/python3/bin/python3.5: bad interpreter: No such file or directory\r\n```\r\n\r\nWhen I ``cat `which hy``` I get:\r\n\r\n```\r\n#!/usr/local/opt/python3/bin/python3.5\r\n\r\n# -*- coding: utf-8 -*-\r\nimport re\r\nimport sys\r\n\r\nfrom hy.cmdline import hy_main\r\n\r\nif __name__ == '__main__':\r\n    sys.argv[0] = re.sub(r'(-script\\.pyw?|\\.exe)?$', '', sys.argv[0])\r\n    sys.exit(hy_main())\r\n```\r\n\r\nWhy is there a shebang line pointing to python 3.5? I can run ``python3 `which hy``` and everything (so far as I can tell) works just fine.\r\n\r\nTried with latest git (pip install git+...) and same issue.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1641", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1641/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1641/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1641/events", "html_url": "https://github.com/hylang/hy/issues/1641", "id": 333766717, "node_id": "MDU6SXNzdWUzMzM3NjY3MTc=", "number": 1641, "title": "`(.foo #* bar)` raises a compile-time RecursionError", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-19T17:24:53Z", "updated_at": "2018-07-30T17:24:58Z", "closed_at": "2018-07-30T17:24:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Maybe we'll decide not to implement this construct. Even then, we should avoid the infinite recursion.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1630", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1630/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1630/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1630/events", "html_url": "https://github.com/hylang/hy/issues/1630", "id": 329551160, "node_id": "MDU6SXNzdWUzMjk1NTExNjA=", "number": 1630, "title": "hy.contrib.multi.defn doesn't respect local scope", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-06-05T17:20:33Z", "updated_at": "2019-11-20T01:38:55Z", "closed_at": "2019-11-20T01:38:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Consider this code:\r\n\r\n    (require [hy.contrib.multi [defn]])\r\n\r\n    (defn outer1 []\r\n      (defn fun\r\n        ([] 1))\r\n      fun)\r\n\r\n    (defn outer2 []\r\n      (defn fun\r\n        ([] 2))\r\n      fun)\r\n\r\n    (setv f1 (outer1))\r\n    (print (f1))\r\n    (setv f2 (outer2))\r\n    (print (f2))\r\n    (print (f1))\r\n\r\nThe final line prints 2 rather than 1 as you'd expect.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1630/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1630/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1617", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1617/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1617/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1617/events", "html_url": "https://github.com/hylang/hy/issues/1617", "id": 325050102, "node_id": "MDU6SXNzdWUzMjUwNTAxMDI=", "number": 1617, "title": "hy-repr mishandles lexically illegal symbols and keywords", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-21T20:34:05Z", "updated_at": "2021-05-18T12:21:07Z", "closed_at": "2021-05-18T12:21:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, the `hy-repr` of `(HySymbol \"a b\")` is `'a b`, which obviously doesn't work. I initially thought we could use something like `(HySymbol \"a b\")`, but that's not correct in general; e.g., `((HySymbol \"foo\") x)` is not equivalent to `(foo x)`.\r\n\r\nThe most obvious solution to this is to implement a way to quote symbols (#1117) and use that. Alternatively, it may be possible to solve this with quasiquoting.\r\n\r\nThe good news is that this is an incredibly obscure bug, because what reason would one have to construct a lexically illegal symbol or keyword in the first place?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1602", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1602/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1602/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1602/events", "html_url": "https://github.com/hylang/hy/issues/1602", "id": 319765368, "node_id": "MDU6SXNzdWUzMTk3NjUzNjg=", "number": 1602, "title": "bug in let handle-dot for . DSL", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-03T01:48:38Z", "updated_at": "2018-05-18T17:47:09Z", "closed_at": "2018-05-18T17:47:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n=> (let [spam (fn[])  a 1] (setv spam.a 42) (print (. spam a)))\r\n\r\nTraceback (most recent call last):\r\n  ...\r\nNameError: name 'spam' is not defined\r\n```\r\nThe first symbol after the `.` isn't getting expanded. I've got a fix already.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1602/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1599", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1599/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1599/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1599/events", "html_url": "https://github.com/hylang/hy/issues/1599", "id": 319359460, "node_id": "MDU6SXNzdWUzMTkzNTk0NjA=", "number": 1599, "title": "Not installing", "user": {"login": "srfoster", "id": 764563, "node_id": "MDQ6VXNlcjc2NDU2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/764563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srfoster", "html_url": "https://github.com/srfoster", "followers_url": "https://api.github.com/users/srfoster/followers", "following_url": "https://api.github.com/users/srfoster/following{/other_user}", "gists_url": "https://api.github.com/users/srfoster/gists{/gist_id}", "starred_url": "https://api.github.com/users/srfoster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srfoster/subscriptions", "organizations_url": "https://api.github.com/users/srfoster/orgs", "repos_url": "https://api.github.com/users/srfoster/repos", "events_url": "https://api.github.com/users/srfoster/events{/privacy}", "received_events_url": "https://api.github.com/users/srfoster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-01T23:17:51Z", "updated_at": "2018-05-21T22:56:19Z", "closed_at": "2018-05-07T02:18:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the past, I've installed hy with\r\n\r\n```\r\npip install git+https://github.com/hylang/hy.git\r\n```\r\n\r\nWhen I tried this on a new computer today, I got the error below.  Did something change?  Or am I doing something wrong?\r\n\r\n```\r\npip install git+https://github.com/hylang/hy.git\r\nCollecting git+https://github.com/hylang/hy.git\r\n  Cloning https://github.com/hylang/hy.git to /tmp/pip-req-build-t58g4e3_\r\nRequirement already satisfied: rply>=0.7.5 in /usr/local/lib/python3.5/dist-packages (from hy==0.14.0+127.gbb10921) (0.7.5)\r\nRequirement already satisfied: astor in /usr/local/lib/python3.5/dist-packages (from hy==0.14.0+127.gbb10921) (0.6.2)\r\nRequirement already satisfied: clint>=0.4 in /usr/local/lib/python3.5/dist-packages (from hy==0.14.0+127.gbb10921) (0.5.1)\r\nRequirement already satisfied: appdirs in /usr/local/lib/python3.5/dist-packages (from rply>=0.7.5->hy==0.14.0+127.gbb10921) (1.4.3)\r\nRequirement already satisfied: args in /usr/local/lib/python3.5/dist-packages (from clint>=0.4->hy==0.14.0+127.gbb10921) (0.1.0)\r\nBuilding wheels for collected packages: hy\r\n  Running setup.py bdist_wheel for hy ... error\r\n  Complete output from command /usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-t58g4e3_/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-t8cs05fo --python-tag cp35:\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib\r\n  creating build/lib/hy\r\n  copying hy/models.py -> build/lib/hy\r\n  copying hy/completer.py -> build/lib/hy\r\n  copying hy/__main__.py -> build/lib/hy\r\n  copying hy/macros.py -> build/lib/hy\r\n  copying hy/__init__.py -> build/lib/hy\r\n  copying hy/inspect.py -> build/lib/hy\r\n  copying hy/_compat.py -> build/lib/hy\r\n  copying hy/importer.py -> build/lib/hy\r\n  copying hy/cmdline.py -> build/lib/hy\r\n  copying hy/compiler.py -> build/lib/hy\r\n  copying hy/errors.py -> build/lib/hy\r\n  copying hy/version.py -> build/lib/hy\r\n  creating build/lib/hy/lex\r\n  copying hy/lex/parser.py -> build/lib/hy/lex\r\n  copying hy/lex/exceptions.py -> build/lib/hy/lex\r\n  copying hy/lex/lexer.py -> build/lib/hy/lex\r\n  copying hy/lex/__init__.py -> build/lib/hy/lex\r\n  creating build/lib/hy/core\r\n  copying hy/core/__init__.py -> build/lib/hy/core\r\n  creating build/lib/hy/extra\r\n  copying hy/extra/__init__.py -> build/lib/hy/extra\r\n  creating build/lib/hy/contrib\r\n  copying hy/contrib/__init__.py -> build/lib/hy/contrib\r\n  copying hy/core/macros.hy -> build/lib/hy/core\r\n  copying hy/core/shadow.hy -> build/lib/hy/core\r\n  copying hy/core/bootstrap.hy -> build/lib/hy/core\r\n  copying hy/core/language.hy -> build/lib/hy/core\r\n  copying hy/extra/anaphoric.hy -> build/lib/hy/extra\r\n  copying hy/extra/reserved.hy -> build/lib/hy/extra\r\n  copying hy/contrib/walk.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/loop.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/sequences.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/hy_repr.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/botsbuildbots.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/multi.hy -> build/lib/hy/contrib\r\n  copying hy/contrib/profile.hy -> build/lib/hy/contrib\r\n  installing to build/bdist.linux-x86_64/wheel\r\n  running install\r\n  Traceback (most recent call last):\r\n    File \"<string>\", line 1, in <module>\r\n    File \"/tmp/pip-req-build-t58g4e3_/setup.py\", line 90, in <module>\r\n      \"Topic :: Software Development :: Libraries\",\r\n    File \"/usr/local/lib/python3.5/dist-packages/setuptools/__init__.py\", line 129, in setup\r\n      return distutils.core.setup(**attrs)\r\n    File \"/usr/lib/python3.5/distutils/core.py\", line 148, in setup\r\n      dist.run_commands()\r\n    File \"/usr/lib/python3.5/distutils/dist.py\", line 955, in run_commands\r\n      self.run_command(cmd)\r\n    File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\r\n      cmd_obj.run()\r\n    File \"/usr/local/lib/python3.5/dist-packages/wheel/bdist_wheel.py\", line 238, in run\r\n      self.run_command('install')\r\n    File \"/usr/lib/python3.5/distutils/cmd.py\", line 313, in run_command\r\n      self.distribution.run_command(command)\r\n    File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\r\n      cmd_obj.run()\r\n    File \"/tmp/pip-req-build-t58g4e3_/setup.py\", line 30, in run\r\n      \".\" + filename[:-len(\".hy\")])\r\n    File \"/usr/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n      return _bootstrap._gcd_import(name[level:], package, level)\r\n    File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n    File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n    File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n    File \"<frozen importlib._bootstrap>\", line 664, in _load_unlocked\r\n    File \"<frozen importlib._bootstrap>\", line 634, in _load_backward_compatible\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 251, in load_module\r\n      return import_file_to_module(fullname, self.path, self)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 104, in import_file_to_module\r\n      _ast = import_file_to_ast(fpath, module_name)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 59, in import_file_to_ast\r\n      return hy_compile(import_file_to_hst(fpath), module_name)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 2194, in hy_compile\r\n      result = compiler.compile(tree)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 443, in compile\r\n      ret = self.compile_atom(_type, tree)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n      else atom_compiler(self, atom))\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 1678, in compile_expression\r\n      ret = self.compile_atom(fn, expression)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n      else atom_compiler(self, atom))\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 760, in compile_do\r\n      return self._compile_branch(expression)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 528, in _compile_branch\r\n      return _branch(self.compile(expr) for expr in exprs)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 297, in _branch\r\n      results = list(results)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 528, in <genexpr>\r\n      return _branch(self.compile(expr) for expr in exprs)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 443, in compile\r\n      ret = self.compile_atom(_type, tree)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n      else atom_compiler(self, atom))\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 1658, in compile_expression\r\n      expression = macroexpand(expression, self)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/macros.py\", line 194, in macroexpand\r\n      obj = m(compiler.module_name, *tree[1:], **opts)\r\n    File \"/tmp/pip-req-build-t58g4e3_/hy/core/bootstrap.hy\", line 327, in _hy_anon_var_11\r\n  hy.errors.HyMacroExpansionError:   File \"/tmp/pip-req-build-t58g4e3_/hy/contrib/botsbuildbots.hy\", line 5, column 7\r\n  \r\n    (defn Botsbuildbots () (Botsbuildbots))\r\n          ^------------^\r\n  HyMacroExpansionError: defn takes a parameter list as second argument\r\n  \r\n  \r\n  \r\n  ----------------------------------------\r\n  Failed building wheel for hy\r\n  Running setup.py clean for hy\r\nFailed to build hy\r\nInstalling collected packages: hy\r\n  Running setup.py install for hy ... error\r\n    Complete output from command /usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-t58g4e3_/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-m2ni2zpt/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/tmp/pip-req-build-t58g4e3_/setup.py\", line 90, in <module>\r\n        \"Topic :: Software Development :: Libraries\",\r\n      File \"/usr/local/lib/python3.5/dist-packages/setuptools/__init__.py\", line 129, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/usr/lib/python3.5/distutils/core.py\", line 148, in setup\r\n        dist.run_commands()\r\n      File \"/usr/lib/python3.5/distutils/dist.py\", line 955, in run_commands\r\n        self.run_command(cmd)\r\n      File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\r\n        cmd_obj.run()\r\n      File \"/tmp/pip-req-build-t58g4e3_/setup.py\", line 30, in run\r\n        \".\" + filename[:-len(\".hy\")])\r\n      File \"/usr/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n        return _bootstrap._gcd_import(name[level:], package, level)\r\n      File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n      File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n      File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n      File \"<frozen importlib._bootstrap>\", line 664, in _load_unlocked\r\n      File \"<frozen importlib._bootstrap>\", line 634, in _load_backward_compatible\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 251, in load_module\r\n        return import_file_to_module(fullname, self.path, self)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 104, in import_file_to_module\r\n        _ast = import_file_to_ast(fpath, module_name)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/importer.py\", line 59, in import_file_to_ast\r\n        return hy_compile(import_file_to_hst(fpath), module_name)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 2194, in hy_compile\r\n        result = compiler.compile(tree)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 443, in compile\r\n        ret = self.compile_atom(_type, tree)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n        else atom_compiler(self, atom))\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 1678, in compile_expression\r\n        ret = self.compile_atom(fn, expression)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n        else atom_compiler(self, atom))\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 760, in compile_do\r\n        return self._compile_branch(expression)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 528, in _compile_branch\r\n        return _branch(self.compile(expr) for expr in exprs)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 297, in _branch\r\n        results = list(results)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 528, in <genexpr>\r\n        return _branch(self.compile(expr) for expr in exprs)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 443, in compile\r\n        ret = self.compile_atom(_type, tree)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 430, in compile_atom\r\n        else atom_compiler(self, atom))\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/compiler.py\", line 1658, in compile_expression\r\n        expression = macroexpand(expression, self)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/macros.py\", line 194, in macroexpand\r\n        obj = m(compiler.module_name, *tree[1:], **opts)\r\n      File \"/tmp/pip-req-build-t58g4e3_/hy/core/bootstrap.hy\", line 327, in _hy_anon_var_11\r\n    hy.errors.HyMacroExpansionError:   File \"/tmp/pip-req-build-t58g4e3_/hy/contrib/botsbuildbots.hy\", line 5, column 7\r\n    \r\n      (defn Botsbuildbots () (Botsbuildbots))\r\n            ^------------^\r\n    HyMacroExpansionError: defn takes a parameter list as second argument\r\n    \r\n    \r\n    \r\n    ----------------------------------------\r\nCommand \"/usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-req-build-t58g4e3_/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-m2ni2zpt/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-req-build-t58g4e3_/\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1584", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1584/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1584/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1584/events", "html_url": "https://github.com/hylang/hy/issues/1584", "id": 314430511, "node_id": "MDU6SXNzdWUzMTQ0MzA1MTE=", "number": 1584, "title": "In `try` bodies, expressions before the last are dropped", "user": {"login": "etanol", "id": 85804, "node_id": "MDQ6VXNlcjg1ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/85804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/etanol", "html_url": "https://github.com/etanol", "followers_url": "https://api.github.com/users/etanol/followers", "following_url": "https://api.github.com/users/etanol/following{/other_user}", "gists_url": "https://api.github.com/users/etanol/gists{/gist_id}", "starred_url": "https://api.github.com/users/etanol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/etanol/subscriptions", "organizations_url": "https://api.github.com/users/etanol/orgs", "repos_url": "https://api.github.com/users/etanol/repos", "events_url": "https://api.github.com/users/etanol/events{/privacy}", "received_events_url": "https://api.github.com/users/etanol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-15T16:34:54Z", "updated_at": "2018-04-30T16:24:25Z", "closed_at": "2018-04-30T16:24:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using multiple expressions in the body of a `try` form, those that are function calls seem to be discarded by the compiler.  Given the following code sample:\r\n\r\n``` hy\r\n(setv val 0)\r\n(print (try\r\n         (+= val 1)\r\n         (print \"Check\")\r\n         val\r\n         (except [Exception] -1)))\r\n```\r\n\r\nExecuting with Hy 0.14.0 under Python 3.5.2 prints `1` but **not** `Check`.  Running `hy2py3` prints the following code:\r\n\r\n``` python\r\nval = 0\r\ntry:\r\n    val += 1\r\n    _hy_anon_var_1 = val\r\nexcept Exception:\r\n    _hy_anon_var_1 = -1\r\nprint(_hy_anon_var_1)\r\n```\r\n\r\nUsing a `do` form solves the issue.  However, the documentation seems to suggest that multiple expressions are allowed in the `try` body; as well as #1427.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1574", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1574/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1574/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1574/events", "html_url": "https://github.com/hylang/hy/issues/1574", "id": 311733594, "node_id": "MDU6SXNzdWUzMTE3MzM1OTQ=", "number": 1574, "title": "(macroexpand 'NaN) enters infinite macro-expansion loop", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-05T19:09:56Z", "updated_at": "2018-04-21T19:34:51Z", "closed_at": "2018-04-21T19:34:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1574/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1574/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1571", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1571/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1571/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1571/events", "html_url": "https://github.com/hylang/hy/issues/1571", "id": 311427433, "node_id": "MDU6SXNzdWUzMTE0Mjc0MzM=", "number": 1571, "title": "Malformed escape sequence can crash the repl.", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-04-04T23:40:40Z", "updated_at": "2018-04-07T18:54:53Z", "closed_at": "2018-04-07T18:54:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Minimal example.\r\n```\r\n=> \"\\x8\"\r\n```\r\nThe repl should _never_ crash due to malformed input. If it accepts the line as complete, it should report the syntax error, not quit to the shell.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1571/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1564", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1564/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1564/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1564/events", "html_url": "https://github.com/hylang/hy/issues/1564", "id": 310418539, "node_id": "MDU6SXNzdWUzMTA0MTg1Mzk=", "number": 1564, "title": "Mangling changes broke REPL completer", "user": {"login": "vodik", "id": 216803, "node_id": "MDQ6VXNlcjIxNjgwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/216803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vodik", "html_url": "https://github.com/vodik", "followers_url": "https://api.github.com/users/vodik/followers", "following_url": "https://api.github.com/users/vodik/following{/other_user}", "gists_url": "https://api.github.com/users/vodik/gists{/gist_id}", "starred_url": "https://api.github.com/users/vodik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vodik/subscriptions", "organizations_url": "https://api.github.com/users/vodik/orgs", "repos_url": "https://api.github.com/users/vodik/repos", "events_url": "https://api.github.com/users/vodik/events{/privacy}", "received_events_url": "https://api.github.com/users/vodik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-02T07:34:31Z", "updated_at": "2021-06-13T02:19:32Z", "closed_at": "2021-06-13T02:19:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Just noticed this - as the completer is doing its own mangling (e.g. `key.replace(\"_\", \"-\")`)\r\n\r\nGot a patch almost ready for this.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1541", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1541/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1541/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1541/events", "html_url": "https://github.com/hylang/hy/issues/1541", "id": 308300214, "node_id": "MDU6SXNzdWUzMDgzMDAyMTQ=", "number": 1541, "title": "Pygments Hy lexer needs improvements", "user": {"login": "vodik", "id": 216803, "node_id": "MDQ6VXNlcjIxNjgwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/216803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vodik", "html_url": "https://github.com/vodik", "followers_url": "https://api.github.com/users/vodik/followers", "following_url": "https://api.github.com/users/vodik/following{/other_user}", "gists_url": "https://api.github.com/users/vodik/gists{/gist_id}", "starred_url": "https://api.github.com/users/vodik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vodik/subscriptions", "organizations_url": "https://api.github.com/users/vodik/orgs", "repos_url": "https://api.github.com/users/vodik/repos", "events_url": "https://api.github.com/users/vodik/events{/privacy}", "received_events_url": "https://api.github.com/users/vodik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-24T21:26:11Z", "updated_at": "2022-11-07T17:36:42Z", "closed_at": "2022-11-07T17:36:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See #1522, all remaining syntax highlighting problems seem to be deficiencies in their lexer.\r\n\r\nIssues:\r\n\r\n- [ ] Hy doesn't lex unicode literals: [Issue 1422][1422]\r\n- [ ] Hy lexer should accept colons inside identifier: [PR 754][754]\r\n\r\n  [1422]: https://bitbucket.org/birkenfeld/pygments-main/issues/1422/hy-doesnt-lex-unicode-literals\r\n  [754]: https://bitbucket.org/birkenfeld/pygments-main/pull-requests/754/hy-lexer-should-accept-colons-inside/diff\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1540", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1540/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1540/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1540/events", "html_url": "https://github.com/hylang/hy/issues/1540", "id": 308288101, "node_id": "MDU6SXNzdWUzMDgyODgxMDE=", "number": 1540, "title": "Module docstrings don't work with together with Hy core imports", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-24T18:42:07Z", "updated_at": "2018-09-11T20:32:58Z", "closed_at": "2018-09-11T20:32:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Similarly to #1367, any automatic imports from core will prevent a string literal from being the first statement in a module, and hence from being the module docstring.\r\n\r\n    $ echo '\"hello world\" (print (get [1 2] 0))' > test.hy\r\n    $ hy -c '(import test) (print test.__doc__)'\r\n    1\r\n    hello world\r\n    $ echo '\"hello world\" (print (first [1 2]))' > test.hy \r\n    $ hy -c '(import test) (print test.__doc__)'          \r\n    1\r\n    None\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1539", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1539/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1539/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1539/events", "html_url": "https://github.com/hylang/hy/issues/1539", "id": 308146708, "node_id": "MDU6SXNzdWUzMDgxNDY3MDg=", "number": 1539, "title": "Bodies should be optional in more places where Python accepts `pass`", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-23T19:05:54Z", "updated_at": "2018-04-30T03:05:09Z", "closed_at": "2018-04-30T03:05:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I notice in particular that Hy doesn't allow `(while (f))` or `(for [x (generator)])`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1539/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1537", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1537/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1537/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1537/events", "html_url": "https://github.com/hylang/hy/issues/1537", "id": 306330840, "node_id": "MDU6SXNzdWUzMDYzMzA4NDA=", "number": 1537, "title": "->> can duplicate an argument when called in a macro", "user": {"login": "tuturto", "id": 1389385, "node_id": "MDQ6VXNlcjEzODkzODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1389385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuturto", "html_url": "https://github.com/tuturto", "followers_url": "https://api.github.com/users/tuturto/followers", "following_url": "https://api.github.com/users/tuturto/following{/other_user}", "gists_url": "https://api.github.com/users/tuturto/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuturto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuturto/subscriptions", "organizations_url": "https://api.github.com/users/tuturto/orgs", "repos_url": "https://api.github.com/users/tuturto/repos", "events_url": "https://api.github.com/users/tuturto/events{/privacy}", "received_events_url": "https://api.github.com/users/tuturto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-19T04:34:15Z", "updated_at": "2018-03-23T21:17:15Z", "closed_at": "2018-03-23T21:17:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I came across a bug (feature) that I can't really understand. In macros, threading with ``->>`` into a ``tuple`` gives error \"TypeError('tuple() takes at most 1 argument (2 given)',)\" if I have ``tuple`` as expression. Instead, if I have that as just a symbol (ie. without enclosing parentheses), the error isn't raised.\r\n\r\nLooking into code, I thought that the both would result the same code. Both ``(->> body (tuple))`` and ``(->> body tuple)`` should turn into ``(tuple body)``. This has been around at least since 0.12.1, so I don't expect it to be anything new.\r\n\r\nMinimal example I could come up with:\r\n```\r\n(hy-master)tuukka@eevertti:~$ hy\r\nhy 0.14.0+48.gcb72a8c using CPython(default) 3.4.3 on Linux\r\n=> (defmacro not-ok [&rest body]\r\n...   (setv uniques (->> body\r\n...                      (tuple)))\r\n...   `(print \"ok\"))\r\n<function _hy_anon_var_1 at 0xb6a53a04>\r\n=>\r\n=> (not-ok (foo bar (baz)))\r\n  File \"<input>\", line 1, column 1\r\n\r\n  (not-ok (foo bar (baz)))\r\n  ^----------------------^\r\nHyMacroExpansionError: expanding `not-ok': TypeError('tuple() takes at most 1 argument (2 given)',)\r\n\r\n\r\n=> (defmacro ok [&rest body]\r\n...   (setv uniques (->> body\r\n...                      tuple))\r\n...   `(print \"ok\"))\r\n<function _hy_anon_var_1 at 0xb6a47b24>\r\n=>\r\n=> (ok (foo bar (baz)))\r\nok\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1537/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1535", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1535/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1535/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1535/events", "html_url": "https://github.com/hylang/hy/issues/1535", "id": 305410202, "node_id": "MDU6SXNzdWUzMDU0MTAyMDI=", "number": 1535, "title": "On Windows, REPL fails to start if there's a non-ASCII character in .hy-history", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-03-15T04:16:23Z", "updated_at": "2022-02-03T22:03:22Z", "closed_at": "2022-02-03T22:03:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "At least on Windows, if you paste a `\u0394` into the repl, you can get in a state where the repl refuses to start.\r\nIt gets saved into the `.hy-history` file properly. But if you re-run the repl while a `\u0394` is in the history file, it gets corrupted as something like `\u00ce\u201d` upon exit.\r\n\r\nSeems like it could be an encoding issue in pyreadline, which completely chokes on it. I think that's what we're using to save the repl history. Maybe we've set some options improperly, or maybe pyreadline itself has a bug. Not sure.\r\n\r\nThis may be just on Windows though, since it uses its own encoding in the console. If you're running a different OS, can you confirm?\r\n\r\nDeleting the offending characters from `.hy-history` allows the repl to start again.\r\n\r\nI'm wondering if we should mangle with X's instead of \u0394's even on Python3 to avoid this kind of issue. Pasting these things in the repl would be very tempting.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1533", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1533/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1533/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1533/events", "html_url": "https://github.com/hylang/hy/issues/1533", "id": 305275303, "node_id": "MDU6SXNzdWUzMDUyNzUzMDM=", "number": 1533, "title": "Triple-quoted docstrings trigger internal compiler bug", "user": {"login": "svrama", "id": 332660, "node_id": "MDQ6VXNlcjMzMjY2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/332660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svrama", "html_url": "https://github.com/svrama", "followers_url": "https://api.github.com/users/svrama/followers", "following_url": "https://api.github.com/users/svrama/following{/other_user}", "gists_url": "https://api.github.com/users/svrama/gists{/gist_id}", "starred_url": "https://api.github.com/users/svrama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svrama/subscriptions", "organizations_url": "https://api.github.com/users/svrama/orgs", "repos_url": "https://api.github.com/users/svrama/repos", "events_url": "https://api.github.com/users/svrama/events{/privacy}", "received_events_url": "https://api.github.com/users/svrama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-03-14T18:20:19Z", "updated_at": "2018-03-31T19:58:33Z", "closed_at": "2018-03-31T19:58:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I accidentally use triple quotes in my docstrings (say, when playing with the Hy tutorial and assuming too much similarity to Python class docstrings), I trigger an internal compiler bug (`IndexError: string index out of range`), rather than a more readable Hy syntax error.\r\n\r\nI first saw this in v0.14 and am able to replicate it in the bleeding-edge commit b023ebd0b5340a666df83e3fc0b72d7734636e04.\r\n\r\n(Maybe the discussion in #1527 is relevant.)", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1523", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1523/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1523/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1523/events", "html_url": "https://github.com/hylang/hy/issues/1523", "id": 302740042, "node_id": "MDU6SXNzdWUzMDI3NDAwNDI=", "number": 1523, "title": "Import failures prevent from re-trying", "user": {"login": "etanol", "id": 85804, "node_id": "MDQ6VXNlcjg1ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/85804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/etanol", "html_url": "https://github.com/etanol", "followers_url": "https://api.github.com/users/etanol/followers", "following_url": "https://api.github.com/users/etanol/following{/other_user}", "gists_url": "https://api.github.com/users/etanol/gists{/gist_id}", "starred_url": "https://api.github.com/users/etanol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/etanol/subscriptions", "organizations_url": "https://api.github.com/users/etanol/orgs", "repos_url": "https://api.github.com/users/etanol/repos", "events_url": "https://api.github.com/users/etanol/events{/privacy}", "received_events_url": "https://api.github.com/users/etanol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-06T15:13:25Z", "updated_at": "2018-10-07T23:40:53Z", "closed_at": "2018-10-07T23:40:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "During development, it is common to import faulty modules from the *repl*.  If a Hy module fails to load due to a `HyTypeError` or `LexException`, it cannot be loaded again until the *repl* is restarted.\r\n\r\nThere is a different exception treatment [in the importer][l].  One of the exception blocks is **not** cleaning up `sys.modules` before returning and that leaves a trace of the failure.\r\n\r\n[l]: https://github.com/hylang/hy/blob/c1e5c3e48ca68ad2372e1fd6dca5a1dda9419e9b/hy/importer.py#L114-L122", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1523/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1514", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1514/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1514/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1514/events", "html_url": "https://github.com/hylang/hy/issues/1514", "id": 298130982, "node_id": "MDU6SXNzdWUyOTgxMzA5ODI=", "number": 1514, "title": "Loader doesn't work correctly", "user": {"login": "vodik", "id": 216803, "node_id": "MDQ6VXNlcjIxNjgwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/216803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vodik", "html_url": "https://github.com/vodik", "followers_url": "https://api.github.com/users/vodik/followers", "following_url": "https://api.github.com/users/vodik/following{/other_user}", "gists_url": "https://api.github.com/users/vodik/gists{/gist_id}", "starred_url": "https://api.github.com/users/vodik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vodik/subscriptions", "organizations_url": "https://api.github.com/users/vodik/orgs", "repos_url": "https://api.github.com/users/vodik/repos", "events_url": "https://api.github.com/users/vodik/events{/privacy}", "received_events_url": "https://api.github.com/users/vodik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2018-02-18T23:50:27Z", "updated_at": "2022-11-10T20:01:48Z", "closed_at": "2019-07-06T20:13:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Okay, as a preface, I don't like coming into a project I've just started contributing to and saying everything is wrong. So before unloading a giant structural change to the project, I'd like to explain what I found, explain why its wrong, and how to move forward.\r\n\r\nAs background, I've been actually hacking really hard at Hy, trying my hand at various open issues, like hylang/hy#1416 and hylang/hy#1482, but keep bumping into issues around Hy's importer. Frustrated, I started really digging into how the system works, as you guys may have noticed opening issues like hylang/hy#1512 \r\n\r\nSo, having dug into depth of how the Hy importer works and I'm very confident to say we've gotten it wrong. This isn't just an issue of using deprecated APIs, but actually implementing the API incorrectly. I'm at the point that I'm not sure now how Hy ever worked to begin with.\r\n\r\nThe biggest sign that things are wrong is that `runpy` doesn't work with Hy modules. `runpy` uses the standard import mechanism (PEP 302), and since we hook into that, hy modules should Just Work.\r\n\r\nIn fact, the `hy` command line utility probably should be using `runpy` for `hy <file>` and `hy -m <module>` instead of its home rolled implementations. Once it does (and the various necessary fixes are in place), virtually **all** the outstanding issues like hylang/hy#1513 and hylang/hy#1466 just disappear. There is actually no need to roll our own.\r\n\r\nThat said, as a side effect, it also means that `hy -m <module>` can launch python code. But I argue this is really desirable. It allows Python and Hy to glue together even better. For example:\r\n\r\n```\r\nhy -m aiohttp.web myproject:app_factory\r\n```\r\n\r\nThis should be completely legal, and lets me easily launch an aiohttp server (python, naturally), but with a Hy based app factory. Currently, I'd have to provider a custom shim to make this work.\r\n\r\nSo, core issues of what's wrong and stuff that should be done:\r\n\r\n- [ ] MetaLoader is missing expected public APIs: `get_code` and `is_package` (even on Python 2). The causes `runpy` to chock\r\n- [ ] importer puts incorrect values for `__path__`. This causes `pkgutil.find_loader` to misbehave, which then prevents `runpy` from working as it can't find the appropriate loader inside Hy packages.\r\n- [ ] Logic of actually setting up `sys.modules` is imperfect. See hylang/hy#1513 for details\r\n- [ ] Create a separate loader for Python 3. The current loader is sufficient for Python 2 once fixed up, but basically built with deprecated APIs. Building a new loader around `importlib` is actually cleaner. Most of the implementation can be shared.\r\n\r\nI'm 98% there of dealing with all these issues and closing a whole pile of open bugs. Its also a much more straightforward implementation than hylang/hy#1085 so should be more maintainable.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1486", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1486/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1486/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1486/events", "html_url": "https://github.com/hylang/hy/issues/1486", "id": 287343377, "node_id": "MDU6SXNzdWUyODczNDMzNzc=", "number": 1486, "title": "Ugly error message for bad `require`", "user": {"login": "minghu6", "id": 13537217, "node_id": "MDQ6VXNlcjEzNTM3MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/13537217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minghu6", "html_url": "https://github.com/minghu6", "followers_url": "https://api.github.com/users/minghu6/followers", "following_url": "https://api.github.com/users/minghu6/following{/other_user}", "gists_url": "https://api.github.com/users/minghu6/gists{/gist_id}", "starred_url": "https://api.github.com/users/minghu6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minghu6/subscriptions", "organizations_url": "https://api.github.com/users/minghu6/orgs", "repos_url": "https://api.github.com/users/minghu6/repos", "events_url": "https://api.github.com/users/minghu6/events{/privacy}", "received_events_url": "https://api.github.com/users/minghu6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-01-10T07:51:20Z", "updated_at": "2019-02-07T19:03:29Z", "closed_at": "2019-02-07T19:03:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I require a macro not existed, It throws:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/importer.py\", line 180, in hy_eval\r\n    _ast, expr = hy_compile(hytree, module_name, get_expr=True)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 2213, in hy_compile\r\n    result = compiler.compile(tree)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 460, in compile\r\n    ret = self.compile_atom(_type, tree)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1731, in compile_expression\r\n    ret = self.compile_atom(fn, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 819, in compile_do\r\n    return self._compile_branch(expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 545, in _compile_branch\r\n    return _branch(self.compile(expr) for expr in exprs)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 318, in _branch\r\n    results = list(results)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 545, in <genexpr>\r\n    return _branch(self.compile(expr) for expr in exprs)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 460, in compile\r\n    ret = self.compile_atom(_type, tree)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1731, in compile_expression\r\n    ret = self.compile_atom(fn, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 372, in checker\r\n    return fn(self, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 873, in compile_try_expression\r\n    name)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1002, in _compile_catch_expression\r\n    body = self._compile_branch(expr)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 545, in _compile_branch\r\n    return _branch(self.compile(expr) for expr in exprs)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 318, in _branch\r\n    results = list(results)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 545, in <genexpr>\r\n    return _branch(self.compile(expr) for expr in exprs)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 460, in compile\r\n    ret = self.compile_atom(_type, tree)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1731, in compile_expression\r\n    ret = self.compile_atom(fn, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 372, in checker\r\n    return fn(self, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 858, in compile_try_expression\r\n    body += self.compile(expr.pop(0))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 472, in compile\r\n    raise_empty(HyCompileError, e, sys.exc_info()[2])\r\n  File \"<string>\", line 1, in raise_empty\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 ImportError: cannot require names: [HySymbol('let')]\r\nCompilation traceback:\r\nFile \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 460, in compile\r\n    ret = self.compile_atom(_type, tree)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1731, in compile_expression\r\n    ret = self.compile_atom(fn, expression)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 447, in compile_atom\r\n    else _compile_table[atom_type](self, atom))\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/compiler.py\", line 1486, in compile_require\r\n    require(module, self.module_name, assignments=assignments)\r\n  File \"/home/johnzhuang/.virtualenvs/hy/lib/python3.6/site-packages/hy/macros.py\", line 106, in require\r\n    raise ImportError(\"cannot require names: \" + repr(list(unseen)))\r\n```\r\nAnd I can't catch the Exception using `except` ", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1472", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1472/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1472/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1472/events", "html_url": "https://github.com/hylang/hy/issues/1472", "id": 285215788, "node_id": "MDU6SXNzdWUyODUyMTU3ODg=", "number": 1472, "title": "(yield-from) isn't a syntax error", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-30T18:08:38Z", "updated_at": "2017-12-31T23:10:53Z", "closed_at": "2017-12-31T23:10:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Noticed by @vodik.\r\n\r\nIt's compiled to `yield from None`, which is never useful.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1466", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1466/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1466/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1466/events", "html_url": "https://github.com/hylang/hy/issues/1466", "id": 282616338, "node_id": "MDU6SXNzdWUyODI2MTYzMzg=", "number": 1466, "title": "__main__.hy doesn't work like __main__.py", "user": {"login": "Zirak", "id": 1144615, "node_id": "MDQ6VXNlcjExNDQ2MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1144615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zirak", "html_url": "https://github.com/Zirak", "followers_url": "https://api.github.com/users/Zirak/followers", "following_url": "https://api.github.com/users/Zirak/following{/other_user}", "gists_url": "https://api.github.com/users/Zirak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zirak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zirak/subscriptions", "organizations_url": "https://api.github.com/users/Zirak/orgs", "repos_url": "https://api.github.com/users/Zirak/repos", "events_url": "https://api.github.com/users/Zirak/events{/privacy}", "received_events_url": "https://api.github.com/users/Zirak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-16T11:03:52Z", "updated_at": "2018-09-03T11:36:57Z", "closed_at": "2018-09-03T11:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "(All snippets below tested with hy master and python 3.6.3)\r\n\r\nWhen running a directory with a `__main__` file, hy fails while python succeeds:\r\n\r\n    % ls\r\n    __main__.hy __main__.py\r\n    % python .\r\n    hey\r\n    % hy .\r\n    hy: Can't open file '.': [Errno 21] Is a directory\r\n\r\nSame applies to egg files, but that may be its own independent problem.\r\n\r\nPassing the `-m` flag does execute the `__main__`, *unlike python*:\r\n\r\n    % hy -m .\r\n    hy\r\n    % python -m .\r\n    python: Relative module names not supported\r\n\r\nFixing the first block is relatively simple: In [`cmdline`, `run_module`](https://github.com/hylang/hy/blob/e0e664c030266ead171de2a7fe887ceff4832d32/hy/cmdline.py#L199) already does the correct thing when running a directory/file according to [the respective function in cpython](https://github.com/python/cpython/blob/9454060e84a669dde63824d9e2fcaf295e34f687/Modules/main.c#L1439).\r\n\r\nHowever, making the 2nd block fail is a breaking change, as `run_module` does not do the same thing as [the respective function in cpython](https://github.com/python/cpython/blob/9454060e84a669dde63824d9e2fcaf295e34f687/Modules/main.c#L228) (wraps [`runpy._run_module_as_main`](https://github.com/python/cpython/blob/9454060e84a669dde63824d9e2fcaf295e34f687/Lib/runpy.py#L167))\r\n\r\nIn the end, the question may be is this worth fixing on a lower level? Does hy want to copy the behaviour of `run_file` and `run_module` as implemented in cpython, or is it good enough to be able to run a directory/zip/whatever with a `__main__`?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1457", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1457/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1457/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1457/events", "html_url": "https://github.com/hylang/hy/issues/1457", "id": 273507740, "node_id": "MDU6SXNzdWUyNzM1MDc3NDA=", "number": 1457, "title": "A Hy script can't always import another file in its directory", "user": {"login": "madhat2r", "id": 4122449, "node_id": "MDQ6VXNlcjQxMjI0NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4122449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madhat2r", "html_url": "https://github.com/madhat2r", "followers_url": "https://api.github.com/users/madhat2r/followers", "following_url": "https://api.github.com/users/madhat2r/following{/other_user}", "gists_url": "https://api.github.com/users/madhat2r/gists{/gist_id}", "starred_url": "https://api.github.com/users/madhat2r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madhat2r/subscriptions", "organizations_url": "https://api.github.com/users/madhat2r/orgs", "repos_url": "https://api.github.com/users/madhat2r/repos", "events_url": "https://api.github.com/users/madhat2r/events{/privacy}", "received_events_url": "https://api.github.com/users/madhat2r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2017-11-13T17:11:58Z", "updated_at": "2018-09-03T11:36:57Z", "closed_at": "2018-09-03T11:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hy does not appear to be working when called as a cron job. Below is a simple test file I wrote when my real script would not execute via cron. I have verified that it is being called, but nothing appears to happen as the log file stays empty.\r\n\r\nI wrote a fairly complex application for a client that needs to be scheduled via cron, so any help is much appreciated.\r\n\r\n```\r\n$ python --version\r\nPython 3.6.2\r\n\r\n$ hy --version\r\nhy 0.13.0\r\n\r\n```\r\n\r\ntest.hy:\r\n```\r\n#! /usr/bin/env hy\r\n\r\n(import\r\n  logging)\r\n(def log-format \"%(asctime)-15s %(levelname)-8s %(filename)-15s:%(lineno)-3s %(message)s\")\r\n(defn cli []\r\n  (.basicConfig logging\r\n                :filename \"crontest.log\"\r\n                :level (. logging DEBUG)\r\n                :format log-format)\r\n  (setv l (.getLogger logging))\r\n  (.info l \"Running\"))\r\n\r\n(when (= --name-- \"__main__\")\r\n  (cli))\r\n\r\n```\r\ncron log entries:\r\n```\r\nNov 13 10:51:01 ArchNemesis CROND[29713]: (micah) CMD (/tmp/test.hy)\r\nNov 13 10:52:01 ArchNemesis CROND[31133]: (micah) CMD (/tmp/test.hy)\r\nNov 13 10:54:01 ArchNemesis CROND[3467]: (micah) CMD (/tmp/test.hy)\r\nNov 13 10:57:01 ArchNemesis CROND[9210]: (micah) CMD (/tmp/test.hy)\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1457/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1448", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1448/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1448/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1448/events", "html_url": "https://github.com/hylang/hy/issues/1448", "id": 270151483, "node_id": "MDU6SXNzdWUyNzAxNTE0ODM=", "number": 1448, "title": "1e1000 should not be a symbol", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-31T23:36:40Z", "updated_at": "2018-01-11T05:44:51Z", "closed_at": "2018-01-11T05:44:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hy counts `1e308` as a floating-point number, but `2e308` as a symbol. \r\n```Python\r\n=> (type 1e308)\r\ntype(1e+308)\r\n\r\n<class 'float'>\r\n=> (type 2e308)\r\ntype(2e308)\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\importer.py\", line 201, in hy_eval\r\n    return eval(ast_compile(expr, \"<eval>\", \"eval\"), namespace)\r\n  File \"<eval>\", line 1, in <module>\r\nNameError: name '2e308' is not defined\r\n```\r\n\r\nThis is inconsistent. Float literals that are too large should be `inf`, because that's how Python does it.\r\n```Python\r\n>>> 1.7e308\r\n1.7e+308\r\n>>> 1.8e308\r\ninf\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1424", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1424/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1424/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1424/events", "html_url": "https://github.com/hylang/hy/issues/1424", "id": 258262905, "node_id": "MDU6SXNzdWUyNTgyNjI5MDU=", "number": 1424, "title": "Docstring comes out in expansion of defmacro!", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-16T22:34:26Z", "updated_at": "2021-02-09T17:36:18Z", "closed_at": "2021-02-09T17:36:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Macros defined with `defmacro!` put too much in the expansion. This isn't obvious unless you have `--spy` on or use `disassemble`. I also see a lot of `None`s for some reason. It seems to be the result of each form in the `defmacro!` definition, instead of just the final one.\r\n```Python\r\n=> (defmacro! foo [] \"doc\" 42)\r\nfrom hy.core.language import interleave\r\nimport hy\r\nfrom hy import HyExpression, HySymbol\r\n\r\ndef _hy_anon_fn_1():\r\n    None\r\n    return HyExpression(((([] + [HySymbol('do')]) + [HyExpression((([] + [HySymbol('setv')]) + list((interleave([], []) or []))))]) + list((['doc', 42] or []))))\r\nhy.macros.macro('foo')(_hy_anon_fn_1)\r\n<function _hy_anon_fn_1 at 0x000001E6E05F4F28>\r\n=> (foo)\r\nNone\r\n'doc'\r\n42\r\n42\r\n=> (disassemble '(foo))\r\nfrom hy.core.language import disassemble\r\nfrom hy import HyExpression, HySymbol\r\ndisassemble(HyExpression(([] + [HySymbol('foo')])))\r\n\"Module(body=[Expr(value=Name(id='None')), Expr(value=Str(s='doc')), Expr(value=Num(n=42))])\"\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1424/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1423", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1423/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1423/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1423/events", "html_url": "https://github.com/hylang/hy/issues/1423", "id": 258262767, "node_id": "MDU6SXNzdWUyNTgyNjI3Njc=", "number": 1423, "title": "Macros made with defmacro/g! lose their docstring", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-09-16T22:30:57Z", "updated_at": "2021-02-09T17:36:18Z", "closed_at": "2021-02-09T17:36:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#1415 can read these. We might pick some other way to do it, like #1416 but they shouldn't get dropped.\r\n```Python\r\n=> (defmacro/g! foo [] \"docstring/g!\" 3)\r\n<function _hy_anon_fn_1 at 0x00000290BC012EA0>\r\n=> (help (. hy macros _hy_macros [__name__] ['foo]))\r\nHelp on function _hy_anon_fn_1:\r\n\r\n_hy_anon_fn_1()\r\n\r\n=> (defmacro bar [] \"docstring\" 4)\r\n<function _hy_anon_fn_1 at 0x00000290BBFD8D90>\r\n=> (help (. hy macros _hy_macros [__name__] ['bar]))\r\nHelp on function _hy_anon_fn_1:\r\n\r\n_hy_anon_fn_1()\r\n    docstring\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1413", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1413/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1413/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1413/events", "html_url": "https://github.com/hylang/hy/issues/1413", "id": 255162678, "node_id": "MDU6SXNzdWUyNTUxNjI2Nzg=", "number": 1413, "title": "macroexpand can crash the repl", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-09-05T05:21:13Z", "updated_at": "2017-09-12T02:19:21Z", "closed_at": "2017-09-12T02:19:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Possibly related to #1412 \r\n```Python\r\n=> (defmacro bad [] (/ 0))\r\nimport hy\r\nhy.macros.macro('bad')((lambda : (1 / 0)))\r\n<function <lambda> at 0x000002594F390D08>\r\n=> (bad)\r\n  File \"<input>\", line 1, column 1\r\n\r\n  (bad)\r\n  ^---^\r\nHyMacroExpansionError: b\"expanding `bad': ZeroDivisionError('division by zero',)\"\r\n\r\n\r\n=> (macroexpand '(bad))\r\nfrom hy.core.language import macroexpand\r\nfrom hy import HyExpression, HySymbol\r\nmacroexpand(HyExpression(([] + [HySymbol('bad')])))\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\macros.py\", line 199, in macroexpand_1\r\n    obj = m(*ntree[1:], **opts)\r\n  File \"<eval>\", line 1, in <lambda>\r\nZeroDivisionError: division by zero\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 99, in runsource\r\n    ast_callback)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\importer.py\", line 201, in hy_eval\r\n    return eval(ast_compile(expr, \"<eval>\", \"eval\"), namespace)\r\n  File \"<eval>\", line 1, in <module>\r\n  File \"c:\\users\\me\\documents\\github\\hy/hy/core/language.hy\", line 313, in macroexpand\r\n    (hy.macros.macroexpand form (HyASTCompiler name)))\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\macros.py\", line 163, in macroexpand\r\n    tree = macroexpand_1(tree, compiler)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\macros.py\", line 206, in macroexpand_1\r\n    raise HyMacroExpansionError(tree, msg)\r\nhy.errors.HyMacroExpansionError: <exception str() failed>\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\ME\\Envs\\gilch-hy36\\Scripts\\hy-script.py\", line 11, in <module>\r\n    load_entry_point('hy', 'console_scripts', 'hy')()\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 346, in hy_main\r\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 341, in cmdline_handler\r\n    return run_repl(spy=options.spy, output_fn=options.repl_output_fn)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 236, in run_repl\r\n    os=platform.system()\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36\\Lib\\code.py\", line 233, in interact\r\n    more = self.push(line)\r\n  File \"c:\\users\\me\\appdata\\local\\programs\\python\\python36\\Lib\\code.py\", line 259, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 105, in runsource\r\n    print(e, file=sys.stderr)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\errors.py\", line 46, in __str__\r\n    line = self.expression.start_line\r\nAttributeError: 'HyExpression' object has no attribute 'start_line'\r\n\r\nProcess inferior-lisp exited abnormally with code 1\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1413/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1412", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1412/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1412/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1412/events", "html_url": "https://github.com/hylang/hy/issues/1412", "id": 254938485, "node_id": "MDU6SXNzdWUyNTQ5Mzg0ODU=", "number": 1412, "title": "repl shouldn't crash", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-09-04T05:26:52Z", "updated_at": "2017-10-29T19:20:00Z", "closed_at": "2017-10-29T19:20:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```Hy\r\n=> (defmacro bad [] `(macro-error 'x \"\"))\r\n<function <lambda> at 0x000001D01D0ED7B8>\r\n=> (bad)\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 99, in runsource\r\n    ast_callback)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\importer.py\", line 198, in hy_eval\r\n    eval(ast_compile(_ast, \"<eval_body>\", \"exec\"), namespace)\r\n  File \"<eval_body>\", line 1, in <module>\r\nhy.errors.HyMacroExpansionError: <exception str() failed>\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\ME\\workspace\\hy36-gilch\\Scripts\\hy-script.py\", line 11, in <module>\r\n    load_entry_point('hy', 'console_scripts', 'hy')()\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 346, in hy_main\r\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 341, in cmdline_handler\r\n    return run_repl(spy=options.spy, output_fn=options.repl_output_fn)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 236, in run_repl\r\n    os=platform.system()\r\n  File \"C:\\Users\\ME\\AppData\\Local\\Programs\\Python\\Python36\\lib\\code.py\", line 233, in interact\r\n    more = self.push(line)\r\n  File \"C:\\Users\\ME\\AppData\\Local\\Programs\\Python\\Python36\\lib\\code.py\", line 259, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 105, in runsource\r\n    print(e, file=sys.stderr)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\errors.py\", line 46, in __str__\r\n    line = self.expression.start_line\r\nAttributeError: 'HySymbol' object has no attribute 'start_line'\r\n```\r\nThe repl should report errors, but not exit.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1412/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1409", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1409/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1409/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1409/events", "html_url": "https://github.com/hylang/hy/issues/1409", "id": 254483240, "node_id": "MDU6SXNzdWUyNTQ0ODMyNDA=", "number": 1409, "title": "Destructuring bind form in defn argslist breaks docstring", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-31T22:12:50Z", "updated_at": "2017-09-18T03:30:09Z", "closed_at": "2017-09-18T03:30:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```Python\r\n=> (defn foo [a b]\r\n... \"doc?\"\r\n... \"foo.\")\r\ndef foo(a, b):\r\n    'doc?'\r\n    return 'foo.'\r\nNone\r\n=> (help foo)\r\nhelp(foo)\r\nHelp on function foo:\r\n\r\nfoo(a, b)\r\n    doc?\r\n\r\n=> (foo 1 2)\r\nfoo(1, 2)\r\n'foo.'\r\n=> (defn bar [[a b]]\r\n... \"doc?\"\r\n... \"nope.\")\r\ndef bar(_hy_anon_var_1):\r\n    [a, b] = _hy_anon_var_1\r\n    'doc?'\r\n    return 'nope.'\r\nNone\r\n=> (help bar)\r\nhelp(bar)\r\nHelp on function bar:\r\n\r\nbar(_hy_anon_var_1)\r\n\r\n=> (bar [1 2])\r\nbar([1, 2])\r\n'nope.'\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1409/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1390", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1390/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1390/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1390/events", "html_url": "https://github.com/hylang/hy/issues/1390", "id": 251786216, "node_id": "MDU6SXNzdWUyNTE3ODYyMTY=", "number": 1390, "title": "Statements pulled out of the second argument of (assert) aren't added to the AST", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-21T22:19:07Z", "updated_at": "2019-07-21T15:19:23Z", "closed_at": "2019-07-21T15:19:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "    $ echo '(assert (do (f1) (f2)) (do (f3) (f4)))' |  hy2py\r\n    f1()\r\n    assert f2(), f4()\r\n\r\nGiven [how the Python language reference describes `assert`](https://docs.python.org/3/reference/simple_stmts.html#the-assert-statement), I guess this should compile to:\r\n\r\n```Python\r\nif __debug__:\r\n    f1()\r\n    if not f2():\r\n        f3()\r\n        assert not 1, f4()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1389", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1389/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1389/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1389/events", "html_url": "https://github.com/hylang/hy/issues/1389", "id": 251468048, "node_id": "MDU6SXNzdWUyNTE0NjgwNDg=", "number": 1389, "title": "Exception in __repr__ crashes repl", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-20T05:32:28Z", "updated_at": "2017-08-29T23:20:01Z", "closed_at": "2017-08-29T23:20:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```Python\r\n=> (defclass BadRepr[] (defn __repr__ [self] (/ 0)))\r\nclass BadRepr:\r\n\r\n    def __repr__(self):\r\n        return (1 / 0)\r\nNone\r\n=> (BadRepr)\r\nBadRepr()\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\ME\\workspace\\hy36-gilch\\Scripts\\hy-script.py\", line 11, in <module>\r\n    load_entry_point('hy', 'console_scripts', 'hy')()\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 341, in hy_main\r\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 336, in cmdline_handler\r\n    return run_repl(spy=options.spy, output_fn=options.repl_output_fn)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 231, in run_repl\r\n    os=platform.system()\r\n  File \"C:\\Users\\ME\\AppData\\Local\\Programs\\Python\\Python36\\lib\\code.py\", line 233, in interact\r\n    more = self.push(line)\r\n  File \"C:\\Users\\ME\\AppData\\Local\\Programs\\Python\\Python36\\lib\\code.py\", line 259, in push\r\n    more = self.runsource(source, self.filename)\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\cmdline.py\", line 118, in runsource\r\n    print(self.output_fn(value))\r\n  File \"<eval_body>\", line 1, in __repr__\r\nZeroDivisionError: division by zero\r\n\r\n(hy36-gilch) C:\\Users\\ME\\Documents\\GitHub\\hy>\r\n```\r\nIt should just report the exception like Python does, not quit the repl.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1367", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1367/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1367/events", "html_url": "https://github.com/hylang/hy/issues/1367", "id": 248179419, "node_id": "MDU6SXNzdWUyNDgxNzk0MTk=", "number": 1367, "title": "`from __future__ import` doesn't work together with Hy core function imports", "user": {"login": "woodrush", "id": 4700588, "node_id": "MDQ6VXNlcjQ3MDA1ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/4700588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/woodrush", "html_url": "https://github.com/woodrush", "followers_url": "https://api.github.com/users/woodrush/followers", "following_url": "https://api.github.com/users/woodrush/following{/other_user}", "gists_url": "https://api.github.com/users/woodrush/gists{/gist_id}", "starred_url": "https://api.github.com/users/woodrush/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/woodrush/subscriptions", "organizations_url": "https://api.github.com/users/woodrush/orgs", "repos_url": "https://api.github.com/users/woodrush/repos", "events_url": "https://api.github.com/users/woodrush/events{/privacy}", "received_events_url": "https://api.github.com/users/woodrush/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-08-05T11:11:53Z", "updated_at": "2018-09-11T20:32:58Z", "closed_at": "2018-09-11T20:32:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While this works,\r\n```clojure\r\n(import [__future__ [print_function]])\r\n(setv a 10)\r\n```\r\nThis doesn't work:\r\n```clojure\r\n(import [__future__ [print_function]])\r\n(setv name 10)\r\n```\r\n\r\nThe former compiles to the Python code (using hy2py)\r\n```python\r\nfrom __future__ import print_function\r\na = 10\r\n```\r\n\r\nWhile the latter compiles to\r\n```python\r\nfrom hy.core.language import name\r\nfrom __future__ import print_function\r\nname = 10\r\n```\r\nyielding the error\r\n```python\r\n# ==>\r\n#   File \"importbug.hy\", line 1\r\n#     (import [__future__ [print_function]])\r\n#     ^\r\n# SyntaxError: from __future__ imports must occur at the beginning of the file\r\n```\r\n\r\nSo this is because `name` is used in the Hy core, and Hy adds  `from hy.core.language import name` at the beginning of the file, preceding `from __future__ import print_function`.\r\n\r\nIt also happens with other `__future__` module imports such as `from __future__ import braces`. It also happens with this context, where it is clear that `name` doesn't refer to `hy.core.language.name` :\r\n```clojure\r\n(import [__future__ [print_function]])\r\n(defclass SomeObject [object]\r\n  (defn __init__ [self name]\r\n    (setv self.name name)))\r\n```\r\nwhich compiles to\r\n```python\r\nfrom hy.core.language import name\r\nfrom __future__ import print_function\r\n\r\n\r\nclass SomeObject(object):\r\n\r\n    def __init__(self, name):\r\n        self.name = name\r\n        return None\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1362", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1362/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1362/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1362/events", "html_url": "https://github.com/hylang/hy/issues/1362", "id": 248064768, "node_id": "MDU6SXNzdWUyNDgwNjQ3Njg=", "number": 1362, "title": "A statement pulled out of the condition of a `while` loop is only evaluated once", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-08-04T17:10:39Z", "updated_at": "2018-01-11T05:45:27Z", "closed_at": "2018-01-11T05:45:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Thinking about #1342 made me guess that the following would do the wrong thing, and indeed, it does:\r\n\r\n    $ echo '(setv x 3) (while (do (print \"hi\") x) (print x) (-= x 1))' | hy2py\r\n    x = 3\r\n    print('hi')\r\n    while x:\r\n        print(x)\r\n        x -= 1\r\n\r\nThe `print('hi')` only happens once instead of every time the `while` condition is checked, because it's pulled out to before the `while`.\r\n\r\nThe most straightforward fix is to make a `while` loop with a complex condition compile to something like:\r\n\r\n    x = 3\r\n    while True:\r\n        # Condition\r\n        print('hi')\r\n        _hy_anon_var_1 = x\r\n        if not _hy_anon_var_1:\r\n            break\r\n        # Body\r\n        print(x)\r\n        x -= 1\r\n\r\n(In practice, `Result.rename` would remove the use of `_hy_anon_var_1` and just write `if not x:`.)\r\n\r\nThe problem with this method is that an `else` clause won't be executed when the loop terminates normally, because `break` skips the `else`. This doesn't actually matter right now because we haven't yet implemented `else` for `while`. But a method that's robust to this future added feature is:\r\n\r\n    x = 3\r\n    # Condition\r\n    print('hi')\r\n    _hy_anon_var_1 = x\r\n    while _hy_anon_var_1:\r\n        # Body\r\n        print(x)\r\n        x -= 1\r\n        # Condition, repeated\r\n        print('hi')\r\n        _hy_anon_var_1 = x\r\n\r\nNote that it will then be unwise to use `break` or `continue` inside the condition, because the condition executes once outside the `while` and subsequently inside it.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1362/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1355", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1355/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1355/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1355/events", "html_url": "https://github.com/hylang/hy/issues/1355", "id": 247516667, "node_id": "MDU6SXNzdWUyNDc1MTY2Njc=", "number": 1355, "title": "Installation failure with Homebrew", "user": {"login": "gwerbin", "id": 5758789, "node_id": "MDQ6VXNlcjU3NTg3ODk=", "avatar_url": "https://avatars.githubusercontent.com/u/5758789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gwerbin", "html_url": "https://github.com/gwerbin", "followers_url": "https://api.github.com/users/gwerbin/followers", "following_url": "https://api.github.com/users/gwerbin/following{/other_user}", "gists_url": "https://api.github.com/users/gwerbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/gwerbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gwerbin/subscriptions", "organizations_url": "https://api.github.com/users/gwerbin/orgs", "repos_url": "https://api.github.com/users/gwerbin/repos", "events_url": "https://api.github.com/users/gwerbin/events{/privacy}", "received_events_url": "https://api.github.com/users/gwerbin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-08-02T20:45:22Z", "updated_at": "2022-08-02T12:24:11Z", "closed_at": "2022-08-02T12:24:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm encountering an error when trying to install Hy with Pip. My setup is vanilla Python3-on-Homebrew-on-MacOS, so Python3 is installed to `/usr/local/Cellar/python3/3.6.2` and symlinked into `/usr/local/opt/python3` as well as `/usr/local`. I have the latest versions of both Pip and Setuptools with `pip3 install -U pip setuptools`.\r\n\r\n```shell\r\npip3 show setuptools | grep Version\r\n# Version: 36.2.7\r\npip3 --version\r\n# pip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)\r\n```\r\n\r\nIt seems like the problem is that `setup.py` is trying to install the `get_version` script in `/usr/local` rather than `/usr/local/bin` or somewhere else. I have the same problem when I `brew unlink python3` and use the MacPorts version instead (`sudo port install python36 py36-pip`). I'd rather not change the permissions on `/usr/local`.\r\n\r\n(_**WARNING**: wall of CLI output incoming_)\r\n\r\nThis is what I get when I try `pip3 install hy`:\r\n```\r\n$ pip3 install hy\r\nCollecting hy\r\nRequirement already satisfied: astor>=0.5 in /usr/local/lib/python3.6/site-packages (from hy)\r\nRequirement already satisfied: clint>=0.4 in /usr/local/lib/python3.6/site-packages (from hy)\r\nRequirement already satisfied: rply>=0.7.0 in /usr/local/lib/python3.6/site-packages (from hy)\r\nRequirement already satisfied: args in /usr/local/lib/python3.6/site-packages (from clint>=0.4->hy)\r\nRequirement already satisfied: appdirs in /usr/local/lib/python3.6/site-packages (from rply>=0.7.0->hy)\r\nInstalling collected packages: hy\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/basecommand.py\", line 215, in main\r\n    status = self.run(options, args)\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/commands/install.py\", line 342, in run\r\n    prefix=options.prefix_path,\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/req/req_set.py\", line 784, in install\r\n    **kwargs\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/req/req_install.py\", line 851, in install\r\n    self.move_wheel_files(self.source_dir, root=root, prefix=prefix)\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/req/req_install.py\", line 1064, in move_wheel_files\r\n    isolated=self.isolated,\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/wheel.py\", line 377, in move_wheel_files\r\n    clobber(source, dest, False, fixer=fixer, filter=filter)\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/wheel.py\", line 316, in clobber\r\n    ensure_dir(destdir)\r\n  File \"/usr/local/lib/python3.6/site-packages/pip/utils/__init__.py\", line 83, in ensure_dir\r\n    os.makedirs(path)\r\n  File \"/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/os.py\", line 220, in makedirs\r\n    mkdir(name, mode)\r\nPermissionError: [Errno 13] Permission denied: '/usr/local/get_version'\r\n```\r\n\r\nAnd `pip3 install git+https://github.com/hylang/hy.git`:\r\n\r\n```\r\nCollecting git+https://github.com/hylang/hy.git\r\n  Cloning https://github.com/hylang/hy.git to /private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-q1p7vb4d-build\r\nRequirement already satisfied: rply>=0.7.5 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: astor>=0.5 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: clint>=0.4 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: appdirs in /usr/local/lib/python3.6/site-packages (from rply>=0.7.5->hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: args in /usr/local/lib/python3.6/site-packages (from clint>=0.4->hy==0.13.0+54.g4fd1c7b)\r\nInstalling collected packages: hy\r\n  Running setup.py install for hy ... error\r\n    Complete output from command /usr/local/opt/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-q1p7vb4d-build/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-n74l3mg7-record/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib\r\n    creating build/lib/hy\r\n    copying hy/__init__.py -> build/lib/hy\r\n    copying hy/__main__.py -> build/lib/hy\r\n    copying hy/_compat.py -> build/lib/hy\r\n    copying hy/cmdline.py -> build/lib/hy\r\n    copying hy/compiler.py -> build/lib/hy\r\n    copying hy/completer.py -> build/lib/hy\r\n    copying hy/errors.py -> build/lib/hy\r\n    copying hy/importer.py -> build/lib/hy\r\n    copying hy/macros.py -> build/lib/hy\r\n    copying hy/models.py -> build/lib/hy\r\n    copying hy/version.py -> build/lib/hy\r\n    creating build/lib/hy/contrib\r\n    copying hy/contrib/__init__.py -> build/lib/hy/contrib\r\n    creating build/lib/hy/core\r\n    copying hy/core/__init__.py -> build/lib/hy/core\r\n    creating build/lib/hy/extra\r\n    copying hy/extra/__init__.py -> build/lib/hy/extra\r\n    creating build/lib/hy/lex\r\n    copying hy/lex/__init__.py -> build/lib/hy/lex\r\n    copying hy/lex/exceptions.py -> build/lib/hy/lex\r\n    copying hy/lex/lexer.py -> build/lib/hy/lex\r\n    copying hy/lex/parser.py -> build/lib/hy/lex\r\n    copying hy/contrib/botsbuildbots.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/hy_repr.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/loop.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/multi.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/profile.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/sequences.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/walk.hy -> build/lib/hy/contrib\r\n    creating build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/botsbuildbots.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/hy_repr.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/loop.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/multi.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/profile.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/sequences.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/walk.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/core/bootstrap.hy -> build/lib/hy/core\r\n    copying hy/core/language.hy -> build/lib/hy/core\r\n    copying hy/core/macros.hy -> build/lib/hy/core\r\n    copying hy/core/shadow.hy -> build/lib/hy/core\r\n    creating build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/bootstrap.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/language.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/macros.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/shadow.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/extra/anaphoric.hy -> build/lib/hy/extra\r\n    copying hy/extra/reserved.hy -> build/lib/hy/extra\r\n    creating build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/anaphoric.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/reserved.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    running install_lib\r\n    copying build/lib/hy/__init__.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/__main__.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/_compat.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/cmdline.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/compiler.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/completer.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/contrib/__init__.py -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/botsbuildbots.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/hy_repr.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/loop.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/multi.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/profile.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/sequences.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/walk.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/botsbuildbots.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/hy_repr.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/loop.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/multi.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/profile.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/sequences.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/contrib/walk.hy -> /usr/local/lib/python3.6/site-packages/hy/contrib\r\n    copying build/lib/hy/core/__init__.py -> /usr/local/lib/python3.6/site-packages/hy/core\r\n    copying build/lib/hy/core/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/bootstrap.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/language.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/macros.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/shadow.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/bootstrap.hy -> /usr/local/lib/python3.6/site-packages/hy/core\r\n    copying build/lib/hy/core/language.hy -> /usr/local/lib/python3.6/site-packages/hy/core\r\n    copying build/lib/hy/core/macros.hy -> /usr/local/lib/python3.6/site-packages/hy/core\r\n    copying build/lib/hy/core/shadow.hy -> /usr/local/lib/python3.6/site-packages/hy/core\r\n    copying build/lib/hy/errors.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/extra/__init__.py -> /usr/local/lib/python3.6/site-packages/hy/extra\r\n    copying build/lib/hy/extra/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/extra/__pycache__/anaphoric.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/extra/__pycache__/reserved.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/extra/anaphoric.hy -> /usr/local/lib/python3.6/site-packages/hy/extra\r\n    copying build/lib/hy/extra/reserved.hy -> /usr/local/lib/python3.6/site-packages/hy/extra\r\n    copying build/lib/hy/importer.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    creating /usr/local/lib/python3.6/site-packages/hy/lex\r\n    copying build/lib/hy/lex/__init__.py -> /usr/local/lib/python3.6/site-packages/hy/lex\r\n    copying build/lib/hy/lex/exceptions.py -> /usr/local/lib/python3.6/site-packages/hy/lex\r\n    copying build/lib/hy/lex/lexer.py -> /usr/local/lib/python3.6/site-packages/hy/lex\r\n    copying build/lib/hy/lex/parser.py -> /usr/local/lib/python3.6/site-packages/hy/lex\r\n    copying build/lib/hy/macros.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/models.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    copying build/lib/hy/version.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/__init__.py to __init__.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/__main__.py to __main__.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/_compat.py to _compat.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/cmdline.py to cmdline.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/compiler.py to compiler.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/completer.py to completer.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/errors.py to errors.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/importer.py to importer.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/lex/__init__.py to __init__.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/lex/exceptions.py to exceptions.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/lex/lexer.py to lexer.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/lex/parser.py to parser.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/macros.py to macros.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/models.py to models.cpython-36.pyc\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/version.py to version.cpython-36.pyc\r\n    running install_data\r\n    creating /usr/local/get_version\r\n    error: could not create '/usr/local/get_version': Permission denied\r\n\r\n    ----------------------------------------\r\nCommand \"/usr/local/opt/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-q1p7vb4d-build/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-n74l3mg7-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-q1p7vb4d-build/\r\n```\r\n\r\nAnd finally `git clone hy && pip3 install ./hy`:\r\n\r\n```\r\nProcessing /Users/symb0lic/src/hy\r\nRequirement already satisfied: rply>=0.7.5 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: astor>=0.5 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: clint>=0.4 in /usr/local/lib/python3.6/site-packages (from hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: appdirs in /usr/local/lib/python3.6/site-packages (from rply>=0.7.5->hy==0.13.0+54.g4fd1c7b)\r\nRequirement already satisfied: args in /usr/local/lib/python3.6/site-packages (from clint>=0.4->hy==0.13.0+54.g4fd1c7b)\r\nInstalling collected packages: hy\r\n  Running setup.py install for hy ... error\r\n    Complete output from command /usr/local/opt/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-9yq8xr33-build/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-7aj73z0l-record/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib\r\n    creating build/lib/hy\r\n    copying hy/__init__.py -> build/lib/hy\r\n    copying hy/__main__.py -> build/lib/hy\r\n    copying hy/_compat.py -> build/lib/hy\r\n    copying hy/cmdline.py -> build/lib/hy\r\n    copying hy/compiler.py -> build/lib/hy\r\n    copying hy/completer.py -> build/lib/hy\r\n    copying hy/errors.py -> build/lib/hy\r\n    copying hy/importer.py -> build/lib/hy\r\n    copying hy/macros.py -> build/lib/hy\r\n    copying hy/models.py -> build/lib/hy\r\n    copying hy/version.py -> build/lib/hy\r\n    creating build/lib/hy/contrib\r\n    copying hy/contrib/__init__.py -> build/lib/hy/contrib\r\n    creating build/lib/hy/core\r\n    copying hy/core/__init__.py -> build/lib/hy/core\r\n    creating build/lib/hy/extra\r\n    copying hy/extra/__init__.py -> build/lib/hy/extra\r\n    creating build/lib/hy/lex\r\n    copying hy/lex/__init__.py -> build/lib/hy/lex\r\n    copying hy/lex/exceptions.py -> build/lib/hy/lex\r\n    copying hy/lex/lexer.py -> build/lib/hy/lex\r\n    copying hy/lex/parser.py -> build/lib/hy/lex\r\n    copying hy/contrib/botsbuildbots.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/hy_repr.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/loop.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/multi.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/profile.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/sequences.hy -> build/lib/hy/contrib\r\n    copying hy/contrib/walk.hy -> build/lib/hy/contrib\r\n    creating build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/botsbuildbots.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/hy_repr.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/loop.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/multi.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/profile.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/sequences.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/contrib/__pycache__/walk.cpython-36.pyc -> build/lib/hy/contrib/__pycache__\r\n    copying hy/core/bootstrap.hy -> build/lib/hy/core\r\n    copying hy/core/language.hy -> build/lib/hy/core\r\n    copying hy/core/macros.hy -> build/lib/hy/core\r\n    copying hy/core/shadow.hy -> build/lib/hy/core\r\n    creating build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/bootstrap.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/language.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/macros.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/core/__pycache__/shadow.cpython-36.pyc -> build/lib/hy/core/__pycache__\r\n    copying hy/extra/anaphoric.hy -> build/lib/hy/extra\r\n    copying hy/extra/reserved.hy -> build/lib/hy/extra\r\n    creating build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/__init__.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/anaphoric.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    copying hy/extra/__pycache__/reserved.cpython-36.pyc -> build/lib/hy/extra/__pycache__\r\n    running install_lib\r\n    copying build/lib/hy/contrib/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/botsbuildbots.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/hy_repr.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/loop.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/multi.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/profile.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/sequences.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/contrib/__pycache__/walk.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/contrib/__pycache__\r\n    copying build/lib/hy/core/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/bootstrap.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/language.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/macros.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/core/__pycache__/shadow.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/core/__pycache__\r\n    copying build/lib/hy/extra/__pycache__/__init__.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/extra/__pycache__/anaphoric.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/extra/__pycache__/reserved.cpython-36.pyc -> /usr/local/lib/python3.6/site-packages/hy/extra/__pycache__\r\n    copying build/lib/hy/version.py -> /usr/local/lib/python3.6/site-packages/hy\r\n    byte-compiling /usr/local/lib/python3.6/site-packages/hy/version.py to version.cpython-36.pyc\r\n    running install_data\r\n    creating /usr/local/get_version\r\n    error: could not create '/usr/local/get_version': Permission denied\r\n\r\n    ----------------------------------------\r\nCommand \"/usr/local/opt/python3/bin/python3.6 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-9yq8xr33-build/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-7aj73z0l-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/var/folders/4j/n8nxnsy12y92t475g318yptm0000gn/T/pip-9yq8xr33-build/\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1355/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1350", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1350/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1350/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1350/events", "html_url": "https://github.com/hylang/hy/issues/1350", "id": 246545479, "node_id": "MDU6SXNzdWUyNDY1NDU0Nzk=", "number": 1350, "title": "`try` form not working in `defmacro`", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-29T21:10:53Z", "updated_at": "2017-08-11T03:00:09Z", "closed_at": "2017-08-11T03:00:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The simplest possible `try` form?\r\n```Python\r\n=> (try None (except [] None))\r\ntry:\r\n    _hy_anon_var_1 = None\r\nexcept:\r\n    _hy_anon_var_1 = None\r\n_hy_anon_var_1\r\n```\r\nUseless, but it works. Put it in a simple `defmacro`, and\r\n```Hy\r\n=> (defmacro foo [] (try None (except [] None)) `())\r\n  File \"<input>\", line 1, column 18\r\n\r\n  (defmacro foo [] (try None (except [] None)) `())\r\n                   ^-------------------------^\r\nHyTypeError: b\"Unknown expression in `try'\"\r\n```\r\nWhat happened?\r\n\r\nBut it works fine if we substitute in the expected `None`\r\n```Python\r\n=> (defmacro foo [] None `())\r\nimport hy\r\nfrom hy import HyExpression\r\n\r\ndef _hy_anon_fn_1():\r\n    None\r\n    return HyExpression([])\r\nhy.macros.macro('foo')(_hy_anon_fn_1)\r\n<function _hy_anon_fn_1 at 0x000001B059952488>\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1342", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1342/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1342/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1342/events", "html_url": "https://github.com/hylang/hy/issues/1342", "id": 245788893, "node_id": "MDU6SXNzdWUyNDU3ODg4OTM=", "number": 1342, "title": "Arguments aren't always evaluated left to right", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-07-26T16:58:44Z", "updated_at": "2022-06-17T14:14:43Z", "closed_at": "2022-06-17T14:14:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For example,\r\n```Python\r\n=> (setv foo 42)\r\nfoo = 42\r\nNone\r\n=> [foo (del foo)]\r\ndel foo\r\n[foo, None]\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\me\\documents\\github\\hy\\hy\\importer.py\", line 198, in hy_eval\r\n    return eval(ast_compile(expr, \"<eval>\", \"eval\"), namespace)\r\n  File \"<eval>\", line 1, in <module>\r\nNameError: name 'foo' is not defined\r\n```\r\nThe expected result was `[42, None]`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1334", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1334/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1334/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1334/events", "html_url": "https://github.com/hylang/hy/issues/1334", "id": 244771672, "node_id": "MDU6SXNzdWUyNDQ3NzE2NzI=", "number": 1334, "title": "Calling a tag macro whose name starts with `!` is lexed as a shebang line", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-21T20:13:13Z", "updated_at": "2017-07-25T18:43:53Z", "closed_at": "2017-07-25T18:43:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "    => (deftag !a [x] 1)\r\n    <function <lambda> at 0x7fcdb322ab70>\r\n    => (+ 1 #!a 1)\r\n      File \"<stdin>\", line 1, column 6\r\n\r\n      (+ 1 #!a 1)\r\n           ^\r\n    LexException: Ran into a HASHBANG where it wasn't expected.\r\n\r\nMy thinking is that shebang lines shouldn't be expected by the lexer; instead, they should be removed in preprocessing. The trick will be to make sure that line numbers are adjusted to compensate.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1331", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1331/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1331/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1331/events", "html_url": "https://github.com/hylang/hy/issues/1331", "id": 244748920, "node_id": "MDU6SXNzdWUyNDQ3NDg5MjA=", "number": 1331, "title": "Error installing master branch", "user": {"login": "ekaschalk", "id": 4041902, "node_id": "MDQ6VXNlcjQwNDE5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/4041902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekaschalk", "html_url": "https://github.com/ekaschalk", "followers_url": "https://api.github.com/users/ekaschalk/followers", "following_url": "https://api.github.com/users/ekaschalk/following{/other_user}", "gists_url": "https://api.github.com/users/ekaschalk/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekaschalk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekaschalk/subscriptions", "organizations_url": "https://api.github.com/users/ekaschalk/orgs", "repos_url": "https://api.github.com/users/ekaschalk/repos", "events_url": "https://api.github.com/users/ekaschalk/events{/privacy}", "received_events_url": "https://api.github.com/users/ekaschalk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-21T18:31:41Z", "updated_at": "2017-07-24T02:23:55Z", "closed_at": "2017-07-24T02:23:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I wanted to update to test the new unpacking features but there is an error in installing:\r\n\r\n```\r\npip install git+https://github.com/hylang/hy.git\r\nCollecting git+https://github.com/hylang/hy.git\r\n  Cloning https://github.com/hylang/hy.git to /tmp/pip-w3ih6gqj-build\r\nRequirement already satisfied: rply>=0.7.5 in ./.virtualenvs/pop-synthvenv/lib/python3.6/site-packages (from hy==0.13.0+42.g35f7dd3)\r\nRequirement already satisfied: astor>=0.5 in ./.virtualenvs/pop-synthvenv/lib/python3.6/site-packages (from hy==0.13.0+42.g35f7dd3)\r\nRequirement already satisfied: clint>=0.4 in ./.virtualenvs/pop-synthvenv/lib/python3.6/site-packages (from hy==0.13.0+42.g35f7dd3)\r\nRequirement already satisfied: appdirs in ./.virtualenvs/pop-synthvenv/lib/python3.6/site-packages (from rply>=0.7.5->hy==0.13.0+42.g35f7dd3)\r\nRequirement already satisfied: args in ./.virtualenvs/pop-synthvenv/lib/python3.6/site-packages (from clint>=0.4->hy==0.13.0+42.g35f7dd3)\r\nInstalling collected packages: hy\r\n  Running setup.py install for hy ... error\r\n    Complete output from command /root/.virtualenvs/pop-synthvenv/bin/python3 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-w3ih6gqj-build/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-c2z0vbgj-record/install-record.txt --single-version-externally-managed --compile --install-headers /root/.virtualenvs/pop-synthvenv/include/site/python3.6/hy:\r\n    running install\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/tmp/pip-w3ih6gqj-build/setup.py\", line 87, in <module>\r\n        \"Topic :: Software Development :: Libraries\",\r\n      File \"/usr/lib64/python3.6/distutils/core.py\", line 148, in setup\r\n        dist.run_commands()\r\n      File \"/usr/lib64/python3.6/distutils/dist.py\", line 955, in run_commands\r\n        self.run_command(cmd)\r\n      File \"/usr/lib64/python3.6/distutils/dist.py\", line 974, in run_command\r\n        cmd_obj.run()\r\n      File \"/tmp/pip-w3ih6gqj-build/setup.py\", line 30, in run\r\n        \".\" + filename[:-len(\".hy\")])\r\n      File \"/root/.virtualenvs/pop-synthvenv/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n        return _bootstrap._gcd_import(name[level:], package, level)\r\n      File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n      File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n      File \"<frozen importlib._bootstrap>\", line 950, in _find_and_load_unlocked\r\n      File \"<frozen importlib._bootstrap>\", line 646, in _load_unlocked\r\n      File \"<frozen importlib._bootstrap>\", line 616, in _load_backward_compatible\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/importer.py\", line 237, in load_module\r\n        return import_file_to_module(fullname, self.path, self)\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/importer.py\", line 96, in import_file_to_module\r\n        _ast = import_file_to_ast(fpath, module_name)\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/importer.py\", line 54, in import_file_to_ast\r\n        return hy_compile(import_file_to_hst(fpath), module_name)\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/importer.py\", line 42, in import_file_to_hst\r\n        return import_buffer_to_hst(f.read())\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/importer.py\", line 35, in import_buffer_to_hst\r\n        return HyExpression([HySymbol(\"do\")] + tokenize(buf + \"\\n\"))\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/lex/__init__.py\", line 17, in tokenize\r\n        return parser.parse(lexer.lex(buf))\r\n      File \"/root/.virtualenvs/pop-synthvenv/lib/python3.6/site-packages/rply/parser.py\", line 60, in parse\r\n        self.error_handler(lookahead)\r\n      File \"/tmp/pip-w3ih6gqj-build/hy/lex/parser.py\", line 361, in error_handler\r\n        token.source_pos.lineno, token.source_pos.colno)\r\n    hy.lex.exceptions.LexException:   File \"<stdin>\", line 13, column 52\r\n    \r\n           (with* [(PyCallGraph :output (GraphvizOutput)))]\r\n                                                         ^\r\n    LexException: Ran into a RPAREN where it wasn't expected.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1320", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1320/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1320/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1320/events", "html_url": "https://github.com/hylang/hy/issues/1320", "id": 242462100, "node_id": "MDU6SXNzdWUyNDI0NjIxMDA=", "number": 1320, "title": "`with` suppressing an exception can break temporary variable management", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-12T17:48:17Z", "updated_at": "2017-08-19T14:30:26Z", "closed_at": "2017-08-19T14:30:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Consider:\r\n\r\n    (defclass E [] []\r\n      (defn __enter__ [self])\r\n      (defn __exit__ [self exc-type exc-value traceback]\r\n        True)) ; Prevent the exception from being propagated\r\n\r\n    (defn f []\r\n      (with [(E)]\r\n        (/ 1 0)))\r\n\r\n    (f)\r\n\r\nThis crashes with `UnboundLocalError: local variable '_hy_anon_var_1' referenced before assignment.`, because it compiles to:\r\n\r\n    class E:\r\n\r\n        def __enter__(self):\r\n            pass\r\n\r\n        def __exit__(self, exc_type, exc_value, traceback):\r\n            return True\r\n\r\n    def f():\r\n        with E():\r\n            _hy_anon_var_1 = (1 / 0)\r\n        return _hy_anon_var_1\r\n    f()\r\n\r\nThe exception breaks out of the `with` statement before `_hy_anon_var_1` is assigned, but we still try to `return _hy_anon_var_1`.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1320/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1316", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1316/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1316/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1316/events", "html_url": "https://github.com/hylang/hy/issues/1316", "id": 240120666, "node_id": "MDU6SXNzdWUyNDAxMjA2NjY=", "number": 1316, "title": "[hy version 0.13.0] macro import error causes module with imported macros output incorrect compiled byte code", "user": {"login": "pyx", "id": 75370, "node_id": "MDQ6VXNlcjc1Mzcw", "avatar_url": "https://avatars.githubusercontent.com/u/75370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyx", "html_url": "https://github.com/pyx", "followers_url": "https://api.github.com/users/pyx/followers", "following_url": "https://api.github.com/users/pyx/following{/other_user}", "gists_url": "https://api.github.com/users/pyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyx/subscriptions", "organizations_url": "https://api.github.com/users/pyx/orgs", "repos_url": "https://api.github.com/users/pyx/repos", "events_url": "https://api.github.com/users/pyx/events{/privacy}", "received_events_url": "https://api.github.com/users/pyx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-03T09:47:07Z", "updated_at": "2017-07-04T00:22:47Z", "closed_at": "2017-07-03T21:45:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hy version 0.13.0\r\n\r\nGiven:\r\n\r\na.hy:\r\n```clojure\r\n(defmacro m [] `(print 'macro-m))\r\n```\r\n\r\nb.hy:\r\n```clojure\r\n(require [a [m]])\r\n```\r\n\r\nThen:\r\n\r\n```clojure\r\n(require [b [m]])\r\n(m)\r\n```\r\nworks, prints out `macro-m`, and then complied byte code for both `a.hy` and `b.hy` been saved in `__pycache__` directory.\r\n\r\nIf, instead, we run code that fails first (that is, there is no existing compiled byte code, or after `rm -r __pycache__`), for example, run this first:\r\n```clojure\r\n(require [b [non-exist]])\r\n```\r\nfrom then on,\r\n```clojure\r\n(require [b [m]])\r\n```\r\nwill fail as long as the compiled byte code file (that built by the failed `require` call) exists.\r\n\r\nFor local script, removing the cached byte code file, such as `rm -f __pycache__` will fix it temporary, for installed modules (in site-packages, and in virtual envs), there is no user-friendly way to fix that.\r\n\r\nI am guessing (since I did not read the relevant part of the code), by not saving compiled byte code if the code fail, will fix this.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1313", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1313/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1313/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1313/events", "html_url": "https://github.com/hylang/hy/issues/1313", "id": 237698751, "node_id": "MDU6SXNzdWUyMzc2OTg3NTE=", "number": 1313, "title": "The lexer hits the maximum recursion depth given a file with too many comment lines", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-22T00:13:32Z", "updated_at": "2017-07-12T23:51:45Z", "closed_at": "2017-07-12T23:51:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "     $ yes ';' | head -n 500 >/tmp/foo.hy\r\n     $ hy /tmp/foo.hy\r\n     Traceback (most recent call last):\r\n       File \"/home/hippo/Desktop/hyenv/bin/hy\", line 11, in <module>\r\n         load_entry_point('hy', 'console_scripts', 'hy')()\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/cmdline.py\", line 344, in hy_main\r\n         sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/cmdline.py\", line 332, in cmdline_handler\r\n         return run_file(options.args[0])\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/cmdline.py\", line 211, in run_file\r\n         pretty_error(import_file_to_module, \"__main__\", filename)\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/cmdline.py\", line 184, in pretty_error\r\n         return func(*args, **kw)\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/importer.py\", line 95, in import_file_to_module\r\n         _ast = import_file_to_ast(fpath, module_name)\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/importer.py\", line 53, in import_file_to_ast\r\n         return hy_compile(import_file_to_hst(fpath), module_name)\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/importer.py\", line 41, in import_file_to_hst\r\n         return import_buffer_to_hst(f.read())\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/importer.py\", line 34, in import_buffer_to_hst\r\n         return tokenize(buf + \"\\n\")\r\n       File \"/home/hippo/Desktop/hyenv/hy/hy/lex/__init__.py\", line 17, in tokenize\r\n         return parser.parse(lexer.lex(buf))\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/parser.py\", line 32, in parse\r\n         lookahead = next(tokenizer)\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexer.py\", line 56, in __next__\r\n         return self.next()\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexer.py\", line 41, in next\r\n         return self.next()\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexer.py\", line 41, in next\r\n         return self.next()\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexer.py\", line 41, in next\r\n         return self.next()\r\n       [Previous line repeated 976 more times]\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexer.py\", line 38, in next\r\n         match = rule.matches(self.s, self.idx)\r\n       File \"/home/hippo/Desktop/hyenv/lib/python3.6/site-packages/rply/lexergenerator.py\", line 33, in matches\r\n         return Match(*m.span(0)) if m is not None else None\r\n     RecursionError: maximum recursion depth exceeded\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1313/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1313/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1306", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1306/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1306/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1306/events", "html_url": "https://github.com/hylang/hy/issues/1306", "id": 236633254, "node_id": "MDU6SXNzdWUyMzY2MzMyNTQ=", "number": 1306, "title": "Hy Ignores PYTHONDONTWRITEBYTECODE", "user": {"login": "asimjalis", "id": 227187, "node_id": "MDQ6VXNlcjIyNzE4Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/227187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimjalis", "html_url": "https://github.com/asimjalis", "followers_url": "https://api.github.com/users/asimjalis/followers", "following_url": "https://api.github.com/users/asimjalis/following{/other_user}", "gists_url": "https://api.github.com/users/asimjalis/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimjalis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimjalis/subscriptions", "organizations_url": "https://api.github.com/users/asimjalis/orgs", "repos_url": "https://api.github.com/users/asimjalis/repos", "events_url": "https://api.github.com/users/asimjalis/events{/privacy}", "received_events_url": "https://api.github.com/users/asimjalis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-17T02:31:02Z", "updated_at": "2017-06-27T01:46:36Z", "closed_at": "2017-06-27T01:46:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "When `PYTHONDONTWRITEBYTECODE` is set in the environment (for example using `export PYTHONDONTWRITEBYTECODE=1`) Hy should not generate `.pyc`.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1306/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1302", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1302/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1302/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1302/events", "html_url": "https://github.com/hylang/hy/issues/1302", "id": 234878902, "node_id": "MDU6SXNzdWUyMzQ4Nzg5MDI=", "number": 1302, "title": "REPL history is lost on (quit)", "user": {"login": "asimjalis", "id": 227187, "node_id": "MDQ6VXNlcjIyNzE4Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/227187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimjalis", "html_url": "https://github.com/asimjalis", "followers_url": "https://api.github.com/users/asimjalis/followers", "following_url": "https://api.github.com/users/asimjalis/following{/other_user}", "gists_url": "https://api.github.com/users/asimjalis/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimjalis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimjalis/subscriptions", "organizations_url": "https://api.github.com/users/asimjalis/orgs", "repos_url": "https://api.github.com/users/asimjalis/repos", "events_url": "https://api.github.com/users/asimjalis/events{/privacy}", "received_events_url": "https://api.github.com/users/asimjalis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-09T16:31:12Z", "updated_at": "2017-07-27T04:39:30Z", "closed_at": "2017-07-27T04:39:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "REPL history is not flushed to disk if the REPL is exited using `(quit)`. \r\n\r\nA workaround is to remember to use `CTRL-D` to exit the REPL.\r\n\r\nWould be nice if `(quit)` also worked.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1289", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1289/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1289/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1289/events", "html_url": "https://github.com/hylang/hy/issues/1289", "id": 228518206, "node_id": "MDU6SXNzdWUyMjg1MTgyMDY=", "number": 1289, "title": "Tests are failing on Windows", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-05-14T04:40:54Z", "updated_at": "2017-09-05T21:10:46Z", "closed_at": "2017-09-05T21:10:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm not getting these on Linux, so Travis didn't notice. \r\n\r\n```\r\n============================= test session starts =============================\r\nplatform win32 -- Python 3.6.1, pytest-3.0.7, py-1.4.33, pluggy-0.4.0\r\nrootdir: C:\\Users\\ME\\hytest\\hy-master, inifile: setup.cfg\r\ncollected 153 items\r\n\r\ntests\\test_bin.py ......F................F....\r\ntests\\test_lex.py .................................\r\ntests\\test_models.py ..............\r\ntests\\compilers\\test_ast.py .................................................................\r\ntests\\compilers\\test_compiler.py ...\r\ntests\\importer\\test_importer.py .....\r\ntests\\importer\\test_pyc.py .\r\ntests\\macros\\test_macro_processor.py ...\r\ntests\\macros\\test_sharp_macros.py .\r\n\r\n================================== FAILURES ===================================\r\n_________________ test_bin_hy_stdin_error_underline_alignment _________________\r\n\r\n    def test_bin_hy_stdin_error_underline_alignment():\r\n        _, err = run_cmd(\"hy\", \"(defmacro mabcdefghi [x] x)\\n(mabcdefghi)\")\r\n>       assert \"\\n  (mabcdefghi)\\n  ^----------^\" in err\r\nE       assert '\\n  (mabcdefghi)\\n  ^----------^' in 'hy unknown using CPython(v3.6.1:69c0db5) 3.6.1 on Windows\\r\\n  File \"<input>\", line 1, column 1\\r\\n\\r\\n  (mabcdefghi)...or: b\"expanding `mabcdefghi\\': missing 1 required positional argument: \\'x\\'\"\\r\\n\\r\\n\\r\\n\\r\\nnow exiting HyREPL...\\r\\n'\r\n\r\ntests\\test_bin.py:125: AssertionError\r\n__________________________ test_bin_hy_byte_compile ___________________________\r\n\r\n    def test_bin_hy_byte_compile():\r\n    \r\n        modname = \"tests.resources.bin.bytecompile\"\r\n        fpath = modname.replace(\".\", \"/\") + \".hy\"\r\n    \r\n        for can_byte_compile in [True, False]:\r\n            for cmd in [\"hy \" + fpath,\r\n                        \"hy -m \" + modname,\r\n                        \"hy -c '(import {})'\".format(modname)]:\r\n    \r\n                rm(get_bytecode_path(fpath))\r\n    \r\n                if not can_byte_compile:\r\n                    # Keep Hy from being able to byte-compile the module by\r\n                    # creating a directory at the target location.\r\n                    os.mkdir(get_bytecode_path(fpath))\r\n    \r\n                # Whether or not we can byte-compile the module, we should be able\r\n                # to run it.\r\n>               output, _ = run_cmd(cmd)\r\n\r\ntests\\test_bin.py:278: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\ncmd = \"hy -c '(import tests.resources.bin.bytecompile)'\", stdin_data = None\r\nexpect = 0\r\n\r\n    def run_cmd(cmd, stdin_data=None, expect=0):\r\n        p = subprocess.Popen(os.path.join(hy_dir, cmd),\r\n                             stdin=subprocess.PIPE,\r\n                             stdout=subprocess.PIPE,\r\n                             stderr=subprocess.PIPE,\r\n                             shell=True)\r\n        if stdin_data is not None:\r\n            p.stdin.write(stdin_data.encode('ASCII'))\r\n            p.stdin.flush()\r\n            p.stdin.close()\r\n        # Read stdout and stderr otherwise if the PIPE buffer is full, we might\r\n        # wait for ever\u2026\r\n        stdout = \"\"\r\n        stderr = \"\"\r\n        while p.poll() is None:\r\n            stdout += p.stdout.read().decode('utf-8')\r\n            stderr += p.stderr.read().decode('utf-8')\r\n>       assert p.returncode == expect\r\nE       assert 1 == 0\r\nE        +  where 1 = <subprocess.Popen object at 0x0000021EDA2D2470>.returncode\r\n\r\ntests\\test_bin.py:55: AssertionError\r\n==================== 2 failed, 151 passed in 30.66 seconds ====================\r\n```\r\nThis is using the latest Hy master downloaded as a zip from github, and a fresh virtualenv.\r\n\r\nAlso, http://docs.hylang.org/en/latest/hacking.html is still showing instructions to use **nose** instead of **pytest**. Why isn't that updating?", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1289/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1288", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1288/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1288/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1288/events", "html_url": "https://github.com/hylang/hy/issues/1288", "id": 226879682, "node_id": "MDU6SXNzdWUyMjY4Nzk2ODI=", "number": 1288, "title": "Any capitalization of \"nan\" or \"inf\" is interpreted as a float, not a symbol", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-05-07T17:52:26Z", "updated_at": "2017-07-10T15:54:39Z", "closed_at": "2017-07-10T15:54:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For example:\r\n\r\n    => (setv Nan 5)\r\n      File \"<input>\", line 1, column 7\r\n\r\n      (setv Nan 5)\r\n            ^--^\r\n    HyTypeError: b\"Can't assign or delete a HyFloat\"\r\n\r\nThe fact that Hy accepts literals for floating-point infinity and NaN, albeit unintentional, is a nice feature that we might as well keep. But, Hy ought to recognize only one capitalization.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1288/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1277", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1277/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1277/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1277/events", "html_url": "https://github.com/hylang/hy/issues/1277", "id": 222010527, "node_id": "MDU6SXNzdWUyMjIwMTA1Mjc=", "number": 1277, "title": "Ugly error message when third argument of dict-comp isn't a HyList", "user": {"login": "hrehfeld", "id": 80887, "node_id": "MDQ6VXNlcjgwODg3", "avatar_url": "https://avatars.githubusercontent.com/u/80887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hrehfeld", "html_url": "https://github.com/hrehfeld", "followers_url": "https://api.github.com/users/hrehfeld/followers", "following_url": "https://api.github.com/users/hrehfeld/following{/other_user}", "gists_url": "https://api.github.com/users/hrehfeld/gists{/gist_id}", "starred_url": "https://api.github.com/users/hrehfeld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hrehfeld/subscriptions", "organizations_url": "https://api.github.com/users/hrehfeld/orgs", "repos_url": "https://api.github.com/users/hrehfeld/repos", "events_url": "https://api.github.com/users/hrehfeld/events{/privacy}", "received_events_url": "https://api.github.com/users/hrehfeld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-04-16T13:31:59Z", "updated_at": "2019-07-02T15:08:38Z", "closed_at": "2019-07-02T15:08:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://gist.github.com/hrehfeld/631b367babaf93f1bf6b66a62fe2276e\r\n\r\nhy 0.12.1+70.gad94343", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1277/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1268", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1268/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1268/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1268/events", "html_url": "https://github.com/hylang/hy/issues/1268", "id": 220372795, "node_id": "MDU6SXNzdWUyMjAzNzI3OTU=", "number": 1268, "title": "`require` doesn't compile to anything, which interacts badly with bytecode", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-04-08T03:47:20Z", "updated_at": "2018-11-09T16:13:37Z", "closed_at": "2018-11-09T16:13:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Here's an example with Python 2. If you have a Hy program `foo.hy` like this:\r\n\r\n    (require [hy.extra.anaphoric [ap-if]])\r\n    (print (eval '(ap-if (+ \"a\" \"b\") (+ it \"c\"))))\r\n\r\nthen `hy foo.hy` works fine and prints `\"abc\"`. But if you say `hyc foo.hy` and then `python foo.pyc`, you get `NameError: name 'ap_if' is not defined`.\r\n\r\nHere's why this happens. Currently, `require` doesn't contribute anything to the AST: its compilation method returns an empty `Result`. So `foo.pyc` ends up containing the same thing as if you compiled just `(print (eval '(ap-if (+ \"a\" \"b\") (+ it \"c\"))))`. The only reason `hy foo.hy` works is that the macros that Hy loaded during compile-time are still hanging around during run-time when we get to the `eval`.\r\n\r\nThe most obvious solution to this is to make `require` forms produce a piece of AST that does the same thing at run-time that the form does at compile time, namely, load the requested macros. The annoying thing about this approach is that it would give byte-compiled modules a dependency that they won't need unless they use a macro inside an `eval`, which is not something that most programs will do. That makes me think we should do the opposite, and prevent `(eval '(some-imported-macro ...))` from working at all. Then, if you want to use an imported macro in an `eval`, you'll need a corresponding `require` form in there, too.\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1255", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1255/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1255/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1255/events", "html_url": "https://github.com/hylang/hy/issues/1255", "id": 215770829, "node_id": "MDU6SXNzdWUyMTU3NzA4Mjk=", "number": 1255, "title": "A strange operation for \"as->\" macro.", "user": {"login": "youngsu999", "id": 6345681, "node_id": "MDQ6VXNlcjYzNDU2ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/6345681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/youngsu999", "html_url": "https://github.com/youngsu999", "followers_url": "https://api.github.com/users/youngsu999/followers", "following_url": "https://api.github.com/users/youngsu999/following{/other_user}", "gists_url": "https://api.github.com/users/youngsu999/gists{/gist_id}", "starred_url": "https://api.github.com/users/youngsu999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/youngsu999/subscriptions", "organizations_url": "https://api.github.com/users/youngsu999/orgs", "repos_url": "https://api.github.com/users/youngsu999/repos", "events_url": "https://api.github.com/users/youngsu999/events{/privacy}", "received_events_url": "https://api.github.com/users/youngsu999/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-21T15:04:20Z", "updated_at": "2017-03-25T15:20:21Z", "closed_at": "2017-03-25T15:20:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the document for [as->](http://docs.hylang.org/en/latest/language/api.html#as), the example code expected following output. \r\n\r\n```hy\r\n=> (as-> 0 it\r\n...      (inc it)\r\n...      (inc it))\r\n2\r\n```\r\n\r\nHowever, I got the following result.\r\n\r\n```hy\r\n=> (as-> 0 it\r\n... (inc it)\r\n... (inc it))\r\n(2, 2, 2)\r\n=>\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1255/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1252", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1252/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1252/events", "html_url": "https://github.com/hylang/hy/issues/1252", "id": 213882244, "node_id": "MDU6SXNzdWUyMTM4ODIyNDQ=", "number": 1252, "title": "Single quote crashes hy2py", "user": {"login": "refi64", "id": 1690697, "node_id": "MDQ6VXNlcjE2OTA2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1690697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refi64", "html_url": "https://github.com/refi64", "followers_url": "https://api.github.com/users/refi64/followers", "following_url": "https://api.github.com/users/refi64/following{/other_user}", "gists_url": "https://api.github.com/users/refi64/gists{/gist_id}", "starred_url": "https://api.github.com/users/refi64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refi64/subscriptions", "organizations_url": "https://api.github.com/users/refi64/orgs", "repos_url": "https://api.github.com/users/refi64/repos", "events_url": "https://api.github.com/users/refi64/events{/privacy}", "received_events_url": "https://api.github.com/users/refi64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-03-13T20:07:23Z", "updated_at": "2017-04-07T18:12:18Z", "closed_at": "2017-04-07T18:12:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## x.hy\r\n\r\n```\r\n'\r\n```\r\n\r\n## `hy2py x.hy`\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"hy/cmdline.py\", line 406, in hy2py_main\r\n    if stdin_text is None\r\n  File \"hy/cmdline.py\", line 186, in pretty_error\r\n    print(e, file=sys.stderr)\r\n  File \"hy/lex/exceptions.py\", line 43, in __str__\r\n    source = self.source.split(\"\\n\")\r\nAttributeError: 'NoneType' object has no attribute 'split'\r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1233", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1233/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1233/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1233/events", "html_url": "https://github.com/hylang/hy/issues/1233", "id": 209850371, "node_id": "MDU6SXNzdWUyMDk4NTAzNzE=", "number": 1233, "title": "reduce not available in shadow functions after compilation", "user": {"login": "Zabolekar", "id": 2109478, "node_id": "MDQ6VXNlcjIxMDk0Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/2109478?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zabolekar", "html_url": "https://github.com/Zabolekar", "followers_url": "https://api.github.com/users/Zabolekar/followers", "following_url": "https://api.github.com/users/Zabolekar/following{/other_user}", "gists_url": "https://api.github.com/users/Zabolekar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zabolekar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zabolekar/subscriptions", "organizations_url": "https://api.github.com/users/Zabolekar/orgs", "repos_url": "https://api.github.com/users/Zabolekar/repos", "events_url": "https://api.github.com/users/Zabolekar/events{/privacy}", "received_events_url": "https://api.github.com/users/Zabolekar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-02-23T18:52:09Z", "updated_at": "2017-05-07T18:24:27Z", "closed_at": "2017-05-07T18:24:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lets consider the following file `test_shadow.hy`:\r\n\r\n    (defn f [g] (g 1 2))\r\n    (f +)\r\n\r\nIf we execute it directly, everything is well:\r\n\r\n    > hy test_shadow.hy\r\n    3\r\n\r\nIf we, however, compile it first, we get an error:\r\n\r\n    > hyc test_shadow.hy\r\n    > python test_shadow.pyc\r\n    Traceback (most recent call last):\r\n      File \"reproduce_bug.hy\", line 2, in <module>\r\n        (print (f +))\r\n      File \"reproduce_bug.hy\", line 1, in f\r\n        (defn f [g] (g 1 2))\r\n      File \"C:\\Users\\zabolekar\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages/hy/core/shadow.hy\", line 34, in +\r\n        (reduce operator.add args)\r\n     NameError: name 'reduce' is not defined\r\n\r\nThe problem disappeared (without a need to recompile the pyc file) after I added the following code at the beginning of `/hy/core/shadow.hy`:\r\n\r\n    (import functools)\r\n    (def reduce\r\n      (if-python2 reduce functools.reduce))\r\n\r\nHowever, I do not understand the codebase fully and am not sure whether submitting a fix like that is a good idea.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1211", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1211/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1211/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1211/events", "html_url": "https://github.com/hylang/hy/issues/1211", "id": 203024680, "node_id": "MDU6SXNzdWUyMDMwMjQ2ODA=", "number": 1211, "title": "Modules can't require themselves", "user": {"login": "pyx", "id": 75370, "node_id": "MDQ6VXNlcjc1Mzcw", "avatar_url": "https://avatars.githubusercontent.com/u/75370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyx", "html_url": "https://github.com/pyx", "followers_url": "https://api.github.com/users/pyx/followers", "following_url": "https://api.github.com/users/pyx/following{/other_user}", "gists_url": "https://api.github.com/users/pyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyx/subscriptions", "organizations_url": "https://api.github.com/users/pyx/orgs", "repos_url": "https://api.github.com/users/pyx/repos", "events_url": "https://api.github.com/users/pyx/events{/privacy}", "received_events_url": "https://api.github.com/users/pyx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-01-25T06:39:40Z", "updated_at": "2018-11-09T16:13:37Z", "closed_at": "2018-11-09T16:13:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the new syntax of require and macro call with qualified name as mentioned here:\r\nhttp://hy.readthedocs.io/en/stable/language/api.html#require\r\n\r\nthis will fail.\r\nfile m.hy:\r\n```\r\n(defmacro bar [expr]\r\n  `(print ~expr))\r\n\r\n(defmacro foo [expr]\r\n  `(do (require m)\r\n     (m.bar ~expr)))\r\n\r\n(foo 42)\r\n```\r\n\r\nThe error message is:\r\n```\r\n$ hy m.hy\r\n...\r\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n\u2937 ImportError: import of 'm' halted; None in sys.modules\r\n...\r\n```\r\nNotice the macro ```foo``` is being used in the same file.\r\nIs it by design?  If so, the documentation might need to be updated with this information, and/or have better error message.\r\n\r\nPS. issue #1210 was my failed attempt to reproduce this.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1211/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1207", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1207/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1207/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1207/events", "html_url": "https://github.com/hylang/hy/issues/1207", "id": 202260709, "node_id": "MDU6SXNzdWUyMDIyNjA3MDk=", "number": 1207, "title": "macroexpand doesn't like macros with named imports", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-20T22:39:43Z", "updated_at": "2017-08-25T22:34:07Z", "closed_at": "2017-08-25T22:34:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Consder\r\n\r\n    (defmacro m [] (import [math [sqrt]]) '1)\r\n\r\nEvaluating `(m)` works, but `(macroexpand '(m))` creates the below traceback (we have a different issue, #818, for messy tracebacks from `macroexpand`). If you do `(import math)` instead of ` (import [math [sqrt]])`, there's no error.\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/macros.py\", line 217, in macroexpand_1\r\n        obj = wrap_value(m(*ntree[1:], **opts))\r\n      File \"/tmp/foo.hy\", line 1, in _hy_anon_fn_1\r\n        (defmacro m [] (import [math [sqrt]]) '1)\r\n    ImportError: No module named '[]'\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/cmdline.py\", line 185, in pretty_error\r\n        return func(*args, **kw)\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/importer.py\", line 79, in import_file_to_module\r\n        eval(ast_compile(_ast, fpath, \"exec\"), mod.__dict__)\r\n      File \"/tmp/foo.hy\", line 2, in <module>\r\n        (print (macroexpand '(m)))\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/core/language.hy\", line 323, in macroexpand\r\n        (hy.macros.macroexpand form (HyASTCompiler name)))\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/macros.py\", line 181, in macroexpand\r\n        tree = macroexpand_1(tree, compiler)\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/macros.py\", line 224, in macroexpand_1\r\n        raise HyMacroExpansionError(tree, msg)\r\n    hy.errors.HyMacroExpansionError: <exception str() failed>\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/bin/hy\", line 11, in <module>\r\n        load_entry_point('hy==0.12.0', 'console_scripts', 'hy')()\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/cmdline.py\", line 342, in hy_main\r\n        sys.exit(cmdline_handler(\"hy\", sys.argv))\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/cmdline.py\", line 330, in cmdline_handler\r\n        return run_file(options.args[0])\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/cmdline.py\", line 212, in run_file\r\n        pretty_error(import_file_to_module, \"__main__\", filename)\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/cmdline.py\", line 188, in pretty_error\r\n        print(e, file=sys.stderr)\r\n      File \"/usr/local/lib/python3.5/dist-packages/hy-0.12.0-py3.5.egg/hy/errors.py\", line 64, in __str__\r\n        line = self.expression.start_line\r\n    AttributeError: 'HyExpression' object has no attribute 'start_line'", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1200", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1200/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1200/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1200/events", "html_url": "https://github.com/hylang/hy/issues/1200", "id": 201314899, "node_id": "MDU6SXNzdWUyMDEzMTQ4OTk=", "number": 1200, "title": "fix setup.py", "user": {"login": "tuturto", "id": 1389385, "node_id": "MDQ6VXNlcjEzODkzODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1389385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuturto", "html_url": "https://github.com/tuturto", "followers_url": "https://api.github.com/users/tuturto/followers", "following_url": "https://api.github.com/users/tuturto/following{/other_user}", "gists_url": "https://api.github.com/users/tuturto/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuturto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuturto/subscriptions", "organizations_url": "https://api.github.com/users/tuturto/orgs", "repos_url": "https://api.github.com/users/tuturto/repos", "events_url": "https://api.github.com/users/tuturto/events{/privacy}", "received_events_url": "https://api.github.com/users/tuturto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/9", "html_url": "https://github.com/hylang/hy/milestone/9", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/9/labels", "id": 2086778, "node_id": "MDk6TWlsZXN0b25lMjA4Njc3OA==", "number": 9, "title": "0.12.0", "description": null, "creator": {"login": "tuturto", "id": 1389385, "node_id": "MDQ6VXNlcjEzODkzODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1389385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuturto", "html_url": "https://github.com/tuturto", "followers_url": "https://api.github.com/users/tuturto/followers", "following_url": "https://api.github.com/users/tuturto/following{/other_user}", "gists_url": "https://api.github.com/users/tuturto/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuturto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuturto/subscriptions", "organizations_url": "https://api.github.com/users/tuturto/orgs", "repos_url": "https://api.github.com/users/tuturto/repos", "events_url": "https://api.github.com/users/tuturto/events{/privacy}", "received_events_url": "https://api.github.com/users/tuturto/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2016-10-22T21:14:50Z", "updated_at": "2017-05-23T19:00:40Z", "due_on": null, "closed_at": "2017-05-23T19:00:40Z"}, "comments": 0, "created_at": "2017-01-17T15:15:27Z", "updated_at": "2017-01-17T18:46:59Z", "closed_at": "2017-01-17T18:46:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "at least hy.extra is missing from package data", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1174", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1174/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1174/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1174/events", "html_url": "https://github.com/hylang/hy/issues/1174", "id": 195205802, "node_id": "MDU6SXNzdWUxOTUyMDU4MDI=", "number": 1174, "title": "eval doesn't use hy.models._wrappers", "user": {"login": "dangom", "id": 7881842, "node_id": "MDQ6VXNlcjc4ODE4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7881842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dangom", "html_url": "https://github.com/dangom", "followers_url": "https://api.github.com/users/dangom/followers", "following_url": "https://api.github.com/users/dangom/following{/other_user}", "gists_url": "https://api.github.com/users/dangom/gists{/gist_id}", "starred_url": "https://api.github.com/users/dangom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dangom/subscriptions", "organizations_url": "https://api.github.com/users/dangom/orgs", "repos_url": "https://api.github.com/users/dangom/repos", "events_url": "https://api.github.com/users/dangom/events{/privacy}", "received_events_url": "https://api.github.com/users/dangom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-12-13T09:47:35Z", "updated_at": "2017-07-10T06:04:09Z", "closed_at": "2017-07-10T06:04:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I came across this issue trying to narrow down a compiler error I was getting from a macro.\r\nWhy should the following piece of code throw an error?\r\n\r\n```\r\n=> (import numpy)\r\n\r\n\r\n=> (= \".\" (get (name numpy) 0)))\r\nFalse\r\n=> (eval '(= \".\" (get (name numpy) 0)))\r\nFalse\r\n=> (eval `(= \".\" ~(get (name numpy) 0)))\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"/Users/dg/anaconda3/lib/python3.5/site-packages/hy/importer.py\", line 110, in hy_eval\r\n    hytree.replace(foo)\r\n  File \"/Users/dg/anaconda3/lib/python3.5/site-packages/hy/models/list.py\", line 31, in replace\r\n    x.replace(other)\r\nTypeError: replace() takes at least 2 arguments (1 given)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1174/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1154", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1154/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1154/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1154/events", "html_url": "https://github.com/hylang/hy/issues/1154", "id": 190610418, "node_id": "MDU6SXNzdWUxOTA2MTA0MTg=", "number": 1154, "title": "&optional and (apply ...) in a macro cause HyCompileError", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-21T03:29:53Z", "updated_at": "2017-07-10T06:04:09Z", "closed_at": "2017-07-10T06:04:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following:\r\n\r\n    (defn f [&rest args]\r\n      (print \"f:\" args))\r\n\r\n    (defmacro mac [&optional x]\r\n     `(apply f [~x]))\r\n\r\n    (mac)\r\n\r\nyields:\r\n\r\n    hy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\r\n    \u2937 Exception: Unknown type: `<class 'NoneType'>'\r\n    Compilation traceback:\r\n    No traceback available. \ud83d\ude1f\r\n\r\nBut there is no crash if you do any of the following:\r\n\r\n- Call `mac` with an argument (even `None`)\r\n- Write the body of `mac` as `(f ~x)`\r\n- Change the parameter list of `mac` to `[&optional [x 'None]]` (but if you exclude the single quote, the crash still happens)\r\n\r\n`(macroexpand '(mac))` yields `('apply' 'f' [None])`, and `(type (get (macroexpand '(mac)) 2 0))` is `NoneType`, which I believe means that `None` isn't getting wrapped into a Hy model object for some reason.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1150", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1150/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1150/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1150/events", "html_url": "https://github.com/hylang/hy/issues/1150", "id": 188306560, "node_id": "MDU6SXNzdWUxODgzMDY1NjA=", "number": 1150, "title": "Hy loses a method name in certain uses of defclass", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-11-09T17:33:28Z", "updated_at": "2018-06-17T16:01:46Z", "closed_at": "2018-06-17T16:01:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following code:\r\n\r\n    (defclass A []\r\n      [m1 (fn [self]\r\n        1)]\r\n      [m2 (fn [self]\r\n        2)])\r\n    (setv a (A))\r\n\r\n    (print (.m1 a))\r\n    (print (.m2 a))\r\n\r\nraises `AttributeError: 'A' object has no attribute 'm2'`. hy2py shows that it gets translated to this:\r\n\r\n    class A:\r\n\r\n        def m1(self):\r\n            return 1\r\n\r\n        def _hy_anon_fn_2(self):\r\n            return 2\r\n    a = A()\r\n    print(a.m1())\r\n    print(a.m2())\r\n\r\nSomehow the name `m2` got lost. We should see either `def m2` or `m2 = _hy_anon_fn_2`.\r\n\r\nThis bug doesn't arise if you use only one pair of square brackets for both methods.", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1144", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1144/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1144/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1144/events", "html_url": "https://github.com/hylang/hy/issues/1144", "id": 186374786, "node_id": "MDU6SXNzdWUxODYzNzQ3ODY=", "number": 1144, "title": "Import has a LOT of corner cases", "user": {"login": "refi64", "id": 1690697, "node_id": "MDQ6VXNlcjE2OTA2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1690697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refi64", "html_url": "https://github.com/refi64", "followers_url": "https://api.github.com/users/refi64/followers", "following_url": "https://api.github.com/users/refi64/following{/other_user}", "gists_url": "https://api.github.com/users/refi64/gists{/gist_id}", "starred_url": "https://api.github.com/users/refi64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refi64/subscriptions", "organizations_url": "https://api.github.com/users/refi64/orgs", "repos_url": "https://api.github.com/users/refi64/repos", "events_url": "https://api.github.com/users/refi64/events{/privacy}", "received_events_url": "https://api.github.com/users/refi64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-31T19:28:25Z", "updated_at": "2019-07-02T15:12:17Z", "closed_at": "2019-07-02T15:12:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\nryan@DevPC-LX /media/ryan/stuff/hy attrerr $ ./run --spy\r\nhy 0.11.0 using CPython(default) 2.7.6 on Linux\r\n=> (import [xyz])  ; Looks ok.\r\nimport xyz\r\n=> (import [xyz []]) ; This makes no sense and compiles as something that makes less sense.\r\nfrom xyz import xyz\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name xyz\r\n=> (import [xyz [* *]])  ; Yay stars!\r\nfrom xyz import *, *\r\n=> (import [xyz [* * * * * * * * * * * * * * * * * * * *]])  ; LOOK, it's July 4th!\r\nfrom xyz import *, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *, *\r\n=> (import [xyz [* :as 1]])  ; I have no clue what the hell is doing.\r\nfrom xyz import * as 1\r\n=> (import [xyz [1]])  ; Speaking of which, we can import numbers (!).\r\nfrom xyz import 1\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name 1\r\n=> (import [xyz [:foo]])  ; This also makes no sense.\r\nfrom xyz import hy_:foo_9x8x\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name hy_:foo_9x8x\r\n=> (import [xyz [a : b]])  ; Same as [a :as b].\r\nfrom xyz import a as b\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name a\r\n=> (import [xyz [a :RANDOM_STUFF b]])  ; Ditto.\r\nfrom xyz import a as b\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name a\r\n=> (import [xyz [a.b]])  ; Again, makes no sense.\r\nfrom xyz import a.b\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name a.b\r\n=> (import [xyz [1/2]])  ; Well, that's awkward\r\nfrom xyz import (u'fraction' 1L 2L)\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\nImportError: cannot import name (u'fraction' 1L 2L)\r\n=> \r\nryan@DevPC-LX /media/ryan/stuff/hy attrerr $ \r\n```", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1134", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1134/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1134/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1134/events", "html_url": "https://github.com/hylang/hy/issues/1134", "id": 182654601, "node_id": "MDU6SXNzdWUxODI2NTQ2MDE=", "number": 1134, "title": "Circular import fails", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-12T22:57:11Z", "updated_at": "2018-09-03T11:36:57Z", "closed_at": "2018-09-03T11:36:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With Python, this works:\n\n```\n$ echo 'import b; print(\"in a\")' > a.py\n$ echo 'import a; print(\"in b\")' > b.py\n$ echo 'import a, b; print(\"done\")' > main.py\n$ python main.py \nin b\nin a\ndone\n```\n\nThe equivalent with Hy doesn't work:\n\n```\n$ echo '(import b) (print \"in a\")' > a.hy            \n$ echo '(import a) (print \"in b\")' > b.hy\n$ echo '(import a b) (print \"done\")' > main.hy\n$ hy main.hy\nTraceback (most recent call last):\n  ...\n  File \"/tmp/b.hy\", line 1, in <module>\n    (import a) (print \"in b\")\nImportError: import of 'a' halted; None in sys.modules\n```\n\nOne consequence of this is that an `__init__.hy` file can't import other files in its own package, as `__init__.py` files usually do.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1134/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1120", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1120/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1120/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1120/events", "html_url": "https://github.com/hylang/hy/issues/1120", "id": 179119174, "node_id": "MDU6SXNzdWUxNzkxMTkxNzQ=", "number": 1120, "title": "Hy sets are really broken.", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-26T00:38:24Z", "updated_at": "2016-09-27T18:32:25Z", "closed_at": "2016-09-27T18:32:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` Hy\n(env-hy) C:\\Users\\ME\\Code>hy\nhy 0.11.0 using CPython(v3.4.3:9b73f1c3e601) 3.4.3 on Windows\n=> #{:a 'a}\nTraceback (most recent call last):\n  File \"C:\\Python34\\Scripts\\env-hy\\Scripts\\hy-script.py\", line 9, in <module>\n    load_entry_point('hy==0.11.0', 'console_scripts', 'hy')()\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\cmdline.py\", line 341, in hy_main\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\cmdline.py\", line 336, in cmdline_handler\n    return run_repl(spy=options.spy)\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\cmdline.py\", line 234, in run_repl\n    os=platform.system()\n  File \"C:\\Python34\\Lib\\code.py\", line 234, in interact\n    more = self.push(line)\n  File \"C:\\Python34\\Lib\\code.py\", line 256, in push\n    more = self.runsource(source, self.filename)\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\cmdline.py\", line 93, in runsource\n    tokens = tokenize(source)\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\lex\\__init__.py\", line 33, in tokenize\n    return parser.parse(lexer.lex(buf))\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\rply\\parser.py\", line 23, in parse\n    t, symstack, statestack, state\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\rply\\parser.py\", line 80, in _reduce_production\n    value = p.func(targ)\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\lex\\parser.py\", line 69, in wrapped\n    ret = fun(p)\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\lex\\parser.py\", line 214, in t_set\n    return HySet(p[1])\n  File \"C:\\Python34\\Scripts\\env-hy\\lib\\site-packages\\hy\\models\\set.py\", line 31, in __init__\n    items = sorted(items)\nTypeError: unorderable types: HyExpression() < HyKeyword()\n\n(env-hy) C:\\Users\\ME\\Code>\n```\n\nThat is NOT supposed to happen.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1068", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1068/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1068/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1068/events", "html_url": "https://github.com/hylang/hy/issues/1068", "id": 155605508, "node_id": "MDU6SXNzdWUxNTU2MDU1MDg=", "number": 1068, "title": "make assoc use a gensym", "user": {"login": "gilch", "id": 3346292, "node_id": "MDQ6VXNlcjMzNDYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3346292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilch", "html_url": "https://github.com/gilch", "followers_url": "https://api.github.com/users/gilch/followers", "following_url": "https://api.github.com/users/gilch/following{/other_user}", "gists_url": "https://api.github.com/users/gilch/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilch/subscriptions", "organizations_url": "https://api.github.com/users/gilch/orgs", "repos_url": "https://api.github.com/users/gilch/repos", "events_url": "https://api.github.com/users/gilch/events{/privacy}", "received_events_url": "https://api.github.com/users/gilch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-18T21:26:38Z", "updated_at": "2017-08-25T19:23:46Z", "closed_at": "2017-08-25T19:23:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Clojure:\n\n``` Clojure\nuser=> (defn spam [] (println \"Spam!\") {})\n#'user/spam\nuser=> (assoc (spam) 1 10, 2 20, 3 30)\nSpam!\n{1 10, 2 20, 3 30}\n```\n\nHy:\n\n``` Hy\n=> (defn spam [] (print \"Spam!\") {})\n=> (assoc (spam) 1 10  2 20  3 30)\nSpam!\nSpam!\nSpam!\n```\n\nThis is surprising. It could be corrected with a gensym.\n\nAlso `assoc` doesn't return the dict as in Clojure. But in Python's standard library, all of the mutating functions and methods I can think of return `None`, so perhaps this was intentional.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1068/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1045", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1045/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1045/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1045/events", "html_url": "https://github.com/hylang/hy/issues/1045", "id": 148412279, "node_id": "MDU6SXNzdWUxNDg0MTIyNzk=", "number": 1045, "title": "NameError for HyList, HyDict ...", "user": {"login": "nalssee", "id": 3701721, "node_id": "MDQ6VXNlcjM3MDE3MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3701721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nalssee", "html_url": "https://github.com/nalssee", "followers_url": "https://api.github.com/users/nalssee/followers", "following_url": "https://api.github.com/users/nalssee/following{/other_user}", "gists_url": "https://api.github.com/users/nalssee/gists{/gist_id}", "starred_url": "https://api.github.com/users/nalssee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nalssee/subscriptions", "organizations_url": "https://api.github.com/users/nalssee/orgs", "repos_url": "https://api.github.com/users/nalssee/repos", "events_url": "https://api.github.com/users/nalssee/events{/privacy}", "received_events_url": "https://api.github.com/users/nalssee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-04-14T16:14:54Z", "updated_at": "2021-03-16T17:13:59Z", "closed_at": "2021-03-16T17:13:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Evaluating HyDict raises a NameError but once I evaluate '{}, it is defined in the env.\n\nSo I had to write like (instance? (type '{}) expr) instead of (instance? HyDict expr).\n\nAll the other HyObjects are the same.\n\nI'm not sure if it is an intended behaviour or a bug.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1045/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/1016", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/1016/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/1016/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/1016/events", "html_url": "https://github.com/hylang/hy/issues/1016", "id": 128018550, "node_id": "MDU6SXNzdWUxMjgwMTg1NTA=", "number": 1016, "title": "Exception when importing hy.core.macros from Python", "user": {"login": "timmartin", "id": 56920, "node_id": "MDQ6VXNlcjU2OTIw", "avatar_url": "https://avatars.githubusercontent.com/u/56920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timmartin", "html_url": "https://github.com/timmartin", "followers_url": "https://api.github.com/users/timmartin/followers", "following_url": "https://api.github.com/users/timmartin/following{/other_user}", "gists_url": "https://api.github.com/users/timmartin/gists{/gist_id}", "starred_url": "https://api.github.com/users/timmartin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timmartin/subscriptions", "organizations_url": "https://api.github.com/users/timmartin/orgs", "repos_url": "https://api.github.com/users/timmartin/repos", "events_url": "https://api.github.com/users/timmartin/events{/privacy}", "received_events_url": "https://api.github.com/users/timmartin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-01-21T21:00:59Z", "updated_at": "2017-08-02T15:45:17Z", "closed_at": "2017-08-02T15:45:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If I open a Python 3.4 REPL and type `import hy.core.macros`, it throws an exception:\n\n```\n>>> import hy.core.macros\nTraceback (most recent call last):\n  File \"/home/timm/dev/hy/hy/macros.py\", line 184, in macroexpand_1\n    obj = wrap_value(m(*ntree[1:], **opts))\n  File \"<eval_body>\", line 1, in _hy_anon_fn_2\nNameError: name 'is_empty' is not defined\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"<frozen importlib._bootstrap>\", line 2237, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 2226, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 1191, in _load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 1161, in _load_backward_compatible\n  File \"/home/timm/dev/hy/hy/importer.py\", line 188, in load_module\n    self.path)\n  File \"/home/timm/dev/hy/hy/importer.py\", line 76, in import_file_to_module\n    _ast = import_file_to_ast(fpath, module_name)\n  File \"/home/timm/dev/hy/hy/importer.py\", line 68, in import_file_to_ast\n    return hy_compile(import_file_to_hst(fpath), module_name)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2596, in hy_compile\n    result = compiler.compile(tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 433, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 627, in compile_raw_list\n    ret = self._compile_branch(entries)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 489, in _compile_branch\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 316, in _branch\n    results = list(results)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 489, in <genexpr>\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 433, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2006, in compile_expression\n    ret = self.compile_atom(fn, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 366, in checker\n    return fn(self, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2450, in compile_macro\n    ret = self._compile_time_hack(new_expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2428, in _compile_time_hack\n    self.module_name)\n  File \"/home/timm/dev/hy/hy/importer.py\", line 116, in hy_eval\n    _ast, expr = hy_compile(hytree, module_name, get_expr=True)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2596, in hy_compile\n    result = compiler.compile(tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 433, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2006, in compile_expression\n    ret = self.compile_atom(fn, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 366, in checker\n    return fn(self, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 1418, in compile_decorate_expression\n    fn = self.compile(expr.pop(-1))\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 433, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2006, in compile_expression\n    ret = self.compile_atom(fn, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 366, in checker\n    return fn(self, expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 2301, in compile_function_def\n    body = self._compile_branch(expression)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 489, in _compile_branch\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 316, in _branch\n    results = list(results)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 489, in <genexpr>\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 433, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 425, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/home/timm/dev/hy/hy/compiler.py\", line 1992, in compile_expression\n    expression = macroexpand(expression, self)\n  File \"/home/timm/dev/hy/hy/macros.py\", line 149, in macroexpand\n    tree = macroexpand_1(tree, compiler)\n  File \"/home/timm/dev/hy/hy/macros.py\", line 191, in macroexpand_1\n    raise HyMacroExpansionError(tree, msg)\nhy.errors.HyMacroExpansionError:   File \"/home/timm/dev/hy/hy/core/macros.hy\", line 110, column 3\n\n    (cond\n    ^----\n     [(odd? (len args))\n  ---------------------\n      (macro-error args \"`for' requires an even number of args.\")]\n  ----------------------------------------------------------------\n     [(empty? body)\n  -----------------\n      (macro-error None \"`for' requires a body to evaluate\")]\n  -----------------------------------------------------------\n     [(empty? args) `(do ~@body ~@belse)]\n  ---------------------------------------\n     [(= (len args) 2) `(for* [~@args] (do ~@body) ~@belse)]\n  ----------------------------------------------------------\n     [true\n  --------\n       (let [alist (cut args 0 nil 2)]\n  -----------------------------------\n        `(for* [(, ~@alist) (genexpr (, ~@alist) [~@args])] (do ~@body) ~@belse))]))\n  --------------------------------------------------------------------------------^\nHyMacroExpansionError: b'expanding `cond\\': NameError(\"name \\'is_empty\\' is not defined\",)'\n```\n\nThis is with the current development branch (f9cf39ee738c). I don't see this with the current stable release (0.11.1).\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/1016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/1016/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/982", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/982/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/982/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/982/events", "html_url": "https://github.com/hylang/hy/issues/982", "id": 113453130, "node_id": "MDU6SXNzdWUxMTM0NTMxMzA=", "number": 982, "title": "Repl Bug", "user": {"login": "Arseny-N", "id": 3064867, "node_id": "MDQ6VXNlcjMwNjQ4Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/3064867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arseny-N", "html_url": "https://github.com/Arseny-N", "followers_url": "https://api.github.com/users/Arseny-N/followers", "following_url": "https://api.github.com/users/Arseny-N/following{/other_user}", "gists_url": "https://api.github.com/users/Arseny-N/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arseny-N/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arseny-N/subscriptions", "organizations_url": "https://api.github.com/users/Arseny-N/orgs", "repos_url": "https://api.github.com/users/Arseny-N/repos", "events_url": "https://api.github.com/users/Arseny-N/events{/privacy}", "received_events_url": "https://api.github.com/users/Arseny-N/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-10-26T21:16:41Z", "updated_at": "2015-12-14T21:58:49Z", "closed_at": "2015-12-14T21:58:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, nice project ! \n\nBut if in the REPL  you type \n`=> (:)`\nit crashes \n\n```\nTraceback (most recent call last):\n  File \"/usr/bin/hy\", line 9, in <module>\n    load_entry_point('hy==0.11.0', 'console_scripts', 'hy')()\n  File \"/usr/lib/python2.7/site-packages/hy/cmdline.py\", line 347, in hy_main\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\n  File \"/usr/lib/python2.7/site-packages/hy/cmdline.py\", line 342, in cmdline_handler\n    return run_repl(spy=options.spy)\n  File \"/usr/lib/python2.7/site-packages/hy/cmdline.py\", line 240, in run_repl\n    os=platform.system()\n  File \"/usr/lib64/python2.7/code.py\", line 243, in interact\n    more = self.push(line)\n  File \"/usr/lib64/python2.7/code.py\", line 265, in push\n    more = self.runsource(source, self.filename)\n  File \"/usr/lib/python2.7/site-packages/hy/cmdline.py\", line 113, in runsource\n    sys.stderr.write(str(e))\n  File \"/usr/lib/python2.7/site-packages/hy/errors.py\", line 104, in __str__\n    self.message))\n  File \"/usr/lib/python2.7/site-packages/clint/textui/colored.py\", line 108, in __radd__\n    return str(other) + str(self.color_str)\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\ufdd0' in position 24: ordinal not in range(128)\n```\n\nHere is the version\n\n```\n$ hy -v\nhy 0.11.0\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/982/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/818", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/818/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/818/events", "html_url": "https://github.com/hylang/hy/issues/818", "id": 90224035, "node_id": "MDU6SXNzdWU5MDIyNDAzNQ==", "number": 818, "title": "`macroexpand` fails to raise a printable macro expansion error", "user": {"login": "nfgrusk", "id": 4781070, "node_id": "MDQ6VXNlcjQ3ODEwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/4781070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfgrusk", "html_url": "https://github.com/nfgrusk", "followers_url": "https://api.github.com/users/nfgrusk/followers", "following_url": "https://api.github.com/users/nfgrusk/following{/other_user}", "gists_url": "https://api.github.com/users/nfgrusk/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfgrusk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfgrusk/subscriptions", "organizations_url": "https://api.github.com/users/nfgrusk/orgs", "repos_url": "https://api.github.com/users/nfgrusk/repos", "events_url": "https://api.github.com/users/nfgrusk/events{/privacy}", "received_events_url": "https://api.github.com/users/nfgrusk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-22T21:59:58Z", "updated_at": "2019-06-21T20:05:02Z", "closed_at": "2019-06-21T20:05:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n$ cat foo.hy \n(defmacro foo [x] '()) (macroexpand '(foo))\n$ hy foo.hy \nTraceback (most recent call last):\n  File \".../hy/macros.py\", line 197, in macroexpand_1\n    obj = _wrap_value(m(*ntree[1:]))\nTypeError: _hy_anon_fn_1() missing 1 required positional argument: 'x'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  ...\n  File \".../hy/macros.py\", line 204, in macroexpand_1\n    raise HyMacroExpansionError(tree, msg)\nhy.errors.HyMacroExpansionError\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  ...\n  File \".../hy/errors.py\", line 66, in __str__\n    line = self.expression.start_line\nAttributeError: 'HyExpression' object has no attribute 'start_line'\n```\n\nIt's tracebacks all the way down.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/818/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/798", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/798/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/798/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/798/events", "html_url": "https://github.com/hylang/hy/issues/798", "id": 72136544, "node_id": "MDU6SXNzdWU3MjEzNjU0NA==", "number": 798, "title": "\"else\" does not return a value from a try form", "user": {"login": "chr15m", "id": 67130, "node_id": "MDQ6VXNlcjY3MTMw", "avatar_url": "https://avatars.githubusercontent.com/u/67130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chr15m", "html_url": "https://github.com/chr15m", "followers_url": "https://api.github.com/users/chr15m/followers", "following_url": "https://api.github.com/users/chr15m/following{/other_user}", "gists_url": "https://api.github.com/users/chr15m/gists{/gist_id}", "starred_url": "https://api.github.com/users/chr15m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chr15m/subscriptions", "organizations_url": "https://api.github.com/users/chr15m/orgs", "repos_url": "https://api.github.com/users/chr15m/repos", "events_url": "https://api.github.com/users/chr15m/events{/privacy}", "received_events_url": "https://api.github.com/users/chr15m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-04-30T11:45:37Z", "updated_at": "2017-05-26T01:48:10Z", "closed_at": "2017-05-26T01:48:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would expect this:\n\n```\n(defn x []\n  (try\n    (some-call)\n    (catch [e Exception] 1)\n    (else 2)))\n```\n\nTo compile to this:\n\n```\ndef x():\n    try:\n        _hy_anon_var_1 = some_call()\n    except Exception as e:\n        _hy_anon_var_1 = 1L\n    else:\n        _hy_anon_var_1 = 2L\n    return _hy_anon_var_1\n```\n\nBut it compiles to this:\n\n```\ndef x():\n    try:\n        _hy_anon_var_1 = some_call()\n    except Exception as e:\n        _hy_anon_var_1 = 1L\n    else:\n        2L\n    return _hy_anon_var_1\n```\n\nNote that \"else\" does not produce a return value for the function. Same result for s/else/finally.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/791", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/791/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/791/events", "html_url": "https://github.com/hylang/hy/issues/791", "id": 66946236, "node_id": "MDU6SXNzdWU2Njk0NjIzNg==", "number": 791, "title": "Automatic imports can shadow the user's assignments in the REPL", "user": {"login": "nicolas-p", "id": 11431580, "node_id": "MDQ6VXNlcjExNDMxNTgw", "avatar_url": "https://avatars.githubusercontent.com/u/11431580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolas-p", "html_url": "https://github.com/nicolas-p", "followers_url": "https://api.github.com/users/nicolas-p/followers", "following_url": "https://api.github.com/users/nicolas-p/following{/other_user}", "gists_url": "https://api.github.com/users/nicolas-p/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolas-p/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolas-p/subscriptions", "organizations_url": "https://api.github.com/users/nicolas-p/orgs", "repos_url": "https://api.github.com/users/nicolas-p/repos", "events_url": "https://api.github.com/users/nicolas-p/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolas-p/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-04-07T17:34:33Z", "updated_at": "2022-11-10T20:01:20Z", "closed_at": "2021-03-16T17:13:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I found a problem when I tried to use the curried version of `map` from the Toolz package.\n\nIn the Hy REPL:\n\n``` hy\n=> (import [toolz.curried [map]]) (map add1)\n<class 'map'>\n=> (map add1)\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\nTypeError: map() must have at least two arguments.\n```\n\nAs you can see, I can use the curried function only on the same line as the import.\n\nIPython gives a more explicit error:\n\n```\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-45-c14b8be9f2cd> in <module>()\n      1 from hy.core.language import map\n----> 2 map(add1)\n\nTypeError: map() must have at least two arguments.\n```\n\nThe problem is that there is an automatic import of the original `map` function, which replaces the curried version that was previously imported. The same thing happens with `filter`.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/749", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/749/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/749/events", "html_url": "https://github.com/hylang/hy/issues/749", "id": 54114271, "node_id": "MDU6SXNzdWU1NDExNDI3MQ==", "number": 749, "title": "exec not defined on hy2", "user": {"login": "edne", "id": 5730221, "node_id": "MDQ6VXNlcjU3MzAyMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5730221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edne", "html_url": "https://github.com/edne", "followers_url": "https://api.github.com/users/edne/followers", "following_url": "https://api.github.com/users/edne/following{/other_user}", "gists_url": "https://api.github.com/users/edne/gists{/gist_id}", "starred_url": "https://api.github.com/users/edne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edne/subscriptions", "organizations_url": "https://api.github.com/users/edne/orgs", "repos_url": "https://api.github.com/users/edne/repos", "events_url": "https://api.github.com/users/edne/events{/privacy}", "received_events_url": "https://api.github.com/users/edne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-01-12T22:10:01Z", "updated_at": "2017-08-02T17:42:00Z", "closed_at": "2017-08-02T17:42:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "on hy3 works:\n\n```\n$ hy3\nhy 0.10.1 using CPython(default) 3.4.2 on Linux\n=> (exec \"a = 2\")\n=>\n```\n\non hy2:\n\n```\n$ hy2\nhy 0.10.1 using CPython(default) 2.7.8 on Linux\n=> (exec \"a = 2\")\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\nNameError: name 'exec' is not defined\n=> \n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/714", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/714/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/714/events", "html_url": "https://github.com/hylang/hy/issues/714", "id": 51633687, "node_id": "MDU6SXNzdWU1MTYzMzY4Nw==", "number": 714, "title": "Hy command line swallows uncaught IOErrors", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-12-11T01:12:55Z", "updated_at": "2018-05-25T22:55:32Z", "closed_at": "2015-02-16T23:33:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/712", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/712/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/712/events", "html_url": "https://github.com/hylang/hy/issues/712", "id": 51630484, "node_id": "MDU6SXNzdWU1MTYzMDQ4NA==", "number": 712, "title": "(reload module) doesn't reload Hy modules", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-12-11T00:29:16Z", "updated_at": "2019-07-06T18:53:20Z", "closed_at": "2019-07-06T18:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/695", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/695/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/695/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/695/events", "html_url": "https://github.com/hylang/hy/issues/695", "id": 50924305, "node_id": "MDU6SXNzdWU1MDkyNDMwNQ==", "number": 695, "title": "list-comp missing flexbility with conditions.", "user": {"login": "Foxboron", "id": 1042946, "node_id": "MDQ6VXNlcjEwNDI5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1042946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Foxboron", "html_url": "https://github.com/Foxboron", "followers_url": "https://api.github.com/users/Foxboron/followers", "following_url": "https://api.github.com/users/Foxboron/following{/other_user}", "gists_url": "https://api.github.com/users/Foxboron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Foxboron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Foxboron/subscriptions", "organizations_url": "https://api.github.com/users/Foxboron/orgs", "repos_url": "https://api.github.com/users/Foxboron/repos", "events_url": "https://api.github.com/users/Foxboron/events{/privacy}", "received_events_url": "https://api.github.com/users/Foxboron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-12-04T03:25:19Z", "updated_at": "2016-12-20T03:37:17Z", "closed_at": "2016-12-20T03:37:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Considering:\n\n```\n[(x, y) for x in range(5) if 2>x for y in range(5)]\n```\n\nIs impossible with the current syntax as conditions are appended behind like so:\n\n```\n=> (list-comp (, x y) [x (range 5) y (range 5)] (> 2 x))\nfrom hy.core.language import range\n[(x, y) for x in range(5) for y in range(5) if (2 > x)]\n[(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (1, 0), (1, 1), (1, 2), (1, 3), (1, 4)]\n=> \n```\n\nThe question is how we should account for this?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/692", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/692/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/692/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/692/events", "html_url": "https://github.com/hylang/hy/issues/692", "id": 49719169, "node_id": "MDU6SXNzdWU0OTcxOTE2OQ==", "number": 692, "title": "py2 `yield-from` does not propagate exceptions *into* the inner generators.", "user": {"login": "pyos", "id": 1849909, "node_id": "MDQ6VXNlcjE4NDk5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1849909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyos", "html_url": "https://github.com/pyos", "followers_url": "https://api.github.com/users/pyos/followers", "following_url": "https://api.github.com/users/pyos/following{/other_user}", "gists_url": "https://api.github.com/users/pyos/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyos/subscriptions", "organizations_url": "https://api.github.com/users/pyos/orgs", "repos_url": "https://api.github.com/users/pyos/repos", "events_url": "https://api.github.com/users/pyos/events{/privacy}", "received_events_url": "https://api.github.com/users/pyos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/7", "html_url": "https://github.com/hylang/hy/milestone/7", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/7/labels", "id": 897765, "node_id": "MDk6TWlsZXN0b25lODk3NzY1", "number": 7, "title": "0.10.2", "description": null, "creator": {"login": "Foxboron", "id": 1042946, "node_id": "MDQ6VXNlcjEwNDI5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1042946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Foxboron", "html_url": "https://github.com/Foxboron", "followers_url": "https://api.github.com/users/Foxboron/followers", "following_url": "https://api.github.com/users/Foxboron/following{/other_user}", "gists_url": "https://api.github.com/users/Foxboron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Foxboron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Foxboron/subscriptions", "organizations_url": "https://api.github.com/users/Foxboron/orgs", "repos_url": "https://api.github.com/users/Foxboron/repos", "events_url": "https://api.github.com/users/Foxboron/events{/privacy}", "received_events_url": "https://api.github.com/users/Foxboron/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2014-12-09T19:07:34Z", "updated_at": "2017-07-13T15:56:52Z", "due_on": null, "closed_at": "2017-05-23T19:00:43Z"}, "comments": 12, "created_at": "2014-11-21T16:42:18Z", "updated_at": "2017-07-13T15:56:52Z", "closed_at": "2017-07-13T15:56:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've found a concrete example of the difference in semantics between the `yield-from` macro and [PEP-380](https://www.python.org/dev/peps/pep-0380#formal-semantics). When using `generator.throw` in Python 2, `yield-from` does not rethrow the exception in the inner generator:\n\n``` hy\nhy 0.10.1 using CPython(default) 2.7.8 on Linux\n=> (defn f []\n...   (yield 1)\n...   (try\n...     (yield 2)\n...     (catch [e ValueError] (yield 3))))\n=> (defn g []\n...   (yield-from (f))\n...   (assert true))  ; see issue #691\n=> (setv x (g))\n=> (next x)\n1L\n=> (next x)\n2L\n=> (x.throw ValueError)\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"<input>\", line 257, in g  ; note that ValueError didn't even reach `f`\nValueError\n```\n\nIn Python 3, `ValueError` reaches `f` and is handled there as expected:\n\n``` hy\nhy 0.10.1 using CPython(default) 3.4.2 on Linux\n...\n=> (next x)\n2\n=> (x.throw ValueError)\n3\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/691", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/691/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/691/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/691/events", "html_url": "https://github.com/hylang/hy/issues/691", "id": 49715667, "node_id": "MDU6SXNzdWU0OTcxNTY2Nw==", "number": 691, "title": "py2 `yield-from` fails to compile if the last item in a function is an expression.", "user": {"login": "pyos", "id": 1849909, "node_id": "MDQ6VXNlcjE4NDk5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1849909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyos", "html_url": "https://github.com/pyos", "followers_url": "https://api.github.com/users/pyos/followers", "following_url": "https://api.github.com/users/pyos/following{/other_user}", "gists_url": "https://api.github.com/users/pyos/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyos/subscriptions", "organizations_url": "https://api.github.com/users/pyos/orgs", "repos_url": "https://api.github.com/users/pyos/repos", "events_url": "https://api.github.com/users/pyos/events{/privacy}", "received_events_url": "https://api.github.com/users/pyos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/7", "html_url": "https://github.com/hylang/hy/milestone/7", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/7/labels", "id": 897765, "node_id": "MDk6TWlsZXN0b25lODk3NzY1", "number": 7, "title": "0.10.2", "description": null, "creator": {"login": "Foxboron", "id": 1042946, "node_id": "MDQ6VXNlcjEwNDI5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1042946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Foxboron", "html_url": "https://github.com/Foxboron", "followers_url": "https://api.github.com/users/Foxboron/followers", "following_url": "https://api.github.com/users/Foxboron/following{/other_user}", "gists_url": "https://api.github.com/users/Foxboron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Foxboron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Foxboron/subscriptions", "organizations_url": "https://api.github.com/users/Foxboron/orgs", "repos_url": "https://api.github.com/users/Foxboron/repos", "events_url": "https://api.github.com/users/Foxboron/events{/privacy}", "received_events_url": "https://api.github.com/users/Foxboron/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2014-12-09T19:07:34Z", "updated_at": "2017-07-13T15:56:52Z", "due_on": null, "closed_at": "2017-05-23T19:00:43Z"}, "comments": 3, "created_at": "2014-11-21T16:16:07Z", "updated_at": "2017-07-13T15:56:52Z", "closed_at": "2017-07-13T15:56:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For example, this code:\n\n``` hy\n(defn g []\n    (yield-from (f)))\n```\n\ngives a\n\n```\nSyntaxError: 'return' with argument inside generator (<input>, line 1)\n```\n\nSimilarly, any function that has a return value (does not end with a statement that is not an expression?) does not work either:\n\n``` hy\n=> (defn g []\n...   (raise a)\n...   (if b (c \"a\" \"b\") d)\n...   (yield-from e)\n...   (h 1 2 3))\nTraceback (most recent call last):\n...\nSyntaxError: 'return' with argument inside generator (<input>, line 1)\n```\n\nAn example of a function that does compile:\n\n``` hy\n=> (defn g []\n...   (yield-from (f))\n...   (assert true))  ; note that assert does not have a return value\n=> (g)\n<generator object g at 0x7ff9dbfecc30>\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/691/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/675", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/675/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/675/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/675/events", "html_url": "https://github.com/hylang/hy/issues/675", "id": 45830517, "node_id": "MDU6SXNzdWU0NTgzMDUxNw==", "number": 675, "title": "Travis failure", "user": {"login": "theanalyst", "id": 1433152, "node_id": "MDQ6VXNlcjE0MzMxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1433152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theanalyst", "html_url": "https://github.com/theanalyst", "followers_url": "https://api.github.com/users/theanalyst/followers", "following_url": "https://api.github.com/users/theanalyst/following{/other_user}", "gists_url": "https://api.github.com/users/theanalyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/theanalyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theanalyst/subscriptions", "organizations_url": "https://api.github.com/users/theanalyst/orgs", "repos_url": "https://api.github.com/users/theanalyst/repos", "events_url": "https://api.github.com/users/theanalyst/events{/privacy}", "received_events_url": "https://api.github.com/users/theanalyst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2014-10-15T05:18:51Z", "updated_at": "2014-12-19T02:03:32Z", "closed_at": "2014-12-19T02:03:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Need to investigate travis failure. Just created this issue so that we don't forget\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/647", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/647/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/647/events", "html_url": "https://github.com/hylang/hy/issues/647", "id": 41870007, "node_id": "MDU6SXNzdWU0MTg3MDAwNw==", "number": 647, "title": "apply doesn't use shadowed operators", "user": {"login": "ccfontes", "id": 2167559, "node_id": "MDQ6VXNlcjIxNjc1NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2167559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccfontes", "html_url": "https://github.com/ccfontes", "followers_url": "https://api.github.com/users/ccfontes/followers", "following_url": "https://api.github.com/users/ccfontes/following{/other_user}", "gists_url": "https://api.github.com/users/ccfontes/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccfontes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccfontes/subscriptions", "organizations_url": "https://api.github.com/users/ccfontes/orgs", "repos_url": "https://api.github.com/users/ccfontes/repos", "events_url": "https://api.github.com/users/ccfontes/events{/privacy}", "received_events_url": "https://api.github.com/users/ccfontes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-09-03T21:26:39Z", "updated_at": "2017-07-20T14:49:18Z", "closed_at": "2017-07-20T14:49:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Now this is possible:\n\n``` clj\n(let [[op +]] (apply op [\"a\" \"b\" \"c\"]))\n```\n\nand also this:\n\n``` clj\n(reduce + [\"a\" \"b\" \"c\"])\n```\n\nHowever this is not:\n\n``` clj\n(apply + [\"a\" \"b\" \"c\"])\n```\n\nwhich yields `HyTypeError: compiling the application of`+' didn't return a function call, but `BinOp'`\n\n@paultag <b>says</b>:\n\nSince it defers back to compile expression, it'll defer to @builds(\"+\"), which means we get a BinOp back. Which is *hilarious&. At the top there should be a self.compile call since it'll actually treat the first argument as the argument in the call position when it needs to be an  ast.Call.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/639", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/639/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/639/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/639/events", "html_url": "https://github.com/hylang/hy/issues/639", "id": 40901973, "node_id": "MDU6SXNzdWU0MDkwMTk3Mw==", "number": 639, "title": "Odd behaviour of '+'", "user": {"login": "microamp", "id": 1378791, "node_id": "MDQ6VXNlcjEzNzg3OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1378791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microamp", "html_url": "https://github.com/microamp", "followers_url": "https://api.github.com/users/microamp/followers", "following_url": "https://api.github.com/users/microamp/following{/other_user}", "gists_url": "https://api.github.com/users/microamp/gists{/gist_id}", "starred_url": "https://api.github.com/users/microamp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microamp/subscriptions", "organizations_url": "https://api.github.com/users/microamp/orgs", "repos_url": "https://api.github.com/users/microamp/repos", "events_url": "https://api.github.com/users/microamp/events{/privacy}", "received_events_url": "https://api.github.com/users/microamp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-08-22T11:56:32Z", "updated_at": "2014-08-31T20:52:47Z", "closed_at": "2014-08-31T20:52:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The `+` operator in Python is polymorphic. It behaves differently depending on the type of the arguments.\n\n``` hy\n=> (+ 1 2 3)  ; addition\n6\n=> (+ \"a\" \"b\" \"c\")  ; string concatenation\n'abc'\n=> (+ [\"a\"] [\"b\"] [\"c\"])  ; list concatenation\n['a', 'b', 'c']\n```\n\nConsider\n\n``` hy\n=> (reduce + [1 2 3])\n6\n```\n\nwhich works as expected. However,\n\n``` hy\n=> (reduce + [\"a\" \"b\" \"c\"])\n```\n\n``` python\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/home/microamp/devel/projs/hy/hy/core/shadow.hy\", line 31, in +\n    (sum args)))  ; shortcut here.\nTypeError: unsupported operand type(s) for +: 'int' and 'str'\n```\n\nraises the `TypeError`. Similarly,\n\n``` hy\n=> (reduce + [[\"a\"] [\"b\"] [\"c\"]])\n```\n\n``` python\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/home/microamp/devel/projs/hy/hy/core/shadow.hy\", line 31, in +\n    (sum args)))  ; shortcut here.\nTypeError: unsupported operand type(s) for +: 'int' and 'list'\n```\n\nAny idea why it's doing it this way?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/639/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/639/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/634", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/634/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/634/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/634/events", "html_url": "https://github.com/hylang/hy/issues/634", "id": 40418317, "node_id": "MDU6SXNzdWU0MDQxODMxNw==", "number": 634, "title": "Bad errors when list-comp has reversed arguments", "user": {"login": "refi64", "id": 1690697, "node_id": "MDQ6VXNlcjE2OTA2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1690697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/refi64", "html_url": "https://github.com/refi64", "followers_url": "https://api.github.com/users/refi64/followers", "following_url": "https://api.github.com/users/refi64/following{/other_user}", "gists_url": "https://api.github.com/users/refi64/gists{/gist_id}", "starred_url": "https://api.github.com/users/refi64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/refi64/subscriptions", "organizations_url": "https://api.github.com/users/refi64/orgs", "repos_url": "https://api.github.com/users/refi64/repos", "events_url": "https://api.github.com/users/refi64/events{/privacy}", "received_events_url": "https://api.github.com/users/refi64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-08-16T19:18:51Z", "updated_at": "2015-08-10T13:08:26Z", "closed_at": "2015-08-10T13:08:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "list-comp should check its arguments for validity, since this happens when the arguments get reversed on Python 2:\n\n```\nryan@DevPC-LX:~/stuff/hy$ hy\nhy 0.10.0 using CPython(default) 2.7.6 on Linux\n=> (list-comp [x [1 2 3]] x)\nSegmentation fault (core dumped)\nryan@DevPC-LX:~/stuff/hy$ \n```\n\nand Python 3:\n\n```\nryan@DevPC-LX:~/stuff/hy$ ~/stuff/anaconda/bin/hy\nhy 0.10.0 using CPython(default) 3.3.5 on Linux\n=> (list-comp [x [1 2 3]] x)\nTraceback (most recent call last):\n  File \"/home/ryan/stuff/anaconda/lib/python3.3/site-packages/hy-0.10.0-py3.3.egg/hy/importer.py\", line 42, in ast_compile\n    return compile(ast, filename, mode, flags)\nValueError: comprehension with no generators\n=> \n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/620", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/620/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/620/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/620/events", "html_url": "https://github.com/hylang/hy/issues/620", "id": 37509479, "node_id": "MDU6SXNzdWUzNzUwOTQ3OQ==", "number": 620, "title": "Macros in package/__init__.hy don't work in python3", "user": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/3", "html_url": "https://github.com/hylang/hy/milestone/3", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/3/labels", "id": 236815, "node_id": "MDk6TWlsZXN0b25lMjM2ODE1", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2012-12-31T23:47:43Z", "updated_at": "2021-02-06T20:04:05Z", "due_on": null, "closed_at": "2021-02-06T20:04:05Z"}, "comments": 3, "created_at": "2014-07-09T21:16:42Z", "updated_at": "2014-12-07T21:45:50Z", "closed_at": "2014-12-07T21:45:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Lets say I have a module called `madmacro`, which has a single macro in its `__init__.hy`, like this:\n\n``` hy\n(defmacro lets-throw-an-error [x]\n  ~x)\n```\n\nWith python2, if I try to `(require madmacro)`, I get an error message:\n\n```\nhy 0.10.0 using CPython(default) 2.7.7 on Linux\n=> (require madmacro)\n  File \"/tmp/t/madmacro/__init__.hy\", line 2, column 3\n\n    ~x)\n    ^-^\n HyTypeError: `unquote' can't be used at the top-level\n```\n\nOn the other hand, with python3:\n\n```\nhy 0.10.0\n=> (require madmacro)\n=> \n```\n\nAs you can see, the require \"succeeds\", while it should throw an error. But even if the macro is corrected, trying to use it, will fail. As soon as the macro is moved out of `__init__.hy`, into a separate file, requiring that will behave correctly under both python 2 and python3.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/620/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/619", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/619/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/619/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/619/events", "html_url": "https://github.com/hylang/hy/issues/619", "id": 37446354, "node_id": "MDU6SXNzdWUzNzQ0NjM1NA==", "number": 619, "title": "yield within let within loop does not work", "user": {"login": "asmundg", "id": 692360, "node_id": "MDQ6VXNlcjY5MjM2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/692360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asmundg", "html_url": "https://github.com/asmundg", "followers_url": "https://api.github.com/users/asmundg/followers", "following_url": "https://api.github.com/users/asmundg/following{/other_user}", "gists_url": "https://api.github.com/users/asmundg/gists{/gist_id}", "starred_url": "https://api.github.com/users/asmundg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asmundg/subscriptions", "organizations_url": "https://api.github.com/users/asmundg/orgs", "repos_url": "https://api.github.com/users/asmundg/repos", "events_url": "https://api.github.com/users/asmundg/events{/privacy}", "received_events_url": "https://api.github.com/users/asmundg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-07-09T09:11:14Z", "updated_at": "2017-02-13T17:20:55Z", "closed_at": "2017-02-13T17:20:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not completely sure if this is a bug or expected behaviour. At the very least, it's a confusing gotcha.\n\n```\n(defn test []\n  (while true\n    (let [[foo \"bar\"]]\n      (yield foo))))\n```\n\nproduces the following python code:\n\n```\ndef test():\n    while True:\n\n        def _hy_anon_fn_1():\n            foo = u'bar'\n            yield foo\n        _hy_anon_fn_1()\n```\n\nwhich results in an infinite loop of creating the generator object, instead of returning it from test.\n\nExchanging positions of the let and while provides the expected result:\n\n```\n(defn test []\n  (let [[foo \"bar\"]]\n    (while true\n      (yield foo))))\n```\n\n```\ndef test():\n\n    def _hy_anon_fn_1():\n        foo = u'bar'\n        while True:\n            yield foo\n    return _hy_anon_fn_1()\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/619/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/616", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/616/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/616/events", "html_url": "https://github.com/hylang/hy/pull/616", "id": 36255531, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc0NTMzNDM=", "number": 616, "title": "Fix hy2py output on Windows/Python 3", "user": {"login": "rwtolbert", "id": 283685, "node_id": "MDQ6VXNlcjI4MzY4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/283685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rwtolbert", "html_url": "https://github.com/rwtolbert", "followers_url": "https://api.github.com/users/rwtolbert/followers", "following_url": "https://api.github.com/users/rwtolbert/following{/other_user}", "gists_url": "https://api.github.com/users/rwtolbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/rwtolbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rwtolbert/subscriptions", "organizations_url": "https://api.github.com/users/rwtolbert/orgs", "repos_url": "https://api.github.com/users/rwtolbert/repos", "events_url": "https://api.github.com/users/rwtolbert/events{/privacy}", "received_events_url": "https://api.github.com/users/rwtolbert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-06-23T00:14:25Z", "updated_at": "2014-06-24T20:10:19Z", "closed_at": "2014-06-24T20:10:19Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/hylang/hy/pulls/616", "html_url": "https://github.com/hylang/hy/pull/616", "diff_url": "https://github.com/hylang/hy/pull/616.diff", "patch_url": "https://github.com/hylang/hy/pull/616.patch", "merged_at": "2014-06-24T20:10:19Z"}, "body": "If there are Unicode symbols in the hy2py output (as in\ntests/native_test/language.hy) and the user is on Windows, and\nthe user is using Python3 and the user doesn't have an appropriate\ncodepage in the terminal for Unicode, then hy2py will fail at\nencoding the output.\n\nThis fix makes sure that if encoding fails, the bytes output is shown\ninstead of throwing an exception and failing completely.  This also\nallows the hy2py tests to pass on Windows.\n\nIf the user does activate an appropriate codepage, for example,\n\nchcp 65001\n\nthen the Unicode output will show correctly.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/616/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/hylang/hy/issues/613", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/613/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/613/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/613/events", "html_url": "https://github.com/hylang/hy/issues/613", "id": 34991906, "node_id": "MDU6SXNzdWUzNDk5MTkwNg==", "number": 613, "title": "Unquote in recursive macro call raises HyCompileError", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2014-06-04T19:06:16Z", "updated_at": "2015-08-10T14:08:34Z", "closed_at": "2015-08-10T14:08:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With the current HEAD (and also hy 0.10.0): \n\n`hy -c '(defmacro foo (x) `(foo ~0)) (foo 0)'`\n\n```\nhy.errors.HyCompileError: Internal Compiler Bug \ud83d\ude31\n\u2937 AttributeError: 'long' object has no attribute 'replace'\nCompilation traceback:\nFile \"hy/compiler.py\", line 398, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"hy/compiler.py\", line 390, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"hy/compiler.py\", line 1690, in compile_expression\n    expression = macroexpand(expression, self.module_name)\n  File \"hy/macros.py\", line 173, in macroexpand\n    tree = macroexpand_1(tree, module_name)\n  File \"hy/macros.py\", line 205, in macroexpand_1\n    obj.replace(tree)\n  File \"hy/models/list.py\", line 31, in replace\n    x.replace(other)\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/613/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/608", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/608/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/608/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/608/events", "html_url": "https://github.com/hylang/hy/issues/608", "id": 34534391, "node_id": "MDU6SXNzdWUzNDUzNDM5MQ==", "number": 608, "title": "Hy on Python3.4: setting None to values is possible", "user": {"login": "theanalyst", "id": 1433152, "node_id": "MDQ6VXNlcjE0MzMxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1433152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theanalyst", "html_url": "https://github.com/theanalyst", "followers_url": "https://api.github.com/users/theanalyst/followers", "following_url": "https://api.github.com/users/theanalyst/following{/other_user}", "gists_url": "https://api.github.com/users/theanalyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/theanalyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theanalyst/subscriptions", "organizations_url": "https://api.github.com/users/theanalyst/orgs", "repos_url": "https://api.github.com/users/theanalyst/repos", "events_url": "https://api.github.com/users/theanalyst/events{/privacy}", "received_events_url": "https://api.github.com/users/theanalyst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-05-29T07:34:01Z", "updated_at": "2014-07-05T04:48:17Z", "closed_at": "2014-07-05T04:48:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following code seems to work in Hy with Python 3.4\n\n``` clj\n=> (nil? None)\nTrue\n=> (setv None 1)\n=> (nil? None)\nFalse\n```\n\nBTW `(setv None 1)` seems to work on other pythons as well though the last statement ie, (nil? None) still evaluates to true as expected.\n\nProblem seems to arise because Python 3.4 compiles None (and True, False) as an `ast.NameConstant` instead of an `ast.Name`  \n\nEDIT: re-worded the title of issue\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/591", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/591/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/591/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/591/events", "html_url": "https://github.com/hylang/hy/issues/591", "id": 32799822, "node_id": "MDU6SXNzdWUzMjc5OTgyMg==", "number": 591, "title": "Malformed list-comp segfaults", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-05-05T10:33:12Z", "updated_at": "2015-08-10T13:08:44Z", "closed_at": "2015-08-10T13:08:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n=> (list-comp None [])\nzsh: segmentation fault  hy\n```\n\nLinux x86_64; Python 2.7.3; GCC 4.7.2; Hy 0.10.0\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/589", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/589/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/589/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/589/events", "html_url": "https://github.com/hylang/hy/issues/589", "id": 32770414, "node_id": "MDU6SXNzdWUzMjc3MDQxNA==", "number": 589, "title": "Can't perform a relative import from within __init__.hy", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-05-04T15:26:49Z", "updated_at": "2017-05-29T23:22:36Z", "closed_at": "2017-05-29T23:22:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n% echo '(import x)' > pkg/__init__.hy\n% echo '(print \"hello\")' > pkg/x.hy              \n% python\n>>> import hy, pkg\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/kamil/.local/lib/python2.7/site-packages/hy-0.10.0-py2.7.egg/hy/importer.py\", line 176, in load_module\n    self.path)\n  File \"/home/kamil/.local/lib/python2.7/site-packages/hy-0.10.0-py2.7.egg/hy/importer.py\", line 74, in import_file_to_module\n    eval(ast_compile(_ast, fpath, \"exec\"), mod.__dict__)\n  File \"/home/kamil/pkg/__init__.hy\", line 1, in <module>\n    (import x)\nImportError: No module named x\n```\n\nSame when trying to `(import pkg.x)` within `__init__.hy`\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/589/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/589/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/588", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/588/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/588/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/588/events", "html_url": "https://github.com/hylang/hy/issues/588", "id": 32764364, "node_id": "MDU6SXNzdWUzMjc2NDM2NA==", "number": 588, "title": "list-comp only iterates over the last expression when it is passed a do", "user": {"login": "asmundg", "id": 692360, "node_id": "MDQ6VXNlcjY5MjM2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/692360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asmundg", "html_url": "https://github.com/asmundg", "followers_url": "https://api.github.com/users/asmundg/followers", "following_url": "https://api.github.com/users/asmundg/following{/other_user}", "gists_url": "https://api.github.com/users/asmundg/gists{/gist_id}", "starred_url": "https://api.github.com/users/asmundg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asmundg/subscriptions", "organizations_url": "https://api.github.com/users/asmundg/orgs", "repos_url": "https://api.github.com/users/asmundg/repos", "events_url": "https://api.github.com/users/asmundg/events{/privacy}", "received_events_url": "https://api.github.com/users/asmundg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-05-04T08:42:50Z", "updated_at": "2018-06-16T21:16:43Z", "closed_at": "2018-06-16T21:16:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Only the last expression in do is interpreted in context of the list-comp:\n\n```\n=> (list-comp (do (print n) (print n)) [n [1 2]])\nprint(n)\n[print(n) for n in [1L, 2L]]\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\nNameError: name 'n' is not defined\n```\n\nWorkaround (and the expected result of the above function):\n\n```\n=> (list-comp ((fn [a] (do (print a) (print a))) n) [n [1 2]])\ndef _hy_anon_fn_1(a):\n    print(a)\n    return print(a)\n[_hy_anon_fn_1(n) for n in [1L, 2L]]\n1\n1\n2\n2\n[None, None]\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/588/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/583", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/583/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/583/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/583/events", "html_url": "https://github.com/hylang/hy/issues/583", "id": 32544392, "node_id": "MDU6SXNzdWUzMjU0NDM5Mg==", "number": 583, "title": "Hy Doesn't Use Absolute Imports (breaks PEP 328)", "user": {"login": "xcthulhu", "id": 168675, "node_id": "MDQ6VXNlcjE2ODY3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/168675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xcthulhu", "html_url": "https://github.com/xcthulhu", "followers_url": "https://api.github.com/users/xcthulhu/followers", "following_url": "https://api.github.com/users/xcthulhu/following{/other_user}", "gists_url": "https://api.github.com/users/xcthulhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/xcthulhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xcthulhu/subscriptions", "organizations_url": "https://api.github.com/users/xcthulhu/orgs", "repos_url": "https://api.github.com/users/xcthulhu/repos", "events_url": "https://api.github.com/users/xcthulhu/events{/privacy}", "received_events_url": "https://api.github.com/users/xcthulhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-04-30T15:22:41Z", "updated_at": "2017-04-27T23:44:21Z", "closed_at": "2017-04-27T23:44:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following tests fail if you put them in `tests/native_tests/language.hy`, because Hy will try to import the module `tests/native_tests/math.hy` rather than the library module\n\n``` hy\n  (import math)\n  (let [[cos math.cos]\n        [foo-cos (fn [x] (cos x))]]\n    (assert (= (cos math.pi) -1.0))\n    (assert (= (foo-cos (- math.pi)) -1.0))\n    (let [[cos (fn [_] \"cos has been locally rebound\")]]\n      (assert (= (cos cos) \"cos has been locally rebound\"))\n      (assert (= (-> math.pi (/ 3) foo-cos (round 2)) 0.5)))\n    (setv cos (fn [_] \"cos has been rebound by setv\"))\n    (assert (= (foo-cos foo-cos) \"cos has been rebound by setv\")))\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/572", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/572/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/572/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/572/events", "html_url": "https://github.com/hylang/hy/issues/572", "id": 31928024, "node_id": "MDU6SXNzdWUzMTkyODAyNA==", "number": 572, "title": "`(genexpr [x [1 2 3]] x)` throws a segfault on Hy 0.10.0 with Python 2.7.4", "user": {"login": "xcthulhu", "id": 168675, "node_id": "MDQ6VXNlcjE2ODY3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/168675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xcthulhu", "html_url": "https://github.com/xcthulhu", "followers_url": "https://api.github.com/users/xcthulhu/followers", "following_url": "https://api.github.com/users/xcthulhu/following{/other_user}", "gists_url": "https://api.github.com/users/xcthulhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/xcthulhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xcthulhu/subscriptions", "organizations_url": "https://api.github.com/users/xcthulhu/orgs", "repos_url": "https://api.github.com/users/xcthulhu/repos", "events_url": "https://api.github.com/users/xcthulhu/events{/privacy}", "received_events_url": "https://api.github.com/users/xcthulhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-04-21T21:48:18Z", "updated_at": "2015-08-12T05:06:12Z", "closed_at": "2015-08-12T05:06:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Segfaults on OS X 10.9.2 and Ubuntu 13.04 (GNU/Linux 3.8.0-35-generic x86_64)\n\nI need to recompile python with gdb support, but here's the stacktrace I was able to glean (sorry I couldn't be more help):\n\n```\n#0  0x0000000000454ec3 in ?? ()\n#1  0x00000000004c031f in ?? ()\n#2  0x0000000000472392 in ?? ()\n#3  0x00000000004e7ab9 in PySymtable_Build ()\n#4  0x00000000004e7bb1 in PyAST_Compile ()\n#5  0x00000000004f6318 in ?? ()\n#6  0x000000000047b96a in PyEval_EvalFrameEx ()\n#7  0x000000000047c11f in PyEval_EvalFrameEx ()\n#8  0x00000000004e048a in PyEval_EvalCodeEx ()\n#9  0x000000000047bddd in PyEval_EvalFrameEx ()\n#10 0x000000000047c11f in PyEval_EvalFrameEx ()\n#11 0x00000000004e048a in PyEval_EvalCodeEx ()\n#12 0x000000000047bddd in PyEval_EvalFrameEx ()\n#13 0x00000000004e048a in PyEval_EvalCodeEx ()\n#14 0x000000000047bddd in PyEval_EvalFrameEx ()\n#15 0x000000000047c11f in PyEval_EvalFrameEx ()\n#16 0x000000000047c11f in PyEval_EvalFrameEx ()\n#17 0x00000000004e048a in PyEval_EvalCodeEx ()\n#18 0x000000000053ff12 in PyEval_EvalCode ()\n#19 0x000000000054038b in ?? ()\n#20 0x0000000000465756 in PyRun_InteractiveOneFlags ()\n#21 0x0000000000465849 in PyRun_InteractiveLoopFlags ()\n#22 0x0000000000465ed3 in PyRun_AnyFileExFlags ()\n#23 0x0000000000466b99 in Py_Main ()\n#24 0x00007ffff6ef2ea5 in __libc_start_main ()\n   from /lib/x86_64-linux-gnu/libc.so.6\n#25 0x00000000004e1115 in _start ()\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/572/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/568", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/568/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/568/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/568/events", "html_url": "https://github.com/hylang/hy/issues/568", "id": 31871883, "node_id": "MDU6SXNzdWUzMTg3MTg4Mw==", "number": 568, "title": "cons doesn't always promote lists to HyObjects", "user": {"login": "hooblei", "id": 84681, "node_id": "MDQ6VXNlcjg0Njgx", "avatar_url": "https://avatars.githubusercontent.com/u/84681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hooblei", "html_url": "https://github.com/hooblei", "followers_url": "https://api.github.com/users/hooblei/followers", "following_url": "https://api.github.com/users/hooblei/following{/other_user}", "gists_url": "https://api.github.com/users/hooblei/gists{/gist_id}", "starred_url": "https://api.github.com/users/hooblei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hooblei/subscriptions", "organizations_url": "https://api.github.com/users/hooblei/orgs", "repos_url": "https://api.github.com/users/hooblei/repos", "events_url": "https://api.github.com/users/hooblei/events{/privacy}", "received_events_url": "https://api.github.com/users/hooblei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2014-04-20T20:28:36Z", "updated_at": "2018-04-12T23:59:16Z", "closed_at": "2018-04-12T23:59:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n=> (setv c (cons {\"a\" 1} []))\nfrom hy.core.language import cons\nc = cons({u'a': 1L, }, [])\n=> (type (car c))\ntype(c[0L])\n<class 'hy.models.dict.HyDict'>\n=> (get (car c) \"a\")\nc[0L][u'a']\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/home/maresp/workbench/cbf/venv/lib/python2.7/site-packages/hy/models/list.py\", line 43, in __getitem__\n    ret = super(HyList, self).__getitem__(item)\nTypeError: list indices must be integers, not unicode\n=>\n```\n\nThe cons is because I'm not sure how to get/construct a HyDict otherwise\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/552", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/552/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/552/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/552/events", "html_url": "https://github.com/hylang/hy/issues/552", "id": 31385577, "node_id": "MDU6SXNzdWUzMTM4NTU3Nw==", "number": 552, "title": "HyDicts not turned into dicts inside a quote", "user": {"login": "dbohdan", "id": 3179832, "node_id": "MDQ6VXNlcjMxNzk4MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/3179832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbohdan", "html_url": "https://github.com/dbohdan", "followers_url": "https://api.github.com/users/dbohdan/followers", "following_url": "https://api.github.com/users/dbohdan/following{/other_user}", "gists_url": "https://api.github.com/users/dbohdan/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbohdan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbohdan/subscriptions", "organizations_url": "https://api.github.com/users/dbohdan/orgs", "repos_url": "https://api.github.com/users/dbohdan/repos", "events_url": "https://api.github.com/users/dbohdan/events{/privacy}", "received_events_url": "https://api.github.com/users/dbohdan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-04-12T15:49:05Z", "updated_at": "2016-12-13T17:36:49Z", "closed_at": "2016-12-13T17:36:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "When you have a structure like\n\n```\n'(html\n  (head)\n  (body\n    (p {\"align\" \"right\"} \"Hello, \" (b \"'90s HTML!\"))))\n```\n\nthe type of the `{\"align\" \"right\"}` part is `HyDict`; it doesn't get turned into a `dict`. Since a `HyDict` is internally represented as a `list` this means that unless you manually do something like `(dict (.items x))` on your `HyDict` you can't retrieve its items with `(get x y)`.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/545", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/545/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/545/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/545/events", "html_url": "https://github.com/hylang/hy/issues/545", "id": 30450103, "node_id": "MDU6SXNzdWUzMDQ1MDEwMw==", "number": 545, "title": "tox is fucky on 2.6", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-03-29T18:58:48Z", "updated_at": "2015-02-06T07:18:26Z", "closed_at": "2015-02-06T07:18:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "looks like argparse is coming back to fuck our day up more:\n\n```\nUnpacking ./.tox/dist/hy-0.9.12.zip\n  Running setup.py (path:/tmp/pip-UiMb4n-build/setup.py) egg_info for package from file:///home/tag/dev/local/hy/.tox/dist/hy-0.9.12.zip\nRequirement already satisfied (use --upgrade to upgrade): rply>=0.7.0 in ./.tox/py26/lib/python2.6/site-packages (from hy==0.9.12)\nRequirement already satisfied (use --upgrade to upgrade): astor>=0.3 in ./.tox/py26/lib/python2.6/site-packages (from hy==0.9.12)\nDownloading/unpacking argparse>=1.2.1 (from hy==0.9.12)\n  Could not find a version that satisfies the requirement argparse>=1.2.1 (from hy==0.9.12) (from versions: 0.1.0, 0.2.0, 0.3.0, 0.4.0, 0.5.0, 0.6.0, 0.7.0, 0.8.0, 0.9.0, 0.9.1, 1.0.1, 1.0, 1.1)\n  Some externally hosted files were ignored (use --allow-external to allow).\nCleaning up...\nNo distributions matching the version for argparse>=1.2.1 (from hy==0.9.12)\nStoring debug log for failure in /home/tag/.pip/pip.log\n```\n\nSomeone fixing this would be just tops\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/543", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/543/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/543/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/543/events", "html_url": "https://github.com/hylang/hy/issues/543", "id": 30272431, "node_id": "MDU6SXNzdWUzMDI3MjQzMQ==", "number": 543, "title": "scope of for loop", "user": {"login": "andrewchambers", "id": 962885, "node_id": "MDQ6VXNlcjk2Mjg4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewchambers", "html_url": "https://github.com/andrewchambers", "followers_url": "https://api.github.com/users/andrewchambers/followers", "following_url": "https://api.github.com/users/andrewchambers/following{/other_user}", "gists_url": "https://api.github.com/users/andrewchambers/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewchambers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewchambers/subscriptions", "organizations_url": "https://api.github.com/users/andrewchambers/orgs", "repos_url": "https://api.github.com/users/andrewchambers/repos", "events_url": "https://api.github.com/users/andrewchambers/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewchambers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-03-27T04:07:39Z", "updated_at": "2016-12-20T00:59:05Z", "closed_at": "2016-12-20T00:41:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "The code here prints the values 9 then 5.  This is following pythons for binding,\nimo its more appropriate to get rid of the local binding to x after the loop and have it print 5 5. Opinions?\n\n```\n(def x 5)\n(defn foobar []\n  (for [x (range 10)] \"foobar\")\n  (print x))\n(foobar)\n(print x)\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/542", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/542/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/542/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/542/events", "html_url": "https://github.com/hylang/hy/issues/542", "id": 29869938, "node_id": "MDU6SXNzdWUyOTg2OTkzOA==", "number": 542, "title": "Confusing HyMacroExpansionError when unquoting is followed by attribute", "user": {"login": "ivan", "id": 4458, "node_id": "MDQ6VXNlcjQ0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivan", "html_url": "https://github.com/ivan", "followers_url": "https://api.github.com/users/ivan/followers", "following_url": "https://api.github.com/users/ivan/following{/other_user}", "gists_url": "https://api.github.com/users/ivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivan/subscriptions", "organizations_url": "https://api.github.com/users/ivan/orgs", "repos_url": "https://api.github.com/users/ivan/repos", "events_url": "https://api.github.com/users/ivan/events{/privacy}", "received_events_url": "https://api.github.com/users/ivan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-03-21T00:14:35Z", "updated_at": "2015-08-10T12:55:02Z", "closed_at": "2015-08-10T12:55:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Expanding this (incorrect?) macro results in a rather confusing error:\n\n```\n=> (defmacro m [] (with-gensyms [sys] `(do (import [sys :as ~sys]) (print ~sys.stdout))))\n=> (m)\n  File \"<input>\", line 1, column 1\n\n  (m)\n  ^-^\nHyMacroExpansionError: `m' object has no attribute 'stdout'\n```\n\n(Why is it complaining about the lack of the attribute on the macro itself?)\n\nThis works as expected:\n\n```\n=> (defmacro m [] (with-gensyms [sys] `(do (import [sys :as ~sys]) (print (. ~sys stdout)))))\n=> (m)\n<_io.TextIOWrapper name='<stdout>' mode='w' encoding='UTF-8'>\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/542/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/536", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/536/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/536/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/536/events", "html_url": "https://github.com/hylang/hy/issues/536", "id": 29624900, "node_id": "MDU6SXNzdWUyOTYyNDkwMA==", "number": 536, "title": "Exclamation mark ! is not mangled", "user": {"login": "ivan", "id": 4458, "node_id": "MDQ6VXNlcjQ0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivan", "html_url": "https://github.com/ivan", "followers_url": "https://api.github.com/users/ivan/followers", "following_url": "https://api.github.com/users/ivan/following{/other_user}", "gists_url": "https://api.github.com/users/ivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivan/subscriptions", "organizations_url": "https://api.github.com/users/ivan/orgs", "repos_url": "https://api.github.com/users/ivan/repos", "events_url": "https://api.github.com/users/ivan/events{/privacy}", "received_events_url": "https://api.github.com/users/ivan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/8", "html_url": "https://github.com/hylang/hy/milestone/8", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/8/labels", "id": 1224085, "node_id": "MDk6TWlsZXN0b25lMTIyNDA4NQ==", "number": 8, "title": "Grand Language Cleanup", "description": "There are a couple of workarounds in the language that have bugs and issues that are hard (or even impossible) to solve, because of being tied to Python semantics. Instead of trying to be something the language isn't, these should be cleaned up, and replaced with something more pythonic - and thus less buggy from a pythonist PoV. To ease migration, a compatibility shim may be provided.\r\n\r\nLets track these here!", "creator": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 48, "state": "closed", "created_at": "2015-07-24T13:55:39Z", "updated_at": "2022-11-07T18:32:22Z", "due_on": null, "closed_at": "2021-02-06T20:03:12Z"}, "comments": 3, "created_at": "2014-03-18T07:33:06Z", "updated_at": "2015-08-10T14:35:42Z", "closed_at": "2015-08-10T14:35:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I noticed that https://github.com/hylang/hyway/blob/master/conway.hy uses \"!\" in `set!` and `get!`, but Hy doesn't mangle \"!\" into something else.  The variable is added to the module as-is.  That means it'll be hard to reach it from normal Python code.  Also, hy2py on Hy code with `set!` returns invalid syntax: `def set!(`.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/536/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/533", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/533/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/533/events", "html_url": "https://github.com/hylang/hy/issues/533", "id": 29614859, "node_id": "MDU6SXNzdWUyOTYxNDg1OQ==", "number": 533, "title": "REPL doesn't print value of catch/do expressions; prints extraneous objects", "user": {"login": "ivan", "id": 4458, "node_id": "MDQ6VXNlcjQ0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivan", "html_url": "https://github.com/ivan", "followers_url": "https://api.github.com/users/ivan/followers", "following_url": "https://api.github.com/users/ivan/following{/other_user}", "gists_url": "https://api.github.com/users/ivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivan/subscriptions", "organizations_url": "https://api.github.com/users/ivan/orgs", "repos_url": "https://api.github.com/users/ivan/repos", "events_url": "https://api.github.com/users/ivan/events{/privacy}", "received_events_url": "https://api.github.com/users/ivan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-03-18T01:58:11Z", "updated_at": "2017-04-01T01:16:39Z", "closed_at": "2017-04-01T01:16:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The version with `def` appears to work fine, but the others don't show the actual return value.\n\n```\n=> (def x (try (/ 1 0) (catch [ZeroDivisionError] 4)))      \n=> x\n4\n=> (try (/ 1 0) (catch [ZeroDivisionError] 4))\n=> (try (/ 1 0) (catch [ZeroDivisionError] 4 5))\n4\n=> (try (/ 1 0) (catch [ZeroDivisionError] 4 5 6))\n4\n5\n```\n\nAnd on another note, why are the other (not last) values being printed?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/495", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/495/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/495/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/495/events", "html_url": "https://github.com/hylang/hy/issues/495", "id": 26937350, "node_id": "MDU6SXNzdWUyNjkzNzM1MA==", "number": 495, "title": "Find a way to ruin our glorious unicode future with regular bytes / ascii for ${THINGS}", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-02-05T04:34:42Z", "updated_at": "2017-02-19T09:11:30Z", "closed_at": "2017-02-19T07:04:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "FSVO `${THINGS}` such as setuptools, which requires `package_data` to use regular ascii strings as package names. Annoying.\n\nThanks to @oubiwann for the bug\n\nit'd be good to get something like `b\"foo\"` working (since we already have `u\"foo\"` and `r\"foo\"`)\n\nDamnit, setuptools.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/490", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/490/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/490/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/490/events", "html_url": "https://github.com/hylang/hy/issues/490", "id": 26740854, "node_id": "MDU6SXNzdWUyNjc0MDg1NA==", "number": 490, "title": "Trying to wrap the REPL blows up", "user": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-02-01T15:35:04Z", "updated_at": "2015-06-24T11:03:58Z", "closed_at": "2015-06-24T11:03:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` clojure\n(import [sys] [io [StringIO]])\n(setv sys.stdout (StringIO))\n```\n\nresults in:\n\n```\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\nTypeError: unicode argument expected, got 'str'\nTraceback (most recent call last):\n  File \"/home/algernon/.virtualenvs/hydiomatic/bin/hy\", line 9, in <module>\n    load_entry_point('hy==0.9.12', 'console_scripts', 'hy')()\n  File \"/home/algernon/.virtualenvs/hydiomatic/src/hy/hy/cmdline.py\", line 295, in hy_main\n    sys.exit(cmdline_handler(\"hy\", sys.argv))\n  File \"/home/algernon/.virtualenvs/hydiomatic/src/hy/hy/cmdline.py\", line 290, in cmdline_handler\n    return run_repl(spy=options.spy)\n  File \"/home/algernon/.virtualenvs/hydiomatic/src/hy/hy/cmdline.py\", line 211, in run_repl\n    version=hy.__version__\n  File \"/usr/lib/python2.7/code.py\", line 234, in interact\n    line = self.raw_input(prompt)\n  File \"/usr/lib/python2.7/code.py\", line 281, in raw_input\n    return raw_input(prompt)\nTypeError: unicode argument expected, got 'str'\n```\n\nDoing the same thing in a Hy program works fine, it is just the REPL that blows up.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/490/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/459", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/459/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/459/events", "html_url": "https://github.com/hylang/hy/issues/459", "id": 25836143, "node_id": "MDU6SXNzdWUyNTgzNjE0Mw==", "number": 459, "title": "Using hy as sys.executable and the correct __main__ module.", "user": {"login": "Beluki", "id": 6313150, "node_id": "MDQ6VXNlcjYzMTMxNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6313150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Beluki", "html_url": "https://github.com/Beluki", "followers_url": "https://api.github.com/users/Beluki/followers", "following_url": "https://api.github.com/users/Beluki/following{/other_user}", "gists_url": "https://api.github.com/users/Beluki/gists{/gist_id}", "starred_url": "https://api.github.com/users/Beluki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Beluki/subscriptions", "organizations_url": "https://api.github.com/users/Beluki/orgs", "repos_url": "https://api.github.com/users/Beluki/repos", "events_url": "https://api.github.com/users/Beluki/events{/privacy}", "received_events_url": "https://api.github.com/users/Beluki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-01-17T20:56:42Z", "updated_at": "2018-09-04T09:28:38Z", "closed_at": "2018-09-03T11:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "When the Python interpreter starts, it sets two variables that allow access to both the current interpreter path and the top-level module. Hy doesn't touch them, so sys.executable is still the Python executable and __main__ is set to the hy-script.py top-level, which is the first Python script that runs.\n\nSome libraries use those for different purposes. Werkzeug (and therefore Flask) runs sys.executable when restarting the server in debug mode. To decide when a restart is actually needed, it iterates sys.modules, looking for changes. Since sys.modules contains the __main__ module, it restarts when the main script is modified.\n\nSetting sys.executable to the Hy path and the __main__ module to the current Hy script would fix issue #329 as well as enable libraries to run other Hy programs in a portable way.\n\nOther Python libraries may expect sys.executable to be Python and not Hy, but as @paultag pointed out, this can be solved by having Hy understand '.py' files as arguments and falling back to Python when needed.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/436", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/436/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/436/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/436/events", "html_url": "https://github.com/hylang/hy/issues/436", "id": 25472266, "node_id": "MDU6SXNzdWUyNTQ3MjI2Ng==", "number": 436, "title": "Weird issue where for doesn't work in a macro", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-12T23:19:08Z", "updated_at": "2018-05-25T22:54:44Z", "closed_at": "2014-01-29T07:11:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/436/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/434", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/434/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/434/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/434/events", "html_url": "https://github.com/hylang/hy/issues/434", "id": 25466618, "node_id": "MDU6SXNzdWUyNTQ2NjYxOA==", "number": 434, "title": "macro namespace voodoo", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-01-12T17:56:51Z", "updated_at": "2017-03-30T23:21:57Z", "closed_at": "2017-03-30T23:21:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` clojure\n(import string)\n(print string)\n```\n\nwill work in a file, but not the REPL due to how the compiler shims in core stuff.\n\nwat do.\n\nOne idea is to make the internals smarter, and don't blindly trust the core name, check for assignment, and do that, but this means we're doing static analysts, and stuff altered at runtime will break in a bad way.\n\nWhat do? D:\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/433", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/433/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/433/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/433/events", "html_url": "https://github.com/hylang/hy/issues/433", "id": 25466602, "node_id": "MDU6SXNzdWUyNTQ2NjYwMg==", "number": 433, "title": "kill kwapply", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/5", "html_url": "https://github.com/hylang/hy/milestone/5", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/5/labels", "id": 543727, "node_id": "MDk6TWlsZXN0b25lNTQzNzI3", "number": 5, "title": "0.10.0", "description": "", "creator": {"login": "theanalyst", "id": 1433152, "node_id": "MDQ6VXNlcjE0MzMxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1433152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theanalyst", "html_url": "https://github.com/theanalyst", "followers_url": "https://api.github.com/users/theanalyst/followers", "following_url": "https://api.github.com/users/theanalyst/following{/other_user}", "gists_url": "https://api.github.com/users/theanalyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/theanalyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theanalyst/subscriptions", "organizations_url": "https://api.github.com/users/theanalyst/orgs", "repos_url": "https://api.github.com/users/theanalyst/repos", "events_url": "https://api.github.com/users/theanalyst/events{/privacy}", "received_events_url": "https://api.github.com/users/theanalyst/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 31, "state": "closed", "created_at": "2014-01-22T03:46:22Z", "updated_at": "2017-02-26T19:20:24Z", "due_on": null, "closed_at": "2014-07-15T04:25:45Z"}, "comments": 3, "created_at": "2014-01-12T17:55:20Z", "updated_at": "2014-04-10T14:01:25Z", "closed_at": "2014-04-10T14:01:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`(apply)` is smart now\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/433/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/432", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/432/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/432/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/432/events", "html_url": "https://github.com/hylang/hy/issues/432", "id": 25466595, "node_id": "MDU6SXNzdWUyNTQ2NjU5NQ==", "number": 432, "title": "make setv smarter", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-01-12T17:54:51Z", "updated_at": "2016-12-20T03:33:51Z", "closed_at": "2016-12-20T03:33:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "so that the setv car stuff works since we made car a function\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/426", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/426/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/426/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/426/events", "html_url": "https://github.com/hylang/hy/issues/426", "id": 25421437, "node_id": "MDU6SXNzdWUyNTQyMTQzNw==", "number": 426, "title": "HyExpressions that look equivalent are not; very weird eval bug", "user": {"login": "cndreisbach", "id": 956, "node_id": "MDQ6VXNlcjk1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cndreisbach", "html_url": "https://github.com/cndreisbach", "followers_url": "https://api.github.com/users/cndreisbach/followers", "following_url": "https://api.github.com/users/cndreisbach/following{/other_user}", "gists_url": "https://api.github.com/users/cndreisbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/cndreisbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cndreisbach/subscriptions", "organizations_url": "https://api.github.com/users/cndreisbach/orgs", "repos_url": "https://api.github.com/users/cndreisbach/repos", "events_url": "https://api.github.com/users/cndreisbach/events{/privacy}", "received_events_url": "https://api.github.com/users/cndreisbach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-10T20:48:52Z", "updated_at": "2016-05-13T19:57:11Z", "closed_at": "2016-05-13T19:57:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "First, here's the bug in a script:\n\n```\n$ hy\nhy 0.9.12\n=> (defn total-purchase [price amount &optional [fees 1.05] [vat 1.1]]\n... (* price amount fees vat))\n=> (total-purchase 10 15)\n173.25\n=> (kwapply (total-purchase 10 15) {\"vat\" 1.05})\n165.375\n=> '(kwapply (total-purchase 10 15) {\"vat\" 1.05})\n(u'kwapply' (u'total_purchase' 10L 15L) {u'vat' 1.05})\n=> (eval '(kwapply (total-purchase 10 15) {\"vat\" 1.05}))\n165.375\n```\n\nAwesome! So far, this is what we expect.\n\n```\n=> ((fn [&rest args] `(kwapply (total-purchase ~@args) {\"vat\" 1.05})) 10 15)\n(u'kwapply' (u'total_purchase' 10L 15L) {u'vat' 1.05})\n```\n\nThis looks exactly the same as our previous quoted expression, so it should eval to the same thing, right?\n\n```\n=> (eval ((fn [&rest args] `(kwapply (total-purchase ~@args) {\"vat\" 1.05})) 10 15))\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n  File \"/Users/clinton/Projects/hy/hy/importer.py\", line 106, in hy_eval\n    hytree.replace(foo)\n  File \"/Users/clinton/Projects/hy/hy/models/list.py\", line 31, in replace\n    x.replace(other)\n  File \"/Users/clinton/Projects/hy/hy/models/list.py\", line 31, in replace\n    x.replace(other)\nAttributeError: 'long' object has no attribute 'replace'\n```\n\nWhat is going on here? Are our expressions of different types?\n\n```\n=> (type '(kwapply (total-purchase 10 15) {\"vat\" 1.05}))\n<class 'hy.models.expression.HyExpression'>\n=> (type ((fn [&rest args] `(kwapply (total-purchase ~@args) {\"vat\" 1.05})) 10 15))\n<class 'hy.models.expression.HyExpression'>\n```\n\nNope, they're the same. This is just weird.\n\nI don't even know what to call this bug, but it is a tricky one. You might question the utility of what I'm trying to do or why you'd want to generate code this way. I'm trying to implement multimethods, and this is stopping me.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/426/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/419", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/419/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/419/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/419/events", "html_url": "https://github.com/hylang/hy/issues/419", "id": 25194420, "node_id": "MDU6SXNzdWUyNTE5NDQyMA==", "number": 419, "title": "bad kwapply call throws ugly Traceback", "user": {"login": "kaizoku", "id": 270966, "node_id": "MDQ6VXNlcjI3MDk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/270966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaizoku", "html_url": "https://github.com/kaizoku", "followers_url": "https://api.github.com/users/kaizoku/followers", "following_url": "https://api.github.com/users/kaizoku/following{/other_user}", "gists_url": "https://api.github.com/users/kaizoku/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaizoku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaizoku/subscriptions", "organizations_url": "https://api.github.com/users/kaizoku/orgs", "repos_url": "https://api.github.com/users/kaizoku/repos", "events_url": "https://api.github.com/users/kaizoku/events{/privacy}", "received_events_url": "https://api.github.com/users/kaizoku/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-07T20:21:53Z", "updated_at": "2014-05-14T11:50:59Z", "closed_at": "2014-05-14T11:50:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you forget the parens for kwapply, such as\n`(kwapply global {})`\n\nYou might get an ugly message like this\n\n```\nTraceback (most recent call last):\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 1992, in hy_compile\n    result = compiler.compile(tree)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 397, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 389, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 543, in compile_raw_list\n    ret = self._compile_branch(entries)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 428, in _compile_branch\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 289, in _branch\n    results = list(results)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 428, in <genexpr>\n    return _branch(self.compile(expr) for expr in exprs)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 409, in compile\n    raise HyCompileError(e, sys.exc_info()[2])\nHyCompileError: Internal Compiler Bug \n\u2937 TypeError: replace() takes at least 2 arguments (1 given)\nCompilation traceback:\nFile \"/Users/josh/git/hy/hy/compiler.py\", line 397, in compile\n    ret = self.compile_atom(_type, tree)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 389, in compile_atom\n    ret = _compile_table[atom_type](self, atom)\n  File \"/Users/josh/git/hy/hy/compiler.py\", line 1538, in compile_expression\n    expression = macroexpand(expression, self.module_name)\n  File \"/Users/josh/git/hy/hy/macros.py\", line 175, in macroexpand\n    tree = macroexpand_1(tree, module_name)\n  File \"/Users/josh/git/hy/hy/macros.py\", line 207, in macroexpand_1\n    obj.replace(tree)\n  File \"/Users/josh/git/hy/hy/models/list.py\", line 31, in replace\n    x.replace(other)\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/419/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/418", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/418/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/418/events", "html_url": "https://github.com/hylang/hy/issues/418", "id": 25100069, "node_id": "MDU6SXNzdWUyNTEwMDA2OQ==", "number": 418, "title": "__main__ is not handled correctly when a program is run with hy program.hy", "user": {"login": "podhmo", "id": 80613, "node_id": "MDQ6VXNlcjgwNjEz", "avatar_url": "https://avatars.githubusercontent.com/u/80613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/podhmo", "html_url": "https://github.com/podhmo", "followers_url": "https://api.github.com/users/podhmo/followers", "following_url": "https://api.github.com/users/podhmo/following{/other_user}", "gists_url": "https://api.github.com/users/podhmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/podhmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/podhmo/subscriptions", "organizations_url": "https://api.github.com/users/podhmo/orgs", "repos_url": "https://api.github.com/users/podhmo/repos", "events_url": "https://api.github.com/users/podhmo/events{/privacy}", "received_events_url": "https://api.github.com/users/podhmo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-01-06T12:55:11Z", "updated_at": "2016-12-13T19:44:44Z", "closed_at": "2016-12-13T19:44:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Maybe, the diferrence between hy and hyc is existed treating \"**main**\" module.  perhaps, this behavior is bug, but, I can't judge about it.\n\nwhen i try below code.\n\n``` lisp\n(import unittest)\n\n(defclass Tests [unittest.TestCase]\n  [[testIt (fn [self] (raise (Exception \"\")))]])\n\n(when (= --name-- \"__main__\")\n  (import sys)\n  (print (dir (get sys.modules \"__main__\")))\n\n  (.main unittest)\n  )\n```\n## Execution with hyc\n\nthis is expected behavior (Exception is raised).\n\n``` bash\n$ hyc assert-sample.hy\n$ python assert-sample.pyc\n\nE\n======================================================================\nERROR: testIt (__main__.Tests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"assert-sample.hy\", line 4, in testIt\n    [[testIt (fn [self] (raise (Exception \"\")))]])\nException\n\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nFAILED (errors=1)\n['Tests', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', 'sys', 'unittest']\n```\n## Execution with hy\n\nException is not raised.\n\n``` bash\n$ hy assert-sample.hy\n['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__requires__', 'load_entry_point', 'sys']\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/418/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/378", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/378/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/378/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/378/events", "html_url": "https://github.com/hylang/hy/issues/378", "id": 24333798, "node_id": "MDU6SXNzdWUyNDMzMzc5OA==", "number": 378, "title": "Hy handles *some-variable* incorrectly", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-12-16T07:34:47Z", "updated_at": "2015-08-05T15:01:54Z", "closed_at": "2015-08-05T12:04:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Proper Lisp code uses `+some-variable+` for non-local constants, and `*some-variable*` for non-local mutables.  See http://google-styleguide.googlecode.com/svn/trunk/lispguide.xml#Global_variables_and_constants or any other Lisp style guide that covers the issue.\n\nHy converts `*some-variable*` to `SOME_VARIABLE` which is what proper Python code uses for constants.  In other words, this is exactly the opposite of the expected behavior.  This will confuse programmers trying to use Hy code from Python.\n\nI suggest changing Hy to behave as Lisp and Python programmers would expect it, by having `*some-variable*` in Hy become `some_variable` (what proper Python code uses for global mutables; see http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Naming#Naming ) in Python, and `+some-variable+` in Hy become `SOME_VARIABLE` in Python.  This would prevent unnecessary confusion and bugs.\n\nYou may also want to consider making Hy automatically do the right thing with `*some-variable*`, so Hy programmers don't have to write `(global *some-variable*)` manually.  This will not be necessary for `+some-variable+` since the global annotation in Python is only necessary for mutation, not reading (see http://docs.python.org/3/reference/simple_stmts.html#global ).  It would also enforce proper naming.\n\nBeing able to view the emitted Python code is invaluable to finding bugs like this, and to Hy programmers making the transition from Python.  I hope it will be maintained.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/378/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/375", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/375/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/375/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/375/events", "html_url": "https://github.com/hylang/hy/issues/375", "id": 24304736, "node_id": "MDU6SXNzdWUyNDMwNDczNg==", "number": 375, "title": "Example in docs causes NameErrors", "user": {"login": "sigmavirus24", "id": 240830, "node_id": "MDQ6VXNlcjI0MDgzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/240830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigmavirus24", "html_url": "https://github.com/sigmavirus24", "followers_url": "https://api.github.com/users/sigmavirus24/followers", "following_url": "https://api.github.com/users/sigmavirus24/following{/other_user}", "gists_url": "https://api.github.com/users/sigmavirus24/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigmavirus24/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigmavirus24/subscriptions", "organizations_url": "https://api.github.com/users/sigmavirus24/orgs", "repos_url": "https://api.github.com/users/sigmavirus24/repos", "events_url": "https://api.github.com/users/sigmavirus24/events{/privacy}", "received_events_url": "https://api.github.com/users/sigmavirus24/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/4", "html_url": "https://github.com/hylang/hy/milestone/4", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/4/labels", "id": 516414, "node_id": "MDk6TWlsZXN0b25lNTE2NDE0", "number": 4, "title": "0.9.12", "description": "", "creator": {"login": "theanalyst", "id": 1433152, "node_id": "MDQ6VXNlcjE0MzMxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1433152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theanalyst", "html_url": "https://github.com/theanalyst", "followers_url": "https://api.github.com/users/theanalyst/followers", "following_url": "https://api.github.com/users/theanalyst/following{/other_user}", "gists_url": "https://api.github.com/users/theanalyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/theanalyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theanalyst/subscriptions", "organizations_url": "https://api.github.com/users/theanalyst/orgs", "repos_url": "https://api.github.com/users/theanalyst/repos", "events_url": "https://api.github.com/users/theanalyst/events{/privacy}", "received_events_url": "https://api.github.com/users/theanalyst/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2013-12-18T07:14:28Z", "updated_at": "2014-08-22T15:12:56Z", "due_on": null, "closed_at": "2014-01-22T03:47:48Z"}, "comments": 2, "created_at": "2013-12-15T03:25:18Z", "updated_at": "2014-08-22T15:12:56Z", "closed_at": "2014-08-22T15:12:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, I was reading through the quickstart and playing around in the REPL when I came across [this example](http://docs.hylang.org/en/latest/tutorial.html#protips)\n\n``` clojure\n(loop (print (eval (read))))\n```\n\nI get NameErrors for `loop` and `read`. \n\nAlso, trying eval on its own yields a different exception:\n\n``` hy\n=> (eval \"print\")\nTraceback (most recent call last):\n  File \"<console>\", line 1, in <module>\n  File \"/home/sigmavirus24/virtualenv/hy/lib/python2.7/site-packages/hy/importer.py\", line 96, in hy_eval\n    hytree.replace(foo)\nTypeError: replace() takes at least 2 arguments (1 given)\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/375/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/351", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/351/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/351/events", "html_url": "https://github.com/hylang/hy/issues/351", "id": 23628113, "node_id": "MDU6SXNzdWUyMzYyODExMw==", "number": 351, "title": "The REPL is not homoiconic enough", "user": {"login": "hcarvalhoalves", "id": 161577, "node_id": "MDQ6VXNlcjE2MTU3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/161577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hcarvalhoalves", "html_url": "https://github.com/hcarvalhoalves", "followers_url": "https://api.github.com/users/hcarvalhoalves/followers", "following_url": "https://api.github.com/users/hcarvalhoalves/following{/other_user}", "gists_url": "https://api.github.com/users/hcarvalhoalves/gists{/gist_id}", "starred_url": "https://api.github.com/users/hcarvalhoalves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hcarvalhoalves/subscriptions", "organizations_url": "https://api.github.com/users/hcarvalhoalves/orgs", "repos_url": "https://api.github.com/users/hcarvalhoalves/repos", "events_url": "https://api.github.com/users/hcarvalhoalves/events{/privacy}", "received_events_url": "https://api.github.com/users/hcarvalhoalves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-12-03T08:40:29Z", "updated_at": "2017-03-25T15:20:20Z", "closed_at": "2017-03-25T15:20:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Having the REPL echo back in Python notation kinda sucks. I'm entertaining the idea of this being acceptable:\n\n```\n=> [\"flat\" [\"lists\" [\"without\" \"commas\"]]]\n[\"flat\" [\"lists\" [\"without\" \"commas\"]]]\n=> {:hy_is {:full_of \"wat\"}}\n{:hy_is {:full_of \"wat\"}}\n=> (import os)\n=> (list (os.walk \"./hy/lex\"))\n[[\"./hy/lex\" [] [\"__init__.py\" \"__init__.pyc\" \"exceptions.py\" \"exceptions.pyc\" \"lexer.py\" \"lexer.pyc\" \"parser.py\" \"parser.pyc\"]]]\n```\n\nHere's a PoC covering the simple cases:\nhttps://github.com/hcarvalhoalves/hy/tree/hy-repl\n\nLet's get the ball rolling.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/345", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/345/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/345/events", "html_url": "https://github.com/hylang/hy/issues/345", "id": 23541498, "node_id": "MDU6SXNzdWUyMzU0MTQ5OA==", "number": 345, "title": "Support 3.4", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-12-01T19:15:54Z", "updated_at": "2014-01-29T07:15:09Z", "closed_at": "2014-01-29T07:15:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Blocking issues:\n- [x] fix pyc generation ( #344 )\n\n(edit to add bugs)\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/344", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/344/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/344/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/344/events", "html_url": "https://github.com/hylang/hy/issues/344", "id": 23541466, "node_id": "MDU6SXNzdWUyMzU0MTQ2Ng==", "number": 344, "title": "wr_long missing from python3.4, pyc generation toast", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-12-01T19:14:42Z", "updated_at": "2014-04-06T20:24:20Z", "closed_at": "2014-01-04T21:53:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "we might need to have a pre 3.4 and post 3.4 logic to this. Big changes in this file. Will look more at it later.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/329", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/329/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/329/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/329/events", "html_url": "https://github.com/hylang/hy/issues/329", "id": 22788071, "node_id": "MDU6SXNzdWUyMjc4ODA3MQ==", "number": 329, "title": "running a flask server in debug mode breaks hy and drops to Python", "user": {"login": "Willyfrog", "id": 1515906, "node_id": "MDQ6VXNlcjE1MTU5MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1515906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Willyfrog", "html_url": "https://github.com/Willyfrog", "followers_url": "https://api.github.com/users/Willyfrog/followers", "following_url": "https://api.github.com/users/Willyfrog/following{/other_user}", "gists_url": "https://api.github.com/users/Willyfrog/gists{/gist_id}", "starred_url": "https://api.github.com/users/Willyfrog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Willyfrog/subscriptions", "organizations_url": "https://api.github.com/users/Willyfrog/orgs", "repos_url": "https://api.github.com/users/Willyfrog/repos", "events_url": "https://api.github.com/users/Willyfrog/events{/privacy}", "received_events_url": "https://api.github.com/users/Willyfrog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2013-11-17T00:08:41Z", "updated_at": "2017-04-28T09:45:37Z", "closed_at": "2017-04-27T22:55:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Setting a Flask app to run in debug mode breaks hy and drops to python.\n\nSteps to reproduce:\n    $ hy\n    hy 0.9.11\n    => (import [flask [Flask]])\n    => (setv app (Flask \"**main**\"))\n    => (setv app.debug True)\n    True\n    => (.run app)\n     \\* Running on http://127.0.0.1:5000/\n     \\* Restarting with reloader\n    Python 2.7.5 (default, Sep  6 2013, 09:55:21) \n    [GCC 4.8.1 20130725 (prerelease)] on linux2\n    Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n    >>> \n\nusing kwapply give the same result and running directly without setting debug makes the server run\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/329/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/305", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/305/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/305/events", "html_url": "https://github.com/hylang/hy/issues/305", "id": 20702780, "node_id": "MDU6SXNzdWUyMDcwMjc4MA==", "number": 305, "title": "Hy Repl's behaviour on multiline strings", "user": {"login": "theanalyst", "id": 1433152, "node_id": "MDQ6VXNlcjE0MzMxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1433152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theanalyst", "html_url": "https://github.com/theanalyst", "followers_url": "https://api.github.com/users/theanalyst/followers", "following_url": "https://api.github.com/users/theanalyst/following{/other_user}", "gists_url": "https://api.github.com/users/theanalyst/gists{/gist_id}", "starred_url": "https://api.github.com/users/theanalyst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theanalyst/subscriptions", "organizations_url": "https://api.github.com/users/theanalyst/orgs", "repos_url": "https://api.github.com/users/theanalyst/repos", "events_url": "https://api.github.com/users/theanalyst/events{/privacy}", "received_events_url": "https://api.github.com/users/theanalyst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-10-08T19:59:22Z", "updated_at": "2014-12-29T15:45:09Z", "closed_at": "2014-12-29T15:44:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hy Repl throws a `LexException` when attempting to write a multiline docstring. \n\n```\n => (defn a []\n...   \"This is a dummy fn that really does\nLexException: Could not identify the next token at line -1, column -1\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/283", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/283/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/283/events", "html_url": "https://github.com/hylang/hy/issues/283", "id": 18579290, "node_id": "MDU6SXNzdWUxODU3OTI5MA==", "number": 283, "title": "str vs unicode and int vs long", "user": {"login": "Willyfrog", "id": 1515906, "node_id": "MDQ6VXNlcjE1MTU5MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1515906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Willyfrog", "html_url": "https://github.com/Willyfrog", "followers_url": "https://api.github.com/users/Willyfrog/followers", "following_url": "https://api.github.com/users/Willyfrog/following{/other_user}", "gists_url": "https://api.github.com/users/Willyfrog/gists{/gist_id}", "starred_url": "https://api.github.com/users/Willyfrog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Willyfrog/subscriptions", "organizations_url": "https://api.github.com/users/Willyfrog/orgs", "repos_url": "https://api.github.com/users/Willyfrog/repos", "events_url": "https://api.github.com/users/Willyfrog/events{/privacy}", "received_events_url": "https://api.github.com/users/Willyfrog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-08-26T23:19:51Z", "updated_at": "2016-12-13T18:57:00Z", "closed_at": "2016-12-13T18:57:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm curently going through the overflow int issue (#276) which is going fine except for a test that is failing:\n\n`(instance? int 3)` => `False`\n\nThis is False on my current implementation of HyInt, which would use long on python 2.x But it would be the same problem if we try to do\n\n`(instance? str \"abc\")` => `False`\n\nWhile I can mimic the way the test is used for strings (and my current branch does thsi) I wonder if it will be confusing for someone that `(instance? int 3)` and `(instance? str \"abc\")` performs differently on py2 and py3\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/283/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/273", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/273/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/273/events", "html_url": "https://github.com/hylang/hy/issues/273", "id": 17916559, "node_id": "MDU6SXNzdWUxNzkxNjU1OQ==", "number": 273, "title": "fix macro require", "user": {"login": "agentultra", "id": 120574, "node_id": "MDQ6VXNlcjEyMDU3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/120574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agentultra", "html_url": "https://github.com/agentultra", "followers_url": "https://api.github.com/users/agentultra/followers", "following_url": "https://api.github.com/users/agentultra/following{/other_user}", "gists_url": "https://api.github.com/users/agentultra/gists{/gist_id}", "starred_url": "https://api.github.com/users/agentultra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agentultra/subscriptions", "organizations_url": "https://api.github.com/users/agentultra/orgs", "repos_url": "https://api.github.com/users/agentultra/repos", "events_url": "https://api.github.com/users/agentultra/events{/privacy}", "received_events_url": "https://api.github.com/users/agentultra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2013-08-11T19:19:20Z", "updated_at": "2017-02-26T19:11:41Z", "closed_at": "2017-02-26T19:11:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Require'd macros cannot reference global namespace of their module\n\n```\n;; mac.hy\n(defn foo [a]\n  [a])\n\n(defmacro bar [baz]\n  (quasiquote\n    (do (foo (unquote baz)))))\n\n;; bang.hy\n(require mac)\n\n(bar \"boop\")\n\n;; Results in:\n;; NameError: global name 'foo' is not defined\n```\n\nWhich is not terribly useful.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/259", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/259/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/259/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/259/events", "html_url": "https://github.com/hylang/hy/issues/259", "id": 16995422, "node_id": "MDU6SXNzdWUxNjk5NTQyMg==", "number": 259, "title": "Replace raw-input with input in Python 2", "user": {"login": "joehakimrahme", "id": 300964, "node_id": "MDQ6VXNlcjMwMDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/300964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joehakimrahme", "html_url": "https://github.com/joehakimrahme", "followers_url": "https://api.github.com/users/joehakimrahme/followers", "following_url": "https://api.github.com/users/joehakimrahme/following{/other_user}", "gists_url": "https://api.github.com/users/joehakimrahme/gists{/gist_id}", "starred_url": "https://api.github.com/users/joehakimrahme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joehakimrahme/subscriptions", "organizations_url": "https://api.github.com/users/joehakimrahme/orgs", "repos_url": "https://api.github.com/users/joehakimrahme/repos", "events_url": "https://api.github.com/users/joehakimrahme/events{/privacy}", "received_events_url": "https://api.github.com/users/joehakimrahme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-07-19T22:00:45Z", "updated_at": "2015-12-14T20:29:03Z", "closed_at": "2015-12-14T20:29:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Python2's `input` function is bad. If you want to `eval` the input, you should do so explicitly. This is why Python2 introduced `raw_input` and why Python3 made `input` behave like `raw_input`.\n\nI think Hy should have a single function `input` that **doesn't** evaluate the string it gets. It should automatically translate into `raw_input` if translated to Python2 and `input` if translated to Python 3.\n### Cons\n\nI think this might affect the holy Python <-> Hy interoperability. \n### However\n\nI think we do something similar with division in Hy, where `(/ 3 2)` always evaluates to `1.5` regardless of the version of Python it compiles to.\n\nBasically, I'd like to get your opinion before starting coding this one. We could discuss the technical details of the implementation, but first let's focus on deciding if it's a sound design choice.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/259/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/249", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/249/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/249/events", "html_url": "https://github.com/hylang/hy/issues/249", "id": 16729219, "node_id": "MDU6SXNzdWUxNjcyOTIxOQ==", "number": 249, "title": "setv on tuple returns the tuple?", "user": {"login": "rwtolbert", "id": 283685, "node_id": "MDQ6VXNlcjI4MzY4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/283685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rwtolbert", "html_url": "https://github.com/rwtolbert", "followers_url": "https://api.github.com/users/rwtolbert/followers", "following_url": "https://api.github.com/users/rwtolbert/following{/other_user}", "gists_url": "https://api.github.com/users/rwtolbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/rwtolbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rwtolbert/subscriptions", "organizations_url": "https://api.github.com/users/rwtolbert/orgs", "repos_url": "https://api.github.com/users/rwtolbert/repos", "events_url": "https://api.github.com/users/rwtolbert/events{/privacy}", "received_events_url": "https://api.github.com/users/rwtolbert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/8", "html_url": "https://github.com/hylang/hy/milestone/8", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/8/labels", "id": 1224085, "node_id": "MDk6TWlsZXN0b25lMTIyNDA4NQ==", "number": 8, "title": "Grand Language Cleanup", "description": "There are a couple of workarounds in the language that have bugs and issues that are hard (or even impossible) to solve, because of being tied to Python semantics. Instead of trying to be something the language isn't, these should be cleaned up, and replaced with something more pythonic - and thus less buggy from a pythonist PoV. To ease migration, a compatibility shim may be provided.\r\n\r\nLets track these here!", "creator": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 48, "state": "closed", "created_at": "2015-07-24T13:55:39Z", "updated_at": "2022-11-07T18:32:22Z", "due_on": null, "closed_at": "2021-02-06T20:03:12Z"}, "comments": 4, "created_at": "2013-07-14T15:34:03Z", "updated_at": "2017-03-24T04:38:31Z", "closed_at": "2017-03-24T04:38:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Seems like odd behavior since in general, setv returns None. The assignment works, the return is unexpected. \n\n```\n=> (setv x 1)\n=> (setv l [1 2])\n=> (setv ll (list [1 2]))\n=> (setv (, a b) [1 2])\n(1, 2)\n=> (print a)\n1\n=> (print b)\n2\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/238", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/238/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/238/events", "html_url": "https://github.com/hylang/hy/issues/238", "id": 16523120, "node_id": "MDU6SXNzdWUxNjUyMzEyMA==", "number": 238, "title": "Assoc returning the dict", "user": {"login": "laarmen", "id": 593461, "node_id": "MDQ6VXNlcjU5MzQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/593461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laarmen", "html_url": "https://github.com/laarmen", "followers_url": "https://api.github.com/users/laarmen/followers", "following_url": "https://api.github.com/users/laarmen/following{/other_user}", "gists_url": "https://api.github.com/users/laarmen/gists{/gist_id}", "starred_url": "https://api.github.com/users/laarmen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laarmen/subscriptions", "organizations_url": "https://api.github.com/users/laarmen/orgs", "repos_url": "https://api.github.com/users/laarmen/repos", "events_url": "https://api.github.com/users/laarmen/events{/privacy}", "received_events_url": "https://api.github.com/users/laarmen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2013-07-09T13:00:02Z", "updated_at": "2019-09-10T21:35:25Z", "closed_at": "2017-04-16T14:55:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Would it be possible to have assoc return the modified dict instead of nil?\n\nIt would make dealing with dictionaries in Hy a bit easier, IMHO\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/233", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/233/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/233/events", "html_url": "https://github.com/hylang/hy/issues/233", "id": 16442309, "node_id": "MDU6SXNzdWUxNjQ0MjMwOQ==", "number": 233, "title": "Python statements are executed unconditionally", "user": {"login": "joehakimrahme", "id": 300964, "node_id": "MDQ6VXNlcjMwMDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/300964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joehakimrahme", "html_url": "https://github.com/joehakimrahme", "followers_url": "https://api.github.com/users/joehakimrahme/followers", "following_url": "https://api.github.com/users/joehakimrahme/following{/other_user}", "gists_url": "https://api.github.com/users/joehakimrahme/gists{/gist_id}", "starred_url": "https://api.github.com/users/joehakimrahme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joehakimrahme/subscriptions", "organizations_url": "https://api.github.com/users/joehakimrahme/orgs", "repos_url": "https://api.github.com/users/joehakimrahme/repos", "events_url": "https://api.github.com/users/joehakimrahme/events{/privacy}", "received_events_url": "https://api.github.com/users/joehakimrahme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2013-07-07T12:20:43Z", "updated_at": "2017-03-26T23:45:43Z", "closed_at": "2017-03-26T23:45:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When translating a Hy expression into a Python statement (`print`, `yield`, ...), it gets executed unconditionally. For instance:\n\n``` clj\n=> (and False (do (print \"hello\") True))\nhello\nFalse\n```\n\nMore info can be found in [this discussion](https://github.com/hylang/hy/pull/222#discussion_r5041876).\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/219", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/219/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/219/events", "html_url": "https://github.com/hylang/hy/issues/219", "id": 16186353, "node_id": "MDU6SXNzdWUxNjE4NjM1Mw==", "number": 219, "title": "kwapply doesn't translate a key '-' to '_'", "user": {"login": "Willyfrog", "id": 1515906, "node_id": "MDQ6VXNlcjE1MTU5MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1515906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Willyfrog", "html_url": "https://github.com/Willyfrog", "followers_url": "https://api.github.com/users/Willyfrog/followers", "following_url": "https://api.github.com/users/Willyfrog/following{/other_user}", "gists_url": "https://api.github.com/users/Willyfrog/gists{/gist_id}", "starred_url": "https://api.github.com/users/Willyfrog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Willyfrog/subscriptions", "organizations_url": "https://api.github.com/users/Willyfrog/orgs", "repos_url": "https://api.github.com/users/Willyfrog/repos", "events_url": "https://api.github.com/users/Willyfrog/events{/privacy}", "received_events_url": "https://api.github.com/users/Willyfrog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/8", "html_url": "https://github.com/hylang/hy/milestone/8", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/8/labels", "id": 1224085, "node_id": "MDk6TWlsZXN0b25lMTIyNDA4NQ==", "number": 8, "title": "Grand Language Cleanup", "description": "There are a couple of workarounds in the language that have bugs and issues that are hard (or even impossible) to solve, because of being tied to Python semantics. Instead of trying to be something the language isn't, these should be cleaned up, and replaced with something more pythonic - and thus less buggy from a pythonist PoV. To ease migration, a compatibility shim may be provided.\r\n\r\nLets track these here!", "creator": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 48, "state": "closed", "created_at": "2015-07-24T13:55:39Z", "updated_at": "2022-11-07T18:32:22Z", "due_on": null, "closed_at": "2021-02-06T20:03:12Z"}, "comments": 5, "created_at": "2013-06-30T10:53:50Z", "updated_at": "2015-10-01T08:02:38Z", "closed_at": "2015-10-01T08:02:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "arguments of a function are translated from '-', symbols also are translated, but strings are not, so having a key 'my-key-argument' won't be translated to 'my_key_argument' having a:\n    TypeError: myfunc() got an unexpected keyword argument 'my-key-argument'\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/219/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/195", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/195/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/195/events", "html_url": "https://github.com/hylang/hy/issues/195", "id": 15882765, "node_id": "MDU6SXNzdWUxNTg4Mjc2NQ==", "number": 195, "title": "Unable to translate Python code into Hy.", "user": {"login": "joehakimrahme", "id": 300964, "node_id": "MDQ6VXNlcjMwMDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/300964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joehakimrahme", "html_url": "https://github.com/joehakimrahme", "followers_url": "https://api.github.com/users/joehakimrahme/followers", "following_url": "https://api.github.com/users/joehakimrahme/following{/other_user}", "gists_url": "https://api.github.com/users/joehakimrahme/gists{/gist_id}", "starred_url": "https://api.github.com/users/joehakimrahme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joehakimrahme/subscriptions", "organizations_url": "https://api.github.com/users/joehakimrahme/orgs", "repos_url": "https://api.github.com/users/joehakimrahme/repos", "events_url": "https://api.github.com/users/joehakimrahme/events{/privacy}", "received_events_url": "https://api.github.com/users/joehakimrahme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-06-22T10:21:37Z", "updated_at": "2015-08-10T09:54:08Z", "closed_at": "2015-08-10T09:54:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm trying to translate this Python code into Hy. `memoized` is a decorator which applies a [simple optimization technique](https://en.wikipedia.org/wiki/Memoization).\n\n``` python\ndef memoized(fn):\n    fn.cache_dict = {}\n\n    def memoized_fn(n):\n\n        if n in fn.cache_dict:\n            return fn.cache_dict[n]\n        else:\n            fn.cache_dict[n] = fn(n)\n            return fn.cache_dict[n]\n\n    return memoized_fn\n\n```\n\nTo show that this code works, I run a small test on a recursive Fibonacci sequence calculator:\n\n``` python\n@memoized\ndef fibo_recursive(n):\n    if n <= 1:\n        return n\n    return fibo_recursive(n-1) + fibo_recursive(n-2)\n\n\n>>> fibo_recursive(100)\n354224848179261915075L\n```\n\nThe result is instantaneous. The non-decorated version of this would've otherwise not been able to compute this value. Success!\n\nNow I want to translate this to Hy code. Here's my attempt:\n\n``` clj\n(defn memoized [fn]\n  (setv fn.cache_dict {})\n\n  (defn memoized_fn [n] ;; TODO: replace it with *args\n    (if (.has_key fn.cache_dict n)\n      (.get fn.cache_dict n)\n      (do\n       (.setdefault fn.cache_dict n (fn n)))))\n  memoized_fn)\n```\n\nI don't know if this is the correct way to access dictionary elements, but it is beyond the point. When I try to execute the Hy code above, I get a very cryptic error message, that I pasted on a pastebin because it wouldn't fit on a Github issue.\n- [Find the traceback here](http://www.hastebin.com/gevunowada.vhdl)\n\nI'm not sure if there's an error in my Hy code or it's actually a compiler error like the traceback seems to indicate, but in any case, I thought I'd report it. I am trying to pin-point more precisely where the bug might come from, but I don't know the source code well enough and I'm afraid I may be in a little bit over my head.\n\nIn the case that this is not a compiler bug, but an error in my code, can someone explain to me where the problem is, and maybe we can consider a more expressive error message?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/180", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/180/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/180/events", "html_url": "https://github.com/hylang/hy/issues/180", "id": 14275631, "node_id": "MDU6SXNzdWUxNDI3NTYzMQ==", "number": 180, "title": "Macro expansion works differently from Lisp conventions", "user": {"login": "khinsen", "id": 94934, "node_id": "MDQ6VXNlcjk0OTM0", "avatar_url": "https://avatars.githubusercontent.com/u/94934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khinsen", "html_url": "https://github.com/khinsen", "followers_url": "https://api.github.com/users/khinsen/followers", "following_url": "https://api.github.com/users/khinsen/following{/other_user}", "gists_url": "https://api.github.com/users/khinsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/khinsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khinsen/subscriptions", "organizations_url": "https://api.github.com/users/khinsen/orgs", "repos_url": "https://api.github.com/users/khinsen/repos", "events_url": "https://api.github.com/users/khinsen/events{/privacy}", "received_events_url": "https://api.github.com/users/khinsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/8", "html_url": "https://github.com/hylang/hy/milestone/8", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/8/labels", "id": 1224085, "node_id": "MDk6TWlsZXN0b25lMTIyNDA4NQ==", "number": 8, "title": "Grand Language Cleanup", "description": "There are a couple of workarounds in the language that have bugs and issues that are hard (or even impossible) to solve, because of being tied to Python semantics. Instead of trying to be something the language isn't, these should be cleaned up, and replaced with something more pythonic - and thus less buggy from a pythonist PoV. To ease migration, a compatibility shim may be provided.\r\n\r\nLets track these here!", "creator": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 48, "state": "closed", "created_at": "2015-07-24T13:55:39Z", "updated_at": "2022-11-07T18:32:22Z", "due_on": null, "closed_at": "2021-02-06T20:03:12Z"}, "comments": 15, "created_at": "2013-05-13T18:49:06Z", "updated_at": "2017-02-13T17:20:55Z", "closed_at": "2017-02-13T17:20:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Given\n\n```\n(defmacro rev [&rest body]\n  (quasiquote (do (unquote-splice (list (reversed body))))))\n```\n\n(shamelessly stolen from native-tests), the expression\n\n```\n(let [[rev math.sqrt]] (rev 2))\n```\n\nevaluates to `2` whereas in other Lisps I know it evaluates to `(sqrt 2)`. What's worse is that other Lisps' behaviour is more useful. Is this a bug or a feature?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/137", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/137/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/137/events", "html_url": "https://github.com/hylang/hy/issues/137", "id": 13305519, "node_id": "MDU6SXNzdWUxMzMwNTUxOQ==", "number": 137, "title": "Mixing if and let fails", "user": {"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2013-04-17T16:49:52Z", "updated_at": "2013-05-06T13:48:39Z", "closed_at": "2013-05-05T18:56:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\n=> (if true (print 1))\n1\n=> (if true (let [[x 0]] (print x)))\n=> (if true (let [[x 0]] (print x)) (print 42))\nTraceback (most recent call last):\n  File \"/home/jd/Work/src/hy/hy/compiler.py\", line 1140, in hy_compile\n    _ast = compiler.compile(tree)\n  File \"/home/jd/Work/src/hy/hy/compiler.py\", line 139, in compile\n    return _compile_table[_type](self, tree)\n  File \"/home/jd/Work/src/hy/hy/compiler.py\", line 192, in compile_raw_list\n    return [self.compile(x) for x in entries]\n  File \"/home/jd/Work/src/hy/hy/compiler.py\", line 146, in compile\n    raise HyCompileError(e, sys.exc_info()[2])\nHyCompileError: `if' needs at most 3 arguments, got 4 (line 1, column 1)\n```\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/137/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/126", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/126/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/126/events", "html_url": "https://github.com/hylang/hy/issues/126", "id": 13191996, "node_id": "MDU6SXNzdWUxMzE5MTk5Ng==", "number": 126, "title": "The lexer chokes on \"\\uFDD0\" and similar notations", "user": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-04-15T09:44:23Z", "updated_at": "2013-08-02T03:05:07Z", "closed_at": "2013-08-02T03:05:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` clojure\n(defn test-unicode []\n  \"NATIVE: Test unicode notation within strings\"\n  (assert (= \"\\u0048\" \"H\")))\n```\n\nResults in:\n\n> hy.lex.states.LexException: Unknown modifier: `u'\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/124", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/124/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/124/events", "html_url": "https://github.com/hylang/hy/issues/124", "id": 13181824, "node_id": "MDU6SXNzdWUxMzE4MTgyNA==", "number": 124, "title": "make exit not lie", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-04-15T01:05:06Z", "updated_at": "2013-06-25T15:19:21Z", "closed_at": "2013-06-23T02:40:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\n=> exit\nUse exit() or Ctrl-D (i.e. EOF) to exit\n=> (.--repr-- exit)\n'Use exit() or Ctrl-D (i.e. EOF) to exit'\n=> (exit)\n```\n\nWe can monkey patch the shit out of it. Let's do that.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/104", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/104/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/104/events", "html_url": "https://github.com/hylang/hy/issues/104", "id": 13050819, "node_id": "MDU6SXNzdWUxMzA1MDgxOQ==", "number": 104, "title": "kwapply will only work with dicts", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-04-11T03:11:32Z", "updated_at": "2013-11-12T10:05:56Z", "closed_at": "2013-05-11T20:38:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "support applying a **kwargs with kwapply\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/104/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/102", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/102/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/102/events", "html_url": "https://github.com/hylang/hy/issues/102", "id": 13043157, "node_id": "MDU6SXNzdWUxMzA0MzE1Nw==", "number": 102, "title": "Remove pass from the language ", "user": {"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jd", "id": 2644, "node_id": "MDQ6VXNlcjI2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jd", "html_url": "https://github.com/jd", "followers_url": "https://api.github.com/users/jd/followers", "following_url": "https://api.github.com/users/jd/following{/other_user}", "gists_url": "https://api.github.com/users/jd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jd/subscriptions", "organizations_url": "https://api.github.com/users/jd/orgs", "repos_url": "https://api.github.com/users/jd/repos", "events_url": "https://api.github.com/users/jd/events{/privacy}", "received_events_url": "https://api.github.com/users/jd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2013-04-10T21:58:20Z", "updated_at": "2013-04-15T02:44:53Z", "closed_at": "2013-04-15T02:44:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` clojure\n(if (pass) (pass))\n```\n\n`TypeError: expected some sort of expr, but got <_ast.Pass object at 0x7fc96566c490>`\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/102/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/85", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/85/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/85/events", "html_url": "https://github.com/hylang/hy/issues/85", "id": 12910057, "node_id": "MDU6SXNzdWUxMjkxMDA1Nw==", "number": 85, "title": "bin/hy importing woes", "user": {"login": "algernon", "id": 17243, "node_id": "MDQ6VXNlcjE3MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/17243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algernon", "html_url": "https://github.com/algernon", "followers_url": "https://api.github.com/users/algernon/followers", "following_url": "https://api.github.com/users/algernon/following{/other_user}", "gists_url": "https://api.github.com/users/algernon/gists{/gist_id}", "starred_url": "https://api.github.com/users/algernon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algernon/subscriptions", "organizations_url": "https://api.github.com/users/algernon/orgs", "repos_url": "https://api.github.com/users/algernon/repos", "events_url": "https://api.github.com/users/algernon/events{/privacy}", "received_events_url": "https://api.github.com/users/algernon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-04-08T06:24:48Z", "updated_at": "2013-05-11T20:36:47Z", "closed_at": "2013-05-11T20:36:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tried to create a custom macro, `(zero? N)`, and use it from a hy program. I put the macro in a file, imported it in the hy program, and boom, the symbol is unknown. When I paste the same program into the REPL, that works.\n\nThe test code is available [here](https://gist.github.com/algernon/5334634). If you run fizzbuzz.hy with bin/hy, that'll fail, but pasting its code into bin/hy's REPL works. That's how far I've got, didn't have time to debug it further yet, and it is entirely possible I'm doing something wrong.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/85/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/85/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/64", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/64/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/64/events", "html_url": "https://github.com/hylang/hy/issues/64", "id": 12826033, "node_id": "MDU6SXNzdWUxMjgyNjAzMw==", "number": 64, "title": "Implement native eval of Hy in Hy", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529249, "node_id": "MDU6TGFiZWwyMzUyOTI0OQ==", "url": "https://api.github.com/repos/hylang/hy/labels/feature", "name": "feature", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-04-04T23:36:04Z", "updated_at": "2013-04-15T02:46:09Z", "closed_at": "2013-04-15T02:46:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Fork of #62 - thanks, @jd\n\n(blocked by #50 and #51)\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/64/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/64/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/59", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/59/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/59/events", "html_url": "https://github.com/hylang/hy/issues/59", "id": 12780885, "node_id": "MDU6SXNzdWUxMjc4MDg4NQ==", "number": 59, "title": "fn/do", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2013-04-04T00:28:01Z", "updated_at": "2013-04-04T11:24:44Z", "closed_at": "2013-04-04T11:24:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` clojure\n(fn []\n  (do (print \"Foo\")))\n```\n\nbreaks\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/59/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/59/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/50", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/50/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/50/events", "html_url": "https://github.com/hylang/hy/issues/50", "id": 12730913, "node_id": "MDU6SXNzdWUxMjczMDkxMw==", "number": 50, "title": "\"Branch Manglers\"", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-04-02T23:29:51Z", "updated_at": "2013-04-06T15:57:15Z", "closed_at": "2013-04-06T15:57:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Stuff like:\n\n``` Clojure\n((fn [x] (* x x) 2)\n```\n\nShould work. The issue with the current implementation:\n\n``` Python\nModule(body=[Expr(value=Call(func=FunctionDef(name='_hy_anon_fn_1', args=arguments(args=[Name(id='x', ctx=Param())], vararg=None, kwarg=None, defaults=[]), body=[Return(value=BinOp(left=Name(id='x', ctx=Load()), op=Mult(), right=Name(id='x', ctx=Load())))], decorator_list=[]), args=[Num(n=2)], keywords=[], starargs=None, kwargs=None))])\n```\n\nWhich, of course, will `TypeError` on us.\n\nWe need to do (basically) the following:\n\n``` Clojure\n(fn [x] (* x x))  ; where fn is called by internal name _hy_anon_fn_00001 or so\n(_hy_anon_fn_00001 2)\n```\n\nwhich requires we \"hoist\" something from inside a statement out and above the current expression.\n\nVery sucky. Blocking lots of work.\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/50/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/50/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/37", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/37/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/37/events", "html_url": "https://github.com/hylang/hy/issues/37", "id": 11843578, "node_id": "MDU6SXNzdWUxMTg0MzU3OA==", "number": 37, "title": "We just dropped python 2.6 support", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}, {"id": 23529250, "node_id": "MDU6TGFiZWwyMzUyOTI1MA==", "url": "https://api.github.com/repos/hylang/hy/labels/complaint%20/%20disgust", "name": "complaint / disgust", "color": "0b02e1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-03-09T20:26:00Z", "updated_at": "2013-11-10T03:57:04Z", "closed_at": "2013-03-14T12:13:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've just droped py2.6 from travis and tox because I added importlib (I was concerned about **import** not picking up my pep302 import shims, because I want to move macros to .hy files)\n\nI think this'll just require adding importlib to the tox / travis setup, but it will raise an Exception for non-py2.6 installs, which means we can't set it globally.\n\n@jonathanmarvens want to give it a go?\n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/37/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/37/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/hylang/hy/issues/36", "repository_url": "https://api.github.com/repos/hylang/hy", "labels_url": "https://api.github.com/repos/hylang/hy/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/hylang/hy/issues/36/comments", "events_url": "https://api.github.com/repos/hylang/hy/issues/36/events", "html_url": "https://github.com/hylang/hy/issues/36", "id": 11802627, "node_id": "MDU6SXNzdWUxMTgwMjYyNw==", "number": 36, "title": "Dicts + macros fails", "user": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 23529248, "node_id": "MDU6TGFiZWwyMzUyOTI0OA==", "url": "https://api.github.com/repos/hylang/hy/labels/bug", "name": "bug", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/hylang/hy/milestones/3", "html_url": "https://github.com/hylang/hy/milestone/3", "labels_url": "https://api.github.com/repos/hylang/hy/milestones/3/labels", "id": 236815, "node_id": "MDk6TWlsZXN0b25lMjM2ODE1", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "paultag", "id": 132447, "node_id": "MDQ6VXNlcjEzMjQ0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/132447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paultag", "html_url": "https://github.com/paultag", "followers_url": "https://api.github.com/users/paultag/followers", "following_url": "https://api.github.com/users/paultag/following{/other_user}", "gists_url": "https://api.github.com/users/paultag/gists{/gist_id}", "starred_url": "https://api.github.com/users/paultag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paultag/subscriptions", "organizations_url": "https://api.github.com/users/paultag/orgs", "repos_url": "https://api.github.com/users/paultag/repos", "events_url": "https://api.github.com/users/paultag/events{/privacy}", "received_events_url": "https://api.github.com/users/paultag/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2012-12-31T23:47:43Z", "updated_at": "2021-02-06T20:04:05Z", "due_on": null, "closed_at": "2021-02-06T20:04:05Z"}, "comments": 1, "created_at": "2013-03-08T12:34:46Z", "updated_at": "2013-03-10T23:23:42Z", "closed_at": "2013-03-10T23:23:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Duct macros \n", "reactions": {"url": "https://api.github.com/repos/hylang/hy/issues/36/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/hylang/hy/issues/36/timeline", "performed_via_github_app": null, "state_reason": "completed"}]