[{"url": "https://api.github.com/repos/pyodide/pyodide/issues/3776", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3776/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3776/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3776/events", "html_url": "https://github.com/pyodide/pyodide/issues/3776", "id": 1670172490, "node_id": "I_kwDOB0-w-85jjM9K", "number": 3776, "title": "`instance.ismethod` incompatible with `pyimport` / JSProxy usage", "user": {"login": "JeffersGlass", "id": 1931111, "node_id": "MDQ6VXNlcjE5MzExMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1931111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffersGlass", "html_url": "https://github.com/JeffersGlass", "followers_url": "https://api.github.com/users/JeffersGlass/followers", "following_url": "https://api.github.com/users/JeffersGlass/following{/other_user}", "gists_url": "https://api.github.com/users/JeffersGlass/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffersGlass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffersGlass/subscriptions", "organizations_url": "https://api.github.com/users/JeffersGlass/orgs", "repos_url": "https://api.github.com/users/JeffersGlass/repos", "events_url": "https://api.github.com/users/JeffersGlass/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffersGlass/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-04-16T22:36:19Z", "updated_at": "2023-04-17T12:27:02Z", "closed_at": "2023-04-17T06:39:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nUsing the `ismethod` function from the `inspect` module doesn't recognize Python methods as methods when:\r\n\r\n- The reference to the `inspect` module has been obtained using `pyimport` (2), or \r\n- Separate JSProxies of the `inspect` module and the method in question are obtained (3)\r\n\r\n### To Reproduce\r\n\r\n(1) When everything is done in Python, things work fine.\r\n```python\r\npyodide.runPython(`\r\n    import inspect\r\n    class A():\r\n        def a():\r\n            ...\r\n    instance = A()\r\n    print(f\"{inspect.ismethod(instance.a)}\")\r\n`);\r\n// True\r\n```\r\n(2) When `pyimport` is used to get a reference to the `inspect` module, `ismethod` reports False:\r\n```python\r\nconst instance = pyodide.runPython(`\r\n    class A():\r\n        def a():\r\n            ...\r\n    instance = A()\r\n    instance\r\n`);\r\nconst inspectModule = pyodide.pyimport('inspect')\r\nconsole.log('Is instance a method?', inspectModule.ismethod(instance))\r\n// False\r\n```\r\n\r\n(3) When a reference to the inspect module is grabbed from the return value of `runPython`, `ismethod` also reports false.\r\n```python\r\nconst instance = pyodide.runPython(`\r\n    class A():\r\n        def a():\r\n            ...\r\n    instance = A()\r\n    instance\r\n`);\r\nconst py_ismethod = pyodide.runPython(`\r\n    import inspect\r\n    inspect.ismethod\r\n`)\r\nconsole.log('Is instance a method?', py_ismethod(instance))\r\n```\r\n\r\n### Expected behavior\r\n\r\nI would expect `ismethod` to return True in all these situations\r\n\r\n### Environment\r\n\r\n- Pyodide Version: Tested in 0.22.1 and 0.23.1\r\n- Browser version: Chromium Version 112.0.5615.49 (Official Build) snap (64-bit)\r\n\r\n### Additional context\r\n\r\nInspired by the work in [PyScript PR 1240](https://github.com/pyscript/pyscript/pull/1240), which needs to look at whether a Python function is callable and potentially if it's a method.\r\n\r\nSimilarly, the [Signature](https://docs.python.org/3/library/inspect.html#introspecting-callables-with-the-signature-object) of a bound method reports having one additional parameter (i.e. it seems to be counting 'self') if `inspect.signature` is used in a similar way to (2) or (3) above, while running similar code directly in Python gives the (correct) answer.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3776/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3775", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3775/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3775/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3775/events", "html_url": "https://github.com/pyodide/pyodide/issues/3775", "id": 1670050045, "node_id": "I_kwDOB0-w-85jivD9", "number": 3775, "title": "urllib unknown url error", "user": {"login": "joshbernsteint", "id": 113567206, "node_id": "U_kgDOBsTl5g", "avatar_url": "https://avatars.githubusercontent.com/u/113567206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshbernsteint", "html_url": "https://github.com/joshbernsteint", "followers_url": "https://api.github.com/users/joshbernsteint/followers", "following_url": "https://api.github.com/users/joshbernsteint/following{/other_user}", "gists_url": "https://api.github.com/users/joshbernsteint/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshbernsteint/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshbernsteint/subscriptions", "organizations_url": "https://api.github.com/users/joshbernsteint/orgs", "repos_url": "https://api.github.com/users/joshbernsteint/repos", "events_url": "https://api.github.com/users/joshbernsteint/events{/privacy}", "received_events_url": "https://api.github.com/users/joshbernsteint/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-16T17:09:22Z", "updated_at": "2023-04-17T14:21:03Z", "closed_at": "2023-04-16T17:15:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhenever I try to open a URL, no matter how it is encoded, I get this error:\r\n\r\n`urllib.error.URLError: <urlopen error unknown url type: https>`\r\n\r\nThis seems to be a problem with just Pyodide, as I am unable to recreate it on my local python machine.\r\n### To Reproduce\r\n\r\n\r\n```\r\nlet temp = await loadPyodide();\r\nawait temp.pyimport(\"urllib.request\");\r\ntemp.runPython('\r\nimport urllib.request as requester\r\n\r\n\r\nlink = \"www.youtube.com/watch?v=-loDklmrbd0&list=PLvAOrbuuPJrRn3EWE7QCu27-ygrW0jnYQ\"\r\nlink = parser.quote(link)\r\n\r\nrequester.urlopen(link)\r\nprint(\"All good\")\r\n');\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\n\"All good\"\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.23.1\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Edge 112.0.1722.46 \r\n- Any other relevant information:\r\n\r\nI'm using the hosted distribution of pyodide\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->: Windows 11\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3774", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3774/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3774/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3774/events", "html_url": "https://github.com/pyodide/pyodide/issues/3774", "id": 1669286746, "node_id": "I_kwDOB0-w-85jf0ta", "number": 3774, "title": "ModuleNotFoundError: No module named 'Cython' when using pyodide build ", "user": {"login": "gabrielfougeron", "id": 8499652, "node_id": "MDQ6VXNlcjg0OTk2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8499652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabrielfougeron", "html_url": "https://github.com/gabrielfougeron", "followers_url": "https://api.github.com/users/gabrielfougeron/followers", "following_url": "https://api.github.com/users/gabrielfougeron/following{/other_user}", "gists_url": "https://api.github.com/users/gabrielfougeron/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabrielfougeron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabrielfougeron/subscriptions", "organizations_url": "https://api.github.com/users/gabrielfougeron/orgs", "repos_url": "https://api.github.com/users/gabrielfougeron/repos", "events_url": "https://api.github.com/users/gabrielfougeron/events{/privacy}", "received_events_url": "https://api.github.com/users/gabrielfougeron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-15T09:45:52Z", "updated_at": "2023-04-17T17:06:52Z", "closed_at": "2023-04-17T17:06:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen trying out the new pyodide 0.23.1, I get a \"ModuleNotFoundError: No module named 'Cython' \" error when building.\r\n\r\nThis is especially surprizing (to me) because cython is a dependency of my project.\r\n\r\n### Environment\r\n\r\npyodide_build 0.23.1\r\nemsdk 3.1.32\r\npython 3.11.3\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3770", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3770/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3770/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3770/events", "html_url": "https://github.com/pyodide/pyodide/issues/3770", "id": 1667999346, "node_id": "I_kwDOB0-w-85ja6Zy", "number": 3770, "title": "No logs when erroring on build package", "user": {"login": "pfebrer", "id": 42074085, "node_id": "MDQ6VXNlcjQyMDc0MDg1", "avatar_url": "https://avatars.githubusercontent.com/u/42074085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pfebrer", "html_url": "https://github.com/pfebrer", "followers_url": "https://api.github.com/users/pfebrer/followers", "following_url": "https://api.github.com/users/pfebrer/following{/other_user}", "gists_url": "https://api.github.com/users/pfebrer/gists{/gist_id}", "starred_url": "https://api.github.com/users/pfebrer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pfebrer/subscriptions", "organizations_url": "https://api.github.com/users/pfebrer/orgs", "repos_url": "https://api.github.com/users/pfebrer/repos", "events_url": "https://api.github.com/users/pfebrer/events{/privacy}", "received_events_url": "https://api.github.com/users/pfebrer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-04-14T10:35:39Z", "updated_at": "2023-04-17T02:30:46Z", "closed_at": "2023-04-15T08:14:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to build a package with Cyhton sources with the \"in tree\" approach.\r\n\r\nWhen running \r\n\r\n```\r\npyodide build-recipes sisl --install\r\n```\r\n\r\nI get\r\n\r\n```\r\nThe following packages are already built: boost-cpp, distutils, hashlib, libf2c, liblzma, lzma, micropip, numpy, openblas, openssl, packaging, pydecimal, pydoc_data, pyparsing,  \r\nscipy, setuptools, sqlite3, ssl, test, and tqdm                                                                                                                                   \r\nBuilding the following packages: sisl                                                                                                                                             \r\n[1/1] (thread 1) building sisl \u2819                                                            \r\nBuilding packages... \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 0/1   0% Time elapsed: 0:00:09Error building sisl. Printing build logs.                                                                                                                                         \r\nERROR: No build log found.                                                                                                                                                        \r\nERROR: cancelling buildall                                                                                                                                                        \r\n[1/1] (thread 1) building sisl \u2839                                                            \r\nBuilding packages... \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 0/1   0% Time elapsed: 0:00:09\r\n```\r\n\r\nTherefore, I have no clue what's wrong. When does an error without build logs happen? Can I get some more verbose output in some way? Thanks!\r\n\r\nI'm running this on the Docker container, after succesfully building all packages, even an old version of the package I'm trying to build.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3770/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3768", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3768/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3768/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3768/events", "html_url": "https://github.com/pyodide/pyodide/issues/3768", "id": 1667441505, "node_id": "I_kwDOB0-w-85jYyNh", "number": 3768, "title": "pyodide.http.FetchResponse throws exceptions for some requests based on the status code of the response", "user": {"login": "owenlamont", "id": 12672027, "node_id": "MDQ6VXNlcjEyNjcyMDI3", "avatar_url": "https://avatars.githubusercontent.com/u/12672027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/owenlamont", "html_url": "https://github.com/owenlamont", "followers_url": "https://api.github.com/users/owenlamont/followers", "following_url": "https://api.github.com/users/owenlamont/following{/other_user}", "gists_url": "https://api.github.com/users/owenlamont/gists{/gist_id}", "starred_url": "https://api.github.com/users/owenlamont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/owenlamont/subscriptions", "organizations_url": "https://api.github.com/users/owenlamont/orgs", "repos_url": "https://api.github.com/users/owenlamont/repos", "events_url": "https://api.github.com/users/owenlamont/events{/privacy}", "received_events_url": "https://api.github.com/users/owenlamont/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2023-04-14T03:11:43Z", "updated_at": "2023-04-25T14:03:25Z", "closed_at": "2023-04-25T12:50:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\npyodide.http.FetchResponse throws an OSError exception for some response status codes (particularly 400 response - I'm not sure which others) instead of returning them.\r\n\r\n### To Reproduce\r\n\r\n```python\r\n        <py-script>\r\n            import asyncio\r\n            import js\r\n            import pyodide.http as http\r\n\r\n            async def test_request():\r\n                try:\r\n                    response = await http.pyfetch(\r\n                        \"http://localhost:8080/end_point_that_returns_400_status\"\r\n                    )\r\n                    if response.status == 400:\r\n                        # I expected this to get hit but it doesn't\r\n                        error_msg = await response.string()\r\n                        js.alert(f\"Handled 400 response with error message: {error_msg}\")\r\n                except Exception as e:\r\n                    # This appears to be catching an OSError exception for the 400 response instead\r\n                    js.alert(e)\r\n            asyncio.ensure_future(test_request())\r\n        </py-script>\r\n```\r\n\r\nI received an alert from the exception handler like this:\r\n\r\n![image](https://user-images.githubusercontent.com/12672027/231931745-57f7d6f9-89de-43b9-9a79-fea0d57b2383.png)\r\n\r\n### Expected behavior\r\n\r\nI expected pyodide.http.FetchResponse to return the response regardless of what status code it had.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 22.1.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:  Vivaldi 5.7.2921.65 (Stable channel) (64-bit) \r\n- Any other relevant information: Using PyScript 2023.03.1 which I believe uses Pyodide 22.1.0 under the hood\r\n\r\n### Additional context\r\n\r\nI'm not sure if this is expected behaviour or not, but the [pyodide.http.FetchResponse documentation](https://pyodide.org/en/stable/usage/api/python-api/http.html#pyodide.http.FetchResponse) didn't warn that any response statuses could throw exceptions so if this behaviour is expected I think at the very least it is a documentation problem that should be addressed.\r\n\r\nFor context I was working on the front and backend of a system and I deliberately had the backend return a 400 response if the user failed to set some parameters correctly on the front end and I expected to be able to handle that response and communicate it to the user. Given the response instead throws an exception I don't think I can retrieve the additional information in the body of the response which I had planned to use.\r\n\r\nPerhaps naively I expected pyodide.http.FetchResponse to work like a httpx async get request (I'm quite new to PyScript and pyodide). If this behaviour is actually due to some PyScript issue my apologies, I'll re-raise on their repo.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3753", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3753/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3753/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3753/events", "html_url": "https://github.com/pyodide/pyodide/issues/3753", "id": 1661644821, "node_id": "I_kwDOB0-w-85jCrAV", "number": 3753, "title": "scikit-build>=0.17.0 breaks opencv-python build", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/17", "html_url": "https://github.com/pyodide/pyodide/milestone/17", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/17/labels", "id": 9230824, "node_id": "MI_kwDOB0-w-84AjNno", "number": 17, "title": "0.23.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "open", "created_at": "2023-03-31T08:26:38Z", "updated_at": "2023-04-14T10:54:11Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2023-04-11T01:51:01Z", "updated_at": "2023-04-11T06:10:33Z", "closed_at": "2023-04-11T05:24:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nopencv-python build fails with following error message.\r\n\r\n```\r\n\"/tmp/build-env-2lp7wspf/lib/python3.11/site-packages/skbuild/setuptools_wrap.py\r\n\", line 424, in setup                                                           \r\n    raise ValueError(msg)                                                       \r\nValueError: CMAKE_INSTALL_PREFIX may not be passed via cmake_args to setup. \r\n```\r\n\r\nwhich is caused by https://github.com/scikit-build/scikit-build/pull/872.\r\n\r\nWe set `CMAKE_INSTALL_PREFIX` here:\r\n\r\nhttps://github.com/pyodide/pyodide/blob/873ca14986829a9059d7b9150928b70c94fa7fbf/packages/opencv-python/cmake/build_args.sh#L91\r\n\r\n@henryiii Do you have some suggestion about handling this error?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3753/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3743", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3743/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3743/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3743/events", "html_url": "https://github.com/pyodide/pyodide/issues/3743", "id": 1657654336, "node_id": "I_kwDOB0-w-85izcxA", "number": 3743, "title": "TypeError when reusing namespaces stored in Javascript object", "user": {"login": "pawamoy", "id": 3999221, "node_id": "MDQ6VXNlcjM5OTkyMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3999221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawamoy", "html_url": "https://github.com/pawamoy", "followers_url": "https://api.github.com/users/pawamoy/followers", "following_url": "https://api.github.com/users/pawamoy/following{/other_user}", "gists_url": "https://api.github.com/users/pawamoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawamoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawamoy/subscriptions", "organizations_url": "https://api.github.com/users/pawamoy/orgs", "repos_url": "https://api.github.com/users/pawamoy/repos", "events_url": "https://api.github.com/users/pawamoy/events{/privacy}", "received_events_url": "https://api.github.com/users/pawamoy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2023-04-06T15:38:08Z", "updated_at": "2023-04-06T22:35:08Z", "closed_at": "2023-04-06T22:35:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI'm trying to manage namespaces (called sessions in my code). I identify different namespaces with different names, and store them in a global Javascript object. As instructed by [the docs](https://pyodide.org/en/stable/usage/faq.html#how-can-i-execute-code-in-a-custom-namespace), I use `pyodide.globals.get(\"dict\")();` to instantiate a namespace.\r\n\r\n```js\r\nvar _sessions = {};\r\n\r\nfunction getSession(name, pyodide) {\r\n    if (!(name in _sessions)) {\r\n        _sessions[name] = pyodide.globals.get(\"dict\")();\r\n    }\r\n    return _sessions[name];\r\n}\r\n```\r\n\r\nThen I run this to execute Python code in a given namespace:\r\n\r\n```js\r\nresult = await pyodide.runPythonAsync(code, { globals: getSession(session_name, pyodide) });\r\n// session_name being a string\r\n```\r\n\r\nYet I'm getting this error:\r\n\r\n```python\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 540, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 363, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: globals must be a real dict; try eval(expr, {}, mapping)\r\n```\r\n\r\nI'm a Python dev so please forgive my Javascript :sweat_smile: \r\n\r\n### To Reproduce\r\n\r\n```html\r\n<script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js\"></script>\r\n<h3>session a, block 1</h3>\r\n<pre><code id=\"output-a1\">output 1</code></pre>\r\n<h3>session a, block 2</h3>\r\n<pre><code id=\"output-a2\">output 2</code></pre>\r\n<h3>session b, block 1</h3>\r\n<pre><code id=\"output-b1\">output 1</code></pre>\r\n<h3>session b, block 2</h3>\r\n<pre><code id=\"output-b2\">output 2</code></pre>\r\n\r\n<script>\r\nvar _sessions = {};\r\n\r\nfunction getSession(name, pyodide, output) {\r\n    if (!(name in _sessions)) {\r\n        output.innerHTML += \"creating \" + name + \"\\n\";\r\n        _sessions[name] = pyodide.globals.get(\"dict\")();\r\n    } else {\r\n        output.innerHTML += name + \" already existed\\n\";\r\n    }\r\n    return _sessions[name];\r\n}\r\n\r\nasync function repro(output, session) {\r\n    output.innerHTML = \"loading pyodide\\n\";\r\n    let result, pyodide = await loadPyodide();\r\n    output.innerHTML += \"pyodide loaded, running code\\n\";\r\n    try {\r\n        result = await pyodide.runPythonAsync('\"hello\"', { globals: getSession(session, pyodide, output) });\r\n        output.innerHTML += \"result: \" + result;\r\n    } catch(error) {\r\n        output.innerHTML += \"error: \" + error;\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\r\n    repro(document.getElementById(\"output-a1\"), \"session-a\");\r\n    repro(document.getElementById(\"output-a2\"), \"session-a\");\r\n    repro(document.getElementById(\"output-b1\"), \"session-b\");\r\n    repro(document.getElementById(\"output-b2\"), \"session-b\");\r\n});\r\n</script>\r\n```\r\n\r\nResult in a browser:\r\n\r\n```\r\nsession a, block 1\r\n\r\nloading pyodide\r\npyodide loaded, running code\r\ncreating session-a\r\nresult: hello\r\n\r\nsession a, block 2\r\n\r\nloading pyodide\r\npyodide loaded, running code\r\nsession-a already existed\r\nerror: PythonError: Traceback (most recent call last):\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 540, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 363, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: globals must be a real dict; try eval(expr, {}, mapping)\r\n\r\nsession b, block 1\r\n\r\nloading pyodide\r\npyodide loaded, running code\r\ncreating session-b\r\nresult: hello\r\n\r\nsession b, block 2\r\n\r\nloading pyodide\r\npyodide loaded, running code\r\nsession-b already existed\r\nerror: PythonError: Traceback (most recent call last):\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 540, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 363, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: globals must be a real dict; try eval(expr, {}, mapping)\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo TypeError :slightly_smiling_face: \r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.23.0\r\n- Browser version: Firefox 111.0.1\r\n- Any other relevant information: /\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n/\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3743/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3730", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3730/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3730/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3730/events", "html_url": "https://github.com/pyodide/pyodide/issues/3730", "id": 1650757876, "node_id": "I_kwDOB0-w-85iZJD0", "number": 3730, "title": "0.23.0 xbuildenv is missing python_stdlib.zip", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/17", "html_url": "https://github.com/pyodide/pyodide/milestone/17", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/17/labels", "id": 9230824, "node_id": "MI_kwDOB0-w-84AjNno", "number": 17, "title": "0.23.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "open", "created_at": "2023-03-31T08:26:38Z", "updated_at": "2023-04-14T10:54:11Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2023-04-02T00:59:09Z", "updated_at": "2023-04-12T04:14:21Z", "closed_at": "2023-04-12T04:14:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n0.23.0 xbuildenv is missing python_stdlib.zip. I am not sure why this was not covered by our test suite.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3722", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3722/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3722/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3722/events", "html_url": "https://github.com/pyodide/pyodide/issues/3722", "id": 1648912841, "node_id": "I_kwDOB0-w-85iSGnJ", "number": 3722, "title": "Broken pyodide build /abs/path/to/module in 0.23.0", "user": {"login": "szabolcsdombi", "id": 11232402, "node_id": "MDQ6VXNlcjExMjMyNDAy", "avatar_url": "https://avatars.githubusercontent.com/u/11232402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szabolcsdombi", "html_url": "https://github.com/szabolcsdombi", "followers_url": "https://api.github.com/users/szabolcsdombi/followers", "following_url": "https://api.github.com/users/szabolcsdombi/following{/other_user}", "gists_url": "https://api.github.com/users/szabolcsdombi/gists{/gist_id}", "starred_url": "https://api.github.com/users/szabolcsdombi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szabolcsdombi/subscriptions", "organizations_url": "https://api.github.com/users/szabolcsdombi/orgs", "repos_url": "https://api.github.com/users/szabolcsdombi/repos", "events_url": "https://api.github.com/users/szabolcsdombi/events{/privacy}", "received_events_url": "https://api.github.com/users/szabolcsdombi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3255319076, "node_id": "MDU6TGFiZWwzMjU1MzE5MDc2", "url": "https://api.github.com/repos/pyodide/pyodide/labels/regression", "name": "regression", "color": "B64609", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/17", "html_url": "https://github.com/pyodide/pyodide/milestone/17", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/17/labels", "id": 9230824, "node_id": "MI_kwDOB0-w-84AjNno", "number": 17, "title": "0.23.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "open", "created_at": "2023-03-31T08:26:38Z", "updated_at": "2023-04-14T10:54:11Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2023-03-31T08:18:30Z", "updated_at": "2023-04-16T00:33:15Z", "closed_at": "2023-04-11T04:05:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nMy build pipeline started failing after upgrading to 0.23.0.\r\nIt complains about the `PYODIDE_EMSCRIPTEN_VERSION` env variable if the cwd is different from the `[SOURCE_LOCATION]` argument.\r\n\r\nI used to build my extensions with an absolute path to them:\r\n\r\n```\r\npyodide build /abs/path/to/module\r\n```\r\n\r\nIf the cwd is changed to `/abs/path/to/module` then the Key error for the `PYODIDE_EMSCRIPTEN_VERSION` is not longer present. And the very same command (with the abs path in the arguments) is executed, the build passes.\r\n\r\nHere is the stack trace:\r\n\r\n```\r\n#0 0.664 \u2502 /usr/local/lib/python3.11/site-packages/pyodide_build/common.py:199 in       \u2502\r\n#0 0.664 \u2502 get_make_flag                                                                \u2502\r\n#0 0.664 \u2502                                                                              \u2502\r\n#0 0.664 \u2502   196 \u2502   \u2502   SIDE_MODULE_CFLAGS                                             \u2502\r\n#0 0.664 \u2502   197 \u2502   \u2502   SIDE_MODULE_CXXFLAGS                                           \u2502\r\n#0 0.664 \u2502   198 \u2502   \"\"\"                                                                \u2502\r\n#0 0.664 \u2502 \u2771 199 \u2502   return get_make_environment_vars()[name]                           \u2502\r\n#0 0.664 \u2502   200                                                                        \u2502\r\n#0 0.664 \u2502   201                                                                        \u2502\r\n#0 0.664 \u2502   202 def get_pyversion() -> str:                                            \u2502\r\n#0 0.664 \u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\r\n#0 0.664 KeyError: 'PYODIDE_EMSCRIPTEN_VERSION'\r\n```\r\n\r\n### To Reproduce\r\n\r\nUncomment the `WORKDIR /zengl/` to get the same build passing.\r\n\r\n```Dockerfile\r\nFROM python:3.11.2\r\nRUN python3 -m pip install pyodide-build==0.23.0\r\nRUN git clone https://github.com/emscripten-core/emsdk.git &&\\\r\n    /emsdk/emsdk install `pyodide config get emscripten_version` &&\\\r\n    /emsdk/emsdk activate `pyodide config get emscripten_version`\r\n\r\nRUN wget -q https://f003.backblazeb2.com/file/zengl-data/examples/web-example-assets.tar.gz\r\n\r\nRUN git clone https://github.com/szabolcsdombi/zengl /zengl\r\n# WORKDIR /zengl/\r\nRUN echo 'source /emsdk/emsdk_env.sh && pyodide build /zengl/' | bash\r\n```\r\n\r\n### Expected behavior\r\n\r\nthe CWD should not affect the lookup of the env variables.\r\nthe CWD should not affect the build when an absolute path is given.\r\n\r\n### Environment\r\n\r\n- Pyodide Version 0.23.0\r\n- Browser version not relevant\r\n- Any other relevant information:\r\n- pyodide-build==0.23.0\r\n- emscripten_version 3.1.32\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\nBuild environment: Docker official Python 3.11.2 image\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3717", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3717/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3717/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3717/events", "html_url": "https://github.com/pyodide/pyodide/issues/3717", "id": 1648483473, "node_id": "I_kwDOB0-w-85iQdyR", "number": 3717, "title": "Should detect when a PyProxy is used with GIL released", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-31T00:11:46Z", "updated_at": "2023-04-01T18:27:51Z", "closed_at": "2023-04-01T18:27:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThe following code attempts to use a PyProxy with the GIL released.\r\n```js\r\npyodide = await loadPyodide({stdout: (msg) => pyodide.globals.get(\"x\")});\r\npyodide.runPython(\"print(1)\")\r\n```\r\nChaos ensues:\r\n![Screenshot from 2023-03-30 17-10-59](https://user-images.githubusercontent.com/8739626/228991469-89a3a430-8484-474a-94dd-5c1ab085b060.png)\r\n\r\n\r\n### Expected behavior\r\n\r\nThrow a reasonable no-gil error. Don't fatally fail.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3717/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3706", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3706/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3706/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3706/events", "html_url": "https://github.com/pyodide/pyodide/issues/3706", "id": 1644597116, "node_id": "I_kwDOB0-w-85iBo98", "number": 3706, "title": "Fix test_js_stackframes[firefox] / reapply esbuild", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/16", "html_url": "https://github.com/pyodide/pyodide/milestone/16", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/16/labels", "id": 9205612, "node_id": "MI_kwDOB0-w-84AjHds", "number": 16, "title": "0.24.0", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 1, "state": "open", "created_at": "2023-03-25T10:36:19Z", "updated_at": "2023-03-31T07:30:24Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2023-03-28T20:14:09Z", "updated_at": "2023-03-31T07:30:25Z", "closed_at": "2023-03-31T07:30:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Opening an issue to not forget to fix ` test_js_stackframes[firefox]` following  https://github.com/pyodide/pyodide/pull/3679\r\n\r\nFor now, I'm going to xfail it, as I'm not sure what is the best fix for it and it makes CI in other PRs fail.\r\n\r\nBefore that PR  in the result of the test (before applying `normalize_tb`) we had,\r\n```\r\n(Pdb) for row in res[: len(frames)]: print(row)\r\n['<exec>', 'e']\r\n['http://127.0.0.1:42119/test.html', 'd4']\r\n['http://127.0.0.1:42119/test.html', 'd3']\r\n['http://127.0.0.1:42119/test.html', 'd2']\r\n['http://127.0.0.1:42119/test.html', 'd1']\r\n['http://127.0.0.1:42119/pyodide.asm.js', 'runPython']\r\n['/lib/python311.zip/_pyodide/_base.py', 'eval_code']\r\n['/lib/python311.zip/_pyodide/_base.py', 'run']\r\n['<exec>', '<module>']\r\n['<exec>', 'c2']\r\n['<exec>', 'c1']\r\n['http://127.0.0.1:42119/test.html', 'b']\r\n['http://127.0.0.1:42119/pyodide.asm.js', 'pyimport']\r\n['/lib/python311.zip/importlib/__init__.py', 'import_module']\r\n```\r\nafter the PR we have,\r\n```\r\n['<exec>', 'e']\r\n['/lib/python311.zip/_pyodide/_base.py', 'eval_code']\r\n['/lib/python311.zip/_pyodide/_base.py', 'run']\r\n['<exec>', '<module>']\r\n['<exec>', 'c2']\r\n['<exec>', 'c1']\r\n['/lib/python311.zip/importlib/__init__.py', 'import_module']\r\n['<frozen importlib._bootstrap>', '_gcd_import']\r\n['<frozen importlib._bootstrap>', '_find_and_load']\r\n['<frozen importlib._bootstrap>', '_find_and_load_unlocked']\r\n```\r\n\r\nso it's rather similar but shifted a bit and we might need to adapt `normalize_tb` to make it match to the expected output. However, I'm a bit concerned that `pyodide.asm.js` is no longer in the traceback  (which was rather useful for debugging). Any ideas why or how to re-enable it? Because it looks like it is present in Chrome still.  And BTW we xfail that test for safari. \r\n\r\ncc @hoodmane  @WebReflection ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3706/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3678", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3678/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3678/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3678/events", "html_url": "https://github.com/pyodide/pyodide/issues/3678", "id": 1633517603, "node_id": "I_kwDOB0-w-85hXYAj", "number": 3678, "title": "Python async generator is not async interable", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/14", "html_url": "https://github.com/pyodide/pyodide/milestone/14", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/14/labels", "id": 8433340, "node_id": "MI_kwDOB0-w-84AgK68", "number": 14, "title": "0.23.0", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2022-09-17T12:08:32Z", "updated_at": "2023-03-31T08:26:42Z", "due_on": null, "closed_at": "2023-03-31T08:26:42Z"}, "comments": 0, "created_at": "2023-03-21T09:29:08Z", "updated_at": "2023-03-29T06:29:19Z", "closed_at": "2023-03-29T06:29:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nPython async generator is not async interable\r\n\r\n### To Reproduce\r\n\r\n```js\r\nlet async_gen_func = pyodide.runPython(`\r\nasync def async_gen_func():\r\n   yield 1\r\n   yield 2\r\n   yield 3\r\nasync_gen_func\r\n`);\r\nlet async_gen = async_gen_func();\r\nconsole.log(async_gen[Symbol.asyncIterator]); // undefined but shouldn't be!\r\n\r\n// TypeError: async_gen is not async iterable\r\nfor await (let x of async_gen){\r\n    console.log(x);\r\n} \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3678/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3643", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3643/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3643/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3643/events", "html_url": "https://github.com/pyodide/pyodide/issues/3643", "id": 1615600452, "node_id": "I_kwDOB0-w-85gTBtE", "number": 3643, "title": "Deploy of pyodide-py 0.22.1 failed", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-08T16:57:26Z", "updated_at": "2023-04-24T07:58:48Z", "closed_at": "2023-04-24T07:58:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@rth @ryanking13 looks like some sort of permissions error?\r\nhttps://github.com/pyodide/pyodide/actions/runs/4009744299/jobs/6885453512", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3643/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3643/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3640", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3640/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3640/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3640/events", "html_url": "https://github.com/pyodide/pyodide/issues/3640", "id": 1615056623, "node_id": "I_kwDOB0-w-85gQ87v", "number": 3640, "title": "New signature mismatch in `scipy.sparse.linalg.svds`", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640941765, "node_id": "MDU6TGFiZWwxNjQwOTQxNzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scipy", "name": "scipy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-08T10:43:40Z", "updated_at": "2023-03-16T23:59:18Z", "closed_at": "2023-03-16T23:59:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI am seeing new fatal errors in the scipy test suite in https://github.com/lesteve/scipy-tests-pyodide since a few days ago. They are likely related to the numpy version upgrade in #3593 although I have no idea why.\r\n\r\n### To Reproduce\r\n\r\nYou can reproduce it with the [Pyodide alpha console](https://pyodide.org/en/latest/console.html) and the following snippet:\r\n\r\n```py\r\nimport numpy as np\r\n\r\nfrom scipy.sparse.linalg import svds\r\n\r\nrng = np.random.default_rng(0)\r\nA = rng.random((10, 10))\r\n\r\nres = svds(A, k=3, which='LM', random_state=0)\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.11/site-packages/scipy/sparse/linalg/_eigen/arpack/arpack.py\", line 578 in extract\r\n  File \"/lib/python3.11/site-packages/scipy/sparse/linalg/_eigen/arpack/arpack.py\", line 1691 in eigsh\r\n  File \"/lib/python3.11/site-packages/scipy/sparse/linalg/_eigen/_svds.py\", line 339 in svds\r\n  File \"<console>\", line 1 in <module>\r\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 363 in run_async\r\n  File \"/lib/python311.zip/pyodide/console.py\", line 378 in runcode\r\n  File \"/lib/python311.zip/pyodide/console.py\", line 492 in runcode\r\n  File \"/lib/python311.zip/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python311.zip/pyodide/webloop.py\", line 319 in run_handle\r\n\r\nUncaught RuntimeError: null function or function signature mismatch\r\n    at f2py_rout__arpack_dseupd (000ffae6:0x5e92)\r\n    at fortran_call (0003ecf2:0x65ac)\r\n    at _PyCFunctionWithKeywords_TrampolineCall (pyodide.asm.js:1375:97)\r\n    at _PyObject_MakeTpCall (pyodide.asm.wasm:0x199bba)\r\n    at PyObject_Vectorcall (pyodide.asm.wasm:0x19a1a4)\r\n    at _PyEval_EvalFrameDefault (pyodide.asm.wasm:0x25f947)\r\n    at PyEval_EvalCode (pyodide.asm.wasm:0x255ed8)\r\n    at builtin_eval (pyodide.asm.wasm:0x2531d6)\r\n    at _PyEval_EvalFrameDefault (pyodide.asm.wasm:0x25e78b)\r\n    at gen_send_ex2 (pyodide.asm.wasm:0x1adc62)\r\n```\r\n\r\nDebugging a bit more, the function is called with 23 arguments:\r\n```\r\ncall_indirect (param i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32) (result i32)\r\n```\r\n\r\nbut has 25 arguments:\r\n```\r\n(func $dseupd_ (;219;) (export \"dseupd_\") (param $var0 i32) (param $var1 i32) (param $var2 i32) (param $var3 i32) (param $var4 i32) (param $var5 i32) (param $var6 i32) (param $var7 i32) (param $var8 i32) (param $var9 i32) (param $var10 i32) (param $var11 i32) (param $var12 i32) (param $var13 i32) (param $var14 i32) (param $var15 i32) (param $var16 i32) (param $var17 i32) (param $var18 i32) (param $var19 i32) (param $var20 i32) (param $var21 i32) (param $var22 i32) (param $var23 i32) (param $var24 i32) (result i32)\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo fatal error\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: alpha\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3640/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 2, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3640/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3623", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3623/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3623/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3623/events", "html_url": "https://github.com/pyodide/pyodide/issues/3623", "id": 1606856661, "node_id": "I_kwDOB0-w-85fxq_V", "number": 3623, "title": "CircleCI fails to checkout repo on main branch", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-02T13:58:33Z", "updated_at": "2023-03-03T09:06:41Z", "closed_at": "2023-03-03T08:43:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Works fine on branches / prs. Because of this our latest console hasn't been updated since February 20th.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3612", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3612/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3612/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3612/events", "html_url": "https://github.com/pyodide/pyodide/issues/3612", "id": 1600356359, "node_id": "I_kwDOB0-w-85fY4AH", "number": 3612, "title": "mypyc is failing to build in CI", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-27T02:46:38Z", "updated_at": "2023-02-28T09:46:02Z", "closed_at": "2023-02-28T09:46:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See: https://github.com/python/mypy/pull/14788", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3612/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3612/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3603", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3603/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3603/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3603/events", "html_url": "https://github.com/pyodide/pyodide/issues/3603", "id": 1596025105, "node_id": "I_kwDOB0-w-85fIWkR", "number": 3603, "title": "Navigation for documentation site isn't responsive between 959px and 768px", "user": {"login": "LadyBluenotes", "id": 98355961, "node_id": "U_kgDOBdzK-Q", "avatar_url": "https://avatars.githubusercontent.com/u/98355961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LadyBluenotes", "html_url": "https://github.com/LadyBluenotes", "followers_url": "https://api.github.com/users/LadyBluenotes/followers", "following_url": "https://api.github.com/users/LadyBluenotes/following{/other_user}", "gists_url": "https://api.github.com/users/LadyBluenotes/gists{/gist_id}", "starred_url": "https://api.github.com/users/LadyBluenotes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LadyBluenotes/subscriptions", "organizations_url": "https://api.github.com/users/LadyBluenotes/orgs", "repos_url": "https://api.github.com/users/LadyBluenotes/repos", "events_url": "https://api.github.com/users/LadyBluenotes/events{/privacy}", "received_events_url": "https://api.github.com/users/LadyBluenotes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-23T00:15:03Z", "updated_at": "2023-02-23T11:05:09Z", "closed_at": "2023-02-23T10:57:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen the navbar is below 970px the primary side bar does not expand. When toggling secondary sidebar, entire screen is greyed out so finding it is difficult.\r\n\r\n### To Reproduce\r\n\r\nUsing screen sizes between ~970 and 768px.\r\n\r\n### Expected behaviour\r\n\r\nShould follow suit of navbars under 768px.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3601", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3601/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3601/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3601/events", "html_url": "https://github.com/pyodide/pyodide/issues/3601", "id": 1594096793, "node_id": "I_kwDOB0-w-85fA_yZ", "number": 3601, "title": "GH Actions are broken for main branch", "user": {"login": "tubaman", "id": 197814, "node_id": "MDQ6VXNlcjE5NzgxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/197814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tubaman", "html_url": "https://github.com/tubaman", "followers_url": "https://api.github.com/users/tubaman/followers", "following_url": "https://api.github.com/users/tubaman/following{/other_user}", "gists_url": "https://api.github.com/users/tubaman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tubaman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tubaman/subscriptions", "organizations_url": "https://api.github.com/users/tubaman/orgs", "repos_url": "https://api.github.com/users/tubaman/repos", "events_url": "https://api.github.com/users/tubaman/events{/privacy}", "received_events_url": "https://api.github.com/users/tubaman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-21T21:03:36Z", "updated_at": "2023-03-04T12:07:15Z", "closed_at": "2023-03-04T12:07:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThe GH Actions aren't passing for the main branch.\r\nThe following stages are failing:\r\n\r\n   * [lint](https://github.com/pyodide/pyodide/actions/runs/4236786417/jobs/7361997963)\r\n   * [CircleCI](https://app.circleci.com/pipelines/github/pyodide/pyodide/5351)\r\n\r\n### To Reproduce\r\n\r\nI've created a PR with a trivial change here: #3600 \r\n\r\n### Expected behavior\r\n\r\nI expect the GH actions to all pass on the main branch so that actions on PRs shows what's broken about the PR.\r\n\r\n### Environment\r\n\r\nCommit hash of Pyodide git repository: main branch (862e4f8877de00028ba8c4b1200e7e8e914cf1ae)\r\nBuild environment: GH actions\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3601/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3601/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3595", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3595/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3595/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3595/events", "html_url": "https://github.com/pyodide/pyodide/issues/3595", "id": 1590731226, "node_id": "I_kwDOB0-w-85e0KHa", "number": 3595, "title": "Pyodide Fails to Build on MacOS", "user": {"login": "Grey41", "id": 85015029, "node_id": "MDQ6VXNlcjg1MDE1MDI5", "avatar_url": "https://avatars.githubusercontent.com/u/85015029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Grey41", "html_url": "https://github.com/Grey41", "followers_url": "https://api.github.com/users/Grey41/followers", "following_url": "https://api.github.com/users/Grey41/following{/other_user}", "gists_url": "https://api.github.com/users/Grey41/gists{/gist_id}", "starred_url": "https://api.github.com/users/Grey41/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Grey41/subscriptions", "organizations_url": "https://api.github.com/users/Grey41/orgs", "repos_url": "https://api.github.com/users/Grey41/repos", "events_url": "https://api.github.com/users/Grey41/events{/privacy}", "received_events_url": "https://api.github.com/users/Grey41/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-02-19T15:29:41Z", "updated_at": "2023-02-21T00:20:05Z", "closed_at": "2023-02-19T15:43:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "A TypeScript error is raised when I try to build natively.\r\n\r\nI am using a Silicon - ARM - processor to compile Pyodide. Although the Docker build compiles successfully, it takes a very long time. When I try to compile natively instead, I get the following output:\r\n\r\n```\r\n./src/js/pyodide.ts \u2192 dist/pyodide.mjs...\r\n[!] (plugin Typescript) TS1134: Variable declaration expected.\r\nsrc/js/pyproxy.gen.ts (57:13)\r\n\r\n57 declare var (1 << 8): number;\r\n               ~\r\n```\r\n\r\nHow can I fix this?\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3578", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3578/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3578/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3578/events", "html_url": "https://github.com/pyodide/pyodide/issues/3578", "id": 1582379693, "node_id": "I_kwDOB0-w-85eUTKt", "number": 3578, "title": "Global namespace not accessible within a function", "user": {"login": "ondrej-stanek-ozobot", "id": 63793133, "node_id": "MDQ6VXNlcjYzNzkzMTMz", "avatar_url": "https://avatars.githubusercontent.com/u/63793133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ondrej-stanek-ozobot", "html_url": "https://github.com/ondrej-stanek-ozobot", "followers_url": "https://api.github.com/users/ondrej-stanek-ozobot/followers", "following_url": "https://api.github.com/users/ondrej-stanek-ozobot/following{/other_user}", "gists_url": "https://api.github.com/users/ondrej-stanek-ozobot/gists{/gist_id}", "starred_url": "https://api.github.com/users/ondrej-stanek-ozobot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ondrej-stanek-ozobot/subscriptions", "organizations_url": "https://api.github.com/users/ondrej-stanek-ozobot/orgs", "repos_url": "https://api.github.com/users/ondrej-stanek-ozobot/repos", "events_url": "https://api.github.com/users/ondrej-stanek-ozobot/events{/privacy}", "received_events_url": "https://api.github.com/users/ondrej-stanek-ozobot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-02-13T13:43:59Z", "updated_at": "2023-03-02T23:54:22Z", "closed_at": "2023-03-02T23:54:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nA globally declared variable cannot be read in a function:\r\n\r\n```\r\nglobVar = \"Hello\"\r\ndef test():\r\n    print(globVar)\r\n\r\ntest()\r\n```\r\ngives error:\r\n```\r\nNameError: name 'globVar' is not defined\r\n```\r\nInterestingly, when used with the `global` keyword, it works:\r\n\r\n```\r\nglobVar = \"Hello\"\r\ndef test():\r\n    global globVar\r\n    print(globVar)\r\n\r\ntest()\r\n```\r\nprints\r\n```\r\nHello\r\n```\r\n\r\nThis issue only happens when the python code is passed to the function `pyodide.pyodide_py.code.eval_code`. The bug is not present when the code is executed with `pyodide.runPython`, such as in the [console.html](https://pyodide.org/en/stable/console.html).\r\n\r\n### To Reproduce\r\n\r\nRun a slightly modified demo from the [Getting Started page](https://pyodide.org/en/stable/usage/quickstart.html) of pyodide:\r\n\r\n```\r\n<!doctype html>\r\n<html>\r\n  <head>\r\n      <script src=\"https://cdn.jsdelivr.net/pyodide/v0.22.1/full/pyodide.js\"></script>\r\n  </head>\r\n  <body>\r\n    Pyodide test page <br>\r\n    Open your browser console to see Pyodide output\r\n    <script type=\"text/javascript\">\r\n      async function main(){\r\n        let pyodide = await loadPyodide();\r\n        console.log(pyodide.pyodide_py.code.eval_code(`\r\n            globVar = \"Hello\"\r\n            def test():\r\n                print(globVar)\r\n\r\n            test()\r\n        `));\r\n      }\r\n      main();\r\n    </script>\r\n  </body>\r\n</html>\r\n```\r\n\r\n### Expected behavior\r\n\r\nWhen the page above is opened in a web browser, it should print \"Hello\" to console. Instead, it throws a NameError: name 'globVar' is not defined:\r\n\r\n```\r\npyodide.asm.js:10 Uncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 460, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 306, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 6, in <module>\r\n  File \"<exec>\", line 4, in test\r\nNameError: name 'globVar' is not defined\r\n\r\n    at new_error (pyodide.asm.js:10:180810)\r\n    at pyodide.asm.wasm:0xe78a8\r\n    at pyodide.asm.wasm:0xe79ad\r\n    at Module._pythonexc2js (pyodide.asm.js:10:929422)\r\n    at Module.callPyObjectKwargs (pyodide.asm.js:10:123563)\r\n    at Module.callPyObject (pyodide.asm.js:10:123772)\r\n    at PyProxyClass.apply (pyodide.asm.js:10:134742)\r\n    at Object.apply (pyodide.asm.js:10:133736)\r\n    at main (bug.html:12:45)\r\nnew_error\t@\tpyodide.asm.js:10\r\n$wrap_exception\t@\tpyodide.asm.wasm:0xe78a8\r\n$pythonexc2js\t@\tpyodide.asm.wasm:0xe79ad\r\nModule._pythonexc2js\t@\tpyodide.asm.js:10\r\nModule.callPyObjectKwargs\t@\tpyodide.asm.js:10\r\nModule.callPyObject\t@\tpyodide.asm.js:10\r\napply\t@\tpyodide.asm.js:10\r\napply\t@\tpyodide.asm.js:10\r\nmain\t@\tbug.html:12\r\nawait in main (async)\t\t\r\n(anonymous)\t@\tbug.html:20\r\n```\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version 0.22.1:\r\n- Browser version : Version 110.0.5481.77 (Official Build) (64-bit)\r\n\r\nBuild from commit `5ef5622414f0fe8ab8c54694e04ab1b13939b7d4` (tagged `0.22.1`), but can be reproduced as well with the CDN build on https://cdn.jsdelivr.net/pyodide/v0.22.1/full/pyodide.js\r\n\r\n### Additional context\r\n\r\nThe issue only happens when the code is invoked using the [eval_code](https://github.com/pyodide/pyodide/blob/main/src/py/_pyodide/_base.py#L362) function. \r\n\r\nThe documentation for the function assumes the `eval_code` can be called with `globals` argument set to `None`, and then an empty dictionary will be created. We relied on this feature since pyodide v0.17. In pyodide v0.18, the issue with global variables appeared and we tested and encountered the issue again in version v0.22.1. Is this behavior of hiding global variables a bug?\r\n```\r\n    globals :\r\n        The global scope in which to execute code. This is used as the\r\n        ``globals`` parameter for :py:func:`exec`. If ``globals`` is absent, a new\r\n        empty dictionary is used.\r\n``` ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3578/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3565", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3565/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3565/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3565/events", "html_url": "https://github.com/pyodide/pyodide/issues/3565", "id": 1578798321, "node_id": "I_kwDOB0-w-85eGozx", "number": 3565, "title": "Issue in building rust-based packages in parallel", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-10T00:09:55Z", "updated_at": "2023-02-27T05:55:05Z", "closed_at": "2023-02-27T05:55:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We are having some issue when building multiple rust-based packages in parallel.\r\n\r\nFor example, see: https://app.circleci.com/pipelines/github/pyodide/pyodide/5328/workflows/a0ced892-ac1a-4519-984c-d98a84fabe29/jobs/66900\r\n\r\nIt is expected behavior since `rustup` was not designed for concurrent use (https://github.com/rust-lang/rustup/issues/988).\r\n\r\nSome possible workarounds that I can think of are:\r\n\r\n1. Add some logic to not build rust-baed packages in parallel\r\n2. Create a fresh local rust build environment everytime when building rust-based package. I found a Python package called [rustenv](https://github.com/chriskuehl/rustenv), which is designed for that purpose. It is a ~150LoC script, which basically installs rust every time from `https://sh.rustup.rs` into a local directory.\r\n\r\nI slightly prefer option 1, as we don't have to be responsible for installing build requirements. But I have no strong opinion.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3561", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3561/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3561/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3561/events", "html_url": "https://github.com/pyodide/pyodide/issues/3561", "id": 1577304272, "node_id": "I_kwDOB0-w-85eA8DQ", "number": 3561, "title": "Error about `--user` and `--target` flag when installing xbuildenv", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-09T06:10:43Z", "updated_at": "2023-02-10T00:17:55Z", "closed_at": "2023-02-10T00:17:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I sometimes get following error while installing xbuild environment:\r\n\r\n```bash\r\n$ pyodide build .\r\nDownloading xbuild environment\r\nInstalling xbuild environment\r\n  stderr:\r\n    ERROR: Can not combine '--user' and '--target'\r\n\r\n    [notice] A new release of pip available: 22.3.1 -> 23.0\r\n    [notice] To update, run: /home/gitpod/.pyenv/versions/3.10.2/bin/python -m pip install --upgrade pip\r\n```\r\n\r\nIt happens here, which installs host site packages:\r\n\r\nhttps://github.com/pyodide/pyodide/blob/7cc1058358242a5a9012edbb8163d86a860a1a28/pyodide-build/pyodide_build/install_xbuildenv.py#L50-L57\r\n\r\nI think we need to add `--no-user` flag explicitly to prevent this error.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3561/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3513", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3513/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3513/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3513/events", "html_url": "https://github.com/pyodide/pyodide/issues/3513", "id": 1558922841, "node_id": "I_kwDOB0-w-85c60ZZ", "number": 3513, "title": "CSS broken in latest docs", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-26T23:22:18Z", "updated_at": "2023-02-04T13:49:13Z", "closed_at": "2023-02-04T13:49:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n![image](https://user-images.githubusercontent.com/24893111/214972488-e914fb00-d431-4354-9bdd-bf4b67f76516.png)\r\n\r\nIt seems like the versionwarning banner is not displayed correctly in latest docs.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3493", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3493/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3493/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3493/events", "html_url": "https://github.com/pyodide/pyodide/issues/3493", "id": 1552856705, "node_id": "I_kwDOB0-w-85cjraB", "number": 3493, "title": "Detecting Pyodide, at build time", "user": {"login": "gabrielfougeron", "id": 8499652, "node_id": "MDQ6VXNlcjg0OTk2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8499652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabrielfougeron", "html_url": "https://github.com/gabrielfougeron", "followers_url": "https://api.github.com/users/gabrielfougeron/followers", "following_url": "https://api.github.com/users/gabrielfougeron/following{/other_user}", "gists_url": "https://api.github.com/users/gabrielfougeron/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabrielfougeron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabrielfougeron/subscriptions", "organizations_url": "https://api.github.com/users/gabrielfougeron/orgs", "repos_url": "https://api.github.com/users/gabrielfougeron/repos", "events_url": "https://api.github.com/users/gabrielfougeron/events{/privacy}", "received_events_url": "https://api.github.com/users/gabrielfougeron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 2, "created_at": "2023-01-23T10:31:48Z", "updated_at": "2023-01-24T01:09:33Z", "closed_at": "2023-01-24T01:09:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udcda Documentation\r\n\r\nThe current documentation reads:\r\n\r\nTo detect Pyodide, at build time use,\r\n\r\n```\r\nimport os\r\n\r\nif \"PYODIDE\" in os.environ:\r\n    # building for Pyodide\r\n```\r\n\r\nThis used to work on my computer using pyodide-build v0.21.\r\n\r\nWhen I tried it using pyodide-build v0.22 however, the test `if \"PYODIDE\" in os.environ` returned false.\r\n\r\nInspecting my `os.environ`, I changed the test to `if (\"PYODIDE_ROOT\" in os.environ):`, and my setup.py detects when the code is being built with pyodide.\r\n\r\nThis lead me to believe the docs needed updating. However, searching the pyodide repo, I saw `if \"PYODIDE\" in os.environ` in the following patch file: https://github.com/pyodide/pyodide/blob/main/packages/Pillow/patches/0001-Enable-image-formats.patch\r\n\r\nSo I'm not really sure anymore ...", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3493/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3486", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3486/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3486/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3486/events", "html_url": "https://github.com/pyodide/pyodide/issues/3486", "id": 1552002384, "node_id": "I_kwDOB0-w-85cga1Q", "number": 3486, "title": "Possible bug: Pyodide has suffered a fatal error with tag [object Object]", "user": {"login": "ulmemxpoc", "id": 123284914, "node_id": "U_kgDOB1ktsg", "avatar_url": "https://avatars.githubusercontent.com/u/123284914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ulmemxpoc", "html_url": "https://github.com/ulmemxpoc", "followers_url": "https://api.github.com/users/ulmemxpoc/followers", "following_url": "https://api.github.com/users/ulmemxpoc/following{/other_user}", "gists_url": "https://api.github.com/users/ulmemxpoc/gists{/gist_id}", "starred_url": "https://api.github.com/users/ulmemxpoc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ulmemxpoc/subscriptions", "organizations_url": "https://api.github.com/users/ulmemxpoc/orgs", "repos_url": "https://api.github.com/users/ulmemxpoc/repos", "events_url": "https://api.github.com/users/ulmemxpoc/events{/privacy}", "received_events_url": "https://api.github.com/users/ulmemxpoc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-01-22T04:35:34Z", "updated_at": "2023-01-25T02:11:12Z", "closed_at": "2023-01-25T02:11:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n```\r\nPyodide has suffered a fatal error. Please report this to the Pyodide maintainers. pyodide.asm.js:10:154032\r\n    fatal_error pyodide.asm.js:10\r\n    callPyObjectKwargs pyodide.asm.js:10\r\n    callPyObject pyodide.asm.js:10\r\n    apply pyodide.asm.js:10\r\n    apply pyodide.asm.js:10\r\n    runPython pyodide.asm.js:10\r\nThe cause of the fatal error was: pyodide.asm.js:10:154132\r\nError: A value of type object with tag [object Object] was thrown as an error!\r\nString interpolation of the thrown value gives \"\"\"[object Object]\"\"\".\r\nThe thrown value's toString method returns \"\"\"[object Object]\"\"\".\r\n```\r\n\r\n### To Reproduce (console for extra info)\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pyodide/0.22.0/pyodide.min.js\"></script>\r\n  </head>\r\n\r\n  <body>\r\n    <textarea readonly id=\"output\" rows=24 cols=80></textarea>\r\n  </body>\r\n\r\n  <script>\r\n    async function main() {\r\n      const output = document.getElementById(\"output\");\r\n      let pyodide = await loadPyodide({indexURL: \"https://cdn.jsdelivr.net/pyodide/v0.22.0/full/\"});\r\n      console.log(\"pyodide loaded\");\r\n\r\n      await pyodide.loadPackage(\"micropip\");\r\n      const micropip = pyodide.pyimport(\"micropip\");\r\n      console.log(\"micropip loaded\");\r\n      await micropip.install(\"mypy\");\r\n      console.log(\"mypy loaded\");\r\n\r\n      try {\r\n        pyodide.runPython(`\r\n          import io\r\n          import sys\r\n          sys.stdout = io.StringIO()\r\n        `);\r\n        console.log(\"setup loaded. Wait. Next part will take some time.\");\r\n\r\n        pyodide.runPython(`\r\n          import mypy.main\r\n          with open(\"test.py\", \"w\") as f:\r\n              f.write('def test() -> None: return 5')\r\n          mypy.main.main(args=[\"test.py\"])\r\n        `);\r\n        console.log(\"code loaded\");\r\n\r\n        output.value = pyodide.runPython(`\r\n          sys.stdout.getvalue()\r\n        `);\r\n        console.log(\"done\");\r\n      } catch (err) {\r\n        output.value = err;\r\n        console.log(\"error\");\r\n      }\r\n\r\n      return pyodide;\r\n    }\r\n\r\n    main();\r\n  </script>\r\n</html>\r\n```\r\n\r\n### Expected behavior\r\n\r\nExpected Pyodide to not crash. Expected output is (from `mypy`):\r\n```\r\ntest.py:1: error: No return value expected  [return-value]\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\nCode can be run local (`pip install mypy`):\r\n```py\r\nimport mypy.main\r\n\r\nwith open(\"test.py\", \"w\") as f:\r\n    f.write('def test() -> None: return 5')\r\n\r\nmypy.main.main(args=[\"test.py\"])\r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.22.0 from CDN (see HTML above)\r\n- Browser version: all\r\n- Any other relevant information: none\r\n\r\n### Additional context\r\n\r\nTrying to run `mypy` on file in MEMFS (default). Workarounds accepted.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3478", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3478/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3478/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3478/events", "html_url": "https://github.com/pyodide/pyodide/issues/3478", "id": 1548649583, "node_id": "I_kwDOB0-w-85cToRv", "number": 3478, "title": "Extras are being loaded, despite not being requested afaict", "user": {"login": "DavidMulder0", "id": 20395438, "node_id": "MDQ6VXNlcjIwMzk1NDM4", "avatar_url": "https://avatars.githubusercontent.com/u/20395438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidMulder0", "html_url": "https://github.com/DavidMulder0", "followers_url": "https://api.github.com/users/DavidMulder0/followers", "following_url": "https://api.github.com/users/DavidMulder0/following{/other_user}", "gists_url": "https://api.github.com/users/DavidMulder0/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidMulder0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidMulder0/subscriptions", "organizations_url": "https://api.github.com/users/DavidMulder0/orgs", "repos_url": "https://api.github.com/users/DavidMulder0/repos", "events_url": "https://api.github.com/users/DavidMulder0/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidMulder0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-19T07:35:25Z", "updated_at": "2023-01-22T08:13:03Z", "closed_at": "2023-01-22T08:13:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n```\r\nconst pyodide = await loadPyodide();\r\nawait pyodide.loadPackage(\"micropip\");\r\nconst micropip = pyodide.pyimport(\"micropip\");\r\nawait micropip.install('lxml');\r\n```\r\n\r\nResults in loading `beautifulsoup4, soupsieve, cssselect, html5lib, webencodings, six` as well.\r\n\r\nLooking manually at https://pypi.org/pypi/lxml/json I see\r\n\r\n```\r\nrequires_dist: [ \r\n  \"cssselect (>=0.7) ; extra == 'cssselect'\",\r\n  \"html5lib ; extra == 'html5'\",\r\n  \"BeautifulSoup4 ; extra == 'htmlsoup'\",\r\n  \"Cython (>=0.29.7) ; extra == 'source'\"\r\n]\r\n```\r\n\r\nwhich I understand to mean that those dependencies should only be installed if requested.\r\n\r\n### Expected behavior\r\n\r\nFor extras not to be loaded unless specified.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: v0.22.0\r\n\r\n### Additional context\r\n\r\nFor that matter, no matter what I try the `Deps=False` option on `micropip.install` doesn't seem to stop installing the dependencies either (formats I tried were from js `micropip.install('lxml', false, false);` and `await micropip.install('lxml', {deps: false);` and from python `await micropip.install('lxml', deps=False)`). Only working solution I found is directly loading the wheel file (`await pyodide.loadPackage(\"https://cdn.jsdelivr.net/pyodide/v0.22.0/full/lxml-4.9.2-cp310-cp310-emscripten_3_1_27_wasm32.whl\")`)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3472", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3472/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3472/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3472/events", "html_url": "https://github.com/pyodide/pyodide/issues/3472", "id": 1536914340, "node_id": "I_kwDOB0-w-85bm3Ok", "number": 3472, "title": "`pyodide_build.out_of_tree.venv.create_pyodide_venv` wrongly requires an Emscripten compiler", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 0, "created_at": "2023-01-17T19:18:41Z", "updated_at": "2023-01-22T16:21:05Z", "closed_at": "2023-01-22T16:21:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "See https://github.com/pyodide/pyodide/discussions/3462#discussioncomment-4710208", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3449", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3449/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3449/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3449/events", "html_url": "https://github.com/pyodide/pyodide/issues/3449", "id": 1532608669, "node_id": "I_kwDOB0-w-85bWcCd", "number": 3449, "title": "console.html: no keyboard on Android Firefox", "user": {"login": "mentalisttraceur", "id": 6531708, "node_id": "MDQ6VXNlcjY1MzE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/6531708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mentalisttraceur", "html_url": "https://github.com/mentalisttraceur", "followers_url": "https://api.github.com/users/mentalisttraceur/followers", "following_url": "https://api.github.com/users/mentalisttraceur/following{/other_user}", "gists_url": "https://api.github.com/users/mentalisttraceur/gists{/gist_id}", "starred_url": "https://api.github.com/users/mentalisttraceur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mentalisttraceur/subscriptions", "organizations_url": "https://api.github.com/users/mentalisttraceur/orgs", "repos_url": "https://api.github.com/users/mentalisttraceur/repos", "events_url": "https://api.github.com/users/mentalisttraceur/events{/privacy}", "received_events_url": "https://api.github.com/users/mentalisttraceur/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 1, "created_at": "2023-01-13T16:41:47Z", "updated_at": "2023-01-18T09:14:18Z", "closed_at": "2023-01-18T09:14:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen I try to use [the console.html page](https://pyodide.org/en/stable/console.html) in Android Firefox, the on-screen keyboard does not come up (no matter how long I wait or where I click on the console).\r\n\r\nI'm guessing that the console HTML is not being marked as a text input in the most universal/standard way. If so, then this might also be an accessibility issue. If not, then maybe this is a Firefox issue. (I'll try to dig into this more when I have time.)\r\n\r\n### To Reproduce\r\n\r\nOpen https://pyodide.org/en/stable/console.html on Android in Firefox.\r\n\r\n### Expected behavior\r\n\r\nKeyboard pops open just as it does on Chromium browsers.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: any\r\n- Browser version: Firefox on Android (any version that I've tried)\r\n\r\n### Additional Context\r\n\r\nSince almost all mobile browsers nowadays are based on Chromium/WebKit (and last I checked on iOS alternative browsers were *required* to use the built-in engine), Firefox on Android is one of the only ways to notice this.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3449/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3446", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3446/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3446/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3446/events", "html_url": "https://github.com/pyodide/pyodide/issues/3446", "id": 1530730877, "node_id": "I_kwDOB0-w-85bPRl9", "number": 3446, "title": "distutils.tar is missing in npm version 0.22.", "user": {"login": "niowniow", "id": 5802846, "node_id": "MDQ6VXNlcjU4MDI4NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/5802846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niowniow", "html_url": "https://github.com/niowniow", "followers_url": "https://api.github.com/users/niowniow/followers", "following_url": "https://api.github.com/users/niowniow/following{/other_user}", "gists_url": "https://api.github.com/users/niowniow/gists{/gist_id}", "starred_url": "https://api.github.com/users/niowniow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niowniow/subscriptions", "organizations_url": "https://api.github.com/users/niowniow/orgs", "repos_url": "https://api.github.com/users/niowniow/repos", "events_url": "https://api.github.com/users/niowniow/events{/privacy}", "received_events_url": "https://api.github.com/users/niowniow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-12T13:38:18Z", "updated_at": "2023-01-22T04:23:23Z", "closed_at": "2023-01-22T04:23:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n### To Reproduce\r\n\r\ninstall pyodide in a webpack project and build it\r\n\r\n```\r\nnpm install pyodide@0.22\r\nnpx webpack\r\n```\r\n\r\nIt shows the following error message\r\n> ERROR in unable to locate '.../node_modules/pyodide/distutils.tar' glob\r\n\r\n### Expected behavior\r\n\r\nnpx webpack successfully runs.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.22\r\n- Any other relevant information:\r\n\r\n``` \r\n  Binaries:\r\n    Node: 14.18.1 - ~/.nvm/versions/node/v14.18.1/bin/node\r\n    Yarn: 1.22.19 - ~/.nvm/versions/node/v14.18.1/bin/yarn\r\n    npm: 6.14.15 - ~/.nvm/versions/node/v14.18.1/bin/npm\r\n  Packages:\r\n    string-replace-loader: ^3.1.0 => 3.1.0 \r\n    webpack: ^5.75.0 => 5.75.0 \r\n    webpack-cli: ^5.0.1 => 5.0.1 \r\n```\r\n\r\n### Additional context\r\nA workaround is to use the distutils.tar from version 0.21.3\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3432", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3432/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3432/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3432/events", "html_url": "https://github.com/pyodide/pyodide/issues/3432", "id": 1523049259, "node_id": "I_kwDOB0-w-85ax-Mr", "number": 3432, "title": "import ffi * is broken for 22.0+ ", "user": {"login": "zrothberg", "id": 13908315, "node_id": "MDQ6VXNlcjEzOTA4MzE1", "avatar_url": "https://avatars.githubusercontent.com/u/13908315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zrothberg", "html_url": "https://github.com/zrothberg", "followers_url": "https://api.github.com/users/zrothberg/followers", "following_url": "https://api.github.com/users/zrothberg/following{/other_user}", "gists_url": "https://api.github.com/users/zrothberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/zrothberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zrothberg/subscriptions", "organizations_url": "https://api.github.com/users/zrothberg/orgs", "repos_url": "https://api.github.com/users/zrothberg/repos", "events_url": "https://api.github.com/users/zrothberg/events{/privacy}", "received_events_url": "https://api.github.com/users/zrothberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 5, "created_at": "2023-01-06T19:39:31Z", "updated_at": "2023-01-22T16:19:50Z", "closed_at": "2023-01-22T16:19:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nCan no longer call `from pyodide.ffi import *`\r\nTraceback\r\n```\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 468, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 312, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\n  File \"/home/pyodide/launchapp.py\", line 1, in <module>\r\n    from pyodide.ffi import *\r\nAttributeError: module 'pyodide.ffi' has no attribute 'IN_BROWSER\r\n```\r\n\r\n### To Reproduce\r\n\r\n`from pyodide.ffi import *\r\n`\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: v0.22.0 and dev \r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Chrome\r\n\r\n\r\n### Additional context\r\nNot sure if IN_BROWSER is supposed to be available in that package or not. This is the [commit](https://github.com/pyodide/pyodide/pull/3298/files#diff-d66f085dfec63b0802ed32af9c70f0ac5dd1bcf599805afa45fce94599517d1e) that broke it. There probably needs to be some tests added to make sure the import * works for all the modules that are defining `__all__`. Not sure what the proper correction is to the current package structure though. _core doesnt define it in its all and I am unsure if that is the actual bug. \r\n\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3431", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3431/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3431/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3431/events", "html_url": "https://github.com/pyodide/pyodide/issues/3431", "id": 1522893921, "node_id": "I_kwDOB0-w-85axYRh", "number": 3431, "title": "In-tree build errors with `emconfigure: command not found` during `make -C cpython` while following initial setup instructions", "user": {"login": "josephrocca", "id": 1167575, "node_id": "MDQ6VXNlcjExNjc1NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1167575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephrocca", "html_url": "https://github.com/josephrocca", "followers_url": "https://api.github.com/users/josephrocca/followers", "following_url": "https://api.github.com/users/josephrocca/following{/other_user}", "gists_url": "https://api.github.com/users/josephrocca/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephrocca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephrocca/subscriptions", "organizations_url": "https://api.github.com/users/josephrocca/orgs", "repos_url": "https://api.github.com/users/josephrocca/repos", "events_url": "https://api.github.com/users/josephrocca/events{/privacy}", "received_events_url": "https://api.github.com/users/josephrocca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 4, "created_at": "2023-01-06T17:16:27Z", "updated_at": "2023-01-24T00:11:24Z", "closed_at": "2023-01-24T00:11:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nFollowing the [in-tree build instructions](https://pyodide.org/en/stable/development/new-packages.html#prerequisites) gives this error:\r\n\r\n```\r\n...\r\npatching file Lib/importlib/_bootstrap.py\r\npatching file Python/importlib.h\r\npatching file Lib/ctypes/util.py\r\npatching file Lib/multiprocessing/connection.py\r\ntouch /src/cpython/build/Python-3.10.2/.patched\r\n# --enable-big-digits=30 :\r\n#   Python integers have \"digits\" of size 15 by default on systems with 32\r\n#   bit pointers and size 30 on systems with 16 bit pointers. Python uses\r\n#   \"digits\" of size 15 by default on systems with 32 bit pointers and size\r\n#   30 on systems with 16 bit pointers. WASM has 32 bit pointers so Python\r\n#   will default to the size 15 digits but WASM has native 64 bit arithmetic\r\n#   so it is more efficient to use 30 bit digits.\r\ncp config.site /src/cpython/build/Python-3.10.2/\r\n( \\\r\n\tcd /src/cpython/build/Python-3.10.2; \\\r\n\tCONFIG_SITE=./config.site READELF=true emconfigure \\\r\n\t  ./configure \\\r\n\t\t  CFLAGS=\"-O2 -g0 -fPIC \" \\\r\n\t\t  CPPFLAGS=\"-sUSE_BZIP2=1 -sUSE_ZLIB=1\" \\\r\n\t\t  PLATFORM_TRIPLET=\"wasm32-emscripten\" \\\r\n\t\t  --without-pymalloc \\\r\n\t\t  --disable-shared \\\r\n\t\t  --disable-ipv6 \\\r\n\t\t  --enable-big-digits=30 \\\r\n\t\t  --enable-optimizations \\\r\n\t\t  --host=wasm32-unknown-emscripten\\\r\n\t\t  --build=x86_64-pc-linux-gnu \\\r\n\t\t  --prefix=/src/cpython/installs/python-3.10.2  \\\r\n)\r\n/bin/bash: line 2: emconfigure: command not found\r\nmake: *** [Makefile:80: /src/cpython/build/Python-3.10.2/Makefile] Error 127\r\nmake: Leaving directory '/src/cpython'\r\n```\r\n\r\n### To Reproduce\r\n\r\nI followed the instructions described here: https://pyodide.org/en/stable/development/new-packages.html#prerequisites\r\n```\r\ngit clone https://github.com/pyodide/pyodide\r\ncd pyodide\r\n./run_docker\r\npip install -e pyodide-build\r\nmake -C cpython\r\n```\r\n\r\n<details>\r\n<summary>Full logs</summary>\r\n\r\n```\r\njoe@pop-os:~/pyodide$ git clone https://github.com/pyodide/pyodide\r\nCloning into 'pyodide'...\r\nremote: Enumerating objects: 23970, done.\r\nremote: Counting objects: 100% (124/124), done.\r\nremote: Compressing objects: 100% (101/101), done.\r\nremote: Total 23970 (delta 37), reused 85 (delta 21), pack-reused 23846\r\nReceiving objects: 100% (23970/23970), 21.64 MiB | 16.00 MiB/s, done.\r\nResolving deltas: 100% (15949/15949), done.\r\njoe@pop-os:~/pyodide$ cd pyodide\r\njoe@pop-os:~/pyodide/pyodide$ ./run_docker\r\nUnable to find image 'pyodide/pyodide-env:20221102-chrome107-firefox106' locally\r\n20221102-chrome107-firefox106: Pulling from pyodide/pyodide-env\r\n15115158dd02: Already exists\r\n4d445d10bda3: Already exists\r\ncc7ba5177a87: Already exists\r\na4759db5e555: Already exists\r\n57e81f2987b5: Already exists\r\ne27ec2bfa589: Pulling fs layer\r\nbc88138a0687: Pulling fs layer\r\n20709cdee99b: Pulling fs layer\r\n6c41703e34d6: Pulling fs layer\r\nff817c04448f: Pulling fs layer\r\n07eb47de68f5: Pulling fs layer\r\n656c70b65803: Pulling fs layer\r\n82469f70fc31: Pulling fs layer\r\ne17fb27f4afa: Pulling fs layer\r\n3a7fc13009c6: Pulling fs layer\r\naa8513f8a41e: Pulling fs layer\r\n07eb47de68f5: Waiting\r\n6c41703e34d6: Waiting\r\nff817c04448f: Waiting\r\ne17fb27f4afa: Waiting\r\n3a7fc13009c6: Waiting\r\n656c70b65803: Waiting\r\nbc88138a0687: Verifying Checksum\r\nbc88138a0687: Download complete\r\n20709cdee99b: Verifying Checksum\r\n20709cdee99b: Download complete\r\n6c41703e34d6: Verifying Checksum\r\n6c41703e34d6: Download complete\r\n07eb47de68f5: Verifying Checksum\r\n07eb47de68f5: Download complete\r\n656c70b65803: Verifying Checksum\r\n656c70b65803: Download complete\r\nff817c04448f: Verifying Checksum\r\nff817c04448f: Download complete\r\n82469f70fc31: Verifying Checksum\r\n82469f70fc31: Download complete\r\ne17fb27f4afa: Verifying Checksum\r\ne17fb27f4afa: Download complete\r\naa8513f8a41e: Verifying Checksum\r\naa8513f8a41e: Download complete\r\ne27ec2bfa589: Download complete\r\n3a7fc13009c6: Verifying Checksum\r\n3a7fc13009c6: Download complete\r\ne27ec2bfa589: Pull complete\r\nbc88138a0687: Pull complete\r\n20709cdee99b: Pull complete\r\n6c41703e34d6: Pull complete\r\nff817c04448f: Pull complete\r\n07eb47de68f5: Pull complete\r\n656c70b65803: Pull complete\r\n82469f70fc31: Pull complete\r\ne17fb27f4afa: Pull complete\r\n3a7fc13009c6: Pull complete\r\naa8513f8a41e: Pull complete\r\nDigest: sha256:384f7b3325b8cb152e56ce59fc23f2146435141c1307b4c0d10cdfd9f2829c55\r\nStatus: Downloaded newer image for pyodide/pyodide-env:20221102-chrome107-firefox106\r\nWaiting for initialization to finish...\r\njoe@874e5b4763d3:/src$ pip install -e pyodide-build\r\nDefaulting to user installation because normal site-packages is not writeable\r\nObtaining file:///src/pyodide-build\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... done\r\nRequirement already satisfied: virtualenv in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (20.16.6)\r\nCollecting types-requests\r\n  Downloading types_requests-2.28.11.7-py3-none-any.whl (14 kB)\r\nRequirement already satisfied: tomli in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (2.0.1)\r\nRequirement already satisfied: wheel in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (0.37.1)\r\nCollecting cython<3.0\r\n  Downloading Cython-0.29.33-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (1.9 MB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.9 MB 22.2 MB/s \r\nCollecting resolvelib\r\n  Downloading resolvelib-0.9.0-py2.py3-none-any.whl (16 kB)\r\nRequirement already satisfied: pyyaml in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (6.0)\r\nRequirement already satisfied: cmake in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (3.24.2)\r\nRequirement already satisfied: build==0.7.0 in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (0.7.0)\r\nCollecting auditwheel-emscripten~=0.0.9\r\n  Downloading auditwheel_emscripten-0.0.9-py3-none-any.whl (19 kB)\r\nCollecting pyodide-cli~=0.2.1\r\n  Downloading pyodide_cli-0.2.2-py3-none-any.whl (10 kB)\r\nRequirement already satisfied: requests in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (2.28.1)\r\nRequirement already satisfied: pydantic>=1.10.2 in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (1.10.2)\r\nCollecting unearth~=0.6\r\n  Downloading unearth-0.7.0-py3-none-any.whl (39 kB)\r\nCollecting typer\r\n  Downloading typer-0.7.0-py3-none-any.whl (38 kB)\r\nRequirement already satisfied: ruamel.yaml in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (0.17.21)\r\nRequirement already satisfied: packaging in /usr/local/lib/python3.10/site-packages (from pyodide-build==0.22.0) (21.3)\r\nRequirement already satisfied: pep517>=0.9.1 in /usr/local/lib/python3.10/site-packages (from build==0.7.0->pyodide-build==0.22.0) (0.13.0)\r\nCollecting leb128\r\n  Downloading leb128-1.0.4.tar.gz (2.6 kB)\r\nRequirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /usr/local/lib/python3.10/site-packages (from packaging->pyodide-build==0.22.0) (3.0.9)\r\nRequirement already satisfied: typing-extensions>=4.1.0 in /usr/local/lib/python3.10/site-packages (from pydantic>=1.10.2->pyodide-build==0.22.0) (4.4.0)\r\nCollecting rich\r\n  Downloading rich-13.0.1-py3-none-any.whl (238 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 238 kB 67.7 MB/s \r\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in /usr/local/lib/python3.10/site-packages (from requests->pyodide-build==0.22.0) (1.26.12)\r\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/site-packages (from requests->pyodide-build==0.22.0) (3.4)\r\nRequirement already satisfied: charset-normalizer<3,>=2 in /usr/local/lib/python3.10/site-packages (from requests->pyodide-build==0.22.0) (2.1.1)\r\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/site-packages (from requests->pyodide-build==0.22.0) (2022.9.24)\r\nRequirement already satisfied: pygments<3.0.0,>=2.6.0 in /usr/local/lib/python3.10/site-packages (from rich->pyodide-cli~=0.2.1->pyodide-build==0.22.0) (2.13.0)\r\nCollecting commonmark<0.10.0,>=0.9.0\r\n  Downloading commonmark-0.9.1-py2.py3-none-any.whl (51 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 51 kB 13.8 MB/s \r\nRequirement already satisfied: ruamel.yaml.clib>=0.2.6 in /usr/local/lib/python3.10/site-packages (from ruamel.yaml->pyodide-build==0.22.0) (0.2.7)\r\nCollecting click<9.0.0,>=7.1.1\r\n  Downloading click-8.1.3-py3-none-any.whl (96 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 96 kB 12.0 MB/s \r\nCollecting colorama<0.5.0,>=0.4.3\r\n  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)\r\nCollecting rich\r\n  Downloading rich-12.6.0-py3-none-any.whl (237 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 237 kB 89.7 MB/s \r\nCollecting shellingham<2.0.0,>=1.3.0\r\n  Downloading shellingham-1.5.0.post1-py2.py3-none-any.whl (9.4 kB)\r\nCollecting types-urllib3<1.27\r\n  Downloading types_urllib3-1.26.25.4-py3-none-any.whl (14 kB)\r\nRequirement already satisfied: distlib<1,>=0.3.6 in /usr/local/lib/python3.10/site-packages (from virtualenv->pyodide-build==0.22.0) (0.3.6)\r\nRequirement already satisfied: filelock<4,>=3.4.1 in /usr/local/lib/python3.10/site-packages (from virtualenv->pyodide-build==0.22.0) (3.8.0)\r\nRequirement already satisfied: platformdirs<3,>=2.4 in /usr/local/lib/python3.10/site-packages (from virtualenv->pyodide-build==0.22.0) (2.5.2)\r\nBuilding wheels for collected packages: leb128\r\n  Building wheel for leb128 (setup.py) ... done\r\n  Created wheel for leb128: filename=leb128-1.0.4-py3-none-any.whl size=2461 sha256=3f58b1a456c279fa6661007ffa734ee91b974d26f973b9f51e9fb257e29a854a\r\n  Stored in directory: /src/.docker_home/.cache/pip/wheels/15/8a/b8/0fcb902ae7a5020df8a0466773646254a356b487fcd8314a6e\r\nSuccessfully built leb128\r\nInstalling collected packages: commonmark, click, typer, shellingham, rich, colorama, types-urllib3, pyodide-cli, leb128, unearth, types-requests, resolvelib, cython, auditwheel-emscripten, pyodide-build\r\n  Running setup.py develop for pyodide-build\r\nSuccessfully installed auditwheel-emscripten-0.0.9 click-8.1.3 colorama-0.4.6 commonmark-0.9.1 cython-0.29.33 leb128-1.0.4 pyodide-build pyodide-cli-0.2.2 resolvelib-0.9.0 rich-12.6.0 shellingham-1.5.0.post1 typer-0.7.0 types-requests-2.28.11.7 types-urllib3-1.26.25.4 unearth-0.7.0\r\nWARNING: You are using pip version 21.2.4; however, version 22.3.1 is available.\r\nYou should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.\r\njoe@874e5b4763d3:/src$ make -C cpython\r\nmake: Entering directory '/src/cpython'\r\n[ -d /src/cpython/downloads ] || mkdir /src/cpython/downloads\r\nwget -q -O /src/cpython/downloads/Python-3.10.2.tgz https://www.python.org/ftp/python/3.10.2/Python-3.10.2.tgz\r\nshasum --algorithm 256 --check checksums --quiet || (rm /src/cpython/downloads/Python-3.10.2.tgz; false)\r\n[ -d /src/cpython/build/Python-3.10.2 ] || (mkdir -p /src/cpython/build/; tar -C /src/cpython/build/ -xf /src/cpython/downloads/Python-3.10.2.tgz)\r\ncat patches/*.patch | (cd /src/cpython/build/Python-3.10.2 ; patch -p1)\r\npatching file Objects/call.c\r\npatching file Objects/descrobject.c\r\npatching file Objects/methodobject.c\r\npatching file config.sub\r\npatching file configure\r\npatching file configure.ac\r\npatching file Modules/posixmodule.c\r\npatching file Lib/platform.py\r\npatching file Lib/test/libregrtest/main.py\r\npatching file Lib/test/support/script_helper.py\r\npatching file Lib/test/test_cgi.py\r\npatching file Lib/test/test_fcntl.py\r\npatching file Lib/test/test_gzip.py\r\npatching file Lib/test/test_itertools.py\r\npatching file Modules/Setup\r\npatching file Modules/_ctypes/cfield.c\r\npatching file Lib/test/test_code.py\r\npatching file Python/importdl.c\r\npatching file Objects/methodobject.c\r\npatching file Misc/NEWS.d/next/Library/2022-03-08-11-34-06.bpo-23325.3VQnfo.rst\r\npatching file Modules/signalmodule.c\r\npatching file Modules/_ctypes/callbacks.c\r\npatching file Modules/_ctypes/callproc.c\r\npatching file Modules/signalmodule.c\r\npatching file Python/ceval.c\r\npatching file Modules/main.c\r\npatching file Lib/importlib/_bootstrap.py\r\npatching file Python/importlib.h\r\npatching file Lib/ctypes/util.py\r\npatching file Lib/multiprocessing/connection.py\r\ntouch /src/cpython/build/Python-3.10.2/.patched\r\n# --enable-big-digits=30 :\r\n#   Python integers have \"digits\" of size 15 by default on systems with 32\r\n#   bit pointers and size 30 on systems with 16 bit pointers. Python uses\r\n#   \"digits\" of size 15 by default on systems with 32 bit pointers and size\r\n#   30 on systems with 16 bit pointers. WASM has 32 bit pointers so Python\r\n#   will default to the size 15 digits but WASM has native 64 bit arithmetic\r\n#   so it is more efficient to use 30 bit digits.\r\ncp config.site /src/cpython/build/Python-3.10.2/\r\n( \\\r\n\tcd /src/cpython/build/Python-3.10.2; \\\r\n\tCONFIG_SITE=./config.site READELF=true emconfigure \\\r\n\t  ./configure \\\r\n\t\t  CFLAGS=\"-O2 -g0 -fPIC \" \\\r\n\t\t  CPPFLAGS=\"-sUSE_BZIP2=1 -sUSE_ZLIB=1\" \\\r\n\t\t  PLATFORM_TRIPLET=\"wasm32-emscripten\" \\\r\n\t\t  --without-pymalloc \\\r\n\t\t  --disable-shared \\\r\n\t\t  --disable-ipv6 \\\r\n\t\t  --enable-big-digits=30 \\\r\n\t\t  --enable-optimizations \\\r\n\t\t  --host=wasm32-unknown-emscripten\\\r\n\t\t  --build=x86_64-pc-linux-gnu \\\r\n\t\t  --prefix=/src/cpython/installs/python-3.10.2  \\\r\n)\r\n/bin/bash: line 2: emconfigure: command not found\r\nmake: *** [Makefile:80: /src/cpython/build/Python-3.10.2/Makefile] Error 127\r\nmake: Leaving directory '/src/cpython'\r\n```\r\n</details>\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3431/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3430", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3430/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3430/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3430/events", "html_url": "https://github.com/pyodide/pyodide/issues/3430", "id": 1522107906, "node_id": "I_kwDOB0-w-85auYYC", "number": 3430, "title": "On first call, `pyodide config get emscripten_version` returns `Downloading xbuild environment Installing xbuild environment 3.1.27` instead of `3.1.27`", "user": {"login": "josephrocca", "id": 1167575, "node_id": "MDQ6VXNlcjExNjc1NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1167575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephrocca", "html_url": "https://github.com/josephrocca", "followers_url": "https://api.github.com/users/josephrocca/followers", "following_url": "https://api.github.com/users/josephrocca/following{/other_user}", "gists_url": "https://api.github.com/users/josephrocca/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephrocca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephrocca/subscriptions", "organizations_url": "https://api.github.com/users/josephrocca/orgs", "repos_url": "https://api.github.com/users/josephrocca/repos", "events_url": "https://api.github.com/users/josephrocca/events{/privacy}", "received_events_url": "https://api.github.com/users/josephrocca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 6, "created_at": "2023-01-06T07:29:17Z", "updated_at": "2023-01-22T16:25:00Z", "closed_at": "2023-01-22T16:25:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nIn [the docs for out-of-tree builds](https://pyodide.org/en/stable/development/building-and-testing-packages.html#building-and-testing-packages-out-of-tree) it gives this code snippet:\r\n\r\n```bash\r\npip install pyodide-build\r\n\r\ngit clone https://github.com/emscripten-core/emsdk.git\r\ncd emsdk\r\n\r\nPYODIDE_EMSCRIPTEN_VERSION=$(pyodide config get emscripten_version)\r\n./emsdk install ${PYODIDE_EMSCRIPTEN_VERSION}\r\n./emsdk activate ${PYODIDE_EMSCRIPTEN_VERSION}\r\nsource emsdk_env.sh\r\n```\r\nBut this doesn't work because on the first call, `pyodide config get emscripten_version` outputs this:\r\n```\r\nDownloading xbuild environment\r\nInstalling xbuild environment\r\n3.1.27\r\n```\r\nOn subsequent calls it returns `3.1.27`.\r\n\r\n### To Reproduce\r\n\r\nSee above.\r\n\r\n### Expected behavior\r\n\r\nCalls to `pyodide config get emscripten_version` should only ever output the version string such that this command can be reliably used in build automation.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: Pyodide CLI Version: 0.2.2\r\n\r\n### Additional context\r\n\r\nAs a workaround for build scripts, `pyodide config get emscripten_version` can be called once before actually using it.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3425", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3425/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3425/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3425/events", "html_url": "https://github.com/pyodide/pyodide/issues/3425", "id": 1520479397, "node_id": "I_kwDOB0-w-85aoKyl", "number": 3425, "title": "If `pyodide build` fails, then next call to `pyodide build` should start fresh?", "user": {"login": "josephrocca", "id": 1167575, "node_id": "MDQ6VXNlcjExNjc1NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1167575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephrocca", "html_url": "https://github.com/josephrocca", "followers_url": "https://api.github.com/users/josephrocca/followers", "following_url": "https://api.github.com/users/josephrocca/following{/other_user}", "gists_url": "https://api.github.com/users/josephrocca/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephrocca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephrocca/subscriptions", "organizations_url": "https://api.github.com/users/josephrocca/orgs", "repos_url": "https://api.github.com/users/josephrocca/repos", "events_url": "https://api.github.com/users/josephrocca/events{/privacy}", "received_events_url": "https://api.github.com/users/josephrocca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 2, "created_at": "2023-01-05T10:19:47Z", "updated_at": "2023-01-13T17:41:31Z", "closed_at": "2023-01-13T17:41:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nIt seems like `pyodide build` is kinda \"stateful\" in some way, or has some persistent side effects. I'd have thought it'd start completely fresh each time (i.e. delete `.pyodide-xbuildenv` and any other state), but maybe some stuff is cached for performance reasons, or something?\r\n\r\nI haven't got a clean reproduction unfortunately, but sometimes I get an error like the one below that goes away if I run `pyodide build` again without changing anything or doing anything at all. Please note that this issue is not related to the specifics of the error messages presented here - i.e. I'm not trying to \"get past\" this error. This bug report is about the inconsistency of consecutive calls to `pyodide build`.\r\n\r\n```\r\nrunning bdist_wheel\r\nrunning build\r\nrunning build_py\r\nrunning create_version\r\nrunning cmake_build\r\nExtra cmake args: ['-DONNX_USE_LITE_PROTO=ON', '-DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src', '-DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source', '-DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a', '-Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11']\r\nUsing cmake args: ['/tmp/tmpmcx3hk29/cmake', '-DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10', '-DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python', '-DBUILD_ONNX_PYTHON=ON', '-DCMAKE_EXPORT_COMPILE_COMMANDS=ON', '-DONNX_NAMESPACE=onnx', '-DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so', '-DCMAKE_BUILD_TYPE=Release', '-DONNX_ML=1', '-DONNX_USE_LITE_PROTO=ON', '-DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src', '-DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source', '-DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a', '-Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11', '/workspaces/onnx']\r\nconfigure: cmake -DCMAKE_C_COMPILER=/tmp/tmpmcx3hk29/cc -DCMAKE_CXX_COMPILER=/tmp/tmpmcx3hk29/c++ -DCMAKE_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_C_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_CXX_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10 -DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python -DBUILD_ONNX_PYTHON=ON -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DONNX_NAMESPACE=onnx -DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so -DCMAKE_BUILD_TYPE=Release -DONNX_ML=1 -DONNX_USE_LITE_PROTO=ON -DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src -DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source -DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a -Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11 /workspaces/onnx -DCMAKE_TOOLCHAIN_FILE=/workspaces/onnx/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake -DCMAKE_CROSSCOMPILING_EMULATOR=/workspaces/onnx/emsdk/node/14.18.2_64bit/bin/node;--experimental-wasm-bulk-memory;--experimental-wasm-threads\r\nCMake Error at CMakeLists.txt:17 (project):\r\n  The CMAKE_C_COMPILER:\r\n\r\n    /tmp/tmph8ytv7hj/cc\r\n\r\n  is not a full path to an existing compiler tool.\r\n```\r\n\r\n<details>\r\n<summary>Click here for full logs</summary>\r\n\r\n```\r\npyodide build\r\nDownloading xbuild environment\r\nInstalling xbuild environment\r\n* Creating virtualenv isolated environment...\r\nfind interpreter for spec PythonSpec(path=/usr/local/python/3.10.4/bin/python)\r\nproposed PythonInfo(spec=CPython3.10.4.final.0-64, exe=/usr/local/python/3.10.4/bin/python, platform=linux, version='3.10.4 (main, Dec 19 2022, 20:24:16) [GCC 9.4.0]', encoding_fs_io=utf-8-utf-8)\r\naccepted PythonInfo(spec=CPython3.10.4.final.0-64, exe=/usr/local/python/3.10.4/bin/python, platform=linux, version='3.10.4 (main, Dec 19 2022, 20:24:16) [GCC 9.4.0]', encoding_fs_io=utf-8-utf-8)\r\nfilesystem is case-sensitive\r\ncreate virtual environment via CPython3Posix(dest=/tmp/build-env-6xusqkkh, clear=False, no_vcs_ignore=False, global=False)\r\ncreate folder /tmp/build-env-6xusqkkh/bin\r\ncreate folder /tmp/build-env-6xusqkkh/lib/python3.10/site-packages\r\nwrite /tmp/build-env-6xusqkkh/pyvenv.cfg\r\n        home = /usr/local/python/3.10.4/bin\r\n        implementation = CPython\r\n        version_info = 3.10.4.final.0\r\n        virtualenv = 20.17.1\r\n        include-system-site-packages = false\r\n        base-prefix = /usr/local/python/3.10.4\r\n        base-exec-prefix = /usr/local/python/3.10.4\r\n        base-executable = /usr/local/python/3.10.4/bin/python\r\nsymlink /usr/local/python/3.10.4/bin/python to /tmp/build-env-6xusqkkh/bin/python\r\ncreate virtualenv import hook file /tmp/build-env-6xusqkkh/lib/python3.10/site-packages/_virtualenv.pth\r\ncreate /tmp/build-env-6xusqkkh/lib/python3.10/site-packages/_virtualenv.py\r\n============================== target debug ==============================\r\ndebug via /tmp/build-env-6xusqkkh/bin/python /usr/local/python/3.10.4/lib/python3.10/site-packages/virtualenv/create/debug.py\r\n{\r\n  \"sys\": {\r\n    \"executable\": \"/tmp/build-env-6xusqkkh/bin/python\",\r\n    \"_base_executable\": \"/tmp/build-env-6xusqkkh/bin/python\",\r\n    \"prefix\": \"/tmp/build-env-6xusqkkh\",\r\n    \"base_prefix\": \"/usr/local/python/3.10.4\",\r\n    \"real_prefix\": null,\r\n    \"exec_prefix\": \"/tmp/build-env-6xusqkkh\",\r\n    \"base_exec_prefix\": \"/usr/local/python/3.10.4\",\r\n    \"path\": [\r\n      \"/workspaces/onnx/.pyodide-xbuildenv/xbuildenv/pyodide-root/packages/.artifacts/lib/python3.10/site-packages\",\r\n      \"/usr/local/python/3.10.4/lib/python310.zip\",\r\n      \"/usr/local/python/3.10.4/lib/python3.10\",\r\n      \"/usr/local/python/3.10.4/lib/python3.10/lib-dynload\",\r\n      \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages\"\r\n    ],\r\n    \"meta_path\": [\r\n      \"<class '_virtualenv._Finder'>\",\r\n      \"<class '_frozen_importlib.BuiltinImporter'>\",\r\n      \"<class '_frozen_importlib.FrozenImporter'>\",\r\n      \"<class '_frozen_importlib_external.PathFinder'>\"\r\n    ],\r\n    \"fs_encoding\": \"utf-8\",\r\n    \"io_encoding\": \"utf-8\"\r\n  },\r\n  \"version\": \"3.10.4 (main, Dec 19 2022, 20:24:16) [GCC 9.4.0]\",\r\n  \"makefile_filename\": \"/usr/local/python/3.10.4/lib/python3.10/config-3.10-x86_64-linux-gnu/Makefile\",\r\n  \"os\": \"<module 'os' from '/usr/local/python/3.10.4/lib/python3.10/os.py'>\",\r\n  \"site\": \"<module 'site' from '/usr/local/python/3.10.4/lib/python3.10/site.py'>\",\r\n  \"datetime\": \"<module 'datetime' from '/usr/local/python/3.10.4/lib/python3.10/datetime.py'>\",\r\n  \"math\": \"<module 'math' from '/usr/local/python/3.10.4/lib/python3.10/lib-dynload/math.cpython-310-x86_64-linux-gnu.so'>\",\r\n  \"json\": \"<module 'json' from '/usr/local/python/3.10.4/lib/python3.10/json/__init__.py'>\"\r\n}\r\nadd seed packages via FromAppData(download=False, pip=bundle, via=copy, app_data_dir=/home/codespace/.local/share/virtualenv)\r\ngot embed update of distribution pip from /home/codespace/.local/share/virtualenv/wheel/3.10/embed/3/pip.json\r\ngot embed update of distribution pip from /home/codespace/.local/share/virtualenv/wheel/3.10/embed/3/pip.json\r\ninstall pip from wheel /usr/local/python/3.10.4/lib/python3.10/site-packages/virtualenv/seed/wheels/embed/pip-22.3.1-py3-none-any.whl via CopyPipInstall\r\nAttempting to acquire lock 139932925956432 on /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any.lock\r\nLock 139932925956432 acquired on /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any.lock\r\nAttempting to release lock 139932925956432 on /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any.lock\r\nLock 139932925956432 released on /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any.lock\r\ncopy directory /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any/pip to /tmp/build-env-6xusqkkh/lib/python3.10/site-packages/pip\r\ncopy /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any/pip-22.3.1.virtualenv to /tmp/build-env-6xusqkkh/lib/python3.10/site-packages/pip-22.3.1.virtualenv\r\ncopy directory /home/codespace/.local/share/virtualenv/wheel/3.10/image/1/CopyPipInstall/pip-22.3.1-py3-none-any/pip-22.3.1.dist-info to /tmp/build-env-6xusqkkh/lib/python3.10/site-packages/pip-22.3.1.dist-info\r\nchanging mode of /tmp/build-env-6xusqkkh/bin/pip-3.10 to 757\r\nchanging mode of /tmp/build-env-6xusqkkh/bin/pip3 to 757\r\nchanging mode of /tmp/build-env-6xusqkkh/bin/pip to 757\r\nchanging mode of /tmp/build-env-6xusqkkh/bin/pip3.10 to 757\r\ngenerated console scripts pip-3.10 pip pip3.10 pip3\r\nwrite /tmp/build-env-6xusqkkh/pyvenv.cfg\r\n        home = /usr/local/python/3.10.4/bin\r\n        implementation = CPython\r\n        version_info = 3.10.4.final.0\r\n        virtualenv = 20.17.1\r\n        include-system-site-packages = false\r\n        base-prefix = /usr/local/python/3.10.4\r\n        base-exec-prefix = /usr/local/python/3.10.4\r\n        base-executable = /usr/local/python/3.10.4/bin/python\r\n* Installing packages in isolated environment... (setuptools >= 40.8.0, wheel)\r\n* Installing packages in isolated environment... (cython, pythran, setuptools<65.6.0)\r\n* Getting dependencies for wheel...\r\n* Installing packages in isolated environment... (pytest-runner, wheel)\r\n* Installing packages in isolated environment... (cython, pythran, setuptools<65.6.0)\r\n* Building wheel...\r\nrunning bdist_wheel\r\nrunning build\r\nrunning build_py\r\nrunning create_version\r\nrunning cmake_build\r\nExtra cmake args: ['-DONNX_USE_LITE_PROTO=ON', '-DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src', '-DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source', '-DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a', '-Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11']\r\nUsing cmake args: ['/tmp/tmpmcx3hk29/cmake', '-DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10', '-DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python', '-DBUILD_ONNX_PYTHON=ON', '-DCMAKE_EXPORT_COMPILE_COMMANDS=ON', '-DONNX_NAMESPACE=onnx', '-DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so', '-DCMAKE_BUILD_TYPE=Release', '-DONNX_ML=1', '-DONNX_USE_LITE_PROTO=ON', '-DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src', '-DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source', '-DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a', '-Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11', '/workspaces/onnx']\r\nconfigure: cmake -DCMAKE_C_COMPILER=/tmp/tmpmcx3hk29/cc -DCMAKE_CXX_COMPILER=/tmp/tmpmcx3hk29/c++ -DCMAKE_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_C_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_CXX_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10 -DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python -DBUILD_ONNX_PYTHON=ON -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DONNX_NAMESPACE=onnx -DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so -DCMAKE_BUILD_TYPE=Release -DONNX_ML=1 -DONNX_USE_LITE_PROTO=ON -DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src -DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source -DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a -Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11 /workspaces/onnx -DCMAKE_TOOLCHAIN_FILE=/workspaces/onnx/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake -DCMAKE_CROSSCOMPILING_EMULATOR=/workspaces/onnx/emsdk/node/14.18.2_64bit/bin/node;--experimental-wasm-bulk-memory;--experimental-wasm-threads\r\nCMake Error at CMakeLists.txt:17 (project):\r\n  The CMAKE_C_COMPILER:\r\n\r\n    /tmp/tmph8ytv7hj/cc\r\n\r\n  is not a full path to an existing compiler tool.\r\n\r\n  Tell CMake where to find the compiler by setting either the environment\r\n  variable \"CC\" or the CMake cache entry CMAKE_C_COMPILER to the full path to\r\n  the compiler, or to the compiler name if it is in the PATH.\r\n\r\n\r\nCMake Error at CMakeLists.txt:17 (project):\r\n  The CMAKE_CXX_COMPILER:\r\n\r\n    /tmp/tmph8ytv7hj/c++\r\n\r\n  is not a full path to an existing compiler tool.\r\n\r\n  Tell CMake where to find the compiler by setting either the environment\r\n  variable \"CXX\" or the CMake cache entry CMAKE_CXX_COMPILER to the full path\r\n  to the compiler, or to the compiler name if it is in the PATH.\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\nSee also \"/workspaces/onnx/.setuptools-cmake-build/CMakeFiles/CMakeOutput.log\".\r\nemcmake: error: 'cmake -DCMAKE_C_COMPILER=/tmp/tmpmcx3hk29/cc -DCMAKE_CXX_COMPILER=/tmp/tmpmcx3hk29/c++ -DCMAKE_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_C_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DCMAKE_CXX_COMPILER_AR=/tmp/tmpmcx3hk29/ar -DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10 -DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python -DBUILD_ONNX_PYTHON=ON -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DONNX_NAMESPACE=onnx -DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so -DCMAKE_BUILD_TYPE=Release -DONNX_ML=1 -DONNX_USE_LITE_PROTO=ON -DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src -DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source -DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a -Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11 /workspaces/onnx -DCMAKE_TOOLCHAIN_FILE=/workspaces/onnx/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake -DCMAKE_CROSSCOMPILING_EMULATOR=/workspaces/onnx/emsdk/node/14.18.2_64bit/bin/node;--experimental-wasm-bulk-memory;--experimental-wasm-threads' failed (returned 1)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/pep517/in_process/_in_process.py\", line 351, in <module>\r\n    main()\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/pep517/in_process/_in_process.py\", line 333, in main\r\n    json_out['return_val'] = hook(**hook_input['kwargs'])\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/site-packages/pep517/in_process/_in_process.py\", line 249, in build_wheel\r\n    return _build_backend().build_wheel(wheel_directory, config_settings,\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/build_meta.py\", line 412, in build_wheel\r\n    return self._build_with_temp_dir(['bdist_wheel'], '.whl',\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/build_meta.py\", line 397, in _build_with_temp_dir\r\n    self.run_setup()\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/build_meta.py\", line 483, in run_setup\r\n    super(_BuildMetaLegacyBackend,\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/build_meta.py\", line 335, in run_setup\r\n    exec(code, locals())\r\n  File \"<string>\", line 358, in <module>\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/__init__.py\", line 87, in setup\r\n    return distutils.core.setup(**attrs)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/core.py\", line 185, in setup\r\n    return run_commands(dist)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/core.py\", line 201, in run_commands\r\n    dist.run_commands()\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/dist.py\", line 968, in run_commands\r\n    self.run_command(cmd)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/dist.py\", line 1217, in run_command\r\n    super().run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\r\n    cmd_obj.run()\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/wheel/bdist_wheel.py\", line 325, in run\r\n    self.run_command(\"build\")\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/cmd.py\", line 319, in run_command\r\n    self.distribution.run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/dist.py\", line 1217, in run_command\r\n    super().run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\r\n    cmd_obj.run()\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/command/build.py\", line 132, in run\r\n    self.run_command(cmd_name)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/cmd.py\", line 319, in run_command\r\n    self.distribution.run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/dist.py\", line 1217, in run_command\r\n    super().run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\r\n    cmd_obj.run()\r\n  File \"<string>\", line 233, in run\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/cmd.py\", line 319, in run_command\r\n    self.distribution.run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/dist.py\", line 1217, in run_command\r\n    super().run_command(command)\r\n  File \"/tmp/build-env-6xusqkkh/lib/python3.10/site-packages/setuptools/_distutils/dist.py\", line 987, in run_command\r\n    cmd_obj.run()\r\n  File \"<string>\", line 219, in run\r\n  File \"/usr/local/python/3.10.4/lib/python3.10/subprocess.py\", line 369, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['/tmp/tmpmcx3hk29/cmake', '-DPYTHON_INCLUDE_DIR=/root/repo/cpython/installs/python-3.10.2/include/python3.10', '-DPYTHON_EXECUTABLE=/tmp/build-env-6xusqkkh/bin/python', '-DBUILD_ONNX_PYTHON=ON', '-DCMAKE_EXPORT_COMPILE_COMMANDS=ON', '-DONNX_NAMESPACE=onnx', '-DPY_EXT_SUFFIX=.cpython-310-wasm32-emscripten.so', '-DCMAKE_BUILD_TYPE=Release', '-DONNX_ML=1', '-DONNX_USE_LITE_PROTO=ON', '-DProtobuf_INCLUDE_DIR=/workspaces/onnx/protobuf/src', '-DProtobuf_LIBRARIES=/workspaces/onnx/protobuf/build_source', '-DProtobuf_LITE_LIBRARY=/workspaces/onnx/protobuf/build_source/libprotobuf-lite.a', '-Dpybind11_DIR=/usr/local/python/3.10.4/lib/python3.10/site-packages/pybind11/share/cmake/pybind11', '/workspaces/onnx']' returned non-zero exit status 1.\r\n\r\nERROR Backend subproccess exited when trying to invoke build_wheel\r\n```\r\n\r\n</details>\r\n\r\n### To Reproduce\r\n\r\nAs mentioned above, I don't yet have a clean reproduction. I'll add a follow-up comment in case I do get one.\r\n\r\n### Expected behavior\r\n\r\nRunning `pyodide build` again after an error (without doing anything else in between) should result in the same error. The error message `/tmp/tmph8ytv7hj/c++  is not a full path to an existing compiler tool` seems to imply that some sort of \"old\" config is kept around and re-used?\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: Pyodide CLI Version: 0.2.2", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3425/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3423", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3423/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3423/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3423/events", "html_url": "https://github.com/pyodide/pyodide/issues/3423", "id": 1519862067, "node_id": "I_kwDOB0-w-85al0Ez", "number": 3423, "title": "Import hook for repodata packages shows incorrect results.", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-01-05T01:33:08Z", "updated_at": "2023-01-22T08:20:21Z", "closed_at": "2023-01-22T08:20:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThe import hook for repodata packages is showing incorrect results for some packages.\r\n\r\nFor example, shown in https://github.com/pyodide/pyodide/discussions/3419:\r\n\r\n```py\r\nimport gdal # from osgeo import gdal\r\n\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 460, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 304, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 8, in <module>\r\nModuleNotFoundError: The module 'gdal' is included in the Pyodide distribution, but it is not installed.\r\n```\r\n\r\nThis is not intended, as `gdal` is a shared library not a Python package (at least until we have Python bindings for gdal).\r\n\r\nI'll make a fix, this is mostly a FYI.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3416", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3416/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3416/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3416/events", "html_url": "https://github.com/pyodide/pyodide/issues/3416", "id": 1518930109, "node_id": "I_kwDOB0-w-85aiQi9", "number": 3416, "title": "Using `scipy.linalg.lapack.get_lapack_funcs` fails to resolve some symbols", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640941765, "node_id": "MDU6TGFiZWwxNjQwOTQxNzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scipy", "name": "scipy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-04T12:53:57Z", "updated_at": "2023-04-12T12:41:35Z", "closed_at": "2023-04-12T12:41:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nUsing `scipy.linalg.lapack.get_lapack_funcs` fails to resolve some symbols. I am seeing similar things for a few different symbols, see https://github.com/lesteve/scipy-tests-pyodide/pull/2 for more details.\r\n\r\n### To Reproduce\r\n\r\n```py\r\nimport numpy as np\r\nfrom scipy.linalg.lapack import get_lapack_funcs\r\n\r\nnp.random.seed(42)\r\ndtype = np.float32\r\nmatrix_size = (3, 4)\r\ngeqrfp = get_lapack_funcs(('geqrfp'), dtype=dtype)\r\n\r\nA = np.random.rand(*matrix_size).astype(dtype)\r\nqr_A, tau, info = geqrfp(A)\r\n```\r\n\r\nStack-trace with debug symbols:\r\n```\r\nTypeError: Cannot read properties of undefined (reading 'apply')\r\n    at stubs.<computed> (pyodide.asm.js:6741:33)\r\n    at sgeqrfp_ (00677c62:0xd99f7)\r\n    at f2py_rout__flapack_sgeqrfp (00677c62:0x350f2)\r\n    at fortran_call (0003e3ba:0x6642)\r\n    at method_call_trampoline (pyodide.asm.js:1436:82)\r\n    at _PyObject_MakeTpCall (pyodide.asm.wasm:0x1313a1)\r\n    at call_function (pyodide.asm.wasm:0x1ed535)\r\n    at _PyEval_EvalFrameDefault (pyodide.asm.wasm:0x1ea763)\r\n    at _PyEval_Vector (pyodide.asm.wasm:0x1e579f)\r\n    at PyEval_EvalCode (pyodide.asm.wasm:0x1e4b6b)\r\n```\r\n\r\nThe following code from `pyodide.asm.js` fails at the `resolved.apply` call since `resolved` is undefined:\r\n```js\r\nvar proxyHandler = {\r\n  'get': function(stubs, prop) {\r\n    // symbols that should be local to this module\r\n    switch (prop) {\r\n      case '__memory_base':\r\n        return memoryBase;\r\n      case '__table_base':\r\n        return tableBase;\r\n    }\r\n    if (prop in asmLibraryArg) {\r\n      // No stub needed, symbol already exists in symbol table\r\n      return asmLibraryArg[prop];\r\n    }\r\n    // Return a stub function that will resolve the symbol\r\n    // when first called.\r\n    if (!(prop in stubs)) {\r\n      var resolved;\r\n      stubs[prop] = function() {\r\n\r\n        // prop = \"sgeqr2p_\" when it fails\r\n        if (!resolved) resolved = resolveSymbol(prop);\r\n        // The next line fails since resolved = undefined\r\n        return resolved.apply(null, arguments);\r\n      };\r\n    }\r\n    return stubs[prop];\r\n  }\r\n};\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nNo error.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: stable (0.22) and latest\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: not relevant\r\n- Any other relevant information:\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3416/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3416/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3413", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3413/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3413/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3413/events", "html_url": "https://github.com/pyodide/pyodide/issues/3413", "id": 1518388397, "node_id": "I_kwDOB0-w-85agMSt", "number": 3413, "title": "Infinite prompt by using an input\u00a0in v0.22.0", "user": {"login": "nicobytes", "id": 7611944, "node_id": "MDQ6VXNlcjc2MTE5NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7611944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicobytes", "html_url": "https://github.com/nicobytes", "followers_url": "https://api.github.com/users/nicobytes/followers", "following_url": "https://api.github.com/users/nicobytes/following{/other_user}", "gists_url": "https://api.github.com/users/nicobytes/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicobytes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicobytes/subscriptions", "organizations_url": "https://api.github.com/users/nicobytes/orgs", "repos_url": "https://api.github.com/users/nicobytes/repos", "events_url": "https://api.github.com/users/nicobytes/events{/privacy}", "received_events_url": "https://api.github.com/users/nicobytes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3255319076, "node_id": "MDU6TGFiZWwzMjU1MzE5MDc2", "url": "https://api.github.com/repos/pyodide/pyodide/labels/regression", "name": "regression", "color": "B64609", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/15", "html_url": "https://github.com/pyodide/pyodide/milestone/15", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/15/labels", "id": 8819596, "node_id": "MI_kwDOB0-w-84AhpOM", "number": 15, "title": "0.22.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2023-01-04T09:54:15Z", "updated_at": "2023-03-18T11:41:22Z", "due_on": null, "closed_at": "2023-03-18T11:41:22Z"}, "comments": 2, "created_at": "2023-01-04T06:17:10Z", "updated_at": "2023-01-24T01:08:01Z", "closed_at": "2023-01-24T01:08:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen I'm using\u00a0`input` with the new version, show an prompt in infinite mode.\r\n\r\n### To Reproduce\r\n\r\n`input('Type text')`\r\n\r\n### Expected behavior\r\n\r\nDisplay the alert only once.\u00a0\r\n\r\n### Environment\r\n\r\n- Pyodide Version : 0.22.0\r\n\r\n### Additional context\r\n\r\nhttps://www.loom.com/share/08ccfbf98afc43a984feb4eccfd53d3f\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3413/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3382", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3382/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3382/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3382/events", "html_url": "https://github.com/pyodide/pyodide/issues/3382", "id": 1507411674, "node_id": "I_kwDOB0-w-85Z2Uba", "number": 3382, "title": "Code creates Pyodide fatal error rather than Python exception that can be caught", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-22T07:46:46Z", "updated_at": "2022-12-23T08:46:10Z", "closed_at": "2022-12-23T08:46:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nSome exceptions (I am guessing which are thrown from Cython or compiled code) creates Pyodide fatal errors rather than Python exception which can be caught.\r\n\r\n### To Reproduce\r\n\r\n```py\r\nimport numpy as np\r\nfrom scipy.spatial.distance import cdist\r\n\r\nout = np.ones((2, 2))\r\narr = np.array([[1, 2]])\r\n\r\ntry:\r\n    cdist(arr, arr, out=out)\r\nexcept ValueError:\r\n    print('exception caught')\r\n```\r\n\r\nThis creates a Pyodide fatal error. With debug symbols the stack-trace looks like this:\r\n```\r\nCppException std::invalid_argument: Output array has incorrect shape.\r\n    at convertCppException (http://localhost:8000/pyodide.asm.js:5740:16)\r\n    at API.fatal_error (http://localhost:8000/pyodide.asm.js:5758:17)\r\n    at Module.callPyObjectKwargs (http://localhost:8000/pyodide.asm.js:4425:17)\r\n    at Module.callPyObject (http://localhost:8000/pyodide.asm.js:4440:25)\r\n    at wrapper (http://localhost:8000/pyodide.asm.js:9248:27)\r\n```\r\n\r\nAnother similar one:\r\n```py\r\nfrom scipy.sparse._sparsetools import test_throw_error\r\ntry:\r\n    test_throw_error()\r\nexcept MemoryError:\r\n    print('caught exception')\r\n```\r\n\r\nThe code for `test_throw_error` is written in C https://github.com/scipy/scipy/blob/e2bb12727dad4c7c575abda22b459aeb35962ab8/scipy/sparse/sparsetools/csr.h#L1698-L1701:\r\n```C\r\ninline int test_throw_error() {\r\n    throw std::bad_alloc();\r\n    return 1;\r\n}\r\n```\r\n\r\nAnother one from Cython code:\r\n\r\n```py\r\nfrom scipy.signal import lombscargle\r\n\r\ntry:\r\n    lombscargle(x=[1], y=[1, 2], freqs=[1, 2, 3])\r\nexcept ValueError:\r\n    print('caught exception')\r\n```\r\n\r\nStack-trace with debug symbols:\r\n```\r\nCppException (anonymous namespace)::pythonic::types::ValueError: std::exception\r\n    at convertCppException (http://localhost:8000/pyodide.asm.js:5740:16)\r\n    at API.fatal_error (http://localhost:8000/pyodide.asm.js:5758:17)\r\n    at Module.callPyObjectKwargs (http://localhost:8000/pyodide.asm.js:4425:17)\r\n    at Module.callPyObject (http://localhost:8000/pyodide.asm.js:4440:25)\r\n    at wrapper (http://localhost:8000/pyodide.asm.js:9248:27)\r\n```\r\n\r\nThe exception is raised in Cython code https://github.com/scipy/scipy/blob/e2bb12727dad4c7c575abda22b459aeb35962ab8/scipy/signal/_spectral.pyx#L55-L56\r\n\r\n### Expected behavior\r\n\r\nThis should catch the exception and print `exception caught`\r\n\r\n### Environment\r\n\r\n- Pyodide Version: both stable and latest\r\n- Browser version: not relevant\r\n- Any other relevant information:\r\n\r\n### Additional context\r\n\r\nI saw this kind of issues a few times in scipy test suite tests. Typically they arise in tests that check that code is raising an exception.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3382/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3363", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3363/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3363/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3363/events", "html_url": "https://github.com/pyodide/pyodide/issues/3363", "id": 1501771752, "node_id": "I_kwDOB0-w-85Zgzfo", "number": 3363, "title": "`pyodide skeleton pypi --update` doesn't compare versions correctly", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-18T06:26:30Z", "updated_at": "2022-12-18T10:14:25Z", "closed_at": "2022-12-18T10:14:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n`pyodide skeleton pypi --update` doesn't compare versions correctly (this also was a problem with the old `make -C packages update-all`).\r\n\r\n### To Reproduce\r\n\r\n```\r\n/src$ pyodide skeleton pypi --update numcodecs\r\nnumcodecs already up to date. Local: 0.9.1 PyPI: 0.11.0\r\n```\r\n\r\n### Expected behavior\r\n\r\nUpdate numcodecs to the never v0.11.0\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3337", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3337/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3337/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3337/events", "html_url": "https://github.com/pyodide/pyodide/issues/3337", "id": 1488424670, "node_id": "I_kwDOB0-w-85Yt47e", "number": 3337, "title": "REPL Copy-paste with spaces doesn't work", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-10T12:02:25Z", "updated_at": "2023-02-09T18:34:06Z", "closed_at": "2023-02-09T18:34:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In Firefox if one writes anything with spaces then tries to copy-paste the input to a standard Python REPL, one gets,\r\n```\r\nSyntaxError: invalid non-printable character U+00A0\r\n```\r\nthis is because spaces are replaced by this character in Firefox as least.\r\n\r\nIn Pyodide REPL,\r\n```py\r\n>>> 1 + 1\r\n```\r\nCopy-pasting quoted in the host Python REPL,\r\n```py\r\n>>> '1\u00a0+\u00a01'\r\n'1\\xa0+\\xa01'\r\n```\r\nLikely due to https://github.com/jcubic/jquery.terminal/blob/b23a628283e12bd8996a3a2d8676cff6d1587a7a/__tests__/terminal.spec.js#L264 but unclear if it's due to a issue on they side (can't find anything in their repo) or a misconfiguration on our side. So might need to investigate more before reporting it upstream.\r\n\r\nI'm pretty sure it worked OK before, so it might also be due to browser update, as currently even old Pyodide releases have this behavior.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3337/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3328", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3328/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3328/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3328/events", "html_url": "https://github.com/pyodide/pyodide/issues/3328", "id": 1483278771, "node_id": "I_kwDOB0-w-85YaQmz", "number": 3328, "title": "`micropip.install` is mishandling wheel tags", "user": {"login": "mentalisttraceur", "id": 6531708, "node_id": "MDQ6VXNlcjY1MzE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/6531708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mentalisttraceur", "html_url": "https://github.com/mentalisttraceur", "followers_url": "https://api.github.com/users/mentalisttraceur/followers", "following_url": "https://api.github.com/users/mentalisttraceur/following{/other_user}", "gists_url": "https://api.github.com/users/mentalisttraceur/gists{/gist_id}", "starred_url": "https://api.github.com/users/mentalisttraceur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mentalisttraceur/subscriptions", "organizations_url": "https://api.github.com/users/mentalisttraceur/orgs", "repos_url": "https://api.github.com/users/mentalisttraceur/repos", "events_url": "https://api.github.com/users/mentalisttraceur/events{/privacy}", "received_events_url": "https://api.github.com/users/mentalisttraceur/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-08T01:13:41Z", "updated_at": "2022-12-08T01:28:54Z", "closed_at": "2022-12-08T01:28:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n`micropip.install` does not reliably select the best-matching tagged wheel.\r\n\r\n### To Reproduce\r\n\r\n1. Open [the official website's Pyodide REPL](https://pyodide.org/en/stable/console.html)\r\n\r\n2. Use `micropip` to install my `compose` package, which has three different wheels (one for older Pythons, one for 3.5+ with `async`/`await` features added, and one for 3.8+ to use native PEP-570 positional-only arguments):\r\n\r\n    ```python\r\n    >>> import micropip\r\n    >>> await micropip.install('compose')\r\n    ```\r\n\r\n3. Try importing `acompose`. If the `py2.py30`-tagged wheel got installed, this will fail:\r\n\r\n    ```python\r\n    >>> from compose import acompose\r\n    Traceback (most recent call last):\r\n      File \"<console>\", line 1, in <module>\r\n    ImportError: cannot import name 'acompose' from 'compose' (/lib/python3.10/site-packages/compose.py)\r\n    ```\r\n\r\n### Expected behavior\r\n\r\nThe wheel tagged `py38` gets installed (since Pyodide in that REPL is 3.10 at this time), import of `acompose` succeeds, and inspecting the signature of `acompose.__call__` shows that PEP-570 positional-only syntax is being used:\r\n\r\n```python\r\n>>> from compose import acompose\r\n>>> help(acompose.__call__)\r\nHelp on function __call__ in module compose:\r\nasync __call__(self, /, *args, **kwargs)\r\n    Call the composed function.\r\n>>> \r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version: whatever is currently on the website's REPL at the \"stable/console.html\" link.\r\n- Browser version: any, I suspect.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3328/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3311", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3311/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3311/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3311/events", "html_url": "https://github.com/pyodide/pyodide/issues/3311", "id": 1471750274, "node_id": "I_kwDOB0-w-85XuSCC", "number": 3311, "title": "ModuleNotFoundError after writing multiple files with FS.writeFile", "user": {"login": "antocuni", "id": 344507, "node_id": "MDQ6VXNlcjM0NDUwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/344507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antocuni", "html_url": "https://github.com/antocuni", "followers_url": "https://api.github.com/users/antocuni/followers", "following_url": "https://api.github.com/users/antocuni/following{/other_user}", "gists_url": "https://api.github.com/users/antocuni/gists{/gist_id}", "starred_url": "https://api.github.com/users/antocuni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antocuni/subscriptions", "organizations_url": "https://api.github.com/users/antocuni/orgs", "repos_url": "https://api.github.com/users/antocuni/repos", "events_url": "https://api.github.com/users/antocuni/events{/privacy}", "received_events_url": "https://api.github.com/users/antocuni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2022-12-01T18:20:12Z", "updated_at": "2022-12-10T17:50:09Z", "closed_at": "2022-12-10T17:50:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThis might be a duplicate of #737, but I'm opening a new issue because I'm seeing something very weird.\r\nI'm using Pyodide  0.21.3.\r\n\r\n### To Reproduce\r\n\r\nConsider the following snippet (I run it in node, but I can reproduce the same behavior also in the browser):\r\n```js\r\nconst { loadPyodide } = require(\"pyodide\");\r\n\r\nfunction busyWait(ms) {\r\n    let start = new Date().valueOf();\r\n    while( (new Date()).valueOf() - start < ms)\r\n        ;\r\n}\r\n\r\nasync function main() {\r\n    let pyodide = await loadPyodide({\r\n        indexURL: \"./node_modules/pyodide\",\r\n    });\r\n\r\n    console.log(\"Pyodide version: \", pyodide.version);\r\n\r\n    let success = 0;\r\n    let errors = 0;\r\n    for(let i=0; i<100; i++) {\r\n        // uncommenting EITHER of the following lines, it works reliably\r\n        //pyodide.runPython('import importlib; importlib.invalidate_caches()');\r\n        //busyWait(1000);\r\n\r\n        pyodide.FS.writeFile(`bar${i}.py`, `x = ${i}`);\r\n        try {\r\n            pyodide.runPython(`import bar${i} as bar; print('OK ', bar.x)`);\r\n            success++;\r\n        }\r\n        catch(e) {\r\n            //console.log(e);\r\n            console.log('ERR', i);\r\n            errors++;\r\n        }\r\n    }\r\n    console.log(\"success:\", success);\r\n    console.log(\"errors :\", errors);\r\n    console.log(\"error rate: \", (errors/(success+errors))*100, \"%\");\r\n}\r\n\r\nmain();\r\n```\r\n\r\nThe expected result is obviously to see all `OK` and 0% error rate, but what happens is that very often I get `ERR`.\r\nI observed the following:\r\n- if I uncomment the call to `invalidate_caches()`, it passes reliably\r\n- if I uncomment `busyWait(1000)`, (i.e., 1 second) it passes reliably\r\n\r\nThe interesting part is what happens with lower values of `busyWait`:\r\n- with `busyWait(500)`, it fails ~50% of the times\r\n- with `busyWait(100)` it fails ~90% of the times\r\n- with `busyWait(10)` it fails ~99% of the times\r\n\r\nThe following is just a guess, but I think that considering the above it's a reasonable explanation:\r\n- somewhere there is a timestamp which is stored with a resolution of 1s\r\n- if the \"new\" files are written \"too early\", importlib think that it is of the same epoch as the \"old files/directories\" and thus it thinks the cache is still valid\r\n- if you wait long enough, the 1s timestamp gets a new value and importlib correctly notices that there is a \"new\" file\r\n\r\nI am not sure whether this is a bug/\"feature\" of emscripten. I thought it's a good idea to open it here so that we can maybe discuss possible pyodide-specific mitigations and/or workarounds", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3311/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3308", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3308/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3308/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3308/events", "html_url": "https://github.com/pyodide/pyodide/issues/3308", "id": 1470482632, "node_id": "I_kwDOB0-w-85XpcjI", "number": 3308, "title": "Remove `./run_docker --pre-built`?", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-01T01:04:24Z", "updated_at": "2022-12-13T03:04:16Z", "closed_at": "2022-12-13T03:04:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The command `./run_docker --pre-built` is mentioned in our docs [1](https://pyodide.org/en/stable/development/building-from-sources.html?highlight=pre-built#using-docker) [2](https://pyodide.org/en/stable/development/new-packages.html?highlight=pre-built#creating-the-meta-yaml-file), but actually, it is not working as expected.\r\n\r\nThe pyodide build artifacts inside the pre-built docker image are in `/src/pyodide`, but when we do `./run_docker --pre-built`, the host file system is mounted to `/src`, overriding the file system inside the container. So `./run_docker --pre-built` works almost just same as `./run_docker`.\r\n\r\nFor now, I think the correct way to use the pre-built docker image is like this:\r\n\r\n```bash\r\nmkdir dist\r\ndocker pull pyodide/pyodide:0.20.0\r\ndocker run  --it -v $(pwd)/dist:/src/pyodide/build pyodide/pyodide:0.20.0 /bin/bash\r\n$ cd /src/pyodide\r\n$ # Do something inside the docker image...\r\n$ make && exit\r\n# built artifacts are saved to ./dist\r\n```\r\n\r\nSo I would like to discuss two things:\r\n\r\n1. We have to either remove `--pre-built` flag, or fix it to work as expected.\r\n\r\n2. If we decide to remove `--pre-built` flag, should we still build pre-built docker image? or should we stop providing the image and tell users to use`pyodide build` instead?\r\n\r\nRelated issues:\r\n\r\n- https://github.com/pyodide/pyodide/discussions/3304\r\n- https://github.com/pyodide/pyodide/issues/2705\r\n- https://github.com/pyodide/pyodide/issues/3266\r\n\r\nWDYT?\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3217", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3217/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3217/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3217/events", "html_url": "https://github.com/pyodide/pyodide/issues/3217", "id": 1431694932, "node_id": "I_kwDOB0-w-85VVe5U", "number": 3217, "title": "Docker: Chrome 107 doesn't have debian package", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-11-01T16:12:04Z", "updated_at": "2022-11-15T06:17:42Z", "closed_at": "2022-11-02T04:35:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\nChrome `LATEST_RELEASE` is currently 107.0.5304.62, but the url https://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_107.0.5304.62-1_amd64.deb is a 404.\r\n\r\n### To Reproduce\r\n\r\nRun `docker build .` in root directory.\r\n\r\n### Workaround\r\nPass `--build-arg CHROME_VERSION=106`.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3207", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3207/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3207/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3207/events", "html_url": "https://github.com/pyodide/pyodide/issues/3207", "id": 1423422059, "node_id": "I_kwDOB0-w-85U17Jr", "number": 3207, "title": "Test failure regarding pytest 7.2.0 update", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-26T04:31:53Z", "updated_at": "2022-10-31T00:06:03Z", "closed_at": "2022-10-31T00:06:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Recent pytest 7.2.0 update dropped `py` dependency (https://github.com/pytest-dev/pytest/pull/10396). \r\nAnd it seems like quite a lot of `pytest-*` plugins were using `py` package without installing it explicitly.\r\n\r\nThis is causing some errors in our CI ([1](https://app.circleci.com/pipelines/github/pyodide/pyodide/4946/workflows/d638648a-91ad-423e-a87a-67cffb5f02c5/jobs/59266), [2](https://app.circleci.com/pipelines/github/pyodide/pyodide/4945/workflows/f94a6667-24e9-4fcd-8118-cfe933fcb98d/jobs/59226)).\r\n\r\nA hotfix would be pinning pytest version < 7.2. But I guess plugin devs will soon make a release with a fix (`pytest-benchmark` already did), or we can ask them to add `py` as a dependency.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3203", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3203/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3203/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3203/events", "html_url": "https://github.com/pyodide/pyodide/issues/3203", "id": 1420918942, "node_id": "I_kwDOB0-w-85UsYCe", "number": 3203, "title": "Fatal error with snippet using `np.random` and `scipy.linalg`", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640941765, "node_id": "MDU6TGFiZWwxNjQwOTQxNzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scipy", "name": "scipy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-10-24T14:22:50Z", "updated_at": "2023-04-01T18:21:23Z", "closed_at": "2023-04-01T10:04:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI get a fatal error when trying to run a snippet using `numpy.random` and `scipy.linalg` inside node.\r\n\r\nI get somewhat similar issues when trying to run the snippet in Chromium or Firefox.\r\n\r\nNote the behaviour is not always the same on each run. In particular, the error does not happen on the same loop iteration. I have seen this kind of variations:\r\n- Pyodide fatal error: `memory access out of bounds` or `table index out of bounds` or `null function or function signature mismatch`\r\n- weird Python error that does not make sense (since the code works in previous loop iterations) e.g. `TypeError: my_make_regression() got multiple values for argument 'n_features'` or `SystemError: Type does not define the tp_name field.`\r\n- in Chromium: the tab crashes with a \"Aw snap\" message\r\n- what seems like a hang, i.e. the loop counter is not printed anymore\r\n\r\nI tried to get more info by building Pyodide myself with `-g2` flags on commit https://github.com/pyodide/pyodide/commit/2326c05d83bb172d3a8b3d267d3440ed687f5c8d. Out of 20 runs, here is the kind of stack-trace I got (with some kind of grouping):\r\n\r\n<details>\r\n<summary>\r\nmemory access out of bounds dlfree (3 times)\r\n</summary\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"<exec>\", line 9 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlfree (wasm://wasm/01f433ea:wasm-function[8627]:0x3a2b27)\r\n    at _PyMem_RawFree (wasm://wasm/01f433ea:wasm-function[2006]:0x15b64f)\r\n    at PyObject_Free (wasm://wasm/01f433ea:wasm-function[2038]:0x15c899)\r\n    at object_dealloc (wasm://wasm/01f433ea:wasm-function[2259]:0x16cad1)\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at __pyx_pw_5numpy_6random_13bit_generator_1_int_to_uint32_array (wasm://wasm/00087946:wasm-function[237]:0x14cb3)\r\n    at __pyx_pw_5numpy_6random_13bit_generator_3_coerce_to_uint32_array (wasm://wasm/00087946:wasm-function[238]:0x162b3)\r\n    at __pyx_f_5numpy_6random_13bit_generator_12SeedSequence_get_assembled_entropy (wasm://wasm/00087946:wasm-function[147]:0x8f88)\r\n    at __pyx_pw_5numpy_6random_13bit_generator_12SeedSequence_1__init__ (wasm://wasm/00087946:wasm-function[213]:0xff93)\r\n    at type_call (wasm://wasm/01f433ea:wasm-function[2243]:0x16aba2) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"<exec>\", line 9 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlfree (wasm://wasm/01f433ea:wasm-function[8627]:0x3a2b27)\r\n    at _PyMem_RawFree (wasm://wasm/01f433ea:wasm-function[2006]:0x15b64f)\r\n    at PyObject_Free (wasm://wasm/01f433ea:wasm-function[2038]:0x15c899)\r\n    at PyObject_GC_Del (wasm://wasm/01f433ea:wasm-function[3969]:0x234a30)\r\n    at tb_dealloc (wasm://wasm/01f433ea:wasm-function[3847]:0x226a7c)\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at PyTraceBack_Here (wasm://wasm/01f433ea:wasm-function[3849]:0x226d2f)\r\n    at __Pyx_AddTraceback (wasm://wasm/00087946:wasm-function[133]:0x83f9)\r\n    at __pyx_pw_5numpy_6random_13bit_generator_12BitGenerator_1__init__ (wasm://wasm/00087946:wasm-function[189]:0xc4e2)\r\n    at wrap_init (wasm://wasm/01f433ea:wasm-function[2345]:0x1727e0) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1192 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlfree (wasm://wasm/01f433ea:wasm-function[8627]:0x3a29df)\r\n    at _PyMem_RawFree (wasm://wasm/01f433ea:wasm-function[2006]:0x15b64f)\r\n    at PyObject_Free (wasm://wasm/01f433ea:wasm-function[2038]:0x15c899)\r\n    at unicode_dealloc (wasm://wasm/01f433ea:wasm-function[2597]:0x19574b)\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _Py_DisplaySourceLine (wasm://wasm/01f433ea:wasm-function[3851]:0x22740e)\r\n    at PyTraceBack_Print (wasm://wasm/01f433ea:wasm-function[3852]:0x22789c)\r\n    at write_unraisable_exc (wasm://wasm/01f433ea:wasm-function[3258]:0x1ed01d)\r\n    at sys_unraisablehook (wasm://wasm/01f433ea:wasm-function[3818]:0x2260bb)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>\r\nmemory access out of bounds `dlmalloc` (4 times)\r\n</summary>\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/numpy/lib/function_base.py\", line 602 in asarray_chkfinite\r\n  File \"/lib/python3.10/site-packages/scipy/ ###_lib/_util.py\", line 287 in _asarray_validated\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1134 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlmalloc (wasm://wasm/01f433ea:wasm-function[8626]:0x3a14c7)\r\n    at default_malloc (wasm://wasm/00978c1e:wasm-function[550]:0x1da38)\r\n    at PyDataMem_UserNEW (wasm://wasm/00978c1e:wasm-function[554]:0x1db3b)\r\n    at PyArray_NewFromDescr_int (wasm://wasm/00978c1e:wasm-function[1283]:0x50151)\r\n    at PyArray_NewFromDescr (wasm://wasm/00978c1e:wasm-function[1285]:0x50611)\r\n    at ufunc_generic_fastcall (wasm://wasm/00978c1e:wasm-function[4380]:0x1a6be0)\r\n    at ufunc_generic_vectorcall (wasm://wasm/00978c1e:wasm-function[4379]:0x1a510c)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d418d)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/contextlib.py\", line 79 in inner\r\n  File \"<exec>\", line 9 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlmalloc (wasm://wasm/01f433ea:wasm-function[8626]:0x3a123e)\r\n    at _PyMem_RawMalloc (wasm://wasm/01f433ea:wasm-function[2003]:0x15b61d)\r\n    at PyObject_Malloc (wasm://wasm/01f433ea:wasm-function[2035]:0x15c819)\r\n    at PyUnicode_New (wasm://wasm/01f433ea:wasm-function[2407]:0x1763c1)\r\n    at _PyUnicodeWriter_PrepareInternal (wasm://wasm/01f433ea:wasm-function[2441]:0x17b316)\r\n    at _PyUnicodeWriter_WriteASCIIString (wasm://wasm/01f433ea:wasm-function[2440]:0x17afdc)\r\n    at PyUnicode_FromFormatV (wasm://wasm/01f433ea:wasm-function[2438]:0x17a55f)\r\n    at PyErr_Format (wasm://wasm/01f433ea:wasm-function[3219]:0x1ebc6c)\r\n    at array_item (wasm://wasm/00978c1e:wasm-function[2717]:0xc9217)\r\n    at PySequence_GetItem (wasm://wasm/01f433ea:wasm-function[629]:0x102c9c) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/linecache.py\", line 137 in updatecache\r\n  File \"/lib/python3.10/linecache.py\", line 46 in getlines\r\n  File \"/lib/python3.10/linecache.py\", line 30 in getline\r\n  File \"/lib/python3.10/traceback.py\", line 306 in line\r\n  File \"/lib/python3.10/traceback.py\", line 383 in extract\r\n  File \"/lib/python3.10/traceback.py\", line 502 in __init__\r\n  File \"/lib/python3.10/traceback.py\", line 135 in format_exception\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlmalloc (wasm://wasm/01f433ea:wasm-function[8626]:0x3a14c7)\r\n    at dlrealloc (wasm://wasm/01f433ea:wasm-function[8628]:0x3a2eaf)\r\n    at _PyMem_RawRealloc (wasm://wasm/01f433ea:wasm-function[2005]:0x15b647)\r\n    at PyMem_Realloc (wasm://wasm/01f433ea:wasm-function[2030]:0x15c70d)\r\n    at list_extend (wasm://wasm/01f433ea:wasm-function[1504]:0x1364b1)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at method_vectorcall_O (wasm://wasm/01f433ea:wasm-function[1100]:0x122ca5)\r\n    at object_vacall (wasm://wasm/01f433ea:wasm-function[977]:0x11b925)\r\n    at _PyObject_CallMethodIdObjArgs (wasm://wasm/01f433ea:wasm-function[978]:0x11ba49)\r\n    at _io__IOBase_readlines (wasm://wasm/01f433ea:wasm-function[6755]:0x331e21) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/linecache.py\", line 137 in updatecache\r\n  File \"/lib/python3.10/linecache.py\", line 46 in getlines\r\n  File \"/lib/python3.10/linecache.py\", line 30 in getline\r\n  File \"/lib/python3.10/traceback.py\", line 306 in line\r\n  File \"/lib/python3.10/traceback.py\", line 383 in extract\r\n  File \"/lib/python3.10/traceback.py\", line 502 in __init__\r\n  File \"/lib/python3.10/traceback.py\", line 135 in format_exception\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlmalloc (wasm://wasm/01f433ea:wasm-function[8626]:0x3a0fd8)\r\n    at _PyMem_RawMalloc (wasm://wasm/01f433ea:wasm-function[2003]:0x15b61d)\r\n    at PyObject_Malloc (wasm://wasm/01f433ea:wasm-function[2035]:0x15c819)\r\n    at PyUnicode_New (wasm://wasm/01f433ea:wasm-function[2407]:0x1763c1)\r\n    at _PyUnicode_FromASCII (wasm://wasm/01f433ea:wasm-function[2427]:0x17937b)\r\n    at PyUnicode_Substring (wasm://wasm/01f433ea:wasm-function[2582]:0x18e575)\r\n    at _textiowrapper_readline (wasm://wasm/01f433ea:wasm-function[6890]:0x33b0c5)\r\n    at textiowrapper_iternext (wasm://wasm/01f433ea:wasm-function[6889]:0x33ac14)\r\n    at list_extend (wasm://wasm/01f433ea:wasm-function[1504]:0x13651f)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>\r\nmemory access out of bounds in Fortran code (3 times)\r\n</summary>\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 246 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlacpy_ (wasm://wasm/00e47a32:wasm-function[1601]:0x353aa9)\r\n    at dlals0_ (wasm://wasm/00e47a32:wasm-function[610]:0x1397c5)\r\n    at dlalsa_ (wasm://wasm/00e47a32:wasm-function[611]:0x13a013)\r\n    at dlalsd_ (wasm://wasm/00e47a32:wasm-function[612]:0x13ad53)\r\n    at dgelsd_ (wasm://wasm/00e47a32:wasm-function[550]:0x10f9a9)\r\n    at f2py_rout__flapack_dgelsd (wasm://wasm/006793d6:wasm-function[248]:0x30f3f)\r\n    at fortran_call (wasm://wasm/0003dbea:wasm-function[103]:0x664d)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6549) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1192 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlacpy_ (wasm://wasm/00e47a32:wasm-function[1601]:0x353aa9)\r\n    at dlals0_ (wasm://wasm/00e47a32:wasm-function[610]:0x1397c5)\r\n    at dlalsa_ (wasm://wasm/00e47a32:wasm-function[611]:0x13a013)\r\n    at dlalsd_ (wasm://wasm/00e47a32:wasm-function[612]:0x13ad53)\r\n    at dgelsd_ (wasm://wasm/00e47a32:wasm-function[550]:0x10f9a9)\r\n    at f2py_rout__flapack_dgelsd (wasm://wasm/006793d6:wasm-function[248]:0x30f3f)\r\n    at fortran_call (wasm://wasm/0003dbea:wasm-function[103]:0x664d)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6549) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1192 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at dlasd7_ (wasm://wasm/00e47a32:wasm-function[1645]:0x36894c)\r\n    at dlasd6_ (wasm://wasm/00e47a32:wasm-function[1644]:0x36841e)\r\n    at dlasda_ (wasm://wasm/00e47a32:wasm-function[1647]:0x369ffd)\r\n    at dlalsd_ (wasm://wasm/00e47a32:wasm-function[612]:0x13acfc)\r\n    at dgelsd_ (wasm://wasm/00e47a32:wasm-function[550]:0x10f9a9)\r\n    at f2py_rout__flapack_dgelsd (wasm://wasm/006793d6:wasm-function[248]:0x30f3f)\r\n    at fortran_call (wasm://wasm/0003dbea:wasm-function[103]:0x664d)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6549) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>\r\nmemory access out of bounds `PyUnicode_FromFormatV` (1 time)\r\n</summary>\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/contextlib.py\", line 79 in inner\r\n  File \"<exec>\", line 9 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: memory access out of bounds\r\n    at PyUnicode_FromFormatV (wasm://wasm/01f433ea:wasm-function[2438]:0x17aa7f)\r\n    at _PyErr_Format (wasm://wasm/01f433ea:wasm-function[3216]:0x1eb9b4)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d43d1)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at __pyx_pw_5numpy_6random_8_mt19937_7MT19937_1__init__ (wasm://wasm/0003b756:wasm-function[110]:0x4dcd)\r\n    at type_call (wasm://wasm/01f433ea:wasm-function[2243]:0x16aba2)\r\n    at __Pyx_PyObject_Call (wasm://wasm/00207e6e:wasm-function[138]:0xe488)\r\n    at __pyx_pw_5numpy_6random_6mtrand_11RandomState_1__init__ (wasm://wasm/00207e6e:wasm-function[148]:0xf51f) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>\r\ntable index is out of bounds in `_Py_Dealloc` (2 times)\r\n</summary>\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 246 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: table index is out of bounds\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d253b)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at method_vectorcall (wasm://wasm/01f433ea:wasm-function[1007]:0x11c6a9)\r\n    at context_run (wasm://wasm/01f433ea:wasm-function[3206]:0x1eb3ea)\r\n    at cfunction_vectorcall_FASTCALL_KEYWORDS (wasm://wasm/01f433ea:wasm-function[1869]:0x155cea)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"<__array_function__ internals>\", line 179 in copyto\r\n  File \"/lib/python3.10/site-packages/numpy/core/numeric.py\", line 205 in ones\r\n  File \"<exec>\", line 11 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: table index is out of bounds\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce60d)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11ab37)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4771)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>\r\nnull function or function signature mismatch in `_PyDealloc` (4 times)\r\n</summary>\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/scipy/_lib/_util.py\", line 284 in _asarray_validated\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1134 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: null function or function signature mismatch\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce805)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d418d)\r\n    at _PyEval_Vector (wasm-->://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4239)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"<__array_function__ internals>\", line 179 in copyto\r\n  File \"/lib/python3.10/site-packages/numpy/core/numeric.py\", line 205 in ones\r\n  File \"<exec>\", line 11 in my_make_regression\r\n  File \"<exec>\", line 5 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: null function or function signature mismatch\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d478d)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4239)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d418d) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 269 in set_exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 250 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: null function or function signature mismatch\r\n    at PyDict_GetItemWithError (wasm://wasm/01f433ea:wasm-function[1666]:0x146ccc)\r\n    at _PyObject_GenericGetAttrWithDict (wasm://wasm/01f433ea:wasm-function[1965]:0x159ec6)\r\n    at PyObject_GenericGetAttr (wasm://wasm/01f433ea:wasm-function[1964]:0x159db2)\r\n    at PyObject_GetAttr (wasm://wasm/01f433ea:wasm-function[1956]:0x159893)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4bb9)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at method_vectorcall (wasm://wasm/01f433ea:wasm-function[1007]:0x11c639)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d418d) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n```\r\nStack (most recent call first):\r\n  File \"/lib/python3.10/site-packages/numpy/core/_methods.py\", line 62 in _all\r\n  File \"/lib/python3.10/site-packages/numpy/lib/function_base.py\", line 602 in asarray_chkfinite\r\n  File \"/lib/python3.10/site-packages/scipy/_lib/_util.py\", line 287 in _asarray_validated\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1134 in lstsq\r\n  File \"<exec>\", line 6 in <module>\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357 in run_async\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531 in eval_code_async\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232 in __step\r\n  File \"/lib/python3.10/asyncio/events.py\", line 80 in _run\r\n  File \"/lib/python3.10/pyodide/webloop.py\", line 267 in run_handle\r\n/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:452\r\n      throw ex;\r\n      ^\r\n\r\nRuntimeError: null function or function signature mismatch\r\n    at _Py_Dealloc (wasm://wasm/01f433ea:wasm-function[1992]:0x15b407)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d22bb)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97)\r\n    at array_all (wasm://wasm/00978c1e:wasm-function[2751]:0xd21af)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at method_vectorcall_VARARGS_KEYWORDS (wasm://wasm/01f433ea:wasm-function[1101]:0x122e5f) {\r\n  pyodide_fatal_error: true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n\r\n<summary>\r\n`PythonError` that does not make sense (3 times)\r\n</summary>\r\n\r\n```\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 5, in <module>\r\n  File \"<exec>\", line 13, in my_make_regression\r\nValueError: matmul: Input operand 1 does not have enough dimensions (has 1, gufunc core with signature (n?,k),(k,m?)->(n?,m?) requires 2)\r\n\r\n    at new_error (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1295:75)\r\n    at wrap_exception (wasm://wasm/01f433ea:wasm-function[281]:0xd2f26)\r\n    at FutureDoneCallback_call (wasm://wasm/01f433ea:wasm-function[391]:0xd7ada)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at context_run (wasm://wasm/01f433ea:wasm-function[3206]:0x1eb3d6)\r\n    at cfunction_vectorcall_FASTCALL_KEYWORDS (wasm://wasm/01f433ea:wasm-function[1869]:0x155cea)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4771)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d41b3)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at _pyproxy_apply (wasm://wasm/01f433ea:wasm-function[386]:0xd77a6)\r\n    at Object.Module.callPyObjectKwargs (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:5838)\r\n    at Object.Module.callPyObject (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:6216)\r\n    at Timeout.wrapper [as _onTimeout] (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1394:228)\r\n    at listOnTimeout (node:internal/timers:559:17)\r\n    at processTimers (node:internal/timers:502:7) {\r\n  __error_address: 34329224\r\n}\r\n```\r\n\r\n```\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 6, in <module>\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1134, in lstsq\r\n    a1 = _asarray_validated(a, check_finite=check_finite)\r\n  File \"/lib/python3.10/site-packages/scipy/_lib/_util.py\", line 287, in _asarray_validated\r\n    a = toarray(a)\r\n  File \"/lib/python3.10/site-packages/numpy/lib/function_base.py\", line 602, in asarray_chkfinite\r\n    if a.dtype.char in typecodes['AllFloat'] and not np.isfinite(a).all():\r\nSystemError: Type does not define the tp_name field.\r\n\r\n    at new_error (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1295:75)\r\n    at wrap_exception (wasm://wasm/01f433ea:wasm-function[281]:0xd2f26)\r\n    at FutureDoneCallback_call (wasm://wasm/01f433ea:wasm-function[391]:0xd7ada)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at context_run (wasm://wasm/01f433ea:wasm-function[3206]:0x1eb3d6)\r\n    at cfunction_vectorcall_FASTCALL_KEYWORDS (wasm://wasm/01f433ea:wasm-function[1869]:0x155cea)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4771)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d41b3)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at _pyproxy_apply (wasm://wasm/01f433ea:wasm-function[386]:0xd77a6)\r\n    at Object.Module.callPyObjectKwargs (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:5838)\r\n    at Object.Module.callPyObject (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:6216)\r\n    at Timeout.wrapper [as _onTimeout] (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1394:228)\r\n    at listOnTimeout (node:internal/timers:559:17)\r\n    at processTimers (node:internal/timers:502:7) {\r\n  __error_address: 18010544\r\n}\r\n```\r\n\r\n```\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 531, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.10/_pyodide/_base.py\", line 357, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 6, in <module>\r\n  File \"/lib/python3.10/site-packages/scipy/linalg/_basic.py\", line 1204, in lstsq\r\n    resids = np.asarray([], dtype=x.dtype)\r\nSystemError: Objects/dictobject.c:1514: bad argument to internal function\r\n\r\n    at new_error (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1295:75)\r\n    at wrap_exception (wasm://wasm/01f433ea:wasm-function[281]:0xd2f26)\r\n    at FutureDoneCallback_call (wasm://wasm/01f433ea:wasm-function[391]:0xd7ada)\r\n    at method_call_trampoline (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1410:82)\r\n    at _PyObject_MakeTpCall (wasm://wasm/01f433ea:wasm-function[956]:0x11a5e6)\r\n    at context_run (wasm://wasm/01f433ea:wasm-function[3206]:0x1eb3d6)\r\n    at cfunction_vectorcall_FASTCALL_KEYWORDS (wasm://wasm/01f433ea:wasm-function[1869]:0x155cea)\r\n    at PyVectorcall_Call (wasm://wasm/01f433ea:wasm-function[961]:0x11aafa)\r\n    at _PyObject_Call (wasm://wasm/01f433ea:wasm-function[962]:0x11abf4)\r\n    at PyObject_Call (wasm://wasm/01f433ea:wasm-function[963]:0x11ac97)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d4771)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at call_function (wasm://wasm/01f433ea:wasm-function[3041]:0x1d6566)\r\n    at _PyEval_EvalFrameDefault (wasm://wasm/01f433ea:wasm-function[3032]:0x1d41b3)\r\n    at _PyEval_Vector (wasm://wasm/01f433ea:wasm-function[3029]:0x1ce77e)\r\n    at _PyFunction_Vectorcall (wasm://wasm/01f433ea:wasm-function[964]:0x11acda)\r\n    at _pyproxy_apply (wasm://wasm/01f433ea:wasm-function[386]:0xd77a6)\r\n    at Object.Module.callPyObjectKwargs (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:5838)\r\n    at Object.Module.callPyObject (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:338:6216)\r\n    at Timeout.wrapper [as _onTimeout] (/home/lesteve/dev/scikit-learn-tests-pyodide/node_modules/pyodide/pyodide.asm.js:1394:228)\r\n    at listOnTimeout (node:internal/timers:559:17)\r\n    at processTimers (node:internal/timers:502:7) {\r\n  __error_address: 29290792\r\n}\r\n```\r\n\r\n</details>\r\n\r\n\r\n### To Reproduce\r\n\r\n```\r\nnode test.js\r\n```\r\n\r\nwhere `test.js` has the following content:\r\n```js\r\nconst { loadPyodide } = require(\"pyodide\");\r\n\r\nasync function main() {\r\n    let exitcode = 0;\r\n    try {\r\n        let pyodide = await loadPyodide();\r\n\r\n        await pyodide.loadPackage([\"micropip\"]);\r\n        await pyodide.runPythonAsync(`import micropip; micropip.install('scipy')`);\r\n\r\n        await pyodide.runPythonAsync(`\r\n            import numpy as np\r\n            from scipy import linalg\r\n            from js import console\r\n\r\n            def my_make_regression(n_samples, n_features, n_informative):\r\n                n_non_informative = n_features - n_informative\r\n\r\n                rng = np.random.RandomState(0)\r\n                X = rng.randn(n_samples, n_informative)\r\n                w = np.ones(n_informative)\r\n                noise = rng.randn(n_samples)\r\n                y = X @ w + 0.05 * noise\r\n                X = np.concatenate([X, rng.randn(n_samples, n_non_informative)], axis=1)\r\n\r\n                return X, y\r\n        `);\r\n        await pyodide.runPythonAsync(`\r\n            for i in range(10_000):\r\n                if i % 20 == 0:\r\n                    console.log(f\"{i}\")\r\n                X, y = my_make_regression(n_features=50, n_informative=10, n_samples=100)\r\n                _ = linalg.lstsq(X, y)\r\n    `);\r\n\r\n    } catch (e) {\r\n        console.error(e);\r\n        exitcode = 1;\r\n    } finally {\r\n        process.exit(exitcode);\r\n    }\r\n}\r\n\r\nmain();\r\n```\r\n\r\nSnippet easier to copy and paste in a Pyodide console e.g. https://pyodide.org/en/latest/console.html\r\n```py\r\nimport numpy as np\r\nfrom scipy import linalg\r\nfrom js import console\r\n\r\nfunc_str = \"\"\"\r\ndef my_make_regression(n_samples, n_features, n_informative):\r\n    n_non_informative = n_features - n_informative\r\n\r\n    rng = np.random.RandomState(0)\r\n    X = rng.randn(n_samples, n_informative)\r\n    w = np.ones(n_informative)\r\n    noise = rng.randn(n_samples)\r\n    y = X @ w + 0.05 * noise\r\n    X = np.concatenate([X, rng.randn(n_samples, n_non_informative)], axis=1)\r\n\r\n    return X, y\r\n\"\"\"\r\n\r\nexec(func_str)\r\n\r\nfor i in range(10_000):\r\n    if i % 20 == 0:\r\n        console.log(f\"{i}\")\r\n    X, y = my_make_regression(n_features=50, n_informative=10, n_samples=100)\r\n    _ = linalg.lstsq(X, y)\r\n\r\n\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nThe snippet runs without error\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.22.0-alpha.1\r\n- node version: v17.8.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Chromium 106.0.5249.119 and Firefox 106.0b9\r\n\r\n- Commit hash of Pyodide git repository: To get more info in stack-traces, I build Pyodide on commit https://github.com/pyodide/pyodide/commit/2326c05d83bb172d3a8b3d267d3440ed687f5c8d\r\n- Build environment: I used the docker image pyodide/pyodide-env\r\n\r\n### Additional context\r\n\r\nThis snippet was put together to try to track down some of the errors we were seeing when running the scikit-learn tests in https://github.com/lesteve/scikit-learn-tests-pyodide.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3203/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3203/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3141", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3141/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3141/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3141/events", "html_url": "https://github.com/pyodide/pyodide/issues/3141", "id": 1382024358, "node_id": "I_kwDOB0-w-85SYASm", "number": 3141, "title": "[csp] Doesn't work with strict Content Security Policy - unsafe-eval", "user": {"login": "fcrozatier", "id": 48696601, "node_id": "MDQ6VXNlcjQ4Njk2NjAx", "avatar_url": "https://avatars.githubusercontent.com/u/48696601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fcrozatier", "html_url": "https://github.com/fcrozatier", "followers_url": "https://api.github.com/users/fcrozatier/followers", "following_url": "https://api.github.com/users/fcrozatier/following{/other_user}", "gists_url": "https://api.github.com/users/fcrozatier/gists{/gist_id}", "starred_url": "https://api.github.com/users/fcrozatier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fcrozatier/subscriptions", "organizations_url": "https://api.github.com/users/fcrozatier/orgs", "repos_url": "https://api.github.com/users/fcrozatier/repos", "events_url": "https://api.github.com/users/fcrozatier/events{/privacy}", "received_events_url": "https://api.github.com/users/fcrozatier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-22T08:13:43Z", "updated_at": "2022-09-22T08:35:21Z", "closed_at": "2022-09-22T08:35:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI need to add `unsafe-eval` to my csp `script-src` in order to use pyodide. \r\n\r\n### Expected behavior\r\n\r\nI would be great to be able to use `wasm-unsafe-eval` instead which is more specific and seems adapted.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3141/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3126", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3126/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3126/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3126/events", "html_url": "https://github.com/pyodide/pyodide/issues/3126", "id": 1377140782, "node_id": "I_kwDOB0-w-85SFYAu", "number": 3126, "title": "`ModuleNotFoundError` when python modules import packages", "user": {"login": "kolibril13", "id": 44469195, "node_id": "MDQ6VXNlcjQ0NDY5MTk1", "avatar_url": "https://avatars.githubusercontent.com/u/44469195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kolibril13", "html_url": "https://github.com/kolibril13", "followers_url": "https://api.github.com/users/kolibril13/followers", "following_url": "https://api.github.com/users/kolibril13/following{/other_user}", "gists_url": "https://api.github.com/users/kolibril13/gists{/gist_id}", "starred_url": "https://api.github.com/users/kolibril13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kolibril13/subscriptions", "organizations_url": "https://api.github.com/users/kolibril13/orgs", "repos_url": "https://api.github.com/users/kolibril13/repos", "events_url": "https://api.github.com/users/kolibril13/events{/privacy}", "received_events_url": "https://api.github.com/users/kolibril13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-18T18:31:13Z", "updated_at": "2022-09-27T09:23:21Z", "closed_at": "2022-09-27T09:23:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\nWhen modules (e.g. `numpytest.py`) import other packages (e.g. `numpy` or `scipy`), Pyodide throws an ModuleNotFoundError.\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n### To Reproduce\r\nThis is from the [pyodide console](https://pyodide.org/en/stable/console.html):\r\n```console\r\nWelcome to the Pyodide terminal emulator \ud83d\udc0d\r\nPython 3.10.2 (main, Sep 15 2022 23:28:12) on WebAssembly/Emscripten\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> filename = \"numpytest.py\"\r\ncode = \"\"\"\r\nprint(\"Hello Numpy\")\r\nimport numpy\r\nprint(f\"{numpy.euler_gamma = }\")\r\n\"\"\"\r\nwith open(filename, \"w\") as f:\r\n    f.write(code)\r\n... \r\n68\r\n>>> filename = \"scipytest.py\"\r\ncode = \"\"\"\r\nprint(\"Hello Scipy\")\r\nimport scipy\r\nprint(f\"{scipy.pi = }\")\r\n\"\"\"\r\nwith open(filename, \"w\") as f:\r\n    f.write(code)\r\n... \r\n59\r\n>>> from numpytest import *\r\nHello Numpy\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/home/pyodide/numpytest.py\", line 3, in <module>\r\n    import numpy\r\nModuleNotFoundError: No module named 'numpy'\r\n>>> from scipytest import *\r\nHello Scipy\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/home/pyodide/scipytest.py\", line 3, in <module>\r\n    import scipy\r\nModuleNotFoundError: No module named 'scipy'\r\n>>> import scipy\r\n>>> from scipytest import *\r\nHello Scipy\r\nscipy.pi = 3.141592653589793\r\n>>> \r\n>>> import numpy\r\n>>> from numpytest import *\r\nHello Numpy\r\nnumpy.euler_gamma = 0.5772156649015329\r\n>>> \r\n \r\n ```\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: Latest https://pyodide.org/en/stable/console.html\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:Chrome 105.0.5195.125 (Official Build) (arm64)\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\nThe same problem causes a `ModuleNotFoundError` in JupyterLite https://github.com/jupyterlite/jupyterlite/issues/806.\r\n\r\nIt would be wonderful if this importing feature was possible. That would allow a whole range of already existing Jupyter notebook collections to run in JupyterLite without code adjustments.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3112", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3112/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3112/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3112/events", "html_url": "https://github.com/pyodide/pyodide/issues/3112", "id": 1375093655, "node_id": "I_kwDOB0-w-85R9kOX", "number": 3112, "title": "Stdout not ending in newline doesn't trigger stdout callback until newline is printed", "user": {"login": "obfuscatedgenerated", "id": 75035364, "node_id": "MDQ6VXNlcjc1MDM1MzY0", "avatar_url": "https://avatars.githubusercontent.com/u/75035364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/obfuscatedgenerated", "html_url": "https://github.com/obfuscatedgenerated", "followers_url": "https://api.github.com/users/obfuscatedgenerated/followers", "following_url": "https://api.github.com/users/obfuscatedgenerated/following{/other_user}", "gists_url": "https://api.github.com/users/obfuscatedgenerated/gists{/gist_id}", "starred_url": "https://api.github.com/users/obfuscatedgenerated/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/obfuscatedgenerated/subscriptions", "organizations_url": "https://api.github.com/users/obfuscatedgenerated/orgs", "repos_url": "https://api.github.com/users/obfuscatedgenerated/repos", "events_url": "https://api.github.com/users/obfuscatedgenerated/events{/privacy}", "received_events_url": "https://api.github.com/users/obfuscatedgenerated/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-15T21:10:58Z", "updated_at": "2022-12-18T23:55:53Z", "closed_at": "2022-12-18T23:55:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen the Python code prints to stdout some text not ending with a new line, the stdout callback configured in loadPyodide() isn't called.\r\n\r\n### To Reproduce\r\n\r\n```js\r\nlet py = await loadPyodide({\r\n        stdout: (data) => {\r\n            console.log(`Got stdout data: ${data}`);\r\n        }\r\n});\r\n\r\n\r\npy.runPython(`print(\"Hello world!\", end=\"\")`); // this doesn't call the stdout callback\r\npy.runPython(`print(\"\\n\")`); // until this happens\r\n```\r\n\r\n### Expected behavior\r\n\r\nThis should call the stdout event as soon as text is put. Once for putting `Hello world!`, then once for putting new line. Some devs may prefer it only called on newline prints, but I need to use the output. Could be an configurable option? After all, this would probably be a breaking change in some projects.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: `0.21.2` loaded in browser with JSDelivr, with type interfaces over npm (not included in built website)\r\n- Browser version: Chrome 105.0.5195.127\r\n- Any other relevant information: Using Typescript and Webpack (with pyodide set as an external to load via JSDelivr)\r\n\r\n### Additional context\r\n\r\nThere may be other functions that write to stdout like this, but print() is the most prominent example.\r\n\r\n*Cheers!*\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3112/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3112/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3087", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3087/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3087/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3087/events", "html_url": "https://github.com/pyodide/pyodide/issues/3087", "id": 1366776861, "node_id": "I_kwDOB0-w-85Rd1wd", "number": 3087, "title": "webpack complains about dynamic imports", "user": {"login": "dlech", "id": 963645, "node_id": "MDQ6VXNlcjk2MzY0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlech", "html_url": "https://github.com/dlech", "followers_url": "https://api.github.com/users/dlech/followers", "following_url": "https://api.github.com/users/dlech/following{/other_user}", "gists_url": "https://api.github.com/users/dlech/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlech/subscriptions", "organizations_url": "https://api.github.com/users/dlech/orgs", "repos_url": "https://api.github.com/users/dlech/repos", "events_url": "https://api.github.com/users/dlech/events{/privacy}", "received_events_url": "https://api.github.com/users/dlech/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-08T18:04:59Z", "updated_at": "2022-09-12T22:00:56Z", "closed_at": "2022-09-12T22:00:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen using Pyodide with webpack I am seeing the following warnings:\r\n\r\n```\r\nWARNING in ./node_modules/pyodide/pyodide.mjs 231:56-67\r\nCritical dependency: the request of a dependency is an expression\r\n\r\nWARNING in ./node_modules/pyodide/pyodide.mjs 236:10-21\r\nCritical dependency: the request of a dependency is an expression\r\n\r\nWARNING in ./node_modules/pyodide/pyodide.mjs 243:98-140\r\nCritical dependency: the request of a dependency is an expression\r\n```\r\n\r\n### To Reproduce\r\n\r\nI haven't figured out a minimal way to reproduce this yet. \r\n\r\n### Expected behavior\r\n\r\nThe `pyodide` package should not trigger any webpack warnings.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.2\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: N/A\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\nThe relevant source code is:\r\n\r\nhttps://github.com/pyodide/pyodide/blob/e2ce091b4c9953f06deca7a6c4f1b52ea716d53b/src/js/compat.ts#L177\r\nhttps://github.com/pyodide/pyodide/blob/e2ce091b4c9953f06deca7a6c4f1b52ea716d53b/src/js/compat.ts#L188\r\nhttps://github.com/pyodide/pyodide/blob/e2ce091b4c9953f06deca7a6c4f1b52ea716d53b/src/js/compat.ts#L216\r\n\r\nThe first of these did have `/* webpackIgnore: true */` but that was removed in #2468. I'm not sure if the comment would persist to the minified code that is distributed or not.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3086", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3086/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3086/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3086/events", "html_url": "https://github.com/pyodide/pyodide/issues/3086", "id": 1366711946, "node_id": "I_kwDOB0-w-85Rdl6K", "number": 3086, "title": "Missing source map in JavaScript package.", "user": {"login": "dlech", "id": 963645, "node_id": "MDQ6VXNlcjk2MzY0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlech", "html_url": "https://github.com/dlech", "followers_url": "https://api.github.com/users/dlech/followers", "following_url": "https://api.github.com/users/dlech/following{/other_user}", "gists_url": "https://api.github.com/users/dlech/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlech/subscriptions", "organizations_url": "https://api.github.com/users/dlech/orgs", "repos_url": "https://api.github.com/users/dlech/repos", "events_url": "https://api.github.com/users/dlech/events{/privacy}", "received_events_url": "https://api.github.com/users/dlech/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-08T17:13:46Z", "updated_at": "2022-09-12T00:10:55Z", "closed_at": "2022-09-12T00:10:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen using Pyodide with Webpack + source-map-loader, I am seeing the following warning:\r\n\r\n```\r\nWARNING in ./node_modules/pyodide/pyodide.mjs\r\nModule Warning (from ./node_modules/source-map-loader/dist/cjs.js):\r\nFailed to parse source map from '/home/david/work/pybricks/pybricks-code/node_modules/pyodide/pyodide.mjs.map' file: Error: ENOENT: no such file or directory, open '/home/david/work/pybricks/pybricks-code/node_modules/pyodide/pyodide.mjs.map'\r\n```\r\n\r\n### To Reproduce\r\n\r\nCheck out this branch: https://github.com/dlech/pyodide-webpack/tree/source-map-loader\r\n\r\nand follow the instructions in the readme.\r\n\r\n### Expected behavior\r\n\r\nEither the package should include the .map file or the code should not reference the .map file.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.2\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: N/A\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\nThe `pyodide` JavaScript only contains the following files (*.map is missing):\r\n\r\n```\r\nnode_modules/pyodide/\r\n\u251c\u2500\u2500 console.html\r\n\u251c\u2500\u2500 distutils.tar\r\n\u251c\u2500\u2500 package.json\r\n\u251c\u2500\u2500 pyodide.asm.data\r\n\u251c\u2500\u2500 pyodide.asm.js\r\n\u251c\u2500\u2500 pyodide.asm.wasm\r\n\u251c\u2500\u2500 pyodide.d.ts\r\n\u251c\u2500\u2500 pyodide.js\r\n\u251c\u2500\u2500 pyodide.mjs\r\n\u251c\u2500\u2500 pyodide_py.tar\r\n\u251c\u2500\u2500 pyodide_tblib-1.7.1-py3-none-any.whl\r\n\u251c\u2500\u2500 README.md\r\n\u2514\u2500\u2500 repodata.json\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3086/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3076", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3076/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3076/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3076/events", "html_url": "https://github.com/pyodide/pyodide/issues/3076", "id": 1364009251, "node_id": "I_kwDOB0-w-85RTSEj", "number": 3076, "title": "Calling `loadPyodide()` with `indexURL` results in error", "user": {"login": "wch", "id": 86978, "node_id": "MDQ6VXNlcjg2OTc4", "avatar_url": "https://avatars.githubusercontent.com/u/86978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wch", "html_url": "https://github.com/wch", "followers_url": "https://api.github.com/users/wch/followers", "following_url": "https://api.github.com/users/wch/following{/other_user}", "gists_url": "https://api.github.com/users/wch/gists{/gist_id}", "starred_url": "https://api.github.com/users/wch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wch/subscriptions", "organizations_url": "https://api.github.com/users/wch/orgs", "repos_url": "https://api.github.com/users/wch/repos", "events_url": "https://api.github.com/users/wch/events{/privacy}", "received_events_url": "https://api.github.com/users/wch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-07T02:36:49Z", "updated_at": "2022-09-07T15:53:43Z", "closed_at": "2022-09-07T15:53:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen `loadPyodide()` is called with a value for `indexURL` that is not a complete URL (with a protocol), it results in an error.\r\n\r\nI believe this was caused by #3013.\r\n\r\n## To Reproduce\r\n\r\n```js\r\nawait loadPyodide({ indexURL: \"./\" });\r\n```\r\n\r\nThis produces this error:\r\n\r\n```\r\npyodide.js:1 Uncaught (in promise) TypeError: Failed to construct 'URL': Invalid URL\r\n    at resolvePath (pyodide.js:1:7795)\r\n    at loadPyodide (pyodide.js:1:12107)\r\n    at async main (console.html:76:30)\r\n```\r\n\r\nIn my particular use case, I'm not using  `\"./\"`, but a relative path, like `\"./foo\"`.\r\n\r\nIt _does_ work if you use:\r\n\r\n```\r\nawait loadPyodide({ indexURL: \"https://cdn.jsdelivr.net/pyodide/dev/full/\" });\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe docs for `indexURL` say:\r\n\r\n> options.indexURL (string()) \u2013 The URL from which Pyodide will load the main Pyodide runtime and packages. Defaults to the url that pyodide is loaded from with the file name (pyodide.js or pyodide.mjs) removed. It is recommended that you leave this undefined, providing an incorrect value can cause broken behavior.\r\n\r\nBased on this documentation, it's not entirely clear to me whether paths like `\"./foo\"` or `\"/foo\"` _should_ work, but I do know that they used to work.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.2\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: 104.0.5112.101 \r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3076/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3060", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3060/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3060/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3060/events", "html_url": "https://github.com/pyodide/pyodide/issues/3060", "id": 1359876872, "node_id": "I_kwDOB0-w-85RDhMI", "number": 3060, "title": "Recreating D3 example failed", "user": {"login": "Cheukting", "id": 28761465, "node_id": "MDQ6VXNlcjI4NzYxNDY1", "avatar_url": "https://avatars.githubusercontent.com/u/28761465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cheukting", "html_url": "https://github.com/Cheukting", "followers_url": "https://api.github.com/users/Cheukting/followers", "following_url": "https://api.github.com/users/Cheukting/following{/other_user}", "gists_url": "https://api.github.com/users/Cheukting/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cheukting/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cheukting/subscriptions", "organizations_url": "https://api.github.com/users/Cheukting/orgs", "repos_url": "https://api.github.com/users/Cheukting/repos", "events_url": "https://api.github.com/users/Cheukting/events{/privacy}", "received_events_url": "https://api.github.com/users/Cheukting/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-02T08:31:09Z", "updated_at": "2022-09-15T07:27:42Z", "closed_at": "2022-09-15T07:27:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI tried to recreate an example for [this D3 network graph](https://d3-graph-gallery.com/graph/network_basic.html) in PyScript ([minimal example here](https://github.com/Cheukting/Cheukting.github.io/blob/master/assets/html/min-network-d3.html)) then came across this error:\r\n```\r\nUncaught TypeError: jsargs is not iterable (cannot read property undefined)\r\n    at Proxy.apply (pyproxy.gen.ts:1145:19)\r\n    at Dispatch.call (d3-dispatch.js:58:18)\r\n    at step (d3-force.js:228:13)\r\n    at timerFlush (d3-timer.js:49:15)\r\n    at wake (d3-timer.js:58:5)\r\n```\r\n\r\n### To Reproduce\r\n\r\nSee https://github.com/Cheukting/Cheukting.github.io/blob/master/assets/html/min-network-d3.html\r\n\r\n### Expected behavior\r\n\r\nSee https://d3-graph-gallery.com/graph/network_basic.html\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3011", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3011/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3011/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3011/events", "html_url": "https://github.com/pyodide/pyodide/issues/3011", "id": 1349144559, "node_id": "I_kwDOB0-w-85Qak_v", "number": 3011, "title": "Relative URLs in pyodide.loadPackage", "user": {"login": "flange-ipb", "id": 34936695, "node_id": "MDQ6VXNlcjM0OTM2Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/34936695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flange-ipb", "html_url": "https://github.com/flange-ipb", "followers_url": "https://api.github.com/users/flange-ipb/followers", "following_url": "https://api.github.com/users/flange-ipb/following{/other_user}", "gists_url": "https://api.github.com/users/flange-ipb/gists{/gist_id}", "starred_url": "https://api.github.com/users/flange-ipb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flange-ipb/subscriptions", "organizations_url": "https://api.github.com/users/flange-ipb/orgs", "repos_url": "https://api.github.com/users/flange-ipb/repos", "events_url": "https://api.github.com/users/flange-ipb/events{/privacy}", "received_events_url": "https://api.github.com/users/flange-ipb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-24T09:31:52Z", "updated_at": "2022-08-29T07:40:52Z", "closed_at": "2022-08-26T15:53:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nThe documentation states that [pyodide.loadPackage](https://pyodide.org/en/stable/usage/api/js-api.html#pyodide.loadPackage) supports relative URLs. I'm trying to load an out-of-tree wheel from my local webserver, but this doesn't seem to work out well.\r\n\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n```js\r\nawait pyodide.loadPackage(\"dist/igraph-0.9.11-cp310-cp310-emscripten_3_1_14_wasm32.whl\");\r\n```\r\nor\r\n```js\r\nawait pyodide.loadPackage(\"./dist/igraph-0.9.11-cp310-cp310-emscripten_3_1_14_wasm32.whl\");\r\n```\r\nPyodide tries to load the wheel from `https://cdn.jsdelivr.net/pyodide/v0.21.1/full/dist/igraph-0.9.11-cp310-cp310-emscripten_3_1_14_wasm32.whl`.\r\n\r\n### Expected behavior\r\n\r\n<!-- FILL IN -->\r\nLoad the wheel from the relative URL.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.1\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Firefox ESR 91.12.0, Chromium 104.0.5112.101\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3001", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/3001/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/3001/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/3001/events", "html_url": "https://github.com/pyodide/pyodide/issues/3001", "id": 1346456105, "node_id": "I_kwDOB0-w-85QQUop", "number": 3001, "title": "Bug: sqlite3 does not depend on nltk and regex", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/13", "html_url": "https://github.com/pyodide/pyodide/milestone/13", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/13/labels", "id": 8333840, "node_id": "MI_kwDOB0-w-84AfyoQ", "number": 13, "title": "0.21.2", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2022-08-22T21:54:03Z", "updated_at": "2023-03-27T21:19:55Z", "due_on": null, "closed_at": "2022-10-17T17:14:09Z"}, "comments": 7, "created_at": "2022-08-22T13:48:20Z", "updated_at": "2023-03-27T21:19:55Z", "closed_at": "2023-03-27T21:19:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In 0.21.1 deployment,  when running `import sqlite3` in the REPL it would load  nltk and regex which is wrong.  \r\n\r\nIt looks like for sqlite3 `depends` and `imports` fields are switched, between the [repodata.json](https://cdn.jsdelivr.net/pyodide/v0.21.1/full/repodata.json) and the [meta.yaml](https://github.com/pyodide/pyodide/blob/main/packages/nltk/meta.yaml)\r\n![image](https://user-images.githubusercontent.com/630936/185934857-c1c910ce-15a4-4426-982d-cb5de8582f87.png)\r\n\r\nbut then other packages seem to be fine.\r\n\r\nThis is serious enough to probably warrant a 0.21.2 release, as it adds an extra MB for apps that load sqlite3.\r\n\r\nVersion which reproduces: 0.20.0, 0.21.1 (and probably those in between)\r\nVersion which don't reproduce: dev\r\n\r\ncc @ryanking13 ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/3001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/3001/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2991", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2991/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2991/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2991/events", "html_url": "https://github.com/pyodide/pyodide/issues/2991", "id": 1344309069, "node_id": "I_kwDOB0-w-85QIIdN", "number": 2991, "title": "`pywasmcross` does not proxy `strip`", "user": {"login": "agoose77", "id": 1248413, "node_id": "MDQ6VXNlcjEyNDg0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1248413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agoose77", "html_url": "https://github.com/agoose77", "followers_url": "https://api.github.com/users/agoose77/followers", "following_url": "https://api.github.com/users/agoose77/following{/other_user}", "gists_url": "https://api.github.com/users/agoose77/gists{/gist_id}", "starred_url": "https://api.github.com/users/agoose77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agoose77/subscriptions", "organizations_url": "https://api.github.com/users/agoose77/orgs", "repos_url": "https://api.github.com/users/agoose77/repos", "events_url": "https://api.github.com/users/agoose77/events{/privacy}", "received_events_url": "https://api.github.com/users/agoose77/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-19T11:21:34Z", "updated_at": "2022-09-13T04:19:45Z", "closed_at": "2022-09-13T04:19:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nCalls to the `strip` executable invoke the GNU implementation rather than `emstrip`\r\n\r\n## Proposed Fix\r\n\r\nShim `strip` in addition to `c++` etc.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: NA\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2991/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2981", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2981/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2981/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2981/events", "html_url": "https://github.com/pyodide/pyodide/issues/2981", "id": 1342103689, "node_id": "I_kwDOB0-w-85P_uCJ", "number": 2981, "title": "Safari 14 not working", "user": {"login": "alexmojaki", "id": 3627481, "node_id": "MDQ6VXNlcjM2Mjc0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/3627481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexmojaki", "html_url": "https://github.com/alexmojaki", "followers_url": "https://api.github.com/users/alexmojaki/followers", "following_url": "https://api.github.com/users/alexmojaki/following{/other_user}", "gists_url": "https://api.github.com/users/alexmojaki/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexmojaki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexmojaki/subscriptions", "organizations_url": "https://api.github.com/users/alexmojaki/orgs", "repos_url": "https://api.github.com/users/alexmojaki/repos", "events_url": "https://api.github.com/users/alexmojaki/events{/privacy}", "received_events_url": "https://api.github.com/users/alexmojaki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-17T18:01:59Z", "updated_at": "2022-08-20T05:55:23Z", "closed_at": "2022-08-20T05:55:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen I open https://pyodide.org/en/stable/console.html in Safari 14.1 in Browserstack, it fails to load, and the console says `ReferenceError: Can't find variable: BigInt64Array`.\r\n\r\nBased on https://pyodide.org/en/stable/usage/index.html, it seems Safari 14 is supposed to be supported.\r\n\r\nI'm guessing this is related to https://github.com/pyodide/pyodide/pull/2643. It's not entirely clear, but it looks like continuing to support Safari 14 was the intention and the expected outcome.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2981/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2971", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2971/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2971/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2971/events", "html_url": "https://github.com/pyodide/pyodide/issues/2971", "id": 1338750323, "node_id": "I_kwDOB0-w-85Py7Vz", "number": 2971, "title": "`ModuleNotFoundError: No module named 'distutils.msvccompiler'` in package build CI", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-08-15T09:26:23Z", "updated_at": "2022-08-24T06:32:27Z", "closed_at": "2022-08-24T06:32:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nSeveral different packages have failed with `ModuleNotFoundError: No module named 'distutils.msvccompiler'`. See for instance:\r\nhttps://app.circleci.com/pipelines/github/hoodmane/pyodide/3667/workflows/dd548c6b-f1c8-40d3-88f5-e71573bf4934/jobs/43716\r\n\r\n@ryanking13 any ideas? Maybe we need to pin something?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2971/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2964", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2964/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2964/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2964/events", "html_url": "https://github.com/pyodide/pyodide/issues/2964", "id": 1337832039, "node_id": "I_kwDOB0-w-85PvbJn", "number": 2964, "title": "TypeError: getWasmTableEntry(...) is not a function", "user": {"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2022-08-13T02:37:38Z", "updated_at": "2022-08-15T08:57:12Z", "closed_at": "2022-08-15T08:48:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n```\r\npyodide.asm.js:10 Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers.\r\npyodide.asm.js:10 The cause of the fatal error was:\r\npyodide.asm.js:10 TypeError: getWasmTableEntry(...) is not a function\r\n    at invoke_ii (pyodide.asm.js:10:1544237)\r\n    at 00bcba5a:0x54516\r\n    at invoke_viiiiiiiiiiiiiii (pyodide.asm.js:10:1548668)\r\n    at 00bcba5a:0x414a2\r\n    at invoke_viii (pyodide.asm.js:10:1545014)\r\n    at 00bcba5a:0x56286\r\n    at method_call_trampoline (pyodide.asm.js:10:216572)\r\n    at pyodide.asm.wasm:0x162162\r\n    at method_call_trampoline (pyodide.asm.js:10:216572)\r\n    at pyodide.asm.wasm:0x126317\r\nAPI.fatal_error @ pyodide.asm.js:10\r\nModule.callPyObjectKwargs @ pyodide.asm.js:10\r\nModule.callPyObject @ pyodide.asm.js:10\r\napply @ pyodide.asm.js:10\r\napply @ pyodide.asm.js:10\r\nrunPython @ pyodide.asm.js:10\r\nmain @ (index):15\r\nawait in main (async)\r\n(anonymous) @ (index):22\r\npyodide.asm.js:10 Stack (most recent call first):\r\npyodide.asm.js:10   File \"<exec>\", line 5 in <module>\r\npyodide.asm.js:10   File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 304 in run\r\npyodide.asm.js:10   File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 435 in eval_code\r\n(index):21 Uncaught (in promise) TypeError: getWasmTableEntry(...) is not a function\r\n    at invoke_ii (pyodide.asm.js:10:1544237)\r\n    at 00bcba5a:0x54516\r\n    at invoke_viiiiiiiiiiiiiii (pyodide.asm.js:10:1548668)\r\n    at 00bcba5a:0x414a2\r\n    at invoke_viii (pyodide.asm.js:10:1545014)\r\n    at 00bcba5a:0x56286\r\n    at method_call_trampoline (pyodide.asm.js:10:216572)\r\n    at pyodide.asm.wasm:0x162162\r\n    at method_call_trampoline (pyodide.asm.js:10:216572)\r\n    at pyodide.asm.wasm:0x126317\r\n```\r\n\r\n### To Reproduce\r\n\r\nhttps://github.com/kitao/pyxel/tree/maturin\r\n\r\n* First install the maturin beta version: `pip install -U --pre maturin`\r\n* Build with maturin: `RUSTUP_TOOLCHAIN=nightly maturin build -o dist --release --target wasm32-unknown-emscripten`\r\n* Run `./scripts/start_server` and open `http://localhost:8000` in browser, see the error in console.\r\n\r\n### Expected behavior\r\n\r\nNo `TypeError: getWasmTableEntry(...) is not a function` in console.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: 104.0.5112.79\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2964/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2960", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2960/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2960/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2960/events", "html_url": "https://github.com/pyodide/pyodide/issues/2960", "id": 1336575958, "node_id": "I_kwDOB0-w-85PqofW", "number": 2960, "title": "Importing reboundx fails occasionally", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-08-11T22:59:32Z", "updated_at": "2022-09-02T01:19:43Z", "closed_at": "2022-09-02T01:19:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nImporting reboundx fails occasionally in the stable/latest branch.\r\n\r\nThe reason for the failure is that we download and install packages simultaneously.\r\n(To be more precise, we install shared libraries first then install normal wheel packages.)\r\n\r\nhttps://github.com/pyodide/pyodide/blob/b497ce26ed94774a8d695a3e61016a7a26e45e3b/src/js/load-package.ts#L436-L448\r\n\r\nThe problem is that `reboundx` is dependent on another non-shared library: `rebound`. When loading `reboundx`, it loads `libreboundx.so` which load `librebound.so` which is in `rebound` package. So if `reboundx` is downloaded and installed \"before\" `rebound`, it fails to load because there is no `librebound.so` in the virtual file system.\r\n\r\nI think the `reboundx` needs to bundle `librebound.so` inside its wheel. However, we can try to fix this issue on Pyodide side.\r\n\r\nThe possible solution can be:\r\n\r\n1. When `pyodide.loadPackage()` is called, load dependencies first, then load the requested package.\r\n2. Separate out downloading and dynlib loading process, so downloading all packages happens first, then loading dynlibs happens next.\r\n\r\nPersonally, I think option 2 is better since if we use option 1, it might be tough to handle cases like `pyodide.loadPyodide([\"reboundx\", \"rebound\"])`. The downside of option 2 is that there is a potential slowdown in loading packages.\r\n\r\n### To Reproduce\r\n\r\n```\r\nawait loadPackage(\"reboundx\")\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/24893111/184254798-379a2dce-1c3b-4068-98b4-3c984ee66794.png)\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.21.0\r\n\r\ncc: @hannorein ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2923", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2923/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2923/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2923/events", "html_url": "https://github.com/pyodide/pyodide/issues/2923", "id": 1322997707, "node_id": "I_kwDOB0-w-85O21fL", "number": 2923, "title": "'Future' object has no attribute 'then'", "user": {"login": "karray", "id": 1911342, "node_id": "MDQ6VXNlcjE5MTEzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1911342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karray", "html_url": "https://github.com/karray", "followers_url": "https://api.github.com/users/karray/followers", "following_url": "https://api.github.com/users/karray/following{/other_user}", "gists_url": "https://api.github.com/users/karray/gists{/gist_id}", "starred_url": "https://api.github.com/users/karray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karray/subscriptions", "organizations_url": "https://api.github.com/users/karray/orgs", "repos_url": "https://api.github.com/users/karray/repos", "events_url": "https://api.github.com/users/karray/events{/privacy}", "received_events_url": "https://api.github.com/users/karray/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-30T11:24:57Z", "updated_at": "2022-08-24T22:12:04Z", "closed_at": "2022-08-24T22:12:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nIf I understand correctly, starting with version 0.17, Pyodide integrates the implementation of `await` for JsProxy. So when JS returns a `Promise`, it converts it to `Future` in Python, which allows us to use `await`.\r\n\r\nHoverer, the `Future` object has no attribute `then`, so it is no longer possible to build `then`/`catch` chains like in older versions.\r\n\r\n### To Reproduce\r\n\r\n```python\r\nimport js\r\njs.fetch('http://karay.me/truepyxel/test.json').then(lambda resp: resp.json()).then(lambda data: data.msg).catch(lambda err: 'there were error: '+err.message)\r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.20\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: 103.0.5060.134", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2918", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2918/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2918/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2918/events", "html_url": "https://github.com/pyodide/pyodide/issues/2918", "id": 1320432638, "node_id": "I_kwDOB0-w-85OtDP-", "number": 2918, "title": "Scipy build failing with Cython error", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-07-28T05:59:15Z", "updated_at": "2022-07-29T03:55:51Z", "closed_at": "2022-07-29T03:55:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nScipy build is failing in [main](https://app.circleci.com/pipelines/github/ryanking13/pyodide/705/workflows/f75c57c6-95c0-4437-85ca-47889051954d/jobs/11444?invite=true#step-105-1365). I guess it is related to the new Cython release.\r\n\r\n```\r\n_stats.pyx:173:0: Referring to a memoryview typed argument directly in a nested closure function is not supported in Cython 0.x. Either upgrade to Cython 3, or assign the argument to a local variable and use that in the nested function.\r\nTraceback (most recent call last):\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 317, in <module>\r\n    main()\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 313, in main\r\n    find_process_files(root_dir)\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 302, in find_process_files\r\n    for result in pool.imap_unordered(lambda args: process(*args), jobs):\r\n  File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 870, in next\r\n    raise value\r\n  File \"/usr/local/lib/python3.10/multiprocessing/pool.py\", line 125, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 302, in <lambda>\r\n    for result in pool.imap_unordered(lambda args: process(*args), jobs):\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 236, in process\r\n    processor_function(fromfile, tofile, cwd=path)\r\n  File \"/root/repo/packages/scipy/build/scipy-1.8.1/tools/cythonize.py\", line 102, in process_pyx\r\n    raise Exception('Cython failed')\r\nException: Cython failed\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2916", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2916/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2916/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2916/events", "html_url": "https://github.com/pyodide/pyodide/issues/2916", "id": 1319308837, "node_id": "I_kwDOB0-w-85Oow4l", "number": 2916, "title": "Package download is failing, problem with CDN", "user": {"login": "samuelcolvin", "id": 4039449, "node_id": "MDQ6VXNlcjQwMzk0NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4039449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelcolvin", "html_url": "https://github.com/samuelcolvin", "followers_url": "https://api.github.com/users/samuelcolvin/followers", "following_url": "https://api.github.com/users/samuelcolvin/following{/other_user}", "gists_url": "https://api.github.com/users/samuelcolvin/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelcolvin/subscriptions", "organizations_url": "https://api.github.com/users/samuelcolvin/orgs", "repos_url": "https://api.github.com/users/samuelcolvin/repos", "events_url": "https://api.github.com/users/samuelcolvin/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelcolvin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-07-27T09:53:24Z", "updated_at": "2022-07-27T16:30:38Z", "closed_at": "2022-07-27T16:30:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "See [this](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true) CI build.\r\n\r\nIt looks like downloading core packages like `pytest-7.1.2-py3-none-any.whl` is failing.\r\n\r\nexcerpt of output:\r\n\r\n```\r\nDidn't find package pytest-7.1.2-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\n```\r\n\r\n### Full CI Output:\r\n\r\n<details>\r\n\r\n```\r\n> pydantic-core@1.0.0 test\r\n> node tests/emscripten_runner.js\r\n\r\nLoading distutils\r\nLoaded distutils\r\nPython initialization complete\r\ndistutils already loaded from default channel\r\nLoading micropip, pyparsing, packaging, pytest, atomicwrites, attrs, six, more-itertools, pluggy, py, setuptools, iniconfig, pytz\r\nDidn't find package micropip-0.1-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\n(node:2126) ExperimentalWarning: The Fetch API is an experimental feature. This feature could change at any time\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\nDidn't find package pyparsing-3.0.9-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package packaging-21.3-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package pytest-7.1.2-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package atomicwrites-1.4.0-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package attrs-21.4.0-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package six-1.16.0-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package more_itertools-8.13.0-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package pluggy-1.0.0-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package py-1.11.0-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package setuptools-62.6.0-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package iniconfig-1.1.1-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package pytz-2022.1-py2.py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nPackage attrs-21.4.0-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage pluggy-1.0.0-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage atomicwrites-1.4.0-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage more_itertools-8.13.0-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage micropip-0.1-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage iniconfig-1.1.1-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage pyparsing-3.0.9-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage packaging-21.3-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage py-1.11.0-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage six-1.16.0-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage setuptools-62.6.0-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage pytest-7.1.2-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage pytz-2022.1-py2.py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nLoaded attrs, pluggy, atomicwrites, more-itertools, micropip, iniconfig, pyparsing, packaging, py, six, pytest, setuptools, pytz\r\nLoading typing-extensions, pygments\r\nDidn't find package typing_extensions-4.2.0-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nDidn't find package Pygments-2.12.0-py3-none-any.whl, attempting to load from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/\r\nPackage typing_extensions-4.2.0-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPackage Pygments-2.12.0-py3-none-any.whl loaded from https://cdn.jsdelivr.net/pyodide/v0.21.0a3/full/, caching the wheel in node_modules for future use.\r\nPythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 234, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 505, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 358, in run_async\r\n    await coroutine\r\n  File \"<exec>\", line 9, in <module>\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 576, in install\r\n    await gather(*wheel_promises)\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\npyodide.JsException: Error: bad export type for `_emscripten_get_now`: undefined\r\n\r\n    at new_error (/home/runner/work/pydantic-core/pydantic-core/node_modules/pyodide/pyodide.asm.js:10:215112)\r\n    at wasm://wasm/02[19](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:20)efae:wasm-function[271]:0xdec35\r\n    at wasm://wasm/0[21](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:22)9efae:wasm-function[370]:0xe2e36\r\n    at method_call_trampoline (/home/runner/work/pydantic-core/pydantic-core/node_modules/pyodide/pyodide.asm.js:10:215026)\r\n    at wasm://wasm/0219efae:wasm-function[934]:0x1[25](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:26)99b\r\n    at wasm://wasm/0219efae:wasm-function[3184]:0x1f65b2\r\n    at wasm://wasm/0219efae:wasm-function[1847]:0x1610b6\r\n    at wasm://wasm/0219efae:wasm-function[939]:0x125eab\r\n    at wasm://wasm/0219efae:wasm-function[940]:0x125fa5\r\n    at wasm://wasm/0219efae:wasm-function[941]:0x1[26](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:27)048\r\n    at wasm://wasm/0219efae:wasm-function[3010]:0x1dfd1b\r\n    at wasm://wasm/0219efae:wasm-function[3007]:0x1d9d[29](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:30)\r\n    at wasm://wasm/0219efae:wasm-function[942]:0x12608b\r\n    at wasm://wasm/0219efae:wasm-function[[30](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:31)19]:0x1e1b10\r\n    at wasm://wasm/0219efae:wasm-function[3010]:0x1df75d\r\n    at wasm://wasm/0219efae:wasm-function[3007]:0x1d9d29\r\n    at wasm://wasm/0219efae:wasm-function[942]:0x12608b\r\n    at wasm://wasm/0219efae:wasm-function[365]:0xe2b02\r\n    at Module.callPyObjectKwargs (/home/runner/work/pydantic-core/pydantic-core/node_modules/pyodide/pyodide.asm.js:10:117602)\r\n    at Module.callPyObject (/home/runner/work/pydantic-core/pydantic-core/node_modules/pyodide/pyodide.asm.js:10:117983)\r\n    at Timeout.wrapper [as _onTimeout] (/home/runner/work/pydantic-core/pydantic-core/node_modules/pyodide/pyodide.asm.js:10:180736)\r\n    at listOnTimeout (node:internal/timers:564:17)\r\n    at process.processTimers (node:internal/timers:507:7) {\r\n  __error_address: 173390[32](https://github.com/samuelcolvin/pydantic-core/runs/7537317180?check_suite_focus=true#step:13:33)\r\n}\r\n```\r\n</details>", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2916/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2911", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2911/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2911/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2911/events", "html_url": "https://github.com/pyodide/pyodide/issues/2911", "id": 1317702616, "node_id": "I_kwDOB0-w-85OiovY", "number": 2911, "title": "https://pyodide.org/en/latest/console.html doesn't show latest `main` version", "user": {"login": "jobovy", "id": 1044876, "node_id": "MDQ6VXNlcjEwNDQ4NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1044876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jobovy", "html_url": "https://github.com/jobovy", "followers_url": "https://api.github.com/users/jobovy/followers", "following_url": "https://api.github.com/users/jobovy/following{/other_user}", "gists_url": "https://api.github.com/users/jobovy/gists{/gist_id}", "starred_url": "https://api.github.com/users/jobovy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jobovy/subscriptions", "organizations_url": "https://api.github.com/users/jobovy/orgs", "repos_url": "https://api.github.com/users/jobovy/repos", "events_url": "https://api.github.com/users/jobovy/events{/privacy}", "received_events_url": "https://api.github.com/users/jobovy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-26T05:05:34Z", "updated_at": "2022-07-26T13:24:15Z", "closed_at": "2022-07-26T08:30:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThe https://pyodide.org/en/latest/console.html console is stuck at `v0.21.0a3`. I believe this is because the version wasn't bumped to the next 'dev' version after the `v0.21.0a3` release, so somebody probably needs to run\r\n```\r\n./tools/bump_version.py --new-version 0.21.0.dev0\r\n\r\n```\r\nWithout `dev` in the version, the documentation's console uses the release:\r\nhttps://github.com/pyodide/pyodide/blob/7231cab3ffc83f6221fafb7458f9b223d2a7c759/docs/conf.py#L20-L23\r\n\r\n### To Reproduce\r\n\r\nGo to https://pyodide.org/en/latest/console.html and load a package added since v0.21.0a3, e.g., `import rebound`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2891", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2891/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2891/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2891/events", "html_url": "https://github.com/pyodide/pyodide/issues/2891", "id": 1309795271, "node_id": "I_kwDOB0-w-85OEePH", "number": 2891, "title": "Problems evaluating code in console with nested brackets", "user": {"login": "wch", "id": 86978, "node_id": "MDQ6VXNlcjg2OTc4", "avatar_url": "https://avatars.githubusercontent.com/u/86978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wch", "html_url": "https://github.com/wch", "followers_url": "https://api.github.com/users/wch/followers", "following_url": "https://api.github.com/users/wch/following{/other_user}", "gists_url": "https://api.github.com/users/wch/gists{/gist_id}", "starred_url": "https://api.github.com/users/wch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wch/subscriptions", "organizations_url": "https://api.github.com/users/wch/orgs", "repos_url": "https://api.github.com/users/wch/repos", "events_url": "https://api.github.com/users/wch/events{/privacy}", "received_events_url": "https://api.github.com/users/wch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-07-19T16:47:22Z", "updated_at": "2022-08-01T07:23:06Z", "closed_at": "2022-08-01T07:22:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nUsing the pyodide web console at https://pyodide.org/en/stable/console.html, evaluating this code results in odd behavior. It seems to think there's more input after `x`, until I interrupt it:\r\n\r\n```py\r\nx = [[[1]]]\r\nx\r\n```\r\n<img width=\"316\" alt=\"image\" src=\"https://user-images.githubusercontent.com/86978/179804707-8f44993b-4ce5-4801-a134-c444e38165c1.png\">\r\n\r\nAfter I give it an interrupt and then type `x` again, it just prints out a single square bracket.\r\n\r\nIt correctly reports the object is a list and I can index into it, so I think Pyodide has the correct value internally. The result is not always printed correctly, though.\r\n\r\n<img width=\"787\" alt=\"image\" src=\"https://user-images.githubusercontent.com/86978/179805095-36043a81-e033-4473-a50a-6a5d95e5ed70.png\">\r\n\r\n\r\nThis is with the current version of Pyodide deployed to the web console.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2882", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2882/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2882/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2882/events", "html_url": "https://github.com/pyodide/pyodide/issues/2882", "id": 1307282958, "node_id": "I_kwDOB0-w-85N644O", "number": 2882, "title": "Windows Node errors while trying to load Pyodide", "user": {"login": "robert-w-gries", "id": 7546625, "node_id": "MDQ6VXNlcjc1NDY2MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/7546625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robert-w-gries", "html_url": "https://github.com/robert-w-gries", "followers_url": "https://api.github.com/users/robert-w-gries/followers", "following_url": "https://api.github.com/users/robert-w-gries/following{/other_user}", "gists_url": "https://api.github.com/users/robert-w-gries/gists{/gist_id}", "starred_url": "https://api.github.com/users/robert-w-gries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robert-w-gries/subscriptions", "organizations_url": "https://api.github.com/users/robert-w-gries/orgs", "repos_url": "https://api.github.com/users/robert-w-gries/repos", "events_url": "https://api.github.com/users/robert-w-gries/events{/privacy}", "received_events_url": "https://api.github.com/users/robert-w-gries/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-18T01:24:41Z", "updated_at": "2022-07-20T01:20:59Z", "closed_at": "2022-07-20T01:20:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen I try to load pyodide in a Windows Node environment, I get the following error:\r\n\r\n```bash\r\nError [ERR_UNSUPPORTED_ESM_URL_SCHEME]: Only URLs with a scheme in: file, data are supported by the default ESM loader. On Windows, absolute paths must be valid file:// URLs. Received protocol 'd:'\r\n    at new NodeError (node:internal/errors:387:5)\r\n    at throwIfUnsupportedURLScheme (node:internal/modules/esm/resolve:1075:11)\r\n    at defaultResolve (node:internal/modules/esm/resolve:1155:3)\r\n    at nextResolve (node:internal/modules/esm/loader:173:28)\r\n    at ESMLoader.resolve (node:internal/modules/esm/loader:852:30)\r\n    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:439:18)\r\n    at ESMLoader.import (node:internal/modules/esm/loader:536:22)\r\n    at importModuleDynamically (node:internal/modules/cjs/loader:1059:29)\r\n    at importModuleDynamicallyWrapper (node:internal/vm/module:438:21)\r\n    at importModuleDynamically (node:vm:389:46) {\r\n  code: 'ERR_UNSUPPORTED_ESM_URL_SCHEME'\r\n}\r\n```\r\n\r\nI have a local patch to fix the above issue in `nodeLoadScript()` that I will submit a PR for tomorrow. However, I then run into the following issue:\r\n\r\n```bash\r\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'D:\\Projects\\pyodide\\dist\\pyodide.j\\pyodide.asm.js' imported from D:\\Projects\\pyodide\\dist\\pyodide.js\r\n    at new NodeError (node:internal/errors:387:5)\r\n    at finalizeResolution (node:internal/modules/esm/resolve:404:11)\r\n    at moduleResolve (node:internal/modules/esm/resolve:965:10)\r\n    at defaultResolve (node:internal/modules/esm/resolve:1173:11)\r\n    at nextResolve (node:internal/modules/esm/loader:173:28)\r\n    at ESMLoader.resolve (node:internal/modules/esm/loader:852:30)\r\n    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:439:18)\r\n    at ESMLoader.import (node:internal/modules/esm/loader:536:22)\r\n    at importModuleDynamically (node:internal/modules/cjs/loader:1059:29)\r\n    at importModuleDynamicallyWrapper (node:internal/vm/module:438:21) {\r\n  code: 'ERR_MODULE_NOT_FOUND'\r\n}\r\n```\r\n\r\nI suspect that `calculateIndexURL()` is not properly extracting the location of the `pyodide.asm.js` file. I can submit a patch for this tomorrow as well unless y'all already have a good idea of how to fix it.\r\n\r\n### To Reproduce\r\n\r\n```\r\nimport { loadPyodide } from \"pyodide/pyodide.js\";\r\n\r\n(async () => {\r\n  const pyodide = await loadPyodide();\r\n  await pyodide.runPythonAsync('print(\"Hello World!\")');\r\n})();\r\n```\r\n\r\n### Expected behavior\r\n\r\nWindows Node should be able to load pyodide properly.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.0-alpha.3\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Windows Node v18.6.0\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n- Commit hash of Pyodide git repository: 843c024de35d5b15352eea8e4ae0a1b4eb6aec93\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->: Windows -> pyodide/pyodide-env:20 docker\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2874", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2874/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2874/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2874/events", "html_url": "https://github.com/pyodide/pyodide/issues/2874", "id": 1305867080, "node_id": "I_kwDOB0-w-85N1fNI", "number": 2874, "title": "No such file or directory: .pytest_cache/v/cache/lastfailed", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-15T10:28:47Z", "updated_at": "2022-07-16T08:45:37Z", "closed_at": "2022-07-16T08:45:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have seen this error already a couple of times, if pytest fails during collection this paths doesn't exist, and we should just exit in https://github.com/pyodide/pyodide/blob/ed22c06e07d342723542961f7805951096684cda/tools/pytest_wrapper.py#L25", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2846", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2846/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2846/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2846/events", "html_url": "https://github.com/pyodide/pyodide/issues/2846", "id": 1295614873, "node_id": "I_kwDOB0-w-85NOYOZ", "number": 2846, "title": "pyodide.mjs missing from jsdelivr cdn?", "user": {"login": "joemarshall", "id": 1436795, "node_id": "MDQ6VXNlcjE0MzY3OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1436795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joemarshall", "html_url": "https://github.com/joemarshall", "followers_url": "https://api.github.com/users/joemarshall/followers", "following_url": "https://api.github.com/users/joemarshall/following{/other_user}", "gists_url": "https://api.github.com/users/joemarshall/gists{/gist_id}", "starred_url": "https://api.github.com/users/joemarshall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joemarshall/subscriptions", "organizations_url": "https://api.github.com/users/joemarshall/orgs", "repos_url": "https://api.github.com/users/joemarshall/repos", "events_url": "https://api.github.com/users/joemarshall/events{/privacy}", "received_events_url": "https://api.github.com/users/joemarshall/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-07-06T10:22:57Z", "updated_at": "2022-07-07T11:57:15Z", "closed_at": "2022-07-07T11:57:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I might be being stupid here, but I can't get the mjs to download from the main pyodide jsdelivr even for recent versions? \r\n\r\nIt works on the old cdn (e.g. https://pyodide-cdn2.iodide.io/v0.20.0/full/pyodide.mjs ) but I can't get it to work otherwise.\r\n\r\nI can obviously host it myself, but I'd rather not. Is there something I need to do to point this at to make it work with jsdelivr?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2846/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2841", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2841/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2841/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2841/events", "html_url": "https://github.com/pyodide/pyodide/issues/2841", "id": 1294633728, "node_id": "I_kwDOB0-w-85NKosA", "number": 2841, "title": "`OverflowError` using `datetime.fromtimestamp` with a large negative number", "user": {"login": "samuelcolvin", "id": 4039449, "node_id": "MDQ6VXNlcjQwMzk0NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4039449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelcolvin", "html_url": "https://github.com/samuelcolvin", "followers_url": "https://api.github.com/users/samuelcolvin/followers", "following_url": "https://api.github.com/users/samuelcolvin/following{/other_user}", "gists_url": "https://api.github.com/users/samuelcolvin/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelcolvin/subscriptions", "organizations_url": "https://api.github.com/users/samuelcolvin/orgs", "repos_url": "https://api.github.com/users/samuelcolvin/repos", "events_url": "https://api.github.com/users/samuelcolvin/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelcolvin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 30, "created_at": "2022-07-05T18:32:44Z", "updated_at": "2023-03-17T09:08:42Z", "closed_at": "2022-07-08T10:54:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n`OverflowError` using `datetime.fromtimestamp` with a large negative number\r\n\r\n### To Reproduce\r\n\r\nUsing https://pyodide.org/en/stable/console.html\r\n```\r\nWelcome to the Pyodide terminal emulator \ud83d\udc0d\r\nPython 3.10.2 (main, Apr  9 2022 20:52:01) on WebAssembly VM\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from datetime import datetime\r\n>>> datetime.fromtimestamp(-2147483649)\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\nOverflowError: timestamp out of range for platform time_t\r\n```\r\n\r\nI also get the error using node, see [this build](https://github.com/samuelcolvin/pydantic-core/runs/7201481063?check_suite_focus=true)\r\n\r\n### Expected behavior\r\n\r\nOutside wasm:\r\n\r\n```\r\nIn [1]: datetime.fromtimestamp(-2147483649)\r\nOut[1]: datetime.datetime(1901, 12, 13, 20, 9, 6)\r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.21.0-alpha.2, also on https://pyodide.org/en/stable/console.html (Is there a way to get pyiodide version inside the interpreter? I tried `sys.version` and `platform`, but couldn't fine it\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Version 103.0.5060.53 (Official Build) (arm64) and also node `v18` on x86\r\n- Any other relevant information: See [this CI run](https://github.com/samuelcolvin/pydantic-core/runs/7201481063?check_suite_focus=true)\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2841/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2808", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2808/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2808/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2808/events", "html_url": "https://github.com/pyodide/pyodide/issues/2808", "id": 1288888510, "node_id": "I_kwDOB0-w-85M0uC-", "number": 2808, "title": "Running make using pre-built docker fails", "user": {"login": "afbarbaro", "id": 18277423, "node_id": "MDQ6VXNlcjE4Mjc3NDIz", "avatar_url": "https://avatars.githubusercontent.com/u/18277423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afbarbaro", "html_url": "https://github.com/afbarbaro", "followers_url": "https://api.github.com/users/afbarbaro/followers", "following_url": "https://api.github.com/users/afbarbaro/following{/other_user}", "gists_url": "https://api.github.com/users/afbarbaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/afbarbaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afbarbaro/subscriptions", "organizations_url": "https://api.github.com/users/afbarbaro/orgs", "repos_url": "https://api.github.com/users/afbarbaro/repos", "events_url": "https://api.github.com/users/afbarbaro/events{/privacy}", "received_events_url": "https://api.github.com/users/afbarbaro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-06-29T15:19:57Z", "updated_at": "2022-07-21T11:06:53Z", "closed_at": "2022-07-21T11:06:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nRunning `make` fails with this error, using the provided Docker image (pre-built):\r\n\r\n```\r\n./tools/dependency-check.sh\r\ndate +\"[%F %T] Building emsdk...\"\r\n[2022-06-29 15:08:11] Building emsdk...\r\nmake -C emsdk\r\nmake[1]: Entering directory '/src/emsdk'\r\nif [ -d emsdk ]; then rm -rf emsdk; fi\r\ngit clone --depth 1 https://github.com/emscripten-core/emsdk.git\r\nCloning into 'emsdk'...\r\nerror: chmod on /src/emsdk/emsdk/.git/config.lock failed: Operation not permitted\r\nfatal: could not set 'remote.origin.url' to 'https://github.com/emscripten-core/emsdk.git'\r\nmake[1]: *** [Makefile:8: emsdk/.complete] Error 128\r\nmake[1]: Leaving directory '/src/emsdk'\r\nmake: *** [Makefile:232: emsdk/emsdk/.complete] Error 2\r\n```\r\n\r\n### To Reproduce\r\n\r\n```\r\n./run_docker --pre-built\r\nmake\r\n```\r\n\r\n### Expected behavior\r\nNo errors should occur\r\n\r\n### Environment\r\n\r\n- Pyodide Version latest (0.21.0a2) - main branch\r\n\r\n\r\n### Additional context\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2808/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2802", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2802/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2802/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2802/events", "html_url": "https://github.com/pyodide/pyodide/issues/2802", "id": 1287402084, "node_id": "I_kwDOB0-w-85MvDJk", "number": 2802, "title": "Truthiness of HTMLElement", "user": {"login": "Korijn", "id": 1882046, "node_id": "MDQ6VXNlcjE4ODIwNDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1882046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Korijn", "html_url": "https://github.com/Korijn", "followers_url": "https://api.github.com/users/Korijn/followers", "following_url": "https://api.github.com/users/Korijn/following{/other_user}", "gists_url": "https://api.github.com/users/Korijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Korijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Korijn/subscriptions", "organizations_url": "https://api.github.com/users/Korijn/orgs", "repos_url": "https://api.github.com/users/Korijn/repos", "events_url": "https://api.github.com/users/Korijn/events{/privacy}", "received_events_url": "https://api.github.com/users/Korijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-28T14:02:53Z", "updated_at": "2022-06-30T03:30:24Z", "closed_at": "2022-06-30T03:30:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nInconsistency in Python wrappers:\r\n\r\n```py\r\n>>> import js\r\n>>> el = js.document.createElement(\"select\")\r\n>>> bool(el)\r\nFalse\r\n```\r\n\r\n```js\r\nel = document.createElement(\"select\")\r\n!!el\r\ntrue\r\n```\r\n\r\n### Expected behavior\r\n\r\nTrue! :)\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.20.0\r\n- Browser version: Chrome 102.0.5005.115\r\n\r\n### Additional context\r\n\r\nI was trying this in pyscript.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2780", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2780/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2780/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2780/events", "html_url": "https://github.com/pyodide/pyodide/issues/2780", "id": 1283760271, "node_id": "I_kwDOB0-w-85MhKCP", "number": 2780, "title": "libtiff build is pretty flaky", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-24T13:33:01Z", "updated_at": "2022-06-24T20:06:10Z", "closed_at": "2022-06-24T20:06:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@ryanking13 \r\n\r\n`ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: certificate has expired (_ssl.c:997)`\r\ne.g.,\r\nhttps://app.circleci.com/pipelines/github/pyodide/pyodide/4404/workflows/1e685f72-cbed-407b-a6ee-e9f13226fcbc/jobs/50030", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2778", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2778/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2778/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2778/events", "html_url": "https://github.com/pyodide/pyodide/issues/2778", "id": 1283322131, "node_id": "I_kwDOB0-w-85MffET", "number": 2778, "title": "Numpy summation fails for 0.1M integers", "user": {"login": "ivanistheone", "id": 163966, "node_id": "MDQ6VXNlcjE2Mzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/163966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivanistheone", "html_url": "https://github.com/ivanistheone", "followers_url": "https://api.github.com/users/ivanistheone/followers", "following_url": "https://api.github.com/users/ivanistheone/following{/other_user}", "gists_url": "https://api.github.com/users/ivanistheone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivanistheone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivanistheone/subscriptions", "organizations_url": "https://api.github.com/users/ivanistheone/orgs", "repos_url": "https://api.github.com/users/ivanistheone/repos", "events_url": "https://api.github.com/users/ivanistheone/events{/privacy}", "received_events_url": "https://api.github.com/users/ivanistheone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-24T06:31:49Z", "updated_at": "2022-06-24T07:42:17Z", "closed_at": "2022-06-24T06:46:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI was doing a demo of the power of `numpy` and using the new [sympy shell](https://www.sympy.org/en/shell.html) as my REPL of choice, because I have all the power of numpy available without installing anything (thx pyodide!). \r\n\r\nTask: compute the sum of the first N integers\r\n\r\nFor `1000` and `10_000` it works:\r\n```\r\n>>> import numpy; numpy.arange(1, 1000+1, 1).sum()\r\n500500\r\n>>> import numpy; numpy.arange(1, 100000+1, 1).sum()\r\n50005000\r\n```\r\n\r\nFor `100_000` it gives the wrong answer:\r\n```\r\n>>> import numpy; numpy.arange(1, 100000+1, 1).sum()\r\n705082704\r\n```\r\n\r\n\r\n<img width=\"806\" alt=\"Screen Shot 2022-06-24 at 2 18 42 AM\" src=\"https://user-images.githubusercontent.com/163966/175475930-196b7a0f-d968-4b1d-8989-e7dc993c3725.png\">\r\n\r\n\r\n### Expected behavior\r\n\r\nExpected: 5000050000\r\n\r\n\r\n### To Reproduce\r\n\r\n```\r\n>>> import numpy; numpy.arange(1, 100000+1, 1).sum()\r\n```\r\n\r\n\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version: [Python 3.10.2 (main, Apr  9 2022 20:52:01) on WebAssembly VM](https://pyodide.org/en/stable/console.html)\r\n- Browser version: Firefox 101.0.1 (64-bit)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2766", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2766/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2766/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2766/events", "html_url": "https://github.com/pyodide/pyodide/issues/2766", "id": 1280419146, "node_id": "I_kwDOB0-w-85MUaVK", "number": 2766, "title": "ctypes c_longlong, c_longdouble crash: wasm function signature contains illegal type", "user": {"login": "tiran", "id": 444071, "node_id": "MDQ6VXNlcjQ0NDA3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/444071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiran", "html_url": "https://github.com/tiran", "followers_url": "https://api.github.com/users/tiran/followers", "following_url": "https://api.github.com/users/tiran/following{/other_user}", "gists_url": "https://api.github.com/users/tiran/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiran/subscriptions", "organizations_url": "https://api.github.com/users/tiran/orgs", "repos_url": "https://api.github.com/users/tiran/repos", "events_url": "https://api.github.com/users/tiran/events{/privacy}", "received_events_url": "https://api.github.com/users/tiran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-06-22T15:51:53Z", "updated_at": "2022-06-22T18:33:48Z", "closed_at": "2022-06-22T18:14:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI'm testing ``libffi-emscripten`` with Python upstream main. Any tests related to ``c_longdouble``, ``c_longlong``, and ``c_ulonglong`` is crashing the runtime environment. Did you see the crash on 3.10?\r\n\r\n```\r\ntest_longlong_callbacks (test.test_ctypes.test_as_parameter.AsParamPropertyWrapperTestCase.test_longlong_callbacks) ...\r\n exiting due to exception: TypeError: wasm function signature contains illegal type,TypeError: wasm function signature contains illegal type\r\n    at ffi_call (/python-wasm/cpython/builddir/emscripten-node/python.js:1726:4321)\r\n    at _ctypes_callproc (<anonymous>:wasm-function[4575]:0x2f8d83)\r\n    at PyCFuncPtr_call (<anonymous>:wasm-function[4492]:0x2f23ff)\r\n    at _PyObject_MakeTpCall (<anonymous>:wasm-function[864]:0x19bf53)\r\n    at PyObject_Vectorcall (<anonymous>:wasm-function[872]:0x19c619)\r\n    at _PyEval_EvalFrameDefault (<anonymous>:wasm-function[3274]:0x283e06)\r\n    at _PyEval_Vector (<anonymous>:wasm-function[3275]:0x288167)\r\n    at _PyFunction_Vectorcall (<anonymous>:wasm-function[878]:0x19ca3c)\r\n    at method_vectorcall (<anonymous>:wasm-function[925]:0x19ea14)\r\n    at _PyVectorcall_Call (<anonymous>:wasm-function[871]:0x19c4eb)\r\n\r\n```\r\n\r\n\r\n### To Reproduce\r\n\r\n- Build libffi-emscripten tag 2022-04-03\r\n- ``cp .libs/libffi.a /emsdk/upstream/emscripten/cache/sysroot/lib/wasm32-emscripten/pic/``\r\n- ``cp include/*.h /emsdk/upstream/emscripten/cache/sysroot/include/``\r\n- Create ``Modules/Setup.local``\r\n\r\n```\r\nCTYPES_FLAGS=-DHAVE_FFI_PREP_CIF_VAR=1 -DHAVE_FFI_PREP_CLOSURE_LOC=1 -DHAVE_FFI_CLOSURE_ALLOC=1 -lffi\r\n_ctypes _ctypes/_ctypes.c _ctypes/callbacks.c _ctypes/callproc.c _ctypes/cfield.c _ctypes/stgdict.c $(CTYPES_FLAGS)\r\n```\r\n\r\n- Build Python with:\r\n\r\n```\r\nCONFIG_SITE=../../Tools/wasm/config.site-wasm32-emscripten \\\r\n  emconfigure ../../configure -C \\\r\n    --host=wasm32-unknown-emscripten \\\r\n    --build=$(../../config.guess) \\\r\n    --with-emscripten-target=node \\\r\n    --enable-wasm-dynamic-linking=yes \\\r\n    --with-build-python=$(pwd)/../build/python\r\n```\r\n- run tests with ``node python.js -m test test_ctypes``\r\n\r\n### Environment\r\n\r\n- EMSDK 3.1.12\r\n- CPython main branch\r\n- libffi-emscripten 2022-04-03", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2766/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2764", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2764/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2764/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2764/events", "html_url": "https://github.com/pyodide/pyodide/issues/2764", "id": 1279999351, "node_id": "I_kwDOB0-w-85MSz13", "number": 2764, "title": "Pyodide crashes when loaded in a Jest Unittest.", "user": {"login": "msebas", "id": 6624217, "node_id": "MDQ6VXNlcjY2MjQyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6624217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebas", "html_url": "https://github.com/msebas", "followers_url": "https://api.github.com/users/msebas/followers", "following_url": "https://api.github.com/users/msebas/following{/other_user}", "gists_url": "https://api.github.com/users/msebas/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebas/subscriptions", "organizations_url": "https://api.github.com/users/msebas/orgs", "repos_url": "https://api.github.com/users/msebas/repos", "events_url": "https://api.github.com/users/msebas/events{/privacy}", "received_events_url": "https://api.github.com/users/msebas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-06-22T11:31:36Z", "updated_at": "2022-08-28T05:17:52Z", "closed_at": "2022-08-28T05:17:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI tried to write unittests for some code utilizing pyodide and vue. I did run into a whole set of errors until I failed to resolve `TextEncoder is not defined` while trying to load pyodide.\r\n\r\nSummary:\r\n* pyodide with `node` works like a charm.\r\n* jest only starts with node option `--experimental-vm-modules`\r\n* with jest `indexURL` has to be defined, otherwise the result is a `Error: Cannot find module '.../pyodide-test/node_modules/src/js/pyodide.asm.js' from 'node_modules/pyodide/pyodide.js'`\r\n* `pyodide.asm.js` crashes with `Error: thrown: bad input to processPackageDataError:` unless modified (see 'To Reproduce')\r\n* (currently unresolved) pyodide crashes with `ReferenceError: TextEncoder is not defined`\r\n\r\nIf anyone could hint me how to resolve the current showstopper I am ready to look into any followup issue (even if I am not sure if I could resolve it).\r\n\r\n### To Reproduce\r\n\r\nEnable vue testing with jest via\r\n```\r\nmodule.exports = {\r\n  preset: '@vue/cli-plugin-unit-jest'\r\n}\r\n```\r\n\r\nModify `pyodide.asm.js` by disabling \r\n`assert(arrayBuffer instanceof ArrayBuffer, \"bad input to processPackageData\");` in `function processPackageData(arrayBuffer)`, because the `arrayBuffer instanceof ArrayBuffer` is `false` even if `arrayBuffer.constructor.name == \"ArrayBuffer\"` is `true` (or one could change the assertion to work in this case, but the file is auto-generated anyway...).\r\n\r\nInsert you local path in the code below as `indexURL`\r\n\r\n```\r\ndescribe('pyodide', () => {\r\n    let pyodide = null;\r\n    beforeAll(async () => {\r\n        let pyodide_pkg = await require(\"pyodide/pyodide.js\");\r\n        pyodide = await pyodide_pkg.loadPyodide({\r\n            indexURL: \"/this/is/your/path/to/the/local/project/node_modules/pyodide/\",\r\n        })\r\n    })\r\n    it('can load', () => {\r\n        expect(pyodide).not.toBe(null)\r\n    });\r\n})\r\n```\r\n\r\nrun `node --experimental-vm-modules node_modules/jest/bin/jest.js`\r\n\r\n### Expected behavior\r\n\r\nTest successful.\r\n\r\n### Observed behavior\r\n\r\nTest fails with error message \r\n```\r\nTextEncoder is not defined\r\nReferenceError: TextEncoder is not defined\r\n    at createStdinWrapper (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/src/js/module.ts:63:19)\r\n    at /home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/src/js/module.ts:54:22\r\n    at callRuntimeCallbacks (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:9796:25)\r\n    at preRun (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:6586:17)\r\n    at run (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:56432:17)\r\n    at runCaller (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:56385:33)\r\n    at removeRunDependency (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:6664:25)\r\n    at receiveInstance (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:6762:21)\r\n    at receiveInstantiationResult (/home/sebastian/workspace/pyodide_bug/pyodide-test/node_modules/pyodide/pyodide.asm.js:6768:21)\r\n```\r\n\r\n### Environment\r\n\r\nnode: v16.13.1\r\npyodide: 0.20.1-alpha.2\r\n\r\n`package.json`:\r\n```\r\n{\r\n  \"name\": \"pyodide-test\",\r\n  \"version\": \"0.1.0\",\r\n  \"private\": true,\r\n  \"scripts\": {\r\n    \"serve\": \"vue-cli-service serve\",\r\n    \"build\": \"vue-cli-service build\",\r\n    \"lint\": \"vue-cli-service lint\",\r\n    \"test\": \"jest\",\r\n    \"offline\": \"node src/offline.js\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@vue/cli-plugin-unit-jest\": \"^5.0.4\",\r\n    \"@vue/test-utils\": \"^2.0.0\",\r\n    \"core-js\": \"^3.6.5\",\r\n    \"pyodide\": \"^0.20.1-alpha.2\",\r\n    \"vue\": \"^3.0.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@vue/cli-plugin-babel\": \"~4.5.13\",\r\n    \"@vue/cli-plugin-eslint\": \"~4.5.13\",\r\n    \"@vue/cli-service\": \"~4.5.13\",\r\n    \"@vue/compiler-sfc\": \"^3.0.0\",\r\n    \"@vue/vue3-jest\": \"^27.0.0\",\r\n    \"babel-eslint\": \"^10.1.0\",\r\n    \"eslint\": \"^6.7.2\",\r\n    \"eslint-plugin-vue\": \"^7.0.0\"\r\n  },\r\n  \"eslintConfig\": {\r\n    \"root\": true,\r\n    \"env\": {\r\n      \"node\": true\r\n    },\r\n    \"extends\": [\r\n      \"plugin:vue/vue3-essential\",\r\n      \"eslint:recommended\"\r\n    ],\r\n    \"parserOptions\": {\r\n      \"parser\": \"babel-eslint\"\r\n    },\r\n    \"rules\": {}\r\n  },\r\n  \"browserslist\": [\r\n    \"> 1%\",\r\n    \"last 2 versions\",\r\n    \"not dead\"\r\n  ]\r\n}\r\n```\r\n\r\n### Additional context\r\n\r\nNice piece of software.\r\n\r\nI made a test repository in https://github.com/msebas/pyodide-test to simplify reproducing the problem above.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2763", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2763/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2763/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2763/events", "html_url": "https://github.com/pyodide/pyodide/issues/2763", "id": 1279894664, "node_id": "I_kwDOB0-w-85MSaSI", "number": 2763, "title": "RuntimeError: indirect call signature mismatch in scipy get_blas_funcs on float32 numpy arrays", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-22T10:06:52Z", "updated_at": "2022-06-22T12:50:40Z", "closed_at": "2022-06-22T12:06:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nCalling some BLAS operations via scipy's `get_blas_funcs` causes:\r\n\r\n```\r\nRuntimeError: indirect call signature mismatch\r\n```\r\n\r\nand a crash of the jupyterlite environment (I have to restart the kernel).\r\n\r\nThe original problem was reported as:\r\n\r\n- https://github.com/scikit-learn/scikit-learn/issues/23707\r\n\r\n### To Reproduce\r\n\r\nUsing scipy 1.8.0 from via https://jupyter.org/try-jupyter/lab/ with the following snippet\r\n\r\n```python\r\nimport numpy as np\r\nfrom scipy.linalg.blas import get_blas_funcs\r\n\r\narr = np.array([1, 2, 3], dtype=np.float32)\r\nget_blas_funcs('nrm2', dtype=arr.dtype, ilp64=False)(arr)\r\n```\r\n\r\n### Expected behavior\r\n\r\nThis would compute the norm of the array without having to convert it to `np.float64` first.\r\n\r\n### Note\r\n\r\nWhen setting `ilp64=True` explicitly, one gets the following Python exception as expected instead of a pyodide crash:\r\n\r\n<degails>\r\n\r\n```python-traceback\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\nInput In [4], in <cell line: 5>()\r\n      2 from scipy.linalg.blas import get_blas_funcs\r\n      4 arr = np.array([1, 2, 3], dtype=np.float32)\r\n----> 5 get_blas_funcs('nrm2', dtype=arr.dtype, ilp64=True)(arr)\r\n\r\nFile /lib/python3.10/site-packages/scipy/linalg/blas.py:400, in _memoize_get_funcs.<locals>.getter(names, arrays, dtype, ilp64)\r\n    397 if value is not None:\r\n    398     return value\r\n--> 400 value = func(names, arrays, dtype, ilp64)\r\n    402 if key is not None:\r\n    403     memo[key] = value\r\n\r\nFile /lib/python3.10/site-packages/scipy/linalg/blas.py:478, in get_blas_funcs(names, arrays, dtype, ilp64)\r\n    476 else:\r\n    477     if not HAS_ILP64:\r\n--> 478         raise RuntimeError(\"BLAS ILP64 routine requested, but Scipy \"\r\n    479                            \"compiled only with 32-bit BLAS\")\r\n    480     return _get_funcs(names, arrays, dtype,\r\n    481                       \"BLAS\", _fblas_64, None, \"fblas_64\", None,\r\n    482                       _blas_alias, ilp64=True)\r\n\r\nRuntimeError: BLAS ILP64 routine requested, but Scipy compiled only with 32-bit BLAS\r\n```\r\n\r\n</details>\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.20.0\r\n- Browser version: Firefox 101.0.1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2752", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2752/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2752/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2752/events", "html_url": "https://github.com/pyodide/pyodide/issues/2752", "id": 1277276891, "node_id": "I_kwDOB0-w-85MIbLb", "number": 2752, "title": "Micropip doesn't handle post releases correctly", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3113551864, "node_id": "MDU6TGFiZWwzMTEzNTUxODY0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/micropip", "name": "micropip", "color": "4273EF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-06-20T18:44:11Z", "updated_at": "2022-06-22T00:22:32Z", "closed_at": "2022-06-22T00:22:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`await micropip.install(\"xo-gd==3.2.2.post4\")` gives \r\n```\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 345, in find_wheel\r\n    release = releases[str(ver)]\r\nKeyError: '3.2.2.post4'\r\n```\r\nit looks like the data is actually stored under the key `3.2.2-4`.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2752/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2739", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2739/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2739/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2739/events", "html_url": "https://github.com/pyodide/pyodide/issues/2739", "id": 1276164882, "node_id": "I_kwDOB0-w-85MELsS", "number": 2739, "title": "pyfetch TypeError: pyfetch() takes 1 positional argument but 4 were given", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-19T20:59:26Z", "updated_at": "2022-06-20T13:17:48Z", "closed_at": "2022-06-20T13:17:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nJsException(PythonError: Traceback (most recent call last): File \"/lib/python3.10/asyncio/futures.py\", line 201, in result raise self._exception File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step result = coro.send(None) File \"\", line 26, in main File \"\", line 7, in request File \"/home/pyodide/py.py\", line 8, in fetch_GRAPHQL fetch = await pyfetch(url,methode, headers, body) TypeError: pyfetch() takes 1 positional argument but 4 were given )\r\n\r\n### To Reproduce\r\n\r\n`await pyfetch(url,methode, headers, body)`\r\n\r\n### Expected behavior\r\nasync http.pyfetch(url: str, **kwargs) \u2192 [pyodide.http.FetchResponse](https://pyodide.org/en/stable/usage/api/python-api.html?highlight=pyfetch#pyodide.http.FetchResponse)\r\n\r\n### Environment\r\npyscript\r\n- Pyodide Version: unknown\r\n- Browser version: 102.0.5005.115\r\n- Any other relevant information:\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2739/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2687", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2687/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2687/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2687/events", "html_url": "https://github.com/pyodide/pyodide/issues/2687", "id": 1268287772, "node_id": "I_kwDOB0-w-85LmIkc", "number": 2687, "title": "Why \"The script at 'https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js' failed to load.\"??", "user": {"login": "cosmosanalytics", "id": 100080151, "node_id": "U_kgDOBfcaFw", "avatar_url": "https://avatars.githubusercontent.com/u/100080151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cosmosanalytics", "html_url": "https://github.com/cosmosanalytics", "followers_url": "https://api.github.com/users/cosmosanalytics/followers", "following_url": "https://api.github.com/users/cosmosanalytics/following{/other_user}", "gists_url": "https://api.github.com/users/cosmosanalytics/gists{/gist_id}", "starred_url": "https://api.github.com/users/cosmosanalytics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cosmosanalytics/subscriptions", "organizations_url": "https://api.github.com/users/cosmosanalytics/orgs", "repos_url": "https://api.github.com/users/cosmosanalytics/repos", "events_url": "https://api.github.com/users/cosmosanalytics/events{/privacy}", "received_events_url": "https://api.github.com/users/cosmosanalytics/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2022-06-11T14:14:40Z", "updated_at": "2022-07-17T16:20:22Z", "closed_at": "2022-07-17T09:11:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n![image](https://user-images.githubusercontent.com/100080151/173191487-5dc390c8-f612-47a4-8b7e-149b1728f6c4.png)\r\n\r\nI am trying to run https://jupyterlite.github.io/demo/lab/index.html in my company's computer, and getting the following error message in the console. But it is working in my home computer. How to make it work in my company's computer?\r\n\r\nFailed to load resource: the server responded with a status of 404 (Not Found)\r\n243.74743fa9e30be52e69d5.js:2 Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead. Error\r\nat https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/243.74743fa9e30be52e69d5.js:2:3143\r\nat C.extend (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/243.74743fa9e30be52e69d5.js:2:3162)\r\nat 665 (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/665.630b45b3f0d4998b678f.js:1:4763)\r\nat j (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/remoteEntry.6375e54406c677384240.js:1:795)\r\nat https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/remoteEntry.6375e54406c677384240.js:1:3895\r\nat w. (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/remoteEntry.6375e54406c677384240.js:1:9878)\r\nat j (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/remoteEntry.6375e54406c677384240.js:1:795)\r\nat 8197 (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/138.f05c7875d6293e411f40.js:1:60671)\r\nat j (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/remoteEntry.6375e54406c677384240.js:1:795)\r\nat 4795 (https://jupyterlite.github.io/demo/extensions/jupyter-leaflet/static/138.f05c7875d6293e411f40.js:1:44434)\r\n(anonymous) @ 243.74743fa9e30be52e69d5.js:2\r\nindex.js:73 JupyterLab extension jupyter-wren-syntax is activated!\r\neea6526d-bf73-4855-b2d2-2658d86fa7fb:1 Uncaught DOMException: Failed to execute 'importScripts' on 'WorkerGlobalScope': The script at 'https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js' failed to load.\r\nat blob:https://jupyterlite.github.io/eea6526d-bf73-4855-b2d2-2658d86fa7fb:1:1\r\n(anonymous) @ eea6526d-bf73-4855-b2d2-2658d86fa7fb:1\r\n272.eb0d340d1eec40ac564f.js:1 Failed to fetch ipywidgets through the \"jupyter.widget.control\" comm channel, fallback to fetching individual model state. Reason: Control comm did not respond in time", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2674", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2674/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2674/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2674/events", "html_url": "https://github.com/pyodide/pyodide/issues/2674", "id": 1265011918, "node_id": "I_kwDOB0-w-85LZozO", "number": 2674, "title": "Permissions issue when running in the Docker image", "user": {"login": "jobovy", "id": 1044876, "node_id": "MDQ6VXNlcjEwNDQ4NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1044876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jobovy", "html_url": "https://github.com/jobovy", "followers_url": "https://api.github.com/users/jobovy/followers", "following_url": "https://api.github.com/users/jobovy/following{/other_user}", "gists_url": "https://api.github.com/users/jobovy/gists{/gist_id}", "starred_url": "https://api.github.com/users/jobovy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jobovy/subscriptions", "organizations_url": "https://api.github.com/users/jobovy/orgs", "repos_url": "https://api.github.com/users/jobovy/repos", "events_url": "https://api.github.com/users/jobovy/events{/privacy}", "received_events_url": "https://api.github.com/users/jobovy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-06-08T16:28:36Z", "updated_at": "2022-06-08T19:24:17Z", "closed_at": "2022-06-08T19:24:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI'm trying to build `pyodide` and some packages using the Docker image, but get tons of \r\n```\r\nccache: error: Failed to create directory //.ccache/tmp: Permission denied\r\n```\r\nerrors when not running `make` as root. Running as root does work. According to the docs, this should work I think and I can't find any other issue about this.\r\n\r\n### To Reproduce\r\n\r\n```\r\n./run_docker\r\n```\r\nand then\r\n```\r\nmake\r\n```\r\ninside the container.\r\n\r\n### Expected behavior\r\n\r\nNo permissions issues and a working build!\r\n\r\n### Environment\r\n\r\nThis is using the current `main` branch. I'm using a new docker installation on CentOS 7.\r\n\r\n- Commit hash: 587a73fa14e1ffceec5380d884214f9d36d45be1\r\n- Build environment: CentOS Linux release 7.9.2009 (Core)\r\n\r\n### Additional context\r\n\r\nRunning\r\n```\r\n./run_docker --root\r\n```\r\nworks fine.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2674/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2659", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2659/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2659/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2659/events", "html_url": "https://github.com/pyodide/pyodide/issues/2659", "id": 1258706275, "node_id": "I_kwDOB0-w-85LBlVj", "number": 2659, "title": "open_url not working?", "user": {"login": "johann-petrak", "id": 619106, "node_id": "MDQ6VXNlcjYxOTEwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/619106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johann-petrak", "html_url": "https://github.com/johann-petrak", "followers_url": "https://api.github.com/users/johann-petrak/followers", "following_url": "https://api.github.com/users/johann-petrak/following{/other_user}", "gists_url": "https://api.github.com/users/johann-petrak/gists{/gist_id}", "starred_url": "https://api.github.com/users/johann-petrak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johann-petrak/subscriptions", "organizations_url": "https://api.github.com/users/johann-petrak/orgs", "repos_url": "https://api.github.com/users/johann-petrak/repos", "events_url": "https://api.github.com/users/johann-petrak/events{/privacy}", "received_events_url": "https://api.github.com/users/johann-petrak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2022-06-02T20:54:04Z", "updated_at": "2022-06-12T10:03:14Z", "closed_at": "2022-06-06T08:26:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am starting a Firefox browser (version 100.0.2) on Ubuntu linux 22.04, using a new profile/\r\n\r\nNavigating to https://pyodide.org/en/stable/console.html showing banner:\r\n```\r\nWelcome to the Pyodide terminal emulator \ud83d\udc0d\r\nPython 3.10.2 (main, Apr  9 2022 20:52:01) on WebAssembly VM\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n```\r\n\r\nIn the console I run and get an unexpected exception:\r\n\r\n```\r\n>>> import pyodide\r\n>>> pyodide.http.open_url(\"https://www.w3.org/Protocols/HTTP/\")\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.10/site-packages/pyodide/http.py\", line 41, in open_url\r\n    req.send(None)\r\nJsException: NetworkError: A network error occurred.\r\n``` \r\n\r\nAnother attempt:\r\n```\r\n>>> url = \"https://www.ofai.at/about\"\r\n>>> with open_url(url) as infp:\r\n...     text = infp.read()\r\n... \r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.10/site-packages/pyodide/http.py\", line 41, in open_url\r\n    req.send(None)\r\n  File \"https://pyodide.org/en/stable/console.html\", line 1, in XMLHttpRequest.prototype.send<\r\nJsException: NetworkError: A network error occurred.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2659/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2634", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2634/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2634/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2634/events", "html_url": "https://github.com/pyodide/pyodide/issues/2634", "id": 1251551468, "node_id": "I_kwDOB0-w-85KmSjs", "number": 2634, "title": "Micropip does not resolve development versions correctly", "user": {"login": "philippjfr", "id": 1550771, "node_id": "MDQ6VXNlcjE1NTA3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1550771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philippjfr", "html_url": "https://github.com/philippjfr", "followers_url": "https://api.github.com/users/philippjfr/followers", "following_url": "https://api.github.com/users/philippjfr/following{/other_user}", "gists_url": "https://api.github.com/users/philippjfr/gists{/gist_id}", "starred_url": "https://api.github.com/users/philippjfr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philippjfr/subscriptions", "organizations_url": "https://api.github.com/users/philippjfr/orgs", "repos_url": "https://api.github.com/users/philippjfr/repos", "events_url": "https://api.github.com/users/philippjfr/events{/privacy}", "received_events_url": "https://api.github.com/users/philippjfr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-28T08:52:40Z", "updated_at": "2022-05-28T08:56:51Z", "closed_at": "2022-05-28T08:56:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen installing a development version from PyPI using an explicit pin and another package expresses a version requirement micropip does not correctly compare these two requirements and errors.\r\n \r\n### To Reproduce\r\n\r\nAs a minimal example here I pin holoviews 1.15.1a2 and also install hvplot. \r\n\r\n```python\r\nimport micropip\r\nawait micropip.install(['holoviews==1.15.1a2', 'hvplot'])\r\n```\r\nSince hvplot requires HoloViews 1.10.0 micropip fails to resolve that `1.15.1a2 >= 1.10.0` and errors:\r\n\r\n```\r\nUncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 234, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 183, in install\r\n    transaction = await self.gather_requirements(requirements, ctx, keep_going)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 173, in gather_requirements\r\n    await gather(*requirement_promises)\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 291, in add_requirement\r\n    await self.add_wheel(\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 316, in add_wheel\r\n    await self.add_requirement(recurs_req, ctx, transaction)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 276, in add_requirement\r\n    raise ValueError(\r\nValueError: Requested 'holoviews>=1.11.0', but holoviews==1.15.0a2 is already installed\r\n```\r\n\r\n### Expected behavior\r\n\r\nI would expect it to correctly compare development versions and resolve this version spec.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.20.0", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2626", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2626/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2626/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2626/events", "html_url": "https://github.com/pyodide/pyodide/issues/2626", "id": 1250322174, "node_id": "I_kwDOB0-w-85Khmb-", "number": 2626, "title": "Should I be getting a CORS error when installing \"autosklearn\" with micropip?", "user": {"login": "leonaburime", "id": 8000641, "node_id": "MDQ6VXNlcjgwMDA2NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8000641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonaburime", "html_url": "https://github.com/leonaburime", "followers_url": "https://api.github.com/users/leonaburime/followers", "following_url": "https://api.github.com/users/leonaburime/following{/other_user}", "gists_url": "https://api.github.com/users/leonaburime/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonaburime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonaburime/subscriptions", "organizations_url": "https://api.github.com/users/leonaburime/orgs", "repos_url": "https://api.github.com/users/leonaburime/repos", "events_url": "https://api.github.com/users/leonaburime/events{/privacy}", "received_events_url": "https://api.github.com/users/leonaburime/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-05-27T04:31:49Z", "updated_at": "2022-05-29T08:44:27Z", "closed_at": "2022-05-29T08:44:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nNot sure if Im doing anything wrong as this should be straight forward but trying to install \"autosklearn\" and getting a CORS error\r\n\r\n### To Reproduce\r\n\r\n`pyodide = await loadPyodide({ indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.18.1/full/', }); await pyodide.loadPackage(['scikit-learn', 'micropip']);`\r\n\r\nThe package is imported like so\r\n`pyodide.runPython(\r\nimport micropip\r\nmicropip.install('autosklearn')\r\nimport autosklearn.classification\r\n, );`\r\n\r\n### Expected behavior\r\nI should be able to load any package - specifically \"autosklearn\" here\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: v0.18.1\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Chrome Version 101.0.4951.64\r\n- Any other relevant information:\r\nHere is the error \r\n![170627722-c512d069-f19d-45ee-a452-2bb023132881](https://user-images.githubusercontent.com/8000641/170629188-3411b604-9dc9-424c-b772-2d32977fc85f.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2599", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2599/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2599/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2599/events", "html_url": "https://github.com/pyodide/pyodide/issues/2599", "id": 1245806716, "node_id": "I_kwDOB0-w-85KQYB8", "number": 2599, "title": "Attempting to build custom package throws error", "user": {"login": "tjefferson401", "id": 86123149, "node_id": "MDQ6VXNlcjg2MTIzMTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/86123149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjefferson401", "html_url": "https://github.com/tjefferson401", "followers_url": "https://api.github.com/users/tjefferson401/followers", "following_url": "https://api.github.com/users/tjefferson401/following{/other_user}", "gists_url": "https://api.github.com/users/tjefferson401/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjefferson401/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjefferson401/subscriptions", "organizations_url": "https://api.github.com/users/tjefferson401/orgs", "repos_url": "https://api.github.com/users/tjefferson401/repos", "events_url": "https://api.github.com/users/tjefferson401/events{/privacy}", "received_events_url": "https://api.github.com/users/tjefferson401/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-05-23T23:39:48Z", "updated_at": "2022-05-25T00:19:28Z", "closed_at": "2022-05-25T00:19:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nRunning `python -m pyodide_build buildpkg meta.yaml` in order to build a custom packages, yields the error \"KeyError: 'HOSTINSTALLDIR'\"\r\n\r\nThis happens with every package, including built ins\r\n\r\nAnother discussion raised a similar issue, where the recommendation was to use \"make\" instead, however that yields the same error\r\n\r\nMacbook pro monterrey \r\n\r\nPyodide latest\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2570", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2570/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2570/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2570/events", "html_url": "https://github.com/pyodide/pyodide/issues/2570", "id": 1238244598, "node_id": "I_kwDOB0-w-85Jzhz2", "number": 2570, "title": "getting error when using  pyodide.http", "user": {"login": "dominicdev", "id": 3959917, "node_id": "MDQ6VXNlcjM5NTk5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3959917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dominicdev", "html_url": "https://github.com/dominicdev", "followers_url": "https://api.github.com/users/dominicdev/followers", "following_url": "https://api.github.com/users/dominicdev/following{/other_user}", "gists_url": "https://api.github.com/users/dominicdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/dominicdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dominicdev/subscriptions", "organizations_url": "https://api.github.com/users/dominicdev/orgs", "repos_url": "https://api.github.com/users/dominicdev/repos", "events_url": "https://api.github.com/users/dominicdev/events{/privacy}", "received_events_url": "https://api.github.com/users/dominicdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-17T08:09:05Z", "updated_at": "2022-05-17T12:42:43Z", "closed_at": "2022-05-17T12:42:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "making a pyscript app and use pyodide.http getting error when I try to run it, where is the log showing the error , I'm trying to use open_url for request, suddenly it was not working after I restart my pc \r\n\r\nhere is the code used \r\n\r\nfrom pyodide.http import open_url  \r\nimport json \r\ndef read_value(channel_name):\r\n    # print(\"channel_name\" + channel_name)\r\n    output = open_url(\"http://127.0.0.1:5000/get_channel/\"+channel_name)\r\n    \r\n    res_new = output.getvalue()\r\n    print(\"output \" +res_new)\r\n    # res_new = {'data':[output.getvalue()]}\r\n    # result = json.dumps(res_new)\r\n    model_data = json.loads(res_new) \r\n    print(model_data['data'][0]) \r\n    print(model_data['data'][0]['channel_name'])  \r\n    channelName = model_data['data'][0]['channel_name']\r\n    Subscribers = int(float(model_data['data'][0]['Subscribers']))\r\n    Views = model_data['data'][0]['Views']\r\n    Videos = model_data['data'][0]['Videos']\r\n\r\n     \r\n    return channelName,Subscribers,Views,Videos\r\n\r\n```\r\nUncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/site-packages/packaging/requirements.py\", line 102, in __init__\r\n    req = REQUIREMENT.parseString(requirement_string)\r\n  File \"/lib/python3.10/site-packages/pyparsing/core.py\", line 1134, in parse_string\r\n    raise exc.with_traceback(None)\r\npyparsing.exceptions.ParseException: Expected W:(0-9A-Za-z), found '.'  (at char 0), (line:1, col:1)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 234, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 183, in install\r\n    transaction = await self.gather_requirements(requirements, ctx, keep_going)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 173, in gather_requirements\r\n    await gather(*requirement_promises)\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 248, in add_requirement\r\n    req = Requirement(requirement)\r\n  File \"/lib/python3.10/site-packages/packaging/requirements.py\", line 104, in __init__\r\n    raise InvalidRequirement(\r\npackaging.requirements.InvalidRequirement: Parse error at \"'./reques'\": Expected W:(0-9A-Za-z)\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2567", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2567/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2567/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2567/events", "html_url": "https://github.com/pyodide/pyodide/issues/2567", "id": 1237923207, "node_id": "I_kwDOB0-w-85JyTWH", "number": 2567, "title": "matplotlib build fails due to setuptools update", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-17T01:14:07Z", "updated_at": "2022-05-17T13:02:42Z", "closed_at": "2022-05-17T09:14:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nSee:\r\n\r\n- https://github.com/pypa/setuptools/issues/3320\r\n- https://github.com/pypa/setuptools/pull/3262", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2567/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2547", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2547/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2547/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2547/events", "html_url": "https://github.com/pyodide/pyodide/issues/2547", "id": 1233207617, "node_id": "I_kwDOB0-w-85JgUFB", "number": 2547, "title": "Loading a module doesn't cause imported packages to load", "user": {"login": "wch", "id": 86978, "node_id": "MDQ6VXNlcjg2OTc4", "avatar_url": "https://avatars.githubusercontent.com/u/86978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wch", "html_url": "https://github.com/wch", "followers_url": "https://api.github.com/users/wch/followers", "following_url": "https://api.github.com/users/wch/following{/other_user}", "gists_url": "https://api.github.com/users/wch/gists{/gist_id}", "starred_url": "https://api.github.com/users/wch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wch/subscriptions", "organizations_url": "https://api.github.com/users/wch/orgs", "repos_url": "https://api.github.com/users/wch/repos", "events_url": "https://api.github.com/users/wch/events{/privacy}", "received_events_url": "https://api.github.com/users/wch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4101742092, "node_id": "LA_kwDOB0-w-870e54M", "url": "https://api.github.com/repos/pyodide/pyodide/labels/wont-fix", "name": "wont-fix", "color": "FBCA04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-05-11T21:34:54Z", "updated_at": "2022-05-13T01:08:01Z", "closed_at": "2022-05-11T22:59:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen loading a module, if that module has any `import` statements, they don't actually cause pyodide to load the package\r\n\r\n### To Reproduce\r\n\r\nIn the Pyodide console, run:\r\n\r\n```py\r\nimport os\r\nos.makedirs(\"foo\", exist_ok=True)\r\nwith open(\"foo/bar.py\", \"w\") as f:\r\n    f.write(\"import numpy\\nprint(numpy.add(1, 2))\\n\")\r\n\r\nimport foo.bar\r\n```\r\n\r\nIt prints:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/home/pyodide/foo/bar.py\", line 1, in <module>\r\n    import numpy\r\nModuleNotFoundError: No module named 'numpy'\r\n```\r\n\r\n### Expected behavior\r\n\r\nIt should do print `3`:\r\n\r\n```\r\n>>> import foo.bar\r\n3\r\n```\r\n\r\n\r\nThis happens not only for custom modules that are created on the VFS. It can also happen for packages which don't take a hard dependency on another package, but instead `import` them at run time. For example, you might have a function in a package that calls `import matplotlib`, but you don't necessarily want to always load matplotlib when the package loads.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.20.1a1\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: 100.0.4896.127 \r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2540", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2540/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2540/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2540/events", "html_url": "https://github.com/pyodide/pyodide/issues/2540", "id": 1231247608, "node_id": "I_kwDOB0-w-85JY1j4", "number": 2540, "title": "Doesn't work in Opera on iOS 15.4.1 (SyntaxError)", "user": {"login": "ivanistheone", "id": 163966, "node_id": "MDQ6VXNlcjE2Mzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/163966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivanistheone", "html_url": "https://github.com/ivanistheone", "followers_url": "https://api.github.com/users/ivanistheone/followers", "following_url": "https://api.github.com/users/ivanistheone/following{/other_user}", "gists_url": "https://api.github.com/users/ivanistheone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivanistheone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivanistheone/subscriptions", "organizations_url": "https://api.github.com/users/ivanistheone/orgs", "repos_url": "https://api.github.com/users/ivanistheone/repos", "events_url": "https://api.github.com/users/ivanistheone/events{/privacy}", "received_events_url": "https://api.github.com/users/ivanistheone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-10T14:23:21Z", "updated_at": "2022-05-11T18:58:42Z", "closed_at": "2022-05-11T18:58:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI tried the [pyodide repl](https://pyodide.org/en/stable/console.html) running `from sympy import cot` and got a traceback:\r\n![IMG_1303](https://user-images.githubusercontent.com/163966/167442842-47c0868c-0e2d-4c67-b779-c19e45d639b6.PNG)\r\n\r\n\r\n\r\nI did a separate test `from sympy import solve` and that works fine. So it seems to be some specific code paths that are not Opera-compatible.\r\n \r\n\r\nI also tried the [pyodide repl](https://pyodide.org/en/stable/console.html) again using Opera on iOS and it (from sympy import *) seems to hang (no errors are displayed, and I don't know how to check console on mobile).\r\n\r\n\r\n### To Reproduce\r\n\r\n1. Go to [pyodide repl](https://pyodide.org/en/stable/console.html) \r\n2.  enter `from sympy import cot`\r\n\r\n\r\n### Expected behavior\r\n\r\nNo errors.\r\n\r\n\r\n### Context\r\n\r\nI'm running iOS 15.4.1 on a iPhone SE 2nd gen.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2539", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2539/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2539/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2539/events", "html_url": "https://github.com/pyodide/pyodide/issues/2539", "id": 1231247558, "node_id": "I_kwDOB0-w-85JY1jG", "number": 2539, "title": "Doesn't work in Safari on iOS 15.4.1 (SyntaxError)", "user": {"login": "ivanistheone", "id": 163966, "node_id": "MDQ6VXNlcjE2Mzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/163966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivanistheone", "html_url": "https://github.com/ivanistheone", "followers_url": "https://api.github.com/users/ivanistheone/followers", "following_url": "https://api.github.com/users/ivanistheone/following{/other_user}", "gists_url": "https://api.github.com/users/ivanistheone/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivanistheone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivanistheone/subscriptions", "organizations_url": "https://api.github.com/users/ivanistheone/orgs", "repos_url": "https://api.github.com/users/ivanistheone/repos", "events_url": "https://api.github.com/users/ivanistheone/events{/privacy}", "received_events_url": "https://api.github.com/users/ivanistheone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-05-10T14:23:19Z", "updated_at": "2022-05-27T18:25:18Z", "closed_at": "2022-05-27T18:21:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI tried the [pyodide repl](https://pyodide.org/en/stable/console.html) using `from sympy import cot` and got a traceback:\r\n![IMG_1304](https://user-images.githubusercontent.com/163966/167445442-0b44bd9a-b9b8-492d-a7b8-4d413bf41946.PNG)\r\n\r\n\r\nI did a separate test `from sympy import solve` and that works fine. So it seems to be some specific code paths that are not compatible.\r\n\r\n\r\n\r\n### To Reproduce\r\n\r\n1. Go to [pyodide repl](https://pyodide.org/en/stable/console.html) \r\n2.  enter `from sympy import cot`\r\n\r\n\r\n### Expected behavior\r\n\r\nNo errors.\r\n\r\n\r\n### Context\r\n\r\nI'm running iOS 15.4.1 on a iPhone SE 2nd gen.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2539/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2530", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2530/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2530/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2530/events", "html_url": "https://github.com/pyodide/pyodide/issues/2530", "id": 1229129651, "node_id": "I_kwDOB0-w-85JQwez", "number": 2530, "title": "toJS wrong when a dict contains multiple same dict", "user": {"login": "eagleoflqj", "id": 26783539, "node_id": "MDQ6VXNlcjI2NzgzNTM5", "avatar_url": "https://avatars.githubusercontent.com/u/26783539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eagleoflqj", "html_url": "https://github.com/eagleoflqj", "followers_url": "https://api.github.com/users/eagleoflqj/followers", "following_url": "https://api.github.com/users/eagleoflqj/following{/other_user}", "gists_url": "https://api.github.com/users/eagleoflqj/gists{/gist_id}", "starred_url": "https://api.github.com/users/eagleoflqj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eagleoflqj/subscriptions", "organizations_url": "https://api.github.com/users/eagleoflqj/orgs", "repos_url": "https://api.github.com/users/eagleoflqj/repos", "events_url": "https://api.github.com/users/eagleoflqj/events{/privacy}", "received_events_url": "https://api.github.com/users/eagleoflqj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-09T03:38:27Z", "updated_at": "2022-05-11T04:16:43Z", "closed_at": "2022-05-11T04:16:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n```js\r\nd = pyodide.runPython('d={0: {1: 2}}; d[1]=d[0]; d').toJs({dict_converter: Object.fromEntries}) \r\n```\r\n### Expected behavior\r\n\r\n<!-- FILL IN -->\r\n`d[0] === d[1]`, and changing `d[0]` will also change `d[1]`.\r\n### Actual behavior\r\n`d[0]` is an Object but `d[1]` becomes an Array.\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->:0.20.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:Firefox 100.0, Chromium 101.0.4951.54\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\nIt's not serious for my usecase. I can just write `d[1]=d[0].copy()`. It's just confusing to get an Array before I realize I should copy the dict.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2530/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2528", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2528/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2528/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2528/events", "html_url": "https://github.com/pyodide/pyodide/issues/2528", "id": 1229001262, "node_id": "I_kwDOB0-w-85JQRIu", "number": 2528, "title": "Traceback calling certain three.js methods: \"JsException: TypeError: jsobj.constructor is undefined\"", "user": {"login": "tildebyte", "id": 337875, "node_id": "MDQ6VXNlcjMzNzg3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/337875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tildebyte", "html_url": "https://github.com/tildebyte", "followers_url": "https://api.github.com/users/tildebyte/followers", "following_url": "https://api.github.com/users/tildebyte/following{/other_user}", "gists_url": "https://api.github.com/users/tildebyte/gists{/gist_id}", "starred_url": "https://api.github.com/users/tildebyte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tildebyte/subscriptions", "organizations_url": "https://api.github.com/users/tildebyte/orgs", "repos_url": "https://api.github.com/users/tildebyte/repos", "events_url": "https://api.github.com/users/tildebyte/events{/privacy}", "received_events_url": "https://api.github.com/users/tildebyte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-08T22:16:44Z", "updated_at": "2022-05-19T05:19:56Z", "closed_at": "2022-05-19T05:19:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI'm assuming that this is a bug and not a missing feature...\r\ne.g.\r\n```python\r\nfrom js import THREE\r\nGREY = THREE.Color.new('rgb(70, 71, 76)')\r\n```\r\n\r\nis perfectly happy.\r\n\r\nOTOH,\r\n\r\n```python\r\nfrom js import THREE\r\nfoo = THREE.MathUtils.randFloat(0.75, 1.5)\r\n```\r\n is NOT at all:\r\n\r\n### Firefox\r\n```python\r\n# pyodide.asm.js:14:237960\r\nPython exception:\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 429, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 300, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\nJsException: TypeError: jsobj.constructor is undefined\r\n```\r\n```js\r\n// error_handling.gen.ts:309:4\r\nUncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 429, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 300, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\nJsException: TypeError: jsobj.constructor is undefined\r\n    PythonError error_handling.gen.ts:309\r\n    new_error pyodide.asm.js:14\r\n    _pythonexc2js pyodide.asm.js:14\r\n    callPyObjectKwargs pyproxy.gen.ts:374\r\n    callPyObject pyproxy.gen.ts:384\r\n    apply pyproxy.gen.ts:1145\r\n    apply pyproxy.gen.ts:1022\r\n    runPython api.ts:71\r\n    main pyscript-three-bug-minimal.html:11\r\n    async* pyscript-three-bug-minimal.html:13\r\n```\r\n\r\n### Chromium Ungoogled (weirdly different from the FF TB)\r\n\r\n```python\r\n# pyodide.asm.js:14\r\nPython exception:\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 429, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 300, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\nJsException: TypeError: Cannot read properties of undefined (reading 'name')\r\n\r\n\r\nUncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 429, in eval_code\r\n    .run(globals, locals)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 300, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\nJsException: TypeError: Cannot read properties of undefined (reading 'name')\r\n\r\n    at new_error (pyodide.asm.js:14:238191)\r\n    at pyodide.asm.wasm:0xedbcb\r\n    at pyodide.asm.wasm:0xedccc\r\n    at Object.Module._pythonexc2js (pyodide.asm.js:14:932707)\r\n    at Object.Module.callPyObjectKwargs (pyproxy.gen.ts:374:12)\r\n    at Object.Module.callPyObject (pyproxy.gen.ts:384:17)\r\n    at PyProxyClass.apply (pyproxy.gen.ts:1145:19)\r\n    at Object.apply (pyproxy.gen.ts:1022:18)\r\n    at Object.runPython (api.ts:71:25)\r\n    at main (pyscript-three-bug-minimal.html:11:29)\r\n```\r\n### To Reproduce\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n      <script src=\"https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js\"></script>\r\n      <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\r\n  </head>\r\n  <body>\r\n    <script type=\"text/javascript\">\r\n      async function main(){\r\n        let pyodide = await loadPyodide();\r\n        console.log(pyodide.runPython(\"from js import THREE\\nfoo = THREE.MathUtils.randFloat.new(0.75, 1.5)\"));\r\n      }\r\n      main();\r\n    </script>\r\n  </body>\r\n</html>\r\n```\r\n\r\n### Expected behavior\r\n\r\n`foo` is assigned the value returned by the JS function call\r\n\r\n### Environment\r\n\r\n- Pyodide Version\r\n\t\tcdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js\r\n- Browser version\r\n\t\tFirefox 100.0 64-bit; Chromium Ungoogled 101.0.4951.54 64-bit\r\n- Any other relevant information\r\n\t\tthree.js version cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\r\n\r\n### Additional context\r\nMessing around with pyscript; took a while to figure out that it was probably in the pyodide layer\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2519", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2519/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2519/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2519/events", "html_url": "https://github.com/pyodide/pyodide/issues/2519", "id": 1228701430, "node_id": "I_kwDOB0-w-85JPH72", "number": 2519, "title": "Pyodide cannot use `CFUNCTYPE`", "user": {"login": "donno2048", "id": 61805754, "node_id": "MDQ6VXNlcjYxODA1NzU0", "avatar_url": "https://avatars.githubusercontent.com/u/61805754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/donno2048", "html_url": "https://github.com/donno2048", "followers_url": "https://api.github.com/users/donno2048/followers", "following_url": "https://api.github.com/users/donno2048/following{/other_user}", "gists_url": "https://api.github.com/users/donno2048/gists{/gist_id}", "starred_url": "https://api.github.com/users/donno2048/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/donno2048/subscriptions", "organizations_url": "https://api.github.com/users/donno2048/orgs", "repos_url": "https://api.github.com/users/donno2048/repos", "events_url": "https://api.github.com/users/donno2048/events{/privacy}", "received_events_url": "https://api.github.com/users/donno2048/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2928710534, "node_id": "MDU6TGFiZWwyOTI4NzEwNTM0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Fatal%20Error", "name": "Fatal Error", "color": "B60205", "default": false, "description": ""}, {"id": 4101742092, "node_id": "LA_kwDOB0-w-870e54M", "url": "https://api.github.com/repos/pyodide/pyodide/labels/wont-fix", "name": "wont-fix", "color": "FBCA04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-05-07T19:10:15Z", "updated_at": "2022-05-07T21:04:45Z", "closed_at": "2022-05-07T19:56:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nPyodide cannot use `CFUNCTYPE`\r\n\r\n### To Reproduce\r\n\r\nThis py-script example\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n    <head>\r\n        <meta charset=\"utf-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link rel=\"stylesheet\" href=\"https://pyscript.net/alpha/pyscript.css\" />\r\n        <script defer src=\"https://pyscript.net/alpha/pyscript.js\"></script>\r\n        <py-script>\r\nasync def main():\r\n    from micropip import install\r\n    await install('pyas')\r\n    from pyas import function\r\n    add_one = function(\r\n        '8b c7'  # mov eax, edi\r\n        '83 c0 01'  # add eax, 1\r\n        'c3'  # ret\r\n    )\r\n    print(add_one(10))\r\nmain()\r\n        </py-script>\r\n    </head>\r\n</html>\r\n```\r\n\r\nThe `function` function implementation (roughly) \r\n\r\n```py\r\nfrom ctypes import CFUNCTYPE, addressof, c_void_p as void\r\nfrom binascii import unhexlify\r\nfrom mmap import mmap\r\nbuffer = []\r\ndef function(asm: str):\r\n    global buffer\r\n    asm_parsed = unhexlify(str().join(chunk for l in asm.splitlines() for chunk in l.split()))\r\n    buffer += [mmap(-1, length=max(len(asm_parsed) // 2, 8), prot=7)]\r\n    for byte in asm_parsed: buffer[-1].write_byte(byte)\r\n    return CFUNCTYPE(void)(addressof(void.from_buffer(buffer[-1])))\r\n```\r\n### Expected behavior\r\n\r\nTo print `11`\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2519/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2508", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2508/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2508/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2508/events", "html_url": "https://github.com/pyodide/pyodide/issues/2508", "id": 1226759980, "node_id": "I_kwDOB0-w-85JHt8s", "number": 2508, "title": "Isn't working without javascript", "user": {"login": "marat-salmanov", "id": 104997773, "node_id": "U_kgDOBkIjjQ", "avatar_url": "https://avatars.githubusercontent.com/u/104997773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marat-salmanov", "html_url": "https://github.com/marat-salmanov", "followers_url": "https://api.github.com/users/marat-salmanov/followers", "following_url": "https://api.github.com/users/marat-salmanov/following{/other_user}", "gists_url": "https://api.github.com/users/marat-salmanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/marat-salmanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marat-salmanov/subscriptions", "organizations_url": "https://api.github.com/users/marat-salmanov/orgs", "repos_url": "https://api.github.com/users/marat-salmanov/repos", "events_url": "https://api.github.com/users/marat-salmanov/events{/privacy}", "received_events_url": "https://api.github.com/users/marat-salmanov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4101742092, "node_id": "LA_kwDOB0-w-870e54M", "url": "https://api.github.com/repos/pyodide/pyodide/labels/wont-fix", "name": "wont-fix", "color": "FBCA04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-05T14:35:18Z", "updated_at": "2022-05-05T15:57:55Z", "closed_at": "2022-05-05T15:57:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "**The whole project is useless without javascript enabled.**\r\n\r\nPyodide terminal emulator (https://pyodide.org/en/stable/console.html) **isn't working with javascript disabled**\r\n\r\nSteps to reproduce: \r\n\r\n1. Open any Chromium-based browser dev tools\r\n2. Press Control+Shift+P to open the Command Menu.\r\n3. Start typing javascript, select Disable JavaScript, and then press Enter to run the command.\r\n4. Refresh the page\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2505", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2505/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2505/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2505/events", "html_url": "https://github.com/pyodide/pyodide/issues/2505", "id": 1226692057, "node_id": "I_kwDOB0-w-85JHdXZ", "number": 2505, "title": "Online console output is wrong when using `input()`", "user": {"login": "dragoncoder047", "id": 101021094, "node_id": "U_kgDOBgV1pg", "avatar_url": "https://avatars.githubusercontent.com/u/101021094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dragoncoder047", "html_url": "https://github.com/dragoncoder047", "followers_url": "https://api.github.com/users/dragoncoder047/followers", "following_url": "https://api.github.com/users/dragoncoder047/following{/other_user}", "gists_url": "https://api.github.com/users/dragoncoder047/gists{/gist_id}", "starred_url": "https://api.github.com/users/dragoncoder047/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dragoncoder047/subscriptions", "organizations_url": "https://api.github.com/users/dragoncoder047/orgs", "repos_url": "https://api.github.com/users/dragoncoder047/repos", "events_url": "https://api.github.com/users/dragoncoder047/events{/privacy}", "received_events_url": "https://api.github.com/users/dragoncoder047/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-05T13:41:28Z", "updated_at": "2022-05-07T14:31:26Z", "closed_at": "2022-05-07T14:31:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug with online console\r\n\r\nStdout when using `input()` in online console is wrong.\r\n\r\n### To Reproduce\r\n\r\nGo to https://pyodide.org/en/stable/console.html and enter `input('foo bar: ')`. After entering `barbaz` in the prompt box:\r\n\r\n```pycon\r\n>>> input('foo bar: ')\r\nfoo bar: 'barbaz'\r\n>>>\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo prompt box, and:\r\n\r\n```pycon\r\n>>> input('foo bar: ')\r\nfoo bar: barbaz\r\n'barbaz'\r\n>>>\r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version: `Python 3.10.2 (main, Apr  9 2022 20:52:01)`. Latest release was `0.20.1a1`.\r\n- Browser version: Chrome 96.0.4664.111 64 bit (on chromebook) *I don't think this is relevant, though.*\r\n\r\nThis issue may be related to #1898 at least with the prompt box. However, the stdin callback (in `loadPyodide`) could be fixed to echo the input back to the terminal.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2505/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2503", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2503/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2503/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2503/events", "html_url": "https://github.com/pyodide/pyodide/issues/2503", "id": 1226658465, "node_id": "I_kwDOB0-w-85JHVKh", "number": 2503, "title": "pyodide_build buildpkg does not install Cython as a build dependency when it is spell with a lower case c", "user": {"login": "ocefpaf", "id": 950575, "node_id": "MDQ6VXNlcjk1MDU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/950575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ocefpaf", "html_url": "https://github.com/ocefpaf", "followers_url": "https://api.github.com/users/ocefpaf/followers", "following_url": "https://api.github.com/users/ocefpaf/following{/other_user}", "gists_url": "https://api.github.com/users/ocefpaf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ocefpaf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ocefpaf/subscriptions", "organizations_url": "https://api.github.com/users/ocefpaf/orgs", "repos_url": "https://api.github.com/users/ocefpaf/repos", "events_url": "https://api.github.com/users/ocefpaf/events{/privacy}", "received_events_url": "https://api.github.com/users/ocefpaf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-05-05T13:14:24Z", "updated_at": "2022-05-05T16:46:06Z", "closed_at": "2022-05-05T16:46:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen trying to build [cftime](https://github.com/Unidata/cftime) the isolated env does not install cython.\r\n\r\n### To Reproduce\r\n\r\n`python -m pyodide_build buildpkg packages/cftime/meta.yaml` on [this meta.yaml](https://gist.github.com/ocefpaf/8b9a90bfa40d7dc27c63e3bf22ef335a)\r\n\r\n### Expected behavior\r\n\r\nSuccessful build :smile: \r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->:\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:\r\n- Any other relevant information:\r\n\r\n\r\n### Additional context\r\n\r\nA patch to rename `cython` to `Cython` in the cftime pyproject.toml fixed it but we should not be case sensitive with PyPI names.\r\n\r\nxref.: https://github.com/pyodide/pyodide/pull/2504", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2498", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2498/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2498/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2498/events", "html_url": "https://github.com/pyodide/pyodide/issues/2498", "id": 1226122535, "node_id": "I_kwDOB0-w-85JFSUn", "number": 2498, "title": "Borrowed Proxy was automatically destroyed", "user": {"login": "Killklli", "id": 11064610, "node_id": "MDQ6VXNlcjExMDY0NjEw", "avatar_url": "https://avatars.githubusercontent.com/u/11064610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Killklli", "html_url": "https://github.com/Killklli", "followers_url": "https://api.github.com/users/Killklli/followers", "following_url": "https://api.github.com/users/Killklli/following{/other_user}", "gists_url": "https://api.github.com/users/Killklli/gists{/gist_id}", "starred_url": "https://api.github.com/users/Killklli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Killklli/subscriptions", "organizations_url": "https://api.github.com/users/Killklli/orgs", "repos_url": "https://api.github.com/users/Killklli/repos", "events_url": "https://api.github.com/users/Killklli/events{/privacy}", "received_events_url": "https://api.github.com/users/Killklli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-05T01:44:09Z", "updated_at": "2022-05-05T17:53:35Z", "closed_at": "2022-05-05T17:53:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nUncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function generate_seed at 0x15edb78>\"\r\n\r\n\r\n### To Reproduce\r\n\r\nhttps://github.com/2dos/DK64-Randomizer/blob/dev/ui/bindings.py\r\n\r\n### Expected behavior\r\n\r\nOn 0.18.1 it would automatically bind the function to the button, but all latest versions fail.\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->:\r\n>=0.19.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:\r\nAny\r\n- Any other relevant information:\r\n\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2495", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2495/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2495/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2495/events", "html_url": "https://github.com/pyodide/pyodide/issues/2495", "id": 1226004176, "node_id": "I_kwDOB0-w-85JE1bQ", "number": 2495, "title": "platform.freedesktop_os_release() raises a JsException/PythonError", "user": {"login": "cclauss", "id": 3709715, "node_id": "MDQ6VXNlcjM3MDk3MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/3709715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cclauss", "html_url": "https://github.com/cclauss", "followers_url": "https://api.github.com/users/cclauss/followers", "following_url": "https://api.github.com/users/cclauss/following{/other_user}", "gists_url": "https://api.github.com/users/cclauss/gists{/gist_id}", "starred_url": "https://api.github.com/users/cclauss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cclauss/subscriptions", "organizations_url": "https://api.github.com/users/cclauss/orgs", "repos_url": "https://api.github.com/users/cclauss/repos", "events_url": "https://api.github.com/users/cclauss/events{/privacy}", "received_events_url": "https://api.github.com/users/cclauss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-04T21:50:29Z", "updated_at": "2022-05-04T22:01:30Z", "closed_at": "2022-05-04T22:01:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n`platform.freedesktop_os_release()` raises a JsException/PythonError\r\n\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n\r\n```python\r\nimport platform\r\nplatform.freedesktop_os_release()\r\n```\r\n### --> \r\n```\r\nJsException(PythonError:\r\n    Traceback (most recent call last):\r\n        File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 429, in eval_code .run(globals, locals)\r\n        File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 300, in run coroutine = eval(self.code, globals, locals)\r\n        File \"\", line 22, in File \"/lib/python3.10/platform.py\", line 1297, in freedesktop_os_release\r\n            raise OSError( FileNotFoundError: [Errno 44] Unable to read files /etc/os-release, /usr/lib/os-release )\r\n```\r\n\r\n### Expected behavior\r\n\r\nA version number string is returned.\r\n\r\n<!-- FILL IN -->\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: `main` branch\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: FireFox\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include this information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2487", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2487/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2487/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2487/events", "html_url": "https://github.com/pyodide/pyodide/issues/2487", "id": 1225549937, "node_id": "I_kwDOB0-w-85JDGhx", "number": 2487, "title": "micropip didn't resolve package versions correctly", "user": {"login": "oeway", "id": 478667, "node_id": "MDQ6VXNlcjQ3ODY2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/478667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oeway", "html_url": "https://github.com/oeway", "followers_url": "https://api.github.com/users/oeway/followers", "following_url": "https://api.github.com/users/oeway/following{/other_user}", "gists_url": "https://api.github.com/users/oeway/gists{/gist_id}", "starred_url": "https://api.github.com/users/oeway/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oeway/subscriptions", "organizations_url": "https://api.github.com/users/oeway/orgs", "repos_url": "https://api.github.com/users/oeway/repos", "events_url": "https://api.github.com/users/oeway/events{/privacy}", "received_events_url": "https://api.github.com/users/oeway/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-04T15:35:59Z", "updated_at": "2022-05-10T15:19:40Z", "closed_at": "2022-05-10T15:19:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nHi, I am using micropip to installs two pure python packages, but got the error message complaining:\r\n```\r\nValueError: Requested 'imjoy-rpc>=0.5.7', but imjoy-rpc==0.5.10a2 is already installed\r\n```\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n```\r\nWelcome to the Pyodide terminal emulator \ud83d\udc0d\r\nPython 3.10.2 (main, May  4 2022 10:50:05) on WebAssembly VM\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import micropip\r\n>>> await micropip.install(\"imjoy-rpc==0.5.10a2\")\r\n>>> await micropip.install(\"imjoy-rpc>=0.5.7\")\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 234, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 192, in install\r\n    transaction = await self.gather_requirements(\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 174, in gather_requirements\r\n    await gather(*requirement_promises)\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 302, in add_requirement\r\n    raise ValueError(\r\nValueError: Requested 'imjoy-rpc>=0.5.7', but imjoy-rpc==0.5.10a2 is already installed\r\n```\r\n\r\n### Expected behavior\r\n\r\nWhen I run the second install command, it should know that the version is already satisfied and do nothing instead of generating an error.\r\n\r\n### Environment\r\n\r\nLatest version at https://pyodide-cdn2.iodide.io/dev/full/console.html\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2485", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2485/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2485/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2485/events", "html_url": "https://github.com/pyodide/pyodide/issues/2485", "id": 1225501920, "node_id": "I_kwDOB0-w-85JC6zg", "number": 2485, "title": "SyntaxError: unmatched ']' in numpy.random.rand", "user": {"login": "Ruibin-Liu", "id": 7396003, "node_id": "MDQ6VXNlcjczOTYwMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7396003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruibin-Liu", "html_url": "https://github.com/Ruibin-Liu", "followers_url": "https://api.github.com/users/Ruibin-Liu/followers", "following_url": "https://api.github.com/users/Ruibin-Liu/following{/other_user}", "gists_url": "https://api.github.com/users/Ruibin-Liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruibin-Liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruibin-Liu/subscriptions", "organizations_url": "https://api.github.com/users/Ruibin-Liu/orgs", "repos_url": "https://api.github.com/users/Ruibin-Liu/repos", "events_url": "https://api.github.com/users/Ruibin-Liu/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruibin-Liu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-04T14:56:04Z", "updated_at": "2022-05-08T09:50:18Z", "closed_at": "2022-05-08T09:50:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n### To Reproduce\r\nTry to use the function in the REPL [console](https://pyodide.org/en/stable/console.html).\r\n```\r\nimport numpy as np\r\nnp.random.rand(3, 2)\r\n```\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n\r\n### Expected behavior\r\nReturn a numpy array to the console.\r\n<!-- FILL IN -->\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: stable\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Chromium 99.0.4844.84 \r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2485/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2485/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2482", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2482/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2482/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2482/events", "html_url": "https://github.com/pyodide/pyodide/issues/2482", "id": 1225065907, "node_id": "I_kwDOB0-w-85JBQWz", "number": 2482, "title": "Power operator incorrect result", "user": {"login": "adelattia", "id": 843065, "node_id": "MDQ6VXNlcjg0MzA2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/843065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adelattia", "html_url": "https://github.com/adelattia", "followers_url": "https://api.github.com/users/adelattia/followers", "following_url": "https://api.github.com/users/adelattia/following{/other_user}", "gists_url": "https://api.github.com/users/adelattia/gists{/gist_id}", "starred_url": "https://api.github.com/users/adelattia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adelattia/subscriptions", "organizations_url": "https://api.github.com/users/adelattia/orgs", "repos_url": "https://api.github.com/users/adelattia/repos", "events_url": "https://api.github.com/users/adelattia/events{/privacy}", "received_events_url": "https://api.github.com/users/adelattia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-05-04T08:29:55Z", "updated_at": "2022-05-05T18:14:21Z", "closed_at": "2022-05-05T18:14:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI have an incorrect result when using the power operator ** with some values\r\n\r\n### To Reproduce\r\n\r\n```print(5 ** 55)```\r\nresult : -62726610764649328357466690409063133331\r\n\r\n### Expected behavior\r\n\r\n```print(5 ** 55)```\r\nresult : 277555756156289135105907917022705078125\r\n\r\n### Environment\r\n\r\n- Pyodide Version: Current demo in browser version (showing python 3.10.2)\r\n- Browser version: Chrome 101.0.4951.41 (Official Build) (arm64)\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2453", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2453/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2453/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2453/events", "html_url": "https://github.com/pyodide/pyodide/issues/2453", "id": 1223269539, "node_id": "I_kwDOB0-w-85I6Zyj", "number": 2453, "title": "Adding a python function with global and nonlocal variables as an event handler fails", "user": {"login": "costrouc", "id": 1740337, "node_id": "MDQ6VXNlcjE3NDAzMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1740337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/costrouc", "html_url": "https://github.com/costrouc", "followers_url": "https://api.github.com/users/costrouc/followers", "following_url": "https://api.github.com/users/costrouc/following{/other_user}", "gists_url": "https://api.github.com/users/costrouc/gists{/gist_id}", "starred_url": "https://api.github.com/users/costrouc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/costrouc/subscriptions", "organizations_url": "https://api.github.com/users/costrouc/orgs", "repos_url": "https://api.github.com/users/costrouc/repos", "events_url": "https://api.github.com/users/costrouc/events{/privacy}", "received_events_url": "https://api.github.com/users/costrouc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-02T19:37:57Z", "updated_at": "2022-05-02T20:49:11Z", "closed_at": "2022-05-02T20:49:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nUsing nonlocal variables within a function binding cause pyproxy error. This following is the simplest example I could come up with.\r\n\r\n### To Reproduce\r\n\r\n```python\r\nimport js\r\n\r\n\r\nclass Foo:\r\n    def __init__(self):\r\n        self.data = []\r\n\r\n        button = js.document.createElement('button');\r\n        button.innerHTML = \"Click Me!\"\r\n        body = js.document.querySelector('body')\r\n        body.appendChild(button)\r\n\r\n        def handleClick(event):\r\n            nonlocal self\r\n            self.data.append((event.clientX, event.clientY))\r\n\r\n        button.addEventListener('click', handleClick)\r\n\r\n\r\nimport asyncio\r\nfoo = Foo()\r\nawait asyncio.sleep(10)\r\n# click the button several times\r\nprint(foo.data)\r\n```\r\n\r\nWhen you click the button and the event handled is triggered you get the following message\r\n\r\n```\r\nUncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function Foo.__init__.<locals>.handleClick at 0xd69478>\"\r\n```\r\n\r\nThe following also fails\r\n\r\n```python\r\nimport js\r\n\r\ndata = []\r\n\r\n\r\nclass Foo:\r\n    def __init__(self):\r\n        button = js.document.createElement('button');\r\n        button.innerHTML = \"Click Me!\"\r\n        body = js.document.querySelector('body')\r\n        body.appendChild(button)\r\n\r\n        def handleClick(event):\r\n            global data\r\n            data.append((event.clientX, event.clientY))\r\n\r\n        button.addEventListener('click', handleClick)\r\n```\r\n\r\nWhich looks like `globals` do not work either and the problem is with the function itself.\r\n\r\n```\r\nUncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function Foo.__init__.<locals>.handleClick at 0xe2cf28>\"\r\n```\r\n\r\nThe following also fails when it is a global function and global variable.\r\n\r\n```python\r\nimport js\r\n\r\ndata = []\r\n\r\n\r\ndef handleClick(event):\r\n    global data\r\n    data.append((event.clientX, event.clientY))\r\n\r\n\r\nclass Foo:\r\n    def __init__(self):\r\n        button = js.document.createElement('button');\r\n        button.innerHTML = \"Click Me!\"\r\n        body = js.document.querySelector('body')\r\n        body.appendChild(button)\r\n\r\n        button.addEventListener('click', handleClick)\r\n```\r\n\r\n```\r\nUncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function handleClick at 0xfa68b0>\"\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe code should run and the `print(foo.data)` should return all the button clicks.\r\n\r\n### Environment\r\n\r\n- Pyodide Version v0.20.0:\r\n- Browser version Firefox 98.0.2 linux:\r\n- Any other relevant information:\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2448", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2448/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2448/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2448/events", "html_url": "https://github.com/pyodide/pyodide/issues/2448", "id": 1223024175, "node_id": "I_kwDOB0-w-85I5d4v", "number": 2448, "title": "`static_assert failed` error during build", "user": {"login": "wlach", "id": 20569, "node_id": "MDQ6VXNlcjIwNTY5", "avatar_url": "https://avatars.githubusercontent.com/u/20569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wlach", "html_url": "https://github.com/wlach", "followers_url": "https://api.github.com/users/wlach/followers", "following_url": "https://api.github.com/users/wlach/following{/other_user}", "gists_url": "https://api.github.com/users/wlach/gists{/gist_id}", "starred_url": "https://api.github.com/users/wlach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wlach/subscriptions", "organizations_url": "https://api.github.com/users/wlach/orgs", "repos_url": "https://api.github.com/users/wlach/repos", "events_url": "https://api.github.com/users/wlach/events{/privacy}", "received_events_url": "https://api.github.com/users/wlach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-02T15:26:29Z", "updated_at": "2022-05-31T14:02:59Z", "closed_at": "2022-05-02T16:43:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nRun `make` in either docker or stock Ubuntu 22.04, get this error:\r\n\r\n```\r\nlibtool: compile:  /src/emsdk/emsdk/upstream/emscripten/emcc -DHAVE_CONFIG_H -I. -I. -I./include -Iinclude -I./src -O3 -fPIC -Wall -fexceptions -c src/wasm32/ffi.c -o src/wasm32/ffi.o\r\nsrc/wasm32/ffi.c:112:1: error: static_assert failed due to requirement '8 == __alignof(max_align_t)' \"max_align_t must be 8\"\r\n_Static_assert(MAX_ALIGN == __alignof__(max_align_t), \"max_align_t must be 8\");\r\n^              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n1 error generated.\r\n```\r\n\r\nFile appears to be `./cpython/build/libffi/src/wasm32/ffi.c`\r\n\r\n### Environment\r\n\r\n- Pyodide Version: `80a650cc33790278601a52253858cfa40c647232`\r\n\r\n### Additional context\r\n\r\nIt looks like this assert was added in response to this issue https://github.com/emscripten-core/emscripten/issues/10072 -- seems like it might be an LLVM issue? Unclear why we're seeing it.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2446", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2446/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2446/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2446/events", "html_url": "https://github.com/pyodide/pyodide/issues/2446", "id": 1222926947, "node_id": "I_kwDOB0-w-85I5GJj", "number": 2446, "title": "Enable precommit-ci?", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-02T14:01:16Z", "updated_at": "2022-05-03T04:03:58Z", "closed_at": "2022-05-02T14:16:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@henryiii was recommending that we enable precommit-ci. This would save us from hassling people to run precommit for formatting, like in #2445. I am in favor of it. @rth @ryanking13 what do you think?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2422", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2422/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2422/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2422/events", "html_url": "https://github.com/pyodide/pyodide/issues/2422", "id": 1218812783, "node_id": "I_kwDOB0-w-85IpZtv", "number": 2422, "title": "dependency-check.sh doesn't check for cmake", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-28T14:24:32Z", "updated_at": "2022-05-01T14:08:01Z", "closed_at": "2022-05-01T14:08:01Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\ncmake is a requirement to build emsdk.  We could help new contributors by checking for this in dependency-check.sh\r\n\r\n### To Reproduce\r\n\r\nBuild a clean checkout of pyodide on a (for example) Debian with only build-essentials installed.\r\n\r\n### Expected behavior\r\n\r\nAn error about missing cmake with instructions to install it.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2422/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2408", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2408/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2408/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2408/events", "html_url": "https://github.com/pyodide/pyodide/issues/2408", "id": 1209099615, "node_id": "I_kwDOB0-w-85IEWVf", "number": 2408, "title": "micropip does not resolve locally available versions ", "user": {"login": "freakboy3742", "id": 37345, "node_id": "MDQ6VXNlcjM3MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/37345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freakboy3742", "html_url": "https://github.com/freakboy3742", "followers_url": "https://api.github.com/users/freakboy3742/followers", "following_url": "https://api.github.com/users/freakboy3742/following{/other_user}", "gists_url": "https://api.github.com/users/freakboy3742/gists{/gist_id}", "starred_url": "https://api.github.com/users/freakboy3742/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freakboy3742/subscriptions", "organizations_url": "https://api.github.com/users/freakboy3742/orgs", "repos_url": "https://api.github.com/users/freakboy3742/repos", "events_url": "https://api.github.com/users/freakboy3742/events{/privacy}", "received_events_url": "https://api.github.com/users/freakboy3742/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3113551864, "node_id": "MDU6TGFiZWwzMTEzNTUxODY0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/micropip", "name": "micropip", "color": "4273EF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-04-20T02:59:26Z", "updated_at": "2022-05-02T13:48:50Z", "closed_at": "2022-05-01T19:24:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have three wheels:\r\n\r\n* travertino is v0.1.3\r\n* toga-core is v0.3.0.dev33, and declares travertino>=0.1.3 as a requirement\r\n* toga-web is v0.3.0.dev33, and declares toga-core==0.3.0.dev33 as a requirement\r\n\r\nAll three exist as `.whl` files in my static files folder. Travertino 0.1.3 has been published to PyPI; toga-core and toga-web dev32 have been published to PyPI, but dev33 are local development builds. \r\n\r\nOn my Pyodide page, I run:\r\n```\r\nimport micropip\r\nmicropip.install([\r\n    './static/travertino-0.1.3-py3-none-any.whl',\r\n    './static/toga_core-0.3.0.dev33-py3-none-any.whl',\r\n    './static/toga_web-0.3.0.dev33-py3-none-any.whl',\r\n])\r\n```\r\nThis raises the following exception:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 234, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 183, in install\r\n    transaction = await self.gather_requirements(requirements, ctx, keep_going)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 173, in gather_requirements\r\n    await gather(*requirement_promises)\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 304, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 245, in add_requirement\r\n    await self.add_wheel(name, wheel, version, (), ctx, transaction)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 316, in add_wheel\r\n    await self.add_requirement(recurs_req, ctx, transaction)\r\n  File \"/lib/python3.10/site-packages/micropip/_micropip.py\", line 286, in add_requirement\r\n    raise ValueError(\r\nValueError: Couldn't find a pure Python 3 wheel for 'toga-core==0.3.0.dev33'. You can use `micropip.install(..., keep_going=True)` to get a list of all packages with missing wheels.\r\n```\r\n\r\nIf I relax the `install_requires` on toga-web to remove the declared dependency on toga-core, the import succeeds, and the code runs successfully.\r\n\r\nI've tried splitting the install into two passes:\r\n```\r\nawait micropip.install([\r\n    './static/travertino-0.1.3-py3-none-any.whl',\r\n    './static/toga_core-0.3.0.dev33-py3-none-any.whl',\r\n])\r\nawait micropip.install([\r\n    './static/toga_web-0.3.0.dev33-py3-none-any.whl',\r\n])\r\n```\r\nthinking that if toga-core's installation was completed, toga-web would be able to find it; that makes no difference. \r\n\r\nI've also tried producing the packages without the .dev33 version suffix, thinking that it might be \"prerelease\" versions that are the issue, but that made no difference either.\r\n\r\nHowever, if I revert the version number on toga-core and toga-web to 0.3.0.dev32 (the last versions published to PyPI), the import *succeeds* - but the old version (published to PyPI) version of the toga-core code is used. \r\n\r\nLooking at the network requests that the page has made indicates that the wheels were all loaded - and then micropip requested the toga-core PyPI metadata, and toga_core-0.3.0.dev32 (the most recent published version) was downloaded from PyPI. Interestingly, *no* request was made to load Travertino 0.1.3 from PyPI as a result of the dependency declared in toga-core.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2408/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2400", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2400/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2400/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2400/events", "html_url": "https://github.com/pyodide/pyodide/issues/2400", "id": 1206491665, "node_id": "I_kwDOB0-w-85H6ZoR", "number": 2400, "title": "Interrupt checking has become less reliable in 0.20.0", "user": {"login": "alexmojaki", "id": 3627481, "node_id": "MDQ6VXNlcjM2Mjc0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/3627481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexmojaki", "html_url": "https://github.com/alexmojaki", "followers_url": "https://api.github.com/users/alexmojaki/followers", "following_url": "https://api.github.com/users/alexmojaki/following{/other_user}", "gists_url": "https://api.github.com/users/alexmojaki/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexmojaki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexmojaki/subscriptions", "organizations_url": "https://api.github.com/users/alexmojaki/orgs", "repos_url": "https://api.github.com/users/alexmojaki/repos", "events_url": "https://api.github.com/users/alexmojaki/events{/privacy}", "received_events_url": "https://api.github.com/users/alexmojaki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-04-17T21:36:21Z", "updated_at": "2022-04-19T12:40:58Z", "closed_at": "2022-04-19T12:40:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n`setInterruptBuffer` *generally* works but some kinds of Python code no longer get interrupted in 0.20.0.\r\n\r\n### To Reproduce\r\n\r\nIn 0.19.1, this Python code could be interrupted and a KeyboardInterrupt would be raised:\r\n\r\n```python\r\nwhile True:\r\n    pass\r\n```\r\n\r\nIn 0.20.0, that code no longer gets interrupted and just runs forever. This code *does* get interrupted:\r\n\r\n```python\r\nwhile True:\r\n    str(3)\r\n```\r\n\r\nAn example of more 'realistic' code that doesn't get interrupted:\r\n\r\n```python\r\nfor i in range(100000000):\r\n    i *= 2\r\n    i += 9 + int(i < 3)\r\n    str()\r\n```\r\n\r\nHere is where I'm actually testing this:\r\n\r\nhttps://github.com/alexmojaki/pyodide-worker-runner/blob/5d7a7ba4652e23fb1f0483876793c3756cd688ef/test/index.ts#L197-L213\r\n\r\nUpgrading that package to use 0.20.0 broke that test, replacing `pass` with `str(3)` as above fixed it (https://github.com/alexmojaki/pyodide-worker-runner/pull/9/commits/aee33fbead9c9afd22c3facc7c37226cb4138cc2)\r\n\r\n### Expected behavior\r\n\r\nAny pure-python synchronous code should eventually be interrupted, even something contrived like `while True: pass`, because sometimes people intentionally try stupid things to test what will happen, and sometimes people make dumb mistakes.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.20.0\r\n- Browser version: 6 combinations of Chrome, Firefox, and Edge on Windows, OSX, and Ubuntu between myself and Browserstack.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2400/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2399", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2399/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2399/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2399/events", "html_url": "https://github.com/pyodide/pyodide/issues/2399", "id": 1206448478, "node_id": "I_kwDOB0-w-85H6PFe", "number": 2399, "title": " REPL give wrong output when it contains double bracket `[[ ]]`", "user": {"login": "chaoqing", "id": 2959260, "node_id": "MDQ6VXNlcjI5NTkyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2959260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chaoqing", "html_url": "https://github.com/chaoqing", "followers_url": "https://api.github.com/users/chaoqing/followers", "following_url": "https://api.github.com/users/chaoqing/following{/other_user}", "gists_url": "https://api.github.com/users/chaoqing/gists{/gist_id}", "starred_url": "https://api.github.com/users/chaoqing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chaoqing/subscriptions", "organizations_url": "https://api.github.com/users/chaoqing/orgs", "repos_url": "https://api.github.com/users/chaoqing/repos", "events_url": "https://api.github.com/users/chaoqing/events{/privacy}", "received_events_url": "https://api.github.com/users/chaoqing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-17T18:17:18Z", "updated_at": "2022-05-08T09:50:18Z", "closed_at": "2022-05-08T09:50:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI think because of this [feature](https://github.com/jcubic/jquery.terminal/issues/508#issue-463182053). The Pyodide [REPL](https://pyodide.org/en/stable/console.html) can not work correctly with input and output contains raw bracket string `[[ ]]`.\r\n\r\nI solved the output part by replacing `]]` with `]&#93;` in the output of [repr_shorten](https://github.com/pyodide/pyodide/blob/93dc922f46e38f98bd30c3850c7bd094b1933163/src/py/pyodide/console.py#L477) but not sure how to handle the input case. Maybe we need upstream `jquery.terminal` to provide an option to turn off the feature.\r\n\r\n### To Reproduce\r\n\r\nTry input command `print('[[x]]')` or `print('[[1]]')`.\r\n\r\n### Expected behavior\r\n\r\nThe output should be `[[x]]` but an `NameError: name 'x' is not defined` triggered.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: Any\r\n- Browser version: Any\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2398", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2398/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2398/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2398/events", "html_url": "https://github.com/pyodide/pyodide/issues/2398", "id": 1205767549, "node_id": "I_kwDOB0-w-85H3o19", "number": 2398, "title": "create_once_callable leak/throw if never called", "user": {"login": "tsteinruecken", "id": 617502, "node_id": "MDQ6VXNlcjYxNzUwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/617502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsteinruecken", "html_url": "https://github.com/tsteinruecken", "followers_url": "https://api.github.com/users/tsteinruecken/followers", "following_url": "https://api.github.com/users/tsteinruecken/following{/other_user}", "gists_url": "https://api.github.com/users/tsteinruecken/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsteinruecken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsteinruecken/subscriptions", "organizations_url": "https://api.github.com/users/tsteinruecken/orgs", "repos_url": "https://api.github.com/users/tsteinruecken/repos", "events_url": "https://api.github.com/users/tsteinruecken/events{/privacy}", "received_events_url": "https://api.github.com/users/tsteinruecken/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-15T18:03:18Z", "updated_at": "2022-05-12T04:09:46Z", "closed_at": "2022-05-12T04:09:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThere seems to be an issue with create_once_callable if the callback is never called.\r\nIf the object is released from the javascript side, an exception (Uncaught TypeError: Cannot set properties of undefined (setting 'leaked') (Chrome/Edge) or Uncaught TypeError: cache is undefined (Firefox)) occurs.\r\nTo reproduce, run this code, then force a garbage collection from devtools.\r\n\r\nAs far as i can tell, either\r\n\r\n- create_once_callable must not be added to the FinalizationRegistry, or\r\n- They must not be added with void 0 (undefined) as heldValue, or\r\n- The cleanup function must not assume that heldValue is always an object with a leaked property\r\n\r\n### To Reproduce\r\n\r\nimport js, pyodide\r\n\r\ndef test(): print(\"timeout\")\r\n\r\ntimeoutID = js.window.setTimeout(pyodide.create_once_callable(test), 1000)\r\njs.window.clearTimeout(timeoutID)\r\n\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version: v0.20.0\r\n- Browser version: Any\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2393", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2393/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2393/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2393/events", "html_url": "https://github.com/pyodide/pyodide/issues/2393", "id": 1200664213, "node_id": "I_kwDOB0-w-85HkK6V", "number": 2393, "title": "npm package should not include .ts files", "user": {"login": "mneil", "id": 1605808, "node_id": "MDQ6VXNlcjE2MDU4MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1605808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mneil", "html_url": "https://github.com/mneil", "followers_url": "https://api.github.com/users/mneil/followers", "following_url": "https://api.github.com/users/mneil/following{/other_user}", "gists_url": "https://api.github.com/users/mneil/gists{/gist_id}", "starred_url": "https://api.github.com/users/mneil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mneil/subscriptions", "organizations_url": "https://api.github.com/users/mneil/orgs", "repos_url": "https://api.github.com/users/mneil/repos", "events_url": "https://api.github.com/users/mneil/events{/privacy}", "received_events_url": "https://api.github.com/users/mneil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2022-04-11T23:18:21Z", "updated_at": "2022-08-28T20:16:21Z", "closed_at": "2022-08-28T20:16:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI just did an `npm i pyodide` wanting to use this as [part of a projec](https://github.com/3p3r/cdk-web) for packaging AWS Lambda packages to support the Python Lambda Functions. I've been testing out pyodide and brython to see which one makes more sense. I am really liking pyodide. Up to now I've been including the file from a cdn and it's gone fine. However, the package on npm includes all of the typescript files.\r\n\r\nAn npm package should include type definitions (.d.ts) files for typescript and javascript users for type definitions. The rest of the code, however, should all be javascript. When you publish .ts files I have to now configure whatever build system I'm using (webpack) to support typescript and to explicitly hand transpiling the code. This is not the common way to distribute a package on npm.\r\n\r\nIn addition there is no main file defined in package.json. I am unsure what the main file is that I should include in order to get the full source. \r\n \r\n\r\n### To Reproduce\r\n\r\n`npm i pyodide`\r\n\r\n### Expected behavior\r\n\r\nWhen I installed this I expected:\r\n\r\n - Javascript file or files\r\n - A single file defined as the main so that my requires or imports know what file to use when I request pyodide\r\n - The asm.js file for executing the pyodide application compiled with emscripten\r\n - The compiled python wasm that will be executed\r\n \r\n I believe all of these files should be included. This will make integration into other packages much easier.\r\n\r\n### Environment\r\n\r\n- Pyodide Version 0.20.0\r\n\r\n### Additional context\r\n\r\nI am happy to work on this if you agree. Hopefully I didn't misinterpret the point of the package on npm.\r\n\r\nI have recently been using esbuild which is written in go and distributes a wasm for bundling. That code is successfully on the develop branch of cdk-web https://github.com/3p3r/cdk-web/tree/develop. I am comparing my experience dealing with the package distributed on npm for esbuild-wasm  vs. my experience with pyodide.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2393/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2379", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2379/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2379/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2379/events", "html_url": "https://github.com/pyodide/pyodide/issues/2379", "id": 1198366067, "node_id": "I_kwDOB0-w-85HbZ1z", "number": 2379, "title": "Fix version comparison in pyodide_build/mkpkg.py", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-09T07:05:34Z", "updated_at": "2022-12-18T10:14:25Z", "closed_at": "2022-12-18T10:14:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As discussed in https://github.com/pyodide/pyodide/pull/2375#issuecomment-1093319524:\r\n\r\nFor package upgrades, `pyodide_build/mkpkg.py` needs to compare `packaging.version.Version` not strings\r\n\r\nhttps://github.com/pyodide/pyodide/blob/fe893b3165182016164255360fbc60e81aa56acf/pyodide-build/pyodide_build/mkpkg.py#L220\r\n\r\ncc @henryiii", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2359", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2359/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2359/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2359/events", "html_url": "https://github.com/pyodide/pyodide/issues/2359", "id": 1195495971, "node_id": "I_kwDOB0-w-85HQdIj", "number": 2359, "title": "GHA build is failing due to conda f2c update", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2928775169, "node_id": "MDU6TGFiZWwyOTI4Nzc1MTY5", "url": "https://api.github.com/repos/pyodide/pyodide/labels/CI", "name": "CI", "color": "D4C5F9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-07T04:13:49Z", "updated_at": "2022-04-07T11:41:50Z", "closed_at": "2022-04-07T11:41:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See: https://github.com/conda-forge/f2c-feedstock/commit/1b54b477c05d4ee94df741820ca5ca909162900b", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2359/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2344", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2344/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2344/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2344/events", "html_url": "https://github.com/pyodide/pyodide/issues/2344", "id": 1190587987, "node_id": "I_kwDOB0-w-85G9u5T", "number": 2344, "title": "Astropy build fails with _np_utils.c: No such file or directory", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/9", "html_url": "https://github.com/pyodide/pyodide/milestone/9", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/9/labels", "id": 7474650, "node_id": "MI_kwDOB0-w-84Acg3a", "number": 9, "title": "0.20.0", "description": null, "creator": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2021-12-10T02:13:16Z", "updated_at": "2022-07-17T09:05:19Z", "due_on": null, "closed_at": "2022-07-17T09:05:19Z"}, "comments": 1, "created_at": "2022-04-02T10:15:27Z", "updated_at": "2022-07-14T07:20:42Z", "closed_at": "2022-07-14T07:20:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I get a failure when building astropy, initially in https://github.com/pyodide/pyodide/pull/2132 but I can also reproduce this locally on main. The error is,\r\n```\r\ne/python3.10 -c astropy/table/_np_utils.c -o build/temp.emscripten_wasm32-3.10/astropy/table/_np_utils.o\r\nemcc: error: astropy/table/_np_utils.c: No such file or directory (\"astropy/table/_np_utils.c\" was expected to be an input file, based on the commandline arguments provided)\r\nerror: command '/src/tools/symlinks/cc' failed with exit code 1\r\n```\r\n(see full log [here](https://app.circleci.com/pipelines/github/rth/pyodide/372/workflows/cf965e9b-68a8-44a1-8ccc-705112c5386f/jobs/3243)\r\n\r\nIt looks like _np_utils.c is not there, because cython was not run on _np_utils.pyx. This is normally handled by the [`extension_helpers`](https://github.com/astropy/astropy/blob/main/setup.py#L68) package, which had no recent releases. ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2338", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2338/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2338/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2338/events", "html_url": "https://github.com/pyodide/pyodide/issues/2338", "id": 1189748907, "node_id": "I_kwDOB0-w-85G6iCr", "number": 2338, "title": "0.20.0a1: import scipy fails ", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/9", "html_url": "https://github.com/pyodide/pyodide/milestone/9", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/9/labels", "id": 7474650, "node_id": "MI_kwDOB0-w-84Acg3a", "number": 9, "title": "0.20.0", "description": null, "creator": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2021-12-10T02:13:16Z", "updated_at": "2022-07-17T09:05:19Z", "due_on": null, "closed_at": "2022-07-17T09:05:19Z"}, "comments": 2, "created_at": "2022-04-01T12:48:57Z", "updated_at": "2022-04-09T07:11:10Z", "closed_at": "2022-04-09T07:11:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As reported by @mateuszcshark in 0.20.0a1 importing scipy fails,\r\n\r\n```\r\n>>> import scipy\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.10/site-packages/scipy/__init__.py\", line 164, in <module>\r\n    loadDynamicLibrary('/lib/python3.10/site-packages/scipy/linalg/_flapack.so')\r\nJsException: Error: /lib/python3.10/site-packages/scipy/linalg/_flapack.so: file not found, and synchronous loading of external \r\nfiles is not available\r\n```\r\nI can also confirm with Firefox on main.\r\n\r\nLikely related to latest changes in pre-loading so files cc @hoodmane . Though I don't understand why it worked in tests then.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2338/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2330", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2330/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2330/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2330/events", "html_url": "https://github.com/pyodide/pyodide/issues/2330", "id": 1186203437, "node_id": "I_kwDOB0-w-85GtAct", "number": 2330, "title": "ctypes patch breaks ctypes's in_dll() method", "user": {"login": "tiran", "id": 444071, "node_id": "MDQ6VXNlcjQ0NDA3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/444071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiran", "html_url": "https://github.com/tiran", "followers_url": "https://api.github.com/users/tiran/followers", "following_url": "https://api.github.com/users/tiran/following{/other_user}", "gists_url": "https://api.github.com/users/tiran/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiran/subscriptions", "organizations_url": "https://api.github.com/users/tiran/orgs", "repos_url": "https://api.github.com/users/tiran/repos", "events_url": "https://api.github.com/users/tiran/events{/privacy}", "received_events_url": "https://api.github.com/users/tiran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-30T10:03:32Z", "updated_at": "2022-03-30T22:03:36Z", "closed_at": "2022-03-30T22:03:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI think that the ctypes patch https://github.com/pyodide/pyodide/blob/main/cpython/patches/0006-Don-t-dereference-function-pointer.patch is incorrect and unnecessary. It breaks the ``in_dll`` method of ctypes primitives. The ``CDataType_in_dll()`` function does not return a function pointer. It returns a global variable.\r\n\r\n### To Reproduce\r\n\r\nThe problem can be reproduced easily in the interactive REPL at https://pyodide.org/en/stable/console.html and ``PyAPI_DATA(int) Py_OptimizeFlag;``.\r\n\r\n```\r\nWelcome to the Pyodide terminal emulator \ud83d\udc0d\r\nPython 3.9.5 (default, Feb 22 2022 14:12:02) on WebAssembly VM\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import ctypes, sys\r\n>>> sys.flags.optimize\r\n0\r\n>>> ctypes.c_int.in_dll(ctypes.pythonapi, \"Py_OptimizeFlag\")\r\nc_long(3223484)\r\n```\r\n### Expected behavior\r\n\r\nThe correct output is ``c_long(0)``.\r\n\r\n```\r\nPython 3.10.2 (main, Jan 17 2022, 00:00:00) [GCC 11.2.1 20211203 (Red Hat 11.2.1-7)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import ctypes, sys\r\n>>> sys.flags.optimize\r\n0\r\n>>> ctypes.c_int.in_dll(ctypes.pythonapi, \"Py_OptimizeFlag\")\r\nc_int(0)\r\n```\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: Python 3.9.5 (default, Feb 22 2022 14:12:02) on WebAssembly VM\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Firefox\r\n### Additional context\r\n\r\nI can also reproduce the issue with upstream CPython 3.11 (latest head):\r\n\r\nwithout patch:\r\n\r\n```\r\n$ node --experimental-wasm-threads --experimental-wasm-bulk-memory cpython/builddir/emscripten-node/python.js -c 'import ctypes; print(ctypes.c_int.in_dll(ctypes.pythonapi, \"Py_OptimizeFlag\"))'\r\nc_long(0)\r\n$ node ... python.js -O -c ...\r\nc_long(1)\r\n$ node ... python.js -OO -c ...\r\nc_long(2)\r\n```\r\n\r\nWith the ctypes patch:\r\n\r\n```\r\n$ node --experimental-wasm-threads --experimental-wasm-bulk-memory cpython/builddir/emscripten-node/python.js -c 'import ctypes; print(ctypes.c_int.in_dll(ctypes.pythonapi, \"Py_OptimizeFlag\"))'\r\nc_long(3762604)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2330/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2330/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2321", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2321/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2321/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2321/events", "html_url": "https://github.com/pyodide/pyodide/issues/2321", "id": 1182586827, "node_id": "I_kwDOB0-w-85GfNfL", "number": 2321, "title": "The instructions in the docs on executing code in a custom namespace (no longer?) seem to work", "user": {"login": "wlach", "id": 20569, "node_id": "MDQ6VXNlcjIwNTY5", "avatar_url": "https://avatars.githubusercontent.com/u/20569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wlach", "html_url": "https://github.com/wlach", "followers_url": "https://api.github.com/users/wlach/followers", "following_url": "https://api.github.com/users/wlach/following{/other_user}", "gists_url": "https://api.github.com/users/wlach/gists{/gist_id}", "starred_url": "https://api.github.com/users/wlach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wlach/subscriptions", "organizations_url": "https://api.github.com/users/wlach/orgs", "repos_url": "https://api.github.com/users/wlach/repos", "events_url": "https://api.github.com/users/wlach/events{/privacy}", "received_events_url": "https://api.github.com/users/wlach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-27T16:32:52Z", "updated_at": "2022-03-27T20:23:23Z", "closed_at": "2022-03-27T20:23:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nThe instructions in the docs on executing code in a custom namespace (no longer?) seem to work with pyodide 0.19.1\r\n\r\n### To Reproduce\r\n\r\n```js\r\nlet my_namespace = pyodide.globals.dict();\r\npyodide.runPython(`x = 1 + 1`, my_namespace);\r\npyodide.runPython(`y = x ** x`, my_namespace);\r\nmy_namespace.y; // ==> 4\r\n```\r\n\r\n### Expected behavior\r\n\r\nAs defined in comments\r\n\r\n### Actual\r\n\r\nGet an exception: `Uncaught (in promise) TypeError: pyodide.globals.dict is not a function`", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2315", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2315/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2315/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2315/events", "html_url": "https://github.com/pyodide/pyodide/issues/2315", "id": 1180369074, "node_id": "I_kwDOB0-w-85GWwCy", "number": 2315, "title": "Testing `yt` package is failing in CI", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-25T05:40:47Z", "updated_at": "2022-03-30T00:03:19Z", "closed_at": "2022-03-30T00:03:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nMaybe related to #2307?\r\n\r\n```\r\nconftest.JavascriptException: PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.10/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.10/asyncio/tasks.py\", line 232, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 494, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.10/site-packages/_pyodide/_base.py\", line 345, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 1, in <module>\r\n  File \"/lib/python3.10/site-packages/yt/__init__.py\", line 13, in <module>\r\n    import yt.utilities.physical_constants as physical_constants\r\n  File \"/lib/python3.10/site-packages/yt/utilities/physical_constants.py\", line 3, in <module>\r\n    from yt.units.yt_array import YTQuantity\r\n  File \"/lib/python3.10/site-packages/yt/units/yt_array.py\", line 3, in <module>\r\n    from yt.funcs import array_like_field  # NOQA: F401\r\n  File \"/lib/python3.10/site-packages/yt/funcs.py\", line 33, in <module>\r\n    from yt.utilities.logger import ytLogger as mylog\r\n  File \"/lib/python3.10/site-packages/yt/utilities/logger.py\", line 4, in <module>\r\n    from yt.config import ytcfg\r\n  File \"/lib/python3.10/site-packages/yt/config.py\", line 9, in <module>\r\n    from yt._maintenance.deprecation import issue_deprecation_warning\r\nModuleNotFoundError: No module named 'yt._maintenance'\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2315/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2312", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2312/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2312/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2312/events", "html_url": "https://github.com/pyodide/pyodide/issues/2312", "id": 1180160214, "node_id": "I_kwDOB0-w-85GV9DW", "number": 2312, "title": "Potential FS regression in 0.20.0a1", "user": {"login": "bollwyvl", "id": 45380, "node_id": "MDQ6VXNlcjQ1Mzgw", "avatar_url": "https://avatars.githubusercontent.com/u/45380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bollwyvl", "html_url": "https://github.com/bollwyvl", "followers_url": "https://api.github.com/users/bollwyvl/followers", "following_url": "https://api.github.com/users/bollwyvl/following{/other_user}", "gists_url": "https://api.github.com/users/bollwyvl/gists{/gist_id}", "starred_url": "https://api.github.com/users/bollwyvl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bollwyvl/subscriptions", "organizations_url": "https://api.github.com/users/bollwyvl/orgs", "repos_url": "https://api.github.com/users/bollwyvl/repos", "events_url": "https://api.github.com/users/bollwyvl/events{/privacy}", "received_events_url": "https://api.github.com/users/bollwyvl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-03-24T23:27:52Z", "updated_at": "2022-03-26T00:22:37Z", "closed_at": "2022-03-26T00:22:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nHooray `0.20.0a1`!\r\n\r\nSome FS methods that work with 0.19.x _sometimes_ throw errors in the console:\r\n\r\n---\r\n\r\n```py\r\nimport pyodide_js\r\nFS = pyodide_js.FS\r\nFS.mkdir(\"/tmp/foo\")\r\n```\r\n\r\nCan create:\r\n\r\n```js\r\npyproxy.gen.ts:237 Uncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function <lambda> at 0x31a9448>\"\r\n    at _getPtr (pyproxy.gen.ts:237:11)\r\n    at PyProxyClass.apply (pyproxy.gen.ts:1140:32)\r\n    at Object.apply (pyproxy.gen.ts:1017:18)\r\n    at doCallback (pyodide.asm.js:14:336214)\r\n    at done (pyodide.asm.js:14:336368)\r\n```\r\n---\r\n\r\n```py\r\nFS.mount(FS.filesystems.IDBFS, {}, \"/home/pyodide_user/work\")\r\nFS.syncfs(True, lambda err: print(err))\r\n```\r\n\r\ncan create\r\n\r\n```js\r\npyproxy.gen.ts:237 Uncaught Error: This borrowed proxy was automatically destroyed at the end of a function call. Try using create_proxy or create_once_callable.\r\nThe object was of type \"function\" and had repr \"<function <lambda> at 0x37d7db0>\"\r\n    at _getPtr (pyproxy.gen.ts:237:11)\r\n    at PyProxyClass.apply (pyproxy.gen.ts:1140:32)\r\n    at Object.apply (pyproxy.gen.ts:1017:18)\r\n    at doCallback (pyodide.asm.js:14:336214)\r\n    at done (pyodide.asm.js:14:336368)\r\n    at Object.reconcile (pyodide.asm.js:14:306057)\r\n    at pyodide.asm.js:14:302028\r\n    at IDBRequest.index.openKeyCursor.onsuccess (pyodide.asm.js:14:303840)\r\n```\r\n\r\n\r\n### To Reproduce\r\n\r\n- Try commands from [this notebook](https://github.com/jupyterlite/jupyterlite/blob/main/examples/pyolite/emscripten-filesystem.ipynb)\r\n\r\n### Expected behavior\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version:  0.20.0a1\r\n- Browser version: Chromium 99.0.4844.82 snap, Mozilla Firefox 98.0.1\r\n- Any other relevant information: inside jupyterlite\r\n\r\n### Additional context\r\n\r\n- downstream\r\n  - issue: https://github.com/jupyterlite/jupyterlite/issues/577\r\n  - WIP PR: https://github.com/jupyterlite/jupyterlite/pull/578\r\n  - docs preview: https://jupyterlite--578.org.readthedocs.build/en/578/_static/lab/index.html?path=pyolite/emscripten-filesystem.ipynb", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2282", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2282/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2282/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2282/events", "html_url": "https://github.com/pyodide/pyodide/issues/2282", "id": 1172297418, "node_id": "I_kwDOB0-w-85F39bK", "number": 2282, "title": "Cannot import AMD modules after loading pyodide", "user": {"login": "yuccai", "id": 5614189, "node_id": "MDQ6VXNlcjU2MTQxODk=", "avatar_url": "https://avatars.githubusercontent.com/u/5614189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuccai", "html_url": "https://github.com/yuccai", "followers_url": "https://api.github.com/users/yuccai/followers", "following_url": "https://api.github.com/users/yuccai/following{/other_user}", "gists_url": "https://api.github.com/users/yuccai/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuccai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuccai/subscriptions", "organizations_url": "https://api.github.com/users/yuccai/orgs", "repos_url": "https://api.github.com/users/yuccai/repos", "events_url": "https://api.github.com/users/yuccai/events{/privacy}", "received_events_url": "https://api.github.com/users/yuccai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-17T12:09:10Z", "updated_at": "2022-03-20T17:04:47Z", "closed_at": "2022-03-20T17:04:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\nAfter loading `pyodide`, AMD modules cannot be loaded with `requirejs`.\r\n\r\n### To Reproduce\r\nCreate 3 files according to this layout (or unzip attached archives)\r\n```\r\n- demo/\r\n   - moduleA.js\r\n   - moduleB.js\r\n   - index.html\r\n```\r\n\r\n  - Define two basic similar AMD modules :\r\n    - `moduleA.js` :\r\n        ```javascript\r\n      define(() => function moduleA() {\r\n          console.log(\"Module A execution\");\r\n      });\r\n        ```\r\n     - `moduleB.js`   \r\n          ```javascript\r\n        define(() => function moduleB() {\r\n            console.log(\"Module B execution\");\r\n        });\r\n          ```\r\n  - Create simple `index.html` that load `pyodide` then `requirejs` scripts. Then we load `moduleA` (works fine), load `pyodide` (works fine) and finally load `moduleB` (error) :\r\n  ```html\r\n  <!DOCTYPE html>\r\n  <html>\r\n    <head>\r\n      <script src=\"https://cdn.jsdelivr.net/pyodide/v0.19.1/full/pyodide.js\"></script>\r\n      <script src=\"https://requirejs.org/docs/release/2.3.6/minified/require.js\"></script>\r\n    </head>\r\n    <body>\r\n      <script type=\"text/javascript\">\r\n  \r\n        async function loadAMDModule(url) {\r\n          return new Promise(resolve => {\r\n            requirejs([url], module => resolve(module));\r\n          });\r\n        }\r\n  \r\n        async function main(){\r\n          const moduleA = await loadAMDModule(\"./moduleA\");\r\n          moduleA();\r\n  \r\n          const pyodide = await loadPyodide({\r\n            indexURL : \"https://cdn.jsdelivr.net/pyodide/v0.19.1/full/\"\r\n          });\r\n  \r\n          const moduleB = await loadAMDModule(\"./moduleB\");\r\n          moduleB();\r\n        }\r\n        main();\r\n      </script>\r\n    </body>\r\n  </html>\r\n```\r\nThen run `python -m http.server -d demo`\r\n\r\nHere is the error :\r\n```\r\nrequire.js:5 Uncaught (in promise) Error: Mismatched anonymous define() module: function() { return _createPyodideModule; }\r\nhttps://requirejs.org/docs/errors.html#mismatch\r\n    at makeError (require.js:5:1795)\r\n    at T (require.js:5:8677)\r\n    at Object.s [as require] (require.js:5:15042)\r\n    at requirejs (require.js:5:2335)\r\n    at index.html:12:11\r\n    at new Promise (<anonymous>)\r\n    at loadAMDModule (index.html:11:16)\r\n    at main (index.html:24:31)\r\n```\r\nIf we dont' execute the `loadPyodide` function, `moduleA` and `moduleB` are correctly loaded.\r\n\r\nFurthermore, we cannot load `requirejs` before `pyodide` : \r\ndoing this :\r\n```html\r\n   <head>\r\n      <script src=\"https://requirejs.org/docs/release/2.3.6/minified/require.js\"></script>\r\n      <script src=\"https://cdn.jsdelivr.net/pyodide/v0.19.1/full/pyodide.js\"></script>\r\n  </head>\r\n```\r\ninstead of this :\r\n```html\r\n   <head>\r\n      <script src=\"https://cdn.jsdelivr.net/pyodide/v0.19.1/full/pyodide.js\"></script>\r\n      <script src=\"https://requirejs.org/docs/release/2.3.6/minified/require.js\"></script>\r\n  </head>\r\n```\r\nHere is the error :\r\n```\r\nUncaught (in promise) Error: Mismatched anonymous define() module: function(exports){\"use strict\";let Module={};function setStandardStreams(stdin,stdout,stderr){stdout&&(Module.print=stdout),stderr&&(Module.printErr=stderr),stdin&&Module.preRun.push((function(){Module.FS.init(function(stdin){const encoder=new TextEncoder;let input=new Uint8Array(0),inputIndex=-1;function stdinWrapper(){try{if(-1===inputIndex){let text=stdin();if(null==text)return null;if(\"string\"!=typeof text)throw new TypeError(`Expected stdin to return string, null, or undefined, got type ${typeof text}.`);text.endsWith(\"\\n\")||(text+=\"\\n\"),input=encoder.encode(text),inputIndex=0}if(inputIndex<input.length){let character=input[inputIndex];return inputIndex++,character}return inputIndex=-1,null}catch(e){throw console.error(\"Error thrown in stdin:\"),console.error(e),e}}return stdinWrapper}(stdin),null,null)}))}Module.noImageDecoding=!0,Module.noAudioDecoding=!0,Module.noWasmDecoding=!1,Module.preloadedWasm={},Module.preRun=[];const IN_NODE=\"undefined\"!=typeof process&&process.release&&\"node\"===process.release.name&&void 0===process.browser;let baseURL;const package_uri_regexp=/^.*?([^\\/]*)\\.js$/;function _uri_to_package_name(package_uri){let match=package_uri_regexp.exec(package_uri);if(match)return match[1].toLowerCase()}let loadScript;if(globalThis.document)loadScript=async url=>await import(url);else if(globalThis.importScripts)loadScript=async url=>{globalThis.importScripts(url)};else{if(!IN_NODE)throw new Error(\"Cannot determine runtime environment\");{const pathPromise=import(\"path\").then((M=>M.default)),fetchPromise=import(\"node-fetch\").then((M=>M.default)),vmPromise=import(\"vm\").then((M=>M.default));loadScript=async url=>{if(url.includes(\"://\")){const fetch=await fetchPromise;(await vmPromise).runInThisContext(await(await fetch(url)).text())}else{const path=await pathPromise;await import(path.resolve(url))}}}}function addPackageToLoad(name,toLoad){if(name=name.toLowerCase(),!toLoad.has(name)&&(toLoad.set(name,\"default channel\"),void 0===loadedPackages[name]))for(let dep_name of Module.packages[name].depends)addPackageToLoad(dep_name,toLoad)}function recursiveDependencies(names,_messageCallback,errorCallback,sharedLibsOnly){const toLoad=new Map;for(let name of names){const pkgname=_uri_to_package_name(name);toLoad.has(pkgname)&&toLoad.get(pkgname)!==name?errorCallback(`Loading same package ${pkgname} from ${name} and ${toLoad.get(pkgname)}`):void 0===pkgname?(name=name.toLowerCase(),name in Module.packages?addPackageToLoad(name,toLoad):errorCallback(`Skipping unknown package '${name}'`)):toLoad.set(pkgname,name)}if(sharedLibsOnly){let onlySharedLibs=new Map;for(let c of toLoad){let name=c[0];Module.packages[name].shared_library&&onlySharedLibs.set(name,toLoad.get(name))}return onlySharedLibs}return toLoad}function waitRunDependency(){const promise=new Promise((r=>{Module.monitorRunDependencies=n=>{0===n&&r()}}));return Module.addRunDependency(\"dummy\"),Module.removeRunDependency(\"dummy\"),promise}async function _loadPackage(names,messageCallback,errorCallback){let toLoad=recursiveDependencies(names,0,errorCallback);if(Module.locateFile_packagesToLoad=toLoad,0===toLoad.size)return Promise.resolve(\"No new packages to load\");messageCallback(`Loading ${Array.from(toLoad.keys()).join(\", \")}`);let scriptPromises=[];for(let[pkg,uri]of toLoad){let loaded=loadedPackages[pkg];if(void 0!==loaded){if(loaded===uri||\"default channel\"===uri){messageCallback(`${pkg} already loaded from ${loaded}`);continue}errorCallback(`URI mismatch, attempting to load package ${pkg} from ${uri} while it is already loaded from ${loaded}. To override a dependency, load the custom package first.`);continue}let pkgname=Module.packages[pkg]&&Module.packages[pkg].name||pkg,scriptSrc=\"default channel\"===uri?`${baseURL}${pkgname}.js`:uri;messageCallback(`Loading ${pkg} from ${scriptSrc}`),scriptPromises.push(loadScript(scriptSrc).catch((e=>{errorCallback(`Couldn't load package from URL ${scriptSrc}`,e),toLoad.delete(pkg)})))}try{await Promise.all(scriptPromises).then(waitRunDependency)}finally{delete Module.monitorRunDependencies}let resolveMsg,packageList=[];for(let[pkg,uri]of toLoad)loadedPackages[pkg]=uri,packageList.push(pkg);if(packageList.length>0){resolveMsg=`Loaded ${packageList.join(\", \")}`}else resolveMsg=\"No packages loaded\";Module.reportUndefinedSymbols(),messageCallback(resolveMsg),Module.importlib.invalidate_caches()}Module.locateFile=function(path){let pkg=path.replace(/\\.data$/,\"\");const toLoad=Module.locateFile_packagesToLoad;if(toLoad&&toLoad.has(pkg)){let package_uri=toLoad.get(pkg);if(\"default channel\"!=package_uri)return package_uri.replace(/\\.js$/,\".data\")}return baseURL+path};let _package_lock=Promise.resolve();let sharedLibraryWasmPlugin,origWasmPlugin,wasmPluginIndex,loadedPackages={};function useSharedLibraryWasmPlugin(){sharedLibraryWasmPlugin||function(){for(let p in Module.preloadPlugins)if(Module.preloadPlugins[p].canHandle(\"test.so\")){origWasmPlugin=Module.preloadPluhttps://requirejs.org/docs/errors.html#mismatch\r\n    at makeError (require.js:5:1795)\r\n    at T (require.js:5:8677)\r\n    at Object.s [as require] (require.js:5:15042)\r\n    at requirejs (require.js:5:2335)\r\n    at index.html:12:11\r\n    at new Promise (<anonymous>)\r\n    at loadAMDModule (index.html:11:16)\r\n    at main (index.html:17:31)\r\n    at index.html:27:7\r\nmakeError @ require.js:5\r\nT @ require.js:5\r\ns @ require.js:5\r\nrequirejs @ require.js:5\r\n(anonymous) @ index.html:12\r\nloadAMDModule @ index.html:11\r\nmain @ index.html:17\r\n(anonymous) @ index.html:27\r\nawait in (anonymous) (async)\r\n(anonymous) @ index.html:27\r\n```\r\n\r\n\r\n\r\n### Expected behavior\r\nLoading pyodide should not impact requirejs behaviour at all.\r\n\r\n\r\n### Environment\r\n\r\n- Pyodide Version: from `v0.17.2` to `v0.19.1`\r\n- Browser version : Brave [Version 1.36.112 Chromium: 99.0.4844.51 (Official Build) (64-bit)])\r\n\r\n\r\n[demo.zip](https://github.com/pyodide/pyodide/files/8284742/demo.zip)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2282/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2255", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2255/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2255/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2255/events", "html_url": "https://github.com/pyodide/pyodide/issues/2255", "id": 1160316004, "node_id": "I_kwDOB0-w-85FKQRk", "number": 2255, "title": "Unable to retry loading pyodide, get error \"Pyodide is already loading\"", "user": {"login": "alexmojaki", "id": 3627481, "node_id": "MDQ6VXNlcjM2Mjc0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/3627481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexmojaki", "html_url": "https://github.com/alexmojaki", "followers_url": "https://api.github.com/users/alexmojaki/followers", "following_url": "https://api.github.com/users/alexmojaki/following{/other_user}", "gists_url": "https://api.github.com/users/alexmojaki/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexmojaki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexmojaki/subscriptions", "organizations_url": "https://api.github.com/users/alexmojaki/orgs", "repos_url": "https://api.github.com/users/alexmojaki/repos", "events_url": "https://api.github.com/users/alexmojaki/events{/privacy}", "received_events_url": "https://api.github.com/users/alexmojaki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-03-05T10:59:39Z", "updated_at": "2022-04-15T01:04:01Z", "closed_at": "2022-04-15T01:04:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nIf `loadPyodide` fails, I'd like to call it again in case it's a transient network error. But trying this throws an error `Pyodide is already loading.`\r\n\r\n### To Reproduce\r\n\r\nI'm roughly doing this:\r\n\r\n```js\r\nimport pRetry from 'p-retry';\r\n\r\npRetry(() => loadPyodide({indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.19.0/full/'}), {retries: 3})\r\n```\r\n\r\nWhen I kill the network in the middle of loading, I get:\r\n\r\n```\r\npyodide.js:243 Uncaught (in promise) Error: Pyodide is already loading.\r\n    at loadPyodide (pyodide.js:243:1)\r\n    at loadPyodideOnly (Worker.js:25:1)\r\n    at RetryOperation._fn (index.js:50:1)\r\n    at retry_operation.js:85:1\r\n```\r\n\r\n### Expected behavior\r\n\r\nWhen `loadPyodide` fails, clean up and delete anything created during loading such as `globalThis.__pyodide_module`. This seems important for other reasons like memory usage. Hopefully it should allow `loadPyodide` to be called again. Or is there some deeper emscripten state problem with trying to load pyodide twice?\r\n\r\nAdding some internal retrying logic to the various network requests would also be great, since I'm sure retrying all errors on my side isn't ideal. But I can understand if that raises tricky questions.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2255/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2228", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2228/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2228/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2228/events", "html_url": "https://github.com/pyodide/pyodide/issues/2228", "id": 1154264457, "node_id": "I_kwDOB0-w-85EzK2J", "number": 2228, "title": "wasm-ld: error: unknown file type: jaricom.o while building pillow", "user": {"login": "gabrielfougeron", "id": 8499652, "node_id": "MDQ6VXNlcjg0OTk2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8499652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabrielfougeron", "html_url": "https://github.com/gabrielfougeron", "followers_url": "https://api.github.com/users/gabrielfougeron/followers", "following_url": "https://api.github.com/users/gabrielfougeron/following{/other_user}", "gists_url": "https://api.github.com/users/gabrielfougeron/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabrielfougeron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabrielfougeron/subscriptions", "organizations_url": "https://api.github.com/users/gabrielfougeron/orgs", "repos_url": "https://api.github.com/users/gabrielfougeron/repos", "events_url": "https://api.github.com/users/gabrielfougeron/events{/privacy}", "received_events_url": "https://api.github.com/users/gabrielfougeron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-28T16:00:48Z", "updated_at": "2022-02-28T19:32:46Z", "closed_at": "2022-02-28T19:32:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a problem building pillow from source. I get the following error message:\r\n\r\n```\r\nwasm-ld: error: unknown file type: jaricom.o        \r\nemcc: error: '/home/gfo/pyodide/emsdk/emsdk/upstream/bin/wasm-ld -o build/lib.emscripten_wasm32-3.9/PIL/_imagingmath.cpython-39-x86_64-linux-gnu.so --whole-archive /home/gfo/anaconda3/envs/pyodide_test/lib/libjpeg.a -L/home/gfo/pyodide/cpython/installs/python-3.9.5/lib/ -L/home/gfo/anaconda3/envs/pyodide_test/lib -L/home/gfo/anaconda3/envs/pyodide_test/lib -L/home/gfo/anaconda3/envs/pyodide_test/lib build/temp.emscripten_wasm32-3.9/src/_imagingmath.o -L/home/gfo/pyodide/packages/pillow/build/pillow-9.0.0 -L/home/gfo/anaconda3/envs/pyodide_test/lib -L/home/gfo/pyodide/emsdk/emsdk/upstream/emscripten/cache/sysroot/lib/wasm32-emscripten/pic --no-whole-archive -mllvm -combiner-global-alias-analysis=false -mllvm -enable-emscripten-sjlj -mllvm -disable-lsr --lto-legacy-pass-manager --allow-undefined --import-memory --strip-debug --export-all --no-gc-sections --experimental-pic -shared' failed (1)  \r\n```\r\n\r\nI suspect I am missing a library somewhere in my system. \"Jaricom\" seems to be related to jpegturbo, which is installed on my system.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2226", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2226/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2226/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2226/events", "html_url": "https://github.com/pyodide/pyodide/issues/2226", "id": 1153977675, "node_id": "I_kwDOB0-w-85EyE1L", "number": 2226, "title": "Matplotlib test is failing in CI", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-28T11:27:23Z", "updated_at": "2022-03-16T00:39:34Z", "closed_at": "2022-03-16T00:39:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWe are experiencing (occasional) failure in CI on [testing matplotlib](https://app.circleci.com/pipelines/github/hoodmane/pyodide/2186/workflows/e951d6f7-9949-41e0-ab7c-f7083de030a0/jobs/22549).\r\n\r\nWhat I've found so far is that matplotlib test checks [whether the font is loaded](https://github.com/pyodide/pyodide/blob/8d00451142d5ddb0237595065773b1f7bf290d33/packages/matplotlib/test_matplotlib.py#L623-L625), but the [callback which updates the font_counter](https://github.com/pyodide/pyodide/blob/8d00451142d5ddb0237595065773b1f7bf290d33/packages/matplotlib/src/html5_canvas_backend.py#L414) is not executed properly. I am trying to figure this out but strangely I can't reproduce this behavior locally.\r\n\r\nNote that matplotlib tests were disabled(xfailed) for a long time, and re-enabled (https://github.com/pyodide/pyodide/pull/2151) recently.\r\n\r\n_Update:_ the failing test is xfailed now (#2243)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2226/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2212", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2212/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2212/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2212/events", "html_url": "https://github.com/pyodide/pyodide/issues/2212", "id": 1149354830, "node_id": "I_kwDOB0-w-85EgcNO", "number": 2212, "title": "Error building pillow", "user": {"login": "gabrielfougeron", "id": 8499652, "node_id": "MDQ6VXNlcjg0OTk2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8499652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabrielfougeron", "html_url": "https://github.com/gabrielfougeron", "followers_url": "https://api.github.com/users/gabrielfougeron/followers", "following_url": "https://api.github.com/users/gabrielfougeron/following{/other_user}", "gists_url": "https://api.github.com/users/gabrielfougeron/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabrielfougeron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabrielfougeron/subscriptions", "organizations_url": "https://api.github.com/users/gabrielfougeron/orgs", "repos_url": "https://api.github.com/users/gabrielfougeron/repos", "events_url": "https://api.github.com/users/gabrielfougeron/events{/privacy}", "received_events_url": "https://api.github.com/users/gabrielfougeron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-24T14:27:37Z", "updated_at": "2022-02-24T15:27:05Z", "closed_at": "2022-02-24T15:27:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI get the following error building pillow in wsl2 : \r\n`\r\nOSError: [Errno 39] Directory not empty: '/mnt/c/Downloads/pyodide-main/packages/pillow/build/Pillow-9.0.0' -> '/mnt/c/Downloads/pyodide-main/packages/pillow/build/pillow-9.0.0'    \r\n`", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2212/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2212/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2166", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2166/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2166/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2166/events", "html_url": "https://github.com/pyodide/pyodide/issues/2166", "id": 1133340744, "node_id": "I_kwDOB0-w-85DjWhI", "number": 2166, "title": "micropip.install not allowing for other wheel URLs other than PyPI", "user": {"login": "matthewfeickert", "id": 5142394, "node_id": "MDQ6VXNlcjUxNDIzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5142394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewfeickert", "html_url": "https://github.com/matthewfeickert", "followers_url": "https://api.github.com/users/matthewfeickert/followers", "following_url": "https://api.github.com/users/matthewfeickert/following{/other_user}", "gists_url": "https://api.github.com/users/matthewfeickert/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewfeickert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewfeickert/subscriptions", "organizations_url": "https://api.github.com/users/matthewfeickert/orgs", "repos_url": "https://api.github.com/users/matthewfeickert/repos", "events_url": "https://api.github.com/users/matthewfeickert/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewfeickert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-12T00:00:48Z", "updated_at": "2022-02-15T11:20:24Z", "closed_at": "2022-02-15T11:20:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nHi. `pyodide` is great, so thanks to the dev team for this amazing work. I'm marking this as a \"bug\" as the docs seem to indicate a different behavior then I'm seeing, but apologies if you think this should be a GitHub Discussion instead (and please feel free to move it).\r\n\r\nIn the `pyodide` [`v0.19.0` docs it mentions for `micropip.install`](https://pyodide.org/en/stable/usage/api/micropip-api.html#module-micropip) that the `requirements` arg can be\r\n\r\n> A requirement or list of requirements to install. Each requirement is a string, which should be either a package name or URL to a wheel:\r\n>   * If the requirement ends in .whl it will be interpreted as a URL. The file must be a wheel named in compliance with the [PEP 427 naming convention](https://www.python.org/dev/peps/pep-0427/#file-format).\r\n>   * If the requirement does not end in .whl, it will interpreted as the name of a package. A package by this name must either be present in the Pyodide repository at indexURL <globalThis.loadPyodide> or on PyPI\r\n\r\nThe docs also mention \"other URLS\" here\r\n\r\nhttps://github.com/pyodide/pyodide/blob/950c1dcbd271f90faea0d205a7c95fcd40710a69/docs/usage/loading-packages.md?plain=1#L9-L10\r\n\r\nThis doesn't seem to be the case for at least TestPyPI. I have wheels for my team's [pure-Python project](https://pypi.org/project/pyhf) there that are built with `build` in the same workflow that we use to upload to PyPI. The installation [from PyPI](https://pypi.org/project/pyhf/) and [from PyPI with a wheel URL](https://files.pythonhosted.org/packages/a4/49/23b30e056d807d8ff0c5de9c419c6becd560be1a676a2349f34727fe9aca/pyhf-0.6.3-py3-none-any.whl) works fine, but the installation [from a wheel URL from TestPyPI](https://test-files.pythonhosted.org/packages/4d/54/a749a9ed7840800dabf2f5eff340dcbd32524a21b673f35f8a7582658c31/pyhf-0.6.4.dev77-py3-none-any.whl) fails with\r\n\r\n```\r\nJsException: TypeError: Failed to fetch\r\n```\r\n\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\n\r\nRunning on the [Pyodide terminal emulator](https://pyodide.org/en/stable/console.html) you have made nicely available:\r\n\r\n```python\r\n>>> import micropip\r\n>>> await micropip.install(\"https://test-files.pythonhosted.org/packages/4d/54/a749a9ed7840800dabf2f5eff340dcbd32524a21b673f3\r\n5f8a7582658c31/pyhf-0.6.4.dev77-py3-none-any.whl\")\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 328, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 258, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.9/site-packages/micropip/_micropip.py\", line 185, in install\r\n    transaction = await self.gather_requirements(requirements, ctx, keep_going)\r\n  File \"/lib/python3.9/site-packages/micropip/_micropip.py\", line 175, in gather_requirements\r\n    await gather(*requirement_promises)\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 328, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 258, in __step\r\n    result = coro.throw(exc)\r\n  File \"/lib/python3.9/site-packages/micropip/_micropip.py\", line 249, in add_requirement\r\n    await self.add_wheel(name, wheel, version, (), ctx, transaction)\r\n  File \"/lib/python3.9/site-packages/micropip/_micropip.py\", line 299, in add_wheel\r\n    wheel_bytes = await fetch_bytes(wheel[\"url\"])\r\n  File \"/lib/python3.9/site-packages/micropip/_micropip.py\", line 57, in fetch_bytes\r\n    return await (await pyfetch(url, **kwargs)).bytes()\r\n  File \"/lib/python3.9/site-packages/pyodide/http.py\", line 232, in pyfetch\r\n    url, await _jsfetch(url, to_js(kwargs, dict_converter=Object.fromEntries))\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 284, in __await__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 328, in __wakeup\r\n    future.result()\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\nJsException: TypeError: Failed to fetch\r\n```\r\n\r\nHere's a replite example as well:\r\n* Failure to install `pyhf-0.6.4.dev77-py3-none-any.whl` from TestPyPI from wheel URL [![lite-badge]][test_pypi_fail]\r\n\r\n[lite-badge]: https://jupyterlite.rtfd.io/en/latest/_static/badge.svg\r\n[test_pypi_fail]: https://replite.vercel.app/retro/consoles/?toolbar=1&kernel=python&code=import%20micropip%0Aawait%20micropip.install%28%22https%3A//test-files.pythonhosted.org/packages/4d/54/a749a9ed7840800dabf2f5eff340dcbd32524a21b673f35f8a7582658c31/pyhf-0.6.4.dev77-py3-none-any.whl%22%29\r\n\r\n### Expected behavior\r\n\r\n<!-- FILL IN -->\r\n\r\n`pyodide` should install the wheel from TestPyPI as the name is valid (built by `build`) and is a valid URL that ends in `.whl`.\r\n\r\nExamples of working behavior:\r\n* Install `pyhf` `v0.6.3` successfully from PyPI [![lite-badge]][pypi_name]\r\n* Install `pyhf` `v0.6.3` successfully from PyPI from wheel URL [![lite-badge]][pypi_wheel_url]\r\n\r\n[pypi_name]: https://replite.vercel.app/retro/consoles/?toolbar=1&kernel=python&code=import%20micropip%0Aawait%20micropip.install%28%22pyhf%22%29%0Aimport%20pyhf\r\n[pypi_wheel_url]: https://replite.vercel.app/retro/consoles/?toolbar=1&kernel=python&code=import%20micropip%0Aawait%20micropip.install%28%22https%3A//files.pythonhosted.org/packages/a4/49/23b30e056d807d8ff0c5de9c419c6becd560be1a676a2349f34727fe9aca/pyhf-0.6.3-py3-none-any.whl%22%29%0Aimport%20pyhf\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 1.9.0\r\n- Browser version: Google Chrome 98.0.4758.80\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!--\r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\nNone", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2157", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2157/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2157/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2157/events", "html_url": "https://github.com/pyodide/pyodide/issues/2157", "id": 1126735327, "node_id": "I_kwDOB0-w-85DKJ3f", "number": 2157, "title": "`statsmodels` fails to build from source inside provided Docker container", "user": {"login": "ibdafna", "id": 24281433, "node_id": "MDQ6VXNlcjI0MjgxNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/24281433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibdafna", "html_url": "https://github.com/ibdafna", "followers_url": "https://api.github.com/users/ibdafna/followers", "following_url": "https://api.github.com/users/ibdafna/following{/other_user}", "gists_url": "https://api.github.com/users/ibdafna/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibdafna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibdafna/subscriptions", "organizations_url": "https://api.github.com/users/ibdafna/orgs", "repos_url": "https://api.github.com/users/ibdafna/repos", "events_url": "https://api.github.com/users/ibdafna/events{/privacy}", "received_events_url": "https://api.github.com/users/ibdafna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-08T03:05:07Z", "updated_at": "2022-02-08T03:40:18Z", "closed_at": "2022-02-08T03:40:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n`statsmodels` fails to build in Docker container\r\n\r\n### To Reproduce\r\n\r\nInside the pyodide directory, run:\r\n\r\n```bash\r\n./docker_run\r\nPYODIDE_PACKAGES='statsmodels'\r\nmake\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe package should build, but there is a checksum validation error:\r\n\r\n```bash\r\nBuilding the following packages: statsmodels\r\n[1/1] (thread 1) building statsmodels\r\nError building statsmodels. Printing build logs.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 62, in <module>\r\n    main()\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 56, in main\r\n    args.func(args)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 862, in main\r\n    build_package(\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 678, in build_package\r\n    prepare_source(pkg_root, build_dir, srcpath, source_metadata)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 254, in prepare_source\r\n    download_and_extract(buildpath, srcpath, src_metadata)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 206, in download_and_extract\r\n    check_checksum(tarballpath, src_metadata)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 155, in check_checksum\r\n    raise ValueError(\"Invalid {} checksum\".format(checksum_algorithm))\r\nValueError: Invalid sha256 checksum\r\n[2022-02-08 02:59:02] Building package statsmodels...\r\n[2022-02-08 02:59:15] Failed building package statsmodels in 12.9 seconds.\r\n[1/1] (thread 1) failed statsmodels in 14.37 s\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 62, in <module>\r\n    main()\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 56, in main\r\n    args.func(args)\r\n  File \"/src/pyodide-build/pyodide_build/buildall.py\", line 585, in main\r\n    build_packages(packages_dir, outputdir, args)\r\n  File \"/src/pyodide-build/pyodide_build/buildall.py\", line 478, in build_packages\r\n    build_from_graph(pkg_map, outputdir, args)\r\n  File \"/src/pyodide-build/pyodide_build/buildall.py\", line 397, in build_from_graph\r\n    raise pkg\r\n  File \"/src/pyodide-build/pyodide_build/buildall.py\", line 373, in builder\r\n    pkg.build(outputdir, args)\r\n  File \"/src/pyodide-build/pyodide_build/buildall.py\", line 141, in build\r\n    p.check_returncode()\r\n  File \"/usr/local/lib/python3.9/subprocess.py\", line 460, in check_returncode\r\n    raise CalledProcessError(self.returncode, self.args, self.stdout,\r\nsubprocess.CalledProcessError: Command '['/usr/local/bin/python', '-m', 'pyodide_build', 'buildpkg', '/src/packages/statsmodels/meta.yaml', '--cflags', '-O2 -g0 -fPIC', '--cxxflags', '', '--ldflags', '-O2 -g0 -s MODULARIZE=1 -s LINKABLE=1 -s EXPORT_ALL=1 -s WASM=1 -std=c++14 -s LZ4=1 -L /src/cpython/installs/python-3.9.5/lib/  -s SIDE_MODULE=1', '--target-install-dir', '/src/cpython/installs/python-3.9.5', '--host-install-dir', '/src/packages/.artifacts', '--force-rebuild']' returned non-zero exit status 1.\r\nmake[1]: *** [Makefile:12: all] Error 1\r\nmake[1]: Leaving directory '/src/packages'\r\nmake: *** [Makefile:197: build/packages.json] Error 2\r\n```\r\n\r\n### Environment\r\n\r\nI am building Pyodide from source, using commit `276d396fffd9bc9fa1453ce48d32ad42c5381756` using the default image provided by the `./run_docker` command.\r\n\r\n### Additional context\r\n\r\nI am upgrading [WebDash](https://github.com/ibdafna/webdash) to use the latest Pyodide and Plotly Dash versions for an upcoming release.\r\n\r\nMany thanks!\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2154", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2154/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2154/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2154/events", "html_url": "https://github.com/pyodide/pyodide/issues/2154", "id": 1122048836, "node_id": "I_kwDOB0-w-85C4RtE", "number": 2154, "title": "Can we lowercase build directories?", "user": {"login": "bartbroere", "id": 2715782, "node_id": "MDQ6VXNlcjI3MTU3ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/2715782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bartbroere", "html_url": "https://github.com/bartbroere", "followers_url": "https://api.github.com/users/bartbroere/followers", "following_url": "https://api.github.com/users/bartbroere/following{/other_user}", "gists_url": "https://api.github.com/users/bartbroere/gists{/gist_id}", "starred_url": "https://api.github.com/users/bartbroere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bartbroere/subscriptions", "organizations_url": "https://api.github.com/users/bartbroere/orgs", "repos_url": "https://api.github.com/users/bartbroere/repos", "events_url": "https://api.github.com/users/bartbroere/events{/privacy}", "received_events_url": "https://api.github.com/users/bartbroere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1412085227, "node_id": "MDU6TGFiZWwxNDEyMDg1MjI3", "url": "https://api.github.com/repos/pyodide/pyodide/labels/build", "name": "build", "color": "fcc7df", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-02T15:13:08Z", "updated_at": "2022-03-16T14:55:58Z", "closed_at": "2022-03-16T14:55:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Proposed refactoring or deprecation\r\nLowercase all the (packages) build directories by default.\r\n\r\n### Motivation\r\nWindows filesystems don't distinguish well enough between an upper case and lower case path.\r\n\r\n### Pitch\r\nMy development setup (sometimes) is a Windows setup, with the Pyodide repository volume mounted into a Docker container running `pyodide-env`. When building and developing packages, I'm getting errors when the build process is trying to rename this. If all build directories would be lowercased by default, this error probably wouldn't occur.\r\n\r\n### Additional context\r\nAttached a version of this error.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/local/lib/python3.9/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 62, in <module>\r\n    main()\r\n  File \"/src/pyodide-build/pyodide_build/__main__.py\", line 56, in main\r\n    args.func(args)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 821, in main\r\n    build_package(\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 643, in build_package\r\n    prepare_source(pkg_root, build_dir, srcpath, source_metadata)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 253, in prepare_source\r\n    download_and_extract(buildpath, srcpath, src_metadata)\r\n  File \"/src/pyodide-build/pyodide_build/buildpkg.py\", line 216, in download_and_extract\r\n    shutil.move(buildpath / extract_dir_name, srcpath)\r\n  File \"/usr/local/lib/python3.9/shutil.py\", line 796, in move\r\n    os.rename(src, dst)\r\nOSError: [Errno 39] Directory not empty: '/src/packages/pillow/build/Pillow-9.0.0' -> '/src/packages/pillow/build/pillow-9.0.0'\r\n[2022-02-02 13:56:16] Building package pillow...\r\n[2022-02-02 13:56:38] Failed building package pillow in 21.9 seconds.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2150", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2150/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2150/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2150/events", "html_url": "https://github.com/pyodide/pyodide/issues/2150", "id": 1119168056, "node_id": "I_kwDOB0-w-85CtSY4", "number": 2150, "title": "`make benchmark` fails", "user": {"login": "madhur-tandon", "id": 20173739, "node_id": "MDQ6VXNlcjIwMTczNzM5", "avatar_url": "https://avatars.githubusercontent.com/u/20173739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madhur-tandon", "html_url": "https://github.com/madhur-tandon", "followers_url": "https://api.github.com/users/madhur-tandon/followers", "following_url": "https://api.github.com/users/madhur-tandon/following{/other_user}", "gists_url": "https://api.github.com/users/madhur-tandon/gists{/gist_id}", "starred_url": "https://api.github.com/users/madhur-tandon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madhur-tandon/subscriptions", "organizations_url": "https://api.github.com/users/madhur-tandon/orgs", "repos_url": "https://api.github.com/users/madhur-tandon/repos", "events_url": "https://api.github.com/users/madhur-tandon/events{/privacy}", "received_events_url": "https://api.github.com/users/madhur-tandon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-31T09:16:42Z", "updated_at": "2022-03-02T18:11:37Z", "closed_at": "2022-03-02T18:11:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nRun `make benchmark` inside docker container on Intel Mac\r\n\r\nThe error received is:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/src/benchmark/benchmark.py\", line 178, in <module>\r\n    results = main(Path(sys.argv[-2]).resolve())\r\n  File \"/src/benchmark/benchmark.py\", line 148, in main\r\n    selenium_backends[name] = cls(port)\r\n  File \"/src/conftest.py\", line 123, in __init__\r\n    self.load_pyodide()\r\n  File \"/src/conftest.py\", line 150, in load_pyodide\r\n    self.run_js(\r\n  File \"/src/conftest.py\", line 250, in run_js\r\n    return self.run_js_inner(code, check_code)\r\n  File \"/src/conftest.py\", line 270, in run_js_inner\r\n    raise JavascriptException(retval[1], retval[2])\r\nconftest.JavascriptException: ReferenceError: assignment to undeclared variable newFn\r\n\r\nupdateGOT@http://127.0.0.1:39493/pyodide.asm.js:14:273680\r\nrelocateExports@http://127.0.0.1:39493/pyodide.asm.js:14:274113\r\nreceiveInstance@http://127.0.0.1:39493/pyodide.asm.js:14:203925\r\nreceiveInstantiatedSource@http://127.0.0.1:39493/pyodide.asm.js:14:204112\r\n```\r\n<!-- Minimal code example to reproduce the bug. -->\r\n\r\n### Expected behavior\r\n\r\nBenchmarks should appear.\r\n\r\n### Additional context\r\n\r\nWas calculating benchmarks for the blog that we have here: https://github.com/pyodide/pyodide-blog/pull/12 but it fails to run. I can push the code for the benchmarks that I have written in another PR\r\n\r\ncc: @rth ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2147", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2147/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2147/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2147/events", "html_url": "https://github.com/pyodide/pyodide/issues/2147", "id": 1118498537, "node_id": "I_kwDOB0-w-85Cqu7p", "number": 2147, "title": "pyodide_build buildpkg does not produce a .js file and does not report an error", "user": {"login": "paulftw", "id": 769142, "node_id": "MDQ6VXNlcjc2OTE0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/769142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulftw", "html_url": "https://github.com/paulftw", "followers_url": "https://api.github.com/users/paulftw/followers", "following_url": "https://api.github.com/users/paulftw/following{/other_user}", "gists_url": "https://api.github.com/users/paulftw/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulftw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulftw/subscriptions", "organizations_url": "https://api.github.com/users/paulftw/orgs", "repos_url": "https://api.github.com/users/paulftw/repos", "events_url": "https://api.github.com/users/paulftw/events{/privacy}", "received_events_url": "https://api.github.com/users/paulftw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2048327038, "node_id": "MDU6TGFiZWwyMDQ4MzI3MDM4", "url": "https://api.github.com/repos/pyodide/pyodide/labels/documentation", "name": "documentation", "color": "fce1c7", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-01-30T11:23:50Z", "updated_at": "2022-09-10T10:59:05Z", "closed_at": "2022-04-05T04:26:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI'm following official instructions on [creating a package](https://pyodide.org/en/stable/development/new-packages.html#building-the-package-and-investigating-issues) to build cadquery from github repo.\r\n\r\n\r\n### To Reproduce\r\n\r\n1. Build pyodide using official docker, install pyodide_build\r\n2. Create `packages/cadquery/meta.yaml`:\r\n```\r\npackage:\r\n  name: cadquery\r\n  version: \"2.1\"\r\nsource:\r\n  url: https://github.com/CadQuery/cadquery/archive/refs/heads/master.zip\r\n\r\nrequirements:\r\n  run:\r\n    - ocp 7.5.3\r\n    - hdf5 1.10.6 *1114\r\n    - pyparsing >=2.1.9\r\n    - ezdxf\r\n    - ipython\r\n    - typing_extensions\r\n    - nptyping\r\n    - nlopt\r\n    - multimethod 1.6\r\n\r\ntest:\r\n  imports:\r\n    - cadquery\r\n\r\n```\r\n\r\n3. Run commands from documentation: \r\n```\r\nexport PYTHONPATH=\"$PYTHONPATH:/Users/myname/my-pyodide/pyodide-build/\"\r\npython -m pyodide_build buildpkg meta.yaml\r\ncp build/*.data build/*.js ../../build/\r\n```\r\n\r\nOutput of `cp`:\r\n```\r\n$ cp build/*.data build/*.js ../../build/\r\ncp: build/*.data: No such file or directory\r\ncp: build/*.js: No such file or directory\r\n```\r\n\r\n### Expected behavior\r\n\r\nI expected to either get an error printed or a js file generated (or a mention in the documentation on why js isn't produced sometimes.)\r\n\r\nOther details:\r\n\r\nOutput of `pyodide_build`:\r\n```\r\n$ python -m pyodide_build buildpkg meta.yaml\r\n[2022-01-30 13:11:28] Building package cadquery...\r\nrunning build\r\nrunning build_py\r\ncreating build\r\ncreating build/lib\r\ncreating build/lib/cadquery\r\ncopying cadquery/cq_directive.py -> build/lib/cadquery\r\ncopying cadquery/units.py -> build/lib/cadquery\r\ncopying cadquery/cq.py -> build/lib/cadquery\r\ncopying cadquery/__init__.py -> build/lib/cadquery\r\ncopying cadquery/hull.py -> build/lib/cadquery\r\ncopying cadquery/selectors.py -> build/lib/cadquery\r\ncopying cadquery/types.py -> build/lib/cadquery\r\ncopying cadquery/cqgi.py -> build/lib/cadquery\r\ncopying cadquery/utils.py -> build/lib/cadquery\r\ncopying cadquery/assembly.py -> build/lib/cadquery\r\ncopying cadquery/sketch.py -> build/lib/cadquery\r\ncreating build/lib/cadquery/plugins\r\ncopying cadquery/plugins/__init__.py -> build/lib/cadquery/plugins\r\ncreating build/lib/cadquery/contrib\r\ncopying cadquery/contrib/__init__.py -> build/lib/cadquery/contrib\r\ncreating build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/sketch_solver.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/shapes.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/solver.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/geom.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/jupyter_tools.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/__init__.py -> build/lib/cadquery/occ_impl\r\ncopying cadquery/occ_impl/assembly.py -> build/lib/cadquery/occ_impl\r\ncreating build/lib/cadquery/occ_impl/importers\r\ncopying cadquery/occ_impl/importers/__init__.py -> build/lib/cadquery/occ_impl/importers\r\ncopying cadquery/occ_impl/importers/dxf.py -> build/lib/cadquery/occ_impl/importers\r\ncreating build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/amf.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/__init__.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/dxf.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/utils.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/svg.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/assembly.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/vtk.py -> build/lib/cadquery/occ_impl/exporters\r\ncopying cadquery/occ_impl/exporters/json.py -> build/lib/cadquery/occ_impl/exporters\r\nrunning egg_info\r\ncreating cadquery.egg-info\r\nwriting manifest file 'cadquery.egg-info/SOURCES.txt'\r\nwriting manifest file 'cadquery.egg-info/SOURCES.txt'\r\ncopying cadquery/py.typed -> build/lib/cadquery\r\nrunning bdist_wheel\r\n<home folder>/.virtualenvs/wasp/lib/python3.9/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.\r\n  warnings.warn(\r\nrunning install\r\nrunning install_lib\r\ncreating build/bdist.emscripten_wasm32\r\ncreating build/bdist.emscripten_wasm32/wheel\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery/plugins\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery/contrib\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery/occ_impl\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery/occ_impl/importers\r\ncreating build/bdist.emscripten_wasm32/wheel/cadquery/occ_impl/exporters\r\nrunning install_egg_info\r\nrunning egg_info\r\nwriting manifest file 'cadquery.egg-info/SOURCES.txt'\r\nCopying cadquery.egg-info to build/bdist.emscripten_wasm32/wheel/cadquery-2.1-py3.9.egg-info\r\nrunning install_scripts\r\nUnpacking to: ./cadquery-2.1...OK\r\nRepacking wheel as ./cadquery-2.1-py3-none-any.whl...OK\r\n[2022-01-30 13:11:35] Succeeded building package cadquery in 6.7 seconds.\r\n```\r\n\r\n```\r\n$ ls build/ dist/\r\nbuild/:\r\ncadquery-2.1\t\tcadquery-master.zip\r\n\r\ndist/:\r\ncadquery-2.1-py3-none-any.whl\r\n```\r\n\r\n`build/cadquery-2.1/build/bdist.emscripten_wasm32/` is empty\r\n\r\n### Environment\r\n\r\npyodide commit 75aa9ba678e0a8733259fea3cc3e4c786e12fab7\r\nbuilding on mac with ./run_docker\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2147/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2143", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2143/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2143/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2143/events", "html_url": "https://github.com/pyodide/pyodide/issues/2143", "id": 1117942437, "node_id": "I_kwDOB0-w-85ConKl", "number": 2143, "title": "Bug with SciPy.stats.mannwhitneyu", "user": {"login": "anchit-sadana", "id": 70300199, "node_id": "MDQ6VXNlcjcwMzAwMTk5", "avatar_url": "https://avatars.githubusercontent.com/u/70300199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anchit-sadana", "html_url": "https://github.com/anchit-sadana", "followers_url": "https://api.github.com/users/anchit-sadana/followers", "following_url": "https://api.github.com/users/anchit-sadana/following{/other_user}", "gists_url": "https://api.github.com/users/anchit-sadana/gists{/gist_id}", "starred_url": "https://api.github.com/users/anchit-sadana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anchit-sadana/subscriptions", "organizations_url": "https://api.github.com/users/anchit-sadana/orgs", "repos_url": "https://api.github.com/users/anchit-sadana/repos", "events_url": "https://api.github.com/users/anchit-sadana/events{/privacy}", "received_events_url": "https://api.github.com/users/anchit-sadana/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-28T23:41:23Z", "updated_at": "2022-01-30T02:28:00Z", "closed_at": "2022-01-30T02:28:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\nIf I try to run scipy.stats.mannwhitneyu, the script gives me a ```Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers.The cause of the fatal error was: RuntimeError: null function or function signature mismatch\r\nLook in the browser console for more details.``` on the REPL.\r\n### To Reproduce\r\n\r\n<!-- Minimal code example to reproduce the bug. -->\r\nRun in browser REPL\r\n```\r\nimport numpy as np\r\nimport scipy.stats as stats \r\nstats.mannwhitneyu(np.random.rand(10), np.random.rand(10))\r\n```\r\n### Expected behavior\r\nThe stat test runs successfully and returns a MannwhitneyuResult object with a test statistic  and a pvalue\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->:  0.19.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->:97.0.4692.99\r\n- Any other relevant information: I tried doing this in the REPL after it was failing in a script on a website \r\n\r\n\r\n\r\n### Additional context\r\n\r\n<!-- Add any other context about the problem here. -->\r\nI think some other tests in scipy.stats may also be broken \r\n<img width=\"1422\" alt=\"Screen Shot 2022-01-28 at 3 40 36 PM\" src=\"https://user-images.githubusercontent.com/70300199/151636079-0624145c-e673-4899-84c6-821d68e5fa3c.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2108", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2108/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2108/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2108/events", "html_url": "https://github.com/pyodide/pyodide/issues/2108", "id": 1103913136, "node_id": "I_kwDOB0-w-85BzGCw", "number": 2108, "title": "RuntimeError: indirect call signature mismatch", "user": {"login": "itkach", "id": 180849, "node_id": "MDQ6VXNlcjE4MDg0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/180849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itkach", "html_url": "https://github.com/itkach", "followers_url": "https://api.github.com/users/itkach/followers", "following_url": "https://api.github.com/users/itkach/following{/other_user}", "gists_url": "https://api.github.com/users/itkach/gists{/gist_id}", "starred_url": "https://api.github.com/users/itkach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itkach/subscriptions", "organizations_url": "https://api.github.com/users/itkach/orgs", "repos_url": "https://api.github.com/users/itkach/repos", "events_url": "https://api.github.com/users/itkach/events{/privacy}", "received_events_url": "https://api.github.com/users/itkach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640941765, "node_id": "MDU6TGFiZWwxNjQwOTQxNzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scipy", "name": "scipy", "color": "fef2c0", "default": false, "description": ""}, {"id": 2928710534, "node_id": "MDU6TGFiZWwyOTI4NzEwNTM0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Fatal%20Error", "name": "Fatal Error", "color": "B60205", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-14T17:02:04Z", "updated_at": "2022-01-16T20:30:43Z", "closed_at": "2022-01-16T20:30:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\nCalling `scipy.stats.binom.ppf` function works in pyodide 0.18.1 but fails in pyodide 0.19.0\r\n\r\n### To Reproduce\r\n\r\n```\r\nconst code = `\r\nfrom scipy.stats import binom\r\nbinom.ppf(0.9, 1000, 0.1)\r\n`;\r\nawait pyodide.runPythonAsync(code);\r\n```\r\nresults in the following error:\r\n\r\n```\r\nRuntimeError: indirect call signature mismatch\r\nreact_devtools_backend.js:4045:25\r\nStack (most recent call first): pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/site-packages/scipy/stats/_discrete_distns.py\", line 81 in _ppf pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/site-packages/scipy/stats/_distn_infrastructure.py\", line 3385 in ppf pyodide.asm.js:14:295959\r\n  File \"<exec>\", line 3 in <module> pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 345 in run_async pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 494 in eval_code_async pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 256 in __step pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/asyncio/events.py\", line 80 in _run pyodide.asm.js:14:295959\r\n  File \"/lib/python3.9/site-packages/pyodide/webloop.py\", line 150 in run_handle pyodide.asm.js:14:295959\r\n```\r\n\r\n\r\n### Expected behavior\r\n\r\nCode runs without error, returns `112`\r\n\r\n### Environment\r\n\r\n- Pyodide Version<!-- (e.g. 1.8.1) -->: 0.19.0\r\n- Browser version<!-- (e.g. Chrome 95.0.4638.54) -->: Firefox 95.0.2, Safari 15.2 (17612.3.6.1.6)\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2101", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2101/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2101/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2101/events", "html_url": "https://github.com/pyodide/pyodide/issues/2101", "id": 1098772570, "node_id": "I_kwDOB0-w-85BffBa", "number": 2101, "title": "CI Pre-build docker image not deploying on tags", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-01-11T07:03:33Z", "updated_at": "2022-01-13T10:20:27Z", "closed_at": "2022-01-13T10:20:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There was an issue with deploying the pre-build docker image during last release,\r\nhttps://github.com/pyodide/pyodide/runs/4768642291\r\n```\r\nerror: invalid tag \"pyodide/pyodide:\": invalid reference format\r\nError: buildx failed with: error: invalid tag \"pyodide/pyodide:\": invalid reference format\r\n```\r\nwhich is an indication that in\r\nhttps://github.com/pyodide/pyodide/blob/main/.github/workflows/prebuilt_docker_image.yml#L36\r\n`github.event.inputs.version` needs to be replaced by the tag value. I couldn't test this part, because it requires creating a tag in the repo (and I haven't managed to make GH Actions to work in a fork).\r\n\r\ncc @ehfd", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2089", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2089/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2089/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2089/events", "html_url": "https://github.com/pyodide/pyodide/issues/2089", "id": 1097113338, "node_id": "I_kwDOB0-w-85BZJ76", "number": 2089, "title": "Pandas plot error in 0.19.0a1", "user": {"login": "leopsidom", "id": 12235069, "node_id": "MDQ6VXNlcjEyMjM1MDY5", "avatar_url": "https://avatars.githubusercontent.com/u/12235069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leopsidom", "html_url": "https://github.com/leopsidom", "followers_url": "https://api.github.com/users/leopsidom/followers", "following_url": "https://api.github.com/users/leopsidom/following{/other_user}", "gists_url": "https://api.github.com/users/leopsidom/gists{/gist_id}", "starred_url": "https://api.github.com/users/leopsidom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leopsidom/subscriptions", "organizations_url": "https://api.github.com/users/leopsidom/orgs", "repos_url": "https://api.github.com/users/leopsidom/repos", "events_url": "https://api.github.com/users/leopsidom/events{/privacy}", "received_events_url": "https://api.github.com/users/leopsidom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-09T05:51:15Z", "updated_at": "2022-01-09T17:40:47Z", "closed_at": "2022-01-09T17:40:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen trying to plot with pandas in the latest console, we get the following error:\r\n\r\n> ModuleNotFoundError: No module named 'pkg_resources'\r\n\r\n### To Reproduce\r\n\r\nTry the following in the latest console: https://pyodide.org/en/latest/console.html\r\n\r\n```\r\nimport pandas as pd\r\nimport matplotlib\r\ndf=pd.DataFrame({'x': [1,1,1,2,2,2], 'y': [1,1,2,2,3,4]})\r\ndf.plot(kind='bar')\r\n```\r\n\r\nwhile this works fine in the stable version: https://pyodide.org/en/stable/console.html\r\n\r\n### Expected behavior\r\n\r\nThe above code should not give an error\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.19.0a1\r\n- Browser version: Chrome  96.0.4664.110\r\n- Any other relevant information:\r\n\r\n<!-- If you are building Pyodide by yourself, please also include these information: -->\r\n\r\n<!-- \r\n- Commit hash of Pyodide git repository:\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->:\r\n-->\r\n\r\n### Additional context\r\n\r\nThis is likely due to a bug in the pandas version pyodide upgraded to. And this commit might have fixed it: https://github.com/pandas-dev/pandas/pull/42410/files", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2089/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2038", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2038/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2038/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2038/events", "html_url": "https://github.com/pyodide/pyodide/issues/2038", "id": 1078436166, "node_id": "I_kwDOB0-w-85AR6FG", "number": 2038, "title": "Build output not compressed", "user": {"login": "ryanking13", "id": 24893111, "node_id": "MDQ6VXNlcjI0ODkzMTEx", "avatar_url": "https://avatars.githubusercontent.com/u/24893111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryanking13", "html_url": "https://github.com/ryanking13", "followers_url": "https://api.github.com/users/ryanking13/followers", "following_url": "https://api.github.com/users/ryanking13/following{/other_user}", "gists_url": "https://api.github.com/users/ryanking13/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryanking13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryanking13/subscriptions", "organizations_url": "https://api.github.com/users/ryanking13/orgs", "repos_url": "https://api.github.com/users/ryanking13/repos", "events_url": "https://api.github.com/users/ryanking13/events{/privacy}", "received_events_url": "https://api.github.com/users/ryanking13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/7", "html_url": "https://github.com/pyodide/pyodide/milestone/7", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/7/labels", "id": 6997141, "node_id": "MI_kwDOB0-w-84AasSV", "number": 7, "title": "0.19.0", "description": "", "creator": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "open_issues": 2, "closed_issues": 16, "state": "closed", "created_at": "2021-07-22T19:39:32Z", "updated_at": "2022-02-09T08:27:02Z", "due_on": "2021-12-30T08:00:00Z", "closed_at": "2022-01-18T16:24:12Z"}, "comments": 6, "created_at": "2021-12-13T11:52:48Z", "updated_at": "2021-12-19T13:31:39Z", "closed_at": "2021-12-19T13:31:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nIt looks like the build output of Pyodide is not compressed(uglified) now (after #2019?), which makes the output file size ~3X time bigger.\r\n\r\n- Before: https://github.com/pyodide/pyodide/actions/runs/1541845126\r\n\r\n```\r\n5.2M Dec  5 18:32 pyodide.asm.data\r\n2.0M Dec  5 18:32 pyodide.asm.js\r\n 12M Dec  5 18:32 pyodide.asm.wasm\r\n```\r\n\r\n- After: https://github.com/pyodide/pyodide/actions/runs/1561467333\r\n\r\n```\r\n5.2M Dec 10 01:45 pyodide.asm.data\r\n4.7M Dec 10 01:45 pyodide.asm.js\r\n 38M Dec 10 01:45 pyodide.asm.wasm\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2024", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2024/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2024/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2024/events", "html_url": "https://github.com/pyodide/pyodide/issues/2024", "id": 1075669876, "node_id": "I_kwDOB0-w-85AHWt0", "number": 2024, "title": "Make command skips most packages in the 'packages' directory", "user": {"login": "viktorChekhovoi", "id": 27730335, "node_id": "MDQ6VXNlcjI3NzMwMzM1", "avatar_url": "https://avatars.githubusercontent.com/u/27730335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viktorChekhovoi", "html_url": "https://github.com/viktorChekhovoi", "followers_url": "https://api.github.com/users/viktorChekhovoi/followers", "following_url": "https://api.github.com/users/viktorChekhovoi/following{/other_user}", "gists_url": "https://api.github.com/users/viktorChekhovoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/viktorChekhovoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viktorChekhovoi/subscriptions", "organizations_url": "https://api.github.com/users/viktorChekhovoi/orgs", "repos_url": "https://api.github.com/users/viktorChekhovoi/repos", "events_url": "https://api.github.com/users/viktorChekhovoi/events{/privacy}", "received_events_url": "https://api.github.com/users/viktorChekhovoi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-09T14:58:53Z", "updated_at": "2021-12-09T15:13:33Z", "closed_at": "2021-12-09T15:06:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWhen running the make command from a docker container (root or non-root), only 8 packages are built: pyparsing, Markupsafe, distutils, regex, pytz, packaging, micropip, Jinja2.\r\n\r\n### To Reproduce\r\n\r\n\r\n./run_docker\r\nmake (inside the docker)\r\n\r\n### Expected behavior\r\n\r\nAll packages in the directory should be built\r\n\r\n### Environment\r\n \r\n- Commit hash of Pyodide git repository: 24271d1af7309a516fcdb8217f836dbd9c9d3e64\r\n- Build environment<!--(e.g. Ubuntu 18.04, pyodide/pyodide-env:19 docker)- ->: pyodide/pyodide-env:19 docker\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2011", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2011/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2011/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2011/events", "html_url": "https://github.com/pyodide/pyodide/issues/2011", "id": 1067724899, "node_id": "I_kwDOB0-w-84_pDBj", "number": 2011, "title": "exception in asyncio.wait_for()", "user": {"login": "mogenson", "id": 900731, "node_id": "MDQ6VXNlcjkwMDczMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/900731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mogenson", "html_url": "https://github.com/mogenson", "followers_url": "https://api.github.com/users/mogenson/followers", "following_url": "https://api.github.com/users/mogenson/following{/other_user}", "gists_url": "https://api.github.com/users/mogenson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mogenson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mogenson/subscriptions", "organizations_url": "https://api.github.com/users/mogenson/orgs", "repos_url": "https://api.github.com/users/mogenson/repos", "events_url": "https://api.github.com/users/mogenson/events{/privacy}", "received_events_url": "https://api.github.com/users/mogenson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-30T22:13:28Z", "updated_at": "2021-12-19T21:05:24Z", "closed_at": "2021-12-19T21:05:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nWaiting for an awaitable using `asyncio.wait_for()` prints exceptions to the browser's console:\r\n\r\n```\r\npyodide.asm.js:14 Exception in callback None()\r\npyodide.asm.js:14 handle: <Handle cancelled>\r\n```\r\n\r\nThis happens whether the awaitable finishes before the timeout or not. `asyncio.wait_for()` appears to still function as intended, but this makes applications that use `asyncio.wait_for()` frequently very spammy.\r\n\r\n### To Reproduce\r\n\r\nIn [Pyodide console application](https://pyodide.org/en/stable/console.html), enter the following:\r\n\r\n```\r\nimport asyncio\r\nawait asyncio.wait_for(asyncio.sleep(1), 2)\r\n```\r\n\r\n### Expected behavior\r\n\r\nNo exceptions are raised and no output is printed to the console.\r\n\r\n### Environment\r\n\r\n- Pyodide Version: 0.18.1 from https://cdn.jsdelivr.net/pyodide/v0.18.1/full/\r\n- Browser version: Chrome 96.0.4664.55\r\n- Any other relevant information:\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2011/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2006", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/2006/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/2006/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/2006/events", "html_url": "https://github.com/pyodide/pyodide/issues/2006", "id": 1065438551, "node_id": "I_kwDOB0-w-84_gU1X", "number": 2006, "title": "Issues building pyodide on Ubuntu 21.10", "user": {"login": "wlach", "id": 20569, "node_id": "MDQ6VXNlcjIwNTY5", "avatar_url": "https://avatars.githubusercontent.com/u/20569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wlach", "html_url": "https://github.com/wlach", "followers_url": "https://api.github.com/users/wlach/followers", "following_url": "https://api.github.com/users/wlach/following{/other_user}", "gists_url": "https://api.github.com/users/wlach/gists{/gist_id}", "starred_url": "https://api.github.com/users/wlach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wlach/subscriptions", "organizations_url": "https://api.github.com/users/wlach/orgs", "repos_url": "https://api.github.com/users/wlach/repos", "events_url": "https://api.github.com/users/wlach/events{/privacy}", "received_events_url": "https://api.github.com/users/wlach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-11-28T21:17:41Z", "updated_at": "2022-12-02T04:02:09Z", "closed_at": "2022-12-02T04:02:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nRunning `make` on Ubuntu 21.10, I get the following error:\r\n\r\n```\r\ngmake[4]: Leaving directory '/home/wlach/src/pyodide/emsdk/emsdk/ccache/git-emscripten_64bit/build_emscripten_64'\r\n[ 85%] Built target ccache\r\n[ 85%] Building CXX object unittest/CMakeFiles/unittest.dir/test_Config.cpp.o\r\n[ 86%] Building CXX object unittest/CMakeFiles/unittest.dir/test_Counters.cpp.o\r\n[ 87%] Building CXX object unittest/CMakeFiles/unittest.dir/test_Depfile.cpp.o\r\n[ 89%] Building CXX object unittest/CMakeFiles/unittest.dir/test_FormatNonstdStringView.cpp.o\r\n[ 89%] Building CXX object unittest/CMakeFiles/unittest.dir/test_Hash.cpp.o\r\n[ 90%] Building CXX object unittest/CMakeFiles/unittest.dir/test_Lockfile.cpp.o\r\nIn file included from ../../src/unittest/main.cpp:27:\r\n../../src/src/third_party/doctest.h:4189:47: error: size of array \u2018altStackMem\u2019 is not an integral constant-expression\r\n 4189 |         static char             altStackMem[4 * SIGSTKSZ];\r\n      |                                               ^\r\ngmake[4]: *** [unittest/CMakeFiles/unittest.dir/build.make:95: unittest/CMakeFiles/unittest.dir/main.cpp.o] Error 1\r\n```\r\n\r\nIt appears the problem has to do with the doctest.h file included in the version of ccache used to build emscripten (`./emsdk/emsdk/ccache/git-emscripten_64bit/src/src/third_party/doctest.h`). This issue seems to have been fixed upstream (https://github.com/onqtam/doctest/issues/473), though does not seem to have made its way into the version of ccache used by emscripten (https://github.com/juj/ccache/tree/emscripten)\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/2006/reactions", "total_count": 4, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 2}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/2006/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1979", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1979/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1979/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1979/events", "html_url": "https://github.com/pyodide/pyodide/issues/1979", "id": 1058825113, "node_id": "I_kwDOB0-w-84_HGOZ", "number": 1979, "title": "`make test` in docker always fails due broken emsdk/tests", "user": {"login": "phorward", "id": 16870072, "node_id": "MDQ6VXNlcjE2ODcwMDcy", "avatar_url": "https://avatars.githubusercontent.com/u/16870072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phorward", "html_url": "https://github.com/phorward", "followers_url": "https://api.github.com/users/phorward/followers", "following_url": "https://api.github.com/users/phorward/following{/other_user}", "gists_url": "https://api.github.com/users/phorward/gists{/gist_id}", "starred_url": "https://api.github.com/users/phorward/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phorward/subscriptions", "organizations_url": "https://api.github.com/users/phorward/orgs", "repos_url": "https://api.github.com/users/phorward/repos", "events_url": "https://api.github.com/users/phorward/events{/privacy}", "received_events_url": "https://api.github.com/users/phorward/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-19T19:00:30Z", "updated_at": "2021-11-21T17:26:34Z", "closed_at": "2021-11-21T17:26:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nHey, is the emsdk/tests-suite broken or sort of? When I want to run the test suite locally in a docker container, it always fails.\r\n\r\n`make test` produces this immediately on current main branch:\r\n```\r\npytest src emsdk/tests packages/*/test* pyodide-build -v\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.9.5, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /usr/local/bin/python\r\ncachedir: .pytest_cache\r\nhypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/src/.hypothesis/examples')\r\nrootdir: /src, configfile: setup.cfg\r\nplugins: hypothesis-6.14.2, asyncio-0.15.1, cov-2.12.1, forked-1.3.0, httpserver-1.0.0, instafail-0.4.2, rerunfailures-10.1, xdist-2.3.0\r\ncollecting ... collected 2653 items / 5 errors / 2 skipped / 2646 selected\r\n\r\n==================================== ERRORS ====================================\r\n____________________ ERROR collecting emsdk/tests/common.py ____________________\r\n/usr/local/lib/python3.9/importlib/__init__.py:127: in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n<frozen importlib._bootstrap>:1030: in _gcd_import\r\n    ???\r\n<frozen importlib._bootstrap>:1007: in _find_and_load\r\n    ???\r\n<frozen importlib._bootstrap>:984: in _find_and_load_unlocked\r\n    ???\r\nE   ModuleNotFoundError: No module named 'tests.common'\r\n_________________ ERROR collecting emsdk/tests/test_dyncall.py _________________\r\n/usr/local/lib/python3.9/importlib/__init__.py:127: in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n<frozen importlib._bootstrap>:1030: in _gcd_import\r\n    ???\r\n<frozen importlib._bootstrap>:1007: in _find_and_load\r\n    ???\r\n<frozen importlib._bootstrap>:984: in _find_and_load_unlocked\r\n    ???\r\nE   ModuleNotFoundError: No module named 'tests.test_dyncall'\r\n_________________ ERROR collecting emsdk/tests/test_dyncall.py _________________\r\nImportError while importing test module '/src/emsdk/tests/test_dyncall.py'.\r\nHint: make sure your test modules/packages have valid Python names.\r\nTraceback:\r\n/usr/local/lib/python3.9/importlib/__init__.py:127: in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\nE   ModuleNotFoundError: No module named 'tests.test_dyncall'\r\n_________________ ERROR collecting emsdk/tests/test_emulate.py _________________\r\n/usr/local/lib/python3.9/importlib/__init__.py:127: in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n<frozen importlib._bootstrap>:1030: in _gcd_import\r\n    ???\r\n<frozen importlib._bootstrap>:1007: in _find_and_load\r\n    ???\r\n<frozen importlib._bootstrap>:984: in _find_and_load_unlocked\r\n    ???\r\nE   ModuleNotFoundError: No module named 'tests.test_emulate'\r\n_________________ ERROR collecting emsdk/tests/test_emulate.py _________________\r\nImportError while importing test module '/src/emsdk/tests/test_emulate.py'.\r\nHint: make sure your test modules/packages have valid Python names.\r\nTraceback:\r\n/usr/local/lib/python3.9/importlib/__init__.py:127: in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\nE   ModuleNotFoundError: No module named 'tests.test_emulate'\r\n=========================== short test summary info ============================\r\nERROR emsdk/tests/common.py - ModuleNotFoundError: No module named 'tests.com...\r\nERROR emsdk/tests/test_dyncall.py - ModuleNotFoundError: No module named 'tes...\r\nERROR emsdk/tests/test_dyncall.py\r\nERROR emsdk/tests/test_emulate.py - ModuleNotFoundError: No module named 'tes...\r\nERROR emsdk/tests/test_emulate.py\r\n!!!!!!!!!!!!!!!!!!! Interrupted: 5 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n========================= 2 skipped, 5 errors in 1.62s =========================\r\nmake: *** [Makefile:128: test] Error 2\r\n```\r\n\r\nWhen I only run \r\n```\r\npytest src packages/*/test* pyodide-build -v\r\n```\r\nit looks much better and as expected.\r\n\r\n### To Reproduce\r\n\r\n- Checkout current `main` branch\r\n- `./run_docker`\r\n- `make && make test`\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1979/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1978", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1978/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1978/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1978/events", "html_url": "https://github.com/pyodide/pyodide/issues/1978", "id": 1058444018, "node_id": "I_kwDOB0-w-84_FpLy", "number": 1978, "title": "'ci/circleci: test-js' test seems to fail unrelated to any changes", "user": {"login": "DerThorsten", "id": 904752, "node_id": "MDQ6VXNlcjkwNDc1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/904752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DerThorsten", "html_url": "https://github.com/DerThorsten", "followers_url": "https://api.github.com/users/DerThorsten/followers", "following_url": "https://api.github.com/users/DerThorsten/following{/other_user}", "gists_url": "https://api.github.com/users/DerThorsten/gists{/gist_id}", "starred_url": "https://api.github.com/users/DerThorsten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DerThorsten/subscriptions", "organizations_url": "https://api.github.com/users/DerThorsten/orgs", "repos_url": "https://api.github.com/users/DerThorsten/repos", "events_url": "https://api.github.com/users/DerThorsten/events{/privacy}", "received_events_url": "https://api.github.com/users/DerThorsten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-19T11:48:45Z", "updated_at": "2021-11-20T12:39:52Z", "closed_at": "2021-11-20T12:39:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "the 'ci/circleci: test-js' test seems to fail unrelated to any changes\r\n```\r\n../../build/pyproxy.gen.d.ts:249:27\r\n  \u2716  249:27  Cannot find name bool.  \r\n  \u2716  250:25  Cannot find name bool.  \r\n```\r\nI see two PRs failing this test even though the changes are unrelated:\r\nhttps://app.circleci.com/pipelines/github/pyodide/pyodide/3181/workflows/f0d34ca0-1319-4888-99bf-bd467b15320f/jobs/33621\r\nhttps://app.circleci.com/pipelines/github/ryanking13/pyodide/34/workflows/affba5ae-ab35-4ef5-8af6-a2cd32f0a228/jobs/490", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1963", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1963/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1963/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1963/events", "html_url": "https://github.com/pyodide/pyodide/issues/1963", "id": 1053397312, "node_id": "I_kwDOB0-w-84-yZFA", "number": 1963, "title": "compile error, wasm-ld complain unknown argument", "user": {"login": "hzhangxyz", "id": 11623447, "node_id": "MDQ6VXNlcjExNjIzNDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/11623447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hzhangxyz", "html_url": "https://github.com/hzhangxyz", "followers_url": "https://api.github.com/users/hzhangxyz/followers", "following_url": "https://api.github.com/users/hzhangxyz/following{/other_user}", "gists_url": "https://api.github.com/users/hzhangxyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/hzhangxyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hzhangxyz/subscriptions", "organizations_url": "https://api.github.com/users/hzhangxyz/orgs", "repos_url": "https://api.github.com/users/hzhangxyz/repos", "events_url": "https://api.github.com/users/hzhangxyz/events{/privacy}", "received_events_url": "https://api.github.com/users/hzhangxyz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-15T09:17:00Z", "updated_at": "2021-11-17T04:08:59Z", "closed_at": "2021-11-17T04:08:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nCompile error: \r\n```\r\nwasm-ld: error: unknown argument: --sort-common\r\nwasm-ld: error: unknown argument: --as-needed\r\nwasm-ld: error: unknown argument: --sort-common\r\nwasm-ld: error: unknown argument: --as-needed\r\n```\r\n\r\n### To Reproduce\r\n\r\nmake the project\r\n\r\n### Expected behavior\r\n\r\nmake succesful\r\n\r\n### Environment\r\n\r\n- Commit hash of Pyodide git repository: (f58d9c1)\r\n- Build environment: arch linux\r\n\r\nI compile with command:\r\n```\r\nPYODIDE_JOBS=5 PYODIDE_PACKAGES=\"micropip,numpy\" PATH=$PATH:$PWD/../f2c/src make\r\n```\r\n\r\n### Additional context\r\n\r\nmake call many things I don't know about, but the last, the error is raised by `wasm-ldd`,\r\n`wasm-ldd` is called by `emcc` which arguments contains:\r\n```\r\n-Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now\r\n -fno-semantic-interposition -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now\r\n```\r\n\r\nIt seems when pyodide run setup.py, it import my system's config, while in my system\r\n```\r\n/usr/lib/python3.9/_sysconfigdata__linux_x86_64-linux-gnu.py\r\n```\r\nhave a line:\r\n```\r\n 'LDSHARED': 'gcc -pthread -shared '\r\n             '-Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now '\r\n             '-fno-semantic-interposition '\r\n             '-Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now',\r\n```\r\n\r\nIs there any former mistake happened? the `emcc` argument should not contains parameter from my system's config?\r\nOr I need to change my system's config to be compatible with wasm tool chain?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1945", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1945/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1945/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1945/events", "html_url": "https://github.com/pyodide/pyodide/issues/1945", "id": 1049495548, "node_id": "I_kwDOB0-w-84-jgf8", "number": 1945, "title": "Unable to import `matplotlib` in 0.18.1", "user": {"login": "vrthra", "id": 70410, "node_id": "MDQ6VXNlcjcwNDEw", "avatar_url": "https://avatars.githubusercontent.com/u/70410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vrthra", "html_url": "https://github.com/vrthra", "followers_url": "https://api.github.com/users/vrthra/followers", "following_url": "https://api.github.com/users/vrthra/following{/other_user}", "gists_url": "https://api.github.com/users/vrthra/gists{/gist_id}", "starred_url": "https://api.github.com/users/vrthra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vrthra/subscriptions", "organizations_url": "https://api.github.com/users/vrthra/orgs", "repos_url": "https://api.github.com/users/vrthra/repos", "events_url": "https://api.github.com/users/vrthra/events{/privacy}", "received_events_url": "https://api.github.com/users/vrthra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-10T07:42:28Z", "updated_at": "2021-11-11T13:54:58Z", "closed_at": "2021-11-11T13:54:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bug\r\n\r\nI am unable to import matplotlib in 0.18.1 pyodide release.\r\n\r\n### To Reproduce\r\n\r\n```shell\r\n$ bzcat ../pyodide-build-0.18.1.tar.bz2| tar -xvpf -\r\n```\r\n\r\n```html\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n     <meta charset=\"utf-8\"/>\r\n      <script src=\"/pyodide/pyodide.js\"></script>\r\n  </head>\r\n  <body>\r\n    Pyodide test page <br>\r\n    Open your browser console to see Pyodide output\r\n    <script type=\"text/javascript\">\r\n      async function main(){\r\n        let pyodide = await loadPyodide({\r\n          indexURL : \"/pyodide/\"\r\n        });\r\n        pyodide.loadPackage(\"matplotlib\");\r\n        // pyodide.loadPackage(\"/pyodide/matplotlib.js\");\r\n        console.log(pyodide.runPython(`\r\n            import sys\r\n            import matplotlib\r\n            print(sys.version)\r\n        `));\r\n\r\n      }\r\n      main();\r\n    </script>\r\n  </body>\r\n</html>\r\n```\r\n\r\nThis produces\r\n\r\n```\r\n-----\r\npyodide.asm.js:14 wasm streaming compile failed: TypeError: Failed to execute 'compile' on 'WebAssembly': Incorrect response MIME type. Expected 'application/wasm'.\r\n(anonymous) @ pyodide.asm.js:14\r\n-----\r\npyodide.asm.js:14 falling back to ArrayBuffer instantiation\r\n(anonymous) @ pyodide.asm.js:14\r\npyodide.asm.js:14 Python initialization complete\r\nload-pyodide.js:172 Loading distutils\r\nload-pyodide.js:198 Loading distutils from /pyodide/distutils.js\r\nload-pyodide.js:252 Loaded distutils\r\n-----\r\npyodide.asm.js:14 Python exception:\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 415, in eval_code\r\n    CodeRunner(\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 296, in run\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 3, in <module>\r\nModuleNotFoundError: No module named 'matplotlib'\r\n-----\r\nlog_python_error @ pyodide.asm.js:14\r\nload-pyodide.js:172 Loading matplotlib, distutils, cycler, six, kiwisolver, numpy, pillow, pyparsing, python-dateutil, pytz\r\nload-pyodide.js:198 Loading matplotlib from /pyodide/matplotlib.js\r\nload-pyodide.js:185 distutils already loaded from default channel\r\nload-pyodide.js:198 Loading cycler from /pyodide/cycler.js\r\nload-pyodide.js:198 Loading six from /pyodide/six.js\r\nload-pyodide.js:198 Loading kiwisolver from /pyodide/kiwisolver.js\r\nload-pyodide.js:198 Loading numpy from /pyodide/numpy.js\r\nload-pyodide.js:198 Loading pillow from /pyodide/pillow.js\r\nload-pyodide.js:198 Loading pyparsing from /pyodide/pyparsing.js\r\nload-pyodide.js:198 Loading python-dateutil from /pyodide/python-dateutil.js\r\nload-pyodide.js:198 Loading pytz from /pyodide/pytz.js\r\nload-pyodide.js:252 Loaded matplotlib, distutils, cycler, six, kiwisolver, numpy, pillow, pyparsing, python-dateutil, pytz\r\n```\r\nI confirmed that `matplotlib` is indeed present in the filesystem.\r\n\r\n```shell\r\n$ ls pyodide/matplotlib.*\r\npyodide/matplotlib.data\r\npyodide/matplotlib.js\r\n```\r\n\r\n### Expected behavior\r\n\r\nIt was expected that I should see the `sys.version` in the console log.\r\n\r\n### Environment\r\n\r\n- Pyodide Version 0.18.1\r\n- Browser version Chrome Version 95.0.4638.54 (Official Build) (x86_64),  Firefox 94.0.1\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1945/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1899", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1899/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1899/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1899/events", "html_url": "https://github.com/pyodide/pyodide/issues/1899", "id": 1034292917, "node_id": "I_kwDOB0-w-849pg61", "number": 1899, "title": "micropip import error", "user": {"login": "eyalk11", "id": 72234965, "node_id": "MDQ6VXNlcjcyMjM0OTY1", "avatar_url": "https://avatars.githubusercontent.com/u/72234965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eyalk11", "html_url": "https://github.com/eyalk11", "followers_url": "https://api.github.com/users/eyalk11/followers", "following_url": "https://api.github.com/users/eyalk11/following{/other_user}", "gists_url": "https://api.github.com/users/eyalk11/gists{/gist_id}", "starred_url": "https://api.github.com/users/eyalk11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eyalk11/subscriptions", "organizations_url": "https://api.github.com/users/eyalk11/orgs", "repos_url": "https://api.github.com/users/eyalk11/repos", "events_url": "https://api.github.com/users/eyalk11/events{/privacy}", "received_events_url": "https://api.github.com/users/eyalk11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1412085227, "node_id": "MDU6TGFiZWwxNDEyMDg1MjI3", "url": "https://api.github.com/repos/pyodide/pyodide/labels/build", "name": "build", "color": "fcc7df", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-10-24T00:35:26Z", "updated_at": "2022-09-17T08:03:45Z", "closed_at": "2022-09-17T08:03:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "After building pyodide, I tried the following code : \r\n```\r\n            pyodide.loadPackage(\"micropip\").then(() => {\r\n                pyodide.runPythonAsync(`\r\n                    import micropip\r\n                `);\r\n            });\r\n```\r\n```\r\npyodide.asm.js:14 Uncaught (in promise) PythonError: Traceback (most recent call last):\r\n  File \"/lib/python3.9/asyncio/futures.py\", line 201, in result\r\n    raise self._exception\r\n  File \"/lib/python3.9/asyncio/tasks.py\", line 256, in __step\r\n    result = coro.send(None)\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 494, in eval_code_async\r\n    await CodeRunner(\r\n  File \"/lib/python3.9/site-packages/_pyodide/_base.py\", line 345, in run_async\r\n    coroutine = eval(self.code, globals, locals)\r\n  File \"<exec>\", line 2, in <module>\r\nModuleNotFoundError: No module named 'micropip'\r\n\r\n    at new_error (pyodide.asm.js:14)\r\n    at pyodide.asm.wasm:0x1b9399\r\n    at pyodide.asm.wasm:0x1bd7d6\r\n    at pyodide.asm.wasm:0x853699\r\n    at pyodide.asm.wasm:0x1f73c1\r\n    at pyodide.asm.wasm:0x2f2f19\r\n    at pyodide.asm.wasm:0x87250d\r\n    at pyodide.asm.wasm:0x23ed39\r\n    at pyodide.asm.wasm:0x8708c8\r\n    at pyodide.asm.wasm:0x1f7b76\r\n```\r\n\r\n\r\n\r\nI built just some of packages, because of some errors. But `./packages/micropip/build/micropip-0.1/micropip` exists. ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1899/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1846", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1846/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1846/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1846/events", "html_url": "https://github.com/pyodide/pyodide/issues/1846", "id": 998884879, "node_id": "I_kwDOB0-w-847icYP", "number": 1846, "title": "Error calling `loadPyodide` if a global exists named `process`", "user": {"login": "ijc8", "id": 99575, "node_id": "MDQ6VXNlcjk5NTc1", "avatar_url": "https://avatars.githubusercontent.com/u/99575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijc8", "html_url": "https://github.com/ijc8", "followers_url": "https://api.github.com/users/ijc8/followers", "following_url": "https://api.github.com/users/ijc8/following{/other_user}", "gists_url": "https://api.github.com/users/ijc8/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijc8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijc8/subscriptions", "organizations_url": "https://api.github.com/users/ijc8/orgs", "repos_url": "https://api.github.com/users/ijc8/repos", "events_url": "https://api.github.com/users/ijc8/events{/privacy}", "received_events_url": "https://api.github.com/users/ijc8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-17T03:17:35Z", "updated_at": "2021-09-19T23:37:45Z", "closed_at": "2021-09-19T23:37:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reproducing example:\r\n```html\r\n<script>\r\nfunction process(buffer) {\r\n    // Some interesting processing occurs here...\r\n}\r\n</script>\r\n<script src=\"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/pyodide.js\"></script>\r\n<script>\r\nasync function main() {\r\n    let pyodide = await loadPyodide({ indexURL : \"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/\" })\r\n    console.log(\"Done loading.\")\r\n}\r\nmain()\r\n</script>\r\n```\r\nThis can be worked around by making sure pyodide is pulled in first. However, the same fix does not work in a web worker:\r\n```js\r\nimportScripts(\"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/pyodide.js\")\r\n\r\nfunction process(buffer) {\r\n    // Some interesting processing occurs here...\r\n}\r\n\r\nasync function main() {\r\n  await loadPyodide({ indexURL: \"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/\" })\r\n  console.log(\"Done loading.\")\r\n}\r\n\r\nmain()\r\n```\r\n\r\nBoth of these examples fail with an error like `TypeError: process.release is undefined` or `TypeError: Cannot read property 'name' of undefined`.\r\n\r\nI suspect this is an unintended consequence of the check to see if Pyodide is running in Node.js [here](https://github.com/pyodide/pyodide/blob/f03db870a25039bd70ac8822e0c3fe8be8ddb3fa/src/js/load-pyodide.js#L4). I think the check should instead look something like\r\n```js\r\nconst IN_NODE = typeof process !== \"undefined\" && typeof process.release?.name !== \"undefined\"\r\n```\r\n(See also: the comments on this [SO answer](https://stackoverflow.com/a/35813135/13204291).)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1846/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1841", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1841/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1841/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1841/events", "html_url": "https://github.com/pyodide/pyodide/issues/1841", "id": 997884777, "node_id": "I_kwDOB0-w-847eoNp", "number": 1841, "title": "Low level crash due to destroyed proxy", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-16T07:38:02Z", "updated_at": "2021-09-20T21:51:31Z", "closed_at": "2021-09-20T21:51:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following code causes a low level failure:\r\n```js\r\nglobalThis.f = function(x){ return x };\r\npyodide.runPython(`\r\n   from pyodide import create_proxy\r\n   from js import f\r\n   p = create_proxy([])\r\n   p.destroy()\r\n   f(p) \r\n`);\r\n```\r\nThis is a regression caused by #1573. Discovered while writing #1840.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1841/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1810", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1810/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1810/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1810/events", "html_url": "https://github.com/pyodide/pyodide/issues/1810", "id": 986820803, "node_id": "MDU6SXNzdWU5ODY4MjA4MDM=", "number": 1810, "title": "REPL bytes repr is incorrect", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3249764404, "node_id": "MDU6TGFiZWwzMjQ5NzY0NDA0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/REPL", "name": "REPL", "color": "94663B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-02T14:39:26Z", "updated_at": "2021-09-02T15:55:03Z", "closed_at": "2021-09-02T15:55:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With 0.18 in REPL,\r\n\r\n```py\r\n>>> x = b'123'\r\n>>> x\r\n49,50,51  \r\n>>> x.__repr__()\r\n\"b'123'\"\r\n>>> x.__str__()\r\n\"b'123'\"\r\n```\r\n### Expected result\r\n```py\r\n>>> x\r\nb'123'\r\n```\r\n\r\nI haven't checked the code yet, but I would have expected `__repr__` to be used for displaying REPL output.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1809", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1809/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1809/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1809/events", "html_url": "https://github.com/pyodide/pyodide/issues/1809", "id": 983429897, "node_id": "MDU6SXNzdWU5ODM0Mjk4OTc=", "number": 1809, "title": "Pandas line with exception prints stacktrace incorrectly", "user": {"login": "leopsidom", "id": 12235069, "node_id": "MDQ6VXNlcjEyMjM1MDY5", "avatar_url": "https://avatars.githubusercontent.com/u/12235069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leopsidom", "html_url": "https://github.com/leopsidom", "followers_url": "https://api.github.com/users/leopsidom/followers", "following_url": "https://api.github.com/users/leopsidom/following{/other_user}", "gists_url": "https://api.github.com/users/leopsidom/gists{/gist_id}", "starred_url": "https://api.github.com/users/leopsidom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leopsidom/subscriptions", "organizations_url": "https://api.github.com/users/leopsidom/orgs", "repos_url": "https://api.github.com/users/leopsidom/repos", "events_url": "https://api.github.com/users/leopsidom/events{/privacy}", "received_events_url": "https://api.github.com/users/leopsidom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-31T04:28:30Z", "updated_at": "2021-12-07T13:12:15Z", "closed_at": "2021-12-07T13:12:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Found an interesting case where the exception does not seem to be handled correctly\r\n\r\nReproduce step, type the following in REPL: https://pyodide.org/en/stable/console.html\r\n\r\n```\r\nimport pandas as pd\r\ndf = pd.DataFrame({\"customer_code\": ['1234','3411','9303'],\r\n                   \"main_purchases\": [3,10,5],\r\n                   \"main_revenue\": [103.5,401.5,99.0],\r\n                   \"secondary_purchases\": [1,2,4],\r\n                   \"secondary_revenue\": [43.1,77.5,104.6]\r\n                  })\r\n\r\ndf.set_index('customer_code').rename(columns=lambda x: x.split('_'))\r\n```\r\n\r\nThis will result in:\r\n> [Command] fut.formatted_error is undefined\r\n\r\nIf we run the above code in a native python terminal, we get the following stack trace:\r\n\r\n> Traceback (most recent call last):\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 5231, in pandas._libs.hashtable.PyObjectHashTable.map_locations\r\nTypeError: unhashable type: 'list'\r\nException ignored in: 'pandas._libs.index.IndexEngine._call_map_locations'\r\nTraceback (most recent call last):\r\n  File \"pandas/_libs/hashtable_class_helper.pxi\", line 5231, in pandas._libs.hashtable.PyObjectHashTable.map_locations\r\nTypeError: unhashable type: 'list'\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/core/frame.py\", line 995, in __repr__\r\n    self.to_string(\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/core/frame.py\", line 1131, in to_string\r\n    return fmt.DataFrameRenderer(formatter).to_string(\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 1053, in to_string\r\n    string = string_formatter.to_string()\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/string.py\", line 25, in to_string\r\n    text = self._get_string_representation()\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/string.py\", line 40, in _get_string_representation\r\n    strcols = self._get_strcols()\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/string.py\", line 31, in _get_strcols\r\n    strcols = self.fmt.get_strcols()\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 540, in get_strcols\r\n    strcols = self._get_strcols_without_index()\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 793, in _get_strcols_without_index\r\n    str_columns = self._get_formatted_column_labels(self.tr_frame)\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 874, in _get_formatted_column_labels\r\n    str_columns = [\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 875, in <listcomp>\r\n    [\" \" + x if not self._get_formatter(i) and need_leadsp[x] else x]\r\n  File \"/Users/yaxiaoy/AWSResourcesAnalysis/lib/python3.8/site-packages/pandas/io/formats/format.py\", line 838, in _get_formatter\r\n    return self.formatters.get(i, None)\r\nTypeError: unhashable type: 'list'\r\n\r\n\r\nSeems to have something to do with `repr`, but can't confirm yet.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1809/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1801", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1801/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1801/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1801/events", "html_url": "https://github.com/pyodide/pyodide/issues/1801", "id": 978377977, "node_id": "MDU6SXNzdWU5NzgzNzc5Nzc=", "number": 1801, "title": "`open_url` call results in infinite recursion in 0.18.0", "user": {"login": "ibdafna", "id": 24281433, "node_id": "MDQ6VXNlcjI0MjgxNDMz", "avatar_url": "https://avatars.githubusercontent.com/u/24281433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibdafna", "html_url": "https://github.com/ibdafna", "followers_url": "https://api.github.com/users/ibdafna/followers", "following_url": "https://api.github.com/users/ibdafna/following{/other_user}", "gists_url": "https://api.github.com/users/ibdafna/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibdafna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibdafna/subscriptions", "organizations_url": "https://api.github.com/users/ibdafna/orgs", "repos_url": "https://api.github.com/users/ibdafna/repos", "events_url": "https://api.github.com/users/ibdafna/events{/privacy}", "received_events_url": "https://api.github.com/users/ibdafna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3255319076, "node_id": "MDU6TGFiZWwzMjU1MzE5MDc2", "url": "https://api.github.com/repos/pyodide/pyodide/labels/regression", "name": "regression", "color": "B64609", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/8", "html_url": "https://github.com/pyodide/pyodide/milestone/8", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/8/labels", "id": 7056518, "node_id": "MI_kwDOB0-w-84Aa6yG", "number": 8, "title": "0.18.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2021-08-13T08:40:56Z", "updated_at": "2021-12-20T11:56:17Z", "due_on": null, "closed_at": "2021-12-20T11:56:17Z"}, "comments": 7, "created_at": "2021-08-24T18:38:11Z", "updated_at": "2021-08-30T16:17:30Z", "closed_at": "2021-08-30T16:17:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi team,\r\n\r\nPyodide 0.18.0 seems to have an issue with the Python API for opening URLs, 'pyodide.open_url`, which results in an infinite recursion when returning. The following code snippet reproduces the error in the [Pyodide Console](https://pyodide.org/en/latest/console.html):\r\n\r\n```python\r\n>>> import pyodide; pyodide.open_url('https://plotly.github.io/datasets/country_indicators.csv')\r\nTraceback (most recent call last):\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/lib/python3.9/site-packages/pyodide/_util.py\", line 27, in open_url\r\n    return StringIO(req.response)\r\n  File \"???.js\", line -1, in <javascript frames>\r\nJsException: RangeError: Maximum call stack size exceeded\r\n```\r\n\r\nI can confirm this is working in 0.17.0.\r\n\r\n~The root cause seems to be the `_pythonexc2js` function, but I am not entirely sure.~ I'm happy to take a look if someone could point me in the right direction!\r\n\r\nMany thanks \ud83d\ude04 ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1801/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1792", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1792/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1792/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1792/events", "html_url": "https://github.com/pyodide/pyodide/issues/1792", "id": 970188933, "node_id": "MDU6SXNzdWU5NzAxODg5MzM=", "number": 1792, "title": "AttributeError: '_WriteStream' object has no attribute 'isatty'", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3249764404, "node_id": "MDU6TGFiZWwzMjQ5NzY0NDA0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/REPL", "name": "REPL", "color": "94663B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/8", "html_url": "https://github.com/pyodide/pyodide/milestone/8", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/8/labels", "id": 7056518, "node_id": "MI_kwDOB0-w-84Aa6yG", "number": 8, "title": "0.18.1", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2021-08-13T08:40:56Z", "updated_at": "2021-12-20T11:56:17Z", "due_on": null, "closed_at": "2021-12-20T11:56:17Z"}, "comments": 0, "created_at": "2021-08-13T08:40:10Z", "updated_at": "2021-09-08T16:41:22Z", "closed_at": "2021-09-08T16:41:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While trying to run pytest on a package in REPL (for https://github.com/pyodide/pyodide/issues/1791),\r\n```\r\n>>> import pytest\r\n>>> import micropip\r\n>>> await micropip.install('dit-cli')\r\n>>> import dit_cli\r\n>>> pytest.main(['--pyargs', 'dit_cli'])\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/_pytest/main.py\", line 265, in wrap_session\r\nINTERNALERROR>     config._do_configure()\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/_pytest/config/__init__.py\", line 982, in _do_configure\r\nINTERNALERROR>     self.hook.pytest_configure.call_historic(kwargs=dict(config=self))\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/hooks.py\", line 308, in call_historic\r\nINTERNALERROR>     res = self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/manager.py\", line 84, in <lambda>\r\nINTERNALERROR>     self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/_pytest/terminal.py\", line 228, in pytest_configure\r\nINTERNALERROR>     reporter = TerminalReporter(config, sys.stdout)\r\nINTERNALERROR>   File \"/lib/python3.9/site-packages/_pytest/terminal.py\", line 337, in __init__\r\nINTERNALERROR>     self.isatty = file.isatty()\r\nINTERNALERROR> AttributeError: '_WriteStream' object has no attribute 'isatty'\r\n```\r\n\r\nso we would need to implement that method. As far as I understand from https://docs.python.org/3/library/os.html#os.isatty it should return True for _WriteStream.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1792/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1787", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1787/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1787/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1787/events", "html_url": "https://github.com/pyodide/pyodide/issues/1787", "id": 966582962, "node_id": "MDU6SXNzdWU5NjY1ODI5NjI=", "number": 1787, "title": "Ctrl+C support in REPL", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3249764404, "node_id": "MDU6TGFiZWwzMjQ5NzY0NDA0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/REPL", "name": "REPL", "color": "94663B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-11T12:08:36Z", "updated_at": "2021-08-13T18:13:47Z", "closed_at": "2021-08-13T18:13:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Right now if one enters a statement that is syntactically invalid, for instance,\r\n```py\r\ndef func():\r\n    \"\"\"A function\"\"\r\n    return\r\n``` \r\nwith unbalanced quotes, the REPL will continue asking for new input on Enter, and assumes that the statement is incomplete. Except that there is no way to fix that statement since we currently don't allow editing previous lines. I have not found a way to interrupt it short of restarting the REPL.\r\n\r\nAdding support for Ctrl+C to stop asking for new REPL input would be good.\r\n\r\nIn the standard Python REPL,\r\n```\r\n>>> a # + Ctrl+C\r\nKeyboardInterrupt\r\n``` ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1787/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1787/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1632", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1632/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1632/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1632/events", "html_url": "https://github.com/pyodide/pyodide/issues/1632", "id": 913795716, "node_id": "MDU6SXNzdWU5MTM3OTU3MTY=", "number": 1632, "title": "pillow jpg encoder error", "user": {"login": "yxdragon", "id": 24822467, "node_id": "MDQ6VXNlcjI0ODIyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/24822467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yxdragon", "html_url": "https://github.com/yxdragon", "followers_url": "https://api.github.com/users/yxdragon/followers", "following_url": "https://api.github.com/users/yxdragon/following{/other_user}", "gists_url": "https://api.github.com/users/yxdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yxdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yxdragon/subscriptions", "organizations_url": "https://api.github.com/users/yxdragon/orgs", "repos_url": "https://api.github.com/users/yxdragon/repos", "events_url": "https://api.github.com/users/yxdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/yxdragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-06-07T17:41:46Z", "updated_at": "2021-12-11T03:21:38Z", "closed_at": "2021-12-11T03:21:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I try use PIL read/write in bmp, png, jpg, tif. jpg not work:\r\n![image](https://user-images.githubusercontent.com/24822467/121064842-a6da2e00-c7fa-11eb-9d8b-0a1d11388816.png)\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1473", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1473/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1473/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1473/events", "html_url": "https://github.com/pyodide/pyodide/issues/1473", "id": 858977033, "node_id": "MDU6SXNzdWU4NTg5NzcwMzM=", "number": 1473, "title": "Memory access out of bounds numpy + chrome 89", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-15T15:06:15Z", "updated_at": "2021-04-17T21:17:19Z", "closed_at": "2021-04-17T21:17:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a continuation of #1384. The new problem is in `PyArray_Broadcast`. The crash specifically happens on line 1177 here.\r\nhttps://github.com/numpy/numpy/blob/648fe68f79dfbad21947db4b55873703db0675c4/numpy/core/src/multiarray/iterators.c#L1177\r\n\r\nRelevant WAT:\r\n```wat\r\nlocal.get $var0 ;; mit\r\nlocal.get $var3 ;; j\r\ni32.const 2\r\ni32.shl\r\ni32.add ;; &mit->it[j]\r\ni32.load offset=152 ;; crash here 24 + 32 * 4 = 152\r\n```\r\nSee also the definition of PyArrayMultiIterObject:\r\nhttps://github.com/numpy/numpy/blob/648fe68f79dfbad21947db4b55873703db0675c4/numpy/core/include/numpy/ndarraytypes.h#L1231\r\n\r\nI've been triggering it with \r\n```py\r\nimport numpy as np\r\nnp.meshgrid(range(10), range(10))\r\n```\r\nwhich isn't completely consistent but works frequently.\r\n\r\nLuckily the CI catches this: the benchmark evolve has been failing to this bug ever since @rth updated the CI to use chrome 89 \r\n#1462.\r\nhttps://app.circleci.com/pipelines/github/pyodide/pyodide/2673/workflows/a9aec892-261d-4eb9-bd4c-3fee0f8bd7a5/jobs/27749\r\n\r\n\r\nHere's a typical stack trace:\r\n```\r\npyodide.js:433 Pyodide has suffered a fatal error, refresh the page. Please report this to the Pyodide maintainers.\r\npyodide.js:434 The cause of the fatal error was:\r\npyodide.js:435 RuntimeError: memory access out of bounds\r\n    at PyArray_Broadcast (<anonymous>:wasm-function[1536]:0xcdab3)\r\n    at <anonymous>:wasm-function[1538]:0xce06f\r\n    at __static_809 (<anonymous>:wasm-function[1542]:0xce5f0)\r\n    at byn$fpcast-emu$__static_809 (<anonymous>:wasm-function[6879]:0x219772)\r\n    at __static_861 (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[1971]:0x22cb00)\r\n    at byn$fpcast-emu$__static_861 (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[22300]:0x7be366)\r\n    at PyObject_Call (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[762]:0x1caeef)\r\n    at _PyEval_EvalFrameDefault (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[2757]:0x2a9d0c)\r\n    at byn$fpcast-emu$_PyEval_EvalFrameDefault (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[15505]:0x7a5f10)\r\n    at _PyEval_EvalCodeWithName (https://cdn.jsdelivr.net/pyodide/dev/full/pyodide.asm.wasm:wasm-function[2753]:0x2a41e4)\r\nStack (most recent call first):\r\nFile \"/lib/python3.8/site-packages/numpy/lib/stride_tricks.py\", line 191 in _broadcast_shape\r\nFile \"/lib/python3.8/site-packages/numpy/lib/stride_tricks.py\", line 264 in broadcast_arrays\r\nFile \"<__array_function__ internals>\", line 5 in broadcast_arrays\r\nFile \"/lib/python3.8/site-packages/numpy/lib/function_base.py\", line 4213 in meshgrid\r\nFile \"<__array_function__ internals>\", line 5 in meshgrid\r\nFile \"<exec>\", line 1 in <module>\r\nFile \"/lib/python3.8/site-packages/pyodide/_base.py\", line 276 in run_async\r\nFile \"/lib/python3.8/site-packages/pyodide/_base.py\", line 419 in eval_code_async\r\nFile \"/lib/python3.8/site-packages/pyodide/console.py\", line 233 in load_packages_and_run\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1440", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1440/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1440/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1440/events", "html_url": "https://github.com/pyodide/pyodide/issues/1440", "id": 852546830, "node_id": "MDU6SXNzdWU4NTI1NDY4MzA=", "number": 1440, "title": "TypeError in sklearn.linear_model.LogisticRegression with L-BFGS solver", "user": {"login": "Aayush-N", "id": 14202082, "node_id": "MDQ6VXNlcjE0MjAyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/14202082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aayush-N", "html_url": "https://github.com/Aayush-N", "followers_url": "https://api.github.com/users/Aayush-N/followers", "following_url": "https://api.github.com/users/Aayush-N/following{/other_user}", "gists_url": "https://api.github.com/users/Aayush-N/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aayush-N/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aayush-N/subscriptions", "organizations_url": "https://api.github.com/users/Aayush-N/orgs", "repos_url": "https://api.github.com/users/Aayush-N/repos", "events_url": "https://api.github.com/users/Aayush-N/events{/privacy}", "received_events_url": "https://api.github.com/users/Aayush-N/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2928710534, "node_id": "MDU6TGFiZWwyOTI4NzEwNTM0", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Fatal%20Error", "name": "Fatal Error", "color": "B60205", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-04-07T15:47:26Z", "updated_at": "2022-01-04T02:01:13Z", "closed_at": "2022-01-04T02:01:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everyone, \r\n\r\nI'm trying to run the following code from the [sklearn documentation ](https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html):\r\n\r\n\r\n```\r\nfrom sklearn.datasets import load_iris\r\nfrom sklearn.linear_model import LogisticRegression\r\nX, y = load_iris(return_X_y=True)\r\nclf = LogisticRegression(random_state=0).fit(X, y)\r\nprint(clf.predict(X[:2, :]))\r\nprint(clf.predict_proba(X[:2, :]))\r\nprint(clf.score(X, y))\r\n```\r\n\r\nIn the browser I get this:\r\n\r\n```\r\nPyodide has suffered a fatal error, refresh the page. Please report this to the Pyodide maintainers.\r\n\r\nThe cause of the fatal error was:\r\n\r\n```\r\n\r\nIn the console I see this error:\r\n\r\n```\r\nUncaught (in promise) TypeError: Cannot read property 'apply' of undefined\r\n    at obj.<computed> (pyodide.asm.js:9)\r\n    at mainlb_ (:8000/code-editor/hello/<anonymous>:wasm-function[90]:0x5b9c)\r\n    at setulb_ (:8000/code-editor/hello/<anonymous>:wasm-function[89]:0x5b36)\r\n    at byn$fpcast-emu$setulb_ (:8000/code-editor/hello/<anonymous>:wasm-function[116]:0xd547)\r\n    at f2py_rout__lbfgsb_setulb (:8000/code-editor/hello/<anonymous>:wasm-function[69]:0x2264)\r\n    at byn$fpcast-emu$f2py_rout__lbfgsb_setulb (:8000/code-editor/hello/<anonymous>:wasm-function[147]:0xd9d2)\r\n    at fortran_call (:8000/code-editor/hello/<anonymous>:wasm-function[83]:0x50c7)\r\n    at byn$fpcast-emu$fortran_call (:8000/code-editor/hello/<anonymous>:wasm-function[153]:0xda1c)\r\n    at _PyObject_MakeTpCall (cdn.jsdelivr.net/pyodide/v0.17.0a2/full/pyodide.asm.wasm:wasm-function[766]:0x1cd1a3)\r\n    at cdn.jsdelivr.net/pyodide/v0.17.0a2/full/pyodide.asm.wasm:wasm-function[2771]:0x2b93e9\r\n\r\n```\r\n\r\nI tried running it with the latest alpha release and the stable v16 and see the same error in both. \r\n\r\nAny help to overcome this is greatly appreciated, thanks!", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1440/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1384", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1384/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1384/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1384/events", "html_url": "https://github.com/pyodide/pyodide/issues/1384", "id": 842815536, "node_id": "MDU6SXNzdWU4NDI4MTU1MzY=", "number": 1384, "title": "Memory access out of bounds in Chrome", "user": {"login": "dmondev", "id": 14889087, "node_id": "MDQ6VXNlcjE0ODg5MDg3", "avatar_url": "https://avatars.githubusercontent.com/u/14889087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmondev", "html_url": "https://github.com/dmondev", "followers_url": "https://api.github.com/users/dmondev/followers", "following_url": "https://api.github.com/users/dmondev/following{/other_user}", "gists_url": "https://api.github.com/users/dmondev/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmondev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmondev/subscriptions", "organizations_url": "https://api.github.com/users/dmondev/orgs", "repos_url": "https://api.github.com/users/dmondev/repos", "events_url": "https://api.github.com/users/dmondev/events{/privacy}", "received_events_url": "https://api.github.com/users/dmondev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2891745707, "node_id": "MDU6TGFiZWwyODkxNzQ1NzA3", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Blocker", "name": "Blocker", "color": "B60205", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/4", "html_url": "https://github.com/pyodide/pyodide/milestone/4", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/4/labels", "id": 5776401, "node_id": "MDk6TWlsZXN0b25lNTc3NjQwMQ==", "number": 4, "title": "0.17.0", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2020-08-16T09:03:58Z", "updated_at": "2021-09-11T12:22:14Z", "due_on": "2021-04-22T07:00:00Z", "closed_at": "2021-04-21T21:28:35Z"}, "comments": 67, "created_at": "2021-03-28T19:46:02Z", "updated_at": "2021-04-17T09:33:45Z", "closed_at": "2021-04-15T15:16:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm getting the following intermittent error running the develop version in Chrome, running from a web worker.\r\n\r\nChrome Version 89.0.4389.90 (Official Build) (64-bit)\r\nWindows 10 1909 build 18363.1379\r\n\r\npyodide.js:406 The cause of the fatal error was:\r\n RuntimeError: memory access out of bounds\r\n    at PyArray_IntpFromIndexSequence (<anonymous>:wasm-function[991]:0x737a1)\r\n    at PyArray_IntpConverter (<anonymous>:wasm-function[990]:0x73702)\r\n    at byn$fpcast-emu$PyArray_IntpConverter (<anonymous>:wasm-function[3415]:0x15bfeb)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1384/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1286", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1286/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1286/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1286/events", "html_url": "https://github.com/pyodide/pyodide/issues/1286", "id": 816662847, "node_id": "MDU6SXNzdWU4MTY2NjI4NDc=", "number": 1286, "title": "Bug: Syntax error handling in console.html", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-25T17:55:09Z", "updated_at": "2021-04-18T16:14:25Z", "closed_at": "2021-04-18T16:14:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Syntax errors in console.html are not printed immediately, only after the next command is submitted. E.g., type `1+<ENTER>` into console.html.\r\n\r\nI think this was introduced in #1125. I investigated but I can't figure out why it's happening. Any ideas @casatir?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1286/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1221", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1221/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1221/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1221/events", "html_url": "https://github.com/pyodide/pyodide/issues/1221", "id": 804847410, "node_id": "MDU6SXNzdWU4MDQ4NDc0MTA=", "number": 1221, "title": "Soundness issues in buffer conversions code", "user": {"login": "hoodmane", "id": 8739626, "node_id": "MDQ6VXNlcjg3Mzk2MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8739626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoodmane", "html_url": "https://github.com/hoodmane", "followers_url": "https://api.github.com/users/hoodmane/followers", "following_url": "https://api.github.com/users/hoodmane/following{/other_user}", "gists_url": "https://api.github.com/users/hoodmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoodmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoodmane/subscriptions", "organizations_url": "https://api.github.com/users/hoodmane/orgs", "repos_url": "https://api.github.com/users/hoodmane/repos", "events_url": "https://api.github.com/users/hoodmane/events{/privacy}", "received_events_url": "https://api.github.com/users/hoodmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-09T19:19:48Z", "updated_at": "2021-04-16T06:46:39Z", "closed_at": "2021-04-16T06:46:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently if one converts a 1d ndarray from Python ==> javascript, `_python2js_shareable_buffer_recursive` produces a `TypedArray` object that shares memory with the `ndarray` but without associating the lifetime of the `TypedArray` with the backing memory in any way, so the memory is borrowed. If the Python object is later garbage collected, then the memory backing this `TypedArray` will be freed, but without any warning to someone who stored the `TypedArray`. The memory may then be reallocated to something else, potentially leading to memory corruption. If the `TypedArray` is reimported into Python it yields a Python `memoryview` which also points to the same borrowed memory.\r\n\r\nI think the only reason this doesn't happen more often is that we leak a lot of memory and people don't use the buffer conversions that much.\r\n\r\nI think in the case that the user attempts to import a `TypedArray` on the Wasm heap into python, we should actually throw an error because that memory has been malloc'd and it may eventually be freed but we have no way of knowing when it is freed. I think we need some extra Javascript type which is a `TypedArray` referencing owned memory with a `release` method to let go of the memory when it is done. If the memory has a static lifetime then the `release` method can be a no-op. Then this pair `(TypedArray, release)` can be safely imported into Python as a Buffer with a `bf_release` implementation that calls the `release` function. \r\n\r\nThis obviously will require a more carefully designed API, but the current system simply does not work.\r\n\r\nSee PR #1215 which partially addresses this. @daoxian", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1221/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1190", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/1190/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/1190/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/1190/events", "html_url": "https://github.com/pyodide/pyodide/issues/1190", "id": 800775567, "node_id": "MDU6SXNzdWU4MDA3NzU1Njc=", "number": 1190, "title": "TypeError: e.slice is not a function in REPL", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-03T23:13:19Z", "updated_at": "2021-02-04T07:38:39Z", "closed_at": "2021-02-04T07:38:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using the dev REPL, running for instance,\r\n```py\r\n>>> import time\r\n>>> time.mo + <tab>\r\n```\r\ncurrently trigger the following error,\r\n```\r\nUncaught TypeError: e.slice is not a function\r\n    u jQuery\r\n    completion console.html:67\r\n    jQuery 6\r\n        TAB\r\n        U\r\n        n\r\n        Ze\r\n        dispatch\r\n        handle\r\n```\r\n\r\nActually it looks like this exception is raised for any attempt of completion REPL. Not sure if we merged a PR that lead this this regression. It would need more investigation.\r\n\r\ncc @casatir ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/1190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/1190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/944", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/944/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/944/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/944/events", "html_url": "https://github.com/pyodide/pyodide/issues/944", "id": 774539859, "node_id": "MDU6SXNzdWU3NzQ1Mzk4NTk=", "number": 944, "title": "Upgrade to 0.16.0. Packages can't be loaded.", "user": {"login": "leopsidom", "id": 12235069, "node_id": "MDQ6VXNlcjEyMjM1MDY5", "avatar_url": "https://avatars.githubusercontent.com/u/12235069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leopsidom", "html_url": "https://github.com/leopsidom", "followers_url": "https://api.github.com/users/leopsidom/followers", "following_url": "https://api.github.com/users/leopsidom/following{/other_user}", "gists_url": "https://api.github.com/users/leopsidom/gists{/gist_id}", "starred_url": "https://api.github.com/users/leopsidom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leopsidom/subscriptions", "organizations_url": "https://api.github.com/users/leopsidom/orgs", "repos_url": "https://api.github.com/users/leopsidom/repos", "events_url": "https://api.github.com/users/leopsidom/events{/privacy}", "received_events_url": "https://api.github.com/users/leopsidom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-24T19:07:58Z", "updated_at": "2020-12-25T22:13:40Z", "closed_at": "2020-12-25T22:13:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Getting 404 on the package URL, for instance, pandas package: https://cdn.jsdelivr.net/pyodide/v0.16.0/full/pandas.js. \r\n\r\n```\r\n<html>\r\n<head><title>404 Not Found</title></head>\r\n<body>\r\n<h1>404 Not Found</h1>\r\n<ul>\r\n<li>Code: NoSuchKey</li>\r\n<li>Message: The specified key does not exist.</li>\r\n<li>Key: v0.16.0/full/pandas.js</li>\r\n<li>RequestId: BYBS5H4SEG3M9RET</li>\r\n<li>HostId: mMpquzsUYgCLOZRm18BcUfcY9ic3FQGoiadwiFDIHVirJ3u8X9KFg3vAMw/dWbEMPKNIeOgWrJ4=</li>\r\n</ul>\r\n<hr/>\r\n</body>\r\n</html>\r\n```\r\n\r\nWonder if this is the CDN issue ? Or something I missed.\r\n\r\nIt seems I can access package version under 0.15.0 though: https://cdn.jsdelivr.net/pyodide/v0.15.0/full/pandas.js", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/918", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/918/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/918/events", "html_url": "https://github.com/pyodide/pyodide/issues/918", "id": 773101384, "node_id": "MDU6SXNzdWU3NzMxMDEzODQ=", "number": 918, "title": "Three.js example does not work in Python", "user": {"login": "mdamien", "id": 1469823, "node_id": "MDQ6VXNlcjE0Njk4MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/1469823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdamien", "html_url": "https://github.com/mdamien", "followers_url": "https://api.github.com/users/mdamien/followers", "following_url": "https://api.github.com/users/mdamien/following{/other_user}", "gists_url": "https://api.github.com/users/mdamien/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdamien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdamien/subscriptions", "organizations_url": "https://api.github.com/users/mdamien/orgs", "repos_url": "https://api.github.com/users/mdamien/repos", "events_url": "https://api.github.com/users/mdamien/events{/privacy}", "received_events_url": "https://api.github.com/users/mdamien/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2726401365, "node_id": "MDU6TGFiZWwyNzI2NDAxMzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/core%20/%20type%20conversions", "name": "core / type conversions", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-12-22T17:00:36Z", "updated_at": "2022-04-28T16:45:31Z", "closed_at": "2021-04-19T18:37:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I translated this example to Python: https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\r\n\r\n```python\r\nfrom js import THREE, window\r\n\r\nscene = THREE.Scene()\r\ncamera = THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\r\n\r\nrenderer = THREE.WebGLRenderer()\r\nrenderer.setSize(window.innerWidth, window.innerHeight)\r\ndocument.body.appendChild(renderer.domElement)\r\n```\r\n\r\nBut I get `can't redefine non-configurable property \"id\"`", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/757", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/757/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/757/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/757/events", "html_url": "https://github.com/pyodide/pyodide/issues/757", "id": 705060775, "node_id": "MDU6SXNzdWU3MDUwNjA3NzU=", "number": 757, "title": "`input()` call opens multiple browser input dialogs in Firefox", "user": {"login": "albertas", "id": 134418, "node_id": "MDQ6VXNlcjEzNDQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/134418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertas", "html_url": "https://github.com/albertas", "followers_url": "https://api.github.com/users/albertas/followers", "following_url": "https://api.github.com/users/albertas/following{/other_user}", "gists_url": "https://api.github.com/users/albertas/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertas/subscriptions", "organizations_url": "https://api.github.com/users/albertas/orgs", "repos_url": "https://api.github.com/users/albertas/repos", "events_url": "https://api.github.com/users/albertas/events{/privacy}", "received_events_url": "https://api.github.com/users/albertas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-20T07:20:44Z", "updated_at": "2021-04-18T16:17:15Z", "closed_at": "2021-04-18T16:17:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Expected behaviour**\r\nOnly one input dialog is shown for each `input()` call, when its executed using the `pyodide.runPythonAsync` function. \r\n\r\n**Actual behaviour**\r\nInfinite number of input popups is shown, till `cancel` is pressed in one of them.\r\n\r\n**Versions**\r\nFirefox 79.0\r\npyodide 0.15.0\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/749", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/749/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/749/events", "html_url": "https://github.com/pyodide/pyodide/issues/749", "id": 686393021, "node_id": "MDU6SXNzdWU2ODYzOTMwMjE=", "number": 749, "title": "problem with sending bytes to javascript", "user": {"login": "gowhari", "id": 4410175, "node_id": "MDQ6VXNlcjQ0MTAxNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4410175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowhari", "html_url": "https://github.com/gowhari", "followers_url": "https://api.github.com/users/gowhari/followers", "following_url": "https://api.github.com/users/gowhari/following{/other_user}", "gists_url": "https://api.github.com/users/gowhari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowhari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowhari/subscriptions", "organizations_url": "https://api.github.com/users/gowhari/orgs", "repos_url": "https://api.github.com/users/gowhari/repos", "events_url": "https://api.github.com/users/gowhari/events{/privacy}", "received_events_url": "https://api.github.com/users/gowhari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-26T15:00:22Z", "updated_at": "2021-04-09T04:51:20Z", "closed_at": "2021-04-09T04:51:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any restriction on sending bytes from python to javascript?\r\n\r\n```javascript\r\npyodide.runPython('bytes([10])')\r\n> Uint8ClampedArray\u00a0[10]\r\npyodide.runPython('bytes([10, 11])')\r\n> Uint8ClampedArray(2)\u00a0[24, 0]\r\npyodide.runPython('bytes([10, 11, 12])')\r\n> Uint8ClampedArray(3)\u00a0[24, 0, 0]\r\npyodide.runPython('bytes([10, 11, 12, 13])')\r\n> Uint8ClampedArray(4)\u00a0[10, 11, 12, 13]\r\n\r\npyodide.runPython('b\"A\"')\r\n> Uint8ClampedArray\u00a0[65]\r\npyodide.runPython('b\"AB\"')\r\n> Uint8ClampedArray(2)\u00a0[24, 0]\r\npyodide.runPython('b\"ABC\"')\r\n> Uint8ClampedArray(3)\u00a0[24, 0, 0]\r\npyodide.runPython('b\"ABCD\"')\r\n> Uint8ClampedArray(4)\u00a0[65, 66, 67, 68]\r\n```\r\n\r\nWhat's `[24, 0]`?\r\n\r\nIt's different for different lengths:\r\n\r\n```javascript\r\npyodide.runPython(\"b'0' * 4\")\r\nUint8ClampedArray(4)\u00a0[48, 48, 48, 48]\r\npyodide.runPython(\"b'0' * 100\")\r\nUint8ClampedArray(100)\u00a0[48, 48, 48, 48, 48, 48, 48, 48, 48, 48, ...\r\npyodide.runPython(\"b'0' * 200\")\r\nUint8ClampedArray(200)\u00a0[48, 48, 48, 48, 48, 48, 48, 48, 48, 48, ...\r\npyodide.runPython(\"b'0' * 300\")\r\nUint8ClampedArray(300)\u00a0[88, 51, 157, 0, 0, 0, 0, 0, 48, 48, 48, ...\r\n```\r\n\r\nIt's `[88, 51, 157, 0, 0, 0, 0, 0,` this time.\r\n\r\nSeems that there is no problem from javascript to python:\r\n\r\n```javascript\r\nf = pyodide.runPython(`\r\ndef f(x):\r\n    print([x, x.tobytes()])\r\n    return x\r\nf\r\n`)\r\n> Proxy\u00a0{$$: {\u2026}, length: 0, name: \"target\", arguments: null, caller: null,\u00a0\u2026}\r\nf(new Uint8Array([0]))\r\n> pyodide.asm.js:8 [<memory at 0xa7d308>, b'\\x00']\r\n> Uint8Array\u00a0[0]\r\nf(new Uint8Array([0, 1]))\r\n> pyodide.asm.js:8 [<memory at 0xa7d308>, b'\\x00\\x01']\r\n> Uint8Array(2)\u00a0[0, 1]\r\nf(new Uint8Array([0, 1, 2]))\r\n> pyodide.asm.js:8 [<memory at 0xa7d308>, b'\\x00\\x01\\x02']\r\n> Uint8Array(3)\u00a0[0, 1, 2]\r\nf(new Uint8Array([0, 1, 2, 3]))\r\n> pyodide.asm.js:8 [<memory at 0xa7d308>, b'\\x00\\x01\\x02\\x03']\r\n> Uint8Array(4)\u00a0[0, 1, 2, 3]\r\n\r\n```\r\n\r\nI tested on this version:\r\n\r\n```\r\npyodide.version(): \"0.15.0\"\r\npyodide.runPython('sys.version'): \"3.7.4 (default, May 20 2020, 19:25:33) [Clang 6.0.1 ]\"\r\nChrome 83\r\nFirefox 76\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/737", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/737/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/737/events", "html_url": "https://github.com/pyodide/pyodide/issues/737", "id": 673026287, "node_id": "MDU6SXNzdWU2NzMwMjYyODc=", "number": 737, "title": "Importing dynamically written module gives ModuleNotFoundError", "user": {"login": "rumkeller", "id": 519826, "node_id": "MDQ6VXNlcjUxOTgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/519826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rumkeller", "html_url": "https://github.com/rumkeller", "followers_url": "https://api.github.com/users/rumkeller/followers", "following_url": "https://api.github.com/users/rumkeller/following{/other_user}", "gists_url": "https://api.github.com/users/rumkeller/gists{/gist_id}", "starred_url": "https://api.github.com/users/rumkeller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rumkeller/subscriptions", "organizations_url": "https://api.github.com/users/rumkeller/orgs", "repos_url": "https://api.github.com/users/rumkeller/repos", "events_url": "https://api.github.com/users/rumkeller/events{/privacy}", "received_events_url": "https://api.github.com/users/rumkeller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-08-04T19:22:29Z", "updated_at": "2021-01-04T20:05:24Z", "closed_at": "2021-01-04T20:05:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "In #419, @mdboom suggests the following way of importing a dynamically created file (without the two commented lines):\r\n```python\r\nimport sys\r\nsys.path.insert(0, '.')\r\n\r\n# with open(\"bar.txt\", \"w\") as fd:\r\n#  fd.write(\"bar\")\r\n\r\nwith open(\"module.py\", \"w\") as fd:\r\n   fd.write(\"foo = 42\")\r\n\r\nimport module\r\nmodule.foo\r\n```\r\n\r\nAs is, this works fine.\r\n\r\nHowever, with the two lines uncommented this yields `ModuleNotFoundError: No module named 'module'`. This is unexpected, as creating `bar.txt` seems unrelated to the rest of the code.\r\n\r\nAdding `import os; print(os.listdir(\".\"))` just before the import shows that both files were indeed created.\r\n\r\nAlso, with the order of the two `with` blocks swapped it does work as expected.\r\n\r\nTested with v0.15.0 on Firefox 78.0.2.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/737/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/725", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/725/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/725/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/725/events", "html_url": "https://github.com/pyodide/pyodide/issues/725", "id": 655446828, "node_id": "MDU6SXNzdWU2NTU0NDY4Mjg=", "number": 725, "title": "Version selection for packages availble both on PyPi and in Pyodide", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2199026232, "node_id": "MDU6TGFiZWwyMTk5MDI2MjMy", "url": "https://api.github.com/repos/pyodide/pyodide/labels/package%20loading", "name": "package loading", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pyodide/pyodide/milestones/4", "html_url": "https://github.com/pyodide/pyodide/milestone/4", "labels_url": "https://api.github.com/repos/pyodide/pyodide/milestones/4/labels", "id": 5776401, "node_id": "MDk6TWlsZXN0b25lNTc3NjQwMQ==", "number": 4, "title": "0.17.0", "description": "", "creator": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2020-08-16T09:03:58Z", "updated_at": "2021-09-11T12:22:14Z", "due_on": "2021-04-22T07:00:00Z", "closed_at": "2021-04-21T21:28:35Z"}, "comments": 1, "created_at": "2020-07-12T17:57:37Z", "updated_at": "2021-04-13T02:50:41Z", "closed_at": "2021-04-13T02:50:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For packages not built in pyodide, version selection works as expected. For instance,\r\n```py\r\n>>> import micropip\r\n>>> micropip.install('idna==2.9')   # version before last on PyPi, package not in pyodide\r\nInstalled idna\r\n>>> import idna\r\n>>> idna.__version__\r\n2.9\r\n```\r\n\r\nHowever, when one specifies the version for a package available in the pyodide distribution, it is ignored and the version from pyodide is installed regardless if PyPi includes the requested version,\r\n```py\r\n>>> import micropip\r\n>>> micropip.install('pytz==2020.1')\r\nInstalled pytz\r\n>>> import pytz\r\n>>> pytz.__version__\r\n2019.3\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/693", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/693/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/693/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/693/events", "html_url": "https://github.com/pyodide/pyodide/issues/693", "id": 645904539, "node_id": "MDU6SXNzdWU2NDU5MDQ1Mzk=", "number": 693, "title": "Python-object is not garbage collected when used with EventListener", "user": {"login": "phorward", "id": 16870072, "node_id": "MDQ6VXNlcjE2ODcwMDcy", "avatar_url": "https://avatars.githubusercontent.com/u/16870072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phorward", "html_url": "https://github.com/phorward", "followers_url": "https://api.github.com/users/phorward/followers", "following_url": "https://api.github.com/users/phorward/following{/other_user}", "gists_url": "https://api.github.com/users/phorward/gists{/gist_id}", "starred_url": "https://api.github.com/users/phorward/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phorward/subscriptions", "organizations_url": "https://api.github.com/users/phorward/orgs", "repos_url": "https://api.github.com/users/phorward/repos", "events_url": "https://api.github.com/users/phorward/events{/privacy}", "received_events_url": "https://api.github.com/users/phorward/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 999289607, "node_id": "MDU6TGFiZWw5OTkyODk2MDc=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Firefox", "name": "Firefox", "color": "d93f0b", "default": false, "description": ""}, {"id": 999289688, "node_id": "MDU6TGFiZWw5OTkyODk2ODg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Chromium", "name": "Chromium", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-25T23:14:00Z", "updated_at": "2021-04-18T09:49:20Z", "closed_at": "2021-04-18T09:49:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nI have a special case here regarding garbage collection in combination with JavaScript's addEventListener and removeEventListener functions.\r\n\r\n1. Creating an instance of a class, associating it with a DOM element and removing it again works - the object is entirely freed.\r\n2. Creating an instance of a class, associating it with a DOM element, attaching an event to it and detaching it immediately after still holds a reference to it the object, even if it is explicitly removed with `del`\r\n\r\nI guess, that the problem here is in JavaScript, which still holds a reference and this is normal with JavaScript. But I'm quite unsure, and would like to ask for further investigation, eventually its really a bug.\r\n\r\nTest case is this Python script. Attached is [bug.txt](https://github.com/iodide-project/pyodide/files/4834270/bug.txt)\r\n to be renamed bug.html, which can be copied into the `build/` folder and directly be executed.\r\n\r\n```python\r\nfrom js import document\r\nimport weakref, gc\r\n\r\nprint(\"start\")\r\n\r\nclass TestWrapper:\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.div = document.createElement(\"div\")\r\n\r\n    def testCallback(self, event):\r\n        print(\"Got Event\")\r\n\r\n    def attach(self):\r\n        print(\"attach\")\r\n        self.div.addEventListener(\"click\", self.testCallback)\r\n\r\n    def detach(self):\r\n        print(\"detach\")\r\n        self.div.removeEventListener(\"click\", self.testCallback)\r\n\r\n    def __del__(self):\r\n        print(\"I am removed\")\r\n\r\nprint(\"---111---\")\r\n\r\ndiv = TestWrapper()\r\nrw = weakref.ref(div)\r\ngc.collect()\r\nprint(\"1 Weakref resolves to: %s\" % rw())\r\ndel div\r\ngc.collect()\r\nprint(\"1 Weakref after dropped reference resolves to: %s\" % rw())  # << this is None, as expected!\r\n\r\nprint(\"---222---\")\r\n\r\ndiv = TestWrapper()\r\nrw = weakref.ref(div)\r\ndiv.attach()\r\ndel div\r\ngc.collect()\r\nprint(\"2 Weakref to Wrapper-Class with active event listener: %s\" % rw())\r\nrw().detach()\r\ngc.collect()\r\nprint(\"2 Weakref to Wrapper-Class with removed event listener: %s\" % rw())  # << At least this should be None\r\n```\r\n\r\nThe logging output in the JavaScript console is this:\r\n```\r\nPython initialization complete\r\nstart\r\n---111---\r\n1 Weakref resolves to: <TestWrapper object at 0x9a8a60>\r\nI am removed\r\n1 Weakref after dropped reference resolves to: None\r\n---222---\r\nattach\r\n2 Weakref to Wrapper-Class with active event listener: <TestWrapper object at 0x9a8a60>\r\ndetach\r\n2 Weakref to Wrapper-Class with removed event listener: <TestWrapper object at 0x9a8a60>\r\n```\r\n\r\nIt can be reproduced both in Firefox 77.0.1 and Chromium Version 83.0.4103.97\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/537", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/537/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/537/events", "html_url": "https://github.com/pyodide/pyodide/issues/537", "id": 507403056, "node_id": "MDU6SXNzdWU1MDc0MDMwNTY=", "number": 537, "title": "statsmodels crashes on import", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 846473839, "node_id": "MDU6TGFiZWw4NDY0NzM4Mzk=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-10-15T18:13:51Z", "updated_at": "2022-01-07T19:06:52Z", "closed_at": "2022-01-07T19:06:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\nimport statsmodels.api\r\n```\r\n\r\n```\r\nError: Traceback (most recent call last):\r\n  File \"/lib/python3.7/site-packages/pyodide.py\", line 42, in eval_code\r\n    exec(compile(mod, '<exec>', mode='exec'), ns, ns)\r\n  File \"<exec>\", line 1, in <module>\r\n  File \"/lib/python3.7/site-packages/statsmodels/api.py\", line 7, in <module>\r\n    from .regression.recursive_ls import RecursiveLS\r\n  File \"/lib/python3.7/site-packages/statsmodels/regression/recursive_ls.py\", line 16, in <module>\r\n    from statsmodels.tsa.statespace.mlemodel import (\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/mlemodel.py\", line 18, in <module>\r\n    from .simulation_smoother import SimulationSmoother\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/simulation_smoother.py\", line 10, in <module>\r\n    from .kalman_smoother import KalmanSmoother\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/kalman_smoother.py\", line 11, in <module>\r\n    from statsmodels.tsa.statespace.representation import OptionWrapper\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/representation.py\", line 10, in <module>\r\n    from .tools import (\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/tools.py\", line 207, in <module>\r\n    set_mode(compatibility=None)\r\n  File \"/lib/python3.7/site-packages/statsmodels/tsa/statespace/tools.py\", line 59, in set_mode\r\n    from . import (_representation, _kalman_filter, _kalman_smoother,\r\nImportError: cannot import name '_representation' from 'statsmodels.tsa.statespace' (/lib/python3.7/site-packages/statsmodels/tsa/statespace/__init__.py)\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/537/reactions", "total_count": 3, "+1": 2, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/521", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/521/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/521/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/521/events", "html_url": "https://github.com/pyodide/pyodide/issues/521", "id": 492404373, "node_id": "MDU6SXNzdWU0OTI0MDQzNzM=", "number": 521, "title": "Pickling of sklearn.tree.Tree", "user": {"login": "pyodave", "id": 55208322, "node_id": "MDQ6VXNlcjU1MjA4MzIy", "avatar_url": "https://avatars.githubusercontent.com/u/55208322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyodave", "html_url": "https://github.com/pyodave", "followers_url": "https://api.github.com/users/pyodave/followers", "following_url": "https://api.github.com/users/pyodave/following{/other_user}", "gists_url": "https://api.github.com/users/pyodave/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyodave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyodave/subscriptions", "organizations_url": "https://api.github.com/users/pyodave/orgs", "repos_url": "https://api.github.com/users/pyodave/repos", "events_url": "https://api.github.com/users/pyodave/events{/privacy}", "received_events_url": "https://api.github.com/users/pyodave/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640945620, "node_id": "MDU6TGFiZWwxNjQwOTQ1NjIw", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scikit-learn", "name": "scikit-learn", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-11T18:44:18Z", "updated_at": "2022-09-17T07:57:45Z", "closed_at": "2022-09-17T07:57:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running the code below the line (note I am pickling/unpickling directly to a byte string and not writing a file object, the same error occurs with a file object pointing to a io buffer).\r\n```py\r\nreLoadCLF = pickle.loads(pickle.dumps(clf))\r\n```\r\n\r\ncrashes with   File \"sklearn/tree/_tree.pyx\", line 601, in \r\n```py\r\nsklearn.tree._tree.Tree.__cinit__\r\nValueError: Buffer dtype mismatch, expected 'SIZE_t' but got 'long long'\r\n```\r\n\r\nI think it should work since we aren't running a 64 vs a 32 bit Python nor having different library versions. I have tried using different protocols and different skLearn classifiers to no avail. Is there a way to do this with the existing codebase or is this a bug?\r\n```py\r\n#Random forest classsifier\r\nfrom sklearn.ensemble import RandomForestClassifier\r\nfrom sklearn.datasets import load_iris\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn.metrics import accuracy_score\r\n#import pandas as pd\r\n\r\n#loading the dataset\r\niris = load_iris()\r\nX = iris.data\r\nprint(X)\r\ny = iris.target\r\nprint(y)\r\n\r\n#Split the data\r\nX_train, X_test, y_train, y_test = train_test_split(X,y,random_state=42,test_size=0.5)\r\n\r\n#Build the model\r\nclf = RandomForestClassifier(n_estimators=10)\r\n\r\n#Train the classifier\r\nclf.fit(X_train, y_train)\r\n\r\n#Predictions\r\npredicted = clf.predict(X_test)\r\n\r\n#Check accuracy\r\nprint(accuracy_score(predicted, y_test))\r\n\r\nimport pickle\r\nreLoadCLF = pickle.loads(pickle.dumps(clf))\r\nprint('reLoad & go')\r\npredictedRL = reLoadCLF.predict(X_test)\r\nprint(accuracy_score(predictedRL, y_test))\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/521/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/519", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/519/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/519/events", "html_url": "https://github.com/pyodide/pyodide/issues/519", "id": 490752837, "node_id": "MDU6SXNzdWU0OTA3NTI4Mzc=", "number": 519, "title": "pyodide.loadedPackages returns array(0)", "user": {"login": "PythonLinks", "id": 34622952, "node_id": "MDQ6VXNlcjM0NjIyOTUy", "avatar_url": "https://avatars.githubusercontent.com/u/34622952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PythonLinks", "html_url": "https://github.com/PythonLinks", "followers_url": "https://api.github.com/users/PythonLinks/followers", "following_url": "https://api.github.com/users/PythonLinks/following{/other_user}", "gists_url": "https://api.github.com/users/PythonLinks/gists{/gist_id}", "starred_url": "https://api.github.com/users/PythonLinks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PythonLinks/subscriptions", "organizations_url": "https://api.github.com/users/PythonLinks/orgs", "repos_url": "https://api.github.com/users/PythonLinks/repos", "events_url": "https://api.github.com/users/PythonLinks/events{/privacy}", "received_events_url": "https://api.github.com/users/PythonLinks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 846473839, "node_id": "MDU6TGFiZWw4NDY0NzM4Mzk=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-09-08T13:13:35Z", "updated_at": "2021-04-18T09:59:40Z", "closed_at": "2021-04-18T09:59:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using your recommended server: \r\nhttps://alpha.iodide.io/notebooks/300/\r\nI do the following commands, one at a time, waiting for them to complete. \r\n\r\nimport numpy\r\nfrom js import pyodide\r\npyodide.loadedPackages\r\n\r\nI get \r\nArray(0)\r\n\r\nI expect to get \r\n[\"numpy\"]\r\n\r\nI hope that helps. ", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/519/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/503", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/503/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/503/events", "html_url": "https://github.com/pyodide/pyodide/issues/503", "id": 479318549, "node_id": "MDU6SXNzdWU0NzkzMTg1NDk=", "number": 503, "title": "Unknown Python Version Error", "user": {"login": "emjun", "id": 20975359, "node_id": "MDQ6VXNlcjIwOTc1MzU5", "avatar_url": "https://avatars.githubusercontent.com/u/20975359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emjun", "html_url": "https://github.com/emjun", "followers_url": "https://api.github.com/users/emjun/followers", "following_url": "https://api.github.com/users/emjun/following{/other_user}", "gists_url": "https://api.github.com/users/emjun/gists{/gist_id}", "starred_url": "https://api.github.com/users/emjun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emjun/subscriptions", "organizations_url": "https://api.github.com/users/emjun/orgs", "repos_url": "https://api.github.com/users/emjun/repos", "events_url": "https://api.github.com/users/emjun/events{/privacy}", "received_events_url": "https://api.github.com/users/emjun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2199026232, "node_id": "MDU6TGFiZWwyMTk5MDI2MjMy", "url": "https://api.github.com/repos/pyodide/pyodide/labels/package%20loading", "name": "package loading", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-11T00:24:02Z", "updated_at": "2021-04-18T16:19:30Z", "closed_at": "2021-04-18T16:19:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to install the package `requests` via micropip, as described/shown [in the docs.](https://github.com/iodide-project/pyodide/blob/master/docs/pypi.md)\r\nMWE:\r\nMy code snippet in Pyodide looks like: \r\n```\r\n%% py\r\nimport micropip\r\nmicropip.install('requests')\r\n```\r\n\r\nWhen I run it, I get the following console output and error: \r\n```\r\nimport micropip\r\nmicropip.install('requests')\r\n\r\n\"unknown variable: python_version\"\r\n```\r\n\r\n[requests](https://2.python-requests.org/en/master/) is a popular package that's entirely written in Python, so i don't think it has to do with trying to load a package that is written in multiple non-Python languages.\r\n\r\nIdeas? Suggestions?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/492", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/492/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/492/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/492/events", "html_url": "https://github.com/pyodide/pyodide/issues/492", "id": 470719524, "node_id": "MDU6SXNzdWU0NzA3MTk1MjQ=", "number": 492, "title": "Cannot read property 'apply' of undefined error in scikit-learn", "user": {"login": "Sm4ster", "id": 10410976, "node_id": "MDQ6VXNlcjEwNDEwOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/10410976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sm4ster", "html_url": "https://github.com/Sm4ster", "followers_url": "https://api.github.com/users/Sm4ster/followers", "following_url": "https://api.github.com/users/Sm4ster/following{/other_user}", "gists_url": "https://api.github.com/users/Sm4ster/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sm4ster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sm4ster/subscriptions", "organizations_url": "https://api.github.com/users/Sm4ster/orgs", "repos_url": "https://api.github.com/users/Sm4ster/repos", "events_url": "https://api.github.com/users/Sm4ster/events{/privacy}", "received_events_url": "https://api.github.com/users/Sm4ster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1640941765, "node_id": "MDU6TGFiZWwxNjQwOTQxNzY1", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scipy", "name": "scipy", "color": "fef2c0", "default": false, "description": ""}, {"id": 1640945620, "node_id": "MDU6TGFiZWwxNjQwOTQ1NjIw", "url": "https://api.github.com/repos/pyodide/pyodide/labels/scikit-learn", "name": "scikit-learn", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-07-20T22:16:07Z", "updated_at": "2022-01-01T16:07:56Z", "closed_at": "2022-01-01T16:07:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everyone,\r\n\r\nI have been experimenting with Pyodide and was trying to execute some scikit-learn code.\r\nI took the code directly from the [documentation of scikit-learn](https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.FactorAnalysis.html)\r\n\r\nThis is the snippet in question:\r\n```\r\nfrom sklearn.datasets import load_digits\r\nfrom sklearn.decomposition import FactorAnalysis\r\nX, _ = load_digits(return_X_y=True)\r\ntransformer = FactorAnalysis(n_components=7, random_state=0)\r\nX_transformed = transformer.fit_transform(X)\r\n```\r\n\r\nHowever, after the last line of code it throws the following error:\r\n```\r\n**pyodide.asm.js:formatted:444 Uncaught (in promise) TypeError: Cannot read property 'apply' of undefined**\r\n    at env.<computed> (pyodide.asm.js:formatted:444)\r\n    at byn$fpcast-emu$_dlu_c_ (wasm-function[2122]:34)\r\n    at _f2py_rout__flinalg_dlu_c (wasm-function[139]:984)\r\n    at byn$fpcast-emu$_f2py_rout__flinalg_dlu_c (wasm-function[2123]:13)\r\n    at _fortran_call (wasm-function[148]:253)\r\n    at byn$fpcast-emu$_fortran_call (wasm-function[2134]:10)\r\n    at wasm-function[837]:1420\r\n    at wasm-function[2749]:1110\r\n    at wasm-function[2744]:44570\r\n    at wasm-function[20461]:7\r\n```\r\nI have no idea what to make of it, but maybe someone else has?\r\nThanks in advance :)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/323", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/323/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/323/events", "html_url": "https://github.com/pyodide/pyodide/pull/323", "id": 413167386, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU1MjE2ODI1", "number": 323, "title": "Fix matplotlib wasm backend after undefined attribute behavior changed", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-02-21T23:10:05Z", "updated_at": "2019-02-22T01:41:50Z", "closed_at": "2019-02-22T01:41:50Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/pyodide/pyodide/pulls/323", "html_url": "https://github.com/pyodide/pyodide/pull/323", "diff_url": "https://github.com/pyodide/pyodide/pull/323.diff", "patch_url": "https://github.com/pyodide/pyodide/pull/323.patch", "merged_at": "2019-02-22T01:41:50Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/323/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/311", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/311/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/311/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/311/events", "html_url": "https://github.com/pyodide/pyodide/issues/311", "id": 405023269, "node_id": "MDU6SXNzdWU0MDUwMjMyNjk=", "number": 311, "title": "Pyodide demo not loading", "user": {"login": "danielgwilson", "id": 11265967, "node_id": "MDQ6VXNlcjExMjY1OTY3", "avatar_url": "https://avatars.githubusercontent.com/u/11265967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielgwilson", "html_url": "https://github.com/danielgwilson", "followers_url": "https://api.github.com/users/danielgwilson/followers", "following_url": "https://api.github.com/users/danielgwilson/following{/other_user}", "gists_url": "https://api.github.com/users/danielgwilson/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielgwilson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielgwilson/subscriptions", "organizations_url": "https://api.github.com/users/danielgwilson/orgs", "repos_url": "https://api.github.com/users/danielgwilson/repos", "events_url": "https://api.github.com/users/danielgwilson/events{/privacy}", "received_events_url": "https://api.github.com/users/danielgwilson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-31T00:12:14Z", "updated_at": "2020-05-08T20:42:23Z", "closed_at": "2020-05-08T20:42:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Demo link appears to be broken at the moment\u2014it shows a Not Found error.\r\n\r\nhttps://extremely-alpha.iodide.io/pyodide-demo/python.html\r\n\r\nTested on OSX\r\n* Chrome\r\n* Safari", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/311/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/291", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/291/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/291/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/291/events", "html_url": "https://github.com/pyodide/pyodide/issues/291", "id": 397569631, "node_id": "MDU6SXNzdWUzOTc1Njk2MzE=", "number": 291, "title": "Loading an unknown package from a custom URL", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-09T21:28:19Z", "updated_at": "2019-01-16T17:05:07Z", "closed_at": "2019-01-16T17:05:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As discussed in https://github.com/iodide-project/pyodide/pull/286,\r\n\r\nby @madhur-tandon \r\n> The URL generated is correct and this issue is not related to it. The reason that it doesn't work without adding it to packages.json file is because the function load_package is defined that way. It checks if the package we are trying to load is present in this file, else, it returns the error of Unknown package 'numpy-broken'\r\n\r\nand @mdboom \r\n\r\n>  I thought if you provided a URL, it wouldn't try to do the dependency resolution using packages.json. @rth: Is that how that's supposed to work? How does one load a completely unknown package?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/270", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/270/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/270/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/270/events", "html_url": "https://github.com/pyodide/pyodide/issues/270", "id": 388305381, "node_id": "MDU6SXNzdWUzODgzMDUzODE=", "number": 270, "title": "async imports don't play nicely with non-async ones", "user": {"login": "hamilton", "id": 95735, "node_id": "MDQ6VXNlcjk1NzM1", "avatar_url": "https://avatars.githubusercontent.com/u/95735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hamilton", "html_url": "https://github.com/hamilton", "followers_url": "https://api.github.com/users/hamilton/followers", "following_url": "https://api.github.com/users/hamilton/following{/other_user}", "gists_url": "https://api.github.com/users/hamilton/gists{/gist_id}", "starred_url": "https://api.github.com/users/hamilton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hamilton/subscriptions", "organizations_url": "https://api.github.com/users/hamilton/orgs", "repos_url": "https://api.github.com/users/hamilton/repos", "events_url": "https://api.github.com/users/hamilton/events{/privacy}", "received_events_url": "https://api.github.com/users/hamilton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-06T16:56:34Z", "updated_at": "2018-12-10T21:25:07Z", "closed_at": "2018-12-10T21:25:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A Mozillian found an aspect of async importing that appears to not work. The code block below demonstrates the issue - it appears that mixing imports that fetch resources (other stuff from the pyodide stack) don't play very nicely with imports that don't.\r\n\r\nYou can replace the `from js import document` line with some other expected-to-work import statement that uses python and you get the same error, so it appears that this issue is caused by the async stuff in some way.\r\n\r\n```\r\n%%py\r\nimport matplotlib.pyplot as plt\r\nfrom js import document\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/267", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/267/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/267/events", "html_url": "https://github.com/pyodide/pyodide/issues/267", "id": 387330932, "node_id": "MDU6SXNzdWUzODczMzA5MzI=", "number": 267, "title": "python2js : support numpy arrays with non float dtype", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-12-04T15:08:13Z", "updated_at": "2021-01-23T18:24:24Z", "closed_at": "2018-12-19T13:11:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, there is a test that checks that numpy array can be converted to javascript array in `test_runpythonasync`, but while this work for default dtype, this fails for e.g. int,\r\n```py\r\ndef test_numpy_array2js(selenium_standalone):\r\n    selenium_standalone.load_package('numpy')\r\n    output = selenium_standalone.run(\r\n        \"\"\"\r\n        import numpy as np\r\n        np.zeros(5, dtype='int')\r\n        \"\"\"\r\n    )\r\n    assert output == [0, 0, 0, 0, 0]\r\n```\r\nproduces,\r\n```\r\n>       assert output == [0, 0, 0, 0, 0]\r\nE       assert [{}, {}, {}, {}, {}] == [0, 0, 0, 0, 0]\r\nE         At index 0 diff: {} != 0\r\nE         Use -v to get the full diff\r\n\r\ntest/test_python.py:490: AssertionError\r\n```\r\nwhere on the left side, we get `PyProxy` objects.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/254", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/254/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/254/events", "html_url": "https://github.com/pyodide/pyodide/issues/254", "id": 379794323, "node_id": "MDU6SXNzdWUzNzk3OTQzMjM=", "number": 254, "title": "Loading available packages fail if called after trying to load non-existent package", "user": {"login": "tiwariayush", "id": 5693204, "node_id": "MDQ6VXNlcjU2OTMyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5693204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiwariayush", "html_url": "https://github.com/tiwariayush", "followers_url": "https://api.github.com/users/tiwariayush/followers", "following_url": "https://api.github.com/users/tiwariayush/following{/other_user}", "gists_url": "https://api.github.com/users/tiwariayush/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiwariayush/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiwariayush/subscriptions", "organizations_url": "https://api.github.com/users/tiwariayush/orgs", "repos_url": "https://api.github.com/users/tiwariayush/repos", "events_url": "https://api.github.com/users/tiwariayush/events{/privacy}", "received_events_url": "https://api.github.com/users/tiwariayush/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941360807, "node_id": "MDU6TGFiZWw5NDEzNjA4MDc=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Javascript", "name": "Javascript", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-12T14:11:37Z", "updated_at": "2018-11-29T09:31:50Z", "closed_at": "2018-11-29T09:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I am not able to load available package(s), after trying to load a non-existent package.\r\n\r\nFor example: \r\n\r\n```\r\n# First available package to be loaded, it succeeds as expected\r\npyodide.loadPackage('numpy')\r\nPROMISE fulfilled\r\n\r\n# Trying loading non-existent package, it fails as expected\r\npyodide.loadPackage('sympy')\r\nPROMISE rejected\r\n\r\n# Trying loading available package, gets rejected (NOT EXPECTED)\r\npyodide.loadPackage('matplotlib')\r\nPROMISE rejected\r\n```\r\n\r\nI tried it on my built version of pyodide (both from pyodide `master`  as well as from #226 ).\r\nI'm running into this problem both on Chrome as well as firefox.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/241", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/241/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/241/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/241/events", "html_url": "https://github.com/pyodide/pyodide/issues/241", "id": 377753854, "node_id": "MDU6SXNzdWUzNzc3NTM4NTQ=", "number": 241, "title": "Binary package compatibility", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-11-06T09:15:41Z", "updated_at": "2018-11-08T15:28:48Z", "closed_at": "2018-11-07T08:17:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As reported by @tiwariayush when building pyodide master locally (without Docker) on Debian based Linux then trying to use that with scipy package build by Circle CI (that uses Docker) one gets,  \r\n\r\n1. On chrome,\r\n```\r\nRuntimeError: function signature mismatch\r\n    at wasm-function[2954]:1031\r\n    at wasm-function[2947]:714\r\n    at wasm-function[11956]:10\r\n    at wasm-function[805]:687\r\n    at wasm-function[816]:82\r\n    at wasm-function[2717]:37598\r\n    at wasm-function[15610]:7\r\n    at wasm-function[2712]:3903\r\n    at wasm-function[811]:238\r\n    at wasm-function[2722]:899\r\n```\r\n2. On firefox,\r\n```\r\nRuntimeError: Indirect call signature mismatch\r\n```\r\nwhen trying to import a scipy module that has C extensions. At the same time doing this works fine for packages built with the same Docker image (e.g. I have been doing this in https://github.com/iodide-project/pyodide/pull/226 to get a package that is not yet included in master).\r\n\r\nIt may mean that with respect to \"binary\" package compatibility, not only packages built with different pyodide versions may not be compatible, but it would also apply to packages built in different environements (though maybe it's only specific to scipy). \r\n\r\nThere is a report with a similar error message in https://github.com/kripken/emscripten/issues/5034 but that one appears to be Chrome specific, and so might be due to other factors.\r\n\r\nThere may not be much we can do about it, short of using the same Docker image. Just opening this issue for future reference. Maybe it could be worth adding a short description in the docs about it (or at least the current backward compatibility siutuation)?", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/241/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/241/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/200", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/200/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/200/events", "html_url": "https://github.com/pyodide/pyodide/issues/200", "id": 365473404, "node_id": "MDU6SXNzdWUzNjU0NzM0MDQ=", "number": 200, "title": "Segfault when listing files in /proc/self/fd ", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-01T13:55:25Z", "updated_at": "2021-04-18T16:21:25Z", "closed_at": "2021-04-18T16:20:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Running,\r\n```py\r\nimport os\r\nos.listdir('/proc/self/fd')\r\n```\r\nproduces the following error `abort({}). Build with -s ASSERTIONS=1 for more info.`, which is effectively a segfault. Running any subsequent command, even `1+1`, will produce the same error message.\r\n\r\nAfter re-compiling with `ASSERTIONS=2`, a more detailed traceback is,\r\n```\r\nE       stackTrace@http://127.0.0.1:33465/pyodide.asm.js:4:22873\r\nE       abort@http://127.0.0.1:33465/pyodide.asm.js:4:11184512\r\nE       ___syscall5@http://127.0.0.1:33465/pyodide.asm.js:4:196773\r\n```\r\nwhich corresponds to the `open` system call.\r\n\r\nIt should be noted that, the following works as expected,\r\n```py\r\n>>> os.listdir('/proc/self')\r\n['fd']\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/188", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/188/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/188/events", "html_url": "https://github.com/pyodide/pyodide/issues/188", "id": 363162620, "node_id": "MDU6SXNzdWUzNjMxNjI2MjA=", "number": 188, "title": "Missing linked libraries in matplotlib", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-24T14:07:47Z", "updated_at": "2018-09-25T20:24:09Z", "closed_at": "2018-09-25T20:24:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When building matplotlib, there are several warning that libraries cannot be found at link time,\r\n```\r\nWARNING:root:emcc: cannot find library \"freetype\"\r\nWARNING:root:emcc: cannot find library \"z\"\r\nWARNING:root:emcc: cannot find library \"png16\"\r\n```\r\nthese get promoted to errors when compiling with `ERROR_ON_MISSING_LIBRARIES` which will be transitioned to enabled in the future.\r\n```js\r\nvar ERROR_ON_MISSING_LIBRARIES = 0; // If set to 1, any -lfoo directives pointing to nonexisting\r\n                                    // library files will issue a linker error.\r\n\r\n                                    // The default value for this is currently 0, but will be\r\n                                    // transitioned to 1 in the future.\r\n```\r\n\r\nIt's strange because `emsdk/emsdk/.emscripten_cache/asmjs` does contain the `.bc` files for these libraries, but adding their path to `ldflags` in `packages/matplotlib/meta.yaml` (as it's done for `libpng`) doesn't seem to help.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/188/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/186", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/186/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/186/events", "html_url": "https://github.com/pyodide/pyodide/pull/186", "id": 362736142, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE3MzcxNTk4", "number": 186, "title": "Fix LZ4 decoding bug", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-21T18:54:43Z", "updated_at": "2018-09-22T09:13:40Z", "closed_at": "2018-09-22T09:13:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/pyodide/pyodide/pulls/186", "html_url": "https://github.com/pyodide/pyodide/pull/186", "diff_url": "https://github.com/pyodide/pyodide/pull/186.diff", "patch_url": "https://github.com/pyodide/pyodide/pull/186.patch", "merged_at": "2018-09-22T09:13:40Z"}, "body": "This was introduced in #170, but wasn't caught since emsdk didn't get rebuilt", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/186/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/167", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/167/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/167/events", "html_url": "https://github.com/pyodide/pyodide/issues/167", "id": 360355053, "node_id": "MDU6SXNzdWUzNjAzNTUwNTM=", "number": 167, "title": "pyodide.loadPackage with URL ignores it for .data files", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-09-14T15:36:28Z", "updated_at": "2018-09-20T12:34:22Z", "closed_at": "2018-09-20T12:34:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As reported by @enymuss, when using `pyodide.loadPackage` with custom URLs, the package `.js` file is indeed loaded from the specified URL, however the `.data` file is still loaded from the `baseURL` ignoring the provided URL.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/158", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/158/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/158/events", "html_url": "https://github.com/pyodide/pyodide/issues/158", "id": 359403125, "node_id": "MDU6SXNzdWUzNTk0MDMxMjU=", "number": 158, "title": "RuntimeError: float unrepresentable in integer range in numpy", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358498, "node_id": "MDU6TGFiZWw5NDEzNTg0OTg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/numpy", "name": "numpy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-12T09:56:09Z", "updated_at": "2018-09-27T14:34:34Z", "closed_at": "2018-09-27T14:34:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When running the tests in `numpy/core/tests/test_numeric.py`, on Chrome I'm getting the following error,\r\n```py\r\nRuntimeError: float unrepresentable in integer range\r\n    at wasm-function[2117]:17\r\n    at wasm-function[5735]:22\r\n    at wasm-function[1294]:247\r\n    at wasm-function[938]:1280\r\n    at wasm-function[941]:57\r\n    at wasm-function[2343]:226\r\n    at wasm-function[4716]:10\r\n    at wasm-function[809]:1140\r\n    at wasm-function[810]:41\r\n    [...]\r\n    at Object.Module.__runPython (http://127.0.0.1:58909/pyodide.asm.js:4:1912921)\r\n    at Object.Module.runPython (http://127.0.0.1:58909/pyodide.asm.js:4:40764)\r\n    at <anonymous>:374:34\r\n    at callFunction (<anonymous>:361:33)\r\n    at <anonymous>:371:23\r\n    at <anonymous>:372:3\r\n```\r\nthat is low level enough to kill the pytest session, and so Python doesn't seem to be able to recover from it. I'm not sure if it's an equivalent of a segfault in Webassembly/emscripten. \r\n\r\nIn firefox, the same tests also fails with an even more obscure error message,\r\n```\r\n@http://127.0.0.1:37759/pyodide.asm.js line 4 > WebAssembly.Module:wasm-function[2117]:0xf75f4\r\n@http://127.0.0.1:37759/pyodide.asm.js line 4 > WebAssembly.Module:wasm-function[5735]:0x1a0326\r\n@http://127.0.0.1:37759/pyodide.asm.js line 4 > WebAssembly.Module:wasm-function[1294]:0xbd444\r\n@http://127.0.0.1:37759/pyodide.asm.js line 4 > WebAssembly.Module:wasm-function[4386]:0x19958a\r\n[..]\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[2719]:0x23a1a3\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[2714]:0x234014\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[15462]:0x601efa\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[805]:0xf97e9\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[801]:0xf8d95\r\n@http://127.0.0.1:37759/pyodide.asm.wasm:wasm-function[800]:0xf89f3\r\n```\r\n\r\nIt is reproducible with repeated runs.\r\n\r\nA possible solution using `BINARYEN_TRAP_MODE` flag is discussed [here](https://groups.google.com/forum/#!topic/emscripten-discuss/IJr4ApiW_zU).\r\n\r\nFull test logs can be found in https://github.com/iodide-project/pyodide/issues/69#issuecomment-420616635\r\nTested with Python 3.7 and numpy 1.15.1.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/157", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/157/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/157/events", "html_url": "https://github.com/pyodide/pyodide/issues/157", "id": 359396108, "node_id": "MDU6SXNzdWUzNTkzOTYxMDg=", "number": 157, "title": "Float precision issues in numpy", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358498, "node_id": "MDU6TGFiZWw5NDEzNTg0OTg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/numpy", "name": "numpy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-12T09:39:02Z", "updated_at": "2022-05-02T05:20:34Z", "closed_at": "2022-05-02T05:20:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There are two numpy test failures due to small mismatches in float computations,\r\n\r\n```py\r\n___________________________ TestGeomspace.test_basic ___________________________\r\n\r\nself = <numpy.core.tests.test_function_base.TestGeomspace object at 0x3782d78>\r\n\r\n    def test_basic(self):\r\n        y = geomspace(1, 1e6)\r\n        assert_(len(y) == 50)\r\n        y = geomspace(1, 1e6, num=100)\r\n>       assert_(y[-1] == 10 ** 6)\r\nE       AssertionError \r\n        # note y[-1]=999999.9999999979 and y.dtype='float64'\r\n\r\nlib/python3.7/site-packages/numpy/core/tests/test_function_base.py:87: AssertionError\r\n__________________________ TestLog2.test_log2_ints ____________________________\r\n\r\nself = <numpy.core.tests.test_umath.TestLog2 object at 0x691d5b8>\r\n\r\n    def test_log2_ints(self):\r\n        # a good log2 implementation should provide this,\r\n        # might fail on OS with bad libm\r\n        for i in range(1, 65):\r\n            v = np.log2(2.**i)\r\n>           assert_equal(v, float(i), err_msg='at exponent %d' % i)\r\nE           AssertionError:\r\nE           Items are not equal: at exponent 29\r\nE            ACTUAL: 29.00000000000004\r\nE            DESIRED: 29.0\r\n\r\nlib/python3.7/site-packages/numpy/core/tests/test_umath.py:557: AssertionError\r\n```\r\nboth `29` and `10**6` integers should have an exact float representation in 64 bit.\r\n\r\nFull test logs can be found in https://github.com/iodide-project/pyodide/issues/69#issuecomment-420616635\r\nTested with Python 3.7 and numpy 1.15.1.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/156", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/156/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/156/events", "html_url": "https://github.com/pyodide/pyodide/issues/156", "id": 359386026, "node_id": "MDU6SXNzdWUzNTkzODYwMjY=", "number": 156, "title": "Issues with exception raising after setting numpy.errstate", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358498, "node_id": "MDU6TGFiZWw5NDEzNTg0OTg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/numpy", "name": "numpy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-12T09:13:40Z", "updated_at": "2022-11-11T10:51:08Z", "closed_at": "2022-11-11T10:51:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There are 3 failing tests in numpy due to the fact that exceptions are not raised when they should (e.g. on division by 0 after setting `numpy.errstate(all='raise')`.\r\n\r\nA minimal example to reproduce is for instance,\r\n```py\r\nimport numpy as np\r\n\r\nwith np.errstate(all='raise', under='ignore'):\r\n    a = -np.arange(3)\r\n    # This should work\r\n    with np.errstate(invalid='ignore'):\r\n        np.sqrt(a)\r\n    # While this should fail (while it doesn't)!\r\n    np.sqrt(a)\r\n```\r\n\r\nThe full list of 3 failing numpy tests can be found below,\r\n\r\n<details>\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n__________________________ TestErrstate.test_invalid ___________________________\r\n\r\nself = <numpy.core.tests.test_errstate.TestErrstate object at 0x34b6f08>\r\n\r\n    @pytest.mark.skipif(platform.machine() == \"armv5tel\", reason=\"See gh-413.\")\r\n    def test_invalid(self):\r\n        with np.errstate(all='raise', under='ignore'):\r\n            a = -np.arange(3)\r\n            # This should work\r\n            with np.errstate(invalid='ignore'):\r\n                np.sqrt(a)\r\n            # While this should fail!\r\n            try:\r\n                np.sqrt(a)\r\n            except FloatingPointError:\r\n                pass\r\n            else:\r\n>               self.fail(\"Did not raise an invalid error\")\r\nE               AttributeError: 'TestErrstate' object has no attribute 'fail'\r\n\r\nlib/python3.7/site-packages/numpy/core/tests/test_errstate.py:24: AttributeError\r\n___________________________ TestErrstate.test_divide ___________________________\r\n\r\nself = <numpy.core.tests.test_errstate.TestErrstate object at 0x37db088>\r\n\r\n    def test_divide(self):\r\n        with np.errstate(all='raise', under='ignore'):\r\n            a = -np.arange(3)\r\n            # This should work\r\n            with np.errstate(divide='ignore'):\r\n                a // 0\r\n            # While this should fail!\r\n            try:\r\n                a // 0\r\n            except FloatingPointError:\r\n                pass\r\n            else:\r\n>               self.fail(\"Did not raise divide by zero error\")\r\nE               AttributeError: 'TestErrstate' object has no attribute 'fail'\r\n\r\nlib/python3.7/site-packages/numpy/core/tests/test_errstate.py:38: AttributeError\r\n____________________________ TestHalf.test_half_fpe ____________________________\r\n\r\nself = <numpy.core.tests.test_half.TestHalf object at 0x381c4a8>\r\n\r\n    @pytest.mark.skipif(platform.machine() == \"armv5tel\",\r\n                        reason=\"See gh-413.\")\r\n    def test_half_fpe(self):\r\n        with np.errstate(all='raise'):\r\n            sx16 = np.array((1e-4,), dtype=float16)\r\n            bx16 = np.array((1e4,), dtype=float16)\r\n            sy16 = float16(1e-4)\r\n            by16 = float16(1e4)\r\n\r\n            # Underflow errors\r\n>           assert_raises_fpe('underflow', lambda a, b:a*b, sx16, sx16)\r\n\r\nlib/python3.7/site-packages/numpy/core/tests/test_half.py:369:\r\n```\r\n</details>\r\n\r\n(the raised `AttributeError` is a bit confusing because of https://github.com/numpy/numpy/pull/11933)\r\n\r\nFull test logs can be found in https://github.com/iodide-project/pyodide/issues/69#issuecomment-420616635\r\nTested with Python 3.7 and numpy 1.15.1.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/128", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/128/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/128/events", "html_url": "https://github.com/pyodide/pyodide/issues/128", "id": 353877484, "node_id": "MDU6SXNzdWUzNTM4Nzc0ODQ=", "number": 128, "title": "pandas fails to load in Chrome", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-24T18:05:59Z", "updated_at": "2021-04-18T08:33:11Z", "closed_at": "2021-04-18T08:33:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently pandas package fails to load in Chrome and the [corresponding import tests are skipped](https://github.com/iodide-project/pyodide/blob/9736ef1d8ff9dc756657aa2f78753346ce26c258/test/test_common.py#L30).\r\n\r\n(Opening an issue to track that situation)", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/122", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/122/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/122/events", "html_url": "https://github.com/pyodide/pyodide/issues/122", "id": 352546683, "node_id": "MDU6SXNzdWUzNTI1NDY2ODM=", "number": 122, "title": "Full build path is included in package `.js` files", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-21T13:49:39Z", "updated_at": "2018-08-22T17:54:53Z", "closed_at": "2018-08-22T17:54:53Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "As @rth pointed out in #121, the full build path to the `.data` file is included in the `.js` file for each package.  This is *really* a problem, since it doesn't prevent the packages from being deployed anywhere, but it is leaking information we probably don't want to and makes the builds less reproducible.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/122/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/122/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/119", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/119/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/119/events", "html_url": "https://github.com/pyodide/pyodide/issues/119", "id": 352209224, "node_id": "MDU6SXNzdWUzNTIyMDkyMjQ=", "number": 119, "title": "CPython tests randomly time out", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941362625, "node_id": "MDU6TGFiZWw5NDEzNjI2MjU=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/testing", "name": "testing", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-20T16:31:05Z", "updated_at": "2018-09-05T17:05:05Z", "closed_at": "2018-09-05T17:05:05Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Occasionally, a CPython test will take longer than 10 minutes, and Circle-CI will thus cancel the test run for not having any output for more than 10 minutes.  None of the tests *should* take that long as a matter of course.  This doesn't seem to happen on any tests in particular (though we should document which ones here to see if there is a pattern).\r\n\r\nA short-term solution might be to use [pytest-timeout](https://pypi.org/project/pytest-timeout/) to at least get a stack trace if a test hangs.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/109", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/109/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/109/events", "html_url": "https://github.com/pyodide/pyodide/issues/109", "id": 349262007, "node_id": "MDU6SXNzdWUzNDkyNjIwMDc=", "number": 109, "title": "Data files don't load if page is at a different location from .data/.js files", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-09T19:37:22Z", "updated_at": "2018-08-09T22:15:13Z", "closed_at": "2018-08-09T22:15:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The code that is supposed to look for the data files in the same location as the .js files seems to be broken.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/108", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/108/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/108/events", "html_url": "https://github.com/pyodide/pyodide/issues/108", "id": 348130653, "node_id": "MDU6SXNzdWUzNDgxMzA2NTM=", "number": 108, "title": "CPython test `test_compile` fails on Chrome", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358706, "node_id": "MDU6TGFiZWw5NDEzNTg3MDY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/cpython", "name": "cpython", "color": "fef2c0", "default": false, "description": ""}, {"id": 999289688, "node_id": "MDU6TGFiZWw5OTkyODk2ODg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Chromium", "name": "Chromium", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-07T01:07:03Z", "updated_at": "2020-07-08T21:43:55Z", "closed_at": "2020-07-08T21:43:48Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\n======================================================================\r\nERROR: test_extended_arg (test.test_compile.TestSpecifics)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/lib/python3.6/test/test_compile.py\", line 126, in test_extended_arg\r\n    exec(code, g)\r\nRecursionError: maximum recursion depth exceeded during compilation\r\n\r\n----------------------------------------------------------------------\r\nRan 45 tests in 0.477s\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/93", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/93/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/93/events", "html_url": "https://github.com/pyodide/pyodide/issues/93", "id": 344757472, "node_id": "MDU6SXNzdWUzNDQ3NTc0NzI=", "number": 93, "title": "Page crashes when importing python library after a previous cell outputted a string", "user": {"login": "enymuss", "id": 5191207, "node_id": "MDQ6VXNlcjUxOTEyMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5191207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enymuss", "html_url": "https://github.com/enymuss", "followers_url": "https://api.github.com/users/enymuss/followers", "following_url": "https://api.github.com/users/enymuss/following{/other_user}", "gists_url": "https://api.github.com/users/enymuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/enymuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enymuss/subscriptions", "organizations_url": "https://api.github.com/users/enymuss/orgs", "repos_url": "https://api.github.com/users/enymuss/repos", "events_url": "https://api.github.com/users/enymuss/events{/privacy}", "received_events_url": "https://api.github.com/users/enymuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 999289688, "node_id": "MDU6TGFiZWw5OTkyODk2ODg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Chromium", "name": "Chromium", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-07-26T09:06:18Z", "updated_at": "2018-07-30T19:37:21Z", "closed_at": "2018-07-30T19:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Page crashes when calling pyodide.loadPackage() after any previous cell, called after downloading python, outputted a string.\r\n\r\nPS. Thank you for adding Iodide and Pyodide to work on Chrome\r\n\r\n### What I Did\r\n\r\nIn the Matplotlib demo:\r\n1) Run plugin cell to import python.\r\n2) Create new py cell, with contents:\r\n```\r\nimport sys\r\nsys.version\r\n```\r\n3) Run cell to get string output.\r\n4) Run js cell to import matplotlib.\r\n\r\nIn Matplotlib demo page, the page crashes straight away.\r\nIn Python demo page, get TypeError then crash after numpy.data has been downloaded.\r\n\r\n### What I Expected\r\n\r\nExpected the matplotlib library and dependencies to download.\r\n\r\n### What Happened \r\n\r\nChrome page crash. Get 'Aw, snap!' screen.\r\n\r\n### (OPTIONAL) notebook that reproduces bug\r\n\r\nMatplotlib Demo: https://iodide.io/pyodide-demo/matplotlib.html\r\nPython Demo: https://iodide.io/iodide-examples/python.html\r\n\r\nError from Python Demo (might not be relevant as the .js file is from April):\r\nTypeError: Cannot read property 'await' of undefined\r\n    at Object.loadPackage (eval at xhrObj.addEventListener (https://iodide.io/dist/iodide.pyodide-20180420.js:12101:45), <anonymous>:66:31)\r\n    at eval (eval at <anonymous> (https://iodide.io/dist/iodide.pyodide-20180420.js:11988:49), <anonymous>:1:9)\r\n    at eval (<anonymous>)\r\n    at https://iodide.io/dist/iodide.pyodide-20180420.js:11988:49\r\n    at https://iodide.io/dist/iodide.pyodide-20180420.js:75578:18\r\n    at dispatch (https://iodide.io/dist/iodide.pyodide-20180420.js:49465:18)\r\n    at https://iodide.io/dist/iodide.pyodide-20180420.js:12144:20\r\n    at Object.dispatch (https://iodide.io/dist/iodide.pyodide-20180420.js:75578:18)\r\n    at Object.dispatcher.(anonymous function).params [as evaluateCell] (https://iodide.io/dist/iodide.pyodide-20180420.js:11263:95)\r\n    at UserTask.callback (https://iodide.io/dist/iodide.pyodide-20180420.js:11285:16)\r\n\r\n\r\n### Further Tests\r\n\r\nPrint statements that are ok (can import python library after running the cell):\r\n```\r\nimport math\r\nmath.log(1024, 2)\r\n```\r\n\r\n```\r\nimport numpy as np\r\nnp.zeros((16, 16))\r\n```\r\n\r\n`1+2.5`, `[1, 2]`, `[]`, `{}`, `[0, 1, 32.0, b'bytes']`\r\n\r\nPrint statements which cause crash:\r\n```\r\nimport sys\r\nsys.version\r\n```\r\n```\r\nimport os\r\nos.getcwd()\r\n```\r\n`['asd']`, `complex(1, 2)`, `()`, `True`\r\n\r\nThe not ok print statements do not have to be run straight before to cause crash.\r\nRunning cells in the following order after importing python:\r\n`2+3`\r\n`()`\r\n`3+3`\r\n`pyodide.loadPackage()`\r\nalso causes crash.\r\n\r\nExample which will cause crash:\r\n![example of setup to cause crash](https://user-images.githubusercontent.com/5191207/43252659-57e38902-90c3-11e8-8c87-9f5d4ff32b63.png)\r\n\r\nExample of ok statements\r\n![ok statments examples](https://user-images.githubusercontent.com/5191207/43252623-3e689c56-90c3-11e8-81ad-886e933974eb.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/93/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/93/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/92", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/92/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/92/events", "html_url": "https://github.com/pyodide/pyodide/issues/92", "id": 344452759, "node_id": "MDU6SXNzdWUzNDQ0NTI3NTk=", "number": 92, "title": "Compilations errors when building numpy", "user": {"login": "rth", "id": 630936, "node_id": "MDQ6VXNlcjYzMDkzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/630936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rth", "html_url": "https://github.com/rth", "followers_url": "https://api.github.com/users/rth/followers", "following_url": "https://api.github.com/users/rth/following{/other_user}", "gists_url": "https://api.github.com/users/rth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rth/subscriptions", "organizations_url": "https://api.github.com/users/rth/orgs", "repos_url": "https://api.github.com/users/rth/repos", "events_url": "https://api.github.com/users/rth/events{/privacy}", "received_events_url": "https://api.github.com/users/rth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358498, "node_id": "MDU6TGFiZWw5NDEzNTg0OTg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/numpy", "name": "numpy", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-25T13:51:34Z", "updated_at": "2018-07-26T17:29:38Z", "closed_at": "2018-07-26T17:29:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When building numpy locally on Linux (Gentoo) with Python 3.6, I am getting a few compilation errors, seemingly due to missing header files,\r\n\r\n1. \r\n```\r\nC compiler: cc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC\r\n\r\ncompile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/home/rth/src/pyodide/cpython/build/3.6.4/host/include/python3.6m -c'\r\ncc: _configtest.c\r\n_configtest.c:1:21: fatal error: xlocale.h: No such file or directory\r\n #include <xlocale.h>\r\n                     ^\r\ncompilation terminated.\r\n[..]\r\nfailure.\r\nremoving: _configtest.c _configtest.o\r\n```\r\n\r\n2.\r\n```\r\nC compiler: cc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC\r\n\r\ncompile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -I/home/rth/src/pyodide/cpython/build/3.6.4/host/include/python3.6m -c'\r\ncc: _configtest.c\r\n_configtest.c:1:24: fatal error: sys/endian.h: No such file or directory\r\n #include <sys/endian.h>\r\n                        ^\r\ncompilation terminated.\r\n```\r\n\r\nand some linking issues\r\n```\r\n/home/rth/src/pyodide/packages/numpy/build/numpy-1.14.1/_configtest.c:6: undefined reference to `exp'\r\ncollect2: error: ld returned 1 exit status\r\n```\r\n\r\nFinally the build exits with,\r\n```pytb\r\nInstalled /home/rth/src/pyodide/cpython/build/3.6.4/host/lib/python3.6/site-packages/numpy-1.14.1-py3.6-linux-x86_64.egg\r\nProcessing dependencies for numpy==1.14.1\r\nFinished processing dependencies for numpy==1.14.1\r\nemcc -include math.h -I../../config -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/rth/src/pyodide/cpython/installs/python-3.6.4/include -c /tmp/tmppjksnfm2/source.c -o /tmp/tmppjksnfm2/tmp/tmppjksnfm2/source.bc -MMD -MF /tmp/tmppjksnfm2/tmp/tmppjksnfm2/source.o.d\r\nERROR:root:/tmp/tmppjksnfm2/source.c: No such file or directory (\"/tmp/tmppjksnfm2/source.c\" was expected to be an input file, based on the commandline arguments provided)\r\nTraceback (most recent call last):\r\n  File \"../tools/buildall\", line 87, in <module>\r\n    main(args)\r\n  File \"../tools/buildall\", line 82, in main\r\n    build_packages(packagesdir, args)\r\n  File \"../tools/buildall\", line 49, in build_packages\r\n    build_package(pkgname, dependencies, packagesdir, args)\r\n  File \"../tools/buildall\", line 21, in build_package\r\n    build_package(req, dependencies, packagesdir, args)\r\n  File \"../tools/buildall\", line 26, in build_package\r\n    os.path.join(packagesdir, pkgname, 'meta.yaml'), args)\r\n  File \"/home/rth/src/pyodide/tools/buildpkg.py\", line 171, in build_package\r\n    compile(path, srcpath, pkg, args)\r\n  File \"/home/rth/src/pyodide/tools/buildpkg.py\", line 113, in compile\r\n    '--target', args.target], check=True)\r\n  File \"/home/rth/.miniconda3/envs/pyodide-env/lib/python3.6/subprocess.py\", line 418, in run\r\n    output=stdout, stderr=stderr)\r\nsubprocess.CalledProcessError: Command '['/home/rth/src/pyodide/cpython/build/3.6.4/host/bin/python3', '/home/rth/src/pyodide/tools/pywasmcross', '--cflags', ' -include math.h -I../../config', '--ldflags', '-O3 -s BINARYEN_METHOD=native-wasm -Werror -s EMULATED_FUNCTION_POINTERS=1 -s EMULATE_FUNCTION_POINTER_CASTS=1 -s SIDE_MODULE=1 -s WASM=1 --memory-init-file 0 ', '--host', '/home/rth/src/pyodide/cpython/build/3.6.4/host', '--target', '/home/rth/src/pyodide/cpython/installs/python-3.6.4']' returned non-zero exit status 1.\r\nmake[1]: *** [Makefile:5: all] Error 1\r\nmake[1]: Leaving directory '/home/rth/src/pyodide/packages'\r\n```\r\n\r\nSee full [numpy-compilation-log.txt](https://github.com/iodide-project/pyodide/files/2228086/numpy-compilation-log.txt) attached. Both header files can be found in `./emsdk/emsdk/emscripten/tag-1.38.4/system/include/` but for some reason the compiler doesn't see them.\r\n\r\nThis was obtained as a result of running,\r\n```\r\nmake -C packages clean\r\nmake\r\n```\r\n\r\nPlease let met know if some additional information would be helpful for debugging.\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/92/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/92/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/90", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/90/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/90/events", "html_url": "https://github.com/pyodide/pyodide/issues/90", "id": 344105398, "node_id": "MDU6SXNzdWUzNDQxMDUzOTg=", "number": 90, "title": "Random errors on Chrome in Circle-CI", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941362625, "node_id": "MDU6TGFiZWw5NDEzNjI2MjU=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/testing", "name": "testing", "color": "fbca04", "default": false, "description": ""}, {"id": 999289688, "node_id": "MDU6TGFiZWw5OTkyODk2ODg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Chromium", "name": "Chromium", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-07-24T16:08:03Z", "updated_at": "2018-08-06T18:16:04Z", "closed_at": "2018-08-06T18:16:04Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Some tests seem to fail, but only sometimes, on Circle-CI with the Selenium chromedriver, with the following:\r\n\r\n```\r\n\r\n    def readinto(self, b):\r\n        \"\"\"Read up to len(b) bytes into the writable buffer *b* and return\r\n            the number of bytes read.  If the socket is non-blocking and no bytes\r\n            are available, None is returned.\r\n    \r\n            If *b* is non-empty, a 0 return value indicates that the connection\r\n            was shutdown at the other end.\r\n            \"\"\"\r\n        self._checkClosed()\r\n        self._checkReadable()\r\n        if self._timeout_occurred:\r\n            raise OSError(\"cannot read from timed out object\")\r\n        while True:\r\n            try:\r\n>               return self._sock.recv_into(b)\r\nE               ConnectionResetError: [Errno 104] Connection reset by peer\r\n\r\n/usr/local/lib/python3.6/socket.py:586: ConnectionResetError\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/90/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/86", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/86/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/86/events", "html_url": "https://github.com/pyodide/pyodide/issues/86", "id": 342940813, "node_id": "MDU6SXNzdWUzNDI5NDA4MTM=", "number": 86, "title": "Some Python regression tests fail with \"maximum call stack size exceeded\" on Chrom(ium)", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 999289688, "node_id": "MDU6TGFiZWw5OTkyODk2ODg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Chromium", "name": "Chromium", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-20T01:20:56Z", "updated_at": "2018-07-23T19:22:01Z", "closed_at": "2018-07-23T19:22:01Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I wonder if it's just possible to increase the call stack size?\r\n\r\n```\r\nE       selenium.common.exceptions.WebDriverException: Message: unknown error: Maximum call stack size exceeded\r\nE         (Session info: headless chrome=67.0.3396.99)\r\nE         (Driver info: chromedriver=2.40.565383 (76257d1ab79276b2d53ee976b2c3e3b9f335cde7),platform=Linux 4.4.0-130-generic x86_64)\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/86/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/84", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/84/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/84/events", "html_url": "https://github.com/pyodide/pyodide/issues/84", "id": 342521533, "node_id": "MDU6SXNzdWUzNDI1MjE1MzM=", "number": 84, "title": "emsdk make fails on return of subprocess.check_output", "user": {"login": "rngadam", "id": 538542, "node_id": "MDQ6VXNlcjUzODU0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/538542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rngadam", "html_url": "https://github.com/rngadam", "followers_url": "https://api.github.com/users/rngadam/followers", "following_url": "https://api.github.com/users/rngadam/following{/other_user}", "gists_url": "https://api.github.com/users/rngadam/gists{/gist_id}", "starred_url": "https://api.github.com/users/rngadam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rngadam/subscriptions", "organizations_url": "https://api.github.com/users/rngadam/orgs", "repos_url": "https://api.github.com/users/rngadam/repos", "events_url": "https://api.github.com/users/rngadam/events{/privacy}", "received_events_url": "https://api.github.com/users/rngadam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 999284868, "node_id": "MDU6TGFiZWw5OTkyODQ4Njg=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/macOS", "name": "macOS", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-07-18T23:03:27Z", "updated_at": "2020-05-28T20:46:26Z", "closed_at": "2020-05-28T20:46:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "macOS X High Sierra 10.13.5\r\n\r\n```\r\ncd emsdk\r\nmake\r\ngit clone https://github.com/juj/emsdk.git\r\nCloning into 'emsdk'...\r\n[...]\r\nTraceback (most recent call last):\r\n  File \"./emsdk\", line 789, in xcode_sdk_version\r\n    return subprocess.check_output(['xcrun', '--show-sdk-version']).strip().split('.')\r\nTypeError: a bytes-like object is required, not 'str'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"./emsdk\", line 2349, in <module>\r\n    sys.exit(main())\r\n  File \"./emsdk\", line 2332, in main\r\n    success = tool.install()\r\n  File \"./emsdk\", line 1336, in install\r\n    success = tool.install()\r\n  File \"./emsdk\", line 1346, in install\r\n    success = build_llvm_tool(self)\r\n  File \"./emsdk\", line 842, in build_llvm_tool\r\n    if OSX and (not os.environ.get('LLVM_CMAKE_ARGS') or not 'HAVE_FUTIMENS' in os.environ.get('LLVM_CMAKE_ARGS')) and xcode_sdk_version() < [10,13]:\r\n  File \"./emsdk\", line 791, in xcode_sdk_version\r\n    return subprocess.checkplatform.mac_ver()[0].split('.')\r\nAttributeError: module 'subprocess' has no attribute 'checkplatform'\r\n```\r\n\r\n## problem?\r\n\r\n```\r\n> python\r\nPython 3.6.3 (default, Dec  2 2017, 14:57:51) \r\n[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin\r\n>>> subprocess.check_output(['xcrun', '--show-sdk-version'])\r\nb'10.13\\n'\r\n>>> subprocess.check_output(['xcrun', '--show-sdk-version']).strip().split('.')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: a bytes-like object is required, not 'str'\r\n```\r\n\r\n## fix?\r\n\r\nworkaround would be to conditionally ```decode('ascii')```? \r\n\r\n```\r\nsubprocess.check_output(['xcrun', '--show-sdk-version']).strip().decode('ascii').split('.')\r\n['10', '13']\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/84/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/84/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/80", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/80/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/80/events", "html_url": "https://github.com/pyodide/pyodide/issues/80", "id": 342514953, "node_id": "MDU6SXNzdWUzNDI1MTQ5NTM=", "number": 80, "title": "re-running failed make a second time fails for a different reason", "user": {"login": "rngadam", "id": 538542, "node_id": "MDQ6VXNlcjUzODU0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/538542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rngadam", "html_url": "https://github.com/rngadam", "followers_url": "https://api.github.com/users/rngadam/followers", "following_url": "https://api.github.com/users/rngadam/following{/other_user}", "gists_url": "https://api.github.com/users/rngadam/gists{/gist_id}", "starred_url": "https://api.github.com/users/rngadam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rngadam/subscriptions", "organizations_url": "https://api.github.com/users/rngadam/orgs", "repos_url": "https://api.github.com/users/rngadam/repos", "events_url": "https://api.github.com/users/rngadam/events{/privacy}", "received_events_url": "https://api.github.com/users/rngadam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-07-18T22:32:22Z", "updated_at": "2018-07-19T19:49:51Z", "closed_at": "2018-07-19T19:49:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "make script does not detect an existing clone:\r\n\r\n```\r\n> make\r\nmake -C emsdk\r\ngit clone https://github.com/juj/emsdk.git\r\nfatal: destination path 'emsdk' already exists and is not an empty directory.\r\nmake[1]: *** [emsdk/emsdk] Error 128\r\nmake: *** [emsdk/emsdk/emsdk] Error 2\r\n```", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/80/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/80/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/63", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/63/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/63/events", "html_url": "https://github.com/pyodide/pyodide/pull/63", "id": 336268565, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk3NzYzMTI0", "number": 63, "title": "Fix the passing of Javascript typed arrays to Python", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-27T15:02:15Z", "updated_at": "2018-06-27T16:16:04Z", "closed_at": "2018-06-27T15:45:18Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/pyodide/pyodide/pulls/63", "html_url": "https://github.com/pyodide/pyodide/pull/63", "diff_url": "https://github.com/pyodide/pyodide/pull/63.diff", "patch_url": "https://github.com/pyodide/pyodide/pull/63.patch", "merged_at": "2018-06-27T15:45:18Z"}, "body": "Fixes a bug when passing typed array buffers from Javascript to Python (mentioned in https://github.com/iodide-project/pyodide/issues/59#issuecomment-400600336)\r\n\r\nCc: @gabrielfriere", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/63/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/63/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/46", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/46/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/46/events", "html_url": "https://github.com/pyodide/pyodide/issues/46", "id": 328540590, "node_id": "MDU6SXNzdWUzMjg1NDA1OTA=", "number": 46, "title": "matplotlib figure doesn't update when elements are changed", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-01T14:25:14Z", "updated_at": "2018-06-04T18:51:49Z", "closed_at": "2018-06-04T18:51:49Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "It's somehow not triggering the call to `draw_idle` like it should...", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/46/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/46/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/28", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/28/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/28/events", "html_url": "https://github.com/pyodide/pyodide/issues/28", "id": 315967765, "node_id": "MDU6SXNzdWUzMTU5Njc3NjU=", "number": 28, "title": "Make work on Chrome", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941355439, "node_id": "MDU6TGFiZWw5NDEzNTU0Mzk=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/WASM", "name": "WASM", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-19T17:20:07Z", "updated_at": "2018-06-24T16:34:43Z", "closed_at": "2018-06-24T16:34:43Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/28/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/24", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/24/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/24/events", "html_url": "https://github.com/pyodide/pyodide/issues/24", "id": 313980104, "node_id": "MDU6SXNzdWUzMTM5ODAxMDQ=", "number": 24, "title": "TypeError: window[languageModule][evaluator] is not a function", "user": {"login": "jedie", "id": 71315, "node_id": "MDQ6VXNlcjcxMzE1", "avatar_url": "https://avatars.githubusercontent.com/u/71315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedie", "html_url": "https://github.com/jedie", "followers_url": "https://api.github.com/users/jedie/followers", "following_url": "https://api.github.com/users/jedie/following{/other_user}", "gists_url": "https://api.github.com/users/jedie/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedie/subscriptions", "organizations_url": "https://api.github.com/users/jedie/orgs", "repos_url": "https://api.github.com/users/jedie/repos", "events_url": "https://api.github.com/users/jedie/events{/privacy}", "received_events_url": "https://api.github.com/users/jedie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-04-13T06:09:20Z", "updated_at": "2018-07-20T01:22:41Z", "closed_at": "2018-07-20T01:22:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried https://iodide-project.github.io/pyodide-demo/python.html and get this:\r\n\r\nclick to scroll this output\r\n\r\n```\r\nTypeError: window[languageModule][evaluator] is not a function\r\nevaluateCodeCell/<@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:119823:16\r\ncreateThunkMiddleware/</</<@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:75401:18\r\ndispatch@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:56457:18\r\nevaluateCell/<@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:119983:7\r\ncreateThunkMiddleware/</</<@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:75401:18\r\ndispatcher[action]@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:119175:41\r\ncallback@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:119197:5\r\nboundFunc@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:37666:9\r\nReactErrorUtils.invokeGuardedCallback@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:37672:7\r\nexecuteDispatch@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:37456:5\r\nexecuteDispatchesInOrder@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:37479:5\r\nexecuteDispatchesAndRelease@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:15214:5\r\nexecuteDispatchesAndReleaseTopLevel@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:15225:10\r\nforEachAccumulated@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:45314:5\r\nprocessEventQueue@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:15425:7\r\nrunEventQueueInBatch@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:60933:3\r\nhandleTopLevel@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:60943:5\r\nhandleTopLevelImpl@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:64187:5\r\nperform@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:16592:13\r\nbatchedUpdates@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:64106:14\r\nbatchedUpdates@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:12320:10\r\ndispatchEvent@https://iodide-project.github.io/pyodide-demo/iodide.dev.js:64262:7\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/24/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/24/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/22", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/22/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/22/events", "html_url": "https://github.com/pyodide/pyodide/issues/22", "id": 313430083, "node_id": "MDU6SXNzdWUzMTM0MzAwODM=", "number": 22, "title": "Punt to Javascript for text encoding/decoding", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941358706, "node_id": "MDU6TGFiZWw5NDEzNTg3MDY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/cpython", "name": "cpython", "color": "fef2c0", "default": false, "description": ""}, {"id": 941360807, "node_id": "MDU6TGFiZWw5NDEzNjA4MDc=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/Javascript", "name": "Javascript", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-11T18:05:14Z", "updated_at": "2020-12-31T09:58:55Z", "closed_at": "2020-12-31T09:58:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The tables for some of the larger CJK encodings are quite large in the Python implementation.  There should be no need for this, since the browser / OS already has them.\r\n\r\nWe should punt out to Javascript to handle encoding/decoding for codecs that we don't ship with Pyodide -- requiring some mapping between the Python names for the codecs and the web ones.\r\n\r\nThere is a polyfill [here](https://github.com/inexorabletash/text-encoding) to handle some of the cross-browser differences.\r\n\r\nI'd consider this very low priority.  Python code should generally stick to Unicode and let the input/output layer handle encoding/decoding anyway.", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/22/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/pyodide/pyodide/issues/16", "repository_url": "https://api.github.com/repos/pyodide/pyodide", "labels_url": "https://api.github.com/repos/pyodide/pyodide/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/pyodide/pyodide/issues/16/comments", "events_url": "https://api.github.com/repos/pyodide/pyodide/issues/16/events", "html_url": "https://github.com/pyodide/pyodide/issues/16", "id": 303192306, "node_id": "MDU6SXNzdWUzMDMxOTIzMDY=", "number": 16, "title": "META: emscripten issues", "user": {"login": "mdboom", "id": 38294, "node_id": "MDQ6VXNlcjM4Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/38294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdboom", "html_url": "https://github.com/mdboom", "followers_url": "https://api.github.com/users/mdboom/followers", "following_url": "https://api.github.com/users/mdboom/following{/other_user}", "gists_url": "https://api.github.com/users/mdboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdboom/subscriptions", "organizations_url": "https://api.github.com/users/mdboom/orgs", "repos_url": "https://api.github.com/users/mdboom/repos", "events_url": "https://api.github.com/users/mdboom/events{/privacy}", "received_events_url": "https://api.github.com/users/mdboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 846473836, "node_id": "MDU6TGFiZWw4NDY0NzM4MzY=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 941355439, "node_id": "MDU6TGFiZWw5NDEzNTU0Mzk=", "url": "https://api.github.com/repos/pyodide/pyodide/labels/WASM", "name": "WASM", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-07T17:35:13Z", "updated_at": "2018-05-22T17:45:13Z", "closed_at": "2018-05-22T17:45:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "This is a meta issue to track issues filed with emscripten where I'm getting stuck.\r\n\r\n- [x] kripken/emscripten#6308\r\n- [x] kripken/emscripten#6309\r\n- [x] kripken/emscripten#6310\r\n- [x] kripken/emscripten#6355\r\n- [x] kripken/emscripten#6362\r\n- [x] kripken/emscripten#6444", "reactions": {"url": "https://api.github.com/repos/pyodide/pyodide/issues/16/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/pyodide/pyodide/issues/16/timeline", "performed_via_github_app": null, "state_reason": "completed"}]