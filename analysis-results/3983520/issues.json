[{"url": "https://api.github.com/repos/nilearn/nilearn/issues/3630", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3630/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3630/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3630/events", "html_url": "https://github.com/nilearn/nilearn/issues/3630", "id": 1646581684, "node_id": "I_kwDOABLbHM5iJNe0", "number": 3630, "title": "[BUG] Broken link for data fetch in fixed-effects example", "user": {"login": "alpinho", "id": 10830228, "node_id": "MDQ6VXNlcjEwODMwMjI4", "avatar_url": "https://avatars.githubusercontent.com/u/10830228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alpinho", "html_url": "https://github.com/alpinho", "followers_url": "https://api.github.com/users/alpinho/followers", "following_url": "https://api.github.com/users/alpinho/following{/other_user}", "gists_url": "https://api.github.com/users/alpinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/alpinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alpinho/subscriptions", "organizations_url": "https://api.github.com/users/alpinho/orgs", "repos_url": "https://api.github.com/users/alpinho/repos", "events_url": "https://api.github.com/users/alpinho/events{/privacy}", "received_events_url": "https://api.github.com/users/alpinho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-29T21:46:44Z", "updated_at": "2023-04-14T21:41:34Z", "closed_at": "2023-04-11T14:14:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Operating system\n\n- [X] Linux\n- [ ] Mac\n- [ ] Windows\n\n### Operating system version\n\nFor example one of the following:\r\n- Linux Ubuntu 22.04\r\n- Mac OS Version 12 \"monterey\"\r\n- Windows 11\r\n\n\n### Python version\n\n- [ ] 3.11\n- [X] 3.10\n- [ ] 3.9\n- [ ] 3.8\n- [ ] 3.7\n\n### nilearn version\n\n0.9.1\n\n### Expected behavior\n\nExpect to successfully download the data. [This link](http://nipy.sourceforge.net/data-packages/nipy-data-0.2.tar.gz) is broken in [line 2 of this example](https://nilearn.github.io/dev/auto_examples/04_glm_first_level/plot_fixed_effects.html#example-of-explicit-fixed-effects-fmri-model-fitting).\n\n### Current behavior & error messages\n\nThis is what I got:\r\n\r\n\r\n\r\n```bash\r\nIn [1]: from nilearn.datasets import func\r\n\r\nIn [2]: data = func.fetch_fiac_first_level()\r\nMissing functional scan for session 1.\r\nData absent, downloading...\r\nDownloading data from http://nipy.sourceforge.net/data-packages/nipy-data-0.2.tar.gz ...\r\n---------------------------------------------------------------------------\r\nHTTPError                                 Traceback (most recent call last)\r\nInput In [2], in <cell line: 1>()\r\n----> 1 data = func.fetch_fiac_first_level()\r\n\r\nFile ~/.local/lib/python3.10/site-packages/nilearn/datasets/func.py:2563, in fetch_fiac_first_level(data_dir, verbose)\r\n   2560 url = 'http://nipy.sourceforge.net/data-packages/nipy-data-0.2.tar.gz'\r\n   2562 archive_path = os.path.join(data_dir, os.path.basename(url))\r\n-> 2563 _fetch_file(url, data_dir)\r\n   2564 try:\r\n   2565     _uncompress_file(archive_path)\r\n\r\nFile ~/.local/lib/python3.10/site-packages/nilearn/datasets/utils.py:526, in _fetch_file(url, data_dir, resume, overwrite, md5sum, username, password, verbose, session)\r\n    524     with requests.Session() as session:\r\n    525         session.mount(\"ftp:\", _NaiveFTPAdapter())\r\n--> 526         return _fetch_file(\r\n    527             url, data_dir, resume=resume, overwrite=overwrite,\r\n    528             md5sum=md5sum, username=username, password=password,\r\n    529             verbose=verbose, session=session)\r\n    530 # Determine data path\r\n    531 if not os.path.exists(data_dir):\r\n\r\nFile ~/.local/lib/python3.10/site-packages/nilearn/datasets/utils.py:602, in _fetch_file(url, data_dir, resume, overwrite, md5sum, username, password, verbose, session)\r\n    599 prepped = session.prepare_request(req)\r\n    600 with session.send(\r\n    601         prepped, stream=True, timeout=_REQUESTS_TIMEOUT) as resp:\r\n--> 602     resp.raise_for_status()\r\n    603     with open(temp_full_name, \"wb\") as fh:\r\n    604         _chunk_read_(resp, fh, report_hook=(verbose > 0),\r\n    605                      initial_size=initial_size, verbose=verbose)\r\n\r\nFile ~/anaconda3/envs/nilearn091-py3104/lib/python3.10/site-packages/requests/models.py:1021, in Response.raise_for_status(self)\r\n   1016     http_error_msg = (\r\n   1017         f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\r\n   1018     )\r\n   1020 if http_error_msg:\r\n-> 1021     raise HTTPError(http_error_msg, response=self)\r\n\r\nHTTPError: 404 Client Error: Not Found for url: https://nipy.sourceforge.net/data-packages/nipy-data-0.2.tar.gz\r\n> /home/analu/anaconda3/envs/nilearn091-py3104/lib/python3.10/site-packages/requests/models.py(1021)raise_for_status()\r\n   1019 \r\n   1020         if http_error_msg:\r\n-> 1021             raise HTTPError(http_error_msg, response=self)\r\n   1022 \r\n   1023     def close(self):\r\n\r\n```\r\n\n\n### Steps and code to reproduce bug\n\n```python\r\n# Paste your code here\r\n\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3630/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3630/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3598", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3598/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3598/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3598/events", "html_url": "https://github.com/nilearn/nilearn/issues/3598", "id": 1626678388, "node_id": "I_kwDOABLbHM5g9SR0", "number": 3598, "title": "Memory error when running signal.clean (function using all the RAM on a 128GB RAM system!)", "user": {"login": "bwinsto2", "id": 61159065, "node_id": "MDQ6VXNlcjYxMTU5MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/61159065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwinsto2", "html_url": "https://github.com/bwinsto2", "followers_url": "https://api.github.com/users/bwinsto2/followers", "following_url": "https://api.github.com/users/bwinsto2/following{/other_user}", "gists_url": "https://api.github.com/users/bwinsto2/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwinsto2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwinsto2/subscriptions", "organizations_url": "https://api.github.com/users/bwinsto2/orgs", "repos_url": "https://api.github.com/users/bwinsto2/repos", "events_url": "https://api.github.com/users/bwinsto2/events{/privacy}", "received_events_url": "https://api.github.com/users/bwinsto2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-16T04:13:15Z", "updated_at": "2023-03-17T04:28:50Z", "closed_at": "2023-03-17T04:28:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nRunning into MemoryErrors when running `clean.signal` (specifically the `cubic_spline_fitter` for scrubbing). My system is 128GB RAM, so this is surprising that it's so resource intensive:\r\n<img width=\"601\" alt=\"Screen Shot 2023-03-15 at 11 54 15 PM\" src=\"https://user-images.githubusercontent.com/61159065/225511814-f1ed6d64-fac7-4525-bed1-9b0ddf76dc5a.png\">\r\n\r\nIt would be great if someone could help me out. I copied the errors that I'm getting and also the function I wrote, which loads in confounds and does signal cleaning for fMRI image. \r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n0.10.0\r\n\r\n### Actual behavior\r\nFirst I got this error:\r\n```python\r\nclean_img = nuisance_regression('/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_space-MNI152NLin6Asym_res-2_desc-preproc_bold.nii.gz', '/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_desc-confounds_timeseries.tsv', 0.8, 4, 0.9)\r\nIdentified 11/1592 volumes for scrubbing\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-19-2296996f0f65>\", line 1, in <module>\r\n\tclean_img = nuisance_regression('/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_space-MNI152NLin6Asym_res-2_desc-preproc_bold.nii.gz', '/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_desc-confounds_timeseries.tsv', 0.8, 4, 0.9)\r\n\r\n  File \"/usr/local/CPCR-Repository/projects/imaging_fxns/fmri_cleaning\", line 88, in nuisance_regression\r\n\tt_r = tr, sample_mask = sample_mask).T\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 629, in clean\r\n\tt_r)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 693, in _handle_scrubbed_volumes\r\n\tsignals = _interpolate_volumes(signals, sample_mask, t_r)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 714, in _interpolate_volumes\r\n\tcubic_spline_fitter = CubicSpline(remained_vol, remained_x)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/scipy/interpolate/_cubic.py\", line 629, in __init__\r\n\tx, dx, y, axis, _ = prepare_input(x, y, axis)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/scipy/interpolate/_cubic.py\", line 41, in prepare_input\r\n\ty = y.astype(dtype, copy=False)\r\n\r\nMemoryError: Unable to allocate 10.6 GiB for an array with shape (1581, 902629) and data type float64\r\n```\r\nThen I ran it again in a new console and got this:\r\n```python\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-2-2296996f0f65>\", line 1, in <module>\r\n\tclean_img = nuisance_regression('/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_space-MNI152NLin6Asym_res-2_desc-preproc_bold.nii.gz', '/data/2104/derivatives/fmriprep/sub-21040005/ses-3/func/sub-21040005_ses-3_task-movie_run-1_desc-confounds_timeseries.tsv', 0.8, 4, 0.9)\r\n\r\n  File \"/usr/local/CPCR-Repository/projects/imaging_fxns/fmri_cleaning\", line 89, in nuisance_regression\r\n\tt_r = tr, sample_mask = sample_mask).T\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 629, in clean\r\n\tt_r)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 693, in _handle_scrubbed_volumes\r\n\tsignals = _interpolate_volumes(signals, sample_mask, t_r)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/nilearn/signal.py\", line 714, in _interpolate_volumes\r\n\tcubic_spline_fitter = CubicSpline(remained_vol, remained_x)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/scipy/interpolate/_cubic.py\", line 784, in __init__\r\n\tsuper().__init__(x, y, s, axis=0, extrapolate=extrapolate)\r\n\r\n  File \"/usr/local/anaconda3/lib/python3.7/site-packages/scipy/interpolate/_cubic.py\", line 146, in __init__\r\n\tc = np.empty((4, len(x) - 1) + y.shape[1:], dtype=t.dtype)\r\n\r\nMemoryError: Unable to allocate 42.5 GiB for an array with shape (4, 1580, 902629) and data type float64\r\n```\r\nNo idea why it's making an array of this shape.\r\n\r\n\r\n### Steps and code to reproduce bug\r\nCall to this function above in error message:\r\n```python\r\ndef nuisance_regression(img, confound_tsv, tr, fwhm, fd_thresh):\r\n\t#load fmriprep confounds, calculate motion mask\r\n\tconfounds, sample_mask = load_confounds(img, strategy = ['motion','compcor','scrub','high_pass'],\r\n                                        \tmotion = 'full', compcor = 'anat_combined', n_compcor = 10,\r\n                                        \tdemean = False, fd_threshold = fd_thresh, scrub = 0)\r\n\tprint(f'Identified {len(confounds) - len(sample_mask)}/{len(confounds)} volumes for scrubbing')\r\n\r\n\t#nifti image to 4d np array\r\n\traw_img = niftis.get_nii_data(img)\r\n    \r\n\t#flatten to 2d and transpose\r\n\tvts = niftis.voxel_x_ts(raw_img).T\r\n    \r\n\t#nuisance regression (and transpose back)\r\n\tclean_img = signal.clean(vts, confounds = confounds,\r\n                         \tdetrend = False, standardize = False,\r\n                         \tt_r = tr, sample_mask = sample_mask).T\r\n    \r\n\t#reshape back into 4d, turn into niimg\r\n\tclean_img = niftis.vts_to_brain(clean_img, raw_img.shape)\r\n\tclean_img = nimg.new_img_like(img, clean_img)\r\n    \r\n\t#spatially smooth\r\n\tclean_img = nimg.smooth_img(clean_img, fwhm)    \r\n    \r\n\t#plot 50th volume for QC purposes\r\n\tnplot.plot_epi(clean_img.slicer[:,:,:,50])\r\n\r\n\treturn clean_img\r\n\r\n```\r\nany help would be very appreciated <3\r\n\r\n```python\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3579", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3579/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3579/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3579/events", "html_url": "https://github.com/nilearn/nilearn/issues/3579", "id": 1615469097, "node_id": "I_kwDOABLbHM5gShop", "number": 3579, "title": "Problem with flm_objects as input to non_parametric_inference() ", "user": {"login": "LineKruse", "id": 30391510, "node_id": "MDQ6VXNlcjMwMzkxNTEw", "avatar_url": "https://avatars.githubusercontent.com/u/30391510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LineKruse", "html_url": "https://github.com/LineKruse", "followers_url": "https://api.github.com/users/LineKruse/followers", "following_url": "https://api.github.com/users/LineKruse/following{/other_user}", "gists_url": "https://api.github.com/users/LineKruse/gists{/gist_id}", "starred_url": "https://api.github.com/users/LineKruse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LineKruse/subscriptions", "organizations_url": "https://api.github.com/users/LineKruse/orgs", "repos_url": "https://api.github.com/users/LineKruse/repos", "events_url": "https://api.github.com/users/LineKruse/events{/privacy}", "received_events_url": "https://api.github.com/users/LineKruse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-03-08T15:30:30Z", "updated_at": "2023-03-31T08:44:30Z", "closed_at": "2023-03-31T08:44:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe non_parametric_inference() function uses the _check_second_level_input() function whose \"flm_object\" argument is set to False. This raises an error when trying to pass first-level model objects as second level input to the function. The function takes no \"flm_object\" arguments, so there is no way to change this parameter to True, thus allowing first-level model objects. \r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.10.0\r\n\r\n### Expected behavior\r\nIf the \"flm_object\" argument is necessary in the _check_second_level_input() function, the non_parametetric_inference() function should take an argument that allows the user to change this parameter from False to True. \r\n\r\n### Actual behavior\r\nIt is not possible to change the \"flm_object\" argument from False to True, and thus not possible to pass first-level model objects to the second_level_input argument. \r\n\r\n### Steps and code to reproduce bug\r\n\r\n1) Import modules \r\n\r\n```python\r\nfrom nilearn.datasets import fetch_language_localizer_demo_dataset\r\nfrom nilearn.glm.first_level import first_level_from_bids\r\nfrom nilearn.glm.second_level import non_parametric_inference\r\n```\r\n\r\n2) Extract first-level model objects from BIDS data \r\n\r\n```python\r\ndata_dir, _ = fetch_language_localizer_demo_dataset()\r\ntask_label = 'languagelocalizer'\r\nmodels, models_run_imgs, models_events, models_confounds = \\\r\n    first_level_from_bids(\r\n        data_dir, task_label,\r\n        img_filters=[('desc', 'preproc')])\r\n```\r\n\r\n3) Fit first-level models \r\n\r\n```python\r\nmodel_and_args = zip(models, models_run_imgs, models_events, models_confounds)\r\nfor m_idx, (model, imgs, events, confounds) in enumerate(model_and_args):\r\n     model.fit(imgs, events, confounds)\r\n     model.compute_contrast('language-string')\r\n```\r\n\r\n4) Run non-parametric permutation using first-level models as second-level input \r\n\r\n```python\r\ndesign_matrix = pd.DataFrame(\r\n    [1] * len(second_level_input),\r\n    columns=['intercept'],\r\n)\r\n\r\nn_perm=1000\r\n\r\nout_dict = non_parametric_inference(\r\n    second_level_input=models,\r\n    design_matrix=design_matrix,\r\n    first_level_contrast='language-string',\r\n    model_intercept=True,\r\n    n_perm=n_perm,  \r\n    two_sided_test=False,\r\n    smoothing_fwhm=8.0,\r\n    n_jobs=1,\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3561", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3561/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3561/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3561/events", "html_url": "https://github.com/nilearn/nilearn/issues/3561", "id": 1608839490, "node_id": "I_kwDOABLbHM5f5PFC", "number": 3561, "title": "Possible discrepancies between the `Cluster ID` and its label in the `label_map` of `get_clusters_tables`", "user": {"login": "JulioAPeraza", "id": 52050407, "node_id": "MDQ6VXNlcjUyMDUwNDA3", "avatar_url": "https://avatars.githubusercontent.com/u/52050407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulioAPeraza", "html_url": "https://github.com/JulioAPeraza", "followers_url": "https://api.github.com/users/JulioAPeraza/followers", "following_url": "https://api.github.com/users/JulioAPeraza/following{/other_user}", "gists_url": "https://api.github.com/users/JulioAPeraza/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulioAPeraza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulioAPeraza/subscriptions", "organizations_url": "https://api.github.com/users/JulioAPeraza/orgs", "repos_url": "https://api.github.com/users/JulioAPeraza/repos", "events_url": "https://api.github.com/users/JulioAPeraza/events{/privacy}", "received_events_url": "https://api.github.com/users/JulioAPeraza/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-03T15:30:49Z", "updated_at": "2023-03-08T08:30:38Z", "closed_at": "2023-03-08T08:30:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThanks for adding the label maps to the outputs of `get_clusters_tables`.\r\nI was working with the clusters table and the label maps and noticed a mismatch between the Cluster ID and the label in the `label_map`. While cluster IDs are sorted based on their `peak_vals` and relabeled in the for loop, it seems that the `label_maps` are not relabeled since they are appended to the list before sorting the cluster IDs.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: `0.10.1.dev`\r\n\r\n### Expected behavior\r\nCluster `n` corresponds to voxels with value `n` in the label map. Except for `n = 0`, when the peak falls outside of the cluster body.\r\n\r\n### Actual behavior\r\nIn some cases, cluster `x` corresponds to a cluster with value `y`.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n<!-- Please ensure the code is a minimal runnable example using Nilearn data to showcase it. -->\r\n<!-- https://stackoverflow.com/help/minimal-reproducible-example -->\r\n\r\n```python\r\nimport nibabel as nib\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nfrom nilearn import reporting\r\nfrom nilearn import datasets\r\n\r\nmotor_images = datasets.fetch_neurovault_motor_task()\r\nstat_img = motor_images.images[0]\r\n\r\n# Run get_clusters_table on stat_img\r\nclusters_table, label_maps = reporting.get_clusters_table(\r\n            stat_img, 3.6, two_sided=True, return_label_maps=True\r\n        )\r\n# Select negative tail\r\nneg_clusters_table = clusters_table[clusters_table[\"Peak Stat\"] < 0]\r\nneg_label_maps = label_maps[1]\r\n\r\n# Get cluster IDs and its respective coordinates from the clusters table\r\nnew_clusters_table = neg_clusters_table.apply(pd.to_numeric, errors='coerce').dropna()\r\ncluster_ids = new_clusters_table[\"Cluster ID\"].to_list()\r\ncoords = new_clusters_table[[\"X\", \"Y\", \"Z\"]].to_numpy()\r\n\r\n# Use the coordinates from the clusters table to find the Cluster ID in the label map \r\nijk = nib.affines.apply_affine(np.linalg.inv(neg_label_maps.affine), coords).astype(int)\r\ncluster_label_ids = neg_label_maps.get_fdata()[tuple(ijk.T)]\r\n\r\nprint(cluster_ids, cluster_label_ids)\r\n# > [1.0, 2.0, 3.0, 4.0, 5.0] [1. 3. 5. 2. 4.]\r\n# In this we get that coordinate of cluster 1 has value of 1 in the label map, \r\n# but cluster 2 has value of 3, 3 value of 5, 4 value of 2 and 5 value of 4. \r\n# The array [1. 3. 5. 2. 4.] corresponds to the sorted indices that were not apply \r\n# to the label_maps.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3561/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3561/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3524", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3524/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3524/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3524/events", "html_url": "https://github.com/nilearn/nilearn/issues/3524", "id": 1592984180, "node_id": "I_kwDOABLbHM5e8wJ0", "number": 3524, "title": "cannot build GLM model from BIDS if several files have same BIDS entity but different label", "user": {"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-02-21T07:43:13Z", "updated_at": "2023-03-29T08:52:11Z", "closed_at": "2023-03-29T08:52:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nIf a bids dataset contain files that share the same entity (specifically 'ce', 'dir', 'echo') but with different labels, then events and confounds files may not be found.\r\n\r\nI believe this is because some entities are not included when creating the filters for events and confounds.\r\n\r\nhttps://github.com/nilearn/nilearn/blob/f62e896234e389c9579bbf41b3c2531111cc6371/nilearn/glm/first_level/first_level.py#L1029\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.10.1.dev0\r\n\r\n### Expected behavior\r\n\r\nFor a model to be built for BIDS dataset that have any of the official BIDS entities.\r\n\r\n### Actual behavior\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/home/remi/github/nilearn/nilearn/glm/tests/test_bids.py\", line 11, in <module>\r\n    models, m_imgs, m_events, m_confounds = first_level_from_bids(\r\n  File \"/home/remi/github/nilearn/nilearn/glm/first_level/first_level.py\", line 1038, in first_level_from_bids\r\n    raise ValueError('%d events.tsv files found for %d bold '\r\nValueError: 12 events.tsv files found for 6 bold files. Same number of event files as the number of runs is expected\r\n```\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\n<!-- Please ensure the code is a minimal runnable example using Nilearn data to showcase it. -->\r\n<!-- https://stackoverflow.com/help/minimal-reproducible-example -->\r\n\r\n```python\r\n# using a modified version of create_fake_bids_dataset\r\n# to create func files with ce-A and files ce-B\r\nbids_path = create_fake_bids_dataset(n_sub=10, n_ses=2,\r\n                                        tasks=['localizer', 'main'],\r\n                                        n_runs=[1, 3], \r\n                                        entities = ['ce', ['A', 'B']])\r\n\r\nmodels, m_imgs, m_events, m_confounds = first_level_from_bids(\r\n    bids_path, 'main', 'MNI', [('desc', 'preproc'), ('ce', 'A')])\r\n```\r\n\r\nExample dummy dataset \r\n\r\n```text\r\nbids_dataset/sub-01\r\n\u251c\u2500\u2500 ses-01\r\n\u2502   \u251c\u2500\u2500 anat\r\n\u2502   \u2502   \u2514\u2500\u2500 sub-01_T1w.nii.gz\r\n\u2502   \u2514\u2500\u2500 func\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-A_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-A_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-A_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-B_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-B_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-localizer_ce-B_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-01_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-01_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-01_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-02_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-02_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-02_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-03_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-03_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-A_run-03_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-01_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-01_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-01_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-02_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-02_bold.nii.gz\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-02_events.tsv\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-03_bold.json\r\n\u2502       \u251c\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-03_bold.nii.gz\r\n\u2502       \u2514\u2500\u2500 sub-01_ses-01_task-main_ce-B_run-03_events.tsv\r\n\u2514\u2500\u2500 ses-02\r\n    \u2514\u2500\u2500 func\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-A_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-A_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-A_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-B_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-B_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-localizer_ce-B_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-01_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-01_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-01_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-02_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-02_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-02_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-03_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-03_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-A_run-03_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-01_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-01_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-01_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-02_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-02_bold.nii.gz\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-02_events.tsv\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-03_bold.json\r\n        \u251c\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-03_bold.nii.gz\r\n        \u2514\u2500\u2500 sub-01_ses-02_task-main_ce-B_run-03_events.tsv\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3524/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3467", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3467/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3467/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3467/events", "html_url": "https://github.com/nilearn/nilearn/issues/3467", "id": 1535506039, "node_id": "I_kwDOABLbHM5bhfZ3", "number": 3467, "title": "binarize_img seems incorrect used on images with negative values", "user": {"login": "smeisler", "id": 27028726, "node_id": "MDQ6VXNlcjI3MDI4NzI2", "avatar_url": "https://avatars.githubusercontent.com/u/27028726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smeisler", "html_url": "https://github.com/smeisler", "followers_url": "https://api.github.com/users/smeisler/followers", "following_url": "https://api.github.com/users/smeisler/following{/other_user}", "gists_url": "https://api.github.com/users/smeisler/gists{/gist_id}", "starred_url": "https://api.github.com/users/smeisler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smeisler/subscriptions", "organizations_url": "https://api.github.com/users/smeisler/orgs", "repos_url": "https://api.github.com/users/smeisler/repos", "events_url": "https://api.github.com/users/smeisler/events{/privacy}", "received_events_url": "https://api.github.com/users/smeisler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-16T21:30:04Z", "updated_at": "2023-01-16T22:24:30Z", "closed_at": "2023-01-16T22:23:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nHi Nilearn devs,\r\n I am working with kind of a strange ROI mask from a public dataset, where the background = -1 (black), cortical surface = 0 (dark gray), and ROIs of interest have values >= 1 (light gray and white). See the picture below.\r\n<img width=\"462\" alt=\"image\" src=\"https://user-images.githubusercontent.com/27028726/212767285-f0c4a0d0-f7f4-4cb0-b28d-a5cdc665d39e.png\">\r\nSure the numbering conventions are a bit odd, but I am just trying to extract the ROI masks, so thresholding at 0 with `binarize_img` should do the trick in theory.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.10.0\r\n\r\n### Expected behavior\r\nShould result in an image with the ROI masks at value 1 and 0 everywhere else\r\n\r\n### Actual behavior\r\nThe binarized image has 0s along the cortical surface (as expected), but 1s **everywhere** else (**background** and ROIs of interest). It appears that perhaps `binarize_img` may be using the magnitude of the values without considering the sign. Otherwise, why would the background (originally valued at -1) now survive 0-thresholding?\r\n<img width=\"462\" alt=\"image\" src=\"https://user-images.githubusercontent.com/27028726/212768050-7257a425-3576-4e9c-9256-73b0aa879c7d.png\">\r\n\r\n\r\n### Steps and code to reproduce bug\r\n```\r\nroi = '/PATH/TO/lh.floc-bodies.nii.gz'\r\nroi_binary = binarize_img(roi,threshold=0)\r\nroi_binary.to_filename('ROI_check.nii.gz')\r\n```\r\nthe ROI can be found here: https://drive.google.com/file/d/1EDNvsLolU496ur5ILe2hXv1CK80BjXs6/view?usp=sharing\r\n\r\nThank you,\r\nSteven\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3467/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3464", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3464/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3464/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3464/events", "html_url": "https://github.com/nilearn/nilearn/issues/3464", "id": 1533443819, "node_id": "I_kwDOABLbHM5bZn7r", "number": 3464, "title": "Function `non_parametric_inference` ignores any covariates", "user": {"login": "jrdalenberg", "id": 32652989, "node_id": "MDQ6VXNlcjMyNjUyOTg5", "avatar_url": "https://avatars.githubusercontent.com/u/32652989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrdalenberg", "html_url": "https://github.com/jrdalenberg", "followers_url": "https://api.github.com/users/jrdalenberg/followers", "following_url": "https://api.github.com/users/jrdalenberg/following{/other_user}", "gists_url": "https://api.github.com/users/jrdalenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrdalenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrdalenberg/subscriptions", "organizations_url": "https://api.github.com/users/jrdalenberg/orgs", "repos_url": "https://api.github.com/users/jrdalenberg/repos", "events_url": "https://api.github.com/users/jrdalenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/jrdalenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T19:31:54Z", "updated_at": "2023-02-14T08:56:37Z", "closed_at": "2023-02-14T08:56:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The function [`non_parametric_inference`](https://github.com/nilearn/nilearn/blob/b556cd1a293e0f8396ea854b9a73214a8bbd1262/nilearn/glm/second_level/second_level.py#L593) extracts [a target contrast from the input design matrix](https://github.com/nilearn/nilearn/blob/b556cd1a293e0f8396ea854b9a73214a8bbd1262/nilearn/glm/second_level/second_level.py#L848) to perform a non-parametric test using the function [`permuted_ols`](https://github.com/nilearn/nilearn/blob/b556cd1a293e0f8396ea854b9a73214a8bbd1262/nilearn/glm/second_level/second_level.py#L854). However, any covariates/confounding variates are ignored here. So, currently, users are unable to perform non-parametric inference tests in the context of covariates.\r\n\r\nAlso see NeuroStars discussion: https://neurostars.org/t/dof-in-nilearns-non-parametric-inference/24416\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3464/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3461", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3461/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3461/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3461/events", "html_url": "https://github.com/nilearn/nilearn/issues/3461", "id": 1529340814, "node_id": "I_kwDOABLbHM5bJ-OO", "number": 3461, "title": "`resample_img` forces input image to be NIfTI", "user": {"login": "mgxd", "id": 14110164, "node_id": "MDQ6VXNlcjE0MTEwMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/14110164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgxd", "html_url": "https://github.com/mgxd", "followers_url": "https://api.github.com/users/mgxd/followers", "following_url": "https://api.github.com/users/mgxd/following{/other_user}", "gists_url": "https://api.github.com/users/mgxd/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgxd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgxd/subscriptions", "organizations_url": "https://api.github.com/users/mgxd/orgs", "repos_url": "https://api.github.com/users/mgxd/repos", "events_url": "https://api.github.com/users/mgxd/events{/privacy}", "received_events_url": "https://api.github.com/users/mgxd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-11T16:29:55Z", "updated_at": "2023-01-18T16:26:12Z", "closed_at": "2023-01-18T16:26:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nOriginally popped up in https://github.com/nipreps/smriprep/issues/316 - while plotting `MGHImage`s, sometimes the image needs to be resampled, which is failing with:\r\n\r\n```python\r\n  File \"/opt/conda/lib/python3.9/site-packages/niworkflows/viz/utils.py\", line 377, in plot_registration\r\n\t  display = plot_anat(anat_nii, **plot_params)\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/plotting/img_plotting.py\", line 472, in plot_anat\r\n\t  display = plot_img(anat_img, cut_coords=cut_coords,\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/plotting/img_plotting.py\", line 264, in plot_img\r\n\t  display = _plot_img_with_bg(\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/plotting/img_plotting.py\", line 201, in _plot_img_with_bg\r\n\t  display.add_overlay(new_img_like(img, data, affine),\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/plotting/displays/_slicers.py\", line 273, in add_overlay\r\n\t  ims = self._map_show(img, type='imshow', threshold=threshold, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/plotting/displays/_slicers.py\", line 349, in _map_show\r\n\t  img = reorder_img(img, resample=resampling_interpolation)\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/image/resampling.py\", line 740, in reorder_img\r\n\t  return resample_img(img, target_affine=target_affine,\r\n  File \"/opt/conda/lib/python3.9/site-packages/nilearn/image/resampling.py\", line 451, in resample_img\r\n\t  sform, sform_code = img.get_sform(coded=True)\r\n  AttributeError: 'MGHImage' object has no attribute 'get_sform'\r\n```\r\n\r\n`MGHImage` is still a [niimg-like object](https://nilearn.github.io/stable/manipulating_images/input_output.html#niimg-like-objects), so the check should be loosened.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.10.0\r\n\r\n### Expected behavior\r\nResamples the image\r\n\r\n### Actual behavior\r\nAssumes the image is \r\n\r\nI'll open a PR to loosen this restriction.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3441", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3441/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3441/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3441/events", "html_url": "https://github.com/nilearn/nilearn/issues/3441", "id": 1472591324, "node_id": "I_kwDOABLbHM5XxfXc", "number": 3441, "title": "Precision error in CanICA test in pre-release environment", "user": {"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-12-02T09:47:35Z", "updated_at": "2023-01-06T10:06:41Z", "closed_at": "2023-01-06T10:06:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The test `nilearn/decomposition/tests/test_canica.py::test_canica_square_img` fails due to a precision error in ubuntu-latest (`ubuntu-22.04`) pre-release environment: https://github.com/nilearn/nilearn/actions/runs/3577698793/jobs/6017001262\r\n\r\nSee also: https://github.com/nilearn/nilearn/pull/3430#issuecomment-1331867028\r\n\r\nWe can look into improving the test.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3441/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3441/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3435", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3435/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3435/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3435/events", "html_url": "https://github.com/nilearn/nilearn/issues/3435", "id": 1471518003, "node_id": "I_kwDOABLbHM5XtZUz", "number": 3435, "title": "IndexError in non_parametric_inference when using two_sided_test=True", "user": {"login": "jrdalenberg", "id": 32652989, "node_id": "MDQ6VXNlcjMyNjUyOTg5", "avatar_url": "https://avatars.githubusercontent.com/u/32652989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrdalenberg", "html_url": "https://github.com/jrdalenberg", "followers_url": "https://api.github.com/users/jrdalenberg/followers", "following_url": "https://api.github.com/users/jrdalenberg/following{/other_user}", "gists_url": "https://api.github.com/users/jrdalenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrdalenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrdalenberg/subscriptions", "organizations_url": "https://api.github.com/users/jrdalenberg/orgs", "repos_url": "https://api.github.com/users/jrdalenberg/repos", "events_url": "https://api.github.com/users/jrdalenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/jrdalenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-01T15:30:32Z", "updated_at": "2022-12-13T11:07:13Z", "closed_at": "2022-12-13T11:07:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am running a non-parametric test for a one-sample second level t-test: \r\n\r\n```python\r\n# Run permutation test\r\nMD_dict = non_parametric_inference(\r\n    MD_imgs,\r\n    design_matrix=MD_design_matrix,\r\n    mask=MD_second_level_mask,\r\n    model_intercept=True,\r\n    second_level_contrast=\"intercept\",\r\n    two_sided_test=True,\r\n    smoothing_fwhm=6,\r\n    n_jobs=8,\r\n    threshold=0.001\r\n)\r\n```\r\nWhen  `two_sided_test=False`, it runs fine but with `two_sided_test=True`, I get the following error:\r\n\r\n```python\r\nFile ~/.virtualenvs/brainiak/lib/python3.8/site-packages/nilearn/glm/second_level/second_level.py:862, in non_parametric_inference(second_level_input, confounds, design_matrix, second_level_contrast, first_level_contrast, mask, smoothing_fwhm, model_intercept, n_perm, two_sided_test, random_state, n_jobs, verbose, threshold, tfce)\r\n    859 target_vars = masker.transform(effect_maps)\r\n    861 # Perform massively univariate analysis with permuted OLS\r\n--> 862 outputs = permuted_ols(\r\n    863     tested_var,\r\n    864     target_vars,\r\n    865     model_intercept=model_intercept,\r\n    866     n_perm=n_perm,\r\n    867     two_sided_test=two_sided_test,\r\n    868     random_state=random_state,\r\n    869     n_jobs=n_jobs,\r\n    870     verbose=max(0, verbose - 1),\r\n    871     masker=masker,\r\n    872     threshold=threshold,\r\n    873     tfce=tfce,\r\n    874     output_type='dict',\r\n    875 )\r\n    876 neg_log10_vfwe_pvals_img = masker.inverse_transform(np.ravel(\r\n    877     outputs['logp_max_t']\r\n    878 ))\r\n    880 if (not tfce) and (threshold is None):\r\n\r\nFile ~/.virtualenvs/brainiak/lib/python3.8/site-packages/nilearn/mass_univariate/permuted_least_squares.py:935, in permuted_ols(tested_vars, target_vars, confounding_vars, model_intercept, n_perm, two_sided_test, random_state, n_jobs, verbose, masker, tfce, threshold, output_type)\r\n    930 for j_val in cluster_labels[1:]:  # skip background\r\n    931     cluster_mass = np.sum(\r\n    932         np.fabs(scores_original_data_3d[labeled_arr3d == j_val])\r\n    933         - threshold_t\r\n    934     )\r\n--> 935     cluster_dict['mass_regressor'][j_val] = cluster_mass\r\n    937 # Calculate p-values from size/mass values and associated h0s\r\n    938 for metric in ['mass', 'size']:\r\n\r\nIndexError: index 23 is out of bounds for axis 0 with size 23\r\n```\r\n\r\nIt's this loop: \r\nhttps://github.com/nilearn/nilearn/blob/main/nilearn/mass_univariate/permuted_least_squares.py#L928\r\n\r\nI looked at the cluster labeling and it seems to be an error in combining positive and negative clusters, here:\r\nhttps://github.com/nilearn/nilearn/blob/main/nilearn/mass_univariate/permuted_least_squares.py#L905\r\n\r\nThe procedure here seems to incorrectly add the labels and overwrite clusters. \r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3406", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3406/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3406/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3406/events", "html_url": "https://github.com/nilearn/nilearn/issues/3406", "id": 1437032119, "node_id": "I_kwDOABLbHM5Vp163", "number": 3406, "title": "signal clean should not use population standard deviation", "user": {"login": "DasDominus", "id": 76655953, "node_id": "MDQ6VXNlcjc2NjU1OTUz", "avatar_url": "https://avatars.githubusercontent.com/u/76655953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DasDominus", "html_url": "https://github.com/DasDominus", "followers_url": "https://api.github.com/users/DasDominus/followers", "following_url": "https://api.github.com/users/DasDominus/following{/other_user}", "gists_url": "https://api.github.com/users/DasDominus/gists{/gist_id}", "starred_url": "https://api.github.com/users/DasDominus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DasDominus/subscriptions", "organizations_url": "https://api.github.com/users/DasDominus/orgs", "repos_url": "https://api.github.com/users/DasDominus/repos", "events_url": "https://api.github.com/users/DasDominus/events{/privacy}", "received_events_url": "https://api.github.com/users/DasDominus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-11-05T13:26:49Z", "updated_at": "2023-03-21T16:27:04Z", "closed_at": "2023-03-21T16:27:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Nilearn version: 0.9.2\r\n\r\nIn signal.clean, the calculation simply uses numpy.std, this method by default uses N / ddf=0 for calculation, indicating population std. For fMRI studies, especially when std are calculated along time axis, the data is usually a sample of the population. The method should use sample std instead.\r\n\r\n### Expected behavior\r\nGiven dataframe\r\n\r\n1  4  7\r\n2  5  8\r\n3  6  9\r\n\r\nz-scored sample should be:\r\n\r\n(anp - anp.mean(axis=0))/anp.std(axis=0, ddof=1)\r\narray([[-1., -1., -1.],\r\n       [ 0.,  0.,  0.],\r\n       [ 1.,  1.,  1.]])\r\n\r\n### Actual behavior\r\nnilearn.signal.clean(anp)\r\narray([[-1.2247448, -1.2247448, -1.2247448],\r\n       [ 0.       ,  0.       ,  0.       ],\r\n       [ 1.2247448,  1.2247448,  1.2247448]], dtype=float32)\r\n\r\n### Steps and code to reproduce bug\r\n\r\nI think it would be beneficial if we change the default behavior.\r\nHowever, given the scope of this change, I think it's worth adding the ddof as an option instead of changing the default action.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3406/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3406/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3389", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3389/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3389/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3389/events", "html_url": "https://github.com/nilearn/nilearn/issues/3389", "id": 1415656253, "node_id": "I_kwDOABLbHM5UYTM9", "number": 3389, "title": "Error when using plot_connectome to plot negative connectivity (and setting edge_vmax < 0)", "user": {"login": "paulcbogdan", "id": 24307153, "node_id": "MDQ6VXNlcjI0MzA3MTUz", "avatar_url": "https://avatars.githubusercontent.com/u/24307153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulcbogdan", "html_url": "https://github.com/paulcbogdan", "followers_url": "https://api.github.com/users/paulcbogdan/followers", "following_url": "https://api.github.com/users/paulcbogdan/following{/other_user}", "gists_url": "https://api.github.com/users/paulcbogdan/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulcbogdan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulcbogdan/subscriptions", "organizations_url": "https://api.github.com/users/paulcbogdan/orgs", "repos_url": "https://api.github.com/users/paulcbogdan/repos", "events_url": "https://api.github.com/users/paulcbogdan/events{/privacy}", "received_events_url": "https://api.github.com/users/paulcbogdan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-19T22:33:32Z", "updated_at": "2022-10-24T10:03:32Z", "closed_at": "2022-10-24T10:03:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nFor `plotting.plot_connectome(...)`, I was interested in plotting a matrix with only negative edges. However, when you set the `edge_vmin` parameter to be less than zero, it raises an error. I propose PR #3390.\r\n\r\nFor example, the code below raises the error further below. \r\n\r\n```Python\r\nimport numpy as np\r\nfrom nilearn import plotting\r\n\r\nif __name__ == '__main__':\r\n    plotting.plot_connectome(np.array([[0, -2.5], [-2.5, 0]]),\r\n                             node_coords=np.array([[0, 0, 0], [50, 50, 50]]),\r\n                             edge_vmin=-3,\r\n                             edge_vmax=-1,\r\n                             colorbar=True)\r\n    plotting.show()\r\n```\r\n\r\n```Python\r\nTraceback (most recent call last):\r\n  File \"E:/Users/paulc/PycharmProjects/ConnSearch/test_nilearn.py\", line 5, in <module>\r\n    plotting.plot_connectome(np.array([[0, -2.5], [-2.5, 0]]),\r\n  File \"C:\\Users\\paulc\\Anaconda3\\lib\\site-packages\\nilearn\\plotting\\img_plotting.py\", line 1208, in plot_connectome\r\n    display.add_graph(adjacency_matrix, node_coords,\r\n  File \"C:\\Users\\paulc\\Anaconda3\\lib\\site-packages\\nilearn\\plotting\\displays\\_projectors.py\", line 212, in add_graph\r\n    ax._add_lines(line_coords, adjacency_matrix_values, edge_cmap,\r\n  File \"C:\\Users\\paulc\\Anaconda3\\lib\\site-packages\\nilearn\\plotting\\displays\\_axes.py\", line 555, in _add_lines\r\n    linewidth = 1 + 2 * abs_norm(abs_line_value)\r\n  File \"C:\\Users\\paulc\\AppData\\Roaming\\Python\\Python38\\site-packages\\matplotlib\\colors.py\", line 1193, in __call__\r\n    raise ValueError(\"minvalue must be less than or equal to maxvalue\")\r\nValueError: minvalue must be less than or equal to maxvalue\r\n```\r\n\r\nThe error comes `_axes.py`. The issue arises earlier than the actual error on line 555. I think this earlier line is the problem:\r\n\r\n``` Python\r\nabs_norm = Normalize(vmin=0, vmax=vmax)\r\n```\r\n\r\nBecause `vmax < 0`, then `vmax < vmin` when defining `abs_norm` above. This causes `linewidth = 1 + 2 * abs_norm(abs_line_value)` to error.\r\n\r\nCurrently, `abs_norm` takes some x (a connectivity edge weight) and returns `(abs_line_value - 0)/vmax`, except when it errors. From what I can tell, `abs_norm(abs_line_value)` is meant to essentially represent the magnitude of abs_line_value relative to the highest magnitude specified by the user.  My updated code does while accounting for cases where `vmax < 0` and `abs(vmin) > abs(vmax)`. Here is my updated code, which fixes the bug:\r\n\r\n```Python\r\nabs_norm = Normalize(vmin=0, vmax=max(abs(vmax), abs(vmin)))\r\n```\r\n\r\nAfter this fix, the error disappears. This image shows the new output of my initial example above, and the output is as expected: https://imgur.com/jrPKbep\r\n\r\nNilearn version: 0.9.0\r\n\r\n### Expected behavior\r\n\r\nIt should plot the connectivity matrix of negative edges.\r\n\r\n### Actual behavior\r\n\r\nIt errors.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nI provide example code above.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3382", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3382/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3382/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3382/events", "html_url": "https://github.com/nilearn/nilearn/issues/3382", "id": 1405362699, "node_id": "I_kwDOABLbHM5TxCIL", "number": 3382, "title": "test_tfce_smoke failure on x86_64", "user": {"login": "jayvdb", "id": 15092, "node_id": "MDQ6VXNlcjE1MDky", "avatar_url": "https://avatars.githubusercontent.com/u/15092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayvdb", "html_url": "https://github.com/jayvdb", "followers_url": "https://api.github.com/users/jayvdb/followers", "following_url": "https://api.github.com/users/jayvdb/following{/other_user}", "gists_url": "https://api.github.com/users/jayvdb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayvdb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayvdb/subscriptions", "organizations_url": "https://api.github.com/users/jayvdb/orgs", "repos_url": "https://api.github.com/users/jayvdb/repos", "events_url": "https://api.github.com/users/jayvdb/events{/privacy}", "received_events_url": "https://api.github.com/users/jayvdb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-10-11T23:51:37Z", "updated_at": "2023-01-09T14:42:30Z", "closed_at": "2023-01-09T14:42:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, running the testsuite of nilearn 0.9.2 on Python 3.10 (on build.opensuse.org Tumbleweed) I get the errors below for x86_64.  This failure does not occur on ppc64.\r\n\r\nNilearn version:0.9.2\r\n\r\n### Expected behavior\r\nTests pass.\r\n\r\n### Actual behavior\r\n```py\r\n[ 1504s] _______________________________ test_tfce_smoke ________________________________\r\n[ 1504s] \r\n[ 1504s] random_state = 0\r\n[ 1504s] \r\n[ 1504s]     def test_tfce_smoke(random_state=0):\r\n[ 1504s]         \"\"\"Test combinations of parameters related to TFCE inference.\"\"\"\r\n[ 1504s]         import nibabel as nib\r\n[ 1504s]         from nilearn.maskers import NiftiMasker\r\n[ 1504s]     \r\n[ 1504s]         # create design\r\n[ 1504s]         target_var1 = np.arange(0, 10).reshape((-1, 1))  # positive effect\r\n[ 1504s]         target_var = np.hstack((  # corresponds to 3 x 3 x 3 x 10 niimg\r\n[ 1504s]             target_var1,  # voxel 1 has positive effect\r\n[ 1504s]             - target_var1,  # voxel 2 has negative effect\r\n[ 1504s]             np.random.random((10, 25)),  # 25 remaining voxels\r\n[ 1504s]         ))\r\n[ 1504s]         tested_var = np.arange(0, 20, 2)\r\n[ 1504s]     \r\n[ 1504s]         mask_img = nib.Nifti1Image(np.ones((3, 3, 3)), np.eye(4))\r\n[ 1504s]         masker = NiftiMasker(mask_img)\r\n[ 1504s]         masker.fit(mask_img)\r\n[ 1504s]         n_descriptors = np.prod(mask_img.shape)\r\n[ 1504s]         n_regressors = 1  # tested_var is 1D\r\n[ 1504s]     \r\n[ 1504s]         # tfce is True, indicating TFCE inference should be done,\r\n[ 1504s]         # but masker is not defined.\r\n[ 1504s]         with pytest.raises(ValueError):\r\n[ 1504s]             permuted_ols(\r\n[ 1504s]                 tested_var,\r\n[ 1504s]                 target_var,\r\n[ 1504s]                 model_intercept=False,\r\n[ 1504s]                 two_sided_test=False,\r\n[ 1504s]                 n_perm=100,\r\n[ 1504s]                 random_state=random_state,\r\n[ 1504s]                 threshold=None,\r\n[ 1504s]                 masker=None,\r\n[ 1504s]                 tfce=True,\r\n[ 1504s]             )\r\n[ 1504s]     \r\n[ 1504s]         # tfce is True, but output_type is \"legacy\".\r\n[ 1504s]         # raise a warning, and get a dictionary.\r\n[ 1504s]         with pytest.warns(match=\"Overriding.\"):\r\n[ 1504s] >           out = permuted_ols(\r\n[ 1504s]                 tested_var,\r\n[ 1504s]                 target_var,\r\n[ 1504s]                 model_intercept=False,\r\n[ 1504s]                 two_sided_test=False,\r\n[ 1504s]                 n_perm=0,\r\n[ 1504s]                 random_state=random_state,\r\n[ 1504s]                 threshold=None,\r\n[ 1504s]                 masker=masker,\r\n[ 1504s]                 tfce=True,\r\n[ 1504s]                 output_type=\"legacy\",\r\n[ 1504s]             )\r\n[ 1504s] \r\n[ 1504s] nilearn/mass_univariate/tests/test_permuted_least_squares.py:511: \r\n[ 1504s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[ 1504s] nilearn/mass_univariate/permuted_least_squares.py:778: in permuted_ols\r\n[ 1504s]     tfce_original_data = _calculate_tfce(\r\n[ 1504s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[ 1504s] \r\n[ 1504s] arr4d = array([[[[       inf],\r\n[ 1504s]          [      -inf],\r\n[ 1504s]          [3.80235189]],\r\n[ 1504s] \r\n[ 1504s]         [[4.26627069],\r\n[ 1504s]          [4.27924438],\r\n[ 1504s]  ...         [4.14627345],\r\n[ 1504s]          [2.47906463]],\r\n[ 1504s] \r\n[ 1504s]         [[1.66132497],\r\n[ 1504s]          [2.49765098],\r\n[ 1504s]          [3.53112654]]]])\r\n[ 1504s] bin_struct = array([[[False, False, False],\r\n[ 1504s]         [False,  True, False],\r\n[ 1504s]         [False, False, False]],\r\n[ 1504s] \r\n[ 1504s]        [[False,  True, ...[False,  True, False]],\r\n[ 1504s] \r\n[ 1504s]        [[False, False, False],\r\n[ 1504s]         [False,  True, False],\r\n[ 1504s]         [False, False, False]]])\r\n[ 1504s] E = 0.5, H = 2, dh = 'auto', two_sided_test = False\r\n[ 1504s] \r\n[ 1504s]     def _calculate_tfce(\r\n[ 1504s]         arr4d,\r\n[ 1504s]         bin_struct,\r\n[ 1504s]         E=0.5,\r\n[ 1504s]         H=2,\r\n[ 1504s]         dh='auto',\r\n[ 1504s]         two_sided_test=True,\r\n[ 1504s]     ):\r\n[ 1504s]         \"\"\"Calculate threshold-free cluster enhancement values for scores maps.\r\n[ 1504s]     \r\n[ 1504s]         The :term:`TFCE` calculation is mostly implemented as described in [1]_,\r\n[ 1504s]         with minor modifications to produce similar results to fslmaths, as well\r\n[ 1504s]         as to support two-sided testing.\r\n[ 1504s]     \r\n[ 1504s]         Parameters\r\n[ 1504s]         ----------\r\n[ 1504s]         arr4d : :obj:`numpy.ndarray` of shape (X, Y, Z, R)\r\n[ 1504s]             Unthresholded 4D array of 3D t-statistic maps.\r\n[ 1504s]             R = regressor.\r\n[ 1504s]         bin_struct : :obj:`numpy.ndarray` of shape (3, 3, 3)\r\n[ 1504s]             Connectivity matrix for defining clusters.\r\n[ 1504s]         E : :obj:`float`, optional\r\n[ 1504s]             Extent weight. Default is 0.5.\r\n[ 1504s]         H : :obj:`float`, optional\r\n[ 1504s]             Height weight. Default is 2.\r\n[ 1504s]         dh : 'auto' or :obj:`float`, optional\r\n[ 1504s]             Step size for TFCE calculation.\r\n[ 1504s]             If set to 'auto', use 100 steps, as is done in fslmaths.\r\n[ 1504s]             A good alternative is 0.1 for z and t maps, as in [1]_.\r\n[ 1504s]             Default is 'auto'.\r\n[ 1504s]         two_sided_test : :obj:`bool`, optional\r\n[ 1504s]             Whether to assess both positive and negative clusters (True) or just\r\n[ 1504s]             positive ones (False).\r\n[ 1504s]             Default is False.\r\n[ 1504s]     \r\n[ 1504s]         Returns\r\n[ 1504s]         -------\r\n[ 1504s]         tfce_arr : :obj:`numpy.ndarray`, shape=(n_descriptors, n_regressors)\r\n[ 1504s]             :term:`TFCE` values.\r\n[ 1504s]     \r\n[ 1504s]         Notes\r\n[ 1504s]         -----\r\n[ 1504s]         In [1]_, each threshold's partial TFCE score is multiplied by dh,\r\n[ 1504s]         which makes directly comparing TFCE values across different thresholds\r\n[ 1504s]         possible.\r\n[ 1504s]         However, in fslmaths, this is not done.\r\n[ 1504s]         In the interest of maximizing similarity between nilearn and established\r\n[ 1504s]         tools, we chose to follow fslmaths' approach.\r\n[ 1504s]     \r\n[ 1504s]         Additionally, we have modified the method to support two-sided testing.\r\n[ 1504s]         In fslmaths, only positive clusters are considered.\r\n[ 1504s]     \r\n[ 1504s]         References\r\n[ 1504s]         ----------\r\n[ 1504s]         .. [1] Smith, S. M., & Nichols, T. E. (2009).\r\n[ 1504s]            Threshold-free cluster enhancement: addressing problems of smoothing,\r\n[ 1504s]            threshold dependence and localisation in cluster inference.\r\n[ 1504s]            Neuroimage, 44(1), 83-98.\r\n[ 1504s]         \"\"\"\r\n[ 1504s]         tfce_4d = np.zeros_like(arr4d)\r\n[ 1504s]     \r\n[ 1504s]         # For each passed t map\r\n[ 1504s]         for i_regressor in range(arr4d.shape[3]):\r\n[ 1504s]             arr3d = arr4d[..., i_regressor]\r\n[ 1504s]     \r\n[ 1504s]             # Get signs / threshs\r\n[ 1504s]             if two_sided_test:\r\n[ 1504s]                 signs = [-1, 1]\r\n[ 1504s]                 max_score = np.max(np.abs(arr3d))\r\n[ 1504s]             else:\r\n[ 1504s]                 signs = [1]\r\n[ 1504s]                 max_score = np.max(arr3d)\r\n[ 1504s]     \r\n[ 1504s]             if dh == 'auto':\r\n[ 1504s]                 step = max_score / 100\r\n[ 1504s]             else:\r\n[ 1504s]                 step = dh\r\n[ 1504s]     \r\n[ 1504s]             # Set based on determined step size\r\n[ 1504s] >           score_threshs = np.arange(step, max_score + step, step)\r\n[ 1504s] E           ValueError: arange: cannot compute length\r\n[ 1504s] \r\n[ 1504s] nilearn/mass_univariate/_utils.py:86: ValueError\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3382/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3378", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3378/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3378/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3378/events", "html_url": "https://github.com/nilearn/nilearn/issues/3378", "id": 1400184198, "node_id": "I_kwDOABLbHM5TdR2G", "number": 3378, "title": "`plot_matrix` colour bar overlaps with the matrix when plotting on assigned subplot axes", "user": {"login": "htwangtw", "id": 13743617, "node_id": "MDQ6VXNlcjEzNzQzNjE3", "avatar_url": "https://avatars.githubusercontent.com/u/13743617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/htwangtw", "html_url": "https://github.com/htwangtw", "followers_url": "https://api.github.com/users/htwangtw/followers", "following_url": "https://api.github.com/users/htwangtw/following{/other_user}", "gists_url": "https://api.github.com/users/htwangtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/htwangtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/htwangtw/subscriptions", "organizations_url": "https://api.github.com/users/htwangtw/orgs", "repos_url": "https://api.github.com/users/htwangtw/repos", "events_url": "https://api.github.com/users/htwangtw/events{/privacy}", "received_events_url": "https://api.github.com/users/htwangtw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-10-06T19:18:13Z", "updated_at": "2022-11-30T11:01:50Z", "closed_at": "2022-11-30T11:01:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe `plot_matrix` will overlap the colour bar on the main figure when plotting on subplots in a horizontal layout. This cannot be fixed by adjusting spacing with `subplots_adjust`.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.1\r\n\r\n### Expected behavior\r\n\r\nColour bar stay in each subplot.\r\n\r\n### Actual behavior\r\n\r\nColour bar at weird places.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nfrom nilearn import datasets\r\nfrom nilearn.maskers import NiftiMapsMasker\r\nfrom nilearn.connectome import ConnectivityMeasure\r\nfrom nilearn.plotting import plot_matrix\r\n\r\nimport numpy as np\r\n\r\nimport matplotlib.pyplot as plt\r\n\r\n\r\natlas = datasets.fetch_atlas_msdl()\r\natlas_filename = atlas['maps']\r\nlabels = atlas['labels']\r\n\r\ndata = datasets.fetch_development_fmri(n_subjects=1)\r\nfmri_filenames = data.func[0]\r\n\r\nmasker = NiftiMapsMasker(maps_img=atlas_filename, standardize=True, detrend=True)\r\ncorrelation_measure = ConnectivityMeasure(kind='correlation')\r\n\r\ntime_series = masker.fit_transform(fmri_filenames)\r\ncorrelation_matrix = correlation_measure.fit_transform([time_series])[0]\r\nnp.fill_diagonal(correlation_matrix, 0)\r\n\r\n# plot on subplot, with colorbar\r\nfig = plt.figure()\r\naxes = fig.subplots(1, 2)\r\nfor corr, ax in zip([correlation_matrix, correlation_matrix], axes):\r\n    plot_matrix(corr, labels=labels, colorbar=True, axes=ax, vmax=0.7, vmin=-0.7)\r\n```\r\nOutput:\r\n![image](https://user-images.githubusercontent.com/13743617/194398382-2905a23e-126d-4ce8-af39-0761291684ec.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3378/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3378/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3370", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3370/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3370/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3370/events", "html_url": "https://github.com/nilearn/nilearn/issues/3370", "id": 1385008528, "node_id": "I_kwDOABLbHM5SjY2Q", "number": 3370, "title": "test_get_clusters_table() fails", "user": {"login": "neurolabusc", "id": 8930807, "node_id": "MDQ6VXNlcjg5MzA4MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8930807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neurolabusc", "html_url": "https://github.com/neurolabusc", "followers_url": "https://api.github.com/users/neurolabusc/followers", "following_url": "https://api.github.com/users/neurolabusc/following{/other_user}", "gists_url": "https://api.github.com/users/neurolabusc/gists{/gist_id}", "starred_url": "https://api.github.com/users/neurolabusc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neurolabusc/subscriptions", "organizations_url": "https://api.github.com/users/neurolabusc/orgs", "repos_url": "https://api.github.com/users/neurolabusc/repos", "events_url": "https://api.github.com/users/neurolabusc/events{/privacy}", "received_events_url": "https://api.github.com/users/neurolabusc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-09-25T12:38:59Z", "updated_at": "2022-09-30T16:30:11Z", "closed_at": "2022-09-30T16:30:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "The test function `test_get_clusters_table` will fail because it does not correctly concatenate the [string](https://github.com/nilearn/nilearn/blob/52bba6e38c427f3f29fb68109bd2f16e404115ad/nilearn/reporting/tests/test_reporting.py#L127).\r\n\r\nThe existing code will generate an error regardless of if you use Python 2.7 or 3.x:\r\n\r\n```\r\nTypeError: unsupported operand type(s) for /: 'str' and 'str'\r\n```\r\n\r\nI also think the code should use the systems' defined file separator (eg `/` vs `\\`).\r\n\r\nI would suggest changing\r\n\r\n```\r\n    fname = str(tmp_path / \"stat_img.nii.gz\")\r\n```\r\n\r\nto read\r\n```\r\nimport os\r\n...\r\n    fname =  os.path.join(tmp_path, \"stat_img.nii.gz\")\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3363", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3363/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3363/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3363/events", "html_url": "https://github.com/nilearn/nilearn/issues/3363", "id": 1375723985, "node_id": "I_kwDOABLbHM5R_-HR", "number": 3363, "title": "Some tests fail in `test_nilearn_standardize` on aarch64 and ppc64le", "user": {"login": "ggardet", "id": 1826137, "node_id": "MDQ6VXNlcjE4MjYxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1826137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggardet", "html_url": "https://github.com/ggardet", "followers_url": "https://api.github.com/users/ggardet/followers", "following_url": "https://api.github.com/users/ggardet/following{/other_user}", "gists_url": "https://api.github.com/users/ggardet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggardet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggardet/subscriptions", "organizations_url": "https://api.github.com/users/ggardet/orgs", "repos_url": "https://api.github.com/users/ggardet/repos", "events_url": "https://api.github.com/users/ggardet/events{/privacy}", "received_events_url": "https://api.github.com/users/ggardet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "htwangtw", "id": 13743617, "node_id": "MDQ6VXNlcjEzNzQzNjE3", "avatar_url": "https://avatars.githubusercontent.com/u/13743617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/htwangtw", "html_url": "https://github.com/htwangtw", "followers_url": "https://api.github.com/users/htwangtw/followers", "following_url": "https://api.github.com/users/htwangtw/following{/other_user}", "gists_url": "https://api.github.com/users/htwangtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/htwangtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/htwangtw/subscriptions", "organizations_url": "https://api.github.com/users/htwangtw/orgs", "repos_url": "https://api.github.com/users/htwangtw/repos", "events_url": "https://api.github.com/users/htwangtw/events{/privacy}", "received_events_url": "https://api.github.com/users/htwangtw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "htwangtw", "id": 13743617, "node_id": "MDQ6VXNlcjEzNzQzNjE3", "avatar_url": "https://avatars.githubusercontent.com/u/13743617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/htwangtw", "html_url": "https://github.com/htwangtw", "followers_url": "https://api.github.com/users/htwangtw/followers", "following_url": "https://api.github.com/users/htwangtw/following{/other_user}", "gists_url": "https://api.github.com/users/htwangtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/htwangtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/htwangtw/subscriptions", "organizations_url": "https://api.github.com/users/htwangtw/orgs", "repos_url": "https://api.github.com/users/htwangtw/repos", "events_url": "https://api.github.com/users/htwangtw/events{/privacy}", "received_events_url": "https://api.github.com/users/htwangtw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2022-09-16T10:02:58Z", "updated_at": "2022-10-17T21:12:53Z", "closed_at": "2022-10-17T21:12:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Some tests fail in `test_nilearn_standardize` on aarch64 and ppc64le:\r\n```\r\n[ 1478s] =========================== short test summary info ============================\r\n[ 1478s] FAILED nilearn/interfaces/fmriprep/tests/test_load_confounds.py::test_nilearn_standardize[False-True-zscore]\r\n[ 1478s] FAILED nilearn/interfaces/fmriprep/tests/test_load_confounds.py::test_nilearn_standardize[False-True-psc]\r\n[ 1478s] FAILED nilearn/interfaces/fmriprep/tests/test_load_confounds.py::test_nilearn_standardize[True-True-zscore]\r\n[ 1478s] FAILED nilearn/interfaces/fmriprep/tests/test_load_confounds.py::test_nilearn_standardize[True-True-psc]\r\n[ 1478s] ==== 4 failed, 1501 passed, 18 skipped, 2332 warnings in 1437.35s (0:23:57) ====\r\n```\r\nThis has been seen on openSUSE Tumbleweed aarch64 and ppc64le.\r\n\r\nNilearn version: 0.9.1\r\n\r\n### Expected behavior\r\nTests should pass.\r\n\r\n### Actual behavior\r\nError log:\r\n```\r\n[ 1478s] =================================== FAILURES ===================================\r\n[ 1478s] _________________ test_nilearn_standardize[False-True-zscore] __________________\r\n[ 1478s] [gw0] linux -- Python 3.8.13 /usr/bin/python3.8\r\n[ 1478s] \r\n[ 1478s] tmp_path = PosixPath('/tmp/pytest-of-abuild/pytest-0/popen-gw0/test_nilearn_standardize_False1')\r\n[ 1478s] standardize_signal = 'zscore', standardize_confounds = False, detrend = True\r\n[ 1478s] \r\n[ 1478s]     @pytest.mark.filterwarnings(\"ignore\")\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_signal\", [\"zscore\", \"psc\"])\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_confounds,detrend\", [(True, False),\r\n[ 1478s]                                                                (False, True),\r\n[ 1478s]                                                                (True, True)])\r\n[ 1478s]     def test_nilearn_standardize(tmp_path, standardize_signal,\r\n[ 1478s]                                  standardize_confounds, detrend):\r\n[ 1478s]         \"\"\"Test confounds removal with logical parameters for processing signal.\"\"\"\r\n[ 1478s]         # demean is set to False to let signal.clean handle everything\r\n[ 1478s]         (img, mask_conf, mask_rand, confounds, mask) = _simu_img(tmp_path,\r\n[ 1478s]                                                                  demean=False)\r\n[ 1478s]         # We now load the time series with vs without confounds\r\n[ 1478s]         # in voxels composed of pure confounds\r\n[ 1478s]         # the correlation before and after denoising should be very low\r\n[ 1478s]         # as most of the variance is removed by denoising\r\n[ 1478s]         tseries_raw, tseries_clean = _denoise(\r\n[ 1478s]             img, mask_conf, confounds, mask,\r\n[ 1478s]             standardize_signal=standardize_signal,\r\n[ 1478s]             standardize_confounds=standardize_confounds,\r\n[ 1478s]             detrend=detrend)\r\n[ 1478s]         corr = _corr_tseries(tseries_raw, tseries_clean)\r\n[ 1478s] >       assert np.absolute(np.mean(corr)) < 0.2\r\n[ 1478s] E       AssertionError: assert 0.33262831483719746 < 0.2\r\n[ 1478s] E        +  where 0.33262831483719746 = <ufunc 'absolute'>(-0.33262831483719746)\r\n[ 1478s] E        +    where <ufunc 'absolute'> = np.absolute\r\n[ 1478s] E        +    and   -0.33262831483719746 = <function mean at 0xffff9a21edc0>(array([-0.3123347 , -0.23133167, -0.42360369, -0.35363418, -0.32598876,\\n       -0.3595312 , -0.25434503, -0.4289134 , -0.24955438, -0.2055929 ,\\n       -0.35679795, -0.31105993, -0.36647263, -0.30884376, -0.40255368,\\n       -0.23933509, -0.37519059, -0.40778676, -0.17896419, -0.27577135,\\n       -0.33891595, -0.39519727, -0.37511121, -0.3701097 , -0.34645668,\\n       -0.46914686, -0.28208251, -0.45037579, -0.26009513, -0.4746585 ,\\n       -0.2911592 , -0.36396856, -0.36906398, -0.32082682, -0.34336192,\\n       -0.33237611, -0.2599342 , -0.2857714 , -0.36957567, -0.41483045,\\n       -0.37683566, -0.31464499, -0.262519  , -0.312845  , -0.23271063,\\n       -0.35826746, -0.29379916, -0.39613452, -0.28491995, -0.31811562]))\r\n[ 1478s] E        +      where <function mean at 0xffff9a21edc0> = np.mean\r\n[ 1478s] \r\n[ 1478s] nilearn/interfaces/fmriprep/tests/test_load_confounds.py:223: AssertionError\r\n[ 1478s] ___________________ test_nilearn_standardize[False-True-psc] ___________________\r\n[ 1478s] [gw0] linux -- Python 3.8.13 /usr/bin/python3.8\r\n[ 1478s] \r\n[ 1478s] tmp_path = PosixPath('/tmp/pytest-of-abuild/pytest-0/popen-gw0/test_nilearn_standardize_False2')\r\n[ 1478s] standardize_signal = 'psc', standardize_confounds = False, detrend = True\r\n[ 1478s] \r\n[ 1478s]     @pytest.mark.filterwarnings(\"ignore\")\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_signal\", [\"zscore\", \"psc\"])\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_confounds,detrend\", [(True, False),\r\n[ 1478s]                                                                (False, True),\r\n[ 1478s]                                                                (True, True)])\r\n[ 1478s]     def test_nilearn_standardize(tmp_path, standardize_signal,\r\n[ 1478s]                                  standardize_confounds, detrend):\r\n[ 1478s]         \"\"\"Test confounds removal with logical parameters for processing signal.\"\"\"\r\n[ 1478s]         # demean is set to False to let signal.clean handle everything\r\n[ 1478s]         (img, mask_conf, mask_rand, confounds, mask) = _simu_img(tmp_path,\r\n[ 1478s]                                                                  demean=False)\r\n[ 1478s]         # We now load the time series with vs without confounds\r\n[ 1478s]         # in voxels composed of pure confounds\r\n[ 1478s]         # the correlation before and after denoising should be very low\r\n[ 1478s]         # as most of the variance is removed by denoising\r\n[ 1478s]         tseries_raw, tseries_clean = _denoise(\r\n[ 1478s]             img, mask_conf, confounds, mask,\r\n[ 1478s]             standardize_signal=standardize_signal,\r\n[ 1478s]             standardize_confounds=standardize_confounds,\r\n[ 1478s]             detrend=detrend)\r\n[ 1478s]         corr = _corr_tseries(tseries_raw, tseries_clean)\r\n[ 1478s] >       assert np.absolute(np.mean(corr)) < 0.2\r\n[ 1478s] E       AssertionError: assert 0.2816031476360383 < 0.2\r\n[ 1478s] E        +  where 0.2816031476360383 = <ufunc 'absolute'>(-0.2816031476360383)\r\n[ 1478s] E        +    where <ufunc 'absolute'> = np.absolute\r\n[ 1478s] E        +    and   -0.2816031476360383 = <function mean at 0xffff9a21edc0>(array([-0.30232012, -0.20851777, -0.35223952, -0.32153712, -0.30368981,\\n       -0.28725663, -0.23360017, -0.41446051, -0.25749431, -0.14310166,\\n       -0.34122295, -0.26666964, -0.33944596, -0.22309662, -0.33468581,\\n       -0.2378392 , -0.32561657, -0.41713679, -0.14728949, -0.27212411,\\n       -0.39321951, -0.38226553, -0.2460785 , -0.28473792, -0.27998555,\\n       -0.36306061, -0.23799594, -0.37432878, -0.17005006, -0.36139639,\\n       -0.23071874, -0.26322954, -0.28683954, -0.2893464 , -0.25288183,\\n       -0.23818208, -0.19189392, -0.14682724, -0.30936131, -0.3185408 ,\\n       -0.29623899, -0.28674095, -0.20030737, -0.26652413, -0.24764728,\\n       -0.3033833 , -0.24820914, -0.37400786, -0.23709534, -0.26971808]))\r\n[ 1478s] E        +      where <function mean at 0xffff9a21edc0> = np.mean\r\n[ 1478s] \r\n[ 1478s] nilearn/interfaces/fmriprep/tests/test_load_confounds.py:223: AssertionError\r\n[ 1478s] __________________ test_nilearn_standardize[True-True-zscore] __________________\r\n[ 1478s] [gw0] linux -- Python 3.8.13 /usr/bin/python3.8\r\n[ 1478s] \r\n[ 1478s] tmp_path = PosixPath('/tmp/pytest-of-abuild/pytest-0/popen-gw0/test_nilearn_standardize_True_2')\r\n[ 1478s] standardize_signal = 'zscore', standardize_confounds = True, detrend = True\r\n[ 1478s] \r\n[ 1478s]     @pytest.mark.filterwarnings(\"ignore\")\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_signal\", [\"zscore\", \"psc\"])\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_confounds,detrend\", [(True, False),\r\n[ 1478s]                                                                (False, True),\r\n[ 1478s]                                                                (True, True)])\r\n[ 1478s]     def test_nilearn_standardize(tmp_path, standardize_signal,\r\n[ 1478s]                                  standardize_confounds, detrend):\r\n[ 1478s]         \"\"\"Test confounds removal with logical parameters for processing signal.\"\"\"\r\n[ 1478s]         # demean is set to False to let signal.clean handle everything\r\n[ 1478s]         (img, mask_conf, mask_rand, confounds, mask) = _simu_img(tmp_path,\r\n[ 1478s]                                                                  demean=False)\r\n[ 1478s]         # We now load the time series with vs without confounds\r\n[ 1478s]         # in voxels composed of pure confounds\r\n[ 1478s]         # the correlation before and after denoising should be very low\r\n[ 1478s]         # as most of the variance is removed by denoising\r\n[ 1478s]         tseries_raw, tseries_clean = _denoise(\r\n[ 1478s]             img, mask_conf, confounds, mask,\r\n[ 1478s]             standardize_signal=standardize_signal,\r\n[ 1478s]             standardize_confounds=standardize_confounds,\r\n[ 1478s]             detrend=detrend)\r\n[ 1478s]         corr = _corr_tseries(tseries_raw, tseries_clean)\r\n[ 1478s] >       assert np.absolute(np.mean(corr)) < 0.2\r\n[ 1478s] E       AssertionError: assert 0.35819266143551376 < 0.2\r\n[ 1478s] E        +  where 0.35819266143551376 = <ufunc 'absolute'>(-0.35819266143551376)\r\n[ 1478s] E        +    where <ufunc 'absolute'> = np.absolute\r\n[ 1478s] E        +    and   -0.35819266143551376 = <function mean at 0xffff9a21edc0>(array([-0.47399983,  0.29634605, -0.46053382, -0.5349243 , -0.38736061,\\n       -0.28538469, -0.37639015, -0.43148622, -0.3171815 ,  0.36397429,\\n       -0.47983013, -0.46364714, -0.48129423, -0.51375638, -0.45058092,\\n       -0.37059189, -0.07362728, -0.52562205, -0.21102265, -0.34711673,\\n       -0.23853284, -0.4587194 , -0.53236341, -0.30546465, -0.47387107,\\n       -0.52342313, -0.48036355, -0.61896894,  0.33502812, -0.55233836,\\n       -0.24885985, -0.52169699, -0.50908408, -0.43280104, -0.58606468,\\n       -0.24740741, -0.1423348 , -0.16389727, -0.5065737 , -0.49863824,\\n       -0.4779353 , -0.17102123, -0.20839182, -0.38946673, -0.29083371,\\n       -0.38831918, -0.41603341, -0.48513587, -0.41026555, -0.44182482]))\r\n[ 1478s] E        +      where <function mean at 0xffff9a21edc0> = np.mean\r\n[ 1478s] \r\n[ 1478s] nilearn/interfaces/fmriprep/tests/test_load_confounds.py:223: AssertionError\r\n[ 1478s] ___________________ test_nilearn_standardize[True-True-psc] ____________________\r\n[ 1478s] [gw0] linux -- Python 3.8.13 /usr/bin/python3.8\r\n[ 1478s] \r\n[ 1478s] tmp_path = PosixPath('/tmp/pytest-of-abuild/pytest-0/popen-gw0/test_nilearn_standardize_True_3')\r\n[ 1478s] standardize_signal = 'psc', standardize_confounds = True, detrend = True\r\n[ 1478s] \r\n[ 1478s]     @pytest.mark.filterwarnings(\"ignore\")\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_signal\", [\"zscore\", \"psc\"])\r\n[ 1478s]     @pytest.mark.parametrize(\"standardize_confounds,detrend\", [(True, False),\r\n[ 1478s]                                                                (False, True),\r\n[ 1478s]                                                                (True, True)])\r\n[ 1478s]     def test_nilearn_standardize(tmp_path, standardize_signal,\r\n[ 1478s]                                  standardize_confounds, detrend):\r\n[ 1478s]         \"\"\"Test confounds removal with logical parameters for processing signal.\"\"\"\r\n[ 1478s]         # demean is set to False to let signal.clean handle everything\r\n[ 1478s]         (img, mask_conf, mask_rand, confounds, mask) = _simu_img(tmp_path,\r\n[ 1478s]                                                                  demean=False)\r\n[ 1478s]         # We now load the time series with vs without confounds\r\n[ 1478s]         # in voxels composed of pure confounds\r\n[ 1478s]         # the correlation before and after denoising should be very low\r\n[ 1478s]         # as most of the variance is removed by denoising\r\n[ 1478s]         tseries_raw, tseries_clean = _denoise(\r\n[ 1478s]             img, mask_conf, confounds, mask,\r\n[ 1478s]             standardize_signal=standardize_signal,\r\n[ 1478s]             standardize_confounds=standardize_confounds,\r\n[ 1478s]             detrend=detrend)\r\n[ 1478s]         corr = _corr_tseries(tseries_raw, tseries_clean)\r\n[ 1478s] >       assert np.absolute(np.mean(corr)) < 0.2\r\n[ 1478s] E       AssertionError: assert 0.3068494901378161 < 0.2\r\n[ 1478s] E        +  where 0.3068494901378161 = <ufunc 'absolute'>(-0.3068494901378161)\r\n[ 1478s] E        +    where <ufunc 'absolute'> = np.absolute\r\n[ 1478s] E        +    and   -0.3068494901378161 = <function mean at 0xffff9a21edc0>(array([-0.43222443,  0.22322205, -0.4330071 , -0.44319557, -0.37116882,\\n       -0.28479504, -0.31129724, -0.33789027, -0.3105876 ,  0.37826157,\\n       -0.35155689, -0.43367157, -0.44911954, -0.45194286, -0.41139569,\\n       -0.28931889, -0.08552725, -0.49786417, -0.12593416, -0.24831377,\\n       -0.2247173 , -0.39294925, -0.44313831, -0.26412018, -0.38746832,\\n       -0.46534035, -0.36891196, -0.57027543,  0.27926687, -0.43896078,\\n       -0.1976766 , -0.36344081, -0.45836222, -0.35773391, -0.49595981,\\n       -0.22254006, -0.1341657 , -0.17332932, -0.43574266, -0.40281484,\\n       -0.36028132, -0.13025708, -0.19751944, -0.32246374, -0.18559366,\\n       -0.33945291, -0.38773059, -0.493054  , -0.37549094, -0.36492266]))\r\n[ 1478s] E        +      where <function mean at 0xffff9a21edc0> = np.mean\r\n[ 1478s] \r\n[ 1478s] nilearn/interfaces/fmriprep/tests/test_load_confounds.py:223: AssertionError\r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\nRun test suite on aarch64 and/or ppc64le.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3360", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3360/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3360/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3360/events", "html_url": "https://github.com/nilearn/nilearn/issues/3360", "id": 1367431421, "node_id": "I_kwDOABLbHM5RgVj9", "number": 3360, "title": "glm.first_level.hemodynamic_models.compute_regressor() computes wrong TR", "user": {"login": "askieslinger", "id": 63910279, "node_id": "MDQ6VXNlcjYzOTEwMjc5", "avatar_url": "https://avatars.githubusercontent.com/u/63910279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/askieslinger", "html_url": "https://github.com/askieslinger", "followers_url": "https://api.github.com/users/askieslinger/followers", "following_url": "https://api.github.com/users/askieslinger/following{/other_user}", "gists_url": "https://api.github.com/users/askieslinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/askieslinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/askieslinger/subscriptions", "organizations_url": "https://api.github.com/users/askieslinger/orgs", "repos_url": "https://api.github.com/users/askieslinger/repos", "events_url": "https://api.github.com/users/askieslinger/events{/privacy}", "received_events_url": "https://api.github.com/users/askieslinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-09T07:48:14Z", "updated_at": "2023-03-14T20:25:50Z", "closed_at": "2023-03-14T20:25:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/nilearn/nilearn/blob/9aa503f599f0835aea2bf9e2720bd5d3e33e941e/nilearn/glm/first_level/hemodynamic_models.py#L569\r\n\r\n\r\nIf your volumes are shifted by half a TR (like after fmriprep preprocessing) and your run is not very long, the TR is getting miscalculated/misestimated here (as is the case for us). Why not e.g. calculate the mean distance between the entries in `frame_times`?\r\n\r\n### Nilearn version:\r\n0.9.2.dev\r\n\r\n### Expected behavior\r\nreturn correct regressors\r\n\r\n### Actual Behavior\r\ncannot be sure if regressors are correct\r\n\r\n\r\nEdit: Sorry, just saw the template. This is meant to be a bug report", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3360/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3359", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3359/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3359/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3359/events", "html_url": "https://github.com/nilearn/nilearn/issues/3359", "id": 1365653550, "node_id": "I_kwDOABLbHM5RZjgu", "number": 3359, "title": "Test error:  `Different tests were collected between gw3 and gw0`", "user": {"login": "ggardet", "id": 1826137, "node_id": "MDQ6VXNlcjE4MjYxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1826137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggardet", "html_url": "https://github.com/ggardet", "followers_url": "https://api.github.com/users/ggardet/followers", "following_url": "https://api.github.com/users/ggardet/following{/other_user}", "gists_url": "https://api.github.com/users/ggardet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggardet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggardet/subscriptions", "organizations_url": "https://api.github.com/users/ggardet/orgs", "repos_url": "https://api.github.com/users/ggardet/repos", "events_url": "https://api.github.com/users/ggardet/events{/privacy}", "received_events_url": "https://api.github.com/users/ggardet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-09-08T07:05:28Z", "updated_at": "2022-10-05T16:42:45Z", "closed_at": "2022-10-05T16:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "The test suite fails with `Different tests were collected between gw3 and gw0` on openSUSE Tumbleweed aarch64.\r\n\r\nNilearn version: 0.9.1\r\n\r\n### Expected behavior\r\nTests should all pass.\r\n\r\n### Actual behavior\r\nLog of test failure:\r\n```\r\n[   59s] ============================= test session starts ==============================\r\n[   59s] platform linux -- Python 3.8.13, pytest-7.1.2, pluggy-1.0.0 -- /usr/bin/python3.8\r\n[   59s] cachedir: .pytest_cache\r\n[   59s] rootdir: /home/abuild/rpmbuild/BUILD/nilearn-0.9.1, configfile: setup.cfg\r\n[   59s] plugins: forked-1.3.0, xdist-2.5.0\r\n[   59s] gw0 I / gw1 I / gw2 I / gw3 I\r\n[   59s] [gw0] linux Python 3.8.13 cwd: /home/abuild/rpmbuild/BUILD/nilearn-0.9.1\r\n[   59s] [gw1] linux Python 3.8.13 cwd: /home/abuild/rpmbuild/BUILD/nilearn-0.9.1\r\n[   59s] [gw2] linux Python 3.8.13 cwd: /home/abuild/rpmbuild/BUILD/nilearn-0.9.1\r\n[   59s] [gw3] linux Python 3.8.13 cwd: /home/abuild/rpmbuild/BUILD/nilearn-0.9.1\r\n[   59s] [gw0] Python 3.8.13 (default, Mar 26 2022, 22:17:55) [GCC]\r\n[   59s] [gw1] Python 3.8.13 (default, Mar 26 2022, 22:17:55) [GCC]\r\n[   59s] [gw2] Python 3.8.13 (default, Mar 26 2022, 22:17:55) [GCC]\r\n[   59s] [gw3] Python 3.8.13 (default, Mar 26 2022, 22:17:55) [GCC]\r\n[   59s] gw0 [1523] / gw1 [1523] / gw2 [1523] / gw3 [1523]\r\n[   59s] \r\n[   59s] scheduling tests via LoadScheduling\r\n[   59s] \r\n[   59s] ==================================== ERRORS ====================================\r\n[   59s] _____________________________ ERROR collecting gw0 _____________________________\r\n[   59s] Different tests were collected between gw3 and gw0. The difference is:\r\n[   59s] --- gw3\r\n[   59s] \r\n[   59s] +++ gw0\r\n[   59s] \r\n[   59s] @@ -983,73 +983,73 @@\r\n[   59s] \r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_get_colorbar_and_data_ranges.py::test_get_colorbar_and_data_ranges[2-auto-neg-data2]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_get_colorbar_and_data_ranges.py::test_get_colorbar_and_data_ranges[2-auto-masked-data3]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_mni152template_is_reordered\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_3d_default_params[plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%f-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_glass_brain]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_cbar_tick_format[%i-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_4d_default_params[plot_carpet]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_4d_default_params[plot_prob_atlas]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_epi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_img]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_roi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_anat]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_epi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[None-plot_stat_map]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_epi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_img]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_roi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_anat]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_epi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[5-plot_stat_map]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_epi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_img]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_roi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_anat]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_epi]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_functions_mosaic_mode[cut_coords2-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_threshold_for_uint8[plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_threshold_for_uint8[plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[ortho-2-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-2-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[tiled-cut_coords2-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_glass_brain]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_roi]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_invalid_cut_coords_with_display_mode[mosaic-cut_coords3-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_anat]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_img]\r\n[   59s] -nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_epi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_glass_brain]\r\n[   59s] +nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plot_with_nans[plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plotting_functions_with_cmaps[Paired-plot_roi]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plotting_functions_with_cmaps[Paired-plot_stat_map]\r\n[   59s]  nilearn/plotting/tests/test_img_plotting/test_img_plotting.py::test_plotting_functions_with_cmaps[Paired-plot_glass_brain]\r\n```\r\n\r\n### Steps and code to reproduce bug\r\nRun the test suite on openSUSE Tumbleweed aarch64.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3359/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3323", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3323/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3323/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3323/events", "html_url": "https://github.com/nilearn/nilearn/issues/3323", "id": 1326142123, "node_id": "I_kwDOABLbHM5PC1Kr", "number": 3323, "title": "design matrix columns name checking is excessive", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 126854827, "node_id": "MDU6TGFiZWwxMjY4NTQ4Mjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/API", "name": "API", "color": "fef2c0", "default": false, "description": null}, {"id": 144463785, "node_id": "MDU6TGFiZWwxNDQ0NjM3ODU=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Discussion", "name": "Discussion", "color": "bfe5bf", "default": false, "description": null}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": {"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2022-08-02T17:09:15Z", "updated_at": "2022-10-14T19:19:49Z", "closed_at": "2022-10-14T19:19:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nCurrently, a string can only a design matrix column if it fits the  `isidentifier()` condition, which looks excessive.\r\nFor instance, strings started with a number are not accepted, while there is no problem to create dataframes with such strings.\r\nThus I suggest to remove the lines below from the codebase\r\n\r\nhttps://github.com/nilearn/nilearn/blob/2fd96b86cb53304f2f0b0c978d0bcd670f3795d2/nilearn/glm/first_level/hemodynamic_models.py#L443\r\n```\r\n# Check that all names look like proper pandas.DataFrame column names\r\n    if not all([name.isidentifier() for name in names]):\r\n        raise ValueError(\"At least one regressor name can't be used \"\r\n                         f\"as a column identifier: {names}\")\r\n```\r\nWDYT ?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3318", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3318/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3318/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3318/events", "html_url": "https://github.com/nilearn/nilearn/issues/3318", "id": 1323125658, "node_id": "I_kwDOABLbHM5O3Uua", "number": 3318, "title": "Colorbar causes ValueError in plotting.plot_stat_map", "user": {"login": "PibeChorro", "id": 60966354, "node_id": "MDQ6VXNlcjYwOTY2MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/60966354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PibeChorro", "html_url": "https://github.com/PibeChorro", "followers_url": "https://api.github.com/users/PibeChorro/followers", "following_url": "https://api.github.com/users/PibeChorro/following{/other_user}", "gists_url": "https://api.github.com/users/PibeChorro/gists{/gist_id}", "starred_url": "https://api.github.com/users/PibeChorro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PibeChorro/subscriptions", "organizations_url": "https://api.github.com/users/PibeChorro/orgs", "repos_url": "https://api.github.com/users/PibeChorro/repos", "events_url": "https://api.github.com/users/PibeChorro/events{/privacy}", "received_events_url": "https://api.github.com/users/PibeChorro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-30T14:27:26Z", "updated_at": "2022-08-02T13:02:07Z", "closed_at": "2022-08-02T13:02:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nWhen I try to plot results of contrast together with the colorbar in a jupyter notebook the function raises a ValueError\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:0.9.1 (but also \u00edn 0.8.0)\r\n\r\n### Expected behavior\r\nPlot a background brain image with a statistical map over it together with a colorbar\r\n\r\n### Actual behavior\r\nThe brain is plotted together with the results, however a ValueError is raised and the colorbar is not plotted.\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nInput In [16], in <module>\r\n      4 res_img = os.path.join(RESULTS_DIR,contrast,IMG_NAME)\r\n      5 output_dir = os.path.join(contrast+'.svg')\r\n----> 6 plotting.plot_stat_map(res_img,\r\n      7                        # bg_img=None,\r\n      8                        draw_cross=False,\r\n      9                        colorbar=True,\r\n     10                        symmetric_cbar=False,\r\n     11                        display_mode='x',\r\n     12                        cut_coords=[-6,8],\r\n     13                        #output_file=output_dir\r\n     14                       )\r\n\r\nFile ~/anaconda3/lib/python3.8/site-packages/nilearn/plotting/img_plotting.py:1313, in plot_stat_map(stat_map_img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, cmap, symmetric_cbar, dim, vmax, resampling_interpolation, **kwargs)\r\n   1305 stat_map_img = _utils.check_niimg_3d(stat_map_img, dtype='auto')\r\n   1307 cbar_vmin, cbar_vmax, vmin, vmax = _get_colorbar_and_data_ranges(\r\n   1308     _safe_get_data(stat_map_img, ensure_finite=True),\r\n   1309     vmax,\r\n   1310     symmetric_cbar,\r\n   1311     kwargs)\r\n-> 1313 display = _plot_img_with_bg(\r\n   1314     img=stat_map_img, bg_img=bg_img, cut_coords=cut_coords,\r\n   1315     output_file=output_file, display_mode=display_mode,\r\n   1316     figure=figure, axes=axes, title=title, annotate=annotate,\r\n   1317     draw_cross=draw_cross, black_bg=black_bg, threshold=threshold,\r\n   1318     bg_vmin=bg_vmin, bg_vmax=bg_vmax, cmap=cmap, vmin=vmin, vmax=vmax,\r\n   1319     colorbar=colorbar, cbar_vmin=cbar_vmin, cbar_vmax=cbar_vmax,\r\n   1320     resampling_interpolation=resampling_interpolation, **kwargs)\r\n   1322 return display\r\n\r\nFile ~/anaconda3/lib/python3.8/site-packages/nilearn/plotting/img_plotting.py:218, in _plot_img_with_bg(img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, vmin, vmax, bg_vmin, bg_vmax, interpolation, display_factory, cbar_vmin, cbar_vmax, brain_color, decimals, **kwargs)\r\n    216 if hasattr(display, '_cbar'):\r\n    217     cbar = display._cbar\r\n--> 218     _crop_colorbar(cbar, cbar_vmin, cbar_vmax)\r\n    219 if output_file is not None:\r\n    220     display.savefig(output_file)\r\n\r\nFile ~/anaconda3/lib/python3.8/site-packages/nilearn/plotting/img_plotting.py:248, in _crop_colorbar(cbar, cbar_vmin, cbar_vmax)\r\n    246 if LooseVersion(matplotlib.__version__) >= LooseVersion(\"3.2.0\"):\r\n    247     cbar.ax.set_ylim(cbar_vmin, cbar_vmax)\r\n--> 248     X, _ = cbar._mesh()\r\n    249     X = np.array([X[0], X[-1]])\r\n    250     Y = np.array([[cbar_vmin, cbar_vmin], [cbar_vmax, cbar_vmax]])\r\n\r\nValueError: too many values to unpack (expected 2) \r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nplotting.plot_stat_map(res_img,\r\n                       #bg_img=None,\r\n                       draw_cross=False,\r\n                       colorbar=True,\r\n                       symmetric_cbar=False,\r\n                       display_mode='x',\r\n                       cut_coords=[-6,8],\r\n                       #output_file=output_dir\r\n                      );\r\n```\r\nThis has to be a dependency problem because the same few lines are no problem when I want to plot my results on a different machine.\r\nHere the output of my ```conda list```\r\n```\r\n\r\n# packages in environment at /gpfs01/bartels/user/vplikat/anaconda3:\r\n#\r\n# Name                    Version                   Build  Channel\r\n_anaconda_depends         2020.07                  py38_0  \r\n_ipyw_jlab_nb_ext_conf    0.1.0                    py38_0  \r\n_libgcc_mutex             0.1                 conda_forge    conda-forge\r\n_openmp_mutex             4.5                  2_kmp_llvm    conda-forge\r\n_r-mutex                  1.0.1               anacondar_1    conda-forge\r\naiobotocore               1.3.0                    pypi_0    pypi\r\naiohttp                   3.7.4.post0              pypi_0    pypi\r\naioitertools              0.7.1                    pypi_0    pypi\r\nalabaster                 0.7.12                     py_0    conda-forge\r\nalsa-lib                  1.2.3.2              h166bdaf_0    conda-forge\r\nanaconda                  custom                   py38_1  \r\nanaconda-client           1.8.0              pyhd8ed1ab_0    conda-forge\r\nanaconda-navigator        2.0.4                    py38_0  \r\nanaconda-project          0.10.2             pyhd8ed1ab_0    conda-forge\r\nanyio                     3.5.0            py38h578d9bd_0    conda-forge\r\naom                       3.2.0                h9c3ff4c_2    conda-forge\r\nargh                      0.26.2          pyh9f0ad1d_1002    conda-forge\r\nargon2-cffi               21.3.0             pyhd8ed1ab_0    conda-forge\r\nargon2-cffi-bindings      21.2.0           py38h497a2fe_1    conda-forge\r\narrow                     1.2.1              pyhd8ed1ab_0    conda-forge\r\nasn1crypto                1.4.0              pyh9f0ad1d_0    conda-forge\r\nasteval                   0.9.26             pyhd8ed1ab_0    conda-forge\r\nastroid                   2.9.3            py38h578d9bd_0    conda-forge\r\nastropy                   5.0              py38h6c62de6_0    conda-forge\r\nasttokens                 2.0.5              pyhd8ed1ab_0    conda-forge\r\nasync-timeout             3.0.1                    pypi_0    pypi\r\natomicwrites              1.4.0              pyh9f0ad1d_0    conda-forge\r\nattrs                     21.4.0             pyhd8ed1ab_0    conda-forge\r\nautopep8                  1.5.5              pyh44b312d_0    conda-forge\r\nbabel                     2.9.1              pyh44b312d_0    conda-forge\r\nbackcall                  0.2.0              pyh9f0ad1d_0    conda-forge\r\nbackports                 1.0                        py_2    conda-forge\r\nbackports.functools_lru_cache 1.6.4              pyhd8ed1ab_0    conda-forge\r\nbackports.shutil_get_terminal_size 1.0.0                      py_3    conda-forge\r\nbackports.tempfile        1.0                        py_0    conda-forge\r\nbackports.weakref         1.0.post1       py38h32f6830_1002    conda-forge\r\nbeautifulsoup4            4.10.0             pyha770c72_0    conda-forge\r\nbinaryornot               0.4.4                      py_1    conda-forge\r\nbinutils_impl_linux-64    2.35.1               h27ae35d_9  \r\nbinutils_linux-64         2.35.1              h454624a_30  \r\nbitarray                  2.3.5            py38h497a2fe_0    conda-forge\r\nbkcharts                  0.2                      py38_0  \r\nblack                     21.12b0            pyhd8ed1ab_0    conda-forge\r\nblas                      1.0                         mkl  \r\nbleach                    4.1.0              pyhd8ed1ab_0    conda-forge\r\nblosc                     1.21.1               h83bc5f7_3    conda-forge\r\nbokeh                     2.4.2            py38h578d9bd_0    conda-forge\r\nboto                      2.49.0                     py_0    conda-forge\r\nbotocore                  1.20.49                  pypi_0    pypi\r\nbottleneck                1.3.2            py38h6c62de6_5    conda-forge\r\nbrotli                    1.0.9                h166bdaf_7    conda-forge\r\nbrotli-bin                1.0.9                h166bdaf_7    conda-forge\r\nbrotlipy                  0.7.0           py38h497a2fe_1003    conda-forge\r\nbrunsli                   0.1                  h9c3ff4c_0    conda-forge\r\nbwidget                   1.9.14               ha770c72_1    conda-forge\r\nbzip2                     1.0.8                h7f98852_4    conda-forge\r\nc-ares                    1.18.1               h7f98852_0    conda-forge\r\nca-certificates           2022.6.15            ha878542_0    conda-forge\r\ncached-property           1.5.2                hd8ed1ab_1    conda-forge\r\ncached_property           1.5.2              pyha770c72_1    conda-forge\r\ncairo                     1.16.0            h6cf1ce9_1008    conda-forge\r\ncertifi                   2021.10.8        py38h578d9bd_2    conda-forge\r\ncffi                      1.14.6           py38ha65f79e_0    conda-forge\r\ncfitsio                   3.470                hb418390_7    conda-forge\r\nchardet                   4.0.0            py38h578d9bd_2    conda-forge\r\ncharls                    2.2.0                h9c3ff4c_0    conda-forge\r\ncharset-normalizer        2.0.10             pyhd8ed1ab_0    conda-forge\r\nci-info                   0.2.0              pyh9f0ad1d_0    conda-forge\r\nclick                     8.0.3            py38h578d9bd_1    conda-forge\r\ncloudpickle               2.0.0              pyhd8ed1ab_0    conda-forge\r\nclyent                    1.2.2                      py_1    conda-forge\r\ncolorama                  0.4.4              pyh9f0ad1d_0    conda-forge\r\nconda                     4.12.0           py38h578d9bd_0    conda-forge\r\nconda-build               3.21.4           py38h06a4308_0  \r\nconda-content-trust       0.1.3              pyhd8ed1ab_0    conda-forge\r\nconda-env                 2.6.0                         1    conda-forge\r\nconda-pack                0.7.0              pyh6c4a22f_0    conda-forge\r\nconda-package-handling    1.7.3            py38h497a2fe_1    conda-forge\r\nconda-repo-cli            1.0.4              pyhd3eb1b0_0  \r\nconda-token               0.3.0              pyhd3eb1b0_0  \r\nconda-verify              3.4.2                      py_1  \r\ncontextlib2               21.6.0             pyhd8ed1ab_0    conda-forge\r\ncookiecutter              1.7.3              pyh6c4a22f_0    conda-forge\r\ncryptography              36.0.1           py38h3e25421_0    conda-forge\r\ncudatoolkit               11.1.1              ha002fc5_10    conda-forge\r\ncurl                      7.83.1               h7bff187_0    conda-forge\r\ncycler                    0.11.0             pyhd8ed1ab_0    conda-forge\r\ncython                    0.29.26          py38h709712a_0    conda-forge\r\ncytoolz                   0.11.2           py38h497a2fe_1    conda-forge\r\ndask                      2022.1.0           pyhd8ed1ab_0    conda-forge\r\ndask-core                 2022.1.0           pyhd8ed1ab_0    conda-forge\r\ndataclasses               0.8                pyhc8e2a94_3    conda-forge\r\ndbus                      1.13.6               h48d8840_2    conda-forge\r\ndebugpy                   1.5.1            py38h709712a_0    conda-forge\r\ndecorator                 5.1.1              pyhd8ed1ab_0    conda-forge\r\ndefusedxml                0.7.1              pyhd8ed1ab_0    conda-forge\r\ndiff-match-patch          20200713           pyh9f0ad1d_0    conda-forge\r\ndistributed               2022.1.0         py38h578d9bd_0    conda-forge\r\ndocutils                  0.17.1           py38h578d9bd_0    conda-forge\r\nentrypoints               0.3             pyhd8ed1ab_1003    conda-forge\r\net_xmlfile                1.0.1                   py_1001    conda-forge\r\netelemetry                0.2.2              pyh9f0ad1d_0    conda-forge\r\nexecuting                 0.8.2              pyhd8ed1ab_0    conda-forge\r\nexpat                     2.4.8                h27087fc_0    conda-forge\r\nfastcache                 1.1.0            py38h497a2fe_3    conda-forge\r\nffmpeg                    4.3.2                h37c90e5_3    conda-forge\r\nfilelock                  3.4.2              pyhd8ed1ab_1    conda-forge\r\nflake8                    3.8.4                      py_0    conda-forge\r\nflask                     1.1.2              pyh9f0ad1d_0    conda-forge\r\nflit-core                 3.6.0              pyhd8ed1ab_0    conda-forge\r\nfont-ttf-dejavu-sans-mono 2.37                 hab24e00_0    conda-forge\r\nfont-ttf-inconsolata      3.000                h77eed37_0    conda-forge\r\nfont-ttf-source-code-pro  2.038                h77eed37_0    conda-forge\r\nfont-ttf-ubuntu           0.83                 hab24e00_0    conda-forge\r\nfontconfig                2.14.0               h8e229c2_0    conda-forge\r\nfonts-conda-ecosystem     1                             0    conda-forge\r\nfonts-conda-forge         1                             0    conda-forge\r\nfonttools                 4.28.5           py38h497a2fe_0    conda-forge\r\nfreetype                  2.10.4               h0708190_1    conda-forge\r\nfribidi                   1.0.10               h36c2ea0_0    conda-forge\r\nfsspec                    2021.4.0                 pypi_0    pypi\r\nfuture                    0.18.2           py38h578d9bd_4    conda-forge\r\ngcc_impl_linux-64         9.3.0               h6df7d76_17  \r\ngcc_linux-64              9.3.0               h1ee779e_30  \r\nget_terminal_size         1.0.0                haa9412d_0  \r\ngettext                   0.19.8.1          h0b5b191_1005    conda-forge\r\ngevent                    21.12.0          py38h497a2fe_0    conda-forge\r\ngfortran_impl_linux-64    9.3.0               h5abd6ed_17  \r\ngfortran_linux-64         9.3.0               hf47db2c_30  \r\ngiflib                    5.2.1                h36c2ea0_2    conda-forge\r\ngitdb                     4.0.9              pyhd8ed1ab_0    conda-forge\r\ngitpython                 3.1.18             pyhd3eb1b0_1  \r\nglib                      2.68.4               h9c3ff4c_0    conda-forge\r\nglib-tools                2.68.4               h9c3ff4c_0    conda-forge\r\nglob2                     0.7                        py_0    conda-forge\r\ngmp                       6.2.1                h58526e2_0    conda-forge\r\ngmpy2                     2.1.2            py38h8384b0a_0    conda-forge\r\ngnutls                    3.6.13               h85f3911_1    conda-forge\r\ngraphite2                 1.3.13            h58526e2_1001    conda-forge\r\ngreenlet                  1.1.2            py38h709712a_1    conda-forge\r\ngsl                       2.6                  he838d99_2    conda-forge\r\ngst-plugins-base          1.18.5               hf529b03_0    conda-forge\r\ngstreamer                 1.18.5               h76c114f_0    conda-forge\r\ngxx_impl_linux-64         9.3.0               hbdd7822_17  \r\ngxx_linux-64              9.3.0               h7e70986_30  \r\nh5py                      3.2.1           nompi_py38h9915d05_100    conda-forge\r\nharfbuzz                  2.9.1                h83ec7ef_1    conda-forge\r\nhdf5                      1.10.6          nompi_h6a2412b_1114    conda-forge\r\nheapdict                  1.0.1                      py_0    conda-forge\r\nhtml5lib                  1.1                pyh9f0ad1d_0    conda-forge\r\nicu                       68.2                 h9c3ff4c_0    conda-forge\r\nidna                      3.3                pyhd8ed1ab_0    conda-forge\r\nimagecodecs               2021.7.30        py38hb5ce8f7_0    conda-forge\r\nimageio                   2.13.5             pyh239f2a4_0    conda-forge\r\nimagesize                 1.3.0              pyhd8ed1ab_0    conda-forge\r\nimportlib-metadata        4.10.1           py38h578d9bd_0    conda-forge\r\nimportlib_metadata        4.10.1               hd8ed1ab_0    conda-forge\r\nimportlib_resources       5.4.0              pyhd8ed1ab_0    conda-forge\r\ninflection                0.5.1              pyh9f0ad1d_0    conda-forge\r\niniconfig                 1.1.1              pyh9f0ad1d_0    conda-forge\r\nintel-openmp              2022.0.1          h06a4308_3633  \r\nintervaltree              3.0.2                      py_0    conda-forge\r\nipykernel                 6.7.0            py38he5a9106_0    conda-forge\r\nipython                   8.0.1            py38h578d9bd_0    conda-forge\r\nipython_genutils          0.2.0                      py_1    conda-forge\r\nipywidgets                7.6.5              pyhd8ed1ab_0    conda-forge\r\nisodate                   0.6.1              pyhd8ed1ab_0    conda-forge\r\nisort                     5.10.1             pyhd8ed1ab_0    conda-forge\r\nitsdangerous              2.0.1              pyhd8ed1ab_0    conda-forge\r\njasper                    1.900.1           h07fcdf6_1006    conda-forge\r\njbig                      2.1               h7f98852_2003    conda-forge\r\njdcal                     1.4.1                      py_0    conda-forge\r\njedi                      0.17.2           py38h578d9bd_2    conda-forge\r\njeepney                   0.7.1              pyhd8ed1ab_0    conda-forge\r\njinja2                    2.11.3             pyh44b312d_0    conda-forge\r\njinja2-time               0.2.0                      py_2    conda-forge\r\njmespath                  0.10.0                   pypi_0    pypi\r\njoblib                    1.1.0              pyhd8ed1ab_0    conda-forge\r\njpeg                      9e                   h166bdaf_2    conda-forge\r\njson5                     0.9.5              pyh9f0ad1d_0    conda-forge\r\njsonschema                4.4.0              pyhd8ed1ab_0    conda-forge\r\njupyter                   1.0.0            py38h578d9bd_7    conda-forge\r\njupyter_client            7.1.1              pyhd8ed1ab_0    conda-forge\r\njupyter_console           6.4.0              pyhd8ed1ab_0    conda-forge\r\njupyter_core              4.9.1            py38h578d9bd_1    conda-forge\r\njupyter_server            1.13.3             pyhd8ed1ab_0    conda-forge\r\njupyterlab                3.2.8              pyhd8ed1ab_0    conda-forge\r\njupyterlab_pygments       0.1.2              pyh9f0ad1d_0    conda-forge\r\njupyterlab_server         2.10.3             pyhd8ed1ab_0    conda-forge\r\njupyterlab_widgets        1.0.2              pyhd8ed1ab_0    conda-forge\r\njxrlib                    1.1                  h7f98852_2    conda-forge\r\nkeepalive                 0.5                pyhd8ed1ab_6    conda-forge\r\nkernel-headers_linux-64   2.6.32              he073ed8_15    conda-forge\r\nkeyring                   23.4.0           py38h578d9bd_0    conda-forge\r\nkeyutils                  1.6.1                h166bdaf_0    conda-forge\r\nkiwisolver                1.3.2            py38h1fd1430_1    conda-forge\r\nkrb5                      1.19.3               h3790be6_0    conda-forge\r\nlame                      3.100             h7f98852_1001    conda-forge\r\nlazy-object-proxy         1.7.1            py38h497a2fe_0    conda-forge\r\nlcms2                     2.12                 hddcbb42_0    conda-forge\r\nld_impl_linux-64          2.35.1               h7274673_9  \r\nlerc                      2.2.1                h9c3ff4c_0    conda-forge\r\nlibaec                    1.0.6                h9c3ff4c_0    conda-forge\r\nlibarchive                3.5.2                hccf745f_1    conda-forge\r\nlibblas                   3.9.0            12_linux64_mkl    conda-forge\r\nlibbrotlicommon           1.0.9                h166bdaf_7    conda-forge\r\nlibbrotlidec              1.0.9                h166bdaf_7    conda-forge\r\nlibbrotlienc              1.0.9                h166bdaf_7    conda-forge\r\nlibcblas                  3.9.0            12_linux64_mkl    conda-forge\r\nlibclang                  11.1.0          default_ha53f305_1    conda-forge\r\nlibcurl                   7.83.1               h7bff187_0    conda-forge\r\nlibdeflate                1.8                  h7f98852_0    conda-forge\r\nlibdrm                    2.4.109              h7f98852_0    conda-forge\r\nlibedit                   3.1.20191231         he28a2e2_2    conda-forge\r\nlibev                     4.33                 h516909a_1    conda-forge\r\nlibevent                  2.1.10               h9b69904_4    conda-forge\r\nlibffi                    3.3                  h58526e2_2    conda-forge\r\nlibgcc-devel_linux-64     9.3.0               hb95220a_17  \r\nlibgcc-ng                 12.1.0              h8d9b700_16    conda-forge\r\nlibgfortran-ng            9.3.0               ha5ec8a7_17  \r\nlibgfortran5              9.3.0               ha5ec8a7_17  \r\nlibglib                   2.68.4               h3e27bee_0    conda-forge\r\nlibgomp                   12.1.0              h8d9b700_16    conda-forge\r\nlibiconv                  1.16                 h516909a_0    conda-forge\r\nliblapack                 3.9.0            12_linux64_mkl    conda-forge\r\nliblapacke                3.9.0            12_linux64_mkl    conda-forge\r\nliblief                   0.11.5               h9c3ff4c_1    conda-forge\r\nlibllvm11                 11.1.0               hf817b99_3    conda-forge\r\nlibllvm9                  9.0.1           default_hc23dcda_7    conda-forge\r\nlibnghttp2                1.47.0               h727a467_0    conda-forge\r\nlibogg                    1.3.4                h7f98852_1    conda-forge\r\nlibopencv                 4.5.3            py38h5627943_1    conda-forge\r\nlibopus                   1.3.1                h7f98852_1    conda-forge\r\nlibpciaccess              0.16                 h516909a_0    conda-forge\r\nlibpng                    1.6.37               h753d276_3    conda-forge\r\nlibpq                     13.5                 hd57d9b9_1    conda-forge\r\nlibprotobuf               3.16.0               h780b84a_0    conda-forge\r\nlibsodium                 1.0.18               h36c2ea0_1    conda-forge\r\nlibspatialindex           1.9.3                h9c3ff4c_4    conda-forge\r\nlibssh2                   1.10.0               ha56f1ee_2    conda-forge\r\nlibstdcxx-devel_linux-64  9.3.0               hf0c5c8d_17  \r\nlibstdcxx-ng              12.1.0              ha89aaad_16    conda-forge\r\nlibtiff                   4.3.0                hf544144_0    conda-forge\r\nlibtool                   2.4.6             h9c3ff4c_1008    conda-forge\r\nlibuuid                   2.32.1            h7f98852_1000    conda-forge\r\nlibuv                     1.44.2               h166bdaf_0    conda-forge\r\nlibva                     2.13.0               h7f98852_2    conda-forge\r\nlibvorbis                 1.3.7                h9c3ff4c_0    conda-forge\r\nlibvpx                    1.11.0               h9c3ff4c_3    conda-forge\r\nlibwebp-base              1.2.3                h166bdaf_2    conda-forge\r\nlibxcb                    1.13              h7f98852_1004    conda-forge\r\nlibxkbcommon              1.0.3                he3ba5ed_0    conda-forge\r\nlibxml2                   2.9.12               h72842e0_0    conda-forge\r\nlibxslt                   1.1.33               h15afd5d_2    conda-forge\r\nlibzlib                   1.2.12               h166bdaf_2    conda-forge\r\nlibzopfli                 1.0.3                h9c3ff4c_0    conda-forge\r\nlittleutils               0.2.2                      py_0    conda-forge\r\nllvm-openmp               14.0.4               he0ac6c6_0    conda-forge\r\nllvmlite                  0.38.0           py38h4630a5e_0    conda-forge\r\nlmfit                     1.0.3              pyhd8ed1ab_0    conda-forge\r\nlocate                    1.0.0                    pypi_0    pypi\r\nlocket                    0.2.0                      py_2    conda-forge\r\nlxml                      4.7.1            py38hf1fe3a4_0    conda-forge\r\nlz4-c                     1.9.3                h9c3ff4c_1    conda-forge\r\nlzo                       2.10              h516909a_1000    conda-forge\r\nmake                      4.3                  hd18ef5c_1    conda-forge\r\nmarkupsafe                1.1.1            py38h497a2fe_3    conda-forge\r\nmatplotlib                3.5.1            py38h578d9bd_0    conda-forge\r\nmatplotlib-base           3.5.1            py38hf4fb855_0    conda-forge\r\nmatplotlib-inline         0.1.3              pyhd8ed1ab_0    conda-forge\r\nmccabe                    0.6.1                      py_1    conda-forge\r\nmistune                   0.8.4           py38h497a2fe_1005    conda-forge\r\nmkl                       2021.4.0           h8d4b97c_729    conda-forge\r\nmkl-service               2.4.0            py38h95df7f1_0    conda-forge\r\nmkl_fft                   1.3.1            py38h8666266_1    conda-forge\r\nmkl_random                1.2.2            py38h1abd341_0    conda-forge\r\nmock                      4.0.3            py38h578d9bd_2    conda-forge\r\nmore-itertools            8.12.0             pyhd8ed1ab_0    conda-forge\r\nmpc                       1.2.1                h9f54685_0    conda-forge\r\nmpfr                      4.1.0                h9202a9a_1    conda-forge\r\nmpmath                    1.2.1              pyhd8ed1ab_0    conda-forge\r\nmsgpack-python            1.0.3            py38h1fd1430_0    conda-forge\r\nmultidict                 5.1.0                    pypi_0    pypi\r\nmultipledispatch          0.6.0                      py_0    conda-forge\r\nmunkres                   1.1.4              pyh9f0ad1d_0    conda-forge\r\nmypy_extensions           0.4.3            py38h578d9bd_4    conda-forge\r\nmysql-common              8.0.29               haf5c9bc_1    conda-forge\r\nmysql-libs                8.0.29               h28c427c_1    conda-forge\r\nnavigator-updater         0.2.1                    py38_0  \r\nnbclassic                 0.3.5              pyhd8ed1ab_0    conda-forge\r\nnbclient                  0.5.10             pyhd8ed1ab_1    conda-forge\r\nnbconvert                 6.4.0            py38h578d9bd_0    conda-forge\r\nnbformat                  5.1.3              pyhd8ed1ab_0    conda-forge\r\nncurses                   6.3                  h27087fc_1    conda-forge\r\nnest-asyncio              1.5.4              pyhd8ed1ab_0    conda-forge\r\nnettle                    3.6                  he412f7d_0    conda-forge\r\nnetworkx                  2.6.3              pyhd8ed1ab_1    conda-forge\r\nneurdflib                 5.0.1                      py_0    conda-forge\r\nneuropythy                0.11.9                   pypi_0    pypi\r\nnibabel                   3.2.1              pyhd8ed1ab_0    conda-forge\r\nnilearn                   0.9.1                    pypi_0    pypi\r\nnipype                    1.6.1            py38h578d9bd_0    conda-forge\r\nnltk                      3.6.7              pyhd8ed1ab_0    conda-forge\r\nnose                      1.3.7                   py_1006    conda-forge\r\nnotebook                  6.4.7              pyha770c72_0    conda-forge\r\nnspr                      4.32                 h9c3ff4c_1    conda-forge\r\nnss                       3.74                 hb5efdd6_0    conda-forge\r\nnumba                     0.55.0           py38h4bf6c61_0    conda-forge\r\nnumexpr                   2.7.3            py38h51da96c_0    conda-forge\r\nnumpy                     1.21.2           py38h20f2e39_0  \r\nnumpy-base                1.21.2           py38h79a1101_0  \r\nnumpydoc                  1.1.0                      py_1    conda-forge\r\nolefile                   0.46               pyh9f0ad1d_1    conda-forge\r\nopencv                    4.5.3            py38h578d9bd_1    conda-forge\r\nopenh264                  2.1.1                h780b84a_0    conda-forge\r\nopenjpeg                  2.4.0                hb52868f_1    conda-forge\r\nopenpyxl                  3.0.9              pyhd8ed1ab_0    conda-forge\r\nopenssl                   1.1.1q               h166bdaf_0    conda-forge\r\noutdated                  0.2.1                    pypi_0    pypi\r\npackaging                 21.3               pyhd8ed1ab_0    conda-forge\r\npandas                    1.3.5            py38h43a58ef_0    conda-forge\r\npandas-flavor             0.2.0                      py_0    conda-forge\r\npandoc                    2.18                 ha770c72_0    conda-forge\r\npandocfilters             1.5.0              pyhd8ed1ab_0    conda-forge\r\npango                     1.48.10              hb8ff022_1    conda-forge\r\nparso                     0.7.0                      py_0  \r\npartd                     1.2.0              pyhd8ed1ab_0    conda-forge\r\npatchelf                  0.15.0               h58526e2_0    conda-forge\r\npath                      16.3.0           py38h578d9bd_0    conda-forge\r\npath.py                   12.5.0                        0    conda-forge\r\npathlib2                  2.3.6            py38h578d9bd_1    conda-forge\r\npathspec                  0.9.0              pyhd8ed1ab_0    conda-forge\r\npathtools                 0.1.2                      py_1    conda-forge\r\npatsy                     0.5.2              pyhd8ed1ab_0    conda-forge\r\npcre                      8.45                 h9c3ff4c_0    conda-forge\r\npep8                      1.7.1                      py_0    conda-forge\r\npexpect                   4.8.0              pyh9f0ad1d_2    conda-forge\r\npickleshare               0.7.5                   py_1003    conda-forge\r\npillow                    8.4.0            py38h8e6f84c_0    conda-forge\r\npimms                     0.3.18                   pypi_0    pypi\r\npingouin                  0.5.2                    pypi_0    pypi\r\npint                      0.17                     pypi_0    pypi\r\npip                       21.3.1             pyhd8ed1ab_0    conda-forge\r\npixman                    0.40.0               h36c2ea0_0    conda-forge\r\npkginfo                   1.8.2              pyhd8ed1ab_0    conda-forge\r\nplatformdirs              2.3.0              pyhd8ed1ab_0    conda-forge\r\npluggy                    1.0.0            py38h578d9bd_2    conda-forge\r\nply                       3.11                       py_1    conda-forge\r\npoyo                      0.5.0                      py_0    conda-forge\r\nprometheus_client         0.12.0             pyhd8ed1ab_0    conda-forge\r\nprompt-toolkit            3.0.24             pyha770c72_0    conda-forge\r\nprompt_toolkit            3.0.24               hd8ed1ab_0    conda-forge\r\nprov                      2.0.0              pyhd3deb0d_0    conda-forge\r\npsutil                    5.9.0            py38h497a2fe_0    conda-forge\r\npthread-stubs             0.4               h36c2ea0_1001    conda-forge\r\nptyprocess                0.7.0              pyhd3deb0d_0    conda-forge\r\npure_eval                 0.2.1              pyhd8ed1ab_1    conda-forge\r\npy                        1.11.0             pyh6c4a22f_0    conda-forge\r\npy-lief                   0.11.5           py38h709712a_1    conda-forge\r\npy-opencv                 4.5.3            py38he5a9106_1    conda-forge\r\npy4j                      0.10.9.2                 pypi_0    pypi\r\npycodestyle               2.6.0              pyh9f0ad1d_0    conda-forge\r\npycosat                   0.6.3           py38h497a2fe_1009    conda-forge\r\npycparser                 2.21               pyhd8ed1ab_0    conda-forge\r\npycurl                    7.44.1           py38h996a351_1    conda-forge\r\npydicom                   2.2.2              pyh6c4a22f_0    conda-forge\r\npydocstyle                6.1.1              pyhd8ed1ab_0    conda-forge\r\npydot                     1.2.4                      py_0    conda-forge\r\npydotplus                 2.0.2                      py_1    conda-forge\r\npyerfa                    2.0.0.1          py38h6c62de6_1    conda-forge\r\npyflakes                  2.2.0              pyh9f0ad1d_0    conda-forge\r\npygments                  2.11.2             pyhd8ed1ab_0    conda-forge\r\npylint                    2.12.2             pyhd8ed1ab_0    conda-forge\r\npyls-black                0.4.6              pyh9f0ad1d_0    conda-forge\r\npyls-spyder               0.3.2              pyhd3eb1b0_0  \r\npyodbc                    4.0.32           py38h709712a_1    conda-forge\r\npyopenssl                 21.0.0             pyhd8ed1ab_0    conda-forge\r\npyparsing                 3.0.7              pyhd8ed1ab_0    conda-forge\r\npyqt                      5.12.3           py38h578d9bd_8    conda-forge\r\npyqt-impl                 5.12.3           py38h0ffb2e6_8    conda-forge\r\npyqt5-sip                 4.19.18          py38h709712a_8    conda-forge\r\npyqtchart                 5.12             py38h7400c14_8    conda-forge\r\npyqtwebengine             5.12.1           py38h7400c14_8    conda-forge\r\npyrsistent                0.18.1           py38h497a2fe_0    conda-forge\r\npysocks                   1.7.1            py38h578d9bd_4    conda-forge\r\npytables                  3.6.1            py38hc386592_3    conda-forge\r\npytest                    6.2.5            py38h578d9bd_2    conda-forge\r\npython                    3.8.13               h12debd9_0  \r\npython-dateutil           2.8.2              pyhd8ed1ab_0    conda-forge\r\npython-jsonrpc-server     0.4.0              pyh9f0ad1d_0    conda-forge\r\npython-language-server    0.36.2             pyhd8ed1ab_0    conda-forge\r\npython-libarchive-c       3.2              py38h578d9bd_0    conda-forge\r\npython-slugify            5.0.2              pyhd8ed1ab_0    conda-forge\r\npython_abi                3.8                      2_cp38    conda-forge\r\npytorch                   1.10.0          py3.8_cuda11.1_cudnn8.0.5_0    pytorch\r\npytorch-mutex             1.0                        cuda    pytorch\r\npytz                      2021.3             pyhd8ed1ab_0    conda-forge\r\npywavelets                1.2.0            py38h6c62de6_1    conda-forge\r\npyxdg                     0.27               pyhd8ed1ab_0    conda-forge\r\npyyaml                    6.0              py38h497a2fe_3    conda-forge\r\npyzmq                     22.3.0           py38h2035c66_1    conda-forge\r\nqdarkstyle                3.0.2              pyhd8ed1ab_0    conda-forge\r\nqstylizer                 0.2.1              pyhd8ed1ab_0    conda-forge\r\nqt                        5.12.9               hda022c4_4    conda-forge\r\nqtawesome                 1.1.1              pyhd8ed1ab_0    conda-forge\r\nqtconsole                 5.2.2              pyhd8ed1ab_1    conda-forge\r\nqtconsole-base            5.2.2              pyhd8ed1ab_1    conda-forge\r\nqtpy                      2.0.0              pyhd8ed1ab_0    conda-forge\r\nr-base                    3.6.3                hbcea092_8    conda-forge\r\nr-base64enc               0.1_3           r36hcfec24a_1004    conda-forge\r\nr-crayon                  1.3.4             r36h6115d3f_0    r\r\nr-digest                  0.6.18            r36h96ca727_0    r\r\nr-evaluate                0.14              r36h6115d3f_2    conda-forge\r\nr-htmltools               0.3.6             r36h29659fb_0    r\r\nr-irdisplay               0.7.0             r36h6115d3f_0    r\r\nr-irkernel                0.8.15                    r36_0    r\r\nr-jsonlite                1.6               r36h96ca727_0    r\r\nr-pbdzmq                  0.3_3             r36h5455479_1    r\r\nr-rcpp                    1.0.1             r36h29659fb_0    r\r\nr-repr                    0.19.2            r36h6115d3f_0    r\r\nr-uuid                    0.1_2             r36h96ca727_4    r\r\nrdflib                    6.1.1              pyhd8ed1ab_0    conda-forge\r\nreadline                  8.1                  h46c0cb4_0    conda-forge\r\nreadmat                   0.0.1                    pypi_0    pypi\r\nregex                     2022.1.18        py38h497a2fe_0    conda-forge\r\nrequests                  2.27.1             pyhd8ed1ab_0    conda-forge\r\nripgrep                   13.0.0               h2f28480_2    conda-forge\r\nrope                      0.22.0             pyhd8ed1ab_0    conda-forge\r\nrtree                     0.9.7            py38h02d302b_3    conda-forge\r\nruamel_yaml               0.15.80         py38h497a2fe_1006    conda-forge\r\ns3fs                      2021.4.0                 pypi_0    pypi\r\nscikit-image              0.19.1           py38h43a58ef_0    conda-forge\r\nscikit-learn              1.0.2            py38h1561384_0    conda-forge\r\nscipy                     1.7.1                    pypi_0    pypi\r\nseaborn                   0.11.2               hd8ed1ab_0    conda-forge\r\nseaborn-base              0.11.2             pyhd8ed1ab_0    conda-forge\r\nsecretstorage             3.3.1            py38h578d9bd_1    conda-forge\r\nsed                       4.8                  he412f7d_0    conda-forge\r\nsend2trash                1.8.0              pyhd8ed1ab_0    conda-forge\r\nsetuptools                59.8.0           py38h578d9bd_0    conda-forge\r\nsetuptools-scm            6.4.2              pyhd8ed1ab_0    conda-forge\r\nsimplegeneric             0.8.1                      py_1    conda-forge\r\nsimplejson                3.17.6           py38h497a2fe_0    conda-forge\r\nsingledispatch            3.6.1              pyh44b312d_0    conda-forge\r\nsip                       4.19.25          py38h709712a_1    conda-forge\r\nsix                       1.16.0             pyh6c4a22f_0    conda-forge\r\nsmmap                     3.0.5              pyh44b312d_0    conda-forge\r\nsnappy                    1.1.9                hbd366e4_1    conda-forge\r\nsniffio                   1.2.0            py38h578d9bd_2    conda-forge\r\nsnowballstemmer           2.2.0              pyhd8ed1ab_0    conda-forge\r\nsortedcollections         2.1.0              pyhd8ed1ab_0    conda-forge\r\nsortedcontainers          2.4.0              pyhd8ed1ab_0    conda-forge\r\nsoupsieve                 2.3.1              pyhd8ed1ab_0    conda-forge\r\nsparqlwrapper             1.8.5           py38h578d9bd_1006    conda-forge\r\nsphinx                    4.4.0              pyh6c4a22f_1    conda-forge\r\nsphinxcontrib             1.0                      py38_1  \r\nsphinxcontrib-applehelp   1.0.2                      py_0    conda-forge\r\nsphinxcontrib-devhelp     1.0.2                      py_0    conda-forge\r\nsphinxcontrib-htmlhelp    2.0.0              pyhd8ed1ab_0    conda-forge\r\nsphinxcontrib-jsmath      1.0.1                      py_0    conda-forge\r\nsphinxcontrib-qthelp      1.0.3                      py_0    conda-forge\r\nsphinxcontrib-serializinghtml 1.1.5              pyhd8ed1ab_1    conda-forge\r\nsphinxcontrib-websupport  1.2.4              pyhd8ed1ab_1    conda-forge\r\nspyder                    5.0.5            py38h06a4308_2  \r\nspyder-kernels            2.0.5            py38h06a4308_0  \r\nsqlalchemy                1.4.30           py38h497a2fe_0    conda-forge\r\nsqlite                    3.37.0               h9cd32fc_0    conda-forge\r\nstack_data                0.1.4              pyhd8ed1ab_0    conda-forge\r\nstatsmodels               0.13.1           py38h6c62de6_0    conda-forge\r\nsvt-av1                   0.8.7                h9c3ff4c_1    conda-forge\r\nsympy                     1.9              py38h578d9bd_1    conda-forge\r\nsysroot_linux-64          2.12                he073ed8_15    conda-forge\r\ntabulate                  0.8.9              pyhd8ed1ab_0    conda-forge\r\ntbb                       2021.5.0             h924138e_1    conda-forge\r\ntblib                     1.7.0              pyhd8ed1ab_0    conda-forge\r\nterminado                 0.12.1           py38h578d9bd_1    conda-forge\r\ntestpath                  0.5.0              pyhd8ed1ab_0    conda-forge\r\ntext-unidecode            1.3                        py_0    conda-forge\r\ntextdistance              4.2.2              pyhd8ed1ab_0    conda-forge\r\nthreadpoolctl             3.0.0              pyh8a188c0_0    conda-forge\r\nthree-merge               0.1.1              pyh9f0ad1d_0    conda-forge\r\ntifffile                  2021.11.2          pyhd8ed1ab_0    conda-forge\r\ntinycss2                  1.1.1              pyhd8ed1ab_0    conda-forge\r\ntk                        8.6.12               h27826a3_0    conda-forge\r\ntktable                   2.10                 hb7b940f_3    conda-forge\r\ntoml                      0.10.2             pyhd8ed1ab_0    conda-forge\r\ntomli                     1.2.2              pyhd8ed1ab_0    conda-forge\r\ntoolz                     0.11.2             pyhd8ed1ab_0    conda-forge\r\ntorchvision               0.11.1               py38_cu111    pytorch\r\ntornado                   6.1              py38h497a2fe_2    conda-forge\r\ntqdm                      4.62.3             pyhd8ed1ab_0    conda-forge\r\ntraitlets                 5.1.1              pyhd8ed1ab_0    conda-forge\r\ntraits                    6.3.2            py38h497a2fe_0    conda-forge\r\ntyped-ast                 1.5.1            py38h497a2fe_0    conda-forge\r\ntyping-extensions         4.0.1                hd8ed1ab_0    conda-forge\r\ntyping_extensions         4.0.1              pyha770c72_0    conda-forge\r\nujson                     5.1.0            py38h709712a_0    conda-forge\r\nuncertainties             3.1.6              pyhd8ed1ab_0    conda-forge\r\nunicodecsv                0.14.1                     py_1    conda-forge\r\nunicodedata2              14.0.0           py38h497a2fe_0    conda-forge\r\nunidecode                 1.3.2              pyhd8ed1ab_0    conda-forge\r\nunixodbc                  2.3.10               h583eb01_0    conda-forge\r\nurllib3                   1.26.8             pyhd8ed1ab_1    conda-forge\r\nwatchdog                  2.1.6            py38h578d9bd_1    conda-forge\r\nwcwidth                   0.2.5              pyh9f0ad1d_2    conda-forge\r\nwebencodings              0.5.1                      py_1    conda-forge\r\nwebsocket-client          1.2.3              pyhd8ed1ab_0    conda-forge\r\nwerkzeug                  2.0.2              pyhd8ed1ab_0    conda-forge\r\nwheel                     0.37.1             pyhd8ed1ab_0    conda-forge\r\nwidgetsnbextension        3.5.2            py38h578d9bd_1    conda-forge\r\nwrapt                     1.13.3           py38h497a2fe_1    conda-forge\r\nwurlitzer                 3.0.2            py38h578d9bd_1    conda-forge\r\nx264                      1!161.3030           h7f98852_1    conda-forge\r\nx265                      3.5                  h4bd325d_1    conda-forge\r\nxarray                    0.20.2             pyhd8ed1ab_0    conda-forge\r\nxlrd                      2.0.1              pyhd8ed1ab_3    conda-forge\r\nxlsxwriter                3.0.2              pyhd8ed1ab_0    conda-forge\r\nxlwt                      1.3.0                      py_1    conda-forge\r\nxmltodict                 0.12.0                     py_0    conda-forge\r\nxorg-fixesproto           5.0               h7f98852_1002    conda-forge\r\nxorg-kbproto              1.0.7             h7f98852_1002    conda-forge\r\nxorg-libice               1.0.10               h7f98852_0    conda-forge\r\nxorg-libsm                1.2.3             hd9c2040_1000    conda-forge\r\nxorg-libx11               1.7.2                h7f98852_0    conda-forge\r\nxorg-libxau               1.0.9                h7f98852_0    conda-forge\r\nxorg-libxdmcp             1.1.3                h7f98852_0    conda-forge\r\nxorg-libxext              1.3.4                h7f98852_1    conda-forge\r\nxorg-libxfixes            5.0.3             h7f98852_1004    conda-forge\r\nxorg-libxrender           0.9.10            h7f98852_1003    conda-forge\r\nxorg-renderproto          0.11.1            h7f98852_1002    conda-forge\r\nxorg-xextproto            7.3.0             h7f98852_1002    conda-forge\r\nxorg-xproto               7.0.31            h7f98852_1007    conda-forge\r\nxvfbwrapper               0.2.9           py38h578d9bd_1004    conda-forge\r\nxz                        5.2.5                h516909a_1    conda-forge\r\nyaml                      0.2.5                h7f98852_2    conda-forge\r\nyapf                      0.32.0             pyhd8ed1ab_0    conda-forge\r\nyarl                      1.6.3                    pypi_0    pypi\r\nzeromq                    4.3.4                h9c3ff4c_1    conda-forge\r\nzfp                       0.5.5                h9c3ff4c_8    conda-forge\r\nzict                      2.0.0                      py_0    conda-forge\r\nzipp                      3.7.0              pyhd8ed1ab_0    conda-forge\r\nzlib                      1.2.12               h166bdaf_2    conda-forge\r\nzope                      1.0                      py38_1  \r\nzope.event                4.5.0              pyh9f0ad1d_0    conda-forge\r\nzope.interface            5.4.0            py38h497a2fe_1    conda-forge\r\nzstd                      1.5.2                h8a70e8d_2    conda-forge\r\n```\r\n\r\nBest\r\nVincent", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3309", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3309/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3309/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3309/events", "html_url": "https://github.com/nilearn/nilearn/issues/3309", "id": 1304489508, "node_id": "I_kwDOABLbHM5NwO4k", "number": 3309, "title": "test_with_globbing_patterns_with_multiple_images fails on Python3.10", "user": {"login": "MeggyCal", "id": 23431872, "node_id": "MDQ6VXNlcjIzNDMxODcy", "avatar_url": "https://avatars.githubusercontent.com/u/23431872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeggyCal", "html_url": "https://github.com/MeggyCal", "followers_url": "https://api.github.com/users/MeggyCal/followers", "following_url": "https://api.github.com/users/MeggyCal/following{/other_user}", "gists_url": "https://api.github.com/users/MeggyCal/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeggyCal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeggyCal/subscriptions", "organizations_url": "https://api.github.com/users/MeggyCal/orgs", "repos_url": "https://api.github.com/users/MeggyCal/repos", "events_url": "https://api.github.com/users/MeggyCal/events{/privacy}", "received_events_url": "https://api.github.com/users/MeggyCal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-07-14T09:07:24Z", "updated_at": "2022-07-18T12:36:30Z", "closed_at": "2022-07-18T12:36:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, running the testsuite of nilearn 0.9.1 on Python 3.10 (on build.opensuse.org) I get the error below. The test passes on Python 3.9 and 3.8.\r\n\r\n```\r\n 2047s] =================================== FAILURES ===================================\r\n[ 2047s] _______________ test_with_globbing_patterns_with_multiple_images _______________\r\n[ 2047s] [gw5] linux -- Python 3.10.5 /usr/bin/python3.10\r\n[ 2047s] \r\n[ 2047s]     def test_with_globbing_patterns_with_multiple_images():\r\n[ 2047s]         # With multiple images\r\n[ 2047s]         data_4d = np.zeros((40, 40, 40, 3))\r\n[ 2047s]         data_4d[20, 20, 20] = 1\r\n[ 2047s]         img_4d = nibabel.Nifti1Image(data_4d, affine=np.eye(4))\r\n[ 2047s]         multi_pca = MultiPCA(n_components=3)\r\n[ 2047s]     \r\n[ 2047s]         with write_tmp_imgs(img_4d, img_4d, create_files=True,\r\n[ 2047s]                             use_wildcards=True) as imgs:\r\n[ 2047s]             input_image = _tmp_dir() + imgs\r\n[ 2047s] >           multi_pca.fit(input_image)\r\n[ 2047s] \r\n[ 2047s] nilearn/decomposition/tests/test_multi_pca.py:203: \r\n[ 2047s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[ 2047s] nilearn/decomposition/base.py:404: in fit\r\n[ 2047s]     self.masker_.fit(imgs)\r\n[ 2047s] nilearn/maskers/multi_nifti_masker.py:234: in fit\r\n[ 2047s]     self.mask_img_ = self._cache(\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/memory.py:349: in __call__\r\n[ 2047s]     return self.func(*args, **kwargs)\r\n[ 2047s] nilearn/masking.py:362: in compute_multi_epi_mask\r\n[ 2047s]     masks = Parallel(n_jobs=n_jobs, verbose=verbose)(\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/parallel.py:1046: in __call__\r\n[ 2047s]     while self.dispatch_one_batch(iterator):\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/parallel.py:861: in dispatch_one_batch\r\n[ 2047s]     self._dispatch(tasks)\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/parallel.py:779: in _dispatch\r\n[ 2047s]     job = self._backend.apply_async(batch, callback=cb)\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/_parallel_backends.py:208: in apply_async\r\n[ 2047s]     result = ImmediateResult(func)\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/_parallel_backends.py:572: in __init__\r\n[ 2047s]     self.results = batch()\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/parallel.py:262: in __call__\r\n[ 2047s]     return [func(*args, **kwargs)\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/parallel.py:262: in <listcomp>\r\n[ 2047s]     return [func(*args, **kwargs)\r\n[ 2047s] nilearn/masking.py:268: in compute_epi_mask\r\n[ 2047s]     cache(_compute_mean, memory)(epi_img, target_affine=target_affine,\r\n[ 2047s] /usr/lib/python3.10/site-packages/joblib/memory.py:349: in __call__\r\n[ 2047s]     return self.func(*args, **kwargs)\r\n[ 2047s] nilearn/image/image.py:455: in _compute_mean\r\n[ 2047s]     imgs = check_niimg(imgs)\r\n[ 2047s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[ 2047s] \r\n[ 2047s] niimg = '/tmp/nilearn_hb44jvgd.nii', ensure_ndim = None, atleast_4d = False\r\n[ 2047s] dtype = None, return_iterator = False, wildcards = True\r\n[ 2047s] \r\n[ 2047s]     def check_niimg(niimg, ensure_ndim=None, atleast_4d=False, dtype=None,\r\n[ 2047s]                     return_iterator=False,\r\n[ 2047s]                     wildcards=True):\r\n[ 2047s]         \"\"\"Check that niimg is a proper 3D/4D niimg. Turn filenames into objects.\r\n[ 2047s]     \r\n[ 2047s]         Parameters\r\n[ 2047s]         ----------\r\n[ 2047s]         niimg : Niimg-like object\r\n[ 2047s]             See https://nilearn.github.io/stable/manipulating_images/input_output.html  # noqa:E501\r\n[ 2047s]             If niimg is a string, consider it as a path to Nifti image and\r\n[ 2047s]             call nibabel.load on it. The '~' symbol is expanded to the user home\r\n[ 2047s]             folder.\r\n[ 2047s]             If it is an object, check if the affine attribute present and that\r\n[ 2047s]             nilearn.image.get_data returns a result, raise TypeError otherwise.\r\n[ 2047s]     \r\n[ 2047s]         ensure_ndim : integer {3, 4}, optional\r\n[ 2047s]             Indicate the dimensionality of the expected niimg. An\r\n[ 2047s]             error is raised if the niimg is of another dimensionality.\r\n[ 2047s]     \r\n[ 2047s]         atleast_4d : boolean, optional\r\n[ 2047s]             Indicates if a 3d image should be turned into a single-scan 4d niimg.\r\n[ 2047s]             Default=False.\r\n[ 2047s]     \r\n[ 2047s]         dtype : {None, dtype, \"auto\"}, optional\r\n[ 2047s]             Data type toward which the data should be converted. If \"auto\", the\r\n[ 2047s]             data will be converted to int32 if dtype is discrete and float32 if it\r\n[ 2047s]             is continuous. If None, data will not be converted to a new data type.\r\n[ 2047s]             Default=None.\r\n[ 2047s]     \r\n[ 2047s]         return_iterator : boolean, optional\r\n[ 2047s]             Returns an iterator on the content of the niimg file input.\r\n[ 2047s]             Default=False.\r\n[ 2047s]     \r\n[ 2047s]         wildcards : boolean, optional\r\n[ 2047s]             Use niimg as a regular expression to get a list of matching input\r\n[ 2047s]             filenames.\r\n[ 2047s]             If multiple files match, the returned list is sorted using an ascending\r\n[ 2047s]             order.\r\n[ 2047s]             If no file matches the regular expression, a ValueError exception is\r\n[ 2047s]             raised.\r\n[ 2047s]             Default=True.\r\n[ 2047s]     \r\n[ 2047s]         Returns\r\n[ 2047s]         -------\r\n[ 2047s]         result : 3D/4D Niimg-like object\r\n[ 2047s]             Result can be nibabel.Nifti1Image or the input, as-is. It is guaranteed\r\n[ 2047s]             that the returned object has an affine attribute and that its data can\r\n[ 2047s]             be retrieved with nilearn.image.get_data.\r\n[ 2047s]     \r\n[ 2047s]         Notes\r\n[ 2047s]         -----\r\n[ 2047s]         In nilearn, special care has been taken to make image manipulation easy.\r\n[ 2047s]         This method is a kind of pre-requisite for any data processing method in\r\n[ 2047s]         nilearn because it checks if data have a correct format and loads them if\r\n[ 2047s]         necessary.\r\n[ 2047s]     \r\n[ 2047s]         Its application is idempotent.\r\n[ 2047s]     \r\n[ 2047s]         See also\r\n[ 2047s]         --------\r\n[ 2047s]             _iter_check_niimg, check_niimg_3d, check_niimg_4d\r\n[ 2047s]     \r\n[ 2047s]         \"\"\"\r\n[ 2047s]         from ..image import new_img_like  # avoid circular imports\r\n[ 2047s]     \r\n[ 2047s]         if isinstance(niimg, str):\r\n[ 2047s]             if wildcards and ni.EXPAND_PATH_WILDCARDS:\r\n[ 2047s]                 # Ascending sorting + expand user path\r\n[ 2047s]                 filenames = sorted(glob.glob(os.path.expanduser(niimg)))\r\n[ 2047s]     \r\n[ 2047s]                 # processing filenames matching globbing expression\r\n[ 2047s]                 if len(filenames) >= 1 and glob.has_magic(niimg):\r\n[ 2047s]                     niimg = filenames  # iterable case\r\n[ 2047s]                 # niimg is an existing filename\r\n[ 2047s]                 elif [niimg] == filenames:\r\n[ 2047s]                     niimg = filenames[0]\r\n[ 2047s]                 # No files found by glob\r\n[ 2047s]                 elif glob.has_magic(niimg):\r\n[ 2047s]                     # No files matching the glob expression, warn the user\r\n[ 2047s]                     message = (\"No files matching the entered niimg expression: \"\r\n[ 2047s]                                 \"'%s'.\\n You may have left wildcards usage \"\r\n[ 2047s]                                \"activated: please set the global constant \"\r\n[ 2047s]                                \"'nilearn.EXPAND_PATH_WILDCARDS' to False to \"\r\n[ 2047s]                                \"deactivate this behavior.\") % niimg\r\n[ 2047s]                     raise ValueError(message)\r\n[ 2047s]                 else:\r\n[ 2047s] >                   raise ValueError(\"File not found: '%s'\" % niimg)\r\n[ 2047s] E                   ValueError: File not found: '/tmp/nilearn_hb44jvgd.nii'\r\n[ 2047s] \r\n[ 2047s] nilearn/_utils/niimg_conversions.py:271: ValueError\r\n```\r\n\r\nI looked into [What's New](https://docs.python.org/3/whatsnew/3.10.html) and the only thing that looks related to me is:\r\n```\r\n[collections.abc.Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable) generic now flattens type parameters, similar to what [typing.Callable](https://docs.python.org/3/library/typing.html#typing.Callable) currently does. This means that collections.abc.Callable[[int, str], str] will have __args__ of (int, str, str); previously this was ([int, str], str). Code which accesses the arguments via [typing.get_args()](https://docs.python.org/3/library/typing.html#typing.get_args) or __args__ need to account for this change. Furthermore, [TypeError](https://docs.python.org/3/library/exceptions.html#TypeError) may be raised for invalid forms of parameterizing [collections.abc.Callable](https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable) which may have passed silently in Python 3.9. (Contributed by Ken Jin in [bpo-42195](https://bugs.python.org/issue?@action=redirect&bpo=42195).)\r\n```\r\n\r\nBut I don't know. Can you please help me with it?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3299", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3299/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3299/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3299/events", "html_url": "https://github.com/nilearn/nilearn/issues/3299", "id": 1292098189, "node_id": "I_kwDOABLbHM5NA9qN", "number": 3299, "title": "first_level_from_bids warnings ignore slice_time_ref argument", "user": {"login": "andreifoldes", "id": 7458009, "node_id": "MDQ6VXNlcjc0NTgwMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/7458009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreifoldes", "html_url": "https://github.com/andreifoldes", "followers_url": "https://api.github.com/users/andreifoldes/followers", "following_url": "https://api.github.com/users/andreifoldes/following{/other_user}", "gists_url": "https://api.github.com/users/andreifoldes/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreifoldes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreifoldes/subscriptions", "organizations_url": "https://api.github.com/users/andreifoldes/orgs", "repos_url": "https://api.github.com/users/andreifoldes/repos", "events_url": "https://api.github.com/users/andreifoldes/events{/privacy}", "received_events_url": "https://api.github.com/users/andreifoldes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}], "state": "closed", "locked": false, "assignee": {"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-07-02T17:08:52Z", "updated_at": "2023-04-12T09:21:30Z", "closed_at": "2023-04-12T09:21:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nHello - \r\n\r\nwhen running _first_level_from_bids_ structure with specified float valued slice_time_ref (e.g: 0.5 for default fmriprep'd data) the following warning:\r\n```python\r\n    if t_r is not None:\r\n        warn('RepetitionTime given in model_init as %d' % t_r)\r\n        warn('slice_time_ref is %d percent of the repetition '\r\n             'time' % slice_time_ref)\r\n%d rounds the values to zero.\r\n```\r\n\r\nIn addition \r\n> UserWarning: SliceTimingRef not found in file C:\\Users\\saptaf1/nilearn_data\\ds000030/ds000030_R1.0.4/uncompressed\\sub-10159\\func\\sub-10159_task-stopsignal_bold.json. It will be assumed that the slice timing reference is 0.0 percent of the repetition time. If it is not the case it will need to be set manually in the generated list of models\r\nignores specified slice_time_ref argument.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n0.9.1\r\n### Expected behavior\r\n1.Display slice_time_ref (and the TR) as float in user warning\r\n2.Don't ignore slice_time_ref argument in warning message display logic \r\n\r\n### Actual behavior\r\nTR and slice_time_ref displayed as decimal integers in first warning and slice_time_ref argument ignored in the second warning.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nNote this code also triggers the 2nd issue, because the TR is extracted from the json.\r\n\r\n```python\r\n\r\nfrom nilearn.datasets import (fetch_openneuro_dataset_index,\r\n                              fetch_openneuro_dataset, select_from_index)\r\n\r\n_, urls = fetch_openneuro_dataset_index()\r\n\r\nexclusion_patterns = ['*group*', '*phenotype*', '*mriqc*',\r\n                      '*parameter_plots*', '*physio_plots*',\r\n                      '*space-fsaverage*', '*space-T1w*',\r\n                      '*dwi*', '*beh*', '*task-bart*',\r\n                      '*task-rest*', '*task-scap*', '*task-task*']\r\nurls = select_from_index(\r\n    urls, exclusion_filters=exclusion_patterns, n_subjects=1)\r\n\r\ndata_dir, _ = fetch_openneuro_dataset(urls=urls)\r\n\r\nfrom nilearn.glm.first_level import first_level_from_bids\r\ntask_label = 'stopsignal'\r\nspace_label = 'MNI152NLin2009cAsym'\r\nderivatives_folder = 'derivatives/fmriprep'\r\nmodels, models_run_imgs, models_events, models_confounds = \\\r\n    first_level_from_bids(data_dir, task_label, space_label,\r\n                          smoothing_fwhm=5.0,\r\n                          derivatives_folder=derivatives_folder, slice_time_ref=0.5)\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3295", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3295/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3295/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3295/events", "html_url": "https://github.com/nilearn/nilearn/issues/3295", "id": 1290184324, "node_id": "I_kwDOABLbHM5M5qaE", "number": 3295, "title": "Possible inappropriate usage of scipy.stats.gamma.pdf in _gamma_difference_hrf", "user": {"login": "const7", "id": 19154386, "node_id": "MDQ6VXNlcjE5MTU0Mzg2", "avatar_url": "https://avatars.githubusercontent.com/u/19154386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/const7", "html_url": "https://github.com/const7", "followers_url": "https://api.github.com/users/const7/followers", "following_url": "https://api.github.com/users/const7/following{/other_user}", "gists_url": "https://api.github.com/users/const7/gists{/gist_id}", "starred_url": "https://api.github.com/users/const7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/const7/subscriptions", "organizations_url": "https://api.github.com/users/const7/orgs", "repos_url": "https://api.github.com/users/const7/repos", "events_url": "https://api.github.com/users/const7/events{/privacy}", "received_events_url": "https://api.github.com/users/const7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-30T14:01:17Z", "updated_at": "2022-07-04T12:42:31Z", "closed_at": "2022-07-04T12:42:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nHere (`scipy.stats.gamma.pdf(x, a, loc=0, scale=1)`) is the gamma pdf function statement. And following is how it's used in nilearn. `delay / dispersion` and `dt / dispersion` strangely correspond to `a` and `loc` respectively, while `scale` with default value `1`.\r\n\r\nhttps://github.com/nilearn/nilearn/blob/cc11c85cd222632dcaf7c51005b549f75a49bbc4/nilearn/glm/first_level/hemodynamic_models.py#L18-L74\r\n\r\nSee more details here #2981. With this usage, we cannot produce the right Glover HRF even if we add the normalization constant.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.1\r\n\r\n### Steps and code to reproduce bug\r\n\r\nHere is the comparison between different versions of Glover HRF.\r\n\r\n```python\r\nimport numpy as np\r\nfrom scipy.stats import gamma\r\nfrom nilearn.glm.first_level import glover_hrf\r\nimport matplotlib.pyplot as plt\r\n\r\n# Glover 1999\r\ndef original_glover(t, n1=6.0, t1=0.9, a2=0.35, n2=12.0, t2=0.9):\r\n    \"\"\"As seen in Glover 1999, page 420. Using values for the auditory cortex (canonical Glover).\r\n    Variables are named after those in the paper.\r\n    \"\"\"\r\n    gamma1 = t**n1 * np.exp(-t / t1)\r\n    gamma2 = t**n2 * np.exp(-t / t2)\r\n    c1 = gamma1.max()\r\n    c2 = gamma2.max()\r\n    return gamma1 / c1 - a2 * gamma2 / c2\r\n\r\n\r\n# glover_hrf with normalized gamma\r\ndef _gamma_difference_hrf(tr, oversampling=50, time_length=32., onset=0.,\r\n                          delay=6, undershoot=16., dispersion=1.,\r\n                          u_dispersion=1., ratio=0.167):\r\n    \"\"\"\r\n    Minimum modification from nilearn.glm.first_level._gamma_difference_hrf\r\n    (only add the normalization constant)\r\n    \"\"\"\r\n    dt = tr / oversampling\r\n    time_stamps = np.linspace(0, time_length,\r\n                              np.rint(float(time_length) / dt).astype(int))\r\n    time_stamps -= onset\r\n    \r\n    peak = gamma.pdf(time_stamps, delay / dispersion, dt / dispersion)\r\n    undershoot = gamma.pdf(time_stamps, undershoot / u_dispersion, dt / u_dispersion)\r\n    hrf = peak / peak.max() - ratio * undershoot / undershoot.max()\r\n    hrf /= hrf.sum()\r\n    return hrf\r\n\r\n\r\ndef glover_hrf_with_norm(tr, oversampling=50, time_length=32., onset=0.):\r\n    \"\"\"\r\n    Same as nilearn.glm.first_level.glover_hrf\r\n    \"\"\"\r\n    return _gamma_difference_hrf(tr, oversampling, time_length, onset,\r\n                                 delay=6, undershoot=12., dispersion=.9,\r\n                                 u_dispersion=.9, ratio=.35)\r\n\r\n\r\n# code from dangom\r\n# https://github.com/nilearn/nilearn/issues/2981#issuecomment-1160515684\r\ndef sample(t: np.array):\r\n    # Glover parameters\r\n    peak_delay: float = 6.0\r\n    peak_width: float = 0.9\r\n    undershoot_delay: float = 12.0\r\n    undershoot_width: float = 0.9\r\n    positive_negative_ratio: float = 0.35\r\n\r\n    peak = gamma.pdf(t, peak_delay / peak_width, loc=1/50, scale=peak_width)\r\n    undershoot = gamma.pdf(\r\n        t,\r\n        undershoot_delay / undershoot_width,\r\n        loc=0,\r\n        scale=undershoot_width,\r\n    )\r\n    peak_norm = peak.max()\r\n    undershoot_norm = undershoot.max()\r\n\r\n    hrf = peak / peak_norm - undershoot / undershoot_norm * positive_negative_ratio\r\n    return hrf\r\n\r\n\r\nt = np.arange(0, 32, 0.02)  # 32 seconds, with a TR=1 and oversampling=50 (hence 0.02).\r\n# Plot both HRFs normalized so we can compare their shape.\r\nplt.plot(t, original_glover(t) / original_glover(t).max(), label=\"Glover 1999\")\r\nplt.plot(t, glover_hrf(1) / glover_hrf(1).max(), label=\"nilearn glover_hrf\")\r\nplt.plot(t, glover_hrf_with_norm(1) / glover_hrf_with_norm(1).max(), label=\"glover_hrf with normalized gamma\")\r\nplt.plot(t, sample(t) / sample(t).max(), label=\"code from dangom\")\r\nplt.grid()\r\nplt.legend()\r\nplt.show()\r\n```\r\n\r\nHere is the result\r\n![image](https://user-images.githubusercontent.com/19154386/176695171-b11cf44f-128d-4d6f-b52c-6ea6fa262a35.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3294", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3294/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3294/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3294/events", "html_url": "https://github.com/nilearn/nilearn/issues/3294", "id": 1287676583, "node_id": "I_kwDOABLbHM5MwGKn", "number": 3294, "title": "TypeError: expected string or bytes-like object", "user": {"login": "saiprasanna06", "id": 84331317, "node_id": "MDQ6VXNlcjg0MzMxMzE3", "avatar_url": "https://avatars.githubusercontent.com/u/84331317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saiprasanna06", "html_url": "https://github.com/saiprasanna06", "followers_url": "https://api.github.com/users/saiprasanna06/followers", "following_url": "https://api.github.com/users/saiprasanna06/following{/other_user}", "gists_url": "https://api.github.com/users/saiprasanna06/gists{/gist_id}", "starred_url": "https://api.github.com/users/saiprasanna06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saiprasanna06/subscriptions", "organizations_url": "https://api.github.com/users/saiprasanna06/orgs", "repos_url": "https://api.github.com/users/saiprasanna06/repos", "events_url": "https://api.github.com/users/saiprasanna06/events{/privacy}", "received_events_url": "https://api.github.com/users/saiprasanna06/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-28T17:36:27Z", "updated_at": "2022-09-30T16:35:05Z", "closed_at": "2022-09-30T16:35:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "My code was running perfectly few days ago. Today I am getting this error all of a sudden. The error shown is as follows. Please help me fix it.\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nInput In [8], in <cell line: 9>()\r\n      2 import nilearn.maskers\r\n      4 masker = NiftiLabelsMasker(labels_img=atlas_filename, \r\n      5                            standardize=True, \r\n      6                            memory='nilearn_cache', \r\n      7                            verbose=1)\r\n----> 9 time_series = masker.fit_transform(fmri_filenames)\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\maskers\\nifti_labels_masker.py:396, in NiftiLabelsMasker.fit_transform(self, imgs, confounds, sample_mask)\r\n    392 def fit_transform(self, imgs, confounds=None, sample_mask=None):\r\n    393     \"\"\" Prepare and perform signal extraction from regions.\r\n    394 \r\n    395     \"\"\"\r\n--> 396     return self.fit().transform(imgs, confounds=confounds,\r\n    397                                 sample_mask=sample_mask)\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\maskers\\base_masker.py:197, in BaseMasker.transform(self, imgs, confounds, sample_mask)\r\n    194 self._check_fitted()\r\n    196 if confounds is None and not self.high_variance_confounds:\r\n--> 197     return self.transform_single_imgs(imgs,\r\n    198                                       confounds=confounds,\r\n    199                                       sample_mask=sample_mask)\r\n    201 # Compute high variance confounds if requested\r\n    202 all_confounds = []\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\maskers\\nifti_labels_masker.py:492, in NiftiLabelsMasker.transform_single_imgs(self, imgs, confounds, sample_mask)\r\n    489 params['target_shape'] = target_shape\r\n    490 params['target_affine'] = target_affine\r\n--> 492 region_signals, labels_ = self._cache(\r\n    493     _filter_and_extract,\r\n    494     ignore=['verbose', 'memory', 'memory_level']\r\n    495 )(\r\n    496     # Images\r\n    497     imgs, _ExtractionFunctor(self._resampled_labels_img_,\r\n    498                              self.background_label, self.strategy,\r\n    499                              self._resampled_mask_img),\r\n    500     # Pre-processing\r\n    501     params,\r\n    502     confounds=confounds,\r\n    503     sample_mask=sample_mask,\r\n    504     dtype=self.dtype,\r\n    505     # Caching\r\n    506     memory=self.memory,\r\n    507     memory_level=self.memory_level,\r\n    508     verbose=self.verbose)\r\n    510 self.labels_ = labels_\r\n    512 return region_signals\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\_utils\\cache_mixin.py:309, in CacheMixin._cache(self, func, func_memory_level, shelve, **kwargs)\r\n    304     warnings.warn(\"memory_level is currently set to 0 but \"\r\n    305                   \"a Memory object has been provided. \"\r\n    306                   \"Setting memory_level to 1.\")\r\n    307     self.memory_level = 1\r\n--> 309 return cache(func, self.memory, func_memory_level=func_memory_level,\r\n    310              memory_level=self.memory_level, shelve=shelve,\r\n    311              **kwargs)\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\_utils\\cache_mixin.py:240, in cache(func, memory, func_memory_level, memory_level, shelve, **kwargs)\r\n    238 else:\r\n    239     memory = Memory(location=None, verbose=verbose)\r\n--> 240 cached_func = _safe_cache(memory, func, **kwargs)\r\n    241 if shelve:\r\n    242     cached_func = _ShelvedFunc(cached_func)\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\_utils\\cache_mixin.py:113, in _safe_cache(memory, func, **kwargs)\r\n    111 my_versions = dict((m.__name__, m.__version__) for m in modules)\r\n    112 commons = set(versions.keys()).intersection(set(my_versions.keys()))\r\n--> 113 collisions = [\r\n    114     m for m in commons if not _compare_version(\r\n    115         versions[m], '==', my_versions[m]\r\n    116     )\r\n    117 ]\r\n    118 # Flush cache if version collision\r\n    119 if len(collisions) > 0:\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\_utils\\cache_mixin.py:114, in <listcomp>(.0)\r\n    111 my_versions = dict((m.__name__, m.__version__) for m in modules)\r\n    112 commons = set(versions.keys()).intersection(set(my_versions.keys()))\r\n    113 collisions = [\r\n--> 114     m for m in commons if not _compare_version(\r\n    115         versions[m], '==', my_versions[m]\r\n    116     )\r\n    117 ]\r\n    118 # Flush cache if version collision\r\n    119 if len(collisions) > 0:\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\nilearn\\version.py:158, in _compare_version(version_a, operator, version_b)\r\n    153 if operator not in VERSION_OPERATORS:\r\n    154     raise ValueError(\r\n    155         \"'_compare_version' received an unexpected \"\r\n    156         \"operator {0}.\".format(operator)\r\n    157     )\r\n--> 158 return VERSION_OPERATORS[operator](parse(version_a), parse(version_b))\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\pkg_resources\\__init__.py:121, in parse_version(v)\r\n    119 def parse_version(v):\r\n    120     try:\r\n--> 121         return packaging.version.Version(v)\r\n    122     except packaging.version.InvalidVersion:\r\n    123         warnings.warn(\r\n    124             f\"{v} is an invalid version and will not be supported in \"\r\n    125             \"a future release\",\r\n    126             PkgResourcesDeprecationWarning,\r\n    127         )\r\n\r\nFile ~\\anaconda3\\lib\\site-packages\\pkg_resources\\_vendor\\packaging\\version.py:264, in Version.__init__(self, version)\r\n    261 def __init__(self, version: str) -> None:\r\n    262 \r\n    263     # Validate the version and parse it into pieces\r\n--> 264     match = self._regex.search(version)\r\n    265     if not match:\r\n    266         raise InvalidVersion(f\"Invalid version: '{version}'\")\r\n\r\nTypeError: expected string or bytes-like object\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3294/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3288", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3288/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3288/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3288/events", "html_url": "https://github.com/nilearn/nilearn/issues/3288", "id": 1285430168, "node_id": "I_kwDOABLbHM5MnhuY", "number": 3288, "title": "Test error in scipy `1.9.0rc1`", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2022-06-27T08:21:47Z", "updated_at": "2022-07-11T07:26:11Z", "closed_at": "2022-07-11T07:26:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The test is currently failing with scipy `1.9.0rc1`: See [here](https://github.com/nilearn/nilearn/runs/7067861378?check_suite_focus=true) for example. The failing test is:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/4242c0d03e3fc790b17a1d88ce5a4140633c6b6f/nilearn/decoding/tests/test_decoder.py#L435-L440\r\n\r\nfailing with error:\r\n\r\n```\r\nif Wn.size > 1 and not Wn[0] < Wn[1]:\r\n>           raise ValueError(\"Wn[0] must be less than Wn[1]\")\r\nE           ValueError: Wn[0] must be less than Wn[1]\r\n/opt/hostedtoolcache/Python/3.10.5/x64/lib/python3.10/site-packages/scipy/signal/_filter_design.py:2468: ValueError\r\n```\r\n\r\nThe error is due to this check which was added in this PR: https://github.com/scipy/scipy/pull/15886\r\nSee also the related issue: https://github.com/scipy/scipy/issues/15773.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3288/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3282", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3282/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3282/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3282/events", "html_url": "https://github.com/nilearn/nilearn/issues/3282", "id": 1272361296, "node_id": "I_kwDOABLbHM5L1rFQ", "number": 3282, "title": "URL problem in neurovault.py", "user": {"login": "ManonP38", "id": 107562830, "node_id": "U_kgDOBmlHTg", "avatar_url": "https://avatars.githubusercontent.com/u/107562830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManonP38", "html_url": "https://github.com/ManonP38", "followers_url": "https://api.github.com/users/ManonP38/followers", "following_url": "https://api.github.com/users/ManonP38/following{/other_user}", "gists_url": "https://api.github.com/users/ManonP38/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManonP38/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManonP38/subscriptions", "organizations_url": "https://api.github.com/users/ManonP38/orgs", "repos_url": "https://api.github.com/users/ManonP38/repos", "events_url": "https://api.github.com/users/ManonP38/events{/privacy}", "received_events_url": "https://api.github.com/users/ManonP38/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-15T14:55:35Z", "updated_at": "2022-06-21T13:02:06Z", "closed_at": "2022-06-21T13:02:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.--> \r\ntrying to run the example on page : [plot-3d-and-4d-niimg-py](https://nilearn.github.io/stable/auto_examples/plot_3d_and_4d_niimg.html#sphx-glr-auto-examples-plot-3d-and-4d-niimg-py)\r\n\r\nI got an error message: \r\nCould not get batch from http://neurovault.org/api/images/10426\r\n\r\nThis is because the URL uses http rather than https\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n\r\n### Expected behavior\r\nthe data fetcher should download data from neurovault into ~/nilearn_data \r\n\r\n\r\n### Actual behavior\r\nI got an error message: \r\nCould not get batch from http://neurovault.org/api/images/10426\r\n\r\n### Steps and code to reproduce bug\r\n\r\n\r\n```python\r\nfrom nilearn import datasets\r\ndatasets.fetch_neurovault_motor_task()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3256", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3256/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3256/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3256/events", "html_url": "https://github.com/nilearn/nilearn/issues/3256", "id": 1235022461, "node_id": "I_kwDOABLbHM5JnPJ9", "number": 3256, "title": "`TypeError: expected string or bytes-like object` when using `nilearn.input_data.NiftiMasker` with `memory` parameter.", "user": {"login": "TheChymera", "id": 950524, "node_id": "MDQ6VXNlcjk1MDUyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/950524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheChymera", "html_url": "https://github.com/TheChymera", "followers_url": "https://api.github.com/users/TheChymera/followers", "following_url": "https://api.github.com/users/TheChymera/following{/other_user}", "gists_url": "https://api.github.com/users/TheChymera/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheChymera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheChymera/subscriptions", "organizations_url": "https://api.github.com/users/TheChymera/orgs", "repos_url": "https://api.github.com/users/TheChymera/repos", "events_url": "https://api.github.com/users/TheChymera/events{/privacy}", "received_events_url": "https://api.github.com/users/TheChymera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/21", "html_url": "https://github.com/nilearn/nilearn/milestone/21", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/21/labels", "id": 7490099, "node_id": "MI_kwDOABLbHM4Ackoz", "number": 21, "title": "0.10", "description": "", "creator": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2021-12-15T10:54:13Z", "updated_at": "2023-04-27T08:27:57Z", "due_on": null, "closed_at": "2023-04-27T08:27:57Z"}, "comments": 10, "created_at": "2022-05-13T10:01:47Z", "updated_at": "2022-12-05T09:55:37Z", "closed_at": "2022-12-05T09:55:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I get the following error from a downstream test function which used to work: https://ppb.chymera.eu/cc4f38.log\r\n\r\nIt gets fixed by changing:\r\n\r\n```python\r\nmy_memory = Memory(path.abspath(path.expanduser('~/.nilearn_cache')))\r\nmasker = NiftiMasker(mask_img=roi, target_affine=ts_img.affine, memory=my_memory, memory_level=1)\r\n```\r\n\r\nto:\r\n\r\n```python\r\nmasker = NiftiMasker(mask_img=roi, target_affine=ts_img.affine, memory_level=1)\r\n```\r\n\r\nGiven that it seems to fail with a version comparison I suspect this is a fairly obvious issue with the installation? Any idea how to fix it, though?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3253", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3253/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3253/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3253/events", "html_url": "https://github.com/nilearn/nilearn/issues/3253", "id": 1234904702, "node_id": "I_kwDOABLbHM5JmyZ-", "number": 3253, "title": "`plot_markers` can only plot n>=2 scatter points", "user": {"login": "caglorithm", "id": 7763212, "node_id": "MDQ6VXNlcjc3NjMyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/7763212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caglorithm", "html_url": "https://github.com/caglorithm", "followers_url": "https://api.github.com/users/caglorithm/followers", "following_url": "https://api.github.com/users/caglorithm/following{/other_user}", "gists_url": "https://api.github.com/users/caglorithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/caglorithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caglorithm/subscriptions", "organizations_url": "https://api.github.com/users/caglorithm/orgs", "repos_url": "https://api.github.com/users/caglorithm/repos", "events_url": "https://api.github.com/users/caglorithm/events{/privacy}", "received_events_url": "https://api.github.com/users/caglorithm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-13T08:26:29Z", "updated_at": "2022-05-30T09:28:30Z", "closed_at": "2022-05-30T09:28:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n`plot_markers` returns an error if you attempt to plot only one point. \r\n\r\nThis works: \r\n```python\r\nplot_markers(np.ones(2), np.ones((2, 3))) # works\r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nplot_markers(np.ones(1), np.ones((1, 3))) # does not work\r\n```\r\n\r\nReturns \r\n```bash\r\nValueError: Dimension mismatch: 'node_values' should be vector of length 1, but current shape is () instead of (1,)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3253/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3251", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3251/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3251/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3251/events", "html_url": "https://github.com/nilearn/nilearn/issues/3251", "id": 1234284110, "node_id": "I_kwDOABLbHM5Jka5O", "number": 3251, "title": "Test `test_decoder_dummy_classifier` is failing", "user": {"login": "tsalo", "id": 8228902, "node_id": "MDQ6VXNlcjgyMjg5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8228902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsalo", "html_url": "https://github.com/tsalo", "followers_url": "https://api.github.com/users/tsalo/followers", "following_url": "https://api.github.com/users/tsalo/following{/other_user}", "gists_url": "https://api.github.com/users/tsalo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsalo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsalo/subscriptions", "organizations_url": "https://api.github.com/users/tsalo/orgs", "repos_url": "https://api.github.com/users/tsalo/repos", "events_url": "https://api.github.com/users/tsalo/events{/privacy}", "received_events_url": "https://api.github.com/users/tsalo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-05-12T17:28:10Z", "updated_at": "2022-05-14T06:52:49Z", "closed_at": "2022-05-14T06:52:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe test `nilearn/decoding/tests/test_decoder.py::test_decoder_dummy_classifier` is failing in #3248, #3249, and #3250, even though at least one of those PRs doesn't change any dependencies or relevant code.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.2dev at [a547961](https://github.com/nilearn/nilearn/commit/a547961179ef2ce974cc2078e77574fd63f76fe4).\r\n\r\n### Expected behavior\r\n\r\nThe test would pass.\r\n\r\n### Actual behavior\r\n\r\nIt seems to fail on a subset of the CI jobs.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nI'm having trouble reproducing the bug locally, but hypothetically one could do the following:\r\n\r\n```bash\r\npytest test_decoder.py -k test_decoder_dummy_classifier\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3251/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3251/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3244", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3244/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3244/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3244/events", "html_url": "https://github.com/nilearn/nilearn/issues/3244", "id": 1230122822, "node_id": "I_kwDOABLbHM5JUi9G", "number": 3244, "title": "Setting up nilearn development environment per instructions fails as tbb is not installed", "user": {"login": "JohnAtl", "id": 5720074, "node_id": "MDQ6VXNlcjU3MjAwNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5720074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnAtl", "html_url": "https://github.com/JohnAtl", "followers_url": "https://api.github.com/users/JohnAtl/followers", "following_url": "https://api.github.com/users/JohnAtl/following{/other_user}", "gists_url": "https://api.github.com/users/JohnAtl/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnAtl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnAtl/subscriptions", "organizations_url": "https://api.github.com/users/JohnAtl/orgs", "repos_url": "https://api.github.com/users/JohnAtl/repos", "events_url": "https://api.github.com/users/JohnAtl/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnAtl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-09T18:58:20Z", "updated_at": "2022-05-15T16:17:41Z", "closed_at": "2022-05-15T16:17:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nFollowing [the instructions](https://nilearn.github.io/stable/development.html#contribution-guidelines) in the contribution guidelines fails because tbb is not installed.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.1\r\nmacOS 12.3.1, Homebrew 3.4.10, Python 3.9.12\r\n\r\n### Expected behavior\r\n\r\nNo errors.\r\n\r\n### Actual behavior\r\n\r\n```\r\nPackagesNotFoundError: The following packages are missing from the target environment:\r\n  - tbb\r\n```\r\n\r\nWhich required `conda install tbb`.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3240", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3240/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3240/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3240/events", "html_url": "https://github.com/nilearn/nilearn/issues/3240", "id": 1228101597, "node_id": "I_kwDOABLbHM5JM1fd", "number": 3240, "title": "docstring of nilearn.glm.second_level.second_level.non_parametric_inference:129:Malformed table. Bottom/header table border does not match top border.", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-06T17:09:54Z", "updated_at": "2022-05-06T18:31:40Z", "closed_at": "2022-05-06T18:31:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This follows from the inclusion of #3181 \r\n@tsalo would you mind taking a look ? see \r\nhttps://app.circleci.com/pipelines/github/nilearn/nilearn/4385/workflows/5a1e8e0e-963f-49a0-9d03-b98c0d4b0709/jobs/9708\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3240/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3238", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3238/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3238/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3238/events", "html_url": "https://github.com/nilearn/nilearn/issues/3238", "id": 1227288983, "node_id": "I_kwDOABLbHM5JJvGX", "number": 3238, "title": "'list' object cannot be interpreted for cut_coords in plot_roi", "user": {"login": "garincle", "id": 33903508, "node_id": "MDQ6VXNlcjMzOTAzNTA4", "avatar_url": "https://avatars.githubusercontent.com/u/33903508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garincle", "html_url": "https://github.com/garincle", "followers_url": "https://api.github.com/users/garincle/followers", "following_url": "https://api.github.com/users/garincle/following{/other_user}", "gists_url": "https://api.github.com/users/garincle/gists{/gist_id}", "starred_url": "https://api.github.com/users/garincle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garincle/subscriptions", "organizations_url": "https://api.github.com/users/garincle/orgs", "repos_url": "https://api.github.com/users/garincle/repos", "events_url": "https://api.github.com/users/garincle/events{/privacy}", "received_events_url": "https://api.github.com/users/garincle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-05-06T00:03:09Z", "updated_at": "2022-05-11T14:46:33Z", "closed_at": "2022-05-11T14:46:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n Using the function \r\n\r\nplotting.plot_roi(atlas, view_type = \"contours\", bg_img=None, display_mode='z', cut_coords=[0, 20, 40, 60], annotate=False)\r\n\r\n### Actual behavior\r\nTypeError: 'list' object cannot be interpreted as an integer\r\n\r\nWhen using  plot_stat_map  cut_coords=[0, 20, 40, 60], it works.\r\n\r\n```python\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3236", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3236/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3236/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3236/events", "html_url": "https://github.com/nilearn/nilearn/issues/3236", "id": 1224161044, "node_id": "I_kwDOABLbHM5I9zcU", "number": 3236, "title": "Issues when using matplotlib version 3.5.1", "user": {"login": "thomasmeunierr", "id": 73098849, "node_id": "MDQ6VXNlcjczMDk4ODQ5", "avatar_url": "https://avatars.githubusercontent.com/u/73098849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasmeunierr", "html_url": "https://github.com/thomasmeunierr", "followers_url": "https://api.github.com/users/thomasmeunierr/followers", "following_url": "https://api.github.com/users/thomasmeunierr/following{/other_user}", "gists_url": "https://api.github.com/users/thomasmeunierr/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasmeunierr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasmeunierr/subscriptions", "organizations_url": "https://api.github.com/users/thomasmeunierr/orgs", "repos_url": "https://api.github.com/users/thomasmeunierr/repos", "events_url": "https://api.github.com/users/thomasmeunierr/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasmeunierr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymzayek", "id": 63292494, "node_id": "MDQ6VXNlcjYzMjkyNDk0", "avatar_url": "https://avatars.githubusercontent.com/u/63292494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymzayek", "html_url": "https://github.com/ymzayek", "followers_url": "https://api.github.com/users/ymzayek/followers", "following_url": "https://api.github.com/users/ymzayek/following{/other_user}", "gists_url": "https://api.github.com/users/ymzayek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymzayek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymzayek/subscriptions", "organizations_url": "https://api.github.com/users/ymzayek/orgs", "repos_url": "https://api.github.com/users/ymzayek/repos", "events_url": "https://api.github.com/users/ymzayek/events{/privacy}", "received_events_url": "https://api.github.com/users/ymzayek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2022-05-03T14:12:08Z", "updated_at": "2022-06-09T12:30:56Z", "closed_at": "2022-06-09T12:30:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nI upgraded matplotlib from 3.4.1 to 3.5.1, and when using the plotting.plot_surf_stat_map function it would not plot anything\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.0\r\n\r\n### Expected behavior\r\nIt should have plotted something like the figure i have attached to this issue\r\n\r\n### Actual behavior\r\nInstead, i got the following error : ValueError: Image size of 366x360019 pixels is too large. It must be less than 2^16 in each direction.\r\n\r\n<Figure size 338.4x288 with 2 Axes>\r\n\r\n### Steps and code to reproduce bug\r\nBasically, i am loading different meshes and figures in the freesurfer space (these images are results from a study, so i want to project them on the same space as the original figure), and i apply a new mask to it also, and then i want to project it on the brain\r\n```python\r\n\r\nfrom nilearn import plotting, image\r\nfrom nilearn.surface import surface\r\nimport numpy as np\r\nfrom nilearn.masking import intersect_masks\r\n\r\nnum=[1002]\r\nhemis = 'right'\r\nparam_est = 'C'\r\n\r\ndef indicator_func(x):\r\n    return (x > 0) * 1\r\n\r\npial_h = surface.load_surf_mesh(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/surf/rh.pial\"\r\n)\r\nh_inf = surface.load_surf_mesh(f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/surf/{hemis[0]}h.inflated\")\r\nwhite_h = surface.load_surf_mesh(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/surf/{hemis[0]}h.white\"\r\n)\r\nsegmentation = nib.freesurfer.io.read_annot(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/label/{hemis[0]}h.aparc.a2009s.annot\"\r\n)\r\nsulc_h = surface.load_surf_data(f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/surf/{hemis[0]}h.sulc\")\r\n\r\npath_sub_bis = f\"/data/parietal/store/work/mjallais/HCP_MGH/freesurfer_{num[0]}/mri/orig.mgz\"\r\nmean = nib.load(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/mgh_{num[0]}/SANDI_results/{param_est}_mean_SBI_6.nii.gz\"\r\n)\r\nvariance = nib.load(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/mgh_{num[0]}/SANDI_results/{param_est}_variance_SBI_6.nii.gz\"\r\n)\r\nmask = nib.load(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/mgh_{num[0]}/SANDI_results/{param_est}_mask_SBI_6.nii.gz\"\r\n)\r\nmean_masked = nib.load(\r\n    f\"/data/parietal/store/work/mjallais/HCP_MGH/mgh_{num[0]}/SANDI_results/{param_est}_mean_masked_SBI_6.nii.gz\"\r\n)\r\nimg_orig = nib.load(path_sub_bis)\r\n\r\nTorig = img_orig.header.get_vox2ras_tkr()\r\n\r\nimg_mean_resampled = image.resample_to_img(\r\n    mean, img_orig, interpolation=\"nearest\"\r\n)\r\n\r\nimg_mask_resampled = image.resample_to_img(\r\n    mask, img_orig, interpolation=\"nearest\"\r\n)\r\n\r\nmask_bis_data = indicator_func(mean.get_fdata() - 2 * variance.get_fdata())\r\nmask_bis = nib.spatialimages.SpatialImage(mask_bis_data, affine=mask.affine)\r\n\r\nimg_mask_bis_resampled = image.resample_to_img(\r\n    mask_bis, img_orig, interpolation=\"nearest\"\r\n)\r\n\r\nimg_fsaverage = nib.spatialimages.SpatialImage(\r\n    img_mean_resampled.get_fdata(), affine=Torig\r\n)\r\nimg_fsaverage_mask = nib.spatialimages.SpatialImage(\r\n    img_mask_resampled.get_fdata(), affine=Torig\r\n)\r\nimg_fsaverage_mask_bis = nib.spatialimages.SpatialImage(\r\n    img_mask_bis_resampled.get_fdata(), affine=Torig\r\n)\r\n\r\nunion_mask = intersect_masks(\r\n    [img_fsaverage_mask, img_fsaverage_mask_bis], threshold=0\r\n)\r\n\r\nparam_projection_masked = surface.vol_to_surf(\r\n    img_fsaverage,\r\n    pial_h,\r\n    interpolation=\"nearest\",\r\n    inner_mesh=white_h,\r\n    mask_img=union_mask,\r\n)\r\n\r\nplotting.plot_surf_stat_map(h_inf, \r\n                            param_projection_masked,\r\n                            title = 'test')\r\n```\r\n![Image coll\u00e9e \u00e0 2022-5-3 15-46](https://user-images.githubusercontent.com/73098849/166468959-445ead46-921a-4b7c-9efa-b1352d3c9bd8.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3236/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3217", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3217/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3217/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3217/events", "html_url": "https://github.com/nilearn/nilearn/issues/3217", "id": 1200086599, "node_id": "I_kwDOABLbHM5Hh95H", "number": 3217, "title": "Title not handled properly in the `plotting.plot_surf_stat_map` method", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-11T14:47:52Z", "updated_at": "2022-05-23T16:39:41Z", "closed_at": "2022-05-23T16:39:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nIn `plotting.plot_surf_stat_map`, passing a title and a given axis (e.g in a subplots case) to the method results in the title being displayed for the subplot only. When passing a title to the `plotting.plot_surf_stat_map` method, the title is being displayed as the title of the overall figure. This results in different subplots with no titles, and a general figure with the title of the last subplot.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: main\r\n\r\n### Expected behavior\r\n\r\none title per subplot\r\n\r\n![image](https://user-images.githubusercontent.com/12402673/162764534-5cf45085-638e-4111-8424-2a9e7d563b1e.png)\r\n\r\n### Actual behavior\r\n\r\nlast title is used as title of the overall figure\r\n\r\n![image](https://user-images.githubusercontent.com/12402673/162764621-403f3699-4eff-4e89-9c96-a9c067ef7123.png)\r\n\r\n### Solution\r\n\r\nThe solution is to replace the [figure.suptitle](https://github.com/nilearn/nilearn/blob/0eb1340212c6db5aac07ae31b3061bde5c9f7432/nilearn/plotting/surf_plotting.py#L522) by something similar to [plot_stat_map](https://github.com/nilearn/nilearn/blob/main/nilearn/plotting/img_plotting.py#L213) which is implemented [here](https://github.com/nilearn/nilearn/blob/main/nilearn/plotting/displays/_slicers.py#L162).\r\n\r\nI've generated the actual behavior figure by hard coding the following code in the figure.suptitle emplacement:\r\n\r\n```python\r\n    if title is not None:\r\n        # Actual version, leading to general title\r\n        # figure.suptitle(title, x=.5, y=.95, fontsize=title_font_size)\r\n        # New version leading to title for each subplot (with hardcoded values)\r\n        x = 0.01\r\n        y = 0.99\r\n        text = title\r\n        size=15\r\n        color=\"w\"\r\n        bgcolor=\"k\"\r\n        axes.text2D(x, y, text,\r\n                transform=axes.transAxes,\r\n                horizontalalignment='left',\r\n                verticalalignment='top',\r\n                size=size, color=color,\r\n                bbox=dict(boxstyle=\"square,pad=.3\",\r\n                          ec=bgcolor, fc=bgcolor, alpha=1),\r\n                zorder=1000)\r\n        axes.set_zorder(1000)\r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nimport matplotlib.pyplot as plt\r\nfrom nilearn import datasets, plotting, surface\r\n\r\n# Fetch mask and motor images\r\nmotor_img = datasets.fetch_neurovault_motor_task().images[0]\r\n\r\n# Compute a texture example\r\nfsaverage = datasets.fetch_surf_fsaverage()\r\ntexture = surface.vol_to_surf(motor_img, fsaverage.pial_right)\r\ntexture = texture.clip(0, texture.max())\r\n\r\nfig, axes = plt.subplots(nrows=1, ncols=2, subplot_kw={\"projection\": \"3d\"})\r\nplotting.plot_surf_stat_map(\r\n    fsaverage.infl_right,\r\n    texture,\r\n    hemi='right',\r\n    title='a subplot',\r\n    colorbar=True,\r\n    threshold=1.,\r\n    axes=axes[0],\r\n    bg_map=fsaverage.sulc_right,\r\n)\r\nplotting.plot_surf_stat_map(\r\n    fsaverage.infl_right,\r\n    texture,\r\n    hemi='right',\r\n    title='an other subplot',\r\n    colorbar=True,\r\n    threshold=1.,\r\n    axes=axes[1],\r\n    bg_map=fsaverage.sulc_right,\r\n)\r\nplotting.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3210", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3210/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3210/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3210/events", "html_url": "https://github.com/nilearn/nilearn/issues/3210", "id": 1192832889, "node_id": "I_kwDOABLbHM5HGS95", "number": 3210, "title": "Azure pipelines not passing anymore for Windows - py36", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-05T08:54:26Z", "updated_at": "2022-04-08T08:27:21Z", "closed_at": "2022-04-08T08:27:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "One of the Azure job is always failing. This is due to Azure probably dropping python 3.6 in the windows-latest image.\r\n\r\n- [job succeeding](https://dev.azure.com/Parietal/Nilearn/_build/results?buildId=4322&view=logs&j=403e95bb-0022-5212-d380-b6fee8a83fe7&t=1f14f87e-3d48-5c46-1d80-31902560c444): cache for py36 is working\r\n- [job failing](https://dev.azure.com/Parietal/Nilearn/_build/results?buildId=4341&view=logs&j=403e95bb-0022-5212-d380-b6fee8a83fe7&t=1f14f87e-3d48-5c46-1d80-31902560c444): py36 is not suitable anymore\r\n\r\nI guess as Nilearn 0.10.0 drops support for py36, we can just upgrade from py36 to py37 in the  `azure-pipelines.yml` file", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3210/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3210/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3205", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3205/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3205/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3205/events", "html_url": "https://github.com/nilearn/nilearn/issues/3205", "id": 1188701570, "node_id": "I_kwDOABLbHM5G2iWC", "number": 3205, "title": "plot_carpet's cmap option doesn't work", "user": {"login": "dangom", "id": 7881842, "node_id": "MDQ6VXNlcjc4ODE4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7881842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dangom", "html_url": "https://github.com/dangom", "followers_url": "https://api.github.com/users/dangom/followers", "following_url": "https://api.github.com/users/dangom/following{/other_user}", "gists_url": "https://api.github.com/users/dangom/gists{/gist_id}", "starred_url": "https://api.github.com/users/dangom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dangom/subscriptions", "organizations_url": "https://api.github.com/users/dangom/orgs", "repos_url": "https://api.github.com/users/dangom/repos", "events_url": "https://api.github.com/users/dangom/events{/privacy}", "received_events_url": "https://api.github.com/users/dangom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-31T20:28:08Z", "updated_at": "2022-06-16T08:51:39Z", "closed_at": "2022-06-16T08:51:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\ncarpet_plot does not respect cmap argument.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n\r\n0.9.1dev\r\n\r\n### Expected behavior\r\nPassing cmap changes color of plot.\r\n\r\n### Actual behavior\r\nPlot is gray regardless of cmap value.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nfrom nilearn import datasets, plotting\r\nimport tempfile\r\n\r\ndata_spm = datasets.fetch_spm_auditory(\r\n    data_dir=tempfile.mkdtemp(),\r\n    data_name=\"spm_auditory\",\r\n    subject_id=\"sub001\",\r\n    verbose=1,\r\n)\r\ndata = image.load_img(data_spm[\"func\"])\r\nplotting.plot_carpet(data, cmap=\"viridis\")\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3200", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3200/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3200/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3200/events", "html_url": "https://github.com/nilearn/nilearn/issues/3200", "id": 1185426801, "node_id": "I_kwDOABLbHM5GqC1x", "number": 3200, "title": "get_cluster_table returns inconsistent result depending on `cluster_threshold`", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-29T21:20:24Z", "updated_at": "2022-04-13T10:36:09Z", "closed_at": "2022-04-13T10:36:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.0\r\n\r\n### Expected behavior\r\nThe example below should return identical information for the large clusters (> 10 voxels)\r\n\r\n### Actual behavior\r\nI does not\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```\r\nfrom nilearn import datasets\r\nmotor_images = datasets.fetch_neurovault_motor_task()\r\nstat_img = motor_images.images[0]\r\nfrom nilearn.reporting import get_clusters_table\r\nthreshold = 3.0\r\ntable1 = get_clusters_table(stat_img, threshold, cluster_threshold=10)\r\ntable2 = get_clusters_table(stat_img, threshold, cluster_threshold=0)\r\nprint(table1)\r\nprint(table2)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3187", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3187/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3187/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3187/events", "html_url": "https://github.com/nilearn/nilearn/issues/3187", "id": 1178305939, "node_id": "I_kwDOABLbHM5GO4WT", "number": 3187, "title": "Passing `axes` to `plotting.plot_surf_stat_map` raises `AxesSubplot object has no attribute view_init`", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-23T15:42:04Z", "updated_at": "2022-04-11T19:54:45Z", "closed_at": "2022-04-11T14:38:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nAs other plotting methods such as `plotting.plot_stat_map` or `plotting.plot_glass_brain`, we would expect that passing a matplotlib axe coming from `plt.subplots` to `plotting.plot_surf_stat_map` would be possible. Unfortunately, this raises the error `AttributeError: 'AxesSubplot' object has no attribute 'view_init'`\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: main  (current commit: c327239cd673aaa6667953acf274439b479f5b74)\r\nMatplotlib version: 3.5.1\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nimport matplotlib.pyplot as plt\r\nfrom nilearn import datasets, plotting, surface\r\n\r\n# Fetch mask and motor images\r\nmotor_img = datasets.fetch_neurovault_motor_task().images[0]\r\n\r\n# Compute a texture example\r\nfsaverage = datasets.fetch_surf_fsaverage()\r\ntexture = surface.vol_to_surf(motor_img, fsaverage.pial_right)\r\ntexture = texture.clip(0, texture.max())\r\n\r\nnrows = 1\r\nfig, axes = plt.subplots(nrows=nrows, ncols=1, figsize=(10, 3 * nrows))\r\nplotting.plot_surf_stat_map(\r\n    fsaverage.infl_right,\r\n    texture,\r\n    hemi='right',\r\n    title='plot_surf_stat_map - motor surface',\r\n    colorbar=True,\r\n    threshold=1.,\r\n    axes=axes,\r\n    bg_map=fsaverage.sulc_right,\r\n)\r\nplotting.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3187/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3183", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3183/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3183/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3183/events", "html_url": "https://github.com/nilearn/nilearn/issues/3183", "id": 1174814578, "node_id": "I_kwDOABLbHM5GBj9y", "number": 3183, "title": "Colorbar size not scaled with figsize with newest MPL", "user": {"login": "emdupre", "id": 15017191, "node_id": "MDQ6VXNlcjE1MDE3MTkx", "avatar_url": "https://avatars.githubusercontent.com/u/15017191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emdupre", "html_url": "https://github.com/emdupre", "followers_url": "https://api.github.com/users/emdupre/followers", "following_url": "https://api.github.com/users/emdupre/following{/other_user}", "gists_url": "https://api.github.com/users/emdupre/gists{/gist_id}", "starred_url": "https://api.github.com/users/emdupre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emdupre/subscriptions", "organizations_url": "https://api.github.com/users/emdupre/orgs", "repos_url": "https://api.github.com/users/emdupre/repos", "events_url": "https://api.github.com/users/emdupre/events{/privacy}", "received_events_url": "https://api.github.com/users/emdupre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/22", "html_url": "https://github.com/nilearn/nilearn/milestone/22", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/22/labels", "id": 7749748, "node_id": "MI_kwDOABLbHM4AdkB0", "number": 22, "title": "0.9.1", "description": "", "creator": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2022-03-09T08:15:26Z", "updated_at": "2023-04-27T08:27:47Z", "due_on": null, "closed_at": "2023-04-27T08:27:47Z"}, "comments": 7, "created_at": "2022-03-21T02:45:17Z", "updated_at": "2022-03-29T14:28:08Z", "closed_at": "2022-03-29T14:28:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\n[This recent NeuroStars post ](https://neurostars.org/t/a-strange-bug-with-a-huge-colorbar/21903) suggests that we are not properly supporting colorbars with the newest matplotlib release (3.5.1). Please see the post for an example rendering.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.9.0\r\n\r\n### Expected behavior\r\nThe colorbar size would be appropriately linked to the figsize.\r\n\r\n### Actual behavior\r\nThe colorbar size does not scale with the figure.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nplotting.plot_stat_map(img, cut_coords=[20, -50, -8], colorbar = True, draw_cross = False, cmap = \u2018cyan_copper\u2019, vmax = 7)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3183/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3180", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3180/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3180/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3180/events", "html_url": "https://github.com/nilearn/nilearn/issues/3180", "id": 1172842264, "node_id": "I_kwDOABLbHM5F6CcY", "number": 3180, "title": "permuted_ols only returns h0_fmax for first regressor", "user": {"login": "tsalo", "id": 8228902, "node_id": "MDQ6VXNlcjgyMjg5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8228902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsalo", "html_url": "https://github.com/tsalo", "followers_url": "https://api.github.com/users/tsalo/followers", "following_url": "https://api.github.com/users/tsalo/following{/other_user}", "gists_url": "https://api.github.com/users/tsalo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsalo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsalo/subscriptions", "organizations_url": "https://api.github.com/users/tsalo/orgs", "repos_url": "https://api.github.com/users/tsalo/repos", "events_url": "https://api.github.com/users/tsalo/events{/privacy}", "received_events_url": "https://api.github.com/users/tsalo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-17T19:47:03Z", "updated_at": "2022-03-28T07:45:32Z", "closed_at": "2022-03-28T07:45:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nWhen there is more than one regressor in `tested_vars`, `permuted_ols` returns only the null distribution of maximum t-statistics for the first regressor.\r\n\r\nHere is the relevant code:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/e7804ebe858349781674c0d2b5c78e27afb52fa1/nilearn/mass_univariate/permuted_least_squares.py#L512\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: `main` as of e7804ebe858349781674c0d2b5c78e27afb52fa1.\r\n\r\n### Expected behavior\r\n\r\nWhen `n_regressors` is >1, I would expect `h0_fmax` to have that number of rows.\r\n\r\n### Actual behavior\r\n\r\n`h0_fmax` is a 1D array, with one element per \r\n\r\n### Steps and code to reproduce bug\r\n\r\nHere is some code, adapted from one of the permuted_ols tests, that should reproduce the bug.\r\n\r\n```python\r\nfrom sklearn.utils import check_random_state\r\nfrom nilearn.mass_univariate import permuted_ols\r\n\r\nrandom_state = 0\r\nrng = check_random_state(random_state)\r\n\r\n# design parameters\r\nn_samples = 50\r\nn_descriptors = 10\r\nn_regressors = 2\r\nn_covars = 2\r\nn_perm = 10\r\n\r\n# create design\r\ntarget_vars = rng.randn(n_samples, n_descriptors)\r\ntested_vars = rng.randn(n_samples, n_regressors)\r\nconfounding_vars = rng.randn(n_samples, n_covars)\r\n\r\nneg_log10_pvals, own_scores, h0_fmax = permuted_ols(\r\n    tested_vars,\r\n    target_vars,\r\n    confounding_vars,\r\n    model_intercept=False,\r\n    n_perm=n_perm,\r\n    random_state=random_state,\r\n)\r\nassert own_scores.shape == (n_regressors, n_descriptors)\r\nassert neg_log10_pvals.shape == (n_regressors, n_descriptors)\r\nassert h0_fmax.shape == (n_regressors, n_perm)\r\n# AssertionError, assert (10,) == (2, 10)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3168", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3168/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3168/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3168/events", "html_url": "https://github.com/nilearn/nilearn/issues/3168", "id": 1144021673, "node_id": "I_kwDOABLbHM5EMGKp", "number": 3168, "title": "Unexpected image resampling when nifti doesn't have an sform", "user": {"login": "dangom", "id": 7881842, "node_id": "MDQ6VXNlcjc4ODE4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7881842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dangom", "html_url": "https://github.com/dangom", "followers_url": "https://api.github.com/users/dangom/followers", "following_url": "https://api.github.com/users/dangom/following{/other_user}", "gists_url": "https://api.github.com/users/dangom/gists{/gist_id}", "starred_url": "https://api.github.com/users/dangom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dangom/subscriptions", "organizations_url": "https://api.github.com/users/dangom/orgs", "repos_url": "https://api.github.com/users/dangom/repos", "events_url": "https://api.github.com/users/dangom/events{/privacy}", "received_events_url": "https://api.github.com/users/dangom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-02-19T00:30:40Z", "updated_at": "2022-06-30T08:14:38Z", "closed_at": "2022-06-30T08:14:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nThe bug pertains the transformation of niftis that do not have an sform (all 0s). This happens when, for example, using antsApplyTransforms ([from ANTs versions older than Feb. 2021](https://github.com/ANTsX/ANTs/wiki/How-does-ANTs-handle-qform-and-sform-in-NIFTI-1-images%3F#itk-nifti-io-for-ants-230-4)) to register images, where output files do not contain an sform. \r\nUsing  `masker.fit_transform(img)` on such a Nifti will trigger a silent resampling if `mask_img` and `img` sforms differ, even if the affines from `mask_img` and `img` are identical (according to mask_img.affine and  img.affine).\r\n\r\nI take this is not a nilearn bug per se, since it is ultimately responsability of the user to ensure their niftis make sense. However, given the vast array of tools people use to generate niftis, ANTs being a common example, I take the issue could lead to many silent bugs in people's analysis.\r\n\r\nSo what is there to do since nothing is really broken?\r\n\r\nShould a resampling always be verbose? Currently int->float casting is verbose, and that is arguably a more benign issue than an unexpected image resampling.\r\nAlso, all 0s sforms are always suspect. Maybe a check that qform and sform are the same would be an extra safety check? If not fall back to qform or warn user with a link to documentation and proposed workarounds?\r\n\r\nCurrent workarounds:\r\n\r\noutside of python: `mri_convert data.nii.gz data.nii.gz`\r\ninside python: `fixed = image.new_img_like(mask_img, nib.load(img).get_fdata(), mask_img.affine, copy_header=True)`\r\n\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\nlatest from git\r\n\r\n### Expected behavior\r\nnot sure\r\n\r\n### Actual behavior\r\nunexpected resample\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nfrom nilearn import datasets, image, input_data\r\n\r\nyeo = datasets.fetch_atlas_yeo_2011()\r\nmask_img = image.binarize_img(yeo[\"thin_7\"])\r\nimg = image.load_img(yeo[\"thin_17\"])\r\n\r\nmasker = input_data.NiftiMasker(mask_img=mask_img)\r\ncorrect = masker.fit_transform(img)\r\n\r\n# if mask_img is missing sform -> silent resampling\r\nmask_img.set_sform(None)\r\nmasker = input_data.NiftiMasker(mask_img=mask_img)\r\nwrong = masker.fit_transform(img)\r\n\r\n# if img is missing sform -> silent resampling\r\nmask_img = image.binarize_img(yeo[\"thin_7\"])\r\nmasker = input_data.NiftiMasker(mask_img=mask_img)\r\nimg.set_sform(None)\r\nalso_wrong = masker.fit_transform(img)\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3168/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3160", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3160/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3160/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3160/events", "html_url": "https://github.com/nilearn/nilearn/issues/3160", "id": 1127832251, "node_id": "I_kwDOABLbHM5DOVq7", "number": 3160, "title": "`fetch_abide_pcp` returns empty results", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/22", "html_url": "https://github.com/nilearn/nilearn/milestone/22", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/22/labels", "id": 7749748, "node_id": "MI_kwDOABLbHM4AdkB0", "number": 22, "title": "0.9.1", "description": "", "creator": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2022-03-09T08:15:26Z", "updated_at": "2023-04-27T08:27:47Z", "due_on": null, "closed_at": "2023-04-27T08:27:47Z"}, "comments": 3, "created_at": "2022-02-08T22:37:30Z", "updated_at": "2022-03-16T22:43:25Z", "closed_at": "2022-03-16T22:43:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "since #2829 `fetch_abide_pcp` returns empty results. This is due to the fact that the filters applied to phenotypic data expect this array to contain `bytes`: https://github.com/nilearn/nilearn/blob/1ebf6b70d79d88e6c3de6d9799c79309c6c99277/nilearn/datasets/func.py#L974  as this is what `np.recfromcsv` returns but it is now `str` since `pd.read_csv` is now used: https://github.com/nilearn/nilearn/blob/1ebf6b70d79d88e6c3de6d9799c79309c6c99277/nilearn/datasets/func.py#L1000 \r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3160/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3160/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3156", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3156/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3156/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3156/events", "html_url": "https://github.com/nilearn/nilearn/issues/3156", "id": 1122071126, "node_id": "I_kwDOABLbHM5C4XJW", "number": 3156, "title": "Holes in the plot when using plotting.view_img", "user": {"login": "friedrichkrohn", "id": 98896216, "node_id": "U_kgDOBeUJWA", "avatar_url": "https://avatars.githubusercontent.com/u/98896216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/friedrichkrohn", "html_url": "https://github.com/friedrichkrohn", "followers_url": "https://api.github.com/users/friedrichkrohn/followers", "following_url": "https://api.github.com/users/friedrichkrohn/following{/other_user}", "gists_url": "https://api.github.com/users/friedrichkrohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/friedrichkrohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/friedrichkrohn/subscriptions", "organizations_url": "https://api.github.com/users/friedrichkrohn/orgs", "repos_url": "https://api.github.com/users/friedrichkrohn/repos", "events_url": "https://api.github.com/users/friedrichkrohn/events{/privacy}", "received_events_url": "https://api.github.com/users/friedrichkrohn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-02T15:32:12Z", "updated_at": "2022-02-03T12:31:59Z", "closed_at": "2022-02-03T12:31:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nWhen executing 'plot.view_img' and provide a background image as well as a statistical map, there are holes in the background image and the entire brainstem is cropped.\r\n\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: latest I think? downloaded yesterday from Github using pip\r\n\r\n### Expected behavior\r\nStatistical map overlaid over a background image and you can interactively go through the image using your cursor.\r\n\r\n### Actual behavior\r\nThe statistical map is plotted correctly but there are weird holes n the background image I used.\r\n\r\n### Steps and code to reproduce bug\r\nReproduced in a Jupyter notebook and in a Python 3.9 Pycharm environment. I am using Anaconda. \r\n```\r\n%matplotlib inline\r\nfrom nilearn import plotting, datasets\r\nbg='~/Downloads/DELCODE1000_ANTs_Template_01_2020.nii.gz'\r\nplotting.view_img('~/Downloads/nifti/statistical_mask.nii',bg_img=bg,black_bg=0,vmin=0)\r\n\r\n```\r\n\r\nI would be happy to provide sample images via email if necessary.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3155", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3155/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3155/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3155/events", "html_url": "https://github.com/nilearn/nilearn/issues/3155", "id": 1121660097, "node_id": "I_kwDOABLbHM5C2yzB", "number": 3155, "title": "plot_carpet handles TR information in an unclear way", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}, {"id": 126854827, "node_id": "MDU6TGFiZWwxMjY4NTQ4Mjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/API", "name": "API", "color": "fef2c0", "default": false, "description": null}, {"id": 2969440310, "node_id": "MDU6TGFiZWwyOTY5NDQwMzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20low", "name": "impact: low", "color": "75eae6", "default": false, "description": "Estimated low impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-02T08:54:18Z", "updated_at": "2022-02-15T06:59:06Z", "closed_at": "2022-02-15T06:59:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nCurrently, the plot_carpet function gets the reeptition time (tr) information as follows:\r\n```tr = img.header.get_zooms()[-1]```\r\nBut  depending on the way the image was created, this may lead to wrong values, e.g. it defaults to 1.\r\nMoreover, this is done silently, and the user cannot supply a TR value.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n0.9\r\n\r\n### Expected behavior\r\nWe  need 2 things:\r\n* document current behavior\r\n* allow user-supplied tr by adding a `tr` argument\r\n\r\n### Actual behavior\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```\r\nfrom nilearn.datasets import func\r\ndata = func.fetch_localizer_first_level()\r\nfmri_img = data.epi_img\r\nfrom nilearn.plotting import plot_carpet\r\ndisplay = plot_carpet(fmri_img)\r\ndisplay.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3155/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3134", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3134/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3134/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3134/events", "html_url": "https://github.com/nilearn/nilearn/issues/3134", "id": 1107059116, "node_id": "I_kwDOABLbHM5B_GGs", "number": 3134, "title": "FirstLevelModel `signal_scaling` attribute is different type from same-named parameter", "user": {"login": "tsalo", "id": 8228902, "node_id": "MDQ6VXNlcjgyMjg5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8228902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsalo", "html_url": "https://github.com/tsalo", "followers_url": "https://api.github.com/users/tsalo/followers", "following_url": "https://api.github.com/users/tsalo/following{/other_user}", "gists_url": "https://api.github.com/users/tsalo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsalo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsalo/subscriptions", "organizations_url": "https://api.github.com/users/tsalo/orgs", "repos_url": "https://api.github.com/users/tsalo/repos", "events_url": "https://api.github.com/users/tsalo/events{/privacy}", "received_events_url": "https://api.github.com/users/tsalo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-18T15:41:47Z", "updated_at": "2022-01-24T15:08:47Z", "closed_at": "2022-01-24T15:08:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe `FirstLevelModel`'s `signal_scaling` parameter is converted to a boolean in the `signal_scaling` _attribute_ and retained as-is in the `scaling_axis` attribute, which causes problems if you want to use `FirstLevelModel.get_params()` without updating the dictionary that's returned.\r\n\r\nThis stems from https://github.com/nilearn/nilearn/pull/3127#discussion_r783496751\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: ~0.9.0 (current `main` at e0ec327f3ded6d730a6a60f8043dc8b6f4ee03c1.\r\n\r\n### Expected behavior\r\n\r\nA FirstLevelModel fitted with the parameters from an existing FirstLevelModel (i.e., using `model.get_params()`) would work in the same manner as the original model.\r\n\r\n### Actual behavior\r\n\r\n```Python\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-6-65cf92bf9216> in <module>\r\n     16 # Fit the first GLM\r\n     17 fmri_glm = fmri_glm.fit(fmri_img, design_matrices=design_matrices)\r\n---> 18 test_glm = test_glm.fit(fmri_img, design_matrices=design_matrices)\r\n\r\n~/Documents/tsalo/nilearn/nilearn/glm/first_level/first_level.py in fit(self, run_imgs, events, confounds, design_matrices, bins)\r\n    568 \r\n    569             if self.signal_scaling:\r\n--> 570                 Y, _ = mean_scaling(Y, self.scaling_axis)\r\n    571             if self.memory:\r\n    572                 mem_glm = self.memory.cache(run_glm, ignore=['n_jobs'])\r\n\r\n~/Documents/tsalo/nilearn/nilearn/glm/first_level/first_level.py in mean_scaling(Y, axis)\r\n     59 \r\n     60     \"\"\"\r\n---> 61     mean = Y.mean(axis=axis)\r\n     62     if (mean == 0).any():\r\n     63         warn('Mean values of 0 observed.'\r\n\r\n/opt/miniconda3/lib/python3.8/site-packages/numpy/core/_methods.py in _mean(a, axis, dtype, out, keepdims, where)\r\n    177             is_float16_result = True\r\n    178 \r\n--> 179     ret = umr_sum(arr, axis, dtype, out, keepdims, where=where)\r\n    180     if isinstance(ret, mu.ndarray):\r\n    181         ret = um.true_divide(\r\n\r\nTypeError: an integer is required\r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\n# Adapted from https://nilearn.github.io/stable/auto_examples/04_glm_first_level/plot_fiac_analysis.html#sphx-glr-auto-examples-04-glm-first-level-plot-fiac-analysis-py\r\nimport pandas as pd\r\nimport numpy as np\r\nfrom nilearn.datasets import func\r\nfrom nilearn.glm.first_level import FirstLevelModel\r\n\r\ndata = func.fetch_fiac_first_level()\r\nfmri_img = [data['func1'], data['func2']]\r\ndesign_files = [data['design_matrix1'], data['design_matrix2']]\r\ndesign_matrices = [pd.DataFrame(np.load(df)['X']) for df in design_files]\r\nfmri_glm = FirstLevelModel(mask_img=data['mask'], signal_scaling=0, minimize_memory=True)\r\n\r\n# Collect the parameters and use them to create a new GLM\r\nglm_parameters = fmri_glm.get_params()\r\n# Note that glm_parameters[\"signal_scaling\"] is True, \r\n# even though the parameter we used was the axis (0)\r\ntest_glm = FirstLevelModel(**glm_parameters)\r\n\r\n# Fit the first GLM\r\nfmri_glm = fmri_glm.fit(fmri_img, design_matrices=design_matrices)\r\ntest_glm = test_glm.fit(fmri_img, design_matrices=design_matrices)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3134/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3123", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3123/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3123/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3123/events", "html_url": "https://github.com/nilearn/nilearn/issues/3123", "id": 1098647004, "node_id": "I_kwDOABLbHM5BfAXc", "number": 3123, "title": "Using `plotting.plot_img_on_surf` with the `threshold` option seems to produce a slight asymmetry in colorbar", "user": {"login": "shawnrhoads", "id": 24925845, "node_id": "MDQ6VXNlcjI0OTI1ODQ1", "avatar_url": "https://avatars.githubusercontent.com/u/24925845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shawnrhoads", "html_url": "https://github.com/shawnrhoads", "followers_url": "https://api.github.com/users/shawnrhoads/followers", "following_url": "https://api.github.com/users/shawnrhoads/following{/other_user}", "gists_url": "https://api.github.com/users/shawnrhoads/gists{/gist_id}", "starred_url": "https://api.github.com/users/shawnrhoads/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shawnrhoads/subscriptions", "organizations_url": "https://api.github.com/users/shawnrhoads/orgs", "repos_url": "https://api.github.com/users/shawnrhoads/repos", "events_url": "https://api.github.com/users/shawnrhoads/events{/privacy}", "received_events_url": "https://api.github.com/users/shawnrhoads/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}, {"id": 2969440310, "node_id": "MDU6TGFiZWwyOTY5NDQwMzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20low", "name": "impact: low", "color": "75eae6", "default": false, "description": "Estimated low impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}, {"id": 2969444582, "node_id": "MDU6TGFiZWwyOTY5NDQ0NTgy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20low", "name": "priority: low", "color": "c5def5", "default": false, "description": "Not urgent"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-11T04:44:31Z", "updated_at": "2023-01-26T14:58:14Z", "closed_at": "2023-01-26T14:58:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using `plotting.plot_img_on_surf` with the `threshold` option seems to produce a slight asymmetry in colorbar.\r\n\r\nThis is especially noticeable for small thresholds. For example, the following code (with `threshold=.03`) produces an output with a colorbar that doesn't seem centered around zero (middle tick mark is positioned more to the right).\r\n\r\n```python\r\nimport nibabel as nib\r\nfrom nilearn import plotting\r\n\r\nstat_img = nib.load('example.nii.gz')\r\nplotting.plot_img_on_surf(stat_img,\r\n                          views=['lateral', 'medial'],\r\n                          hemispheres=['left', 'right'],\r\n                          threshold=.03,\r\n                          cmap='blue_orange',\r\n                          colorbar=True)\r\n```\r\n![example](https://user-images.githubusercontent.com/24925845/148875680-ad63b3ad-be68-4f6e-ac1f-7d106502eb13.jpg)\r\n\r\nAny suggestions on how to remedy this in the short-term? Seems like it could be a font/line width issue (instead of the bar actually being asymmetric). For example, is there an easy to way to remove the middle tick mark indicating zero?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3123/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3120", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3120/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3120/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3120/events", "html_url": "https://github.com/nilearn/nilearn/issues/3120", "id": 1096634799, "node_id": "I_kwDOABLbHM5BXVGv", "number": 3120, "title": "`view_img` always masks `bg_img` with MNI mask", "user": {"login": "dbrennan44", "id": 39420777, "node_id": "MDQ6VXNlcjM5NDIwNzc3", "avatar_url": "https://avatars.githubusercontent.com/u/39420777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbrennan44", "html_url": "https://github.com/dbrennan44", "followers_url": "https://api.github.com/users/dbrennan44/followers", "following_url": "https://api.github.com/users/dbrennan44/following{/other_user}", "gists_url": "https://api.github.com/users/dbrennan44/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbrennan44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbrennan44/subscriptions", "organizations_url": "https://api.github.com/users/dbrennan44/orgs", "repos_url": "https://api.github.com/users/dbrennan44/repos", "events_url": "https://api.github.com/users/dbrennan44/events{/privacy}", "received_events_url": "https://api.github.com/users/dbrennan44/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-01-07T20:11:09Z", "updated_at": "2022-08-01T14:34:55Z", "closed_at": "2022-08-01T14:34:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "when plotting with view_img, it appears the bg image is being \"masked\" by a different brain (perhaps MNI?)\r\n![image](https://user-images.githubusercontent.com/39420777/148601175-f7c93605-ff76-4cb2-813a-1a1cded3e611.png)\r\n\r\nproblem persists even when using same image as bg_image and plotted img", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3108", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3108/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3108/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3108/events", "html_url": "https://github.com/nilearn/nilearn/issues/3108", "id": 1085034895, "node_id": "I_kwDOABLbHM5ArFGP", "number": 3108, "title": "distutils.version.LooseVersion is deprecated", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-20T17:25:01Z", "updated_at": "2022-01-06T09:46:38Z", "closed_at": "2022-01-06T09:46:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "distutils is deprecated in python 3.10 (the deprecation warning for `LooseVersion` is showing up in our python 3.10 CIs). Over at MNE-Python we use pkg_resources now instead: \r\n\r\nhttps://github.com/mne-tools/mne-python/blob/433a4e19bb15b061c17a3fee3e9f8e8f6d8ea229/mne/fixes.py#L50-L55\r\n\r\nStatsmodels recently addressed it with `packaging.Version` and `packaging.parse`, which seems just as good: https://github.com/statsmodels/statsmodels/pull/7946/files\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3104", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3104/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3104/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3104/events", "html_url": "https://github.com/nilearn/nilearn/issues/3104", "id": 1083152677, "node_id": "I_kwDOABLbHM5Aj5kl", "number": 3104, "title": "`_get_ticks_matplotlib()` is incorrect for integers with a small range", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-17T11:13:45Z", "updated_at": "2022-11-07T10:37:15Z", "closed_at": "2022-11-07T10:37:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/nilearn/nilearn/blob/6aaf8f94433dfaf2967d69c64c0f688d7e1c812d/nilearn/plotting/surf_plotting.py#L341-L350\r\n\r\nSo a \"small range\" appears to be defined as less than 5.\r\n\r\nFor larger ranges, we always get 5 ticks. For example:\r\n```python\r\n>>> ticks = _get_ticks_matplotlib(2.01, 7.02, \"%i\")\r\n>>> \r\n>>> ticks\r\narray([2.01  , 3.2625, 4.515 , 5.7675, 7.02  ])\r\n>>> \r\n>>> len(ticks)\r\n5\r\n>>> \r\n```\r\n\r\nFor smaller ranges, we may get **5 ticks or more** (instead of **less** as documented):\r\n```python\r\n>>> ticks = _get_ticks_matplotlib(2.01, 6.99, \"%i\")\r\n>>> \r\n>>> ticks\r\narray([2.01, 3.01, 4.01, 5.01, 6.01, 7.01])\r\n>>> \r\n>>> len(ticks)\r\n6\r\n>>> \r\n>>> \r\n>>> ticks = _get_ticks_matplotlib(2.01, 5.02, \"%i\")\r\n>>> \r\n>>> ticks\r\narray([2.01, 3.01, 4.01, 5.01, 6.01])\r\n>>> \r\n>>> len(ticks)\r\n5\r\n>>> \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3104/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3088", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3088/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3088/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3088/events", "html_url": "https://github.com/nilearn/nilearn/issues/3088", "id": 1076759747, "node_id": "I_kwDOABLbHM5ALgzD", "number": 3088, "title": "`fetch_atlas_harvard_oxford` returns same object for `maps` and `filename`", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}, {"id": 2969440310, "node_id": "MDU6TGFiZWwyOTY5NDQwMzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20low", "name": "impact: low", "color": "75eae6", "default": false, "description": "Estimated low impact task"}, {"id": 2969444582, "node_id": "MDU6TGFiZWwyOTY5NDQ0NTgy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20low", "name": "priority: low", "color": "c5def5", "default": false, "description": "Not urgent"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-10T11:45:00Z", "updated_at": "2022-03-21T08:43:41Z", "closed_at": "2022-03-21T08:43:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is also true for `fetch_atlas_juelich` since they both share the same internal logic.\r\n`maps` should indeed be the `Nifti1Image`, but we should either remove `filename` or change it to be the path to the `Nifti1Image`.\r\n\r\nAlso, this is the only fetcher which returns a `Bunch` object without a `description`.\r\n\r\n```python\r\nfrom nilearn import datasets\r\nb = datasets.fetch_atlas_harvard_oxford(\"cort-maxprob-thr0-1mm\")\r\nassert b.maps == b.filename\r\nb.filename\r\n```\r\n```\r\n<nibabel.nifti1.Nifti1Image at 0x7f1ff37a4280>\r\n```\r\n```python\r\nb.maps\r\n```\r\n```\r\n<nibabel.nifti1.Nifti1Image at 0x7f1ff37a4280>\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3087", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3087/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3087/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3087/events", "html_url": "https://github.com/nilearn/nilearn/issues/3087", "id": 1076576430, "node_id": "I_kwDOABLbHM5AK0Cu", "number": 3087, "title": "`fetch_atlas_aal` download error with `SPM5` and `SPM8`", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}, {"id": 2969440310, "node_id": "MDU6TGFiZWwyOTY5NDQwMzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20low", "name": "impact: low", "color": "75eae6", "default": false, "description": "Estimated low impact task"}, {"id": 2969445137, "node_id": "MDU6TGFiZWwyOTY5NDQ1MTM3", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20medium", "name": "priority: medium", "color": "FBCA04", "default": false, "description": "Estimated medium priority task"}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-12-10T08:37:08Z", "updated_at": "2022-04-12T15:52:07Z", "closed_at": "2022-04-12T15:52:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With Nilearn 0.8.2.dev.\r\nI haven't investigated further than trying all possible versions with cleaned data cache, so I might have missed something.\r\nIt seems to work for `SPM12` (the default), but fails on my machine with all other versions.\r\n\r\nCode to reproduce:\r\n\r\n```python\r\nfrom nilearn import datasets\r\nb = datasets.fetch_atlas_aal(version='SPM5')  # 'SPM8' gives same error\r\n```\r\n```\r\nOSError                                   Traceback (most recent call last)\r\n<ipython-input-97-6fd2a3e7006b> in <module>\r\n----> 1 b = datasets.fetch_atlas_aal(version='SPM5')\r\n\r\n~/GitRepos/nilearn-fork/nilearn/datasets/atlas.py in fetch_atlas_aal(version, data_dir, url, resume, verbose)\r\n    938     see :footcite:`AAL_atlas`,\r\n    939     and :footcite:`TZOURIOMAZOYER2002273`.\r\n--> 940 \r\n    941     Parameters\r\n    942     ----------\r\n\r\n~/GitRepos/nilearn-fork/nilearn/datasets/utils.py in _fetch_files(data_dir, files, resume, verbose, session)\r\n    706         with requests.Session() as session:\r\n    707             session.mount(\"ftp:\", _NaiveFTPAdapter())\r\n--> 708             return _fetch_files(\r\n    709                 data_dir, files, resume=resume,\r\n    710                 verbose=verbose, session=session)\r\n\r\n~/GitRepos/nilearn-fork/nilearn/datasets/utils.py in _fetch_files(data_dir, files, resume, verbose, session)\r\n    784             if os.path.exists(temp_dir):\r\n    785                 shutil.rmtree(temp_dir)\r\n--> 786             raise IOError('Fetching aborted: ' + abort)\r\n    787         files_.append(target_file)\r\n    788     # If needed, move files from temps directory to final directory.\r\n\r\nOSError: Fetching aborted: Not a gzipped file (b'\\x1f\\x9d')\r\n> /home/nicolas/GitRepos/nilearn-fork/nilearn/datasets/utils.py(786)_fetch_files()\r\n    784             if os.path.exists(temp_dir):\r\n    785                 shutil.rmtree(temp_dir)\r\n--> 786             raise IOError('Fetching aborted: ' + abort)\r\n    787         files_.append(target_file)\r\n    788     # If needed, move files from temps directory to final directory.\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3076", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3076/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3076/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3076/events", "html_url": "https://github.com/nilearn/nilearn/issues/3076", "id": 1070305080, "node_id": "I_kwDOABLbHM4_y484", "number": 3076, "title": "Bug in the function 'find_parcellation_cut_coords'", "user": {"login": "NeuroVR-Song", "id": 71465920, "node_id": "MDQ6VXNlcjcxNDY1OTIw", "avatar_url": "https://avatars.githubusercontent.com/u/71465920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NeuroVR-Song", "html_url": "https://github.com/NeuroVR-Song", "followers_url": "https://api.github.com/users/NeuroVR-Song/followers", "following_url": "https://api.github.com/users/NeuroVR-Song/following{/other_user}", "gists_url": "https://api.github.com/users/NeuroVR-Song/gists{/gist_id}", "starred_url": "https://api.github.com/users/NeuroVR-Song/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NeuroVR-Song/subscriptions", "organizations_url": "https://api.github.com/users/NeuroVR-Song/orgs", "repos_url": "https://api.github.com/users/NeuroVR-Song/repos", "events_url": "https://api.github.com/users/NeuroVR-Song/events{/privacy}", "received_events_url": "https://api.github.com/users/NeuroVR-Song/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-03T07:39:13Z", "updated_at": "2021-12-13T16:04:01Z", "closed_at": "2021-12-13T16:04:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nWhen I extract coordinates for ROIs(labels), the 'find_parcellation_cut_coords' function returns the coordinates with the randomized order. That is, the order of the extracted coordinates is different from it of the input labels.\r\nI think that's because of the 'set' function in below: https://github.com/nilearn/nilearn/blob/1607b52458c28953a87bbe6f42448b7b4e30a72f/nilearn/plotting/find_cuts.py#L429\r\nIs this done on purpose?\r\nOtherwise, I think it would be better to sort the order before returning the results.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\n### Expected behavior\r\n![image](https://user-images.githubusercontent.com/71465920/144563770-83c459f6-cac0-4873-a0da-85e0ee26addd.png)\r\n\r\n\r\n### Actual behavior\r\n![image](https://user-images.githubusercontent.com/71465920/144563147-ad7814f3-3e8f-4f5f-8f2e-87b77ecec618.png)\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3076/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3069", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3069/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3069/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3069/events", "html_url": "https://github.com/nilearn/nilearn/issues/3069", "id": 1059543693, "node_id": "I_kwDOABLbHM4_J1qN", "number": 3069, "title": "Error using harvard oxford subcortical atlas in NiftiLabelsMasker", "user": {"login": "walkerped", "id": 63321511, "node_id": "MDQ6VXNlcjYzMzIxNTEx", "avatar_url": "https://avatars.githubusercontent.com/u/63321511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walkerped", "html_url": "https://github.com/walkerped", "followers_url": "https://api.github.com/users/walkerped/followers", "following_url": "https://api.github.com/users/walkerped/following{/other_user}", "gists_url": "https://api.github.com/users/walkerped/gists{/gist_id}", "starred_url": "https://api.github.com/users/walkerped/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walkerped/subscriptions", "organizations_url": "https://api.github.com/users/walkerped/orgs", "repos_url": "https://api.github.com/users/walkerped/repos", "events_url": "https://api.github.com/users/walkerped/events{/privacy}", "received_events_url": "https://api.github.com/users/walkerped/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-22T00:34:11Z", "updated_at": "2021-11-22T16:39:17Z", "closed_at": "2021-11-22T16:39:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I try to load the Harvard Oxford sub-maxprob-thr0-1mm atlas with the following code:\r\n\r\n```\r\nfrom nilearn import input_data\r\nfrom nilearn import datasets\r\n\r\natlas = datasets.fetch_atlas_harvard_oxford('sub-maxprob-thr0-1mm',data_dir='/scratch/harvoxTest')\r\natlasI = atlas.maps\r\nlabelL = atlas.labels\r\nmasker = input_data.NiftiLabelsMasker(atlasI,labels=labelL)\r\nmasker.fit()\r\nmasker.generate_report()\r\n```\r\n\r\nI get the error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n/home/scratch/ipykernel_163420/2243967293.py in <module>\r\n      7 masker = input_data.NiftiLabelsMasker(atlasI,labels=labelL)\r\n      8 masker.fit()\r\n----> 9 masker.generate_report()\r\n\r\n/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/input_data/nifti_labels_masker.py in generate_report(self)\r\n    211     def generate_report(self):\r\n    212         from nilearn.reporting.html_report import generate_report\r\n--> 213         return generate_report(self)\r\n    214 \r\n    215     def _reporting(self):\r\n\r\n/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/reporting/html_report.py in generate_report(estimator)\r\n    209     else:  # We can create a report\r\n    210         html_template = _get_estimator_template(estimator)\r\n--> 211         overlay, image = _define_overlay(estimator)\r\n    212         parameters = _str_params(estimator.get_params())\r\n    213         docstring = estimator.__doc__\r\n\r\n/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/reporting/html_report.py in _define_overlay(estimator)\r\n    151 \r\n    152     \"\"\"\r\n--> 153     displays = estimator._reporting()\r\n    154 \r\n    155     if len(displays) == 1:  # set overlay to None\r\n\r\n/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/input_data/nifti_labels_masker.py in _reporting(self)\r\n    267                 regions_summary['label value'].append(label)\r\n    268                 if self.labels is not None:\r\n--> 269                     regions_summary['region name'].append(self.labels[label])\r\n    270                 size = len(labels_image_data[labels_image_data == label])\r\n    271                 voxel_volume = np.abs(np.linalg.det(\r\n\r\nTypeError: list indices must be integers or slices, not numpy.float32\r\n```\r\n\r\nBut I don't get this error when loading the cortical atlas cort-maxprob-thr0-1mm. I tried a few of the cortical versions of the harvard oxford atlas and they seem fine, and have tried a few of the subcortical and they all seem to give the same error.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3063", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3063/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3063/events", "html_url": "https://github.com/nilearn/nilearn/issues/3063", "id": 1054914274, "node_id": "I_kwDOABLbHM4-4Lbi", "number": 3063, "title": "nilearn.plotting overrides the matplotlib backend, causing troubles on remote SSH development", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-11-16T13:59:21Z", "updated_at": "2021-12-03T16:51:17Z", "closed_at": "2021-12-03T16:51:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am working on a remote settings, accessing a machine (drago/margaret for INRIA context) through a PyCharm Remote Interpreter.\r\nI have been struggling to display nilearn figures in the scientific view of PyCharm, leading to a painful process of saving the image => rsync figures dir => visualize figures once there are on personal laptop.\r\n\r\nI did a simple experiment drawing first a simple `plot(list(range(10)))` which is displayed and then a nilearn figure which does not show up (script at the end of the issue).\r\n\r\nI found out the reason for this, which is that in `nilearn.plotting.__init__`, the matplotlib backend is set to `agg` if not in `[inline, agg]`, but the backend used initially (which is working for me) is `module://backend_interagg`.\r\n\r\nSetting the backend to the initial value after importing `nilearn.datasets` fixes the problem.\r\n\r\nI don't know exactly how those matplotlib backends work, if the list of accepted backends in `nilearn.datasets.__init__` could be extended or if we could have a more robust list of valid matplotlib backend. Also, I feel that nilearn shouldn't override matplotlib backend silently? \r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.7.1\r\n\r\n### Expected behavior\r\n\r\nNilearn does not override matplotlib backend silently.\r\n\r\n### Actual behavior\r\n\r\nNilearn sets backend to \"agg\" if not in [\"inline\", \"agg\"], causing trouble with remote SSH development.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nRun the following script through SSH remote interpreter\r\n\r\n```python\r\nimport matplotlib\r\ninitial_backend = matplotlib.get_backend().lower()\r\nprint(initial_backend)\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\narr = np.zeros((100, 100))\r\nplt.figure()\r\nplt.plot(list(range(10)))\r\nplt.show()\r\n# >> The show is displayed in PyCharm\r\n\r\nfrom nilearn import datasets, plotting\r\nprint(matplotlib.get_backend().lower())\r\n# >> Backend has switched to \"agg\"\r\n\r\nsample_brain_map = datasets.fetch_neurovault_motor_task().images[0]\r\nplotting.plot_stat_map(\r\n    sample_brain_map,\r\n    threshold=3,\r\n    title=\"Before setting back the backend\",\r\n)\r\n\r\nplt.show()\r\n# >> Does not show up\r\n\r\nmatplotlib.use(initial_backend)\r\nplotting.plot_stat_map(\r\n    sample_brain_map,\r\n    threshold=3,\r\n    title=\"After setting back the backend\",\r\n)\r\n\r\nplt.show()\r\n# >> Shows up\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3043", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3043/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3043/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3043/events", "html_url": "https://github.com/nilearn/nilearn/issues/3043", "id": 1036817368, "node_id": "I_kwDOABLbHM49zJPY", "number": 3043, "title": "Design matrix columns are no longer compatible with MNE HED style labels", "user": {"login": "rob-luke", "id": 748691, "node_id": "MDQ6VXNlcjc0ODY5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/748691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rob-luke", "html_url": "https://github.com/rob-luke", "followers_url": "https://api.github.com/users/rob-luke/followers", "following_url": "https://api.github.com/users/rob-luke/following{/other_user}", "gists_url": "https://api.github.com/users/rob-luke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rob-luke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rob-luke/subscriptions", "organizations_url": "https://api.github.com/users/rob-luke/orgs", "repos_url": "https://api.github.com/users/rob-luke/repos", "events_url": "https://api.github.com/users/rob-luke/events{/privacy}", "received_events_url": "https://api.github.com/users/rob-luke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-26T23:12:01Z", "updated_at": "2021-10-31T22:41:47Z", "closed_at": "2021-10-31T22:41:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Background\r\n\r\nI use the nilearn GLM module heavily with MNE-Python in MNE-NIRS. To encode events/triggers in experiments, MNE uses a variation of hierarchical event descriptors (HEDs) ([see docs](https://mne.tools/dev/auto_tutorials/epochs/40_autogenerate_metadata.html?highlight=hed#keeping-only-the-first-events-of-a-group)). Events in MNE often take the form of something like `response/left` and `response/right`. The benefit of this approach is that you can then query the data, calling `epochs[response]` would return the data for both the left and right events, whereas `epochs[left]` would only return the left events.\r\n\r\nUntil now I have been utilising the MNE-Python annotations structure to generate first level design matrix using nilearn. I have been able to directly map the MNE-Python annotation onsets to nilearn onset and the MNE-Python annotation descriptors directly to the nilearn trial type in `make_first_level_design_matrix`. And the column names of the design matrix have worked perfectly well with names like `Tapping/Left`, see for example this tutorial https://mne.tools/mne-nirs/main/auto_examples/general/plot_11_hrf_measured.html#create-design-matrix \r\n\r\nI find the HED style labelling of conditions very convenient and would like to continue using it if possible. Also the direct mapping between MNE and Nilearn is also advantageous as I can use similar code across the two platforms. \r\n\r\nHowever, the recent PR https://github.com/nilearn/nilearn/pull/3025 modified the internal function `glm.first_level.hemodynamic_models._regressor_names()` and it no longer accepts the `/` character. The aim of the PR was to replace spaces with underscores. \r\n\r\nSo I wonder if this change in behaviour to the `/` is an accidental side effect? Or if this was a conscious decision? And if it was an unintended change, would you be willing to reallow `/` characters? \r\n\r\n\r\n### Expected behavior\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: e9c4392\r\n\r\nAllow the use of `/` in `make_first_level_design_matrix` condition names\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\nhttps://github.com/nilearn/nilearn/blob/ab9c68e502c4b92695cd658f5839a8207fd5e07e/nilearn/glm/first_level/hemodynamic_models.py#L428-L436\r\n\r\n```python\r\n'response/right'.isidentifier()\r\n# False\r\n\r\n'response_right'.isidentifier()\r\n# True\r\n```\r\n\r\n### Relevant info\r\n\r\nhttps://github.com/mne-tools/mne-nirs/pull/403\r\n\r\nBased on your response I am able to make a PR, but thought it would be best to discuss the behaviour you wish first.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3041", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3041/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3041/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3041/events", "html_url": "https://github.com/nilearn/nilearn/issues/3041", "id": 1036354583, "node_id": "I_kwDOABLbHM49xYQX", "number": 3041, "title": "`non_parametric_inference` does not accept DataFrames while documentation says it should", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-10-26T14:13:02Z", "updated_at": "2021-11-16T08:44:11Z", "closed_at": "2021-11-16T08:44:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The documentation for `non_parametric_inference` says that the parameter `second_level_input ` can be a DataFrame:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/2fd6665664f27dfbf1f10aeeba660adc9b560361/nilearn/glm/second_level/second_level.py#L546-L550\r\n\r\n but explicitly checks the opposite here:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/2fd6665664f27dfbf1f10aeeba660adc9b560361/nilearn/glm/second_level/second_level.py#L630-L631\r\n\r\nExample code:\r\n\r\n```python\r\nimport pandas as pd\r\nfrom nilearn.glm.second_level import non_parametric_inference\r\n\r\ndf = pd.DataFrame(columns=[\"subject_label\", \"map_name\", \"effects_map_path\"])\r\nnon_parametric_inference(df)\r\n```\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-5-48e22b1e0923> in <module>\r\n      3 \r\n      4 df = pd.DataFrame(columns=[\"subject_label\", \"map_name\", \"effects_map_path\"])\r\n----> 5 non_parametric_inference(df)\r\n\r\n~/GitRepos/nilearn-fork/nilearn/glm/second_level/second_level.py in non_parametric_inference(second_level_input, confounds, design_matrix, second_level_contrast, mask, smoothing_fwhm, model_intercept, n_perm, two_sided_test, random_state, n_jobs, verbose)\r\n    623 \r\n    624     \"\"\"\r\n--> 625     _check_second_level_input(second_level_input, design_matrix,\r\n    626                               flm_object=False, df_object=False)\r\n    627     _check_confounds(confounds)\r\n\r\n~/GitRepos/nilearn-fork/nilearn/glm/second_level/second_level.py in _check_second_level_input(second_level_input, design_matrix, confounds, flm_object, df_object)\r\n     99                              'was provided' % type(second_level_input))\r\n    100         else:\r\n--> 101             raise ValueError('second_level_input must be'\r\n    102                              ' a list Niimg-like objects. Instead %s '\r\n    103                              'was provided' % type(second_level_input))\r\n\r\nValueError: second_level_input must be a list Niimg-like objects. Instead <class 'pandas.core.frame.DataFrame'> was provided\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3041/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3040", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3040/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3040/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3040/events", "html_url": "https://github.com/nilearn/nilearn/issues/3040", "id": 1036341413, "node_id": "I_kwDOABLbHM49xVCl", "number": 3040, "title": "`_check_second_level_input` does not raise an error when it should", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-26T14:02:14Z", "updated_at": "2022-06-20T09:07:54Z", "closed_at": "2022-06-20T09:07:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The function `_check_second_level_input` when provided with a list of `FirstLevelModel` objects with the flag `flm_object` set to `False` should raise an error, which is not the case currently:\r\n\r\n```python\r\nfrom nilearn.glm.first_level import FirstLevelModel\r\nfrom nilearn.glm.second_level.second_level import _check_second_level_input\r\n\r\nlist_of_flm = [FirstLevelModel()] * 3\r\n_check_second_level_input(list_of_flm, None, flm_object=False, df_object=False)  # No error here\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3040/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3034", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3034/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3034/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3034/events", "html_url": "https://github.com/nilearn/nilearn/issues/3034", "id": 1035105818, "node_id": "I_kwDOABLbHM49snYa", "number": 3034, "title": "Method generate_report raises TypeError when mask_img of FirstLevelModel is NiftiMasker", "user": {"login": "alexisthual", "id": 13835654, "node_id": "MDQ6VXNlcjEzODM1NjU0", "avatar_url": "https://avatars.githubusercontent.com/u/13835654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisthual", "html_url": "https://github.com/alexisthual", "followers_url": "https://api.github.com/users/alexisthual/followers", "following_url": "https://api.github.com/users/alexisthual/following{/other_user}", "gists_url": "https://api.github.com/users/alexisthual/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisthual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisthual/subscriptions", "organizations_url": "https://api.github.com/users/alexisthual/orgs", "repos_url": "https://api.github.com/users/alexisthual/repos", "events_url": "https://api.github.com/users/alexisthual/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisthual/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}, {"id": 2969441148, "node_id": "MDU6TGFiZWwyOTY5NDQxMTQ4", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20medium", "name": "impact: medium", "color": "bac1fc", "default": false, "description": "Estimated medium impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}, {"id": 2969445137, "node_id": "MDU6TGFiZWwyOTY5NDQ1MTM3", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20medium", "name": "priority: medium", "color": "FBCA04", "default": false, "description": "Estimated medium priority task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-25T12:58:10Z", "updated_at": "2021-11-15T12:41:00Z", "closed_at": "2021-11-15T12:41:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n`FirstLevelModel` accepts `mask_img` to be a `NiftiMasker`. However, calling `generate_report()` on such an instance will raise a `TypeError`, due to the fact that `_mask_to_svg()` calls `plot_roi()` on attribute `mask_img` (`plot_roi()` would need `mask_img` to be a `NiftiImage`, not a `NiftiMasker`).\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.8.2.dev\r\n\r\n### Expected behavior\r\nThe report should be generated flawlessly.\r\n\r\n### Actual behavior\r\nAn explicit `TypeError` is raised, but users can't easily fix this bug as it lies in unexposed methods.\r\n\r\n### Steps and code to reproduce bug\r\nHere is an incomplete code snippet leading to this bug:\r\n\r\n```python\r\nmasker = NiftiMasker()\r\nmasker.fit(anatomical_img)\r\n\r\nglm = FirstLevelModel(t_r=t_r, mask_img=masker)\r\nglm.fit(functional_imgs, events)\r\nglm.generate_report([\"condition_name\"])\r\n```\r\n\r\n### Fix\r\nA simple fix would be to call `_mask_to_svg()` with `NiftiImage` parameters only. One simply need to modify the following lines to do a proper type check: https://github.com/nilearn/nilearn/blob/80c55fc43d614c4edf35c42186ac414ac3b770e3/nilearn/reporting/glm_reporter.py#L217-L220\r\n\r\nI can take care of this soon!", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3034/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3034/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3029", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3029/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3029/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3029/events", "html_url": "https://github.com/nilearn/nilearn/issues/3029", "id": 1031827841, "node_id": "I_kwDOABLbHM49gHGB", "number": 3029, "title": "nilearn.glm.first_level.first_level_from_bids may incorrectly align models_run_imgs with model_events ", "user": {"login": "emaliemcmahon", "id": 32391183, "node_id": "MDQ6VXNlcjMyMzkxMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/32391183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emaliemcmahon", "html_url": "https://github.com/emaliemcmahon", "followers_url": "https://api.github.com/users/emaliemcmahon/followers", "following_url": "https://api.github.com/users/emaliemcmahon/following{/other_user}", "gists_url": "https://api.github.com/users/emaliemcmahon/gists{/gist_id}", "starred_url": "https://api.github.com/users/emaliemcmahon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emaliemcmahon/subscriptions", "organizations_url": "https://api.github.com/users/emaliemcmahon/orgs", "repos_url": "https://api.github.com/users/emaliemcmahon/repos", "events_url": "https://api.github.com/users/emaliemcmahon/events{/privacy}", "received_events_url": "https://api.github.com/users/emaliemcmahon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Remi-Gau", "id": 6961185, "node_id": "MDQ6VXNlcjY5NjExODU=", "avatar_url": "https://avatars.githubusercontent.com/u/6961185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Remi-Gau", "html_url": "https://github.com/Remi-Gau", "followers_url": "https://api.github.com/users/Remi-Gau/followers", "following_url": "https://api.github.com/users/Remi-Gau/following{/other_user}", "gists_url": "https://api.github.com/users/Remi-Gau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Remi-Gau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Remi-Gau/subscriptions", "organizations_url": "https://api.github.com/users/Remi-Gau/orgs", "repos_url": "https://api.github.com/users/Remi-Gau/repos", "events_url": "https://api.github.com/users/Remi-Gau/events{/privacy}", "received_events_url": "https://api.github.com/users/Remi-Gau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2021-10-20T21:02:58Z", "updated_at": "2023-03-29T08:52:12Z", "closed_at": "2023-03-29T08:52:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used nilearn.glm.first_level.first_level_from_bids to grab my fMRIprep preprocessed data and my event files to run a GLM with nilearn. I noticed that event data frames were not properly aligned with the processed bold images. I think that it is a disparity between the leading zeros filled by dcm2bids but not fmriprep. For instance, the raw nifti files created by dcm2bids are named \"run-01\", for example (so that is how my event files are named as well), but the fmriprep outputs are instead \"run-1\". My best guess is that nilearn.glm.first_level.first_level_from_bids is not using natural sorting, which is causing the misalignment. \r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.8.0\r\n\r\n### Expected behavior\r\nProperly aligned event files to the bold images\r\n\r\n### Actual behavior\r\nMisalignment of the event files with the bold images\r\n\r\n### Steps and code to reproduce bug\r\nThe bug can be reproduced by having event files with leading zeros and preprocessed data without. \r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3029/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3024", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3024/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3024/events", "html_url": "https://github.com/nilearn/nilearn/issues/3024", "id": 1029226351, "node_id": "I_kwDOABLbHM49WL9v", "number": 3024, "title": "Using custom response functions for computing GLM leads to SyntaxError when computing contrasts", "user": {"login": "alexisthual", "id": 13835654, "node_id": "MDQ6VXNlcjEzODM1NjU0", "avatar_url": "https://avatars.githubusercontent.com/u/13835654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisthual", "html_url": "https://github.com/alexisthual", "followers_url": "https://api.github.com/users/alexisthual/followers", "following_url": "https://api.github.com/users/alexisthual/following{/other_user}", "gists_url": "https://api.github.com/users/alexisthual/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisthual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisthual/subscriptions", "organizations_url": "https://api.github.com/users/alexisthual/orgs", "repos_url": "https://api.github.com/users/alexisthual/repos", "events_url": "https://api.github.com/users/alexisthual/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisthual/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}, {"id": 2969441148, "node_id": "MDU6TGFiZWwyOTY5NDQxMTQ4", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20medium", "name": "impact: medium", "color": "bac1fc", "default": false, "description": "Estimated medium impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-18T14:55:20Z", "updated_at": "2021-10-21T07:19:52Z", "closed_at": "2021-10-21T07:19:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe bugfix introduced in #3018 derives names of the `design_matrices_` attribute of `FirstLevelModel`. However, computed names contain spaces, which later on raises errors.\r\nIn particular, when trying to compute contrasts (or generate reports) using the `\"condition_1-condition_2\"` string syntax, `pandas` fails to evaluate it and raises a `SyntaxError`.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.8.2.dev\r\n\r\n### Expected behavior\r\nIt should work without error.\r\n\r\n### Actual behavior\r\nIt fails with a `SyntaxError`:\r\n\r\n```\r\n/storage/store2/work/athual/repo/nilearn/nilearn/plotting/matrix_plotting.py:296: UserWarning: Tight layout not applied. The bottom and top margins cannot be made large enough to accommodate all axes decorations. \r\n  plt.tight_layout()\r\n/storage/store2/work/athual/repo/nilearn/nilearn/reporting/utils.py:9: UserWarning: Tight layout not applied. The bottom and top margins cannot be made large enough to accommodate all axes decorations. \r\n  io_buffer, format=\"svg\", facecolor=\"white\", edgecolor=\"white\"\r\nTraceback (most recent call last):\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3444, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n\r\n  File \"/tmp/ipykernel_44279/1486762308.py\", line 10, in <module>\r\n    bg_img=anatomical_img,\r\n\r\n  File \"/storage/store2/work/athual/repo/nilearn/nilearn/glm/_base.py\", line 117, in generate_report\r\n    report_dims=report_dims)\r\n\r\n  File \"/storage/store2/work/athual/repo/nilearn/nilearn/reporting/glm_reporter.py\", line 202, in make_glm_report\r\n    contrast_plots = _plot_contrasts(contrasts, design_matrices)\r\n\r\n  File \"/storage/store2/work/athual/repo/nilearn/nilearn/reporting/glm_reporter.py\", line 365, in _plot_contrasts\r\n    colorbar=True)\r\n\r\n  File \"/storage/store2/work/athual/repo/nilearn/nilearn/plotting/matrix_plotting.py\", line 273, in plot_contrast_matrix\r\n    contrast_def, design_column_names)\r\n\r\n  File \"/storage/store2/work/athual/repo/nilearn/nilearn/glm/contrasts.py\", line 43, in expression_to_contrast_vector\r\n    contrast_vector = df.eval(expression, engine=\"python\").values\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/frame.py\", line 4191, in eval\r\n    return _eval(expr, inplace=inplace, **kwargs)\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/computation/eval.py\", line 348, in eval\r\n    parsed_expr = Expr(expr, engine=engine, parser=parser, env=env)\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/computation/expr.py\", line 806, in __init__\r\n    self.terms = self.parse()\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/computation/expr.py\", line 825, in parse\r\n    return self._visitor.visit(self.expr)\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/computation/expr.py\", line 407, in visit\r\n    raise e\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/site-packages/pandas/core/computation/expr.py\", line 403, in visit\r\n    node = ast.fix_missing_locations(ast.parse(clean))\r\n\r\n  File \"/storage/store2/work/athual/anaconda3/envs/singbrain/lib/python3.7/ast.py\", line 35, in parse\r\n    return compile(source, filename, mode, PyCF_ONLY_AST)\r\n\r\n  File \"<unknown>\", line 1\r\n    audio mion_rf -control_visual_audio mion_rf\r\n                ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\n### Steps and code to reproduce bug\r\n\r\nI won't give a fully operational code snippet, but given that one already has functional images, experiment events and a custom rf_model, the following code will raise the error :\r\n\r\n```python\r\nfmri_glm = FirstLevelModel(\r\n    t_r=t_r,\r\n    noise_model=\"ar1\",\r\n    standardize=False,\r\n    hrf_model=rf_model,\r\n)\r\n\r\nfmri_glm.fit(functional_img, events)\r\n\r\nfmri_glm.generate_report([\"condition_1 hrf_model-condition_2 hrf_model\"])\r\n```\r\n\r\n### Fix\r\n\r\nA quick fix would be to simple replace spaces with underscores. I'll write a PR for that.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3024/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3021", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3021/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3021/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3021/events", "html_url": "https://github.com/nilearn/nilearn/issues/3021", "id": 1028432398, "node_id": "I_kwDOABLbHM49TKIO", "number": 3021, "title": "Test failure on 32-bit platforms: test_resample_img_segmentation_fault", "user": {"login": "musicinmybrain", "id": 6898909, "node_id": "MDQ6VXNlcjY4OTg5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6898909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/musicinmybrain", "html_url": "https://github.com/musicinmybrain", "followers_url": "https://api.github.com/users/musicinmybrain/followers", "following_url": "https://api.github.com/users/musicinmybrain/following{/other_user}", "gists_url": "https://api.github.com/users/musicinmybrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/musicinmybrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/musicinmybrain/subscriptions", "organizations_url": "https://api.github.com/users/musicinmybrain/orgs", "repos_url": "https://api.github.com/users/musicinmybrain/repos", "events_url": "https://api.github.com/users/musicinmybrain/events{/privacy}", "received_events_url": "https://api.github.com/users/musicinmybrain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-10-17T20:42:36Z", "updated_at": "2021-10-19T14:39:08Z", "closed_at": "2021-10-19T07:33:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nOn 32-bit platforms, `test_resample_img_segmentation_fault` fails:\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_____________________ test_resample_img_segmentation_fault _____________________\r\n    @pytest.mark.skipif(os.environ.get('APPVEYOR') == 'True',\r\n                        reason='This test too slow (7-8 minutes) on AppVeyor')\r\n    @pytest.mark.skipif((os.environ.get('TRAVIS') == 'true'\r\n                         and os.environ.get('TRAVIS_CPU_ARCH') == 'arm64'),\r\n                        reason='This test does not run on ARM arch.')\r\n    def test_resample_img_segmentation_fault():\r\n        # see https://github.com/nilearn/nilearn/issues/346\r\n        shape_in = (64, 64, 64)\r\n        aff_in = np.diag([2., 2., 2., 1.])\r\n        aff_out = np.diag([3., 3., 3., 1.])\r\n        # fourth_dim = 1024 works fine but for 1025 creates a segmentation\r\n        # fault with scipy < 0.14.1\r\n        fourth_dim = 1025\r\n\r\n        try:\r\n>           data = np.ones(shape_in + (fourth_dim, ), dtype=np.float64)\r\nnilearn/image/tests/test_resampling.py:808:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\nshape = (64, 64, 64, 1025), dtype = <class 'numpy.float64'>, order = 'C'\r\n    @set_array_function_like_doc\r\n    @set_module('numpy')\r\n    def ones(shape, dtype=None, order='C', *, like=None):\r\n        \"\"\"\r\n        Return a new array of given shape and type, filled with ones.\r\n[\u2026 omitted further docstring content \u2026]\r\n        \"\"\"\r\n        if like is not None:\r\n            return _ones_with_like(shape, dtype=dtype, order=order, like=like)\r\n\r\n>       a = empty(shape, dtype, order)\r\nE       ValueError: array is too big; `arr.size * arr.dtype.itemsize` is larger than the maximum possible size.\r\n/usr/lib/python3.10/site-packages/numpy/core/numeric.py:204: ValueError\r\n```\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n\r\n### Expected behavior\r\n\r\nTest passes.\r\n\r\n### Actual behavior\r\n\r\nTest fails; details above.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nRun the test suite on a 32-bit platform (including a 32-bit x86 chroot on an x86_64 machine).\r\n\r\nThe test attempts to create an array of size (64\u00d764\u00d764\u00d71025 values)\u00d78-bytes/value = 2149580800, which exceeds the maximum size representable in a signed word on a 32-bit platform (`0x7fffffff` = 2147483647 = `2**31-1`).\r\n\r\nThe test should be skipped on 32-bit platforms.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3017", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3017/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3017/events", "html_url": "https://github.com/nilearn/nilearn/issues/3017", "id": 1025650229, "node_id": "I_kwDOABLbHM49Ii41", "number": 3017, "title": "FirstLevelModel with custom response function fails with TypeError", "user": {"login": "alexisthual", "id": 13835654, "node_id": "MDQ6VXNlcjEzODM1NjU0", "avatar_url": "https://avatars.githubusercontent.com/u/13835654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisthual", "html_url": "https://github.com/alexisthual", "followers_url": "https://api.github.com/users/alexisthual/followers", "following_url": "https://api.github.com/users/alexisthual/following{/other_user}", "gists_url": "https://api.github.com/users/alexisthual/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisthual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisthual/subscriptions", "organizations_url": "https://api.github.com/users/alexisthual/orgs", "repos_url": "https://api.github.com/users/alexisthual/repos", "events_url": "https://api.github.com/users/alexisthual/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisthual/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}, {"id": 2969441148, "node_id": "MDU6TGFiZWwyOTY5NDQxMTQ4", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20medium", "name": "impact: medium", "color": "bac1fc", "default": false, "description": "Estimated medium impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": {"login": "alexisthual", "id": 13835654, "node_id": "MDQ6VXNlcjEzODM1NjU0", "avatar_url": "https://avatars.githubusercontent.com/u/13835654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisthual", "html_url": "https://github.com/alexisthual", "followers_url": "https://api.github.com/users/alexisthual/followers", "following_url": "https://api.github.com/users/alexisthual/following{/other_user}", "gists_url": "https://api.github.com/users/alexisthual/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisthual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisthual/subscriptions", "organizations_url": "https://api.github.com/users/alexisthual/orgs", "repos_url": "https://api.github.com/users/alexisthual/repos", "events_url": "https://api.github.com/users/alexisthual/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisthual/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alexisthual", "id": 13835654, "node_id": "MDQ6VXNlcjEzODM1NjU0", "avatar_url": "https://avatars.githubusercontent.com/u/13835654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexisthual", "html_url": "https://github.com/alexisthual", "followers_url": "https://api.github.com/users/alexisthual/followers", "following_url": "https://api.github.com/users/alexisthual/following{/other_user}", "gists_url": "https://api.github.com/users/alexisthual/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexisthual/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexisthual/subscriptions", "organizations_url": "https://api.github.com/users/alexisthual/orgs", "repos_url": "https://api.github.com/users/alexisthual/repos", "events_url": "https://api.github.com/users/alexisthual/events{/privacy}", "received_events_url": "https://api.github.com/users/alexisthual/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-10-13T20:07:28Z", "updated_at": "2021-10-18T12:15:38Z", "closed_at": "2021-10-18T12:15:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n#2942 added the possibility to use custom response functions when regressing signal from images. However, using a custom response function with `FirstLevelModel` fails.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.8.2.dev\r\n\r\n### Expected behavior\r\nThe GLM should run without error.\r\n\r\n### Actual behavior\r\nIt currently fails, returning the following stack-trace:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n/tmp/ipykernel_58955/2957114893.py in <module>\r\n      3     events_primary_categories_filtered,\r\n      4     subject_label=monkey_subject_name,\r\n----> 5     rf_model=mion_rf,\r\n      6 )\r\n\r\n/tmp/ipykernel_58955/4150798340.py in fit_glm(functional_img, events, subject_label, rf_model)\r\n     12     )\r\n     13 \r\n---> 14     fmri_glm.fit(functional_img, events)\r\n     15 \r\n     16     return fmri_glm\r\n\r\n/storage/store2/work/athual/repo/nilearn/nilearn/glm/first_level/first_level.py in fit(self, run_imgs, events, confounds, design_matrices, bins)\r\n    549                                                         confounds_matrix,\r\n    550                                                         confounds_names,\r\n--> 551                                                         self.min_onset\r\n    552                                                         )\r\n    553             else:\r\n\r\n/storage/store2/work/athual/repo/nilearn/nilearn/glm/first_level/design_matrix.py in make_first_level_design_matrix(frame_times, events, hrf_model, drift_model, high_pass, drift_order, fir_delays, add_regs, add_reg_names, min_onset, oversampling)\r\n    360         matrix, names = _convolve_regressors(\r\n    361             events, hrf_model, frame_times, fir_delays, min_onset,\r\n--> 362             oversampling)\r\n    363 \r\n    364     # step 2: additional regressors\r\n\r\n/storage/store2/work/athual/repo/nilearn/nilearn/glm/first_level/design_matrix.py in _convolve_regressors(events, hrf_model, frame_times, fir_delays, min_onset, oversampling)\r\n    237             min_onset=min_onset)\r\n    238 \r\n--> 239         regressor_names += names\r\n    240         if regressor_matrix is None:\r\n    241             regressor_matrix = reg\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\n\r\n### Steps and code to reproduce bug\r\nI won't give a fully operational code snippet, but given that one already has functional images, experiment events and a custom `rf_model, the following code will raise the error, `:\r\n\r\n```python\r\nfmri_glm = FirstLevelModel(\r\n    t_r=t_r,\r\n    noise_model=\"ar1\",\r\n    standardize=False,\r\n    hrf_model=rf_model,\r\n)\r\n\r\nfmri_glm.fit(functional_img, events)\r\n```\r\n\r\n### Fix\r\nAccording to the stack-trace, in `glm/first_level/design_matrix.py`, instruction `regressor_names += names` fails to execute because `names` is `None`.\r\nThis variable is computed a few lines above through `compute_regressor()`, which itself calls `_regressor_names()`, which eventually returns a list of names depending on `hrf_model` given in argument. However, it does not explicitly handle the case where `hrf_model` is a custom function (or where `hrf_model` is not a predefined string for that matter), and hence returns nothing.\r\n\r\nI think we could:\r\n1. make sure that `_regressor_names()` return an emtpy list by default\r\n2. in case we don't want 1., maybe we could have `_regressor_names()` return an empty list when `hrf_model` is a custom function (or a list of custom functions)\r\n3. modify `compute_regressor()` such that it checks that `names` is iterable before calling the faulty line\r\n4. generally add more tests using custom response functions\r\n\r\nI will open a PR soon to fix these things.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3017/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3012", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3012/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3012/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3012/events", "html_url": "https://github.com/nilearn/nilearn/issues/3012", "id": 1021240913, "node_id": "I_kwDOABLbHM483uZR", "number": 3012, "title": "node_size does not work as array-like for nilearn.plotting.plot_markers for \"r\" and \"l\" directions", "user": {"login": "LeSasse", "id": 73998642, "node_id": "MDQ6VXNlcjczOTk4NjQy", "avatar_url": "https://avatars.githubusercontent.com/u/73998642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeSasse", "html_url": "https://github.com/LeSasse", "followers_url": "https://api.github.com/users/LeSasse/followers", "following_url": "https://api.github.com/users/LeSasse/following{/other_user}", "gists_url": "https://api.github.com/users/LeSasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeSasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeSasse/subscriptions", "organizations_url": "https://api.github.com/users/LeSasse/orgs", "repos_url": "https://api.github.com/users/LeSasse/repos", "events_url": "https://api.github.com/users/LeSasse/events{/privacy}", "received_events_url": "https://api.github.com/users/LeSasse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-08T15:52:31Z", "updated_at": "2021-10-18T07:38:52Z", "closed_at": "2021-10-18T07:38:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nI think the nilearn.plotting.plot_markers function is not working as expected. Specifically when giving node size as an array-like it will not work for \"r\" and \"l\" directions because the marker_size length is not adjusted according to the relevant coordinates\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\nnilearn==0.8.1\r\n\r\n### Expected behavior\r\neach node should be sized according to node_size\r\n\r\n### Actual behavior\r\nIt will work as expected for directions \"y\" and \"z\".\r\nhowever this will not work for \"l\" and \"r\" display direction.\r\n\r\nI think this is because in display.add_markers() under\r\n\r\n```python\r\nelif direction == 'l':\r\n        relevant_coords = (xcoords <= 0)\r\n        xdata = xdata[relevant_coords]\r\n        ydata = ydata[relevant_coords]\r\n```\r\nyou do not select the correct index from marker_size based on the relevant coordinates.\r\n\r\nTraceback (most recent call last):\r\n  File \"04_plot_pareto_scores.py\", line 92, in <module>\r\n    brain = plotting.plot_markers(\r\n  File \"/home/leonard/.venvs/Gradient-Identification/lib/python3.8/site-packages/nilearn/plotting/img_plotting.py\", line 1429, in plot_markers\r\n    display.add_markers(\r\n  File \"/home/leonard/.venvs/Gradient-Identification/lib/python3.8/site-packages/nilearn/plotting/displays.py\", line 1081, in add_markers\r\n    display_ax.ax.scatter(xdata, ydata, s=marker_size,\r\n  File \"/home/leonard/.venvs/Gradient-Identification/lib/python3.8/site-packages/matplotlib/__init__.py\", line 1361, in inner\r\n    return func(ax, *map(sanitize_sequence, args), **kwargs)\r\n  File \"/home/leonard/.venvs/Gradient-Identification/lib/python3.8/site-packages/matplotlib/axes/_axes.py\", line 4507, in scatter\r\n    raise ValueError(\r\nValueError: s must be a scalar, or float array-like with the same size as x and y\r\n\r\n\r\n### Steps and code to reproduce bug\r\nThe below code should reproduce the faulty behaviour.\r\n\r\nIt will do as desired for display mode \"yz\", but throw the beforementioned error for display mode \"lyrz\".\r\n\r\n```python\r\n#!/usr/bin/env python3\r\n\r\nimport matplotlib.pyplot as plt\r\nfrom nilearn import plotting\r\nfrom nilearn import datasets\r\nimport numpy as np\r\n\r\n# get some coords\r\npower = datasets.fetch_coords_power_2011()\r\ncoords = np.vstack((power.rois['x'], power.rois['y'], power.rois['z'])).T\r\n\r\n# node strength\r\nnode_strength = np.random.rand(264,)\r\nnode_sizes = np.random.rand(264,)*50\r\n\r\nbrain = plotting.plot_markers(\r\n    node_strength,\r\n    coords,\r\n    node_vmin=0,\r\n    node_vmax=1,\r\n    node_size=node_sizes,\r\n    node_cmap = \"rainbow\",\r\n    display_mode=\"lyrz\"\r\n)\r\nplt.show()\r\n\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3007", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/3007/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/3007/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/3007/events", "html_url": "https://github.com/nilearn/nilearn/issues/3007", "id": 1017033292, "node_id": "I_kwDOABLbHM48nrJM", "number": 3007, "title": "NiftiLabelsMasker generate report gives error ", "user": {"login": "walkerped", "id": 63321511, "node_id": "MDQ6VXNlcjYzMzIxNTEx", "avatar_url": "https://avatars.githubusercontent.com/u/63321511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walkerped", "html_url": "https://github.com/walkerped", "followers_url": "https://api.github.com/users/walkerped/followers", "following_url": "https://api.github.com/users/walkerped/following{/other_user}", "gists_url": "https://api.github.com/users/walkerped/gists{/gist_id}", "starred_url": "https://api.github.com/users/walkerped/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walkerped/subscriptions", "organizations_url": "https://api.github.com/users/walkerped/orgs", "repos_url": "https://api.github.com/users/walkerped/repos", "events_url": "https://api.github.com/users/walkerped/events{/privacy}", "received_events_url": "https://api.github.com/users/walkerped/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 2969441148, "node_id": "MDU6TGFiZWwyOTY5NDQxMTQ4", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20medium", "name": "impact: medium", "color": "bac1fc", "default": false, "description": "Estimated medium impact task"}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-10-05T23:17:45Z", "updated_at": "2021-10-07T14:33:30Z", "closed_at": "2021-10-07T14:33:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nI am trying to use the following code to load the neuroparc glasser atlas into NiftiLabelsMasker and QC it:\r\n\r\n```\r\nfrom nilearn import input_data\r\n\r\nmasker = input_data.NiftiLabelsMasker('./Glasser_space-MNI152NLin6_res-1x1x1.nii.gz',\r\n                        labels=['Background', 'Primary_visual_cortex', 'Medial_superior_temporal_area', 'Sixth_Visual_Area', 'Second_Visual_Area', 'Third_Visual_Area', 'Forth_Visual_Area', 'Eighth_Visual_Area', 'Primary_Motor_Cortex', 'Primary_Sensory_Cortex', 'Frontal_Eye_Field', 'Premotor_Eye_Field', 'Area_55b', 'Area_V3A', 'RetroSplenial_Complex', 'Parieto-Occipital_Sulcus_Area_2', 'Seventh_Visual_Area', 'IntraParietal_Sulcus_Area_1', 'Fusiform_Face_Complex', 'Area_V3B', 'Lateral_Occipital_Area_1', 'Lateral_Occipital_Area_2', 'Posterior_InferoTemporal_Complex', 'Middle_Temporal_Area', 'Primary_Auditory_Cortex', 'PeriSylvian_Language_Area', 'Superior_Frontal_Language_Area', 'PreCuneus_Visual_Area', 'Superior_Temporal_Visual_Area', 'Medial_Area_7P', 'Area_7m', 'Parieto-Occipital_Sulcus_Area_1', 'Area_23d', 'Area_Ventral_23_a+b', 'Area_Dorsal_23_a+b', 'Area_31p_Ventral', 'Area_5m', 'Area_5m_ventral', 'Area_23c', 'Area_5L', 'Dorsal_Area_24d', 'Lateral_Area_7A', 'Supplementary_and_Cingulate_Eye_Field', 'Area_6m_Anterior', 'Medial_6m_anterior', 'Medial_Area_7A', 'Lateral_Area_7P', 'Area_7PC', 'Area_Lateral_IntraParietal_ventral', 'Ventral_IntraParietal_Complex', 'Medial_IntraParietal_Area', 'Area_1', 'Area_2', 'Area_3a', 'Dorsal_area_6', 'Area_6mp', 'Ventral_Area_6', 'Area_Posterior_24', 'Area_33_prime', 'Anterior_24_prime', 'Area_p32_prime', 'Area_a24', 'Area_dorsal_32', 'Area_8BM', 'Area_p32', 'Area_10r', 'Area_47m', 'Area_8Av', 'Area_8Ad', 'Area_9_Middle', 'Area_8B_Lateral', 'Area_9_Posterior', 'Area_10d', 'Area_8C', 'Area_44', 'Area_45', 'Area_47L', 'Area_anterior_47R', 'Rostral_Area_6', 'Area_IFJa', 'Area_IFJp', 'Area_IFSp', 'Area_IFSa', 'Area_posterior_9-46v', 'Area_46', 'Area_anterior_9-46v', 'Area_9-46d', 'Area_9_anterior', 'Area_10v', 'Area_anterior_10p', 'Polar_10p', 'Area_11', 'Area_13', 'Orbital_Frontal_Complex', 'Area_47s', 'Area_Lateral_IntraParietal_dorsal', 'Area_6_anterior', 'Inferior_6-8_Transitional_Area', 'Superior_6-8_Transitional_Area', 'Area_43', 'Area_OP4/PV', 'Area_OP1/SII', 'Area_OP2-3/VS', 'Area_52', 'RetroInsular_Cortex', 'Area_PFcm', 'Posterior_Insular_Area_2', 'Area_TA2', 'Frontal_OPercular_Area_4', 'Middle_Insular_Area', 'Pirform_Cortex', 'Anterior_Ventral_Insular_Area', 'Anterior_Agranular_Insula_Complex', 'Frontal_OPercular_Area_1', 'Frontal_OPercular_Area_3', 'Frontal_OPercular_Area_2', 'Area_PFt', 'Anterior_IntraParietal_Area', 'Entorhinal_Cortex', 'PreSubiculum', 'Hippocampus', 'ProStraite_Area', 'Perirhinal_Ectorhinal_Cortex', 'Area_STGa', 'ParaBelt_Complex', 'Auditory_5_Complex', 'ParaHippocampal_Area_1', 'ParaHippocampal_Area_3', 'Area_STSd_Anterior', 'Area_STSd_Posterior', 'Area_STSv_Posterior', 'Area_TG_Dorsal', 'Area_TE1_Anterior', 'Area_TE1_Posterior', 'Area_TE2_Anterior', 'Area_TF', 'Area_TE2_Posterior', 'Area_PHT', 'Area_PH', 'Area_TemporoParietoOccipital_Junction_1', 'Area_TemporoParietoOccipital_Junction_2', 'Area_TemporoParietoOccipital_Junction_3', 'Dorsal_Transitional_Visual_Area', 'Area_PGp', 'Area_IntraParietal_2', 'Area_IntraParietal_1', 'Area_IntraParietal_0', 'Area_PF_Opercular', 'Area_PF_Complex', 'Area_PFm_Complex', 'Area_PGi', 'Area_PGs', 'Area_V6A', 'VentroMedial_Visual_Area_1', 'VentroMedial_Visual_Area_3', 'ParaHippocampal_Area_2', 'Area_V4t', 'Area_FST', 'Area_V3CD', 'Area_Lateral_Occipital_3', 'VentroMedial_Visual_Area_2', 'Area_31pd', 'Area_31a', 'Ventral_Visual_Complex', 'Area_25', 'Area_s32', 'Posterior_OFC_Complex', 'Area_Posterior_Insular_1', 'Insular_Granular_Complex', 'Area_Frontal_Opercular_5', 'Area_Posterior_10p', 'Area_Posterior_47r', 'Area_TG_ventral', 'Medial_Belt_Complex', 'Lateral_Belt_Complex', 'Auditory_4_Complex', 'Area_STSv_Anterior', 'Area_TE1_Middle', 'Para-Insular_Area', 'Area_Anterior_32_Prime', 'Area_Posterior_24'],\r\n                        standardize=False,\r\n                        memory='nilearn_cache',\r\n                        verbose=1,\r\n                        detrend=False)\r\nmasker.fit()\r\nmasker.generate_report()\r\n```\r\n\r\nIt appears to load, but when I try to check the results with generate_report, I get the following error:\r\n\r\n```\r\n/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/datasets/__init__.py:86: FutureWarning: Fetchers from the nilearn.datasets module will be updated in version 0.9 to return python strings instead of bytes and Pandas dataframes instead of Numpy arrays.\r\n  warn(\"Fetchers from the nilearn.datasets module will be \"\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/input_data/nifti_labels_masker.py\", line 213, in generate_report\r\n    return generate_report(self)\r\n  File \"/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/reporting/html_report.py\", line 211, in generate_report\r\n    overlay, image = _define_overlay(estimator)\r\n  File \"/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/reporting/html_report.py\", line 153, in _define_overlay\r\n    displays = estimator._reporting()\r\n  File \"/autofs/space/uriline_003/users/projects/OCD_NM/walker_pedersen/scripts/rest/conda/OCDNMrest/lib/python3.9/site-packages/nilearn/input_data/nifti_labels_masker.py\", line 269, in _reporting\r\n    regions_summary['region name'].append(self.labels[label])\r\nTypeError: list indices must be integers or slices, not numpy.float32\r\n```\r\nAttached is text file with the code and a copy of the glasser atlas in question\r\n[atlasExample.tar.gz](https://github.com/nilearn/nilearn/files/7289767/atlasExample.tar.gz)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/3007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/3007/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2993", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2993/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2993/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2993/events", "html_url": "https://github.com/nilearn/nilearn/issues/2993", "id": 1009420769, "node_id": "I_kwDOABLbHM48Konh", "number": 2993, "title": "LGTM.com recommendation: `masking._load_mask_img()`", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-28T08:04:30Z", "updated_at": "2021-09-29T09:14:11Z", "closed_at": "2021-09-29T09:14:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Expected behavior\r\n\r\nSee LGTM.com recommendation:\r\nhttps://lgtm.com/projects/g/nilearn/nilearn/snapshot/b08a3f3e20dc2ff1608d8d556496ab56bbf3f63a/files/nilearn/input_data/nifti_labels_masker.py#xa8f5a03b806d5a87:1\r\n\r\nEither remove the call to `masking._load_mask_img()`, or do not store the return values in variables (or add a `noqa` but unfortunately LGTM.com fails to interpret `noqa` correctly as can be seen in github/codeql#6528):\r\nhttps://github.com/nilearn/nilearn/blob/60d6746671a36f7538ff59e23b0378253ccd8c10/nilearn/input_data/nifti_labels_masker.py#L370\r\n\r\nAlso, the documentation of `masking._load_mask_img()` should describe the second item of the returned pair **`mask, mask_img.affine`**:\r\nhttps://github.com/nilearn/nilearn/blob/60d6746671a36f7538ff59e23b0378253ccd8c10/nilearn/masking.py#L42-L46\r\n\r\n### Actual behavior\r\n\r\nIt's not clear why `masking._load_mask_img()` is called, if the resulting mask is not used. My guess is that the idea is to check the mask is valid (a `ValueError` is raised if it is not valid). If so, it would be nice to document that. Can you confirm?\r\nhttps://github.com/nilearn/nilearn/blob/60d6746671a36f7538ff59e23b0378253ccd8c10/nilearn/masking.py#L30-L31\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2959", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2959/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2959/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2959/events", "html_url": "https://github.com/nilearn/nilearn/issues/2959", "id": 994216956, "node_id": "MDU6SXNzdWU5OTQyMTY5NTY=", "number": 2959, "title": "Variable defined multiple times", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-12T17:42:19Z", "updated_at": "2021-09-13T07:12:01Z", "closed_at": "2021-09-13T07:12:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code from [`nilearn/_utils/numpy_conversions.py`](https://github.com/nilearn/nilearn/blob/ac1a934/nilearn/_utils/numpy_conversions.py#L106-L107) sets `ret` twice:\r\n```python\r\n                ret = np.array(arr, copy=True)\r\n                ret = _asarray(arr, dtype=dtype, order=order)\r\n```\r\nPerhaps the intent was::\r\n```python\r\n                ret = np.array(arr, copy=True)\r\n                ret = _asarray(ret, dtype=dtype, order=order)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2957", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2957/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2957/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2957/events", "html_url": "https://github.com/nilearn/nilearn/issues/2957", "id": 994204975, "node_id": "MDU6SXNzdWU5OTQyMDQ5NzU=", "number": 2957, "title": "Modification of dictionary returned by locals()", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-12T16:45:36Z", "updated_at": "2021-09-13T13:16:20Z", "closed_at": "2021-09-13T13:16:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code from https://github.com/nilearn/nilearn/blob/ac1a934/nilearn/plotting/cm.py#L221-L222:\r\n```python\r\n# Save colormaps in the scope of the module\r\nlocals().update(_cmap_d)\r\n```\r\nraises an [LGTM alert](https://lgtm.com/projects/g/nilearn/nilearn/snapshot/d520eb8468e57b591fe97798f038a56ab134679b/files/nilearn/plotting/cm.py#x63244eecb7d9ea77:1):\r\n> Modification of dictionary returned by locals()\r\n> \r\n> Modification of the locals() dictionary will have no effect on the local variables.\r\n\r\nAnd indeed, after reading:\r\n* [Update locals from inside a function](https://stackoverflow.com/questions/30295163/update-locals-from-inside-a-function#67367191)\r\n* [Built-in Functions](https://docs.python.org/3/library/functions.html#locals)\r\n  >Update and return a dictionary representing the current local symbol table. Free variables are returned by [`locals()`](https://docs.python.org/3/library/functions.html#locals) when it is called in function blocks, but not in class blocks. Note that at the module level, [`locals()`](https://docs.python.org/3/library/functions.html#locals) and [`globals()`](https://docs.python.org/3/library/functions.html#globals) are the same dictionary.\r\n\r\nI suggest changing `locals()` \u2192 `globals()` to make the intent clear, since this happens at module level.\r\n\r\n### Expected behavior\r\n\r\nNo LGTM warning.\r\n\r\n### Actual behavior\r\n\r\nRaises an LGTM warning:\r\nhttps://lgtm.com/projects/g/nilearn/nilearn/snapshot/d520eb8468e57b591fe97798f038a56ab134679b/files/nilearn/plotting/cm.py#x63244eecb7d9ea77:1", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2957/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2955", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2955/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2955/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2955/events", "html_url": "https://github.com/nilearn/nilearn/issues/2955", "id": 993411214, "node_id": "MDU6SXNzdWU5OTM0MTEyMTQ=", "number": 2955, "title": "AxisError when computing `reporting.get_cluster_table` ", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-10T16:47:56Z", "updated_at": "2021-09-14T13:33:16Z", "closed_at": "2021-09-14T13:33:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This issue concerns what seems to me like a bug in the `reporting.get_cluster_table` method. I have been encoutering a `AxisError` raised by numpy when trying to compute the table with certain `stat_threshold` values.\r\n\r\nWith a high threshold value (e.g `3.`) the computation works fine, but when using smaller threshold values (1e-2), the error is thrown.\r\n\r\nThe error happens because the `ijk` value passed to a numpy `apply_along_axis` [here](https://github.com/nilearn/nilearn/blob/ac1a934e3b2b4061f894b518c960412df9ea4f11/nilearn/reporting/_get_clusters_table.py#L83) is an empty list. I don't know why yet. You can reproduce the error with the snippet below.\r\n\r\nI guess it makes less sense to extract peaks with a lower threshold, but it still worth investigating why the error occurs.\r\n\r\n### Expected behavior\r\n\r\n`get_clusters_table` return the clusters table whatever the `stat_threshold` value\r\n\r\n### Actual behavior\r\n\r\n`get_clusters_table` raises an error when `stat_threshold` values are small.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nimport tempfile\r\n\r\nfrom nilearn import reporting\r\nfrom nilearn.datasets import fetch_neurovault_ids\r\n\r\nDATA_PATH = tempfile.TemporaryDirectory()\r\n\r\ncollection_id = 307\r\nneurovault_element = fetch_neurovault_ids(\r\n    collection_ids=[collection_id],\r\n    mode=\"download_new\",\r\n    data_dir=str(DATA_PATH),\r\n)\r\nsample_brain_map = neurovault_element.images[0]\r\n\r\n# Working fine with a stat threshold of 3.\r\nneurovault_peaks = reporting.get_clusters_table(\r\n    sample_brain_map,\r\n    stat_threshold=3.,\r\n    min_distance=12.,\r\n)\r\n\r\n# Raising error with a stat threshold of 1e-2\r\nneurovault_peaks = reporting.get_clusters_table(\r\n    sample_brain_map,\r\n    stat_threshold=1e-2,\r\n    min_distance=12.,\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2955/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2941", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2941/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2941/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2941/events", "html_url": "https://github.com/nilearn/nilearn/issues/2941", "id": 980999594, "node_id": "MDU6SXNzdWU5ODA5OTk1OTQ=", "number": 2941, "title": "Titles get ignored in plot_surf_*", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-08-27T08:20:27Z", "updated_at": "2021-09-01T07:49:19Z", "closed_at": "2021-09-01T07:49:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nTitles are not displayed\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:0.8.1\r\n\r\n### Expected behavior\r\nTitle show off when provided\r\n\r\n### Actual behavior\r\nTitle not diplsayed\r\n\r\n### Steps and code to reproduce bug\r\nfor instance:\r\nhttps://nilearn.github.io/auto_examples/01_plotting/plot_3d_map_to_surface_projection.html#sphx-glr-auto-examples-01-plotting-plot-3d-map-to-surface-projection-py", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2941/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2939", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2939/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2939/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2939/events", "html_url": "https://github.com/nilearn/nilearn/issues/2939", "id": 980554036, "node_id": "MDU6SXNzdWU5ODA1NTQwMzY=", "number": 2939, "title": "[bug] index_img does not adjust header pixdim if necessary", "user": {"login": "dangom", "id": 7881842, "node_id": "MDQ6VXNlcjc4ODE4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7881842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dangom", "html_url": "https://github.com/dangom", "followers_url": "https://api.github.com/users/dangom/followers", "following_url": "https://api.github.com/users/dangom/following{/other_user}", "gists_url": "https://api.github.com/users/dangom/gists{/gist_id}", "starred_url": "https://api.github.com/users/dangom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dangom/subscriptions", "organizations_url": "https://api.github.com/users/dangom/orgs", "repos_url": "https://api.github.com/users/dangom/repos", "events_url": "https://api.github.com/users/dangom/events{/privacy}", "received_events_url": "https://api.github.com/users/dangom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-08-26T19:02:44Z", "updated_at": "2021-09-17T21:27:21Z", "closed_at": "2021-09-17T20:59:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nWhen slicing timepoints from a dataset with index_img, the function does not adjust the pixel dimensions or TR.\r\nThis could be critical because users may forget to adapt the TR and get wrong results if attempting to run a GLM. I could see this being the case for, e.g., separating tag and control images from an ASL time-series and dealing with perfusion series.\r\n\r\nAlthough in many examples throughout nilearn the TR is written as a variable external to the dataset, where header information being wrong is \"acceptable\" (see [example here](https://nilearn.github.io/auto_examples/04_glm_first_level/plot_design_matrix.html#sphx-glr-auto-examples-04-glm-first-level-plot-design-matrix-py)), if users save files generated with nilearn to disk it'd be nice if header info was kept in sync with the underlying data.\r\n\r\nwhat do you guys think?\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: latest from git\r\n\r\n### Expected behavior\r\n\r\nIndex img corrects pixdim of output files.\r\n\r\n### Actual behavior\r\n\r\nIndex img keeps the pixdim from the input file.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nfrom nilearn import image, datasets\r\nimport numpy as np\r\n\r\ndata = datasets.fetch_adhd(n_subjects=1)[\"func\"][0]\r\nall_timepoints = image.load_img(data)\r\nevery_other_timepoint = image.index_img(all_timepoints, slice(None, None, 2))\r\n\r\ntr =  all_timepoints.header[\"pixdim\"][4]\r\ndouble_tr = every_other_timepoint.header[\"pixdim\"][4]\r\n\r\nassert np.allclose(tr, double_tr / 2), f\"index_img did not adjust TR. TR={tr}, double TR = {double_tr}\"\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2939/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2926", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2926/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2926/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2926/events", "html_url": "https://github.com/nilearn/nilearn/issues/2926", "id": 974638447, "node_id": "MDU6SXNzdWU5NzQ2Mzg0NDc=", "number": 2926, "title": "LGTM error: Non-iterable used in for loop", "user": {"login": "DimitriPapadopoulos", "id": 3234522, "node_id": "MDQ6VXNlcjMyMzQ1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3234522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimitriPapadopoulos", "html_url": "https://github.com/DimitriPapadopoulos", "followers_url": "https://api.github.com/users/DimitriPapadopoulos/followers", "following_url": "https://api.github.com/users/DimitriPapadopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/DimitriPapadopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimitriPapadopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimitriPapadopoulos/subscriptions", "organizations_url": "https://api.github.com/users/DimitriPapadopoulos/orgs", "repos_url": "https://api.github.com/users/DimitriPapadopoulos/repos", "events_url": "https://api.github.com/users/DimitriPapadopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/DimitriPapadopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-08-19T13:00:48Z", "updated_at": "2021-10-08T12:53:24Z", "closed_at": "2021-10-08T12:53:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't fully grasp the details of [this LGTM.com alert](https://lgtm.com/projects/g/nilearn/nilearn/snapshot/0cd925e33787e277990b524efeba0c8125d04816/files/nilearn/decoding/space_net.py?sort=name&dir=ASC&mode=heatmap#x4b41318e0293a848:1):\r\n> `[ 3 Values ]` of class '`[ 3 Values ]`' may be used in for-loop.\r\n\r\nWhat are these \"3 Values\" about?\r\n\r\nNevertheless, it is true that in `l1_ratios` [might be a float, hence not iterable](https://github.com/nilearn/nilearn/blob/bbbc4ba/nilearn/decoding/space_net.py#L685-L687):\r\n```python\r\n            if isinstance(l1_ratios, numbers.Number):\r\n                l1_ratios = [l1_ratios]\r\n            for l1_ratio in l1_ratios:s.Number):\r\n```\r\nIndeed, `l1_ratios` is initialised to be a float, so why check whether it is an instance of `numbers.Number`? Am I missing something here?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2926/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2915", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2915/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2915/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2915/events", "html_url": "https://github.com/nilearn/nilearn/issues/2915", "id": 967515483, "node_id": "MDU6SXNzdWU5Njc1MTU0ODM=", "number": 2915, "title": "syntax error in glm", "user": {"login": "drammock", "id": 1810515, "node_id": "MDQ6VXNlcjE4MTA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1810515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drammock", "html_url": "https://github.com/drammock", "followers_url": "https://api.github.com/users/drammock/followers", "following_url": "https://api.github.com/users/drammock/following{/other_user}", "gists_url": "https://api.github.com/users/drammock/gists{/gist_id}", "starred_url": "https://api.github.com/users/drammock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drammock/subscriptions", "organizations_url": "https://api.github.com/users/drammock/orgs", "repos_url": "https://api.github.com/users/drammock/repos", "events_url": "https://api.github.com/users/drammock/events{/privacy}", "received_events_url": "https://api.github.com/users/drammock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-08-11T21:43:43Z", "updated_at": "2021-08-17T17:07:34Z", "closed_at": "2021-08-13T20:22:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\n#2532 introduced a syntax error that is breaking the MNE-Python CIs.  Specifically:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/f9deafe828dc21d5d4dd54b772da820ee1f4cac5/nilearn/glm/first_level/first_level.py#L147\r\n\r\nleads to this in our documentation CI build:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/tutorials/inverse/20_dipole_fit.py\", line 24, in <module>\r\n    from nilearn.plotting import plot_anat\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/nilearn/plotting/__init__.py\", line 51, in <module>\r\n    from .matrix_plotting import (plot_matrix, plot_contrast_matrix,\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/nilearn/plotting/matrix_plotting.py\", line 13, in <module>\r\n    from nilearn.glm.contrasts import expression_to_contrast_vector\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/nilearn/glm/__init__.py\", line 31, in <module>\r\n    from nilearn.glm import first_level\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/nilearn/glm/first_level/__init__.py\", line 6, in <module>\r\n    from nilearn.glm.first_level.first_level import (\r\n  File \"/home/circleci/.local/lib/python3.8/site-packages/nilearn/glm/first_level/first_level.py\", line 147\r\n    if ((noise_model[:2] != 'ar') and (noise_model is not 'ols')):\r\n                                       ^\r\nSyntaxError: \"is not\" with a literal. Did you mean \"!=\"?\r\n```\r\n\r\nNilearn version: looks like our CI installs 0.8.0\r\n\r\ncc @rob-luke \r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2915/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2891", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2891/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2891/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2891/events", "html_url": "https://github.com/nilearn/nilearn/issues/2891", "id": 932416332, "node_id": "MDU6SXNzdWU5MzI0MTYzMzI=", "number": 2891, "title": "Plotting bug in some documentation examples", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-29T09:28:26Z", "updated_at": "2021-07-09T16:22:45Z", "closed_at": "2021-06-29T13:32:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am not sure if this is related to the recent merge of #2738  or not, but some examples have weird outputs like [this one](https://7647-1235740-gh.circle-artifacts.com/0/dev/auto_examples/01_plotting/plot_demo_plotting.html#sphx-glr-auto-examples-01-plotting-plot-demo-plotting-py) or [this one](https://7647-1235740-gh.circle-artifacts.com/0/dev/auto_examples/plot_3d_and_4d_niimg.html#sphx-glr-auto-examples-plot-3d-and-4d-niimg-py):\r\n\r\n![issue](https://user-images.githubusercontent.com/2639645/123773016-a0584700-d8cc-11eb-9938-03dbb1af8ce8.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2885", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2885/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2885/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2885/events", "html_url": "https://github.com/nilearn/nilearn/issues/2885", "id": 929395618, "node_id": "MDU6SXNzdWU5MjkzOTU2MTg=", "number": 2885, "title": "Cannot use threshold with `plot_epi` although it is documented", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-24T16:12:23Z", "updated_at": "2021-06-25T14:02:06Z", "closed_at": "2021-06-25T14:02:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The function `nilearn.plotting.plot_epi` documents a `threshold` parameter:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/78f7d133b564f30883d5771a716bd9109cf7cac9/nilearn/plotting/img_plotting.py#L698-L703\r\n\r\nbut does not have a `threshold` argument:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/78f7d133b564f30883d5771a716bd9109cf7cac9/nilearn/plotting/img_plotting.py#L631-L634\r\n\r\nSo, when trying to set a threshold through `plot_epi`, it gets passed to `plot_img` through kwargs and is also passed explicitly as None:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/78f7d133b564f30883d5771a716bd9109cf7cac9/nilearn/plotting/img_plotting.py#L716-L722\r\n\r\nWhich results in the following error:\r\n\r\n```python\r\nfrom nilearn import plotting, datasets\r\nplotting.plot_epi(datasets.MNI152_FILE_PATH, threshold=.2)\r\n```\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-2-3944ca75bc88> in <module>\r\n      1 from nilearn import plotting, datasets\r\n----> 2 plotting.plot_epi(datasets.MNI152_FILE_PATH, threshold=.2)\r\n\r\n~/GitRepos/nilearn-fork/nilearn/plotting/img_plotting.py in plot_epi(epi_img, cut_coords, output_file, display_mode, figure, axes, title, annotate, draw_cross, black_bg, cmap, vmin, vmax, **kwargs)\r\n    714 \r\n    715     \"\"\"\r\n--> 716     display = plot_img(epi_img, cut_coords=cut_coords,\r\n    717                        output_file=output_file, display_mode=display_mode,\r\n    718                        figure=figure, axes=axes, title=title,\r\n\r\nTypeError: plot_img() got multiple values for keyword argument 'threshold'\r\n```\r\n\r\nWe should either remove the docstring entry or add threshold to the parameters of `plot_epi`. WDYT?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2885/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2881", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2881/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2881/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2881/events", "html_url": "https://github.com/nilearn/nilearn/issues/2881", "id": 925095903, "node_id": "MDU6SXNzdWU5MjUwOTU5MDM=", "number": 2881, "title": "Can you give a reference for the p-value calculation for contrasts?", "user": {"login": "jcrdubois", "id": 5529616, "node_id": "MDQ6VXNlcjU1Mjk2MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/5529616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcrdubois", "html_url": "https://github.com/jcrdubois", "followers_url": "https://api.github.com/users/jcrdubois/followers", "following_url": "https://api.github.com/users/jcrdubois/following{/other_user}", "gists_url": "https://api.github.com/users/jcrdubois/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcrdubois/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcrdubois/subscriptions", "organizations_url": "https://api.github.com/users/jcrdubois/orgs", "repos_url": "https://api.github.com/users/jcrdubois/repos", "events_url": "https://api.github.com/users/jcrdubois/events{/privacy}", "received_events_url": "https://api.github.com/users/jcrdubois/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-06-18T17:46:07Z", "updated_at": "2021-06-21T21:12:20Z", "closed_at": "2021-06-21T21:12:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<img width=\"359\" alt=\"Screen Shot 2021-06-18 at 10 31 17 AM\" src=\"https://user-images.githubusercontent.com/5529616/122597637-81ca9400-d020-11eb-8390-010fc9f42185.png\">\r\n\r\nThis is the relationship between t-values and p-values (plotted as `-log10(p)`) for the contrast `active - rest` in the auditory dataset distributed with nilearn. \r\nThe blue line is what I'd expect for the p-value -- a high negative t-value should yield a low p-value too. But perhaps nilearn chooses to do a one-tailed test, which I suppose is fine (one would just need to build both \"active - rest\" and \"rest - active\" if one is interested in bidirectional effects. However, I don't understand why some of the negative t-values yield a p-value that is != 1. \r\nThe code to compute the p-value is [here](https://github.com/nilearn/nilearn/blob/297b15095e75da1566018a63b23a86031b90dfa5/nilearn/glm/contrasts.py#L275\r\n): can you point me to a reference for this formulation?  (I saw a reference for the Nichols 2005 paper, but that was related to conjunction analysis, and didn't seem directly relevant)\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: nilearn==0.7.1\r\n\r\n### Expected behavior\r\n(see blue line above)\r\n\r\n### Actual behavior\r\n(see orange line above)\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\nfrom nilearn.datasets import fetch_spm_auditory\r\nfrom nilearn import image\r\nimport pandas as pd\r\nfrom nilearn.glm.first_level import FirstLevelModel\r\nimport matplotlib.pyplot as plt\r\n# load fMRI data\r\nsubject_data = fetch_spm_auditory()\r\nfmri_img = image.concat_imgs(subject_data.func)\r\n# Clean and smooth data\r\nfmri_img = image.clean_img(fmri_img, standardize=False)\r\nfmri_img = image.smooth_img(fmri_img, 5.)\r\n# load events\r\nonsets = pd.read_table(subject_data['events'])\r\n# run glm\r\nfmri_glm = FirstLevelModel(t_r=7,\r\n                           drift_model='cosine',\r\n                           hrf_model='spm', \r\n                           drift_order=1,\r\n                           noise_model='ols',\r\n                           high_pass=1/128,\r\n                           fir_delays=[0], \r\n                           standardize=False,\r\n                           signal_scaling=False,\r\n                           mask_img=False, #mask,\r\n                           minimize_memory=False)\r\nfmri_glm = fmri_glm.fit(fmri_img, onsets)\r\n# run contrast\r\nstat_maps = fmri_glm.compute_contrast('rest - active', output_type='all')\r\n# plot `-log10(p)` vs `t`\r\nplt.plot(stat_maps['stat'].get_fdata().flatten(), -np.log10(stat_maps['p_value'].get_fdata().flatten()), '.')\r\nplt.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2881/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2879", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2879/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2879/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2879/events", "html_url": "https://github.com/nilearn/nilearn/issues/2879", "id": 924655053, "node_id": "MDU6SXNzdWU5MjQ2NTUwNTM=", "number": 2879, "title": "The method of FDR threshholding in GLM", "user": {"login": "gourdchen", "id": 35017063, "node_id": "MDQ6VXNlcjM1MDE3MDYz", "avatar_url": "https://avatars.githubusercontent.com/u/35017063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gourdchen", "html_url": "https://github.com/gourdchen", "followers_url": "https://api.github.com/users/gourdchen/followers", "following_url": "https://api.github.com/users/gourdchen/following{/other_user}", "gists_url": "https://api.github.com/users/gourdchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gourdchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gourdchen/subscriptions", "organizations_url": "https://api.github.com/users/gourdchen/orgs", "repos_url": "https://api.github.com/users/gourdchen/repos", "events_url": "https://api.github.com/users/gourdchen/events{/privacy}", "received_events_url": "https://api.github.com/users/gourdchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 2969442455, "node_id": "MDU6TGFiZWwyOTY5NDQyNDU1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20low", "name": "effort: low", "color": "77c940", "default": false, "description": "Estimated low effort task"}], "state": "closed", "locked": false, "assignee": {"login": "ajthr", "id": 29701784, "node_id": "MDQ6VXNlcjI5NzAxNzg0", "avatar_url": "https://avatars.githubusercontent.com/u/29701784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajthr", "html_url": "https://github.com/ajthr", "followers_url": "https://api.github.com/users/ajthr/followers", "following_url": "https://api.github.com/users/ajthr/following{/other_user}", "gists_url": "https://api.github.com/users/ajthr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajthr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajthr/subscriptions", "organizations_url": "https://api.github.com/users/ajthr/orgs", "repos_url": "https://api.github.com/users/ajthr/repos", "events_url": "https://api.github.com/users/ajthr/events{/privacy}", "received_events_url": "https://api.github.com/users/ajthr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ajthr", "id": 29701784, "node_id": "MDQ6VXNlcjI5NzAxNzg0", "avatar_url": "https://avatars.githubusercontent.com/u/29701784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajthr", "html_url": "https://github.com/ajthr", "followers_url": "https://api.github.com/users/ajthr/followers", "following_url": "https://api.github.com/users/ajthr/following{/other_user}", "gists_url": "https://api.github.com/users/ajthr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajthr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajthr/subscriptions", "organizations_url": "https://api.github.com/users/ajthr/orgs", "repos_url": "https://api.github.com/users/ajthr/repos", "events_url": "https://api.github.com/users/ajthr/events{/privacy}", "received_events_url": "https://api.github.com/users/ajthr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-06-18T08:07:45Z", "updated_at": "2022-09-27T07:44:48Z", "closed_at": "2022-09-27T07:44:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "The nilearn/glm/thresholding.py line 101\uff1a\r\n` pos = p_vals < alpha * np.linspace(\r\n        .5 / n_samples, 1 - .5 / n_samples, n_samples)`\r\n\r\nIn my opinion, the code should be \r\n`pos = p_vals < alpha * np.linspace(1/n_samles, 1,n_samples)`\r\nWhy does \u20190.5\u2018 exist there\uff1f It confuses me.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2879/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2874", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2874/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2874/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2874/events", "html_url": "https://github.com/nilearn/nilearn/issues/2874", "id": 920461793, "node_id": "MDU6SXNzdWU5MjA0NjE3OTM=", "number": 2874, "title": "ticks missing from `view_img` colorbar for some images", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-06-14T14:18:49Z", "updated_at": "2021-06-29T20:39:57Z", "closed_at": "2021-06-29T20:39:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\nfrom nilearn import plotting, datasets\r\n\r\nplotting.view_img(datasets.load_mni152_template(), bg_img=None).open_in_browser()\r\n```\r\n\r\n![Screenshot from 2021-06-14 10-17-45](https://user-images.githubusercontent.com/9196501/121907215-d8229480-ccf9-11eb-9ac2-0452bde89220.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2863", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2863/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2863/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2863/events", "html_url": "https://github.com/nilearn/nilearn/issues/2863", "id": 911513241, "node_id": "MDU6SXNzdWU5MTE1MTMyNDE=", "number": 2863, "title": "Datasets file fetcher does not respect `requests.Session` instance", "user": {"login": "rmarkello", "id": 14265705, "node_id": "MDQ6VXNlcjE0MjY1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/14265705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmarkello", "html_url": "https://github.com/rmarkello", "followers_url": "https://api.github.com/users/rmarkello/followers", "following_url": "https://api.github.com/users/rmarkello/following{/other_user}", "gists_url": "https://api.github.com/users/rmarkello/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmarkello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmarkello/subscriptions", "organizations_url": "https://api.github.com/users/rmarkello/orgs", "repos_url": "https://api.github.com/users/rmarkello/repos", "events_url": "https://api.github.com/users/rmarkello/events{/privacy}", "received_events_url": "https://api.github.com/users/rmarkello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-06-04T13:43:08Z", "updated_at": "2021-06-05T12:25:19Z", "closed_at": "2021-06-05T12:25:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "When providing a `requests.Session` instance to the `session` argument of `nilearn.datasets.utils._fetch_files()` the session instance is not passed through to the calls to `nilearn.datasets.utils._fetch_file()` so any e.g., header information that should be sent with the requests is lost. While these functions accept `username` and `password` arguments for basic authentication, it's unclear how to provide e.g., token-based authentication without the ability to directly pass a session instance.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.7.1\r\n\r\n### Expected behavior\r\n\r\nPassing a `requests.Session` instance to the `session` keyword of `nilearn.datasets.utils._fetch_files()` should cause any header information stored in the session instance to be used when fetching the requested files.\r\n\r\n### Actual behavior\r\n\r\nThe `session` argument of `nilearn.datasets.utils._fetch_files()` is entirely ignored.\r\n\r\n### Steps and code to reproduce bug\r\n\r\nSince the issue I'm running into is in providing token-based authentication via the session header this isn't a functional MWE but should hopefully highlight the issue:\r\n\r\n```python\r\n>>> import requests\r\n>>> from nilearn.datasets.utils import _fetch_files\r\n>>> session = requests.Session()\r\n>>> session.headers['Authentication'] = 'Bearer TOKEN'\r\n>>> _fetch_files('/tmp', files=('filename.txt', 'https://authenticationrequired.com/filename.txt', {}), session=session) \r\n```\r\n\r\nThe last line will raise the error:\r\n\r\n```python-traceback\r\n~/lib/python3.8/site-packages/nilearn/datasets/utils.py in _fetch_files(data_dir, files, resume, verbose, session)\r\n    776             md5sum = opts.get('md5sum', None)\r\n    777 \r\n--> 778             dl_file = _fetch_file(url, temp_dir, resume=resume,\r\n    779                                   verbose=verbose, md5sum=md5sum,\r\n    780                                   username=opts.get('username', None),\r\n\r\n~/lib/python3.8/site-packages/nilearn/datasets/utils.py in _fetch_file(url, data_dir, resume, overwrite, md5sum, username, password, verbose, session)\r\n    614             with session.send(\r\n    615                     prepped, stream=True, timeout=_REQUESTS_TIMEOUT) as resp:\r\n--> 616                 resp.raise_for_status()\r\n    617                 with open(temp_full_name, \"wb\") as fh:\r\n    618                     _chunk_read_(resp, fh, report_hook=(verbose > 0),\r\n\r\n~/lib/python3.8/site-packages/requests/models.py in raise_for_status(self)\r\n    941 \r\n    942         if http_error_msg:\r\n--> 943             raise HTTPError(http_error_msg, response=self)\r\n    944 \r\n    945     def close(self):\r\n\r\nHTTPError: 401 Client Error: Unauthorized for url: https://authenticationrequired.com/filename.txt\r\n```\r\n\r\n### Potential fix\r\n\r\nAdding `session=session` to the following call in `nilearn.datasets.utils._fetch_files()` should remedy the issue:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/dbbd221e3633c97464034c5366faa548728c9999/nilearn/datasets/utils.py#L778-L782\r\n\r\nI recognize this isn't a user-facing function but given the keyword parameter is in the function signature and you [make a point of re-calling the function with a `requests.Session` instance if one isn't provided](https://github.com/nilearn/nilearn/blob/dbbd221e3633c97464034c5366faa548728c9999/nilearn/datasets/utils.py#L726-L731) makes it seem like it should be respected.\r\n\r\n---\r\n\r\nLet me know if you have any questions about this and, as always, thanks for the great package! :sparkles: ", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2863/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2853", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2853/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2853/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2853/events", "html_url": "https://github.com/nilearn/nilearn/issues/2853", "id": 902999404, "node_id": "MDU6SXNzdWU5MDI5OTk0MDQ=", "number": 2853, "title": "`fetch_openneuro_dataset_index` should clearly indicate it's hardcoded to retrieve a particular dataset", "user": {"login": "tyarkoni", "id": 303932, "node_id": "MDQ6VXNlcjMwMzkzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/303932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyarkoni", "html_url": "https://github.com/tyarkoni", "followers_url": "https://api.github.com/users/tyarkoni/followers", "following_url": "https://api.github.com/users/tyarkoni/following{/other_user}", "gists_url": "https://api.github.com/users/tyarkoni/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyarkoni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyarkoni/subscriptions", "organizations_url": "https://api.github.com/users/tyarkoni/orgs", "repos_url": "https://api.github.com/users/tyarkoni/repos", "events_url": "https://api.github.com/users/tyarkoni/events{/privacy}", "received_events_url": "https://api.github.com/users/tyarkoni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}, {"id": 2969440310, "node_id": "MDU6TGFiZWwyOTY5NDQwMzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20low", "name": "impact: low", "color": "75eae6", "default": false, "description": "Estimated low impact task"}, {"id": 2969444582, "node_id": "MDU6TGFiZWwyOTY5NDQ0NTgy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20low", "name": "priority: low", "color": "c5def5", "default": false, "description": "Not urgent"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-05-26T22:54:53Z", "updated_at": "2022-04-18T14:12:00Z", "closed_at": "2022-04-18T14:12:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "The docstring for `nilearn.datasets.fetch_openneuro_dataset_index` implies the function can be used to retrieve the file index from any OpenNeuro dataset, but it's actually hardcoded to only work with one dataset (ds000030). This is confusing, as the local directory takes the name of the requested dataset, even though it's always the same file list that's retrieved. A generalized function would be best if feasible, but failing that, it probably makes sense to only take a `version` argument and clarify in the docstring that the scope of the utility is limited to ds000030.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2853/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2842", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2842/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2842/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2842/events", "html_url": "https://github.com/nilearn/nilearn/issues/2842", "id": 893152445, "node_id": "MDU6SXNzdWU4OTMxNTI0NDU=", "number": 2842, "title": "Sphinx version pinning issue preventing doc building", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-05-17T09:47:48Z", "updated_at": "2021-09-02T10:29:17Z", "closed_at": "2021-09-02T10:29:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "CircleCI is currently failing when building the doc (see [this build](https://app.circleci.com/pipelines/github/nilearn/nilearn/2060/workflows/4cdb18cd-3e7c-4c11-a27d-04b77afe8154/jobs/7238) for example).\r\nProbably related to this [issue](https://github.com/sphinx-doc/sphinx/issues/9216).", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2842/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2842/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2837", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2837/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2837/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2837/events", "html_url": "https://github.com/nilearn/nilearn/issues/2837", "id": 890196794, "node_id": "MDU6SXNzdWU4OTAxOTY3OTQ=", "number": 2837, "title": "doc not building with sphinx 4.0.1", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}, {"id": 1728470102, "node_id": "MDU6TGFiZWwxNzI4NDcwMTAy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Maintenance", "name": "Maintenance", "color": "fc918f", "default": false, "description": ""}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}, {"id": 2969439694, "node_id": "MDU6TGFiZWwyOTY5NDM5Njk0", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20high", "name": "impact: high", "color": "1f1dc1", "default": false, "description": "Estimated high impact task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-12T15:16:22Z", "updated_at": "2021-05-13T02:47:59Z", "closed_at": "2021-05-13T02:47:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`make html-noplot` fails since the latest release of sphinx on monday\r\n\r\nsee for example [this build](https://app.circleci.com/pipelines/github/nilearn/nilearn/2034/workflows/2bd1d45d-b513-41d2-a941-c17feab7e8e2/jobs/7212)", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2837/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2832", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2832/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2832/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2832/events", "html_url": "https://github.com/nilearn/nilearn/issues/2832", "id": 884022290, "node_id": "MDU6SXNzdWU4ODQwMjIyOTA=", "number": 2832, "title": "test_with_globbing_patterns_with_single_image sometimes fails on Arm", "user": {"login": "ggardet", "id": 1826137, "node_id": "MDQ6VXNlcjE4MjYxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1826137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggardet", "html_url": "https://github.com/ggardet", "followers_url": "https://api.github.com/users/ggardet/followers", "following_url": "https://api.github.com/users/ggardet/following{/other_user}", "gists_url": "https://api.github.com/users/ggardet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggardet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggardet/subscriptions", "organizations_url": "https://api.github.com/users/ggardet/orgs", "repos_url": "https://api.github.com/users/ggardet/repos", "events_url": "https://api.github.com/users/ggardet/events{/privacy}", "received_events_url": "https://api.github.com/users/ggardet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2021-05-10T11:32:24Z", "updated_at": "2021-05-20T14:48:57Z", "closed_at": "2021-05-20T13:10:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "`test_with_globbing_patterns_with_single_image` **sometimes** fails on Arm (aarch64, armv7 and armv6). It looks like a race condition because the `nii` file is not available.\r\n\r\nNilearn version: 0.7.1\r\n\r\n### Expected behavior\r\nThe test should be reliable.\r\n\r\n### Actual behavior\r\nWhen the test fails, the log is:\r\n```\r\n[  304s] =================================== FAILURES ===================================\r\n[  304s] ________________ test_with_globbing_patterns_with_single_image _________________\r\n[  304s] [gw10] linux -- Python 3.9.4 /usr/bin/python3.9\r\n[  304s] \r\n[  304s]     def test_with_globbing_patterns_with_single_image():\r\n[  304s]         # With single image\r\n[  304s]         data_4d = np.zeros((40, 40, 40, 3))\r\n[  304s]         data_4d[20, 20, 20] = 1\r\n[  304s]         img_4d = nibabel.Nifti1Image(data_4d, affine=np.eye(4))\r\n[  304s]         multi_pca = MultiPCA(n_components=3)\r\n[  304s]     \r\n[  304s]         with write_tmp_imgs(img_4d, create_files=True, use_wildcards=True) as img:\r\n[  304s]             input_image = _tmp_dir() + img\r\n[  304s] >           multi_pca.fit(input_image)\r\n[  304s] \r\n[  304s] nilearn/decomposition/tests/test_multi_pca.py:184: \r\n[  304s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[  304s] nilearn/decomposition/base.py:418: in fit\r\n[  304s]     data = mask_and_reduce(\r\n[  304s] nilearn/decomposition/base.py:172: in mask_and_reduce\r\n[  304s]     data_list = Parallel(n_jobs=n_jobs)(\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/parallel.py:1044: in __call__\r\n[  304s]     while self.dispatch_one_batch(iterator):\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/parallel.py:859: in dispatch_one_batch\r\n[  304s]     self._dispatch(tasks)\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/parallel.py:777: in _dispatch\r\n[  304s]     job = self._backend.apply_async(batch, callback=cb)\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/_parallel_backends.py:208: in apply_async\r\n[  304s]     result = ImmediateResult(func)\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/_parallel_backends.py:572: in __init__\r\n[  304s]     self.results = batch()\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/parallel.py:262: in __call__\r\n[  304s]     return [func(*args, **kwargs)\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/parallel.py:262: in <listcomp>\r\n[  304s]     return [func(*args, **kwargs)\r\n[  304s] nilearn/decomposition/base.py:211: in _mask_and_reduce_single\r\n[  304s]     this_data = masker.transform(img, confound)\r\n[  304s] nilearn/input_data/multi_nifti_masker.py:344: in transform\r\n[  304s]     return self.transform_single_imgs(imgs)\r\n[  304s] nilearn/input_data/nifti_masker.py:443: in transform_single_imgs\r\n[  304s]     data = self._cache(filter_and_mask,\r\n[  304s] /usr/lib/python3.9/site-packages/joblib/memory.py:352: in __call__\r\n[  304s]     return self.func(*args, **kwargs)\r\n[  304s] nilearn/input_data/nifti_masker.py:56: in filter_and_mask\r\n[  304s]     imgs = _utils.check_niimg(imgs, atleast_4d=True, ensure_ndim=4)\r\n[  304s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[  304s] \r\n[  304s] niimg = '/tmp/nilearn_h4rbgbk1.nii', ensure_ndim = 4, atleast_4d = True\r\n[  304s] dtype = None, return_iterator = False, wildcards = True\r\n[  304s] \r\n[  304s]     def check_niimg(niimg, ensure_ndim=None, atleast_4d=False, dtype=None,\r\n[  304s]                     return_iterator=False,\r\n[  304s]                     wildcards=True):\r\n[  304s]         \"\"\"Check that niimg is a proper 3D/4D niimg. Turn filenames into objects.\r\n[  304s]     \r\n[  304s]         Parameters\r\n[  304s]         ----------\r\n[  304s]         niimg : Niimg-like object\r\n[  304s]             See http://nilearn.github.io/manipulating_images/input_output.html\r\n[  304s]             If niimg is a string, consider it as a path to Nifti image and\r\n[  304s]             call nibabel.load on it. The '~' symbol is expanded to the user home\r\n[  304s]             folder.\r\n[  304s]             If it is an object, check if the affine attribute present and that\r\n[  304s]             nilearn.image.get_data returns a result, raise TypeError otherwise.\r\n[  304s]     \r\n[  304s]         ensure_ndim : integer {3, 4}, optional\r\n[  304s]             Indicate the dimensionality of the expected niimg. An\r\n[  304s]             error is raised if the niimg is of another dimensionality.\r\n[  304s]     \r\n[  304s]         atleast_4d : boolean, optional\r\n[  304s]             Indicates if a 3d image should be turned into a single-scan 4d niimg.\r\n[  304s]             Default=False.\r\n[  304s]     \r\n[  304s]         dtype : {None, dtype, \"auto\"}, optional\r\n[  304s]             Data type toward which the data should be converted. If \"auto\", the\r\n[  304s]             data will be converted to int32 if dtype is discrete and float32 if it\r\n[  304s]             is continuous. If None, data will not be converted to a new data type.\r\n[  304s]             Default=None.\r\n[  304s]     \r\n[  304s]         return_iterator : boolean, optional\r\n[  304s]             Returns an iterator on the content of the niimg file input.\r\n[  304s]             Default=False.\r\n[  304s]     \r\n[  304s]         wildcards : boolean, optional\r\n[  304s]             Use niimg as a regular expression to get a list of matching input\r\n[  304s]             filenames.\r\n[  304s]             If multiple files match, the returned list is sorted using an ascending\r\n[  304s]             order.\r\n[  304s]             If no file matches the regular expression, a ValueError exception is\r\n[  304s]             raised.\r\n[  304s]             Default=True.\r\n[  304s]     \r\n[  304s]         Returns\r\n[  304s]         -------\r\n[  304s]         result : 3D/4D Niimg-like object\r\n[  304s]             Result can be nibabel.Nifti1Image or the input, as-is. It is guaranteed\r\n[  304s]             that the returned object has an affine attribute and that its data can\r\n[  304s]             be retrieved with nilearn.image.get_data.\r\n[  304s]     \r\n[  304s]         Notes\r\n[  304s]         -----\r\n[  304s]         In nilearn, special care has been taken to make image manipulation easy.\r\n[  304s]         This method is a kind of pre-requisite for any data processing method in\r\n[  304s]         nilearn because it checks if data have a correct format and loads them if\r\n[  304s]         necessary.\r\n[  304s]     \r\n[  304s]         Its application is idempotent.\r\n[  304s]     \r\n[  304s]         See also\r\n[  304s]         --------\r\n[  304s]             _iter_check_niimg, check_niimg_3d, check_niimg_4d\r\n[  304s]     \r\n[  304s]         \"\"\"\r\n[  304s]         from ..image import new_img_like  # avoid circular imports\r\n[  304s]     \r\n[  304s]         if isinstance(niimg, str):\r\n[  304s]             if wildcards and ni.EXPAND_PATH_WILDCARDS:\r\n[  304s]                 # Ascending sorting + expand user path\r\n[  304s]                 filenames = sorted(glob.glob(os.path.expanduser(niimg)))\r\n[  304s]     \r\n[  304s]                 # processing filenames matching globbing expression\r\n[  304s]                 if len(filenames) >= 1 and glob.has_magic(niimg):\r\n[  304s]                     niimg = filenames  # iterable case\r\n[  304s]                 # niimg is an existing filename\r\n[  304s]                 elif [niimg] == filenames:\r\n[  304s]                     niimg = filenames[0]\r\n[  304s]                 # No files found by glob\r\n[  304s]                 elif glob.has_magic(niimg):\r\n[  304s]                     # No files matching the glob expression, warn the user\r\n[  304s]                     message = (\"No files matching the entered niimg expression: \"\r\n[  304s]                                 \"'%s'.\\n You may have left wildcards usage \"\r\n[  304s]                                \"activated: please set the global constant \"\r\n[  304s]                                \"'nilearn.EXPAND_PATH_WILDCARDS' to False to \"\r\n[  304s]                                \"deactivate this behavior.\") % niimg\r\n[  304s]                     raise ValueError(message)\r\n[  304s]                 else:\r\n[  304s] >                   raise ValueError(\"File not found: '%s'\" % niimg)\r\n[  304s] E                   ValueError: File not found: '/tmp/nilearn_h4rbgbk1.nii'\r\n[  304s] \r\n[  304s] nilearn/_utils/niimg_conversions.py:271: ValueError\r\n```\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\nRun tests on aarch64. \r\nTested with openSUSE Tumbleweed aarch64 (and armv7, armv6).\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2832/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2818", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2818/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2818/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2818/events", "html_url": "https://github.com/nilearn/nilearn/issues/2818", "id": 878550715, "node_id": "MDU6SXNzdWU4Nzg1NTA3MTU=", "number": 2818, "title": "BUG: broken reference in example", "user": {"login": "Craskermasker", "id": 3617325, "node_id": "MDQ6VXNlcjM2MTczMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/3617325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Craskermasker", "html_url": "https://github.com/Craskermasker", "followers_url": "https://api.github.com/users/Craskermasker/followers", "following_url": "https://api.github.com/users/Craskermasker/following{/other_user}", "gists_url": "https://api.github.com/users/Craskermasker/gists{/gist_id}", "starred_url": "https://api.github.com/users/Craskermasker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Craskermasker/subscriptions", "organizations_url": "https://api.github.com/users/Craskermasker/orgs", "repos_url": "https://api.github.com/users/Craskermasker/repos", "events_url": "https://api.github.com/users/Craskermasker/events{/privacy}", "received_events_url": "https://api.github.com/users/Craskermasker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-07T07:23:52Z", "updated_at": "2021-05-07T10:57:27Z", "closed_at": "2021-05-07T10:57:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nBroken reference to vol_to_surf in:\r\n\r\nexamples/01_plotting/plot_3d_map_to_surface_projection.py\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2818/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2818/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2814", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2814/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2814/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2814/events", "html_url": "https://github.com/nilearn/nilearn/issues/2814", "id": 877721983, "node_id": "MDU6SXNzdWU4Nzc3MjE5ODM=", "number": 2814, "title": "Unclear bandpass filter application in `signal.clean`", "user": {"login": "htwangtw", "id": 13743617, "node_id": "MDQ6VXNlcjEzNzQzNjE3", "avatar_url": "https://avatars.githubusercontent.com/u/13743617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/htwangtw", "html_url": "https://github.com/htwangtw", "followers_url": "https://api.github.com/users/htwangtw/followers", "following_url": "https://api.github.com/users/htwangtw/following{/other_user}", "gists_url": "https://api.github.com/users/htwangtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/htwangtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/htwangtw/subscriptions", "organizations_url": "https://api.github.com/users/htwangtw/orgs", "repos_url": "https://api.github.com/users/htwangtw/repos", "events_url": "https://api.github.com/users/htwangtw/events{/privacy}", "received_events_url": "https://api.github.com/users/htwangtw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-06T16:45:29Z", "updated_at": "2021-05-07T08:41:43Z", "closed_at": "2021-05-07T07:06:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I found the following lines of code a bit confusing:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/5f1cbf3645ae4f927857ff30db3e3121573020e3/nilearn/signal.py#L589-L599\r\n\r\nAlmost immediate after this, confound regression was performed. However, inside the statement triggering confound regression, we have the duplicated code block:\r\nhttps://github.com/nilearn/nilearn/blob/5f1cbf3645ae4f927857ff30db3e3121573020e3/nilearn/signal.py#L606-L619\r\n\r\nI think it is possible to apply butterworth filter twice if the user provide extra confound regressors. \r\n@jerdra has done a lot of work related to filtering and signal handling, I would like you to double check on this issue.\r\n\r\nThere are other duplications that doesn't effect the output (the `t_r` argument check in L586 and L594)\r\nOverall, I think `singal.clean` can be benefit from refactoring so we can better address future changes.\r\nPlease let me know what you think.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2814/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2814/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2797", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2797/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2797/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2797/events", "html_url": "https://github.com/nilearn/nilearn/issues/2797", "id": 876705547, "node_id": "MDU6SXNzdWU4NzY3MDU1NDc=", "number": 2797, "title": "Fix ref in whatsnew", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-05T18:01:57Z", "updated_at": "2021-05-06T06:34:22Z", "closed_at": "2021-05-06T06:34:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "CircleCI is failing on master due to this ref in the whatsnew file introduced in #2792 : \r\n\r\n:func:`nilearn.glm.first_level.FirstLevelModel._get_voxelwise_model_attribute`\r\n\r\nSince `_get_voxelwise_model_attribute` is a private function, this ref isn't working.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2778", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2778/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2778/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2778/events", "html_url": "https://github.com/nilearn/nilearn/issues/2778", "id": 874575242, "node_id": "MDU6SXNzdWU4NzQ1NzUyNDI=", "number": 2778, "title": "Axes Cutoff in Example 9.2.15.9 (plotting.plot_img_on_surf)", "user": {"login": "tvanasse", "id": 8116564, "node_id": "MDQ6VXNlcjgxMTY1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8116564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tvanasse", "html_url": "https://github.com/tvanasse", "followers_url": "https://api.github.com/users/tvanasse/followers", "following_url": "https://api.github.com/users/tvanasse/following{/other_user}", "gists_url": "https://api.github.com/users/tvanasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/tvanasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tvanasse/subscriptions", "organizations_url": "https://api.github.com/users/tvanasse/orgs", "repos_url": "https://api.github.com/users/tvanasse/repos", "events_url": "https://api.github.com/users/tvanasse/events{/privacy}", "received_events_url": "https://api.github.com/users/tvanasse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 744591066, "node_id": "MDU6TGFiZWw3NDQ1OTEwNjY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20medium", "name": "effort: medium", "color": "ddad1a", "default": false, "description": "Estimated medium effort task"}, {"id": 2969441148, "node_id": "MDU6TGFiZWwyOTY5NDQxMTQ4", "url": "https://api.github.com/repos/nilearn/nilearn/labels/impact:%20medium", "name": "impact: medium", "color": "bac1fc", "default": false, "description": "Estimated medium impact task"}], "state": "closed", "locked": false, "assignee": {"login": "tvanasse", "id": 8116564, "node_id": "MDQ6VXNlcjgxMTY1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8116564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tvanasse", "html_url": "https://github.com/tvanasse", "followers_url": "https://api.github.com/users/tvanasse/followers", "following_url": "https://api.github.com/users/tvanasse/following{/other_user}", "gists_url": "https://api.github.com/users/tvanasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/tvanasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tvanasse/subscriptions", "organizations_url": "https://api.github.com/users/tvanasse/orgs", "repos_url": "https://api.github.com/users/tvanasse/repos", "events_url": "https://api.github.com/users/tvanasse/events{/privacy}", "received_events_url": "https://api.github.com/users/tvanasse/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tvanasse", "id": 8116564, "node_id": "MDQ6VXNlcjgxMTY1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8116564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tvanasse", "html_url": "https://github.com/tvanasse", "followers_url": "https://api.github.com/users/tvanasse/followers", "following_url": "https://api.github.com/users/tvanasse/following{/other_user}", "gists_url": "https://api.github.com/users/tvanasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/tvanasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tvanasse/subscriptions", "organizations_url": "https://api.github.com/users/tvanasse/orgs", "repos_url": "https://api.github.com/users/tvanasse/repos", "events_url": "https://api.github.com/users/tvanasse/events{/privacy}", "received_events_url": "https://api.github.com/users/tvanasse/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-05-03T13:27:57Z", "updated_at": "2021-07-09T16:24:44Z", "closed_at": "2021-05-20T23:32:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[`Example 9.2.15.9`](https://nilearn.github.io/auto_examples/01_plotting/plot_3d_map_to_surface_projection.html#plot-multiple-views-of-the-3d-volume-on-a-surface) features a quick plot showing multiple views of a volumetric stat map on an average surface. \r\n\r\n![sphx_glr_plot_3d_map_to_surface_projection_006](https://user-images.githubusercontent.com/8116564/116880214-5c580700-abe7-11eb-8af0-3c229cb1ffff.png)\r\n\r\nHowever, the brain is cutoff on both axes (picture shown) both in the online example and when I use it on nilearn 0.7.1 within a jupyter notebook using the following code\r\n\r\n```python\r\nfig, ax = plotting.plot_img_on_surf(new_image,\r\n                          views=['lateral','medial'],\r\n                          hemispheres=['left', 'right'],\r\n                          inflate=True,\r\n                          colorbar=True\r\n                         )\r\n```\r\nPerhaps this is easily fixed post-hoc by adjusting matplotlib parameters, but it is not obvious to me. ", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2772", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2772/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2772/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2772/events", "html_url": "https://github.com/nilearn/nilearn/issues/2772", "id": 869025184, "node_id": "MDU6SXNzdWU4NjkwMjUxODQ=", "number": 2772, "title": "`FirstLevelModel._get_voxelwise_model_attribute` only returns first design matrix's attribute", "user": {"login": "tsalo", "id": 8228902, "node_id": "MDQ6VXNlcjgyMjg5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8228902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsalo", "html_url": "https://github.com/tsalo", "followers_url": "https://api.github.com/users/tsalo/followers", "following_url": "https://api.github.com/users/tsalo/following{/other_user}", "gists_url": "https://api.github.com/users/tsalo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsalo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsalo/subscriptions", "organizations_url": "https://api.github.com/users/tsalo/orgs", "repos_url": "https://api.github.com/users/tsalo/repos", "events_url": "https://api.github.com/users/tsalo/events{/privacy}", "received_events_url": "https://api.github.com/users/tsalo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-04-27T16:21:48Z", "updated_at": "2021-05-05T15:37:08Z", "closed_at": "2021-05-05T15:37:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe FirstLevelModel attributes which use `_get_voxelwise_model_attribute()` only return the img for the first design matrix, rather than all of the design matrices' associated imgs.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: ~0.7.1 (`master` at c4839dd)\r\n\r\n### Expected behavior\r\n\r\nAccessing one of the voxelwise attributes which rely on `FirstLevelModel._get_voxelwise_model_attribute()`, such as `FirstLevelModel.residuals`, `FirstLevelModel.predicted`, or `FirstLevelModel.r_square`, should return a list of Nifti1Image objects with the same length as `FirstLevelModel.design_matrices_`.\r\n\r\n### Actual behavior\r\n\r\nThe attributes are lists with only one item.\r\n\r\n### The associated code\r\n\r\nhttps://github.com/nilearn/nilearn/blob/c4839ddfe68ddf15775def1fc0ce9ea23544a527/nilearn/glm/first_level/first_level.py#L668-L686\r\n\r\n### The solution\r\n\r\nUnindenting line 686 should fix it, I think. There should also be at least one test to make sure that the length of the attribute list is the same as the length of `model.design_matrices`.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2772/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2772/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2768", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2768/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2768/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2768/events", "html_url": "https://github.com/nilearn/nilearn/issues/2768", "id": 865095813, "node_id": "MDU6SXNzdWU4NjUwOTU4MTM=", "number": 2768, "title": "Decoder with dummy classifier estimator always predict same label", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-22T15:39:57Z", "updated_at": "2021-06-03T07:10:19Z", "closed_at": "2021-06-03T07:10:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It looks like the decoder with dummy classifier is always predicting the first class no matter the frequencies of the labels.\r\n\r\nHere is an example using the Haxby dataset, where I change the target frequencies:\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nfrom numpy.random import choice\r\nfrom collections import Counter\r\nfrom nilearn.image import index_img\r\nfrom nilearn.datasets import fetch_haxby\r\nfrom nilearn.decoding import Decoder\r\n\r\n# Load and pre-process data\r\nhaxby_dataset = fetch_haxby()\r\nbehavioral = pd.read_csv(haxby_dataset.session_target[0], delimiter=' ')\r\nconditions = behavioral['labels']\r\n# We consider 4 classes here\r\ncondition_mask = conditions.isin(['face', 'cat', 'bottle', 'shoe'])\r\ndata_subset = index_img(haxby_dataset.func[0], \r\n                        condition_mask)\r\nconditions = conditions[condition_mask].values\r\nprint(\"Classes are initially perfectly balanced:\")\r\nprint(Counter(conditions))\r\n# Split data in train test for simplicity\r\ntrain = index_img(data_subset, slice(0, -20)) \r\ntest  = index_img(data_subset, slice(-20, None))\r\nconditions_train = conditions[:-20]\r\nconditions_test = conditions[-20:]\r\nprint(\"Dummy decoder predictions:\")\r\ndummy_decoder = Decoder(estimator='dummy_classifier', \r\n                        mask=haxby_dataset.mask_vt[0])\r\ndummy_decoder.fit(train, \r\n                  conditions_train)\r\nprediction = dummy_decoder.predict(test)\r\ndummy_decoder.classes_[prediction]\r\n```\r\n```\r\nClasses are initially perfectly balanced:\r\nCounter({'face': 108, 'cat': 108, 'shoe': 108, 'bottle': 108})\r\nDummy decoder predictions:\r\narray(['bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle'], dtype='<U6')\r\n```\r\n\r\n```python\r\n# Resample the labels to make bottle very unfrequent\r\n# and face very frequent, such that we would expect the\r\n# dummy decoder to always predict face rather than bottle\r\nfake_conditions = choice(['face', 'cat', 'bottle', 'shoe'], \r\n                         len(conditions), \r\n                         p=[0.6, 0.2, 0.05, 0.15])\r\nprint(\"Resample the labels to make bottle very unlikely:\")\r\nprint(Counter(fake_conditions))\r\nfake_conditions_train = fake_conditions[:-20]\r\nfake_conditions_test = fake_conditions[-20:]\r\nprint(\"Dummy decoder predictions:\")\r\ndummy_decoder = Decoder(estimator='dummy_classifier', \r\n                        mask=haxby_dataset.mask_vt[0])\r\ndummy_decoder.fit(train, \r\n                  fake_conditions_train)\r\nprediction = dummy_decoder.predict(test)\r\ndummy_decoder.classes_[prediction]\r\n```\r\n```\r\nResample the labels to make bottle very unlikely:\r\nCounter({'face': 265, 'cat': 93, 'shoe': 55, 'bottle': 19})\r\nDummy decoder predictions:\r\narray(['bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle', 'bottle', 'bottle', 'bottle', 'bottle',\r\n       'bottle', 'bottle'], dtype='<U6')\r\n```\r\n\r\nMaybe I'm missing something here, but I would expect a behavior like the following:\r\n\r\n```python\r\nfrom nilearn.input_data import NiftiMasker\r\nfrom sklearn.dummy import DummyClassifier\r\nd = DummyClassifier()\r\nmasker = NiftiMasker(haxby_dataset.mask_vt[0])\r\nX_train = masker.fit_transform(train)\r\nd.fit(X_train, \r\n      fake_conditions_train)\r\nd.predict(masker.fit_transform(test))\r\n```\r\n```\r\narray(['face', 'face', 'face', 'face', 'face', 'face', 'face', 'face',\r\n       'face', 'face', 'face', 'face', 'face', 'face', 'face', 'face',\r\n       'face', 'face', 'face', 'face'], dtype='<U4')\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2748", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2748/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2748/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2748/events", "html_url": "https://github.com/nilearn/nilearn/issues/2748", "id": 849118171, "node_id": "MDU6SXNzdWU4NDkxMTgxNzE=", "number": 2748, "title": "AttributeError: 'xml.etree.ElementTree.Element' object has no attribute 'getiterator'", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-02T09:50:15Z", "updated_at": "2021-04-03T09:28:10Z", "closed_at": "2021-04-03T09:28:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With Python 3.9+:\r\n\r\n```python\r\nfrom nilearn.datasets import fetch_atlas_aal\r\naal = fetch_atlas_aal()\r\n```\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/nicolas/anaconda3/envs/py39/lib/python3.9/site-packages/nilearn/datasets/atlas.py\", line 804, in fetch_atlas_aal\r\n    for label in root.getiterator('label'):\r\nAttributeError: 'xml.etree.ElementTree.Element' object has no attribute 'getiterator'\r\n```\r\n\r\nSee discussion on [Neurostars](https://neurostars.org/t/mapping-voxel-number-to-brain-region/18422/4).", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2748/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2736", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2736/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2736/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2736/events", "html_url": "https://github.com/nilearn/nilearn/issues/2736", "id": 835795964, "node_id": "MDU6SXNzdWU4MzU3OTU5NjQ=", "number": 2736, "title": "get_iframe() doesn't apply view_img()'s configuration", "user": {"login": "ZviBaratz", "id": 22370149, "node_id": "MDQ6VXNlcjIyMzcwMTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/22370149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZviBaratz", "html_url": "https://github.com/ZviBaratz", "followers_url": "https://api.github.com/users/ZviBaratz/followers", "following_url": "https://api.github.com/users/ZviBaratz/following{/other_user}", "gists_url": "https://api.github.com/users/ZviBaratz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZviBaratz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZviBaratz/subscriptions", "organizations_url": "https://api.github.com/users/ZviBaratz/orgs", "repos_url": "https://api.github.com/users/ZviBaratz/repos", "events_url": "https://api.github.com/users/ZviBaratz/events{/privacy}", "received_events_url": "https://api.github.com/users/ZviBaratz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-19T10:15:25Z", "updated_at": "2021-03-19T11:32:13Z", "closed_at": "2021-03-19T11:32:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI ran into an issue trying to embed the returned `view_img()`'s `StatMapView`'s into an HTML page using the `get_iframe()` method. \r\nCalling `view_img()` with the `bg_img=False` and `cmap=cm.bone` keyword arguments seems to work fine when displayed in the browser, and even more curiously, when called within a Jupyter notebook, However, when the same scan is embedded within an external HTML page using the `get_iframe()` method's output:\r\n\r\n![image](https://user-images.githubusercontent.com/22370149/111766236-f79e5280-88ad-11eb-93dc-eca3250060fc.png)\r\n\r\nWhereas within a notebook (the desired result):\r\n![image](https://user-images.githubusercontent.com/22370149/111766539-549a0880-88ae-11eb-9414-ebbfb1c2bae8.png)\r\n\r\nAs far as I understand the notebook simply calls the `get_iframe()` method (by triggering the `_repr_html()` method) so it's odd the results are different. Anyone has any ideas?\r\n\r\nThank you for your work as always,\r\nZvi\r\n\r\n> _I am using nilearn 0.7.1 on a LInux (Kubuntu) machine._\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2730", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2730/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2730/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2730/events", "html_url": "https://github.com/nilearn/nilearn/issues/2730", "id": 830238243, "node_id": "MDU6SXNzdWU4MzAyMzgyNDM=", "number": 2730, "title": "Should not detrend go before low and high-pass filtering too for confounders in signal.clean?", "user": {"login": "jrasero", "id": 25054369, "node_id": "MDQ6VXNlcjI1MDU0MzY5", "avatar_url": "https://avatars.githubusercontent.com/u/25054369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrasero", "html_url": "https://github.com/jrasero", "followers_url": "https://api.github.com/users/jrasero/followers", "following_url": "https://api.github.com/users/jrasero/following{/other_user}", "gists_url": "https://api.github.com/users/jrasero/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrasero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrasero/subscriptions", "organizations_url": "https://api.github.com/users/jrasero/orgs", "repos_url": "https://api.github.com/users/jrasero/repos", "events_url": "https://api.github.com/users/jrasero/events{/privacy}", "received_events_url": "https://api.github.com/users/jrasero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-03-12T15:42:51Z", "updated_at": "2021-05-05T07:28:53Z", "closed_at": "2021-05-05T07:28:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI don't know whether this is an issue or not, but I am trying to see if the deconfounding provided by the function _**signal.clean**_ works effectively or not on my data and I think it is not behaving as I expect, in particular when I combine it with a high-pass filtering. I know there's been a lot of issues around all these, with a recent pull-request #2609, which however does not seem to resolve my (apparent) issue.\r\n\r\nSince **_signal.clean_** also applies the high-pass filtering to the confounds in order to keep this filter orthogonal, in order to see if the confounds removal works, I need to check that the correlation between the cleaned signal and the detrended and high-pass filtered confounders is indeed zero. \r\n\r\nHere is what I've done and where the issue arises. First, just with detrending and then confounds removal:\r\n\r\n```\r\nimport numpy as np\r\nfrom nilearn.signal import clean\r\nimport matplotlib.pylab as plt\r\n\r\ncorrs_x_c = []\r\nfor ii in range(1000):\r\n    c = np.random.randn(100)[:,None]\r\n    X = c + np.random.randn(100)[:,None]\r\n\r\n    # Detrend + deconfounding\r\n    X_clean = clean(X, detrend = True, high_pass = None, standardize_confounds=True, standardize=False, confounds=c)\r\n    c_clean = clean(c, detrend = True, high_pass = None, standardize=False)\r\n    corrs_x_c.append(np.corrcoef(X_clean.T, c_clean.T)[0,1])\r\nplt.hist(corrs_x_c)\r\nplt.title(\"Correlation between X_clean and c_clean\")\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/25054369/110956473-a96ed980-8318-11eb-8107-84b90ae89fd1.png)\r\n\r\nSo here, the behaviour is the expected one. \r\n\r\nThe problem is when I insert a high-pass filtering (and I guess with a low-pass will happen too). Following the same example:\r\n\r\n```\r\nimport numpy as np\r\nfrom nilearn.signal import clean\r\nimport matplotlib.pylab as plt\r\n\r\ncorrs_x_c = []\r\nfor ii in range(1000):\r\n    c = np.random.randn(100)[:,None]\r\n    X = c + np.random.randn(100)[:,None]\r\n\r\n    # Detrend + High-pass filtering + deconfounding\r\n    X_clean = clean(X, detrend=True, high_pass = 0.01, standardize_confounds=True, standardize=False, confounds=c)\r\n    c_clean = clean(c, detrend=True, high_pass = 0.01, standardize=False)\r\n    corrs_x_c.append(np.corrcoef(X_clean.T, c_clean.T)[0,1])\r\nplt.hist(corrs_x_c)\r\nplt.title(\"Correlation between X_clean and c_clean\")\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/25054369/110958370-a2e16180-831a-11eb-9c0d-d59cc8448bee.png)\r\n\r\nSo as you can see, clean hasn't removed the confounders effectively from the signal.\r\n\r\nI think the problem comes from the low and high-pass filtering, which, in the current code of the **_clean_** function, is performed before detrending (around line 600 in signal.py):\r\n\r\n```\r\n# Remove confounds\r\n    if confounds is not None:\r\n        confounds = _ensure_float(confounds)\r\n        # Apply low- and high-pass filters to keep filters orthogonal\r\n        # (according to Lindquist et al. (2018))\r\n        if low_pass is not None or high_pass is not None:\r\n\r\n            confounds = butterworth(confounds, sampling_rate=1. / t_r,\r\n                                    low_pass=low_pass, high_pass=high_pass)\r\n\r\n        confounds = _standardize(confounds, standardize=standardize_confounds,\r\n                                 detrend=detrend)\r\n```\r\n\r\nHowever, for the signal, the order is first detrending and then high-pass filtering. Shouldn't the confounders follow the same order too?\r\n\r\nIn fact, modifying locally the original  _**clean**_ function in signal.py to the following:\r\n\r\n```\r\n\r\n# Remove confounds\r\nif confounds is not None:\r\n    confounds = _ensure_float(confounds)\r\n    \r\n    # Orthogonalise confounders to detreding first\r\n    if detrend:\r\n        confounds = _standardize(confounds, standardize=False,\r\n                                    detrend=detrend)\r\n\r\n    # Apply low- and high-pass filters to keep filters orthogonal\r\n    # (according to Lindquist et al. (2018))    \r\n    if low_pass is not None or high_pass is not None:\r\n\r\n        confounds = butterworth(confounds, sampling_rate=1. / t_r,\r\n                                low_pass=low_pass, high_pass=high_pass)\r\n\r\n    confounds = _standardize(confounds, standardize=standardize_confounds,\r\n                                detrend=False)\r\n```\r\n\r\nIt solves my issue above. \r\n\r\nDoes this make sense?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2730/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2724", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2724/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2724/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2724/events", "html_url": "https://github.com/nilearn/nilearn/issues/2724", "id": 825411808, "node_id": "MDU6SXNzdWU4MjU0MTE4MDg=", "number": 2724, "title": "support 1D inputs with inverse_transform", "user": {"login": "jdkent", "id": 12564882, "node_id": "MDQ6VXNlcjEyNTY0ODgy", "avatar_url": "https://avatars.githubusercontent.com/u/12564882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdkent", "html_url": "https://github.com/jdkent", "followers_url": "https://api.github.com/users/jdkent/followers", "following_url": "https://api.github.com/users/jdkent/following{/other_user}", "gists_url": "https://api.github.com/users/jdkent/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdkent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdkent/subscriptions", "organizations_url": "https://api.github.com/users/jdkent/orgs", "repos_url": "https://api.github.com/users/jdkent/repos", "events_url": "https://api.github.com/users/jdkent/events{/privacy}", "received_events_url": "https://api.github.com/users/jdkent/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-09T06:32:13Z", "updated_at": "2022-08-23T14:38:09Z", "closed_at": "2022-08-23T14:38:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nSome maskers support 1D input for `inverse_transform`, while others do not\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.7\r\n\r\n### Expected behavior\r\n\r\nConsistent behavior across maskers (all accept 1D or do not)\r\n(the [base_masker](https://github.com/nilearn/nilearn/blob/c8ecb48ed953c9fb20372e0e110fc42ff3f96145/nilearn/input_data/base_masker.py#L243-L264) accepts [1D input](https://github.com/nilearn/nilearn/blob/5818857e1786985b0d6ce2109929a89147c95090/nilearn/masking.py#L882) so I'm inclined to have `inverse_transform` accept 1D input.\r\n(also biased because [NiMARE](https://github.com/neurostuff/NiMARE) has a lot of cases where we just want to transform 1 statistical map and have the output be 3D)\r\n\r\n### Actual behavior\r\n\r\n`NiftiMasker` accepts 1D input for `inverse_transform`, but `NiftiLabelsMasker` does not (and presumably other maskers may or may not support 1D inputs)\r\n\r\n\r\n### Steps and code to reproduce bug\r\n\r\nTBA\r\n```python\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2705", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2705/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2705/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2705/events", "html_url": "https://github.com/nilearn/nilearn/issues/2705", "id": 811963518, "node_id": "MDU6SXNzdWU4MTE5NjM1MTg=", "number": 2705, "title": "Possible identical design matrix columns with generate_fake_fmri_data_and_design", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-19T11:57:34Z", "updated_at": "2021-02-22T10:14:23Z", "closed_at": "2021-02-22T10:14:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**Description**\r\n\r\nThe function `generate_fake_fmri_data_and_design` can return design matrices with identically named columns because these names (letters) are randomly sampled using the numpy `choice`  function which does sampling with replacement by default:\r\n\r\nhttps://github.com/nilearn/nilearn/blob/55e3f26dbd9fc6e89516e5f37e8aae23ec6086a9/nilearn/_utils/data_gen.py#L344\r\n\r\nThis is causing the recently added test `test_high_level_glm_different_design_matrices_formulas` to fail in a random fashion because it computes contrast of the form \"a-a\" (see current master failure for instance...).\r\n\r\n**Proposed fix**\r\n\r\nDo sampling without replacement to avoid this.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2700", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2700/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2700/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2700/events", "html_url": "https://github.com/nilearn/nilearn/issues/2700", "id": 810415642, "node_id": "MDU6SXNzdWU4MTA0MTU2NDI=", "number": 2700, "title": "get_clusters_table does not allow file input and does not check that image is 3D", "user": {"login": "jdkent", "id": 12564882, "node_id": "MDQ6VXNlcjEyNTY0ODgy", "avatar_url": "https://avatars.githubusercontent.com/u/12564882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdkent", "html_url": "https://github.com/jdkent", "followers_url": "https://api.github.com/users/jdkent/followers", "following_url": "https://api.github.com/users/jdkent/following{/other_user}", "gists_url": "https://api.github.com/users/jdkent/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdkent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdkent/subscriptions", "organizations_url": "https://api.github.com/users/jdkent/orgs", "repos_url": "https://api.github.com/users/jdkent/repos", "events_url": "https://api.github.com/users/jdkent/events{/privacy}", "received_events_url": "https://api.github.com/users/jdkent/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-17T18:07:22Z", "updated_at": "2021-02-18T09:04:59Z", "closed_at": "2021-02-18T09:04:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nget_clusters_table does not let me pass in a filename, and does not ensure the image is 3D, which can raise an error of there is an \"extra dimension\" in the data.\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version: 0.7.0\r\n\r\n### Expected behavior\r\n\r\n`get_clusters_table` should take filenames as input and ensure/check inputs are 3D\r\n\r\n### Actual behavior\r\n\r\nraises error if passed filename or 4D input (but effectively 3D) is passed.\r\n\r\n### Steps and code to reproduce bug\r\n\r\n```python\r\n>>> from nilearn.reporting import get_clusters_table\r\n>>> import numpy as np\r\n>>> import nibabel as nib\r\n>>> shape = (9, 10, 11)\r\n>>> data = np.zeros(shape)\r\n>>> data[2:4, 5:7, 6:8] = 5.\r\n>>> stat_img = nib.Nifti1Image(data[...,np.newaxis], np.eye(4))\r\n>>> get_clusters_table(stat_img, 0.0)\r\n\r\n```\r\n\r\nError:\r\n```\r\n  File \"/home/jdkent/projects/nilearn/nilearn/reporting/_get_clusters_table.py\", line 186, in get_clusters_table\r\n    label_map = ndimage.measurements.label(binarized, conn_mat)[0]\r\n  File \"/home/jdkent/projects/nilearn/.nilearn/lib/python3.8/site-packages/scipy/ndimage/measurements.py\", line 183, in label\r\n    raise RuntimeError('structure and input must have equal rank')\r\nRuntimeError: structure and input must have equal rank\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2690", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2690/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2690/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2690/events", "html_url": "https://github.com/nilearn/nilearn/issues/2690", "id": 805351525, "node_id": "MDU6SXNzdWU4MDUzNTE1MjU=", "number": 2690, "title": "Nans and no thresholding in surface plotting", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-02-10T09:49:32Z", "updated_at": "2021-02-19T09:20:24Z", "closed_at": "2021-02-19T09:20:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When the map contains nan values and no thresholding is performed, we obtained a weird looking output where the background is removed:\r\n\r\n```python\r\nimport warnings;warnings.filterwarnings('ignore')\r\nimport numpy as np\r\nfrom nilearn import plotting, datasets, surface\r\n\r\n# Get a statistical map\r\nmotor_images = datasets.fetch_neurovault_motor_task()\r\n# Get a cortical mesh\r\nfsaverage = datasets.fetch_surf_fsaverage()\r\n# Sample the 3D data around each node of the mesh\r\ntexture = surface.vol_to_surf(motor_images.images[0], fsaverage.pial_right)\r\n# Put some nans in\r\ntexture[::2] = np.nan\r\n# Plot the stat map with the mesh\r\nplotting.plot_surf_stat_map(fsaverage.infl_right, texture, hemi='right',\r\n                            title='Surface right hemisphere', colorbar=False,\r\n                            bg_map=fsaverage.sulc_right)\r\n```\r\n\r\n![nan](https://user-images.githubusercontent.com/2639645/107492543-de0e3a80-6b8c-11eb-9cfb-b10c994d05f7.png)\r\n\r\nWhen thresholding is performed:\r\n\r\n```python\r\nplotting.plot_surf_stat_map(fsaverage.infl_right, texture, hemi='right',\r\n                            title='Surface right hemisphere', colorbar=True,\r\n                            threshold=1., bg_map=fsaverage.sulc_right)\r\n```\r\n\r\n![nan-thresholding](https://user-images.githubusercontent.com/2639645/107492933-49580c80-6b8d-11eb-9e3b-75dcce0e1f37.png)", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2690/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2687", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2687/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2687/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2687/events", "html_url": "https://github.com/nilearn/nilearn/issues/2687", "id": 802567931, "node_id": "MDU6SXNzdWU4MDI1Njc5MzE=", "number": 2687, "title": "compute_contrast in FLM fails when used on multiple runs with different shapes of design matrices ", "user": {"login": "hyruuk", "id": 36450529, "node_id": "MDQ6VXNlcjM2NDUwNTI5", "avatar_url": "https://avatars.githubusercontent.com/u/36450529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyruuk", "html_url": "https://github.com/hyruuk", "followers_url": "https://api.github.com/users/hyruuk/followers", "following_url": "https://api.github.com/users/hyruuk/following{/other_user}", "gists_url": "https://api.github.com/users/hyruuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyruuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyruuk/subscriptions", "organizations_url": "https://api.github.com/users/hyruuk/orgs", "repos_url": "https://api.github.com/users/hyruuk/repos", "events_url": "https://api.github.com/users/hyruuk/events{/privacy}", "received_events_url": "https://api.github.com/users/hyruuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-06T00:57:03Z", "updated_at": "2021-02-12T09:05:51Z", "closed_at": "2021-02-12T09:05:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\n\r\nContext : \r\nI am trying to obtain activation maps for a contrast between two conditions. I have several runs that I want to input in a FLM. For each run, I have a confounds file generated by [fMRIPrep](https://fmriprep.org/en/stable/). These files include the cosines for drift compensation. Because the length of each run varies a little bit, the number of cosines generated in the confounds files varies too. I first load the confounds file with [load_confounds](https://pypi.org/project/load-confounds/), then I generate the design matrices with [make_first_level_design_matrix](https://nilearn.github.io/modules/generated/nilearn.glm.first_level.make_first_level_design_matrix.html), by passing the confounds in add_regs.\r\n\r\nProblem : \r\nWhen I use runs with different number of cosines from the confounds files (so, design matrices of the different runs have a different number of columns) the call to compute_contrast fails. It does not fail when I use runs with identical number of cosines.\r\nI've found a [similar problem](https://github.com/nilearn/nilearn/issues/2394) in the issues, but since in my case the two conditions of my contrast are present in all runs, I thought that it might be a related but different issue. \r\n\r\nOr maybe, as some responses to the other issue seemed to suggest, this is a feature and not a bug ? If that's the case, how should I approach this question instead ?\r\n\r\nThanks in advance for your help !\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n0.7.0\r\n\r\n### Expected behavior\r\ncompute_contrast should (?) be able to handle a list of design matrices with varying number of columns.\r\n\r\n### Actual behavior\r\nWhen two design matrices with a different number of columns are passed to compute_contrast, the function fails and returns the following error : \r\n\r\n`\r\n~/anaconda3/envs/hyruuk_shinobi_behav/lib/python3.8/site-packages/nilearn/glm/contrasts.py in compute_contrast(labels, regression_result, con_val, contrast_type)\r\n     92         for label_ in regression_result:\r\n     93             label_mask = labels == label_\r\n---> 94             resl = regression_result[label_].Tcontrast(con_val)\r\n     95             effect_[:, label_mask] = resl.effect.T\r\n     96             var_[label_mask] = (resl.sd ** 2).T\r\n\r\n~/anaconda3/envs/hyruuk_shinobi_behav/lib/python3.8/site-packages/nilearn/glm/model.py in Tcontrast(self, matrix, store, dispersion)\r\n    198             raise ValueError(\"t contrasts should have only one row\")\r\n    199         if matrix.shape[1] != self.theta.shape[0]:\r\n--> 200             raise ValueError(\"t contrasts should be length P=%d, \"\r\n    201                              \"but this is length %d\" % (self.theta.shape[0],\r\n    202                                                         matrix.shape[1]))\r\n\r\nValueError: t contrasts should be length P=49, but this is length 47`\r\n\r\n### Steps and code to reproduce bug\r\n\r\nI joined an pdf file that shows my code and the outputs. First cell are imports. Second cell shows expected behavior, with two runs that share the same number of confounds. Third cell shows the bug, the code fails to generate the contrast because the two runs have different number of confounds (44 and 46). Fourth cell shows the same runs as in the second cell (the one that works), but I manually removed one of the cosines (to make sure that the number of columns of the design_matrix would differ), and that recreates the issue.\r\n\r\n[bug_flm_confounds.pdf](https://github.com/nilearn/nilearn/files/5936005/bug_flm_confounds.pdf)\r\n\r\n```python\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2685", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2685/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2685/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2685/events", "html_url": "https://github.com/nilearn/nilearn/issues/2685", "id": 802382101, "node_id": "MDU6SXNzdWU4MDIzODIxMDE=", "number": 2685, "title": "Atlas To Regions cannot extract the correct number of regions", "user": {"login": "DasDominus", "id": 76655953, "node_id": "MDQ6VXNlcjc2NjU1OTUz", "avatar_url": "https://avatars.githubusercontent.com/u/76655953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DasDominus", "html_url": "https://github.com/DasDominus", "followers_url": "https://api.github.com/users/DasDominus/followers", "following_url": "https://api.github.com/users/DasDominus/following{/other_user}", "gists_url": "https://api.github.com/users/DasDominus/gists{/gist_id}", "starred_url": "https://api.github.com/users/DasDominus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DasDominus/subscriptions", "organizations_url": "https://api.github.com/users/DasDominus/orgs", "repos_url": "https://api.github.com/users/DasDominus/repos", "events_url": "https://api.github.com/users/DasDominus/events{/privacy}", "received_events_url": "https://api.github.com/users/DasDominus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-05T18:28:09Z", "updated_at": "2021-02-06T08:02:43Z", "closed_at": "2021-02-05T23:08:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--Provide a brief description of the bug.-->\r\nThe atlas I'm using: https://github.com/alfnie/conn/tree/master/rois\r\nwhich contains 132 rois\r\nThe values are from 1-132 which is the same as what the example requested.\r\n\r\nHowever, when using:\r\n\r\n- nilearn.regions.connected_regions\r\n-  nilearn.regions.RegionExtractor\r\n\r\nThe resulting regions are only a fraction of 132 even if I set the min_region_size to 0\r\n\r\nWhat I'm trying to do is simply get the voxel values of each roi (based on label), \r\nthis should be relatively easy as all the rois are already labeled, only a simple reshape is needed (eg. based on data)\r\n\r\nI was wondering why the resulting rois are not matching what was given\r\n\r\n<!--Please fill in the following information, to the best of your ability.-->\r\nNilearn version:\r\n0.7.0\r\n### Expected behavior\r\n\r\nconnected_regions should break down regions to 132\r\nwhe min_region_size is 0\r\n\r\n### Actual behavior\r\n\r\nThe default region value gives 38 rois\r\n0 region size gives 56 rois.\r\n\r\nNone of which are correct.\r\n\r\n### Steps and code to reproduce bug\r\ndownload the atlas.nii image\r\n```python\r\n    atlas_img = 'path/to/atlas.nii\r\n    region_extracted_img, index_map = regions.connected_regions(\r\n        atlas_img, min_region_size=0)\r\n    print (region_extracted_img.shape)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2685/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2677", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2677/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2677/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2677/events", "html_url": "https://github.com/nilearn/nilearn/issues/2677", "id": 798561427, "node_id": "MDU6SXNzdWU3OTg1NjE0Mjc=", "number": 2677, "title": "Failures in build due to numpy 1.20", "user": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-02-01T17:30:51Z", "updated_at": "2021-02-02T20:00:22Z", "closed_at": "2021-02-02T20:00:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Need to fix broken tests with latest package versions.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2677/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2675", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2675/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2675/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2675/events", "html_url": "https://github.com/nilearn/nilearn/issues/2675", "id": 797421364, "node_id": "MDU6SXNzdWU3OTc0MjEzNjQ=", "number": 2675, "title": "plot_connectome shows nodes below edge_threshold", "user": {"login": "JoffJones", "id": 49482601, "node_id": "MDQ6VXNlcjQ5NDgyNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/49482601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoffJones", "html_url": "https://github.com/JoffJones", "followers_url": "https://api.github.com/users/JoffJones/followers", "following_url": "https://api.github.com/users/JoffJones/following{/other_user}", "gists_url": "https://api.github.com/users/JoffJones/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoffJones/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoffJones/subscriptions", "organizations_url": "https://api.github.com/users/JoffJones/orgs", "repos_url": "https://api.github.com/users/JoffJones/repos", "events_url": "https://api.github.com/users/JoffJones/events{/privacy}", "received_events_url": "https://api.github.com/users/JoffJones/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-30T13:47:56Z", "updated_at": "2021-02-01T14:00:06Z", "closed_at": "2021-02-01T14:00:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nI am trying to only show significant nodes above edge_threshold using the plot_connectome function in nilearn 0.7.0. It plots the correct edges but it always displays all of the nodes, rather than just the ones with edges above the threshold as I expected it to. Is there a way to only show the nodes that survive the threshold.\r\n\r\nI've tried this with a whole connectome and a masked connectome where all of the edges of no interest are set to 0. In the code below the masked connectome is a 100x100 matrix where only the edges of interest have non-zero values. Coodinates are from find_parcellation_cut_coords and network_colours is a list of 100 Hex colours.\r\n\r\n```\r\nplot_connectome(masked_connectome, coordinates, edge_threshold=0.1, node_size =15, \r\n                node_color=network_colours, display_mode='lzr')\r\n``` \r\n-->\r\nMany thanks for your help :)\r\nJoff", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2674", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2674/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2674/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2674/events", "html_url": "https://github.com/nilearn/nilearn/issues/2674", "id": 797149699, "node_id": "MDU6SXNzdWU3OTcxNDk2OTk=", "number": 2674, "title": "Events of the same type that end simultaneously ", "user": {"login": "rhodricusack", "id": 1569737, "node_id": "MDQ6VXNlcjE1Njk3Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1569737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhodricusack", "html_url": "https://github.com/rhodricusack", "followers_url": "https://api.github.com/users/rhodricusack/followers", "following_url": "https://api.github.com/users/rhodricusack/following{/other_user}", "gists_url": "https://api.github.com/users/rhodricusack/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhodricusack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhodricusack/subscriptions", "organizations_url": "https://api.github.com/users/rhodricusack/orgs", "repos_url": "https://api.github.com/users/rhodricusack/repos", "events_url": "https://api.github.com/users/rhodricusack/events{/privacy}", "received_events_url": "https://api.github.com/users/rhodricusack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-29T20:00:58Z", "updated_at": "2021-02-01T23:01:21Z", "closed_at": "2021-02-01T17:05:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "nilearn 0.7.0\r\n\r\nHi-\r\nI've accidentally discovered a new way to break make_first_level_design_matrix, with overlapping events of the same trial_type but different durations. If two events like this end simultaneously, only one of them gets ended, leading to an elevated regressor for the rest of the frames.\r\n\r\nBelow is some example code, and the figure it produces:\r\n![break_make_first_level_design_matrix](https://user-images.githubusercontent.com/1569737/106321615-6f67dd80-626c-11eb-95bb-5aa1c8ae943f.jpg)\r\n\r\nIt took a while to find this one! I think the reason I'm coming across these is that I'm modelling naturalistic stimuli using ratings, and using boxcars rather than creating regressors.\r\nVery best\r\nRhodri\r\n\r\n```python\r\nimport pickle\r\nimport pandas as pd\r\nfrom nilearn.glm.first_level import make_first_level_design_matrix\r\nimport numpy as np\r\nfrom matplotlib import pyplot as plt\r\n\r\nframe_times=np.arange(20)\r\n\r\nfig, ax= plt.subplots(nrows=2)\r\n\r\n# All good\r\nevents=pd.DataFrame({'onset': [2, 4, 4.5], 'duration': [1.0, 1.0, 1.0], 'trial_type': ['vanilla']*3})\r\nX = make_first_level_design_matrix(frame_times, events= events, hrf_model=None)\r\nax[0].plot(X['vanilla'])\r\n\r\n# Second and third events end at same time, so second event never ends!\r\nevents=pd.DataFrame({'onset': [2, 4, 4.5], 'duration': [1.0, 1.5, 1.0], 'trial_type': ['vanilla']*3})\r\nX = make_first_level_design_matrix(frame_times, events= events, hrf_model=None)\r\nax[1].plot(X['vanilla'])\r\n\r\nplt.savefig('break_make_first_level_design_matrix.jpg')\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2674/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2668", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2668/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2668/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2668/events", "html_url": "https://github.com/nilearn/nilearn/issues/2668", "id": 792879485, "node_id": "MDU6SXNzdWU3OTI4Nzk0ODU=", "number": 2668, "title": "Slightly odd behaviour of make_first_level_design_matrix", "user": {"login": "rhodricusack", "id": 1569737, "node_id": "MDQ6VXNlcjE1Njk3Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1569737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhodricusack", "html_url": "https://github.com/rhodricusack", "followers_url": "https://api.github.com/users/rhodricusack/followers", "following_url": "https://api.github.com/users/rhodricusack/following{/other_user}", "gists_url": "https://api.github.com/users/rhodricusack/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhodricusack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhodricusack/subscriptions", "organizations_url": "https://api.github.com/users/rhodricusack/orgs", "repos_url": "https://api.github.com/users/rhodricusack/repos", "events_url": "https://api.github.com/users/rhodricusack/events{/privacy}", "received_events_url": "https://api.github.com/users/rhodricusack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-24T19:58:07Z", "updated_at": "2021-02-05T09:58:35Z", "closed_at": "2021-02-05T09:58:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "nilearn 0.70\r\n\r\nI discovered a slightly unexpected behaviour of nilearn.glm.first_level.make_first_level_design_matrix which is that if an event is duplicated with the same onset and duration, one is ignored, but if they differ (even very slightly) then both count towards the design. I expected it to add together multiple events. Code to reproduce below - in X0, events with onsets at 0 and 10 s have same amplitude, whereas in X0, first has twice the amplitude.\r\n\r\nThanks so much for all of your work on this package - it is awesome.\r\n\r\n```\r\n\r\nfrom nilearn.glm.first_level import make_first_level_design_matrix\r\nimport pandas as pd\r\nimport numpy as np\r\nfrom matplotlib import pyplot as plt\r\n\r\n\r\ndata = [[0, 1, 'cond1'], [0, 1, 'cond1'], [10, 1, 'cond1']] # duplicate event at 0 secs not counted\r\nevents = pd.DataFrame(data, columns=['onset','duration','trial_type'])\r\nX0 = make_first_level_design_matrix(np.arange(20),events=events)\r\n\r\ndata = [[0, 1, 'cond1'], [0.001, 1, 'cond1'], [10, 1, 'cond1']] # duplicate event ~ 0 secs is now counted\r\nevents = pd.DataFrame(data, columns=['onset','duration','trial_type'])\r\nX1 = make_first_level_design_matrix(np.arange(20),events=events)\r\n\r\nfig, ax = plt.subplots(nrows=2)\r\nax[0].plot(X0)\r\nax[1].plot(X1)\r\nplt.savefig('show_make_first_level_design_matrix_oddity.jpg')\r\n``` \r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2667", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2667/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2667/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2667/events", "html_url": "https://github.com/nilearn/nilearn/issues/2667", "id": 791870702, "node_id": "MDU6SXNzdWU3OTE4NzA3MDI=", "number": 2667, "title": "Decoder.score() behaviour in classification mode", "user": {"login": "RaphaelMeudec", "id": 12402673, "node_id": "MDQ6VXNlcjEyNDAyNjcz", "avatar_url": "https://avatars.githubusercontent.com/u/12402673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RaphaelMeudec", "html_url": "https://github.com/RaphaelMeudec", "followers_url": "https://api.github.com/users/RaphaelMeudec/followers", "following_url": "https://api.github.com/users/RaphaelMeudec/following{/other_user}", "gists_url": "https://api.github.com/users/RaphaelMeudec/gists{/gist_id}", "starred_url": "https://api.github.com/users/RaphaelMeudec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RaphaelMeudec/subscriptions", "organizations_url": "https://api.github.com/users/RaphaelMeudec/orgs", "repos_url": "https://api.github.com/users/RaphaelMeudec/repos", "events_url": "https://api.github.com/users/RaphaelMeudec/events{/privacy}", "received_events_url": "https://api.github.com/users/RaphaelMeudec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-01-22T10:04:29Z", "updated_at": "2021-01-29T09:06:55Z", "closed_at": "2021-01-29T09:06:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello!\r\n\r\nI'm not sure if this issue is a documentation or feature request issue: the `.score` seems a bit confusing for me as a new-comer. \r\n\r\nI used the Decoder object in a classification tasks. After fitting the model, I used the \u00a0`.score` method, expecting it to compute the mean accuracy (as it is done in scikit-learn for classifiers). I got lucky its value came back negative, it made me look at the documentation and the fact that it computes R^2 coefficient.\r\n\r\nI think it should be a bit more explicit to the user that `.score` in a classification fashion does not compute the mean accuracy:\r\n\r\n- either by changing the behaviour (which seems tricky as it comes from inherited scikit-learn RegressorMixin)\r\n- or by explicitly warn the user when running the method (which should be easier by using the `self.is_classification` flag) and make a visible warning in the documentation\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2667/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2665", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2665/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2665/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2665/events", "html_url": "https://github.com/nilearn/nilearn/issues/2665", "id": 790130413, "node_id": "MDU6SXNzdWU3OTAxMzA0MTM=", "number": 2665, "title": "difumo atlas resolution", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-01-20T16:25:47Z", "updated_at": "2021-01-28T20:17:47Z", "closed_at": "2021-01-28T20:17:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "difumo maps downloaded with `resolution_mm=2` seem to have 1.875 mm resolution\r\n```\r\nfrom nilearn import datasets, image\r\n\r\ndifumo = datasets.fetch_atlas_difumo(dimension=64, resolution_mm=2)\r\ndifumo_maps = image.load_img(difumo[\"maps\"])\r\nprint(difumo_maps.affine)\r\n```\r\n\r\nalso why are we downloading the `resample_dictionaries.py` script?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2637", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2637/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2637/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2637/events", "html_url": "https://github.com/nilearn/nilearn/issues/2637", "id": 766850359, "node_id": "MDU6SXNzdWU3NjY4NTAzNTk=", "number": 2637, "title": "NiftiMapsMasker and NiftiLabelsMasker cannot transform 3D images", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-14T19:28:15Z", "updated_at": "2021-02-25T08:38:00Z", "closed_at": "2021-02-25T08:38:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "documentation suggests they can (says \"imgs: 3D/4D Niimg-like object\").\r\nexample:\r\n```\r\nfrom nilearn import datasets\r\nfrom nilearn.input_data import NiftiMapsMasker, NiftiLabelsMasker\r\n\r\n\r\nimg = datasets.load_mni152_template()\r\n\r\natlas_img = datasets.fetch_atlas_destrieux_2009()[\"maps\"]\r\nlabels_masker = NiftiLabelsMasker(atlas_img)\r\n\r\nprob_atlas_img = datasets.fetch_atlas_harvard_oxford(\"cort-prob-2mm\")[\"maps\"]\r\nmaps_masker = NiftiMapsMasker(prob_atlas_img)\r\n\r\n# OK\r\nlabels_masker.fit_transform([img])\r\nmaps_masker.fit_transform([img])\r\n\r\n# both lines below fail\r\nlabels_masker.fit_transform(img)\r\nmaps_masker.fit_transform(img)\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2635", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2635/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2635/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2635/events", "html_url": "https://github.com/nilearn/nilearn/issues/2635", "id": 762874571, "node_id": "MDU6SXNzdWU3NjI4NzQ1NzE=", "number": 2635, "title": "Perhaps missing and/or incorrect info in nilearn.input_data.NiftiMasker", "user": {"login": "alpinho", "id": 10830228, "node_id": "MDQ6VXNlcjEwODMwMjI4", "avatar_url": "https://avatars.githubusercontent.com/u/10830228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alpinho", "html_url": "https://github.com/alpinho", "followers_url": "https://api.github.com/users/alpinho/followers", "following_url": "https://api.github.com/users/alpinho/following{/other_user}", "gists_url": "https://api.github.com/users/alpinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/alpinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alpinho/subscriptions", "organizations_url": "https://api.github.com/users/alpinho/orgs", "repos_url": "https://api.github.com/users/alpinho/repos", "events_url": "https://api.github.com/users/alpinho/events{/privacy}", "received_events_url": "https://api.github.com/users/alpinho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-11T20:38:14Z", "updated_at": "2021-01-25T09:33:52Z", "closed_at": "2021-01-25T09:33:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\nThe documentation of the class `nilearn.input_data.NiftiMasker` states that the default of the arg `standardize` is \"True\" but in `nilearn/input_data/nifti_masker.py` line 190, it seems to be the opposite. Can someone clarify?\r\n\r\nIn addition, I'd like to confirm whether \"True\" <=> \"zscore\" for this arg; if so, perhaps, this should be better clarified in the docstring, too.\r\n\r\nAt last, the arg `standardize_confounds` is not described [here](https://nilearn.github.io/modules/generated/nilearn.input_data.NiftiMasker.html).\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2603", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2603/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2603/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2603/events", "html_url": "https://github.com/nilearn/nilearn/issues/2603", "id": 741881880, "node_id": "MDU6SXNzdWU3NDE4ODE4ODA=", "number": 2603, "title": "plot_surf_stat_map fails for maps provided as path to files", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-12T19:50:20Z", "updated_at": "2020-11-13T10:31:30Z", "closed_at": "2020-11-13T10:31:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`load_surf_data` should be used to load the map before passing it to `_get_colorbar_and_data_ranges`. docstring says passing a path is supported\r\n\r\nreproduce with:\r\n```\r\nfrom nilearn import datasets, plotting\r\n\r\nfsavg = datasets.fetch_surf_fsaverage()\r\nplotting.plot_surf_stat_map(fsavg[\"infl_left\"], fsavg[\"sulc_left\"])\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2580", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2580/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2580/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2580/events", "html_url": "https://github.com/nilearn/nilearn/issues/2580", "id": 721383815, "node_id": "MDU6SXNzdWU3MjEzODM4MTU=", "number": 2580, "title": "test_nifti_labels_masker_with_nans_and_infs and test_connected_label_regions fail on Arm", "user": {"login": "ggardet", "id": 1826137, "node_id": "MDQ6VXNlcjE4MjYxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1826137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggardet", "html_url": "https://github.com/ggardet", "followers_url": "https://api.github.com/users/ggardet/followers", "following_url": "https://api.github.com/users/ggardet/following{/other_user}", "gists_url": "https://api.github.com/users/ggardet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggardet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggardet/subscriptions", "organizations_url": "https://api.github.com/users/ggardet/orgs", "repos_url": "https://api.github.com/users/ggardet/repos", "events_url": "https://api.github.com/users/ggardet/events{/privacy}", "received_events_url": "https://api.github.com/users/ggardet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1728470102, "node_id": "MDU6TGFiZWwxNzI4NDcwMTAy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Maintenance", "name": "Maintenance", "color": "fc918f", "default": false, "description": ""}, {"id": 1771271710, "node_id": "MDU6TGFiZWwxNzcxMjcxNzEw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Testing", "name": "Testing", "color": "50bac4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-10-14T11:39:24Z", "updated_at": "2020-11-16T20:31:33Z", "closed_at": "2020-11-16T20:31:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "With nilearn 0.6.2, some tests are failing on aarch64 and armv7:\r\n```\r\n[  338s] =========================== short test summary info ============================\r\n[  338s] FAILED nilearn/input_data/tests/test_nifti_labels_masker.py::test_nifti_labels_masker_with_nans_and_infs\r\n[  338s] FAILED nilearn/regions/tests/test_region_extractor.py::test_connected_label_regions\r\n[  338s] ===== 2 failed, 504 passed, 4 skipped, 2435 warnings in 295.69s (0:04:55) ======\r\n``` \r\n\r\n```\r\n[  335s] =================================== FAILURES ===================================\r\n[  335s] _________________ test_nifti_labels_masker_with_nans_and_infs __________________\r\n[  335s] [gw1] linux -- Python 3.8.5 /usr/bin/python3\r\n[  335s] \r\n[  335s]     def test_nifti_labels_masker_with_nans_and_infs():\r\n[  335s]         length = 3\r\n[  335s]         n_regions = 9\r\n[  335s]         fmri_img, mask_img = generate_random_img((13, 11, 12),\r\n[  335s]                                                  affine=np.eye(4), length=length)\r\n[  335s]         labels_img = data_gen.generate_labeled_regions((13, 11, 12),\r\n[  335s]                                                        affine=np.eye(4),\r\n[  335s]                                                        n_regions=n_regions)\r\n[  335s]         # nans\r\n[  335s]         mask_data = get_data(mask_img)\r\n[  335s]         mask_data[:, :, 7] = np.nan\r\n[  335s]         mask_data[:, :, 4] = np.inf\r\n[  335s]         mask_img = nibabel.Nifti1Image(mask_data, np.eye(4))\r\n[  335s]     \r\n[  335s]         masker = NiftiLabelsMasker(labels_img, mask_img=mask_img)\r\n[  335s] >       sig = masker.fit_transform(fmri_img)\r\n[  335s] \r\n[  335s] nilearn/input_data/tests/test_nifti_labels_masker.py:126: \r\n[  335s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[  335s] nilearn/input_data/nifti_labels_masker.py:226: in fit_transform\r\n[  335s]     return self.fit().transform(imgs, confounds=confounds)\r\n[  335s] nilearn/input_data/nifti_labels_masker.py:215: in fit\r\n[  335s]     mask_data, mask_affine = masking._load_mask_img(self.mask_img_)\r\n[  335s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[  335s] \r\n[  335s] mask_img = <nibabel.nifti1.Nifti1Image object at 0xffff891331c0>\r\n[  335s] allow_empty = False\r\n[  335s] \r\n[  335s]     def _load_mask_img(mask_img, allow_empty=False):\r\n[  335s]         \"\"\"Check that a mask is valid, ie with two values including 0 and load it.\r\n[  335s]     \r\n[  335s]         Parameters\r\n[  335s]         ----------\r\n[  335s]         mask_img: Niimg-like object\r\n[  335s]             See http://nilearn.github.io/manipulating_images/input_output.html\r\n[  335s]             The mask to check\r\n[  335s]     \r\n[  335s]         allow_empty: boolean, optional\r\n[  335s]             Allow loading an empty mask (full of 0 values)\r\n[  335s]     \r\n[  335s]         Returns\r\n[  335s]         -------\r\n[  335s]         mask: numpy.ndarray\r\n[  335s]             boolean version of the mask\r\n[  335s]         \"\"\"\r\n[  335s]         mask_img = _utils.check_niimg_3d(mask_img)\r\n[  335s]         mask = get_data(mask_img)\r\n[  335s]         values = np.unique(mask)\r\n[  335s]     \r\n[  335s]         if len(values) == 1:\r\n[  335s]             # We accept a single value if it is not 0 (full true mask).\r\n[  335s]             if values[0] == 0 and not allow_empty:\r\n[  335s]                 raise ValueError(\r\n[  335s]                     'The mask is invalid as it is empty: it masks all data.')\r\n[  335s]         elif len(values) == 2:\r\n[  335s]             # If there are 2 different values, one of them must be 0 (background)\r\n[  335s]             if 0 not in values:\r\n[  335s]                 raise ValueError('Background of the mask must be represented with'\r\n[  335s]                                  '0. Given mask contains: %s.' % values)\r\n[  335s]         elif len(values) != 2:\r\n[  335s]             # If there are more than 2 values, the mask is invalid\r\n[  335s] >           raise ValueError('Given mask is not made of 2 values: %s'\r\n[  335s]                              '. Cannot interpret as true or false'\r\n[  335s]                              % values)\r\n[  335s] E           ValueError: Given mask is not made of 2 values: [-1  0  1]. Cannot interpret as true or false\r\n[  335s] \r\n[  335s] nilearn/masking.py:61: ValueError\r\n```\r\n\r\n```\r\n[  335s] _________________________ test_connected_label_regions _________________________\r\n[  335s] [gw0] linux -- Python 3.8.5 /usr/bin/python3\r\n[  335s] \r\n[  335s]     def test_connected_label_regions():\r\n[  335s]         shape = (13, 11, 12)\r\n[  335s]         affine = np.eye(4)\r\n[  335s]         n_regions = 9\r\n[  335s]         labels_img = generate_labeled_regions(shape, affine=affine,\r\n[  335s]                                               n_regions=n_regions)\r\n[  335s]         labels_data = get_data(labels_img)\r\n[  335s]         n_labels_wo_reg_ext = len(np.unique(labels_data))\r\n[  335s]     \r\n[  335s]         # region extraction without specifying min_size\r\n[  335s]         extracted_regions_on_labels_img = connected_label_regions(labels_img)\r\n[  335s]         extracted_regions_labels_data = get_data(extracted_regions_on_labels_img)\r\n[  335s]         n_labels_wo_min = len(np.unique(extracted_regions_labels_data))\r\n[  335s]     \r\n[  335s]         assert n_labels_wo_reg_ext < n_labels_wo_min\r\n[  335s]     \r\n[  335s]         # with specifying min_size\r\n[  335s]         extracted_regions_with_min = connected_label_regions(labels_img,\r\n[  335s]                                                              min_size=100)\r\n[  335s]         extracted_regions_with_min_data = get_data(extracted_regions_with_min)\r\n[  335s]         n_labels_with_min = len(np.unique(extracted_regions_with_min_data))\r\n[  335s]     \r\n[  335s]         assert n_labels_wo_min > n_labels_with_min\r\n[  335s]     \r\n[  335s]         # Test connect_diag=False\r\n[  335s]         ext_reg_without_connect_diag = connected_label_regions(labels_img,\r\n[  335s]                                                                connect_diag=False)\r\n[  335s]         data_wo_connect_diag = get_data(ext_reg_without_connect_diag)\r\n[  335s]         n_labels_wo_connect_diag = len(np.unique(data_wo_connect_diag))\r\n[  335s]         assert n_labels_wo_connect_diag > n_labels_wo_reg_ext\r\n[  335s]     \r\n[  335s]         # If min_size is large and if all the regions are removed then empty image\r\n[  335s]         # will be returned\r\n[  335s]         extract_reg_min_size_large = connected_label_regions(labels_img,\r\n[  335s]                                                              min_size=500)\r\n[  335s]         assert np.unique(get_data(extract_reg_min_size_large)) == 0\r\n[  335s]     \r\n[  335s]         # Test the names of the brain regions given in labels.\r\n[  335s]         # Test labels for 9 regions in n_regions\r\n[  335s]         labels = ['region_a', 'region_b', 'region_c', 'region_d', 'region_e',\r\n[  335s]                   'region_f', 'region_g', 'region_h', 'region_i']\r\n[  335s]     \r\n[  335s]         # If labels are provided, first return will contain extracted labels image\r\n[  335s]         # and second return will contain list of new names generated based on same\r\n[  335s]         # name with assigned on both hemispheres for example.\r\n[  335s]         extracted_reg, new_labels = connected_label_regions(labels_img,\r\n[  335s]                                                             min_size=100,\r\n[  335s]                                                             labels=labels)\r\n[  335s]         # The length of new_labels returned can differ depending upon min_size. If\r\n[  335s]         # min_size given is more small regions can be removed therefore newly\r\n[  335s]         # generated labels can be less than original size of labels. Or if min_size\r\n[  335s]         # is less then newly generated labels can be more.\r\n[  335s]     \r\n[  335s]         # We test here whether labels returned are empty or not.\r\n[  335s]         assert new_labels != ''\r\n[  335s]         assert len(new_labels) <= len(labels)\r\n[  335s]     \r\n[  335s]         # labels given in numpy array\r\n[  335s]         labels = np.asarray(labels)\r\n[  335s]         extracted_reg2, new_labels2 = connected_label_regions(labels_img,\r\n[  335s]                                                               labels=labels)\r\n[  335s]         assert new_labels != ''\r\n[  335s]         # By default min_size is less, so newly generated labels can be more.\r\n[  335s]         assert len(new_labels2) >= len(labels)\r\n[  335s]     \r\n[  335s]         # If number of labels provided are wrong (which means less than number of\r\n[  335s]         # unique labels in labels_img), then we raise an error\r\n[  335s]     \r\n[  335s]         # Test whether error raises\r\n[  335s]         unique_labels = set(np.unique(np.asarray(get_data(labels_img))))\r\n[  335s]         unique_labels.remove(0)\r\n[  335s]     \r\n[  335s]         # labels given are less than n_regions=9\r\n[  335s]         provided_labels = ['region_a', 'region_c', 'region_f',\r\n[  335s]                            'region_g', 'region_h', 'region_i']\r\n[  335s]     \r\n[  335s]         assert len(provided_labels) < len(unique_labels)\r\n[  335s]     \r\n[  335s]         with pytest.raises(ValueError):\r\n[  335s]             connected_label_regions(labels_img, labels=provided_labels)\r\n[  335s]     \r\n[  335s]         # Test if unknown/negative integers are provided as labels in labels_img,\r\n[  335s]         # we raise an error and test the same whether error is raised.\r\n[  335s]         labels_data = np.zeros(shape, dtype=np.int)\r\n[  335s]         h0 = shape[0] // 2\r\n[  335s]         h1 = shape[1] // 2\r\n[  335s]         h2 = shape[2] // 2\r\n[  335s]         labels_data[:h0, :h1, :h2] = 1\r\n[  335s]         labels_data[:h0, :h1, h2:] = 2\r\n[  335s]         labels_data[:h0, h1:, :h2] = 3\r\n[  335s]         labels_data[:h0, h1:, h2:] = 4\r\n[  335s]         labels_data[h0:, :h1, :h2] = 5\r\n[  335s]         labels_data[h0:, :h1, h2:] = 6\r\n[  335s]         labels_data[h0:, h1:, :h2] = np.nan\r\n[  335s]         labels_data[h0:, h1:, h2:] = np.inf\r\n[  335s]     \r\n[  335s]         neg_labels_img = nibabel.Nifti1Image(labels_data, affine)\r\n[  335s]         with pytest.raises(ValueError):\r\n[  335s] >           connected_label_regions(labels_img=neg_labels_img)\r\n[  335s] E           Failed: DID NOT RAISE <class 'ValueError'>\r\n[  335s] \r\n[  335s] nilearn/regions/tests/test_region_extractor.py:367: Failed\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2580/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2579", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2579/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2579/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2579/events", "html_url": "https://github.com/nilearn/nilearn/issues/2579", "id": 718924454, "node_id": "MDU6SXNzdWU3MTg5MjQ0NTQ=", "number": 2579, "title": "Colorbar of plot_stat_map disappears when results are clipped", "user": {"login": "alpinho", "id": 10830228, "node_id": "MDQ6VXNlcjEwODMwMjI4", "avatar_url": "https://avatars.githubusercontent.com/u/10830228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alpinho", "html_url": "https://github.com/alpinho", "followers_url": "https://api.github.com/users/alpinho/followers", "following_url": "https://api.github.com/users/alpinho/following{/other_user}", "gists_url": "https://api.github.com/users/alpinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/alpinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alpinho/subscriptions", "organizations_url": "https://api.github.com/users/alpinho/orgs", "repos_url": "https://api.github.com/users/alpinho/repos", "events_url": "https://api.github.com/users/alpinho/events{/privacy}", "received_events_url": "https://api.github.com/users/alpinho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-10-11T20:51:46Z", "updated_at": "2020-10-20T10:04:20Z", "closed_at": "2020-10-20T10:04:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I used `nilearn.plotting.plot_stat_map` to plot some results. However, when I clip the same results using a min value (concretely, I used numpy.clip with a_min=0) and plot them, the colorbar disappears.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2548", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2548/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2548/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2548/events", "html_url": "https://github.com/nilearn/nilearn/issues/2548", "id": 669822666, "node_id": "MDU6SXNzdWU2Njk4MjI2NjY=", "number": 2548, "title": "nistats: dependence between function calls \u2013 strange bug may affect reproducibility", "user": {"login": "kbonna", "id": 20267541, "node_id": "MDQ6VXNlcjIwMjY3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/20267541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kbonna", "html_url": "https://github.com/kbonna", "followers_url": "https://api.github.com/users/kbonna/followers", "following_url": "https://api.github.com/users/kbonna/following{/other_user}", "gists_url": "https://api.github.com/users/kbonna/gists{/gist_id}", "starred_url": "https://api.github.com/users/kbonna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kbonna/subscriptions", "organizations_url": "https://api.github.com/users/kbonna/orgs", "repos_url": "https://api.github.com/users/kbonna/repos", "events_url": "https://api.github.com/users/kbonna/events{/privacy}", "received_events_url": "https://api.github.com/users/kbonna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1956788925, "node_id": "MDU6TGFiZWwxOTU2Nzg4OTI1", "url": "https://api.github.com/repos/nilearn/nilearn/labels/GLM", "name": "GLM", "color": "fce1c4", "default": false, "description": "Issues/PRs related to the nilearn.glm module."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-31T13:33:13Z", "updated_at": "2020-09-30T20:26:21Z", "closed_at": "2020-09-30T20:26:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI've encountered very strange behavior of two functions \u2013 `map_threshold` from `nistats.thresholding` module and `get_clusters_table` from `nistats.reporting` module. It seems like the threshold value returned by `map_threshold` depends on the last output value(s) of `get_clusters_table` function or some internal function variables. Impact seems to be severe (the higher the `cluster_threshold` value passed to `get_cluster_table`, the higher the threshold returned by subsequent call of `map_threshold`). \r\n\r\nHere is a simple demonstration: https://github.com/kbonna/decidenet/blob/master/activation_analysis/nistats_map_threshold_bug.ipynb\r\n\r\nI've tried to find a source of the problem studying code of both functions, but I everything seems to be ok at first glance. \r\n\r\nAm I missing something simple?", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2537", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2537/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2537/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2537/events", "html_url": "https://github.com/nilearn/nilearn/issues/2537", "id": 650804353, "node_id": "MDU6SXNzdWU2NTA4MDQzNTM=", "number": 2537, "title": "Rendering problems with add_contours when binary images have rotations set in the affine matrix", "user": {"login": "vnckppl", "id": 15114746, "node_id": "MDQ6VXNlcjE1MTE0NzQ2", "avatar_url": "https://avatars.githubusercontent.com/u/15114746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnckppl", "html_url": "https://github.com/vnckppl", "followers_url": "https://api.github.com/users/vnckppl/followers", "following_url": "https://api.github.com/users/vnckppl/following{/other_user}", "gists_url": "https://api.github.com/users/vnckppl/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnckppl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnckppl/subscriptions", "organizations_url": "https://api.github.com/users/vnckppl/orgs", "repos_url": "https://api.github.com/users/vnckppl/repos", "events_url": "https://api.github.com/users/vnckppl/events{/privacy}", "received_events_url": "https://api.github.com/users/vnckppl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-07-04T01:07:48Z", "updated_at": "2021-03-08T08:50:21Z", "closed_at": "2021-03-08T08:50:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**The problem**\r\nWhen I plot a binary image that has some rotation to it in the affine header using Nilearn's `add_contours` function, the resulting image includes many additional lines that are not part of the surface of the ROI in the binary image. I don't encounter these issues when I use the same code with the same image that has not rotation set in the affine matrix. \r\n\r\n**Reproduction of the issue**\r\nI have attached example data and code to reproduce this problem:\r\n[contour_issue.zip](https://github.com/nilearn/nilearn/files/4871945/contour_issue.zip)\r\n\r\n**My environment**\r\nPython 3.8.3 (default, May 27 2020, 20:53:40)\r\nmatplotlib==3.2.2\r\nnilearn==0.6.2", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2537/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2481", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2481/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2481/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2481/events", "html_url": "https://github.com/nilearn/nilearn/issues/2481", "id": 622833797, "node_id": "MDU6SXNzdWU2MjI4MzM3OTc=", "number": 2481, "title": "ImportError: A sklearn version of at least 0.19 is required to use nilearn. 0.0.0 was found. Please upgrade sklearn", "user": {"login": "hvannieuwenh", "id": 19690164, "node_id": "MDQ6VXNlcjE5NjkwMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/19690164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvannieuwenh", "html_url": "https://github.com/hvannieuwenh", "followers_url": "https://api.github.com/users/hvannieuwenh/followers", "following_url": "https://api.github.com/users/hvannieuwenh/following{/other_user}", "gists_url": "https://api.github.com/users/hvannieuwenh/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvannieuwenh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvannieuwenh/subscriptions", "organizations_url": "https://api.github.com/users/hvannieuwenh/orgs", "repos_url": "https://api.github.com/users/hvannieuwenh/repos", "events_url": "https://api.github.com/users/hvannieuwenh/events{/privacy}", "received_events_url": "https://api.github.com/users/hvannieuwenh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 1619983090, "node_id": "MDU6TGFiZWwxNjE5OTgzMDkw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Blocker%20!!", "name": "Blocker !!", "color": "d93f0b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-21T22:41:38Z", "updated_at": "2020-09-28T10:30:09Z", "closed_at": "2020-09-28T10:30:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently installed nilearn version 0.6.2, and when I try \"import nilearn\" I receive the error written in the title. I cannot update sklearn as it is outdated, it has now been switched to scikit-learn, for which I have the latest version, 0.22.2.post1.\r\n\r\nDowngrading my scikit-learn version to 0.22 fixed the problem and allowed me to import nilearn with no issues.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2475", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2475/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2475/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2475/events", "html_url": "https://github.com/nilearn/nilearn/issues/2475", "id": 622643154, "node_id": "MDU6SXNzdWU2MjI2NDMxNTQ=", "number": 2475, "title": "clean function modifies the input time series object if performing pass-filtering without detrending", "user": {"login": "jrasero", "id": 25054369, "node_id": "MDQ6VXNlcjI1MDU0MzY5", "avatar_url": "https://avatars.githubusercontent.com/u/25054369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrasero", "html_url": "https://github.com/jrasero", "followers_url": "https://api.github.com/users/jrasero/followers", "following_url": "https://api.github.com/users/jrasero/following{/other_user}", "gists_url": "https://api.github.com/users/jrasero/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrasero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrasero/subscriptions", "organizations_url": "https://api.github.com/users/jrasero/orgs", "repos_url": "https://api.github.com/users/jrasero/repos", "events_url": "https://api.github.com/users/jrasero/events{/privacy}", "received_events_url": "https://api.github.com/users/jrasero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-21T17:01:03Z", "updated_at": "2020-07-30T13:51:15Z", "closed_at": "2020-07-30T13:51:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am using version 0.6.0. I've found that function **clean** within the module signal modifies the input time series object if one performs a pass-fitering when _detrend_ option is False. \r\n\r\nFor example, if you run the following code (test time series borrowed from [here](https://gist.github.com/miykael/4bb887029cba3926902feb2e4afe190f)) and then plot both the original and clean time series:\r\n\r\n```\r\nimport numpy as np\r\nimport matplotlib.pylab as plt\r\nfrom nilearn.signal import clean\r\n\r\noriginal_sx = np.array([np.sin(np.linspace(0, 100, 100) * 1.5),\r\n                        np.sin(np.linspace(0, 100, 100) * 3.),\r\n                        np.sin(np.linspace(0, 100, 100) / 8.),\r\n              ]).T\r\n\r\n# Clean with detrending and high pass filtering\r\nclean_sx = clean(original_sx, \r\n                   standardize=False, \r\n                   t_r=1.0, \r\n                   detrend=True, \r\n                   high_pass=0.2)\r\n\r\n# Plot both time series\r\nfig, axs = plt.subplots(ncols=2, figsize=(10, 5))  \r\naxs[0].plot(original_sx)\r\naxs[0].set_title(\"Original Time Series\")\r\naxs[1].plot(clean_sx)\r\naxs[1].set_title(\"Clean Time Series\")\r\nplt.show()\r\n```\r\n\r\nYou should see how \"green\" signal is totally filtered out (its frequency is ~ 0.02):\r\n\r\n![example_detrend_filt](https://user-images.githubusercontent.com/25054369/82581329-6f043800-9b5e-11ea-8c81-0db4642d8c9c.png)\r\n\r\nHowever, if you now try to run the same code but without detrending the time series:\r\n\r\n```\r\nimport numpy as np\r\nimport matplotlib.pylab as plt\r\nfrom nilearn.signal import clean\r\n\r\noriginal_sx = np.array([np.sin(np.linspace(0, 100, 100) * 1.5),\r\n                        np.sin(np.linspace(0, 100, 100) * 3.),\r\n                        np.sin(np.linspace(0, 100, 100) / 8.),\r\n              ]).T\r\n\r\n# Clean with only high pass filtering (Note that now detrend is set to False)\r\nclean_sx = clean(original_sx, \r\n                   standardize=False, \r\n                   t_r=1.0, \r\n                   detrend=False, \r\n                   high_pass=0.2)\r\n\r\n# Plot both time series\r\nfig, axs = plt.subplots(ncols=2, figsize=(10, 5))  \r\naxs[0].plot(original_sx)\r\naxs[0].set_title(\"Original Time Series\")\r\naxs[1].plot(clean_sx)\r\naxs[1].set_title(\"Clean Time Series\")\r\nplt.show()\r\n```\r\n\r\nThe original time series object is modified as well\r\n\r\n![example_only_filt](https://user-images.githubusercontent.com/25054369/82581328-6f043800-9b5e-11ea-8584-df17b808808e.png)\r\n\r\nWhen __detrend__ option is set to True, it first calls the function **_standardize**, which creates a copy of the original time series, and then carries on to do the filtering by calling the  function **butterworth**. However, when __detrend__ is False, which skips the first step, since **butterworth** is alway called with its  _copy_ argument set to False (the default value), the original time series are modified too. \r\n\r\nIs this the expected behaviour? I would expect the input time series to remain always the same, as inline modifications can lead to unwanted results if the original time series need to be reused again at some point.\r\n\r\nCheers", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2465", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2465/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2465/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2465/events", "html_url": "https://github.com/nilearn/nilearn/issues/2465", "id": 622171989, "node_id": "MDU6SXNzdWU2MjIxNzE5ODk=", "number": 2465, "title": "importing plotting with neither matplotlib nor pytest installed results in pytest import error", "user": {"login": "jeromedockes", "id": 9196501, "node_id": "MDQ6VXNlcjkxOTY1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/9196501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeromedockes", "html_url": "https://github.com/jeromedockes", "followers_url": "https://api.github.com/users/jeromedockes/followers", "following_url": "https://api.github.com/users/jeromedockes/following{/other_user}", "gists_url": "https://api.github.com/users/jeromedockes/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeromedockes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeromedockes/subscriptions", "organizations_url": "https://api.github.com/users/jeromedockes/orgs", "repos_url": "https://api.github.com/users/jeromedockes/repos", "events_url": "https://api.github.com/users/jeromedockes/events{/privacy}", "received_events_url": "https://api.github.com/users/jeromedockes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-21T00:51:39Z", "updated_at": "2020-12-23T08:22:16Z", "closed_at": "2020-12-23T08:22:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "see:\r\nhttps://github.com/nilearn/nilearn/blob/b021ba9d02ec719e894b8be2c24204d98ba2cfa4/nilearn/plotting/__init__.py#L17\r\n\r\nthe import error reported to the user should probably be matplotlib not pytest", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2465/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2415", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2415/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2415/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2415/events", "html_url": "https://github.com/nilearn/nilearn/issues/2415", "id": 595768447, "node_id": "MDU6SXNzdWU1OTU3Njg0NDc=", "number": 2415, "title": "[DOC] Userguide adaptation to Decoder object", "user": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 30, "created_at": "2020-04-07T10:37:33Z", "updated_at": "2020-12-08T05:31:43Z", "closed_at": "2020-12-08T05:31:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Metaestimator Decoder is not well described in the user guide. For example (but it's more general than this) the part \"introduction to decoding\" still has example code with sklearn functions, which seems out of sync with the example it draws figures from (plot_decoding_tutorial.py)\r\n\r\nWith a release including the Decoder object, it seems very important that the most didactic parts of Nilearn include clear examples using it.\r\n\r\nSide point to discuss : I think we should keep some examples / userguide sections describing how to use sklearn directly for decoding; But then we need to find how to articulate clearly both together.\r\n\r\nAny thoughts ?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2415/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2415/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2414", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2414/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2414/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2414/events", "html_url": "https://github.com/nilearn/nilearn/issues/2414", "id": 595739638, "node_id": "MDU6SXNzdWU1OTU3Mzk2Mzg=", "number": 2414, "title": "Decoder object failing weirdly when screening percentile too low.", "user": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, {"login": "tbng", "id": 10728205, "node_id": "MDQ6VXNlcjEwNzI4MjA1", "avatar_url": "https://avatars.githubusercontent.com/u/10728205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbng", "html_url": "https://github.com/tbng", "followers_url": "https://api.github.com/users/tbng/followers", "following_url": "https://api.github.com/users/tbng/following{/other_user}", "gists_url": "https://api.github.com/users/tbng/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbng/subscriptions", "organizations_url": "https://api.github.com/users/tbng/orgs", "repos_url": "https://api.github.com/users/tbng/repos", "events_url": "https://api.github.com/users/tbng/events{/privacy}", "received_events_url": "https://api.github.com/users/tbng/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-04-07T09:50:12Z", "updated_at": "2020-05-22T19:19:29Z", "closed_at": "2020-05-22T19:19:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On Nilearn master, running the Decoder object on Haxby example (see code below) encounters a weird bug. With screening_percentile=20, it runs smoothly but with screening_percentile=10 or lower it yields a completely unrelated error. \r\n\r\nI don't get what is the bug here. Any ideas @tbng ?\r\n\r\n```\r\nfrom nilearn.datasets import fetch_haxby\r\ndata_files = fetch_haxby()\r\n\r\n# Load behavioral data\r\nimport pandas as pd\r\nbehavioral = pd.read_csv(data_files.session_target[0], sep=\" \")\r\n\r\n# Restrict to face and house conditions\r\nconditions = behavioral['labels']\r\ncondition_mask = conditions.isin(['face', 'house'])\r\n\r\n# Split data into train and test samples, using the chunks\r\ncondition_mask_train = (condition_mask) & (behavioral['chunks'] <= 6)\r\ncondition_mask_test = (condition_mask) & (behavioral['chunks'] > 6)\r\n\r\n# Apply this sample mask to X (fMRI data) and y (behavioral labels)\r\n# Because the data is in one single large 4D image, we need to use\r\n# index_img to do the split easily\r\nfrom nilearn.image import index_img\r\nfunc_filenames = data_files.func[0]\r\nX_train = index_img(func_filenames, condition_mask_train)\r\nX_test = index_img(func_filenames, condition_mask_test)\r\ny_train = conditions[condition_mask_train].values\r\ny_test = conditions[condition_mask_test].values\r\n\r\n\r\n# Compute the mean epi to be used for the background of the plotting\r\nfrom nilearn.image import mean_img\r\nbackground_img = mean_img(func_filenames)\r\n\r\n##############################################################################\r\n# Fit fREM\r\n# --------------------------------------\r\nfrom nilearn.decoding import fREMClassifier\r\nfrom nilearn.decoding import Decoder\r\ndec = Decoder(screening_percentile=5)\r\ndec.fit(X_train, y_train)\r\n```\r\n\r\n\r\nFull traceback :\r\n```\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-135-b9478a772005> in <module>()\r\n----> 1 dec.fit(X_train, y_train)\r\n\r\n~/Documents/Stage/nilearn/nilearn/decoding/decoder.py in fit(self, X, y, groups)\r\n    496                 c, self.screening_percentile_, self.clustering_percentile)\r\n    497             for c, (train, test) in itertools.product(\r\n--> 498                 range(n_problems), self.cv_))\r\n    499 \r\n    500         coefs, intercepts = self._fetch_parallel_fit_outputs(\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/parallel.py in __call__(self, iterable)\r\n    919             # remaining jobs.\r\n    920             self._iterating = False\r\n--> 921             if self.dispatch_one_batch(iterator):\r\n    922                 self._iterating = self._original_iterator is not None\r\n    923 \r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/parallel.py in dispatch_one_batch(self, iterator)\r\n    757                 return False\r\n    758             else:\r\n--> 759                 self._dispatch(tasks)\r\n    760                 return True\r\n    761 \r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/parallel.py in _dispatch(self, batch)\r\n    714         with self._lock:\r\n    715             job_idx = len(self._jobs)\r\n--> 716             job = self._backend.apply_async(batch, callback=cb)\r\n    717             # A job can complete so quickly than its callback is\r\n    718             # called before we get here, causing self._jobs to\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/_parallel_backends.py in apply_async(self, func, callback)\r\n    180     def apply_async(self, func, callback=None):\r\n    181         \"\"\"Schedule a func to be run\"\"\"\r\n--> 182         result = ImmediateResult(func)\r\n    183         if callback:\r\n    184             callback(result)\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/_parallel_backends.py in __init__(self, batch)\r\n    547         # Don't delay the application, to avoid keeping the input\r\n    548         # arguments in memory\r\n--> 549         self.results = batch()\r\n    550 \r\n    551     def get(self):\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/parallel.py in __call__(self)\r\n    223         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    224             return [func(*args, **kwargs)\r\n--> 225                     for func, args, kwargs in self.items]\r\n    226 \r\n    227     def __len__(self):\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/parallel.py in <listcomp>(.0)\r\n    223         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    224             return [func(*args, **kwargs)\r\n--> 225                     for func, args, kwargs in self.items]\r\n    226 \r\n    227     def __len__(self):\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/joblib/memory.py in __call__(self, *args, **kwargs)\r\n    353 \r\n    354     def __call__(self, *args, **kwargs):\r\n--> 355         return self.func(*args, **kwargs)\r\n    356 \r\n    357     def call_and_shelve(self, *args, **kwargs):\r\n\r\n~/Documents/Stage/nilearn/nilearn/decoding/decoder.py in _parallel_fit(estimator, X, y, train, test, param_grid, is_classification, scorer, mask_img, class_index, screening_percentile, clustering_percentile)\r\n    180     for param in ParameterGrid(param_grid):\r\n    181         estimator = clone(estimator).set_params(**param)\r\n--> 182         estimator.fit(X_train, y_train)\r\n    183 \r\n    184         if is_classification:\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/sklearn/svm/classes.py in fit(self, X, y, sample_weight)\r\n    227         X, y = check_X_y(X, y, accept_sparse='csr',\r\n    228                          dtype=np.float64, order=\"C\",\r\n--> 229                          accept_large_sparse=False)\r\n    230         check_classification_targets(y)\r\n    231         self.classes_ = np.unique(y)\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/sklearn/utils/validation.py in check_X_y(X, y, accept_sparse, accept_large_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, multi_output, ensure_min_samples, ensure_min_features, y_numeric, warn_on_dtype, estimator)\r\n    717                     ensure_min_features=ensure_min_features,\r\n    718                     warn_on_dtype=warn_on_dtype,\r\n--> 719                     estimator=estimator)\r\n    720     if multi_output:\r\n    721         y = check_array(y, 'csr', force_all_finite=True, ensure_2d=False,\r\n\r\n~/anaconda2/envs/py36/lib/python3.6/site-packages/sklearn/utils/validation.py in check_array(array, accept_sparse, accept_large_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\r\n    556                              \" a minimum of %d is required%s.\"\r\n    557                              % (n_features, array.shape, ensure_min_features,\r\n--> 558                                 context))\r\n    559 \r\n    560     if warn_on_dtype and dtype_orig is not None and array.dtype != dtype_orig:\r\n\r\nValueError: Found array with 0 feature(s) (shape=(112, 0)) while a minimum of 1 is required.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2414/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2360", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2360/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2360/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2360/events", "html_url": "https://github.com/nilearn/nilearn/issues/2360", "id": 591767143, "node_id": "MDU6SXNzdWU1OTE3NjcxNDM=", "number": 2360, "title": "Decoder with ridge_regressor fails on oasis vbm example", "user": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": {"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "thomasbazeille", "id": 6551732, "node_id": "MDQ6VXNlcjY1NTE3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/6551732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasbazeille", "html_url": "https://github.com/thomasbazeille", "followers_url": "https://api.github.com/users/thomasbazeille/followers", "following_url": "https://api.github.com/users/thomasbazeille/following{/other_user}", "gists_url": "https://api.github.com/users/thomasbazeille/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasbazeille/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasbazeille/subscriptions", "organizations_url": "https://api.github.com/users/thomasbazeille/orgs", "repos_url": "https://api.github.com/users/thomasbazeille/repos", "events_url": "https://api.github.com/users/thomasbazeille/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasbazeille/received_events", "type": "User", "site_admin": false}, {"login": "tbng", "id": 10728205, "node_id": "MDQ6VXNlcjEwNzI4MjA1", "avatar_url": "https://avatars.githubusercontent.com/u/10728205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbng", "html_url": "https://github.com/tbng", "followers_url": "https://api.github.com/users/tbng/followers", "following_url": "https://api.github.com/users/tbng/following{/other_user}", "gists_url": "https://api.github.com/users/tbng/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbng/subscriptions", "organizations_url": "https://api.github.com/users/tbng/orgs", "repos_url": "https://api.github.com/users/tbng/repos", "events_url": "https://api.github.com/users/tbng/events{/privacy}", "received_events_url": "https://api.github.com/users/tbng/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-04-01T09:25:30Z", "updated_at": "2020-05-22T19:19:29Z", "closed_at": "2020-05-22T19:19:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On Nilearn master\r\n\r\nTo replicate : in Voxel-Based Morphometry on Oasis dataset example, changing\r\n```\r\ndecoder = DecoderRegressor(estimator='svr', mask=mask,\r\n                           scoring='neg_mean_absolute_error',\r\n                           screening_percentile=1,\r\n                           n_jobs=1)\r\n``` \r\nby \r\n``` \r\ndecoder = DecoderRegressor(estimator='ridge_regressor', mask=mask,\r\n                           scoring='neg_mean_absolute_error',\r\n                           screening_percentile=1,\r\n                           n_jobs=1)\r\n``` \r\nyields an error, `best_coef` returned is 1D instead of expected 2D array `\r\n\r\nAny thoughts @tbng ? It's not related to my PR #2327 but I can include fix if needed\r\n\r\nFull traceback: \r\n```\r\n----> 1 decoder.fit(gm_imgs_train, age_train)\r\n\r\n~/nilearn/nilearn/decoding/decoder.py in fit(self, X, y, groups)\r\n    454                 self.mask_img_, c, self.screening_percentile_)\r\n    455             for c, (train, test) in itertools.product(\r\n--> 456                 range(n_problems), self.cv_))\r\n    457 \r\n    458         coefs, intercepts = self._fetch_parallel_fit_outputs(\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self, iterable)\r\n   1002             # remaining jobs.\r\n   1003             self._iterating = False\r\n-> 1004             if self.dispatch_one_batch(iterator):\r\n   1005                 self._iterating = self._original_iterator is not None\r\n   1006 \r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in dispatch_one_batch(self, iterator)\r\n    833                 return False\r\n    834             else:\r\n--> 835                 self._dispatch(tasks)\r\n    836                 return True\r\n    837 \r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in _dispatch(self, batch)\r\n    752         with self._lock:\r\n    753             job_idx = len(self._jobs)\r\n--> 754             job = self._backend.apply_async(batch, callback=cb)\r\n    755             # A job can complete so quickly than its callback is\r\n    756             # called before we get here, causing self._jobs to\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in apply_async(self, func, callback)\r\n    207     def apply_async(self, func, callback=None):\r\n    208         \"\"\"Schedule a func to be run\"\"\"\r\n--> 209         result = ImmediateResult(func)\r\n    210         if callback:\r\n    211             callback(result)\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in __init__(self, batch)\r\n    588         # Don't delay the application, to avoid keeping the input\r\n    589         # arguments in memory\r\n--> 590         self.results = batch()\r\n    591 \r\n    592     def get(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self)\r\n    254         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    255             return [func(*args, **kwargs)\r\n--> 256                     for func, args, kwargs in self.items]\r\n    257 \r\n    258     def __len__(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/parallel.py in <listcomp>(.0)\r\n    254         with parallel_backend(self._backend, n_jobs=self._n_jobs):\r\n    255             return [func(*args, **kwargs)\r\n--> 256                     for func, args, kwargs in self.items]\r\n    257 \r\n    258     def __len__(self):\r\n\r\n~/miniconda3/lib/python3.7/site-packages/joblib/memory.py in __call__(self, *args, **kwargs)\r\n    353 \r\n    354     def __call__(self, *args, **kwargs):\r\n--> 355         return self.func(*args, **kwargs)\r\n    356 \r\n    357     def call_and_shelve(self, *args, **kwargs):\r\n\r\n~/nilearn/nilearn/decoding/decoder.py in _parallel_fit(estimator, X, y, train, test, param_grid, is_classification, scorer, mask_img, class_index, screening_percentile)\r\n    177 \r\n    178     if (selector is not None) and do_screening:\r\n--> 179         best_coef = selector.inverse_transform(best_coef)\r\n    180 \r\n    181     return class_index, best_coef, best_intercept, best_param, best_score\r\n\r\n~/miniconda3/lib/python3.7/site-packages/sklearn/feature_selection/_base.py in inverse_transform(self, X)\r\n    113 \r\n    114         support = self.get_support()\r\n--> 115         X = check_array(X, dtype=None)\r\n    116         if support.sum() != X.shape[1]:\r\n    117             raise ValueError(\"X has a different shape than during fitting.\")\r\n\r\n~/miniconda3/lib/python3.7/site-packages/sklearn/utils/validation.py in check_array(array, accept_sparse, accept_large_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\r\n    554                     \"Reshape your data either using array.reshape(-1, 1) if \"\r\n    555                     \"your data has a single feature or array.reshape(1, -1) \"\r\n--> 556                     \"if it contains a single sample.\".format(array))\r\n    557 \r\n    558         # in the future np.flexible dtypes will be handled like object dtypes\r\n\r\nValueError: Expected 2D array, got 1D array instead:\r\narray=[-0.1109591  -0.11897708 -0.07845441 ... -0.06480181 -0.10047668\r\n -0.13377442].\r\nReshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.\r\n``` \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2330", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2330/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2330/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2330/events", "html_url": "https://github.com/nilearn/nilearn/issues/2330", "id": 578174792, "node_id": "MDU6SXNzdWU1NzgxNzQ3OTI=", "number": 2330, "title": "Test failure in surface plotting with the latest matplotlib version?", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 744591066, "node_id": "MDU6TGFiZWw3NDQ1OTEwNjY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20medium", "name": "effort: medium", "color": "ddad1a", "default": false, "description": "Estimated medium effort task"}, {"id": 1233056920, "node_id": "MDU6TGFiZWwxMjMzMDU2OTIw", "url": "https://api.github.com/repos/nilearn/nilearn/labels/code%20quality", "name": "code quality", "color": "09ef5a", "default": false, "description": ""}, {"id": 1728470102, "node_id": "MDU6TGFiZWwxNzI4NDcwMTAy", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Maintenance", "name": "Maintenance", "color": "fc918f", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-09T20:34:39Z", "updated_at": "2020-04-27T17:58:47Z", "closed_at": "2020-04-27T17:58:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With seem to have test failures with the CIs that appeared recently:\r\nhttps://travis-ci.org/nilearn/nilearn/jobs/660088664#L6059\r\n\r\nI suspect that they are related to a matplotlib release.\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2330/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2330/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2303", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2303/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2303/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2303/events", "html_url": "https://github.com/nilearn/nilearn/issues/2303", "id": 559019869, "node_id": "MDU6SXNzdWU1NTkwMTk4Njk=", "number": 2303, "title": "nilearn.plotting.plot_connectome does not support node_color in array format", "user": {"login": "Conxz", "id": 712044, "node_id": "MDQ6VXNlcjcxMjA0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/712044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Conxz", "html_url": "https://github.com/Conxz", "followers_url": "https://api.github.com/users/Conxz/followers", "following_url": "https://api.github.com/users/Conxz/following{/other_user}", "gists_url": "https://api.github.com/users/Conxz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Conxz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Conxz/subscriptions", "organizations_url": "https://api.github.com/users/Conxz/orgs", "repos_url": "https://api.github.com/users/Conxz/repos", "events_url": "https://api.github.com/users/Conxz/events{/privacy}", "received_events_url": "https://api.github.com/users/Conxz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-03T11:24:44Z", "updated_at": "2021-01-14T08:23:00Z", "closed_at": "2021-01-14T08:23:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "- What version of Nilearn are you using?\r\nTested in both v0.5.2 and v0.6.0 (with help from @jeromedockes). \r\n- What were you trying to do?\r\nI would like to specify a list of colors for nodes for plot_connectome.\r\n- What did you expect will happen?\r\nThe current version only supports node_color in list format, but not array format. \r\n- What actually happened?\r\nErrors were reported like below (v0.5.2). \r\n```\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-23-1935b6c630f1> in <module>()\r\n----> 1 plotting.plot_connectome(connetome, coords, node_color=np.array(['red','seagreen','blue']))\r\n\r\n/home/xiakon/.conda/envs/bigpype/lib/python2.7/site-packages/nilearn/plotting/img_plotting.pyc in plot_connectome(adjacency_matrix, node_coords, node_color, node_size, edge_cmap, edge_vmin, edge_vmax, edge_threshold, output_file, display_mode, figure, axes, title, annotate, black_bg, alpha, edge_kwargs, node_kwargs, colorbar)\r\n   1283                       edge_threshold=edge_threshold,\r\n   1284                       edge_kwargs=edge_kwargs, node_kwargs=node_kwargs,\r\n-> 1285                       colorbar=colorbar)\r\n   1286 \r\n   1287     if output_file is not None:\r\n\r\n/home/xiakon/.conda/envs/bigpype/lib/python2.7/site-packages/nilearn/plotting/displays.pyc in add_graph(self, adjacency_matrix, node_coords, node_color, node_size, edge_cmap, edge_vmin, edge_vmax, edge_threshold, edge_kwargs, node_kwargs, colorbar)\r\n   1750         if node_kwargs is None:\r\n   1751             node_kwargs = {}\r\n-> 1752         if node_color == 'auto':\r\n   1753             nb_nodes = len(node_coords)\r\n   1754             node_color = mpl_cm.Set2(np.linspace(0, 1, nb_nodes))\r\n\r\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\r\n```\r\n\r\nHere is the code for quick reproducing the problem. \r\n```\r\nfrom nilearn import plotting\r\nimport numpy as np\r\ncoords = [(0,-52,18),(-46,-68,32),(46,-68,32)]\r\nconnetome = np.ones((3,3))\r\nplotting.plot_connectome(connetome, coords, node_color=np.array(['red','seagreen','blue']))\r\n```\r\nI used np.array here just for simulating the situation when we specifying node_color via a column of a csv file. \r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2303/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2220", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2220/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2220/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2220/events", "html_url": "https://github.com/nilearn/nilearn/issues/2220", "id": 524626723, "node_id": "MDU6SXNzdWU1MjQ2MjY3MjM=", "number": 2220, "title": "plot_surf_roi Colorbar values are in scientific format ", "user": {"login": "seralouk", "id": 25902670, "node_id": "MDQ6VXNlcjI1OTAyNjcw", "avatar_url": "https://avatars.githubusercontent.com/u/25902670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seralouk", "html_url": "https://github.com/seralouk", "followers_url": "https://api.github.com/users/seralouk/followers", "following_url": "https://api.github.com/users/seralouk/following{/other_user}", "gists_url": "https://api.github.com/users/seralouk/gists{/gist_id}", "starred_url": "https://api.github.com/users/seralouk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seralouk/subscriptions", "organizations_url": "https://api.github.com/users/seralouk/orgs", "repos_url": "https://api.github.com/users/seralouk/repos", "events_url": "https://api.github.com/users/seralouk/events{/privacy}", "received_events_url": "https://api.github.com/users/seralouk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-11-18T21:21:22Z", "updated_at": "2021-01-04T13:30:35Z", "closed_at": "2021-01-04T13:30:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\n\r\nI am plotting a `roi_map` and I get colorbar values in scientific format. I would expect to have only integers values since my `roi_map` contains integers.\r\nThe parcellation file contains only integers and can be found here: https://gofile.io/?c=ePmDcg\r\n\r\nAdditionally, I see `format='%.2g'` in https://github.com/nilearn/nilearn/blob/0941897aca6f3073221fcd3483afe91b8305b27c/nilearn/plotting/surf_plotting.py#L293. Maybe this is the culprit?\r\n\r\nShouldn't be `format='%.1f'` ?\r\n\r\n\r\nHere is a small example:\r\n\r\n```\r\nimport numpy as np\r\nfrom nilearn import plotting, datasets\r\n\r\nparcellation = np.load(\"parcellation.npy\")\r\nsurface = datasets.fetch_surf_fsaverage('fsaverage') # the high resolution file - plot will take time\r\n\r\nplotting.plot_surf_roi(surface[\"pial_left\"], roi_map = parcellation, \\\r\n\t\themi = 'left', view = 'lateral', bg_map = surface[\"sulc_left\"], \\\r\n\t\tbg_on_data = True, darkness = 0.6, \\\r\n\t\tcmap = 'jet', colorbar = True)\r\n\r\n```\r\n![Figure_1](https://user-images.githubusercontent.com/25902670/69094532-d2e36200-0a50-11ea-9a2a-cc2a14b3c39d.png)\r\n\r\nP.S: even by manually adding `vmin=0` and `vmax=181` the problem remains.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2220/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2067", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/2067/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/2067/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/2067/events", "html_url": "https://github.com/nilearn/nilearn/issues/2067", "id": 450815494, "node_id": "MDU6SXNzdWU0NTA4MTU0OTQ=", "number": 2067, "title": "image values saved by concat_imgs.to_filename", "user": {"login": "poldrack", "id": 871056, "node_id": "MDQ6VXNlcjg3MTA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/871056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poldrack", "html_url": "https://github.com/poldrack", "followers_url": "https://api.github.com/users/poldrack/followers", "following_url": "https://api.github.com/users/poldrack/following{/other_user}", "gists_url": "https://api.github.com/users/poldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/poldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poldrack/subscriptions", "organizations_url": "https://api.github.com/users/poldrack/orgs", "repos_url": "https://api.github.com/users/poldrack/repos", "events_url": "https://api.github.com/users/poldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/poldrack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-05-31T14:03:53Z", "updated_at": "2020-12-21T19:37:44Z", "closed_at": "2020-12-21T19:37:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "What version of Nilearn are you using?\r\n 0.5.2\r\n\r\nWhat were you trying to do? \r\n- concatenate a set of images using concat_imgs\r\n\r\nWhat did you expect will happen?\r\n-  the values of the image in the concatenated image should be exactly the same as those in the original image\r\n\r\nWhat actually happened?\r\n-  the values of the image in the concatenated image are different in the saved file (but not in the data within the concatenated image variable).  in particular, voxels with a value of zero in the original image do not have a value of zero in the concatenated image file - the actual value varies between files. this was confirmed both by loading the image using nibabel and by viewing using fsleyes.\r\n\r\nList the steps you performed that revealed the bug to you.\r\n\r\n```\r\n# concatenate the files and save\r\nconcat_img = nilearn.image.concat_imgs(hmaps)\r\nconcat_img.to_filename(os.path.join(output_dir,'thresh_concat/hypo%d.nii.gz'%hyp))\r\n# sum of the image should be zero\r\nprint(numpy.sum(concat_img.get_data()[:,:,:,0]))\r\n``` \r\n0.0\r\n``` \r\n# now reload the same file\r\nci = nibabel.load(os.path.join(output_dir,'thresh_concat/hypo%d.nii.gz'%hyp))\r\nprint(numpy.sum(ci.get_data()[:,:,:,0]))\r\n``` \r\n41116.805401198566\r\n\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/2067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/2067/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1922", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1922/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1922/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1922/events", "html_url": "https://github.com/nilearn/nilearn/issues/1922", "id": 410836037, "node_id": "MDU6SXNzdWU0MTA4MzYwMzc=", "number": 1922, "title": "plot_glass_brain fails to show the colorbar when images have np.inf", "user": {"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-15T16:04:55Z", "updated_at": "2019-04-15T08:43:02Z", "closed_at": "2019-04-15T08:43:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Code to reproduce:\r\n\r\n```python\r\nimport nibabel\r\nfrom nilearn import plotting\r\nfrom nilearn.plotting.tests.test_img_plotting import _generate_img\r\n\r\nimg = _generate_img()\r\ndata = img.get_data()\r\n\r\ndata[6, 5, 2] = np.inf\r\nimg = nibabel.Nifti1Image(data, np.eye(4))\r\nplotting.plot_glass_brain(img, colorbar=True)\r\n```\r\nWhereas it is not the case:\r\n\r\n- when ```colorbar=False``` with plot_glass_brain\r\n- with plot_stat_map with both colorbar= True or False ", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1922/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1819", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1819/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1819/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1819/events", "html_url": "https://github.com/nilearn/nilearn/issues/1819", "id": 371309833, "node_id": "MDU6SXNzdWUzNzEzMDk4MzM=", "number": 1819, "title": "Development Version Fail 0.5.0", "user": {"login": "QinglinDong", "id": 8608202, "node_id": "MDQ6VXNlcjg2MDgyMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8608202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QinglinDong", "html_url": "https://github.com/QinglinDong", "followers_url": "https://api.github.com/users/QinglinDong/followers", "following_url": "https://api.github.com/users/QinglinDong/following{/other_user}", "gists_url": "https://api.github.com/users/QinglinDong/gists{/gist_id}", "starred_url": "https://api.github.com/users/QinglinDong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QinglinDong/subscriptions", "organizations_url": "https://api.github.com/users/QinglinDong/orgs", "repos_url": "https://api.github.com/users/QinglinDong/repos", "events_url": "https://api.github.com/users/QinglinDong/events{/privacy}", "received_events_url": "https://api.github.com/users/QinglinDong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 1068725459, "node_id": "MDU6TGFiZWwxMDY4NzI1NDU5", "url": "https://api.github.com/repos/nilearn/nilearn/labels/User%20Experience", "name": "User Experience", "color": "2461e5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-17T23:53:35Z", "updated_at": "2018-10-18T15:37:56Z", "closed_at": "2018-10-18T13:37:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Different behavior emerges when nilearn0.5.0b0 was installed from source code with\r\n`pip install -e <local_path>`  ,  `pip install  <local_path>`  , `python setup.py develop` or `easy_install <local_path>` \r\n\r\nThis issue applies to both python2 and python3.\r\nThis issue applies to both pip and conda.\r\n`import nilearn` working normal though.\r\n\r\nIt is all good with `pip install nilearn`, which turns out to be nilearn0.4.2\r\n\r\n `plot_compare_resting_state_decomposition.py` yields empty brain map results with both ICA and DL and here's the output:\r\n\r\n```\r\nplot_compare_resting_state_decomposition.py:27: DeprecationWarning: Python2 support is deprecated and will be removed in a future release. Consider switching to Python3.\r\n  from nilearn import datasets\r\n/home/uga_qinglin/Documents/nilearn/nilearn/datasets/func.py:503: VisibleDeprecationWarning: Reading unicode strings without specifying the encoding argument is deprecated. Set the encoding, use None for the system default.\r\n  dtype=None)\r\nFirst functional nifti image (4D) is at: /home/uga_qinglin/nilearn_data/adhd/data/0010042/0010042_rest_tshift_RPI_voreg_mni.nii.gz\r\n/usr/local/lib/python2.7/dist-packages/sklearn/linear_model/base.py:35: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ..utils.seq_dataset import ArrayDataset, CSRDataset\r\n/usr/local/lib/python2.7/dist-packages/sklearn/linear_model/least_angle.py:23: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ..utils import arrayfuncs, as_float_array, check_X_y, deprecated\r\n/usr/local/lib/python2.7/dist-packages/sklearn/linear_model/coordinate_descent.py:29: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from . import cd_fast\r\n/usr/local/lib/python2.7/dist-packages/sklearn/linear_model/__init__.py:22: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from .sgd_fast import Hinge, Log, ModifiedHuber, SquaredLoss, Huber\r\n/usr/local/lib/python2.7/dist-packages/sklearn/linear_model/sag.py:12: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from .sag_fast import sag\r\n/usr/local/lib/python2.7/dist-packages/sklearn/svm/base.py:8: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from . import libsvm, liblinear\r\n/usr/local/lib/python2.7/dist-packages/sklearn/decomposition/online_lda.py:28: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ._online_lda import (mean_change, _dirichlet_expectation_1d,\r\n[Example] Learning maps using DictionaryLearning model\r\n/home/uga_qinglin/Documents/nilearn/nilearn/_utils/cache_mixin.py:84: DeprecationWarning: The 'cachedir' parameter has been deprecated in version 0.12 and will be removed in version 0.14.\r\nYou provided \"cachedir='nilearn_cache'\", use \"location='nilearn_cache'\" instead.\r\n  memory = Memory(cachedir=cache_dir, verbose=verbose)\r\n[MultiNiftiMasker.fit] Loading data from [/home/uga_qinglin/nilearn_data/adhd/data/0010042/0010042_rest_tshift_RPI_voreg_mni.nii.gz, /home/uga_qinglin/nilearn_data/adhd/data/0010064/0010064_rest_tshift_RPI_voreg_mni.nii.gz, /home/uga_qinglin\r\n[MultiNiftiMasker.fit] Computing mask\r\n/home/uga_qinglin/Documents/nilearn/nilearn/_utils/cache_mixin.py:232: DeprecationWarning: The 'cachedir' attribute has been deprecated in version 0.12 and will be removed in version 0.14.\r\nUse os.path.join(memory.location, 'joblib') attribute instead.\r\n  if (memory.cachedir is None and memory_level is not None\r\n[MultiNiftiMasker.transform] Resampling mask\r\n[DictLearning] Loading data\r\n[DictLearning] Learning initial components\r\n[Parallel(n_jobs=1)]: Using backend SequentialBackend with 1 concurrent workers.\r\n[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    0.0s finished\r\n/usr/local/lib/python2.7/dist-packages/scipy/stats/stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, arr[np.array(seq)], which will result either in an error or a different result.\r\n  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval\r\n[DictLearning] Computing initial loadings\r\n[DictLearning] Learning dictionary\r\n[Example] Saving results\r\n[Example] Learning maps using CanICA model\r\n[MultiNiftiMasker.fit] Loading data from [/home/uga_qinglin/nilearn_data/adhd/data/0010042/0010042_rest_tshift_RPI_voreg_mni.nii.gz, /home/uga_qinglin/nilearn_data/adhd/data/0010064/0010064_rest_tshift_RPI_voreg_mni.nii.gz, /home/uga_qinglin\r\n[MultiNiftiMasker.fit] Computing mask\r\n[MultiNiftiMasker.transform] Resampling mask\r\n[CanICA] Loading data\r\n________________________________________________________________________________\r\n[Memory] Calling sklearn.utils.extmath.randomized_svd...\r\nrandomized_svd(array([[0.003302, ..., 0.004735],\r\n       ...,\r\n       [0.000977, ..., 0.000686]], dtype=float32), n_iter=3, random_state=None, transpose=True, n_components=40)\r\n___________________________________________________randomized_svd - 1.1s, 0.0min\r\n[Parallel(n_jobs=1)]: Using backend SequentialBackend with 1 concurrent workers.\r\n________________________________________________________________________________\r\n[Memory] Calling sklearn.decomposition.fastica_.fastica...\r\nfastica(array([[ 0.002544, ..., -0.002001],\r\n       ...,\r\n       [ 0.001537, ..., -0.004063]]), fun='cube', random_state=1385886169, whiten=True)\r\n__________________________________________________________fastica - 9.5s, 0.2min\r\n[Parallel(n_jobs=1)]: Done   1 out of   1 | elapsed:    9.5s finished\r\n[Example] Saving results\r\n/usr/local/lib/python2.7/dist-packages/sklearn/utils/graph.py:16: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from .graph_shortest_path import graph_shortest_path  # noqa\r\n/usr/local/lib/python2.7/dist-packages/sklearn/isotonic.py:11: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ._isotonic import _inplace_contiguous_isotonic_regression, _make_unique\r\n/usr/local/lib/python2.7/dist-packages/sklearn/manifold/t_sne.py:26: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from . import _utils\r\n/usr/local/lib/python2.7/dist-packages/sklearn/tree/tree.py:40: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ._criterion import Criterion\r\n/usr/local/lib/python2.7/dist-packages/sklearn/cluster/k_means_.py:37: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from . import _k_means\r\n/usr/local/lib/python2.7/dist-packages/sklearn/cluster/hierarchical.py:23: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from . import _hierarchical\r\n/usr/local/lib/python2.7/dist-packages/sklearn/cluster/dbscan_.py:19: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n  from ._dbscan_inner import dbscan_inner\r\n/home/uga_qinglin/Documents/nilearn/nilearn/plotting/find_cuts.py:62: UserWarning: Given img is empty. Returning default cut_coords=(0.0, 0.0, 0.0) instead.\r\n  .format(DEFAULT_CUT_COORDS))\r\n/home/uga_qinglin/Documents/nilearn/nilearn/plotting/displays.py:763: UserWarning: empty mask\r\n  get_mask_bounds(new_img_like(img, not_mask, affine))\r\n/usr/local/lib/python2.7/dist-packages/matplotlib/contour.py:1230: UserWarning: No contour levels were found within the data range.\r\n  warnings.warn(\"No contour levels were found\"\r\n/usr/local/lib/python2.7/dist-packages/numpy/ma/core.py:2785: UserWarning: Warning: converting a masked element to nan.\r\n  order=order, subok=True, ndmin=ndmin)\r\n```\r\nDoes anyone know how to make it work?\r\nOr how to contribute without `pip install -e`?\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1819/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1815", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1815/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1815/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1815/events", "html_url": "https://github.com/nilearn/nilearn/issues/1815", "id": 370126606, "node_id": "MDU6SXNzdWUzNzAxMjY2MDY=", "number": 1815, "title": "orientation problem of background image in plot_glass_brain ", "user": {"login": "chrplr", "id": 1530674, "node_id": "MDQ6VXNlcjE1MzA2NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1530674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrplr", "html_url": "https://github.com/chrplr", "followers_url": "https://api.github.com/users/chrplr/followers", "following_url": "https://api.github.com/users/chrplr/following{/other_user}", "gists_url": "https://api.github.com/users/chrplr/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrplr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrplr/subscriptions", "organizations_url": "https://api.github.com/users/chrplr/orgs", "repos_url": "https://api.github.com/users/chrplr/repos", "events_url": "https://api.github.com/users/chrplr/events{/privacy}", "received_events_url": "https://api.github.com/users/chrplr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "kchawla-pi", "id": 8203204, "node_id": "MDQ6VXNlcjgyMDMyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8203204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kchawla-pi", "html_url": "https://github.com/kchawla-pi", "followers_url": "https://api.github.com/users/kchawla-pi/followers", "following_url": "https://api.github.com/users/kchawla-pi/following{/other_user}", "gists_url": "https://api.github.com/users/kchawla-pi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kchawla-pi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kchawla-pi/subscriptions", "organizations_url": "https://api.github.com/users/kchawla-pi/orgs", "repos_url": "https://api.github.com/users/kchawla-pi/repos", "events_url": "https://api.github.com/users/kchawla-pi/events{/privacy}", "received_events_url": "https://api.github.com/users/kchawla-pi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kchawla-pi", "id": 8203204, "node_id": "MDQ6VXNlcjgyMDMyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8203204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kchawla-pi", "html_url": "https://github.com/kchawla-pi", "followers_url": "https://api.github.com/users/kchawla-pi/followers", "following_url": "https://api.github.com/users/kchawla-pi/following{/other_user}", "gists_url": "https://api.github.com/users/kchawla-pi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kchawla-pi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kchawla-pi/subscriptions", "organizations_url": "https://api.github.com/users/kchawla-pi/orgs", "repos_url": "https://api.github.com/users/kchawla-pi/repos", "events_url": "https://api.github.com/users/kchawla-pi/events{/privacy}", "received_events_url": "https://api.github.com/users/kchawla-pi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-10-15T11:51:43Z", "updated_at": "2019-10-14T15:20:16Z", "closed_at": "2019-10-14T15:20:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using `plot_glass_brain(..., display_mode='lyrz')` on a volume with no non-zero data in the left hemisphere, the brain contour is flipped (i.e. the left hemi. is displayed like a right hemi.) See picture below.\r\n\r\n![figure_1](https://user-images.githubusercontent.com/1530674/46949283-2b437580-d081-11e8-9fe3-63122eb44ab9.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1815/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1815/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1751", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1751/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1751/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1751/events", "html_url": "https://github.com/nilearn/nilearn/issues/1751", "id": 356295238, "node_id": "MDU6SXNzdWUzNTYyOTUyMzg=", "number": 1751, "title": "NiftiMasker with target_affine throws exception.", "user": {"login": "cl445", "id": 3482300, "node_id": "MDQ6VXNlcjM0ODIzMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/3482300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cl445", "html_url": "https://github.com/cl445", "followers_url": "https://api.github.com/users/cl445/followers", "following_url": "https://api.github.com/users/cl445/following{/other_user}", "gists_url": "https://api.github.com/users/cl445/gists{/gist_id}", "starred_url": "https://api.github.com/users/cl445/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cl445/subscriptions", "organizations_url": "https://api.github.com/users/cl445/orgs", "repos_url": "https://api.github.com/users/cl445/repos", "events_url": "https://api.github.com/users/cl445/events{/privacy}", "received_events_url": "https://api.github.com/users/cl445/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 744591066, "node_id": "MDU6TGFiZWw3NDQ1OTEwNjY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/effort:%20medium", "name": "effort: medium", "color": "ddad1a", "default": false, "description": "Estimated medium effort task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-09-02T16:26:15Z", "updated_at": "2018-10-14T06:41:24Z", "closed_at": "2018-10-14T06:41:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using the NifitiMasker in a sklearn pipeline. Everythings works fine until i try to reshape the images:\r\n\r\n`nifti_masker = NiftiMasker(target_affine=np.eye(3)*3)`\r\n\r\nThe error i got was:\r\n\r\n`File \"/anaconda3/envs/toolbox/lib/python3.6/site-packages/nilearn/masking.py\", line 62, in _load_mask_img\r\n    % values)\r\nValueError: Given mask is not made of 2 values: [-0.0000000e+00  1.4012985e-45  2.8025969e-45 ...  5.1444152e-15\r\n  5.3116801e-15  1.0000000e+00]. Cannot interpret as true or false`\r\n\r\nI unsing nilearn version 0.4.2 .", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1736", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1736/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1736/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1736/events", "html_url": "https://github.com/nilearn/nilearn/issues/1736", "id": 350021821, "node_id": "MDU6SXNzdWUzNTAwMjE4MjE=", "number": 1736, "title": "plot_decoding_tutorial.py:  condition_mask is not being applied to fmri_masked (?)", "user": {"login": "kchawla-pi", "id": 8203204, "node_id": "MDQ6VXNlcjgyMDMyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8203204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kchawla-pi", "html_url": "https://github.com/kchawla-pi", "followers_url": "https://api.github.com/users/kchawla-pi/followers", "following_url": "https://api.github.com/users/kchawla-pi/following{/other_user}", "gists_url": "https://api.github.com/users/kchawla-pi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kchawla-pi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kchawla-pi/subscriptions", "organizations_url": "https://api.github.com/users/kchawla-pi/orgs", "repos_url": "https://api.github.com/users/kchawla-pi/repos", "events_url": "https://api.github.com/users/kchawla-pi/events{/privacy}", "received_events_url": "https://api.github.com/users/kchawla-pi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-08-13T13:06:57Z", "updated_at": "2020-09-17T07:18:22Z", "closed_at": "2020-09-17T07:18:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "While running `/examples/plot_decoding_tutorial.py`, I am getting this error (and so is CircleCI 2.0)\r\n@bthirion found that while condition_mask should be applied to both conditions and fmri_masked, in the latter case, it looks like no masking is applied. He thinks Pandas is to blame.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"examples/plot_decoding_tutorial.py\", line 144, in <module>\r\n    svc.fit(fmri_masked, conditions)\r\n  File \"/home/kshitij/anaconda3/envs/nilearn-py35/lib/python3.5/site-packages/sklearn/svm/base.py\", line 151, in fit\r\n    X, y = check_X_y(X, y, dtype=np.float64, order='C', accept_sparse='csr')\r\n  File \"/home/kshitij/anaconda3/envs/nilearn-py35/lib/python3.5/site-packages/sklearn/utils/validation.py\", line 531, in check_X_y\r\n    check_consistent_length(X, y)\r\n  File \"/home/kshitij/anaconda3/envs/nilearn-py35/lib/python3.5/site-packages/sklearn/utils/validation.py\", line 181, in check_consistent_length\r\n    \" samples: %r\" % [int(l) for l in lengths])\r\nValueError: Found input variables with inconsistent numbers of samples: [1452, 216]\r\n```\r\nI have encountered this kind of error before, but not when running in `jupyter lab`. Now it is occurring in that as well.\r\n\r\nPackage versions:\r\n - pandas=0.23.1\r\n - python=3.5.0\r\n - scikit-learn=0.18\r\n - scipy=0.17.0\r\n - numpy=1.11.0\r\n - matplotlib=1.5.1\r\n\r\nI have noticed that both `conditions` and `condition_mask` are of type `pandas.core.series.Series`, `fmri_masked` is of type `numpy.ndarray`. Dunno yet if that's relevant here.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1731", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1731/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1731/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1731/events", "html_url": "https://github.com/nilearn/nilearn/issues/1731", "id": 348838810, "node_id": "MDU6SXNzdWUzNDg4Mzg4MTA=", "number": 1731, "title": "fetch_neurovault_ids specifying the collection seems to return only one image", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-08T18:23:06Z", "updated_at": "2020-05-21T19:50:48Z", "closed_at": "2020-05-21T19:50:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\"data = datasets.fetch_neurovault_ids(collection_ids=[658])\"\r\nreturns only one image, while I think that there are several images in the collection.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1731/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1731/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1725", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1725/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1725/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1725/events", "html_url": "https://github.com/nilearn/nilearn/issues/1725", "id": 347948369, "node_id": "MDU6SXNzdWUzNDc5NDgzNjk=", "number": 1725, "title": "Cater for almost 3D images in view_stat_map", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-06T14:30:22Z", "updated_at": "2018-08-06T22:24:54Z", "closed_at": "2018-08-06T22:24:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "view_stat_map fails when given a 4D image with shape[-1] = 1:\r\n\r\n```\r\n>>> plotting.view_stat_map(decoder.coef_img_, bg_img=haxby_dataset.anat[0])\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-30-dde0b99b81f1> in <module>()\r\n----> 1 plotting.view_stat_map(decoder.coef_img_, bg_img=haxby_dataset.anat[0])\r\n\r\n/home/varoquau/dev/nilearn/nilearn/plotting/html_stat_map.py in view_stat_map(stat_map_img, threshold, bg_img, vmax)\r\n     90     stat_map_img = image.resample_to_img(stat_map_img, bg_img)\r\n     91     stat_map_img = image.new_img_like(\r\n---> 92         stat_map_img, stat_map_img.get_data() * bg_mask.get_data())\r\n     93     if threshold is None:\r\n     94         abs_threshold = 'null'\r\n\r\nValueError: operands could not be broadcast together with shapes (124,256,256,1) (124,256,256) \r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1724", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1724/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1724/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1724/events", "html_url": "https://github.com/nilearn/nilearn/issues/1724", "id": 347645398, "node_id": "MDU6SXNzdWUzNDc2NDUzOTg=", "number": 1724, "title": "GroupSparseCovariance doesn't work with scikit-learn master", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-08-04T20:15:39Z", "updated_at": "2020-02-29T23:58:32Z", "closed_at": "2018-08-30T12:09:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Running the examples on scikit-learn master gives the following:\r\n\r\n```\r\n/home/varoquau/dev/nilearn/examples/03_connectivity/plot_multi_subject_connectome.py failed leaving traceback:\r\nTraceback (most recent call last):\r\n  File \"/home/varoquau/dev/nilearn/doc/sphinxext/sphinx_gallery/gen_rst.py\", line 472, in execute_code_block\r\n    exec(code_block, example_globals)\r\n  File \"<string>\", line 3, in <module>\r\n  File \"/home/varoquau/dev/nilearn/nilearn/connectome/group_sparse_cov.py\", line 948, in fit\r\n    classifier=False\r\n  File \"/home/varoquau/dev/scikit-learn/sklearn/model_selection/_split.py\", line 1957, in check_cv\r\n    \"or an iterable. Got %s.\" % cv)\r\nValueError: Expected cv as an integer, cross-validation object (from sklearn.model_selection) or an iterable. Got None.\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1673", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1673/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1673/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1673/events", "html_url": "https://github.com/nilearn/nilearn/issues/1673", "id": 338036956, "node_id": "MDU6SXNzdWUzMzgwMzY5NTY=", "number": 1673, "title": "Reduced signals of NiftiLabelsMasker on two set of inputs", "user": {"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-07-03T20:04:58Z", "updated_at": "2018-08-03T23:05:59Z", "closed_at": "2018-08-03T23:05:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Problem lies in ```resample_img``` downstream. After resampling we end up having 443 labels in labels_img.\r\n\r\n```python\r\nimport numpy as np\r\nfrom nilearn import datasets\r\nfrom nilearn.input_data import NiftiLabelsMasker\r\nfrom nilearn.image import load_img\r\n\r\nbasc = datasets.fetch_atlas_basc_multiscale_2015()\r\nn_labels = len(np.unique(load_img(basc.scale444).get_data()))\r\nprint(n_labels) # includes background\r\ncollection_terms = {'id': 504}\r\nimage_terms = {'not_mni': False}\r\n\r\ndata = datasets.fetch_neurovault(collection_terms=collection_terms,\r\n                                 image_terms=image_terms, max_images=1)\r\nprint(load_img(data.images[0]).affine)\r\nprint(load_img(data.images[0]).shape)\r\n\r\nmasker = NiftiLabelsMasker(labels_img=basc.scale444,\r\n                           resampling_target='data', verbose=1)\r\nX_reduced = masker.fit_transform(data.images)\r\nprint(X_reduced.shape)\r\n```\r\nExpected: (1, 444)\r\n\r\nThis would break ```inverse_transform``` as input there is self.labels_img rather than self._resampled_labels_img_\r\n\r\nWhile this is not the case for basc.scale325. Also, this is not the case for same scale 444 but on adhd datasets.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1612", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1612/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1612/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1612/events", "html_url": "https://github.com/nilearn/nilearn/issues/1612", "id": 298918257, "node_id": "MDU6SXNzdWUyOTg5MTgyNTc=", "number": 1612, "title": "dim argument is not taken into account in `plot_prob_atlas` function.", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-21T10:38:09Z", "updated_at": "2018-03-09T21:16:29Z", "closed_at": "2018-03-09T21:16:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "After a quick look, the argument seems to be forgotten in the code of the function.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1612/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1612/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1595", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1595/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1595/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1595/events", "html_url": "https://github.com/nilearn/nilearn/issues/1595", "id": 290963345, "node_id": "MDU6SXNzdWUyOTA5NjMzNDU=", "number": 1595, "title": "add_markers on plot_glass_brain results in TypeError", "user": {"login": "lrq3000", "id": 1118942, "node_id": "MDQ6VXNlcjExMTg5NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1118942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lrq3000", "html_url": "https://github.com/lrq3000", "followers_url": "https://api.github.com/users/lrq3000/followers", "following_url": "https://api.github.com/users/lrq3000/following{/other_user}", "gists_url": "https://api.github.com/users/lrq3000/gists{/gist_id}", "starred_url": "https://api.github.com/users/lrq3000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lrq3000/subscriptions", "organizations_url": "https://api.github.com/users/lrq3000/orgs", "repos_url": "https://api.github.com/users/lrq3000/repos", "events_url": "https://api.github.com/users/lrq3000/events{/privacy}", "received_events_url": "https://api.github.com/users/lrq3000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-23T19:27:03Z", "updated_at": "2018-01-30T21:10:59Z", "closed_at": "2018-01-30T21:10:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey there!\r\n\r\nI tried to do the following:\r\n\r\n```python\r\nfig = plotting.plot_glass_brain(None)\r\ncoords = [(-34, -39, -9)]\r\nfig.add_markers(coords)\r\n```\r\n\r\nUnfortunately, it fails with the following error:\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-10-8bfe69e50628> in <module>()\r\n      4 # and third argument `marker_size` denotes size of the sphere\r\n      5 coords = [(-34, -39, -9)]\r\n----> 6 fig.add_markers(coords)\r\n\r\nC:\\Anaconda2\\lib\\site-packages\\nilearn\\plotting\\displays.pyc in add_markers(self, marker_coords, marker_color, marker_size, **kwargs)\r\n    833             # current slice.\r\n    834             # XXX: should we keep this heuristic?\r\n--> 835             mask = np.abs(third_d - coord) <= 2.\r\n    836             xdata, ydata = marker_coords_2d.T\r\n    837             display_ax.ax.scatter(xdata[mask], ydata[mask],\r\n\r\nTypeError: unsupported operand type(s) for -: 'int' and 'NoneType'\r\n```\r\n\r\nI am using the latest nilearn from pypi.\r\n\r\nThanks a lot for looking into this issue!", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1586", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1586/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1586/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1586/events", "html_url": "https://github.com/nilearn/nilearn/issues/1586", "id": 286141470, "node_id": "MDU6SXNzdWUyODYxNDE0NzA=", "number": 1586, "title": "Online documentation search is broken", "user": {"login": "chrisgorgo", "id": 238759, "node_id": "MDQ6VXNlcjIzODc1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/238759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisgorgo", "html_url": "https://github.com/chrisgorgo", "followers_url": "https://api.github.com/users/chrisgorgo/followers", "following_url": "https://api.github.com/users/chrisgorgo/following{/other_user}", "gists_url": "https://api.github.com/users/chrisgorgo/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisgorgo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisgorgo/subscriptions", "organizations_url": "https://api.github.com/users/chrisgorgo/orgs", "repos_url": "https://api.github.com/users/chrisgorgo/repos", "events_url": "https://api.github.com/users/chrisgorgo/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisgorgo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-04T23:07:48Z", "updated_at": "2018-01-07T21:09:03Z", "closed_at": "2018-01-07T21:09:03Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/238759/34588285-04200842-f161-11e7-84d7-4542aa099bad.png)\r\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1399", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1399/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1399/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1399/events", "html_url": "https://github.com/nilearn/nilearn/issues/1399", "id": 211452237, "node_id": "MDU6SXNzdWUyMTE0NTIyMzc=", "number": 1399, "title": "unmask works with 1D array, fails with 1D list", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 126854827, "node_id": "MDU6TGFiZWwxMjY4NTQ4Mjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/API", "name": "API", "color": "fef2c0", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-02T16:55:55Z", "updated_at": "2017-03-03T11:11:03Z", "closed_at": "2017-03-03T11:11:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\n<ipython-input-27-7f9201be721b> in <module>()\r\n----> 1 unmask(mask_data[mask_data].tolist(), mask_img)\r\n\r\n/home/elvis/anaconda2/lib/python2.7/site-packages/nilearn-0.2.6-py2.7.egg/nilearn/masking.pyc in unmask(X, mask_img, order)\r\n    703         ret = []\r\n    704         for x in X:\r\n--> 705             ret.append(unmask(x, mask_img, order=order))  # 1-level recursion\r\n    706         return ret\r\n    707 \r\n\r\n/home/elvis/anaconda2/lib/python2.7/site-packages/nilearn-0.2.6-py2.7.egg/nilearn/masking.pyc in unmask(X, mask_img, order)\r\n    709     mask, affine = _load_mask_img(mask_img)\r\n    710 \r\n--> 711     if X.ndim == 2:\r\n    712         unmasked = _unmask_4d(X, mask, order=order)\r\n    713     elif X.ndim == 1:\r\n\r\nAttributeError: 'bool' object has no attribute 'ndim'\r\n```", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1388", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1388/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1388/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1388/events", "html_url": "https://github.com/nilearn/nilearn/issues/1388", "id": 209903870, "node_id": "MDU6SXNzdWUyMDk5MDM4NzA=", "number": 1388, "title": "unknown document: plot_seed_to_voxel_correlation", "user": {"login": "chrisgorgo", "id": 238759, "node_id": "MDQ6VXNlcjIzODc1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/238759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisgorgo", "html_url": "https://github.com/chrisgorgo", "followers_url": "https://api.github.com/users/chrisgorgo/followers", "following_url": "https://api.github.com/users/chrisgorgo/following{/other_user}", "gists_url": "https://api.github.com/users/chrisgorgo/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisgorgo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisgorgo/subscriptions", "organizations_url": "https://api.github.com/users/chrisgorgo/orgs", "repos_url": "https://api.github.com/users/chrisgorgo/repos", "events_url": "https://api.github.com/users/chrisgorgo/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisgorgo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-02-23T22:28:12Z", "updated_at": "2017-03-02T15:54:15Z", "closed_at": "2017-03-02T15:54:15Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\n/home/ubuntu/nilearn/nilearn/image/resampling.py:472: UserWarning: Casting data from int64 to float64\r\n  warnings.warn(\"Casting data from %s to %s\" % (data.dtype.name, aux))\r\n/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/scipy/ndimage/interpolation.py:430: UserWarning: The behaviour of affine_transform with a one-dimensional array supplied for the matrix parameter has changed in scipy 0.18.0.\r\n  \"The behaviour of affine_transform with a one-dimensional \"\r\n/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/sklearn/utils/validation.py:526: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().\r\n  y = column_or_1d(y, warn=True)\r\n/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/numpy/lib/function_base.py:3858: RuntimeWarning: Invalid value encountered in median\r\n  r = func(a, **kwargs)\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/cmdline.py\", line 296, in main\r\n    app.build(opts.force_all, filenames)\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/application.py\", line 333, in build\r\n    self.builder.build_update()\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/builders/__init__.py\", line 251, in build_update\r\n    'out of date' % len(to_build))\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/builders/__init__.py\", line 322, in build\r\n    self.write(docnames, list(updated_docnames), method)\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/builders/__init__.py\", line 360, in write\r\n    self._write_serial(sorted(docnames), warnings)\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/builders/__init__.py\", line 370, in _write_serial\r\n    self.warn(*warning, **kwargs)\r\n  File \"/home/ubuntu/miniconda2/envs/testenv/lib/python3.5/site-packages/Sphinx-1.5.1-py3.5.egg/sphinx/application.py\", line 399, in warn\r\n    raise SphinxWarning(warntext)\r\nsphinx.errors.SphinxWarning: /home/ubuntu/nilearn/doc/auto_examples/01_plotting/plot_surf_stat_map.rst:28: WARNING: unknown document: plot_seed_to_voxel_correlation\r\n\r\n\r\nWarning, treated as error:\r\n/home/ubuntu/nilearn/doc/auto_examples/01_plotting/plot_surf_stat_map.rst:28: WARNING: unknown document: plot_seed_to_voxel_correlation\r\n```\r\n\r\nMore details: https://circleci.com/gh/nilearn/nilearn/2276 I believe this was introduced in #1387.", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1388/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1388/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1268", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1268/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1268/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1268/events", "html_url": "https://github.com/nilearn/nilearn/issues/1268", "id": 176067933, "node_id": "MDU6SXNzdWUxNzYwNjc5MzM=", "number": 1268, "title": "plot_stat_map does not display the bg anat when it contains NaNs", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-09-09T17:48:06Z", "updated_at": "2017-06-20T09:29:19Z", "closed_at": "2017-06-20T09:29:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Presumably because thre sampling used in plotting does not handle Nans correctly.\nThis is suprising because I thought that this was not occurring in previous versions of Nilearn.\nMaybe related to issue #1249 ?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1252", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1252/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1252/events", "html_url": "https://github.com/nilearn/nilearn/issues/1252", "id": 172172861, "node_id": "MDU6SXNzdWUxNzIxNzI4NjE=", "number": 1252, "title": "The hemispheric glass_brain is broken for filled contours", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-08-19T16:45:39Z", "updated_at": "2016-09-05T13:35:38Z", "closed_at": "2016-09-05T13:35:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<pre>\nfrom nilearn import datasets\nlocalizer_dataset = datasets.fetch_localizer_button_task()\nlocalizer_tmap_filename = localizer_dataset.tmaps[0]\n\nfrom nilearn import plotting\n\nglass_brain = plotting.plot_glass_brain(None, display_mode='lyrz')\nglass_brain.add_contours(localizer_tmap_filename, filled=True,\n                         levels=[3, ], colors=['g', ], alpha=1)\n</pre>\n\n\nThis will produce \n![tmp](https://cloud.githubusercontent.com/assets/208217/17817110/07cb2d06-663d-11e6-8806-cba813c45f3d.png)\n\nNotice how the orientation of the hemispheric plot is broken.\n\nIf I add an image, instead of None, in the glass brain, it works right.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1251", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1251/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1251/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1251/events", "html_url": "https://github.com/nilearn/nilearn/issues/1251", "id": 172172420, "node_id": "MDU6SXNzdWUxNzIxNzI0MjA=", "number": 1251, "title": "add_contours(filled=True) requires to specify color and alpha", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": {"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2016-08-19T16:43:16Z", "updated_at": "2016-11-03T13:25:40Z", "closed_at": "2016-11-03T13:25:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Code to reproduce\n\n<pre>\nfrom nilearn import datasets\n\nlocalizer_dataset = datasets.fetch_localizer_button_task()\nlocalizer_tmap_filename = localizer_dataset.tmaps[0]\n\nfrom nilearn import plotting\nglass_brain = plotting.plot_glass_brain(None)\n\nglass_brain.add_contours(localizer_tmap_filename, filled=True,\n                         levels=[3, ], colors=['g', ], alpha=1)\n</pre>\n\n\nThis doesn't run if I don't specify colors and alpha. It does if I don't use filled=True. I really should have to worry about colors, and alpha: it should work the same way in both cases.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1251/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1251/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1190", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1190/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1190/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1190/events", "html_url": "https://github.com/nilearn/nilearn/issues/1190", "id": 168919771, "node_id": "MDU6SXNzdWUxNjg5MTk3NzE=", "number": 1190, "title": "nilearn.plotting.find_xyz_cut_coords() returns the wrong coordinate", "user": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2016-08-02T15:45:33Z", "updated_at": "2021-01-21T17:35:40Z", "closed_at": "2021-01-21T17:35:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Applying `nilearn.plotting.find_xyz_cut_coords()`on the nifti attached here, a y coordinate is returned that is positive (i.e., in the anterior part of the brain) but is supposed to be negative (in the back of the brain). This bug is not observed with `nilearn.find_cut_slices()`.\n\n[RTPJ-1.nii.zip](https://github.com/nilearn/nilearn/files/397428/RTPJ-1.nii.zip)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1171", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1171/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1171/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1171/events", "html_url": "https://github.com/nilearn/nilearn/issues/1171", "id": 164299841, "node_id": "MDU6SXNzdWUxNjQyOTk4NDE=", "number": 1171, "title": "Resampling of mask_img does not remove background noise.", "user": {"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-07-07T12:42:32Z", "updated_at": "2020-12-21T16:40:10Z", "closed_at": "2020-12-21T16:40:10Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I am trying to do use `NiftiMasker` to get the signals within a region given by a binary mask. It works when I manually resample the mask to the shape and affine of my functional image, but when using the masker reasmpling I am getting an error. May be I am doing something wrong with the `NiftiMasker` ?\n\n``` Python\nimport nibabel\nfrom nilearn import datasets, masking, input_data\nicbm152 = datasets.fetch_icbm152_2009()\nwm_filename = icbm152.wm\nwm_mask_img = masking.compute_epi_mask(wm_filename, upper_cutoff=1.)\nadhd = datasets.fetch_adhd(n_subjects=1)\nfunc_img = nibabel.load(adhd.func[0])\ntarget_shape, target_affine = func_img.get_data().shape[:-1], func_img.get_affine()\nwm_masker = input_data.NiftiMasker(mask_img=wm_mask_img,\n                                   target_shape=target_shape,\n                                   target_affine=target_affine)\nwm_signals = wm_masker.fit_transform(adhd.func[0])\n```\n\nthroughs the following error\n\n> ValueError: Given mask is not made of 2 values: [ -7.44326475e-15  -7.13535134e-15  -6.32653652e-15 ...,   6.93715918e-15\n>    7.04167627e-15   1.00000000e+00]. Cannot interpret as true or false\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1171/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1161", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1161/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1161/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1161/events", "html_url": "https://github.com/nilearn/nilearn/issues/1161", "id": 163700034, "node_id": "MDU6SXNzdWUxNjM3MDAwMzQ=", "number": 1161, "title": "threshold_img crashes if mask_img is string (other image manip routines may be affected)", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}, {"id": 126854827, "node_id": "MDU6TGFiZWwxMjY4NTQ4Mjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/API", "name": "API", "color": "fef2c0", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-04T15:38:27Z", "updated_at": "2016-07-07T12:23:48Z", "closed_at": "2016-07-07T12:23:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For example, the following we crash:\n\n`threshold_img(\"my_maps.nii.gz\", mask_img=\"my_mask.nii.gz\", threshold=\"98%\")`\n\nwith traceback\n\n```\n/home/elvis/.local/lib/python2.7/site-packages/nilearn-0.2.5-py2.7.egg/nilearn/image/image.pyc in threshold_img(img, threshold, mask_img)\n    675 \n    676     if mask_img is not None:\n--> 677         if not _check_same_fov(img, mask_img):\n    678             mask_img = resampling.resample_img(mask_img, target_affine=affine,\n    679                                                target_shape=img.shape[:3],\n\n/home/elvis/.local/lib/python2.7/site-packages/nilearn-0.2.5-py2.7.egg/nilearn/_utils/niimg_conversions.pyc in _check_same_fov(*args, **kwargs)\n     56     for (a_name, a_img), (b_name, b_img) in itertools.combinations(\n     57             kwargs.items(), 2):\n---> 58         if not a_img.shape[:3] == b_img.shape[:3]:\n     59             errors.append((a_name, b_name, 'shape'))\n     60         if not np.allclose(a_img.get_affine(), b_img.get_affine()):\n\nAttributeError: 'str' object has no attribute 'shape'\n> /home/elvis/.local/lib/python2.7/site-packages/nilearn-0.2.5-py2.7.egg/nilearn/_utils/niimg_conversions.py(58)_check_same_fov()\n     56     for (a_name, a_img), (b_name, b_img) in itertools.combinations(\n     57             kwargs.items(), 2):\n---> 58         if not a_img.shape[:3] == b_img.shape[:3]:\n     59             errors.append((a_name, b_name, 'shape'))\n     60         if not np.allclose(a_img.get_affine(), b_img.get_affine()):\n\nipdb> \n```\n\nA fix would be to do `mask_img = check_niimg(mask_img)` in the beginning of the `threshold_img` function.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1005", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/1005/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/1005/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/1005/events", "html_url": "https://github.com/nilearn/nilearn/issues/1005", "id": 135773646, "node_id": "MDU6SXNzdWUxMzU3NzM2NDY=", "number": 1005, "title": "The front page of nilearn is not rendering right", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-02-23T15:43:26Z", "updated_at": "2016-02-23T15:56:21Z", "closed_at": "2016-02-23T15:56:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The gallery and the picture are currently not displayed:\nhttp://nilearn.github.io/\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/1005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/1005/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/975", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/975/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/975/events", "html_url": "https://github.com/nilearn/nilearn/issues/975", "id": 130627345, "node_id": "MDU6SXNzdWUxMzA2MjczNDU=", "number": 975, "title": "BUG Neurodebian build failed on travis", "user": {"login": "aabadie", "id": 1375137, "node_id": "MDQ6VXNlcjEzNzUxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1375137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aabadie", "html_url": "https://github.com/aabadie", "followers_url": "https://api.github.com/users/aabadie/followers", "following_url": "https://api.github.com/users/aabadie/following{/other_user}", "gists_url": "https://api.github.com/users/aabadie/gists{/gist_id}", "starred_url": "https://api.github.com/users/aabadie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aabadie/subscriptions", "organizations_url": "https://api.github.com/users/aabadie/orgs", "repos_url": "https://api.github.com/users/aabadie/repos", "events_url": "https://api.github.com/users/aabadie/events{/privacy}", "received_events_url": "https://api.github.com/users/aabadie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-02-02T09:36:46Z", "updated_at": "2016-02-02T12:03:39Z", "closed_at": "2016-02-02T12:03:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This morning travis ci is failing with neurodebian. The `traceroute` package cannot be fetched from the ubuntu precise repository.\n\nSee the error message:\n\n```\n+sudo apt-get install net-tools traceroute coreutils\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nnet-tools is already the newest version.\ncoreutils is already the newest version.\nThe following NEW packages will be installed:\n  traceroute\n0 upgraded, 1 newly installed, 0 to remove and 91 not upgraded.\nNeed to get 53.1 kB of archives.\nAfter this operation, 162 kB of additional disk space will be used.\nErr http://us-central1.gce.archive.ubuntu.com/ubuntu/ precise/universe traceroute amd64 1:2.0.18-1\n  503  Service Unavailable [IP: 104.197.12.55 80]\nFailed to fetch http://us-central1.gce.archive.ubuntu.com/ubuntu/pool/universe/t/traceroute/traceroute_2.0.18-1_amd64.deb  503  Service Unavailable [IP: 104.197.12.55 80]\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?\n```\n\nIs traceroute really mandatory ?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/975/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/960", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/960/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/960/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/960/events", "html_url": "https://github.com/nilearn/nilearn/issues/960", "id": 128116536, "node_id": "MDU6SXNzdWUxMjgxMTY1MzY=", "number": 960, "title": "Code coverage broken on coveralls", "user": {"login": "aabadie", "id": 1375137, "node_id": "MDQ6VXNlcjEzNzUxMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1375137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aabadie", "html_url": "https://github.com/aabadie", "followers_url": "https://api.github.com/users/aabadie/followers", "following_url": "https://api.github.com/users/aabadie/following{/other_user}", "gists_url": "https://api.github.com/users/aabadie/gists{/gist_id}", "starred_url": "https://api.github.com/users/aabadie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aabadie/subscriptions", "organizations_url": "https://api.github.com/users/aabadie/orgs", "repos_url": "https://api.github.com/users/aabadie/repos", "events_url": "https://api.github.com/users/aabadie/events{/privacy}", "received_events_url": "https://api.github.com/users/aabadie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-01-22T09:25:56Z", "updated_at": "2016-01-22T20:37:32Z", "closed_at": "2016-01-22T20:37:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The global and per file coverage statistics are working on coveralls but one cannot have access to the lines covered/not covered in each file.\nTo me the file path is not correct: it contains the full path whereas it should only be the relative path.\nExample:\n`nilearn/tests/test_testing.py`\ninstead of\n`/home/travis/miniconda2/envs/testenv/lib/python3.5/site-packages/nilearn-0.2.1-py3.5.egg/nilearn/tests/test_testing.py`\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/948", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/948/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/948/events", "html_url": "https://github.com/nilearn/nilearn/issues/948", "id": 126817123, "node_id": "MDU6SXNzdWUxMjY4MTcxMjM=", "number": 948, "title": "Turn down verbosity on CircleCI", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}, {"id": 272587327, "node_id": "MDU6TGFiZWwyNzI1ODczMjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Infrastructure", "name": "Infrastructure", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-01-15T06:44:44Z", "updated_at": "2016-02-02T10:08:37Z", "closed_at": "2016-02-02T10:08:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, it is impossible to understand anything of the logs of circleCI. We need to turn down the verbosity of the downloads in the logs.\n\nFor example, see https://circleci.com/gh/nilearn/nilearn/1028\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/941", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/941/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/941/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/941/events", "html_url": "https://github.com/nilearn/nilearn/issues/941", "id": 126181003, "node_id": "MDU6SXNzdWUxMjYxODEwMDM=", "number": 941, "title": "ConnectivityMeasure requires 3D data", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": {"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/14", "html_url": "https://github.com/nilearn/nilearn/milestone/14", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/14/labels", "id": 1440100, "node_id": "MDk6TWlsZXN0b25lMTQ0MDEwMA==", "number": 14, "title": "0.2.2", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2015-12-02T17:50:12Z", "updated_at": "2016-02-18T10:11:43Z", "due_on": null, "closed_at": "2016-02-18T10:11:43Z"}, "comments": 1, "created_at": "2016-01-12T13:36:37Z", "updated_at": "2016-02-03T17:27:21Z", "closed_at": "2016-02-03T16:16:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Otherwise it does strange stuff. Minimal example to come.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/941/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/938", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/938/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/938/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/938/events", "html_url": "https://github.com/nilearn/nilearn/issues/938", "id": 126002420, "node_id": "MDU6SXNzdWUxMjYwMDI0MjA=", "number": 938, "title": "Region Extractor fails to converge in some cases", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NicolasGensollen", "id": 2639645, "node_id": "MDQ6VXNlcjI2Mzk2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2639645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasGensollen", "html_url": "https://github.com/NicolasGensollen", "followers_url": "https://api.github.com/users/NicolasGensollen/followers", "following_url": "https://api.github.com/users/NicolasGensollen/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasGensollen/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasGensollen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasGensollen/subscriptions", "organizations_url": "https://api.github.com/users/NicolasGensollen/orgs", "repos_url": "https://api.github.com/users/NicolasGensollen/repos", "events_url": "https://api.github.com/users/NicolasGensollen/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasGensollen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 37, "created_at": "2016-01-11T18:05:13Z", "updated_at": "2021-01-05T16:16:03Z", "closed_at": "2021-01-05T14:53:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following code yields does not  converge on my box:\n\n```\nfrom nilearn import datasets\nfrom nilearn.regions import RegionExtractor\nlocalizer_dataset = datasets.fetch_localizer_contrasts(\n    [\"checkerboard\", \"horizontal checkerboard\", \"vertical checkerboard\"],\n    n_subjects=1, get_tmaps=True, get_masks=True)\nextraction = RegionExtractor(localizer_dataset.tmaps, min_region_size=100,\n                             threshold=98, thresholding_strategy='percentile')\nextraction.fit()\n```\n\nDoes somebody understand what's going on ?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/938/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/929", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/929/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/929/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/929/events", "html_url": "https://github.com/nilearn/nilearn/issues/929", "id": 125239229, "node_id": "MDU6SXNzdWUxMjUyMzkyMjk=", "number": 929, "title": "Plots won't show up", "user": {"login": "smauermann", "id": 11461145, "node_id": "MDQ6VXNlcjExNDYxMTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/11461145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smauermann", "html_url": "https://github.com/smauermann", "followers_url": "https://api.github.com/users/smauermann/followers", "following_url": "https://api.github.com/users/smauermann/following{/other_user}", "gists_url": "https://api.github.com/users/smauermann/gists{/gist_id}", "starred_url": "https://api.github.com/users/smauermann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smauermann/subscriptions", "organizations_url": "https://api.github.com/users/smauermann/orgs", "repos_url": "https://api.github.com/users/smauermann/repos", "events_url": "https://api.github.com/users/smauermann/events{/privacy}", "received_events_url": "https://api.github.com/users/smauermann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/14", "html_url": "https://github.com/nilearn/nilearn/milestone/14", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/14/labels", "id": 1440100, "node_id": "MDk6TWlsZXN0b25lMTQ0MDEwMA==", "number": 14, "title": "0.2.2", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2015-12-02T17:50:12Z", "updated_at": "2016-02-18T10:11:43Z", "due_on": null, "closed_at": "2016-02-18T10:11:43Z"}, "comments": 28, "created_at": "2016-01-06T18:59:29Z", "updated_at": "2020-04-10T09:11:33Z", "closed_at": "2016-01-13T12:52:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi everyone,\n\nusing nilearn on OSX El Capitan, when executing the example scripts like plot_demo_glass_brain.py no plots will show up. PiP and iPython linked to the same folders, matplotlib alone does show plots. All dependencies are up-to-date and installed. Don't really know how to fix this.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/929/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/914", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/914/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/914/events", "html_url": "https://github.com/nilearn/nilearn/issues/914", "id": 122387179, "node_id": "MDU6SXNzdWUxMjIzODcxNzk=", "number": 914, "title": "fetch_atlas_harvard_oxford and symmetric_split", "user": {"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/15", "html_url": "https://github.com/nilearn/nilearn/milestone/15", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/15/labels", "id": 1504791, "node_id": "MDk6TWlsZXN0b25lMTUwNDc5MQ==", "number": 15, "title": "0.2.3", "description": "To be released before Brainhack", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2016-01-13T16:29:19Z", "updated_at": "2016-03-30T14:56:22Z", "due_on": "2016-02-18T08:00:00Z", "closed_at": "2016-03-30T14:56:22Z"}, "comments": 4, "created_at": "2015-12-15T22:56:24Z", "updated_at": "2016-02-03T13:22:49Z", "closed_at": "2016-02-03T13:22:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I have 2 little issues with `symmetric_split`:\n1) the type of the output changes if `symmetric_split` is True or False\n\n``` Python\nfrom nilearn import datasets\natlas = datasets.fetch_atlas_harvard_oxford('cort-maxprob-thr25-1mm', symmetric_split=True)\ntype(atlas['labels']), type(atlas['maps'])\n```\n\n(list, nibabel.nifti1.Nifti1Image)\n\n``` Python\natlas = datasets.fetch_atlas_harvard_oxford('cort-maxprob-thr25-1mm', symmetric_split=False)\ntype(atlas['labels']), type(atlas['maps'])\n```\n\n(numpy.ndarray, str)\n2) the parameter `symmetric_split` is allowed to be True for `'sub-maxprob-thr25-1mm'` but \n\n``` Python\ndatasets.fetch_atlas_harvard_oxford('sub-maxprob-thr25-1mm', symmetric_split=True)\n```\n\nthrows an error `RuntimeError: data type not supported`.  May be not allowing for subcortical atlases as their labels already contain the information right/left\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/914/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/874", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/874/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/874/events", "html_url": "https://github.com/nilearn/nilearn/issues/874", "id": 119950058, "node_id": "MDU6SXNzdWUxMTk5NTAwNTg=", "number": 874, "title": "Incomprehensible exception thrown by NiftiMasker is computed mask is full", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-12-02T14:15:24Z", "updated_at": "2015-12-02T16:27:28Z", "closed_at": "2015-12-02T16:27:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\nllow_empty)\n     48         # We accept a single value if it is not 0 (full true mask).\n     49         if values[0] == 0 and not allow_empty:\n---> 50             raise ValueError('Given mask is invalid because it masks all data')\n     51     elif len(values) == 2:\n     52         # If there are 2 different values, one of them must be 0 (background)\n\nValueError: Given mask is invalid because it masks all data\n> /home/elvis/CODE/FORKED/nilearn/nilearn/masking.py(50)_load_mask_img()\n     49         if values[0] == 0 and not allow_empty:\n---> 50             raise ValueError('Given mask is invalid because it masks all data')\n     51     elif len(values) == 2:\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/874/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/872", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/872/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/872/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/872/events", "html_url": "https://github.com/nilearn/nilearn/issues/872", "id": 119946472, "node_id": "MDU6SXNzdWUxMTk5NDY0NzI=", "number": 872, "title": "Bug: IndexError in fast_abs_percentile function", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-12-02T13:57:52Z", "updated_at": "2015-12-03T18:41:11Z", "closed_at": "2015-12-03T18:41:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` python\nimport numpy as np\nfrom nilearn._utils.extmath import fast_abs_percentile\nfast_abs_percentile(np.arange(4))\n```\n\n```\nIndexError                                Traceback (most recent call last)\n<ipython-input-29-094589b8fe4e> in <module>()\n----> 1 fast_abs_percentile(arange(4))\n\n/home/elvis/CODE/FORKED/nilearn/nilearn/_utils/extmath.pyc in fast_abs_percentile(data, percentile)\n     43     if partition is not None:\n     44         # Partial sort: faster than sort\n---> 45         return partition(data, index)[index + 1]\n     46     data.sort()\n     47     return data[index + 1]\n\nIndexError: index out of bounds\n> /home/elvis/CODE/FORKED/nilearn/nilearn/_utils/extmath.py(45)fast_abs_percentile()\n     44         # Partial sort: faster than sort\n---> 45         return partition(data, index)[index + 1]\n     46     data.sort()\n```\n\nThis bug affects all the `find_cuts` functions of the plotting backend.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/872/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/855", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/855/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/855/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/855/events", "html_url": "https://github.com/nilearn/nilearn/issues/855", "id": 118283571, "node_id": "MDU6SXNzdWUxMTgyODM1NzE=", "number": 855, "title": "find_cuts falls crashes with empy mask ", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-11-22T19:35:04Z", "updated_at": "2015-12-01T17:35:50Z", "closed_at": "2015-12-01T17:35:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`find_xyz_cut_coords(nibabel.Nifti1Image(randn(2, 2, 2), eye(4)), zeros((2, 2, 2)).astype(np.bool))`\n\n/home/elvis/CODE/FORKED/nilearn/nilearn/plotting/find_cuts.pyc in find_xyz_cut_coords(img, mask, activation_threshold)\n     65     my_map = data.copy()\n     66     if mask is not None:\n---> 67         slice_x, slice_y, slice_z = ndimage.find_objects(mask)[0]\n     68         my_map = my_map[slice_x, slice_y, slice_z]\n     69         mask = mask[slice_x, slice_y, slice_z]\n\nIndexError: list index out of range\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/855/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/852", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/852/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/852/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/852/events", "html_url": "https://github.com/nilearn/nilearn/issues/852", "id": 118267427, "node_id": "MDU6SXNzdWUxMTgyNjc0Mjc=", "number": 852, "title": "SpaceNet constructor crashes if n_alphas=1 specified", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-11-22T14:55:58Z", "updated_at": "2015-12-02T13:08:41Z", "closed_at": "2015-12-02T13:08:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The snippet,\n\n```\n    rng = check_random_state(42)\n    iris = load_iris()\n    X, y = iris.data, iris.target\n    X, mask = to_niimgs(X, [2, 2, 2])\n    SpaceNetRegressor(n_alphas=1, mask=mask).fit(X, y)\n```\n\nTriggers the following error:\n\n```\nSpaceNetRegressor(n_alphas=1, mask=mask).fit(X, y)\n```\n\n  File \"/home/elvis/CODE/FORKED/nilearn/nilearn/decoding/space_net.py\", line 827, in fit\n    len(l1_ratios), len(alphas)) > 1:\nTypeError: object of type 'NoneType' has no len()\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/827", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/827/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/827/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/827/events", "html_url": "https://github.com/nilearn/nilearn/issues/827", "id": 115390872, "node_id": "MDU6SXNzdWUxMTUzOTA4NzI=", "number": 827, "title": "Numerical error with scikit-learn master", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-11-05T22:35:19Z", "updated_at": "2015-11-06T16:02:23Z", "closed_at": "2015-11-06T16:02:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "nilearn.decomposition.tests.test_multi_pca.test_multi_pca fails with scikit-learn master (but not 0.16). I suspect that this is a numerical instability in scikit-learn and that @giorgiop might know something about that.\n\nWhile @giorgiop is still at the lab (ie in the next few days), we should investigate that.\n\n<pre>\n======================================================================\nFAIL: nilearn.decomposition.tests.test_multi_pca.test_multi_pca\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/home/varoquau/dev/nilearn/nilearn/decomposition/tests/test_multi_pca.py\", line 36, in test_multi_pca\n    decimal=4)\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 811, in assert_array_almost_equal\n    header=('Arrays are not almost equal to %d decimals' % decimal))\n  File \"/usr/lib/python2.7/dist-packages/numpy/testing/utils.py\", line 644, in assert_array_compare\n    raise AssertionError(msg)\nAssertionError: \nArrays are not almost equal to 4 decimals\n\n(mismatch 99.9305555556%)\n x: array([[ -8.01780945e-03,  -1.57127933e-02,   5.21554343e-02, ...,\n         -2.45565708e-02,   5.41739597e-02,  -6.57871537e-03],\n       [ -4.39631746e-02,   5.23726237e-05,  -2.74229888e-02, ...,...\n y: array([[ 0.04536376, -0.04022769,  0.00722741, ..., -0.01436048,\n         0.02965129,  0.00382973],\n       [ 0.05776912, -0.04430462,  0.01511899, ...,  0.06632538,...\n>>  raise AssertionError('\\nArrays are not almost equal to 4 decimals\\n\\n(mismatch 99.9305555556%)\\n x: array([[ -8.01780945e-03,  -1.57127933e-02,   5.21554343e-02, ...,\\n         -2.45565708e-02,   5.41739597e-02,  -6.57871537e-03],\\n       [ -4.39631746e-02,   5.23726237e-05,  -2.74229888e-02, ...,...\\n y: array([[ 0.04536376, -0.04022769,  0.00722741, ..., -0.01436048,\\n         0.02965129,  0.00382973],\\n       [ 0.05776912, -0.04430462,  0.01511899, ...,  0.06632538,...')\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/826", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/826/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/826/events", "html_url": "https://github.com/nilearn/nilearn/issues/826", "id": 115389831, "node_id": "MDU6SXNzdWUxMTUzODk4MzE=", "number": 826, "title": "cannot fetch atlas_harvard_oxford", "user": {"login": "cinvro", "id": 4321473, "node_id": "MDQ6VXNlcjQzMjE0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4321473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cinvro", "html_url": "https://github.com/cinvro", "followers_url": "https://api.github.com/users/cinvro/followers", "following_url": "https://api.github.com/users/cinvro/following{/other_user}", "gists_url": "https://api.github.com/users/cinvro/gists{/gist_id}", "starred_url": "https://api.github.com/users/cinvro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cinvro/subscriptions", "organizations_url": "https://api.github.com/users/cinvro/orgs", "repos_url": "https://api.github.com/users/cinvro/repos", "events_url": "https://api.github.com/users/cinvro/events{/privacy}", "received_events_url": "https://api.github.com/users/cinvro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 231521983, "node_id": "MDU6TGFiZWwyMzE1MjE5ODM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Datasets", "name": "Datasets", "color": "fad8c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-05T22:28:57Z", "updated_at": "2015-11-06T05:59:44Z", "closed_at": "2015-11-06T05:59:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "dataset = datasets.fetch_atlas_harvard_oxford(\"cort-maxprob-thr0-1mm\")\n\ngive following errors: \n\nURLError: urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:581)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/826/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/822", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/822/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/822/events", "html_url": "https://github.com/nilearn/nilearn/issues/822", "id": 115277000, "node_id": "MDU6SXNzdWUxMTUyNzcwMDA=", "number": 822, "title": "space_net._crop_mask returns incomprehensible error when mask is empty", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2015-11-05T12:49:25Z", "updated_at": "2015-11-05T22:13:36Z", "closed_at": "2015-11-05T21:18:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have a user getting an error that he does not understand at all when the mask extraction has failed:\n\n<pre>\nC:\\Users\\LYF\\AppData\\Local\\Enthought\\Canopy\\User\\lib\\site-packages\\nilearn-0.1\n.5.dev0-py2.7.egg\\nilearn\\decoding\\space_net.pyc in path_scores(solver, X, y,\nmask, alphas, l1_ratios, train, test, solver_params, is_classif, n_alphas,\neps, key, debias, Xmean, screening_percentile, verbose)\n    356\n    357     # crop the mask to have a tighter bounding box\n--> 358     mask = _crop_mask(mask)\n    359\n    360     # get train and test data\n\nC:\\Users\\LYF\\AppData\\Local\\Enthought\\Canopy\\User\\lib\\site-packages\\nilearn-0.1\n.5.dev0-py2.7.egg\\nilearn\\decoding\\space_net.pyc in _crop_mask(mask)\n     61     the same support (active voxels)\"\"\"\n     62     idx = np.where(mask)\n---> 63     i_min = max(idx[0].min() - 1, 0)\n     64     i_max = idx[0].max()\n     65     j_min = max(idx[1].min() - 1, 0)\n\nC:\\Users\\LYF\\AppData\\Local\\Enthought\\Canopy\\User\\lib\\site-packages\\numpy\\core\\\n_methods.pyc in _amin(a, axis, out, keepdims)\n     27\n     28 def _amin(a, axis=None, out=None, keepdims=False):\n---> 29     return umr_minimum(a, axis, None, out, keepdims)\n     30\n     31 def _sum(a, axis=None, dtype=None, out=None, keepdims=False):\n\nValueError: zero-size array to reduction operation minimum which has no\nidentity\n</pre>\n\n\nWe should detect that \"idx\" is empty in _crop_mask and raise a more comprehensible error: something like \"Empty mask: if you have given a mask, it is empty, and if you have not given a mask, the mask-extraction routines have fail. Please provide an appropriate mask\".\n\n@dohmatob : do you want to take care of that?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/817", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/817/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/817/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/817/events", "html_url": "https://github.com/nilearn/nilearn/issues/817", "id": 114778611, "node_id": "MDU6SXNzdWUxMTQ3Nzg2MTE=", "number": 817, "title": "Nilearn resampling doesn't support int16, throws RuntimeError: data type not supported", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-11-03T09:49:36Z", "updated_at": "2015-11-04T12:07:53Z", "closed_at": "2015-11-04T08:43:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reproduce with:\n\n```\nimport nibabel\nimport numpy as np\nfrom nilearn.image import resample_img\naffine = np.eye(4)\nimg = nibabel.Nifti1Image(np.zeros((2, 2, 2)).astype(np.int16), affine)\nresample_img(img, target_affine=2. * affine)\n```\n\nI think similar data types are also concerned\n\nPossible fix: The data should be cast before passing to `ndimage.interpolate`, etc.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/817/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/781", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/781/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/781/events", "html_url": "https://github.com/nilearn/nilearn/issues/781", "id": 107153821, "node_id": "MDU6SXNzdWUxMDcxNTM4MjE=", "number": 781, "title": "weird error related to MKL / numpy / fortran installation ?", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 144463785, "node_id": "MDU6TGFiZWwxNDQ0NjM3ODU=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Discussion", "name": "Discussion", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-18T08:12:34Z", "updated_at": "2015-09-22T11:43:05Z", "closed_at": "2015-09-22T08:05:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Travis throughs a weird error related to MKL / numpy / fortran installation on some DISTRIB=\"conda\" and PYTHON_VERSION=\"2.7\" (reported by @salma1601).\n\n```\nError: no packages found to remove from environment: /home/travis/miniconda/envs/testenv\nMKL not installed\nTraceback (most recent call last):\n  File \"setup.py\", line 51, in <module>\n    module_check_fn(is_nilearn_installing=True)\n  File \"<string>\", line 111, in _check_module_dependencies\n  File \"<string>\", line 61, in _import_module_with_version_check\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/__init__.py\", line 153, in <module>\n    from . import add_newdocs\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/add_newdocs.py\", line 13, in <module>\n    from numpy.lib import add_newdoc\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/lib/__init__.py\", line 18, in <module>\n    from .polynomial import *\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/lib/polynomial.py\", line 19, in <module>\n    from numpy.linalg import eigvals, lstsq, inv\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/linalg/__init__.py\", line 50, in <module>\n    from .linalg import *\n  File \"/home/travis/miniconda/envs/testenv/lib/python2.7/site-packages/numpy/linalg/linalg.py\", line 29, in <module>\n    from numpy.linalg import lapack_lite, _umath_linalg\nImportError: ('libgfortran.so.1: cannot open shared object file: No such file or directory', 'Module \"numpy\" could not be found. See http://nilearn.github.io/introduction.html#installation for installation information.')\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/781/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/772", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/772/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/772/events", "html_url": "https://github.com/nilearn/nilearn/issues/772", "id": 104405308, "node_id": "MDU6SXNzdWUxMDQ0MDUzMDg=", "number": 772, "title": "Misleading (wrong?) code in Oasis VBM example", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/4", "html_url": "https://github.com/nilearn/nilearn/milestone/4", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/4/labels", "id": 624840, "node_id": "MDk6TWlsZXN0b25lNjI0ODQw", "number": 4, "title": "0.2", "description": "Xmas release! :)", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2014-04-09T08:09:54Z", "updated_at": "2015-12-14T10:07:09Z", "due_on": "2015-12-24T08:00:00Z", "closed_at": "2015-12-14T10:07:09Z"}, "comments": 0, "created_at": "2015-09-02T05:33:59Z", "updated_at": "2015-09-02T08:40:03Z", "closed_at": "2015-09-02T08:40:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As pointed out on http://neurostars.org/p/3388/, the Oasis VBM code applies the NiftiMasker twice, and thus ends up smoothing the data twice.\n\nIt does that to do screening of low variance features. I think that the right way to do this would be to use a sklearn.feature_selection.VarianceThreshold in the pipeline.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/772/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/772/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/684", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/684/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/684/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/684/events", "html_url": "https://github.com/nilearn/nilearn/issues/684", "id": 95389247, "node_id": "MDU6SXNzdWU5NTM4OTI0Nw==", "number": 684, "title": "Website banner right corner searchlight link broken", "user": {"login": "MartinPerez", "id": 8766915, "node_id": "MDQ6VXNlcjg3NjY5MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8766915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MartinPerez", "html_url": "https://github.com/MartinPerez", "followers_url": "https://api.github.com/users/MartinPerez/followers", "following_url": "https://api.github.com/users/MartinPerez/following{/other_user}", "gists_url": "https://api.github.com/users/MartinPerez/gists{/gist_id}", "starred_url": "https://api.github.com/users/MartinPerez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MartinPerez/subscriptions", "organizations_url": "https://api.github.com/users/MartinPerez/orgs", "repos_url": "https://api.github.com/users/MartinPerez/repos", "events_url": "https://api.github.com/users/MartinPerez/events{/privacy}", "received_events_url": "https://api.github.com/users/MartinPerez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-07-16T09:16:17Z", "updated_at": "2015-07-20T06:36:55Z", "closed_at": "2015-07-20T06:36:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When you click on the \"searchlight\" link located on the right corner of the banner in the webpage, it leads to page not found.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/684/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/671", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/671/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/671/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/671/events", "html_url": "https://github.com/nilearn/nilearn/issues/671", "id": 95133010, "node_id": "MDU6SXNzdWU5NTEzMzAxMA==", "number": 671, "title": "make_thumbnails function of gen_rst.py not fault-tolerant enough", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-07-15T08:19:43Z", "updated_at": "2015-07-15T14:51:39Z", "closed_at": "2015-07-15T08:23:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This following fault happens, and the whole \"make doc\" process halts.  We should catch errors in line 320 return.\n# Sphinx version: 1.2.2\n# Python version: 2.7.6\n# Docutils version: 0.11 release\n# Jinja2 version: 2.7.2\n# Loaded extensions:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/sphinx/cmdline.py\", line 253, in main\n    warningiserror, tags, verbosity, parallel)\n  File \"/usr/lib/python2.7/dist-packages/sphinx/application.py\", line 139, in **init**\n    self._init_builder(buildername)\n  File \"/usr/lib/python2.7/dist-packages/sphinx/application.py\", line 201, in _init_builder\n    self.emit('builder-inited')\n  File \"/usr/lib/python2.7/dist-packages/sphinx/application.py\", line 400, in emit\n    results.append(callback(self, *args))\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/doc/sphinxext/sphinxgallery/gen_gallery.py\", line 51, in generate_gallery_rst\n    generate_dir_rst(directory, fhindex, examples_dir, gallery_dir, gallery_conf, plot_gallery, seen_backrefs)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/doc/sphinxext/sphinxgallery/gen_rst.py\", line 277, in generate_dir_rst\n    backrefs = generate_file_rst(fname, target_dir, src_dir, gallery_conf, plot_gallery)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/doc/sphinxext/sphinxgallery/gen_rst.py\", line 570, in generate_file_rst\n    make_thumbnail(first_image_file, thumb_file, 400, 280)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/doc/sphinxext/sphinxgallery/gen_rst.py\", line 320, in make_thumbnail\n    img = Image.open(in_fname)\n  File \"/usr/lib/python2.7/dist-packages/PIL/Image.py\", line 2028, in open\n    raise IOError(\"cannot identify image file\")\nIOError: cannot identify image file\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/671/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/671/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/670", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/670/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/670/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/670/events", "html_url": "https://github.com/nilearn/nilearn/issues/670", "id": 95014855, "node_id": "MDU6SXNzdWU5NTAxNDg1NQ==", "number": 670, "title": "plot_localizer_mass_univariate_methods.py seems not to be building", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-07-14T19:02:13Z", "updated_at": "2015-07-16T07:58:21Z", "closed_at": "2015-07-16T07:58:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/670/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/668", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/668/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/668/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/668/events", "html_url": "https://github.com/nilearn/nilearn/issues/668", "id": 94997230, "node_id": "MDU6SXNzdWU5NDk5NzIzMA==", "number": 668, "title": "`make` fails due to doctests", "user": {"login": "chrisgorgo", "id": 238759, "node_id": "MDQ6VXNlcjIzODc1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/238759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisgorgo", "html_url": "https://github.com/chrisgorgo", "followers_url": "https://api.github.com/users/chrisgorgo/followers", "following_url": "https://api.github.com/users/chrisgorgo/following{/other_user}", "gists_url": "https://api.github.com/users/chrisgorgo/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisgorgo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisgorgo/subscriptions", "organizations_url": "https://api.github.com/users/chrisgorgo/orgs", "repos_url": "https://api.github.com/users/chrisgorgo/repos", "events_url": "https://api.github.com/users/chrisgorgo/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisgorgo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-07-14T17:32:55Z", "updated_at": "2015-07-15T11:03:10Z", "closed_at": "2015-07-15T10:27:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\nnosetests -s --with-doctest --doctest-tests --doctest-extension=rst \\\n    --doctest-extension=inc --doctest-fixtures=_fixture doc/ \\\n\nnose.plugins.cover: ERROR: Coverage not available: unable to import coverage module\nFailure: ImportError (No module named sphinxgallery) ... ERROR\nDoctest: introduction.rst ... FAIL\n\n======================================================================\nERROR: Failure: ImportError (No module named sphinxgallery)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/filo/anaconda/lib/python2.7/site-packages/nose/loader.py\", line 418, in loadTestsFromName\n    addr.filename, addr.module)\n  File \"/Users/filo/anaconda/lib/python2.7/site-packages/nose/importer.py\", line 47, in importFromPath\n    return self.importFromDir(dir_path, fqname)\n  File \"/Users/filo/anaconda/lib/python2.7/site-packages/nose/importer.py\", line 94, in importFromDir\n    mod = load_module(part_fqname, fh, filename, desc)\n  File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/conf.py\", line 24, in <module>\n    import sphinxgallery\nImportError: No module named sphinxgallery\n\n======================================================================\nFAIL: Doctest: introduction.rst\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/filo/anaconda/lib/python2.7/doctest.py\", line 2226, in runTest\n    raise self.failureException(self.format_failure(new.getvalue()))\nAssertionError: Failed doctest test for introduction.rst\n  File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/introduction.rst\", line 0\n\n----------------------------------------------------------------------\nFile \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/introduction.rst\", line 274, in introduction.rst\nFailed example:\n    smoothed_img = image.smooth_img(\"/home/user/t_map000.nii\", fwhm=5)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/filo/anaconda/lib/python2.7/doctest.py\", line 1315, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest introduction.rst[1]>\", line 1, in <module>\n        smoothed_img = image.smooth_img(\"/home/user/t_map000.nii\", fwhm=5)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/image/image.py\", line 253, in smooth_img\n        img = check_niimg(img)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg_conversions.py\", line 157, in check_niimg\n        niimg = load_niimg(niimg)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg.py\", line 50, in load_niimg\n        niimg = nibabel.load(niimg)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 44, in load\n        return guessed_image_type(filename).from_filename(filename, **kwargs)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 76, in guessed_image_type\n        with BinOpener(filename) as fobj:\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/openers.py\", line 74, in __init__\n        self.fobj = opener(fileish, *args, **kwargs)\n    IOError: [Errno 2] No such file or directory: '/home/user/t_map000.nii'\n----------------------------------------------------------------------\nFile \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/introduction.rst\", line 281, in introduction.rst\nFailed example:\n    smoothed_img.to_filename(\"/home/user/t_map000_smoothed.nii\")\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/filo/anaconda/lib/python2.7/doctest.py\", line 1315, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest introduction.rst[2]>\", line 1, in <module>\n        smoothed_img.to_filename(\"/home/user/t_map000_smoothed.nii\")\n    NameError: name 'smoothed_img' is not defined\n----------------------------------------------------------------------\nFile \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/introduction.rst\", line 289, in introduction.rst\nFailed example:\n    first_volume = image.index_img(\"/home/user/fmri_volumes.nii\", 0)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/filo/anaconda/lib/python2.7/doctest.py\", line 1315, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest introduction.rst[3]>\", line 1, in <module>\n        first_volume = image.index_img(\"/home/user/fmri_volumes.nii\", 0)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/image/image.py\", line 521, in index_img\n        imgs = check_niimg_4d(imgs)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg_conversions.py\", line 240, in check_niimg_4d\n        return check_niimg(niimg, ensure_ndim=4, return_iterator=return_iterator)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg_conversions.py\", line 157, in check_niimg\n        niimg = load_niimg(niimg)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg.py\", line 50, in load_niimg\n        niimg = nibabel.load(niimg)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 44, in load\n        return guessed_image_type(filename).from_filename(filename, **kwargs)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 76, in guessed_image_type\n        with BinOpener(filename) as fobj:\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/openers.py\", line 74, in __init__\n        self.fobj = opener(fileish, *args, **kwargs)\n    IOError: [Errno 2] No such file or directory: '/home/user/fmri_volumes.nii'\n----------------------------------------------------------------------\nFile \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/doc/introduction.rst\", line 293, in introduction.rst\nFailed example:\n    for volume in image.iter_img(\"/home/user/fmri_volumes.nii\"):\n        smoothed_img = image.smooth_img(volume, fwhm=5)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/filo/anaconda/lib/python2.7/doctest.py\", line 1315, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest introduction.rst[4]>\", line 1, in <module>\n        for volume in image.iter_img(\"/home/user/fmri_volumes.nii\"):\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/image/image.py\", line 537, in iter_img\n        return check_niimg_4d(imgs, return_iterator=True)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg_conversions.py\", line 240, in check_niimg_4d\n        return check_niimg(niimg, ensure_ndim=4, return_iterator=return_iterator)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg_conversions.py\", line 157, in check_niimg\n        niimg = load_niimg(niimg)\n      File \"/Users/filo/krzysztof.gorgolewski@gmail.com/workspace/nilearn/nilearn/_utils/niimg.py\", line 50, in load_niimg\n        niimg = nibabel.load(niimg)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 44, in load\n        return guessed_image_type(filename).from_filename(filename, **kwargs)\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/loadsave.py\", line 76, in guessed_image_type\n        with BinOpener(filename) as fobj:\n      File \"/Users/filo/anaconda/lib/python2.7/site-packages/nibabel/openers.py\", line 74, in __init__\n        self.fobj = opener(fileish, *args, **kwargs)\n    IOError: [Errno 2] No such file or directory: '/home/user/fmri_volumes.nii'\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/658", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/658/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/658/events", "html_url": "https://github.com/nilearn/nilearn/issues/658", "id": 94896738, "node_id": "MDU6SXNzdWU5NDg5NjczOA==", "number": 658, "title": "Python int too large to convert to C long", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 144463785, "node_id": "MDU6TGFiZWwxNDQ0NjM3ODU=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Discussion", "name": "Discussion", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-14T08:44:19Z", "updated_at": "2015-07-15T13:52:36Z", "closed_at": "2015-07-15T13:52:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \n## ERROR: nilearn.tests.test_datasets.test_fetch_adhd\n\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/home/elvis/CODE/FORKED/nilearn/nilearn/tests/test_datasets.py\", line 438, in test_fetch_adhd\n    n_subjects=12, verbose=0)\n  File \"/home/elvis/CODE/FORKED/nilearn/nilearn/datasets.py\", line 1653, in fetch_adhd\n    dtype=None)\n  File \"/usr/lib/python2.7/dist-packages/numpy/lib/npyio.py\", line 1721, in genfromtxt\n    output = np.array(data, dtype=ddtype)\nOverflowError: Python int too large to convert to C long\n\nBTW,  this is the contents of the .csv generated by the test case (which looks weird to me):\n\"# Subject\"\n33390385728031749\n8650549469148439\n4378444284640131\n16685754674586676\n17757804278344090\n26264712857545098\n36119777311222173\n12917479214967171\n41878941916772270\n90275917604688\n43499428783930\n17885601032707231\n17380349668994869\n7211859975363044\n98818608752748\n6091964436794103\n17154520289969762\n6515714499656048\n6710018826350358\n15567529874352769\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/658/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/622", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/622/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/622/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/622/events", "html_url": "https://github.com/nilearn/nilearn/issues/622", "id": 92144251, "node_id": "MDU6SXNzdWU5MjE0NDI1MQ==", "number": 622, "title": "intersect_mask raises bug when given a list of filename string", "user": {"login": "arthurmensch", "id": 4078691, "node_id": "MDQ6VXNlcjQwNzg2OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4078691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurmensch", "html_url": "https://github.com/arthurmensch", "followers_url": "https://api.github.com/users/arthurmensch/followers", "following_url": "https://api.github.com/users/arthurmensch/following{/other_user}", "gists_url": "https://api.github.com/users/arthurmensch/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurmensch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurmensch/subscriptions", "organizations_url": "https://api.github.com/users/arthurmensch/orgs", "repos_url": "https://api.github.com/users/arthurmensch/repos", "events_url": "https://api.github.com/users/arthurmensch/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurmensch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/11", "html_url": "https://github.com/nilearn/nilearn/milestone/11", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/11/labels", "id": 1190347, "node_id": "MDk6TWlsZXN0b25lMTE5MDM0Nw==", "number": 11, "title": "0.1.5", "description": "Integrates contributions from July 2015 sprint: https://github.com/nilearn/nilearn/wiki/July-2015-sprint", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-07-02T10:02:27Z", "updated_at": "2015-12-02T08:33:29Z", "due_on": null, "closed_at": "2015-12-02T08:33:29Z"}, "comments": 1, "created_at": "2015-06-30T16:57:47Z", "updated_at": "2015-07-13T12:42:18Z", "closed_at": "2015-07-13T12:42:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Calling\n\n``` python\nfrom nilearn.masking import intersect_mask\nepi_img = intersect_masks(subject_filenames)\n```\n\nraises error\n\n```\nTraceback (most recent call last):\n  File \"/home/arthur/repos/internship/tools/intersection.py\", line 14, in <module>\n    epi_img = intersect_masks(subject_filenames[:10])\n  File \"/media/data/work/repos/nilearn/nilearn/masking.py\", line 162, in intersect_masks\n    return new_img_like(mask_imgs[0], grp_mask, ref_affine)\n  File \"/media/data/work/repos/nilearn/nilearn/_utils/niimg.py\", line 96, in new_img_like\n    return ref_img.__class__(data, affine, header=header)\nTypeError: str() takes at most 1 argument (3 given)\n```\n\n See PR #623 for fix\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/622/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/616", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/616/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/616/events", "html_url": "https://github.com/nilearn/nilearn/issues/616", "id": 90678539, "node_id": "MDU6SXNzdWU5MDY3ODUzOQ==", "number": 616, "title": "displays.add_edges error : Cannot reorder the axes", "user": {"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/11", "html_url": "https://github.com/nilearn/nilearn/milestone/11", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/11/labels", "id": 1190347, "node_id": "MDk6TWlsZXN0b25lMTE5MDM0Nw==", "number": 11, "title": "0.1.5", "description": "Integrates contributions from July 2015 sprint: https://github.com/nilearn/nilearn/wiki/July-2015-sprint", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2015-07-02T10:02:27Z", "updated_at": "2015-12-02T08:33:29Z", "due_on": null, "closed_at": "2015-12-02T08:33:29Z"}, "comments": 7, "created_at": "2015-06-24T13:39:46Z", "updated_at": "2015-07-02T13:08:34Z", "closed_at": "2015-07-02T11:05:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "displays.add_edges used to plot edges of the same image sometimes gives an error\nCannot reorder the axes: the image affine contains rotations \n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/611", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/611/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/611/events", "html_url": "https://github.com/nilearn/nilearn/issues/611", "id": 88470132, "node_id": "MDU6SXNzdWU4ODQ3MDEzMg==", "number": 611, "title": "Messy behavior with uint8 images", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 144463785, "node_id": "MDU6TGFiZWwxNDQ0NjM3ODU=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Discussion", "name": "Discussion", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/10", "html_url": "https://github.com/nilearn/nilearn/milestone/10", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/10/labels", "id": 1071796, "node_id": "MDk6TWlsZXN0b25lMTA3MTc5Ng==", "number": 10, "title": "0.1.4", "description": "Since 0.1.3 will mainly be a bugfix, this release contains the new features that will come before 2.0", "creator": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2015-04-17T07:22:57Z", "updated_at": "2015-07-13T23:13:45Z", "due_on": null, "closed_at": "2015-07-13T23:13:45Z"}, "comments": 8, "created_at": "2015-06-15T16:07:24Z", "updated_at": "2015-07-13T21:22:31Z", "closed_at": "2015-07-13T21:22:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When calling `add_overlay` with an uint8 threshold, the mask is sometimes reversed. The culprit is here: https://github.com/nilearn/nilearn/blob/master/nilearn/plotting/displays.py#L532\n\n``` python\n                data = np.ma.masked_inside(data, -threshold, threshold,\n                                           copy=False)\n```\n\nIf `threshold` is an `uint8`, then you get `threshold = 22` and `-threshold = 234` because of the underflow. There may be other cases like that here and there in the code.\n\nShould we properly handle uint8 everywhere or simply convert the image to float systematically for plotting?\n\nFor the record, this bug happened to @KamalakerDadi when he tried to plot the Harvard Oxford atlas (since Harvard Oxford is shipped in uint8 format). So this is not an isolated case.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/597", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/597/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/597/events", "html_url": "https://github.com/nilearn/nilearn/pull/597", "id": 83383879, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY2MDc3ODY=", "number": 597, "title": "Ho quirks", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/10", "html_url": "https://github.com/nilearn/nilearn/milestone/10", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/10/labels", "id": 1071796, "node_id": "MDk6TWlsZXN0b25lMTA3MTc5Ng==", "number": 10, "title": "0.1.4", "description": "Since 0.1.3 will mainly be a bugfix, this release contains the new features that will come before 2.0", "creator": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2015-04-17T07:22:57Z", "updated_at": "2015-07-13T23:13:45Z", "due_on": null, "closed_at": "2015-07-13T23:13:45Z"}, "comments": 15, "created_at": "2015-06-01T08:28:41Z", "updated_at": "2015-06-19T09:20:20Z", "closed_at": "2015-06-18T14:11:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/597", "html_url": "https://github.com/nilearn/nilearn/pull/597", "diff_url": "https://github.com/nilearn/nilearn/pull/597.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/597.patch", "merged_at": "2015-06-18T14:11:43Z"}, "body": "Fix all reproducible HO quirks in #486.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/597/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/585", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/585/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/585/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/585/events", "html_url": "https://github.com/nilearn/nilearn/pull/585", "id": 75906271, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUzMDU3MzE=", "number": 585, "title": "Fix logic flaws in caching system (was Fix 457)", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/10", "html_url": "https://github.com/nilearn/nilearn/milestone/10", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/10/labels", "id": 1071796, "node_id": "MDk6TWlsZXN0b25lMTA3MTc5Ng==", "number": 10, "title": "0.1.4", "description": "Since 0.1.3 will mainly be a bugfix, this release contains the new features that will come before 2.0", "creator": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2015-04-17T07:22:57Z", "updated_at": "2015-07-13T23:13:45Z", "due_on": null, "closed_at": "2015-07-13T23:13:45Z"}, "comments": 7, "created_at": "2015-05-13T08:51:23Z", "updated_at": "2015-07-13T12:40:52Z", "closed_at": "2015-07-13T12:40:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/585", "html_url": "https://github.com/nilearn/nilearn/pull/585", "diff_url": "https://github.com/nilearn/nilearn/pull/585.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/585.patch", "merged_at": "2015-07-13T12:40:52Z"}, "body": "Fix #457\n- In CacheMixin, make memory levels mandatory for function `_cache`. It is logic and they are never used without them.\n- Fix logic in `cache` function (if called with a valid memory, no cache)\n- Add tests\n- Fix cache levels for several calls\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/585/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/582", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/582/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/582/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/582/events", "html_url": "https://github.com/nilearn/nilearn/pull/582", "id": 75234646, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUxMzA2MzY=", "number": 582, "title": "Regarding issue 557, included optional argument threshold and set default as None", "user": {"login": "KamalakerDadi", "id": 11410385, "node_id": "MDQ6VXNlcjExNDEwMzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11410385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamalakerDadi", "html_url": "https://github.com/KamalakerDadi", "followers_url": "https://api.github.com/users/KamalakerDadi/followers", "following_url": "https://api.github.com/users/KamalakerDadi/following{/other_user}", "gists_url": "https://api.github.com/users/KamalakerDadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamalakerDadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamalakerDadi/subscriptions", "organizations_url": "https://api.github.com/users/KamalakerDadi/orgs", "repos_url": "https://api.github.com/users/KamalakerDadi/repos", "events_url": "https://api.github.com/users/KamalakerDadi/events{/privacy}", "received_events_url": "https://api.github.com/users/KamalakerDadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 3, "created_at": "2015-05-11T14:09:19Z", "updated_at": "2015-05-11T20:18:09Z", "closed_at": "2015-05-11T20:18:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/582", "html_url": "https://github.com/nilearn/nilearn/pull/582", "diff_url": "https://github.com/nilearn/nilearn/pull/582.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/582.patch", "merged_at": "2015-05-11T20:18:08Z"}, "body": "tested like this by including few arguments in plot_anat as viewed in files changed\n\n``` python\nfrom nilearn import plotting\ndisplay = plotting.plot_anat()\ndisplay = plotting.plot_anat(threshold=0)\ndisplay = plotting.plot_anat(threshold=None)\n```\n\nworked well without error. Any suggestions or comments if it cannot be included that way or to be included in a better way.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/582/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/577", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/577/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/577/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/577/events", "html_url": "https://github.com/nilearn/nilearn/issues/577", "id": 74488446, "node_id": "MDU6SXNzdWU3NDQ4ODQ0Ng==", "number": 577, "title": "pb with plot_stat_map with MGZ T1 image", "user": {"login": "agramfort", "id": 161052, "node_id": "MDQ6VXNlcjE2MTA1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/161052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agramfort", "html_url": "https://github.com/agramfort", "followers_url": "https://api.github.com/users/agramfort/followers", "following_url": "https://api.github.com/users/agramfort/following{/other_user}", "gists_url": "https://api.github.com/users/agramfort/gists{/gist_id}", "starred_url": "https://api.github.com/users/agramfort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agramfort/subscriptions", "organizations_url": "https://api.github.com/users/agramfort/orgs", "repos_url": "https://api.github.com/users/agramfort/repos", "events_url": "https://api.github.com/users/agramfort/events{/privacy}", "received_events_url": "https://api.github.com/users/agramfort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}, {"id": 144463785, "node_id": "MDU6TGFiZWwxNDQ0NjM3ODU=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Discussion", "name": "Discussion", "color": "bfe5bf", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2015-05-08T20:40:48Z", "updated_at": "2015-05-11T09:24:43Z", "closed_at": "2015-05-11T09:24:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "we use a plot_stat_map in MNE:\n\nhttp://martinos.org/mne/dev/auto_examples/inverse/plot_lcmv_beamformer_volume.html#example-inverse-plot-lcmv-beamformer-volume-py\n\nwith the current master of nilearn it fails due to the dtype (int8) of the anat I make available at:\n\nhttps://dl.dropboxusercontent.com/u/2140486/T1.mgz\n\nerror is:\n\n```\n/Users/alex/work/src/nibabel/nibabel/freesurfer/mghformat.pyc in set_data_dtype(self, datatype)\n    284             code = self._data_type_codes[datatype]\n    285         except KeyError:\n--> 286             raise MGHError('datatype dtype \"%s\" not recognized' % datatype)\n    287         self._header_data['type'] = code\n    288\n\nMGHError: datatype dtype \"int8\" not recognized\n```\n\nany help?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/577/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/576", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/576/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/576/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/576/events", "html_url": "https://github.com/nilearn/nilearn/pull/576", "id": 74385252, "node_id": "MDExOlB1bGxSZXF1ZXN0MzUwMTQ4NzM=", "number": 576, "title": "[MRG+1] Fix issue575", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 2, "created_at": "2015-05-08T14:42:23Z", "updated_at": "2015-05-11T07:51:49Z", "closed_at": "2015-05-11T07:51:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/576", "html_url": "https://github.com/nilearn/nilearn/pull/576", "diff_url": "https://github.com/nilearn/nilearn/pull/576.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/576.patch", "merged_at": "2015-05-11T07:51:49Z"}, "body": "Fixes #575.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/576/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/575", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/575/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/575/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/575/events", "html_url": "https://github.com/nilearn/nilearn/issues/575", "id": 74380491, "node_id": "MDU6SXNzdWU3NDM4MDQ5MQ==", "number": 575, "title": "plot_stat_map (and probably plot_*) fails when display_mode axis has singleton dimension", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-05-08T14:26:17Z", "updated_at": "2015-05-11T07:51:49Z", "closed_at": "2015-05-11T07:51:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Fuzzing the plotting code, I find the following testcase fails\n\n```\n    for axis, direction in enumerate(\"xyz\"):\n        shape = [5, 6, 7]\n        shape[axis] = 1\n        img = nibabel.Nifti1Image(np.ones(shape), np.eye(4))\n        plot_stat_map(img, None, display_mode=direction)\n```\n\n`ValueError: Too many cuts requested for the data: n_cuts=7, data size=1`\n\nThe culprit is the find_cut_slices function.\n\nA fix would be to return all the slices along the axis if there are at least as many requested n_slices as there are slices.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/575/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/575/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/571", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/571/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/571/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/571/events", "html_url": "https://github.com/nilearn/nilearn/pull/571", "id": 73035273, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQ2NDE4Mjg=", "number": 571, "title": "[MRG+1] BF: issue #570 (including tests)", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 7, "created_at": "2015-05-04T14:30:09Z", "updated_at": "2015-05-11T07:56:18Z", "closed_at": "2015-05-11T07:56:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/571", "html_url": "https://github.com/nilearn/nilearn/pull/571", "diff_url": "https://github.com/nilearn/nilearn/pull/571.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/571.patch", "merged_at": "2015-05-11T07:56:18Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/571/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/563", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/563/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/563/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/563/events", "html_url": "https://github.com/nilearn/nilearn/pull/563", "id": 71599288, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQyNzAwNTE=", "number": 563, "title": "Deal with non-full rank confounds", "user": {"login": "salma1601", "id": 7080143, "node_id": "MDQ6VXNlcjcwODAxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7080143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salma1601", "html_url": "https://github.com/salma1601", "followers_url": "https://api.github.com/users/salma1601/followers", "following_url": "https://api.github.com/users/salma1601/following{/other_user}", "gists_url": "https://api.github.com/users/salma1601/gists{/gist_id}", "starred_url": "https://api.github.com/users/salma1601/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salma1601/subscriptions", "organizations_url": "https://api.github.com/users/salma1601/orgs", "repos_url": "https://api.github.com/users/salma1601/repos", "events_url": "https://api.github.com/users/salma1601/events{/privacy}", "received_events_url": "https://api.github.com/users/salma1601/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 6, "created_at": "2015-04-28T14:07:01Z", "updated_at": "2015-05-11T13:30:27Z", "closed_at": "2015-05-11T13:30:27Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/563", "html_url": "https://github.com/nilearn/nilearn/pull/563", "diff_url": "https://github.com/nilearn/nilearn/pull/563.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/563.patch", "merged_at": null}, "body": "Fixes #561\nIt remains to add a test to check that output from regessing out confounds equals residue obtained with scipy least squares. May be it will be better to add it after PR #553 is merged, because this PR will affect the way the regression is done.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/563/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/557", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/557/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/557/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/557/events", "html_url": "https://github.com/nilearn/nilearn/issues/557", "id": 70425702, "node_id": "MDU6SXNzdWU3MDQyNTcwMg==", "number": 557, "title": "Threshold argument not dealt with properly in plot_anat", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 6, "created_at": "2015-04-23T14:25:32Z", "updated_at": "2015-05-11T20:18:44Z", "closed_at": "2015-05-11T20:18:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<pre>\nplotting.plot_anat(threshold=0)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-5-cc5469646d11> in <module>()\n----> 1 plotting.plot_anat(threshold=0)\n\n/volatile/varoquau/dev/nilearn/nilearn/plotting/img_plotting.pyc in plot_anat(anat_img, cut_coords, output_file, display_mode, figure, axes, title, annotate, draw_cross, black_bg, dim, cmap, **kwargs)\n    393                       threshold=None, annotate=annotate,\n    394                       draw_cross=draw_cross, black_bg=black_bg,\n--> 395                       vmin=vmin, vmax=vmax, cmap=cmap, **kwargs)\n    396     return display\n    397\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/554", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/554/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/554/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/554/events", "html_url": "https://github.com/nilearn/nilearn/issues/554", "id": 69786641, "node_id": "MDU6SXNzdWU2OTc4NjY0MQ==", "number": 554, "title": "Doc does not build", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 9, "created_at": "2015-04-21T08:51:18Z", "updated_at": "2015-04-24T11:51:24Z", "closed_at": "2015-04-24T11:50:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Am I the only one?\n\n```\nException occurred:\n  File \"/home/aa013911/work/nilearn/doc/sphinxext/sphinxgallery/docs_resolv.py\", line 348, in embed_code_links\n    gallery_dir = os.path.join(app.builder.srcdir, gallery_conf['gallery_dir'])\nKeyError: 'gallery_dir'\nThe full traceback has been saved in /tmp/sphinx-err-sePU7r.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/554/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/553", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/553/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/553/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/553/events", "html_url": "https://github.com/nilearn/nilearn/pull/553", "id": 69623150, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2ODExNTc=", "number": 553, "title": "[MRG] BUG: don't normalize when confounds", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 5, "created_at": "2015-04-20T16:16:22Z", "updated_at": "2015-05-11T09:27:27Z", "closed_at": "2015-05-11T09:26:00Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/553", "html_url": "https://github.com/nilearn/nilearn/pull/553", "diff_url": "https://github.com/nilearn/nilearn/pull/553.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/553.patch", "merged_at": "2015-05-11T09:26:00Z"}, "body": "Fixes #549\n\nThe signals were normlized when confounds were used, for little good\nreason\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/553/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/528", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/528/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/528/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/528/events", "html_url": "https://github.com/nilearn/nilearn/issues/528", "id": 65254673, "node_id": "MDU6SXNzdWU2NTI1NDY3Mw==", "number": 528, "title": "plot_stat_map colorbar values do not match the data", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 13, "created_at": "2015-03-30T16:56:48Z", "updated_at": "2015-04-16T06:45:07Z", "closed_at": "2015-04-15T18:06:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is a plot with some negative and positive random data:\n\n``` python\nimport numpy as np\nfrom nilearn.plotting import plot_stat_map\nfrom nibabel import Nifti1Image\n\ndata = np.random.RandomState(0).randn(53, 63, 46)\nplot_stat_map(Nifti1Image(data, np.eye(4)))\n```\n\n![pos_neg_plot_stat_map](https://cloud.githubusercontent.com/assets/89061/6901532/2caaf7c4-d70e-11e4-8ac4-56fcde308e30.png)\n\nThe colormap has values centered around zeros, so it could be correct. Let's now do the same plot on the absolute value of the previous data to get only positive values:\n\n``` python\nplot_stat_map(Nifti1Image(np.abs(data), np.eye(4)))\n```\n\n![pos_only_plot_stat_map](https://cloud.githubusercontent.com/assets/89061/6901547/502ace68-d70e-11e4-8fc5-e383643920c1.png)\n\nOne can observe that the data region has a lot of dark red pixels that should be negative values based on the legend of the colorbar. This is not correct as we only have positive values in this image.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/510", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/510/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/510/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/510/events", "html_url": "https://github.com/nilearn/nilearn/issues/510", "id": 63067182, "node_id": "MDU6SXNzdWU2MzA2NzE4Mg==", "number": 510, "title": "Colobar code breaks when a map is fully empty", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 4, "created_at": "2015-03-19T19:06:12Z", "updated_at": "2015-03-26T08:16:18Z", "closed_at": "2015-03-26T08:16:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "To reproduce: set a \"threshold\" high enough in plot_stat_maps\n\nThe traceback is:\n\n<pre>\n/home/varoquau/.local/lib/python2.7/site-packages/nilearn/plotting/img_plotting.py in _plot_img_with_bg(img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, bg_vmin, bg_vmax, interpolation, display_factory, cbar_vmin, cbar_vmax, **kwargs)\n     96         display.add_overlay(new_img_like(img, data, affine),\n     97                             threshold=threshold, interpolation=interpolation,\n---> 98                             colorbar=colorbar, **kwargs)\n     99 \n    100     if annotate:\n\n/home/varoquau/.local/lib/python2.7/site-packages/nilearn/plotting/displays.py in add_overlay(self, img, threshold, colorbar, **kwargs)\n    486 \n    487         if colorbar:\n--> 488             self._colorbar_show(ims[0], threshold)\n    489 \n    490         pl.draw_if_interactive()\n\n/home/varoquau/.local/lib/python2.7/site-packages/nilearn/plotting/displays.py in _colorbar_show(self, im, threshold)\n    593             self._colorbar_ax, ticks=ticks, norm=im.norm,\n    594             orientation='vertical', cmap=our_cmap, boundaries=bounds,\n--> 595             spacing='proportional')\n    596         self._cbar.set_ticklabels([\"%.2g\" % t for t in ticks])\n    597 \n\n/usr/lib/pymodules/python2.7/matplotlib/colorbar.pyc in __init__(self, ax, cmap, norm, alpha, values, boundaries, orientation, ticklocation, extend, spacing, ticks, format, drawedges, filled, extendfrac, extendrect, label)\n    315         # The rest is in a method so we can recalculate when clim changes.\n    316         self.config_axis()\n--> 317         self.draw_all()\n    318 \n    319     def _extend_lower(self):\n\n/usr/lib/pymodules/python2.7/matplotlib/colorbar.pyc in draw_all(self)\n    340         X, Y = self._mesh()\n    341         C = self._values[:, np.newaxis]\n--> 342         self._config_axes(X, Y)\n    343         if self.filled:\n    344             self._add_solids(X, Y, C)\n\n/usr/lib/pymodules/python2.7/matplotlib/colorbar.pyc in _config_axes(self, X, Y)\n    431         ax.add_artist(self.patch)\n    432 \n--> 433         self.update_ticks()\n    434 \n    435     def _set_label(self):\n\n/usr/lib/pymodules/python2.7/matplotlib/colorbar.pyc in update_ticks(self)\n    365         \"\"\"\n    366         ax = self.ax\n--> 367         ticks, ticklabels, offset_string = self._ticker()\n    368         if self.orientation == 'vertical':\n    369             ax.yaxis.set_ticks(ticks)\n\n/usr/lib/pymodules/python2.7/matplotlib/colorbar.pyc in _ticker(self)\n    582         ticks = ticks[inrange]\n    583         b = b[inrange]\n--> 584         formatter.set_locs(b)\n    585         ticklabels = [formatter(t, i) for i, t in enumerate(b)]\n    586         offset_string = formatter.get_offset()\n\n/usr/lib/pymodules/python2.7/matplotlib/ticker.pyc in set_locs(self, locs)\n    482                 self._set_offset(d)\n    483             self._set_orderOfMagnitude(d)\n--> 484             self._set_format(vmin, vmax)\n    485 \n    486     def _set_offset(self, range):\n\n/usr/lib/pymodules/python2.7/matplotlib/ticker.pyc in _set_format(self, vmin, vmax)\n    543             # We needed the end points only for the loc_range calculation.\n    544             locs = locs[:-2]\n--> 545         loc_range_oom = int(math.floor(math.log10(loc_range)))\n    546         # first estimate:\n    547         sigfigs = max(0, 3 - loc_range_oom)\n\nValueError: math domain error\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/510/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/509", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/509/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/509/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/509/events", "html_url": "https://github.com/nilearn/nilearn/issues/509", "id": 63063538, "node_id": "MDU6SXNzdWU2MzA2MzUzOA==", "number": 509, "title": "plotting: Transparency / thresholding broken in master", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 4, "created_at": "2015-03-19T18:47:47Z", "updated_at": "2015-03-20T12:21:05Z", "closed_at": "2015-03-20T12:21:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In master transparency or thresholding of statistical maps is now broken (I've checked: this is not a problem of my matplotlib version: it works on the doc_rework branch).\n\nOne example is the plot_demo_plotting.py example that now gives\n![plotting_broken](https://cloud.githubusercontent.com/assets/208217/6738200/b429ff02-ce70-11e4-9185-d8b24fa4a3b0.png)\nTo be compared to\nhttp://nilearn.github.io/auto_examples/manipulating_visualizing/plot_demo_plotting.html\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/509/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/509/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/508", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/508/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/508/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/508/events", "html_url": "https://github.com/nilearn/nilearn/issues/508", "id": 63033347, "node_id": "MDU6SXNzdWU2MzAzMzM0Nw==", "number": 508, "title": "Remove the six dependency", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 4, "created_at": "2015-03-19T16:45:03Z", "updated_at": "2015-03-20T14:25:57Z", "closed_at": "2015-03-20T14:24:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We cannot depend on six. It is opening a risk of install breakage, with is the thing that we are absolutely trying to avoid.\n\nThe easiest way forward is probably to do manually what six does. It's actually suprisingly easy. Joblib does it this way:\n- [x] replace all the 'xrange' by 'range'\n- [x] the urlib, StringIO and cPickle moves can be tackled by try/except imports\n- [x] the string_types is the hardest. I suspect that it can be handled by something like https://github.com/joblib/joblib/blob/master/joblib/_compat.py\n- [x] 'zip(.)' should probably be changed to 'list(zip(.))'\n\nOverall, nothing really hard.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/501", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/501/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/501/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/501/events", "html_url": "https://github.com/nilearn/nilearn/issues/501", "id": 62446351, "node_id": "MDU6SXNzdWU2MjQ0NjM1MQ==", "number": 501, "title": "nilearn _check_niimgs called from niftimasker doesn't support current nibabel shape output", "user": {"login": "satra", "id": 184063, "node_id": "MDQ6VXNlcjE4NDA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satra", "html_url": "https://github.com/satra", "followers_url": "https://api.github.com/users/satra/followers", "following_url": "https://api.github.com/users/satra/following{/other_user}", "gists_url": "https://api.github.com/users/satra/gists{/gist_id}", "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satra/subscriptions", "organizations_url": "https://api.github.com/users/satra/orgs", "repos_url": "https://api.github.com/users/satra/repos", "events_url": "https://api.github.com/users/satra/events{/privacy}", "received_events_url": "https://api.github.com/users/satra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 11, "created_at": "2015-03-17T16:25:37Z", "updated_at": "2016-08-29T04:51:44Z", "closed_at": "2015-04-15T10:46:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "if i give a list of these images to niftimasker it complains that it received 4d images. i have opened an issue with nibabel asking why it's return the 4th dimension, but i think this is also a case where niftimasker can simply check if the 4th dimension is one for it's image check to know that this is a 3d file.\n\n```\nimages[0] = nb.load('cope01.nii.gz')\nimages[0].shape\n(91, 109, 91, 1)\n```\n\n```\n--> 176             imgs = _utils.check_niimgs(imgs, accept_3d=True)\n    177             self.mask_img_ = self._cache(compute_mask,\n    178                               func_memory_level=1,\n\n/om/user/satra/envs/testenv/lib/python2.7/site-packages/nilearn/_utils/niimg_conversions.pyc in check_niimgs(niimgs, accept_3d, return_iterator)\n    384                         \"%s%dD image(s), of shape %s. \"\n    385                         \"See http://nilearn.github.io/building_blocks/manipulating_mr_images.html#niimg.\" % (\n--> 386                         'list of ' * depth, dim, shape))\n    387 \n    388     # Now, we load data as we know its format\n\nTypeError: Data must be a 4D Niimg-like object. You provided a list of 4D image(s), of shape (91, 109, 91, 1). See http://nilearn.github.io/building_blocks/manipulating_mr_images.html#niimg.\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/484", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/484/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/484/events", "html_url": "https://github.com/nilearn/nilearn/issues/484", "id": 59865746, "node_id": "MDU6SXNzdWU1OTg2NTc0Ng==", "number": 484, "title": "Nilearn tried to store in -/usr/share/fsl/5.0/harvard_oxford", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-04T21:34:50Z", "updated_at": "2015-03-05T05:44:42Z", "closed_at": "2015-03-05T00:41:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A user at the workshop had the fsldir variable set, and got the following error when running the datasets.fetch_harvard_oxford:\n\n<pre>\n$ echo $FSLDIR\n/usr/share/fsl/5.0\n\n---------------------------------------------------------------------------\nOSError                                   Traceback (most recent call last)\n<ipython-input-2-3508c846c5eb> in <module>()\n      1 from nilearn import datasets\n----> 2 atlas_filename, labels = datasets.fetch_harvard_oxford('cort-maxprob-thr25-2mm')\n\n/home/chris/.local/lib/python2.7/site-packages/nilearn/datasets.pyc in\nfetch_harvard_oxford(atlas_name, data_dir, symmetric_split, resume, verbose)\n   1579     data_dir = _get_dataset_dir(dataset_name, data_dir=data_dir,\n   1580                                 lookup_defaults=(data_dir is None),\n-> 1581                                 verbose=verbose)\n   1582     opts = {'uncompress': True}\n   1583     atlas_file = os.path.join('HarvardOxford',\n\n/home/chris/.local/lib/python2.7/site-packages/nilearn/datasets.pyc in\n_get_dataset_dir(dataset_name, data_dir, lookup_defaults, verbose)\n    259\n    260     raise OSError('Nilearn tried to store the dataset in the following '\n--> 261             'directories, but:' + ''.join(errors))\n    262\n    263\n\nOSError: Nilearn tried to store the dataset in the following directories, but:\n -/usr/share/fsl/5.0/harvard_oxford (Permission denied)\n</pre>\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/484/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/482", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/482/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/482/events", "html_url": "https://github.com/nilearn/nilearn/issues/482", "id": 59767433, "node_id": "MDU6SXNzdWU1OTc2NzQzMw==", "number": 482, "title": "Filtering looks broken", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 11, "created_at": "2015-03-04T08:52:38Z", "updated_at": "2015-03-25T14:15:30Z", "closed_at": "2015-03-25T14:15:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Our usage of butterworth looks like it is not doing what is should.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/479", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/479/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/479/events", "html_url": "https://github.com/nilearn/nilearn/issues/479", "id": 59649276, "node_id": "MDU6SXNzdWU1OTY0OTI3Ng==", "number": 479, "title": "connectome_plotter fails with nan's in adjacency matrix ", "user": {"login": "amadeuskanaan", "id": 2376624, "node_id": "MDQ6VXNlcjIzNzY2MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2376624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amadeuskanaan", "html_url": "https://github.com/amadeuskanaan", "followers_url": "https://api.github.com/users/amadeuskanaan/followers", "following_url": "https://api.github.com/users/amadeuskanaan/following{/other_user}", "gists_url": "https://api.github.com/users/amadeuskanaan/gists{/gist_id}", "starred_url": "https://api.github.com/users/amadeuskanaan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amadeuskanaan/subscriptions", "organizations_url": "https://api.github.com/users/amadeuskanaan/orgs", "repos_url": "https://api.github.com/users/amadeuskanaan/repos", "events_url": "https://api.github.com/users/amadeuskanaan/events{/privacy}", "received_events_url": "https://api.github.com/users/amadeuskanaan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 5, "created_at": "2015-03-03T14:32:38Z", "updated_at": "2015-03-17T10:26:47Z", "closed_at": "2015-03-17T10:26:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "returns ''ValueError: 'adjacency_matrix' should be symmetric''\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/479/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/468", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/468/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/468/events", "html_url": "https://github.com/nilearn/nilearn/issues/468", "id": 59352129, "node_id": "MDU6SXNzdWU1OTM1MjEyOQ==", "number": 468, "title": "The nilearn pypi page is broken", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-02-28T18:29:38Z", "updated_at": "2015-02-28T19:33:00Z", "closed_at": "2015-02-28T19:33:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://pypi.python.org/pypi/nilearn/0.1.1\n\nThe rst is not rendering, and thus looks very ugly\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/468/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/463", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/463/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/463/events", "html_url": "https://github.com/nilearn/nilearn/issues/463", "id": 58927177, "node_id": "MDU6SXNzdWU1ODkyNzE3Nw==", "number": 463, "title": "concat_niimgs is not iterator friendly (was: check_niimgs eliminates the first 3D image from an iterator)", "user": {"login": "bcipolli", "id": 4072455, "node_id": "MDQ6VXNlcjQwNzI0NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4072455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcipolli", "html_url": "https://github.com/bcipolli", "followers_url": "https://api.github.com/users/bcipolli/followers", "following_url": "https://api.github.com/users/bcipolli/following{/other_user}", "gists_url": "https://api.github.com/users/bcipolli/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcipolli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcipolli/subscriptions", "organizations_url": "https://api.github.com/users/bcipolli/orgs", "repos_url": "https://api.github.com/users/bcipolli/repos", "events_url": "https://api.github.com/users/bcipolli/events{/privacy}", "received_events_url": "https://api.github.com/users/bcipolli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 10, "created_at": "2015-02-25T16:25:32Z", "updated_at": "2015-04-30T08:25:00Z", "closed_at": "2015-04-30T08:25:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\nfrom nilearn import datasets\nfrom nilearn.image import iter_img, index_img\nfrom nilearn._utils.niimg_conversions import check_niimgs\n\nhaxby_dataset = datasets.fetch_haxby_simple()\nfunc_img_1 = index_img(haxby_dataset.func, 0)\n\n# This works\nprint list(check_niimgs([func_img_1], return_iterator=True))\n\n# This incorrectly returns an empty iterator\nprint list(check_niimgs(iter_img([func_img_1]), return_iterator=True))\n\n# This throws an error\ntry:\n    print check_niimgs(iter_img([func_img_1]))\nexcept Exception as e:\n    print e.__class__\n```\n\n**Expected behavior:**\n`check_niimgs` called on an iterator of 3D images to return all images.\n\n**Current behavior:**\n`check_niimgs` returns a list, or iterator, with the first image missing.  The output from the above:\n\n```\n[<nibabel.nifti1.Nifti1Image object at 0x10b3eaf10>]\n[]\n<type 'exceptions.StopIteration'>\n```\n\n**Notes:**\n- I'm not sure what use-cases this would hit.  I expected `mean_img` to call `check_niimgs`, but it does not, nor am I clear when an iterator would be passed to `check_niimgs`.\n- When `check_niimgs` runs, it grabs the first image to examine image information.  In the case of an iterator, however, it simply returns the remaining iterator (not a new one that contains the first image that's been popped off.\n- I'm not sure the best way to fix this.  Issue #462 was an accidental product of me trying to find a solution to this issue.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/463/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/427", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/427/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/427/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/427/events", "html_url": "https://github.com/nilearn/nilearn/pull/427", "id": 57599121, "node_id": "MDExOlB1bGxSZXF1ZXN0MjkyNjQ1OTE=", "number": 427, "title": "image.iter_img with a str argument was broken", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-02-13T13:35:21Z", "updated_at": "2015-02-13T15:25:33Z", "closed_at": "2015-02-13T15:25:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/nilearn/nilearn/pulls/427", "html_url": "https://github.com/nilearn/nilearn/pull/427", "diff_url": "https://github.com/nilearn/nilearn/pull/427.diff", "patch_url": "https://github.com/nilearn/nilearn/pull/427.patch", "merged_at": "2015-02-13T15:25:31Z"}, "body": "``` python\n\nimport numpy as np\n\nimport nibabel as nib\n\nfrom nilearn import image\n\ndata = np.ones((11, 12, 13, 14))\nimg = nib.Nifti1Image(data, np.eye(4))\n\nfilename = 'test.nii'\nimg.to_filename(filename)\n\niter = image.iter_img(filename)\nresult = [i.get_data().shape for i in iter]\n```\n\n```\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n/tmp/test.py in <module>()\n     11 img.to_filename(filename)\n     12 \n---> 13 iter = image.iter_img(filename)\n     14 \n     15 \n\n/home/lesteve/dev/nilearn/nilearn/image/image.pyc in iter_img(imgs)\n    543     output: iterator of 3D nibabel.Nifti1Image\n    544     \"\"\"\n--> 545     return check_niimgs(imgs, return_iterator=True)\n\n/home/lesteve/dev/nilearn/nilearn/_utils/niimg_conversions.pyc in check_niimgs(niimgs, accept_3d, return_iterator)\n    389         if return_iterator:\n    390             result = (_index_niimgs(niimgs, i)\n--> 391                       for i in range(_get_shape(niimgs)[3]))\n    392         else:\n    393             result = check_niimg(niimgs)\n\n/home/lesteve/dev/nilearn/nilearn/_utils/niimg_conversions.pyc in _get_shape(img)\n     46         shape = img.shape\n     47     else:\n---> 48         shape = img.get_data().shape\n     49     return shape\n     50 \n\nAttributeError: 'str' object has no attribute 'get_data'\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/427/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/418", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/418/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/418/events", "html_url": "https://github.com/nilearn/nilearn/issues/418", "id": 56954493, "node_id": "MDU6SXNzdWU1Njk1NDQ5Mw==", "number": 418, "title": "Detrending 3D image puts all values to 0 (was Masking with detrend=True has an undocumented, unexpected semantic.)", "user": {"login": "bcipolli", "id": 4072455, "node_id": "MDQ6VXNlcjQwNzI0NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4072455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcipolli", "html_url": "https://github.com/bcipolli", "followers_url": "https://api.github.com/users/bcipolli/followers", "following_url": "https://api.github.com/users/bcipolli/following{/other_user}", "gists_url": "https://api.github.com/users/bcipolli/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcipolli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcipolli/subscriptions", "organizations_url": "https://api.github.com/users/bcipolli/orgs", "repos_url": "https://api.github.com/users/bcipolli/repos", "events_url": "https://api.github.com/users/bcipolli/events{/privacy}", "received_events_url": "https://api.github.com/users/bcipolli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/9", "html_url": "https://github.com/nilearn/nilearn/milestone/9", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/9/labels", "id": 1001540, "node_id": "MDk6TWlsZXN0b25lMTAwMTU0MA==", "number": 9, "title": "0.1.3", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2015-03-02T09:55:31Z", "updated_at": "2015-06-12T08:58:03Z", "due_on": null, "closed_at": "2015-06-12T08:58:03Z"}, "comments": 11, "created_at": "2015-02-08T15:09:03Z", "updated_at": "2015-04-20T07:20:32Z", "closed_at": "2015-04-20T07:20:32Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I looked at the docstring for the `NiftiMasker` class, and for `detrend` it says:\n\n```\n    detrend : boolean, optional\n        This parameter is passed to signal.clean. Please see the related\n        documentation for details\n```\n\nI expected that it would have one of the two semantics:\n1. `NiftiMasker` will detrend to compute the mask, then the detrending computed on the mask would be applied to the image passed to `transform`\n2. `NiftiMasker` will detrend to compute the mask, and will not detrend input data.\n\nInstead a third semantic was applied:\n- `NiftiMasker` detrends to compute the mask.  It then detrends any image that it receives (even if that image is 3D), _using the input images only_.\n\nI'm not sure what the designed behavior is (or why), but at the very least a warning would be helpful.  When I passed a 3D image into a masker with `detrend=True`, I got an image  back out that was all zeros.\n\nNote: this probably also applies to standardize.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/418/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/410", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/410/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/410/events", "html_url": "https://github.com/nilearn/nilearn/issues/410", "id": 56729517, "node_id": "MDU6SXNzdWU1NjcyOTUxNw==", "number": 410, "title": "plot_stat_map with symmetric_cbar != \"auto\" and vmax raises UnboundLocalError", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/3", "html_url": "https://github.com/nilearn/nilearn/milestone/3", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/3/labels", "id": 566548, "node_id": "MDk6TWlsZXN0b25lNTY2NTQ4", "number": 3, "title": "0.1", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2014-02-11T21:40:58Z", "updated_at": "2015-02-10T16:55:10Z", "due_on": "2015-02-05T08:00:00Z", "closed_at": "2015-02-10T16:55:10Z"}, "comments": 8, "created_at": "2015-02-05T21:04:39Z", "updated_at": "2015-02-06T14:22:03Z", "closed_at": "2015-02-06T14:22:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` python\nfrom nilearn import datasets\nfrom nilearn.plotting import plot_stat_map\nlocalizer_dataset = datasets.fetch_localizer_calculation_task(n_subjects=1)\n\nplot_stat_map(localizer_dataset.cmaps[0], symmetric_cbar=True, vmax=10)\n```\n\n```\nUnboundLocalError                         Traceback (most recent call last)\n<ipython-input-4-c631cc1b5cd1> in <module>()\n----> 1 plot_stat_map(localizer_dataset.cmaps[0], symmetric_cbar=True, vmax=10)\n\n/home/lesteve/dev/nilearn/nilearn/plotting/img_plotting.pyc in plot_stat_map(stat_map_img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, cmap, symmetric_cbar, dim, **kwargs)\n    637     vmin = -vmax\n    638 \n--> 639     negative_range = (stat_map_max <= 0)\n    640     positive_range = (stat_map_min >= 0)\n    641     if symmetric_cbar:\n\nUnboundLocalError: local variable 'stat_map_max' referenced before assignment\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/410/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/409", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/409/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/409/events", "html_url": "https://github.com/nilearn/nilearn/issues/409", "id": 56727427, "node_id": "MDU6SXNzdWU1NjcyNzQyNw==", "number": 409, "title": "plot_stat_map with colorbar=False raises ValueError when data is all positive", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/3", "html_url": "https://github.com/nilearn/nilearn/milestone/3", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/3/labels", "id": 566548, "node_id": "MDk6TWlsZXN0b25lNTY2NTQ4", "number": 3, "title": "0.1", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2014-02-11T21:40:58Z", "updated_at": "2015-02-10T16:55:10Z", "due_on": "2015-02-05T08:00:00Z", "closed_at": "2015-02-10T16:55:10Z"}, "comments": 3, "created_at": "2015-02-05T20:49:19Z", "updated_at": "2015-02-06T09:21:29Z", "closed_at": "2015-02-06T09:21:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "One for @eickenberg, linked to #293.\n\n``` python\nimport nibabel as nib\n\nfrom nilearn import datasets\nfrom nilearn.plotting import plot_stat_map\nlocalizer_dataset = datasets.fetch_localizer_calculation_task(n_subjects=1)\ncmap_filename = localizer_dataset.cmaps[0]\nimg = nib.load(cmap_filename)\n# \nplot_stat_map(img, colorbar=False)\n\n# Now making the img data all positive\ndata = img.get_data()\ndata[data < 0] = 0\nplot_stat_map(img, colorbar=False)\n```\n\nThis affects plot_haxby_searchlight.py and plot_roi_extraction.py.\n\nWe should probably add tests for combinations of img data positivity/negativity/none of the above and colorbar=False/True.\n\nThe error:\n\n```\nValueError                                Traceback (most recent call last)\n<ipython-input-1-0b497f4599c2> in <module>()\n     10 data = img.get_data()\n     11 data[data < 0] = 0\n---> 12 plot_stat_map(img, colorbar=False)\n     13 \n\n/home/lesteve/dev/nilearn/nilearn/plotting/img_plotting.pyc in plot_stat_map(stat_map_img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, cmap, symmetric_cbar, dim, **kwargs)\n    662                                vmin=vmin, vmax=vmax, colorbar=colorbar,\n    663                                cbar_vmin=cbar_vmin, cbar_vmax=cbar_vmax,\n--> 664                                **kwargs)\n    665 \n    666     return display\n\n/home/lesteve/dev/nilearn/nilearn/plotting/img_plotting.pyc in _plot_img_with_bg(img, bg_img, cut_coords, output_file, display_mode, colorbar, figure, axes, title, threshold, annotate, draw_cross, black_bg, bg_vmin, bg_vmax, interpolation, display_factory, cbar_vmin, cbar_vmax, **kwargs)\n    110     if (cbar_vmax is not None) or (cbar_vmin is not None):\n    111         if not hasattr(display, '_cbar'):\n--> 112             raise ValueError(\"Specified colorbar bounds, but there is no\"\n    113                              \" colorbar. Set colorbar=True to avoid this\"\n    114                              \" error message.\")\n\nValueError: Specified colorbar bounds, but there is no colorbar. Set colorbar=True to avoid this error message.\n```\n\n```\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/409/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/385", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/385/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/385/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/385/events", "html_url": "https://github.com/nilearn/nilearn/issues/385", "id": 56313964, "node_id": "MDU6SXNzdWU1NjMxMzk2NA==", "number": 385, "title": "CacheMixin is not consistent", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-02-03T00:11:07Z", "updated_at": "2015-02-05T10:44:05Z", "closed_at": "2015-02-05T10:44:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@bcipolli recently spotted errors in the cache mixin system. The docstring is not clear, neither is the code. This is confirmed by the fact that the cache function is misused in the code.\n\nExample (`decomposition/multi_pca.py`):\n\n``` python\n           data, variance, _ = cache(randomized_svd,\n                                memory=self.memory,\n                                ref_memory_level=3,\n                                memory_level=self.memory_level)(\n                        data.T, n_components=self.n_components)\n```\n\nHere, the caching level of the function is given as `ref_memory_level`.\nNow in `input_data/base_masker.py`:\n\n``` python\n        imgs = cache(image.resample_img, memory, ref_memory_level,\n                    memory_level=2, ignore=['copy'])(\n                        imgs,\n                        target_affine=mask_img_.get_affine(),\n                        target_shape=mask_img_.shape,\n                        copy=copy)\n```\n\nThe caching level is now given in `memory_level`.\n\nIt also took me time to figure out that the default value given to `ref_memory_level` and `memory_level` were put so that calling the function without specifying these parameters enables caching.\n\nSee #386 for proposition to solve this issue.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/385/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/379", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/379/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/379/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/379/events", "html_url": "https://github.com/nilearn/nilearn/issues/379", "id": 56147589, "node_id": "MDU6SXNzdWU1NjE0NzU4OQ==", "number": 379, "title": "Show colorbar with plot_glass_brain?", "user": {"login": "gciccarelli3", "id": 9019840, "node_id": "MDQ6VXNlcjkwMTk4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9019840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gciccarelli3", "html_url": "https://github.com/gciccarelli3", "followers_url": "https://api.github.com/users/gciccarelli3/followers", "following_url": "https://api.github.com/users/gciccarelli3/following{/other_user}", "gists_url": "https://api.github.com/users/gciccarelli3/gists{/gist_id}", "starred_url": "https://api.github.com/users/gciccarelli3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gciccarelli3/subscriptions", "organizations_url": "https://api.github.com/users/gciccarelli3/orgs", "repos_url": "https://api.github.com/users/gciccarelli3/repos", "events_url": "https://api.github.com/users/gciccarelli3/events{/privacy}", "received_events_url": "https://api.github.com/users/gciccarelli3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/8", "html_url": "https://github.com/nilearn/nilearn/milestone/8", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/8/labels", "id": 997307, "node_id": "MDk6TWlsZXN0b25lOTk3MzA3", "number": 8, "title": "0.1.2", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2015-02-26T17:00:09Z", "updated_at": "2015-03-02T09:56:17Z", "due_on": null, "closed_at": "2015-03-02T09:56:17Z"}, "comments": 13, "created_at": "2015-02-01T01:30:03Z", "updated_at": "2018-12-31T09:09:42Z", "closed_at": "2015-02-27T13:18:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is this possible?  I only see true/false, and I only see this option for plot_stat_map, not plot_glass_brain for instance.\n\nYet, I can manipulate all the colormap properties fine:\n\nf, axarr = plt.subplots(20)  \nf.set_size_inches(10,40)  #(width, length)[inches]\n\nnilearn.plotting.plot_glass_brain(os.path.join(file_path, file_name), \n                                  axes=axarr[0], cmap=cmx.rainbow, vmin=-8, vmax=8, threshold = 4)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/368", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/368/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/368/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/368/events", "html_url": "https://github.com/nilearn/nilearn/issues/368", "id": 55372108, "node_id": "MDU6SXNzdWU1NTM3MjEwOA==", "number": 368, "title": "plot_img fails:  Cannot reorder the axes: the image affine contains rotations", "user": {"login": "gciccarelli3", "id": 9019840, "node_id": "MDQ6VXNlcjkwMTk4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9019840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gciccarelli3", "html_url": "https://github.com/gciccarelli3", "followers_url": "https://api.github.com/users/gciccarelli3/followers", "following_url": "https://api.github.com/users/gciccarelli3/following{/other_user}", "gists_url": "https://api.github.com/users/gciccarelli3/gists{/gist_id}", "starred_url": "https://api.github.com/users/gciccarelli3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gciccarelli3/subscriptions", "organizations_url": "https://api.github.com/users/gciccarelli3/orgs", "repos_url": "https://api.github.com/users/gciccarelli3/repos", "events_url": "https://api.github.com/users/gciccarelli3/events{/privacy}", "received_events_url": "https://api.github.com/users/gciccarelli3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/6", "html_url": "https://github.com/nilearn/nilearn/milestone/6", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/6/labels", "id": 956487, "node_id": "MDk6TWlsZXN0b25lOTU2NDg3", "number": 6, "title": "pre 0.1 release sprint", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2015-01-29T09:22:14Z", "updated_at": "2015-02-06T09:35:57Z", "due_on": "2015-02-04T08:00:00Z", "closed_at": "2015-02-06T09:35:57Z"}, "comments": 18, "created_at": "2015-01-24T14:14:24Z", "updated_at": "2015-02-06T09:19:27Z", "closed_at": "2015-02-06T09:19:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nMy T1 image does not plot when in scanner space.  I have to register to MNI in order to plot.  I don't want to do that specifically because I want to see activation and anatomy for each subject without registration distortion.\n\nfile_name = 'T1_001.nii.gz' #error because of rotations\nnilearn.plotting.plot_img(os.path.join(file_path, file_name ))\n\nValueError: Cannot reorder the axes: the image affine contains rotations\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/346", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/346/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/346/events", "html_url": "https://github.com/nilearn/nilearn/issues/346", "id": 53852569, "node_id": "MDU6SXNzdWU1Mzg1MjU2OQ==", "number": 346, "title": "resample_img segmentation fault", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 173640763, "node_id": "MDU6TGFiZWwxNzM2NDA3NjM=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/priority:%20high", "name": "priority: high", "color": "9e2409", "default": false, "description": "Urgent task"}], "state": "closed", "locked": false, "assignee": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/6", "html_url": "https://github.com/nilearn/nilearn/milestone/6", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/6/labels", "id": 956487, "node_id": "MDk6TWlsZXN0b25lOTU2NDg3", "number": 6, "title": "pre 0.1 release sprint", "description": "", "creator": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 13, "state": "closed", "created_at": "2015-01-29T09:22:14Z", "updated_at": "2015-02-06T09:35:57Z", "due_on": "2015-02-04T08:00:00Z", "closed_at": "2015-02-06T09:35:57Z"}, "comments": 9, "created_at": "2015-01-09T10:14:34Z", "updated_at": "2015-02-05T10:43:50Z", "closed_at": "2015-02-05T10:43:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Migrated from #322.\n\nA simple example reproducing the problem:\n\n``` python\n\nfrom nilearn.image import resample_img\nimport numpy as np\nfrom nibabel import Nifti1Image\n\n\ndef test(fourth_dim):\n    shape_in = (64, 64, 64)\n    aff_in = np.diag([2., 2., 2., 1.])\n    aff_out = np.diag([3., 3., 3., 1.])\n    data = np.ones(shape_in + (fourth_dim, ), dtype=np.float64)\n\n    img_in = Nifti1Image(data, aff_in)\n\n    img_out = resample_img(img_in,\n                           target_affine=aff_out,\n                           interpolation='nearest')\n\n    print 'shape: ', img_out.shape\n\ntest(1024)  # works fine on my machine\ntest(1025)  # segmentation fault\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/338", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/338/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/338/events", "html_url": "https://github.com/nilearn/nilearn/issues/338", "id": 53667640, "node_id": "MDU6SXNzdWU1MzY2NzY0MA==", "number": 338, "title": "display.add_edges could be made more 'fluid'", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/3", "html_url": "https://github.com/nilearn/nilearn/milestone/3", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/3/labels", "id": 566548, "node_id": "MDk6TWlsZXN0b25lNTY2NTQ4", "number": 3, "title": "0.1", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2014-02-11T21:40:58Z", "updated_at": "2015-02-10T16:55:10Z", "due_on": "2015-02-05T08:00:00Z", "closed_at": "2015-02-10T16:55:10Z"}, "comments": 2, "created_at": "2015-01-07T18:57:48Z", "updated_at": "2015-01-16T13:05:20Z", "closed_at": "2015-01-16T13:05:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While playing interactively with display.add_edges in ipython -pylab, I note the two following 'glitches':\n\n``` python\nfrom nilearn import datasets, plotting, image\ndata = datasets.fetch_adhd()\nmean_func = image.mean_img(data.func[1])\ndisplay = plotting.plot_epi(mean_func)\ndisplay.add_edges(image.mean_img(data.func[1]), color='w')\n```\n\n**Glitch 1:** once all the lines are executed the plot is not refreshed, to have the contour, I need to call manually 'plt.draw()'. We probably need to add a 'plt.draw_if_interactive()' at the end of the add_edges method (and we should check whether it is necessary for add_contour and add_overlay)\n\n**Glitch 2:** In this setting, the alpha is too low, and thus the edges are not visible. I am in favor of removing the alpha (which I implemented in a hacky way with an alpha_cmap, and simply using a hard color).\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/338/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/336", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/336/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/336/events", "html_url": "https://github.com/nilearn/nilearn/issues/336", "id": 53653048, "node_id": "MDU6SXNzdWU1MzY1MzA0OA==", "number": 336, "title": "Broken literalinclude in the docs", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}, {"id": 128341836, "node_id": "MDU6TGFiZWwxMjgzNDE4MzY=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Good%20first%20issue", "name": "Good first issue", "color": "c7def8", "default": false, "description": "Good for newcomers. Equivalent to \"very low\" effort."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-01-07T16:46:08Z", "updated_at": "2015-01-07T23:19:13Z", "closed_at": "2015-01-07T23:13:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In the following file:\nhttp://nilearn.github.io/_sources/developers/dataset_download.txt\n\nThe literalinclude directives are broken.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/326", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/326/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/326/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/326/events", "html_url": "https://github.com/nilearn/nilearn/issues/326", "id": 52368367, "node_id": "MDU6SXNzdWU1MjM2ODM2Nw==", "number": 326, "title": "gen/gen_rst.py needs thorough cleanup", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 126854827, "node_id": "MDU6TGFiZWwxMjY4NTQ4Mjc=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/API", "name": "API", "color": "fef2c0", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-12-18T14:19:11Z", "updated_at": "2014-12-18T14:55:55Z", "closed_at": "2014-12-18T14:35:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "doc/gen_rst.py  badly needs to be cleaned up. Problems include:\n- Non pep*\n- Ubiquitous references to scikit learn (change to nilearn)\n- unsed variables in functions (time_m, time_s, short_name, etc.)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/326/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/326/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/325", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/325/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/325/events", "html_url": "https://github.com/nilearn/nilearn/issues/325", "id": 52365837, "node_id": "MDU6SXNzdWU1MjM2NTgzNw==", "number": 325, "title": "display.add_contour seems to modify the input data", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-12-18T13:53:51Z", "updated_at": "2014-12-19T11:31:18Z", "closed_at": "2014-12-19T11:22:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I saw that by doing twice a display.add_contour with different thresholds:\n\n<pre>\n            thr = 1e-1 * vmax\n            import copy\n            slicer.add_contours(copy.deepcopy(this_img),\n                               colors=[colors_light[color],\n                                       colors_light[color], ],\n                               levels=[-thr, thr],\n                               #linestyles='dotted',\n                               linewidths=1,\n                               label=condition)\n\n            thr = 5e-1 * vmax\n            slicer.add_contours(this_img,\n                               colors=[colors_light[color],\n                                       colors_light[color], ],\n                               levels=[-thr, thr],\n                               linewidths=2,\n                               label=condition)\n</pre>\n\n\nWithout the 'deepcopy', the above doesn't seem to work.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/325/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/322", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/322/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/322/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/322/events", "html_url": "https://github.com/nilearn/nilearn/issues/322", "id": 52218967, "node_id": "MDU6SXNzdWU1MjIxODk2Nw==", "number": 322, "title": "3 bugs in resample_img", "user": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/3", "html_url": "https://github.com/nilearn/nilearn/milestone/3", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/3/labels", "id": 566548, "node_id": "MDk6TWlsZXN0b25lNTY2NTQ4", "number": 3, "title": "0.1", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2014-02-11T21:40:58Z", "updated_at": "2015-02-10T16:55:10Z", "due_on": "2015-02-05T08:00:00Z", "closed_at": "2015-02-10T16:55:10Z"}, "comments": 12, "created_at": "2014-12-17T09:39:12Z", "updated_at": "2015-01-14T00:18:36Z", "closed_at": "2015-01-14T00:18:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Working with HCP resting-state data, it seems I have encountered three potentially new bugs using resample_img:\n\na) using input images that have bad affines can cause segmentation faults, quitting python directly\n\nb) using interpolation=nearest can cause \"completely messed up\" niftis, similar to the recent resample_img bug related to endianess\n\nc) comparing 4d niftis before and after resampling in FSLView, in one case, turned out to look fine for the first 500 images, yet resulted in rather different histogramms in images in the second 500 volumes\n\nI will try to provide python scripts reproducing these things and the corresponding data.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/322/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/299", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/299/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/299/events", "html_url": "https://github.com/nilearn/nilearn/issues/299", "id": 50589741, "node_id": "MDU6SXNzdWU1MDU4OTc0MQ==", "number": 299, "title": "The upper colorbar does not display well when using subplots", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 107298364, "node_id": "MDU6TGFiZWwxMDcyOTgzNjQ=", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Plotting", "name": "Plotting", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-12-01T22:52:00Z", "updated_at": "2014-12-02T13:03:58Z", "closed_at": "2014-12-02T13:03:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See the code below:\n\n``` python\n\nimport nibabel\nimport matplotlib.pyplot as plt\nfrom nilearn import datasets\nfrom nilearn.plotting import plot_stat_map\ndataset_files = datasets.fetch_localizer_calculation_task(n_subjects=1)\nimg = nibabel.load(dataset_files['cmaps'][0])\nplt.figure()\nfor i in range(2):\n    ax = plt.subplot(2, 1, i + 1)\n    plot_stat_map(img, axes=ax)\nplt.show()\n```\n\n![figure](https://cloud.githubusercontent.com/assets/1680079/5259446/87eff726-7a00-11e4-93a2-abca8d838a19.png)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/295", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/295/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/295/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/295/events", "html_url": "https://github.com/nilearn/nilearn/issues/295", "id": 49994723, "node_id": "MDU6SXNzdWU0OTk5NDcyMw==", "number": 295, "title": "Error with fetch_localizer_contrasts when setting get_masks=True", "user": {"login": "lesteve", "id": 1680079, "node_id": "MDQ6VXNlcjE2ODAwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1680079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lesteve", "html_url": "https://github.com/lesteve", "followers_url": "https://api.github.com/users/lesteve/followers", "following_url": "https://api.github.com/users/lesteve/following{/other_user}", "gists_url": "https://api.github.com/users/lesteve/gists{/gist_id}", "starred_url": "https://api.github.com/users/lesteve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lesteve/subscriptions", "organizations_url": "https://api.github.com/users/lesteve/orgs", "repos_url": "https://api.github.com/users/lesteve/repos", "events_url": "https://api.github.com/users/lesteve/events{/privacy}", "received_events_url": "https://api.github.com/users/lesteve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-11-25T09:42:35Z", "updated_at": "2015-01-13T00:46:24Z", "closed_at": "2014-12-16T17:40:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` python\nfrom nilearn import datasets\n\ndata = datasets.fetch_localizer_contrasts(['checkerboard'], n_subjects=1, get_masks=True)\n```\n\nI don't think that's super critical but @AlexandreAbraham you may have a suggestion off the top of your head? I looked at it a bit but I couldn't figure out what was happening. From what I understood, the file was downloaded and unzipped fine but then the target file was not where it was supposed to be somehow.\n\nThe full traceback:\n\n```\nDownloading data from http://brainomics.cea.fr/localizer/brainomics_data_27.zip?rql=Any%20X,XT,XL,XI,XF,XD%20WHERE%20X%20is%20Scan,%20X%20type%20XT,%20X%20label%20XL,%20X%20identifier%20XI,%20X%20format%20XF,%20X%20description%20XD,%20X%20type%20IN(%22c%20map%22),%20X%20label%20%22checkerboard%22&vid=data-zip ...\n...done. (3 seconds, 0 min)\nextracting data from /home/lesteve/nilearn_data/brainomics_localizer/4a38c99692981d6a0cf064516435b8d8/brainomics_data_27.zip...\nDownloaded 23552650 of 23552650 bytes (100.00%,    0.0s remaining)  maining)  \nDownloaded 8192 of 774277 bytes (1.06%,    0.0s remaining)  \nDownloading data from http://brainomics.cea.fr/localizer/brainomics_data_masks.zip?rql=Any%20X,XT,XL,XI,XF,XD%20WHERE%20X%20is%20Scan,%20X%20type%20XT,%20X%20label%20XL,%20X%20identifier%20XI,%20X%20format%20XF,%20X%20description%20XD,%20X%20type%20IN(%22boolean%20mask%22),%20X%20label%20%22mask%22&vid=data-zip ...\n...done. (1 seconds, 0 min)\nextracting data from /home/lesteve/nilearn_data/brainomics_localizer/4a38c99692981d6a0cf064516435b8d8/brainomics_data_masks.zip...\n   ...done.\nDownloaded 774277 of 774277 bytes (100.00%,    0.0s remaining)  \nnilearn/datasets.py:603: UserWarning: An error occured while fetching brainomics_data/S01/boolean_mask.nii.gz\n  warnings.warn('An error occured while fetching %s' % file_)\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n<ipython-input-3-034b6aa8fee8> in <module>()\n----> 1 data = datasets.fetch_localizer_contrasts(['checkerboard'], n_subjects=1, get_masks=True)\n\n/home/lesteve/dev/nilearn/nilearn/datasets.pyc in fetch_localizer_contrasts(contrasts, n_subjects, get_tmaps, get_masks, get_anats, data_dir, url, resume, verbose)\n   1962     # Actual data fetching\n   1963     data_dir = _get_dataset_dir('brainomics_localizer', data_dir=data_dir)\n-> 1964     files = _fetch_files(data_dir, filenames)\n   1965     anats = None\n   1966     masks = None\n\n/home/lesteve/dev/nilearn/nilearn/datasets.pyc in _fetch_files(data_dir, files, resume, mock, verbose)\n    610             if os.path.exists(temp_dir):\n    611                 shutil.rmtree(temp_dir)\n--> 612             raise IOError('Fetching aborted: ' + abort)\n    613         files_.append(target_file)\n    614     # If needed, move files from temps directory to final directory.\n\nIOError: Fetching aborted: Target file cannot be found\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/286", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/286/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/286/events", "html_url": "https://github.com/nilearn/nilearn/issues/286", "id": 49543428, "node_id": "MDU6SXNzdWU0OTU0MzQyOA==", "number": 286, "title": "SpaceNet: NaN snowball effect", "user": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-11-20T12:55:41Z", "updated_at": "2014-11-24T08:07:34Z", "closed_at": "2014-11-24T08:07:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When using SpaceNet for classification, specifying l1_ratio=0 causes a chain of NaN outputs. Division by zero somewhere?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/286/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/275", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/275/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/275/events", "html_url": "https://github.com/nilearn/nilearn/issues/275", "id": 47756295, "node_id": "MDU6SXNzdWU0Nzc1NjI5NQ==", "number": 275, "title": "Bug in nilearn.image.resample_img when using non native endianness", "user": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2014-11-04T19:46:54Z", "updated_at": "2014-11-13T12:48:33Z", "closed_at": "2014-11-13T12:48:33Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Using continuous resampling on a standard nifti (without NaNs) turned the image on the left into the one on the right. I encountered this problem several times. It might have something to the with the dtype of the input data.\n\n![resample_thing](https://cloud.githubusercontent.com/assets/3907396/4906673/fe989eca-645a-11e4-87ed-3b79da3d9963.png)\n\n**Edit**: the Nifti files @banilo was looking had been written in big-endian with SPM (probably due to the platform they were generated on?)\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/269", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/269/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/269/events", "html_url": "https://github.com/nilearn/nilearn/issues/269", "id": 47005396, "node_id": "MDU6SXNzdWU0NzAwNTM5Ng==", "number": 269, "title": "Error in \"Giving credit\" column of doc page: \"nilearn\" mispelled as \"scikit-learn\"", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-10-28T09:36:50Z", "updated_at": "2014-10-29T10:27:40Z", "closed_at": "2014-10-29T10:27:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The \"Giving credit\" column of the nilearn documentation page http://nilearn.github.io/modules/reference.html says \n\n**Please consider citing the scikit-learn if you use it.**\n\nI guess this should be _nilearn_. No ?\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/238", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/238/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/238/events", "html_url": "https://github.com/nilearn/nilearn/issues/238", "id": 42722329, "node_id": "MDU6SXNzdWU0MjcyMjMyOQ==", "number": 238, "title": "Add test for global path handling", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-09-14T14:58:56Z", "updated_at": "2014-10-28T11:27:49Z", "closed_at": "2014-10-28T11:27:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I did not made test for global path PR because another PR will slightly modify the fetcher system. Tests should be added later.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/228", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/228/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/228/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/228/events", "html_url": "https://github.com/nilearn/nilearn/issues/228", "id": 38539866, "node_id": "MDU6SXNzdWUzODUzOTg2Ng==", "number": 228, "title": "clean session bug in nifti masker", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-07-23T15:23:27Z", "updated_at": "2014-09-15T12:52:48Z", "closed_at": "2014-09-15T12:52:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported by Michael Bannert (Max Planck Institute Tuebingen)\n\nI think I\u2019ve found the cause of my error. There seems to be a bug in base_masker.py on lines 104-6. Instead of:\n\n<pre>\n            data[:, sessions == s] = \\\n                cache(signal.clean, memory, ref_memory_level, memory_level=2)(\n                    data[:, sessions == s],\n</pre>\n\n\nThose lines should be:\n\n<pre>\n            data[sessions == s, :] = \\\n                cache(signal.clean, memory, ref_memory_level, memory_level=2)(\n                    data[sessions == s, :],\n</pre>\n\n\nThat\u2019s because the 2D array is of shape samples-by-features. Therefore you need to index into the samples dimension with your sessions indices.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/222", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/222/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/222/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/222/events", "html_url": "https://github.com/nilearn/nilearn/issues/222", "id": 36895964, "node_id": "MDU6SXNzdWUzNjg5NTk2NA==", "number": 222, "title": "(fast_abs_percentile backport fails): TypeError (indexing) in _utils.fast_math.py", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-07-01T14:09:25Z", "updated_at": "2014-07-01T16:02:37Z", "closed_at": "2014-07-01T16:02:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reproduce on numpy 1.7.1 with the following line:\n\n$ nosetests nilearn/plotting/test/test_edge_detect.py\n\n```\nnose.plugins.cover: ERROR: Coverage not available: unable to import coverage module\nnilearn.plotting.test.test_edge_detect.test_edge_detect ... ERROR\n\n======================================================================\nERROR: nilearn.plotting.test.test_edge_detect.test_edge_detect\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/nilearn/plotting/test/test_edge_detect.py\", line 13, in test_edge_detect\n    _, edge_mask = _edge_detect(img)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/nilearn/plotting/edge_detect.py\", line 94, in _edge_detect\n    high = thinned_grad > fast_abs_percentile(grad_values, 100*high_threshold)\n  File \"/home/parietal/dohmatob/CODE/FORKED/nilearn/nilearn/_utils/fast_maths.py\", line 28, in fast_abs_percentile\n    return map.sort()[index]\nTypeError: 'NoneType' object has no attribute '__getitem__'\n\n----------------------------------------------------------------------\nRan 1 test in 0.006s\n\nFAILED (errors=1)\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/222/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/220", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/220/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/220/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/220/events", "html_url": "https://github.com/nilearn/nilearn/issues/220", "id": 36709069, "node_id": "MDU6SXNzdWUzNjcwOTA2OQ==", "number": 220, "title": "Dep on very old sklearn versions (<= 0.10) necessitates very heavy backports", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-06-27T22:30:09Z", "updated_at": "2014-09-16T07:35:15Z", "closed_at": "2014-09-16T07:35:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dependence on very old sklearn versions (<= 0.10) necessitates very heavy backports.\n\nI find my self having to backport stuff like: LinearyClassifierMixin, LinearRegressorMixin, LabelBinarizer, roc_aux_score, _alpha_grid, etc.\n\nThe backports are getting quite heavy. This is a problem, and we should only support reasonably new sklearn versions.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/220/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/199", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/199/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/199/events", "html_url": "https://github.com/nilearn/nilearn/issues/199", "id": 34576194, "node_id": "MDU6SXNzdWUzNDU3NjE5NA==", "number": 199, "title": "Merge in the better_pca branch", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/nilearn/nilearn/milestones/5", "html_url": "https://github.com/nilearn/nilearn/milestone/5", "labels_url": "https://api.github.com/repos/nilearn/nilearn/milestones/5/labels", "id": 674052, "node_id": "MDk6TWlsZXN0b25lNjc0MDUy", "number": 5, "title": "first sprint", "description": "", "creator": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2014-05-29T13:33:26Z", "updated_at": "2015-01-30T13:35:18Z", "due_on": "2014-06-19T07:00:00Z", "closed_at": "2015-01-30T13:35:18Z"}, "comments": 2, "created_at": "2014-05-29T17:49:12Z", "updated_at": "2014-10-08T06:51:13Z", "closed_at": "2014-10-08T06:51:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "My branch better_pca fixes a bunch of stuff in the MultiPCA.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/199/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/190", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/190/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/190/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/190/events", "html_url": "https://github.com/nilearn/nilearn/issues/190", "id": 32361963, "node_id": "MDU6SXNzdWUzMjM2MTk2Mw==", "number": 190, "title": "Bug: Localizer fetcher does not support multiple contrasts", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "VirgileFritsch", "id": 263280, "node_id": "MDQ6VXNlcjI2MzI4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/263280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirgileFritsch", "html_url": "https://github.com/VirgileFritsch", "followers_url": "https://api.github.com/users/VirgileFritsch/followers", "following_url": "https://api.github.com/users/VirgileFritsch/following{/other_user}", "gists_url": "https://api.github.com/users/VirgileFritsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirgileFritsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirgileFritsch/subscriptions", "organizations_url": "https://api.github.com/users/VirgileFritsch/orgs", "repos_url": "https://api.github.com/users/VirgileFritsch/repos", "events_url": "https://api.github.com/users/VirgileFritsch/events{/privacy}", "received_events_url": "https://api.github.com/users/VirgileFritsch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "VirgileFritsch", "id": 263280, "node_id": "MDQ6VXNlcjI2MzI4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/263280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirgileFritsch", "html_url": "https://github.com/VirgileFritsch", "followers_url": "https://api.github.com/users/VirgileFritsch/followers", "following_url": "https://api.github.com/users/VirgileFritsch/following{/other_user}", "gists_url": "https://api.github.com/users/VirgileFritsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirgileFritsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirgileFritsch/subscriptions", "organizations_url": "https://api.github.com/users/VirgileFritsch/orgs", "repos_url": "https://api.github.com/users/VirgileFritsch/repos", "events_url": "https://api.github.com/users/VirgileFritsch/events{/privacy}", "received_events_url": "https://api.github.com/users/VirgileFritsch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2014-04-28T14:06:27Z", "updated_at": "2014-04-28T21:37:05Z", "closed_at": "2014-04-28T21:37:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "the following fails (I notived that multiple contrast fetching is untested):\n\n```\nfrom nilearn import datasets\ndataset_files = datasets.fetch_localizer_contrasts(\n   [\"checkerboard\", \"horizontal checkerboard\"], n_subjects=20)\n```\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/179", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/179/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/179/events", "html_url": "https://github.com/nilearn/nilearn/issues/179", "id": 30522228, "node_id": "MDU6SXNzdWUzMDUyMjIyOA==", "number": 179, "title": "Fetching may fail if several files having the same name are requested", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2014-03-31T15:33:35Z", "updated_at": "2014-04-23T00:58:40Z", "closed_at": "2014-04-23T00:58:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When fetching a dataset, the programmer provides a list of the files to be downloaded. If he provides two files with the same name, eg `http://web.fr/xxx/archive.zip` and `http://web.fr/yyy/archive.zip`, then a local file archive.zip.part will be created when the first file is downloaded, extracted and deleted, and it is the same for the second file.\n\nThis induces two problems:\n- if something goes wrong, we may start downloading `http://web.fr/yyy/archive.zip`, and then resuming system may resume a download of `http://web.fr/xxx/archive.zip` using `archive.zip.part` file, thinking that it is the same file\n- if someday we want to download file in parallel, this cannot work.\n\nWe have now to decide if it's a programmer related issue, and then we can give him a way to rename a file, or if it's a nilearn issue, and then we have to solve it.\n\nA solution would be to assign a unique name to the file when downloading it. What I have in mind is:\n- using the E-tag header value if available\n- using a hash combining the download URL and file-size otherwise.\n\nWe can also download the first bytes of the files before resuming: headers often contains a hash of the file. I don't think that it is a reliable solution.\n\n@GaelVaroquaux any thoughts on this one?\n@VirgileFritsch this is the bug that I was talking of. As all your zip files are names brainomics_data.zip, this may append. \n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/179/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/162", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/162/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/162/events", "html_url": "https://github.com/nilearn/nilearn/issues/162", "id": 27280041, "node_id": "MDU6SXNzdWUyNzI4MDA0MQ==", "number": 162, "title": "Dangerous open-ended `if ... elif` in `masking.unmask (i.e `else` is absent)", "user": {"login": "dohmatob", "id": 634068, "node_id": "MDQ6VXNlcjYzNDA2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/634068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dohmatob", "html_url": "https://github.com/dohmatob", "followers_url": "https://api.github.com/users/dohmatob/followers", "following_url": "https://api.github.com/users/dohmatob/following{/other_user}", "gists_url": "https://api.github.com/users/dohmatob/gists{/gist_id}", "starred_url": "https://api.github.com/users/dohmatob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dohmatob/subscriptions", "organizations_url": "https://api.github.com/users/dohmatob/orgs", "repos_url": "https://api.github.com/users/dohmatob/repos", "events_url": "https://api.github.com/users/dohmatob/events{/privacy}", "received_events_url": "https://api.github.com/users/dohmatob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-02-10T16:37:26Z", "updated_at": "2014-02-14T09:36:48Z", "closed_at": "2014-02-14T09:36:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dangerous open-ended `if ... elif` in `masking.unmask.\n\n`if X.ndim == 2:\n        unmasked = _unmask_nd(X, mask, order=order)\n    elif X.ndim == 1:\n        unmasked = _unmask_3d(X, mask, order=order)`\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/162/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/120", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/120/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/120/events", "html_url": "https://github.com/nilearn/nilearn/issues/120", "id": 21781058, "node_id": "MDU6SXNzdWUyMTc4MTA1OA==", "number": 120, "title": "[bug?] searchlight requires too much memory", "user": {"login": "banilo", "id": 3907396, "node_id": "MDQ6VXNlcjM5MDczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3907396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/banilo", "html_url": "https://github.com/banilo", "followers_url": "https://api.github.com/users/banilo/followers", "following_url": "https://api.github.com/users/banilo/following{/other_user}", "gists_url": "https://api.github.com/users/banilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/banilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/banilo/subscriptions", "organizations_url": "https://api.github.com/users/banilo/orgs", "repos_url": "https://api.github.com/users/banilo/repos", "events_url": "https://api.github.com/users/banilo/events{/privacy}", "received_events_url": "https://api.github.com/users/banilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2013-10-29T19:18:18Z", "updated_at": "2014-03-31T19:56:52Z", "closed_at": "2014-03-31T19:56:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "We are currently using the nilearn/searchlight implementation.\nHowever, on one a super computers and on a brandnew local\ncluster (64GB RAM) we experienced \"MemoryError\" problems.\nDisturbingly, this bug does not appears to be systematically\nreproducible. Sometimes the script (which is only analysing 40 nifti\nimages as input) works fine, sometimes we get a memory error - a\nbehavior we experienced on both super computer and cluster.\n\nOn the cluster, lunching the Python script single-threaded (n_jobs=1)\nthe process appears to occupy ~19GB of RAM (which is counter-intuitive\ngiven only 40 niftis as input), ~22GB when n_jobs=2 and throws almost\nalways an exception when n_jobs=3 (after the first two threads lunched\nsuccessfully as it appears).\n\nHere is a link to the python script plus data:\nhttps://dl.dropboxusercontent.com/u/4403154/sl_issue.tar.gz\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/82", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/82/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/82/events", "html_url": "https://github.com/nilearn/nilearn/issues/82", "id": 15773147, "node_id": "MDU6SXNzdWUxNTc3MzE0Nw==", "number": 82, "title": "Validate the behavior of MultiPCA if a MultiNiftiMasker is given", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2013-06-19T22:57:00Z", "updated_at": "2013-11-05T13:55:37Z", "closed_at": "2013-11-05T13:55:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Formerly, if a MultiNiftiMasker was given to MultiPCA, along with masker arguments (smoothing_fwhm...), then parameters of the MultiNiftiMasker were overriden by the ones given to MultiPCA.\n\nAfter discussion with Philippe, we find much more consistant to ignore masker parameters given to MultiPCA in this case (if the user gives us a masker, we assume that he knows what he's doing).\n\nThis is a thread to discuss and validate this new behavior.\n\nIn any case, the code must be cleaned as, for the moment, the user is warned that memory and memory_level are ignored, which should not be the case. \n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/82/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/80", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/80/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/80/events", "html_url": "https://github.com/nilearn/nilearn/issues/80", "id": 15772382, "node_id": "MDU6SXNzdWUxNTc3MjM4Mg==", "number": 80, "title": "Fix cloning of MultiNiftiMasker in MultiPCA", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-06-19T22:34:42Z", "updated_at": "2013-06-20T08:53:15Z", "closed_at": "2013-06-20T08:53:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In MultiPCA, if the user provides a masker, we clone it. Unfortunately, in joblib 0.6, a bug prevent cloning a Memory object. This issue can be addressed by testing joblib version (patch proposed by Philippe):\n\n```\n        if isinstance(self.mask, NiftiMultiMasker) \\\n           and sklearn.externals.joblib.__version__.startswith(\"0.6\"):\n            # Dirty workaround for a joblib bug\n            # Memory with cachedir=None cannot be cloned in version 0.6\n            # of joblib.\n            masker_memory = self.mask.memory\n            if masker_memory.cachedir is None:\n                self.mask.memory = None\n                self.masker_ = clone(self.mask)\n                self.mask.memory = masker_memory\n                self.masker_.memory = Memory(cachedir=None)\n            else:\n                self.masker_ = clone(self.mask)\n            del masker_memory\n        else:\n            self.masker_ = clone(self.mask)\n```\n\n but, unfortunately, this breaks Travis build:\n\n```\n======================================================================\nERROR: nisl.decomposition.tests.test_multi_pca.test_multi_pca\n----------------------------------------------------------------------\nTraceback (most recent call last):\nFile \"/usr/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\nFile \"/home/travis/build/nilearn/nilearn/nisl/decomposition/tests/test_multi_pca.py\", line 44, in test_multi_pca\n    multi_pca.fit(data[:2])\nFile \"/home/travis/build/nilearn/nilearn/nisl/decomposition/multi_pca.py\", line 211, in fit\n    and sklearn.externals.joblib.__version__.startswith(\"0.6\"):\nAttributeError: 'module' object has no attribute '__version__'\n```\n\nI have made a dirty fix for the moment but we should fix this ASAP.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/80/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/80/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/71", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/71/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/71/events", "html_url": "https://github.com/nilearn/nilearn/issues/71", "id": 15389905, "node_id": "MDU6SXNzdWUxNTM4OTkwNQ==", "number": 71, "title": "Transform should never modify object", "user": {"login": "GaelVaroquaux", "id": 208217, "node_id": "MDQ6VXNlcjIwODIxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/208217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GaelVaroquaux", "html_url": "https://github.com/GaelVaroquaux", "followers_url": "https://api.github.com/users/GaelVaroquaux/followers", "following_url": "https://api.github.com/users/GaelVaroquaux/following{/other_user}", "gists_url": "https://api.github.com/users/GaelVaroquaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/GaelVaroquaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GaelVaroquaux/subscriptions", "organizations_url": "https://api.github.com/users/GaelVaroquaux/orgs", "repos_url": "https://api.github.com/users/GaelVaroquaux/repos", "events_url": "https://api.github.com/users/GaelVaroquaux/events{/privacy}", "received_events_url": "https://api.github.com/users/GaelVaroquaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-06-11T09:25:36Z", "updated_at": "2013-06-20T08:59:02Z", "closed_at": "2013-06-20T08:59:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In BaseMasker, transform_single_niimgs sets the 'affine_' attribute. This shouldn't happen.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/71/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/71/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/60", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/60/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/60/events", "html_url": "https://github.com/nilearn/nilearn/issues/60", "id": 14696730, "node_id": "MDU6SXNzdWUxNDY5NjczMA==", "number": 60, "title": "test_canica_square_img fails randomly", "user": {"login": "bthirion", "id": 234454, "node_id": "MDQ6VXNlcjIzNDQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/234454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bthirion", "html_url": "https://github.com/bthirion", "followers_url": "https://api.github.com/users/bthirion/followers", "following_url": "https://api.github.com/users/bthirion/following{/other_user}", "gists_url": "https://api.github.com/users/bthirion/gists{/gist_id}", "starred_url": "https://api.github.com/users/bthirion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bthirion/subscriptions", "organizations_url": "https://api.github.com/users/bthirion/orgs", "repos_url": "https://api.github.com/users/bthirion/repos", "events_url": "https://api.github.com/users/bthirion/events{/privacy}", "received_events_url": "https://api.github.com/users/bthirion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-05-23T21:30:55Z", "updated_at": "2013-06-10T17:15:13Z", "closed_at": "2013-06-10T17:15:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I took a look at the test: actually the ICA estimate of the ICs is really poor: it fails to recover the components, and actually gets linear combinations of these (meaning that the failure is related to the ICA part). The initial test is quite robust to this effect, but not enough, at least on my box.\nUsing\n\nrng = np.random.RandomState(1)\n\nin the test solves the issue on my box, but I don't find it satisfactory.\nPossible solutions are:\n- test that the right subspace is recovered (instead of the right components)\n- Make the fit more robust, by breaking the symmetry of the components (seems to work on my box).\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/60/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/60/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/36", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/36/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/36/events", "html_url": "https://github.com/nilearn/nilearn/issues/36", "id": 8539532, "node_id": "MDU6SXNzdWU4NTM5NTMy", "number": 36, "title": "Google search is on scikit-learn", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755202, "node_id": "MDU6TGFiZWw0MTc1NTIwMg==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Documentation", "name": "Documentation", "color": "5319e7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2012-11-21T11:34:28Z", "updated_at": "2013-06-21T09:08:23Z", "closed_at": "2013-06-21T09:08:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When we use the Google Search, the search is done on the scikit learn website instead of Nisl.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/36/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/36/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/nilearn/nilearn/issues/31", "repository_url": "https://api.github.com/repos/nilearn/nilearn", "labels_url": "https://api.github.com/repos/nilearn/nilearn/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/nilearn/nilearn/issues/31/comments", "events_url": "https://api.github.com/repos/nilearn/nilearn/issues/31/events", "html_url": "https://github.com/nilearn/nilearn/issues/31", "id": 8321231, "node_id": "MDU6SXNzdWU4MzIxMjMx", "number": 31, "title": "Consider 1 frame 4D image as a 3D image", "user": {"login": "AlexandreAbraham", "id": 1647301, "node_id": "MDQ6VXNlcjE2NDczMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1647301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexandreAbraham", "html_url": "https://github.com/AlexandreAbraham", "followers_url": "https://api.github.com/users/AlexandreAbraham/followers", "following_url": "https://api.github.com/users/AlexandreAbraham/following{/other_user}", "gists_url": "https://api.github.com/users/AlexandreAbraham/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexandreAbraham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexandreAbraham/subscriptions", "organizations_url": "https://api.github.com/users/AlexandreAbraham/orgs", "repos_url": "https://api.github.com/users/AlexandreAbraham/repos", "events_url": "https://api.github.com/users/AlexandreAbraham/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexandreAbraham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 41755105, "node_id": "MDU6TGFiZWw0MTc1NTEwNQ==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Bug", "name": "Bug", "color": "e11d21", "default": false, "description": null}, {"id": 41755234, "node_id": "MDU6TGFiZWw0MTc1NTIzNA==", "url": "https://api.github.com/repos/nilearn/nilearn/labels/Enhancement", "name": "Enhancement", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "pgervais", "id": 3764624, "node_id": "MDQ6VXNlcjM3NjQ2MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3764624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgervais", "html_url": "https://github.com/pgervais", "followers_url": "https://api.github.com/users/pgervais/followers", "following_url": "https://api.github.com/users/pgervais/following{/other_user}", "gists_url": "https://api.github.com/users/pgervais/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgervais/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgervais/subscriptions", "organizations_url": "https://api.github.com/users/pgervais/orgs", "repos_url": "https://api.github.com/users/pgervais/repos", "events_url": "https://api.github.com/users/pgervais/events{/privacy}", "received_events_url": "https://api.github.com/users/pgervais/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pgervais", "id": 3764624, "node_id": "MDQ6VXNlcjM3NjQ2MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3764624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgervais", "html_url": "https://github.com/pgervais", "followers_url": "https://api.github.com/users/pgervais/followers", "following_url": "https://api.github.com/users/pgervais/following{/other_user}", "gists_url": "https://api.github.com/users/pgervais/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgervais/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgervais/subscriptions", "organizations_url": "https://api.github.com/users/pgervais/orgs", "repos_url": "https://api.github.com/users/pgervais/repos", "events_url": "https://api.github.com/users/pgervais/events{/privacy}", "received_events_url": "https://api.github.com/users/pgervais/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2012-11-13T13:25:21Z", "updated_at": "2015-04-08T22:41:53Z", "closed_at": "2015-04-08T22:41:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have noticed that sometimes 3D images are stored as 4D images with 1 frame. We should handle this kind of data.\n", "reactions": {"url": "https://api.github.com/repos/nilearn/nilearn/issues/31/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/nilearn/nilearn/issues/31/timeline", "performed_via_github_app": null, "state_reason": "completed"}]