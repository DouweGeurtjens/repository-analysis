[{"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/4299", "id": 1257822043, "node_id": "I_kwDODFFj5M5K-Ndb", "number": 4299, "title": "BUG _longest_common_prefix_str", "user": {"login": "JialianW", "id": 39213200, "node_id": "MDQ6VXNlcjM5MjEzMjAw", "avatar_url": "https://avatars.githubusercontent.com/u/39213200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JialianW", "html_url": "https://github.com/JialianW", "followers_url": "https://api.github.com/users/JialianW/followers", "following_url": "https://api.github.com/users/JialianW/following{/other_user}", "gists_url": "https://api.github.com/users/JialianW/gists{/gist_id}", "starred_url": "https://api.github.com/users/JialianW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JialianW/subscriptions", "organizations_url": "https://api.github.com/users/JialianW/orgs", "repos_url": "https://api.github.com/users/JialianW/repos", "events_url": "https://api.github.com/users/JialianW/events{/privacy}", "received_events_url": "https://api.github.com/users/JialianW/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-02T07:48:35Z", "updated_at": "2023-03-12T10:22:16Z", "closed_at": "2023-03-12T10:22:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/facebookresearch/detectron2/blob/523c4023bc79719d2fc3fe0181311f88ad35a271/detectron2/checkpoint/c2_model_loading.py#L388\r\n\r\ndef _longest_common_prefix_str(names: List[str]) -> str:\r\n    m1, m2 = min(names), max(names)\r\n    lcp = [a for a, b in zip(m1, m2) if a == b]\r\n    lcp = \"\".join(lcp)\r\n    return lcp\r\n\r\nWhen m1='class' and m2='dlaps_model_xxx', lcp matches two letters and will be 'as'. However, 'as' is not a prefix in the model at all, which can cause a very wrong output log when loading model................\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/4299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/3591", "id": 1029320380, "node_id": "I_kwDODFFj5M49Wi68", "number": 3591, "title": "Assertion Error while using BitMasks to extract single mask", "user": {"login": "AshStuff", "id": 9457497, "node_id": "MDQ6VXNlcjk0NTc0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/9457497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AshStuff", "html_url": "https://github.com/AshStuff", "followers_url": "https://api.github.com/users/AshStuff/followers", "following_url": "https://api.github.com/users/AshStuff/following{/other_user}", "gists_url": "https://api.github.com/users/AshStuff/gists{/gist_id}", "starred_url": "https://api.github.com/users/AshStuff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AshStuff/subscriptions", "organizations_url": "https://api.github.com/users/AshStuff/orgs", "repos_url": "https://api.github.com/users/AshStuff/repos", "events_url": "https://api.github.com/users/AshStuff/events{/privacy}", "received_events_url": "https://api.github.com/users/AshStuff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-18T16:09:05Z", "updated_at": "2021-10-20T20:24:19Z", "closed_at": "2021-10-20T20:24:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the \ud83d\udc1b Bug:\r\n1. Full runnable code or full changes you made:\r\n```\r\nimport torch\r\nfrom detectron2.structures.masks import BitMasks\r\n\r\narr = torch.ones(10,256,256)\r\nmasks = BitMasks(arr)\r\n\r\nmasks[4]\r\n\r\n\r\n```\r\n\r\n3. __Full logs__ or other relevant observations:\r\n```\r\nAssertionError: torch.Size([1, 65536])\r\n\r\nThe error seems to be that while retrieving a single tensor, it is reshaping to tensor.view(1,-1). I think it should be tensor.view(1,*list(self.image_size))\r\n```\r\n\r\n\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```\r\n----------------------  ---------------------------------------------------------------------\r\nsys.platform            linux\r\nPython                  3.6.9 |Anaconda, Inc.| (default, Jul 30 2019, 19:07:31) [GCC 7.3.0]\r\nnumpy                   1.19.5\r\ndetectron2              0.5 @/home/ashwin/detectron2/detectron2\r\nCompiler                GCC 6.5\r\nCUDA compiler           CUDA 10.0\r\ndetectron2 arch flags   6.1\r\nDETECTRON2_ENV_MODULE   <not set>\r\nPyTorch                 1.7.0 @/home/ashwin/anaconda3/lib/python3.6/site-packages/torch\r\nPyTorch debug build     True\r\nGPU available           Yes\r\nGPU 0,1,2               GeForce GTX 1080 Ti (arch=6.1)\r\nDriver version          440.33.01\r\nCUDA_HOME               /usr/local/cuda-10.0\r\nPillow                  8.3.1\r\ntorchvision             0.8.0 @/home/ashwin/anaconda3/lib/python3.6/site-packages/torchvision\r\ntorchvision arch flags  /home/ashwin/anaconda3/lib/python3.6/site-packages/torchvision/_C.so\r\nfvcore                  0.1.5.post20210423\r\niopath                  0.1.7\r\ncv2                     4.5.2\r\n----------------------  ---------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - C++ Version: 201402\r\n  - Intel(R) Math Kernel Library Version 2020.0.0 Product Build 20191122 for Intel(R) 64 architecture\r\n applications\r\n  - Intel(R) MKL-DNN v1.6.0 (Git Hash 5ef631a030a6f73131c77892041042805a06064f)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CPU capability usage: AVX2\r\n  - CUDA Runtime 10.2\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;\r\n-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code\r\n=sm_75\r\n  - CuDNN 7.6.5\r\n  - Magma 2.5.2\r\n  - - Build settings: BLAS=MKL, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -DUSE_PTHREADPOOL -fopenmp -DNDEBUG -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -DUSE_XNNPACK -DUSE_VULKAN_WRAPPER -O2 -fPIC -Wno-narrowing -Wall -Wextra -Werror=return-type -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-unused-local-typedefs -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-psabi -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Werror=format -Wno-stringop-overflow, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON,\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/3486", "id": 997488548, "node_id": "I_kwDODFFj5M47dHek", "number": 3486, "title": "instance_mode=ColorMode.IMAGE_BW does not work as expected in Detectron2 Tutorial", "user": {"login": "RyanMarten", "id": 18333503, "node_id": "MDQ6VXNlcjE4MzMzNTAz", "avatar_url": "https://avatars.githubusercontent.com/u/18333503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RyanMarten", "html_url": "https://github.com/RyanMarten", "followers_url": "https://api.github.com/users/RyanMarten/followers", "following_url": "https://api.github.com/users/RyanMarten/following{/other_user}", "gists_url": "https://api.github.com/users/RyanMarten/gists{/gist_id}", "starred_url": "https://api.github.com/users/RyanMarten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RyanMarten/subscriptions", "organizations_url": "https://api.github.com/users/RyanMarten/orgs", "repos_url": "https://api.github.com/users/RyanMarten/repos", "events_url": "https://api.github.com/users/RyanMarten/events{/privacy}", "received_events_url": "https://api.github.com/users/RyanMarten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-15T20:25:56Z", "updated_at": "2021-09-16T01:43:46Z", "closed_at": "2021-09-16T01:43:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the \ud83d\udc1b Bug:\r\n1. Full runnable code or full changes you made:\r\nCode is linked in the docs on the [getting started](https://detectron2.readthedocs.io/en/latest/tutorials/getting_started.html) page and is on [Google Colab](https://colab.research.google.com/drive/16jcaJoc6bCFAQ96jDe2HwtXj7BMD_-m5). \r\n```\r\nfrom detectron2.utils.visualizer import ColorMode\r\ndataset_dicts = get_balloon_dicts(\"balloon/val\")\r\nfor d in random.sample(dataset_dicts, 3):    \r\n    im = cv2.imread(d[\"file_name\"])\r\n    outputs = predictor(im)  # format is documented at https://detectron2.readthedocs.io/tutorials/models.html#model-output-format\r\n    v = Visualizer(im[:, :, ::-1],\r\n                   metadata=balloon_metadata, \r\n                   scale=0.5, \r\n                   instance_mode=ColorMode.IMAGE_BW   # remove the colors of unsegmented pixels. This option is only available for segmentation models\r\n    )\r\n    out = v.draw_instance_predictions(outputs[\"instances\"].to(\"cpu\"))\r\n    cv2_imshow(out.get_image()[:, :, ::-1])\r\n```\r\n2. What exact command do you run:\r\nI am running the cell as provided. \r\n3. __Full logs__ or other relevant observations:\r\nThere are no logs other than the images displayed. The images displayed, however, do not have the color removed from pixels that are segmented as the comment suggests. \r\n\r\n## Expected behavior:\r\n\r\nThe images visualized should be grayscale, everywhere where there isn't a segmentation mask provided. \r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/3405", "id": 979775876, "node_id": "MDU6SXNzdWU5Nzk3NzU4NzY=", "number": 3405, "title": "Possible bugs in detectron2.data.MapDataset?", "user": {"login": "Dylan-H-Wang", "id": 37757585, "node_id": "MDQ6VXNlcjM3NzU3NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/37757585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-H-Wang", "html_url": "https://github.com/Dylan-H-Wang", "followers_url": "https://api.github.com/users/Dylan-H-Wang/followers", "following_url": "https://api.github.com/users/Dylan-H-Wang/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-H-Wang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-H-Wang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-H-Wang/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-H-Wang/orgs", "repos_url": "https://api.github.com/users/Dylan-H-Wang/repos", "events_url": "https://api.github.com/users/Dylan-H-Wang/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-H-Wang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-26T02:46:29Z", "updated_at": "2021-08-27T20:37:20Z", "closed_at": "2021-08-27T20:37:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the \ud83d\udc1b Bug:\r\nIt seems like the `MapDataset` changes the behaviour of `__new__` inherited from `torch.utils.data.Dataset` and pass extra arguments to the `__new__` function which only accept one for `object.__new__()`\r\n\r\n1. What exact command you run:\r\n```\r\ntrain_dict = DatasetCatalog.get(self.train_name)\r\ndataset=DatasetFromList(train_dict)\r\nmap_func=DatasetMapper(True, augmentations=self.train_augs, image_format=\"BGR\")\r\nself.train_set = MapDataset(\r\n    dataset, map_func\r\n)\r\n```\r\n2. __Full logs__ or other relevant observations:\r\n```\r\n/miniconda/lib/python3.9/site-packages/detectron2/data/common.py in __new__(cls, dataset, map_func)\r\n     75             return _MapIterableDataset(dataset, map_func)\r\n     76         else:\r\n---> 77             return super().__new__(cls, dataset, map_func)\r\n     78 \r\n     79     def __getnewargs__(self):\r\n\r\nTypeError: object.__new__() takes exactly one argument (the type to instantiate)\r\n\r\n```\r\n\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```\r\ndetectron2: 0.5\r\npython: 3.9.5\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/3227", "id": 938468866, "node_id": "MDU6SXNzdWU5Mzg0Njg4NjY=", "number": 3227, "title": "Bug report: R-CNN inference using the pre-computed proposals.", "user": {"login": "voidrank", "id": 6581457, "node_id": "MDQ6VXNlcjY1ODE0NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6581457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/voidrank", "html_url": "https://github.com/voidrank", "followers_url": "https://api.github.com/users/voidrank/followers", "following_url": "https://api.github.com/users/voidrank/following{/other_user}", "gists_url": "https://api.github.com/users/voidrank/gists{/gist_id}", "starred_url": "https://api.github.com/users/voidrank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/voidrank/subscriptions", "organizations_url": "https://api.github.com/users/voidrank/orgs", "repos_url": "https://api.github.com/users/voidrank/repos", "events_url": "https://api.github.com/users/voidrank/events{/privacy}", "received_events_url": "https://api.github.com/users/voidrank/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-07T04:25:49Z", "updated_at": "2021-07-08T22:55:34Z", "closed_at": "2021-07-08T22:55:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the following line, the type of `dataset_name` is `list`\r\nhttps://github.com/facebookresearch/detectron2/blob/master/detectron2/data/build.py#L401\r\n\r\nHowever, in the following line, `dataset_name` is used for indexing. It is obviously that the type of `dataset_name` shouldn't be `list`\r\nhttps://github.com/facebookresearch/detectron2/blob/master/detectron2/data/build.py#L407\r\n\r\nThe most simple way to fix it is change \r\nhttps://github.com/facebookresearch/detectron2/blob/master/detectron2/data/build.py#L400\r\nhttps://github.com/facebookresearch/detectron2/blob/master/detectron2/data/build.py#L401\r\ninto\r\n```\r\n if isinstance(dataset_name, list) or isinstance(dataset_name, tuple):\r\n      dataset_name = dataset_name[0]\r\n```\r\n\r\nInstructions To Reproduce the Issue and Full Logs:\r\n\r\npython train_net.py --num-gpus 8 --config-file configs/C2_SwinB-22k_1280b32_4x_adam_error_8nodes.yaml --eval-only MODEL.WEIGHTS models/C2_SwinB-22k_1280b32_4x_adam_error_final.pth\r\n\r\nMy Environment:\r\n\r\nPyTorch 1.8.1 + Detectron2 0.4.1", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/3080", "id": 899242410, "node_id": "MDU6SXNzdWU4OTkyNDI0MTA=", "number": 3080, "title": "Wrong typing of batched_inputs", "user": {"login": "lampercy", "id": 822046, "node_id": "MDQ6VXNlcjgyMjA0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/822046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lampercy", "html_url": "https://github.com/lampercy", "followers_url": "https://api.github.com/users/lampercy/followers", "following_url": "https://api.github.com/users/lampercy/following{/other_user}", "gists_url": "https://api.github.com/users/lampercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/lampercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lampercy/subscriptions", "organizations_url": "https://api.github.com/users/lampercy/orgs", "repos_url": "https://api.github.com/users/lampercy/repos", "events_url": "https://api.github.com/users/lampercy/events{/privacy}", "received_events_url": "https://api.github.com/users/lampercy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-24T04:51:02Z", "updated_at": "2021-05-25T09:51:34Z", "closed_at": "2021-05-25T09:51:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/facebookresearch/detectron2/blob/543fd075e146261c2e2b0770c9b537314bdae572/detectron2/modeling/mmdet_wrapper.py#L161\r\n\r\nThe type of `batched_inputs` should be `Tuple[Dict[str, torch.Tensor], ...]` to represent a variable-length tuple.\r\nThat makes the exported model by scripting fail to accept tuple of inputs longer than 1", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/3080/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/2608", "id": 804147551, "node_id": "MDU6SXNzdWU4MDQxNDc1NTE=", "number": 2608, "title": "Error: No Output when exporting model to c++ using CPU Device", "user": {"login": "JJKau", "id": 35526954, "node_id": "MDQ6VXNlcjM1NTI2OTU0", "avatar_url": "https://avatars.githubusercontent.com/u/35526954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JJKau", "html_url": "https://github.com/JJKau", "followers_url": "https://api.github.com/users/JJKau/followers", "following_url": "https://api.github.com/users/JJKau/following{/other_user}", "gists_url": "https://api.github.com/users/JJKau/gists{/gist_id}", "starred_url": "https://api.github.com/users/JJKau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JJKau/subscriptions", "organizations_url": "https://api.github.com/users/JJKau/orgs", "repos_url": "https://api.github.com/users/JJKau/repos", "events_url": "https://api.github.com/users/JJKau/events{/privacy}", "received_events_url": "https://api.github.com/users/JJKau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-09T02:43:37Z", "updated_at": "2021-02-09T09:27:02Z", "closed_at": "2021-02-09T09:27:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the Issue:\r\n\r\nI tried running the tutorial for deployment from the link below:\r\nhttps://github.com/facebookresearch/detectron2/tree/master/tools/deploy\r\nFollowing this example:\r\nexport-method=caffe2_tracing, format=torchscript:\r\n./export_model.py --config-file ../../configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml \\\r\n    --output ./output --export-method caffe2_tracing --format torchscript \\\r\n    MODEL.WEIGHTS detectron2://COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x/137849600/model_final_f10217.pkl \\\r\n    MODEL.DEVICE cpu\r\n\r\n./build/torchscript_traced_mask_rcnn output/model.ts input.jpg caffe2_tracing\r\n\r\n1. Running the following command on Anaconda Prompt to export a model:\r\npython ./export_model.py --config-file ../../configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml --output ./output --export-method caffe2_tracing --format torchscript MODEL.WEIGHTS detectron2://COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x/137849600/model_final_f10217.pkl MODEL.DEVICE cpu\r\n\r\n2. I obtained a model.ts from it and pass it as input on torchscript_traced_mask_rcnn.cpp. I am using the default COCO dataset(2017) as input (Similar to tutorial  args: output/model.ts input.jpg caffe2_tracing)\r\n\r\n3. For CPU device, I receive an empty output as follows:\r\n![MicrosoftTeams-image (3)](https://user-images.githubusercontent.com/35526954/107306393-c2892e00-6abf-11eb-8a00-5ee2357c92b1.png)\r\n\r\n4. For GPU device, which is the following command:\r\npython ./export_model.py --config-file ../../configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml --output ./output --export-method caffe2_tracing --format torchscript MODEL.WEIGHTS detectron2://COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x/137849600/model_final_f10217.pkl MODEL.DEVICE cuda\r\n\r\nI am able to get an output using the same input image(Similar to tutorial  args: output/model.ts input.jpg caffe2_tracing):\r\n![MicrosoftTeams-image (4)](https://user-images.githubusercontent.com/35526954/107306647-34617780-6ac0-11eb-97e2-5cc2fde4d238.png)\r\n\r\nI tried using a custom dataset with similar results as above. There is no output for CPU device.\r\n\r\n## Expected behavior:\r\nExpecting result similar to GPU device for the CPU device.\r\n\r\n## Environment:\r\n\r\n![MicrosoftTeams-image (5)](https://user-images.githubusercontent.com/35526954/107307474-b69e6b80-6ac1-11eb-837e-4618cc136bfc.png)\r\ncpp is compiled through visual studio, the following are the actual versions of the libraries:\r\nlibtorch : 1.7.1\r\nopencv: 4.2.0\r\ncuda: 10.2", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/2236", "id": 737604333, "node_id": "MDU6SXNzdWU3Mzc2MDQzMzM=", "number": 2236, "title": "Error when reading images in class GeneralizedRCNNWithTTA", "user": {"login": "h2fishcake", "id": 37198731, "node_id": "MDQ6VXNlcjM3MTk4NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/37198731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/h2fishcake", "html_url": "https://github.com/h2fishcake", "followers_url": "https://api.github.com/users/h2fishcake/followers", "following_url": "https://api.github.com/users/h2fishcake/following{/other_user}", "gists_url": "https://api.github.com/users/h2fishcake/gists{/gist_id}", "starred_url": "https://api.github.com/users/h2fishcake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/h2fishcake/subscriptions", "organizations_url": "https://api.github.com/users/h2fishcake/orgs", "repos_url": "https://api.github.com/users/h2fishcake/repos", "events_url": "https://api.github.com/users/h2fishcake/events{/privacy}", "received_events_url": "https://api.github.com/users/h2fishcake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-06T09:21:01Z", "updated_at": "2020-11-08T04:24:20Z", "closed_at": "2020-11-08T04:24:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to create a TTA model and it seemed that the model could not read the image properly.\r\nWhat would be the recommended way to prepare the inputs?\r\n\r\n## Instructions To Reproduce the Issue:\r\n1. Full runnable code or full changes you made:\r\n```python\r\nimport urllib.request\r\n\r\nimport numpy as np\r\nimport cv2\r\nfrom matplotlib import pyplot as plt\r\nimport torch\r\nfrom detectron2 import model_zoo\r\nfrom detectron2.config import get_cfg\r\nfrom detectron2.modeling import build_model, GeneralizedRCNNWithTTA\r\nfrom detectron2.checkpoint import DetectionCheckpointer\r\nfrom detectron2.utils.visualizer import Visualizer\r\nfrom detectron2.data import MetadataCatalog, DatasetCatalog\r\n\r\n\r\nDEVICE = torch.device(\"cuda:0\" if torch.cuda.is_available() else \"cpu\")\r\n\r\ncfg = get_cfg()\r\ncfg.merge_from_file(model_zoo.get_config_file(\"COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml\"))\r\ncfg.MODEL.WEIGHTS = model_zoo.get_checkpoint_url(\"COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_3x.yaml\")\r\ncfg.MODEL.ROI_HEADS.SCORE_THRESH_TEST = 0.5\r\n\r\nnet = build_model(cfg)\r\nDetectionCheckpointer(net).load(cfg.MODEL.WEIGHTS)\r\nnet = GeneralizedRCNNWithTTA(cfg, net)\r\n\r\nnet.to(DEVICE)\r\nnet.eval()\r\n\r\nimage_url = 'http://images.cocodataset.org/val2017/000000439715.jpg'\r\nwith urllib.request.urlopen(image_url) as response, open('input.jpg', 'wb') as f:\r\n    f.write(response.read())\r\n\r\ninputs = [{'file_name': 'input.jpg'}]\r\n\r\n# It would work if reading image before feeding to the model\r\n# image = cv2.imread('input.jpg')\r\n# inputs = [{'image': torch.from_numpy(image).permute(2, 0, 1), 'height': 480, 'width': 640}]\r\n\r\nwith torch.no_grad():\r\n    outputs = net(inputs)\r\n\r\nprint(outputs[0]['instances'].pred_classes)\r\nprint(outputs[0]['instances'].pred_boxes)\r\n```\r\n\r\n2. __Full logs__ you observed:\r\n```\r\n[W tensor_numpy.cpp:141] Warning: The given NumPy array is not writeable, and PyTorch does not support non-writeable tensors. This means you can write to the underlying (supposedly non-writeable) NumPy array using the tensor. You may want to copy the array to protect its data or make it writeable before converting it to a tensor. This type of warning will be suppressed for the rest of this program. (function operator())\r\nTraceback (most recent call last):\r\n  File \"tta.py\", line 40, in <module>\r\n    outputs = net(inputs)\r\n  File \"/home/user/repos/detectron2/detectron2/modeling/test_time_augmentation.py\", line 188, in __call__\r\n    return [self._inference_one_image(_maybe_read_image(x)) for x in batched_inputs]\r\n  File \"/home/user/repos/detectron2/detectron2/modeling/test_time_augmentation.py\", line 188, in <listcomp>\r\n    return [self._inference_one_image(_maybe_read_image(x)) for x in batched_inputs]\r\n  File \"/home/user/repos/detectron2/detectron2/modeling/test_time_augmentation.py\", line 181, in _maybe_read_image\r\n    image = torch.from_numpy(image).permute(2, 0, 1)  # CHW\r\nValueError: At least one stride in the given numpy array is negative, and tensors with negative strides are not currently supported. (You can probably work around this by making a copy of your array  with array.copy().)\r\n```\r\n\r\nNot sure if this is the correct place, but adding this line can resolve the problem.\r\n```diff\r\nIf making changes to the project itself, please use output of the following command:\r\ngit rev-parse HEAD; git diff\r\n6df2375535c458ad10aec2c16f2c81e1c29dd8a3\r\ndiff --git a/detectron2/modeling/test_time_augmentation.py b/detectron2/modeling/test_time_augmentation.py\r\nindex 9236d0f..5b578dc 100644\r\n--- a/detectron2/modeling/test_time_augmentation.py\r\n+++ b/detectron2/modeling/test_time_augmentation.py\r\n@@ -178,6 +178,7 @@ class GeneralizedRCNNWithTTA(nn.Module):\r\n             ret = copy.copy(dataset_dict)\r\n             if \"image\" not in ret:\r\n                 image = read_image(ret.pop(\"file_name\"), self.tta_mapper.image_format)\r\n+                image = image.copy()\r\n                 image = torch.from_numpy(image).permute(2, 0, 1)  # CHW\r\n                 ret[\"image\"] = image\r\n             if \"height\" not in ret and \"width\" not in ret:\r\n```\r\n\r\n## Environment:\r\n```\r\n----------------------  ----------------------------------------------------------------------------------------------\r\nsys.platform            linux\r\nPython                  3.6.10 |Anaconda, Inc.| (default, Jan  7 2020, 21:14:29) [GCC 7.3.0]\r\nnumpy                   1.18.1\r\ndetectron2              0.2.1 @/home/user/repos/detectron2/detectron2\r\nCompiler                GCC 5.4\r\nCUDA compiler           CUDA 10.0\r\ndetectron2 arch flags   6.1\r\nDETECTRON2_ENV_MODULE   <not set>\r\nPyTorch                 1.6.0+cu101 @/home/user/miniconda3/envs/detectron2/lib/python3.6/site-packages/torch\r\nPyTorch debug build     False\r\nGPU available           True\r\nGPU 0,1                 TITAN Xp (arch=6.1)\r\nCUDA_HOME               /usr/local/cuda-10.0\r\nPillow                  8.0.1\r\ntorchvision             0.7.0+cu101 @/home/user/miniconda3/envs/detectron2/lib/python3.6/site-packages/torchvision\r\ntorchvision arch flags  3.5, 5.0, 6.0, 7.0, 7.5\r\nfvcore                  0.1.2.post20201030\r\ncv2                     4.4.0\r\n----------------------  ----------------------------------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - C++ Version: 201402\r\n  - Intel(R) Math Kernel Library Version 2019.0.5 Product Build 20190808 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v1.5.0 (Git Hash e2ac1fac44c5078ca927cb9b90e1b3066a0b2ed0)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CPU capability usage: AVX2\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.2\r\n  - Build settings: BLAS=MKL, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -DUSE_PTHREADPOOL -fopenmp -DNDEBUG -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -DUSE_XNNPACK -DUSE_VULKAN_WRAPPER -O2 -fPIC -Wno-narrowing -Wall -Wextra -Werror=return-type -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-unused-local-typedefs -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Werror=format -Wno-stringop-overflow, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF,\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2236/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/2154", "id": 725853386, "node_id": "MDU6SXNzdWU3MjU4NTMzODY=", "number": 2154, "title": "Incorrect results from pairwise_iou_rotated", "user": {"login": "qiank10", "id": 1515092, "node_id": "MDQ6VXNlcjE1MTUwOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1515092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiank10", "html_url": "https://github.com/qiank10", "followers_url": "https://api.github.com/users/qiank10/followers", "following_url": "https://api.github.com/users/qiank10/following{/other_user}", "gists_url": "https://api.github.com/users/qiank10/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiank10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiank10/subscriptions", "organizations_url": "https://api.github.com/users/qiank10/orgs", "repos_url": "https://api.github.com/users/qiank10/repos", "events_url": "https://api.github.com/users/qiank10/events{/privacy}", "received_events_url": "https://api.github.com/users/qiank10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-20T18:43:47Z", "updated_at": "2020-10-24T09:32:41Z", "closed_at": "2020-10-24T09:32:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the \ud83d\udc1b Bug:\r\n\r\n1. what code you wrote\r\n```\r\nfrom detectron2.structures import BoxMode, RotatedBoxes, pairwise_iou_rotated\r\nimport torch\r\ndt1 = RotatedBoxes(torch.tensor([[296.6620178222656, 458.73883056640625, 23.515729904174805, 47.677001953125, 0.08795166015625]]))\r\ngt1 = RotatedBoxes(torch.tensor([[296.66201, 458.73882000000003, 23.51573, 47.67702, 0.087951]]))\r\niou1 = pairwise_iou_rotated(dt1, gt1)\r\nprint(\"iou1: %f\" % iou1)\r\n\r\ndt2 = RotatedBoxes(torch.tensor([[296.6620178222656, 458.73883056640625, 23.515729904174805, 47.677001953125, 0.08795166015625]]))\r\ngt2 = RotatedBoxes(torch.tensor([[296.66201, 458.73882000000003, 23.51573, 47.6770, 0.087951]]))\r\niou2 = pairwise_iou_rotated(dt2, gt2)\r\nprint(\"iou2: %f\" % iou2)\r\n```\r\n3. what you observed (including __full logs__):\r\n```\r\niou1: 0.600224\r\niou2: 1.000000\r\n```\r\n\r\n## Expected behavior:\r\n\r\nBoth iou1 and iou2 should be 1.\r\n\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```\r\n----------------------  ----------------------------------------------------------------------\r\nsys.platform            linux\r\nPython                  3.7.9 (default, Aug 31 2020, 12:42:55) [GCC 7.3.0]\r\nnumpy                   1.19.1\r\ndetectron2              0.2.1 @/home/qiank10/Project/detectron2/detectron2\r\nCompiler                GCC 7.4\r\nCUDA compiler           CUDA 10.2\r\ndetectron2 arch flags   7.5\r\nDETECTRON2_ENV_MODULE   <not set>\r\nPyTorch                 1.4.0 @/home/qiank10/anaconda3/lib/python3.7/site-packages/torch\r\nPyTorch debug build     False\r\nGPU available           True\r\nGPU 0,1,2,3             GeForce RTX 2080 Ti (arch=7.5)\r\nCUDA_HOME               /usr/local/cuda-10.2\r\nPillow                  7.2.0\r\ntorchvision             0.5.0 @/home/qiank10/anaconda3/lib/python3.7/site-packages/torchvision\r\ntorchvision arch flags  3.5, 5.0, 6.0, 7.0, 7.5\r\nfvcore                  0.1.2.post20201016\r\ncv2                     4.2.0\r\n----------------------  ----------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.4 Product Build 20190411 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.21.1 (Git Hash 7d2fd500bc78936d1d648ca713b901012f470dbc)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/2154/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/1516", "id": 629109222, "node_id": "MDU6SXNzdWU2MjkxMDkyMjI=", "number": 1516, "title": "Missing \"permute_all_cls_and_box_to_N_HWA_K_and_concat\" function in Detectron2 v0.1.3.", "user": {"login": "Bamil", "id": 63237627, "node_id": "MDQ6VXNlcjYzMjM3NjI3", "avatar_url": "https://avatars.githubusercontent.com/u/63237627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bamil", "html_url": "https://github.com/Bamil", "followers_url": "https://api.github.com/users/Bamil/followers", "following_url": "https://api.github.com/users/Bamil/following{/other_user}", "gists_url": "https://api.github.com/users/Bamil/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bamil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bamil/subscriptions", "organizations_url": "https://api.github.com/users/Bamil/orgs", "repos_url": "https://api.github.com/users/Bamil/repos", "events_url": "https://api.github.com/users/Bamil/events{/privacy}", "received_events_url": "https://api.github.com/users/Bamil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-02T11:01:18Z", "updated_at": "2020-06-02T23:13:55Z", "closed_at": "2020-06-02T23:13:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey,\r\n\r\nnot sure if the mistake is on my side, but I downloaded v0.1.3 and had an import error in detectron2/projects/TensorMask/tensormask/arch.py. \r\nThere is an import:\r\n\r\nfrom detectron2.modeling.meta_arch.retinanet import (\r\n    permute_all_cls_and_box_to_N_HWA_K_and_concat,\r\n    permute_to_N_HWA_K,\r\n)\r\n\r\nbut \"permute_all_cls_and_box_to_N_HWA_K_and_concat\" function is not defined in retinanet.py.\r\n\r\nCopy&Paste the function from v0.1.2 worked for my application.\r\n\r\nRegards\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1516/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/1400", "id": 616191340, "node_id": "MDU6SXNzdWU2MTYxOTEzNDA=", "number": 1400, "title": "PointRend Training: MODEL.ROI_BOX_HEAD.TRAIN_ON_PRED_BOXES", "user": {"login": "YiwuZhong", "id": 34467067, "node_id": "MDQ6VXNlcjM0NDY3MDY3", "avatar_url": "https://avatars.githubusercontent.com/u/34467067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YiwuZhong", "html_url": "https://github.com/YiwuZhong", "followers_url": "https://api.github.com/users/YiwuZhong/followers", "following_url": "https://api.github.com/users/YiwuZhong/following{/other_user}", "gists_url": "https://api.github.com/users/YiwuZhong/gists{/gist_id}", "starred_url": "https://api.github.com/users/YiwuZhong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YiwuZhong/subscriptions", "organizations_url": "https://api.github.com/users/YiwuZhong/orgs", "repos_url": "https://api.github.com/users/YiwuZhong/repos", "events_url": "https://api.github.com/users/YiwuZhong/events{/privacy}", "received_events_url": "https://api.github.com/users/YiwuZhong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-11T21:12:26Z", "updated_at": "2020-05-12T04:18:18Z", "closed_at": "2020-05-12T03:31:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I trained the default PointRend model on my custom dataset for instance segmentation. \r\n\r\nThe default setting is `MODEL.ROI_BOX_HEAD.TRAIN_ON_PRED_BOXES = True`. Using the default setting, I got a low box mAP (e.g. 44.0). By only changing it to `MODEL.ROI_BOX_HEAD.TRAIN_ON_PRED_BOXES = False`, the box mAP increased quite a lot (e.g. 54.6).\r\n\r\nIt would be great if anyone can help me with this issue: why the setting  `MODEL.ROI_BOX_HEAD.TRAIN_ON_PRED_BOXES = True` will affect the box localization a lot?\r\n\r\nBest regards,\r\nYiwu\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/1207", "id": 599183550, "node_id": "MDU6SXNzdWU1OTkxODM1NTA=", "number": 1207, "title": "Incorrect output from pairwise_iou_rotated", "user": {"login": "alekseynp", "id": 4382608, "node_id": "MDQ6VXNlcjQzODI2MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/4382608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alekseynp", "html_url": "https://github.com/alekseynp", "followers_url": "https://api.github.com/users/alekseynp/followers", "following_url": "https://api.github.com/users/alekseynp/following{/other_user}", "gists_url": "https://api.github.com/users/alekseynp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alekseynp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alekseynp/subscriptions", "organizations_url": "https://api.github.com/users/alekseynp/orgs", "repos_url": "https://api.github.com/users/alekseynp/repos", "events_url": "https://api.github.com/users/alekseynp/events{/privacy}", "received_events_url": "https://api.github.com/users/alekseynp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-13T22:55:59Z", "updated_at": "2020-04-15T21:03:03Z", "closed_at": "2020-04-15T21:03:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I believe I have found a bug in `pairwise_iou_rotated`. Of course it could be that the visualizer is wrong, but I don't think that's the case.\r\n\r\n## Instructions To Reproduce the Issue:\r\n```python\r\nimport cv2\r\nimport numpy as np\r\nimport torch\r\n\r\nfrom detectron2.structures import Instances, pairwise_iou_rotated, RotatedBoxes\r\nfrom detectron2.utils.visualizer import Visualizer\r\n\r\nboxes1 = torch.tensor([[160.0, 153.0, 230.0,  23.0, -37.0]], device='cuda')\r\nboxes2 = torch.tensor([[190.0, 127.0,  80.0,  21.0, -46.0]], device='cuda')\r\nprint(pairwise_iou_rotated(RotatedBoxes(boxes1), RotatedBoxes(boxes2)))\r\n\r\ninstances = Instances((300, 300))\r\ninstances.pred_boxes = torch.cat((boxes1, boxes2)).cpu()\r\ninstances.scores = torch.tensor([1.0, 1.0])\r\ninstances.pred_classes = torch.tensor([0, 0])\r\n\r\nviz = Visualizer(np.full((300, 300, 3), 127, dtype=np.uint8), {'thing_classes': ['thing']})\r\nimage = viz.draw_instance_predictions(instances).get_image()[:, :, ::-1]\r\ncv2.imwrite('out.png', image)\r\n```\r\n## Behavior:\r\n```python\r\ntensor([[0.2655]], device='cuda:0')\r\n```\r\n![out](https://user-images.githubusercontent.com/4382608/79168106-e85d7d80-7d9d-11ea-9592-f82d95769408.png)\r\n\r\n## Expected behavior:\r\n```python\r\ntensor([[0.0]], device='cuda:0')\r\n```\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```bash\r\n------------------------  --------------------------------------------------------------------------\r\nsys.platform              linux\r\nPython                    3.7.7 (default, Mar 26 2020, 15:48:22) [GCC 7.3.0]\r\nnumpy                     1.18.1\r\ndetectron2                0.1.1 @zzzzzzz/detectron2/detectron2\r\ndetectron2 compiler       GCC 7.5\r\ndetectron2 CUDA compiler  10.1\r\ndetectron2 arch flags     sm_75\r\nDETECTRON2_ENV_MODULE     <not set>\r\nPyTorch                   1.4.0 @zzzzzzz/lib/python3.7/site-packages/torch\r\nPyTorch debug build       False\r\nCUDA available            True\r\nGPU 0                     GeForce RTX 2080 Ti\r\nCUDA_HOME                 /usr/local/cuda\r\nNVCC                      Cuda compilation tools, release 10.1, V10.1.243\r\nPillow                    7.0.0\r\ntorchvision               0.5.0 @zzzzzzz/lib/python3.7/site-packages/torchvision\r\ntorchvision arch flags    sm_35, sm_50, sm_60, sm_70, sm_75\r\ncv2                       4.2.0\r\n------------------------  --------------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2020.0.0 Product Build 20191122 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.21.1 (Git Hash 7d2fd500bc78936d1d648ca713b901012f470dbc)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/1132", "id": 592077324, "node_id": "MDU6SXNzdWU1OTIwNzczMjQ=", "number": 1132, "title": "Unable to run inference using a Cascade RCNN model", "user": {"login": "ananthu-aniraj", "id": 50333505, "node_id": "MDQ6VXNlcjUwMzMzNTA1", "avatar_url": "https://avatars.githubusercontent.com/u/50333505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ananthu-aniraj", "html_url": "https://github.com/ananthu-aniraj", "followers_url": "https://api.github.com/users/ananthu-aniraj/followers", "following_url": "https://api.github.com/users/ananthu-aniraj/following{/other_user}", "gists_url": "https://api.github.com/users/ananthu-aniraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/ananthu-aniraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ananthu-aniraj/subscriptions", "organizations_url": "https://api.github.com/users/ananthu-aniraj/orgs", "repos_url": "https://api.github.com/users/ananthu-aniraj/repos", "events_url": "https://api.github.com/users/ananthu-aniraj/events{/privacy}", "received_events_url": "https://api.github.com/users/ananthu-aniraj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-01T17:20:50Z", "updated_at": "2020-11-16T06:01:03Z", "closed_at": "2020-04-01T20:37:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the Issue:\r\n\r\n1. what changes you made (`git diff`) or what code you wrote\r\n```\r\nNo changes were made to the code in the repository\r\n```\r\n2. what exact command you run:\r\n```\r\ncfg = get_cfg()\r\ncfg.merge_from_file(model_zoo.get_config_file(\"Misc/cascade_mask_rcnn_X_152_32x8d_FPN_IN5k_gn_dconv.yaml\"))\r\npredictor = DefaultPredictor(cfg)\r\n\r\nfor image_file in tqdm(image_files_part,desc = \"Running inference on data-set\"):\r\n    \r\n    im = cv2.imread(image_file)\r\n    if im.size !=0:\r\n        outputs = predictor(im)\r\n\r\n\r\n```\r\n3. what you observed (including __full logs__):\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-21-0e742cc600db> in <module>\r\n     19         #plt.figure(figsize =(20,10))\r\n     20         #print(i)\r\n---> 21         outputs = predictor(im)\r\n     22         v = Visualizer(im[:,:,::-1], MetadataCatalog.get(cfg.DATASETS.TRAIN[0]), scale=1.2, \r\n     23                        instance_mode=ColorMode.IMAGE_BW)   # remove the colors of unsegmented pixels\r\n\r\n~/mask-rcnn git code/detectron2/detectron2/engine/defaults.py in __call__(self, original_image)\r\n    195 \r\n    196             inputs = {\"image\": image, \"height\": height, \"width\": width}\r\n--> 197             predictions = self.model([inputs])[0]\r\n    198             return predictions\r\n    199 \r\n\r\n~/anaconda3/envs/test_env/lib/python3.6/site-packages/torch/nn/modules/module.py in __call__(self, *input, **kwargs)\r\n    530             result = self._slow_forward(*input, **kwargs)\r\n    531         else:\r\n--> 532             result = self.forward(*input, **kwargs)\r\n    533         for hook in self._forward_hooks.values():\r\n    534             hook_result = hook(self, input, result)\r\n\r\n~/mask-rcnn git code/detectron2/detectron2/modeling/meta_arch/rcnn.py in forward(self, batched_inputs)\r\n    106         \"\"\"\r\n    107         if not self.training:\r\n--> 108             return self.inference(batched_inputs)\r\n    109 \r\n    110         images = self.preprocess_image(batched_inputs)\r\n\r\n~/mask-rcnn git code/detectron2/detectron2/modeling/meta_arch/rcnn.py in inference(self, batched_inputs, detected_instances, do_postprocess)\r\n    168                 proposals = [x[\"proposals\"].to(self.device) for x in batched_inputs]\r\n    169 \r\n--> 170             results, _ = self.roi_heads(images, features, proposals, None)\r\n    171         else:\r\n    172             detected_instances = [x.to(self.device) for x in detected_instances]\r\n\r\n~/anaconda3/envs/test_env/lib/python3.6/site-packages/torch/nn/modules/module.py in __call__(self, *input, **kwargs)\r\n    530             result = self._slow_forward(*input, **kwargs)\r\n    531         else:\r\n--> 532             result = self.forward(*input, **kwargs)\r\n    533         for hook in self._forward_hooks.values():\r\n    534             hook_result = hook(self, input, result)\r\n\r\n~/mask-rcnn git code/detectron2/detectron2/modeling/roi_heads/cascade_rcnn.py in forward(***failed resolving arguments***)\r\n     94             return proposals, losses\r\n     95         else:\r\n---> 96             pred_instances = self._forward_box(features, proposals)\r\n     97             pred_instances = self.forward_with_given_boxes(features, pred_instances)\r\n     98             return pred_instances, {}\r\n\r\n~/mask-rcnn git code/detectron2/detectron2/modeling/roi_heads/cascade_rcnn.py in _forward_box(self, features, proposals, targets)\r\n    147                 scores,\r\n    148                 image_sizes,\r\n--> 149                 self.test_score_thresh,\r\n    150                 self.test_nms_thresh,\r\n    151                 self.test_detections_per_img,\r\n\r\n~/anaconda3/envs/test_env/lib/python3.6/site-packages/torch/nn/modules/module.py in __getattr__(self, name)\r\n    574                 return modules[name]\r\n    575         raise AttributeError(\"'{}' object has no attribute '{}'\".format(\r\n--> 576             type(self).__name__, name))\r\n    577 \r\n    578     def __setattr__(self, name, value):\r\n\r\nAttributeError: 'CascadeROIHeads' object has no attribute 'test_score_thresh'\r\n```\r\n4. please also simplify the steps as much as possible so they do not require additional resources to\r\n\t run, such as a private dataset.\r\n\r\nI am unable to run inference on a standard data-set using a Mask RCNN model using a Cascade RCNN box head. This code was working previously but stopped working with the latest commit with the above error.\r\n\r\n\r\n## Expected behavior:\r\n\r\nIt was expected that 'predictor' object would run inference on the image using the loaded model as is standard behaviour.\r\n\r\n\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```\r\n------------------------  -----------------------------------------------------------------------------------\r\nsys.platform              linux\r\nPython                    3.6.7 | packaged by conda-forge | (default, Feb 28 2019, 09:07:38) [GCC 7.3.0]\r\nnumpy                     1.18.1\r\ndetectron2                0.1.1 @/home/kushal/mask-rcnn git code/detectron2/detectron2\r\ndetectron2 compiler       GCC 7.3\r\ndetectron2 CUDA compiler  10.0\r\ndetectron2 arch flags     sm_61\r\nDETECTRON2_ENV_MODULE     <not set>\r\nPyTorch                   1.4.0 @/home/kushal/anaconda3/envs/test_env/lib/python3.6/site-packages/torch\r\nPyTorch debug build       False\r\nCUDA available            True\r\nGPU 0                     Quadro P3200\r\nCUDA_HOME                 /usr/local/cuda\r\nNVCC                      Cuda compilation tools, release 10.0, V10.0.130\r\nPillow                    6.2.2\r\ntorchvision               0.5.0 @/home/kushal/anaconda3/envs/test_env/lib/python3.6/site-packages/torchvision\r\ntorchvision arch flags    sm_35, sm_50, sm_60, sm_70, sm_75\r\ncv2                       4.1.2\r\n------------------------  -----------------------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.5 Product Build 20190808 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.21.1 (Git Hash 7d2fd500bc78936d1d648ca713b901012f470dbc)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.0\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1132/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/1064", "id": 584122497, "node_id": "MDU6SXNzdWU1ODQxMjI0OTc=", "number": 1064, "title": "Not able to index Instances with Int", "user": {"login": "protossw512", "id": 18194209, "node_id": "MDQ6VXNlcjE4MTk0MjA5", "avatar_url": "https://avatars.githubusercontent.com/u/18194209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protossw512", "html_url": "https://github.com/protossw512", "followers_url": "https://api.github.com/users/protossw512/followers", "following_url": "https://api.github.com/users/protossw512/following{/other_user}", "gists_url": "https://api.github.com/users/protossw512/gists{/gist_id}", "starred_url": "https://api.github.com/users/protossw512/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protossw512/subscriptions", "organizations_url": "https://api.github.com/users/protossw512/orgs", "repos_url": "https://api.github.com/users/protossw512/repos", "events_url": "https://api.github.com/users/protossw512/events{/privacy}", "received_events_url": "https://api.github.com/users/protossw512/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-19T02:38:38Z", "updated_at": "2020-03-19T17:44:40Z", "closed_at": "2020-03-19T17:44:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## T.L.T.R\r\nThe length check in [instances.py](https://github.com/facebookresearch/detectron2/blob/master/detectron2/structures/instances.py#L71) causes problem when passes a scalar tensor (such as class id or score) in the ['\\_\\_getitem\\_\\_'](https://github.com/facebookresearch/detectron2/blob/master/detectron2/structures/instances.py#L116) method.\r\n\r\nI have submitted a [pull request](https://github.com/facebookresearch/detectron2/pull/1065) to fix this issue if we consider `Instances` can be indexed with integers.\r\nThe basic idea is to convert an integer index to slice, to avoid type and shape check in `set` function.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n1. what changes you made (`git diff`) or what code you wrote\r\nNo changes are made, cloned from the master branch\r\n\r\n2. how to reproduce this bug:\r\nTo reproduce this bug, simply run the following command under detectron2 repo directory.:\r\n```\r\npython tools/eval_image.py  --config-file configs/Detectron1-Comparisons/mask_rcnn_R_50_FPN_noaug_1x.yaml\r\n```\r\nWhere the content of `eval_image.py` is:\r\n```python\r\n#!/usr/bin/env python\r\n\r\nimport urllib\r\nimport numpy as np\r\nimport cv2\r\nimport torch\r\n\r\nfrom detectron2.config import get_cfg\r\nfrom detectron2.engine import DefaultPredictor, default_argument_parser, default_setup\r\n\r\n\r\ndef setup(args):\r\n    \"\"\"\r\n    Create configs and perform basic setups.\r\n    \"\"\"\r\n    cfg = get_cfg()\r\n    cfg.merge_from_file(args.config_file)\r\n    cfg.merge_from_list(args.opts)\r\n    cfg.freeze()\r\n    default_setup(cfg, args)\r\n    return cfg\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    args = default_argument_parser().parse_args()\r\n    print(\"Command Line Args:\", args)\r\n    cfg = setup(args)\r\n\r\n    model = DefaultPredictor(cfg)\r\n    url = \"http://images.cocodataset.org/val2017/000000397133.jpg\"\r\n    resp = urllib.request.urlopen(url)\r\n    image = np.asarray(bytearray(resp.read()), dtype=\"uint8\")\r\n    image = cv2.imdecode(image, cv2.IMREAD_COLOR)\r\n    res = model(image)\r\n    instances = res['instances']\r\n    instances[0]\r\n```\r\nYou will get a type erro message:\r\n```shell\r\nTraceback (most recent call last):\r\n  File \"tools/eval_image.py\", line 36, in <module>\r\n    instances[0]\r\n  File \"/home/wangxiny/Documents/detectron2_pull/detectron2/structures/instances.py\", line 137, in __getitem__\r\n    ret.set(k, v[item])\r\n  File \"/home/wangxiny/Documents/detectron2_pull/detectron2/structures/instances.py\", line 71, in set\r\n    data_len = len(value)\r\n  File \"/home/wangxiny/Python36_detectron2/lib/python3.6/site-packages/torch/tensor.py\", line 445, in __len__\r\n    raise TypeError(\"len() of a 0-d tensor\")\r\nTypeError: len() of a 0-d tensor\r\n```\r\nThis should be a bug given that `Instances` class takes integer for indexing (In the line 119 of `detectron2/detectron2/structures/instances.py` , we have ` def __getitem__(self, item: Union[int, slice, torch.BoolTensor]) -> \"Instances\":` )\r\n\r\n## Expected behavior:\r\n\r\nAn object of 'Instances' should be returned from the source `Instances` object with a given index.\r\n\r\n## Environment:\r\n\r\nProvide your environment information using the following command:\r\n```\r\n------------------------  ---------------------------------------------------------------------------------\r\nsys.platform              linux\r\nPython                    3.6.9 (default, Jul  3 2019, 15:36:16) [GCC 5.4.0 20160609]\r\nnumpy                     1.17.2\r\ndetectron2                0.1.1 @/xxx/Documents/detectron2_pull/detectron2\r\ndetectron2 compiler       GCC 5.4\r\ndetectron2 CUDA compiler  10.0\r\ndetectron2 arch flags     sm_61\r\nDETECTRON2_ENV_MODULE     <not set>\r\nPyTorch                   1.4.0 @/xxx/Python36_detectron2/lib/python3.6/site-packages/torch\r\nPyTorch debug build       False\r\nCUDA available            True\r\nGPU 0,1,2                 GeForce GTX 1080 Ti\r\nCUDA_HOME                 /usr/local/cuda\r\nNVCC                      Cuda compilation tools, release 10.0, V10.0.130\r\nPillow                    4.3.0\r\ntorchvision               0.5.0 @/xxx/Python36_detectron2/lib/python3.6/site-packages/torchvision\r\ntorchvision arch flags    sm_35, sm_50, sm_60, sm_70, sm_75\r\ncv2                       4.1.1\r\n------------------------  ---------------------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.4 Product Build 20190411 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.21.1 (Git Hash 7d2fd500bc78936d1d648ca713b901012f470dbc)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=ON, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/1064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/909", "id": 568056165, "node_id": "MDU6SXNzdWU1NjgwNTYxNjU=", "number": 909, "title": "STRIDE_IN_1x1 is not set in a right way?", "user": {"login": "FateScript", "id": 12154809, "node_id": "MDQ6VXNlcjEyMTU0ODA5", "avatar_url": "https://avatars.githubusercontent.com/u/12154809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FateScript", "html_url": "https://github.com/FateScript", "followers_url": "https://api.github.com/users/FateScript/followers", "following_url": "https://api.github.com/users/FateScript/following{/other_user}", "gists_url": "https://api.github.com/users/FateScript/gists{/gist_id}", "starred_url": "https://api.github.com/users/FateScript/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FateScript/subscriptions", "organizations_url": "https://api.github.com/users/FateScript/orgs", "repos_url": "https://api.github.com/users/FateScript/repos", "events_url": "https://api.github.com/users/FateScript/events{/privacy}", "received_events_url": "https://api.github.com/users/FateScript/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T05:13:02Z", "updated_at": "2020-02-23T03:36:29Z", "closed_at": "2020-02-23T03:36:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Expected behavior:\r\n\r\nHi, I am using your sync-bn and I find something strange: in your norm-related yaml files(for example, [this one](https://github.com/facebookresearch/detectron2/blob/master/configs/Misc/mask_rcnn_R_50_FPN_3x_syncbn.yaml)), STRIDE_IN_1x1 is set to False, but False is used for non-MSRA pretrained model.   \r\nI set it to True and trained a 1x maskrcnn model, actually it got a higher point.  \r\nIs there anything wrong in your setting?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/909/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/856", "id": 563961645, "node_id": "MDU6SXNzdWU1NjM5NjE2NDU=", "number": 856, "title": "AttributeError: 'PolygonMasks' object has no attribute 'tensor'", "user": {"login": "TengFeiHan0", "id": 38068286, "node_id": "MDQ6VXNlcjM4MDY4Mjg2", "avatar_url": "https://avatars.githubusercontent.com/u/38068286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TengFeiHan0", "html_url": "https://github.com/TengFeiHan0", "followers_url": "https://api.github.com/users/TengFeiHan0/followers", "following_url": "https://api.github.com/users/TengFeiHan0/following{/other_user}", "gists_url": "https://api.github.com/users/TengFeiHan0/gists{/gist_id}", "starred_url": "https://api.github.com/users/TengFeiHan0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TengFeiHan0/subscriptions", "organizations_url": "https://api.github.com/users/TengFeiHan0/orgs", "repos_url": "https://api.github.com/users/TengFeiHan0/repos", "events_url": "https://api.github.com/users/TengFeiHan0/events{/privacy}", "received_events_url": "https://api.github.com/users/TengFeiHan0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-12T12:17:33Z", "updated_at": "2020-02-14T06:09:00Z", "closed_at": "2020-02-13T22:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "when excuting this below command,\r\n\r\n```\r\nmasks_ori = targets_per_im.gt_masks.device(locations.device)\r\nmasks_ori = masks_ori.permute(1, 2, 0) # h, w, n\r\n\r\n```\r\nI got an error,\r\n\r\n```\r\nFile detectron2/detectron2/structures/masks.py\", line 279, in device\r\n    return self.tensor.device\r\nAttributeError: 'PolygonMasks' object has no attribute 'tensor'\r\n```\r\nthen I tried to use another function\r\n`masks_ori = targets_per_im.gt_masks.to(device=locations.device)`\r\nbut it returns a different problem when running this line,` masks_ori = masks_ori.permute(1, 2, 0) # h, w, n`\r\n`AttributeError: 'PolygonMasks' object has no attribute 'permute'`\r\nIt seems like our masks_ori is not a tensor. So how to transform a polygonMasks object into a tensor? thank you in advance.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/642", "id": 546194737, "node_id": "MDU6SXNzdWU1NDYxOTQ3Mzc=", "number": 642, "title": "[baseline] [reproducibility] Problem to reproduce the baseline in Model Zoo ", "user": {"login": "ZekunZh", "id": 16140400, "node_id": "MDQ6VXNlcjE2MTQwNDAw", "avatar_url": "https://avatars.githubusercontent.com/u/16140400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZekunZh", "html_url": "https://github.com/ZekunZh", "followers_url": "https://api.github.com/users/ZekunZh/followers", "following_url": "https://api.github.com/users/ZekunZh/following{/other_user}", "gists_url": "https://api.github.com/users/ZekunZh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZekunZh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZekunZh/subscriptions", "organizations_url": "https://api.github.com/users/ZekunZh/orgs", "repos_url": "https://api.github.com/users/ZekunZh/repos", "events_url": "https://api.github.com/users/ZekunZh/events{/privacy}", "received_events_url": "https://api.github.com/users/ZekunZh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-07T10:09:57Z", "updated_at": "2020-01-14T17:34:54Z", "closed_at": "2020-01-07T10:16:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI have tried to reproduce the Faster-RCNN baseline using [R50-FPN_1x](https://github.com/facebookresearch/detectron2/blob/master/MODEL_ZOO.md#faster-r-cnn). However, there's a **drop of around 4-5 points** for the box AP, compared to the score **37.9** in Model Zoo. I would really appreciate it if anyone could give me some insights about what might have gone wrong ^ ^\r\nMy result:\r\n```\r\nCOCO Evaluation results for bbox:\r\n|   AP   |  AP50  |  AP75  |  APs   |  APm   |  APl   |\r\n|:------:|:------:|:------:|:------:|:------:|:------:|\r\n| 33.551 | 53.341 | 35.969 | 18.661 | 36.469 | 43.063 |\r\n```\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n1. what changes I made (`git diff`) \r\nThe code version I used is [e74a00c](https://github.com/facebookresearch/detectron2/commit/e74a00c97069dd722007fa5bdc5f1c820a4e97a1) of Dec 26, 2019.\r\nNo change has been made except for minor changements to run the code on AzureML.\r\n\r\n2. what exact command I run:\r\n```\r\npython tools/train_net.py --num-gpus 4 \\\r\n\t--config-file configs/COCO-Detection/faster_rcnn_R_50_FPN_1x.yaml\r\n```\r\n\r\n3. what I observed (including the full logs):\r\nFinal result after 90,000 iterations:\r\n```\r\n\u001b[32m[01/05 18:28:18 d2.evaluation.coco_evaluation]: \u001b[0mEvaluation results for bbox: \r\n|   AP   |  AP50  |  AP75  |  APs   |  APm   |  APl   |\r\n|:------:|:------:|:------:|:------:|:------:|:------:|\r\n| 33.551 | 53.341 | 35.969 | 18.661 | 36.469 | 43.063 |\r\n```\r\nI also compared the training loss of my experiment azureml (using 4 K80) with the [official metrics](https://dl.fbaipublicfiles.com/detectron2/COCO-Detection/faster_rcnn_R_50_FPN_1x/137257794/metrics.json)\r\n![total_loss](https://user-images.githubusercontent.com/16140400/71884790-43e1f480-3139-11ea-917f-8f54db470d68.png)\r\n![loss_cls](https://user-images.githubusercontent.com/16140400/71884964-9e7b5080-3139-11ea-9050-0a2952a52690.png)\r\n![loss_reg](https://user-images.githubusercontent.com/16140400/71884966-a1764100-3139-11ea-8a0a-f7808ec6a08e.png)\r\n\r\nThe full log is here: [loss-4gpu.log](https://github.com/facebookresearch/detectron2/files/4029887/loss-4gpu.log)\r\n\r\n## What I tried to understand why\r\n1. Investigation on influence of GPU numbers\r\nAt first I thought that it was because of the batch size had changed when changing `num-gpus` from 8 to 4. However the full config in the log indicates the same batch size (`IMS_PER_BATCH: 16`). \r\nSecondly, since the only difference is the number of GPUs (maybe I am wrong), I re-ran the same experiment with different number of GPUs for 10k iterations and compared with the [official metrics](https://dl.fbaipublicfiles.com/detectron2/COCO-Detection/faster_rcnn_R_50_FPN_1x/137257794/metrics.json).\r\n![total_loss_2gpu_4gpu_8gpu_10k](https://user-images.githubusercontent.com/16140400/71885898-96241500-313b-11ea-9bb2-00094cc223b0.png)\r\nThe loss curve shows that my problem is independent of GPU numbers.\r\n\r\n2. Investigation on other baselines\r\nLast but not least, I tried another baseline: [mask_rcnn_R_50_FPN_1x of COCO Instance Segmentation Baselines with Mask R-CNN](https://github.com/facebookresearch/detectron2/blob/master/MODEL_ZOO.md#coco-instance-segmentation-baselines-with-mask-r-cnn). And the similar performance drop happened again, around **4 AP point drop** compared to the reference (38.6 box AP and 35.2 mask AP) \r\n\r\nMy result: \r\n```\r\nCOCO Evaluation results for bbox:\r\n|   AP   |  AP50  |  AP75  |  APs   |  APm   |  APl   |\r\n|:------:|:------:|:------:|:------:|:------:|:------:|\r\n| 34.483 | 54.024 | 37.521 | 19.586 | 36.835 | 44.503 |\r\n\r\nCOCO Evaluation results for segm:\r\n|   AP   |  AP50  |  AP75  |  APs   |  APm   |  APl   |\r\n|:------:|:------:|:------:|:------:|:------:|:------:|\r\n| 31.698 | 51.398 | 33.640 | 14.372 | 33.611 | 45.871 |\r\n```\r\nMy log: [loss-4gpu-mrcnn.txt](https://github.com/facebookresearch/detectron2/files/4030028/loss-4gpu-mrcnn.txt)\r\n\r\n\r\n## Environment:\r\n```\r\n(py36) root@e07abda472cc:/ai-detectron2# python -m detectron2.utils.collect_env\r\n------------------------  -------------------------------------------------------------------\r\nsys.platform              linux\r\nPython                    3.6.9 |Anaconda, Inc.| (default, Jul 30 2019, 19:07:31) [GCC 7.3.0]\r\nNumpy                     1.15.0\r\nDetectron2 Compiler       GCC 5.4\r\nDetectron2 CUDA Compiler  10.1\r\nDETECTRON2_ENV_MODULE     <not set>\r\nPyTorch                   1.3.1\r\nPyTorch Debug Build       False\r\ntorchvision               0.4.2\r\nCUDA available            True\r\nGPU 0,1                   Tesla K80\r\nCUDA_HOME                 /usr/local/cuda\r\nNVCC                      Cuda compilation tools, release 10.1, V10.1.243\r\nPillow                    5.2.0\r\ncv2                       4.1.0\r\n------------------------  -------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.4 Product Build 20190411 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.20.5 (Git Hash 0125f28c61c1f822fd48570b4c1066f96fcb9b2e)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=True, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/334", "id": 524267997, "node_id": "MDU6SXNzdWU1MjQyNjc5OTc=", "number": 334, "title": "densepose eval metrics differ on gpu and cpu", "user": {"login": "rakhimovv", "id": 14886513, "node_id": "MDQ6VXNlcjE0ODg2NTEz", "avatar_url": "https://avatars.githubusercontent.com/u/14886513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rakhimovv", "html_url": "https://github.com/rakhimovv", "followers_url": "https://api.github.com/users/rakhimovv/followers", "following_url": "https://api.github.com/users/rakhimovv/following{/other_user}", "gists_url": "https://api.github.com/users/rakhimovv/gists{/gist_id}", "starred_url": "https://api.github.com/users/rakhimovv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rakhimovv/subscriptions", "organizations_url": "https://api.github.com/users/rakhimovv/orgs", "repos_url": "https://api.github.com/users/rakhimovv/repos", "events_url": "https://api.github.com/users/rakhimovv/events{/privacy}", "received_events_url": "https://api.github.com/users/rakhimovv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-18T10:18:04Z", "updated_at": "2019-11-23T15:23:03Z", "closed_at": "2019-11-23T15:23:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Evaluation with pretrained resnet50+fpn from MODEL ZOO for densepose task produces different densepose AP depending on which MODEL.DEVICE I select. In the mean time bbox AP are the same\r\n\r\n## How To Reproduce the Issue\r\n\r\n1. `CUDA_VISIBLE_DEVICES=2 python train_net.py --config-file configs/densepose_rcnn_R_50_FPN_s1x.yaml --eval-only --num-gpus 1 MODEL.WEIGHTS model_final_dd99d2.pkl`\r\n\r\nproduces\r\n\r\n```\r\n[11/18 10:14:33 d2.engine.defaults]: Evaluation results for densepose_coco_2014_minival in csv format:\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: Task: bbox\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: AP,AP50,AP75,APs,APm,APl\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: 57.8333,87.1848,62.8350,29.8270,56.3500,71.2617\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: Task: densepose\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: AP,AP50,AP75,APm,APl\r\n[11/18 10:14:33 d2.evaluation.testing]: copypaste: 49.8130,86.5007,51.6506,44.2049,51.0755\r\n```\r\n\r\n2. `CUDA_VISIBLE_DEVICES=2 python train_net.py --config-file configs/densepose_rcnn_R_50_FPN_s1x.yaml --eval-only --num-gpus 1 MODEL.WEIGHTS model_final_dd99d2.pkl MODEL.DEVICE cpu`\r\n\r\nproduces\r\n\r\n```\r\n[11/12 14:51:13] d2.engine.defaults INFO: Evaluation results for densepose_coco_2014_minival in csv format:\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: Task: bbox\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: AP,AP50,AP75,APs,APm,APl\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: 57.8343,87.1848,62.8350,29.8270,56.3501,71.2641\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: Task: densepose\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: AP,AP50,AP75,APm,APl\r\n[11/12 14:51:13] d2.evaluation.testing INFO: copypaste: 0.6251,1.1449,0.6186,0.0000,1.1336\r\n```\r\n\r\n\r\n\r\n\r\n## Expected behavior\r\n\r\nMODEL.DEVICE parameter in config should not affect metrics evaluated\r\n\r\n## Environment\r\n\r\n```\r\n------------------------  ------------------------------------------------------------------------------\r\nsys.platform              linux\r\nPython                    3.7.3 | packaged by conda-forge | (default, Jul  1 2019, 21:52:21) [GCC 7.3.0]\r\nNumpy                     1.17.3\r\nDetectron2 Compiler       GCC 7.4\r\nDetectron2 CUDA Compiler  10.0\r\nDETECTRON2_ENV_MODULE     <not set>\r\nPyTorch                   1.3.1\r\nPyTorch Debug Build       False\r\ntorchvision               0.4.2\r\nCUDA available            True\r\nGPU 0,1,2,3               GeForce GTX 1080 Ti\r\nCUDA_HOME                 /usr/local/cuda\r\nNVCC                      Cuda compilation tools, release 10.0, V10.0.130\r\nPillow                    6.2.1\r\ncv2                       4.1.1\r\n------------------------  ------------------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.4 Product Build 20190411 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.20.5 (Git Hash 0125f28c61c1f822fd48570b4c1066f96fcb9b2e)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.0\r\n  - NVCC architecture flags: -gencode;arch=compute_37,code=sm_37;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_37,code=compute_37\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=True, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF,\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/284", "id": 520508906, "node_id": "MDU6SXNzdWU1MjA1MDg5MDY=", "number": 284, "title": "Multi-scale testing mistakenly discards all instances of the last category.", "user": {"login": "Tete-Xiao", "id": 20379547, "node_id": "MDQ6VXNlcjIwMzc5NTQ3", "avatar_url": "https://avatars.githubusercontent.com/u/20379547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tete-Xiao", "html_url": "https://github.com/Tete-Xiao", "followers_url": "https://api.github.com/users/Tete-Xiao/followers", "following_url": "https://api.github.com/users/Tete-Xiao/following{/other_user}", "gists_url": "https://api.github.com/users/Tete-Xiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tete-Xiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tete-Xiao/subscriptions", "organizations_url": "https://api.github.com/users/Tete-Xiao/orgs", "repos_url": "https://api.github.com/users/Tete-Xiao/repos", "events_url": "https://api.github.com/users/Tete-Xiao/events{/privacy}", "received_events_url": "https://api.github.com/users/Tete-Xiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-09T20:23:46Z", "updated_at": "2019-11-10T07:24:34Z", "closed_at": "2019-11-10T07:24:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "## How To Reproduce the Issue\r\n\r\nRunning Faster RCNN with multi-scale testing.\r\n\r\n\r\n## The Problem\r\n\r\nFor Faster RCNN, `MODEL.ROI_HEADS.NUM_CLASSES` will be automatically += 1 for background class (I'm not sure for other models. I observed the Faster RCNN on COCO detection is 81 classes in the model.)\r\n\r\nHowever, when running multi-scale testing, as [_inference_one_image](https://github.com/facebookresearch/detectron2/blob/cb69ea13cd10d58eac4481c923c828b08cf71aff/detectron2/modeling/test_time_augmentation.py#L196), `num_classes` is not added by 1.\r\nThen, in [fast_rcnn_inference_single_image](https://github.com/facebookresearch/detectron2/blob/cb69ea13cd10d58eac4481c923c828b08cf71aff/detectron2/modeling/roi_heads/fast_rcnn.py#L90), the last class is discarded, as it's supposed to be the background class. But because the `num_classes` is not added by 1, it results in the lost of all instances from the last category.\r\n\r\nThe problem is especially severe when training the detector on datasets with only two or three categories.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/284/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/92", "id": 507779177, "node_id": "MDU6SXNzdWU1MDc3NzkxNzc=", "number": 92, "title": "Bug in data.transforms.transforms_gen.RandomCrop", "user": {"login": "DragonDuck", "id": 6499992, "node_id": "MDQ6VXNlcjY0OTk5OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/6499992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DragonDuck", "html_url": "https://github.com/DragonDuck", "followers_url": "https://api.github.com/users/DragonDuck/followers", "following_url": "https://api.github.com/users/DragonDuck/following{/other_user}", "gists_url": "https://api.github.com/users/DragonDuck/gists{/gist_id}", "starred_url": "https://api.github.com/users/DragonDuck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DragonDuck/subscriptions", "organizations_url": "https://api.github.com/users/DragonDuck/orgs", "repos_url": "https://api.github.com/users/DragonDuck/repos", "events_url": "https://api.github.com/users/DragonDuck/events{/privacy}", "received_events_url": "https://api.github.com/users/DragonDuck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-16T11:04:52Z", "updated_at": "2019-10-16T19:10:12Z", "closed_at": "2019-10-16T19:10:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Attempting to print a RandomCrop to the console or get a string representation thereof results in \"ValueError: Function has keyword-only parameters or annotations, use getfullargspec() API which can support them\"\r\n\r\n## To Reproduce\r\n\r\nSimple code snipped to reproduce:\r\n\r\n```python\r\nfrom detectron2.data.transforms import RandomCrop\r\nprint(RandomCrop(\"relative\", (100, 100)))\r\n```\r\n\r\nThe issue can be recreated with arbitrary (valid) arguments to RandomCrop.\r\n\r\n## Expected behavior\r\n\r\nProbably to print a summary of the object as with the other transforms.\r\n\r\n## Environment\r\n\r\n```\r\n---------------------  -------------------------------------------------------------------\r\nPython                 3.6.9 |Anaconda, Inc.| (default, Jul 30 2019, 19:07:31) [GCC 7.3.0]\r\nDetectron2 Compiler    GCC 5.4\r\nDETECTRON2_ENV_MODULE  <not set>\r\nPyTorch                1.3.0\r\nPyTorch Debug Build    False\r\nCUDA available         True\r\nGPU 0,1                Tesla P100-PCIE-16GB\r\nPillow                 6.2.0\r\ncv2                    3.4.2\r\n---------------------  -------------------------------------------------------------------\r\nPyTorch built with:\r\n  - GCC 7.3\r\n  - Intel(R) Math Kernel Library Version 2019.0.4 Product Build 20190411 for Intel(R) 64 architecture applications\r\n  - Intel(R) MKL-DNN v0.20.5 (Git Hash 0125f28c61c1f822fd48570b4c1066f96fcb9b2e)\r\n  - OpenMP 201511 (a.k.a. OpenMP 4.5)\r\n  - NNPACK is enabled\r\n  - CUDA Runtime 10.1\r\n  - NVCC architecture flags: -gencode;arch=compute_35,code=sm_35;-gencode;arch=compute_50,code=sm_50;-gencode;arch=compute_60,code=sm_60;-gencode;arch=compute_61,code=sm_61;-gencode;arch=compute_70,code=sm_70;-gencode;arch=compute_75,code=sm_75;-gencode;arch=compute_50,code=compute_50\r\n  - CuDNN 7.6.3\r\n  - Magma 2.5.1\r\n  - Build settings: BLAS=MKL, BUILD_NAMEDTENSOR=OFF, BUILD_TYPE=Release, CXX_FLAGS= -Wno-deprecated -fvisibility-inlines-hidden -fopenmp -DUSE_FBGEMM -DUSE_QNNPACK -DUSE_PYTORCH_QNNPACK -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error=deprecated-declarations -Wno-stringop-overflow -Wno-error=pedantic -Wno-error=redundant-decls -Wno-error=old-style-cast -fdiagnostics-color=always -faligned-new -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math -Wno-stringop-overflow, DISABLE_NUMA=1, PERF_WITH_AVX=1, PERF_WITH_AVX2=1, PERF_WITH_AVX512=1, USE_CUDA=True, USE_EXCEPTION_PTR=1, USE_GFLAGS=OFF, USE_GLOG=OFF, USE_MKL=ON, USE_MKLDNN=ON, USE_MPI=OFF, USE_NCCL=ON, USE_NNPACK=ON, USE_OPENMP=ON, USE_STATIC_DISPATCH=OFF, \r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/92/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56", "repository_url": "https://api.github.com/repos/facebookresearch/detectron2", "labels_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56/comments", "events_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56/events", "html_url": "https://github.com/facebookresearch/detectron2/issues/56", "id": 506533009, "node_id": "MDU6SXNzdWU1MDY1MzMwMDk=", "number": 56, "title": "how to use dockerfile", "user": {"login": "niuwenju", "id": 37408618, "node_id": "MDQ6VXNlcjM3NDA4NjE4", "avatar_url": "https://avatars.githubusercontent.com/u/37408618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niuwenju", "html_url": "https://github.com/niuwenju", "followers_url": "https://api.github.com/users/niuwenju/followers", "following_url": "https://api.github.com/users/niuwenju/following{/other_user}", "gists_url": "https://api.github.com/users/niuwenju/gists{/gist_id}", "starred_url": "https://api.github.com/users/niuwenju/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niuwenju/subscriptions", "organizations_url": "https://api.github.com/users/niuwenju/orgs", "repos_url": "https://api.github.com/users/niuwenju/repos", "events_url": "https://api.github.com/users/niuwenju/events{/privacy}", "received_events_url": "https://api.github.com/users/niuwenju/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1539587490, "node_id": "MDU6TGFiZWwxNTM5NTg3NDkw", "url": "https://api.github.com/repos/facebookresearch/detectron2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working correctly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-14T09:15:06Z", "updated_at": "2021-02-01T19:37:15Z", "closed_at": "2019-10-14T17:47:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "there has some problems when i use dockerfile to run it \r\n\r\n**AssertionError:\r\n    Found no NVIDIA driver on your system. Please check that you\r\n    have an NVIDIA GPU and installed a driver from**\r\n\r\nbut i have installed a driver,and the version is 430.26", "reactions": {"url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/detectron2/issues/56/timeline", "performed_via_github_app": null, "state_reason": "completed"}]