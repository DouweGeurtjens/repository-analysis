[{"url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019/events", "html_url": "https://github.com/python-pillow/Pillow/issues/7019", "id": 1628336162, "node_id": "I_kwDOAE7pkM5hDnAi", "number": 7019, "title": "AttributeError: module 'PIL._imaging' has no attribute 'libtiff_support_custom_tags'", "user": {"login": "Lucas-C", "id": 925560, "node_id": "MDQ6VXNlcjkyNTU2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/925560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lucas-C", "html_url": "https://github.com/Lucas-C", "followers_url": "https://api.github.com/users/Lucas-C/followers", "following_url": "https://api.github.com/users/Lucas-C/following{/other_user}", "gists_url": "https://api.github.com/users/Lucas-C/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lucas-C/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lucas-C/subscriptions", "organizations_url": "https://api.github.com/users/Lucas-C/orgs", "repos_url": "https://api.github.com/users/Lucas-C/repos", "events_url": "https://api.github.com/users/Lucas-C/events{/privacy}", "received_events_url": "https://api.github.com/users/Lucas-C/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-16T21:42:02Z", "updated_at": "2023-03-21T15:13:01Z", "closed_at": "2023-03-21T15:13:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### What did you do?\r\n```python\r\nfrom io import BytesIO\r\nfrom PIL import Image\r\nimg = Image.open(\"basi0g01.png\")\r\nimg.save(BytesIO(), format=\"TIFF\", compression=\"group4\")\r\n```\r\nImage file `basi0g01.png`: ![basi0g01](https://user-images.githubusercontent.com/925560/225758528-ad3f53a9-cd49-434c-873a-93a7d32495ca.png)\r\n\r\n### What did you expect to happen?\r\nNo error raised\r\n\r\n### What actually happened?\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"./pil_bug.py\", line 14, in <module>\r\n    img.save(BytesIO(), format=\"TIFF\", compression=\"group4\")\r\n  File \"/home/lucas_cimon/.local/share/virtualenvs/fpdf2/lib/python3.8/site-packages/PIL/Image.py\", line 2435, in save\r\n    save_handler(self, fp, filename)\r\n  File \"/home/lucas_cimon/.local/share/virtualenvs/fpdf2/lib/python3.8/site-packages/PIL/TiffImagePlugin.py\", line 1810, in _save\r\n    if not Image.core.libtiff_support_custom_tags:\r\nAttributeError: module 'PIL._imaging' has no attribute 'libtiff_support_custom_tags'\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: WSL (Ubuntu 20.04)\r\n* Python: 3.8.10\r\n* Pillow: https://github.com/python-pillow/Pillow/commit/64f29247c2a36c8c0d255c806132007913b11cf8\r\n\r\nNote: I think this issue can be tagged with `TIFF` & `Bug`\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/7019/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6942", "id": 1580801823, "node_id": "I_kwDOAE7pkM5eOR8f", "number": 6942, "title": "Python 3.12: Fix building Pillow on Windows", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-11T11:41:52Z", "updated_at": "2023-02-12T05:21:28Z", "closed_at": "2023-02-12T05:21:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For https://github.com/python-pillow/Pillow/issues/6941\r\n\r\nPillow doesn't build for Windows on 3.12:\r\n\r\n```diff\r\ndiff --git a/.github/workflows/test-windows.yml b/.github/workflows/test-windows.yml\r\nindex e938e999d..306e34ca9 100644\r\n--- a/.github/workflows/test-windows.yml\r\n+++ b/.github/workflows/test-windows.yml\r\n@@ -15,7 +15,7 @@ jobs:\r\n     strategy:\r\n       fail-fast: false\r\n       matrix:\r\n-        python-version: [\"3.7\", \"3.8\", \"3.9\", \"3.10\", \"3.11\"]\r\n+        python-version: [\"3.7\", \"3.8\", \"3.9\", \"3.10\", \"3.11\", \"3.12-dev\"]\r\n         architecture: [\"x86\", \"x64\"]\r\n         include:\r\n           # PyPy 7.3.4+ only ships 64-bit binaries for Windows\r\n```\r\n\r\n\r\n[Python 3.12-dev x86](https://github.com/hugovk/Pillow/actions/runs/4141811740/jobs/7161777842#logs) fails:\r\n\r\n```\r\n   Creating library build\\temp.win32-cpython-312\\Release\\src\\_imaging.cp312-win32.lib and object build\\temp.win32-cpython-312\\Release\\src\\_imaging.cp312-win32.exp\r\ndisplay.obj : error LNK2001: unresolved external symbol _PyUnicode_AS_UNICODE\r\nbuild\\lib.win32-cpython-312\\PIL\\_imaging.cp312-win32.pyd : fatal error LNK1120: 1 unresolved externals\r\nerror: command 'C:\\\\Program Files\\\\Microsoft Visual Studio\\\\2022\\\\Enterprise\\\\VC\\\\Tools\\\\MSVC\\\\14.34.31933\\\\bin\\\\HostX86\\\\x86\\\\link.exe' failed with exit code 1120\r\n```\r\n\r\n[Python 3.12-dev x64](https://github.com/hugovk/Pillow/actions/runs/4141811740/jobs/7161777920#logs) similarly fails:\r\n\r\n```\r\n   Creating library build\\temp.win-amd64-cpython-312\\Release\\src\\_imaging.cp312-win_amd64.lib and object build\\temp.win-amd64-cpython-312\\Release\\src\\_imaging.cp312-win_amd64.exp\r\ndisplay.obj : error LNK2001: unresolved external symbol PyUnicode_AS_UNICODE\r\nbuild\\lib.win-amd64-cpython-312\\PIL\\_imaging.cp312-win_amd64.pyd : fatal error LNK1120: 1 unresolved externals\r\nerror: command 'C:\\\\Program Files\\\\Microsoft Visual Studio\\\\2022\\\\Enterprise\\\\VC\\\\Tools\\\\MSVC\\\\14.34.31933\\\\bin\\\\HostX86\\\\x64\\\\link.exe' failed with exit code 1120\r\n```\r\n\r\n\r\nThis is because `PyUnicode_AS_UNICODE()` was deprecated in Python 3.3 and removed in 3.12:\r\n\r\n* https://docs.python.org/3.12/whatsnew/3.12.html?highlight=pyunicode_as_unicode#id5\r\n* [PEP 623](https://peps.python.org/pep-0623/)\r\n* https://docs.python.org/3/c-api/unicode.html?highlight=pyunicode_as_unicode#c.PyUnicode_AS_UNICODE\r\n\r\n> _Changed in version 3.3:_ This function is now inefficient \u2013 because in many cases the [`Py_UNICODE`](https://docs.python.org/3/c-api/unicode.html?highlight=pyunicode_as_unicode#c.Py_UNICODE) representation does not exist and needs to be created \u2013 and can fail (return `NULL` with an exception set). Try to port the code to use the new `PyUnicode_nBYTE_DATA()` macros or use [`PyUnicode_WRITE()`](https://docs.python.org/3/c-api/unicode.html?highlight=pyunicode_as_unicode#c.PyUnicode_WRITE) or [`PyUnicode_READ()`](https://docs.python.org/3/c-api/unicode.html?highlight=pyunicode_as_unicode#c.PyUnicode_READ).\r\n>\r\n> _Deprecated since version 3.3, will be removed in version 3.12:_ Part of the old-style Unicode API, please migrate to using the _PyUnicode_nBYTE_DATA()_ family of macros.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6942/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874/events", "html_url": "https://github.com/python-pillow/Pillow/pull/6874", "id": 1525988787, "node_id": "PR_kwDOAE7pkM5G_24q", "number": 6874, "title": "Raise ValueError for BoxBlur filter with negative radius", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-09T17:13:55Z", "updated_at": "2023-01-11T22:29:55Z", "closed_at": "2023-01-11T21:25:10Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/6874", "html_url": "https://github.com/python-pillow/Pillow/pull/6874", "diff_url": "https://github.com/python-pillow/Pillow/pull/6874.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/6874.patch", "merged_at": "2023-01-11T21:25:10Z"}, "body": "Fixes #6873.\r\n\r\nChanges proposed in this pull request:\r\n\r\n * There's a segmentation fault when _using_ a filter with a negative radius\r\n * A radius of zero has a special meaning (do not blur, returns identical image)\r\n * https://pillow.readthedocs.io/en/stable/reference/ImageFilter.html#PIL.ImageFilter.BoxBlur\r\n * So let's raise a `ValueError` when _creating_ a filter with a negative radius\r\n * We could raise it when _using_ the filter, but why not already do so when creating?\r\n \r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6874/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6873", "id": 1525643953, "node_id": "I_kwDOAE7pkM5a73qx", "number": 6873, "title": "Fatal Python error for negative radius in ImageFilter.BoxBlur()", "user": {"login": "marcelgouka", "id": 55809907, "node_id": "MDQ6VXNlcjU1ODA5OTA3", "avatar_url": "https://avatars.githubusercontent.com/u/55809907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcelgouka", "html_url": "https://github.com/marcelgouka", "followers_url": "https://api.github.com/users/marcelgouka/followers", "following_url": "https://api.github.com/users/marcelgouka/following{/other_user}", "gists_url": "https://api.github.com/users/marcelgouka/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcelgouka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcelgouka/subscriptions", "organizations_url": "https://api.github.com/users/marcelgouka/orgs", "repos_url": "https://api.github.com/users/marcelgouka/repos", "events_url": "https://api.github.com/users/marcelgouka/events{/privacy}", "received_events_url": "https://api.github.com/users/marcelgouka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-09T13:59:25Z", "updated_at": "2023-01-11T21:25:11Z", "closed_at": "2023-01-11T21:25:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nPython crashes without an exception when a negative radius is passed into ImageFilter.BoxBlur().\r\nThis is the error message using spyder.\r\n\r\n```\r\nFatal Python error: Aborted\r\n\r\nMain thread:\r\nCurrent thread 0x00007fbab679b740 (most recent call first):\r\n  File \"/home/mgouka/miniconda3/envs/bx_gui/lib/python3.9/site-packages/PIL/ImageFilter.py\", line 189 in filter\r\n  File \"/home/mgouka/miniconda3/envs/bx_gui/lib/python3.9/site-packages/PIL/Image.py\", line 1305 in filter\r\n  File \"/tmp/ipykernel_28079/2108891280.py\", line 1 in <module>\r\n\r\n\r\nRestarting kernel...\r\n```\r\n\r\nAnd using python in the standard linux terminal it says:\r\n\r\n```\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nThe code below produces the problem.\r\n\r\n```python\r\nimport numpy as np\r\nfrom PIL import Image, ImageFilter\r\n\r\nimg = Image.fromarray(np.ones([100, 100, 3], dtype='uint8'))\r\nimg = img.filter(ImageFilter.BoxBlur(-2))\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429/events", "html_url": "https://github.com/python-pillow/Pillow/pull/6429", "id": 1300016363, "node_id": "PR_kwDOAE7pkM47KFIm", "number": 6429, "title": "Fixed PSDraw rectangle", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-10T21:04:17Z", "updated_at": "2022-07-12T10:02:47Z", "closed_at": "2022-07-12T10:01:12Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/6429", "html_url": "https://github.com/python-pillow/Pillow/pull/6429", "diff_url": "https://github.com/python-pillow/Pillow/pull/6429.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/6429.patch", "merged_at": "2022-07-12T10:01:12Z"}, "body": "Resolves #6428\r\n\r\nUses the changes suggested in that issue. I can't see a way to add tests for this.\r\n\r\nMoving the `neg` means that instead of going from `(0, 0)` to `(width, 0)`, `(width, -height)`, `(0, -height)` and `(0, 0)`,\r\nit instead goes from `(0, 0)` to `(width, 0)`, `(width, height)`, `(0, height)` and `(0, 0)`,\r\nso instead of drawing the rectangle below the starting point, it draws it above.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6429/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6428", "id": 1300011604, "node_id": "I_kwDOAE7pkM5NfJpU", "number": 6428, "title": "PSDraw.rectangle produces incorrect PostScript", "user": {"login": "mrabarnett", "id": 24500011, "node_id": "MDQ6VXNlcjI0NTAwMDEx", "avatar_url": "https://avatars.githubusercontent.com/u/24500011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrabarnett", "html_url": "https://github.com/mrabarnett", "followers_url": "https://api.github.com/users/mrabarnett/followers", "following_url": "https://api.github.com/users/mrabarnett/following{/other_user}", "gists_url": "https://api.github.com/users/mrabarnett/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrabarnett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrabarnett/subscriptions", "organizations_url": "https://api.github.com/users/mrabarnett/orgs", "repos_url": "https://api.github.com/users/mrabarnett/repos", "events_url": "https://api.github.com/users/mrabarnett/events{/privacy}", "received_events_url": "https://api.github.com/users/mrabarnett/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2022-07-10T20:37:44Z", "updated_at": "2022-07-12T10:01:12Z", "closed_at": "2022-07-12T10:01:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "This code should draw a rectangle, but it produces a blank page:\r\n\r\n```python\r\nfrom PIL import PSDraw\r\n\r\nwith open('output.ps', 'wb') as file:\r\n    ps = PSDraw.PSDraw(file)\r\n    ps.begin_document('TEST')\r\n    ps.rectangle((1 * 72, 4 * 72, 3 * 72, 2 * 72))\r\n    ps.end_document()\r\n```\r\nI inspected the PostScript that it produced and it didn't make a whole lot of sense to me (I've worked with it in the past) until I realised that the parameters on the PostScript stack were in the wrong order.\r\n\r\nThe PostScript says \"72 288 M 216 144 0 Vr\" when it should say \"72 288 M 0 216 144 Vr\", i.e. it's \"`left` `top` M `width` `height` 0 Vr\" instead of \"`left` `top` M 0 `width` `height` Vr\".\r\n\r\nWhen I edited the PostScript, I got the expected result.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6398", "id": 1288246757, "node_id": "I_kwDOAE7pkM5MyRXl", "number": 6398, "title": "Docs: empty search page", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-29T06:44:42Z", "updated_at": "2022-06-29T09:08:43Z", "closed_at": "2022-06-29T09:08:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n1. Go to the frontpage: https://pillow.readthedocs.io/en/latest/\r\n2. Scroll down to [Indices and tables](https://pillow.readthedocs.io/en/latest/#indices-and-tables)\r\n3. Click [Search Page](https://pillow.readthedocs.io/en/latest/search.html)\r\n\r\n### What did you expect to happen?\r\n\r\nEither some sort of search page, or remove the Search Page link from the frontpage.\r\n\r\n### What actually happened?\r\n\r\nhttps://pillow.readthedocs.io/en/latest/search.html is an empty page:\r\n\r\n<img width=\"1624\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1324225/176369192-c9786e16-3720-4d19-8a30-2d3dc22f7dd5.png\">\r\n\r\nIt has the usual search box in the left menu, but that's on all pages.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6146", "id": 1175002292, "node_id": "I_kwDOAE7pkM5GCRy0", "number": 6146, "title": "ImageShow.show() for DisplayViewer doesn't work if no title is given", "user": {"login": "csarn", "id": 4563314, "node_id": "MDQ6VXNlcjQ1NjMzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4563314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csarn", "html_url": "https://github.com/csarn", "followers_url": "https://api.github.com/users/csarn/followers", "following_url": "https://api.github.com/users/csarn/following{/other_user}", "gists_url": "https://api.github.com/users/csarn/gists{/gist_id}", "starred_url": "https://api.github.com/users/csarn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csarn/subscriptions", "organizations_url": "https://api.github.com/users/csarn/orgs", "repos_url": "https://api.github.com/users/csarn/repos", "events_url": "https://api.github.com/users/csarn/events{/privacy}", "received_events_url": "https://api.github.com/users/csarn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-21T07:50:17Z", "updated_at": "2022-03-24T05:35:59Z", "closed_at": "2022-03-24T05:35:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "To reproduce the bug, just run \".show()\" on any image object, while only having imagemagick's `display` viewer on the PATH.\r\n\r\n```python\r\nfrom PIL import Image\r\nImage.new('RGB', (10, 10)).show()\r\n```\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3.10/site-packages/PIL/Image.py\", line 2259, in show\r\n    _show(self, title=title)\r\n  File \"/usr/lib/python3.10/site-packages/PIL/Image.py\", line 3233, in _show\r\n    ImageShow.show(image, **options)\r\n  File \"/usr/lib/python3.10/site-packages/PIL/ImageShow.py\", line 55, in show\r\n    if viewer.show(image, title=title, **options):\r\n  File \"/usr/lib/python3.10/site-packages/PIL/ImageShow.py\", line 79, in show\r\n    return self.show_image(image, **options)\r\n  File \"/usr/lib/python3.10/site-packages/PIL/ImageShow.py\", line 105, in show_image\r\n    return self.show_file(self.save_image(image), **options)\r\n  File \"/usr/lib/python3.10/site-packages/PIL/ImageShow.py\", line 212, in show_file\r\n    subprocess.Popen(args)\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 966, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 1775, in _execute_child\r\n    self.pid = _posixsubprocess.fork_exec(\r\nTypeError: expected str, bytes or os.PathLike object, not NoneType\r\n```\r\n\r\nThe reason is that the DisplayViewer class just appends `options[\"title\"]` to the argument list: https://github.com/python-pillow/Pillow/blob/15dc2914692c9c19270b4fd55fa6226a94b17647/src/PIL/ImageShow.py#L274\r\nBut the default value for title is None: https://github.com/python-pillow/Pillow/blob/15dc2914692c9c19270b4fd55fa6226a94b17647/src/PIL/ImageShow.py#L51", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6146/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136/events", "html_url": "https://github.com/python-pillow/Pillow/pull/6136", "id": 1169387722, "node_id": "PR_kwDOAE7pkM40crCT", "number": 6136, "title": "Fixed calling DisplayViewer or XVViewer without a title", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-15T09:13:24Z", "updated_at": "2022-03-24T07:23:43Z", "closed_at": "2022-03-24T05:35:59Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/6136", "html_url": "https://github.com/python-pillow/Pillow/pull/6136", "diff_url": "https://github.com/python-pillow/Pillow/pull/6136.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/6136.patch", "merged_at": "2022-03-24T05:35:59Z"}, "body": "Requested in https://github.com/python-pillow/Pillow/commit/8da80130dbc747f3954b4904247d26289fe722f9#r68650261\r\nResolves #6146\r\n\r\nThat comment points out that https://github.com/python-pillow/Pillow/blob/6faebd3ff321e7b2dd780950858301e1b2d76db8/src/PIL/ImageShow.py#L51-L61 can set `title` to `None`, which is then passed (through [`Viewer.show`](https://github.com/python-pillow/Pillow/blob/6faebd3ff321e7b2dd780950858301e1b2d76db8/src/PIL/ImageShow.py#L71-L85) and [`show_image`](https://github.com/python-pillow/Pillow/blob/6faebd3ff321e7b2dd780950858301e1b2d76db8/src/PIL/ImageShow.py#L109-L111)) to `DisplayViewer` and `XVViewer` as `None` for one of the values passed to `subprocess.Popen`.\r\n\r\nThis problem was introduced in #6010.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6136/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101/events", "html_url": "https://github.com/python-pillow/Pillow/pull/6101", "id": 1155012793, "node_id": "PR_kwDOAE7pkM4ztkjx", "number": 6101, "title": "Reset size when seeking away from \"Large Thumbnail\" MPO frame", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-01T08:16:25Z", "updated_at": "2022-03-02T06:35:37Z", "closed_at": "2022-03-02T06:08:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/6101", "html_url": "https://github.com/python-pillow/Pillow/pull/6101", "diff_url": "https://github.com/python-pillow/Pillow/pull/6101.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/6101.patch", "merged_at": "2022-03-02T06:08:20Z"}, "body": "Resolves #6100\r\n\r\n#5168 introduced a rule that MPO image size can only change for \"Large Thumbnail\" frames.\r\n\r\nHowever, it forgot to reset the size back to the initial value when seeking to another frame after that.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6101/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6100", "id": 1154966698, "node_id": "I_kwDOAE7pkM5E12Sq", "number": 6100, "title": "Cannot modify the first frame of a MPO with asymmetric sized frames after seek", "user": {"login": "telicent", "id": 1326271, "node_id": "MDQ6VXNlcjEzMjYyNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1326271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/telicent", "html_url": "https://github.com/telicent", "followers_url": "https://api.github.com/users/telicent/followers", "following_url": "https://api.github.com/users/telicent/following{/other_user}", "gists_url": "https://api.github.com/users/telicent/gists{/gist_id}", "starred_url": "https://api.github.com/users/telicent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/telicent/subscriptions", "organizations_url": "https://api.github.com/users/telicent/orgs", "repos_url": "https://api.github.com/users/telicent/repos", "events_url": "https://api.github.com/users/telicent/events{/privacy}", "received_events_url": "https://api.github.com/users/telicent/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-01T07:20:16Z", "updated_at": "2022-03-02T06:08:21Z", "closed_at": "2022-03-02T06:08:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nDid a seek(1) to the second frame followed by a seek(0) back to the first, and a transpose\r\n\r\n### What did you expect to happen?\r\n\r\nThe transpose\r\n\r\n### What actually happened?\r\n\r\nSegmentation fault: 11\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: OSX 10.15.7 and Ubuntu 20.04\r\n* Python: 3.8.11 and 3.10.2\r\n* Pillow: 9.0.1\r\n\r\nThis is an edge case issue with images created by the Nikon coolpix 500b (and possibly others), which appears to embed a couple \"thumbnails\" in the image files. Pillow (reasonably) detects this as a 3-frame MPO. For some reason, however, seeking back to the first frame and trying to modify it after seeking to any other frame crashes with a seg fault.\r\n\r\nFor the example below I used this image (not sure on the licensing, just the first I googled):\r\nhttps://img.photographyblog.com/reviews/nikon_coolpix_b500/photos/nikon_coolpix_b500_02.jpg\r\n\r\n```python\r\nfrom PIL import Image\r\nim = Image.open('nikon_coolpix_b500_02.jpg')\r\nim.seek(1)\r\nim.seek(0)\r\nim.transpose(Image.FLIP_LEFT_RIGHT) # => Segment fault: 11\r\n```\r\n\r\nIf it helps, I noticed that the `im.size` doesn't update after the `seek(0)` back to the first frame, even though `tell` reports the correct frame:\r\n```python\r\nim = Image.open('nikon_coolpix_b500_02.jpg')\r\nim.size #  =>  (4608, 3456)\r\nim.seek(1)\r\nim.size #  =>  (640, 480)\r\nim.seek(0)\r\nim.size #  =>  (640, 480)\r\nim.tell() # => 0\r\n```\r\nFor my particular case, the problematic usage was some legacy code trying to detect animations that is better handled by checking `n_frames`, so I was able to work around it. Mainly documenting the issue in case anyone else runs into it.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6100/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032/events", "html_url": "https://github.com/python-pillow/Pillow/pull/6032", "id": 1125668498, "node_id": "PR_kwDOAE7pkM4yJ4xV", "number": 6032, "title": "Ensure Tkinter hook is activated for getimage()", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-07T08:32:40Z", "updated_at": "2022-03-27T21:01:41Z", "closed_at": "2022-03-27T15:46:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/6032", "html_url": "https://github.com/python-pillow/Pillow/pull/6032", "diff_url": "https://github.com/python-pillow/Pillow/pull/6032.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/6032.patch", "merged_at": "2022-03-27T15:46:45Z"}, "body": "Resolves #6020\r\n\r\nWhen [`PhotoImage.paste` calls \"PyImagingPhoto\"](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/src/PIL/ImageTk.py#L175-L199), it catches a TclError in case the tkinter hooks have not been activated yet. If they haven't, then it calls `_imagingtk.tkinit`, which [calls `TkImaging_Init`](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/src/_imagingtk.c#L55), which [creates the \"PyImaging\" Tcl commands.](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/src/Tk/tkImaging.c#L200-L214)\r\n\r\n`ImageTk.getimage` does not handle the situation where the tkinter hooks have not been activated yet.\r\nhttps://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/src/PIL/ImageTk.py#L274-L281\r\nSo the user from the issue has reported a TclError being raised. This was missed in #3814.\r\n\r\nAs for testing this, although [`test_photoimage()`](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/Tests/test_imagetk.py#L55-L67) looks like it is only testing `getimage()`, when `PhotoImage` is called with an image as the first argument, [it calls `paste` immediately](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/src/PIL/ImageTk.py#L114-L115). In contrast, the test that I've modified just calls `getimage()`, and so when the test suite is run in [reverse](https://github.com/python-pillow/Pillow/blob/ab8125fa6b8dff98b9de1a148308d40744583cca/.github/workflows/test.yml#L24-L26), this will be called first.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6032/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020/events", "html_url": "https://github.com/python-pillow/Pillow/issues/6020", "id": 1124043771, "node_id": "I_kwDOAE7pkM5C_4v7", "number": 6020, "title": "ImageTk.getimage() is broken (again)", "user": {"login": "muditl", "id": 58882405, "node_id": "MDQ6VXNlcjU4ODgyNDA1", "avatar_url": "https://avatars.githubusercontent.com/u/58882405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muditl", "html_url": "https://github.com/muditl", "followers_url": "https://api.github.com/users/muditl/followers", "following_url": "https://api.github.com/users/muditl/following{/other_user}", "gists_url": "https://api.github.com/users/muditl/gists{/gist_id}", "starred_url": "https://api.github.com/users/muditl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muditl/subscriptions", "organizations_url": "https://api.github.com/users/muditl/orgs", "repos_url": "https://api.github.com/users/muditl/repos", "events_url": "https://api.github.com/users/muditl/events{/privacy}", "received_events_url": "https://api.github.com/users/muditl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-02-04T10:30:36Z", "updated_at": "2022-03-01T08:28:40Z", "closed_at": "2022-02-08T09:58:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n### What did you do?\r\nTried to convert a PhotoImage to a Image using the ImageTk library function \r\n\r\n### What did you expect to happen?\r\nGet an Image from the PhotoImage\r\n\r\n### What actually happened?\r\ngot a TclError:\r\ndir..\\lib\\site-packages\\PIL\\ImageTk.py\", line 279, in getimage\r\n    photo.tk.call(\"PyImagingPhotoGet\", photo, block.id)\r\n_tkinter.TclError: invalid command name \"PyImagingPhotoGet\"\r\n\r\n### What are your OS, Python and Pillow versions?\r\n* OS: Windows 10\r\n* Python: 3.10.2\r\n* Pillow: 8.0.1\r\n\r\n\r\n```python\r\nfrom tkinter import *\r\nfrom PIL import Image, ImageTk\r\nroot = Tk()\r\np_img = PhotoImage(file='dir/img_name')\r\nimage = ImageTk.getimage(p_img)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/6020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5909", "id": 1088922729, "node_id": "PR_kwDOAE7pkM4wSay6", "number": 5909, "title": "Fixed freeing pointer in ImageDraw.Outline.transform", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 2358162206, "node_id": "MDU6TGFiZWwyMzU4MTYyMjA2", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/automerge", "name": "automerge", "color": "2d18b2", "default": false, "description": "Automatically merge PRs that are ready"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-27T03:00:47Z", "updated_at": "2021-12-27T05:48:28Z", "closed_at": "2021-12-27T05:25:24Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5909", "html_url": "https://github.com/python-pillow/Pillow/pull/5909", "diff_url": "https://github.com/python-pillow/Pillow/pull/5909.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5909.patch", "merged_at": "2021-12-27T05:25:24Z"}, "body": "The following code will crash when trying to free a pointer.\r\n\r\n```python\r\n>>> from PIL import ImageDraw\r\n>>> o = ImageDraw.Outline()\r\n>>> o.line(0, 0)\r\n>>> o.transform((0, 0, 0, 0, 0, 0))\r\n```\r\n\r\nThis PR fixes it.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5909/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5872", "id": 1071855125, "node_id": "PR_kwDOAE7pkM4vbEx0", "number": 5872, "title": "Fixed raising OSError in _safe_read when size is greater than SAFEBLOCK", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-06T08:16:28Z", "updated_at": "2021-12-07T19:41:33Z", "closed_at": "2021-12-07T13:30:57Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5872", "html_url": "https://github.com/python-pillow/Pillow/pull/5872", "diff_url": "https://github.com/python-pillow/Pillow/pull/5872.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5872.patch", "merged_at": "2021-12-07T13:30:56Z"}, "body": "Resolves #5871\r\n\r\nI have contrived a test so that BmpImagePlugin will try to call `ImageFile._safe_read` with a `size` greater than `ImageFile.SAFEBLOCK` on a truncated file.\r\n\r\nWithout this PR, a truncation error is not raised [as advertised.](https://github.com/python-pillow/Pillow/blob/c5d9223a8b5e9295d15b5a9b1ef1dae44c8499f3/src/PIL/ImageFile.py#L537)\r\n\r\nWith this PR, it is.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5872/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5864", "id": 1069912590, "node_id": "I_kwDOAE7pkM4_xZIO", "number": 5864, "title": "Truncated mpo takes forever", "user": {"login": "doublex", "id": 274624, "node_id": "MDQ6VXNlcjI3NDYyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/274624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doublex", "html_url": "https://github.com/doublex", "followers_url": "https://api.github.com/users/doublex/followers", "following_url": "https://api.github.com/users/doublex/following{/other_user}", "gists_url": "https://api.github.com/users/doublex/gists{/gist_id}", "starred_url": "https://api.github.com/users/doublex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doublex/subscriptions", "organizations_url": "https://api.github.com/users/doublex/orgs", "repos_url": "https://api.github.com/users/doublex/repos", "events_url": "https://api.github.com/users/doublex/events{/privacy}", "received_events_url": "https://api.github.com/users/doublex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-02T19:34:42Z", "updated_at": "2022-01-02T23:02:04Z", "closed_at": "2021-12-16T13:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Image: http://doppelbauer.name/takesforever.jpg\r\n(do you mind if I delete the image?)\r\n\r\nTestcase:\r\n````python\r\nimport PIL.Image, PIL.ImageFile\r\nPIL.ImageFile.LOAD_TRUNCATED_IMAGES = True\r\nwith PIL.Image.open('takesforever.jpg') as img:\r\n    for frame in PIL.ImageSequence.Iterator(img):\r\n        frame.convert('RGBA')\r\n````", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5864/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5633", "id": 951997380, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk2MjkxNjk0", "number": 5633, "title": "Corrected pathlib.Path detection when saving", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-24T04:28:40Z", "updated_at": "2021-08-06T23:27:13Z", "closed_at": "2021-08-06T14:15:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5633", "html_url": "https://github.com/python-pillow/Pillow/pull/5633", "diff_url": "https://github.com/python-pillow/Pillow/pull/5633.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5633.patch", "merged_at": "2021-08-06T14:15:16Z"}, "body": "Resolves #5632\r\n\r\nAs #3825 did for `open()`, this fixes detecting pathlib.Path in `save()`.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/68c5f2dce11768e5334a97d17feb2a85a0fd0590/src/PIL/Image.py#L2183-L2188\r\n\r\nThe above code will never execute the second block, because `isPath` returns true for `Path` instances.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/68c5f2dce11768e5334a97d17feb2a85a0fd0590/src/PIL/_util.py#L5-L6\r\n\r\nSo this PR swaps the order.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5633/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5632", "id": 951994519, "node_id": "MDU6SXNzdWU5NTE5OTQ1MTk=", "number": 5632, "title": "Saving an image with JPEG2000 format doesn't accept Path object", "user": {"login": "j-tai", "id": 45131430, "node_id": "MDQ6VXNlcjQ1MTMxNDMw", "avatar_url": "https://avatars.githubusercontent.com/u/45131430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/j-tai", "html_url": "https://github.com/j-tai", "followers_url": "https://api.github.com/users/j-tai/followers", "following_url": "https://api.github.com/users/j-tai/following{/other_user}", "gists_url": "https://api.github.com/users/j-tai/gists{/gist_id}", "starred_url": "https://api.github.com/users/j-tai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/j-tai/subscriptions", "organizations_url": "https://api.github.com/users/j-tai/orgs", "repos_url": "https://api.github.com/users/j-tai/repos", "events_url": "https://api.github.com/users/j-tai/events{/privacy}", "received_events_url": "https://api.github.com/users/j-tai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-24T04:05:41Z", "updated_at": "2021-08-06T14:15:16Z", "closed_at": "2021-08-06T14:15:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nSave a JPEG 2000 image using a `Path` argument:\r\n```python\r\nfrom pathlib import Path\r\nfrom PIL import Image\r\n\r\nimg = Image.new('RGBA', (5, 5), '#00000000')\r\nimg.save(Path('image.jp2'), format='JPEG2000')\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nIt should save the file correctly, since [the documentation says that passing in a `Path` object is allowed](https://pillow.readthedocs.io/en/latest/reference/Image.html#PIL.Image.Image.save).\r\n\r\n### What actually happened?\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/jtai/Desktop/pillow-fail/fail.py\", line 5, in <module>\r\n    img.save(Path('image.jp2'), format='JPEG2000')\r\n  File \"/home/jtai/Desktop/pillow-fail/venv/lib/python3.9/site-packages/PIL/Image.py\", line 2235, in save\r\n    save_handler(self, fp, filename)\r\n  File \"/home/jtai/Desktop/pillow-fail/venv/lib/python3.9/site-packages/PIL/Jpeg2KImagePlugin.py\", line 247, in _save\r\n    if filename.endswith(\".j2k\"):\r\nAttributeError: 'PosixPath' object has no attribute 'endswith'\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Pop!_OS 21.04\r\n* Python: 3.9.5\r\n* Pillow: 8.3.1", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5613", "id": 945177080, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkwNTQzNzYx", "number": 5613, "title": "PSD layer count may be negative", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-15T09:18:35Z", "updated_at": "2021-07-28T12:18:23Z", "closed_at": "2021-07-28T09:53:24Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5613", "html_url": "https://github.com/python-pillow/Pillow/pull/5613", "diff_url": "https://github.com/python-pillow/Pillow/pull/5613.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5613.patch", "merged_at": "2021-07-28T09:53:24Z"}, "body": "Resolves #5612\r\n\r\nhttps://www.adobe.com/devnet-apps/photoshop/fileformatashtml/#50577409_pgfId-1031423\r\n> Layer count. If it is a negative number, its absolute value is the number of layers and the first alpha channel contains the transparency data for the merged result.\r\n\r\nBut at the moment, we're reading it in as H, [unsigned short](https://docs.python.org/3/library/struct.html#format-characters).\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/696b82e44032500197734c4dc4669d7c3f8b9371/src/PIL/_binary.py#L70-L71\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/696b82e44032500197734c4dc4669d7c3f8b9371/src/PIL/PsdImagePlugin.py#L23\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/696b82e44032500197734c4dc4669d7c3f8b9371/src/PIL/PsdImagePlugin.py#L182\r\n\r\nThis PR changes it to signed.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5613/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5612", "id": 944372913, "node_id": "MDU6SXNzdWU5NDQzNzI5MTM=", "number": 5612, "title": "Pillow fails/hangs on PSD hidden background layer", "user": {"login": "andreymal", "id": 3236464, "node_id": "MDQ6VXNlcjMyMzY0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3236464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreymal", "html_url": "https://github.com/andreymal", "followers_url": "https://api.github.com/users/andreymal/followers", "following_url": "https://api.github.com/users/andreymal/following{/other_user}", "gists_url": "https://api.github.com/users/andreymal/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreymal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreymal/subscriptions", "organizations_url": "https://api.github.com/users/andreymal/orgs", "repos_url": "https://api.github.com/users/andreymal/repos", "events_url": "https://api.github.com/users/andreymal/events{/privacy}", "received_events_url": "https://api.github.com/users/andreymal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-07-14T12:22:01Z", "updated_at": "2021-07-28T09:53:24Z", "closed_at": "2021-07-28T09:53:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Depending on file content, Pillow:\r\n\r\n- fails with \"cannot identify image file\";\r\n- fails with \"Truncated File Read\";\r\n- just hangs inside the `PsdImagePlugin._layerinfo` function because it thinks there are 65534 layers.\r\n\r\nSee attachment: [pillow-psd-fail.zip](https://github.com/python-pillow/Pillow/files/6815914/pillow-psd-fail.zip)\r\n\r\nGIMP works fine with these files.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5612/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5556", "id": 930022055, "node_id": "MDExOlB1bGxSZXF1ZXN0Njc3Nzg0NTc5", "number": 5556, "title": "Fixed undefined variable in logging", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-25T09:52:35Z", "updated_at": "2021-06-26T12:46:38Z", "closed_at": "2021-06-26T05:39:12Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5556", "html_url": "https://github.com/python-pillow/Pillow/pull/5556", "diff_url": "https://github.com/python-pillow/Pillow/pull/5556.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5556.patch", "merged_at": "2021-06-26T05:39:12Z"}, "body": "Resolves #5555\r\n\r\nIn [TiffImagePlugin](https://github.com/python-pillow/Pillow/blob/70ef50cf72992ab6c9330412d6f1340c593e2d8f/src/PIL/TiffImagePlugin.py#L823), `values` might not be defined when it is comes to be used in logging.\r\n```python\r\nif is_ifd:\r\n    ...\r\nelse:\r\n    values = value if isinstance(value, tuple) else (value,)\r\n    ...\r\n\r\n...\r\nmsg += \" - value: \" + (\r\n    \"<table: %d bytes>\" % len(data) if len(data) >= 16 else str(values)\r\n)\r\n```\r\n\r\nThis PR fixes it by ensuring that `values` is always defined.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5556/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5555", "id": 929445547, "node_id": "MDU6SXNzdWU5Mjk0NDU1NDc=", "number": 5555, "title": "\"UnboundLocalError: local variable 'values' referenced before assignment\" when `image.getexif().tobytes()` on specific JPEGs", "user": {"login": "christophebiocca", "id": 566354, "node_id": "MDQ6VXNlcjU2NjM1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/566354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christophebiocca", "html_url": "https://github.com/christophebiocca", "followers_url": "https://api.github.com/users/christophebiocca/followers", "following_url": "https://api.github.com/users/christophebiocca/following{/other_user}", "gists_url": "https://api.github.com/users/christophebiocca/gists{/gist_id}", "starred_url": "https://api.github.com/users/christophebiocca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christophebiocca/subscriptions", "organizations_url": "https://api.github.com/users/christophebiocca/orgs", "repos_url": "https://api.github.com/users/christophebiocca/repos", "events_url": "https://api.github.com/users/christophebiocca/events{/privacy}", "received_events_url": "https://api.github.com/users/christophebiocca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-24T17:18:46Z", "updated_at": "2021-06-26T05:39:12Z", "closed_at": "2021-06-26T05:39:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't post the picture itself because it's from a customer, but the offending exif data trying to be serialized is:\r\n\r\n```\r\nifd: <PIL.TiffImagePlugin.ImageFileDirectory_v2 object at ...>\r\nifd.self._tags_v2.items : {34665: {}, 40962: 1920, 40963: 1440, 40961: 1}\r\n```\r\n\r\nThat empty dictionary for 34665 seems to be the culprit.\r\n\r\nThe failing statement is the use of `str(values)` when `is_ifd` is true (and thus `values` never gets defined):\r\nhttps://github.com/python-pillow/Pillow/blob/70ef50cf72992ab6c9330412d6f1340c593e2d8f/src/PIL/TiffImagePlugin.py#L840\r\n\r\nThis will silently do the wrong thing instead of exploding if this is the second+ tag being serialized (as it will inherit `values` from the previous iteration of the loop.\r\nIt probably won't take that path for non-empty dictionaries, as those would have non-trivial `data` length.\r\n\r\nA simple fix would be `if len(data) >= 16 or is_ifd` but I'm not super familiar with the codebase so it may not be the best choice.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5555/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5546", "id": 924690343, "node_id": "MDU6SXNzdWU5MjQ2OTAzNDM=", "number": 5546, "title": "`exif_transpose` overwrites the original image exif", "user": {"login": "artemisart", "id": 9201969, "node_id": "MDQ6VXNlcjkyMDE5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9201969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/artemisart", "html_url": "https://github.com/artemisart", "followers_url": "https://api.github.com/users/artemisart/followers", "following_url": "https://api.github.com/users/artemisart/following{/other_user}", "gists_url": "https://api.github.com/users/artemisart/gists{/gist_id}", "starred_url": "https://api.github.com/users/artemisart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/artemisart/subscriptions", "organizations_url": "https://api.github.com/users/artemisart/orgs", "repos_url": "https://api.github.com/users/artemisart/repos", "events_url": "https://api.github.com/users/artemisart/events{/privacy}", "received_events_url": "https://api.github.com/users/artemisart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-18T08:51:09Z", "updated_at": "2021-07-02T10:24:52Z", "closed_at": "2021-06-20T10:22:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nUse `ImageOps.exif_tranpose` on an image with an EXIF orientation code (not in [None, 0, 1]).\r\n\r\n### What did you expect to happen?\r\n\r\n`exif_transpose()` should be immutable and returns a new image with the correct orientation.\r\n\r\n### What actually happened?\r\n\r\n`exif_transpose()` returns a new image but also modifies the original image exif info in-place (deletes the orientation, key 0x112).\r\nIt's a pretty big problem if your work with rotated images because it breaks the original images, if you e.g. call again `exif_transpose()` on it the EXIF orientation value is not there but the image content is not correctly rotated.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: ubuntu 18.04\r\n* Python: 3.8.8\r\n* Pillow: 8.2.0\r\n\r\n### Code\r\n\r\n```python\r\nimport PIL, PIL.ImageOps\r\n# if you have an image with exif\r\npil = PIL.Image.open(file)\r\n# otherwise\r\nimport requests\r\nresp = requests.get('https://raw.githubusercontent.com/recurser/exif-orientation-examples/master/Portrait_3.jpg', stream=True)\r\nresp.raw.decode_content = True\r\npil = PIL.Image.open(resp.raw)\r\n\r\nprint(pil.getexif().get(0x0112))  # 3\r\ncorrect_image = PIL.ImageOps.exif_transpose(pil)\r\nprint(pil.getexif().get(0x0112))  # None, but should be 3\r\n```\r\n\r\n### Proposed fix\r\n\r\nReplace the first line of exif_tranpose in https://pillow.readthedocs.io/en/stable/_modules/PIL/ImageOps.html#exif_transpose with\r\n```diff\r\nfrom copy import deepcopy  # copy may be enough, I didn't try it\r\n\r\n-    exif = image.getexif()\r\n+    exif = deepcopy(image.getexif())\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5546/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5491", "id": 890866552, "node_id": "MDU6SXNzdWU4OTA4NjY1NTI=", "number": 5491, "title": "Cannot open untruncated png image with LOAD_TRUNCATED_IMAGES=True", "user": {"login": "rafal-jaworski", "id": 28957750, "node_id": "MDQ6VXNlcjI4OTU3NzUw", "avatar_url": "https://avatars.githubusercontent.com/u/28957750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rafal-jaworski", "html_url": "https://github.com/rafal-jaworski", "followers_url": "https://api.github.com/users/rafal-jaworski/followers", "following_url": "https://api.github.com/users/rafal-jaworski/following{/other_user}", "gists_url": "https://api.github.com/users/rafal-jaworski/gists{/gist_id}", "starred_url": "https://api.github.com/users/rafal-jaworski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rafal-jaworski/subscriptions", "organizations_url": "https://api.github.com/users/rafal-jaworski/orgs", "repos_url": "https://api.github.com/users/rafal-jaworski/repos", "events_url": "https://api.github.com/users/rafal-jaworski/events{/privacy}", "received_events_url": "https://api.github.com/users/rafal-jaworski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-13T09:01:44Z", "updated_at": "2021-06-06T07:35:05Z", "closed_at": "2021-06-06T07:35:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nOpen an untruncated png image with LOAD_TRUNCATED_IMAGES==True.\r\n### What did you expect to happen?\r\nThe image is opened.\r\n### What actually happened?\r\nThe image is not opened. (But image converted with gimp opens)\r\n```\r\nLoaded PIL.ImageFile.LOAD_TRUNCATED_IMAGES=False\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n~/.virtualenvs/venv/lib64/python3.8/site-packages/PIL/PngImagePlugin.py in load_end(self)\r\n    939             try:\r\n--> 940                 self.png.call(cid, pos, length)\r\n    941             except UnicodeDecodeError:\r\n\r\n~/.virtualenvs/venv/lib64/python3.8/site-packages/PIL/PngImagePlugin.py in call(self, cid, pos, length)\r\n    186         logger.debug(\"STREAM %r %s %s\", cid, pos, length)\r\n--> 187         return getattr(self, \"chunk_\" + cid.decode(\"ascii\"))(pos, length)\r\n    188 \r\n\r\nAttributeError: 'PngStream' object has no attribute 'chunk_I'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nOSError                                   Traceback (most recent call last)\r\n<ipython-input-14-39acebf157ec> in <module>\r\n      9 \r\n     10 img = PIL.Image.open(image_path)\r\n---> 11 img.load()\r\n     12 print(f\"Loaded {PIL.ImageFile.LOAD_TRUNCATED_IMAGES=}\")\r\n\r\n~/.virtualenvs/venv/lib64/python3.8/site-packages/PIL/ImageFile.py in load(self)\r\n    264         self.readonly = readonly\r\n    265 \r\n--> 266         self.load_end()\r\n    267 \r\n    268         if self._exclusive_fp and self._close_exclusive_fp_after_loading:\r\n\r\n~/.virtualenvs/venv/lib64/python3.8/site-packages/PIL/PngImagePlugin.py in load_end(self)\r\n    947             except AttributeError:\r\n    948                 logger.debug(\"%r %s %s (unknown)\", cid, pos, length)\r\n--> 949                 s = ImageFile._safe_read(self.fp, length)\r\n    950                 if cid[1:2].islower():\r\n    951                     self.private_chunks.append((cid, s, True))\r\n\r\n~/.virtualenvs/venv/lib64/python3.8/site-packages/PIL/ImageFile.py in _safe_read(fp, size)\r\n    566         size -= len(block)\r\n    567     if sum(len(d) for d in data) < size:\r\n--> 568         raise OSError(\"Truncated File Read\")\r\n    569     return b\"\".join(data)\r\n    570 \r\n\r\nOSError: Truncated File Read\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Linux 5.11.17-300.fc34.x86_64 #1 SMP Wed Apr 28 14:21:28 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n* Python: 3.8.9\r\n* Pillow: 8.2.0\r\n\r\n```python\r\nimport PIL\r\nimage_path = 'error_image.png'\r\n\r\nimg = PIL.Image.open(image_path)\r\nimg.load()\r\nprint(f\"Loaded {PIL.ImageFile.LOAD_TRUNCATED_IMAGES=}\")\r\n\r\nPIL.ImageFile.LOAD_TRUNCATED_IMAGES = True\r\n\r\nimg = PIL.Image.open(image_path)\r\nimg.load()\r\nprint(f\"Loaded {PIL.ImageFile.LOAD_TRUNCATED_IMAGES=}\")\r\n```\r\n\r\n![error_image](https://user-images.githubusercontent.com/28957750/118103782-9640be80-b3da-11eb-9d46-4adac6e33ecf.png)\r\n![gimp](https://user-images.githubusercontent.com/28957750/118103790-980a8200-b3da-11eb-829c-e68a04932ceb.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5491/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5445", "id": 868242710, "node_id": "MDExOlB1bGxSZXF1ZXN0NjIzNzk4MTE0", "number": 5445, "title": "Fixed bug when checking FreeType2 version if it is not installed", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-26T22:13:00Z", "updated_at": "2021-05-02T22:46:28Z", "closed_at": "2021-05-02T14:24:26Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5445", "html_url": "https://github.com/python-pillow/Pillow/pull/5445", "diff_url": "https://github.com/python-pillow/Pillow/pull/5445.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5445.patch", "merged_at": "2021-05-02T14:24:26Z"}, "body": "Resolves #5444", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5445/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5437", "id": 866910591, "node_id": "MDExOlB1bGxSZXF1ZXN0NjIyNjkzNTI4", "number": 5437, "title": "Replace sys.stdout with sys.stdout.buffer when saving", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-25T04:40:30Z", "updated_at": "2021-05-03T08:58:35Z", "closed_at": "2021-05-03T08:57:47Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5437", "html_url": "https://github.com/python-pillow/Pillow/pull/5437", "diff_url": "https://github.com/python-pillow/Pillow/pull/5437.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5437.patch", "merged_at": "2021-05-03T08:57:46Z"}, "body": "Resolves #5436\r\n\r\nhttps://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#example-draw-a-gray-cross-over-an-image\r\n```python\r\nfrom PIL import Image, ImageDraw\r\n\r\nwith Image.open(\"hopper.jpg\") as im:\r\n\r\n    draw = ImageDraw.Draw(im)\r\n    draw.line((0, 0) + im.size, fill=128)\r\n    draw.line((0, im.size[1], im.size[0], 0), fill=128)\r\n\r\n    # write to stdout\r\n    im.save(sys.stdout, \"PNG\")\r\n```\r\n\r\nHowever, running this example code gives\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 6, in <module>\r\n  File \"PIL/Image.py\", line 2172, in save\r\n    save_handler(self, fp, filename)\r\n  File \"PIL/PngImagePlugin.py\", line 1223, in _save\r\n    fp.write(_MAGIC)\r\nTypeError: write() argument must be str, not bytes\r\n```\r\n\r\nThis PR suggests fixing this by changing `im.save` so that if it is passed `sys.stdout` (`sys.stdout.mode` is 'w'), then it is replaced with `sys.stdout.buffer` (`sys.stdout.buffer.mode` is 'wb').\r\n\r\nIt also changes the `PSDraw()` default from `sys.stdout` to `sys.stdout.buffer`, and simplifies EPS saving by abandoning the idea of wrapping `fp` just so that it can write strings.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5437/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5436", "id": 866860752, "node_id": "MDU6SXNzdWU4NjY4NjA3NTI=", "number": 5436, "title": "Can't save PNG to sys.stdout", "user": {"login": "shalomori123", "id": 81881844, "node_id": "MDQ6VXNlcjgxODgxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/81881844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shalomori123", "html_url": "https://github.com/shalomori123", "followers_url": "https://api.github.com/users/shalomori123/followers", "following_url": "https://api.github.com/users/shalomori123/following{/other_user}", "gists_url": "https://api.github.com/users/shalomori123/gists{/gist_id}", "starred_url": "https://api.github.com/users/shalomori123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shalomori123/subscriptions", "organizations_url": "https://api.github.com/users/shalomori123/orgs", "repos_url": "https://api.github.com/users/shalomori123/repos", "events_url": "https://api.github.com/users/shalomori123/events{/privacy}", "received_events_url": "https://api.github.com/users/shalomori123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-24T23:44:44Z", "updated_at": "2021-08-07T11:11:05Z", "closed_at": "2021-05-03T08:57:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do? \r\nJust tried to run simple code (ImageDraw)\r\n\r\n### What did you expect to happen?\r\n\r\n### What actually happened? \r\nException looks very basic:\r\n```  File \"/data/user/0/ru.iiec.pydroid3/files/aarch64-linux-android/lib/python3.8/site-packages/PIL/Image.py\", line 2164, in save\r\n    save_handler(self, fp, filename)\r\n  File \"/data/user/0/ru.iiec.pydroid3/files/aarch64-linux-android/lib/python3.8/site-packages/PIL/PngImagePlugin.py\", line 1225, in _save\r\n    fp.write(_MAGIC)\r\nTypeError: write() argument must be str, not bytes\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Android app, \"pydroid3\" (I don't have a computer now to check it)\r\n* Python: 3.8.3\r\n* Pillow: 8.1.2\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```python\r\nimport sys\r\nfrom PIL import Image, ImageDraw\r\n\r\n# list of dots, in the following format: [x, y, x, y, x, y,...]\r\nfirst = (146, 399, 163, 403, 170, 393, 169, 391, 166, 386, 170, 381, 170) #.... long tuple\r\n\r\nwith Image.open(\"draw image.jpg\") as img:\r\n\r\n    draw = ImageDraw.Draw(img)\r\n    for i in range(len(first)//2 - 1):\r\n    \tdraw.line(first[2*i : 2*i + 4])\r\n\r\n    # write to stdout\r\n    img.save(sys.stdout, \"PNG\")\r\n```\r\nSorry if I didn't understand the concept... This is my first issue ever...", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5436/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5408", "id": 858775318, "node_id": "MDExOlB1bGxSZXF1ZXN0NjE1OTYxMDg4", "number": 5408, "title": "Corrected JPEG APP14 transform value", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 631323883, "node_id": "MDU6TGFiZWw2MzEzMjM4ODM=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/JPEG", "name": "JPEG", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-15T11:14:33Z", "updated_at": "2021-04-25T11:30:53Z", "closed_at": "2021-04-25T08:36:41Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5408", "html_url": "https://github.com/python-pillow/Pillow/pull/5408", "diff_url": "https://github.com/python-pillow/Pillow/pull/5408.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5408.patch", "merged_at": "2021-04-25T08:36:41Z"}, "body": "Helps #3953\r\n\r\nIn the APP14 marker, https://github.com/LuaDist/libjpeg/blob/6c0fcb8ddee365e7abc4d332662b06900612e923/jcmarker.c#L435-L443\r\n```\r\n/* Emit an Adobe APP14 marker */\r\n{\r\n  /*\r\n   * Length of APP14 block\t(2 bytes)\r\n   * Block ID\t\t\t(5 bytes - ASCII \"Adobe\")\r\n   * Version Number\t\t(2 bytes - currently 100)\r\n   * Flags0\t\t\t(2 bytes - currently 0)\r\n   * Flags1\t\t\t(2 bytes - currently 0)\r\n   * Color transform\t\t(1 byte)\r\n```\r\nThere are 5 bytes of \"Adobe\", 2 bytes of Version, 4 of flags and then the 'transform' value. This makes 'transform' the 12th value, at index 11 - not index 1, as we have had since PIL.\r\n\r\nUsing exiftool to confirm the results of my new test,\r\n```\r\n$ exiftool -v Tests/images/pil_sample_rgb.jpg | grep ColorTransform \r\n  | ColorTransform = 1\r\n$ exiftool -v Tests/images/pil_sample_cmyk.jpg | grep ColorTransform\r\n  | ColorTransform = 2\r\n```\r\n\r\nAlso changes an exception type to be more specific - `IndexError` is what would be raised if `s` were too short.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5408/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5400", "id": 855062034, "node_id": "MDExOlB1bGxSZXF1ZXN0NjEyODk0MzY4", "number": 5400, "title": "Changed mode for TGA 16-bit palette to BGR;15", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-10T12:56:42Z", "updated_at": "2021-04-18T20:53:54Z", "closed_at": "2021-04-18T10:00:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5400", "html_url": "https://github.com/python-pillow/Pillow/pull/5400", "diff_url": "https://github.com/python-pillow/Pillow/pull/5400.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5400.patch", "merged_at": "2021-04-18T10:00:30Z"}, "body": "Helps #4830.\r\n\r\nThe issue reports that colours are not loaded correctly. This is happening for a 16-bit palette image.\r\n\r\nhttp://paulbourke.net/dataformats/tga/\r\n> For 16 bits each colour component is stored as 5 bits and the remaining bit is a binary alpha value.\r\n\r\nThis is closer to BGR;15 (15-bit reversed true colour) than BGR;16 (16-bit reversed true colour), so this PR updates the palette mode, and with a call to `convert()`, the colours are seen correctly.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5400/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5396", "id": 854450579, "node_id": "MDExOlB1bGxSZXF1ZXN0NjEyMzkzNTcy", "number": 5396, "title": "TGA color map entry size is only 1 byte", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-09T11:48:42Z", "updated_at": "2021-04-18T20:53:53Z", "closed_at": "2021-04-18T09:57:58Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5396", "html_url": "https://github.com/python-pillow/Pillow/pull/5396", "diff_url": "https://github.com/python-pillow/Pillow/pull/5396.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5396.patch", "merged_at": "2021-04-18T09:57:58Z"}, "body": "In the [TGA format,](https://en.wikipedia.org/wiki/Truevision_TGA#Header) color map entry size is 1 byte.\r\n> **Color map specification (field 4)**\r\n> has three subfields:\r\n> - First entry index (2 bytes): index of first color map entry that is included in the file\r\n> - Color map length (2 bytes): number of entries of the color map that are included in the file\r\n> - Color map entry size (1 byte): number of bits per pixel\r\n\r\nIt is currently read as 2 bytes though -\r\nhttps://github.com/python-pillow/Pillow/blob/b01fd46fe6adb67fd008076e4d7407e382868395/src/PIL/TgaImagePlugin.py#L113\r\n\r\nThis PR updates it to 1 byte rather than 2 - and as per #4614, it is written as `s[7]` rather than `i8(s, 7)`.\r\n\r\nThe reason that this hasn't been noticed is because the next byte is the 'X-origin', and I presume this is usually zero. As a test case, I've copied one of the existing test images and hexedited it so this isn't the case.\r\n\r\nCredit to https://stackoverflow.com/a/63156250/4093019 for pointing this out, linked to from #4830", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5396/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5386", "id": 851250080, "node_id": "MDExOlB1bGxSZXF1ZXN0NjA5NzA2MTM1", "number": 5386, "title": "Fixed ensuring that GIF previous frame was loaded", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-06T09:44:10Z", "updated_at": "2021-04-15T08:10:16Z", "closed_at": "2021-04-15T07:47:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5386", "html_url": "https://github.com/python-pillow/Pillow/pull/5386", "diff_url": "https://github.com/python-pillow/Pillow/pull/5386.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5386.patch", "merged_at": "2021-04-15T07:47:44Z"}, "body": "Resolves #4418. Takes a part of #3434\r\n\r\nIn `_seek()` in GifImagePlugin,\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/e2ac1d1c3473294c13786c5dc3bc7441dd842215/src/PIL/GifImagePlugin.py#L150-L152\r\n\r\n`self.im` is only `None` before the first frame is loaded. After that, there is `self.im` - the image at the time.\r\nSo this current code only checks that the image has been loaded at some point in the past. It doesn't check that the previous frame was loaded.\r\n\r\nInstead, `self.tile` can be used as an indicator if there is data waiting to be decoded.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5386/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5382", "id": 849980954, "node_id": "MDExOlB1bGxSZXF1ZXN0NjA4NjI1ODc5", "number": 5382, "title": "Round down the radius in rounded_rectangle", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-04T23:12:30Z", "updated_at": "2021-04-07T21:36:23Z", "closed_at": "2021-04-07T16:31:19Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5382", "html_url": "https://github.com/python-pillow/Pillow/pull/5382", "diff_url": "https://github.com/python-pillow/Pillow/pull/5382.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5382.patch", "merged_at": "2021-04-07T16:31:19Z"}, "body": "Resolves #5381\r\n\r\nThe issue has found a problem when `rounded_rectangle` has a non-integer radius. This PR resolves it by rounding the radius down.\r\n\r\nFor the record, here is what the images created by the new test look like without the fix.\r\n\r\n![imagedraw_rounded_rectangle_non_integer_radius_given](https://user-images.githubusercontent.com/3112309/113523961-bc5e8c00-95ee-11eb-8837-6986a314e822.png)\r\n![imagedraw_rounded_rectangle_non_integer_radius_width](https://user-images.githubusercontent.com/3112309/113523959-bbc5f580-95ee-11eb-87a1-1489cf94a8ff.png)\r\n![imagedraw_rounded_rectangle_non_integer_radius_height](https://user-images.githubusercontent.com/3112309/113523957-ba94c880-95ee-11eb-94f1-8225fc74e925.png)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5382/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5381", "id": 849914566, "node_id": "MDU6SXNzdWU4NDk5MTQ1NjY=", "number": 5381, "title": "Rounded rectangle corners got an offset ", "user": {"login": "Luc1412", "id": 24532065, "node_id": "MDQ6VXNlcjI0NTMyMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/24532065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Luc1412", "html_url": "https://github.com/Luc1412", "followers_url": "https://api.github.com/users/Luc1412/followers", "following_url": "https://api.github.com/users/Luc1412/following{/other_user}", "gists_url": "https://api.github.com/users/Luc1412/gists{/gist_id}", "starred_url": "https://api.github.com/users/Luc1412/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Luc1412/subscriptions", "organizations_url": "https://api.github.com/users/Luc1412/orgs", "repos_url": "https://api.github.com/users/Luc1412/repos", "events_url": "https://api.github.com/users/Luc1412/events{/privacy}", "received_events_url": "https://api.github.com/users/Luc1412/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-04T16:50:25Z", "updated_at": "2021-04-07T16:31:19Z", "closed_at": "2021-04-07T16:31:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI use the new rounded rectangle method with the given code and values.\r\n\r\n### What did you expect to happen?\r\n\r\nI get a rounded rectangle\r\n\r\n### What actually happened?\r\n\r\nI got a rounded rectangle, but the bottom corners got an offset:\r\n\r\n![test](https://user-images.githubusercontent.com/24532065/113515659-196a2b80-9576-11eb-97ea-4462b12a3bad.png)\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10\r\n* Python: 3.9\r\n* Pillow: 8.2.0\r\n\r\n\r\n```python\r\nxy =  [(104, 37), (109, 87)]\r\nradius = 3\r\nfill = (196, 196, 196, 255)\r\n\r\nfac = 5\r\nwidth, height = (xy[1][0] - xy[0][0]) * fac, (xy[1][1] - xy[0][1]) * fac\r\nimg = Image.new('RGBA', (width, height))\r\nimage_draw = ImageDraw.Draw(img)\r\nimage_draw.rounded_rectangle([(0, 0), (width, height)], radius * fac, fill=fill)\r\nimg.save('test.png')  # <- Image was taken from here\r\nimg = img.resize((int(width / fac), int(height / fac)), Image.ANTIALIAS)\r\nimage.paste(img, (xy[0][0], xy[0][1]), img)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5375", "id": 848310295, "node_id": "MDU6SXNzdWU4NDgzMTAyOTU=", "number": 5375, "title": "ImageOps.expand distorts image and converts png to grayscale", "user": {"login": "glisignoli", "id": 336538, "node_id": "MDQ6VXNlcjMzNjUzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/336538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glisignoli", "html_url": "https://github.com/glisignoli", "followers_url": "https://api.github.com/users/glisignoli/followers", "following_url": "https://api.github.com/users/glisignoli/following{/other_user}", "gists_url": "https://api.github.com/users/glisignoli/gists{/gist_id}", "starred_url": "https://api.github.com/users/glisignoli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glisignoli/subscriptions", "organizations_url": "https://api.github.com/users/glisignoli/orgs", "repos_url": "https://api.github.com/users/glisignoli/repos", "events_url": "https://api.github.com/users/glisignoli/events{/privacy}", "received_events_url": "https://api.github.com/users/glisignoli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-04-01T09:47:05Z", "updated_at": "2021-06-29T12:07:09Z", "closed_at": "2021-06-29T12:07:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\nResize an image and add a black border\r\n\r\n### What did you expect to happen?\r\nImage would be resized with a black border\r\n\r\n### What actually happened?\r\nImage is distorted converted to grayscale, resized and border added\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Fedora 33\r\n* Python: 3.8.6\r\n* Pillow: 8.1.2\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```shell\r\ngit clone https://github.com/hampusborgos/country-flags.git\r\ncd country-flags/png1000px\r\n```\r\n\r\n```python\r\nfrom PIL import Image, ImageOps\r\ni = Image.open('./bo.png')\r\ni = i.resize((128,96))\r\n\r\n# File saves correctly\r\ni.save('./test.png')\r\n\r\ni = ImageOps.expand(i, border=10, fill='black')\r\n\r\n# File gets converted to grayscale and is distorted\r\ni.save('./test.png')\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5375/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5274", "id": 811805036, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc2Mjc2ODM0", "number": 5274, "title": "Fixed linear_gradient and radial_gradient I and F modes", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-19T08:12:52Z", "updated_at": "2021-03-28T20:47:23Z", "closed_at": "2021-03-28T13:35:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5274", "html_url": "https://github.com/python-pillow/Pillow/pull/5274", "diff_url": "https://github.com/python-pillow/Pillow/pull/5274.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5274.patch", "merged_at": "2021-03-28T13:35:22Z"}, "body": "Resolves #5272\r\n\r\n`Image.linear_gradient(\"I\")`, `Image.linear_gradient(\"F\")`, `Image.radial_gradient(\"I\")` and `Image.radial_gradient(\"F\")` all currently segfault. This fixes them.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5274/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272/events", "html_url": "https://github.com/python-pillow/Pillow/issues/5272", "id": 810833039, "node_id": "MDU6SXNzdWU4MTA4MzMwMzk=", "number": 5272, "title": "Segmentation fault when creating gradient images with mode \"F\"", "user": {"login": "derhintze", "id": 25172489, "node_id": "MDQ6VXNlcjI1MTcyNDg5", "avatar_url": "https://avatars.githubusercontent.com/u/25172489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derhintze", "html_url": "https://github.com/derhintze", "followers_url": "https://api.github.com/users/derhintze/followers", "following_url": "https://api.github.com/users/derhintze/following{/other_user}", "gists_url": "https://api.github.com/users/derhintze/gists{/gist_id}", "starred_url": "https://api.github.com/users/derhintze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derhintze/subscriptions", "organizations_url": "https://api.github.com/users/derhintze/orgs", "repos_url": "https://api.github.com/users/derhintze/repos", "events_url": "https://api.github.com/users/derhintze/events{/privacy}", "received_events_url": "https://api.github.com/users/derhintze/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-18T07:18:00Z", "updated_at": "2021-03-28T13:35:22Z", "closed_at": "2021-03-28T13:35:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n```pycon\r\nPython 3.9.1 (default, Jan 13 2021, 15:21:08) \r\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-44)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import PIL\r\n>>> print(PIL.__version__)\r\n8.0.1\r\n>>> import PIL.Image as pimage\r\n>>> image1 = pimage.linear_gradient(\"L\")\r\n>>> image2 = pimage.linear_gradient(\"F\")\r\nSegmentation fault\r\n```\r\n\r\n### What did you expect to happen?\r\nNot segfaulting.\r\n\r\n### What actually happened?\r\nSegfaulted.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Red Hat 4.8.5-44\r\n* Python: Python 3.9.1\r\n* Pillow: 8.0.1\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183/events", "html_url": "https://github.com/python-pillow/Pillow/pull/5183", "id": 778803713, "node_id": "MDExOlB1bGxSZXF1ZXN0NTQ4ODQwMjMz", "number": 5183, "title": "Only draw each rectangle outline pixel once", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-05T09:30:34Z", "updated_at": "2021-03-07T21:08:34Z", "closed_at": "2021-03-07T10:25:46Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/5183", "html_url": "https://github.com/python-pillow/Pillow/pull/5183", "diff_url": "https://github.com/python-pillow/Pillow/pull/5183.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/5183.patch", "merged_at": "2021-03-07T10:25:45Z"}, "body": "Resolves #5182\r\n\r\n`ImagingDrawRectangle` draws four individual lines to make up a rectangle, including each corner twice.\r\nThis becomes apparent when the lines are drawn with partial opacity, and the repeated drawing of the corner pixels changes the final opacity.\r\n\r\nThis PR updates the function to only draw each corner pixel once, similar to #4333", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/5183/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4942", "id": 714064946, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk3MjU3NDg3", "number": 4942, "title": "Fixed bug in Exif __delitem__", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-03T11:01:28Z", "updated_at": "2020-10-05T08:02:25Z", "closed_at": "2020-10-05T07:15:02Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4942", "html_url": "https://github.com/python-pillow/Pillow/pull/4942", "diff_url": "https://github.com/python-pillow/Pillow/pull/4942.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4942.patch", "merged_at": "2020-10-05T07:15:02Z"}, "body": "In `Image.Exif`, `_info` refers to the `ImageFileDirectory_v2` instance. `_data` is the dictionary into which `_info` data is moved when it is accessed.\r\n\r\nAt the moment in `__delitem__`, if a key hasn't been moved from `_info` to `_data`, it is deleted from `_info`, but it then goes on to try and delete the key from `_data` as well, causing a `KeyError`, despite a successful deletion.\r\n\r\nThis PR changes it to only delete the key from one or the other.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4942/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4908", "id": 695686000, "node_id": "MDExOlB1bGxSZXF1ZXN0NDgxODg5ODM2", "number": 4908, "title": "Fixed effect_spread bug for zero distance", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-08T08:52:21Z", "updated_at": "2020-09-09T09:00:14Z", "closed_at": "2020-09-09T08:59:43Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4908", "html_url": "https://github.com/python-pillow/Pillow/pull/4908", "diff_url": "https://github.com/python-pillow/Pillow/pull/4908.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4908.patch", "merged_at": "2020-09-09T08:59:42Z"}, "body": "Resolves #4906\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/9e6dabf0e51b96146e4fa53642d3f8bf4a1ca460/src/PIL/Image.py#L2505-L2507\r\n\r\nIf you supply a `distance` of zero to `im.effect_spread`, then mod zero is attempted.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/9e6dabf0e51b96146e4fa53642d3f8bf4a1ca460/src/libImaging/Effects.c#L136-L137\r\n\r\nThis PR resolves that. Afterwards, a `distance` of zero simply copies the pixels. This makes sense to me - if you are spreading the pixels by a distance of zero, nothing changes.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4908/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4906", "id": 695409887, "node_id": "MDU6SXNzdWU2OTU0MDk4ODc=", "number": 4906, "title": "ImagingEffectSpread: 0 division error", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-07T22:03:53Z", "updated_at": "2020-09-09T08:59:43Z", "closed_at": "2020-09-09T08:59:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/python-pillow/Pillow/blob/4634eafe3c695a014267eefdce830b4a825beed7/src/libImaging/Effects.c#L136\r\n\r\n`distance` value is not checked in this function. So if `distance` value is `0` then happen `0` division error.\r\nNeed check this variable value before expression.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4885", "id": 684595832, "node_id": "MDExOlB1bGxSZXF1ZXN0NDcyNDU3MTQx", "number": 4885, "title": "Fixed duplicate variable name", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-24T11:38:03Z", "updated_at": "2020-08-24T21:30:01Z", "closed_at": "2020-08-24T14:36:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4885", "html_url": "https://github.com/python-pillow/Pillow/pull/4885", "diff_url": "https://github.com/python-pillow/Pillow/pull/4885.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4885.patch", "merged_at": "2020-08-24T14:36:30Z"}, "body": "A recreation of PR #4838, with a test added. The original PR had its repository deleted.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4885/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4866", "id": 679098634, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3OTM1MzI2", "number": 4866, "title": "Corrected inverted PDF CMYK colors", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-14T11:36:05Z", "updated_at": "2020-08-23T22:03:03Z", "closed_at": "2020-08-23T11:38:07Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4866", "html_url": "https://github.com/python-pillow/Pillow/pull/4866", "diff_url": "https://github.com/python-pillow/Pillow/pull/4866.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4866.patch", "merged_at": "2020-08-23T11:38:07Z"}, "body": "Resolves #4860\r\n\r\nSaving a CMYK image to PDF currently inverts the colors.\r\n\r\nGoogling, I found https://stackoverflow.com/questions/30352913/how-to-insert-cmyk-image-into-pdf-using-postscript about writing PostScript, which suggests that 'the samples returned from the JPEG image are simply inverted with respect to the PostScript CMYK colour model'.\r\n\r\nThis PR adds a Decode line, as per [this suggestion](https://graphicdesign.stackexchange.com/questions/12894/cmyk-jpegs-extracted-from-pdf-appear-inverted/15906#comment80828_15906), fixing the problem.\r\n\r\nGiven that Pillow can't read PDFs, I haven't added a test for this.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4866/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4860", "id": 678307476, "node_id": "MDU6SXNzdWU2NzgzMDc0NzY=", "number": 4860, "title": "Why does Pillow invert the color of a CMYK image when converting to PDF?", "user": {"login": "vinodMS", "id": 2227036, "node_id": "MDQ6VXNlcjIyMjcwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/2227036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vinodMS", "html_url": "https://github.com/vinodMS", "followers_url": "https://api.github.com/users/vinodMS/followers", "following_url": "https://api.github.com/users/vinodMS/following{/other_user}", "gists_url": "https://api.github.com/users/vinodMS/gists{/gist_id}", "starred_url": "https://api.github.com/users/vinodMS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vinodMS/subscriptions", "organizations_url": "https://api.github.com/users/vinodMS/orgs", "repos_url": "https://api.github.com/users/vinodMS/repos", "events_url": "https://api.github.com/users/vinodMS/events{/privacy}", "received_events_url": "https://api.github.com/users/vinodMS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-13T09:50:53Z", "updated_at": "2020-08-23T11:39:09Z", "closed_at": "2020-08-23T11:38:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n### What did you do?\r\nUsing PIL to open a JPEG(CMYK) and then save it as PDF\r\n\r\n### What did you expect to happen?\r\nA PDF with CMYK image.\r\n\r\n### What actually happened?\r\nA PDF with CMYK image but the colors are inverted. \r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Mac OS V 10.15.6\r\n* Python: 3.7.6 \r\n* Pillow: 6.2.2\r\n\r\n```python\r\nfrom PIL import Image, ImageOps\r\n\r\nimage = Image.open('door.jpg')\r\nimage.save(\r\n  'output.pdf',\r\n  resolution=180.0,\r\n  quality=100\r\n)\r\n```\r\n\r\ninput and output image\r\n![i7PYq](https://user-images.githubusercontent.com/2227036/90120460-0e4e5b00-dd5b-11ea-88bf-3d0df3b2d6c2.jpg)\r\n\r\nNote: I tried converting the image to RGB prior to saving it as PDF and it works as intended. But since the PDF is meant for printing purpose, I need the image to be in CMYK.\r\n\r\nSince I did not get an answer on Stackoverflow and it does seem like either a limitation in Pillow or perhaps not documented, i'm creating a ticket here. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4860/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4838", "id": 672184099, "node_id": "MDExOlB1bGxSZXF1ZXN0NDYyMjY2Njgz", "number": 4838, "title": "Fix exception handling when saving images", "user": {"login": "liZe", "id": 952243, "node_id": "MDQ6VXNlcjk1MjI0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/952243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liZe", "html_url": "https://github.com/liZe", "followers_url": "https://api.github.com/users/liZe/followers", "following_url": "https://api.github.com/users/liZe/following{/other_user}", "gists_url": "https://api.github.com/users/liZe/gists{/gist_id}", "starred_url": "https://api.github.com/users/liZe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liZe/subscriptions", "organizations_url": "https://api.github.com/users/liZe/orgs", "repos_url": "https://api.github.com/users/liZe/repos", "events_url": "https://api.github.com/users/liZe/events{/privacy}", "received_events_url": "https://api.github.com/users/liZe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-03T16:08:09Z", "updated_at": "2020-08-24T13:08:08Z", "closed_at": "2020-08-24T11:38:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4838", "html_url": "https://github.com/python-pillow/Pillow/pull/4838", "diff_url": "https://github.com/python-pillow/Pillow/pull/4838.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4838.patch", "merged_at": null}, "body": "The e variable is already used in the for loop, use exc to store the exception.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4838/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4830", "id": 670114916, "node_id": "MDU6SXNzdWU2NzAxMTQ5MTY=", "number": 4830, "title": "PIL doesn't seem to handle the color map correctly in some color indexed TGA files", "user": {"login": "innovara", "id": 1219020, "node_id": "MDQ6VXNlcjEyMTkwMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1219020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/innovara", "html_url": "https://github.com/innovara", "followers_url": "https://api.github.com/users/innovara/followers", "following_url": "https://api.github.com/users/innovara/following{/other_user}", "gists_url": "https://api.github.com/users/innovara/gists{/gist_id}", "starred_url": "https://api.github.com/users/innovara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/innovara/subscriptions", "organizations_url": "https://api.github.com/users/innovara/orgs", "repos_url": "https://api.github.com/users/innovara/repos", "events_url": "https://api.github.com/users/innovara/events{/privacy}", "received_events_url": "https://api.github.com/users/innovara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-31T18:56:28Z", "updated_at": "2021-06-20T12:44:39Z", "closed_at": "2021-06-20T12:44:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please see my question in [Stack Overflow](https://stackoverflow.com/questions/63151906/is-there-any-other-attribute-that-affetcts-how-colors-are-displayed-on-an-indexe) where I explain everything in greater detail and more importantly, where Mark Setchell explains why he thinks there is a bug in PIL when handling some color indexed TGA files.\r\n\r\nBasically, I am working with a sample color indexed TGA file to test a script that would invert its colors.\r\n\r\nBut before any of that, the issue is that PIL doesn't seem to handle the color map correctly when open it and the values of the color palette end up being wrong.\r\n\r\nThese are the sample files: [CCM8.TGA](https://www.fileformat.info/format/tga/sample/c36e10e31828483d832ef67561e20d5a/download) and [UCM8.TGA](https://www.fileformat.info/format/tga/sample/34402cd832c3456eb82628798f54709a/download).\r\nAnd you will see that if you open show any of them:\r\n```python\r\nfrom PIL import Image\r\nImage.open('CCM8.TGA').show()\r\n```\r\nPIL shows:\r\n![pQ6IH](https://user-images.githubusercontent.com/1219020/89067243-ce54a480-d366-11ea-91f1-f7c95b843d27.png)\r\nWhen it should be:\r\n![IpPCy](https://user-images.githubusercontent.com/1219020/89067319-f512db00-d366-11ea-9af7-e7c813be8669.png)\r\n\r\nAs I said, I wrote all the details on that post. If you want me to submit more information here, please let me know.\r\n\r\nI am using Pillow 7.0 on Fedora 32 and Python 3.8.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4747", "id": 648277971, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQyMTE0Nzcw", "number": 4747, "title": "Use correct function type for raqm_version_string", "user": {"login": "lukegb", "id": 246745, "node_id": "MDQ6VXNlcjI0Njc0NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/246745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukegb", "html_url": "https://github.com/lukegb", "followers_url": "https://api.github.com/users/lukegb/followers", "following_url": "https://api.github.com/users/lukegb/following{/other_user}", "gists_url": "https://api.github.com/users/lukegb/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukegb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukegb/subscriptions", "organizations_url": "https://api.github.com/users/lukegb/orgs", "repos_url": "https://api.github.com/users/lukegb/repos", "events_url": "https://api.github.com/users/lukegb/events{/privacy}", "received_events_url": "https://api.github.com/users/lukegb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-30T15:35:57Z", "updated_at": "2020-06-30T18:30:33Z", "closed_at": "2020-06-30T17:16:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4747", "html_url": "https://github.com/python-pillow/Pillow/pull/4747", "diff_url": "https://github.com/python-pillow/Pillow/pull/4747.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4747.patch", "merged_at": "2020-06-30T17:16:51Z"}, "body": "This causes compilation to (correctly) fail on Clang because this isn't the correct assignment type.\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Swaps dlsym/GetProcAddress cast for raqm_version_string from t_raqm_version_atleast to t_raqm_version_string.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4747/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4744", "id": 647324701, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQxMzcxMTI5", "number": 4744, "title": "Do not convert I;16 images when showing PNGs", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-29T12:18:03Z", "updated_at": "2020-06-29T22:49:39Z", "closed_at": "2020-06-29T17:23:09Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4744", "html_url": "https://github.com/python-pillow/Pillow/pull/4744", "diff_url": "https://github.com/python-pillow/Pillow/pull/4744.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4744.patch", "merged_at": "2020-06-29T17:23:08Z"}, "body": "Resolves #4729\r\n\r\nAs explained in https://github.com/python-pillow/Pillow/issues/4729#issuecomment-650178611, PNG can save I;16 images. Since Pillow has flawed I;16 conversion, avoiding conversion in this case fixes incorrect displaying of the image.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4744/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4742", "id": 647283622, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQxMzM2NDg5", "number": 4742, "title": "Fixed loading non-RGBA mode APNGs with dispose background", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-29T11:25:00Z", "updated_at": "2020-06-29T14:34:31Z", "closed_at": "2020-06-29T14:15:35Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4742", "html_url": "https://github.com/python-pillow/Pillow/pull/4742", "diff_url": "https://github.com/python-pillow/Pillow/pull/4742.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4742.patch", "merged_at": "2020-06-29T14:15:35Z"}, "body": "Resolves #4725\r\n\r\nThe problem is explained in https://github.com/python-pillow/Pillow/issues/4725#issuecomment-648678683 - the images do not have matching modes. This PR updates the new image mode to match the existing one. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4742/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4741", "id": 646861382, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQxMDE2MDY3", "number": 4741, "title": "Fixed ICNS file pointer saving", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-28T07:27:27Z", "updated_at": "2020-06-29T20:33:36Z", "closed_at": "2020-06-29T17:21:52Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4741", "html_url": "https://github.com/python-pillow/Pillow/pull/4741", "diff_url": "https://github.com/python-pillow/Pillow/pull/4741.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4741.patch", "merged_at": "2020-06-29T17:21:52Z"}, "body": "Resolves #4732\r\n\r\nThe scenario from the issue is\r\n```python\r\nfp = io.BytesIO()\r\nim.save(fp, format=\"ICNS\")\r\n```\r\nIt fails for ICNS due the use of the `iconutil` command line tool, rather than the usual writing to `fp`. This resolves it by creating a temporary file.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4741/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4732", "id": 646470165, "node_id": "MDU6SXNzdWU2NDY0NzAxNjU=", "number": 4732, "title": "CalledProcessError saving icns file to io.BytesIO()", "user": {"login": "jeffre", "id": 548078, "node_id": "MDQ6VXNlcjU0ODA3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/548078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffre", "html_url": "https://github.com/jeffre", "followers_url": "https://api.github.com/users/jeffre/followers", "following_url": "https://api.github.com/users/jeffre/following{/other_user}", "gists_url": "https://api.github.com/users/jeffre/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffre/subscriptions", "organizations_url": "https://api.github.com/users/jeffre/orgs", "repos_url": "https://api.github.com/users/jeffre/repos", "events_url": "https://api.github.com/users/jeffre/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-26T19:34:36Z", "updated_at": "2020-06-29T17:21:52Z", "closed_at": "2020-06-29T17:21:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently, writing an icns file to an io.ByteIO object fails. This operation is supported by other filetypes (jpg, png, ico, etc) so I'm not clear if this report falls under feature request or bug\r\n\r\n### What did you do?\r\nWrite icns file to io.BytesIO() object\r\n```python\r\nfrom PIL import Image\r\nimport io\r\nimport base64\r\n\r\nim = Image.new(mode=\"RGBA\", size=(256,256), color=(0,100,246,255))\r\nf = io.BytesIO()\r\nim.save(fp=f, format=\"icns\")\r\n\r\nb64 = base64.b64encode(f.getvalue()).decode()\r\nprint(f'Image: {b64}')\r\n```\r\n\r\n### What did you expect to happen?\r\nFill the io.BytesIO object \r\n\r\n### What actually happened?\r\nmacOS's iconutil failed because it was provided an empty filename for output (-o)\r\n```bash\r\nsubprocess.CalledProcessError: Command '['iconutil', '-c', 'icns', '-o', '', '/var/folders/91/q75bkgks1196cr1rsr0399540000gn/T/tmppmsm3z2y.iconset']' returned non-zero exit status 1.\r\n```\r\n\r\nI believe one solution would be if `filename` variable is empty then use a dummy name and after popen returns, read the file from disk.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: macOS Mojave 10.14.6\r\n* Python: 3.7.7\r\n* Pillow: 7.1.2", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4732/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4729", "id": 645608775, "node_id": "MDU6SXNzdWU2NDU2MDg3NzU=", "number": 4729, "title": "Image.show() problem with I;16 mode TIFFs", "user": {"login": "feldroop", "id": 62176388, "node_id": "MDQ6VXNlcjYyMTc2Mzg4", "avatar_url": "https://avatars.githubusercontent.com/u/62176388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feldroop", "html_url": "https://github.com/feldroop", "followers_url": "https://api.github.com/users/feldroop/followers", "following_url": "https://api.github.com/users/feldroop/following{/other_user}", "gists_url": "https://api.github.com/users/feldroop/gists{/gist_id}", "starred_url": "https://api.github.com/users/feldroop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feldroop/subscriptions", "organizations_url": "https://api.github.com/users/feldroop/orgs", "repos_url": "https://api.github.com/users/feldroop/repos", "events_url": "https://api.github.com/users/feldroop/events{/privacy}", "received_events_url": "https://api.github.com/users/feldroop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-25T14:26:44Z", "updated_at": "2020-06-29T17:23:09Z", "closed_at": "2020-06-29T17:23:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n\r\nLoaded a 16 bit integer TIFF file and showed it.\r\n\r\n### What did you expect to happen?\r\n\r\nThat the image looks exactly the same as when opened manually.\r\n\r\n### What actually happened?\r\n\r\nIt looked very different. \r\n\r\nI can't share the original image I am working with, but it becomes almost completely white, whereas it was mostly black before. \r\n\r\nI generated another example (code below). I can't upload it here, because GitHub doesn't accept .tif. \r\n\r\nThe black one on the left side is the actual correct one opened manually.\r\n\r\n![Screenshot ](https://user-images.githubusercontent.com/62176388/85736642-f2d1b700-b6fe-11ea-9528-e196d0e89138.png)\r\n\r\n The problem might be the temporary conversion to BMP. (Uneducated guess)\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10 and WSL Ubuntu 18.04\r\n* Python: 3.8.2\r\n* Pillow: 7.1.2\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```python\r\nfrom PIL import Image \r\n\r\n# code used to generate the example image\r\n# img = Image.new('I;16', (1000,1000), 70)\r\n\r\n# code that causes issue\r\nwith Image.open('test_generated.tif') as img:\r\n    print(img.mode) # I;16\r\n    print(img.format) # TIFF \r\n    img.show()\r\n```\r\n\r\nEDIT:\r\n[test_generated.zip](https://github.com/python-pillow/Pillow/files/4836715/test_generated.zip)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4729/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4726", "id": 644441979, "node_id": "MDExOlB1bGxSZXF1ZXN0NDM5MDYyNjg0", "number": 4726, "title": "APNG: Fix setting disposal", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 108860028, "node_id": "MDU6TGFiZWwxMDg4NjAwMjg=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Cleanup", "name": "Cleanup", "color": "d4c5f9", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-24T08:56:44Z", "updated_at": "2020-06-29T14:14:49Z", "closed_at": "2020-06-29T14:01:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4726", "html_url": "https://github.com/python-pillow/Pillow/pull/4726", "diff_url": "https://github.com/python-pillow/Pillow/pull/4726.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4726.patch", "merged_at": "2020-06-29T14:01:16Z"}, "body": "Changes proposed in this pull request:\r\n\r\n * This looks like a bug: should assign, rather than a comparison that has no effect\r\n * I don't have a test, but they pass before and after\r\n * https://github.com/python-pillow/Pillow/issues/4725 isn't fixed by this \r\n\r\ncc @pmrowla \r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4726/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4725", "id": 644218531, "node_id": "MDU6SXNzdWU2NDQyMTg1MzE=", "number": 4725, "title": "Error on saving APNG", "user": {"login": "dhsdshdhk", "id": 28062763, "node_id": "MDQ6VXNlcjI4MDYyNzYz", "avatar_url": "https://avatars.githubusercontent.com/u/28062763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhsdshdhk", "html_url": "https://github.com/dhsdshdhk", "followers_url": "https://api.github.com/users/dhsdshdhk/followers", "following_url": "https://api.github.com/users/dhsdshdhk/following{/other_user}", "gists_url": "https://api.github.com/users/dhsdshdhk/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhsdshdhk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhsdshdhk/subscriptions", "organizations_url": "https://api.github.com/users/dhsdshdhk/orgs", "repos_url": "https://api.github.com/users/dhsdshdhk/repos", "events_url": "https://api.github.com/users/dhsdshdhk/events{/privacy}", "received_events_url": "https://api.github.com/users/dhsdshdhk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-23T23:51:26Z", "updated_at": "2020-06-29T18:27:03Z", "closed_at": "2020-06-29T14:15:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\nI opened a PNG image that behaves sort of like a GIF , then I tried to save.\r\n\r\n### What did you expect to happen?\r\nNo error, image saved normally.\r\n\r\n### What actually happened?\r\n\r\n`Traceback (most recent call last):                                                                                        File \"<stdin>\", line 1, in <module>                                                                                     File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 2100, in save                                                     self._ensure_mutable()                                                                                                File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 617, in _ensure_mutable                                           self._copy()                                                                                                          File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 610, in _copy                                                     self.load()                                                                                                           File \"C:\\Python38\\lib\\site-packages\\PIL\\ImageFile.py\", line 262, in load                                                  self.load_end()                                                                                                       File \"C:\\Python38\\lib\\site-packages\\PIL\\PngImagePlugin.py\", line 921, in load_end                                         self._prev_im.paste(dispose, self.dispose_extent)                                                                   ValueError: images do not match  `\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n\r\n* OS: Windows 10\r\n* Python: 3.8.3\r\n* Pillow: 7.1.2\r\n\r\n```python\r\nfrom PIL import Image\r\nim = Image.open('problem.png')\r\nim.save('out.png')\r\n\r\n```\r\n![problem](https://user-images.githubusercontent.com/28062763/85478800-4b844100-b593-11ea-8662-478de5d8c41b.png)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4684", "id": 637531686, "node_id": "MDU6SXNzdWU2Mzc1MzE2ODY=", "number": 4684, "title": "BLP1 files are not handled", "user": {"login": "Meithal", "id": 12249929, "node_id": "MDQ6VXNlcjEyMjQ5OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/12249929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Meithal", "html_url": "https://github.com/Meithal", "followers_url": "https://api.github.com/users/Meithal/followers", "following_url": "https://api.github.com/users/Meithal/following{/other_user}", "gists_url": "https://api.github.com/users/Meithal/gists{/gist_id}", "starred_url": "https://api.github.com/users/Meithal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Meithal/subscriptions", "organizations_url": "https://api.github.com/users/Meithal/orgs", "repos_url": "https://api.github.com/users/Meithal/repos", "events_url": "https://api.github.com/users/Meithal/events{/privacy}", "received_events_url": "https://api.github.com/users/Meithal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-12T06:59:29Z", "updated_at": "2022-02-19T09:03:36Z", "closed_at": "2022-02-19T09:03:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### What did you do?\r\nI tried to open a BLP1 file\r\n### What did you expect to happen?\r\nI expected to see the image\r\n### What actually happened?\r\nI saw a black square\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows10 x64\r\n* Python: 3.7\r\n* Pillow: 7.2\r\n\r\nYou first need a blp1 picture, I think it is a proprietary format so i'm not sure I can put one here\r\nTo easily get one go on https://www.epicwar.com, download a map then open it with a MPQ viewer, every map has a thumbnail in the blp1 format.\r\n```python\r\nfrom PIL import Image\r\nwith Image.open(\"file.blp\") as pil:\r\n    convert = pil.convert('RGB')\r\n    convert.show()\r\n    convert.save((work_folder / name).with_suffix('.jpg'))\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4684/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4674", "id": 632414036, "node_id": "MDU6SXNzdWU2MzI0MTQwMzY=", "number": 4674, "title": "Odd behaviour of ImageDraw.Draw.polygon", "user": {"login": "jmsteitz", "id": 14905966, "node_id": "MDQ6VXNlcjE0OTA1OTY2", "avatar_url": "https://avatars.githubusercontent.com/u/14905966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmsteitz", "html_url": "https://github.com/jmsteitz", "followers_url": "https://api.github.com/users/jmsteitz/followers", "following_url": "https://api.github.com/users/jmsteitz/following{/other_user}", "gists_url": "https://api.github.com/users/jmsteitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmsteitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmsteitz/subscriptions", "organizations_url": "https://api.github.com/users/jmsteitz/orgs", "repos_url": "https://api.github.com/users/jmsteitz/repos", "events_url": "https://api.github.com/users/jmsteitz/events{/privacy}", "received_events_url": "https://api.github.com/users/jmsteitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-06T12:02:56Z", "updated_at": "2020-06-08T05:57:03Z", "closed_at": "2020-06-08T05:57:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\nI drew two polygons, each specified by only two vertices that are both on a vertical or horizontal line.\r\n\r\n### What did you expect to happen?\r\nExpected to get a one pixel wide vertical and a one pixel wide horizontal line.\r\n\r\n### What actually happened?\r\nThe vertical line shows but not the horizontal one.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Ubuntu 18.04.4\r\n* Python: 3.7.6\r\n* Pillow: 7.1.1\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```python\r\nimport numpy as np\r\nfrom PIL import Image, ImageDraw\r\nimg = Image.new(\"L\", size=(2,2), color=0)\r\nImageDraw.Draw(img).polygon([(0,0),(0,1)], outline=1, fill=1)\r\nnp.array(img)\r\n```\r\n\r\ngives\r\n\r\n```python\r\narray([[1, 0],\r\n       [1, 0]], dtype=uint8)\r\n```\r\nbut \r\n```python\r\nimport numpy as np\r\nfrom PIL import Image, ImageDraw\r\nimg = Image.new(\"L\", size=(2,2), color=0)\r\nImageDraw.Draw(img).polygon([(0,0),(1,0)], outline=1, fill=1)\r\nnp.array(img)\r\n```\r\nresults in \r\n```python\r\narray([[0, 0],\r\n       [0, 0]], dtype=uint8)\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4674/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4665", "id": 629278076, "node_id": "MDU6SXNzdWU2MjkyNzgwNzY=", "number": 4665, "title": "EXIF tobytes: TypeError: bad operand type for abs(): 'tuple'", "user": {"login": "andreymal", "id": 3236464, "node_id": "MDQ6VXNlcjMyMzY0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3236464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreymal", "html_url": "https://github.com/andreymal", "followers_url": "https://api.github.com/users/andreymal/followers", "following_url": "https://api.github.com/users/andreymal/following{/other_user}", "gists_url": "https://api.github.com/users/andreymal/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreymal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreymal/subscriptions", "organizations_url": "https://api.github.com/users/andreymal/orgs", "repos_url": "https://api.github.com/users/andreymal/repos", "events_url": "https://api.github.com/users/andreymal/events{/privacy}", "received_events_url": "https://api.github.com/users/andreymal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-02T15:03:59Z", "updated_at": "2020-06-10T05:51:37Z", "closed_at": "2020-06-10T05:51:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "*(It seems there is a lot of tobytes bugs... There is another one)*\r\n\r\nI have a photo rotated by Windows Explorer and I want to exif_transpose it: https://cdn.everypony.ru/storage/01/42/24/2020/06/02/c2fe022fd2.jpg\r\n\r\nIt seems that EXIF is broken here, but some applications can read it. For example, Firefox and Chrome can rotate it properly. And I want to rotate it by Pillow, but it fails because of tobytes.\r\n\r\nCould Pillow simply ignore invalid tags, for example?\r\n\r\n```python\r\nPIL.Image.open('c2fe022fd2.jpg').getexif().tobytes()\r\n```\r\n\r\n```\r\nsite-packages/PIL/TiffImagePlugin.py:588: UserWarning: Metadata Warning, tag 282 had too many entries: 2, expected 1\r\n  warnings.warn(\r\nsite-packages/PIL/TiffImagePlugin.py:588: UserWarning: Metadata Warning, tag 283 had too many entries: 2, expected 1\r\n  warnings.warn(\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"site-packages/PIL/Image.py\", line 3292, in tobytes\r\n    return b\"Exif\\x00\\x00\" + head + ifd.tobytes(offset)\r\n  File \"site-packages/PIL/TiffImagePlugin.py\", line 808, in tobytes\r\n    data = self._write_dispatch[typ](self, *values)\r\n  File \"site-packages/PIL/TiffImagePlugin.py\", line 692, in write_rational\r\n    return b\"\".join(\r\n  File \"site-packages/PIL/TiffImagePlugin.py\", line 693, in <genexpr>\r\n    self._pack(\"2L\", *_limit_rational(frac, 2 ** 32 - 1)) for frac in values\r\n  File \"site-packages/PIL/TiffImagePlugin.py\", line 261, in _limit_rational\r\n    inv = abs(val) > 1\r\nTypeError: bad operand type for abs(): 'tuple'\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4625", "id": 618797034, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE4NDUzNjEz", "number": 4625, "title": "Fixed ZeroDivisionError in Image.thumbnail", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-15T08:35:04Z", "updated_at": "2020-05-25T20:38:41Z", "closed_at": "2020-05-25T14:08:26Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4625", "html_url": "https://github.com/python-pillow/Pillow/pull/4625", "diff_url": "https://github.com/python-pillow/Pillow/pull/4625.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4625.patch", "merged_at": "2020-05-25T14:08:26Z"}, "body": "Resolves #4624", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4625/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4624", "id": 618316219, "node_id": "MDU6SXNzdWU2MTgzMTYyMTk=", "number": 4624, "title": "Division by zero when creating a thumbnail", "user": {"login": "tbsnap", "id": 5442847, "node_id": "MDQ6VXNlcjU0NDI4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5442847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbsnap", "html_url": "https://github.com/tbsnap", "followers_url": "https://api.github.com/users/tbsnap/followers", "following_url": "https://api.github.com/users/tbsnap/following{/other_user}", "gists_url": "https://api.github.com/users/tbsnap/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbsnap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbsnap/subscriptions", "organizations_url": "https://api.github.com/users/tbsnap/orgs", "repos_url": "https://api.github.com/users/tbsnap/repos", "events_url": "https://api.github.com/users/tbsnap/events{/privacy}", "received_events_url": "https://api.github.com/users/tbsnap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-14T15:18:16Z", "updated_at": "2020-05-25T21:41:38Z", "closed_at": "2020-05-25T14:08:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nSorry if this as already been reported, but when trying to create a thumbnail (80, 80) from an image (550, 5)  I get a divide by zero \r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<interactive input>\", line 1, in <module>\r\n  File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 2279, in thumbnail\r\n    y = round_aspect(x / aspect, key=lambda n: abs(aspect - x / n))\r\n  File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 2272, in round_aspect\r\n    return max(min(math.floor(number), math.ceil(number), key=key), 1)\r\n  File \"C:\\Python38\\lib\\site-packages\\PIL\\Image.py\", line 2279, in <lambda>\r\n    y = round_aspect(x / aspect, key=lambda n: abs(aspect - x / n))\r\nZeroDivisionError: division by zero\r\n```\r\nIt looks like the key (n) can be be zero so perhaps the code needs to test for it?\r\n\r\nTim\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4624/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4622", "id": 617213416, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE3MTczMDk4", "number": 4622, "title": "Fix broken string in test error message", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 753745246, "node_id": "MDU6TGFiZWw3NTM3NDUyNDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Testing", "name": "Testing", "color": "d93f0b", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-13T07:31:14Z", "updated_at": "2020-05-13T12:08:15Z", "closed_at": "2020-05-13T11:19:58Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4622", "html_url": "https://github.com/python-pillow/Pillow/pull/4622", "diff_url": "https://github.com/python-pillow/Pillow/pull/4622.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4622.patch", "merged_at": "2020-05-13T11:19:58Z"}, "body": "Hasn't cropped up because the test is passing :)\r\n\r\n# Demo\r\n\r\n```python\r\naverage_diff = 2\r\nmax_average_diff = 1\r\nband = \"R\"\r\n\r\n# broken\r\nmsg = \"average pixel value difference {:.4f} > expected {:.4f} \"\r\n\"for '{}' band\".format(average_diff, max_average_diff, band)\r\n\r\nprint(msg)\r\n\r\n# fixed\r\nmsg = (\r\n    \"average pixel value difference {:.4f} > expected {:.4f} \"\r\n    \"for '{}' band\".format(average_diff, max_average_diff, band)\r\n)\r\n\r\nprint(msg)\r\n```\r\n```\r\naverage pixel value difference {:.4f} > expected {:.4f}\r\naverage pixel value difference 2.0000 > expected 1.0000 for 'R' band\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4622/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4620", "id": 615993166, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE2MTkzMzAz", "number": 4620, "title": "Fix repeatedly loading .gbr", "user": {"login": "ElinksFr", "id": 32840264, "node_id": "MDQ6VXNlcjMyODQwMjY0", "avatar_url": "https://avatars.githubusercontent.com/u/32840264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ElinksFr", "html_url": "https://github.com/ElinksFr", "followers_url": "https://api.github.com/users/ElinksFr/followers", "following_url": "https://api.github.com/users/ElinksFr/following{/other_user}", "gists_url": "https://api.github.com/users/ElinksFr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ElinksFr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ElinksFr/subscriptions", "organizations_url": "https://api.github.com/users/ElinksFr/orgs", "repos_url": "https://api.github.com/users/ElinksFr/repos", "events_url": "https://api.github.com/users/ElinksFr/events{/privacy}", "received_events_url": "https://api.github.com/users/ElinksFr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-11T15:54:36Z", "updated_at": "2020-05-17T01:34:58Z", "closed_at": "2020-05-17T01:34:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4620", "html_url": "https://github.com/python-pillow/Pillow/pull/4620", "diff_url": "https://github.com/python-pillow/Pillow/pull/4620.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4620.patch", "merged_at": "2020-05-17T01:34:58Z"}, "body": ".gbr files are not usable since on each `load()` we try to load the image from the file buffer.\r\nThis lead to an error on the second `load()` since the buffer is empty (we reached the end of the file).\r\n\r\nChanges proposed in this pull request:\r\n * read from the file only if `self.im is None`\r\n * a basic test doing 2 `crop` in a row that would crash without the fix", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4620/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4580", "id": 606138763, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA4NDA4MzI0", "number": 4580, "title": "Fixed drawing a jointed line with a sequence of numeric values", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-24T08:30:53Z", "updated_at": "2020-06-04T10:37:12Z", "closed_at": "2020-06-04T09:03:26Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4580", "html_url": "https://github.com/python-pillow/Pillow/pull/4580", "diff_url": "https://github.com/python-pillow/Pillow/pull/4580.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4580.patch", "merged_at": "2020-06-04T09:03:26Z"}, "body": "Resolves #4579\r\n\r\nThe issue reports that\r\n```python\r\ndraw.line(((400, 200), (300, 280), (100, 280)), 0, 50, joint='curve')\r\n```\r\nworks, but\r\n```python\r\ndraw.line((400, 200, 300, 280, 100, 280), 0, 50, joint='curve')\r\n```\r\ndoes not.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4580/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4579", "id": 605945449, "node_id": "MDU6SXNzdWU2MDU5NDU0NDk=", "number": 4579, "title": "Bug with line joints", "user": {"login": "LeonLenclos", "id": 19581526, "node_id": "MDQ6VXNlcjE5NTgxNTI2", "avatar_url": "https://avatars.githubusercontent.com/u/19581526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeonLenclos", "html_url": "https://github.com/LeonLenclos", "followers_url": "https://api.github.com/users/LeonLenclos/followers", "following_url": "https://api.github.com/users/LeonLenclos/following{/other_user}", "gists_url": "https://api.github.com/users/LeonLenclos/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeonLenclos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeonLenclos/subscriptions", "organizations_url": "https://api.github.com/users/LeonLenclos/orgs", "repos_url": "https://api.github.com/users/LeonLenclos/repos", "events_url": "https://api.github.com/users/LeonLenclos/events{/privacy}", "received_events_url": "https://api.github.com/users/LeonLenclos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-23T23:54:18Z", "updated_at": "2020-06-04T09:03:26Z", "closed_at": "2020-06-04T09:03:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nWhen I use the `joint='curve'` attribute on the line method with a sequence of numeric value, I get an error.\r\n\r\n### What did you expect to happen?\r\n\r\n[The documentation say](https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.line) that you can pass *Sequence of either 2-tuples or numeric values*.\r\n\r\nSo, this should work:\r\n```pycon\r\n>>> from PIL import Image, ImageDraw\r\n>>> im = Image.new('RGB', (800, 600))\r\n>>> draw = ImageDraw.Draw(im)\r\n>>> draw.line((400, 200, 300, 280, 100, 280), 0, 50, joint='curve')\r\n```\r\n\r\n\r\n### What actually happened?\r\n\r\n *Sequence of 2-tuples*  and `joint='curve'` works fine :\r\n\r\n```pycon\r\n>>> draw.line(((400, 200), (300, 280), (100, 280)), 0, 50, joint='curve')\r\n```\r\n\r\n*Sequence of numeric values*, but no `joint='curve'` works fine : \r\n\r\n```pycon\r\n>>> draw.line((400,200,300,280,100,280), 0, 50)\r\n```\r\n\r\n*Sequence of numeric values*   and `joint='curve'` doesn't work :\r\n```pycon\r\n>>> draw.line((400,200,300,280,100,280), 0, 50, joint='curve')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/leon/virtualenvs/ogn/lib/python3.5/site-packages/PIL/ImageDraw.py\", line 165, in line\r\n    for start, end in ((xy[i-1], point), (point, xy[i+1]))\r\n  File \"/home/leon/virtualenvs/ogn/lib/python3.5/site-packages/PIL/ImageDraw.py\", line 165, in <listcomp>\r\n    for start, end in ((xy[i-1], point), (point, xy[i+1]))\r\nTypeError: 'int' object is not subscriptable\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Debian Linux\r\n* Python: 3.5.3\r\n* Pillow: '5.4.1'\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4569", "id": 602988635, "node_id": "MDU6SXNzdWU2MDI5ODg2MzU=", "number": 4569, "title": "Absent pixels when drawing font", "user": {"login": "gaoxinge", "id": 16648345, "node_id": "MDQ6VXNlcjE2NjQ4MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/16648345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaoxinge", "html_url": "https://github.com/gaoxinge", "followers_url": "https://api.github.com/users/gaoxinge/followers", "following_url": "https://api.github.com/users/gaoxinge/following{/other_user}", "gists_url": "https://api.github.com/users/gaoxinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaoxinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaoxinge/subscriptions", "organizations_url": "https://api.github.com/users/gaoxinge/orgs", "repos_url": "https://api.github.com/users/gaoxinge/repos", "events_url": "https://api.github.com/users/gaoxinge/events{/privacy}", "received_events_url": "https://api.github.com/users/gaoxinge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 638190364, "node_id": "MDU6TGFiZWw2MzgxOTAzNjQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Font%20Rendering", "name": "Font Rendering", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-20T06:50:25Z", "updated_at": "2020-12-21T05:43:32Z", "closed_at": "2020-12-21T05:42:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n\r\n- I use pillow to draw font.\r\n\r\n### What actually happened?\r\n\r\n![1](https://user-images.githubusercontent.com/16648345/79721975-d63b8c00-8315-11ea-802d-094c8f1c084d.png)\r\n\r\n- I observe there are some absence pixels on the top of numbers: `0`, `2`, `3`, `8`, `9` .\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: win10\r\n* Python: 3.6.1\r\n* Pillow: 7.1.1\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```python\r\nfrom PIL import Image, ImageFont, ImageDraw\r\n\r\nttf_path = \"vista-hei-all.ttf\"\r\ntext = \"0123456789\"\r\ntext_size = 35\r\n\r\nfont = ImageFont.truetype(ttf_path, text_size)\r\ntext_width, text_height = font.getsize(text)\r\ncanvas = Image.new(\"RGBA\", [text_width, text_height], (255, 0, 0, 0))\r\ndraw = ImageDraw.Draw(canvas)\r\ndraw.text((0, 0), text, font=font, fill=\"#000000\")\r\ncanvas.show()\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4569/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4561", "id": 600975990, "node_id": "MDExOlB1bGxSZXF1ZXN0NDA0MzA0NzAw", "number": 4561, "title": "Fix pickling WebP", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 702951818, "node_id": "MDU6TGFiZWw3MDI5NTE4MTg=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/WebP", "name": "WebP", "color": "8ae234", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-16T11:40:35Z", "updated_at": "2020-11-21T20:41:53Z", "closed_at": "2020-04-17T11:48:50Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4561", "html_url": "https://github.com/python-pillow/Pillow/pull/4561", "diff_url": "https://github.com/python-pillow/Pillow/pull/4561.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4561.patch", "merged_at": "2020-04-17T11:48:50Z"}, "body": "Fixes #4559. \r\n\r\nChanges proposed in this pull request:\r\n\r\n * Fix pickling and unpickling WebP\r\n * Refactor some similar tests to use `pytest.mark.parametrize` to reduce duplication and make tests independent\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4561/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4557", "id": 600117566, "node_id": "MDU6SXNzdWU2MDAxMTc1NjY=", "number": 4557, "title": "Text outline on a transparent background", "user": {"login": "ODtian", "id": 40318251, "node_id": "MDQ6VXNlcjQwMzE4MjUx", "avatar_url": "https://avatars.githubusercontent.com/u/40318251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ODtian", "html_url": "https://github.com/ODtian", "followers_url": "https://api.github.com/users/ODtian/followers", "following_url": "https://api.github.com/users/ODtian/following{/other_user}", "gists_url": "https://api.github.com/users/ODtian/gists{/gist_id}", "starred_url": "https://api.github.com/users/ODtian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ODtian/subscriptions", "organizations_url": "https://api.github.com/users/ODtian/orgs", "repos_url": "https://api.github.com/users/ODtian/repos", "events_url": "https://api.github.com/users/ODtian/events{/privacy}", "received_events_url": "https://api.github.com/users/ODtian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T08:26:54Z", "updated_at": "2020-06-20T12:03:00Z", "closed_at": "2020-06-20T12:03:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n```python\r\nbg_img = Image.new('RGB', charsize, color)\r\nmask_img = Image.new('L', bg_img.size, 0)\r\ndraw = ImageDraw.Draw(mask_img)\r\ndraw.text((0, 0), letter, font=font, fill='white')\r\nbg_img.putalpha(mask_img)    \r\n```\r\nI try to draw a char on a total transparent background, however there are some black outlines on text,it should not be happened since background is transparent.There are other post about this:\r\n\r\nhttps://stackoverflow.com/questions/14442086/pils-image-paste-operation-degrades-image-drawn-text-quality/14444743#14444743\r\nand\r\n\r\nhttps://nedbatchelder.com/blog/200801/truly_transparent_text_with_pil.html\r\n\r\nit's 12 years passed, any solutions?\r\n### What did you expect to happen?\r\n\r\n### What actually happened?\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: \r\n* Python: \r\n* Pillow: \r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\n\r\n```python\r\nbg_img = Image.new('RGB', charsize, color)\r\nmask_img = Image.new('L', bg_img.size, 0)\r\ndraw = ImageDraw.Draw(mask_img)\r\ndraw.text((0, 0), letter, font=font, fill='white')\r\nbg_img.putalpha(mask_img)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4553", "id": 599080863, "node_id": "MDU6SXNzdWU1OTkwODA4NjM=", "number": 4553, "title": "Vertical text alignment ignores yOffset", "user": {"login": "nulano", "id": 3819630, "node_id": "MDQ6VXNlcjM4MTk2MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3819630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nulano", "html_url": "https://github.com/nulano", "followers_url": "https://api.github.com/users/nulano/followers", "following_url": "https://api.github.com/users/nulano/following{/other_user}", "gists_url": "https://api.github.com/users/nulano/gists{/gist_id}", "starred_url": "https://api.github.com/users/nulano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nulano/subscriptions", "organizations_url": "https://api.github.com/users/nulano/orgs", "repos_url": "https://api.github.com/users/nulano/repos", "events_url": "https://api.github.com/users/nulano/events{/privacy}", "received_events_url": "https://api.github.com/users/nulano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-13T19:20:01Z", "updated_at": "2020-10-05T17:19:34Z", "closed_at": "2020-10-05T17:19:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While working on implementing the `anchor` parameter of `ImageDraw.text` (see https://github.com/python-pillow/Pillow/issues/4511#issuecomment-612940904), I noticed a bug with the handling of y_offset with raqm.\r\n\r\nFor the following code:\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\nfont = ImageFont.truetype(\"segoeui.ttf\", 60, layout_engine=ImageFont.LAYOUT_RAQM)\r\ndef test(text):\r\n    im = Image.new(\"RGB\", (200,200), \"white\")\r\n    d = ImageDraw.Draw(im)\r\n    d.line(((0,100),(200,100)), \"black\")\r\n    d.line(((100,0),(100,200)), \"black\")\r\n    d.text((100,100),text,\"black\", font=font)\r\n    im.show()\r\ntest(\"a\" + (\"\\u030C\" * 20))    # a + 20 * Unicode Character 'COMBINING CARON' (U+030C)\r\n```\r\n\r\nI expect to get the following image:\r\n![image](https://user-images.githubusercontent.com/3819630/79150886-ced22b00-7dc9-11ea-8d7d-3a7da6a96db0.png)\r\n\r\nBut I get the following image (with master):\r\n![image](https://user-images.githubusercontent.com/3819630/79151082-1ce72e80-7dca-11ea-9952-5262d59c039f.png)\r\n\r\nThis is because when raqm support was added, the `yoffset` variable was not updated to look at the `glyphinfo[i].y_offset` value: https://github.com/python-pillow/Pillow/blob/97280a045cc2544ef8855dac2765e765565772cd/src/_imagingft.c#L665-L674\r\n\r\nSince `font_render` looks at the `bitmap.top` value anyway (see below), which should be equal to `bbox.yMax`, I believe `yoffset` is supposed to calculate the same value as `y_max`, so it can just be removed and `y_max` used instead (in second snippet below).\r\nhttps://github.com/python-pillow/Pillow/blob/97280a045cc2544ef8855dac2765e765565772cd/src/_imagingft.c#L801-L804\r\nhttps://github.com/python-pillow/Pillow/blob/97280a045cc2544ef8855dac2765e765565772cd/src/_imagingft.c#L710-L712\r\n\r\nI am planning to include this change in the PR implementing the `anchor` parameter, but I wanted to document this as a separate issue.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4518", "id": 593281165, "node_id": "MDU6SXNzdWU1OTMyODExNjU=", "number": 4518, "title": "AttributeError: 'NoneType' object has no attribute 'read' ", "user": {"login": "nabobalis", "id": 1392107, "node_id": "MDQ6VXNlcjEzOTIxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1392107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nabobalis", "html_url": "https://github.com/nabobalis", "followers_url": "https://api.github.com/users/nabobalis/followers", "following_url": "https://api.github.com/users/nabobalis/following{/other_user}", "gists_url": "https://api.github.com/users/nabobalis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nabobalis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nabobalis/subscriptions", "organizations_url": "https://api.github.com/users/nabobalis/orgs", "repos_url": "https://api.github.com/users/nabobalis/repos", "events_url": "https://api.github.com/users/nabobalis/events{/privacy}", "received_events_url": "https://api.github.com/users/nabobalis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-04-03T10:27:19Z", "updated_at": "2020-04-29T10:33:31Z", "closed_at": "2020-04-06T11:30:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n\r\nFollowing on from #4509 after the 7.1.0 release, we have a new issue that cropped up opening a png from scikit-image.\r\n\r\n### What did you expect to happen?\r\n\r\nNot error.\r\n\r\n### What actually happened?\r\n\r\nIt errored.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Linux\r\n* Python: 3.8.2\r\n* Pillow: 7.1.0\r\n\r\n<!--\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as Plone, Django, or Buildout, try to replicate the issue just using Pillow.\r\n-->\r\nThe code should just be loading a scikit-image PNG data:\r\n\r\n```python\r\nfrom skimage import data\r\noriginal = data.camera().astype('float')\r\n```\r\nThe error message is:\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/data/__init__.py\", line 109, in camera\r\n    return _load(\"camera.png\")\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/data/__init__.py\", line 96, in _load\r\n    return imread(_os.path.join(data_dir, f), plugin='pil', as_gray=as_gray)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/io/_io.py\", line 48, in imread\r\n    img = call_plugin('imread', fname, plugin=plugin, **plugin_args)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/io/manage_plugins.py\", line 210, in call_plugin\r\n    return func(*args, **kwargs)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/io/_plugins/pil_plugin.py\", line 36, in imread\r\n    return pil_to_ndarray(im, dtype=dtype, img_num=img_num)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/skimage/io/_plugins/pil_plugin.py\", line 66, in pil_to_ndarray\r\n    image.seek(i)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/PIL/PngImagePlugin.py\", line 748, in seek\r\n    self._seek(f)\r\n  File \"/opt/miniconda/envs/sunpy/lib/python3.8/site-packages/PIL/PngImagePlugin.py\", line 791, in _seek\r\n    cid, pos, length = self.png.read()\r\nAttributeError: 'NoneType' object has no attribute 'read'\r\n```\r\n\r\nSince this is scikit image loading one of their PNGs, I wonder if it's actually a bug there. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4512", "id": 592223103, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzk3MjQ4MjM0", "number": 4512, "title": "Fix PNG seek and tell", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-01T21:46:14Z", "updated_at": "2020-04-02T09:46:57Z", "closed_at": "2020-04-02T07:43:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4512", "html_url": "https://github.com/python-pillow/Pillow/pull/4512", "diff_url": "https://github.com/python-pillow/Pillow/pull/4512.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4512.patch", "merged_at": "2020-04-02T07:43:44Z"}, "body": "Fixes #4509.\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Initialise `__frame` to 0 to fix `seek` after open\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4512/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4509", "id": 592050950, "node_id": "MDU6SXNzdWU1OTIwNTA5NTA=", "number": 4509, "title": "AttributeError: 'PngImageFile' object has no attribute '_PngImageFile__frame'", "user": {"login": "parano", "id": 489344, "node_id": "MDQ6VXNlcjQ4OTM0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/489344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/parano", "html_url": "https://github.com/parano", "followers_url": "https://api.github.com/users/parano/followers", "following_url": "https://api.github.com/users/parano/following{/other_user}", "gists_url": "https://api.github.com/users/parano/gists{/gist_id}", "starred_url": "https://api.github.com/users/parano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/parano/subscriptions", "organizations_url": "https://api.github.com/users/parano/orgs", "repos_url": "https://api.github.com/users/parano/repos", "events_url": "https://api.github.com/users/parano/events{/privacy}", "received_events_url": "https://api.github.com/users/parano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-04-01T16:36:15Z", "updated_at": "2020-04-26T00:57:26Z", "closed_at": "2020-04-02T07:43:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nMy library BentoML is using imageio and Pillow in its tests, and with the latest release of Pillow 7.1.0 half an hour ago, I noticed some existing tests are breaking.\r\n\r\nhttps://github.com/bentoml/BentoML\r\nhttps://travis-ci.org/github/bentoml/BentoML/jobs/669765333?utm_medium=notification&utm_source=github_status\r\n\r\n### What did you expect to happen?\r\n`imageio.imread('./image.png')` should work\r\n\r\n### What actually happened?\r\n\r\n```\r\nAttributeError: 'PngImageFile' object has no attribute '_PngImageFile__frame'\r\n```\r\n<img width=\"1043\" alt=\"Screen Shot 2020-04-01 at 9 26 25 AM\" src=\"https://user-images.githubusercontent.com/489344/78161998-18e70400-73fb-11ea-93f4-e210cd4f2636.png\">\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS:  mac os\r\n* Python: 3.75\r\n* Pillow: 7.1.0\r\n* imageio: 2.8.0\r\n\r\n\r\n```python\r\nfrom imageio import imread\r\nimread('./test.png')\r\n```\r\nIt seems related to https://github.com/python-pillow/Pillow/pull/4243", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509/reactions", "total_count": 8, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 2}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4509/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4508", "id": 591734568, "node_id": "MDU6SXNzdWU1OTE3MzQ1Njg=", "number": 4508, "title": "GHA: Add retry mechanism", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-01T08:40:30Z", "updated_at": "2020-04-17T11:07:39Z", "closed_at": "2020-04-17T11:07:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The \"Install Linux dependencies\" step of test.yml is failing intermittently with timeouts on GitHub Actions.\r\n\r\n```\r\nReading package lists...\r\nE: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/b/blt/tk8.6-blt2.5_2.5.3+dfsg-4_amd64.deb  Could not connect to azure.archive.ubuntu.com:80 (52.177.174.250), connection timed out\r\n```\r\n\r\nIt's possible to restart failures, but unlike Travis CI (which allows you to restart single jobs) and AppVeyor (which allows you to restart failed jobs), you can only re-run all the jobs on GHA.\r\n\r\nAt least it only re-runs the jobs in a single workflow, but it's still more than needed, and you may get a timeout in another job.\r\n\r\nLet's add some sort of retry mechanism. Perhaps something similar to `travis_retry`\r\n\r\n* https://docs.travis-ci.com/user/common-build-problems/#travis_retry\r\n* https://stackoverflow.com/q/59356518/724176\r\n\r\nFull log:\r\n\r\n```\r\n2020-04-01T08:21:29.9235373Z ##[section]Starting: Request a runner to run this job\r\n2020-04-01T08:21:31.1331011Z Requesting a hosted runner in current repository's account/organization with labels: 'ubuntu-latest', require runner match: True\r\n2020-04-01T08:21:31.2309561Z Labels matched hosted runners has been found, waiting for one of them get assigned for this job.\r\n2020-04-01T08:21:31.3241895Z ##[section]Finishing: Request a runner to run this job\r\n2020-04-01T08:22:34.1239751Z Current runner version: '2.165.2'\r\n2020-04-01T08:22:34.1240696Z Prepare workflow directory\r\n2020-04-01T08:22:34.1402410Z Prepare all required actions\r\n2020-04-01T08:22:34.1411342Z Download action repository 'actions/checkout@v2'\r\n2020-04-01T08:22:35.9113927Z Download action repository 'actions/cache@v1'\r\n2020-04-01T08:22:36.0523705Z Download action repository 'actions/setup-python@v1'\r\n2020-04-01T08:22:36.2206676Z Download action repository 'actions/upload-artifact@v1'\r\n2020-04-01T08:22:36.4367930Z ##[group]Run actions/checkout@v2\r\n2020-04-01T08:22:36.4368206Z with:\r\n2020-04-01T08:22:36.4368401Z   repository: python-pillow/Pillow\r\n2020-04-01T08:22:36.4368602Z   token: ***\r\n2020-04-01T08:22:36.4368696Z   ssh-strict: true\r\n2020-04-01T08:22:36.4368781Z   persist-credentials: true\r\n2020-04-01T08:22:36.4368871Z   clean: true\r\n2020-04-01T08:22:36.4368963Z   fetch-depth: 1\r\n2020-04-01T08:22:36.4369052Z   lfs: false\r\n2020-04-01T08:22:36.4369140Z   submodules: false\r\n2020-04-01T08:22:36.4369217Z ##[endgroup]\r\n2020-04-01T08:22:37.4043171Z Added matchers: 'checkout-git'. Problem matchers scan action output for known warning or error strings and report these inline.\r\n2020-04-01T08:22:37.4047647Z Syncing repository: python-pillow/Pillow\r\n2020-04-01T08:22:37.4048311Z Working directory is '/home/runner/work/Pillow/Pillow'\r\n2020-04-01T08:22:37.4048871Z [command]/usr/bin/git version\r\n2020-04-01T08:22:37.4048973Z git version 2.25.2\r\n2020-04-01T08:22:37.4049906Z Deleting the contents of '/home/runner/work/Pillow/Pillow'\r\n2020-04-01T08:22:37.4050806Z [command]/usr/bin/git init /home/runner/work/Pillow/Pillow\r\n2020-04-01T08:22:37.4051005Z Initialized empty Git repository in /home/runner/work/Pillow/Pillow/.git/\r\n2020-04-01T08:22:37.4051372Z [command]/usr/bin/git remote add origin https://github.com/python-pillow/Pillow\r\n2020-04-01T08:22:37.4051654Z [command]/usr/bin/git config --local gc.auto 0\r\n2020-04-01T08:22:37.4052790Z [command]/usr/bin/git config --local --name-only --get-regexp core\\.sshCommand\r\n2020-04-01T08:22:37.4053151Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core\\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :\r\n2020-04-01T08:22:37.4053516Z [command]/usr/bin/git config --local --name-only --get-regexp http\\.https\\:\\/\\/github\\.com\\/\\.extraheader\r\n2020-04-01T08:22:37.4054566Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http\\.https\\:\\/\\/github\\.com\\/\\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :\r\n2020-04-01T08:22:37.4055090Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***\r\n2020-04-01T08:22:37.4057048Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --progress --no-recurse-submodules --depth=1 origin +c5e9de15b1b5e082626c68d443098ded36a15fc8:refs/remotes/origin/jpeg2k_overflow\r\n2020-04-01T08:22:37.4057382Z remote: Enumerating objects: 1195, done.        \r\n2020-04-01T08:22:37.4057549Z remote: Counting objects:   0% (1/1195)        \r\n2020-04-01T08:22:37.4057675Z remote: Counting objects:   1% (12/1195)        \r\n2020-04-01T08:22:37.4057783Z remote: Counting objects:   2% (24/1195)        \r\n2020-04-01T08:22:37.4057891Z remote: Counting objects:   3% (36/1195)        \r\n2020-04-01T08:22:37.4057999Z remote: Counting objects:   4% (48/1195)        \r\n2020-04-01T08:22:37.4058591Z remote: Counting objects:   5% (60/1195)        \r\n2020-04-01T08:22:37.4058926Z remote: Counting objects:   6% (72/1195)        \r\n2020-04-01T08:22:37.4059039Z remote: Counting objects:   7% (84/1195)        \r\n2020-04-01T08:22:37.4059248Z remote: Counting objects:   8% (96/1195)        \r\n2020-04-01T08:22:37.4059393Z remote: Counting objects:   9% (108/1195)        \r\n2020-04-01T08:22:37.4059624Z remote: Counting objects:  10% (120/1195)        \r\n2020-04-01T08:22:37.4059769Z remote: Counting objects:  11% (132/1195)        \r\n2020-04-01T08:22:37.4059903Z remote: Counting objects:  12% (144/1195)        \r\n2020-04-01T08:22:37.4060036Z remote: Counting objects:  13% (156/1195)        \r\n2020-04-01T08:22:37.4060543Z remote: Counting objects:  14% (168/1195)        \r\n2020-04-01T08:22:37.4060687Z remote: Counting objects:  15% (180/1195)        \r\n2020-04-01T08:22:37.4060918Z remote: Counting objects:  16% (192/1195)        \r\n2020-04-01T08:22:37.4061026Z remote: Counting objects:  17% (204/1195)        \r\n2020-04-01T08:22:37.4061244Z remote: Counting objects:  18% (216/1195)        \r\n2020-04-01T08:22:37.4061509Z remote: Counting objects:  19% (228/1195)        \r\n2020-04-01T08:22:37.4061640Z remote: Counting objects:  20% (239/1195)        \r\n2020-04-01T08:22:37.4062068Z remote: Counting objects:  21% (251/1195)        \r\n2020-04-01T08:22:37.4062217Z remote: Counting objects:  22% (263/1195)        \r\n2020-04-01T08:22:37.4062358Z remote: Counting objects:  23% (275/1195)        \r\n2020-04-01T08:22:37.4062470Z remote: Counting objects:  24% (287/1195)        \r\n2020-04-01T08:22:37.4062696Z remote: Counting objects:  25% (299/1195)        \r\n2020-04-01T08:22:37.4062843Z remote: Counting objects:  26% (311/1195)        \r\n2020-04-01T08:22:37.4063078Z remote: Counting objects:  27% (323/1195)        \r\n2020-04-01T08:22:37.4063231Z remote: Counting objects:  28% (335/1195)        \r\n2020-04-01T08:22:37.4063328Z remote: Counting objects:  29% (347/1195)        \r\n2020-04-01T08:22:37.4063592Z remote: Counting objects:  30% (359/1195)        \r\n2020-04-01T08:22:37.4063747Z remote: Counting objects:  31% (371/1195)        \r\n2020-04-01T08:22:37.4063870Z remote: Counting objects:  32% (383/1195)        \r\n2020-04-01T08:22:37.4064102Z remote: Counting objects:  33% (395/1195)        \r\n2020-04-01T08:22:37.4064251Z remote: Counting objects:  34% (407/1195)        \r\n2020-04-01T08:22:37.4064363Z remote: Counting objects:  35% (419/1195)        \r\n2020-04-01T08:22:37.4064581Z remote: Counting objects:  36% (431/1195)        \r\n2020-04-01T08:22:37.4064729Z remote: Counting objects:  37% (443/1195)        \r\n2020-04-01T08:22:37.4064866Z remote: Counting objects:  38% (455/1195)        \r\n2020-04-01T08:22:37.4065002Z remote: Counting objects:  39% (467/1195)        \r\n2020-04-01T08:22:37.4065167Z remote: Counting objects:  40% (478/1195)        \r\n2020-04-01T08:22:37.4065279Z remote: Counting objects:  41% (490/1195)        \r\n2020-04-01T08:22:37.4065388Z remote: Counting objects:  42% (502/1195)        \r\n2020-04-01T08:22:37.4065500Z remote: Counting objects:  43% (514/1195)        \r\n2020-04-01T08:22:37.4065609Z remote: Counting objects:  44% (526/1195)        \r\n2020-04-01T08:22:37.4065710Z remote: Counting objects:  45% (538/1195)        \r\n2020-04-01T08:22:37.4065959Z remote: Counting objects:  46% (550/1195)        \r\n2020-04-01T08:22:37.4066075Z remote: Counting objects:  47% (562/1195)        \r\n2020-04-01T08:22:37.4066298Z remote: Counting objects:  48% (574/1195)        \r\n2020-04-01T08:22:37.4066448Z remote: Counting objects:  49% (586/1195)        \r\n2020-04-01T08:22:37.4066590Z remote: Counting objects:  50% (598/1195)        \r\n2020-04-01T08:22:37.4066726Z remote: Counting objects:  51% (610/1195)        \r\n2020-04-01T08:22:37.4066863Z remote: Counting objects:  52% (622/1195)        \r\n2020-04-01T08:22:37.4067096Z remote: Counting objects:  53% (634/1195)        \r\n2020-04-01T08:22:37.4067243Z remote: Counting objects:  54% (646/1195)        \r\n2020-04-01T08:22:37.4067353Z remote: Counting objects:  55% (658/1195)        \r\n2020-04-01T08:22:37.4067576Z remote: Counting objects:  56% (670/1195)        \r\n2020-04-01T08:22:37.4067720Z remote: Counting objects:  57% (682/1195)        \r\n2020-04-01T08:22:37.4067864Z remote: Counting objects:  58% (694/1195)        \r\n2020-04-01T08:22:37.4068092Z remote: Counting objects:  59% (706/1195)        \r\n2020-04-01T08:22:37.4068243Z remote: Counting objects:  60% (717/1195)        \r\n2020-04-01T08:22:37.4068353Z remote: Counting objects:  61% (729/1195)        \r\n2020-04-01T08:22:37.4068464Z remote: Counting objects:  62% (741/1195)        \r\n2020-04-01T08:22:37.4068559Z remote: Counting objects:  63% (753/1195)        \r\n2020-04-01T08:22:37.4068789Z remote: Counting objects:  64% (765/1195)        \r\n2020-04-01T08:22:37.4068939Z remote: Counting objects:  65% (777/1195)        \r\n2020-04-01T08:22:37.4069180Z remote: Counting objects:  66% (789/1195)        \r\n2020-04-01T08:22:37.4069430Z remote: Counting objects:  67% (801/1195)        \r\n2020-04-01T08:22:37.4069579Z remote: Counting objects:  68% (813/1195)        \r\n2020-04-01T08:22:37.4069778Z remote: Counting objects:  69% (825/1195)        \r\n2020-04-01T08:22:37.4070031Z remote: Counting objects:  70% (837/1195)        \r\n2020-04-01T08:22:37.4070274Z remote: Counting objects:  71% (849/1195)        \r\n2020-04-01T08:22:37.4070403Z remote: Counting objects:  72% (861/1195)        \r\n2020-04-01T08:22:37.4070653Z remote: Counting objects:  73% (873/1195)        \r\n2020-04-01T08:22:37.4070804Z remote: Counting objects:  74% (885/1195)        \r\n2020-04-01T08:22:37.4070915Z remote: Counting objects:  75% (897/1195)        \r\n2020-04-01T08:22:37.4071137Z remote: Counting objects:  76% (909/1195)        \r\n2020-04-01T08:22:37.4071286Z remote: Counting objects:  77% (921/1195)        \r\n2020-04-01T08:22:37.4071400Z remote: Counting objects:  78% (933/1195)        \r\n2020-04-01T08:22:37.4071644Z remote: Counting objects:  79% (945/1195)        \r\n2020-04-01T08:22:37.4071756Z remote: Counting objects:  80% (956/1195)        \r\n2020-04-01T08:22:37.4071973Z remote: Counting objects:  81% (968/1195)        \r\n2020-04-01T08:22:37.4072123Z remote: Counting objects:  82% (980/1195)        \r\n2020-04-01T08:22:37.4072236Z remote: Counting objects:  83% (992/1195)        \r\n2020-04-01T08:22:37.4072356Z remote: Counting objects:  84% (1004/1195)        \r\n2020-04-01T08:22:37.4072623Z remote: Counting objects:  85% (1016/1195)        \r\n2020-04-01T08:22:37.4072853Z remote: Counting objects:  86% (1028/1195)        \r\n2020-04-01T08:22:37.4072995Z remote: Counting objects:  87% (1040/1195)        \r\n2020-04-01T08:22:37.4073107Z remote: Counting objects:  88% (1052/1195)        \r\n2020-04-01T08:22:37.4073324Z remote: Counting objects:  89% (1064/1195)        \r\n2020-04-01T08:22:37.4073432Z remote: Counting objects:  90% (1076/1195)        \r\n2020-04-01T08:22:37.4073577Z remote: Counting objects:  91% (1088/1195)        \r\n2020-04-01T08:22:37.4073696Z remote: Counting objects:  92% (1100/1195)        \r\n2020-04-01T08:22:37.4073803Z remote: Counting objects:  93% (1112/1195)        \r\n2020-04-01T08:22:37.4073908Z remote: Counting objects:  94% (1124/1195)        \r\n2020-04-01T08:22:37.4074134Z remote: Counting objects:  95% (1136/1195)        \r\n2020-04-01T08:22:37.4074275Z remote: Counting objects:  96% (1148/1195)        \r\n2020-04-01T08:22:37.4074391Z remote: Counting objects:  97% (1160/1195)        \r\n2020-04-01T08:22:37.4074611Z remote: Counting objects:  98% (1172/1195)        \r\n2020-04-01T08:22:37.4074753Z remote: Counting objects:  99% (1184/1195)        \r\n2020-04-01T08:22:37.4074883Z remote: Counting objects: 100% (1195/1195)        \r\n2020-04-01T08:22:37.4075024Z remote: Counting objects: 100% (1195/1195), done.        \r\n2020-04-01T08:22:37.4075123Z remote: Compressing objects:   0% (1/1035)        \r\n2020-04-01T08:22:37.4075343Z remote: Compressing objects:   1% (11/1035)        \r\n2020-04-01T08:22:37.4075498Z remote: Compressing objects:   2% (21/1035)        \r\n2020-04-01T08:22:37.4075607Z remote: Compressing objects:   3% (32/1035)        \r\n2020-04-01T08:22:37.4075825Z remote: Compressing objects:   4% (42/1035)        \r\n2020-04-01T08:22:37.4075965Z remote: Compressing objects:   5% (52/1035)        \r\n2020-04-01T08:22:37.4076098Z remote: Compressing objects:   6% (63/1035)        \r\n2020-04-01T08:22:37.4076213Z remote: Compressing objects:   7% (73/1035)        \r\n2020-04-01T08:22:37.4076434Z remote: Compressing objects:   8% (83/1035)        \r\n2020-04-01T08:22:37.4076581Z remote: Compressing objects:   9% (94/1035)        \r\n2020-04-01T08:22:37.4076691Z remote: Compressing objects:  10% (104/1035)        \r\n2020-04-01T08:22:37.4076802Z remote: Compressing objects:  11% (114/1035)        \r\n2020-04-01T08:22:37.4076914Z remote: Compressing objects:  12% (125/1035)        \r\n2020-04-01T08:22:37.4077181Z remote: Compressing objects:  13% (135/1035)        \r\n2020-04-01T08:22:37.4077334Z remote: Compressing objects:  14% (145/1035)        \r\n2020-04-01T08:22:37.4077801Z remote: Compressing objects:  15% (156/1035)        \r\n2020-04-01T08:22:37.4077899Z remote: Compressing objects:  16% (166/1035)        \r\n2020-04-01T08:22:37.4078015Z remote: Compressing objects:  17% (176/1035)        \r\n2020-04-01T08:22:37.4078284Z remote: Compressing objects:  18% (187/1035)        \r\n2020-04-01T08:22:37.4078435Z remote: Compressing objects:  19% (197/1035)        \r\n2020-04-01T08:22:37.4078631Z remote: Compressing objects:  20% (207/1035)        \r\n2020-04-01T08:22:37.4078902Z remote: Compressing objects:  21% (218/1035)        \r\n2020-04-01T08:22:37.4079053Z remote: Compressing objects:  22% (228/1035)        \r\n2020-04-01T08:22:37.4079202Z remote: Compressing objects:  23% (239/1035)        \r\n2020-04-01T08:22:37.4079318Z remote: Compressing objects:  24% (249/1035)        \r\n2020-04-01T08:22:37.4079433Z remote: Compressing objects:  25% (259/1035)        \r\n2020-04-01T08:22:37.4079545Z remote: Compressing objects:  26% (270/1035)        \r\n2020-04-01T08:22:37.4079785Z remote: Compressing objects:  27% (280/1035)        \r\n2020-04-01T08:22:37.4079943Z remote: Compressing objects:  28% (290/1035)        \r\n2020-04-01T08:22:37.4080086Z remote: Compressing objects:  29% (301/1035)        \r\n2020-04-01T08:22:37.4080201Z remote: Compressing objects:  30% (311/1035)        \r\n2020-04-01T08:22:37.4080313Z remote: Compressing objects:  31% (321/1035)        \r\n2020-04-01T08:22:37.4080543Z remote: Compressing objects:  32% (332/1035)        \r\n2020-04-01T08:22:37.4080704Z remote: Compressing objects:  33% (342/1035)        \r\n2020-04-01T08:22:37.4080970Z remote: Compressing objects:  34% (352/1035)        \r\n2020-04-01T08:22:37.4081384Z remote: Compressing objects:  35% (363/1035)        \r\n2020-04-01T08:22:37.4081545Z remote: Compressing objects:  36% (373/1035)        \r\n2020-04-01T08:22:37.4081662Z remote: Compressing objects:  37% (383/1035)        \r\n2020-04-01T08:22:37.4081780Z remote: Compressing objects:  38% (394/1035)        \r\n2020-04-01T08:22:37.4082015Z remote: Compressing objects:  39% (404/1035)        \r\n2020-04-01T08:22:37.4082145Z remote: Compressing objects:  40% (414/1035)        \r\n2020-04-01T08:22:37.4082295Z remote: Compressing objects:  41% (425/1035)        \r\n2020-04-01T08:22:37.4082412Z remote: Compressing objects:  42% (435/1035)        \r\n2020-04-01T08:22:37.4082650Z remote: Compressing objects:  43% (446/1035)        \r\n2020-04-01T08:22:37.4082803Z remote: Compressing objects:  44% (456/1035)        \r\n2020-04-01T08:22:37.4082930Z remote: Compressing objects:  45% (466/1035)        \r\n2020-04-01T08:22:37.4083163Z remote: Compressing objects:  46% (477/1035)        \r\n2020-04-01T08:22:37.4083316Z remote: Compressing objects:  47% (487/1035)        \r\n2020-04-01T08:22:37.4357313Z remote: Compressing objects:  48% (497/1035)        \r\n2020-04-01T08:22:37.4479796Z remote: Compressing objects:  49% (508/1035)        \r\n2020-04-01T08:22:37.4480285Z remote: Compressing objects:  50% (518/1035)        \r\n2020-04-01T08:22:37.4480415Z remote: Compressing objects:  51% (528/1035)        \r\n2020-04-01T08:22:37.4480553Z remote: Compressing objects:  52% (539/1035)        \r\n2020-04-01T08:22:37.4480669Z remote: Compressing objects:  53% (549/1035)        \r\n2020-04-01T08:22:37.4480964Z remote: Compressing objects:  54% (559/1035)        \r\n2020-04-01T08:22:37.4481084Z remote: Compressing objects:  55% (570/1035)        \r\n2020-04-01T08:22:37.4481202Z remote: Compressing objects:  56% (580/1035)        \r\n2020-04-01T08:22:37.4481319Z remote: Compressing objects:  57% (590/1035)        \r\n2020-04-01T08:22:37.4481429Z remote: Compressing objects:  58% (601/1035)        \r\n2020-04-01T08:22:37.4481552Z remote: Compressing objects:  59% (611/1035)        \r\n2020-04-01T08:22:37.4481670Z remote: Compressing objects:  60% (621/1035)        \r\n2020-04-01T08:22:37.4481787Z remote: Compressing objects:  61% (632/1035)        \r\n2020-04-01T08:22:37.4481907Z remote: Compressing objects:  62% (642/1035)        \r\n2020-04-01T08:22:37.4482025Z remote: Compressing objects:  63% (653/1035)        \r\n2020-04-01T08:22:37.4482143Z remote: Compressing objects:  64% (663/1035)        \r\n2020-04-01T08:22:37.4482449Z remote: Compressing objects:  65% (673/1035)        \r\n2020-04-01T08:22:37.4482567Z remote: Compressing objects:  66% (684/1035)        \r\n2020-04-01T08:22:37.4482685Z remote: Compressing objects:  67% (694/1035)        \r\n2020-04-01T08:22:37.4482803Z remote: Compressing objects:  68% (704/1035)        \r\n2020-04-01T08:22:37.4482906Z remote: Compressing objects:  69% (715/1035)        \r\n2020-04-01T08:22:37.4483252Z remote: Compressing objects:  70% (725/1035)        \r\n2020-04-01T08:22:37.4483384Z remote: Compressing objects:  71% (735/1035)        \r\n2020-04-01T08:22:37.4483498Z remote: Compressing objects:  72% (746/1035)        \r\n2020-04-01T08:22:37.4484078Z remote: Compressing objects:  73% (756/1035)        \r\n2020-04-01T08:22:37.4546864Z remote: Compressing objects:  74% (766/1035)        \r\n2020-04-01T08:22:37.4547101Z remote: Compressing objects:  75% (777/1035)        \r\n2020-04-01T08:22:37.4547230Z remote: Compressing objects:  76% (787/1035)        \r\n2020-04-01T08:22:37.4547365Z remote: Compressing objects:  77% (797/1035)        \r\n2020-04-01T08:22:37.4569034Z remote: Compressing objects:  78% (808/1035)        \r\n2020-04-01T08:22:37.4569259Z remote: Compressing objects:  79% (818/1035)        \r\n2020-04-01T08:22:37.4569382Z remote: Compressing objects:  80% (828/1035)        \r\n2020-04-01T08:22:37.4584116Z remote: Compressing objects:  81% (839/1035)        \r\n2020-04-01T08:22:37.4584265Z remote: Compressing objects:  82% (849/1035)        \r\n2020-04-01T08:22:37.4642744Z remote: Compressing objects:  83% (860/1035)        \r\n2020-04-01T08:22:37.4674949Z remote: Compressing objects:  84% (870/1035)        \r\n2020-04-01T08:22:37.4695923Z remote: Compressing objects:  85% (880/1035)        \r\n2020-04-01T08:22:37.4707647Z remote: Compressing objects:  86% (891/1035)        \r\n2020-04-01T08:22:37.4723065Z remote: Compressing objects:  87% (901/1035)        \r\n2020-04-01T08:22:37.4761748Z remote: Compressing objects:  88% (911/1035)        \r\n2020-04-01T08:22:37.4851416Z remote: Compressing objects:  89% (922/1035)        \r\n2020-04-01T08:22:37.4888539Z remote: Compressing objects:  90% (932/1035)        \r\n2020-04-01T08:22:37.4961166Z remote: Compressing objects:  91% (942/1035)        \r\n2020-04-01T08:22:37.5068536Z remote: Compressing objects:  92% (953/1035)        \r\n2020-04-01T08:22:37.5121656Z remote: Compressing objects:  93% (963/1035)        \r\n2020-04-01T08:22:37.5163922Z remote: Compressing objects:  94% (973/1035)        \r\n2020-04-01T08:22:37.5220842Z remote: Compressing objects:  95% (984/1035)        \r\n2020-04-01T08:22:37.5221080Z remote: Compressing objects:  96% (994/1035)        \r\n2020-04-01T08:22:37.5227598Z remote: Compressing objects:  97% (1004/1035)        \r\n2020-04-01T08:22:37.5227764Z remote: Compressing objects:  98% (1015/1035)        \r\n2020-04-01T08:22:37.5227885Z remote: Compressing objects:  99% (1025/1035)        \r\n2020-04-01T08:22:37.5228002Z remote: Compressing objects: 100% (1035/1035)        \r\n2020-04-01T08:22:37.5228121Z remote: Compressing objects: 100% (1035/1035), done.        \r\n2020-04-01T08:22:37.5259339Z Receiving objects:   0% (1/1195)\r\n2020-04-01T08:22:37.5327038Z Receiving objects:   1% (12/1195)\r\n2020-04-01T08:22:37.5392498Z Receiving objects:   2% (24/1195)\r\n2020-04-01T08:22:37.5396215Z Receiving objects:   3% (36/1195)\r\n2020-04-01T08:22:37.5545726Z Receiving objects:   4% (48/1195)\r\n2020-04-01T08:22:37.7640031Z Receiving objects:   5% (60/1195)\r\n2020-04-01T08:22:37.7695440Z Receiving objects:   6% (72/1195)\r\n2020-04-01T08:22:37.7716850Z Receiving objects:   7% (84/1195)\r\n2020-04-01T08:22:37.7732791Z Receiving objects:   8% (96/1195)\r\n2020-04-01T08:22:37.7734516Z Receiving objects:   9% (108/1195)\r\n2020-04-01T08:22:37.7735702Z Receiving objects:  10% (120/1195)\r\n2020-04-01T08:22:37.7736208Z Receiving objects:  11% (132/1195)\r\n2020-04-01T08:22:37.7736593Z Receiving objects:  12% (144/1195)\r\n2020-04-01T08:22:37.7908299Z Receiving objects:  13% (156/1195)\r\n2020-04-01T08:22:37.7921885Z Receiving objects:  14% (168/1195)\r\n2020-04-01T08:22:37.7928472Z Receiving objects:  15% (180/1195)\r\n2020-04-01T08:22:37.7930828Z Receiving objects:  16% (192/1195)\r\n2020-04-01T08:22:37.7941489Z Receiving objects:  17% (204/1195)\r\n2020-04-01T08:22:37.7950840Z Receiving objects:  18% (216/1195)\r\n2020-04-01T08:22:37.7958374Z Receiving objects:  19% (228/1195)\r\n2020-04-01T08:22:37.7962418Z Receiving objects:  20% (239/1195)\r\n2020-04-01T08:22:37.7991499Z Receiving objects:  21% (251/1195)\r\n2020-04-01T08:22:37.8219182Z Receiving objects:  22% (263/1195)\r\n2020-04-01T08:22:37.8223977Z Receiving objects:  23% (275/1195)\r\n2020-04-01T08:22:37.8240166Z Receiving objects:  24% (287/1195)\r\n2020-04-01T08:22:37.8285477Z Receiving objects:  25% (299/1195)\r\n2020-04-01T08:22:37.8372321Z Receiving objects:  26% (311/1195)\r\n2020-04-01T08:22:38.0137447Z Receiving objects:  27% (323/1195)\r\n2020-04-01T08:22:38.0142516Z Receiving objects:  28% (335/1195)\r\n2020-04-01T08:22:38.0195832Z Receiving objects:  29% (347/1195)\r\n2020-04-01T08:22:38.0264088Z Receiving objects:  30% (359/1195)\r\n2020-04-01T08:22:38.0461892Z Receiving objects:  31% (371/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0567685Z Receiving objects:  32% (383/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0615083Z Receiving objects:  33% (395/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0666239Z Receiving objects:  34% (407/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0666715Z Receiving objects:  35% (419/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0895552Z Receiving objects:  36% (431/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0895961Z Receiving objects:  37% (443/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0896339Z Receiving objects:  38% (455/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0896534Z Receiving objects:  39% (467/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0896731Z Receiving objects:  40% (478/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0913239Z Receiving objects:  41% (490/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0913545Z Receiving objects:  42% (502/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.0913906Z Receiving objects:  43% (514/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.1112918Z Receiving objects:  44% (526/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.1119527Z Receiving objects:  45% (538/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2098226Z Receiving objects:  46% (550/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2108960Z Receiving objects:  47% (562/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2551056Z Receiving objects:  48% (574/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2596907Z Receiving objects:  49% (586/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2666440Z Receiving objects:  50% (598/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2706794Z Receiving objects:  51% (610/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2708324Z Receiving objects:  52% (622/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2709565Z Receiving objects:  53% (634/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2715926Z Receiving objects:  54% (646/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2735848Z Receiving objects:  55% (658/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2822790Z Receiving objects:  56% (670/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.2979115Z Receiving objects:  57% (682/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3193560Z Receiving objects:  58% (694/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3325891Z Receiving objects:  59% (706/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3332709Z Receiving objects:  60% (717/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3337136Z Receiving objects:  61% (729/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3341241Z Receiving objects:  62% (741/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3349221Z Receiving objects:  63% (753/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3357829Z Receiving objects:  64% (765/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3360715Z Receiving objects:  65% (777/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3365700Z Receiving objects:  66% (789/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3367262Z Receiving objects:  67% (801/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3372824Z Receiving objects:  68% (813/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3380817Z Receiving objects:  69% (825/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3390209Z Receiving objects:  70% (837/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3394172Z Receiving objects:  71% (849/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3396861Z Receiving objects:  72% (861/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3397973Z Receiving objects:  73% (873/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3401400Z Receiving objects:  74% (885/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3413578Z Receiving objects:  75% (897/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3419137Z Receiving objects:  76% (909/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3421513Z Receiving objects:  77% (921/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3425002Z Receiving objects:  78% (933/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3427844Z Receiving objects:  79% (945/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3433137Z Receiving objects:  80% (956/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3437833Z Receiving objects:  81% (968/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3444823Z Receiving objects:  82% (980/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3451856Z Receiving objects:  83% (992/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3475913Z Receiving objects:  84% (1004/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3485905Z Receiving objects:  85% (1016/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3494884Z Receiving objects:  86% (1028/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3506111Z Receiving objects:  87% (1040/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3519595Z Receiving objects:  88% (1052/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3523717Z Receiving objects:  89% (1064/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3551602Z Receiving objects:  90% (1076/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3563210Z Receiving objects:  91% (1088/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3574564Z Receiving objects:  92% (1100/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3580309Z Receiving objects:  93% (1112/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3590423Z Receiving objects:  94% (1124/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3599809Z Receiving objects:  95% (1136/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3600630Z remote: Total 1195 (delta 166), reused 738 (delta 142), pack-reused 0        \r\n2020-04-01T08:22:38.3608895Z Receiving objects:  96% (1148/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3615804Z Receiving objects:  97% (1160/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3620987Z Receiving objects:  98% (1172/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3627911Z Receiving objects:  99% (1184/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3628057Z Receiving objects: 100% (1195/1195), 18.34 MiB | 36.67 MiB/s\r\n2020-04-01T08:22:38.3628175Z Receiving objects: 100% (1195/1195), 34.74 MiB | 41.50 MiB/s, done.\r\n2020-04-01T08:22:38.3628285Z Resolving deltas:   0% (0/166)\r\n2020-04-01T08:22:38.3628375Z Resolving deltas:   1% (2/166)\r\n2020-04-01T08:22:38.3628475Z Resolving deltas:   2% (4/166)\r\n2020-04-01T08:22:38.3630632Z Resolving deltas:   3% (5/166)\r\n2020-04-01T08:22:38.3678910Z Resolving deltas:   4% (7/166)\r\n2020-04-01T08:22:38.3681630Z Resolving deltas:   5% (9/166)\r\n2020-04-01T08:22:38.3685329Z Resolving deltas:   6% (10/166)\r\n2020-04-01T08:22:38.3687916Z Resolving deltas:  22% (37/166)\r\n2020-04-01T08:22:38.3690204Z Resolving deltas:  27% (46/166)\r\n2020-04-01T08:22:38.3693093Z Resolving deltas:  28% (47/166)\r\n2020-04-01T08:22:38.3696661Z Resolving deltas:  29% (49/166)\r\n2020-04-01T08:22:38.3700216Z Resolving deltas:  32% (54/166)\r\n2020-04-01T08:22:38.3709252Z Resolving deltas:  34% (57/166)\r\n2020-04-01T08:22:38.3716936Z Resolving deltas:  43% (73/166)\r\n2020-04-01T08:22:38.3722262Z Resolving deltas:  46% (77/166)\r\n2020-04-01T08:22:38.3724398Z Resolving deltas:  47% (79/166)\r\n2020-04-01T08:22:38.3729816Z Resolving deltas:  48% (80/166)\r\n2020-04-01T08:22:38.3732015Z Resolving deltas:  50% (83/166)\r\n2020-04-01T08:22:38.3733939Z Resolving deltas:  51% (86/166)\r\n2020-04-01T08:22:38.3736543Z Resolving deltas:  52% (87/166)\r\n2020-04-01T08:22:38.3742461Z Resolving deltas:  53% (88/166)\r\n2020-04-01T08:22:38.3744188Z Resolving deltas:  56% (94/166)\r\n2020-04-01T08:22:38.3750331Z Resolving deltas:  57% (95/166)\r\n2020-04-01T08:22:38.3752464Z Resolving deltas:  58% (97/166)\r\n2020-04-01T08:22:38.3758548Z Resolving deltas:  59% (98/166)\r\n2020-04-01T08:22:38.3760109Z Resolving deltas:  60% (101/166)\r\n2020-04-01T08:22:38.3766669Z Resolving deltas:  61% (102/166)\r\n2020-04-01T08:22:38.3771114Z Resolving deltas:  63% (105/166)\r\n2020-04-01T08:22:38.3779355Z Resolving deltas:  65% (108/166)\r\n2020-04-01T08:22:38.3783901Z Resolving deltas:  66% (110/166)\r\n2020-04-01T08:22:38.3822857Z Resolving deltas:  67% (112/166)\r\n2020-04-01T08:22:38.3826095Z Resolving deltas:  68% (113/166)\r\n2020-04-01T08:22:38.3829256Z Resolving deltas:  69% (115/166)\r\n2020-04-01T08:22:38.3830587Z Resolving deltas:  70% (117/166)\r\n2020-04-01T08:22:38.3835495Z Resolving deltas:  71% (118/166)\r\n2020-04-01T08:22:38.3837273Z Resolving deltas:  72% (121/166)\r\n2020-04-01T08:22:38.3839592Z Resolving deltas:  73% (122/166)\r\n2020-04-01T08:22:38.3843658Z Resolving deltas:  74% (123/166)\r\n2020-04-01T08:22:38.3853165Z Resolving deltas:  75% (125/166)\r\n2020-04-01T08:22:38.3856321Z Resolving deltas:  76% (127/166)\r\n2020-04-01T08:22:38.3860493Z Resolving deltas:  78% (130/166)\r\n2020-04-01T08:22:38.3863846Z Resolving deltas:  80% (133/166)\r\n2020-04-01T08:22:38.3871264Z Resolving deltas:  81% (135/166)\r\n2020-04-01T08:22:38.3875737Z Resolving deltas:  83% (139/166)\r\n2020-04-01T08:22:38.3924114Z Resolving deltas:  84% (140/166)\r\n2020-04-01T08:22:38.3926607Z Resolving deltas:  86% (143/166)\r\n2020-04-01T08:22:38.3928605Z Resolving deltas:  87% (146/166)\r\n2020-04-01T08:22:38.3930505Z Resolving deltas:  88% (147/166)\r\n2020-04-01T08:22:38.3932701Z Resolving deltas:  89% (148/166)\r\n2020-04-01T08:22:38.3934479Z Resolving deltas:  90% (150/166)\r\n2020-04-01T08:22:38.3937515Z Resolving deltas:  92% (153/166)\r\n2020-04-01T08:22:38.3942868Z Resolving deltas:  95% (158/166)\r\n2020-04-01T08:22:38.3947524Z Resolving deltas:  96% (160/166)\r\n2020-04-01T08:22:38.3951154Z Resolving deltas:  98% (164/166)\r\n2020-04-01T08:22:38.4020181Z Resolving deltas:  99% (165/166)\r\n2020-04-01T08:22:38.4020591Z Resolving deltas: 100% (166/166)\r\n2020-04-01T08:22:38.4020828Z Resolving deltas: 100% (166/166), done.\r\n2020-04-01T08:22:38.9177246Z From https://github.com/python-pillow/Pillow\r\n2020-04-01T08:22:38.9186390Z  * [new ref]         c5e9de15b1b5e082626c68d443098ded36a15fc8 -> origin/jpeg2k_overflow\r\n2020-04-01T08:22:38.9239897Z [command]/usr/bin/git checkout --progress --force -B jpeg2k_overflow refs/remotes/origin/jpeg2k_overflow\r\n2020-04-01T08:22:39.1840224Z Switched to a new branch 'jpeg2k_overflow'\r\n2020-04-01T08:22:39.1841154Z Branch 'jpeg2k_overflow' set up to track remote branch 'jpeg2k_overflow' from 'origin'.\r\n2020-04-01T08:22:39.1878021Z [command]/usr/bin/git log -1\r\n2020-04-01T08:22:39.1906870Z commit c5e9de15b1b5e082626c68d443098ded36a15fc8\r\n2020-04-01T08:22:39.1925049Z Author: Hugo van Kemenade <hugovk@users.noreply.github.com>\r\n2020-04-01T08:22:39.1925544Z Date:   Tue Mar 31 11:09:32 2020 +0300\r\n2020-04-01T08:22:39.1925835Z \r\n2020-04-01T08:22:39.1926105Z     Fix typo\r\n2020-04-01T08:22:39.1929817Z Removed matchers: 'checkout-git'\r\n2020-04-01T08:22:39.8941997Z ##[group]Run actions/cache@v1\r\n2020-04-01T08:22:39.8942124Z with:\r\n2020-04-01T08:22:39.8942219Z   path: ~/.cache/pip\r\n2020-04-01T08:22:39.8942311Z   key: ubuntu-latest-3.8-20df63aa326d5053e0d103621369ed1b5969469cc83a49fb3edb10639f2778d0\r\n2020-04-01T08:22:39.8942598Z   restore-keys: ubuntu-latest-3.8-\r\n\r\n2020-04-01T08:22:39.8942766Z ##[endgroup]\r\n2020-04-01T08:22:39.9992225Z [warning]No scopes with read permission were found on the request.\r\n2020-04-01T08:22:40.0183593Z ##[group]Run actions/setup-python@v1\r\n2020-04-01T08:22:40.0183757Z with:\r\n2020-04-01T08:22:40.0183871Z   python-version: 3.8\r\n2020-04-01T08:22:40.0183995Z   architecture: x64\r\n2020-04-01T08:22:40.0184110Z ##[endgroup]\r\n2020-04-01T08:22:40.0698260Z Successfully setup CPython (3.8.2)\r\n2020-04-01T08:22:40.0717700Z Added matchers: 'python'. Problem matchers scan action output for known warning or error strings and report these inline.\r\n2020-04-01T08:22:40.0908161Z ##[group]Run python .github/workflows/system-info.py\r\n2020-04-01T08:22:40.0908591Z \u001b[36;1mpython .github/workflows/system-info.py\u001b[0m\r\n2020-04-01T08:22:40.0944256Z shell: /bin/bash -e {0}\r\n2020-04-01T08:22:40.0944404Z env:\r\n2020-04-01T08:22:40.0944531Z   pythonLocation: /opt/hostedtoolcache/Python/3.8.2/x64\r\n2020-04-01T08:22:40.0944667Z ##[endgroup]\r\n2020-04-01T08:22:40.1696490Z Build system information\r\n2020-04-01T08:22:40.1697069Z \r\n2020-04-01T08:22:40.1698025Z sys.version\t\t ['3.8.2 (default, Feb 28 2020, 14:28:43) ', '[GCC 7.4.0]']\r\n2020-04-01T08:22:40.1698772Z os.name\t\t\t posix\r\n2020-04-01T08:22:40.1699193Z sys.platform\t\t linux\r\n2020-04-01T08:22:40.1699547Z platform.system()\t Linux\r\n2020-04-01T08:22:40.1699855Z platform.machine()\t x86_64\r\n2020-04-01T08:22:40.1700482Z platform.platform()\t Linux-5.0.0-1032-azure-x86_64-with-glibc2.2.5\r\n2020-04-01T08:22:40.1701313Z platform.version()\t #34-Ubuntu SMP Mon Feb 10 19:37:25 UTC 2020\r\n2020-04-01T08:22:40.1702268Z platform.uname()\t uname_result(system='Linux', node='fv-az95', release='5.0.0-1032-azure', version='#34-Ubuntu SMP Mon Feb 10 19:37:25 UTC 2020', machine='x86_64', processor='x86_64')\r\n2020-04-01T08:22:40.1984822Z ##[group]Run .ci/install.sh\r\n2020-04-01T08:22:40.1984990Z \u001b[36;1m.ci/install.sh\u001b[0m\r\n2020-04-01T08:22:40.2020638Z shell: /bin/bash -e {0}\r\n2020-04-01T08:22:40.2020745Z env:\r\n2020-04-01T08:22:40.2020849Z   pythonLocation: /opt/hostedtoolcache/Python/3.8.2/x64\r\n2020-04-01T08:22:40.2020955Z ##[endgroup]\r\n2020-04-01T08:22:40.4236890Z Hit:2 https://storage.googleapis.com/bazel-apt stable InRelease\r\n2020-04-01T08:22:40.4238238Z Hit:3 https://download.mono-project.com/repo/ubuntu stable-bionic InRelease\r\n2020-04-01T08:22:40.4339767Z Get:4 https://packages.microsoft.com/repos/azure-cli bionic InRelease [3965 B]\r\n2020-04-01T08:22:40.4370333Z Ign:5 http://dl.google.com/linux/chrome/deb stable InRelease\r\n2020-04-01T08:22:40.4464673Z Get:6 https://packages.microsoft.com/ubuntu/18.04/prod bionic InRelease [4003 B]\r\n2020-04-01T08:22:40.4471748Z Hit:7 https://dl.yarnpkg.com/debian stable InRelease\r\n2020-04-01T08:22:40.4689224Z Get:8 http://packages.cloud.google.com/apt cloud-sdk InRelease [6337 B]\r\n2020-04-01T08:22:40.4847739Z Get:9 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\r\n2020-04-01T08:22:40.4987855Z Get:1 https://packages.cloud.google.com/apt kubernetes-xenial InRelease [8993 B]\r\n2020-04-01T08:22:40.5063129Z Get:10 http://dl.google.com/linux/chrome/deb stable Release [943 B]\r\n2020-04-01T08:22:40.5337670Z Get:11 http://dl.google.com/linux/chrome/deb stable Release.gpg [819 B]\r\n2020-04-01T08:22:40.5518451Z Get:12 https://cli-assets.heroku.com/apt ./ InRelease [2879 B]\r\n2020-04-01T08:22:40.6850306Z Hit:13 http://ppa.launchpad.net/ansible/ansible/ubuntu bionic InRelease\r\n2020-04-01T08:22:40.7538730Z Ign:14 https://dl.bintray.com/sbt/debian  InRelease\r\n2020-04-01T08:22:40.7807560Z Get:15 https://packages.microsoft.com/repos/azure-cli bionic/main amd64 Packages [8449 B]\r\n2020-04-01T08:22:40.8344589Z Get:17 https://dl.bintray.com/sbt/debian  Release [815 B]\r\n2020-04-01T08:22:40.8423978Z Hit:18 http://ppa.launchpad.net/apt-fast/stable/ubuntu bionic InRelease\r\n2020-04-01T08:22:40.8821350Z Get:19 https://packages.microsoft.com/ubuntu/18.04/prod bionic/main amd64 Packages [103 kB]\r\n2020-04-01T08:22:40.9157122Z Get:20 https://dl.bintray.com/sbt/debian  Release.gpg [821 B]\r\n2020-04-01T08:22:41.0007417Z Get:21 http://ppa.launchpad.net/git-core/ppa/ubuntu bionic InRelease [20.7 kB]\r\n2020-04-01T08:22:41.0059918Z Hit:16 https://packagecloud.io/github/git-lfs/ubuntu bionic InRelease\r\n2020-04-01T08:22:41.0528895Z Get:22 http://packages.cloud.google.com/apt cloud-sdk/main amd64 Packages [99.2 kB]\r\n2020-04-01T08:22:41.1355035Z Get:23 https://packages.cloud.google.com/apt kubernetes-xenial/main amd64 Packages [34.7 kB]\r\n2020-04-01T08:22:41.2395122Z Get:24 http://dl.google.com/linux/chrome/deb stable/main amd64 Packages [1142 B]\r\n2020-04-01T08:22:41.2480720Z Get:25 http://ppa.launchpad.net/hvr/ghc/ubuntu bionic InRelease [15.3 kB]\r\n2020-04-01T08:22:41.3269301Z Get:26 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [677 kB]\r\n2020-04-01T08:22:41.4029073Z Get:27 http://security.ubuntu.com/ubuntu bionic-security/main Translation-en [218 kB]\r\n2020-04-01T08:22:41.4055251Z Get:28 http://ppa.launchpad.net/ondrej/php/ubuntu bionic InRelease [20.8 kB]\r\n2020-04-01T08:22:41.4087094Z Get:29 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [28.5 kB]\r\n2020-04-01T08:22:41.4087809Z Get:30 http://security.ubuntu.com/ubuntu bionic-security/restricted Translation-en [7568 B]\r\n2020-04-01T08:22:41.4088437Z Get:31 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [653 kB]\r\n2020-04-01T08:22:41.4152781Z Get:32 https://cli-assets.heroku.com/apt ./ Packages [616 B]\r\n2020-04-01T08:22:41.4221176Z Get:33 http://security.ubuntu.com/ubuntu bionic-security/universe Translation-en [217 kB]\r\n2020-04-01T08:22:41.6473538Z Hit:34 http://ppa.launchpad.net/ubuntu-toolchain-r/test/ubuntu bionic InRelease\r\n2020-04-01T08:22:41.7667490Z Get:35 https://dl.bintray.com/sbt/debian  Packages [4159 B]\r\n2020-04-01T08:22:42.0301407Z Get:36 http://ppa.launchpad.net/git-core/ppa/ubuntu bionic/main amd64 Packages [3028 B]\r\n2020-04-01T08:22:42.1887211Z Get:37 http://ppa.launchpad.net/hvr/ghc/ubuntu bionic/main amd64 Packages [10.7 kB]\r\n2020-04-01T08:22:42.3469214Z Get:38 http://ppa.launchpad.net/ondrej/php/ubuntu bionic/main amd64 Packages [52.1 kB]\r\n2020-04-01T08:22:47.1057298Z Hit:39 http://azure.archive.ubuntu.com/ubuntu bionic InRelease\r\n2020-04-01T08:22:47.1066192Z Get:40 http://azure.archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\r\n2020-04-01T08:22:47.1136559Z Get:41 http://azure.archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]\r\n2020-04-01T08:22:47.3207860Z Get:42 http://azure.archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [897 kB]\r\n2020-04-01T08:22:47.3426409Z Get:43 http://azure.archive.ubuntu.com/ubuntu bionic-updates/main Translation-en [310 kB]\r\n2020-04-01T08:22:47.3461942Z Get:44 http://azure.archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [37.5 kB]\r\n2020-04-01T08:22:47.3470779Z Get:45 http://azure.archive.ubuntu.com/ubuntu bionic-updates/restricted Translation-en [9524 B]\r\n2020-04-01T08:22:47.3479507Z Get:46 http://azure.archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1061 kB]\r\n2020-04-01T08:22:47.7725431Z Get:47 http://azure.archive.ubuntu.com/ubuntu bionic-updates/universe Translation-en [329 kB]\r\n2020-04-01T08:22:47.7725913Z Get:48 http://azure.archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [10.5 kB]\r\n2020-04-01T08:22:47.7726326Z Get:49 http://azure.archive.ubuntu.com/ubuntu bionic-updates/multiverse Translation-en [4696 B]\r\n2020-04-01T08:22:47.9824566Z Get:50 http://azure.archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [4020 B]\r\n2020-04-01T08:22:51.4927382Z Fetched 5121 kB in 8s (671 kB/s)\r\n2020-04-01T08:22:52.2948240Z Reading package lists...\r\n2020-04-01T08:23:23.9758772Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/b/blt/tk8.6-blt2.5_2.5.3+dfsg-4_amd64.deb  Could not connect to azure.archive.ubuntu.com:80 (52.177.174.250), connection timed out\r\n2020-04-01T08:23:23.9759540Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/b/blt/blt_2.5.3+dfsg-4_amd64.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9759985Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/c/cmake/cmake-data_3.10.2-1ubuntu2.18.04.1_all.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9760397Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/r/rhash/librhash0_1.3.6-2_amd64.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9761100Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/c/cmake/cmake_3.10.2-1ubuntu2.18.04.1_amd64.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9761680Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/f/fribidi/libfribidi-dev_0.19.7-2_amd64.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9762169Z E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/p/python3-stdlib-extensions/python3-tk_3.6.9-1~18.04_amd64.deb  Unable to connect to azure.archive.ubuntu.com:http:\r\n2020-04-01T08:23:23.9762494Z E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?\r\n2020-04-01T08:23:23.9783352Z ##[error]Process completed with exit code 100.\r\n2020-04-01T08:23:23.9986211Z ##[group]Run mkdir -p Tests/errors\r\n2020-04-01T08:23:23.9986384Z \u001b[36;1mmkdir -p Tests/errors\u001b[0m\r\n2020-04-01T08:23:24.0011319Z shell: /usr/bin/pwsh -command \". '{0}'\"\r\n2020-04-01T08:23:24.0011421Z env:\r\n2020-04-01T08:23:24.0011514Z   pythonLocation: /opt/hostedtoolcache/Python/3.8.2/x64\r\n2020-04-01T08:23:24.0011614Z ##[endgroup]\r\n2020-04-01T08:23:31.1804290Z ##[group]Run actions/upload-artifact@v1\r\n2020-04-01T08:23:31.1804425Z with:\r\n2020-04-01T08:23:31.1804515Z   name: errors\r\n2020-04-01T08:23:31.1804601Z   path: Tests/errors\r\n2020-04-01T08:23:31.1804671Z env:\r\n2020-04-01T08:23:31.1804759Z   pythonLocation: /opt/hostedtoolcache/Python/3.8.2/x64\r\n2020-04-01T08:23:31.1804854Z ##[endgroup]\r\n2020-04-01T08:23:31.3769884Z Uploading artifact 'errors' from '/home/runner/work/Pillow/Pillow/Tests/errors' for run #3882\r\n2020-04-01T08:23:31.4560896Z Uploading 0 files\r\n2020-04-01T08:23:31.4598893Z File upload complete.\r\n2020-04-01T08:23:31.4604626Z Uploaded '0' bytes from '/home/runner/work/Pillow/Pillow/Tests/errors' to server\r\n2020-04-01T08:23:31.6831027Z Associated artifact errors (2549289) with run #3882\r\n2020-04-01T08:23:31.7087822Z Post job cleanup.\r\n2020-04-01T08:23:31.8028984Z [command]/usr/bin/git version\r\n2020-04-01T08:23:31.8094929Z git version 2.25.2\r\n2020-04-01T08:23:31.8129358Z [command]/usr/bin/git config --local --name-only --get-regexp core\\.sshCommand\r\n2020-04-01T08:23:31.8164750Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'core\\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :\r\n2020-04-01T08:23:31.8416182Z [command]/usr/bin/git config --local --name-only --get-regexp http\\.https\\:\\/\\/github\\.com\\/\\.extraheader\r\n2020-04-01T08:23:31.8446040Z http.https://github.com/.extraheader\r\n2020-04-01T08:23:31.8453011Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader\r\n2020-04-01T08:23:31.8486659Z [command]/usr/bin/git submodule foreach --recursive git config --local --name-only --get-regexp 'http\\.https\\:\\/\\/github\\.com\\/\\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :\r\n2020-04-01T08:23:31.8742070Z Cleaning up orphan processes\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4508/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4492", "id": 589770992, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzk1MjM1OTg3", "number": 4492, "title": "Add missing if brackets", "user": {"login": "nulano", "id": 3819630, "node_id": "MDQ6VXNlcjM4MTk2MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3819630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nulano", "html_url": "https://github.com/nulano", "followers_url": "https://api.github.com/users/nulano/followers", "following_url": "https://api.github.com/users/nulano/following{/other_user}", "gists_url": "https://api.github.com/users/nulano/gists{/gist_id}", "starred_url": "https://api.github.com/users/nulano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nulano/subscriptions", "organizations_url": "https://api.github.com/users/nulano/orgs", "repos_url": "https://api.github.com/users/nulano/repos", "events_url": "https://api.github.com/users/nulano/events{/privacy}", "received_events_url": "https://api.github.com/users/nulano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-29T11:28:25Z", "updated_at": "2020-03-29T15:24:54Z", "closed_at": "2020-03-29T15:09:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4492", "html_url": "https://github.com/python-pillow/Pillow/pull/4492", "diff_url": "https://github.com/python-pillow/Pillow/pull/4492.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4492.patch", "merged_at": "2020-03-29T15:09:11Z"}, "body": "Add missing brackets to if clause to avoid possible undefined behaviour.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4492/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4437", "id": 567129931, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc2ODEyMDA0", "number": 4437, "title": "Docs: Recommend upgrading pip and Pillow", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-18T20:10:20Z", "updated_at": "2020-02-20T09:15:55Z", "closed_at": "2020-02-20T08:13:07Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4437", "html_url": "https://github.com/python-pillow/Pillow/pull/4437", "diff_url": "https://github.com/python-pillow/Pillow/pull/4437.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4437.patch", "merged_at": "2020-02-20T08:13:07Z"}, "body": "Changes proposed in this pull request:\r\n\r\n * To use Pillow's Python 3.8 wheels on Windows, pip >= 19.2 is needed\r\n * I realised https://github.com/python-pillow/Pillow/pull/4214 missed the `--upgrade` switch so never actually recommended upgrading pip, as intended\r\n * So do it here\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4437/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4425", "id": 566232826, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc2MDgzNjgw", "number": 4425, "title": "Fix saving bug in IcnsImagePlugin __main__", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-17T11:20:50Z", "updated_at": "2020-02-17T18:17:40Z", "closed_at": "2020-02-17T11:59:28Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4425", "html_url": "https://github.com/python-pillow/Pillow/pull/4425", "diff_url": "https://github.com/python-pillow/Pillow/pull/4425.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4425.patch", "merged_at": "2020-02-17T11:59:28Z"}, "body": "When using the `__main__` functionality of IcnsImagePlugin, I found a bug.\r\n\r\n> $ python IcnsImagePlugin.py in.icns\r\n> Traceback (most recent call last):\r\n>   File \"IcnsImagePlugin.py\", line 373, in <module>\r\n>     im.save(\"out-%s-%s-%s.png\" % size)\r\n> AttributeError: 'ImagingCore' object has no attribute 'save'\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/29fee8fc43d59dd65b7c533def44548aa5b9bc12/src/PIL/IcnsImagePlugin.py#L372-L373\r\n\r\nThis PR fixes that bug, and also ensures that the file pointer that is opened is closed again.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4425/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4424", "id": 566219335, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc2MDcyODAz", "number": 4424, "title": "Fix Name field length when saving IM images", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 753745246, "node_id": "MDU6TGFiZWw3NTM3NDUyNDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Testing", "name": "Testing", "color": "d93f0b", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-17T10:56:34Z", "updated_at": "2020-03-03T12:04:17Z", "closed_at": "2020-02-27T09:27:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4424", "html_url": "https://github.com/python-pillow/Pillow/pull/4424", "diff_url": "https://github.com/python-pillow/Pillow/pull/4424.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4424.patch", "merged_at": "2020-02-27T09:27:45Z"}, "body": "For #4193.\r\n\r\nConverting `Tests/test_file_im.py` to use pytest surfaced a bug in saving IM format files.\r\n\r\nWhen roundtripping the file, it failed opening the saved file, at this check:\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/29fee8fc43d59dd65b7c533def44548aa5b9bc12/src/PIL/ImImagePlugin.py#L155-L156\r\n\r\nIt's falling over the `Name: ` field, which is saved like this:\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/29fee8fc43d59dd65b7c533def44548aa5b9bc12/src/PIL/ImImagePlugin.py#L349-L350\r\n\r\nThe difference is the temp path+filename under the limit with `PillowTestCase.tempfile`:\r\n\r\n```\r\nName: /var/folders/kt/j77sf4_n6fnbx6pg199rbx700000gn/T/tempx72ebkj5.im\r\n```\r\n\r\nAnd over the limit with pytest's `tmp_path`:\r\n\r\n```\r\nName: /private/var/folders/kt/j77sf4_n6fnbx6pg199rbx700000gn/T/pytest-of-hugo/pytest-126/test_roundtrip0/temp.im\r\n```\r\n\r\nThis PR trims the path+filename to fit, and I suggest to keep the last part which includes the filename and extension, rather than cropping it off.\r\n\r\n```\r\nName: olders/kt/j77sf4_n6fnbx6pg199rbx700000gn/T/pytest-of-hugo/pytest-126/test_roundtrip0/temp.im\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4424/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4418", "id": 564132537, "node_id": "MDU6SXNzdWU1NjQxMzI1Mzc=", "number": 4418, "title": "Wrong frame snapshot in GIF animated file", "user": {"login": "imfantuan", "id": 16457655, "node_id": "MDQ6VXNlcjE2NDU3NjU1", "avatar_url": "https://avatars.githubusercontent.com/u/16457655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imfantuan", "html_url": "https://github.com/imfantuan", "followers_url": "https://api.github.com/users/imfantuan/followers", "following_url": "https://api.github.com/users/imfantuan/following{/other_user}", "gists_url": "https://api.github.com/users/imfantuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/imfantuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imfantuan/subscriptions", "organizations_url": "https://api.github.com/users/imfantuan/orgs", "repos_url": "https://api.github.com/users/imfantuan/repos", "events_url": "https://api.github.com/users/imfantuan/events{/privacy}", "received_events_url": "https://api.github.com/users/imfantuan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-12T16:53:51Z", "updated_at": "2021-04-15T07:47:44Z", "closed_at": "2021-04-15T07:47:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n```python\r\nim.open(gif.stream)\r\nim.convert(\"RGB/RGBA/P\", dither=None)\r\nim.seek(frame_number)\r\nim.save(outfile, fmt)\r\n```\r\n\r\n### What did you expect to happen?\r\norgi_GIF: http://gif.imgix.net/imgix-logo-ani.gif\r\nRight_Frame_44_in_Imgix.com: http://gif.imgix.net/imgix-logo-ani.gif?frame=44\r\n### What actually happened?\r\nWrong_Frame_44_in_my_system: https://files.soft.org/?url=/imgix.gif&frame=44\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Centos 7 & 8\r\n* Python: 3.6.8\r\n* Pillow: 7.0.0", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4418/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4383", "id": 555125709, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3MTQ1ODI5", "number": 4383, "title": "Use GHA-installed PyPy3", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}, {"id": 504392710, "node_id": "MDU6TGFiZWw1MDQzOTI3MTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Infrastructure", "name": "Infrastructure", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-25T19:16:13Z", "updated_at": "2020-01-26T05:04:08Z", "closed_at": "2020-01-26T02:20:05Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4383", "html_url": "https://github.com/python-pillow/Pillow/pull/4383", "diff_url": "https://github.com/python-pillow/Pillow/pull/4383.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4383.patch", "merged_at": "2020-01-26T02:20:04Z"}, "body": "Fixes #4382.\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Instead of downloading and installing PyPy ourselves, use the one now available from GHA: https://github.com/marketplace/actions/setup-python-environment\r\n * Saves about a minute of download/install time from the build\r\n\r\n# Last master pass\r\n\r\n```\r\nPython 3.6.9 (1608da62bfc7, Dec 23 2019, 12:38:24)\r\n       [PyPy 7.3.0 with MSC v.1911 32 bit]\r\n...\r\n================ 1357 passed, 76 skipped in 161.27s (0:02:41) =================\r\n```\r\n\r\nhttps://github.com/python-pillow/Pillow/runs/407161674?check_suite_focus=true#step:24:16\r\n\r\n# This PR\r\n\r\n```\r\nPython 3.6.9 (1608da62bfc7, Dec 23 2019, 12:38:24)\r\n       [PyPy 7.3.0 with MSC v.1911 32 bit]\r\n...\r\n================ 1357 passed, 76 skipped in 162.05s (0:02:42) =================\r\n```\r\n\r\nhttps://github.com/hugovk/Pillow/runs/408857182?check_suite_focus=true#step:23:16\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4383/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4382", "id": 555120707, "node_id": "MDU6SXNzdWU1NTUxMjA3MDc=", "number": 4382, "title": "GHA: PyPy3 install failing on Windows", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}, {"id": 504392710, "node_id": "MDU6TGFiZWw1MDQzOTI3MTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Infrastructure", "name": "Infrastructure", "color": "1d76db", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-25T18:42:34Z", "updated_at": "2020-01-26T05:03:47Z", "closed_at": "2020-01-26T02:20:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n\r\nRebase a PR and test on GitHub Actions.\r\n\r\n### What did you expect to happen?\r\n\r\nIt passes, as it had pre-rebase.\r\n\r\n### What actually happened?\r\n\r\nIt passes, except for GHA's \"Test Windows / Python pypy3.6 x86\", that fails at \"Install PyPy\".\r\n\r\nAll other PRs are also failing.\r\n\r\nLast pass: https://github.com/python-pillow/Pillow/runs/407161674?check_suite_focus=true\r\n\r\nFirst fail: https://github.com/python-pillow/Pillow/runs/408445780?check_suite_focus=true\r\n\r\n#### The install step\r\n\r\n```yml\r\n    - name: Install PyPy\r\n      if: \"contains(matrix.python-version, 'pypy')\"\r\n      run: |\r\n        curl -fsSL -o pypy3.zip \"${{ matrix.pypy-url }}\"\r\n        7z x pypy3.zip \"-o$env:RUNNER_WORKSPACE\\\"\r\n        mv \"$env:RUNNER_WORKSPACE\\${{ matrix.pypy-version }}\" \"$env:RUNNER_WORKSPACE\\${{ matrix.python-version }}\"\r\n        $env:PYTHON=\"$env:RUNNER_WORKSPACE\\${{ matrix.python-version }}\"\r\n        # set env: pythonLocation\r\n        Write-Host \"`#`#[set-env name=pythonLocation;]$env:PYTHON\" # old syntax https://github.com/actions/toolkit/issues/61\r\n        Write-Host \"::set-env name=pythonLocation::$env:PYTHON\" # new syntax https://github.com/actions/toolkit/blob/5bb77ec03fea98332e41f9347c8fbb1ce1e48f4a/docs/commands.md\r\n        New-Item -ItemType SymbolicLink -Path \"$env:PYTHON\\python.exe\" -Target \"$env:PYTHON\\pypy3.exe\"\r\n        curl -fsSL -o get-pip.py https://bootstrap.pypa.io/get-pip.py\r\n        $env:PATH = \"$env:PYTHON\\bin;$env:PATH\"\r\n        & $env:PYTHON\\python.exe get-pip.py\r\n      shell: pwsh\r\n```\r\n\r\n#### The error\r\n\r\n```\r\nRun curl -fsSL -o pypy3.zip \"https://bitbucket.org/pypy/pypy/downloads/pypy3.6-v7.3.0-win32.zip\"\r\n\r\n7-Zip 19.00 (x64) : Copyright (c) 1999-2018 Igor Pavlov : 2019-02-21\r\n\r\nScanning the drive for archives:\r\n1 file, 48009204 bytes (46 MiB)\r\n\r\nExtracting archive: pypy3.zip\r\n--\r\nPath = pypy3.zip\r\nType = zip\r\nPhysical Size = 48009204\r\n\r\nEverything is Ok\r\n\r\nFolders: 214\r\nFiles: 3478\r\nSize:       170359849\r\nCompressed: 48009204\r\n\r\n\r\n    Directory: D:\\a\\Pillow\\pypy3.6\r\n\r\nMode                LastWriteTime         Length Name\r\n----                -------------         ------ ----\r\n-a---l         1/25/2020  7:56 AM              0 python.exe\r\nWARNING: pip is being invoked by an old script wrapper. This will fail in a future version of pip.\r\n##[error]Process completed with exit code 1.\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows\r\n* Python: PyPy3.6\r\n* Pillow: master\r\n\r\n### See also\r\n\r\nTwo weeks ago: \"GHA: PyPy3 tests failing on macOS\" (https://github.com/python-pillow/Pillow/issues/4350), was a problem with a newly-deployed GHA image (https://github.com/actions/virtual-environments/issues/249). Could this be the same? At least I don't see any similar changelog entries to indicate new images, like https://github.blog/changelog/2020-01-09-github-actions-updates-to-the-macos-10-15-virtual-environment/ from last time.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4382/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4343", "id": 546329932, "node_id": "MDU6SXNzdWU1NDYzMjk5MzI=", "number": 4343, "title": "JPEG 2000 file cannot be Image.reduce() 'd", "user": {"login": "Eximius", "id": 565049, "node_id": "MDQ6VXNlcjU2NTA0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/565049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Eximius", "html_url": "https://github.com/Eximius", "followers_url": "https://api.github.com/users/Eximius/followers", "following_url": "https://api.github.com/users/Eximius/following{/other_user}", "gists_url": "https://api.github.com/users/Eximius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Eximius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Eximius/subscriptions", "organizations_url": "https://api.github.com/users/Eximius/orgs", "repos_url": "https://api.github.com/users/Eximius/repos", "events_url": "https://api.github.com/users/Eximius/events{/privacy}", "received_events_url": "https://api.github.com/users/Eximius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 631323883, "node_id": "MDU6TGFiZWw2MzEzMjM4ODM=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/JPEG", "name": "JPEG", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/39", "html_url": "https://github.com/python-pillow/Pillow/milestone/39", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/39/labels", "id": 4999491, "node_id": "MDk6TWlsZXN0b25lNDk5OTQ5MQ==", "number": 39, "title": "7.1.0", "description": "", "creator": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2020-01-13T13:51:26Z", "updated_at": "2020-05-01T15:15:44Z", "due_on": "2020-04-01T07:00:00Z", "closed_at": "2020-04-26T04:34:50Z"}, "comments": 2, "created_at": "2020-01-07T14:57:42Z", "updated_at": "2020-03-29T20:29:22Z", "closed_at": "2020-03-29T20:29:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "JPEG 2000 file cannot be Image.reduce() 'd\r\n\r\n... because img.reduce becomes a integer 0 during loading somehow.\r\n\r\nCan be repeated with\r\n\r\n[this image](https://drive.google.com/open?id=1UbSkNdOuUCt50TTu7Zc4PnuP6f-5RkKK)\r\n\r\n```\r\n$ python -c 'import PIL;from PIL import Image; im = Image.open(\"pillow_bug.jp2\"); print(PIL.__version__);print(im.reduce)'\r\n7.1.0.dev0\r\n0\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4277", "id": 539506250, "node_id": "MDU6SXNzdWU1Mzk1MDYyNTA=", "number": 4277, "title": "Unexpected, additional outline in ImageDraw.ellipse, even for outline=None", "user": {"login": "HansHirse", "id": 2692578, "node_id": "MDQ6VXNlcjI2OTI1Nzg=", "avatar_url": "https://avatars.githubusercontent.com/u/2692578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HansHirse", "html_url": "https://github.com/HansHirse", "followers_url": "https://api.github.com/users/HansHirse/followers", "following_url": "https://api.github.com/users/HansHirse/following{/other_user}", "gists_url": "https://api.github.com/users/HansHirse/gists{/gist_id}", "starred_url": "https://api.github.com/users/HansHirse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HansHirse/subscriptions", "organizations_url": "https://api.github.com/users/HansHirse/orgs", "repos_url": "https://api.github.com/users/HansHirse/repos", "events_url": "https://api.github.com/users/HansHirse/events{/privacy}", "received_events_url": "https://api.github.com/users/HansHirse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-18T07:29:10Z", "updated_at": "2020-01-06T10:12:51Z", "closed_at": "2020-01-06T10:12:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nDrawing a polygon using [`ImageDraw.polygon`](https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.polygon) and an ellipse using [`ImageDraw.ellipse`](https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.ellipse) with no outline specified, with an opaque outline, and with a semi-transparent outline.\r\n\r\n### What did you expect to happen?\r\n\r\n[`ImageDraw.polygon`](https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.polygon) and [`ImageDraw.ellipse`](https://pillow.readthedocs.io/en/stable/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.ImageDraw.ellipse) should behave the same for the mentioned cases.\r\n\r\n### What actually happened?\r\n\r\nThe output created by the code below:\r\n\r\n\r\n![Figure_1](https://user-images.githubusercontent.com/2692578/71064597-bd587980-216f-11ea-90f1-585e27110d11.png)\r\n\r\nLooking at the polygon, if no outline is specified (top left image), we see that the black line is visible, which is one of the polygon's borders. Specifying an opaque outline (top center image), the black line's no longer visible. Setting a semi-transparent outline (top right image) reveals, that the outline is identical to the polygon's border.\r\n\r\nNow, the same for the ellipse: If no outline is set (top left), an outline is shown nevertheless, most likely the same color as used for the `fill` parameter, but without incorporating an alpha value. Setting an opaque outline (top center) \"overwrites\" the unexpected existent outline, but when setting a semi-transparent outline, we see that the unexpected outline is still there.\r\n\r\nThis effect becomes even more obvious, when setting `width > 1` in `ellipse`, see the bottom row. The unexpected outline still seems to have `width = 1`, whereas the explicitly set outline has `width = 5`.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10 Prof.\r\n* Python: 3.7.1\r\n* Pillow: 6.2.1\r\n\r\n\r\n```python\r\nfrom matplotlib import pyplot as plt\r\nfrom PIL import Image, ImageDraw\r\n\r\n\r\ndef example(outline_alpha=None, width=None):\r\n    if outline_alpha is None:\r\n        outline = None\r\n    else:\r\n        outline = (255, 255, 0, outline_alpha)\r\n    if width is None:\r\n        width = 0\r\n    img = Image.new('RGB', (100, 100), (255, 255, 255))\r\n    drw = ImageDraw.Draw(img, 'RGBA')\r\n    drw.line([(0, 40), (100, 40)], (0, 0, 0, 255))\r\n    drw.line([(50, 100), (100, 0)], (0, 0, 0, 255))\r\n    drw.polygon([(50, 100), (100, 0), (0, 0)], (0, 255, 0, 128), outline)\r\n    drw.ellipse([(40, 40), (90, 90)], (0, 0, 255, 128), outline, width)\r\n    return img\r\n\r\n\r\nplt.figure(1, figsize=(15, 10))\r\nplt.subplot(2, 3, 1), plt.imshow(example()), plt.title('No outlines specified, width = 0')\r\nplt.subplot(2, 3, 2), plt.imshow(example(255)), plt.title('Opaque outlines specified, width = 0')\r\nplt.subplot(2, 3, 3), plt.imshow(example(128)), plt.title('Semi-transparent outlines specified, width = 0')\r\nplt.subplot(2, 3, 4), plt.imshow(example(None, 5)), plt.title('No outlines specified, width = 5')\r\nplt.subplot(2, 3, 5), plt.imshow(example(255, 5)), plt.title('Opaque outlines specified, width = 5')\r\nplt.subplot(2, 3, 6), plt.imshow(example(20, 5)), plt.title('Semi-transparent outlines specified, width = 5')\r\nplt.tight_layout()\r\nplt.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4277/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4213", "id": 524826330, "node_id": "MDU6SXNzdWU1MjQ4MjYzMzA=", "number": 4213, "title": "Big-endian test failures on IBM Z", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1741674011, "node_id": "MDU6TGFiZWwxNzQxNjc0MDEx", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Big-endian", "name": "Big-endian", "color": "294493", "default": false, "description": "Big-endian processors"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-19T07:29:46Z", "updated_at": "2022-03-12T07:23:31Z", "closed_at": "2022-03-12T07:21:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for reporting an issue.\r\n\r\nFollow these guidelines to ensure your issue is handled properly.\r\n\r\nIf you have a ...\r\n\r\n1.  General question: consider asking the question on Stack Overflow\r\n    with the python-imaging-library tag:\r\n\r\n    * https://stackoverflow.com/questions/tagged/python-imaging-library\r\n\r\n    Do not ask a question in both places.\r\n\r\n    If you think you have found a bug or have an unexplained exception\r\n    then file a bug report here.\r\n\r\n2.  Bug report: include a self-contained, copy-pastable example that\r\n    generates the issue if possible. Be concise with code posted.\r\n    Guidelines on how to provide a good bug report:\r\n\r\n    * https://stackoverflow.com/help/mcve\r\n\r\n    Bug reports which follow these guidelines are easier to diagnose,\r\n    and are often handled much more quickly.\r\n\r\n3.  Feature request: do a quick search of existing issues\r\n    to make sure this has not been asked before.\r\n\r\nWe know asking good questions takes effort, and we appreciate your time.\r\nThank you.\r\n-->\r\n\r\n### What did you do?\r\n\r\nRun tests on IBM Z (`s390x`) on Travis CI, newly available:\r\n\r\n* https://blog.travis-ci.com/2019-11-12-multi-cpu-architecture-ibm-power-ibm-z\r\n\r\nLike this:\r\n\r\n* https://github.com/python-pillow/Pillow/compare/master...hugovk:travis-arch\r\n\r\n(The other new architectures, `arm64` and `ppc64le`, both passed when skipping the `pyqt5` install.)\r\n\r\n### What did you expect to happen?\r\n\r\nTests pass.\r\n\r\n### What actually happened?\r\n\r\n7 tests fail.\r\n\r\n* [x] `TestFileJpeg2k.test_16bit_monochrome_j2k_like_tiff`\r\n* [x] `TestFileJpeg2k.test_16bit_monochrome_jp2_like_tiff`\r\n* [x] `TestFilePng.test_sanity`\r\n* [x] `TestFileWebpAnimation.test_write_animation_L`\r\n* [x] `TestFileWebpAnimation.test_write_animation_RGB`\r\n* [x] `TestImageGetExtrema.test_extrema`\r\n* [x] `TestImageGetExtrema.test_true_16`\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n______________ TestFileJpeg2k.test_16bit_monochrome_j2k_like_tiff ______________\r\nself = <Tests.test_file_jpeg2k.TestFileJpeg2k testMethod=test_16bit_monochrome_j2k_like_tiff>\r\n    def test_16bit_monochrome_j2k_like_tiff(self):\r\n    \r\n        tiff_16bit = Image.open(\"Tests/images/16bit.cropped.tif\")\r\n        j2k = Image.open(\"Tests/images/16bit.cropped.j2k\")\r\n>       self.assert_image_similar(j2k, tiff_16bit, 1e-3)\r\nTests/test_file_jpeg2k.py:180: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nTests/helper.py:153: in assert_image_similar\r\n    raise e\r\nTests/helper.py:139: in assert_image_similar\r\n    self.assertGreaterEqual(\r\nE   AssertionError: 0.001 not greater than or equal to 254.937744140625 :  average pixel value difference 254.9377 > epsilon 0.0010\r\n______________ TestFileJpeg2k.test_16bit_monochrome_jp2_like_tiff ______________\r\nself = <Tests.test_file_jpeg2k.TestFileJpeg2k testMethod=test_16bit_monochrome_jp2_like_tiff>\r\n    def test_16bit_monochrome_jp2_like_tiff(self):\r\n    \r\n        tiff_16bit = Image.open(\"Tests/images/16bit.cropped.tif\")\r\n        jp2 = Image.open(\"Tests/images/16bit.cropped.jp2\")\r\n>       self.assert_image_similar(jp2, tiff_16bit, 1e-3)\r\nTests/test_file_jpeg2k.py:174: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nTests/helper.py:153: in assert_image_similar\r\n    raise e\r\nTests/helper.py:139: in assert_image_similar\r\n    self.assertGreaterEqual(\r\nE   AssertionError: 0.001 not greater than or equal to 254.937744140625 :  average pixel value difference 254.9377 > epsilon 0.0010\r\n___________________________ TestFilePng.test_sanity ____________________________\r\nself = <Tests.test_file_png.TestFilePng testMethod=test_sanity>\r\n    def test_sanity(self):\r\n    \r\n        # internal version number\r\n        self.assertRegex(Image.core.zlib_version, r\"\\d+\\.\\d+\\.\\d+(\\.\\d+)?$\")\r\n    \r\n        test_file = self.tempfile(\"temp.png\")\r\n    \r\n        hopper(\"RGB\").save(test_file)\r\n    \r\n        with Image.open(test_file) as im:\r\n            im.load()\r\n            self.assertEqual(im.mode, \"RGB\")\r\n            self.assertEqual(im.size, (128, 128))\r\n            self.assertEqual(im.format, \"PNG\")\r\n            self.assertEqual(im.get_format_mimetype(), \"image/png\")\r\n    \r\n        for mode in [\"1\", \"L\", \"P\", \"RGB\", \"I\", \"I;16\"]:\r\n            im = hopper(mode)\r\n            im.save(test_file)\r\n            reloaded = Image.open(test_file)\r\n            if mode == \"I;16\":\r\n                reloaded = reloaded.convert(mode)\r\n>           self.assert_image_equal(reloaded, im)\r\nTests/test_file_png.py:97: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nTests/helper.py:113: in assert_image_equal\r\n    self.fail(msg or \"got different content\")\r\nE   AssertionError: got different content\r\n----------------------------- Captured stdout call -----------------------------\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 30416\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 1867\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 10582\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'PLTE' 41 768\r\nSTREAM b'IDAT' 821 8528\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 30416\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 13537\r\nSTREAM b'IHDR' 16 13\r\nSTREAM b'IDAT' 41 13539\r\n------------------------------ Captured log call -------------------------------\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 30416\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 1867\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 10582\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'PLTE' 41 768\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 821 8528\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 30416\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 13537\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IHDR' 16 13\r\nDEBUG    PIL.PngImagePlugin:PngImagePlugin.py:142 STREAM b'IDAT' 41 13539\r\n_________________ TestFileWebpAnimation.test_write_animation_L _________________\r\nself = <Tests.test_file_webp_animated.TestFileWebpAnimation testMethod=test_write_animation_L>\r\n    def test_write_animation_L(self):\r\n        \"\"\"\r\n        Convert an animated GIF to animated WebP, then compare the\r\n        frame count, and first and last frames to ensure they're\r\n        visually similar.\r\n        \"\"\"\r\n    \r\n        with Image.open(\"Tests/images/iss634.gif\") as orig:\r\n            self.assertGreater(orig.n_frames, 1)\r\n    \r\n            temp_file = self.tempfile(\"temp.webp\")\r\n            orig.save(temp_file, save_all=True)\r\n            im = Image.open(temp_file)\r\n            self.assertEqual(im.n_frames, orig.n_frames)\r\n    \r\n            # Compare first and last frames to the original animated GIF\r\n            orig.load()\r\n            im.load()\r\n            self.assert_image_similar(im, orig.convert(\"RGBA\"), 25.0)\r\n            orig.seek(orig.n_frames - 1)\r\n            im.seek(im.n_frames - 1)\r\n            orig.load()\r\n            im.load()\r\n>           self.assert_image_similar(im, orig.convert(\"RGBA\"), 25.0)\r\nTests/test_file_webp_animated.py:62: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nTests/helper.py:153: in assert_image_similar\r\n    raise e\r\nTests/helper.py:139: in assert_image_similar\r\n    self.assertGreaterEqual(\r\nE   AssertionError: 25.0 not greater than or equal to 57.66992086630571 :  average pixel value difference 57.6699 > epsilon 25.0000\r\n________________ TestFileWebpAnimation.test_write_animation_RGB ________________\r\nself = <Tests.test_file_webp_animated.TestFileWebpAnimation testMethod=test_write_animation_RGB>\r\n    def test_write_animation_RGB(self):\r\n        \"\"\"\r\n        Write an animated WebP from RGB frames, and ensure the frames\r\n        are visually similar to the originals.\r\n        \"\"\"\r\n    \r\n        def check(temp_file):\r\n            im = Image.open(temp_file)\r\n            self.assertEqual(im.n_frames, 2)\r\n    \r\n            # Compare first frame to original\r\n            im.load()\r\n            self.assert_image_equal(im, frame1.convert(\"RGBA\"))\r\n    \r\n            # Compare second frame to original\r\n            im.seek(1)\r\n            im.load()\r\n            self.assert_image_equal(im, frame2.convert(\"RGBA\"))\r\n    \r\n        frame1 = Image.open(\"Tests/images/anim_frame1.webp\")\r\n        frame2 = Image.open(\"Tests/images/anim_frame2.webp\")\r\n    \r\n        temp_file1 = self.tempfile(\"temp.webp\")\r\n        frame1.copy().save(\r\n            temp_file1, save_all=True, append_images=[frame2], lossless=True\r\n        )\r\n>       check(temp_file1)\r\nTests/test_file_webp_animated.py:90: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nTests/test_file_webp_animated.py:81: in check\r\n    self.assert_image_equal(im, frame2.convert(\"RGBA\"))\r\nTests/helper.py:113: in assert_image_equal\r\n    self.fail(msg or \"got different content\")\r\nE   AssertionError: got different content\r\n_______________________ TestImageGetExtrema.test_extrema _______________________\r\nself = <Tests.test_image_getextrema.TestImageGetExtrema testMethod=test_extrema>\r\n    def test_extrema(self):\r\n        def extrema(mode):\r\n            return hopper(mode).getextrema()\r\n    \r\n        self.assertEqual(extrema(\"1\"), (0, 255))\r\n        self.assertEqual(extrema(\"L\"), (0, 255))\r\n        self.assertEqual(extrema(\"I\"), (0, 255))\r\n        self.assertEqual(extrema(\"F\"), (0, 255))\r\n        self.assertEqual(extrema(\"P\"), (0, 225))  # fixed palette\r\n        self.assertEqual(extrema(\"RGB\"), ((0, 255), (0, 255), (0, 255)))\r\n        self.assertEqual(extrema(\"RGBA\"), ((0, 255), (0, 255), (0, 255), (255, 255)))\r\n        self.assertEqual(extrema(\"CMYK\"), ((0, 255), (0, 255), (0, 255), (0, 0)))\r\n>       self.assertEqual(extrema(\"I;16\"), (0, 255))\r\nE       AssertionError: Tuples differ: (0, 65280) != (0, 255)\r\nE       \r\nE       First differing element 1:\r\nE       65280\r\nE       255\r\nE       \r\nE       - (0, 65280)\r\nE       + (0, 255)\r\nTests/test_image_getextrema.py:19: AssertionError\r\n_______________________ TestImageGetExtrema.test_true_16 _______________________\r\nself = <Tests.test_image_getextrema.TestImageGetExtrema testMethod=test_true_16>\r\n    def test_true_16(self):\r\n        im = Image.open(\"Tests/images/16_bit_noise.tif\")\r\n        self.assertEqual(im.mode, \"I;16\")\r\n        extrema = im.getextrema()\r\n>       self.assertEqual(extrema, (106, 285))\r\nE       AssertionError: Tuples differ: (513, 64512) != (106, 285)\r\nE       \r\nE       First differing element 0:\r\nE       513\r\nE       106\r\nE       \r\nE       - (513, 64512)\r\nE       + (106, 285)\r\nTests/test_image_getextrema.py:25: AssertionError\r\n```\r\n\r\nhttps://travis-ci.org/hugovk/Pillow/jobs/613630151\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Linux\r\n* Python: 3.5-3.8\r\n* Pillow: master\r\n\r\n### Related\r\n\r\n* https://github.com/python-pillow/Pillow/issues/1204\r\n* https://github.com/python-pillow/Pillow/issues/391\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4213/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4171", "id": 512800869, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMyNzQzMTE1", "number": 4171, "title": "Corrected DdsImagePlugin setting info gamma", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-26T07:04:38Z", "updated_at": "2022-10-07T22:00:04Z", "closed_at": "2019-11-13T18:26:05Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4171", "html_url": "https://github.com/python-pillow/Pillow/pull/4171", "diff_url": "https://github.com/python-pillow/Pillow/pull/4171.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4171.patch", "merged_at": "2019-11-13T18:26:04Z"}, "body": "Resolves #4164\r\n\r\nThe issue reports that the following line fails -\r\nhttps://github.com/python-pillow/Pillow/blob/84fed4d213a50b359188aa59f99ed06ba1249c14/src/PIL/DdsImagePlugin.py#L158\r\n\r\nThis is understandable, since there is no `self.im_info`. Presumably, `self.info` was meant when this was added in #2068.\r\n\r\nSetting gamma in info in this way is already done in PNG -\r\n\r\n```pycon\r\n>>> from PIL import Image\r\n>>> im = Image.open(\"Tests/images/hopper.png\")\r\n>>> im.info\r\n{'gamma': 0.45455, 'chromaticity': (0.3127, 0.329, 0.64, 0.33, 0.3, 0.6, 0.15, 0.06), 'dpi': (96, 96)}\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4171/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4168", "id": 512463767, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMyNDY5Nzk5", "number": 4168, "title": "GHA Windows: Explicitly use cmd shell, as GH changed the default to powershell", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-25T11:30:14Z", "updated_at": "2019-10-25T13:00:53Z", "closed_at": "2019-10-25T13:00:51Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4168", "html_url": "https://github.com/python-pillow/Pillow/pull/4168", "diff_url": "https://github.com/python-pillow/Pillow/pull/4168.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4168.patch", "merged_at": "2019-10-25T13:00:51Z"}, "body": "Fixes #4167\r\n\r\n* The default Windows shell changed from `cmd` to `powershell`. Adding `shell: cmd` to every step which doesn't specify a shell fixes this.\r\n\r\n* https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#using-a-specific-shell\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4168/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4167", "id": 512406897, "node_id": "MDU6SXNzdWU1MTI0MDY4OTc=", "number": 4167, "title": "GHA Windows: \"Unexpected token '-m' in expression or statement\"", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-25T09:28:45Z", "updated_at": "2019-10-25T13:00:51Z", "closed_at": "2019-10-25T13:00:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The GitHub Actions for Windows have started failing:\r\n\r\n\r\n```\r\npip install wheel pytest pytest-cov codecov\r\n##[error]Process completed with exit code 1.\r\nRun \"%pythonLocation%\\python.exe\" -m pip install wheel pytest pytest-cov\r\nAt D:\\a\\_temp\\a98eeb94-97c8-4e47-98bc-484365b814d3.ps1:2 char:31\r\n+ \"%pythonLocation%\\python.exe\" -m pip install wheel pytest pytest-cov\r\n+                               ~~\r\nUnexpected token '-m' in expression or statement.\r\nAt D:\\a\\_temp\\a98eeb94-97c8-4e47-98bc-484365b814d3.ps1:2 char:34\r\n+ \"%pythonLocation%\\python.exe\" -m pip install wheel pytest pytest-cov\r\n+                                  ~~~\r\nUnexpected token 'pip' in expression or statement.\r\n+ CategoryInfo          : ParserError: (:) [], ParseException\r\n+ FullyQualifiedErrorId : UnexpectedToken\r\n \r\n##[error]Process completed with exit code 1.\r\n```\r\n\r\nLast pass, 2 days ago: https://github.com/python-pillow/Pillow/runs/271449412\r\n\r\nFirst fail, 10 hours ago: https://github.com/python-pillow/Pillow/runs/274142713\r\n\r\nCoincided with https://github.com/python-pillow/Pillow/issues/4166 on macOS.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4166", "id": 512405460, "node_id": "MDU6SXNzdWU1MTI0MDU0NjA=", "number": 4166, "title": "GHA macOS: \"Certificate used to sign package is not trusted\"", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}, {"id": 242311009, "node_id": "MDU6TGFiZWwyNDIzMTEwMDk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/macOS", "name": "macOS", "color": "207de5", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-25T09:25:48Z", "updated_at": "2019-10-26T06:04:57Z", "closed_at": "2019-10-26T06:04:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The GitHub Actions for macOS have started failing:\r\n\r\n```\r\nInstall macOS dependencies\r\n##[error]Process completed with exit code 1.\r\nRun .github/workflows/macos-install.sh\r\ninstaller: Package name is macOS_SDK_headers_for_macOS_10.14\r\ninstaller: Certificate used to sign package is not trusted. Use -allowUntrusted to override.\r\n##[error]Process completed with exit code 1.\r\n```\r\n\r\n\r\nLast pass, 2 days ago: https://github.com/python-pillow/Pillow/runs/271449358\r\n\r\nFirst fail, 10 hours ago: https://github.com/python-pillow/Pillow/runs/274142645\r\n\r\nCoincided with https://github.com/python-pillow/Pillow/issues/4167 on Windows.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4164", "id": 512102590, "node_id": "MDU6SXNzdWU1MTIxMDI1OTA=", "number": 4164, "title": "DdsImagePlugin fails when dxgi_format == DXGI_FORMAT_BC7_UNORM_SRGB", "user": {"login": "ouroborus", "id": 392047, "node_id": "MDQ6VXNlcjM5MjA0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/392047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ouroborus", "html_url": "https://github.com/ouroborus", "followers_url": "https://api.github.com/users/ouroborus/followers", "following_url": "https://api.github.com/users/ouroborus/following{/other_user}", "gists_url": "https://api.github.com/users/ouroborus/gists{/gist_id}", "starred_url": "https://api.github.com/users/ouroborus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ouroborus/subscriptions", "organizations_url": "https://api.github.com/users/ouroborus/orgs", "repos_url": "https://api.github.com/users/ouroborus/repos", "events_url": "https://api.github.com/users/ouroborus/events{/privacy}", "received_events_url": "https://api.github.com/users/ouroborus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-24T18:16:43Z", "updated_at": "2019-11-13T18:26:04Z", "closed_at": "2019-11-13T18:26:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/python-pillow/Pillow/blob/84fed4d213a50b359188aa59f99ed06ba1249c14/src/PIL/DdsImagePlugin.py#L156-L159\r\n\r\nAt `self.im_info[\"gamma\"] = 1 / 2.2`, `self.im_info` has never been initialized and so trying to set `self.im_info[\"gamma\"]` fails with:\r\n```\r\nAttributeError: 'DdsImageFile' object has no attribute 'im_info'\r\n```\r\nAs far as I can tell, this is the only place `im_info` is ever referenced in this or the ancestor classes.\r\n\r\nA possible solution would be to change this section to:\r\n```python\r\n                elif dxgi_format == DXGI_FORMAT_BC7_UNORM_SRGB:\r\n                    self.pixel_format = \"BC7\"\r\n                    if not hasattr(self, 'im_info'):\r\n                        self.im_info = {}\r\n                    self.im_info[\"gamma\"] = 1 / 2.2\r\n                    n = 7\r\n```\r\n\r\nAn alternate solution would be to initialize `im_info` earlier in the loader method.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4156", "id": 510145964, "node_id": "MDU6SXNzdWU1MTAxNDU5NjQ=", "number": 4156, "title": "test_stroke segfault", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-21T17:32:31Z", "updated_at": "2019-11-02T02:32:34Z", "closed_at": "2019-11-02T02:32:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nRun tests on Windows.\r\n\r\n(Found by @cgohlke at https://github.com/python-pillow/Pillow/issues/4152#issuecomment-544539229)\r\n\r\n### What did you expect to happen?\r\n\r\nNo segfault.\r\n\r\n### What actually happened?\r\n\r\nA segfault in `test_imagedraw.py::TestImageDraw::test_stroke` on all platforms, e.g.:\r\n\r\n```\r\n=============================================================== test session starts ================================================================\r\nplatform win32 -- Python 3.8.0, pytest-5.2.1, py-1.8.0, pluggy-0.13.0 -- X:\\Python38\\python.exe\r\ncachedir: .pytest_cache\r\nhypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('D:\\\\Build\\\\Pillow\\\\Pillow-6.2.1\\\\.hypothesis\\\\examples')\r\nrootdir: D:\\Build\\Pillow\\Pillow-6.2.1, inifile: setup.cfg\r\nplugins: hypothesis-4.40.0, palladium-1.2.2, cov-2.8.1, forked-1.1.1, xdist-1.30.0\r\ncollected 1380 items\r\n<snip>\r\nTests/test_imagedraw.py::TestImageDraw::test_stroke Windows fatal exception: access violation\r\n\r\nCurrent thread 0x00003724 (most recent call first):\r\n  File \"X:\\Python38\\lib\\site-packages\\PIL\\ImageFont.py\", line 466 in getmask2\r\n  File \"X:\\Python38\\lib\\site-packages\\PIL\\ImageDraw.py\", line 309 in draw_text\r\n  File \"X:\\Python38\\lib\\site-packages\\PIL\\ImageDraw.py\", line 346 in text\r\n  File \"D:\\Build\\Pillow\\Pillow-6.2.1\\Tests\\test_imagedraw.py\", line 828 in test_stroke\r\n  File \"X:\\Python38\\lib\\unittest\\case.py\", line 633 in _callTestMethod\r\n  File \"X:\\Python38\\lib\\unittest\\case.py\", line 676 in run\r\n  File \"D:\\Build\\Pillow\\Pillow-6.2.1\\Tests\\helper.py\", line 61 in run\r\n  File \"X:\\Python38\\lib\\unittest\\case.py\", line 736 in __call__\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\unittest.py\", line 207 in runtest\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 125 in pytest_runtest_call\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\callers.py\", line 187 in _multicall\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 83 in <lambda>\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 92 in _hookexec\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\hooks.py\", line 286 in __call__\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 201 in <lambda>\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 229 in from_call\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 200 in call_runtest_hook\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 176 in call_and_report\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 95 in runtestprotocol\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\runner.py\", line 80 in pytest_runtest_protocol\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\callers.py\", line 187 in _multicall\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 83 in <lambda>\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 92 in _hookexec\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\hooks.py\", line 286 in __call__\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\main.py\", line 256 in pytest_runtestloop\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\callers.py\", line 187 in _multicall\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 83 in <lambda>\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 92 in _hookexec\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\hooks.py\", line 286 in __call__\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\main.py\", line 235 in _main\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\main.py\", line 191 in wrap_session\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\main.py\", line 228 in pytest_cmdline_main\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\callers.py\", line 187 in _multicall\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 83 in <lambda>\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\manager.py\", line 92 in _hookexec\r\n  File \"X:\\Python38\\lib\\site-packages\\pluggy\\hooks.py\", line 286 in __call__\r\n  File \"X:\\Python38\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 90 in main\r\n  File \"X:\\Python38\\lib\\site-packages\\pytest.py\", line 101 in <module>\r\n  File \"X:\\Python38\\lib\\runpy.py\", line 85 in _run_code\r\n  File \"X:\\Python38\\lib\\runpy.py\", line 192 in _run_module_as_main\r\n```\r\n\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows\r\n* Python: all\r\n* Pillow: 6.2.0, 6.2.1\r\n\r\n> I noticed the crash first with Python 2,7 32-bit but can reproduce it on all Python versions and also with Pillow 6.2.0 when turning on [Heap Verification](https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/gflags-and-pageheap).\r\n\r\n\r\n### More info\r\n\r\nCrash is at https://github.com/python-pillow/Pillow/blob/6.2.x/src/_imagingft.c#L947. `source` is invalid.\r\n```\r\n>\t_imagingft.cp38-win_amd64.pyd!font_render(FontObject * self, _object * args) Line 947\tC\r\n \tpython38.dll!method_vectorcall_VARARGS(_object * func, _object * const * args, unsigned __int64 nargsf, _object * kwnames) Line 301\tC\r\n \t[Inline Frame] python38.dll!_PyObject_Vectorcall(_object * nargsf, _object * const *) Line 127\tC\r\n \tpython38.dll!call_function(_ts * tstate, _object * * * pp_stack, __int64 oparg, _object * kwnames) Line 4987\tC\r\n \tpython38.dll!_PyEval_EvalFrameDefault(_frame * f, int throwflag) Line 3487\tC\r\n \t[Inline Frame] python38.dll!PyEval_EvalFrameEx(_frame *) Line 741\tC\r\n \tpython38.dll!_PyEval_EvalCodeWithName(_object * _co, _object * globals, _object * locals, _object * const * args, __int64 argcount, _object * const * kwnames, _object * const * kwargs, __int64 kwcount, int kwstep, _object * const * defs, __int64 defcount, _object * kwdefs, _object * closure, _object * name, _object * qualname) Line 4298\tC\r\n \tpython38.dll!_PyFunction_Vectorcall(_object * func, _object * const * stack, unsigned __int64 nargsf, _object * kwnames) Line 435\tC\r\n \t[Inline Frame] python38.dll!_PyObject_Vectorcall(_object * nargsf, _object * const *) Line 127\tC\r\n \tpython38.dll!method_vectorcall(_object * method, _object * const * args, unsigned __int64 nargsf, _object * kwnames) Line 89\tC\r\n \tpython38.dll!PyVectorcall_Call(_object * callable, _object * tuple, _object * kwargs) Line 199\tC\r\n \t[Inline Frame] python38.dll!PyObject_Call(_object *) Line 227\tC\r\n \tpython38.dll!do_call_core(_ts * tstate, _object * func, _object * callargs, _object * kwdict) Line 5034\tC\r\n \tpython38.dll!_PyEval_EvalFrameDefault(_frame * f, int throwflag) Line 3560\tC\r\n \t[Inline Frame] python38.dll!PyEval_EvalFrameEx(_frame *) Line 741\tC\r\n \tpython38.dll!_PyEval_EvalCodeWithName(_object * _co, _object * globals, _object * locals, _object * const * args, __int64 argcount, _object * const * kwnames, _object * const * kwargs, __int64 kwcount, int kwstep, _object * const * defs, __int64 defcount, _object * kwdefs, _object * closure, _object * name, _object * qualname) Line 4298\tC\r\n \t[Inline Frame] python38.dll!_PyFunction_Vectorcall(_object * stack, _object * const *) Line 435\tC\r\n \t[Inline Frame] python38.dll!_PyObject_Vectorcall(_object * nargsf, _object * const *) Line 127\tC\r\n \tpython38.dll!call_function(_ts * tstate, _object * * * pp_stack, __int64 oparg, _object * kwnames) Line 4987\tC\r\n \tpython38.dll!_PyEval_EvalFrameDefault(_frame * f, int throwflag) Line 3501\tC\r\n \t[Inline Frame] python38.dll!PyEval_EvalFrameEx(_frame *) Line 741\tC\r\n \tpython38.dll!_PyEval_EvalCodeWithName(_object * _co, _object * globals, _object * locals, _object * const * args, __int64 argcount, _object * const * kwnames, _object * const * kwargs, __int64 kwcount, int kwstep, _object * const * defs, __int64 defcount, _object * kwdefs, _object * closure, _object * name, _object * qualname) Line 4298\tC\r\n \t[Inline Frame] python38.dll!_PyFunction_Vectorcall(_object * stack, _object * const *) Line 435\tC\r\n \t[Inline Frame] python38.dll!_PyObject_Vectorcall(_object *) Line 127\tC\r\n \tpython38.dll!method_vectorcall(_object * method, _object * const * args, unsigned __int64 nargsf, _object * kwnames) Line 60\tC\r\n \t[Inline Frame] python38.dll!_PyObject_Vectorcall(_object * nargsf, _object * const *) Line 127\tC\r\n \tpython38.dll!call_function(_ts * tstate, _object * * * pp_stack, __int64 oparg, _object * kwnames) Line 4987\tC\r\n \tpython38.dll!_PyEval_EvalFrameDefault(_frame * f, int throwflag) Line 3516\tC\r\n \t[Inline Frame] python38.dll!PyEval_EvalFrameEx(_frame *) Line 741\tC\r\n \tpython38.dll!_PyEval_EvalCodeWithName(_object * _co, _object * globals, _object * locals, _object * const * args, __int64 argcount, _object * const * kwnames, _object * const * kwargs, __int64 kwcount, int kwstep, _object * const * defs, __int64 defcount, _object * kwdefs, _object * closure, _object * name, _object * qualname) Line 4298\tC\r\n \tpython38.dll!PyEval_EvalCodeEx(_object * _co, _object * globals, _object * locals, _object * const * args, int argcount, _object * const * kws, int kwcount, _object * const * defs, int defcount, _object * kwdefs, _object * closure) Line 4334\tC\r\n \tpython38.dll!PyEval_EvalCode(_object * co, _object * globals, _object * locals) Line 724\tC\r\n \tpython38.dll!run_eval_code_obj(PyCodeObject * co, _object * globals, _object * locals) Line 1117\tC\r\n \tpython38.dll!run_mod(_mod * mod, _object * filename, _object * globals, _object * locals, PyCompilerFlags * flags, _arena * arena) Line 1140\tC\r\n \tpython38.dll!PyRun_FileExFlags(_iobuf * fp, const char * filename_str, int start, _object * globals, _object * locals, int closeit, PyCompilerFlags * flags) Line 1055\tC\r\n \tpython38.dll!PyRun_SimpleFileExFlags(_iobuf * fp, const char * filename, int closeit, PyCompilerFlags * flags) Line 431\tC\r\n \tpython38.dll!PyRun_AnyFileExFlags(_iobuf * fp, const char * filename, int closeit, PyCompilerFlags * flags) Line 87\tC\r\n \tpython38.dll!pymain_run_file(PyConfig * config, PyCompilerFlags * cf) Line 381\tC\r\n \tpython38.dll!pymain_run_python(int * exitcode) Line 566\tC\r\n \tpython38.dll!Py_RunMain() Line 646\tC\r\n \tpython38.dll!Py_Main(int argc, wchar_t * * argv) Line 687\tC\r\n```\r\n```\r\n\r\n\u00a0 | Name | Value | Type\r\n-- | -- | -- | --\r\n\u25b6 | args | 0x000002e52700de20 {ob_refcnt=1 ob_type=0x00007ffd394234d0 {python38.dll!_typeobject PyTuple_Type} {...} } | _object *\r\n\u00a0 | ascender | 0 | int\r\n\u25b6 | bitmap | {rows=72 width=74 pitch=74 ...} | FT_Bitmap_\r\n\u25b6 | bitmap_glyph | 0x000002e528837fb0 {root={library=??? clazz=??? format=??? ...} left=??? top=??? ...} | FT_BitmapGlyphRec_ *\r\n\u00a0 | bitmap_y | 0 | unsigned int\r\n\u00a0 | count | 1 | unsigned __int64\r\n\u25b6 | dir | 0x0000000000000000 <NULL> | const char *\r\n\u00a0 | error | 0 | int\r\n\u25b6 | features | 0x00007ffd39421880 {python38.dll!_object _Py_NoneStruct} {ob_refcnt=5862 ob_type=0x00007ffd39421a30 {python38.dll!_typeobject _PyNone_Type} {...} } | _object *\r\n\u25b6 | glyph | 0x000002e528837fb0 {library=??? clazz=??? format=??? ...} | FT_GlyphRec_ *\r\n\u25b6 | glyph_info | 0x000002e527231c10 {index=36 x_offset=0 x_advance=4608 ...} | GlyphInfo *\r\n\u25b6 | glyph_slot | 0x000002e528798f00 {library=0x000002e5284f6e80 {...} face=0x000002e528719b20 {num_faces=1 face_index=...} ...} | FT_GlyphSlotRec_ *\r\n\u00a0 | horizontal_dir | 1 | int\r\n\u00a0 | i | 0 | unsigned __int64\r\n\u00a0 | id | 3183250128800 | __int64\r\n\u25b6 | im | 0x000002e5287e3fa0 {mode=0x000002e5287e3fa0 \"L\" type=0 depth=0 ...} | ImagingMemoryInstance *\r\n\u00a0 | index | 36 | int\r\n\u00a0 | k | 0 | int\r\n\u25b6 | lang | 0x0000000000000000 <NULL> | const char *\r\n\u00a0 | left | -1 | int\r\n\u00a0 | load_flags | 8 | int\r\n\u00a0 | mask | 0 | int\r\n\u25b6 | self | 0x000002e5270b21b0 {ob_base={ob_refcnt=2 ob_type=0x00007ffd42b16360 {_imagingft.cp38-win_amd64.pyd!_typeobject Font_Type} {...} } ...} | FontObject *\r\n\u25b6 | source | 0x000002e528839b30 <Error reading characters of string.> | unsigned char *\r\n\u25b6 | string | 0x000002e524e6eeb0 {ob_refcnt=29 ob_type=0x00007ffd39423cf0 {python38.dll!_typeobject PyUnicode_Type} {...} } | _object *\r\n\u00a0 | stroke_width | 2 | int\r\n\u00a0 | stroker | 0x000002e5287f3f50 {...} | FT_StrokerRec_ *\r\n\u25b6 | target | 0x000002e5287e9aa1 \"\" | unsigned char *\r\n\u00a0 | temp | 0 | int\r\n\u00a0 | x | 0 | int\r\n\u00a0 | x0 | 0 | int\r\n\u00a0 | x1 | 74 | int\r\n\u00a0 | xx | 1 | int\r\n\u00a0 | y | 0 | unsigned int\r\n\u00a0 | yy | 0 | int\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4094", "id": 499631337, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIyMzExOTA1", "number": 4094, "title": "Round Spider record count", "user": {"login": "nulano", "id": 3819630, "node_id": "MDQ6VXNlcjM4MTk2MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/3819630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nulano", "html_url": "https://github.com/nulano", "followers_url": "https://api.github.com/users/nulano/followers", "following_url": "https://api.github.com/users/nulano/following{/other_user}", "gists_url": "https://api.github.com/users/nulano/gists{/gist_id}", "starred_url": "https://api.github.com/users/nulano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nulano/subscriptions", "organizations_url": "https://api.github.com/users/nulano/orgs", "repos_url": "https://api.github.com/users/nulano/repos", "events_url": "https://api.github.com/users/nulano/events{/privacy}", "received_events_url": "https://api.github.com/users/nulano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-27T20:16:57Z", "updated_at": "2019-09-28T11:13:22Z", "closed_at": "2019-09-28T07:41:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4094", "html_url": "https://github.com/python-pillow/Pillow/pull/4094", "diff_url": "https://github.com/python-pillow/Pillow/pull/4094.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4094.patch", "merged_at": "2019-09-28T07:41:52Z"}, "body": "Fixes #4093.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4094/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4093", "id": 499513876, "node_id": "MDU6SXNzdWU0OTk1MTM4NzY=", "number": 4093, "title": "Spider format header bug for random image size", "user": {"login": "arpit15", "id": 4703676, "node_id": "MDQ6VXNlcjQ3MDM2NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4703676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arpit15", "html_url": "https://github.com/arpit15", "followers_url": "https://api.github.com/users/arpit15/followers", "following_url": "https://api.github.com/users/arpit15/following{/other_user}", "gists_url": "https://api.github.com/users/arpit15/gists{/gist_id}", "starred_url": "https://api.github.com/users/arpit15/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arpit15/subscriptions", "organizations_url": "https://api.github.com/users/arpit15/orgs", "repos_url": "https://api.github.com/users/arpit15/repos", "events_url": "https://api.github.com/users/arpit15/events{/privacy}", "received_events_url": "https://api.github.com/users/arpit15/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-27T15:35:07Z", "updated_at": "2019-09-28T07:42:20Z", "closed_at": "2019-09-28T07:41:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI am trying to save `float` image in `SPIDER` format\r\n\r\n### What did you expect to happen?\r\nI accepted it to work for any image size.\r\n\r\n### What actually happened?\r\nThe saved spider file has corrupt header when the width of the image is not a power of 2. \r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10 \r\n* Python: 3.6\r\n* Pillow: 6.1.1\r\n\r\n```python\r\nfrom PIL import Image\r\nimport numpy as np\r\n\r\nfilename= \"im.spi\"\r\nwidth = 100  # change it to any natural number not a power of 2\r\nim = np.random.random((64, width))-1\r\npil_image = Image.fromarray(im, 'F')\r\npil_image.save(filename, format='SPIDER')\r\n\r\nim2 = Image.open(filename)\r\nprint(im2.size)\r\n```\r\n\r\nI was able to trace the bug to [this](https://github.com/python-pillow/Pillow/blob/master/src/PIL/SpiderImagePlugin.py#L239) line.\r\nChanging the line from `labrec = 1024 / lenbyt` to `labrec = int(1024 / lenbyt)` fixes the bug for me. \r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4093/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4088", "id": 498227174, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIxMTk5NTky", "number": 4088, "title": "Do not calculate the crop width in Image.fit if it is already known", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-25T11:35:36Z", "updated_at": "2019-09-29T10:52:51Z", "closed_at": "2019-09-29T09:57:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4088", "html_url": "https://github.com/python-pillow/Pillow/pull/4088", "diff_url": "https://github.com/python-pillow/Pillow/pull/4088.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4088.patch", "merged_at": "2019-09-29T09:57:30Z"}, "body": "Resolves #4087", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4088/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4087", "id": 497743666, "node_id": "MDU6SXNzdWU0OTc3NDM2NjY=", "number": 4087, "title": "ValueError: box offset can't be negative", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-24T14:56:40Z", "updated_at": "2019-09-30T15:30:02Z", "closed_at": "2019-09-29T09:57:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI wanted to transform a PNG file using `PIL.ImageOps.fit()`.\r\n\r\n### What did you expect to happen?\r\nI expected to get back the transformed image.\r\n\r\n### What actually happened?\r\n```\r\nTraceback (most recent call last):\r\n  File \"example.py\", line 6, in <module>\r\n    PIL.ImageOps.fit(img, (600, 453), PIL.Image.ANTIALIAS)\r\n  File \".../lib/python3.7/site-packages/PIL/ImageOps.py\", line 445, in fit\r\n    return image.resize(size, method, box=crop)\r\n  File \".../lib/python3.7/site-packages/PIL/Image.py\", line 1892, in resize\r\n    return self._new(self.im.resize(size, resample, box))\r\nValueError: box offset can't be negative\r\n```\r\n\r\nThis exception seems to be dependent on the size of the image `(1000, 755)` and the target size `(600, 453)`. In this case the value for `box` gets `(-5.684341886080802e-14, 0.0, 1000.0, 755.0)` which leads to the exception. (The attached PNG is not the original one where the problem happened in production but an arbitrarily constructed one having the same dimensions.)\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: MacOS\r\n* Python: 2.7 and 3.7\r\n* Pillow: 6.1.0\r\n\r\n\r\n\r\n```python\r\nimport PIL.Image\r\nimport PIL.ImageOps\r\n\r\nwith open('example.png', 'rb') as reader:\r\n    img = PIL.Image.open(reader)\r\n    PIL.ImageOps.fit(img, (600, 453), PIL.Image.ANTIALIAS)\r\n```\r\n\r\n![example](https://user-images.githubusercontent.com/386619/65522942-d2fd3080-deeb-11e9-9544-fadf5ec7422c.png)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4034", "id": 483123340, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA5MjYzODg3", "number": 4034, "title": "Initialize rows_per_strip when RowsPerStrip tag is missing", "user": {"login": "cgohlke", "id": 483428, "node_id": "MDQ6VXNlcjQ4MzQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/483428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgohlke", "html_url": "https://github.com/cgohlke", "followers_url": "https://api.github.com/users/cgohlke/followers", "following_url": "https://api.github.com/users/cgohlke/following{/other_user}", "gists_url": "https://api.github.com/users/cgohlke/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgohlke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgohlke/subscriptions", "organizations_url": "https://api.github.com/users/cgohlke/orgs", "repos_url": "https://api.github.com/users/cgohlke/repos", "events_url": "https://api.github.com/users/cgohlke/events{/privacy}", "received_events_url": "https://api.github.com/users/cgohlke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-20T23:09:22Z", "updated_at": "2019-09-30T21:59:16Z", "closed_at": "2019-09-30T12:32:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4034", "html_url": "https://github.com/python-pillow/Pillow/pull/4034", "diff_url": "https://github.com/python-pillow/Pillow/pull/4034.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4034.patch", "merged_at": "2019-09-30T12:32:35Z"}, "body": "Fix segfault reported at https://stackoverflow.com/questions/57578369/multi-layer-tiff-import-broken-in-pillow-6-1-0. Please review.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4034/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4030", "id": 481974240, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA4MzUxMDI5", "number": 4030, "title": "Fix for Python 3.10", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-18T09:43:02Z", "updated_at": "2019-08-20T20:55:21Z", "closed_at": "2019-08-20T20:20:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4030", "html_url": "https://github.com/python-pillow/Pillow/pull/4030", "diff_url": "https://github.com/python-pillow/Pillow/pull/4030.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4030.patch", "merged_at": "2019-08-20T20:20:16Z"}, "body": "Changes proposed in this pull request:\r\n\r\n * Fix for Python 3.10\r\n * Inspired by https://github.com/pypa/setuptools/pull/1824\r\n\r\n\r\n```python\r\nPython 3.7.4 (default, Jul  9 2019, 18:13:23)\r\n[Clang 10.0.1 (clang-1001.0.46.4)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import sys\r\n>>> sys.version\r\n'3.7.4 (default, Jul  9 2019, 18:13:23) \\n[Clang 10.0.1 (clang-1001.0.46.4)]'\r\n>>> sys.version[:3]\r\n'3.7'\r\n>>> v310 = '3.10.4 (default, Jul  9 2019, 18:13:23) \\n[Clang 10.0.1 (clang-1001.0.46.4)]'\r\n>>> v310[:3]\r\n'3.1'\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4030/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4017", "id": 479147758, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA2MTIxMzc4", "number": 4017, "title": "Do not allow floodfill to extend into negative coordinates", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-09T20:08:34Z", "updated_at": "2019-09-05T20:05:48Z", "closed_at": "2019-09-05T20:00:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4017", "html_url": "https://github.com/python-pillow/Pillow/pull/4017", "diff_url": "https://github.com/python-pillow/Pillow/pull/4017.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4017.patch", "merged_at": "2019-09-05T20:00:34Z"}, "body": "Resolves #4016 \r\n\r\nAt the moment, `ImageDraw.floodfill` doesn't stop filling new pixels just because their coordinates happen to be negative - when filling the next pixels around (0, 0), it also uses (-1, -1). So it continues, and wraps around to the other side of the image.\r\n\r\nTo demonstrate, with this image -\r\n\r\n![base](https://user-images.githubusercontent.com/3112309/62806065-23cfea00-bb35-11e9-85c0-1aa9c86abf96.png)\r\n\r\nfilling a coordinate in the upper left of this image before this fix gives -\r\n\r\n![out](https://user-images.githubusercontent.com/3112309/62806072-27637100-bb35-11e9-9b2b-80af690946ea.png)\r\n\r\nThis PR fixes it -\r\n\r\n![imagedraw_floodfill_not_negative](https://user-images.githubusercontent.com/3112309/62806097-39451400-bb35-11e9-85cc-e7d161195224.png)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4017/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4016", "id": 478567865, "node_id": "MDU6SXNzdWU0Nzg1Njc4NjU=", "number": 4016, "title": "floodfill wraps around", "user": {"login": "snoopyjc", "id": 9206213, "node_id": "MDQ6VXNlcjkyMDYyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9206213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snoopyjc", "html_url": "https://github.com/snoopyjc", "followers_url": "https://api.github.com/users/snoopyjc/followers", "following_url": "https://api.github.com/users/snoopyjc/following{/other_user}", "gists_url": "https://api.github.com/users/snoopyjc/gists{/gist_id}", "starred_url": "https://api.github.com/users/snoopyjc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snoopyjc/subscriptions", "organizations_url": "https://api.github.com/users/snoopyjc/orgs", "repos_url": "https://api.github.com/users/snoopyjc/repos", "events_url": "https://api.github.com/users/snoopyjc/events{/privacy}", "received_events_url": "https://api.github.com/users/snoopyjc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-08T16:16:43Z", "updated_at": "2019-09-06T00:12:29Z", "closed_at": "2019-09-05T20:00:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "The ImageDraw.floodfill code assumes a negative index will raise an IndexError, but python wraps that around to the last element, which is not the desired effect.  This causes a floodfill that hits the left side or the top of the image to wrap around to the other side.  Code:\r\n\r\n```python\r\n                    try:\r\n                        p = pixel[s, t]\r\n                    except (ValueError, IndexError):\r\n                        pass\r\n                    else:\r\n```\r\n\r\nFix:\r\n\r\n```python\r\n                    try:\r\n                        if s < 0 or t < 0:\r\n                            raise IndexError\r\n                        p = pixel[s, t]\r\n                    except (ValueError, IndexError):\r\n                        pass\r\n                    else:\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4016/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014/events", "html_url": "https://github.com/python-pillow/Pillow/pull/4014", "id": 477288397, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA0NjQxODM4", "number": 4014, "title": "Fixed arc drawing bug for a non-whole number of degrees", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-06T10:04:33Z", "updated_at": "2019-09-05T20:06:31Z", "closed_at": "2019-09-05T19:52:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/4014", "html_url": "https://github.com/python-pillow/Pillow/pull/4014", "diff_url": "https://github.com/python-pillow/Pillow/pull/4014.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/4014.patch", "merged_at": "2019-09-05T19:52:06Z"}, "body": "Resolves #4005 \r\n\r\nIf the angle between the `start` and `end` of an arc is not a whole number\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/5a203b70c88383f1d128414d01be48e83ad5843f/src/libImaging/Draw.c#L771-L772\r\nhttps://github.com/python-pillow/Pillow/blob/5a203b70c88383f1d128414d01be48e83ad5843f/src/libImaging/Draw.c#L778\r\n\r\nthen simply combining the two floats is not correct.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/5a203b70c88383f1d128414d01be48e83ad5843f/src/libImaging/Draw.c#L837\r\n\r\n@cgohlke figured this out, and solves it by rounding up.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4014/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005/events", "html_url": "https://github.com/python-pillow/Pillow/issues/4005", "id": 476361442, "node_id": "MDU6SXNzdWU0NzYzNjE0NDI=", "number": 4005, "title": "Crash after calling arc with the width parameter", "user": {"login": "jonha892", "id": 4357767, "node_id": "MDQ6VXNlcjQzNTc3Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/4357767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonha892", "html_url": "https://github.com/jonha892", "followers_url": "https://api.github.com/users/jonha892/followers", "following_url": "https://api.github.com/users/jonha892/following{/other_user}", "gists_url": "https://api.github.com/users/jonha892/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonha892/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonha892/subscriptions", "organizations_url": "https://api.github.com/users/jonha892/orgs", "repos_url": "https://api.github.com/users/jonha892/repos", "events_url": "https://api.github.com/users/jonha892/events{/privacy}", "received_events_url": "https://api.github.com/users/jonha892/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-02T21:24:37Z", "updated_at": "2019-09-05T19:52:17Z", "closed_at": "2019-09-05T19:52:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\n **What did you do?**\r\nI get an error if I use the width argument of the `arc` function. It works fine if I leave out the argument.\r\n I call the function like this:\r\n`draw.arc([0+offset/2, 0+offset/2,i_w, i_h], a_s, a_e, fill=c, width=8)`\r\n\r\n **What did you expect to happen?**\r\nThis should work, since it worked on a different machine 2 months ago\r\n\r\n **What actually happened?**\r\nThe script crashes without an error message. I used the python tracer module and it just stops after:\r\n\r\n````\r\nImageDraw.py(111):                 if self.palette and not isinstance(ink, numbers.Number):\r\nImageDraw.py(113):                 ink = self.draw.draw_ink(ink, self.mode)\r\nImageDraw.py(114):             if fill is not None:\r\nImageDraw.py(120):         return ink, fill\r\nImageDraw.py(125):         if ink is not None:\r\nImageDraw.py(126):             self.draw.draw_arc(xy, start, end, ink, width)\r\n````\r\n\r\n**What versions of Pillow and Python are you using?**\r\n- Python 3.7.3 \r\n- PIL 6.1.0\r\n- Windows 10\r\n- anaconda package manager\r\n\r\n\r\nIs this a local problem or is it a problem with PIL 6.1? I remember it working when I used:\r\n- Python 3.6.8,\r\n- PIL: 5.4\r\n- PIP\r\n- Linux", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/4005/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3967", "id": 467766274, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk3MzQ3NjIx", "number": 3967, "title": "Return after error", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-13T21:05:29Z", "updated_at": "2019-09-04T20:00:57Z", "closed_at": "2019-09-04T13:07:23Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3967", "html_url": "https://github.com/python-pillow/Pillow/pull/3967", "diff_url": "https://github.com/python-pillow/Pillow/pull/3967.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3967.patch", "merged_at": "2019-09-04T13:07:23Z"}, "body": "Resolves #3966 \r\n\r\nThe code was originally added in https://github.com/python-pillow/Pillow/commit/ac8ebccfa631a2390a5dd9cb175ae7", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3967/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3966", "id": 467657530, "node_id": "MDU6SXNzdWU0Njc2NTc1MzA=", "number": 3966, "title": "A mishandling of Python/C API Exception?", "user": {"login": "Elaphurus", "id": 16870808, "node_id": "MDQ6VXNlcjE2ODcwODA4", "avatar_url": "https://avatars.githubusercontent.com/u/16870808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Elaphurus", "html_url": "https://github.com/Elaphurus", "followers_url": "https://api.github.com/users/Elaphurus/followers", "following_url": "https://api.github.com/users/Elaphurus/following{/other_user}", "gists_url": "https://api.github.com/users/Elaphurus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Elaphurus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Elaphurus/subscriptions", "organizations_url": "https://api.github.com/users/Elaphurus/orgs", "repos_url": "https://api.github.com/users/Elaphurus/repos", "events_url": "https://api.github.com/users/Elaphurus/events{/privacy}", "received_events_url": "https://api.github.com/users/Elaphurus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-13T02:20:12Z", "updated_at": "2019-09-04T13:07:23Z", "closed_at": "2019-09-04T13:07:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know that in the wrapper functions of Python C extensions, Exceptions threw using Python/C API like ```PyErr_SetString``` should be followed by a ```return``` statement, it's what Pillow does almost everywhere, but is the following one I found a carelessness?\r\n\r\n```c\r\n// src/encode.c#L1211\r\n\r\n/* Error on illegal tile offsets */\r\nif (context->tile_size_x && context->tile_size_y) {\r\n    if (context->tile_offset_x <= context->offset_x - context->tile_size_x\r\n        || context->tile_offset_y <= context->offset_y - context->tile_size_y) {\r\n        PyErr_SetString(PyExc_ValueError,\r\n                        \"JPEG 2000 tile offset too small; top left tile must \"\r\n                        \"intersect image area\");\r\n    }\r\n\r\n    if (context->tile_offset_x > context->offset_x\r\n        || context->tile_offset_y > context->offset_y) {\r\n        PyErr_SetString(PyExc_ValueError,\r\n                        \"JPEG 2000 tile offset too large to cover image area\");\r\n        Py_DECREF(encoder);\r\n        return NULL;\r\n    }\r\n}\r\n```\r\n\r\nWhy is not the first ```PyErr_SetString``` followed by a ```return``` just like the second one?\r\n\r\nBut if this is a wrong issue for my limited understanding, please tell me, I will appreciate that very much.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3899", "id": 454892678, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjg3MjUzMjkz", "number": 3899, "title": "Consider I;16 pixel size when drawing", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-11T20:38:30Z", "updated_at": "2019-09-20T09:55:06Z", "closed_at": "2019-06-30T10:18:47Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3899", "html_url": "https://github.com/python-pillow/Pillow/pull/3899", "diff_url": "https://github.com/python-pillow/Pillow/pull/3899.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3899.patch", "merged_at": "2019-06-30T10:18:46Z"}, "body": "Resolves #3747", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3899/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3896", "id": 453901186, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjg2NDczMDg1", "number": 3896, "title": "Changed Preview application path so that it is no longer static", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 242311009, "node_id": "MDU6TGFiZWwyNDIzMTEwMDk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/macOS", "name": "macOS", "color": "207de5", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-09T14:08:00Z", "updated_at": "2019-06-19T10:24:32Z", "closed_at": "2019-06-19T06:08:25Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3896", "html_url": "https://github.com/python-pillow/Pillow/pull/3896", "diff_url": "https://github.com/python-pillow/Pillow/pull/3896.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3896.patch", "merged_at": "2019-06-19T06:08:25Z"}, "body": "Resolves #3895\r\n\r\nIn the issue, it is reported that macOS 10.15 moves Preview from /Applications to /System/Applications. We could instruct Pillow to test for the operating system version, and use the relevant path, but I think it would be simpler to just stop using an absolute path.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3896/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3895", "id": 453879580, "node_id": "MDU6SXNzdWU0NTM4Nzk1ODA=", "number": 3895, "title": "Image.show() uses hardcoded path no longer valid in macOS 10.15", "user": {"login": "FlowerCode", "id": 6606022, "node_id": "MDQ6VXNlcjY2MDYwMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/6606022?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FlowerCode", "html_url": "https://github.com/FlowerCode", "followers_url": "https://api.github.com/users/FlowerCode/followers", "following_url": "https://api.github.com/users/FlowerCode/following{/other_user}", "gists_url": "https://api.github.com/users/FlowerCode/gists{/gist_id}", "starred_url": "https://api.github.com/users/FlowerCode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FlowerCode/subscriptions", "organizations_url": "https://api.github.com/users/FlowerCode/orgs", "repos_url": "https://api.github.com/users/FlowerCode/repos", "events_url": "https://api.github.com/users/FlowerCode/events{/privacy}", "received_events_url": "https://api.github.com/users/FlowerCode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 242311009, "node_id": "MDU6TGFiZWwyNDIzMTEwMDk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/macOS", "name": "macOS", "color": "207de5", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-09T09:21:48Z", "updated_at": "2019-06-19T06:08:25Z", "closed_at": "2019-06-19T06:08:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n```Image.show()```\r\n\r\n### What did you expect to happen?\r\nShows image in Preview.app\r\n\r\n### What actually happened?\r\nCrashes with invalid path for Preview.app\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: macOS 10.15\r\n* Python: Python 3.7.3\r\n* Pillow: 6.0.0\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/f1ed79229ece02a52e4d0df4acda2e26419ea8f4/src/PIL/ImageShow.py#L141\r\n\r\nAs part of security improvements, operating system is now separated from user data in macOS 10.15, in a read-only volume. [[ref]](https://developer.apple.com/videos/play/wwdc2019/710/)\r\n```/Applications/Preview.app``` is now ```/System/Applications/Preview.app```.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3895/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3841", "id": 442227251, "node_id": "MDU6SXNzdWU0NDIyMjcyNTE=", "number": 3841, "title": "\"SystemError: tile cannot extend outside image\" on s390x", "user": {"login": "manisandro", "id": 1298852, "node_id": "MDQ6VXNlcjEyOTg4NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1298852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manisandro", "html_url": "https://github.com/manisandro", "followers_url": "https://api.github.com/users/manisandro/followers", "following_url": "https://api.github.com/users/manisandro/following{/other_user}", "gists_url": "https://api.github.com/users/manisandro/gists{/gist_id}", "starred_url": "https://api.github.com/users/manisandro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manisandro/subscriptions", "organizations_url": "https://api.github.com/users/manisandro/orgs", "repos_url": "https://api.github.com/users/manisandro/repos", "events_url": "https://api.github.com/users/manisandro/events{/privacy}", "received_events_url": "https://api.github.com/users/manisandro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-09T13:07:18Z", "updated_at": "2019-06-28T18:49:55Z", "closed_at": "2019-06-28T18:49:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported downstream at https://bugzilla.redhat.com/show_bug.cgi?id=1706450:\r\n\r\n*Description of problem:*\r\nI am trying to update a few packages (python-matplotlib [1] and python-pikepdf [2]), but they are failing on s390x with \"SystemError: tile cannot extend outside image\". I have not attempted to update matplotlib on F30, but at least pikepdf continues to work [3] on F30 with its version of pillow.\r\n\r\n\r\n*Version-Release number of selected component (if applicable):*\r\npython-pillow-6.0.0-1.fc31\r\n\r\n\r\n*Steps to Reproduce:*\r\n1. Build python-matplotlib or python-pikepdf on Fedora Rawhide\r\n\r\n\r\n*Actual results:*\r\n\r\n    /usr/lib64/python3.7/site-packages/PIL/Image.py:2007: in save\r\n        save_handler(self, fp, filename)\r\n    /usr/lib64/python3.7/site-packages/PIL/PngImagePlugin.py:896: in _save\r\n        [(\"zip\", (0, 0)+im.size, 0, rawmode)])\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n    im = <PIL.Image.Image image mode=RGBA size=800x600 at 0x3FF8EA5C2B0>\r\n    fp = <PIL.PngImagePlugin._idat object at 0x3ff8eade160>\r\n    tile = [('zip', (0, 0, 800, 600), 0, 'RGBA')], bufsize = 65536\r\n        def _save(im, fp, tile, bufsize=0):\r\n            \"\"\"Helper to save image based on tile list\r\n        \r\n            :param im: Image object.\r\n            :param fp: File object.\r\n            :param tile: Tile list.\r\n            :param bufsize: Optional buffer size\r\n            \"\"\"\r\n        \r\n            im.load()\r\n            if not hasattr(im, \"encoderconfig\"):\r\n                im.encoderconfig = ()\r\n            tile.sort(key=_tilesort)\r\n            # FIXME: make MAXBLOCK a configuration parameter\r\n            # It would be great if we could have the encoder specify what it needs\r\n            # But, it would need at least the image size in most cases. RawEncode is\r\n            # a tricky case.\r\n            bufsize = max(MAXBLOCK, bufsize, im.size[0] * 4)  # see RawEncode.c\r\n            if fp == sys.stdout:\r\n                fp.flush()\r\n                return\r\n            try:\r\n                fh = fp.fileno()\r\n                fp.flush()\r\n            except (AttributeError, io.UnsupportedOperation):\r\n                # compress to Python file-compatible object\r\n                for e, b, o, a in tile:\r\n                    e = Image._getencoder(im.mode, e, a, im.encoderconfig)\r\n                    if o > 0:\r\n                        fp.seek(o)\r\n    >               e.setimage(im.im, b)\r\n    E               SystemError: tile cannot extend outside image\r\n    /usr/lib64/python3.7/site-packages/PIL/ImageFile.py:496: SystemError", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3841/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3840", "id": 442023217, "node_id": "MDU6SXNzdWU0NDIwMjMyMTc=", "number": 3840, "title": "MemoryError on ppc64", "user": {"login": "opoplawski", "id": 814662, "node_id": "MDQ6VXNlcjgxNDY2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/814662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/opoplawski", "html_url": "https://github.com/opoplawski", "followers_url": "https://api.github.com/users/opoplawski/followers", "following_url": "https://api.github.com/users/opoplawski/following{/other_user}", "gists_url": "https://api.github.com/users/opoplawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/opoplawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/opoplawski/subscriptions", "organizations_url": "https://api.github.com/users/opoplawski/orgs", "repos_url": "https://api.github.com/users/opoplawski/repos", "events_url": "https://api.github.com/users/opoplawski/events{/privacy}", "received_events_url": "https://api.github.com/users/opoplawski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-09T02:39:59Z", "updated_at": "2019-06-28T18:49:55Z", "closed_at": "2019-06-28T18:49:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nTrying to build Fedora package for EPEL7, 2 tests fail only on ppc64\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: RHEL 7.6\r\n* Python: 3.6.6\r\n* Pillow: 6.0.0\r\n\r\nThey fail for these two cases:\r\n* mode=1, encoder_name=xbm, args=()\r\n* mode=RGB, encoder_name=raw, args=RGB\r\n```\r\n--------------------------------------------------------------------\r\nPillow 6.0.0 TEST SUMMARY \r\n--------------------------------------------------------------------\r\nPython modules loaded from /builddir/build/BUILD/Pillow-6.0.0/build/lib.linux-ppc64-3.6/PIL\r\nBinary modules loaded from /builddir/build/BUILD/Pillow-6.0.0/build/lib.linux-ppc64-3.6/PIL\r\n--------------------------------------------------------------------\r\n--- PIL CORE support ok\r\n--- TKINTER support ok\r\n--- FREETYPE2 support ok\r\n--- LITTLECMS2 support ok\r\n--- WEBP support ok\r\n--- WEBP Transparency support ok\r\n*** WEBPMUX support not installed\r\n*** WEBP Animation support not installed\r\n--- JPEG support ok\r\n--- OPENJPEG (JPEG2000) support ok\r\n--- ZLIB (PNG/ZIP) support ok\r\n--- LIBTIFF support ok\r\n*** RAQM (Bidirectional Text) support not installed\r\n--------------------------------------------------------------------\r\nRunning selftest:\r\n**********************************************************************\r\nFile \"selftest.py\", line 101, in __main__.testimage\r\nFailed example:\r\n    len(im.convert(\"1\").tobitmap())\r\nException raised:\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib64/python3.6/doctest.py\", line 1330, in __run\r\n        compileflags, 1), test.globs)\r\n      File \"<doctest __main__.testimage[32]>\", line 1, in <module>\r\n        len(im.convert(\"1\").tobitmap())\r\n      File \"/builddir/build/BUILD/Pillow-6.0.0/build/lib.linux-ppc64-3.6/PIL/Image.py\", line 785, in tobitmap\r\n        data = self.tobytes(\"xbm\")\r\n      File \"/builddir/build/BUILD/Pillow-6.0.0/build/lib.linux-ppc64-3.6/PIL/Image.py\", line 758, in tobytes\r\n        l, s, d = e.encode(bufsize)\r\n    MemoryError\r\n**********************************************************************\r\nFile \"selftest.py\", line 103, in __main__.testimage\r\nFailed example:\r\n    len(im.tobytes())\r\nException raised:\r\n    Traceback (most recent call last):\r\n      File \"/usr/lib64/python3.6/doctest.py\", line 1330, in __run\r\n        compileflags, 1), test.globs)\r\n      File \"<doctest __main__.testimage[33]>\", line 1, in <module>\r\n        len(im.tobytes())\r\n      File \"/builddir/build/BUILD/Pillow-6.0.0/build/lib.linux-ppc64-3.6/PIL/Image.py\", line 758, in tobytes\r\n        l, s, d = e.encode(bufsize)\r\n    MemoryError\r\n**********************************************************************\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3840/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3834", "id": 441454592, "node_id": "MDU6SXNzdWU0NDE0NTQ1OTI=", "number": 3834, "title": "Issue opening a .ico file", "user": {"login": "Jhynjhiruu", "id": 24824597, "node_id": "MDQ6VXNlcjI0ODI0NTk3", "avatar_url": "https://avatars.githubusercontent.com/u/24824597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jhynjhiruu", "html_url": "https://github.com/Jhynjhiruu", "followers_url": "https://api.github.com/users/Jhynjhiruu/followers", "following_url": "https://api.github.com/users/Jhynjhiruu/following{/other_user}", "gists_url": "https://api.github.com/users/Jhynjhiruu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jhynjhiruu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jhynjhiruu/subscriptions", "organizations_url": "https://api.github.com/users/Jhynjhiruu/orgs", "repos_url": "https://api.github.com/users/Jhynjhiruu/repos", "events_url": "https://api.github.com/users/Jhynjhiruu/events{/privacy}", "received_events_url": "https://api.github.com/users/Jhynjhiruu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-07T21:29:11Z", "updated_at": "2020-01-09T18:27:07Z", "closed_at": "2019-05-12T16:53:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI tried to open a .ico file from a BytesIO object, to use as the icon for my program.\r\n### What did you expect to happen?\r\nThe file would be opened successfully and the icon used for the program\r\n### What actually happened?\r\nAn error was raised, specifically `builtins.ValueError: This is not one of the allowed sizes of this image`\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10\r\n* Python: 3.7.3\r\n* Pillow: 6.0.0\r\n\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```python\r\nfrom zlib import decompress\r\nfrom PIL.Image import open as imageopen\r\nfrom PIL.ImageTk import PhotoImage\r\nfrom io import BytesIO\r\nicon = b\"\\xadW\\tP\\x93g\\x1a\\xfeAZ\\xab\\xd5Z\\xc5\\xda\\xd9\\x9d\\xedj\\xdb\\xe9\\xacV\\xa9\\xd2Z@Q\\xc0**r\\x88\\x1c\\x06\\x04\\x82\\xdc\\x87@\\x94+ \\xe1\\x0cG\\x12.\\tI\\x08\\x81p\\x87p\\xdfG\\x00\\x05\\x8a\\x80 (xPE\\xb4\\xd5\\xaa\\xdd\\xba;\\xbb\\xed\\xb8u\\xb7;\\xbb3\\xcf\\xbe\\t\\xb2\\xd3\\xd9\\xedtl\\xa7\\x7f\\xe6\\xc9\\xfb\\xfd\\xdf\\xff}\\xef\\xf3^\\xff\\xf7}?\\xc3\\xe8\\xd1o\\x93\\x15\\xa3\\xfdg\\xea^g\\x98\\r\\x0c\\xc3l&l\\\"P\\xb7\\xae\\x7f\\xe92|u\\x11?\\xf7\\xb2\\xb6>\\xf8\\xf6\\xa1\\x83\\x87\\xbd\\xecl\\xed\\xe5\\xc7\\x1c\\x9dF\\x9d\\x9c\\\\\\x1e:;\\xb9<u:\\xe6\\xfc\\xd4\\xc1\\xc1\\xf1\\x91\\xcda\\xdb\\xf1\\xfd\\xfb\\x0f\\x14\\xef1\\xdf\\xebejb\\xf6\\x0e\\xf3+]vv\\xf6\\xdb\\x9d\\x1c\\x9d\\x14l/\\xf6C_\\xff@\\xf8\\xfa\\x87\\xc0\\xdb\\'\\x04l\\x9fPxy\\x07\\xc3\\xc3+\\x08\\xee\\x9e\\x01`\\xb9\\x9f\\x84\\xebqO\\xb8\\xb8\\xb0`o\\x7f\\xf4\\xe1>\\xabOJ\\xcdLw\\x1b\\xffR^g\\'\\xe77\\\\]\\\\\\xb3\\xfd\\xfc\\xfc\\xff\\x19\\x16\\xc6AhX$N\\x9f\\x8eAj\\xfc\\x19\\x14\\xa4z\\xa14\\xc3\\x0eU\\xc2\\xa3\\xa8\\x128\\xe8\\xda\\xf9)l\\xf0b\\xc2\\xe1\\xe7\\x1f\\x0cW76\\\\]\\xdd\\xe1\\xe8\\xe8\\xf4/\\x8b\\xbdVy&;M\\xde\\xfc9\\xdc\\xac\\xe3n\\xc6l\\xb6\\xf7\\x15N\\xc4\\x19p\\\"\\x13\\x10\\x1f\\xc7\\x85B\\x10\\x8c\\xf6\\x1cc\\xf4\\x89~\\x87~\\xc1K8\\x9f\\xc9` \\x83@R\\xd7\\x16,G\\xbf\\xe8\\xf7h\\xcb\\xdd\\tyV0N\\x85\\x86\\xc2\\xd9\\x95\\r\\x17W\\x16\\x0e\\x1f<<C9\\xf9\\xe8E\\xb8==\\xbc\\xf6\\x05\\x07\\x85|\\xc5\\x8d#\\xde\\x04>\\x8a\\x84\\x1ct\\xe5\\xbc\\x0f\\r\\x9fAO\\x1a\\xf1d\\xbf\\x8ca\\xc9\\x16\\x8c\\x96|\\x84\\xf1\\xb2\\x9d\\x98\\xa8\\xd8\\x891j\\x0f\\x15nF?=\\xeb\\xa5q}\\xe9z\\xe8\\xcd\\xff\\x08\\xe2\\xf4S\\xf0`\\x07R,N\\xc0\\xc1\\xfe\\xe8\\xd7d\\xc3\\x81\\x9f\\xe2>\\xe9\\xedm\\x14\\x11\\x1e\\xfe\\x84\\x97\\x98\\x86\\xf4\\xf4\\x1c\\xd4\\xe48\\xa3;}\\x15:\\x92\\x88[\\xb0\\x1a#\\xc5&\\xb8\\\\\\xed\\x8c)\\x957.\\xd7\\xf8`R\\xe5\\xa3\\x93ZL\\xd5\\xb0I\\xba`Da\\x8e^\\xe1Z\\xb4\\'2\\xd0d\\xbd\\x8e\\x9a\\\\W\\x04\\x04r(\\x16\\xee\\xb0\\xb7;\\xfag\\x93\\x8fMw\\xfc\\x18w`\\x80\\xff\\xfa\\x88\\x88\\x88\\xa9\\x8c\\x0c!\\x84\\xc2s\\xa8\\x11\\x1cA\\x0b\\x8fA\\x0bqwg\\x19`Xn\\x82\\xb12G\\x8c)\\xed1\\xaa\\xb4!y\\x84\\xeemI.\\xc1\\x8e\\xe2q\\x14\\xe3\\xe5N\\xb8Xb\\x81\\x1e\\xd1J\\xb4\\x90\\r\\xed\\xc9\\xcbP\\x97{\\x8cl\\x88\\xc0q\\xd6\\t\\xd8\\xd8\\xd8\\xce\\x90\\r\\xffW\\x0fa\\xa1\\xa7\\x84YYB\\xe4\\xe6\\xcbP\\x96\\xe5\\n5W\\x1f\\r\\t\\xc4\\x9fB\\xbe\\x8b\\xf41P\\xb0\\x0eC\\x92w0$\\xfd\\x03\\x06\\xa5[Hn\\xc7\\xa0\\xcc\\x98\\xda\\x14{\\xd9\\x87\\x18.\\xfa\\x90\\xda[qA\\xb2\\t\\x03\\xe7\\xd6\\xa1Gh\\xa0\\x9b\\xdb@>4&\\x18\\xa0L\\xc8\\xa2\\xf7%\\x10nn\\x9e\\xb0\\xb2\\xfc$\\xf7\\x87\\xdc\\x14\\xf3\\xadii\\xfc\\xbfK\\xa4J\\x14\\xe5\\xc4B\\x19\\xb5\\x02*.\\xa3\\xe3o\\\"\\xff[S\\x19tP\\xaduf1\\xe8\\x12\\x10Hv\\x93\\xfe\\x1e\\xd1\\xcb\\xe8&\\xf4\\x08\\x17e\\x97P\\x0f\\x9dT\\x8bmT\\'-\\xc94W\\xcbM\\xa8\\x8dcPs\\xf65\\xe4\\xa6\\x86\\x83\\xe5F\\xef\\xa9\\x0b\\xeb{S\\xd3]\\x1f,\\xf1scb\\xe42Y1\\xe4E\\xc5\\x10GoC\\xc9i\\x9a\\x13\\xcf\\xa0\\xfe\\xecs\\xfb\\x13\\x17\\xf5h\\xa5\\xd6\\x1e\\xdd\\xbd\\xd66\\x92\\xcd\\xc9\\x8b}KR\\xfbLk\\xf7\\x12\\xea\\x13\\x16u)\\xcf0(M\\xdc\\r\\xed\\xbb|\\xc2\\x83\\x8d\\x03\\xfb\\xadK\\xb5\\xdc\\xb1\\xd1Q\\x1b\\x85Y\\x82\\xc7\\x15U\\xb5(\\xc8\\x8c\\x86\\xd0\\x9fAY\\x0c\\x03\\x15\\xd9\\xac\\xa6yug\\x17\\xa5:n\\xb1\\xad\\xa2g\\xd5Q\\xcb\\xa0N\\xde\\x88\\xda\\x84\\r\\xa8\\xa58\\xa9\\x97\\xc6\\xfc\\x08\\xb4\\xdcZ\\xff\\xcbi\\x9e8\\xcc\\x00\\xc2\\xe4pZ\\xb3\\xfc\\xe0\\xe2\\xec\\xfa\\xc4\\xcct\\xd7\\xbbg\\xe3\\xe3\\xdc\\x14\\xc5\\xa5\\xa8\\xac\\xacA&\\xc7\\x0c\\xf9\\xc146\\x9aA\\x15\\xa1Z\\xcb\\x15\\xbbhK\\r\\xc9\\n\\x8aKC\\xda\\xfb\\xb8\\xac)\\xc2\\x83\\x07\\x0f0si\\x18u)\\xef\\xe9\\xc6UF.\\x8e\\xaf\\xd1\\x82\\xe6j\\xf3\\xa7mWEQ?\\xddWh\\xf9C\\x19\\xe4q-\\x11\\x12\\xc2\\x81\\xa7\\xd7I\\xaa\\x03+/~Z\\x9aL\\xadn\\x84\\xb2H\\x8a$\\xdf\\xf5(<E\\xba\\xb8+Q\\xcd{\\x17\\xb5\\x89\\xefQ\\xdeV\\xa1\\x8cx\\xcb\\xa3\\xd6\\xa0\\xab\\xf08\\x1e\\xdd\\xbb\\x8d\\xc7\\x0b7\\xd1#\\xdeE\\xeb\\xd1\\x16\\xd4\\xf3\\xb7\\xd2\\xb3\\xd5h\\x12\\x9a\\xa1.u3\\xaa\\xe2\\xdf\\xa4\\xb9\\xef\\xa02\\xc6\\x808\\xd7@\\xcd7\\xa6\\xfb\\xb7QJ:$\\xe1\\x0cDao!.\\xfa\\x0c\\xbcO\\xfa\\xe3\\x88\\x8dmInN\\xce\\xc5\\xb6\\xd6\\x0eHD\\x89\\xe0y\\xbe\\xa2\\xb3\\xb12~\\x1df\\x86\\xdb0\\xd2!C)g\\x05\\x9aD\\xfbpe\\xa8\\x1e}J?4\\x0b\\xcc\\xd0%vEwi0\\x14\\x11\\xaf\\xe8l\\x9b\\xeeS`\\xbc\\xab\\x88\\x9e\\x99\\xe0\\xea\\xa0\\x1a\\x13\\x17\\x9ai\\x1d<\\x84\\xb9\\xa9\\x01,|6\\x87\\tM#\\x1aD\\x87u\\xbee\\x06\\xacA\\n7\\x0c>\\xbeApvv\\x19/\\x92J\\x1euu\\xf7#\\'\\xc5\\x0f\\t\\'(F4\\xa6\\x88\\xb0p\\xa5\\x1dCMB\\xd4&m\\xc6\\x97\\xf7\\xefC\\xa3\\x0c\\x82\\x9c\\xfa\\x15a\\x0c\\xe4d\\xe3hS\\x1a\\xfa\\x9b$\\xa8\\xe0n\\xc0\\x83\\xf994\\xe4\\x1c\\x83,\\x90\\xc1\\x8d\\x91s\\x98\\x18\\xa8\\xc6\\xec\\x85||~k\\x06\\xd5g\\xdf\\xa6\\xdc\\xafB\\x15o#\\n\\xc3\\xf4\\x90\\xea\\xad\\x0f>\\xd7\\x9b\\xd6\\x830x\\x9c\\xf0|\\\\\\xaeT~\\xab\\xe9\\x1bDV<\\x0bqn\\x0c\\xf2C(NT\\x03\\xb7&\\x9b\\xd0\\xaf\\xe6\\xe1\\xdaP>n_\\xbb\\x06\\xc5\\x19C\\xc8)~\\n\\x0e\\x03)\\x8di\\x16\\xec\\xc4\\xad\\x1b\\xd7\\xa1\\xce<\\x84\\x85\\xd9Q\\xa8\\x85N\\x90P\\xed\\xce\\x9cO\\xc5\\xa5\\xfe\\x16\\xdc\\x18m\\xc4\\x80:\\x13%\\x91\\xbf\\x81\\x92\\xfb\\x16\\x14\\x91\\xabQ@v\\'z0\\xe0\\xc7\\xb2\\x10z\\x8ar\\xc0>\\xf9\\xb4\\xaa\\xa2\\xe2\\xdb\\x0b\\x83#\\xc8\\x8cwG\\xb4\\x0b\\x83l\\xf2A\\x1a\\xb1\\n\\xf7\\xae\\x0fc\\xb0Y\\x86/\\xe7\\'1\\xde\\xa7\\x82$D\\x1fE\\xc4\\xaf\\x85\\x96\\xbf\\x86\\xf7>\\xee\\x93\\xdf\\x9de\\xe9\\xb8{}\\x02\\xb5Bg\\x14\\xf82\\xb86,\\xc3X_\\x194e\\xbe\\x18nS@\\x19k\\x8c\\xb9\\x89\\x01\\x0c6\\x15@\\xe4\\xa7\\xa7\\xf315\\x86\\x85\\xb0\\xf0(\\xf8\\xfa\\xf8>\\xad,/\\x7f8\\xfc\\xe9(D\\xc9\\xc1\\x88p\\xa4\\xfc\\x90\\x0e\\xe9\\xe9\\xf5\\xb8\\xd8\\x9c\\x07Mi4\\xee\\xdf\\x9a\\xc2\\xa7\\x9d\\n]L\\x8a#\\x16\\xa1\\xe5o\\xc8\\xd8\\x89\\'\\x8f\\x1fc\\\\\\xd3\\x84\\xb9\\xb1\\x0e\\xa8\\xd2\\xacP\\x1a\\xbd\\x9e\\xe2\\xdf\\x81\\xa1\\xfadHCW\\xa1M\\xec\\x85\\x96\\x02\\xda\\x1f\\xba\\xe4P\\xc6oA\\xa6\\x0f\\x83hW\\x03$G\\xfb\\x82C{\\xb9\\x9f\\xaf\\xff\\xa3re\\xe9\\xc8\\xf8\\xf8$dy\\x19\\x08\\xb4{\\x19)l\\x069\\x14\\xc7\\x82\\xd07P\\x18\\xf4\\x1af\\x06$\\x98\\x1c\\xea\\x83,l\\xa5n]*\\xa5u\\xa4\\x90b4\\\\}\\x1a\\x7f\\xf9\\xeb3\\xa8R\\xf7\\xa2(t\\xb1\\xbf4R\\x0f\\xc5\\x9ce\\x90\\x93\\x8dr\\xca\\x93\\x8cbU\\x12\\xbd\\x12\\xf94^D~\\xa5z3\\xe0\\xb8\\xacA\\x12\\x97\\x83\\xc8\\xa88\\x9c\\xf4\\xf6\\x19W\\xc8\\x8b\\xa4\\x97.M\\xa0Q]\\x03?\\xfbu\\x88=\\xce\\xe0\\\\\\xf8o\\xf1\\xd9\\xf4\\x14\\xbak\\x04\\xa8\\x8a\\xdb\\x84\\x99\\xb1~4\\xe6\\xb1h\\r[\\te\\xe4r\\xd4$\\x19\\xe3\\xab/\\xbe\\xc0dg!\\x94\\x9c\\x97P\\x11kH\\xef\\x9a\\xa1N\\x96\\x93,\\x8bY\\x8f\\xb2\\xd87QJ\\xb2\\xf8\\xccr\\xaa;\\x06Y~\\x8c.\\xf6\\xe1\\xac\\xb7\\x90\\xccK@L\\xecY\\xda\\x0b\\xdc\\x15\\x05\\xf9y\\xac\\xa1\\xc1!\\x0c\\x0f_\\xc4i\\xef=\\x08\\xb1\\xa3\\xfa\\xf0Y\\x83\\xab\\x1a\\x05\\x86U\\xc9(\\x890DS\\xfa\\x1e\\x0c\\xa9\\xb2\\xd1)\\x0e%\\x04b\\xaa\\xa7\\x1a\\xa3\\xf5I\\xa8\\xa6\\xba\\xaaM\\xd8\\x82Z\\xde6\\xa8yF\\xd4\\xfe@\\x07\\x15o;T\\t;Pu\\xd6\\x18e\\\\#\\xca\\xa7\\xa1\\xce\\xf7\\xb0\\xa3\\x14\\xff\\x80CHI\\xe1#&\\x86\\x8bcG\\x8fy\\xe6f\\x8b6\\xb6\\xb7\\xb6>\\xbev\\xed\\x06\\xf2\\xb3\\x12\\xe1\\xb9\\x9fA\\x0c\\xc5 ?h-ji~c\\xaa\\x05\\xea\\x92>DC\\xd2\\x0e\\xb4\\t\\xac\\xe9,\\xe2\\x80\\xd6tZk\\x88\\xb7%}7Z\\xf8\\xe6$\\xcd\\x17\\xe5s4\\xf3w\\xa31\\xcd\\x1c\\r){Q\\x9fb\\x05)g\\x13bY\\x0c|l\\x0c\\xc0O\\x88Br2\\x1f\\xe1\\xe1\\x9c\\xafm\\x8f\\xd8\\xea\\xce\\xa9\\xa5\\n\\xb9lvf\\x16\\x83\\x17\\x06\\xe1\\xefd\\x04_\\x1b\\x06)\\xde\\xaf\\xea\\xf4v\\t\\xac\\x08\\x16\\xe8\\x16\\xec%\\x98\\xd39d7\\xc1\\x1c}\\xd9V\\xe8\\xcb\\xb1\\x84FdAm\\xcb\\xe7\\xb0\\x82&{\\xb1\\xafGh\\x85^\\xd1\\'h\\xcf\\xb4B\\x9a\\xcfk\\xf0=D\\xfe{\\xec\\x82P\\x90\\x8b\\xd4T>\\xd8^\\xde\\x8a\\xa5\\xfdO\\x9c\\x97\\xbb\\xa5\\xbf\\xaf\\xf7\\xd9\\xed\\xdb\\xf3(\\x16\\x8b\\xe0b\\xb9\\x02A\\x94\\x07\\xe9\\x99w1Vd\\x87!\\xf1\\x01\\x1d>-\\xb4\\xc6\\x88\\xc4\\x1a\\x17\\xa5\\x071*\\xb3&\\x1c\\xc0\\xa8\\xf4\\x00\\xc6\\xa8=&\\xa3>]\\xff\\xa1\\xe7c\\x0ea\\xb2\\xc4\\x11\\xf2\\xa8\\xf7\\x10h\\xcb\\xc0\\xc3z-\\x04i<\\x88\\xb2\\xf3\\xc0\\xe5\\xc6\\xfd\\x83\\xce\\xd4F?<\\x03\\x94\\x95\\x14g\\xce\\xce\\xce`v\\xf6:\\x92\\xa2\\xfc\\xe0\\xbcG\\x0f\\xc1\\x0e\\xfaP\\xa5\\x98\\xe2f\\xbd\\x1f\\xaeV{`\\xba\\xd2\\rW\\xabN`\\xa6Z\\x0b\\x0f\\xcc\\xd6\\x9cx\\x0e\\x8f\\xff\\xe2j\\x95;\\xae\\xab\\xbcp\\xbb1\\x10\\r\\x94\\x8b`{=\\xb0,\\r\\x90\\x18\\x15\\x88\\xc2B9\\x04t\\xc6\\xf1\\xf3\\xf5\\xcb\\xfe\\xdf\\xf3O\\xe1\\xb9|\\xc3\\xa6\\xc6\\xfa\\x89;\\xf3\\xf3\\x98\\xb84\\x89\\xc8\\x00G8\\xeeb\\xe0\\x7fD\\x0f\\x95\\x94\\xc3\\xcf5\\xa9xt!\\x03\\xf7z\\x12p\\xa7+\\x0e\\xf3\\x9d\\\\\\xdc\\xe9\\x8c\\xd5A\\xdb^\\xe8\\x8a\\xa71\\x89x<\\x98\\x89\\x07\\xfd|\\xd4\\xa4\\xeeG\\x80\\x8d\\x1e\\\\\\xf6\\xe8#6\\xe48\\x8a\\x15e\\xc4/C\\xd4\\x99\\xa8i\\xd6q\\xd6\\x86\\x1f;\\x03J\\x0b\\xf2\\xb7j\\xba;\\xbf\\xbaw\\xef.&\\xc9\\x06\\xad\\xcd\\x0e\\xbbV\\x80e\\xc1 -h\\x1b\\x86k\\x12\\xf0d\\xa6\\x19O\\xe75xv\\xa7\\x17\\xdf\\xcdw\\xe1\\xbb\\x85n<\\xbb\\xdb\\x8b\\xbf\\xdd\\xd1\\xe0O\\xb3\\xad\\x18\\xa9MDz\\xf0v\\xb8\\xeee\\xe0d\\xb1\\x1a<\\xd2Q^Q\\reY%\\xd2R\\xd3\\x9ex\\xb3\\xbd\\x8d~\\xea\\x0c,\\x93\\x88-4\\xbd\\xdd\\x0f\\xef.,\\xe0\\xfa\\xf5\\x9bT\\x0f9`;l\\x87\\xed\\xc7\\x0c\\xdc\\xac\\xf4\\x91\\xe0\\xb3\\r\\x15\\\"\\x1f\\x0c\\xd6\\xe7a\\xaa\\xb7\\x12S}\\xd5\\x18j\\xc8\\xa7>\\xda\\xbf|>\\x80\\xbb\\xd52\\xd8\\x9b2\\xf0u\\xde\\x89<a:\\xd4uMP\\xa9j)\\xee\\x82?\\x06\\xf8\\xf9\\xef{\\x91o\\x00ia\\x81QGk\\xf3\\xe4\\xdc\\xdc\\r\\xdc\\xbb\\xf79.\\x8e\\x8c\\xe0\\x9c \\x05\\x81,K8\\xee]\\x03;\\x13}8\\x9a1p6_\\xa6\\x83\\xa3\\x99\\x1eq.\\xc31\\x8b\\xb5\\x08v\\xff\\x04\\\"~\\\"\\xea\\xea\\x1a\\xd0\\xde\\xd1\\x85:u\\x1d232\\xa7\\x82\\x83\\x82v\\xfc\\x9co\\xa0\\\"\\x89\\xd8\\xb0\\xaa\\\\\\x9992<\\xf4\\xf7\\xf9\\xf9\\xdb\\x98\\xa7\\xba\\xb8<9\\x89\\x96\\x065\\x8a\\xf2EH\\xe7\\x9d\\xa6:\\r@Rt\\x00\\xbd\\xd3\\x1c\\x14\\xe6fAUY\\x89\\x9e\\x9e^\\x9c??\\x88\\xee\\xee\\x1e\\x94+\\xcb\\xbf\\xe7%$\\x888\\xe1\\x11\\xeb\\x7f\\xe9w\\xa0\\\\\\\"\\xde\\xaa\\xaa\\xaa\\x90\\r\\xf4k\\xee_\\xbd2\\x8d\\xb9\\x9b7\\ts\\xd0\\xaeW\\xd3Wfpez\\x06S\\x97\\xa7\\xa1]\\xc3GF.\\xa2\\xb7\\xa7\\x07\\xd5U\\xd5\\x0f\\x84\\x02\\x81<\\x9e\\xcb5\\xfa\\xb5\\xbe\\x83\\xc5\\xe7\\xf26\\xcaeR\\xb7\\xea\\xca\\nISC\\xfdHg{\\xdb\\xc3\\xae\\x8e\\x8eo:\\xdaZ\\xbfijl|D\\xfb\\xe8\\x88D,\\x96f\\xa6\\xf3\\xdd\\xc9\\xe7M/\\xaa\\x17\\xf7\\x97\\x03$\\xfe\\xcd0\\x96\\xdf3\\xcc\\xc6o\\x19f\\xcd}\\x86Y>\\xcc0\\xcb\\xb4Ha\\x18\\xbd%\\xbc\\xa8\\xce\\x1f\\xceY\\xd2\\xa3\\xd5\\xa9\\xd5\\xad\\xe5\\xd0ri9\\xb5\\xdc\\xff\\x01\\xbc\\'\\x04\\xa2\"\r\n\r\ndec = decompress(icon, -15)\r\n\r\niconphoto = PhotoImage(imageopen(BytesIO(dec)))\r\n```\r\nWeirdly, the exact same code worked perfectly in Python 3.6. Doing some investigating, it appears that here:\r\n```python\r\n@size.setter\r\ndef size(self, value):\r\n    if value not in self.info['sizes']:\r\n        raise ValueError(\r\n            \"This is not one of the allowed sizes of this image\")\r\n    self._size = value\r\n```\r\n`self.info['sizes']` is being set incorrectly, because the .ico file is 32x32.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3831", "id": 440999648, "node_id": "MDU6SXNzdWU0NDA5OTk2NDg=", "number": 3831, "title": "Can't verify a picture", "user": {"login": "Suyn", "id": 22725636, "node_id": "MDQ6VXNlcjIyNzI1NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/22725636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Suyn", "html_url": "https://github.com/Suyn", "followers_url": "https://api.github.com/users/Suyn/followers", "following_url": "https://api.github.com/users/Suyn/following{/other_user}", "gists_url": "https://api.github.com/users/Suyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Suyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Suyn/subscriptions", "organizations_url": "https://api.github.com/users/Suyn/orgs", "repos_url": "https://api.github.com/users/Suyn/repos", "events_url": "https://api.github.com/users/Suyn/events{/privacy}", "received_events_url": "https://api.github.com/users/Suyn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-05-07T02:43:43Z", "updated_at": "2019-07-10T10:50:10Z", "closed_at": "2019-07-10T10:50:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "`Image.open(pathfile).verify()`, there is a problem in it.\r\n\r\n### What did you do?\r\nI found this method couldn't verify a picture in fact, in my windows10, I can't open my picture because it was broken, but I use this function that nothing to happen, there is no error or exception to raise.\r\n### What did you expect to happen?\r\nModify this method and solve the problem.\r\n### What actually happened?\r\nAs you see.\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: windows10\r\n* Python: 3.6.6\r\n* Pillow: 6.0.0\r\n\r\n```python\r\nImage.open(path).verify()\r\n```\r\nThe test img in my local and my E-mail: liquid777@163.com. If you need, please contact me.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3828", "id": 440742538, "node_id": "MDU6SXNzdWU0NDA3NDI1Mzg=", "number": 3828, "title": "'ValueError: unknown raw mode' when converting large TIF file", "user": {"login": "anpr", "id": 1492772, "node_id": "MDQ6VXNlcjE0OTI3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1492772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anpr", "html_url": "https://github.com/anpr", "followers_url": "https://api.github.com/users/anpr/followers", "following_url": "https://api.github.com/users/anpr/following{/other_user}", "gists_url": "https://api.github.com/users/anpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/anpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anpr/subscriptions", "organizations_url": "https://api.github.com/users/anpr/orgs", "repos_url": "https://api.github.com/users/anpr/repos", "events_url": "https://api.github.com/users/anpr/events{/privacy}", "received_events_url": "https://api.github.com/users/anpr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-05-06T14:59:30Z", "updated_at": "2020-10-13T15:47:30Z", "closed_at": "2019-07-05T11:16:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI tried to open [this large TIF file](https://umg-public-image-bucket.s3-eu-west-1.amazonaws.com/alp-1978-big-tif.tif) with Pillow 6.1.0 (sha 0e36b288dd9d7e932afeda5c01548d04baa9f93b) in the following way:\r\n```python\r\nfrom PIL import Image\r\nimage = Image.open(input_path)\r\nthumbnail_size = (800, 800)\r\nimage.thumbnail(thumbnail_size, Image.ANTIALIAS)\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nNo exception. I can later save the image with `image.save(output_path)`\r\n\r\n### What actually happened?\r\n\r\nThe following exception occurred:\r\n`ValueError: unknown raw mode`\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Inside a Docker container, Debian stretch 9\r\n* Python: Python 3.7.3\r\n* Pillow: Pillow 6.1.0 (sha 0e36b288dd9d7e932afeda5c01548d04baa9f93b)\r\n\r\nThis is a follow-up issue of https://github.com/python-pillow/Pillow/issues/3815\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3798", "id": 434375365, "node_id": "MDU6SXNzdWU0MzQzNzUzNjU=", "number": 3798, "title": "Testsuite fails on alpine linux s390x", "user": {"login": "ncopa", "id": 66357, "node_id": "MDQ6VXNlcjY2MzU3", "avatar_url": "https://avatars.githubusercontent.com/u/66357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ncopa", "html_url": "https://github.com/ncopa", "followers_url": "https://api.github.com/users/ncopa/followers", "following_url": "https://api.github.com/users/ncopa/following{/other_user}", "gists_url": "https://api.github.com/users/ncopa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ncopa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ncopa/subscriptions", "organizations_url": "https://api.github.com/users/ncopa/orgs", "repos_url": "https://api.github.com/users/ncopa/repos", "events_url": "https://api.github.com/users/ncopa/events{/privacy}", "received_events_url": "https://api.github.com/users/ncopa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 242311159, "node_id": "MDU6TGFiZWwyNDIzMTExNTk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Linux", "name": "Linux", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-04-17T16:27:30Z", "updated_at": "2021-11-10T00:18:59Z", "closed_at": "2021-11-10T00:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nTried to rebuild the alpine linux py-pillow package with python 3.7\r\n\r\n### What did you expect to happen?\r\n\r\nSuccessful build and successful testsuite run\r\n\r\n### What actually happened?\r\n````\r\nTests/test_imagefont.py::TestImageFont::test_multiline_spacing FAILED                                          [ 81%]\r\n\r\n====================================================== FAILURES ======================================================\r\n________________________________________ TestImageFont.test_multiline_spacing ________________________________________\r\n\r\nself = <test_imagefont.TestImageFont testMethod=test_multiline_spacing>\r\n\r\n    def test_multiline_spacing(self):\r\n        ttf = self.get_font()\r\n    \r\n        im = Image.new(mode='RGB', size=(300, 100))\r\n        draw = ImageDraw.Draw(im)\r\n        draw.multiline_text((0, 0), TEST_TEXT, font=ttf, spacing=10)\r\n    \r\n        target = 'Tests/images/multiline_text_spacing.png'\r\n        target_img = Image.open(target)\r\n    \r\n        # Epsilon ~.5 fails with FreeType 2.7\r\n>       self.assert_image_similar(im, target_img, self.metrics['multiline'])\r\n\r\nTests/test_imagefont.py:267: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <test_imagefont.TestImageFont testMethod=test_multiline_spacing>\r\na = <PIL.Image.Image image mode=RGB size=300x100 at 0x7F14F42FE9D0>\r\nb = <PIL.PngImagePlugin.PngImageFile image mode=RGB size=300x100 at 0x7F14F42FEC10>, epsilon = 0.5, msg = None\r\n\r\n    def assert_image_similar(self, a, b, epsilon, msg=None):\r\n        epsilon = float(epsilon)\r\n        self.assertEqual(\r\n            a.mode, b.mode,\r\n            msg or \"got mode %r, expected %r\" % (a.mode, b.mode))\r\n        self.assertEqual(\r\n            a.size, b.size,\r\n            msg or \"got size %r, expected %r\" % (a.size, b.size))\r\n    \r\n        a, b = convert_to_comparable(a, b)\r\n    \r\n        diff = 0\r\n        for ach, bch in zip(a.split(), b.split()):\r\n            chdiff = ImageMath.eval(\"abs(a - b)\", a=ach, b=bch).convert('L')\r\n            diff += sum(i * num for i, num in enumerate(chdiff.histogram()))\r\n    \r\n        ave_diff = float(diff)/(a.size[0]*a.size[1])\r\n        try:\r\n            self.assertGreaterEqual(\r\n                epsilon, ave_diff,\r\n                (msg or '') +\r\n                \" average pixel value difference %.4f > epsilon %.4f\" % (\r\n                    ave_diff, epsilon))\r\n        except Exception as e:\r\n            if HAS_UPLOADER:\r\n                try:\r\n                    url = test_image_results.upload(a, b)\r\n                    logger.error(\"Url for test images: %s\" % url)\r\n                except Exception:\r\n                    pass\r\n>           raise e\r\nE           AssertionError:  average pixel value difference 6.1854 > epsilon 0.5000\r\n\r\nTests/helper.py:154: AssertionError\r\n================================= 1 failed, 964 passed, 68 skipped in 21.24 seconds ==================================\r\n````\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Alpine linux edge (rolling release) x86, x86_64 and ppc64le\r\n* Python: 3.7.3\r\n* Pillow: 5.4.1\r\n\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```python\r\ncode goes here\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3791", "id": 432851501, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcwMjI5MjE3", "number": 3791, "title": "Fixed bug in decoding large images", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-13T14:10:56Z", "updated_at": "2019-07-11T10:05:24Z", "closed_at": "2019-05-04T13:15:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3791", "html_url": "https://github.com/python-pillow/Pillow/pull/3791", "diff_url": "https://github.com/python-pillow/Pillow/pull/3791.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3791.patch", "merged_at": "2019-05-04T13:15:33Z"}, "body": "Resolves #1475", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3791/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3786", "id": 431445261, "node_id": "MDU6SXNzdWU0MzE0NDUyNjE=", "number": 3786, "title": "Manipulating .cr2 file crashes Python process (signal 11)", "user": {"login": "timo-piirmann", "id": 5444741, "node_id": "MDQ6VXNlcjU0NDQ3NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/5444741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timo-piirmann", "html_url": "https://github.com/timo-piirmann", "followers_url": "https://api.github.com/users/timo-piirmann/followers", "following_url": "https://api.github.com/users/timo-piirmann/following{/other_user}", "gists_url": "https://api.github.com/users/timo-piirmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/timo-piirmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timo-piirmann/subscriptions", "organizations_url": "https://api.github.com/users/timo-piirmann/orgs", "repos_url": "https://api.github.com/users/timo-piirmann/repos", "events_url": "https://api.github.com/users/timo-piirmann/events{/privacy}", "received_events_url": "https://api.github.com/users/timo-piirmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-04-10T11:15:20Z", "updated_at": "2020-06-20T12:49:10Z", "closed_at": "2020-06-20T12:49:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI was trying to open and save .cr2 image in another format.\r\n\r\n### What did you expect to happen?\r\nI expected the file to be saved OR at least raise some kind of exception why it couldn't be done. Anything I could work with\r\n\r\n### What actually happened?\r\nPython process crashed with the following message:\r\n\r\n`Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)`\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: macOS Mojave\r\n* Python: 3.6.6\r\n* Pillow: 6.0.0\r\n\r\n```python\r\nfrom PIL import Image\r\n\r\nimg = Image.open(\"file_1.cr2\")\r\ndel img.tag_v2[700]\r\n\r\nimg.save(\"new_file.tif\")\r\n```\r\n\r\nIn Pillow 5.4.1 this file wasn't identified by Pillow as image and so the code just skipped this part. But in 6.0.0 Pillow does identify it as image but after that things blow up.\r\n\r\n[image.CR2.zip](https://github.com/python-pillow/Pillow/files/3063455/image.CR2.zip)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3759", "id": 427387849, "node_id": "MDExOlB1bGxSZXF1ZXN0MjY2MDA3OTIz", "number": 3759, "title": "Improve handling of PSD frames", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-31T11:49:21Z", "updated_at": "2019-06-19T10:23:48Z", "closed_at": "2019-06-19T06:15:14Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3759", "html_url": "https://github.com/python-pillow/Pillow/pull/3759", "diff_url": "https://github.com/python-pillow/Pillow/pull/3759.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3759.patch", "merged_at": "2019-06-19T06:15:14Z"}, "body": "* PSD frames start from 1, not 0. This PR changes `ImageSequence` to use this.\r\n* PSD was closing the file pointer after load. This is not correct, as it is a multiframe format. This is because it was missing `_close_exclusive_fp_after_loading = False`.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3759/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3756", "id": 426402644, "node_id": "MDU6SXNzdWU0MjY0MDI2NDQ=", "number": 3756, "title": "AttributeError: module 'PIL._imaging' has no attribute 'group4_decoder'", "user": {"login": "eroux", "id": 60868, "node_id": "MDQ6VXNlcjYwODY4", "avatar_url": "https://avatars.githubusercontent.com/u/60868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eroux", "html_url": "https://github.com/eroux", "followers_url": "https://api.github.com/users/eroux/followers", "following_url": "https://api.github.com/users/eroux/following{/other_user}", "gists_url": "https://api.github.com/users/eroux/gists{/gist_id}", "starred_url": "https://api.github.com/users/eroux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eroux/subscriptions", "organizations_url": "https://api.github.com/users/eroux/orgs", "repos_url": "https://api.github.com/users/eroux/repos", "events_url": "https://api.github.com/users/eroux/events{/privacy}", "received_events_url": "https://api.github.com/users/eroux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-28T10:03:45Z", "updated_at": "2019-06-29T07:27:01Z", "closed_at": "2019-06-29T07:27:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nExecuted this a script (code below) to get the dimensions of a tiff group4 image.\r\n\r\n### What did you expect to happen?\r\n\r\nI expected that the dimensions of the images would be printed\r\n\r\n### What actually happened?\r\n\r\ncrash with the error\r\n\r\n```\r\nAttributeError: module 'PIL._imaging' has no attribute 'group4_decoder'\r\n```\r\n\r\nfull output:\r\n\r\n```\r\n['DEFAULT_STRATEGY', 'FILTERED', 'FIXED', 'HAVE_LIBJPEGTURBO', 'HUFFMAN_ONLY', 'PILLOW_VERSION', 'RLE', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'alpha_composite', 'bcn_decoder', 'bit_decoder', 'blend', 'clear_cache', 'convert', 'draw', 'effect_mandelbrot', 'effect_noise', 'eps_encoder', 'fill', 'fli_decoder', 'font', 'get_alignment', 'get_block_size', 'get_blocks_max', 'get_stats', 'getcodecstatus', 'gif_decoder', 'gif_encoder', 'hex_decoder', 'hex_encoder', 'jp2klib_version', 'jpeg2k_decoder', 'jpeg2k_encoder', 'jpeg_decoder', 'jpeg_encoder', 'jpeglib_version', 'libtiff_decoder', 'libtiff_encoder', 'libtiff_version', 'linear_gradient', 'map_buffer', 'merge', 'new', 'outline', 'packbits_decoder', 'path', 'pcd_decoder', 'pcx_decoder', 'pcx_encoder', 'radial_gradient', 'raw_decoder', 'raw_encoder', 'reset_stats', 'set_alignment', 'set_block_size', 'set_blocks_max', 'sgi_rle_decoder', 'sun_rle_decoder', 'tga_rle_decoder', 'tga_rle_encoder', 'wedge', 'xbm_decoder', 'xbm_encoder', 'zip_decoder', 'zip_encoder', 'zlib_version']\r\n5.4.1\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/dist-packages/PIL/Image.py\", line 455, in _getdecoder\r\n    decoder = getattr(core, decoder_name + \"_decoder\")\r\nAttributeError: module 'PIL._imaging' has no attribute 'group4_decoder'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"bug.py\", line 36, in <module>\r\n    print(dimensionsFromBlobImage(blob))\r\n  File \"bug.py\", line 24, in dimensionsFromBlobImage\r\n    ImPar.feed(chunk)\r\n  File \"/usr/local/lib/python3.7/dist-packages/PIL/ImageFile.py\", line 416, in feed\r\n    im.mode, d, a, im.decoderconfig\r\n  File \"/usr/local/lib/python3.7/dist-packages/PIL/Image.py\", line 458, in _getdecoder\r\n    raise IOError(\"decoder %s not available\" % decoder_name)\r\nOSError: decoder group4 not available\r\n```\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Linux Debian (reproduced it on stable and sid)\r\n* Python: 3.7.2+\r\n* Pillow: 5.4.1\r\n\r\nNote that I do have `libtiff5` and `libtiff5-dev` installed.\r\n\r\nHere's the script:\r\n\r\n```python\r\nimport PIL\r\nfrom PIL import Image, TiffImagePlugin\r\nfrom PIL import ImageFile\r\n\r\nTiffImagePlugin.READ_LIBTIFF=True\r\nprint(dir(PIL._imaging))\r\nprint(PIL.PILLOW_VERSION)\r\n\r\ndef dimensionsFromBlobImage(blob):\r\n    ImPar = ImageFile.Parser()\r\n    chunk = blob.read(2048)\r\n    while chunk != \"\":\r\n        ImPar.feed(chunk)\r\n        if ImPar.image:\r\n            break\r\n        chunk = blob.read(2048)\r\n    return ImPar.image.size\r\n\r\n\r\nwith (open(\"I1GS1051890001.tif\", mode='rb')) as blob:\r\n    print(dimensionsFromBlobImage(blob))\r\n```\r\n\r\nand the image:\r\n\r\n[I1GS1051890001.tif.zip](https://github.com/python-pillow/Pillow/files/3017275/I1GS1051890001.tif.zip)\r\n\r\nNote that the script works fine when replacing the function with:\r\n\r\n```python\r\ndef dimensionsFromBlobImage(blob):\r\n    im = Image.open(blob)\r\n    return im.size\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3756/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3747", "id": 424929291, "node_id": "MDU6SXNzdWU0MjQ5MjkyOTE=", "number": 3747, "title": "ImageDraw.rectangle off by a factor of 2 for uint16 type images", "user": {"login": "TAdeJong", "id": 6816964, "node_id": "MDQ6VXNlcjY4MTY5NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6816964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TAdeJong", "html_url": "https://github.com/TAdeJong", "followers_url": "https://api.github.com/users/TAdeJong/followers", "following_url": "https://api.github.com/users/TAdeJong/following{/other_user}", "gists_url": "https://api.github.com/users/TAdeJong/gists{/gist_id}", "starred_url": "https://api.github.com/users/TAdeJong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TAdeJong/subscriptions", "organizations_url": "https://api.github.com/users/TAdeJong/orgs", "repos_url": "https://api.github.com/users/TAdeJong/repos", "events_url": "https://api.github.com/users/TAdeJong/events{/privacy}", "received_events_url": "https://api.github.com/users/TAdeJong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-25T14:22:21Z", "updated_at": "2019-06-30T10:18:46Z", "closed_at": "2019-06-30T10:18:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nDraw a rectangle of size 6*6 in a image with dtype `np.uint16`, per following code:\r\n\r\n```python\r\nfrom PIL import ImageDraw, Image\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\nI = Image.fromarray(np.zeros((8,8), dtype=np.uint16))\r\nd = ImageDraw.Draw(I)\r\nd.rectangle([0,0,5,5], fill='white')\r\nnp.asarray(I)\r\n```\r\n\r\n### What did you expect to happen?\r\nAn output similar to the case of a `float` image or a `uint8` image, (taking into account #367 and #1668), with a square white triangle.\r\n### What actually happened?\r\nThe output is as follows:\r\n```python\r\narray([[65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [65535, 65535, 65535,     0,     0,     0,     0,     0],\r\n       [    0,     0,     0,     0,     0,     0,     0,     0],\r\n       [    0,     0,     0,     0,     0,     0,     0,     0]],\r\n      dtype=uint16)\r\n```\r\nSo the rectangle is only half the width compared to the expected size. This only happens for uint16 images as far as I checked.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Windows 10\r\n* Python: Anaconda 3.6.8\r\n* Pillow: 5.4.1", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3747/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3724", "id": 421901110, "node_id": "MDExOlB1bGxSZXF1ZXN0MjYxODI5NDc5", "number": 3724, "title": "Ensure image is mutable before saving", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-17T09:24:44Z", "updated_at": "2019-03-28T10:01:53Z", "closed_at": "2019-03-28T09:53:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3724", "html_url": "https://github.com/python-pillow/Pillow/pull/3724", "diff_url": "https://github.com/python-pillow/Pillow/pull/3724.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3724.patch", "merged_at": "2019-03-28T09:53:33Z"}, "body": "Resolves #3496\r\n\r\nIn that issue, a bus error occurs when opening an image and saving it back to the same location. It was described as relating to mmap. Investigating, I find that the bus error occurs at https://github.com/python-pillow/Pillow/blob/d1f865e02ae1731eb41a981ea9a45613e0b91ddc/src/libImaging/Pack.c#L459\r\n\r\nSo presumably that is conflicting with mmap.\r\n\r\nThe same block of code that sets up mmap also marks the image as readonly.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/d1f865e02ae1731eb41a981ea9a45613e0b91ddc/src/PIL/ImageFile.py#L185-L191\r\n\r\nhttps://pillow.readthedocs.io/en/5.4.1/releasenotes/3.3.2.html\r\n\r\n> The image was marked readonly, so Pillow would not ordinarily write to that memory without duplicating the image first.\r\n\r\nGiven the general testing requirement of operating on temp files, and since the test involves opening and saving back the same file, the test can't be run on Windows, as temp files can't be opened twice on that operating system - https://docs.python.org/2/library/tempfile.html\r\n> Whether the name can be used to open the file a second time, while the named temporary file is still open, varies across platforms (it can be so used on Unix; it cannot on Windows NT or later).", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3724/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3712", "id": 420221301, "node_id": "MDU6SXNzdWU0MjAyMjEzMDE=", "number": 3712, "title": "Reading multi-image TIFF gets wrong frame after seeking backwards", "user": {"login": "tomgoddard", "id": 8163725, "node_id": "MDQ6VXNlcjgxNjM3MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8163725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomgoddard", "html_url": "https://github.com/tomgoddard", "followers_url": "https://api.github.com/users/tomgoddard/followers", "following_url": "https://api.github.com/users/tomgoddard/following{/other_user}", "gists_url": "https://api.github.com/users/tomgoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomgoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomgoddard/subscriptions", "organizations_url": "https://api.github.com/users/tomgoddard/orgs", "repos_url": "https://api.github.com/users/tomgoddard/repos", "events_url": "https://api.github.com/users/tomgoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/tomgoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/33", "html_url": "https://github.com/python-pillow/Pillow/milestone/33", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/33/labels", "id": 3258085, "node_id": "MDk6TWlsZXN0b25lMzI1ODA4NQ==", "number": 33, "title": "6.0.0", "description": "", "creator": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2018-04-11T08:06:37Z", "updated_at": "2019-04-10T02:47:30Z", "due_on": "2019-04-01T07:00:00Z", "closed_at": "2019-04-03T03:57:30Z"}, "comments": 2, "created_at": "2019-03-12T21:49:10Z", "updated_at": "2019-03-27T15:58:35Z", "closed_at": "2019-03-27T15:58:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Opening a multi-image tiff file and seeking backwards and then forwards can seek to the wrong frame.  Below is a test case that demonstrates the bug, and a patch that fixes it.\r\n\r\nThe attached zip file contains tiff_seek_test.py that writes a 3 frame TIFF file and demonstrates that seeking to frames 0, 1, 0, 2 in that order ends with incorrectly being on frame 1 instead of frame 2.  The test sets the pixel values of each frame to match the frame number and reports the pixel values of each frame.\r\n\r\n[tiff_seek.zip](https://github.com/python-pillow/Pillow/files/2958894/tiff_seek.zip)\r\n\r\nTest was run with Python 3.7 and PIL 5.4.1 on macOS 10.14.2.  PIL 6.0 code has the same faulty TiffImagePlugin.py _seek() code.  The above zip file includes a patch that fixes this bug.\r\n\r\nThe TiffImagePlugin.py _seek() code incorrectly assumes that the current frame is the last frame in its list of cached frame byte offsets (TiffImageFile._frame_pos).  That assumption is correct if only forward seeking is done, after a backward seek the current frame is not the last one in the cached frame byte offset list, and this results in caching the wrong byte offset after a seek to a frame not in the cached byte offsets.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3610", "id": 403371621, "node_id": "MDU6SXNzdWU0MDMzNzE2MjE=", "number": 3610, "title": "Image.close() does not deallocate memory", "user": {"login": "eob", "id": 63262, "node_id": "MDQ6VXNlcjYzMjYy", "avatar_url": "https://avatars.githubusercontent.com/u/63262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eob", "html_url": "https://github.com/eob", "followers_url": "https://api.github.com/users/eob/followers", "following_url": "https://api.github.com/users/eob/following{/other_user}", "gists_url": "https://api.github.com/users/eob/gists{/gist_id}", "starred_url": "https://api.github.com/users/eob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eob/subscriptions", "organizations_url": "https://api.github.com/users/eob/orgs", "repos_url": "https://api.github.com/users/eob/repos", "events_url": "https://api.github.com/users/eob/events{/privacy}", "received_events_url": "https://api.github.com/users/eob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115807, "node_id": "MDU6TGFiZWwxMDExNTgwNw==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Invalid", "name": "Invalid", "color": "e6e6e6", "default": false, "description": null}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-25T23:26:37Z", "updated_at": "2019-10-14T21:06:24Z", "closed_at": "2019-10-14T21:06:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nRan the following code (this is a toy reproduction of a large-scale deployment)\r\n\r\n```python\r\nimport PIL\r\nfrom PIL import Image\r\n\r\n@profile\r\ndef do_image_things():\r\n  im = Image.open('foo.png')\r\n  im.close()\r\n  del im\r\n\r\nif __name__ == '__main__':\r\n  do_image_things()\r\n```\r\n\r\nUsing the invocation: `python -m memory_profiler experiment.py`\r\n\r\n### What did you expect to happen?\r\n\r\nThe memory allocated for `im` to be deallocated.\r\n\r\n### What actually happened?\r\n\r\nPython's memory_profiler shows that the memory usage does not go down:\r\n\r\n```\r\nLine #    Mem usage    Increment   Line Contents\r\n================================================\r\n     8   33.645 MiB   33.645 MiB   @profile\r\n     9                             def do_image_things():\r\n    12   37.383 MiB    3.738 MiB     im = Image.open(u'foo.png')\r\n    13   37.387 MiB    0.004 MiB     im.close()\r\n    14   37.387 MiB    0.000 MiB     del im\r\n```\r\n\r\nHas anyone been able to resolve this problem?\r\n\r\nNo\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Mac OSX Mojave\r\n* Python: 2.7.14\r\n* Pillow: 5.0.0\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3610/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3588", "id": 400267281, "node_id": "MDExOlB1bGxSZXF1ZXN0MjQ1NDkyOTY2", "number": 3588, "title": "Change size of MPO image to match frame", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-17T13:02:19Z", "updated_at": "2019-03-28T20:49:33Z", "closed_at": "2019-03-28T10:01:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3588", "html_url": "https://github.com/python-pillow/Pillow/pull/3588", "diff_url": "https://github.com/python-pillow/Pillow/pull/3588.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3588.patch", "merged_at": "2019-03-28T10:01:34Z"}, "body": "Resolves #1631, replaces #3126\r\n\r\nMPO files contain multiple images. The images within the current Pillow test suite are 'Multi-Frame Image'. The images in the issue are not, and instead have a 'Large Thumbnail'. This 'Large Thumbnail' does not have same size as the first image.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3588/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3565", "id": 397818027, "node_id": "MDU6SXNzdWUzOTc4MTgwMjc=", "number": 3565, "title": "Save as PDF with resolution/dpi float dpi result", "user": {"login": "Fabian1337", "id": 5721838, "node_id": "MDQ6VXNlcjU3MjE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/5721838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fabian1337", "html_url": "https://github.com/Fabian1337", "followers_url": "https://api.github.com/users/Fabian1337/followers", "following_url": "https://api.github.com/users/Fabian1337/following{/other_user}", "gists_url": "https://api.github.com/users/Fabian1337/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fabian1337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fabian1337/subscriptions", "organizations_url": "https://api.github.com/users/Fabian1337/orgs", "repos_url": "https://api.github.com/users/Fabian1337/repos", "events_url": "https://api.github.com/users/Fabian1337/events{/privacy}", "received_events_url": "https://api.github.com/users/Fabian1337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357118060, "node_id": "MDU6TGFiZWwxMzU3MTE4MDYw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Conversion", "name": "Conversion", "color": "e99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-10T12:54:35Z", "updated_at": "2021-05-02T08:16:35Z", "closed_at": "2021-05-02T08:16:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nSaved the PDF with `resolution=300`\r\n`img.save(outpath + \"/\" + \"test.pdf\", resolution=300)`\r\n\r\n### What did you expect to happen?\r\nPDF with 300 resolution...\r\nIf you save with \".jpg\" as extension the resolution will be 300 integer\r\n\r\n### What actually happened?\r\nPDF with 300.235 resolution ...\r\nPhotoshop CC 2019\r\n![grafik](https://user-images.githubusercontent.com/5721838/50969565-37ec3400-14df-11e9-8344-0a961decb689.png)\r\n\r\nAlso shown in Adobe Acrobat DC\r\n![grafik](https://user-images.githubusercontent.com/5721838/51019607-c7dfbb80-157b-11e9-9642-1e1e20f4f48f.png)\r\nHow to get resolution in Adobe Acrobat DC\r\nTools > Print Production/ Output Preview > Preview: Object Inspector >Click on image\r\n\r\n\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: \r\nWindows 10\r\n* Python: \r\n3.5.2\r\n* Pillow: \r\n5.4.1\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3546", "id": 396141809, "node_id": "MDU6SXNzdWUzOTYxNDE4MDk=", "number": 3546, "title": "Suspicious expression in C code", "user": {"login": "cgohlke", "id": 483428, "node_id": "MDQ6VXNlcjQ4MzQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/483428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgohlke", "html_url": "https://github.com/cgohlke", "followers_url": "https://api.github.com/users/cgohlke/followers", "following_url": "https://api.github.com/users/cgohlke/following{/other_user}", "gists_url": "https://api.github.com/users/cgohlke/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgohlke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgohlke/subscriptions", "organizations_url": "https://api.github.com/users/cgohlke/orgs", "repos_url": "https://api.github.com/users/cgohlke/repos", "events_url": "https://api.github.com/users/cgohlke/events{/privacy}", "received_events_url": "https://api.github.com/users/cgohlke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-05T07:20:31Z", "updated_at": "2019-03-16T10:48:50Z", "closed_at": "2019-03-16T10:48:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Is the expression [`if (h->keyDestroyFunc || h->keyDestroyFunc) {`](https://github.com/python-pillow/Pillow/blob/master/src/libImaging/QuantHash.c#L317) in `QuantHash.c` correct? Should it be `if (h->keyDestroyFunc || h->valDestroyFunc) {`?", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3546/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3527", "id": 395285467, "node_id": "MDU6SXNzdWUzOTUyODU0Njc=", "number": 3527, "title": "Error when loading some PNG images", "user": {"login": "lshostenko", "id": 9046065, "node_id": "MDQ6VXNlcjkwNDYwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9046065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lshostenko", "html_url": "https://github.com/lshostenko", "followers_url": "https://api.github.com/users/lshostenko/followers", "following_url": "https://api.github.com/users/lshostenko/following{/other_user}", "gists_url": "https://api.github.com/users/lshostenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/lshostenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lshostenko/subscriptions", "organizations_url": "https://api.github.com/users/lshostenko/orgs", "repos_url": "https://api.github.com/users/lshostenko/repos", "events_url": "https://api.github.com/users/lshostenko/events{/privacy}", "received_events_url": "https://api.github.com/users/lshostenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-02T15:35:01Z", "updated_at": "2019-01-05T10:08:59Z", "closed_at": "2019-01-05T10:08:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "After update PIL to 5.4.0 I cannot load an image\r\n![mastercard](https://user-images.githubusercontent.com/9046065/50598772-71f08100-0eb4-11e9-99cd-126e65673626.png)\r\n[_image duplicate on Google drive_](https://drive.google.com/open?id=19pwEEGBh7h1iYRn3uSC19z8tkiHokPJQ)\r\n\r\nThe example code shown bellow raises `EOFError`. But it worked correctly in previous versions.\r\n\r\nThe error was reproduced in Ubuntu 14.04 + Python 3.6.7 and macOS Sierra 10.12.6 + Python 3.6.3. In both cases Pillow 5.4.0 was uses. it seems the error was caused by the commit [22837c37e279a5fb3fb7b482d81e2c4d44c8cdcc](https://github.com/python-pillow/Pillow/commit/22837c37e279a5fb3fb7b482d81e2c4d44c8cdcc).\r\n\r\n```python\r\nfrom io import BytesIO\r\n\r\nfrom PIL import Image\r\n\r\nwith open('mastercard.png', mode='rb') as fp:\r\n    im_bytes = fp.read()\r\n\r\nimage = Image.open(BytesIO(im_bytes))\r\nimage.show()\r\n```\r\n\r\nError log:\r\n```\r\nEOFError                                  Traceback (most recent call last)\r\n<ipython-input-11-d946298b95dd> in <module>\r\n----> 1 image.show()\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/Image.py in show(self, title, command)\r\n   2039         \"\"\"\r\n   2040\r\n-> 2041         _show(self, title=title, command=command)\r\n   2042\r\n   2043     def split(self):\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/Image.py in _show(image, **options)\r\n   2904 def _show(image, **options):\r\n   2905     # override me, as necessary\r\n-> 2906     _showxv(image, **options)\r\n   2907\r\n   2908\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/Image.py in _showxv(image, title, **options)\r\n   2909 def _showxv(image, title=None, **options):\r\n   2910     from . import ImageShow\r\n-> 2911     ImageShow.show(image, title, **options)\r\n   2912\r\n   2913\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/ImageShow.py in show(image, title, **options)\r\n     51     \"\"\"\r\n     52     for viewer in _viewers:\r\n---> 53         if viewer.show(image, title=title, **options):\r\n     54             return 1\r\n     55     return 0\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/ImageShow.py in show(self, image, **options)\r\n     75             image = image.convert(base)\r\n     76\r\n---> 77         return self.show_image(image, **options)\r\n     78\r\n     79     # hook methods\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/ImageShow.py in show_image(self, image, **options)\r\n     95     def show_image(self, image, **options):\r\n     96         \"\"\"Display given image\"\"\"\r\n---> 97         return self.show_file(self.save_image(image), **options)\r\n     98\r\n     99     def show_file(self, file, **options):\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/ImageShow.py in save_image(self, image)\r\n     91     def save_image(self, image):\r\n     92         \"\"\"Save to temporary file, and return filename\"\"\"\r\n---> 93         return image._dump(format=self.get_format(image), **self.options)\r\n     94\r\n     95     def show_image(self, image, **options):\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/Image.py in _dump(self, file, format, **options)\r\n    646                 filename = filename + suffix\r\n    647\r\n--> 648         self.load()\r\n    649\r\n    650         if not format or format == \"PPM\":\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/ImageFile.py in load(self)\r\n    248         self.readonly = readonly\r\n    249\r\n--> 250         self.load_end()\r\n    251\r\n    252         if self._exclusive_fp and self._close_exclusive_fp_after_loading:\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/PngImagePlugin.py in load_end(self)\r\n    675\r\n    676             try:\r\n--> 677                 self.png.call(cid, pos, length)\r\n    678             except UnicodeDecodeError:\r\n    679                 break\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/PngImagePlugin.py in call(self, cid, pos, length)\r\n    138\r\n    139         logger.debug(\"STREAM %r %s %s\", cid, pos, length)\r\n--> 140         return getattr(self, \"chunk_\" + cid.decode('ascii'))(pos, length)\r\n    141\r\n    142     def crc(self, cid, data):\r\n\r\n~/py/ocean/ocean_ai/env/lib/python3.6/site-packages/PIL/PngImagePlugin.py in chunk_IDAT(self, pos, length)\r\n    354         self.im_tile = [(\"zip\", (0, 0)+self.im_size, pos, self.im_rawmode)]\r\n    355         self.im_idat = length\r\n--> 356         raise EOFError\r\n    357\r\n    358     def chunk_IEND(self, pos, length):\r\n\r\nEOFError:\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527/reactions", "total_count": 10, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3496", "id": 391388675, "node_id": "MDU6SXNzdWUzOTEzODg2NzU=", "number": 3496, "title": "SIGBUS when overwriting the file you opened", "user": {"login": "lskovlun", "id": 615915, "node_id": "MDQ6VXNlcjYxNTkxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/615915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lskovlun", "html_url": "https://github.com/lskovlun", "followers_url": "https://api.github.com/users/lskovlun/followers", "following_url": "https://api.github.com/users/lskovlun/following{/other_user}", "gists_url": "https://api.github.com/users/lskovlun/gists{/gist_id}", "starred_url": "https://api.github.com/users/lskovlun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lskovlun/subscriptions", "organizations_url": "https://api.github.com/users/lskovlun/orgs", "repos_url": "https://api.github.com/users/lskovlun/repos", "events_url": "https://api.github.com/users/lskovlun/events{/privacy}", "received_events_url": "https://api.github.com/users/lskovlun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-15T15:43:40Z", "updated_at": "2019-03-28T09:53:34Z", "closed_at": "2019-03-28T09:53:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI have a program that takes the palette of one (indexed, 8-bit) bitmap file, applies it to another bitmap file, then attempts to replace the second file in-place with the updated version. Doing so consistently results in a SIGBUS. Apparently there is a minimum file size where this happens; I've seen the test program pass for very small bitmaps. I'm attaching two files of the same size I originally used (but not the same content), if I can get it work.\r\n\r\n### What did you expect to happen?\r\n\r\nNo SIGBUS. The use of mmap should be an implementation detail, but its use \"leaks out\" in this case, and as described, cannot be turned off except by hacking the Pillow installation.\r\n\r\n### What actually happened?\r\n\r\nSIGBUS.\r\nI have tracked the issue down to the mmap functionality in Pillow, which cannot be disabled from the caller. I can think of three workarounds, two of which I've verified make the test program work.\r\n\r\n1. Use os.unlink to make sure that the replacement file gets a new inode (TESTED)\r\n2. Force use_mmap to False within ImageFile.py (TESTED)\r\n3. Use the O_TMPFILE trick mentioned in the open(2) manpage (UNTESTED)\r\n\r\nOf course, it would be even better if this was handled properly within Pillow.\r\n\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Linux (three versions tested, 3.2.x, 4.17.8 and 4.18.10)\r\n* Python: Version 2.7.3 and 3.7.2rc1\r\n* Pillow: PIL version 1.1.7 and Pillow version 5.3.0 and 5.4.0\r\n\r\nThe test program below also provides test modes that disable the getpalette/putpalette calls at the heart of the palette replacement process. These calls turned out to be a red herring, but are included here for completeness.\r\n\r\n```python\r\nimport os\r\nfrom PIL import Image\r\nimport sys\r\n\r\nTestModes = {0: 'No failure: getpalette/putpalette AND unlink',\r\n             1: 'No failure: No getpalette/putpalette BUT unlink',\r\n             2: 'Failure: No unlink BUT getpalette/putpalette',\r\n             3: 'Failure: No getpalette/putpalette AND no unlink'}\r\n\r\nif len(sys.argv) < 3:\r\n    print(\"Syntax: python replanepal.py <image file> <palette file> [<test mode>]\")\r\n    sys.exit(0)\r\n\r\nFAIL = int(sys.argv[3]) if len(sys.argv) > 3 else 0\r\n\r\nprint(\"Running test with test mode: %s\" % TestModes[FAIL])\r\n\r\nimg = Image.open(sys.argv[1])\r\nmainpal = Image.open(sys.argv[2])\r\n\r\nif FAIL in [0, 2]:\r\n    palval = mainpal.getpalette()\r\n    img.putpalette(palval)\r\n\r\nif FAIL in [0, 1]:\r\n    os.unlink(sys.argv[1])\r\n\r\nimg.save(sys.argv[1])\r\nprint(\"Apparently, all went well!\")\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3417", "id": 371802952, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI0MTY3ODgz", "number": 3417, "title": "Only ask for YCbCr->RGB libtiff conversion for jpeg-compressed tiffs", "user": {"login": "kkopachev", "id": 2279051, "node_id": "MDQ6VXNlcjIyNzkwNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2279051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkopachev", "html_url": "https://github.com/kkopachev", "followers_url": "https://api.github.com/users/kkopachev/followers", "following_url": "https://api.github.com/users/kkopachev/following{/other_user}", "gists_url": "https://api.github.com/users/kkopachev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkopachev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkopachev/subscriptions", "organizations_url": "https://api.github.com/users/kkopachev/orgs", "repos_url": "https://api.github.com/users/kkopachev/repos", "events_url": "https://api.github.com/users/kkopachev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkopachev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-19T04:28:39Z", "updated_at": "2018-11-13T20:23:43Z", "closed_at": "2018-10-19T18:58:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3417", "html_url": "https://github.com/python-pillow/Pillow/pull/3417", "diff_url": "https://github.com/python-pillow/Pillow/pull/3417.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3417.patch", "merged_at": "2018-10-19T18:58:39Z"}, "body": "JPEG-related tiff pseudo-tags are registered only when tiff image has jpeg compression. Trying to set TIFFTAG_JPEGCOLORMODE on non jpeg-compressed file prints error \"Unknown pseudo-tag 65538\".\r\n\r\nFixes #3413 .\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Only set `TIFFTAG_JPEGCOLORMODE` pseudo-tag for jpeg-compressed TIFF images.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3417/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3413", "id": 371314106, "node_id": "MDU6SXNzdWUzNzEzMTQxMDY=", "number": 3413, "title": "Unknown pseudo-tag 65538", "user": {"login": "v-python", "id": 3078240, "node_id": "MDQ6VXNlcjMwNzgyNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/3078240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/v-python", "html_url": "https://github.com/v-python", "followers_url": "https://api.github.com/users/v-python/followers", "following_url": "https://api.github.com/users/v-python/following{/other_user}", "gists_url": "https://api.github.com/users/v-python/gists{/gist_id}", "starred_url": "https://api.github.com/users/v-python/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/v-python/subscriptions", "organizations_url": "https://api.github.com/users/v-python/orgs", "repos_url": "https://api.github.com/users/v-python/repos", "events_url": "https://api.github.com/users/v-python/events{/privacy}", "received_events_url": "https://api.github.com/users/v-python/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-10-18T00:16:50Z", "updated_at": "2018-12-12T00:40:11Z", "closed_at": "2018-10-19T18:58:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nPut program and file below in same directory. Ran program.\r\n\r\n### What did you expect to happen?\r\n\r\nGet two copies of the file, each a little bigger.\r\n\r\n### What actually happened?\r\n\r\nWell, it worked, but it produced the following error:\r\n```\r\nTIFFSetField: tempfile.tif: Unknown pseudo-tag 65538.\r\n```\r\n\r\nSince the original image is .png, it would seem that Pillow introduced the unknown pseudo-tag, and then complained about it.\r\n\r\nThe tag seems to be a deprecated tag for some form of JPEG compression inside TIFF, but I specified, explicitly, ZIP compression ('tiff-deflate'), so the unknown/deprecated tag is a surprise.\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: windows 10\r\n* Python: 3.6\r\n* Pillow: 5.3\r\n\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```python\r\nfrom PIL import Image, ImageOps\r\ndef foo():\r\n\r\n    im = Image.open('testovauto.png')\r\n    im = ImageOps.expand( im, 44, 0xffffff )\r\n    im.save('testout.tif', dpi=(300.0, 300.0), compression='tiff_deflate')\r\n    print('hi there')\r\n    im = Image.open('testout.tif')\r\n    im = ImageOps.expand( im, 44, 0xffffff )\r\n    im.save('testout2.tif', dpi=(300.0, 300.0), compression='tiff_deflate')\r\n    print('hi there')\r\n    im = Image.open('testout2.tif')\r\n    im = ImageOps.expand( im, 44, 0xffffff )\r\n    im.save('testout3.tif', dpi=(300.0, 300.0), compression='tiff_deflate')\r\n\r\n\r\nfoo()\r\n```\r\n\r\ntestovauto.png: https://user-images.githubusercontent.com/3078240/47123380-e447b280-d22f-11e8-97a4-6c18ed22045d.png\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3413/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3403", "id": 368816138, "node_id": "MDU6SXNzdWUzNjg4MTYxMzg=", "number": 3403, "title": "Specific ICO file being shifted vertically", "user": {"login": "Deimos", "id": 9033, "node_id": "MDQ6VXNlcjkwMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/9033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Deimos", "html_url": "https://github.com/Deimos", "followers_url": "https://api.github.com/users/Deimos/followers", "following_url": "https://api.github.com/users/Deimos/following{/other_user}", "gists_url": "https://api.github.com/users/Deimos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Deimos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Deimos/subscriptions", "organizations_url": "https://api.github.com/users/Deimos/orgs", "repos_url": "https://api.github.com/users/Deimos/repos", "events_url": "https://api.github.com/users/Deimos/events{/privacy}", "received_events_url": "https://api.github.com/users/Deimos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-10T19:24:40Z", "updated_at": "2021-09-05T11:30:10Z", "closed_at": "2021-09-05T11:30:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nDownloaded this ICO file and used PIL to resave as a PNG: https://lauren.vortex.com/favicon.ico\r\n\r\n### What did you expect to happen?\r\n\r\nPNG result should look the same as the icon does in the browser (and other applications) - an L with a black square around it.\r\n\r\n### What actually happened?\r\n\r\nPNG result seems to have been shifted vertically, with the top part of the image lost: \r\n![vortex](https://user-images.githubusercontent.com/9033/46760528-847d6480-cc8f-11e8-8cc2-51da680bfa29.png)\r\n\r\n### What are your OS, Python and Pillow versions?\r\n\r\n* OS: Ubuntu 16.04\r\n* Python: 3.6.5\r\n* Pillow: 5.2.0\r\n\r\n### Code to reproduce\r\n\r\n```python\r\nfrom PIL import Image\r\ni = Image.open(\"favicon.ico\")  # downloaded from https://lauren.vortex.com/favicon.ico\r\ni.ico.getimage((16, 16)).save(\"vortex.png\")\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362/events", "html_url": "https://github.com/python-pillow/Pillow/pull/3362", "id": 361243870, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE2MjYyNTc5", "number": 3362, "title": "Docs: 'btt' (bottom to top) is not supported by libraqm", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-18T10:44:34Z", "updated_at": "2018-09-19T10:02:07Z", "closed_at": "2018-09-19T10:00:13Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/3362", "html_url": "https://github.com/python-pillow/Pillow/pull/3362", "diff_url": "https://github.com/python-pillow/Pillow/pull/3362.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/3362.patch", "merged_at": "2018-09-19T10:00:13Z"}, "body": "Found in https://github.com/python-pillow/Pillow/issues/3125#issuecomment-422330767.\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Raqm doesn't support `btt`\r\n * https://github.com/HOST-Oman/libraqm/search?q=btt&unscoped_q=btt\r\n * https://github.com/HOST-Oman/libraqm/search?q=btt&unscoped_q=ttb\r\n * Update our docs\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3362/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3357", "id": 360596256, "node_id": "MDU6SXNzdWUzNjA1OTYyNTY=", "number": 3357, "title": "How to save a gif with transparency without ruining all of it?", "user": {"login": "jamuwu", "id": 14200370, "node_id": "MDQ6VXNlcjE0MjAwMzcw", "avatar_url": "https://avatars.githubusercontent.com/u/14200370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamuwu", "html_url": "https://github.com/jamuwu", "followers_url": "https://api.github.com/users/jamuwu/followers", "following_url": "https://api.github.com/users/jamuwu/following{/other_user}", "gists_url": "https://api.github.com/users/jamuwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamuwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamuwu/subscriptions", "organizations_url": "https://api.github.com/users/jamuwu/orgs", "repos_url": "https://api.github.com/users/jamuwu/repos", "events_url": "https://api.github.com/users/jamuwu/events{/privacy}", "received_events_url": "https://api.github.com/users/jamuwu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-16T03:02:10Z", "updated_at": "2019-04-10T19:37:00Z", "closed_at": "2019-04-10T03:11:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nTried to save a transparent gif\r\n### What did you expect to happen?\r\nI expected the gif to maintain transparency without issue\r\n### What actually happened?\r\nIt did not maintain transparency without issue\r\n### What versions of Pillow and Python are you using?\r\nUsing Python 3.7 with pillow 5.2.0\r\n\r\n```python\r\ndef makegif(path, images):\r\n    images[0].save(\r\n        path,\r\n        save_all=True,\r\n        append_images=images[1:],\r\n        duration=16,\r\n        transparency=0,\r\n        disposal=3)\r\n```\r\nThis example doesn't have transparency, but I need to support transparency for rounded corners.\r\nWhen saving without the transparency and disposal kwargs:\r\n![test2](https://user-images.githubusercontent.com/14200370/45592413-a73f8600-b93a-11e8-8033-d5a3656e8449.gif)\r\n\r\nWhen saving without the disposal kwarg:\r\n![test3](https://user-images.githubusercontent.com/14200370/45592414-b292b180-b93a-11e8-8f37-567fe3ebf9a5.gif)\r\n\r\nEventually someone told me disposal=3 was what I wanted, but this is what that produces:\r\n![test](https://user-images.githubusercontent.com/14200370/45592402-fc2ecc80-b939-11e8-8a7a-553baee154f1.gif)\r\n\r\nI tried to google a solution, but couldn't find anything similar to this? I probably suck at googling, but here I am anyways.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3357/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3351", "id": 360045665, "node_id": "MDU6SXNzdWUzNjAwNDU2NjU=", "number": 3351, "title": "Converting MCIDAS to PDF results in empty file", "user": {"login": "OskarPersson", "id": 935414, "node_id": "MDQ6VXNlcjkzNTQxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/935414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OskarPersson", "html_url": "https://github.com/OskarPersson", "followers_url": "https://api.github.com/users/OskarPersson/followers", "following_url": "https://api.github.com/users/OskarPersson/following{/other_user}", "gists_url": "https://api.github.com/users/OskarPersson/gists{/gist_id}", "starred_url": "https://api.github.com/users/OskarPersson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OskarPersson/subscriptions", "organizations_url": "https://api.github.com/users/OskarPersson/orgs", "repos_url": "https://api.github.com/users/OskarPersson/repos", "events_url": "https://api.github.com/users/OskarPersson/events{/privacy}", "received_events_url": "https://api.github.com/users/OskarPersson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357118060, "node_id": "MDU6TGFiZWwxMzU3MTE4MDYw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Conversion", "name": "Conversion", "color": "e99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-09-13T20:03:50Z", "updated_at": "2023-04-23T06:08:56Z", "closed_at": "2023-04-23T06:08:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nConverted MCIDAS .ara-file to PDF\r\n\r\n### What did you expect to happen?\r\nA PDF would be created with content similar to the source\r\n\r\n### What actually happened?\r\nAn empty PDF was created\r\n\r\n### What versions of Pillow and Python are you using?\r\nPillow 5.2.0 and Python 2.7.15\r\n\r\n[The tested file](https://github.com/python-pillow/Pillow/blob/9626e49c0bf571d83a99b08709ef4e0c8dc01e03/Tests/images/cmx3g8_wv_1998.260_0745_mcidas.ara)\r\n\r\n```python\r\nara = Image.open(\"Tests/images/cmx3g8_wv_1998.260_0745_mcidas.ara\")\r\nrgb_ara = ara.convert('RGB')\r\nrgb_ara.save('output.pdf')\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3340", "id": 358234458, "node_id": "MDU6SXNzdWUzNTgyMzQ0NTg=", "number": 3340, "title": "WebPImagePlugin.py - ResourceWarning: unclosed file", "user": {"login": "pajadam", "id": 15057129, "node_id": "MDQ6VXNlcjE1MDU3MTI5", "avatar_url": "https://avatars.githubusercontent.com/u/15057129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pajadam", "html_url": "https://github.com/pajadam", "followers_url": "https://api.github.com/users/pajadam/followers", "following_url": "https://api.github.com/users/pajadam/following{/other_user}", "gists_url": "https://api.github.com/users/pajadam/gists{/gist_id}", "starred_url": "https://api.github.com/users/pajadam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pajadam/subscriptions", "organizations_url": "https://api.github.com/users/pajadam/orgs", "repos_url": "https://api.github.com/users/pajadam/repos", "events_url": "https://api.github.com/users/pajadam/events{/privacy}", "received_events_url": "https://api.github.com/users/pajadam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/34", "html_url": "https://github.com/python-pillow/Pillow/milestone/34", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/34/labels", "id": 3753873, "node_id": "MDk6TWlsZXN0b25lMzc1Mzg3Mw==", "number": 34, "title": "5.4.0", "description": "", "creator": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2018-10-20T12:08:30Z", "updated_at": "2019-01-05T04:02:48Z", "due_on": "2019-01-01T08:00:00Z", "closed_at": "2019-01-05T04:02:48Z"}, "comments": 3, "created_at": "2018-09-07T22:50:27Z", "updated_at": "2018-10-31T07:16:54Z", "closed_at": "2018-10-31T07:16:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n```console\r\n> python -Wd\r\nPython 3.7.0 (default, Jul 15 2018, 10:44:58)\r\n[GCC 8.1.1 20180531] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from PIL import Image\r\n>>> with Image.open('tshirt.webp') as img:\r\n...     img.save('tshirt.png', 'PNG')\r\n...\r\n/home/pajadam/.venv/hype/lib/python3.7/site-packages/PIL/WebPImagePlugin.py:156: ResourceWarning: unclosed file <_io.BufferedReader name='tshirt.webp'>\r\n  self.fp = BytesIO(data)\r\n>>>\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nNo warnings, especially while using context manager. \r\n\r\n### What actually happened?\r\n\r\nFollowing warning occurs:\r\n\r\n```\r\n/home/pajadam/.venv/hype/lib/python3.7/site-packages/PIL/WebPImagePlugin.py:156: ResourceWarning: unclosed file <_io.BufferedReader name='tshirt.webp'>\r\n  self.fp = BytesIO(data)\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\n- `Pillow==5.2`\r\n- `Python 3.7`\r\n\r\nMinimal example:\r\n```python\r\nfrom PIL import Image\r\n\r\nwith Image.open('tshirt.webp') as img:\r\n     img.save('tshirt.png', 'PNG')\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3331", "id": 357013078, "node_id": "MDU6SXNzdWUzNTcwMTMwNzg=", "number": 3331, "title": "Autocontrast cutoff behaves unexpectedly", "user": {"login": "jnweiger", "id": 1108546, "node_id": "MDQ6VXNlcjExMDg1NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1108546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnweiger", "html_url": "https://github.com/jnweiger", "followers_url": "https://api.github.com/users/jnweiger/followers", "following_url": "https://api.github.com/users/jnweiger/following{/other_user}", "gists_url": "https://api.github.com/users/jnweiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnweiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnweiger/subscriptions", "organizations_url": "https://api.github.com/users/jnweiger/orgs", "repos_url": "https://api.github.com/users/jnweiger/repos", "events_url": "https://api.github.com/users/jnweiger/events{/privacy}", "received_events_url": "https://api.github.com/users/jnweiger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-04T23:34:38Z", "updated_at": "2022-10-03T23:52:57Z", "closed_at": "2022-10-03T23:52:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\npython-3.6 with Pillow-5.2.0\r\n![leaf-gr](https://user-images.githubusercontent.com/1108546/45062236-50b78980-b0a8-11e8-8ffe-63d449e80e05.jpg)\r\nDownload this image as leaf-gr.jpg then start python and do\r\n```python\r\nfrom PIL import Image, ImageOps\r\nim = Image.open('leaf-gr.jpg')\r\nImageOps.autocontrast(im, cutoff=2).show()\r\n```\r\n![grafik](https://user-images.githubusercontent.com/1108546/45062365-da675700-b0a8-11e8-8b13-4bda846d4edd.png)\r\n\r\n### What did you expect to happen?\r\nThe background is two light gray values. I expect both to become brighter.\r\nThe foreground is darker gray values, I expect these to touch black.\r\n\r\nHistogram stretching until the outermost gray values hit 0 and 255 respectively.\r\nThen some more linear stretching so that the outermost gray values would go 2 percent beyond, ca -5 and 260, then clip everything back to be within 0..255 \r\n\r\n### What actually happened?\r\nThe background is half black 0x000000 and half white 0xffffff. That is unexpected. \r\nThe darker gray of the background is in any case more than 2% percent brighter than the darkest point of the foreground. (Or we must be measuring very non-inear)\r\n\r\n### What versions of Pillow and Python are you using?\r\npython-3.6 with Pillow-5.2.0", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3315", "id": 353446498, "node_id": "MDU6SXNzdWUzNTM0NDY0OTg=", "number": 3315, "title": "TypeError: object of type 'NoneType' has no len()", "user": {"login": "tytarenko", "id": 9821654, "node_id": "MDQ6VXNlcjk4MjE2NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9821654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tytarenko", "html_url": "https://github.com/tytarenko", "followers_url": "https://api.github.com/users/tytarenko/followers", "following_url": "https://api.github.com/users/tytarenko/following{/other_user}", "gists_url": "https://api.github.com/users/tytarenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tytarenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tytarenko/subscriptions", "organizations_url": "https://api.github.com/users/tytarenko/orgs", "repos_url": "https://api.github.com/users/tytarenko/repos", "events_url": "https://api.github.com/users/tytarenko/events{/privacy}", "received_events_url": "https://api.github.com/users/tytarenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-23T15:55:35Z", "updated_at": "2018-09-29T16:41:04Z", "closed_at": "2018-09-29T16:41:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "### TypeError: object of type 'NoneType' has no len()\r\n\r\nThis image has a value \"comment\" is None. It raises that error.  \r\n\r\nThis is my PR \r\nhttps://github.com/python-pillow/Pillow/pull/3314\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/master/src/PIL/GifImagePlugin.py#L527\r\n```python\r\n>    if \"comment\" in im.encoderinfo and 1 <= len(im.encoderinfo[\"comment\"]) <= 255:\r\nE                  TypeError: object of type 'NoneType' has no len()\r\n\r\n```\r\n\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/master/src/PIL/GifImagePlugin.py#L697\r\n\r\n```python\r\n    def _get_global_header(im, info):\r\n        \"\"\"Return a list of strings representing a GIF header\"\"\"\r\n    \r\n        # Header Block\r\n        # http://www.matthewflickinger.com/lab/whatsinagif/bits_and_bytes.asp\r\n    \r\n        version = b\"87a\"\r\n        for extensionKey in [\"transparency\", \"duration\", \"loop\", \"comment\"]:\r\n            if info and extensionKey in info:\r\n                if ((extensionKey == \"duration\" and info[extensionKey] == 0) or\r\n>                  (extensionKey == \"comment\" and not (1 <= len(info[extensionKey]) <= 255))):\r\nE                  TypeError: object of type 'NoneType' has no len()\r\n```\r\n\r\n\r\n```python\r\n{'background': 160,\r\n 'comment': None,\r\n 'duration': 500,\r\n 'optimize': True,\r\n 'version': b'GIF89a'}\r\n```\r\n\r\nThis code is reproducing that issue\r\n```python\r\nfrom PIL import Image\r\nfrom io import BytesIO\r\n\r\nfilename = 'test.gif'\r\n\r\n\r\nwith open(filename, \"rb\") as fp:\r\n\r\n    img = Image.open(fp)\r\n    file_obj = BytesIO()\r\n\r\n    print(img.info)\r\n\r\n    getattr(img, \"is_animated\", False)\r\n\r\n    print(img.info)\r\n\r\n    img.save(file_obj, format=\"GIF\")\r\n```\r\n![test2](https://user-images.githubusercontent.com/9821654/44784628-f9408780-ab96-11e8-9e9b-038467b6058a.gif)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3315/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3312", "id": 353438329, "node_id": "MDU6SXNzdWUzNTM0MzgzMjk=", "number": 3312, "title": "Values passed to bomb_decompression_check in _crop are not correct", "user": {"login": "dinkolubina", "id": 8204760, "node_id": "MDQ6VXNlcjgyMDQ3NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/8204760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dinkolubina", "html_url": "https://github.com/dinkolubina", "followers_url": "https://api.github.com/users/dinkolubina/followers", "following_url": "https://api.github.com/users/dinkolubina/following{/other_user}", "gists_url": "https://api.github.com/users/dinkolubina/gists{/gist_id}", "starred_url": "https://api.github.com/users/dinkolubina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dinkolubina/subscriptions", "organizations_url": "https://api.github.com/users/dinkolubina/orgs", "repos_url": "https://api.github.com/users/dinkolubina/repos", "events_url": "https://api.github.com/users/dinkolubina/events{/privacy}", "received_events_url": "https://api.github.com/users/dinkolubina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-23T15:35:34Z", "updated_at": "2018-09-29T01:20:03Z", "closed_at": "2018-09-29T01:20:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n```\r\nim = Image.new(\"RGB\", (100, 100))\r\nim.crop((-9990, -9990, 9999, 9999))\r\n```\r\n\r\n### What did you expect to happen?\r\na crop to be performed\r\n\r\n### What actually happened?\r\n```\r\n>>> i.crop((-9990, -9990, 9999, 9999))\r\n/home/dinko/anaconda3/envs/klarnai/lib/python3.6/site-packages/PIL/Image.py:2546: DecompressionBombWarning: Image size (99980001 pixels) exceeds limit of 89478485 pixels, could be decompression bomb DOS attack.\r\n  DecompressionBombWarning)\r\n<PIL.Image.Image image mode=RGB size=19989x19989 at 0x7F7E00163D68>\r\n```\r\n\r\n_bomb_decompression_check checks if the size of the image is larger than a certain value.\r\nIn Image._crop which is called from Image.crop x1 and y1 are passed to check the size of the crop.\r\nabs(x1 - x0) and abs(y1-y0) should be passed instead, since that represents the size of the crop not just x1 and y1.\r\n\r\n### What versions of Pillow and Python are you using?\r\npython 3.6.5\r\n\r\n\r\n\r\nThe issue is easily reproducible if you pass values that go over the MAX_IMAGE_PIXELS, we tried to cut something that had a minus, although the cropped rectangle area is under the MAX_IMAGE_PIXELS, we saw that only x1 and y1 were passed, which represent the lower right location, but not the actual width and height\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3258", "id": 342032548, "node_id": "MDU6SXNzdWUzNDIwMzI1NDg=", "number": 3258, "title": "rgb2cmyk always sets K component to 0", "user": {"login": "czerwinskilukasz1", "id": 12752520, "node_id": "MDQ6VXNlcjEyNzUyNTIw", "avatar_url": "https://avatars.githubusercontent.com/u/12752520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/czerwinskilukasz1", "html_url": "https://github.com/czerwinskilukasz1", "followers_url": "https://api.github.com/users/czerwinskilukasz1/followers", "following_url": "https://api.github.com/users/czerwinskilukasz1/following{/other_user}", "gists_url": "https://api.github.com/users/czerwinskilukasz1/gists{/gist_id}", "starred_url": "https://api.github.com/users/czerwinskilukasz1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/czerwinskilukasz1/subscriptions", "organizations_url": "https://api.github.com/users/czerwinskilukasz1/orgs", "repos_url": "https://api.github.com/users/czerwinskilukasz1/repos", "events_url": "https://api.github.com/users/czerwinskilukasz1/events{/privacy}", "received_events_url": "https://api.github.com/users/czerwinskilukasz1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-17T18:25:53Z", "updated_at": "2019-10-11T23:21:19Z", "closed_at": "2019-10-11T23:21:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "As can be seen at: https://github.com/python-pillow/Pillow/blob/ad36932ebbfa4f3a02a56fc15bf5079ede0abe7c/src/libImaging/Convert.c#L529\r\nK component is always set to zero. \r\nWhile this results in a \"correct\" 4-dimensional result, this is not how the components should be computed, instead it should be:\r\nR' = R/255\r\nG' = G/255\r\nB' = B/255\r\n\r\nK = 255 * (1-max(R', G', B'))\r\nC = 255 * ((1-R'-K) / (1-K))\r\nM = 255 * ((1-G'-K) / (1-K))\r\nY = 255 * ((1-B'-K) / (1-K))\r\n(based on https://www.rapidtables.com/convert/color/rgb-to-cmyk.html )\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3231", "id": 338270357, "node_id": "MDU6SXNzdWUzMzgyNzAzNTc=", "number": 3231, "title": "Pillow cannot be loaded in python optimize (2) mode", "user": {"login": "Menollo", "id": 642692, "node_id": "MDQ6VXNlcjY0MjY5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/642692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Menollo", "html_url": "https://github.com/Menollo", "followers_url": "https://api.github.com/users/Menollo/followers", "following_url": "https://api.github.com/users/Menollo/following{/other_user}", "gists_url": "https://api.github.com/users/Menollo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Menollo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Menollo/subscriptions", "organizations_url": "https://api.github.com/users/Menollo/orgs", "repos_url": "https://api.github.com/users/Menollo/repos", "events_url": "https://api.github.com/users/Menollo/events{/privacy}", "received_events_url": "https://api.github.com/users/Menollo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-07-04T13:11:10Z", "updated_at": "2018-10-01T09:37:28Z", "closed_at": "2018-09-05T16:57:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI was loading the PIL module with 'import PIL' when running Python with PYTHONOPTIMZE=2 (or python -OO).\r\n\r\n### What did you expect to happen?\r\nI Expected the PIL/Pillow Library to be imported.\r\n\r\n### What actually happened?\r\nI received an exception:\r\nAttributeError: 'NoneType' object has no attribute 'format'\r\n\r\n### What versions of Pillow and Python are you using?\r\nPillow 5.2.0 / Python 3.6.5\r\n\r\n### Reason:\r\n\r\nPYTHONOPTIMIZE=2 / python -OO strips the _ _ doc _ _ variable.\r\n\r\n## Example:\r\n\r\ncreate a file called test.py with only import PIL\r\n\r\n```python\r\nimport PIL\r\n```\r\n\r\nExecute it with python in optimize mode\r\n```sh\r\npython -OO test.py\r\n```\r\nYou will receive the following exception:\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 1, in <module>\r\n    import PIL\r\n  File \"/usr/lib/python3.6/site-packages/PIL/__init__.py\", line 27, in <module>\r\n    __doc__ = __doc__.format(__version__)  # include version in docstring\r\nAttributeError: 'NoneType' object has no attribute 'format'\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3195", "id": 334331845, "node_id": "MDU6SXNzdWUzMzQzMzE4NDU=", "number": 3195, "title": "module 'PIL._imaging' has no attribute 'tiff_lzw_decoder'", "user": {"login": "YubinXie", "id": 16257776, "node_id": "MDQ6VXNlcjE2MjU3Nzc2", "avatar_url": "https://avatars.githubusercontent.com/u/16257776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YubinXie", "html_url": "https://github.com/YubinXie", "followers_url": "https://api.github.com/users/YubinXie/followers", "following_url": "https://api.github.com/users/YubinXie/following{/other_user}", "gists_url": "https://api.github.com/users/YubinXie/gists{/gist_id}", "starred_url": "https://api.github.com/users/YubinXie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YubinXie/subscriptions", "organizations_url": "https://api.github.com/users/YubinXie/orgs", "repos_url": "https://api.github.com/users/YubinXie/repos", "events_url": "https://api.github.com/users/YubinXie/events{/privacy}", "received_events_url": "https://api.github.com/users/YubinXie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-06-21T04:16:43Z", "updated_at": "2019-06-15T13:59:33Z", "closed_at": "2018-09-29T16:46:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI tried to use PIL to open tiled TIFF image, compressed in tiff lzw format. Then I got the error:\r\n`module 'PIL._imaging' has no attribute 'tiff_lzw_decoder'`\r\n\r\nI did not find any helpful information yet.\r\n### What versions of Pillow and Python are you using?\r\nPython 3.6 (and 2.7), PILLOW 5.1.0\r\n\r\n\r\n### Code:\r\n\r\n```python\r\nimport PIL\r\nfrom PIL import Image, TiffImagePlugin\r\nTiffImagePlugin.READ_LIBTIFF=True\r\ndir(PIL._imaging)\r\n[\u2018DEFAULT_STRATEGY\u2019, \u2018FILTERED\u2019, \u2018FIXED\u2019, \u2018HUFFMAN_ONLY\u2019,\r\n \u2018PILLOW_VERSION\u2019, \u2018RLE\u2019, \u2018__doc__\u2018, \u2018__file__\u2018, \u2018__loader__\u2018, \u2018__name__\u2018, \u2018__package__\u2018, \u2018__spec__\u2018, \r\n\u2018alpha_composite\u2019, \u2018bcn_decoder\u2019, \u2018bit_decoder\u2019, \u2018blend\u2019, \u2018convert\u2019, \u2018copy\u2019, \u2018crc32\u2019, \u2018draw\u2019, \r\n\u2018effect_mandelbrot\u2019, \u2018effect_noise\u2019, \u2018eps_encoder\u2019, \u2018fill\u2019, \u2018fli_decoder\u2019, \u2018font\u2019, \u2018getcodecstatus\u2019, \r\n\u2018getcount\u2019, \u2018gif_decoder\u2019, \u2018gif_encoder\u2019, \u2018hex_decoder\u2019, \u2018hex_encoder\u2019, \u2018jpeg_decoder\u2019, \r\n\u2018jpeg_encoder\u2019, \u2018jpeglib_version\u2019, \u2018libtiff_decoder\u2019, \u2018libtiff_encoder\u2019, \u2018linear_gradient\u2019, \u2018map_buffer\u2019, \r\n\u2018new\u2019, \u2018outline\u2019, \u2018packbits_decoder\u2019, \u2018path\u2019, \u2018pcd_decoder\u2019, \u2018pcx_decoder\u2019, \u2018pcx_encoder\u2019, \r\n\u2018radial_gradient\u2019, \u2018raw_decoder\u2019, \u2018raw_encoder\u2019, \u2018sun_rle_decoder\u2019, \u2018tga_rle_decoder\u2019, \r\n\u2018tiff_lzw_decoder\u2019, \u2018wedge\u2019, \u2018xbm_decoder\u2019, \u2018xbm_encoder\u2019, \u2018zip_decoder\u2019, \u2018zip_encoder\u2019, \r\n\u2018zlib_version\u2019]\r\n```\r\n\r\n### Update:\r\nOnly when I down-grade to Pillow 4.2.1, `tiff_lzw_decoder` appears in my dir(PIL._imaging)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3191", "id": 333171200, "node_id": "MDU6SXNzdWUzMzMxNzEyMDA=", "number": 3191, "title": "Devanagari font not rendered correctly", "user": {"login": "shubhampateliitm", "id": 8062446, "node_id": "MDQ6VXNlcjgwNjI0NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/8062446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubhampateliitm", "html_url": "https://github.com/shubhampateliitm", "followers_url": "https://api.github.com/users/shubhampateliitm/followers", "following_url": "https://api.github.com/users/shubhampateliitm/following{/other_user}", "gists_url": "https://api.github.com/users/shubhampateliitm/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubhampateliitm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubhampateliitm/subscriptions", "organizations_url": "https://api.github.com/users/shubhampateliitm/orgs", "repos_url": "https://api.github.com/users/shubhampateliitm/repos", "events_url": "https://api.github.com/users/shubhampateliitm/events{/privacy}", "received_events_url": "https://api.github.com/users/shubhampateliitm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 638190364, "node_id": "MDU6TGFiZWw2MzgxOTAzNjQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Font%20Rendering", "name": "Font Rendering", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2018-06-18T08:12:09Z", "updated_at": "2022-02-10T21:43:57Z", "closed_at": "2022-02-10T21:43:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI am trying to print Devanagari text on the image. The text is printing on the image. But, it is not appearing the way it supposed to be. Devanagari is not like ordinary language script. In UTF-8 standard some particular characters when appear together show different character(The new character that formed is not define in UTF-8). Take a look at this doc for reference look this doc : [https://www.unicode.org/versions/Unicode6.0.0/ch09.pdf#G12284](https://www.unicode.org/versions/Unicode6.0.0/ch09.pdf#G12284) and variant shape section of this [https://www.unicode.org/standard/where/](https://www.unicode.org/standard/where/). \r\n\r\nPython Code :\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nimg = Image.new('RGB', (100, 30), color = (73, 109, 137))\r\n\r\nfnt = ImageFont.truetype('NotoSans-Regular.ttf', 15)\r\nd = ImageDraw.Draw(img)\r\nd.text((10,10), \"\u092f\u093e\u0924\u094d\u0930\u093e\", font=fnt, fill=(255, 255, 0))\r\nimg.save('pil_text_font.png')\r\n```\r\nEventually Ubuntu also suffer from the same problem.  \r\n\r\nPlease try to rectify this issue. Since otherwise it will changing whole spelling of words which is not fair to any Devanagari reader(Devanagari is the script for languages such Hindi, Marathi, Nepali). \r\n\r\nYatra shouldn't be like.\r\n![pil_text_font](https://user-images.githubusercontent.com/8062446/41524988-1ec65a5c-72fd-11e8-802b-0e4567396099.png)\r\nIt should be like\r\n![image](https://user-images.githubusercontent.com/8062446/41525037-466b63cc-72fd-11e8-8b68-a4cf8a5e4fc4.png)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3191/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3184", "id": 332499902, "node_id": "MDU6SXNzdWUzMzI0OTk5MDI=", "number": 3184, "title": "\"ResourceWarning: unclosed file\" with raw data (mmap)", "user": {"login": "danpla", "id": 10910745, "node_id": "MDQ6VXNlcjEwOTEwNzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/10910745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danpla", "html_url": "https://github.com/danpla", "followers_url": "https://api.github.com/users/danpla/followers", "following_url": "https://api.github.com/users/danpla/following{/other_user}", "gists_url": "https://api.github.com/users/danpla/gists{/gist_id}", "starred_url": "https://api.github.com/users/danpla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danpla/subscriptions", "organizations_url": "https://api.github.com/users/danpla/orgs", "repos_url": "https://api.github.com/users/danpla/repos", "events_url": "https://api.github.com/users/danpla/events{/privacy}", "received_events_url": "https://api.github.com/users/danpla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-14T17:44:10Z", "updated_at": "2018-07-01T17:59:55Z", "closed_at": "2018-07-01T17:59:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Images containing raw data sometimes give `ResourceWarning: unclosed file` on my Linux machine, because the file opened for `mmap` is not closed.\r\n\r\nhttps://github.com/python-pillow/Pillow/blob/968c2cf3c9c1e82f074a65c8c80d0da222d42eff/src/PIL/ImageFile.py#L177-L179\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3184/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3150", "id": 328108719, "node_id": "MDU6SXNzdWUzMjgxMDg3MTk=", "number": 3150, "title": "Save fails after converting 16-bit RGB to grayscale", "user": {"login": "nelarsen", "id": 2667894, "node_id": "MDQ6VXNlcjI2Njc4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2667894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nelarsen", "html_url": "https://github.com/nelarsen", "followers_url": "https://api.github.com/users/nelarsen/followers", "following_url": "https://api.github.com/users/nelarsen/following{/other_user}", "gists_url": "https://api.github.com/users/nelarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/nelarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nelarsen/subscriptions", "organizations_url": "https://api.github.com/users/nelarsen/orgs", "repos_url": "https://api.github.com/users/nelarsen/repos", "events_url": "https://api.github.com/users/nelarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/nelarsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-31T11:55:54Z", "updated_at": "2018-09-26T12:29:22Z", "closed_at": "2018-09-26T12:29:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nDownloaded test-PNG from \"pngsuite\" (see below), converted to grayscale using the matrix-option, saved the result.\r\n\r\n### What did you expect to happen?\r\nthat the script would succeed like with almost all other PNGs from \"pngsuite\"\r\n\r\n### What actually happened?\r\nSave fails with\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:/base2_nl/py-grayscale/minimalExampleBug.py\", line 5, in <module>\r\n    im.save('tbbn2c16-out.png')\r\n  File \"C:\\Python36\\lib\\site-packages\\PIL\\Image.py\", line 1935, in save\r\n    save_handler(self, fp, filename)\r\n  File \"C:\\Python36\\lib\\site-packages\\PIL\\PngImagePlugin.py\", line 790, in _save\r\n    transparency = max(0, min(65535, transparency))\r\nTypeError: '<' not supported between instances of 'tuple' and 'int'\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\nPillow 5.1.0\r\nPython 3.6.5\r\n\r\n### Minimal example to reproduce the error\r\n```python\r\nfrom PIL import Image\r\n\r\nim = Image.open('tbbn2c16.png') # from here: http://www.schaik.com/pngsuite/tbbn2c16.png\r\nim = im.convert(\"L\",  (0.22, 0.72, 0.06, 0))\r\nim.save('tbbn2c16-out.png') # fails\r\n```\r\n\r\nBTW in this case transparency is a tuple with the following value before the exception:\r\n```python\r\ntransparency  = (65535,65535,65535)\r\n```\r\n\r\nProbably line 790 would have produced the expected result in Python 2.7, but is invalid in Python 3.x when mixing integers and tuple parameters.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3125", "id": 321489668, "node_id": "MDU6SXNzdWUzMjE0ODk2Njg=", "number": 3125, "title": "The parameter direction of ImageDraw.text can't use Chinese sequence", "user": {"login": "xyl576807077", "id": 11332927, "node_id": "MDQ6VXNlcjExMzMyOTI3", "avatar_url": "https://avatars.githubusercontent.com/u/11332927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xyl576807077", "html_url": "https://github.com/xyl576807077", "followers_url": "https://api.github.com/users/xyl576807077/followers", "following_url": "https://api.github.com/users/xyl576807077/following{/other_user}", "gists_url": "https://api.github.com/users/xyl576807077/gists{/gist_id}", "starred_url": "https://api.github.com/users/xyl576807077/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xyl576807077/subscriptions", "organizations_url": "https://api.github.com/users/xyl576807077/orgs", "repos_url": "https://api.github.com/users/xyl576807077/repos", "events_url": "https://api.github.com/users/xyl576807077/events{/privacy}", "received_events_url": "https://api.github.com/users/xyl576807077/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 638190364, "node_id": "MDU6TGFiZWw2MzgxOTAzNjQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Font%20Rendering", "name": "Font Rendering", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2018-05-09T09:07:07Z", "updated_at": "2019-06-23T21:59:45Z", "closed_at": "2019-06-22T10:09:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n1. I try to draw chinese character by following test code\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\nsize = 32\r\nfont = ImageFont.truetype('./font/simsun.ttf', size)\r\nimg = Image.new('RGBA', (size, size), (0, 0, 0, 0))\r\ndraw = ImageDraw.Draw(img)\r\ndraw.text((0, 0), '\u6211\u548c\u4f60',  fill='black', direction='ttb')\r\n```\r\n\r\n2. Futhermore, if I don't use chinese, just english:\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont, features\r\nsize = 32\r\nimg = Image.new('RGBA', (size, size), (255, 255, 255))\r\ndraw = ImageDraw.Draw(img)\r\ndraw.text((0, 0), 'abc', fill='black', direction='rtl')\r\n```\r\n### What did you expect to happen?\r\n1. I want to get the image like that\r\n```\r\n\u6211\r\n\u548c\r\n\u4f60\r\n```\r\n2. I want to get the image\r\n![aa](https://user-images.githubusercontent.com/11332927/39805870-aa08f402-53aa-11e8-9431-cd87621cbdf5.png)\r\n\r\n### What actually happened?\r\n1. The code can't run successfully. The log is\r\n```\r\nTraceback (most recent call last):\r\n  File \"draw_character.py\", line 111, in <module>\r\n    draw.text((0, 0), '\u6211\u548c\u4f60',  font=font, fill='black', direction='ttb')\r\n  File \"/home/xyl/anaconda3/lib/python3.6/site-packages/Pillow-5.0.0-py3.6-linux-x86_64.egg/PIL/ImageDraw.py\", line 220, in text\r\n  File \"/home/xyl/anaconda3/lib/python3.6/site-packages/Pillow-5.0.0-py3.6-linux-x86_64.egg/PIL/ImageFont.py\", line 166, in getmask2\r\nRuntimeError: raqm_layout() failed.\r\n```\r\nThe font file can be downloaded in here:  https://github.com/micmro/Stylify-Me/blob/master/.fonts/SimSun.ttf\r\n2. I get the image like this:\r\n![hehe](https://user-images.githubusercontent.com/11332927/39806044-59c970ce-53ab-11e8-8096-a4cd3362543f.png)\r\n\r\n### What versions of Pillow and Python are you using?\r\n```\r\npython: 3.6.3\r\npillow: 5.0.0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3109", "id": 316501160, "node_id": "MDU6SXNzdWUzMTY1MDExNjA=", "number": 3109, "title": "Mode incorrectly determined on Image.fromarray with bool input dtype", "user": {"login": "akhmerov", "id": 2069677, "node_id": "MDQ6VXNlcjIwNjk2Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/2069677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akhmerov", "html_url": "https://github.com/akhmerov", "followers_url": "https://api.github.com/users/akhmerov/followers", "following_url": "https://api.github.com/users/akhmerov/following{/other_user}", "gists_url": "https://api.github.com/users/akhmerov/gists{/gist_id}", "starred_url": "https://api.github.com/users/akhmerov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akhmerov/subscriptions", "organizations_url": "https://api.github.com/users/akhmerov/orgs", "repos_url": "https://api.github.com/users/akhmerov/repos", "events_url": "https://api.github.com/users/akhmerov/events{/privacy}", "received_events_url": "https://api.github.com/users/akhmerov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-04-21T15:33:52Z", "updated_at": "2020-04-06T18:17:09Z", "closed_at": "2019-04-15T06:55:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI observed that `Image.fromarray` works incorrectly on `bool` array input, likely due to an incorrectly determined mode or rawmode.\r\n\r\n```python\r\nimport PIL\r\nimport numpy as np\r\nprint(np.array(PIL.Image.fromarray(np.eye(5, dtype=bool))))\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nSame as `print(np.eye(5, dtype=bool))`, so:\r\n```\r\n[[ True False False False False]\r\n [False  True False False False]\r\n [False False  True False False]\r\n [False False False  True False]\r\n [False False False False  True]]\r\n```\r\n\r\n### What actually happened?\r\n\r\n```\r\n[[ True False False False False]\r\n [False False False False False]\r\n [False False False False  True]\r\n [False False False  True False]\r\n [False False  True False False]]\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nPillow: 5.1.0\r\npython: '3.6.5 | packaged by conda-forge | (default, Apr  6 2018, 13:39:56) \\n[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)]'\r\nnumpy: 1.14.2\r\n\r\n### Workaround\r\n\r\nUse `Image.fromarray(boolean_array * np.uint(255))`", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3101", "id": 315065063, "node_id": "MDU6SXNzdWUzMTUwNjUwNjM=", "number": 3101, "title": "AttributeError: 'PIL.Image' object has no attribute 'encoderinfo'", "user": {"login": "likeca", "id": 3701669, "node_id": "MDQ6VXNlcjM3MDE2Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/3701669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/likeca", "html_url": "https://github.com/likeca", "followers_url": "https://api.github.com/users/likeca/followers", "following_url": "https://api.github.com/users/likeca/following{/other_user}", "gists_url": "https://api.github.com/users/likeca/gists{/gist_id}", "starred_url": "https://api.github.com/users/likeca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/likeca/subscriptions", "organizations_url": "https://api.github.com/users/likeca/orgs", "repos_url": "https://api.github.com/users/likeca/repos", "events_url": "https://api.github.com/users/likeca/events{/privacy}", "received_events_url": "https://api.github.com/users/likeca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 192476144, "node_id": "MDU6TGFiZWwxOTI0NzYxNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-04-17T13:40:57Z", "updated_at": "2018-08-27T10:22:33Z", "closed_at": "2018-08-27T10:22:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nSave multiple images to PDF use `image.save(save_all=True)`\r\n\r\n### What did you expect to happen?\r\nCombine all images to multiple pages of PDF\r\n\r\n### What actually happened?\r\n```\r\nAttributeError: 'PIL.Image' object has no attribute 'encoderinfo'\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\nPillow: 5.1.0\r\nPython: 3.5.2\r\n\r\nIn Pillow 5.1.0, PdfImagePlugin.py line 88:\r\nThese two lines of code had been removed.\r\n```python\r\n    if append_im.mode != im.mode:\r\n         append_im = append_im.convert(im.mode)\r\n```\r\n\r\nNeed to add that back to Pillow 5.1.0.\r\n```python\r\n    88      for append_im in append_images:\r\n    89 +        if append_im.mode != im.mode:\r\n    90 +            append_im = append_im.convert(im.mode)\r\n    91            append_im.encoderinfo = im.encoderinfo.copy()\r\n```\r\n\r\nAfter adding that back, Save multiple images to PDF use `image.save(save_all=True)` will works as expected.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3101/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3066", "id": 310468080, "node_id": "MDU6SXNzdWUzMTA0NjgwODA=", "number": 3066, "title": "OSError: invalid face handle", "user": {"login": "eroux", "id": 60868, "node_id": "MDQ6VXNlcjYwODY4", "avatar_url": "https://avatars.githubusercontent.com/u/60868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eroux", "html_url": "https://github.com/eroux", "followers_url": "https://api.github.com/users/eroux/followers", "following_url": "https://api.github.com/users/eroux/following{/other_user}", "gists_url": "https://api.github.com/users/eroux/gists{/gist_id}", "starred_url": "https://api.github.com/users/eroux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eroux/subscriptions", "organizations_url": "https://api.github.com/users/eroux/orgs", "repos_url": "https://api.github.com/users/eroux/repos", "events_url": "https://api.github.com/users/eroux/events{/privacy}", "received_events_url": "https://api.github.com/users/eroux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 631332188, "node_id": "MDU6TGFiZWw2MzEzMzIxODg=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Fonts", "name": "Fonts", "color": "bfd4f2", "default": false, "description": null}, {"id": 1357140650, "node_id": "MDU6TGFiZWwxMzU3MTQwNjUw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Platform", "name": "Platform", "color": "5319e7", "default": false, "description": "A catchall for platform-related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 48, "created_at": "2018-04-02T12:02:09Z", "updated_at": "2022-08-15T22:51:20Z", "closed_at": "2021-04-02T18:59:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI ran the following code:\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont, features\r\n\r\nprint(features.check('raqm'))\r\nprint(Image.PILLOW_VERSION)\r\n\r\nimg = Image.new('RGB', (800, 300), color = (73, 109, 137))\r\nd = ImageDraw.Draw(img)\r\nfnt = ImageFont.truetype('NotoSansTibetan-Regular.ttf', 24, layout_engine=ImageFont.LAYOUT_BASIC)\r\nd.text((10, 10), \"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", font=fnt, fill=(255, 255, 0))\r\nimg.save('result.png')\r\nfnt = ImageFont.truetype('NotoSansTibetan-Regular.ttf', 24, layout_engine=ImageFont.LAYOUT_RAQM)\r\nprint(\"things work until...\")\r\nres = fnt.getmask(\"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", features=['ccmp', 'abvs', 'blws', 'calt', 'liga', 'kern', 'abvm', 'blwm', 'mkmk'])\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nNo segfault\r\n\r\n### What actually happened?\r\n\r\nHere's the console output:\r\n\r\n```\r\nTrue\r\n5.0.0\r\nthings work until...\r\nTraceback (most recent call last):\r\n  File \"testmarche.py\", line 13, in <module>\r\n    res = fnt.getmask(\"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", features=['ccmp', 'abvs', 'blws', 'calt', 'liga', 'kern', 'abvm', 'blwm', 'mkmk'])\r\n  File \"/usr/local/lib/python3.5/dist-packages/PIL/ImageFont.py\", line 163, in getmask\r\n    return self.getmask2(text, mode, direction=direction, features=features)[0]\r\n  File \"/usr/local/lib/python3.5/dist-packages/PIL/ImageFont.py\", line 166, in getmask2\r\n    size, offset = self.font.getsize(text, direction, features)\r\nOSError: invalid face handle\r\nErreur de segmentation\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\n- Pillow 5.0.0\r\n- Python 3.5.3\r\n- libraqm is manually installed, branch `master`, commit [`cf6ec2c4a31785c1092e38569225d1d6a294111b`](https://github.com/HOST-Oman/libraqm/commit/cf6ec2c4a31785c1092e38569225d1d6a294111b)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3066/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3054", "id": 308333730, "node_id": "MDU6SXNzdWUzMDgzMzM3MzA=", "number": 3054, "title": "Cannot get PIL.ImageFont.PIL.ImageFont.ImageFont.getmask with libraqm", "user": {"login": "eroux", "id": 60868, "node_id": "MDQ6VXNlcjYwODY4", "avatar_url": "https://avatars.githubusercontent.com/u/60868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eroux", "html_url": "https://github.com/eroux", "followers_url": "https://api.github.com/users/eroux/followers", "following_url": "https://api.github.com/users/eroux/following{/other_user}", "gists_url": "https://api.github.com/users/eroux/gists{/gist_id}", "starred_url": "https://api.github.com/users/eroux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eroux/subscriptions", "organizations_url": "https://api.github.com/users/eroux/orgs", "repos_url": "https://api.github.com/users/eroux/repos", "events_url": "https://api.github.com/users/eroux/events{/privacy}", "received_events_url": "https://api.github.com/users/eroux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-25T09:01:43Z", "updated_at": "2018-04-02T11:58:21Z", "closed_at": "2018-04-02T11:58:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI tried to add some text in an image using OpenType features\r\n\r\n### What did you expect to happen?\r\n\r\nI expected pillow to typeset the text with the asked OpenType features\r\n\r\n### What actually happened?\r\n\r\nAn error in the call to `PIL.ImageFont.PIL.ImageFont.ImageFont.getmask`:\r\n\r\n```txt\r\nKeyError: 'setting text direction or font features is not supported without libraqm'\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nI've just installed the latest Pillow with:\r\n\r\n```\r\n# pip3 install PIllow\r\n```\r\n\r\nI'm under an up-to-date Debian stable. I have the latest version of libraqm. Python is Debian stable's `Python 3.5.3`.\r\n\r\nThe strange thing is that I can use libraqm as a layout engine in other Pillow calls:\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nimg = Image.new('RGB', (800, 300), color = (73, 109, 137))\r\nd = ImageDraw.Draw(img)\r\nfnt = ImageFont.truetype('NotoSansTibetan-Regular.ttf', 24, layout_engine=ImageFont.LAYOUT_RAQM)\r\nd.text((10, 10), \"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", font=fnt, fill=(255, 255, 0))\r\nimg.save('result.png')\r\n```\r\n\r\nworks just fine (and doesn't if I don't have raqm installed), while:\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nfnt = ImageFont.truetype('NotoSansTibetan-Regular.ttf', 24, layout_engine=ImageFont.LAYOUT_RAQM)\r\nres = fnt.getmask(\"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", features=['ccmp', 'abvs', 'blws', 'calt', 'liga', 'kern', 'abvm', 'blwm', 'mkmk'])\r\n```\r\n\r\ngives me:\r\n\r\n```txt\r\nTraceback (most recent call last):\r\n  File \"testmarchepas.py\", line 4, in <module>\r\n    res = fnt.getmask(\"\u0f04\u0f05\u0f0d \u0f0d\u0f66\u0f92\u0fb2\u0f74\u0f56\u0f0d\", features=['ccmp', 'abvs', 'blws', 'calt', 'liga', 'kern', 'abvm', 'blwm', 'mkmk'])\r\n  File \"/usr/local/lib/python3.5/dist-packages/PIL/ImageFont.py\", line 163, in getmask\r\n    return self.getmask2(text, mode, direction=direction, features=features)[0]\r\n  File \"/usr/local/lib/python3.5/dist-packages/PIL/ImageFont.py\", line 166, in getmask2\r\n    size, offset = self.font.getsize(text, direction, features)\r\nKeyError: 'setting text direction or font features is not supported without libraqm'\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3053", "id": 308185855, "node_id": "MDU6SXNzdWUzMDgxODU4NTU=", "number": 3053, "title": "TypeError when trying to save a pyramidal TIFF as JPEG in Pillow 5.0.0", "user": {"login": "alexwlchan", "id": 301220, "node_id": "MDQ6VXNlcjMwMTIyMA==", "avatar_url": "https://avatars.githubusercontent.com/u/301220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexwlchan", "html_url": "https://github.com/alexwlchan", "followers_url": "https://api.github.com/users/alexwlchan/followers", "following_url": "https://api.github.com/users/alexwlchan/following{/other_user}", "gists_url": "https://api.github.com/users/alexwlchan/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexwlchan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexwlchan/subscriptions", "organizations_url": "https://api.github.com/users/alexwlchan/orgs", "repos_url": "https://api.github.com/users/alexwlchan/repos", "events_url": "https://api.github.com/users/alexwlchan/events{/privacy}", "received_events_url": "https://api.github.com/users/alexwlchan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-23T21:35:49Z", "updated_at": "2018-12-22T06:00:32Z", "closed_at": "2018-12-22T06:00:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This was originally discovered in https://github.com/loris-imageserver/loris/issues/415.\r\n\r\n### What did you do?\r\n\r\nCreate a tiled pyramidal TIFF from a JPEG with the following ImageMagick command:\r\n\r\n```console\r\n$ convert --version\r\nVersion: ImageMagick 7.0.7-27 Q16 x86_64 2018-03-18 http://www.imagemagick.org\r\nCopyright: \u00a9 1999-2018 ImageMagick Studio LLC\r\nLicense: http://www.imagemagick.org/script/license.php\r\nFeatures: Cipher DPC HDRI Modules\r\nDelegates (built-in): bzlib freetype jng jpeg ltdl lzma png tiff xml zlib\r\n\r\n$ convert speckle.jpg -define tiff:tile-geometry=256x256 -compress jpeg 'ptif:tiled_pyramidal_speckle.tif'\r\n```\r\n\r\nOpen the file in Pillow and save it as a JPEG:\r\n\r\n```python\r\n#!/usr/bin/env python\r\n# -*- encoding: utf-8 -*-\r\n\r\nfrom PIL import Image\r\n\r\nim = Image.open('tiled_pyramidal_speckle.tif')\r\nim.save('tiled_pyramidal_speckle.jpg')\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nA new JPEG would be created from the pyramidal TIFF, which resembled the original JPEG.\r\n\r\n### What actually happened?\r\n\r\nIn Pillow 4.3.0, the conversion succeeds.\r\n\r\nIn Pillow 5.0.0, I get a TypeError with the following traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"pillow_example.py\", line 7, in <module>\r\n    im.save('tiled_pyramidal_speckle.jpg')\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-4d7f2098295f/lib/python2.7/site-packages/PIL/Image.py\", line 1897, in save\r\n    self.load()\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-4d7f2098295f/lib/python2.7/site-packages/PIL/TiffImagePlugin.py\", line 1040, in load\r\n    return super(TiffImageFile, self).load()\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-4d7f2098295f/lib/python2.7/site-packages/PIL/ImageFile.py\", line 204, in load\r\n    args, self.decoderconfig)\r\n  File \"/Users/alexwlchan/.virtualenvs/tempenv-4d7f2098295f/lib/python2.7/site-packages/PIL/Image.py\", line 435, in _getdecoder\r\n    return decoder(mode, *args + extra)\r\nTypeError: function takes at least 3 arguments (1 given)\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nIn both cases, I\u2019m using Python 3 on macOS in a fresh virtualenv:\r\n\r\n```console\r\n$ python3 --version\r\nPython 3.6.4\r\n```\r\n\r\nWith Pillow 5.0.0:\r\n\r\n```console\r\n$ pip freeze\r\nPillow==5.0.0\r\n```\r\n\r\nAnd with Pillow 4.3.0:\r\n\r\n```console\r\n$ pip freeze\r\nolefile==0.45.1\r\nPillow==4.3.0\r\n```\r\n\r\nI\u2019ve attached a ZIP file to this issue which contains:\r\n\r\n* The original JPEG (speckle.jpg)\r\n* The script for generating the pyramidal TIF (converter.sh) and the TIF itself (tiled_pyramidal_speckle.tif)\r\n* A script that reproduces the Pillow error (pillow_example.py)\r\n* requirements.txt for both versions of Pillow\r\n\r\n[pillow_example.zip](https://github.com/python-pillow/Pillow/files/1843569/pillow_example.zip)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3044", "id": 306030792, "node_id": "MDU6SXNzdWUzMDYwMzA3OTI=", "number": 3044, "title": "ValueError: tile cannot extend outside image", "user": {"login": "fowler0503", "id": 5479737, "node_id": "MDQ6VXNlcjU0Nzk3Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5479737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fowler0503", "html_url": "https://github.com/fowler0503", "followers_url": "https://api.github.com/users/fowler0503/followers", "following_url": "https://api.github.com/users/fowler0503/following{/other_user}", "gists_url": "https://api.github.com/users/fowler0503/gists{/gist_id}", "starred_url": "https://api.github.com/users/fowler0503/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fowler0503/subscriptions", "organizations_url": "https://api.github.com/users/fowler0503/orgs", "repos_url": "https://api.github.com/users/fowler0503/repos", "events_url": "https://api.github.com/users/fowler0503/events{/privacy}", "received_events_url": "https://api.github.com/users/fowler0503/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2018-03-16T18:20:43Z", "updated_at": "2018-09-29T16:46:27Z", "closed_at": "2018-09-29T16:46:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI'm attempting to load a satellite image from Planet.com by running:\r\nimage = Image.open(image_file_name)\r\npix = image.load()\r\nWhen my code attempts to run image.load() I receive the above referenced error\r\n\r\n### What did you expect to happen?\r\nI'm expected the tif image to load to be parsed for vectors\r\n\r\n### What actually happened?\r\nI receive the error: ValueError: tile cannot extend outside image\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 3.6.3 :: Anaconda, Inc\r\nPillow: 1.1.7\r\n\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n[PlanetImage.tif.zip](https://github.com/python-pillow/Pillow/files/1820366/PlanetImage.tif.zip)\r\n[PlanetImage.tif.zip](https://github.com/python-pillow/Pillow/files/1820368/PlanetImage.tif.zip)\r\n\r\n```python\r\n>>> from PIL import Image, ImageDraw\r\n>>> image_file_name=('PlanetImage.tif')\r\n>>> image = Image.open(image_file_name)\r\n>>> pix = image.load()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/jwfowler/anaconda3/envs/ship_classify/lib/python3.6/site-packages/PIL/TiffImagePlugin.py\", line 1053, in load\r\n    return super(TiffImageFile, self).load()\r\n  File \"/Users/jwfowler/anaconda3/envs/ship_classify/lib/python3.6/site-packages/PIL/ImageFile.py\", line 206, in load\r\n    decoder.setimage(self.im, extents)\r\nValueError: tile cannot extend outside image\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3044/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3031", "id": 302695461, "node_id": "MDU6SXNzdWUzMDI2OTU0NjE=", "number": 3031, "title": "Undefined behavior in QuantOctree.c", "user": {"login": "sk-", "id": 911768, "node_id": "MDQ6VXNlcjkxMTc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/911768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sk-", "html_url": "https://github.com/sk-", "followers_url": "https://api.github.com/users/sk-/followers", "following_url": "https://api.github.com/users/sk-/following{/other_user}", "gists_url": "https://api.github.com/users/sk-/gists{/gist_id}", "starred_url": "https://api.github.com/users/sk-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sk-/subscriptions", "organizations_url": "https://api.github.com/users/sk-/orgs", "repos_url": "https://api.github.com/users/sk-/repos", "events_url": "https://api.github.com/users/sk-/events{/privacy}", "received_events_url": "https://api.github.com/users/sk-/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-03-06T13:12:35Z", "updated_at": "2020-06-20T12:57:30Z", "closed_at": "2020-06-20T12:57:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "In `libImaging/QuantOctree.c` the function `ImagingEffectNoise` has an undefined behavior in [line 151](https://github.com/python-pillow/Pillow/blob/master/src/libImaging/QuantOctree.c#L151):\r\n\r\nCount can actually be `0` as in the test `test_file_png.py` and the values need to be clamped to the range `(0, MAX_UCHAR)`.\r\n\r\nThis is detected when running the test `test_file_png.py` and compiling the library with UndefinedBehaviorSanitizer. See https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html to see how to detect this.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3031/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030/events", "html_url": "https://github.com/python-pillow/Pillow/issues/3030", "id": 302694677, "node_id": "MDU6SXNzdWUzMDI2OTQ2Nzc=", "number": 3030, "title": "Undefined behavior in Effects.c", "user": {"login": "sk-", "id": 911768, "node_id": "MDQ6VXNlcjkxMTc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/911768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sk-", "html_url": "https://github.com/sk-", "followers_url": "https://api.github.com/users/sk-/followers", "following_url": "https://api.github.com/users/sk-/following{/other_user}", "gists_url": "https://api.github.com/users/sk-/gists{/gist_id}", "starred_url": "https://api.github.com/users/sk-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sk-/subscriptions", "organizations_url": "https://api.github.com/users/sk-/orgs", "repos_url": "https://api.github.com/users/sk-/repos", "events_url": "https://api.github.com/users/sk-/events{/privacy}", "received_events_url": "https://api.github.com/users/sk-/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-03-06T13:10:13Z", "updated_at": "2018-04-22T06:04:36Z", "closed_at": "2018-04-22T06:04:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "In `libImaging/Effects.c` the function `ImagingEffectNoise` has an undefined behavior in [line 109](https://github.com/python-pillow/Pillow/blob/master/src/libImaging/Effects.c#L109):\r\n\r\n```c\r\nout[x] = (unsigned char) (128 + sigma * this);\r\n```\r\n\r\nThis is detected when running the test `test_image.py` and compiling the library with UndefinedBehaviorSanitizer. See https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html to see how to detect this.\r\n\r\nThis code is easy to fix with something like:\r\n\r\n```c\r\nint d = 128 + sigma * this;\r\nout[x] = d<0? 0: (d > UCHAR_MAX: UCHAR_MAX: d);\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/3030/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2977", "id": 291464803, "node_id": "MDU6SXNzdWUyOTE0NjQ4MDM=", "number": 2977, "title": "Inconsistent behavior opening truncated JPEG file", "user": {"login": "elbaro", "id": 1851290, "node_id": "MDQ6VXNlcjE4NTEyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1851290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elbaro", "html_url": "https://github.com/elbaro", "followers_url": "https://api.github.com/users/elbaro/followers", "following_url": "https://api.github.com/users/elbaro/following{/other_user}", "gists_url": "https://api.github.com/users/elbaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/elbaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elbaro/subscriptions", "organizations_url": "https://api.github.com/users/elbaro/orgs", "repos_url": "https://api.github.com/users/elbaro/repos", "events_url": "https://api.github.com/users/elbaro/events{/privacy}", "received_events_url": "https://api.github.com/users/elbaro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-01-25T06:32:56Z", "updated_at": "2019-09-29T06:14:08Z", "closed_at": "2019-09-29T06:14:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n```python\r\nfrom PIL import Image\r\nimport numpy as np\r\na=Image.open('aa.jpg')\r\nb1=np.array(a)\r\nb2=np.array(a)\r\n```\r\n### What did you expect to happen?\r\n`b1.shape == b2.shape == (H,W,3)`\r\n\r\n### What actually happened?\r\nSurprisingly, `b1.shape == ()` and `b2.shape == (H, W, 3)`.\r\n\r\nb1:\r\n`array(<PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=2000x2000 at 0x7FCD...48>, dtype=object)`\r\n\r\nI have a large RAM available (>50G).\r\nThis is consistently reproduced for a specific image file:\r\nhttps://farm5.staticflickr.com/4360/36444958735_32c0410b64_o.jpg\r\n\r\n\r\n### What versions of Pillow and Python are you using?\r\n5.1.0.dev0 && 4.3.0 (pip version)\r\nPython 3.6.4\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2977/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2955", "id": 288095030, "node_id": "MDU6SXNzdWUyODgwOTUwMzA=", "number": 2955, "title": "Error when loading image", "user": {"login": "matthiasbeyer", "id": 427866, "node_id": "MDQ6VXNlcjQyNzg2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/427866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasbeyer", "html_url": "https://github.com/matthiasbeyer", "followers_url": "https://api.github.com/users/matthiasbeyer/followers", "following_url": "https://api.github.com/users/matthiasbeyer/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasbeyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasbeyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasbeyer/subscriptions", "organizations_url": "https://api.github.com/users/matthiasbeyer/orgs", "repos_url": "https://api.github.com/users/matthiasbeyer/repos", "events_url": "https://api.github.com/users/matthiasbeyer/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasbeyer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 420615141, "node_id": "MDU6TGFiZWw0MjA2MTUxNDE=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Awaiting%20OP%20Action", "name": "Awaiting OP Action", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 17, "created_at": "2018-01-12T11:49:41Z", "updated_at": "2018-12-24T02:53:19Z", "closed_at": "2018-12-24T02:53:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nUsing `sigal` to build a gallery. `sigal` uses Pillow in version 4.3.0, though I build it with 5.0.0 as well and it did not work out (see [full history of my issue there](https://github.com/saimn/sigal/issues/287)).\r\n\r\n### What did you expect to happen?\r\n\r\nNo error...\r\n\r\n### What actually happened?\r\n\r\nSee [here](https://github.com/saimn/sigal/issues/287). For the lazy:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/nix/store/kl0wavrf8a2syn3cfa33hl0b03yyvx80-python-2.7.14-env/lib/python2.7/site-packages/PIL/Image.py\", line 2572, in open\r\n    % (filename if filename else fp))\r\nIOError: cannot identify image file './P1010375.png'\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\n> an **image** that demonstrates the issue. \r\n\r\n![p1010375-small](https://user-images.githubusercontent.com/427866/34873803-d87c55ce-f796-11e7-9202-11a9435c6836.png)\r\n\r\n(Image was resized from ~85MB size)\r\n\r\nThe code below was executed with pillow 4.3.0 - the same error was produced with 5.0.0, though:\r\n\r\n```python\r\n>>> import PIL\r\n>>> from PIL import Image\r\n>>> Image.open('./P1010375.png')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/nix/store/kl0wavrf8a2syn3cfa33hl0b03yyvx80-python-2.7.14-env/lib/python2.7/site-packages/PIL/Image.py\", line 2572, in open\r\n    % (filename if filename else fp))\r\nIOError: cannot identify image file './P1010375.png'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2955/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2944", "id": 287094153, "node_id": "MDU6SXNzdWUyODcwOTQxNTM=", "number": 2944, "title": "Pillow not reading exif data from \"old\" photo", "user": {"login": "paolobenve", "id": 1417508, "node_id": "MDQ6VXNlcjE0MTc1MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1417508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paolobenve", "html_url": "https://github.com/paolobenve", "followers_url": "https://api.github.com/users/paolobenve/followers", "following_url": "https://api.github.com/users/paolobenve/following{/other_user}", "gists_url": "https://api.github.com/users/paolobenve/gists{/gist_id}", "starred_url": "https://api.github.com/users/paolobenve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paolobenve/subscriptions", "organizations_url": "https://api.github.com/users/paolobenve/orgs", "repos_url": "https://api.github.com/users/paolobenve/repos", "events_url": "https://api.github.com/users/paolobenve/events{/privacy}", "received_events_url": "https://api.github.com/users/paolobenve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-01-09T13:47:58Z", "updated_at": "2018-07-01T04:53:18Z", "closed_at": "2018-07-01T04:53:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm on ubuntu xenial, I installed python-pil which gives pillow 3.1.2\r\n\r\nI'm trying to get exif metadata from an image shooted with a Canon PowerShot A80. which is at media_path:\r\n\r\n```python\r\nfrom PIL import Image\r\nfrom PIL.ExifTags import TAGS, GPSTAGS\r\nimage = Image.open(media_path)\r\ninfo = image._getexif()\r\n```\r\nthe code works perfectly with all images but this and other images shooted with the same camera.\r\n\r\nWith this image `_getexif()` returns the empty dictionary.\r\n\r\n`gthumb` and `identify` correctly read exif metadata of this image:\r\n\r\n```bash\r\n$ identify -verbose myimage\r\nImage: Bautismos Ninos Pascua 2007-04-08--15.25.46.JPG\r\n  Format: JPEG (Joint Photographic Experts Group JFIF format)\r\n  Mime type: image/jpeg\r\n  Class: DirectClass\r\n  Geometry: 1704x2272+0+0\r\n  Resolution: 180x180\r\n  Print size: 9.46667x12.6222\r\n  Units: PixelsPerInch\r\n  Type: TrueColor\r\n  Endianess: Undefined\r\n  Colorspace: sRGB\r\n  Depth: 8-bit\r\n  Channel depth:\r\n    red: 8-bit\r\n    green: 8-bit\r\n    blue: 8-bit\r\n  Channel statistics:\r\n    Pixels: 3871488\r\n    Red:\r\n      min: 0 (0)\r\n      max: 255 (1)\r\n      mean: 141.143 (0.5535)\r\n      standard deviation: 69.7869 (0.273674)\r\n      kurtosis: -1.15597\r\n      skewness: 0.0445947\r\n    Green:\r\n      min: 0 (0)\r\n      max: 255 (1)\r\n      mean: 139.252 (0.546088)\r\n      standard deviation: 70.59 (0.276823)\r\n      kurtosis: -1.1525\r\n      skewness: 0.152836\r\n    Blue:\r\n      min: 0 (0)\r\n      max: 255 (1)\r\n      mean: 126.124 (0.494603)\r\n      standard deviation: 67.6543 (0.265311)\r\n      kurtosis: -0.827636\r\n      skewness: 0.431133\r\n  Image statistics:\r\n    Overall:\r\n      min: 0 (0)\r\n      max: 255 (1)\r\n      mean: 135.506 (0.531397)\r\n      standard deviation: 69.3548 (0.271979)\r\n      kurtosis: -1.05457\r\n      skewness: 0.211174\r\n  Rendering intent: Perceptual\r\n  Gamma: 0.454545\r\n  Chromaticity:\r\n    red primary: (0.64,0.33)\r\n    green primary: (0.3,0.6)\r\n    blue primary: (0.15,0.06)\r\n    white point: (0.3127,0.329)\r\n  Background color: white\r\n  Border color: srgb(223,223,223)\r\n  Matte color: grey74\r\n  Transparent color: black\r\n  Interlace: None\r\n  Intensity: Undefined\r\n  Compose: Over\r\n  Page geometry: 1704x2272+0+0\r\n  Dispose: Undefined\r\n  Iterations: 0\r\n  Compression: JPEG\r\n  Quality: 96\r\n  Orientation: TopLeft\r\n  Properties:\r\n    date:create: 2018-01-09T13:48:34+01:00\r\n    date:modify: 2007-04-08T21:25:46+02:00\r\n    exif:ApertureValue: 107/32\r\n    exif:ColorSpace: 1\r\n    exif:ComponentsConfiguration: 1, 2, 3, 0\r\n    exif:CompressedBitsPerPixel: 5/1\r\n    exif:CustomRendered: 0\r\n    exif:DateTime: 2007:04:08 15:25:46\r\n    exif:DateTimeDigitized: 2007:04:08 15:25:46\r\n    exif:DateTimeOriginal: 2007:04:08 15:25:46\r\n    exif:DigitalZoomRatio: 2272/2272\r\n    exif:ExifImageLength: 2272\r\n    exif:ExifImageWidth: 1704\r\n    exif:ExifOffset: 218\r\n    exif:ExifVersion: 48, 50, 50, 48\r\n    exif:ExposureBiasValue: 0/3\r\n    exif:ExposureMode: 0\r\n    exif:ExposureTime: 1/500\r\n    exif:FileSource: 3\r\n    exif:Flash: 73\r\n    exif:FlashPixVersion: 48, 49, 48, 48\r\n    exif:FNumber: 32/10\r\n    exif:FocalLength: 250/32\r\n    exif:FocalPlaneResolutionUnit: 2\r\n    exif:FocalPlaneXResolution: 1704000/210\r\n    exif:FocalPlaneYResolution: 2272000/280\r\n    exif:InteroperabilityOffset: 1602\r\n    exif:Make: Canon\r\n    exif:MakerNote: 16, 0, 1, 0, 3, 0, 46, 0, 0, 0, 130, 3, 0, 0, 2, 0, 3, 0, 4, 0, 0, 0, 222, 3, 0, 0, 3, 0, 3, 0, 4, 0, 0, 0, 230, 3, 0, 0, 4, 0, 3, 0, 34, 0, 0, 0, 238, 3, 0, 0, 0, 0, 3, 0, 6, 0, 0, 0, 50, 4, 0, 0, 0, 0, 3, 0, 4, 0, 0, 0, 62, 4, 0, 0, 18, 0, 3, 0, 28, 0, 0, 0, 70, 4, 0, 0, 19, 0, 3, 0, 4, 0, 0, 0, 126, 4, 0, 0, 6, 0, 2, 0, 32, 0, 0, 0, 134, 4, 0, 0, 7, 0, 2, 0, 24, 0, 0, 0, 166, 4, 0, 0, 8, 0, 4, 0, 1, 0, 0, 0, 159, 105, 99, 0, 9, 0, 2, 0, 32, 0, 0, 0, 190, 4, 0, 0, 16, 0, 4, 0, 1, 0, 0, 0, 0, 0, 52, 1, 24, 0, 1, 0, 0, 1, 0, 0, 222, 4, 0, 0, 25, 0, 3, 0, 1, 0, 0, 0, 1, 0, 0, 0, 13, 0, 3, 0, 34, 0, 0, 0, 222, 5, 0, 0, 0, 0, 0, 0, 92, 0, 2, 0, 0, 0, 5, 0, 6, 0, 0, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 0, 3, 0, 1, 0, 1, 64, 1, 0, 255, 255, 255, 255, 237, 2, 250, 0, 32, 0, 97, 0, 192, 0, 1, 0, 8, 32, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 0, 0, 224, 8, 224, 8, 0, 0, 0, 0, 0, 0, 0, 0, 255, 127, 255, 127, 0, 0, 0, 0, 2, 0, 250, 0, 30, 1, 215, 0, 56, 2, 200, 1, 0, 0, 0, 0, 68, 0, 0, 0, 160, 0, 233, 0, 107, 0, 31, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 197, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 111, 0, 0, 0, 103, 0, 32, 1, 0, 0, 0, 0, 1, 0, 250, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 0, 9, 0, 224, 8, 168, 6, 224, 8, 212, 0, 153, 1, 38, 0, 102, 254, 0, 0, 154, 1, 102, 254, 0, 0, 154, 1, 102, 254, 0, 0, 154, 1, 215, 255, 215, 255, 215, 255, 0, 0, 0, 0, 0, 0, 41, 0, 41, 0, 41, 0, 160, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 73, 77, 71, 58, 80, 111, 119, 101, 114, 83, 104, 111, 116, 32, 65, 56, 48, 32, 74, 80, 69, 71, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 105, 114, 109, 119, 97, 114, 101, 32, 86, 101, 114, 115, 105, 111, 110, 32, 49, 46, 48, 48, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 68, 0, 9, 0, 148, 1, 146, 1, 144, 1, 149, 1, 148, 1, 148, 1, 147, 1, 149, 1, 152, 1, 64, 0, 0, 0, 0, 0, 149, 255, 0, 0, 0, 0, 10, 0, 0, 0, 5, 0, 3, 0, 27, 255, 18, 1, 41, 0, 253, 255, 253, 3, 85, 3, 0, 0, 0, 0, 0, 0, 0, 0, 232, 0, 0, 0, 57, 0\r\n    exif:MaxApertureValue: 95/32\r\n    exif:MeteringMode: 5\r\n    exif:Model: Canon PowerShot A80\r\n    exif:Orientation: 1\r\n    exif:ResolutionUnit: 2\r\n    exif:SceneCaptureType: 0\r\n    exif:SensingMethod: 2\r\n    exif:ShutterSpeedValue: 287/32\r\n    exif:Software: f-spot version 0.3.0\r\n    exif:thumbnail:Compression: 6\r\n    exif:thumbnail:InteroperabilityIndex: R98\r\n    exif:thumbnail:InteroperabilityVersion: 48, 49, 48, 48\r\n    exif:thumbnail:JPEGInterchangeFormat: 1750\r\n    exif:thumbnail:JPEGInterchangeFormatLength: 5543\r\n    exif:thumbnail:RelatedImageLength: 1704\r\n    exif:thumbnail:RelatedImageWidth: 2272\r\n    exif:thumbnail:ResolutionUnit: 2\r\n    exif:thumbnail:XResolution: 180/1\r\n    exif:thumbnail:YResolution: 180/1\r\n    exif:UserComment: 65, 83, 67, 73, 73, 0, 0, 0\r\n    exif:WhiteBalance: 0\r\n    exif:XResolution: 180/1\r\n    exif:YCbCrPositioning: 1\r\n    exif:YResolution: 180/1\r\n    jpeg:colorspace: 2\r\n    jpeg:sampling-factor: 1x2,1x1,1x1\r\n    signature: 1d603a34ac276c73e87b2f8439dbb6e5daed39a56811f07ef761ea46280f799f\r\n  Profiles:\r\n    Profile-exif: 7319 bytes\r\n  Artifacts:\r\n    filename: Bautismos Ninos Pascua 2007-04-08--15.25.46.JPG\r\n    verbose: true\r\n  Tainted: False\r\n  Filesize: 1.744MB\r\n  Number pixels: 3.871M\r\n  Pixels per second: 55.31MB\r\n  User time: 0.070u\r\n  Elapsed time: 0:01.070\r\n  Version: ImageMagick 6.8.9-9 Q16 x86_64 2017-07-31 http://www.imagemagick.org\r\n```\r\n\r\nIs it a bug or am I missing something?\r\n\r\n![bautismos ninos pascua 2007-04-08--15 25 46](https://user-images.githubusercontent.com/1417508/34723565-617c327a-f54b-11e7-9184-32b65d97b47a.JPG)\r\n\r\n  \r\n  ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2926", "id": 285789183, "node_id": "MDU6SXNzdWUyODU3ODkxODM=", "number": 2926, "title": "TIFFReadScanline: scanline oriented access is not supported for downsampled JPEG compressed images, consider enabling TIFF_JPEGCOLORMODE as JPEGCOLORMODE_RGB", "user": {"login": "jwilk", "id": 141546, "node_id": "MDQ6VXNlcjE0MTU0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/141546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwilk", "html_url": "https://github.com/jwilk", "followers_url": "https://api.github.com/users/jwilk/followers", "following_url": "https://api.github.com/users/jwilk/following{/other_user}", "gists_url": "https://api.github.com/users/jwilk/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwilk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwilk/subscriptions", "organizations_url": "https://api.github.com/users/jwilk/orgs", "repos_url": "https://api.github.com/users/jwilk/repos", "events_url": "https://api.github.com/users/jwilk/events{/privacy}", "received_events_url": "https://api.github.com/users/jwilk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 35, "created_at": "2018-01-03T19:44:14Z", "updated_at": "2018-09-29T16:45:29Z", "closed_at": "2018-09-29T16:45:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pillow 5.0.0 can no longer read JPEG-compressed TIFFs:\n\n```console\n$ pip freeze | grep -i pillow\nPillow==5.0.0\npillow-scripts==5.0.0\n$ wget -q https://github.com/jwilk/didjvu/raw/0.8/tests/data/ycbcr-jpeg.tiff\n$ pilconvert.py -r ycbcr-jpeg.tiff tmp.png\nTIFFReadScanline: scanline oriented access is not supported for downsampled JPEG compressed images, consider enabling TIFF_JPEGCOLORMODE as JPEGCOLORMODE_RGB..\ncannot convert image (<type 'exceptions.IOError'>:-2)\n```\n\n(I presume `TIFF_JPEGCOLORMODE` is a typo for `TIFFTAG_JPEGCOLORMODE`.)\n\nThis used to work until Pillow 4.3.0.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2926/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2925", "id": 285514050, "node_id": "MDU6SXNzdWUyODU1MTQwNTA=", "number": 2925, "title": "Problem installing on MSYS2 with 5.0.0", "user": {"login": "lovetox", "id": 8661218, "node_id": "MDQ6VXNlcjg2NjEyMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8661218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovetox", "html_url": "https://github.com/lovetox", "followers_url": "https://api.github.com/users/lovetox/followers", "following_url": "https://api.github.com/users/lovetox/following{/other_user}", "gists_url": "https://api.github.com/users/lovetox/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovetox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovetox/subscriptions", "organizations_url": "https://api.github.com/users/lovetox/orgs", "repos_url": "https://api.github.com/users/lovetox/repos", "events_url": "https://api.github.com/users/lovetox/events{/privacy}", "received_events_url": "https://api.github.com/users/lovetox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 35418450, "node_id": "MDU6TGFiZWwzNTQxODQ1MA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Installation", "name": "Installation", "color": "d7e102", "default": false, "description": "Usually a problem with \u2026"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-02T19:20:00Z", "updated_at": "2020-03-08T03:24:55Z", "closed_at": "2018-04-01T13:11:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\ngit clone https://github.com/python-pillow/Pillow.git\r\ncd Pillow\r\npython3 setup.py install\r\n\r\n### What actually happened?\r\n\r\n```\r\nC:\\msys64\\mingw32\\bin/i686-w64-mingw32-gcc.exe -Wno-unused-result -Wsign-compare -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG -IC:/msys64/mingw32/include/freetype2 -IC:/msys64/home/Philipp/Pillow/src/libImaging -IC:/msys64/mingw32/include -IC:/msys64/mingw32/include/python3.6m -c src/_imagingft.c -o build/temp.mingw-3.6/src/_imagingft.o\r\nsrc/_imagingft.c:32:10: fatal error: dlfcn.h: No such file or directory\r\n #include <dlfcn.h>\r\n          ^~~~~~~~~\r\ncompilation terminated.\r\nerror: command 'C:\\\\msys64\\\\mingw32\\\\bin/i686-w64-mingw32-gcc.exe' failed with exit status 1\r\n\r\n```\r\n\r\nI can post the full log on request, but i think its pretty clear that a file is missing\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\n5.0.0, python 3.6.3\r\n\r\ni tested the same on 4.3.0/python 3.6.3 which worked **with no problems**\r\n\r\nwas there some kind of dependency added between 4.3.0 and 5.0.0?\r\n\r\ni tried installing  `mingw-w64-i686-dlfcn` which resulted in:\r\n\r\n```\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x14e7): undefined reference to `dlopen'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1504): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x151e): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1538): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1552): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x156c): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1586): more undefined references to `dlsym' follow\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1605): undefined reference to `dlerror'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x16ab): undefined reference to `dlsym'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x16d4): undefined reference to `dlclose'\r\nbuild/temp.mingw-3.6/src/_imagingft.o:_imagingft.c:(.text+0x1720): undefined reference to `dlopen'\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2925/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2908", "id": 284636458, "node_id": "MDU6SXNzdWUyODQ2MzY0NTg=", "number": 2908, "title": "Image.open not populating Image.text attribute for PNG files", "user": {"login": "nmgeek", "id": 2481775, "node_id": "MDQ6VXNlcjI0ODE3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/2481775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmgeek", "html_url": "https://github.com/nmgeek", "followers_url": "https://api.github.com/users/nmgeek/followers", "following_url": "https://api.github.com/users/nmgeek/following{/other_user}", "gists_url": "https://api.github.com/users/nmgeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmgeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmgeek/subscriptions", "organizations_url": "https://api.github.com/users/nmgeek/orgs", "repos_url": "https://api.github.com/users/nmgeek/repos", "events_url": "https://api.github.com/users/nmgeek/events{/privacy}", "received_events_url": "https://api.github.com/users/nmgeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2017-12-27T02:34:41Z", "updated_at": "2018-12-26T11:34:51Z", "closed_at": "2018-12-26T11:34:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "[Documentation for the PNG file format](http://pillow.readthedocs.io/en/latest/handbook/image-file-formats.html#png) states that the `Image.open()` function populates the `text` attribute of the image object with strings from the tEXt, zTxT, and other chunks (it says as a 'list' but it seems to be a 'dict').  This does not actually happen: the `text` attribute is empty.\r\n\r\nHere is a test case which creates a simple png file, uses ImageMagick's `convert` utility to add tEXt key, value pairs then uses PIL to read in that png file.  Even though the tEXt key value pairs are there and can be displayed by the ImageMagick `identify` utility and the Python pypng package, PIL displays an empty dict for the `text` attribute.\r\n\r\n```python\r\nfrom subprocess import call\r\nfrom PIL import Image\r\nimport numpy as np\r\n\r\npixels = np.array([[[255, 0, 0], [0, 255, 0]], [[0, 0, 255], [255, 255, 0]]])\r\nim = Image.fromarray(pixels.astype('uint8'), 'RGB')\r\nim.save(\"test.png\")\r\n\r\ncall([\"convert\", \"test.png\", \"-set\", \"newkey\", \"newval\", \"test2.png\"])\r\ni = Image.open('test2.png')\r\nprint(i.text)\r\n```\r\nThis is with Python 2.7.8 and pillow 4.3.0", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2893", "id": 282817664, "node_id": "MDU6SXNzdWUyODI4MTc2NjQ=", "number": 2893, "title": "GifImageFile and animated gif with mismatched color palettes", "user": {"login": "tomaszhlawiczka", "id": 19405886, "node_id": "MDQ6VXNlcjE5NDA1ODg2", "avatar_url": "https://avatars.githubusercontent.com/u/19405886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomaszhlawiczka", "html_url": "https://github.com/tomaszhlawiczka", "followers_url": "https://api.github.com/users/tomaszhlawiczka/followers", "following_url": "https://api.github.com/users/tomaszhlawiczka/following{/other_user}", "gists_url": "https://api.github.com/users/tomaszhlawiczka/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomaszhlawiczka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomaszhlawiczka/subscriptions", "organizations_url": "https://api.github.com/users/tomaszhlawiczka/orgs", "repos_url": "https://api.github.com/users/tomaszhlawiczka/repos", "events_url": "https://api.github.com/users/tomaszhlawiczka/events{/privacy}", "received_events_url": "https://api.github.com/users/tomaszhlawiczka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2017-12-18T09:44:48Z", "updated_at": "2021-12-07T07:28:47Z", "closed_at": "2021-12-06T18:58:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to resize an animated gif file with a different color palette for each frame.\r\n\r\nEach frame should be composed with own colors, but because of buildin frames merge (see `GifImageFile.load_end`) colors are messed up.\r\n\r\nPython: `3.6`\r\nPIL: `4.4.0.dev0`\r\n\r\n```python\r\nfrom PIL import Image\r\nsource = Image.open(\"src.gif\")\r\nw, h = source.size\r\nresized = []\r\ntry:\r\n\tfor i in range(0, 0xffffffff):\r\n\t\tsource.seek(i)\r\n\t\tresized.append(source.convert('RGBA').resize((w//2, h//2), Image.ANTIALIAS))\r\nexcept EOFError:\r\n\tpass\r\nresized[0].save(\"result.gif\", \"GIF\", save_all=True, append_images=resized[1:], loop=1, duration=50)\r\n```\r\n\r\nI see following solutions here:\r\n1. Merge color palettes as well and reindex frames to new colors (hard one, losing an original data, might be impossible due to the limit of colors in the palette)\r\n2. First convert each frame from mode `P` \u2192 `RGBA` and then make a merge (losing an original data)\r\n3. Move merging to another level of abstraction allowing users to open GIF files exactly how there were composed (opening GIF would require additional actions)\r\n\r\nSo far I've made a workaround as follow (might be helpful for someone):\r\n```python\r\n\r\n# Clear up the GifImageFile.load_end()\r\nfrom PIL import Image, ImageFile\r\nfrom PIL.GifImagePlugin import GifImageFile, _accept, _save, _save_all\r\n\r\nclass AnimatedGifImageFile(GifImageFile):\r\n\tdef load_end(self):\r\n\t\tImageFile.ImageFile.load_end(self)\r\n\r\nImage.register_open(AnimatedGifImageFile.format, AnimatedGifImageFile, _accept)\r\nImage.register_save(AnimatedGifImageFile.format, _save)\r\nImage.register_save_all(AnimatedGifImageFile.format, _save_all)\r\nImage.register_extension(AnimatedGifImageFile.format, \".gif\")\r\nImage.register_mime(AnimatedGifImageFile.format, \"image/gif\")\r\n\r\n\r\n# Make merge by my own (losing an original palette \r\n# doesn't matter for this particular case - having RGBA is good enough):\r\nim = Image.open(\"src.gif\")\r\nlast_frame = None\r\nall_frames = []\r\ntry:\r\n\tfor i in range(0, 0xffffffff):\r\n\t\tim.seek(i)\r\n\t\tnew_frame = im.convert('RGBA')\r\n\t\tif last_frame is not None and im.disposal_method == 1:\r\n\t\t\tupdated = new_frame.crop(im.dispose_extent)\r\n\t\t\tlast_frame.paste(updated, im.dispose_extent, updated)\r\n\t\t\tnew_frame = last_frame\r\n\t\telse:\r\n\t\t\tlast_frame = new_frame\r\n\r\n\t\t# do resizing on new_frame here...\r\n\r\n\t\tall_frames.append(new_frame)\r\nexcept EOFError:\r\n\tpass\r\n```\r\n\r\n![src](https://user-images.githubusercontent.com/19405886/34098753-b5afd010-e3dd-11e7-88d6-0b4b29484f32.gif)\r\n![result](https://user-images.githubusercontent.com/19405886/34098766-bed63300-e3dd-11e7-9524-c69f9d8b49ca.gif)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2893/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2866", "id": 275676442, "node_id": "MDU6SXNzdWUyNzU2NzY0NDI=", "number": 2866, "title": "Image.save as tiff image, and the compression parameter does not work", "user": {"login": "universewill", "id": 6790730, "node_id": "MDQ6VXNlcjY3OTA3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/6790730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/universewill", "html_url": "https://github.com/universewill", "followers_url": "https://api.github.com/users/universewill/followers", "following_url": "https://api.github.com/users/universewill/following{/other_user}", "gists_url": "https://api.github.com/users/universewill/gists{/gist_id}", "starred_url": "https://api.github.com/users/universewill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/universewill/subscriptions", "organizations_url": "https://api.github.com/users/universewill/orgs", "repos_url": "https://api.github.com/users/universewill/repos", "events_url": "https://api.github.com/users/universewill/events{/privacy}", "received_events_url": "https://api.github.com/users/universewill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2017-11-21T11:25:24Z", "updated_at": "2018-04-01T19:52:23Z", "closed_at": "2018-04-01T13:07:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use pillow to read and save tiff CMYK image. But the output file is as large as 1G while my input tiff is only 150M. \r\nI use compression 'deflate'. When i set it to 'tiff_lzw', the output file seems to be unreadble and can not open by photoshop.\r\n\r\nMy code:\r\n\r\n```python\r\no = \"image.tif\"\r\nimg = Image.open(\"../data/tiff/\" + o)\r\nimage = ImageCms.profileToProfile(img, 'USWebCoatedSWOP.icc', 'USWebCoatedSWOP.icc', renderingIntent=0, outputMode='CMYK')\r\nimage.save('out.tif', compression='deflate')\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2866/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2839", "id": 271865574, "node_id": "MDU6SXNzdWUyNzE4NjU1NzQ=", "number": 2839, "title": "TIFF_LZW decompression is incorrect for  16bpc image", "user": {"login": "giorgiosironi", "id": 160299, "node_id": "MDQ6VXNlcjE2MDI5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/160299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giorgiosironi", "html_url": "https://github.com/giorgiosironi", "followers_url": "https://api.github.com/users/giorgiosironi/followers", "following_url": "https://api.github.com/users/giorgiosironi/following{/other_user}", "gists_url": "https://api.github.com/users/giorgiosironi/gists{/gist_id}", "starred_url": "https://api.github.com/users/giorgiosironi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giorgiosironi/subscriptions", "organizations_url": "https://api.github.com/users/giorgiosironi/orgs", "repos_url": "https://api.github.com/users/giorgiosironi/repos", "events_url": "https://api.github.com/users/giorgiosironi/events{/privacy}", "received_events_url": "https://api.github.com/users/giorgiosironi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-07T15:10:28Z", "updated_at": "2017-12-27T20:39:52Z", "closed_at": "2017-12-27T20:39:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Pillow was refusing to open this TIFF in version 4.2.1. In version 4.3.0, it loads it, but then saving it in any format including TIFF produces a silent corruption. Python 2.7.14 in both cases.\r\n\r\nThis is the reproducing script:\r\n```\r\nfrom PIL import Image                                                                                                                      \r\n\r\n# https://s3-external-1.amazonaws.com/prod-elife-published/articles/32330/elife-32330-fig1-v1.tif \r\nsrc_fp = 'elife-32330-fig1-v1.tif'\r\nim = Image.open(src_fp)\r\ntarget_fp = open('result.tif', 'w')\r\nim.save(target_fp)\r\n```\r\n\r\nIn 4.2.1:\r\n```\r\n  File \"reproducing.py\", line 5, in <module>\r\n    im = Image.open(src_fp)\r\n  File \"/opt/loris/venv/local/lib/python2.7/site-packages/PIL/Image.py\", line 2519, in open\r\n    % (filename if filename else fp))\r\nIOError: cannot identify image file 'elife-32330-fig1-v1.tif'\r\n```\r\n\r\nIn 4.3.0, no output, file gets stored and corrupted.\r\n[elife-32330-fig1-v1.tif.gz](https://github.com/python-pillow/Pillow/files/1450479/elife-32330-fig1-v1.tif.gz)\r\n[result.tif.gz](https://github.com/python-pillow/Pillow/files/1450480/result.tif.gz)\r\n![converting to PNG](https://user-images.githubusercontent.com/160299/32500515-918e5826-c3cd-11e7-80c2-5995952cf130.png)\r\n\r\nI tried to track how the `Image` class changed from 4.2.1 to 4.3.0, but there were too many changes to identify the source. I don't expect it to start to work, but to continue throwing an exception if it can't be read safely.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2827", "id": 270815816, "node_id": "MDU6SXNzdWUyNzA4MTU4MTY=", "number": 2827, "title": "Import matplotlib qt4 backend after import PIL ImageQt when PyQt5 is installed causes exception", "user": {"login": "douglasbeniz", "id": 3494045, "node_id": "MDQ6VXNlcjM0OTQwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/3494045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/douglasbeniz", "html_url": "https://github.com/douglasbeniz", "followers_url": "https://api.github.com/users/douglasbeniz/followers", "following_url": "https://api.github.com/users/douglasbeniz/following{/other_user}", "gists_url": "https://api.github.com/users/douglasbeniz/gists{/gist_id}", "starred_url": "https://api.github.com/users/douglasbeniz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/douglasbeniz/subscriptions", "organizations_url": "https://api.github.com/users/douglasbeniz/orgs", "repos_url": "https://api.github.com/users/douglasbeniz/repos", "events_url": "https://api.github.com/users/douglasbeniz/events{/privacy}", "received_events_url": "https://api.github.com/users/douglasbeniz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2017-11-02T21:37:26Z", "updated_at": "2018-07-01T19:16:06Z", "closed_at": "2018-07-01T19:16:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n```python\r\nfrom PyQt4 import QtCore\r\nfrom PIL.ImageQt import ImageQt\r\nfrom matplotlib.backends.backend_qt4agg import (FigureCanvasQTAgg as FigureCanvas, NavigationToolbar2QT as NavigationToolbar)\r\n```\r\n\r\n### What did you expect to happen?\r\nImport PIL and matplotlib using PyQt4 (in an environment with PyQt5 also installed...)\r\n\r\n### What actually happened?\r\nRuntimeError: the PyQt5.QtCore and PyQt4.QtCore modules both wrap the QObject class\r\n\r\nNote that this is related, to me, with issue #1939 (closed): https://github.com/python-pillow/Pillow/issues/1939\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 3.4.5\r\nPIL 4.2.1\r\nmatplotlib 2.1.0\r\n\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```\r\nPython 3.4.5 (default, May 29 2017, 15:17:55) \r\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> \r\n>>> import sys\r\n>>> \r\n>>> 'PyQt4' in sys.modules\r\nFalse\r\n>>> 'PyQt5' in sys.modules\r\nFalse\r\n>>> \r\n>>> from PyQt4 import QtCore\r\n>>> 'PyQt4' in sys.modules\r\nTrue\r\n>>> 'PyQt5' in sys.modules\r\nFalse\r\n>>> \r\n>>> from PIL.ImageQt import ImageQt\r\nImported PyQt4... OK!\r\n>>> \r\n>>> 'PyQt4' in sys.modules\r\nTrue\r\n>>> 'PyQt5' in sys.modules\r\nTrue\r\n>>> \r\n>>> from matplotlib.backends.backend_qt4agg import (FigureCanvasQTAgg as FigureCanvas,\r\n...     NavigationToolbar2QT as NavigationToolbar)\r\n<module 'PyQt5' from '/usr/lib64/python3.4/site-packages/PyQt5/__init__.py'>\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib64/python3.4/site-packages/matplotlib/backends/backend_qt4agg.py\", line 10, in <module>\r\n    from .backend_qt4 import (\r\n  File \"/usr/lib64/python3.4/site-packages/matplotlib/backends/backend_qt4.py\", line 18, in <module>\r\n    from .qt_compat import QtCore, QtWidgets, _getSaveFileName, __version__\r\n  File \"/usr/lib64/python3.4/site-packages/matplotlib/backends/qt_compat.py\", line 153, in <module>\r\n    from PyQt5 import QtCore, QtGui, QtWidgets\r\nRuntimeError: the PyQt5.QtCore and PyQt4.QtCore modules both wrap the QObject class\r\n>>> \r\n```\r\nA try to fix it, is this (currently used in our production environment):\r\n\r\n\\# /usr/lib64/python3.4/site-packages/PIL/ImageQt.py\r\n\r\n```python\r\n(...)\r\nimport sys\r\n\r\nfrom . import Image\r\nfrom ._util import isPath\r\nfrom io import BytesIO\r\n\r\nqt_is_installed = True\r\nqt_version = None\r\ntry:\r\n    from PyQt5.QtGui import QImage, qRgba, QPixmap\r\n    from PyQt5.QtCore import QBuffer, QIODevice\r\n    qt_version = '5'\r\nexcept (ImportError, RuntimeError):\r\n    try:\r\n        del sys.modules['PyQt5']\r\n    except:\r\n        pass\r\n\r\n    try:\r\n        from PyQt4.QtGui import QImage, qRgba, QPixmap\r\n        from PyQt4.QtCore import QBuffer, QIODevice\r\n        qt_version = '4'\r\n    except (ImportError, RuntimeError):\r\n        try:\r\n            del sys.modules['PyQt4']\r\n        except:\r\n            pass\r\n\r\n        try:\r\n            from PySide.QtGui import QImage, qRgba, QPixmap\r\n            from PySide.QtCore import QBuffer, QIODevice\r\n            qt_version = 'side'\r\n        except ImportError:\r\n            qt_is_installed = False\r\n(...)\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2810", "id": 268000545, "node_id": "MDU6SXNzdWUyNjgwMDA1NDU=", "number": 2810, "title": "AppVeyor mingw32 build failing", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-24T11:48:04Z", "updated_at": "2017-10-25T19:01:29Z", "closed_at": "2017-10-25T19:01:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Last success: \r\nhttps://ci.appveyor.com/project/Python-pillow/pillow/build/3012/job/d6mp06ur3ysexjrm\r\n\r\nFirst failure (unrelated update of an .rst file):\r\nhttps://ci.appveyor.com/project/Python-pillow/pillow/build/3013/job/8dyya14cyn5yat4v\r\n\r\nDifference:\r\nThe Python version has changed from 3.5.3 to 3.6.3.\r\n\r\n```\r\n[00:01:32] --------------------------------------------------------------------\r\n[00:01:32] PIL SETUP SUMMARY\r\n[00:01:32] --------------------------------------------------------------------\r\n[00:01:32] version      Pillow 4.4.0.dev0\r\n[00:01:32] platform     win32 3.5.3 (default, Feb 27 2017, 09:30:48)\r\n[00:01:32]              [GCC 6.3.0 32 bit]\r\n[00:01:32] --------------------------------------------------------------------\r\n```\r\n```\r\n[00:01:44] --------------------------------------------------------------------\r\n[00:01:44] PIL SETUP SUMMARY\r\n[00:01:44] --------------------------------------------------------------------\r\n[00:01:44] version      Pillow 4.4.0.dev0\r\n[00:01:44] platform     win32 3.6.3 (default, Oct  5 2017, 07:45:24)\r\n[00:01:44]              [GCC 7.2.0 32 bit]\r\n[00:01:44] --------------------------------------------------------------------\r\n```\r\n\r\nThe build phase looks okay at first glance, but it's falling over before the tests:\r\n```\r\n[00:01:45] %PYTHON%\\%EXECUTABLE% selftest.py --installed\r\n[00:01:45] Traceback (most recent call last):\r\n[00:01:45]   File \"selftest.py\", line 11, in <module>\r\n[00:01:45]     from PIL import Image, ImageDraw, ImageFilter, ImageMath\r\n[00:01:45]   File \"C:\\pillow\\PIL\\Image.py\", line 56, in <module>\r\n[00:01:45]     from . import _imaging as core\r\n[00:01:45] ImportError: cannot import name '_imaging'\r\n[00:01:45] Command exited with code 1\r\n```\r\n\r\nDunno if this is relevant, there's extra build flags:\r\n```\r\n# Before\r\n\r\n[00:01:12] C:\\msys64\\mingw32\\bin/i686-w64-mingw32-gcc.exe -Wno-unused-result -Wsign-compare -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG -DHAVE_LIBJPEG -DHAVE_LIBZ -DPILLOW_VERSION=\\\"4.4.0.dev0\\\" -IC:/pillow/libImaging -IC:/msys64/mingw32/include -IC:/msys64/mingw32/include/python3.5m -c _imaging.c -o build/temp.mingw-3.5/_imaging.o\r\n\r\n# After, with extra: -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG\r\n\r\n[00:01:22] C:\\msys64\\mingw32\\bin/i686-w64-mingw32-gcc.exe -Wno-unused-result -Wsign-compare -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG -march=i686 -mtune=generic -O2 -pipe -fwrapv -D__USE_MINGW_ANSI_STDIO=1 -DNDEBUG -DHAVE_LIBJPEG -DHAVE_LIBZ -DPILLOW_VERSION=\\\"4.4.0.dev0\\\" -IC:/pillow/libImaging -IC:/msys64/mingw32/include -IC:/msys64/mingw32/include/python3.6m -c _imaging.c -o build/temp.mingw-3.6/_imaging.o\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2803", "id": 266135427, "node_id": "MDU6SXNzdWUyNjYxMzU0Mjc=", "number": 2803, "title": "Exception when converting GIF to RGB and saving", "user": {"login": "tisdall", "id": 4029388, "node_id": "MDQ6VXNlcjQwMjkzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/4029388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tisdall", "html_url": "https://github.com/tisdall", "followers_url": "https://api.github.com/users/tisdall/followers", "following_url": "https://api.github.com/users/tisdall/following{/other_user}", "gists_url": "https://api.github.com/users/tisdall/gists{/gist_id}", "starred_url": "https://api.github.com/users/tisdall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tisdall/subscriptions", "organizations_url": "https://api.github.com/users/tisdall/orgs", "repos_url": "https://api.github.com/users/tisdall/repos", "events_url": "https://api.github.com/users/tisdall/events{/privacy}", "received_events_url": "https://api.github.com/users/tisdall/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2017-10-17T13:58:04Z", "updated_at": "2021-06-28T16:01:54Z", "closed_at": "2021-06-28T16:01:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've reduced the issue down to 2 lines of code:\r\n```python\r\nfrom PIL import Image\r\nImage.open('plus.gif').convert('RGB').save('plus_thumb.gif', format='GIF')\r\n```\r\nThe image with the issue:\r\n![plus](https://user-images.githubusercontent.com/4029388/31668314-e0926098-b31f-11e7-9615-cce39c4113b2.gif)\r\n\r\nThe exception I get:\r\n```console\r\n# python test5.py \r\n/usr/local/lib/python2.7/site-packages/PIL/Image.py:967: UserWarning: Couldn't allocate palette entry for transparency\r\n  \"for transparency\")\r\nTraceback (most recent call last):\r\n  File \"test5.py\", line 8, in <module>\r\n    Image.open('plus.gif').convert('RGB').save('plus_thumb.gif', format='GIF')\r\n  File \"/usr/local/lib/python2.7/site-packages/PIL/Image.py\", line 1928, in save\r\n    save_handler(self, fp, filename)\r\n  File \"/usr/local/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 465, in _save\r\n    _write_single_frame(im, fp, palette)\r\n  File \"/usr/local/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 383, in _write_single_frame\r\n    _write_local_header(fp, im, (0, 0), flags)\r\n  File \"/usr/local/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 490, in _write_local_header\r\n    transparency = int(transparency)\r\nTypeError: int() argument must be a string or a number, not 'tuple'\r\n```\r\n\r\nThis is with Pillow 4.3.0 and Python 2.7.7\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2797", "id": 264061771, "node_id": "MDU6SXNzdWUyNjQwNjE3NzE=", "number": 2797, "title": "Quantize should update palette", "user": {"login": "kkopachev", "id": 2279051, "node_id": "MDQ6VXNlcjIyNzkwNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2279051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkopachev", "html_url": "https://github.com/kkopachev", "followers_url": "https://api.github.com/users/kkopachev/followers", "following_url": "https://api.github.com/users/kkopachev/following{/other_user}", "gists_url": "https://api.github.com/users/kkopachev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkopachev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkopachev/subscriptions", "organizations_url": "https://api.github.com/users/kkopachev/orgs", "repos_url": "https://api.github.com/users/kkopachev/repos", "events_url": "https://api.github.com/users/kkopachev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkopachev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2017-10-10T00:16:14Z", "updated_at": "2019-03-30T10:07:39Z", "closed_at": "2019-03-30T10:07:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### What did you do?\r\n```python \r\n# t.png - png image with transparency.\r\nim = Image.open('t.png')\r\nprint (im.info['transparency'])\r\n# '\\x00\\x0f#Af\\x99\\xce\\xfc\\xfd\\xc1\\xdd\\x86\\xfdk\\x94>^#\\xcd\\xc6\\xe2\\xb8\\xda\\xb0\\x8c\\xaba'\r\nim_rgba = im.convert()\r\nim_p = im_rgba.quantize()\r\nnew_im_rgba = im_p.convert()\r\nprint (new_im_rgba.mode)\r\n```\r\n### What did you expect to happen?\r\n'RGBA'\r\n### What actually happened?\r\n'RGB'\r\n### What versions of Pillow and Python are you using?\r\nlatest master\r\n\r\nI noticed [there is code to handle](https://github.com/python-pillow/Pillow/pull/537/files#diff-3fef5f960d5bd8bdfb9c6fadcf96af22R737) that in `convert` for RGB -> P conversion. Looks like it was used for RGBA->P conversion as well, but then RGBA->P got [handled by call to quantize directly](https://github.com/python-pillow/Pillow/pull/573).\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2786", "id": 262713243, "node_id": "MDU6SXNzdWUyNjI3MTMyNDM=", "number": 2786, "title": "Testing ImageDraw.Draw: \"ResourceWarning: unclosed file\"", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 493738225, "node_id": "MDU6TGFiZWw0OTM3MzgyMjU=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/File%20Closing", "name": "File Closing", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-04T08:58:39Z", "updated_at": "2019-01-27T03:37:08Z", "closed_at": "2019-01-27T03:37:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n```\r\npython3 Tests/test_imagedraw.py TestImageDraw.test_valueerror\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\n```\r\n.\r\n----------------------------------------------------------------------\r\nRan 1 test in 0.040s\r\n\r\nOK\r\n```\r\n\r\n### What actually happened?\r\n\r\n```\r\n/usr/local/Cellar/python3/3.6.2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/unittest/case.py:605: ResourceWarning: unclosed file <_io.BufferedReader name='Tests/images/chi.gif'>\r\n  testMethod()\r\n.\r\n----------------------------------------------------------------------\r\nRan 1 test in 0.040s\r\n\r\nOK\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nLatest Pillow master and Python 3.6.2.\r\nDoes not happen with Python 2.7.13.\r\n\r\n```python\r\n    def test_valueerror(self):\r\n        im = Image.open(\"Tests/images/chi.gif\")\r\n\r\n        draw = ImageDraw.Draw(im)   # comes from here\r\n        # draw.line(((0, 0)), fill=(0, 0, 0))  # not needed to reproduce\r\n```\r\nOr without the test suite:\r\n```python\r\nfrom PIL import Image, ImageDraw\r\nimport warnings\r\n\r\nwarnings.simplefilter(\"always\")\r\n\r\nim = Image.open(\"Tests/images/chi.gif\")\r\ndraw = ImageDraw.Draw(im)   # comes from here\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2783", "id": 262573140, "node_id": "MDU6SXNzdWUyNjI1NzMxNDA=", "number": 2783, "title": "ImageDraw.textsize zero length error", "user": {"login": "NotSoSuper", "id": 4484641, "node_id": "MDQ6VXNlcjQ0ODQ2NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/4484641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotSoSuper", "html_url": "https://github.com/NotSoSuper", "followers_url": "https://api.github.com/users/NotSoSuper/followers", "following_url": "https://api.github.com/users/NotSoSuper/following{/other_user}", "gists_url": "https://api.github.com/users/NotSoSuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotSoSuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotSoSuper/subscriptions", "organizations_url": "https://api.github.com/users/NotSoSuper/orgs", "repos_url": "https://api.github.com/users/NotSoSuper/repos", "events_url": "https://api.github.com/users/NotSoSuper/events{/privacy}", "received_events_url": "https://api.github.com/users/NotSoSuper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 192476144, "node_id": "MDU6TGFiZWwxOTI0NzYxNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-10-03T20:24:15Z", "updated_at": "2018-01-01T16:57:33Z", "closed_at": "2017-10-04T12:53:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nAttempted to get the `textsize` of an empty string (\"\")\r\n### What did you expect to happen?\r\nReturns a tuple which is the size of the text\r\n### What actually happened?\r\nProduced this error\r\n```py\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/PIL/ImageDraw.py\", line 263, in textsize\r\n    return font.getsize(text, direction, features)\r\n  File \"/usr/local/lib/python3.6/site-packages/PIL/ImageFont.py\", line 111, in getsize\r\n    return self.font.getsize(text)\r\nSystemError: <built-in method getsize of ImagingFont object at 0x2c72760> returned NULL without setting an error\r\n```\r\n### What versions of Pillow and Python are you using?\r\nPillow 4.30\r\nPython 3.6\r\n\r\nI believe this can be traced to the latest 4.3 release and this commit: https://github.com/python-pillow/Pillow/commit/fd0e7be55a77dd1d499c0b9df99d24e23e8c15e3\r\n\r\nThe following code is producing the error: https://github.com/python-pillow/Pillow/blob/46845bafc544bc117de2743c3d0a509b312f0442/_imaging.c#L2304-L2322\r\n\r\nIn previous versions, the function would not error. If it's not intended to get the size of an empty string, maybe changing the behavior of [`ImageDraw._multiline_split`](https://github.com/python-pillow/Pillow/blob/46845bafc544bc117de2743c3d0a509b312f0442/PIL/ImageDraw.py#L203-L206) would fix the issue.\r\n\r\n**Code**\r\n```py\r\nimport PIL.Image, PIL.ImageDraw\r\ni = PIL.Image.new('RGB', (2000, 1000))\r\nd = PIL.ImageDraw.Draw(i)\r\nd.textsize(\"\")\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2783/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2780", "id": 262051224, "node_id": "MDU6SXNzdWUyNjIwNTEyMjQ=", "number": 2780, "title": "Todo: update docs/reference/open_files.rst", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-02T11:09:37Z", "updated_at": "2018-12-13T19:14:23Z", "closed_at": "2018-12-13T19:14:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is out of date after the _exclusive_fp changes.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2758", "id": 260041363, "node_id": "MDU6SXNzdWUyNjAwNDEzNjM=", "number": 2758, "title": "Travis CI: test_high_characters sometimes fails", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-09-23T21:57:45Z", "updated_at": "2017-11-07T12:07:46Z", "closed_at": "2017-11-05T15:01:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've seen it fail on some Docker build jobs. After rebuilding, it was fine.\r\n\r\nHere's an example from DOCKER=\"debian-stretch-x86\" from today at https://travis-ci.org/python-pillow/Pillow/jobs/279047420, which passed after rebuilding:\r\n```\r\n======================================================================\r\nFAIL: TestFontPcf.test_high_characters\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Pillow/Tests/test_font_pcf.py\", line 59, in test_high_characters\r\n    self._test_high_characters(message)\r\n  File \"/Pillow/Tests/test_font_pcf.py\", line 55, in _test_high_characters\r\n    self.assert_image_equal(image, compare)\r\n  File \"/Pillow/Tests/helper.py\", line 85, in assert_image_equal\r\n    msg or \"got size %r, expected %r\" % (a.size, b.size))\r\nAssertionError: got size (783, 22), expected (765, 22)\r\n-------------------- >> begin captured logging << --------------------\r\nPIL.PngImagePlugin: DEBUG: STREAM 'IHDR' 16 13\r\nPIL.PngImagePlugin: DEBUG: STREAM 'IDAT' 41 2644\r\nPIL.PngImagePlugin: DEBUG: STREAM 'IHDR' 16 13\r\nPIL.PngImagePlugin: DEBUG: STREAM 'IDAT' 41 1400\r\n--------------------- >> end captured logging << ---------------------\r\n----------------------------------------------------------------------\r\nRan 1068 tests in 16.060s\r\nFAILED (SKIP=25, failures=1)\r\n```\r\n\r\n---\r\n\r\nHere's another from August (https://github.com/python-pillow/Pillow/pull/2634#issuecomment-322232953):\r\n\r\n> I'm not sure what's up with the Travis errors, as they're non-deterministic. This fails on debian-stretch in one commit or ubuntu-trusty-x86 in another, but the changes should not affect them.\r\n```\r\n======================================================================\r\nFAIL: TestFontPcf.test_high_characters\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Pillow/Tests/test_font_pcf.py\", line 59, in test_high_characters\r\n    self._test_high_characters(message)\r\n  File \"/Pillow/Tests/test_font_pcf.py\", line 55, in _test_high_characters\r\n    self.assert_image_equal(image, compare)\r\n  File \"/Pillow/Tests/helper.py\", line 85, in assert_image_equal\r\n    msg or \"got size %r, expected %r\" % (a.size, b.size))\r\nAssertionError: got size (770, 22), expected (765, 22)\r\n```\r\n> (and when rerun, the ubuntu version passed, and the debian one still failed)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2758/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2754", "id": 259964691, "node_id": "MDU6SXNzdWUyNTk5NjQ2OTE=", "number": 2754, "title": "Tiff not being fully read(?)", "user": {"login": "elunty", "id": 1414366, "node_id": "MDQ6VXNlcjE0MTQzNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1414366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elunty", "html_url": "https://github.com/elunty", "followers_url": "https://api.github.com/users/elunty/followers", "following_url": "https://api.github.com/users/elunty/following{/other_user}", "gists_url": "https://api.github.com/users/elunty/gists{/gist_id}", "starred_url": "https://api.github.com/users/elunty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elunty/subscriptions", "organizations_url": "https://api.github.com/users/elunty/orgs", "repos_url": "https://api.github.com/users/elunty/repos", "events_url": "https://api.github.com/users/elunty/events{/privacy}", "received_events_url": "https://api.github.com/users/elunty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 12, "created_at": "2017-09-22T23:56:36Z", "updated_at": "2018-09-30T23:21:53Z", "closed_at": "2018-09-30T23:21:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a few tiffs that produce some strangeness when i try to read them. The lower and right edges of the image turns green when you try to ```.show``` or ```.save``` the file. Its in YCbCr so the green is just because its reading [0,0,0] for whatever reason, but i'm curious if anyone has seen something like this before. The image is using ```compression: \"jpeg\"``` and i look at the .info values.\r\n\r\nI'm using pillow 4.0.0.. If i try to use newer versions i get a different error (```ValueError: tile cannot extend outside image```) when i try to call ```.show```\r\n\r\n\r\n\r\n\r\n\r\n![capture](https://user-images.githubusercontent.com/1414366/30767887-66324cf6-9fbe-11e7-9eb2-9c9965f5c55c.PNG)\r\n![capture2](https://user-images.githubusercontent.com/1414366/30767888-67797c42-9fbe-11e7-9d38-9daab9adb6f7.PNG)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2754/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2751", "id": 259330485, "node_id": "MDU6SXNzdWUyNTkzMzA0ODU=", "number": 2751, "title": "Error installing without jpeg support", "user": {"login": "expectocode", "id": 15344581, "node_id": "MDQ6VXNlcjE1MzQ0NTgx", "avatar_url": "https://avatars.githubusercontent.com/u/15344581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/expectocode", "html_url": "https://github.com/expectocode", "followers_url": "https://api.github.com/users/expectocode/followers", "following_url": "https://api.github.com/users/expectocode/following{/other_user}", "gists_url": "https://api.github.com/users/expectocode/gists{/gist_id}", "starred_url": "https://api.github.com/users/expectocode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/expectocode/subscriptions", "organizations_url": "https://api.github.com/users/expectocode/orgs", "repos_url": "https://api.github.com/users/expectocode/repos", "events_url": "https://api.github.com/users/expectocode/events{/privacy}", "received_events_url": "https://api.github.com/users/expectocode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 35418450, "node_id": "MDU6TGFiZWwzNTQxODQ1MA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Installation", "name": "Installation", "color": "d7e102", "default": false, "description": "Usually a problem with \u2026"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-20T23:18:01Z", "updated_at": "2018-04-06T08:05:43Z", "closed_at": "2018-04-06T08:05:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\npip install Pillow --glabal-option=\"build_ext\" --global-option=\"--disable-jpeg\"\r\n### What did you expect to happen?\r\nSuccessful install without jpeg support\r\n### What actually happened?\r\nerror: option --disable-jpeg not recognized\r\n### What versions of Pillow and Python are you using?\r\npython3 in a venv, pillow was 4.2.1\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\nI don't have code for this, it's one line of shell\r\n\r\n![screenshot_2017-09-21_00-17-32](https://user-images.githubusercontent.com/15344581/30672104-effe7272-9e59-11e7-9025-55ad068fe662.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2734", "id": 257252693, "node_id": "MDU6SXNzdWUyNTcyNTI2OTM=", "number": 2734, "title": "Strange gif background color", "user": {"login": "retsyo", "id": 7960913, "node_id": "MDQ6VXNlcjc5NjA5MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/7960913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retsyo", "html_url": "https://github.com/retsyo", "followers_url": "https://api.github.com/users/retsyo/followers", "following_url": "https://api.github.com/users/retsyo/following{/other_user}", "gists_url": "https://api.github.com/users/retsyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/retsyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retsyo/subscriptions", "organizations_url": "https://api.github.com/users/retsyo/orgs", "repos_url": "https://api.github.com/users/retsyo/repos", "events_url": "https://api.github.com/users/retsyo/events{/privacy}", "received_events_url": "https://api.github.com/users/retsyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-13T04:14:57Z", "updated_at": "2021-03-17T03:02:46Z", "closed_at": "2021-03-17T03:02:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using PILLOW 4.2.1-py36_0 which is updated by conda from `Python 3.6.0 |Anaconda custom (64-bit)| (default, Dec 23 2016, 11:57:41) [MSC v.1900 64 bit (AMD64)] on win32`\r\n\r\nI found sometimes the produced gif has strange background. \r\n1. I only find this with `Stcaiyun.ttf`\r\n2. Even for `Stcaiyun.ttf`, sometimes the gif is ok\r\n3. The `framexx.png` is ok\r\n\r\n```python\r\nimport random\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nframes = []\r\nfor frame in range(10):\r\n    img = Image.new(size=(320, 200), mode='RGB', color='white')\r\n    \r\n    drw = ImageDraw.Draw(img)\r\n    text = '% 2i' % frame\r\n    font = ImageFont.truetype(r'd:\\WINDOWS\\Fonts\\STCAIYUN.TTF', 80)\r\n    #~ font = ImageFont.truetype(r'd:\\WINDOWS\\Fonts\\Stfangso.ttf', 80)\r\n    #~ font = ImageFont.truetype(r'd:\\WINDOWS\\Fonts\\times.TTF', 80)\r\n    #~ font = ImageFont.truetype(r'3Dkirieji.ttf', 80)\r\n    x, y=random.randint(60,250), random.randint(20,100)\r\n    color = random.choice(['red', 'green', 'blue', (0, 127, 127)])\r\n    drw.text((x, y), text, font=font, fill=color)\r\n    img.save('frame%02i.png' % frame)\r\n    frames.append(img)\r\n    \r\nframes[0].save('out.gif', save_all=True, append_images=frames[1:], duration=300, loop=True, optimize=True)\r\n```\r\n\r\nI am sorry I cannot upload STCAIYUN.TTF since it is some huge\r\n\r\n[out.zip](https://github.com/python-pillow/Pillow/files/1298110/out.zip)\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2734/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2716", "id": 255694872, "node_id": "MDU6SXNzdWUyNTU2OTQ4NzI=", "number": 2716, "title": "Image loading by file name memory leak is not properly fixed", "user": {"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 493738225, "node_id": "MDU6TGFiZWw0OTM3MzgyMjU=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/File%20Closing", "name": "File Closing", "color": "006b75", "default": false, "description": null}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2017-09-06T18:10:31Z", "updated_at": "2019-05-12T06:52:29Z", "closed_at": "2019-05-12T06:52:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`__del__` doesn't work, because in the most cases `self.fp` is [None after initial loading](https://github.com/python-pillow/Pillow/blob/master/PIL/ImageFile.py#L249) and actual fp pointer is stored in `self.__fp`", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2705", "id": 254332624, "node_id": "MDU6SXNzdWUyNTQzMzI2MjQ=", "number": 2705, "title": "Image.putalpha fails on P -> PA", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-31T13:22:33Z", "updated_at": "2019-03-28T09:44:53Z", "closed_at": "2019-03-28T09:44:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Image.putalpha should handle the promotion of `P` to `PA` images similarly to `L` -> `LA`.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2702", "id": 254214743, "node_id": "MDU6SXNzdWUyNTQyMTQ3NDM=", "number": 2702, "title": "P->RGBA->resize(LANCZOS)->P messes up transparency", "user": {"login": "kkopachev", "id": 2279051, "node_id": "MDQ6VXNlcjIyNzkwNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2279051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkopachev", "html_url": "https://github.com/kkopachev", "followers_url": "https://api.github.com/users/kkopachev/followers", "following_url": "https://api.github.com/users/kkopachev/following{/other_user}", "gists_url": "https://api.github.com/users/kkopachev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkopachev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkopachev/subscriptions", "organizations_url": "https://api.github.com/users/kkopachev/orgs", "repos_url": "https://api.github.com/users/kkopachev/repos", "events_url": "https://api.github.com/users/kkopachev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkopachev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24", "html_url": "https://github.com/python-pillow/Pillow/milestone/24", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24/labels", "id": 2043828, "node_id": "MDk6TWlsZXN0b25lMjA0MzgyOA==", "number": 24, "title": "4.3.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2016-10-03T11:16:43Z", "updated_at": "2017-10-04T09:03:38Z", "due_on": "2017-10-01T07:00:00Z", "closed_at": "2017-10-04T09:03:38Z"}, "comments": 9, "created_at": "2017-08-31T05:29:49Z", "updated_at": "2018-01-23T01:20:17Z", "closed_at": "2017-09-25T16:18:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### What did you do?\r\nGiven original image ![test.png](https://user-images.githubusercontent.com/25781945/27951758-500e2398-6349-11e7-8c68-b9cd5e39e166.png)\r\nand following steps:\r\n\r\n```python\r\nfrom PIL import Image\r\nim = Image.open('test.png')\r\nim.mode # 'P'\r\nim = im.convert('RGBA')\r\nim = im.resize((320,240), Image.LANCZOS)\r\nim = im.convert('P')\r\nim.save('broken.png')\r\n```\r\n### What did you expect to happen?\r\n![good](https://user-images.githubusercontent.com/2279051/29907685-b6a50a60-8dd1-11e7-87ff-bb972966fa82.png)\r\n\r\n### What actually happened?\r\n![bad](https://user-images.githubusercontent.com/2279051/29907638-62cec516-8dd1-11e7-9c81-8936a902d570.png)\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 2.7.13 / Pillow 4.2.1\r\n\r\n\r\nHowever, if I slightly change the script and save RGBA image after convertion and resize to a file and then reopen that file, quantize it to palette, then it's all good:\r\n```python\r\nfrom PIL import Image\r\nim = Image.open('test.png')\r\nim = im.convert('RGBA')\r\nim = im.resize((320,240), Image.LANCZOS)\r\nim.save('intermidiary.png')\r\nintermidiary = Image.open('intermidiary.png')\r\nintermidiary.mode # 'RGBA'\r\nintermidiary = intermidiary.convert('P')\r\nintermidiary.save('good.png')\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2702/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2682", "id": 250209364, "node_id": "MDU6SXNzdWUyNTAyMDkzNjQ=", "number": 2682, "title": "Keyerror 'RGB' when create a new image", "user": {"login": "rickyi22", "id": 20011276, "node_id": "MDQ6VXNlcjIwMDExMjc2", "avatar_url": "https://avatars.githubusercontent.com/u/20011276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rickyi22", "html_url": "https://github.com/rickyi22", "followers_url": "https://api.github.com/users/rickyi22/followers", "following_url": "https://api.github.com/users/rickyi22/following{/other_user}", "gists_url": "https://api.github.com/users/rickyi22/gists{/gist_id}", "starred_url": "https://api.github.com/users/rickyi22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rickyi22/subscriptions", "organizations_url": "https://api.github.com/users/rickyi22/orgs", "repos_url": "https://api.github.com/users/rickyi22/repos", "events_url": "https://api.github.com/users/rickyi22/events{/privacy}", "received_events_url": "https://api.github.com/users/rickyi22/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2017-08-15T03:00:14Z", "updated_at": "2018-09-02T05:54:15Z", "closed_at": "2018-09-02T05:54:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was creating a bunch of new image file by using \r\n```\r\nfrom PIL import Image\r\nimg = Image.new(\"RGB\",size,(255,255,255))\r\ndraw = ImageDraw.Draw(img)\r\n```\r\nbut somehow there is a keyerror shows 'RGB'. and after looked it up in stackoverflow, it seems has something to do with my computer? but most of the time i could do it okay , but i am not sure which situation would cause that?", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2682/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2656", "id": 248252232, "node_id": "MDU6SXNzdWUyNDgyNTIyMzI=", "number": 2656, "title": "Japanese font glyph with direction \"ttb\" is drawn to incorrect position", "user": {"login": "masushin", "id": 18723885, "node_id": "MDQ6VXNlcjE4NzIzODg1", "avatar_url": "https://avatars.githubusercontent.com/u/18723885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masushin", "html_url": "https://github.com/masushin", "followers_url": "https://api.github.com/users/masushin/followers", "following_url": "https://api.github.com/users/masushin/following{/other_user}", "gists_url": "https://api.github.com/users/masushin/gists{/gist_id}", "starred_url": "https://api.github.com/users/masushin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masushin/subscriptions", "organizations_url": "https://api.github.com/users/masushin/orgs", "repos_url": "https://api.github.com/users/masushin/repos", "events_url": "https://api.github.com/users/masushin/events{/privacy}", "received_events_url": "https://api.github.com/users/masushin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 638190364, "node_id": "MDU6TGFiZWw2MzgxOTAzNjQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Font%20Rendering", "name": "Font Rendering", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-08-06T15:00:40Z", "updated_at": "2019-06-23T10:44:48Z", "closed_at": "2019-06-23T10:44:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI tried to draw Japanese font glyph by following test code.\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\ntxt = Image.new('RGBA', (200,200), (255,255,255,255))\r\nfnt = ImageFont.truetype(\"GenEiAntiqueN-Medium.otf\", 80)\r\nd = ImageDraw.Draw(txt)\r\nd.text((60,20), \"\u3042\u3044\", font=fnt, fill=(0,0,0,255), direction=\"ttb\")\r\ntxt.show()\r\n```\r\n\r\n### What did you expect to happen?\r\nI expected to get the following image.\r\n\r\n![ai](https://user-images.githubusercontent.com/18723885/29004138-ee250fee-7afd-11e7-9142-31ba68545270.png)\r\n\r\n### What actually happened?\r\n\r\nI got the following image.\r\n\r\n![ai2](https://user-images.githubusercontent.com/18723885/29004148-0923991e-7afe-11e7-9182-b594afa87903.png)\r\n\r\nGlyphs are drawn to deviate to the lower left.\r\n\r\nAlso, it seems that these glyphs are drawn overlapping.\r\n(It may be better to deal with this after the first problem has been solved..)\r\n\r\nThe font file using in my code can be got from the following link.\r\nhttp://okoneya.jp/font/GenEiAntique-3.0.zip\r\n\r\nIncidentally, I tried it using other font \"\u30d2\u30e9\u30ae\u30ce \u660e\u671d\".\r\nIt included in Japanese mac OS. And same problem appear.\r\nSo, I think it is not problem with a specific font file.\r\n\r\nPlease let me know if there are mistake in my code.\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 3.6.0\r\nPillow 4.2.1\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2656/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2649", "id": 247873861, "node_id": "MDU6SXNzdWUyNDc4NzM4NjE=", "number": 2649, "title": "Using seek to skip more than one frame with FliImageFile only shows the pixels changed that frame", "user": {"login": "adambiser", "id": 10321049, "node_id": "MDQ6VXNlcjEwMzIxMDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/10321049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adambiser", "html_url": "https://github.com/adambiser", "followers_url": "https://api.github.com/users/adambiser/followers", "following_url": "https://api.github.com/users/adambiser/following{/other_user}", "gists_url": "https://api.github.com/users/adambiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/adambiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adambiser/subscriptions", "organizations_url": "https://api.github.com/users/adambiser/orgs", "repos_url": "https://api.github.com/users/adambiser/repos", "events_url": "https://api.github.com/users/adambiser/events{/privacy}", "received_events_url": "https://api.github.com/users/adambiser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-08-04T00:49:06Z", "updated_at": "2018-12-04T20:51:55Z", "closed_at": "2018-12-04T20:51:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI opened a FLI file and used .seek(50) on the image before creating a PhotoImage to display it on a tix label.\r\n\r\n### What did you expect to happen?\r\nI expected to see the complete image.\r\n\r\n### What actually happened?\r\nI only saw the part of the image that had changed for that particular frame. The rest of the image is black.\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 3.6.2 on Windows 7 x64\r\nPillow: 4.2.1\r\n\r\nI did find that if I hack in a call to self.load() in FliImageFile's _seek() method, the frame displays fully. I don't know if this is the best way to fix the issue.\r\n\r\n```python\r\nimport PIL as pil\r\nfrom PIL import Image,ImageTk,FliImagePlugin\r\nimport tkinter.tix as tix\r\n\r\nclass FliImageFile(FliImagePlugin.FliImageFile):\r\n    def _seek(self, frame):\r\n        FliImagePlugin.FliImageFile._seek(self, frame)\r\n        # ensure that this frame is loaded\r\n        self.load()\r\n\r\ndef createlabel(root, filename):\r\n    label = tix.Label(root)\r\n    label.original = Image.open(filename)\r\n    label.original.seek(50) # Go to frame 50.\r\n    label.photoimage = ImageTk.PhotoImage(label.original) # keep a reference!\r\n    label.config(image=label.photoimage)\r\n    return label\r\n\r\ndef main():\r\n    root = tix.Tk()\r\n    label1 = createlabel(root, 'a.fli')\r\n    label1.pack()\r\n    # Hack to replace PIL's FliImageFile with one that loads image data at\r\n    # the end of each internal _seek() call.\r\n    Image.OPEN[FliImagePlugin.FliImageFile.format] = (FliImageFile, Image.OPEN[FliImagePlugin.FliImageFile.format][1])\r\n    label2 = createlabel(root, 'a.fli')\r\n    label2.pack()\r\n    root.mainloop()\r\n\r\nmain()\r\n```\r\nUsing a.fli found at https://samples.libav.org/fli-flc/\r\n\r\nTop image is what Pillow displays as-is. The bottom image uses my hack that loads the image at the end of _seek.\r\n\r\n![fli-bug](https://user-images.githubusercontent.com/10321049/28949712-9eb3f24a-788c-11e7-8780-6931c971724d.png)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2649/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634/events", "html_url": "https://github.com/python-pillow/Pillow/pull/2634", "id": 243722249, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMxMDkxOTk3", "number": 2634, "title": "Fix for memory leaks in font handling", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24", "html_url": "https://github.com/python-pillow/Pillow/milestone/24", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24/labels", "id": 2043828, "node_id": "MDk6TWlsZXN0b25lMjA0MzgyOA==", "number": 24, "title": "4.3.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2016-10-03T11:16:43Z", "updated_at": "2017-10-04T09:03:38Z", "due_on": "2017-10-01T07:00:00Z", "closed_at": "2017-10-04T09:03:38Z"}, "comments": 2, "created_at": "2017-07-18T13:48:44Z", "updated_at": "2017-10-02T13:33:22Z", "closed_at": "2017-09-04T10:23:58Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/2634", "html_url": "https://github.com/python-pillow/Pillow/pull/2634", "diff_url": "https://github.com/python-pillow/Pillow/pull/2634.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/2634.patch", "merged_at": "2017-09-04T10:23:58Z"}, "body": "Fixes #2629 .\r\n\r\nChanges proposed in this pull request:\r\n\r\n * Fix for memory leak in PILfont getsize\r\n * Fix for memory leak in truetype getsize\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2634/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2618", "id": 242577837, "node_id": "MDU6SXNzdWUyNDI1Nzc4Mzc=", "number": 2618, "title": "ImageDraw.floodfill not listed in docs", "user": {"login": "nediamond", "id": 8468587, "node_id": "MDQ6VXNlcjg0Njg1ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/8468587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nediamond", "html_url": "https://github.com/nediamond", "followers_url": "https://api.github.com/users/nediamond/followers", "following_url": "https://api.github.com/users/nediamond/following{/other_user}", "gists_url": "https://api.github.com/users/nediamond/gists{/gist_id}", "starred_url": "https://api.github.com/users/nediamond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nediamond/subscriptions", "organizations_url": "https://api.github.com/users/nediamond/orgs", "repos_url": "https://api.github.com/users/nediamond/repos", "events_url": "https://api.github.com/users/nediamond/events{/privacy}", "received_events_url": "https://api.github.com/users/nediamond/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-13T03:49:54Z", "updated_at": "2017-07-16T15:27:47Z", "closed_at": "2017-07-16T15:27:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Is this intentional? \r\n\r\nI ended up implementing my own version of it before I realized it was already in the library.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2617", "id": 242029509, "node_id": "MDU6SXNzdWUyNDIwMjk1MDk=", "number": 2617, "title": "docstring in \"Image.alpha_composite\" is wrong", "user": {"login": "baby5", "id": 12880800, "node_id": "MDQ6VXNlcjEyODgwODAw", "avatar_url": "https://avatars.githubusercontent.com/u/12880800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/baby5", "html_url": "https://github.com/baby5", "followers_url": "https://api.github.com/users/baby5/followers", "following_url": "https://api.github.com/users/baby5/following{/other_user}", "gists_url": "https://api.github.com/users/baby5/gists{/gist_id}", "starred_url": "https://api.github.com/users/baby5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/baby5/subscriptions", "organizations_url": "https://api.github.com/users/baby5/orgs", "repos_url": "https://api.github.com/users/baby5/repos", "events_url": "https://api.github.com/users/baby5/events{/privacy}", "received_events_url": "https://api.github.com/users/baby5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 86636749, "node_id": "MDU6TGFiZWw4NjYzNjc0OQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Documentation", "name": "Documentation", "color": "f7c6c7", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-11T12:27:12Z", "updated_at": "2017-07-16T15:22:53Z", "closed_at": "2017-07-16T15:22:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\ndef alpha_composite(self, im, dest=(0,0), source=(0,0)):\r\n\u00a0  \"\"\" 'In-place' analog of Image.alpha_composite. Composites an image\r\n\u00a0  onto this image.\r\n\u00a0  \u00a0\r\n\u00a0  :param im: image to composite over this one\r\n\u00a0  :param dest: Optional 2 tuple (top, left) specifying the upper\r\n\u00a0  left corner in this (destination) image.\r\n\u00a0  :param source: Optional 2 (top, left) tuple for the upper left\r\n\u00a0  corner in the overlay source image, or 4 tuple (top, left, bottom,\r\n\u00a0  right) for the bounds of the source rectangle\r\n\u00a0  \u00a0\r\n\u00a0  Performance Note: Not currently implemented in-place in the core layer.\r\n\u00a0  \"\"\"\r\n```\r\nthe func's param, \"dest\" and \"source\", should be (left, top) tuple, because:\r\n```python\r\n# line num 1416 of Image.py\r\nbox = dest + (dest[0] + overlay.width, dest[1] + overlay.height)\r\n```\r\ndest[0] will add overlay.width, so index 0 should be left coordinate, index 1 is top coordinate\r\nand:\r\n```python\r\n# line num 1413 of Image.py\r\noverlay = im.crop(source)\r\n# line num 1422 of Image.py\r\nbackground = self.crop(box)\r\n```\r\nImage.crop's param should be a (left, top, right, bottom) tuple.\r\nso there is wrong in docstring of the func\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2614", "id": 241043062, "node_id": "MDU6SXNzdWUyNDEwNDMwNjI=", "number": 2614, "title": "font.getsize fail with empty strings", "user": {"login": "iurisilvio", "id": 105852, "node_id": "MDQ6VXNlcjEwNTg1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/105852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iurisilvio", "html_url": "https://github.com/iurisilvio", "followers_url": "https://api.github.com/users/iurisilvio/followers", "following_url": "https://api.github.com/users/iurisilvio/following{/other_user}", "gists_url": "https://api.github.com/users/iurisilvio/gists{/gist_id}", "starred_url": "https://api.github.com/users/iurisilvio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iurisilvio/subscriptions", "organizations_url": "https://api.github.com/users/iurisilvio/orgs", "repos_url": "https://api.github.com/users/iurisilvio/repos", "events_url": "https://api.github.com/users/iurisilvio/events{/privacy}", "received_events_url": "https://api.github.com/users/iurisilvio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 192476144, "node_id": "MDU6TGFiZWwxOTI0NzYxNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-07-06T18:19:41Z", "updated_at": "2023-04-12T08:48:28Z", "closed_at": "2017-10-04T06:09:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\n```python\r\nfrom PIL import ImageFont\r\n\r\nfont = ImageFont.truetype(\r\n    '/usr/share/fonts/truetype/msttcorefonts/arial.ttf', 30)\r\nfont.getsize('', direction=None, features=None)\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nNot break. :)\r\n\r\n### What actually happened?\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 7, in <module>\r\n    print font.getsize('', None, None)\r\n  File \"local/lib/python2.7/site-packages/PIL/ImageFont.py\", line 156, in getsize\r\n    size, offset = self.font.getsize(text, direction, features)\r\nSystemError: error return without exception set\r\n```\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nIt works with 3.4.2 and breaks with 4.2.0. I didn't tried other versions yet.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2614/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2607", "id": 240246942, "node_id": "MDU6SXNzdWUyNDAyNDY5NDI=", "number": 2607, "title": "windows pypy/4.2.0", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/26", "html_url": "https://github.com/python-pillow/Pillow/milestone/26", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/26/labels", "id": 2619533, "node_id": "MDk6TWlsZXN0b25lMjYxOTUzMw==", "number": 26, "title": "4.2.1", "description": "", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2017-07-03T19:11:17Z", "updated_at": "2017-07-17T09:21:04Z", "due_on": null, "closed_at": "2017-07-17T09:21:04Z"}, "comments": 3, "created_at": "2017-07-03T19:09:32Z", "updated_at": "2017-07-04T06:02:32Z", "closed_at": "2017-07-04T06:02:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hoisted from https://github.com/python-pillow/Pillow/issues/2567#issuecomment-312707616\r\n\r\n@CTPaHHuK-HEbA commented:\r\n\r\nWindows, pypy:\r\n```\r\n  File \"C:\\Python27\\pypy\\site-packages\\PIL\\Image.py\", line 63, in <module>\r\n    PILLOW_VERSION))\r\nImportError: The _imaging extension was built for another version of Pillow or PIL: Core Version: \"4.2.0\"Pillow Version:  4.2.0\r\n```\r\n'\"4.2.0\"' != '4.2.0'\r\n\r\n----\r\n\r\nApparently the distutils on pypy are different on windows, and we're not testing pypy on appveyor. \r\n\r\n@cgohlke mentioned that the pypy build was non-functional, perhaps this is the reason. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2578", "id": 236606205, "node_id": "MDU6SXNzdWUyMzY2MDYyMDU=", "number": 2578, "title": "ParryHotter font isn't displayed", "user": {"login": "Zuzu-Typ", "id": 20467351, "node_id": "MDQ6VXNlcjIwNDY3MzUx", "avatar_url": "https://avatars.githubusercontent.com/u/20467351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zuzu-Typ", "html_url": "https://github.com/Zuzu-Typ", "followers_url": "https://api.github.com/users/Zuzu-Typ/followers", "following_url": "https://api.github.com/users/Zuzu-Typ/following{/other_user}", "gists_url": "https://api.github.com/users/Zuzu-Typ/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zuzu-Typ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zuzu-Typ/subscriptions", "organizations_url": "https://api.github.com/users/Zuzu-Typ/orgs", "repos_url": "https://api.github.com/users/Zuzu-Typ/repos", "events_url": "https://api.github.com/users/Zuzu-Typ/events{/privacy}", "received_events_url": "https://api.github.com/users/Zuzu-Typ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 631332188, "node_id": "MDU6TGFiZWw2MzEzMzIxODg=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Fonts", "name": "Fonts", "color": "bfd4f2", "default": false, "description": null}, {"id": 1357140650, "node_id": "MDU6TGFiZWwxMzU3MTQwNjUw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Platform", "name": "Platform", "color": "5319e7", "default": false, "description": "A catchall for platform-related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2017-06-16T21:45:46Z", "updated_at": "2022-10-03T02:47:02Z", "closed_at": "2022-10-03T02:47:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI tried to create a text using the font \"ParryHotter\" (using the code below)\r\n### What did you expect to happen?\r\nI expected to see an image with the text \"Parry Hotter\" in the corresponding font\r\n### What actually happened?\r\nA blank image opened\r\n### What versions of Pillow and Python are you using?\r\nPython 2.7.13 and 3.6.1\r\nPillow 4.1.1\r\nPlease include **code** that reproduces the issue and whenever possible, an **image** that demonstrates the issue. Please upload images to GitHub, not to third-party file hosting sites. If necessary, add the image to a zip or tar archive.\r\n\r\nThe best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, Django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```python\r\nfrom PIL import Image, ImageFont, ImageDraw\r\n\r\nfont = ImageFont.truetype(\"parryhotter.ttf\", 20)\r\n\r\nimage = Image.new(\"RGBA\", font.getsize(\"Parry Hotter\"))\r\n\r\ndraw = ImageDraw.Draw(image)\r\n\r\ndraw.text((0,0),\"Parry Hotter\", font=font)\r\n\r\nimage.show()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2578/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2572", "id": 234880415, "node_id": "MDU6SXNzdWUyMzQ4ODA0MTU=", "number": 2572, "title": "How to render stacked Tibetan letters", "user": {"login": "serser", "id": 3620404, "node_id": "MDQ6VXNlcjM2MjA0MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3620404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/serser", "html_url": "https://github.com/serser", "followers_url": "https://api.github.com/users/serser/followers", "following_url": "https://api.github.com/users/serser/following{/other_user}", "gists_url": "https://api.github.com/users/serser/gists{/gist_id}", "starred_url": "https://api.github.com/users/serser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/serser/subscriptions", "organizations_url": "https://api.github.com/users/serser/orgs", "repos_url": "https://api.github.com/users/serser/repos", "events_url": "https://api.github.com/users/serser/events{/privacy}", "received_events_url": "https://api.github.com/users/serser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 631332188, "node_id": "MDU6TGFiZWw2MzEzMzIxODg=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Fonts", "name": "Fonts", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 20, "created_at": "2017-06-09T16:38:00Z", "updated_at": "2022-02-10T23:25:37Z", "closed_at": "2022-02-10T23:25:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello Pillow folks, I've come across this issue with stacked texts in Tibetan (po-ed stackoverflow question [here)](https://stackoverflow.com/questions/44394027/problems-writing-tibetan-stacked-texts-with-imagedraw).\r\n\r\n```python\r\nfrom PIL import Image, ImageFont, ImageDraw\r\nimport matplotlib.pyplot as plt\r\n\r\ntest_letters = [u'\u0f40', u'\u0f62',u\"\u0f66\u0fa4\",u'\u0f62\u0f90',u'\u0f04',u'\u0f40\u0fb1',u'\u0f5b\u0fb7']\r\n\r\nfont = ImageFont.truetype(\"/Libarary/Fonts/Kokonor.ttf\", 20, encoding='unic')\r\n\r\nfor letter in test_letters:\r\n    img = Image.new(\"RGBA\", (28, 28))\r\n    draw = ImageDraw.Draw(img)\r\n    draw.text((6, 0),letter,(0,0,0),font)\r\n    plt.imshow(img)\r\n    plt.grid()\r\n    plt.show()\r\n```\r\nOne of the output is like this one, displayed apart.\r\n![image](https://user-images.githubusercontent.com/3620404/26985103-a00fd1ec-4d74-11e7-8748-5b1fc9f99ebb.png).\r\n\r\nThere are some links on Tibetan font rendering, which might of some value. \r\n1. https://www.microsoft.com/typography/OpenTypeDev/tibetan/intro.htm\r\n2. http://digitaltibetan.org/index.php/Formatting_rules_for_Tibetan_text\r\n3. https://collab.its.virginia.edu/wiki/tibetan-script/Using%20Tibetan%20in%20Macintoshes.html\r\n\r\nThanks for any illumination.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2572/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2563", "id": 232816129, "node_id": "MDU6SXNzdWUyMzI4MTYxMjk=", "number": 2563, "title": "Build issues on FreeBSD if two versions of openjpeg are installed", "user": {"login": "melvyn-sopacua", "id": 3591955, "node_id": "MDQ6VXNlcjM1OTE5NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/3591955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melvyn-sopacua", "html_url": "https://github.com/melvyn-sopacua", "followers_url": "https://api.github.com/users/melvyn-sopacua/followers", "following_url": "https://api.github.com/users/melvyn-sopacua/following{/other_user}", "gists_url": "https://api.github.com/users/melvyn-sopacua/gists{/gist_id}", "starred_url": "https://api.github.com/users/melvyn-sopacua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melvyn-sopacua/subscriptions", "organizations_url": "https://api.github.com/users/melvyn-sopacua/orgs", "repos_url": "https://api.github.com/users/melvyn-sopacua/repos", "events_url": "https://api.github.com/users/melvyn-sopacua/events{/privacy}", "received_events_url": "https://api.github.com/users/melvyn-sopacua/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 35418450, "node_id": "MDU6TGFiZWwzNTQxODQ1MA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Installation", "name": "Installation", "color": "d7e102", "default": false, "description": "Usually a problem with \u2026"}, {"id": 242311159, "node_id": "MDU6TGFiZWwyNDIzMTExNTk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Linux", "name": "Linux", "color": "006b75", "default": false, "description": null}, {"id": 341437791, "node_id": "MDU6TGFiZWwzNDE0Mzc3OTE=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Library%20Linking", "name": "Library Linking", "color": "d4c5f9", "default": false, "description": null}, {"id": 631318417, "node_id": "MDU6TGFiZWw2MzEzMTg0MTc=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/FreeBSD", "name": "FreeBSD", "color": "0052cc", "default": false, "description": null}, {"id": 1357140650, "node_id": "MDU6TGFiZWwxMzU3MTQwNjUw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Platform", "name": "Platform", "color": "5319e7", "default": false, "description": "A catchall for platform-related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2017-06-01T09:20:56Z", "updated_at": "2023-04-06T09:10:46Z", "closed_at": "2023-04-06T09:10:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Related\r\n[PR 2554](https://github.com/python-pillow/Pillow/pull/2544)\r\n\r\nRecap: `/usr/local/include` is inserted before `/usr/local/include/openjpeg-2.1`, which causes problems if two versions of openjpeg are installed.\r\n\r\n### Observations:\r\n\r\n1. It sometimes succeeds even without the fix in mentioned PR.\r\n2. The version specific directory is added twice.\r\n3. When it succeeds, openjpeg is the first package tried.\r\n4. As a result, converting the inline dict in the for loop in build_extensions to a `collections.OrderedDict` also resolves the issue.\r\n\r\n### Root cause\r\nOrdering aside, the root cause is that packages are essentially configured twice in different ways. First `pkg-config` is used and then best guess directory searches are used to do the same thing.\r\n\r\n### Possible solutions\r\nIf this were to be fixed without the insert override from the PR, then fixing it relies on kits ordering. Not ideal.\r\nA more generic approach is to use the following order of events:\r\n\r\n1. Based on the platform, add the needed \"generic\" directories, so top-level \"lib\" and \"include\" paths.\r\n2. Go through the pkg-config loop, but always prepend directories (in the reverse order as returned by pkg-config). Set state for found libraries.\r\n3. Add available libraries, but only those not already configured by pkg-config.\r\n\r\n### Analysis\r\nSince this braindead OpenJPEG versioning is likely to be an exception, as is having two versions installed, the current fix from the PR looks \"good enough\" to me, but if maintainers want the approach from above, I'm happy to make a new PR as I'm in a good position to test it.\r\n\r\nI do not actually understand, why packages found by `pkg-config` are revisited in the \"feature\" code, so that would have to be explained.\r\n\r\nP.S.: I pretty much expect the choice will be made to not go for an elaborate fix and as such this issue logs the problem and causes.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2563/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2545", "id": 231800258, "node_id": "MDU6SXNzdWUyMzE4MDAyNTg=", "number": 2545, "title": "Ghostscript test failure on FreeBSD", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 242311159, "node_id": "MDU6TGFiZWwyNDIzMTExNTk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Linux", "name": "Linux", "color": "006b75", "default": false, "description": null}, {"id": 631318417, "node_id": "MDU6TGFiZWw2MzEzMTg0MTc=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/FreeBSD", "name": "FreeBSD", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-27T13:10:01Z", "updated_at": "2019-06-22T05:12:17Z", "closed_at": "2019-06-22T05:12:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "One test is failing on FreeBSD 10.3 and 11.0 with the ghostscript-agpl package installed.  This is python version independent. Pillow 4.1.1 tested.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/home/erics/Pillow/Tests/test_file_eps.py\", line 152, in test_resize\r\n    image3 = image3.resize(new_size)\r\n  File \"/home/erics/vpy36/lib/python3.6/site-packages/Pillow-4.1.1-py3.6-freebsd-11.0-RELEASE-p9-amd64.egg/PIL/Image.py\", line 1630, in resize\r\n    self.load()\r\n  File \"/home/erics/vpy36/lib/python3.6/site-packages/Pillow-4.1.1-py3.6-freebsd-11.0-RELEASE-p9-amd64.egg/PIL/EpsImagePlugin.py\", line 332, in load\r\n    self.im = Ghostscript(self.tile, self.size, self.fp, scale)\r\n  File \"/home/erics/vpy36/lib/python3.6/site-packages/Pillow-4.1.1-py3.6-freebsd-11.0-RELEASE-p9-amd64.egg/PIL/EpsImagePlugin.py\", line 141, in Ghostscript\r\n    subprocess.check_call(command, stdin=devnull, stdout=devnull)\r\n  File \"/usr/local/lib/python3.6/subprocess.py\", line 291, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '['gs', '-q', '-g403x2448', '-r72.000000x72.000000', '-dNOPAUSE', '-dSAFER', '-sDEVICE=ppmraw', '-sOutputFile=/tmp/tmp91y5qlwq', '-c', '0 0 translate', '-f', 'Tests/images/illu10_preview.eps']' returned non-zero exit status 1.\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2543", "id": 231519581, "node_id": "MDU6SXNzdWUyMzE1MTk1ODE=", "number": 2543, "title": "Read and write some gifs wrong, with \"artifacts\". \"optimize\" doesn't work", "user": {"login": "pl7ofit", "id": 12739270, "node_id": "MDQ6VXNlcjEyNzM5Mjcw", "avatar_url": "https://avatars.githubusercontent.com/u/12739270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pl7ofit", "html_url": "https://github.com/pl7ofit", "followers_url": "https://api.github.com/users/pl7ofit/followers", "following_url": "https://api.github.com/users/pl7ofit/following{/other_user}", "gists_url": "https://api.github.com/users/pl7ofit/gists{/gist_id}", "starred_url": "https://api.github.com/users/pl7ofit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pl7ofit/subscriptions", "organizations_url": "https://api.github.com/users/pl7ofit/orgs", "repos_url": "https://api.github.com/users/pl7ofit/repos", "events_url": "https://api.github.com/users/pl7ofit/events{/privacy}", "received_events_url": "https://api.github.com/users/pl7ofit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-05-26T03:56:08Z", "updated_at": "2021-12-06T18:58:23Z", "closed_at": "2021-12-06T18:58:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI read each frame of the gif, and then write them to a file.\r\n### What did you expect to happen?\r\nThat everything will work without a headache =)\r\n### What actually happened?\r\nSome gif files wrote with artifacts and \"optimize\" doesn't work\r\npic2.gif\r\n![Gif \u21162](https://2.downloader.disk.yandex.ru/disk/677207113ada27dc0fab71259e44cd3725ac6a3d927ef9eb8b773b8a703191ec/5927db88/qHKJXPm8T_Yg-00ZS7B2R9Eu3HgL8ZXiUw_6PMyOiWJCwBbj8eNaE-jssUUjmwPMIquycemV-27eQO8rbj38Og%3D%3D?uid=0&filename=bad_gif2.png&disposition=inline&hash=&limit=0&content_type=image%2Fpng&fsize=303799&hid=428e605b9b7d14be21ca971df4ebcc88&media_type=image&tknv=v2&etag=4132b128b991c576c279690aee59b53a)\r\n\r\npic6.gif\r\n![Gif \u21166](https://3.downloader.disk.yandex.ru/disk/f9c5f6387dbbea3b5b7aaa03b87a551d66a2bb261df4d6163488f7289ac18bfe/5927dbd3/qHKJXPm8T_Yg-00ZS7B2R8uWSZVMg0cbzY78lUo11U6XuGiIpKe-cJ6Chmf9L325huqtkVWjwa8ujGdihECkEw%3D%3D?uid=0&filename=bad_gif6.png&disposition=inline&hash=&limit=0&content_type=image%2Fpng&fsize=360587&hid=9afda8ba56aac0ee090c8f0817c9c795&media_type=image&tknv=v2&etag=1dcedbbd1460e6187aacfc56c0adc17f)\r\n\r\nI think compare successful and unsuccessful gifs will be right. Therefore I downloaded the gifs archive\r\n[\"Bad\" and \"good\" gifs tar archive](https://yadi.sk/d/msIkj1bN3JXrkR)\r\n\r\n### What versions of Pillow and Python are you using?\r\nPillow-4.1.1-cp35-cp35m-manylinux1_x86_64.whl\r\nPython 3.5.2\r\nUbuntu 16.04.2 amd64\r\n```python\r\nfrom PIL import Image, ImageChops, ImageSequence\r\n\r\nf = Image.open('file.gif')\r\nframes = []\r\nframesIterator = ImageSequence.Iterator(f)\r\nfor frame in [ frame.copy() for frame in framesIterator ]: frames.append(frame)\r\nframe.save('out.gif', save_all=True, optimize=True, append_images=frames)\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2518", "id": 227850411, "node_id": "MDU6SXNzdWUyMjc4NTA0MTE=", "number": 2518, "title": "Spider file with last line black", "user": {"login": "Marriaga", "id": 13881436, "node_id": "MDQ6VXNlcjEzODgxNDM2", "avatar_url": "https://avatars.githubusercontent.com/u/13881436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Marriaga", "html_url": "https://github.com/Marriaga", "followers_url": "https://api.github.com/users/Marriaga/followers", "following_url": "https://api.github.com/users/Marriaga/following{/other_user}", "gists_url": "https://api.github.com/users/Marriaga/gists{/gist_id}", "starred_url": "https://api.github.com/users/Marriaga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Marriaga/subscriptions", "organizations_url": "https://api.github.com/users/Marriaga/orgs", "repos_url": "https://api.github.com/users/Marriaga/repos", "events_url": "https://api.github.com/users/Marriaga/events{/privacy}", "received_events_url": "https://api.github.com/users/Marriaga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-11T00:58:29Z", "updated_at": "2022-01-15T16:14:59Z", "closed_at": "2022-01-15T16:14:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI ran the code below and then open the image in Fiji (ImageJ)\r\n\r\n### What did you expect to happen?\r\n\r\nCreate an image with a gradient that goes from 0 to 1 diagonally\r\n\r\n### What actually happened?\r\n\r\nCreated the image correctly but the last row of pixels is 0 (black). I don't know if this is a problem of Pillow in saving to spi or of imagej in opening spi.\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\n4.1.1\r\n\r\n```python\r\nfrom __future__ import division\r\nfrom PIL import Image\r\nimport numpy as np\r\n\r\ndef gradient(i,j,S):\r\n    return 1/2*(i+j)/(S-1)\r\n\r\n# Create Image\r\nS=512\r\nMpix=np.fromfunction(gradient,(S,S),dtype=np.float32,S=S)\r\nImg=Image.fromarray(Mpix,mode=\"F\")\r\n\r\n# Save Image\r\nImg.save(\"TestPIL_32.spi\",\"spider\")\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2514", "id": 227533366, "node_id": "MDU6SXNzdWUyMjc1MzMzNjY=", "number": 2514, "title": "Wrong error handling in C Extensions (_webp.c)", "user": {"login": "adw1n", "id": 8993001, "node_id": "MDQ6VXNlcjg5OTMwMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8993001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adw1n", "html_url": "https://github.com/adw1n", "followers_url": "https://api.github.com/users/adw1n/followers", "following_url": "https://api.github.com/users/adw1n/following{/other_user}", "gists_url": "https://api.github.com/users/adw1n/gists{/gist_id}", "starred_url": "https://api.github.com/users/adw1n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adw1n/subscriptions", "organizations_url": "https://api.github.com/users/adw1n/orgs", "repos_url": "https://api.github.com/users/adw1n/repos", "events_url": "https://api.github.com/users/adw1n/events{/privacy}", "received_events_url": "https://api.github.com/users/adw1n/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-10T00:14:40Z", "updated_at": "2017-05-14T11:51:23Z", "closed_at": "2017-05-14T11:51:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### What versions of Pillow are you using?\r\nPillow version 4.2.0.dev0 -  branch `master` from 10min ago (commit 1e0fbc0f1a524413e6fe77d0cb8de6b1be781302).\r\n\r\n### Issue\r\nYou made a mistake in the way you handle exceptions returned by basic functions like `PyArg_ParseTuple`. \r\nExamples:\r\nhttps://github.com/python-pillow/Pillow/blob/master/_webp.c#L32\r\nhttps://github.com/python-pillow/Pillow/blob/master/_webp.c#L148\r\nInstead of doing:\r\n```C\r\nreturn NULL;\r\n```\r\nyou are doing:\r\n```C\r\nPy_RETURN_NONE;\r\n```\r\nWhy does it matter?\r\na) error may not be signalized to the user\r\nIn python >=3.5 error will be signalized because of https://bugs.python.org/issue23571 but instead of `TypeError`,  `SystemError` will be thrown.\r\nexample:\r\n``` python\r\nimport PIL._webp\r\nPIL._webp.WebPDecode()\r\nTypeError: function takes exactly 1 argument (0 given)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nSystemError: <built-in function WebPDecode> returned a result with an error set\r\n```\r\nexpected (correct) behaviour would be:\r\n```python\r\nimport PIL._webp\r\nPIL._webp.WebPDecode()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: function takes exactly 1 argument (0 given)\r\n```\r\n\r\n\r\nFor example this code in python 2.7.10 and 3.4.3 does not raise an error at all!\r\n```\r\nimport PIL._webp\r\nPIL._webp.WebPEncode()\r\n```\r\nb) error does not get cleared\r\nPython 2.7.10 or 3.4.3\r\n```python\r\n>>> import PIL._webp\r\n>>> a=PIL._webp.WebPDecode()\r\n>>> type(a)\r\nTypeError: function takes exactly 1 argument (0 given)\r\n>>> type(a)\r\n<type 'NoneType'>\r\n```\r\n\r\n\r\nUnit test:\r\n```python\r\nimport unittest\r\nimport PIL._webp\r\n\r\n\r\nclass TestWebpErrorHandling(unittest.TestCase):\r\n    def test_WebPEncode_invalid_num_of_args_raises_type_error(self):\r\n        with self.assertRaises(TypeError):\r\n            PIL._webp.WebPEncode()\r\n    def test_WebPDecode_invalid_num_of_args_raises_type_error(self):\r\n        with self.assertRaises(TypeError):\r\n            PIL._webp.WebPDecode()\r\n\r\n\r\nif __name__ == '__main__':\r\n    unittest.main()\r\n```\r\n\r\nAfter running the test using Python 3.4.3:\r\n```\r\nEE\r\n======================================================================\r\nERROR: test_WebPDecode_invalid_num_of_args_raises_type_error (__main__.TestWebpErrorHandling)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 11, in test_WebPDecode_invalid_num_of_args_raises_type_error\r\n    a=PIL._webp.WebPDecode()\r\n  File \"/usr/lib/python3.4/unittest/case.py\", line 181, in __exit__\r\n    self._raiseFailure(\"{} not raised\".format(exc_name))\r\nTypeError: function takes exactly 1 argument (0 given)\r\n\r\n======================================================================\r\nERROR: test_WebPEncode_invalid_num_of_args_raises_type_error (__main__.TestWebpErrorHandling)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 8, in test_WebPEncode_invalid_num_of_args_raises_type_error\r\n    PIL._webp.WebPEncode()\r\n  File \"/usr/lib/python3.4/unittest/case.py\", line 181, in __exit__\r\n    self._raiseFailure(\"{} not raised\".format(exc_name))\r\nTypeError: function takes exactly 8 arguments (0 given)\r\n\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.006s\r\n\r\nFAILED (errors=2)\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2491", "id": 222672373, "node_id": "MDU6SXNzdWUyMjI2NzIzNzM=", "number": 2491, "title": "Check ImageFile.py decoder.cleanup on load", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-19T09:17:32Z", "updated_at": "2018-12-24T00:52:04Z", "closed_at": "2018-12-24T00:52:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Suspect that if we get an `IndexError` or `struct.error` here, we leak the decoder:\r\n\r\n```python\r\n                    while True:\r\n                        try:\r\n                            s = read(self.decodermaxblock)\r\n                        except (IndexError, struct.error):  # truncated png/gif\r\n                            if LOAD_TRUNCATED_IMAGES:\r\n                                break\r\n                            else:\r\n                                raise IOError(\"image file is truncated\")\r\n\r\n                        if not s:  # truncated jpeg\r\n                            self.tile = []\r\n\r\n                            # JpegDecode needs to clean things up here either way\r\n                            # If we don't destroy the decompressor,\r\n                            # we have a memory leak.\r\n                            decoder.cleanup()\r\n\r\n                            if LOAD_TRUNCATED_IMAGES:\r\n                                break\r\n                            else:\r\n                                raise IOError(\"image file is truncated \"\r\n                                              \"(%d bytes not processed)\" % len(b))\r\n\r\n                        b = b + s\r\n                        n, err_code = decoder.decode(b)\r\n                        if n < 0:\r\n                            break\r\n                        b = b[n:]\r\n\r\n                # Need to cleanup here to prevent leaks in PyPy\r\n                decoder.cleanup()\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2491/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2481", "id": 220792778, "node_id": "MDU6SXNzdWUyMjA3OTI3Nzg=", "number": 2481, "title": "Images no more read with Pillow 4.1.0", "user": {"login": "saimn", "id": 311639, "node_id": "MDQ6VXNlcjMxMTYzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/311639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saimn", "html_url": "https://github.com/saimn", "followers_url": "https://api.github.com/users/saimn/followers", "following_url": "https://api.github.com/users/saimn/following{/other_user}", "gists_url": "https://api.github.com/users/saimn/gists{/gist_id}", "starred_url": "https://api.github.com/users/saimn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saimn/subscriptions", "organizations_url": "https://api.github.com/users/saimn/orgs", "repos_url": "https://api.github.com/users/saimn/repos", "events_url": "https://api.github.com/users/saimn/events{/privacy}", "received_events_url": "https://api.github.com/users/saimn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/25", "html_url": "https://github.com/python-pillow/Pillow/milestone/25", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/25/labels", "id": 2466223, "node_id": "MDk6TWlsZXN0b25lMjQ2NjIyMw==", "number": 25, "title": "4.1.1", "description": "", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2017-04-19T09:45:25Z", "updated_at": "2017-05-05T09:37:34Z", "due_on": null, "closed_at": "2017-05-05T09:36:59Z"}, "comments": 6, "created_at": "2017-04-10T22:51:38Z", "updated_at": "2017-04-19T11:10:45Z", "closed_at": "2017-04-19T11:10:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nOpened images, get their size etc. For a number of images it now fails with Pillow 4.1 (https://travis-ci.org/saimn/sigal/jobs/220063296 for instance).\r\n\r\n### What did you expect to happen?\r\n\r\n### What actually happened?\r\n\r\nAn exception: `OSError: cannot identify image file`\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nPlease include code that reproduces the issue and whenever possible, an image that demonstrates the issue. The best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, django, or buildout, try to replicate the issue just using Pillow. \r\n\r\nWith this image: https://github.com/saimn/sigal/blob/master/tests/sample/pictures/dir2/exo20101028-b-full.jpg\r\n\r\nWith Pillow 4.0:\r\n```\r\nIn [1]: import PIL\r\n\r\nIn [2]: PIL.PILLOW_VERSION\r\nOut[2]: '4.0.0'\r\n\r\nIn [3]: from PIL import Image\r\n\r\nIn [4]: Image.open('tests/sample/pictures/dir2/exo20101028-b-full.jpg')\r\nOut[4]: <PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=800x651 at 0x7FC7A081A320>\r\n\r\nIn [5]: Image.open('tests/sample/pictures/dir2/exo20101028-b-full.jpg').size\r\nOut[5]: (800, 651)\r\n```\r\n\r\nWith Pillow 4.1:\r\n```\r\nIn [1]: import PIL\r\n\r\nIn [2]: PIL.PILLOW_VERSION\r\nOut[2]: '4.1.0'\r\n\r\nIn [3]: from PIL import Image\r\n\r\nIn [4]: Image.open('tests/sample/pictures/dir2/exo20101028-b-full.jpg')\r\n---------------------------------------------------------------------------\r\nOSError                                   Traceback (most recent call last)\r\n<ipython-input-4-8014aa965ecb> in <module>()\r\n----> 1 Image.open('tests/sample/pictures/dir2/exo20101028-b-full.jpg')\r\n\r\n/home/simon/miniconda3/envs/sigal/lib/python3.6/site-packages/PIL/Image.py in open(fp, mode)\r\n   2450         fp.close()\r\n   2451     raise IOError(\"cannot identify image file %r\"\r\n-> 2452                   % (filename if filename else fp))\r\n   2453 \r\n   2454 #\r\n\r\nOSError: cannot identify image file 'tests/sample/pictures/dir2/exo20101028-b-full.jpg'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2454", "id": 216036862, "node_id": "MDU6SXNzdWUyMTYwMzY4NjI=", "number": 2454, "title": "Different font rendering in Alpine/Ubuntu", "user": {"login": "misisnik", "id": 6463319, "node_id": "MDQ6VXNlcjY0NjMzMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/6463319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/misisnik", "html_url": "https://github.com/misisnik", "followers_url": "https://api.github.com/users/misisnik/followers", "following_url": "https://api.github.com/users/misisnik/following{/other_user}", "gists_url": "https://api.github.com/users/misisnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/misisnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/misisnik/subscriptions", "organizations_url": "https://api.github.com/users/misisnik/orgs", "repos_url": "https://api.github.com/users/misisnik/repos", "events_url": "https://api.github.com/users/misisnik/events{/privacy}", "received_events_url": "https://api.github.com/users/misisnik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-22T11:53:22Z", "updated_at": "2017-06-21T12:52:24Z", "closed_at": "2017-06-21T12:52:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI want to put truetype font into the pucture in Alpine linux and this picture save or get bits values (load()).\r\nThis module I using in my user interface graphic display.\r\n\r\n### What did you expect to happen?\r\nRender text correctly due to font and font size\r\n\r\n### What actually happened?\r\nActually in Ubuntu everything works fine:\r\nUbuntu example: [http://i.imgur.com/e9TuHJl.jpg](http://i.imgur.com/e9TuHJl.jpg)\r\n![image](https://cloud.githubusercontent.com/assets/1324225/24204878/7d64563a-0f22-11e7-8c4f-7d3ead9e77cb.png)\r\n\r\nbut in Alpine text is rendering wrong:\r\nAlpine example: [http://i.imgur.com/uKfA1wX.jpg](http://i.imgur.com/uKfA1wX.jpg)\r\n![image](https://cloud.githubusercontent.com/assets/1324225/24204891/83659954-0f22-11e7-9f7e-2fac0a517a96.png)\r\n\r\n### What versions of Pillow and Python are you using?\r\nVersion of Python is 3.5 (Ubuntu and Alpine are same)\r\nVersion of Pillow is 4.0.0 (Ubuntu and Alpine are same)\r\n\r\n```python\r\nfrom PIL import Image\r\nfrom PIL import ImageDraw\r\nfrom PIL import ImageFont\r\n\r\nimage = Image.new('1', (192, 64))\r\ndraw = ImageDraw.Draw(image)\r\n\r\nfont = ImageFont.truetype('fnt/arial.ttf', 10)\r\ndraw.text((0,0), 'Hello world!', font=font, fill = 1)\r\n\r\nfont = ImageFont.truetype('fnt/arial.ttf', 15)\r\ndraw.text((0,15), 'Hello world!', font=font, fill = 1)\r\n\r\nfont = ImageFont.truetype('fnt/arial.ttf', 20)\r\ndraw.text((0,40), 'Hello world!', font=font, fill = 1)\r\n\r\nimage.save('test', 'JPEG')\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2451", "id": 215214697, "node_id": "MDU6SXNzdWUyMTUyMTQ2OTc=", "number": 2451, "title": "Images with Alpha of 0 have performance issues", "user": {"login": "simonschofield", "id": 8928565, "node_id": "MDQ6VXNlcjg5Mjg1NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8928565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonschofield", "html_url": "https://github.com/simonschofield", "followers_url": "https://api.github.com/users/simonschofield/followers", "following_url": "https://api.github.com/users/simonschofield/following{/other_user}", "gists_url": "https://api.github.com/users/simonschofield/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonschofield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonschofield/subscriptions", "organizations_url": "https://api.github.com/users/simonschofield/orgs", "repos_url": "https://api.github.com/users/simonschofield/repos", "events_url": "https://api.github.com/users/simonschofield/events{/privacy}", "received_events_url": "https://api.github.com/users/simonschofield/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-03-18T19:08:09Z", "updated_at": "2017-06-21T12:57:37Z", "closed_at": "2017-06-21T12:57:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nI am doing multiple (like thousands of) image composites using Image.alpha_composite() onto a large target image with initial colour of (255,255,255,0) i.e. a transparent image.\r\n### What did you expect to happen?\r\nThat there would be a steady performance over time\r\n### What actually happened?\r\n I notice the system slowing down over time. When I changed the initial colour of the target image to (255,255,255, 1) i.e. _almost_ transparent, it ran much faster, and did not slow down. \r\nThe slowing-down was significant; it started at 0.03 secs per composite but slowed to 0.33 secs per composite in about 1000 operations. \r\n### What versions of Pillow and Python are you using?\r\nOld stuff, admittedly. Pillow 2.4, Python 3.0 32bit\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2451/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2438", "id": 211663866, "node_id": "MDU6SXNzdWUyMTE2NjM4NjY=", "number": 2438, "title": "Enable DPI Scaling Awareness", "user": {"login": "yabbas", "id": 632705, "node_id": "MDQ6VXNlcjYzMjcwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/632705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yabbas", "html_url": "https://github.com/yabbas", "followers_url": "https://api.github.com/users/yabbas/followers", "following_url": "https://api.github.com/users/yabbas/following{/other_user}", "gists_url": "https://api.github.com/users/yabbas/gists{/gist_id}", "starred_url": "https://api.github.com/users/yabbas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yabbas/subscriptions", "organizations_url": "https://api.github.com/users/yabbas/orgs", "repos_url": "https://api.github.com/users/yabbas/repos", "events_url": "https://api.github.com/users/yabbas/events{/privacy}", "received_events_url": "https://api.github.com/users/yabbas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}, {"id": 1357368813, "node_id": "MDU6TGFiZWwxMzU3MzY4ODEz", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Screen%20grab", "name": "Screen grab", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-03T11:28:48Z", "updated_at": "2019-09-30T10:04:11Z", "closed_at": "2019-09-30T09:50:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nTried to grab a screenshot with pyautogui.  This passes control over to Pillow's imagegrab.\r\n\r\n### What did you expect to happen?\r\nA screenshot of the entire screen.\r\n\r\n### What actually happened?\r\nThe top left corner of the screen (1/4) was saved.\r\n\r\n### What versions of Pillow and Python are you using?\r\nPython 3.6, Pillow 4.00\r\n\r\nPlease include code that reproduces the issue and whenever possible, an image that demonstrates the issue. The best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, django, or buildout, try to replicate the issue just using Pillow. \r\n\r\n```python\r\nPIL.ImageGrab.grab(bbox=None)\r\n<PIL.Image.Image image mode=RGB size=1600x900 at 0x132A0D5F898>\r\n# screen resolution is actually 3200x1800\r\n```\r\n\r\n\r\nFix - making the App DPI Aware:\r\nhttps://github.com/asweigart/pyautogui/issues/33#issuecomment-236981496", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2438/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2433", "id": 211044818, "node_id": "MDU6SXNzdWUyMTEwNDQ4MTg=", "number": 2433, "title": "Failure when converting Gif w/RGBA palette to 'P' mode", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-01T10:50:59Z", "updated_at": "2021-06-27T08:10:16Z", "closed_at": "2018-07-14T11:40:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hoisting this from the bottom of #646, as it's actually another issue. Fundamentally, there's a weird palette thing going on. \r\n\r\nThere's an image https://cdn.technologynetworks.com/tn/images/adverts/malvern-inline-rectangle-banner-31st-jan-2017.gif which causes failures in master / 4.0.0 and back a ways when doing:\r\n```python\r\nim = Image.open(path)\r\nim.save('temp.gif', save_all=True)\r\n```\r\n\r\nThe save loop is fixed in #2374:  'fix' is this line: https://github.com/python-pillow/Pillow/pull/2374/commits/951e628aaa0b3b503f561b0f1a99364c12ec2f72#diff-0dca57e5083a5edca008f241582088f5R297  (verified by checking effectively the same change on master) Where instead of converting it to `P`, we're just copying the image/frame. \r\n\r\nSo, this was accidentally fixed.\r\n\r\nIt looks like the underlying issue is as simple to trigger as:\r\n```python\r\nfrom PIL import Image\r\nim = Image.open('issue_646.gif')\r\nim_p = im.convert('P')\r\nim_p.load()  # boom\r\n```\r\n\r\nHowever, this does not trigger with `hopper.gif`, so it looks like we need an `RGBA` palette to trigger this.  If the palette mode is `RGBA`, and the palette is dirty, we get the failure.  \r\n\r\nIt doesn't look like the Gif _open/load is the issue, as it doesn't do anything that contains an `RGBA` palette, it's all `RGB`.\r\n\r\n```pycon\r\n>>> im.palette.__dict__\r\n{'rawmode': 'RGB', 'palette': '\\xdbB\\x03...\\xff\\xff\\xff', 'dirty': 1, 'colors': {}, 'mode': 'RGB'}\r\n>>> im.load()\r\n<PixelAccess object at 0x7f3835c48970>\r\n>>> im.palette.__dict__\r\n{'rawmode': None, 'palette': '\\xdbB\\x03...\\xff\\xff\\xff', 'dirty': 0, 'colors': {}, 'mode': 'RGBA'}\r\n>>> im.info\r\n{'background': 255, 'extension': ('XMP DataXMP', 814), 'version': 'GIF89a', 'transparency': 255, 'duration': 1500, 'loop': 0}\r\n```\r\n\r\nSo, load is giving us an `RGBA` palette from an `RGB` palette and a transparency index.\r\n\r\n```pycon\r\n>>> im2 = Image.open('Tests/images/hopper.gif')\r\n>>> im2.info['transparency'] = 255\r\n>>> im2.palette.__dict__\r\n{'rawmode': 'RGB', 'palette': '\\x0c\\x0c\\r\\t...\\xaf\\xc5\\xd1', 'dirty': 1, 'colors': {}, 'mode': 'RGB'}\r\n>>> im2.load()\r\n<PixelAccess object at 0x7f3835c48910>\r\n>>> im2.palette.__dict__\r\n{'rawmode': None, 'palette': '\\x0c\\x0c\\r\\t...\\xaf\\xc5\\xd1', 'dirty': 0, 'colors': {}, 'mode': 'RGBA'}\r\n>>> im2.show()\r\n>>> im2_p = im2.convert('P')\r\n>>> im2_p.palette.__dict__\r\n{'rawmode': None, 'palette': bytearray(b';\\x0c\\r\\t...\\xaf\\xc5\\xd1'), 'colors': {(59, 113, 209): 0}, 'mode': 'RGBA', 'dirty': 1}\r\n>>> im2_p.load()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"build/bdist.linux-x86_64/egg/PIL/Image.py\", line 763, in load\r\nValueError: unrecognized raw mode\r\n```\r\n\r\nRepro'd with hopper.gif. \r\n\r\nThe bug is either in:\r\n - `load()`, where it's converting the palette to `RGBA`, but it's still 768 bytes.\r\n - `convert('P')`, where it's taking an image already in `P` and modifying the palette.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2433/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2402", "id": 207443767, "node_id": "MDU6SXNzdWUyMDc0NDM3Njc=", "number": 2402, "title": "out of memory when processing this GIF", "user": {"login": "mohanson", "id": 12387889, "node_id": "MDQ6VXNlcjEyMzg3ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/12387889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohanson", "html_url": "https://github.com/mohanson", "followers_url": "https://api.github.com/users/mohanson/followers", "following_url": "https://api.github.com/users/mohanson/following{/other_user}", "gists_url": "https://api.github.com/users/mohanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohanson/subscriptions", "organizations_url": "https://api.github.com/users/mohanson/orgs", "repos_url": "https://api.github.com/users/mohanson/repos", "events_url": "https://api.github.com/users/mohanson/events{/privacy}", "received_events_url": "https://api.github.com/users/mohanson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-14T08:03:23Z", "updated_at": "2017-06-21T10:00:03Z", "closed_at": "2017-06-21T10:00:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "source: http://lavender.b0.upaiyun.com/ex.gif\r\n\r\n![example.jpg](http://lavender.b0.upaiyun.com/ex.gif)\r\n\r\n```python\r\nimport PIL\r\nimport PIL.Image\r\n\r\nim = PIL.Image.open('example.gif')\r\nprint(im.size)\r\nprint(im.n_frames)  # will crash\r\n```\r\n\r\n```shell\r\n[root /tmp] python3 run.py \r\n(320, 240)\r\nKilled\r\n```\r\n\r\nThe problem appear on this line https://github.com/python-pillow/Pillow/blob/master/PIL/GifImagePlugin.py#L261, self.dispose_extent is very huge. \r\n\r\nenv: python3.5 on linux, free mem is 2G.\r\n\r\nthanks.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2383", "id": 203882496, "node_id": "MDU6SXNzdWUyMDM4ODI0OTY=", "number": 2383, "title": "UnboundLocalError: local variable 'err_code' referenced before assignment", "user": {"login": "NotSoSuper", "id": 4484641, "node_id": "MDQ6VXNlcjQ0ODQ2NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/4484641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotSoSuper", "html_url": "https://github.com/NotSoSuper", "followers_url": "https://api.github.com/users/NotSoSuper/followers", "following_url": "https://api.github.com/users/NotSoSuper/following{/other_user}", "gists_url": "https://api.github.com/users/NotSoSuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotSoSuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotSoSuper/subscriptions", "organizations_url": "https://api.github.com/users/NotSoSuper/orgs", "repos_url": "https://api.github.com/users/NotSoSuper/repos", "events_url": "https://api.github.com/users/NotSoSuper/events{/privacy}", "received_events_url": "https://api.github.com/users/NotSoSuper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-01-29T17:24:18Z", "updated_at": "2019-05-04T15:46:50Z", "closed_at": "2019-05-04T15:46:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nLoad a GIF and attempted to save each frame to a file\r\n### What did you expect to happen?\r\nEach frame of the gif is saved to a different image file in a directory\r\n### What actually happened?\r\nThe loop errored before completion\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/discord/ext/commands/core.py\", line 50, in wrapped\r\n    ret = yield from coro(*args, **kwargs)\r\n  File \"/root/discord/mods/Fun.py\", line 313, in gmagik\r\n    for image in glob.glob(gif_dir+\"*_{0}.png\".format(rand)):\r\n  File \"/usr/local/lib/python3.6/concurrent/futures/thread.py\", line 55, in run\r\n    result = self.fn(*self.args, **self.kwargs)\r\n  File \"/root/discord/mods/Fun.py\", line 232, in do_gmagik\r\n    try:\r\n  File \"/usr/local/lib/python3.6/site-packages/PIL/Image.py\", line 1698, in save\r\n    self.load()\r\n  File \"/usr/local/lib/python3.6/site-packages/PIL/ImageFile.py\", line 242, in load\r\n    if not self.map and not LOAD_TRUNCATED_IMAGES and err_code < 0:\r\nUnboundLocalError: local variable 'err_code' referenced before assignment\r\n```\r\n### What versions of Pillow and Python are you using?\r\nLatest PIL from PyPy, Python 3.6\r\n\r\nReplicated just using PIL from repl.\r\n```python\r\ntry:\r\n\tframe = PIL.Image.open(gif)\r\nexcept:\r\n\treturn '\\N{WARNING SIGN} Invalid Gif.'\r\nif frame.size >= (3000, 3000):\r\n\tos.remove(gif)\r\n\treturn '\\N{WARNING SIGN} `GIF resolution exceeds maximum >= (3000, 3000).`'\r\ncount = 0\r\nwhile frame:\r\n\tframe.save('{0}{1}_{2}.png'.format(gif_dir, count, rand), 'GIF')\r\n\tcount += 1\r\n\ttry:\r\n\t\tframe.seek(count)\r\n\texcept EOFError:\r\n\t\tbreak\r\n```\r\nGIF In question: https://cdn.discordapp.com/attachments/272432272949510144/275311320017010709/gmagik.gif (can give more samples if needed)", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2376", "id": 203349155, "node_id": "MDU6SXNzdWUyMDMzNDkxNTU=", "number": 2376, "title": "ImageTk is broken on pypy", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-26T11:30:00Z", "updated_at": "2017-01-26T14:12:41Z", "closed_at": "2017-01-26T14:12:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Pypy 5.6 is segfaulting in _imagingtk.c:_tkinit:\r\n\r\n```\r\n    /* This will bomb if interp is invalid... */\r\n    TkImaging_Init(interp);\r\n```\r\n\r\nIt's consistent back to 2.5.0, which is well before the Tk reorg where we're dynamically getting the interpreter address.\r\n\r\n### What did you do?\r\n\r\nIt's trivially reproducable:\r\n\r\npypy viewer.py [path to image]\r\n\r\nWe're not actually testing this anywhere in our test scripts, and we're not even getting Tk recognized on pypy3 on travis. \r\n\r\nI haven't dug back in the archives yet to determine if this is a pypy5.6 thing, or if it's more general. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2376/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371/events", "html_url": "https://github.com/python-pillow/Pillow/pull/2371", "id": 202358408, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAyNjA2NjY5", "number": 2371, "title": "Consider all frames when optimizing a GIF image", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-01-22T04:02:51Z", "updated_at": "2017-01-26T10:00:11Z", "closed_at": "2017-01-22T18:58:01Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/2371", "html_url": "https://github.com/python-pillow/Pillow/pull/2371", "diff_url": "https://github.com/python-pillow/Pillow/pull/2371.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/2371.patch", "merged_at": null}, "body": "https://github.com/python-pillow/Pillow/issues/2314#issuecomment-274265583 raises a bug.\r\n\r\nFrom what I can see, the problem is that not all of the frames in the image are being considered when optimizing. This PR fixes that.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2371/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359/events", "html_url": "https://github.com/python-pillow/Pillow/pull/2359", "id": 201300190, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAxODczMTMx", "number": 2359, "title": "Fix for issue #1902 Applied patch: matplotlib/matplotlib/commit/a9155\u2026", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-01-17T14:24:59Z", "updated_at": "2017-10-02T13:25:42Z", "closed_at": "2017-01-26T14:12:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/2359", "html_url": "https://github.com/python-pillow/Pillow/pull/2359", "diff_url": "https://github.com/python-pillow/Pillow/pull/2359.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/2359.patch", "merged_at": "2017-01-26T14:12:33Z"}, "body": " Applied patch: https://github.com/matplotlib/matplotlib/commit/a91559b82cf23ee407cd57580653015fc7dc35f0 to fix issue #1902\r\nChanges proposed in this pull request:\r\n\r\n * Use PyLong_AsVoidPtr instead of converting a pyint to a py_ssizet, which misses the top half of the address space on 32 bit machines. \r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2359/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2358", "id": 201257028, "node_id": "MDU6SXNzdWUyMDEyNTcwMjg=", "number": 2358, "title": "Image mode 'L' broken / Incorrect vertical offset of text", "user": {"login": "Polarnix", "id": 10920240, "node_id": "MDQ6VXNlcjEwOTIwMjQw", "avatar_url": "https://avatars.githubusercontent.com/u/10920240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Polarnix", "html_url": "https://github.com/Polarnix", "followers_url": "https://api.github.com/users/Polarnix/followers", "following_url": "https://api.github.com/users/Polarnix/following{/other_user}", "gists_url": "https://api.github.com/users/Polarnix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Polarnix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Polarnix/subscriptions", "organizations_url": "https://api.github.com/users/Polarnix/orgs", "repos_url": "https://api.github.com/users/Polarnix/repos", "events_url": "https://api.github.com/users/Polarnix/events{/privacy}", "received_events_url": "https://api.github.com/users/Polarnix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-17T11:50:43Z", "updated_at": "2018-12-26T13:11:40Z", "closed_at": "2018-12-26T13:11:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm stumped with some issues that suddenly occurred using Pillow and was wondering if anyone can explain this.\r\n\r\nI encountered 2 issues simultaneously on a Ubuntu 14.04 computer where no new package updates have been applied between the instances of the script running OK and then failing.  I am using Python 2.7.6, Pillow 2.3.0 and FreeType 2.5.2.\r\n\r\nA extract from my script with the relevant lines is as follows::\r\n\r\n```python\r\n#!/usr/bin/python\r\n\r\nfrom PIL import Image, ImageFont, ImageDraw\r\n\r\nbigfont = ImageFont.truetype(\"/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Bold.ttf\",500)\r\nlabeltxt = 'Forecast'\r\nimg_txt = Image.new('L', bigfont.getsize(labeltxt), (255,255,255))\r\ndraw_txt = ImageDraw.Draw(img_txt)\r\ndraw_txt.text( (0,0), labeltxt, (0,0,0), font=font4 )\r\nimg_txt.save('forecast.png','PNG')\r\n```\r\n\r\nThis then started failing with the message:\r\n\r\nTraceback (most recent call last):\r\n  File \"test_pillow.py\", line 7, in <module>\r\n    img_txt = Image.new('L', font4.getsize(labeltxt), (255,255,255))\r\n  File \"/usr/lib/python2.7/dist-packages/PIL/Image.py\", line 1790, in new\r\n    return Image()._new(core.fill(mode, size, color))\r\nTypeError: an integer is required\r\n\r\nHowever, changing the image mode from L to RGBA worked, but then I got a large vertical text offset as shown:\r\n\r\n![forecast_bad](https://cloud.githubusercontent.com/assets/10920240/22018740/abfd1da0-dcb0-11e6-8694-f03ed5fdbe75.png)\r\n\r\nI have ended up having to change my code to:\r\n\r\n```python\r\n#!/usr/bin/python\r\n\r\nfrom PIL import Image, ImageFont, ImageDraw\r\n\r\nbigfont = ImageFont.truetype(\"/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Bold.ttf\",500)\r\nlabeltxt = 'Forecast'\r\nimg_txt = Image.new('RGBA', bigfont.getsize(labeltxt), (255,255,255,255))\r\ndraw_txt = ImageDraw.Draw(img_txt)\r\ndraw_txt.text( (0,-100), labeltxt, (0,0,0,255), font=font4 )\r\nimg_txt.save('forecast.png','PNG')\r\n```\r\n\r\nThis now produces the correct result.\r\n\r\n![forecast_good](https://cloud.githubusercontent.com/assets/10920240/22018744/b30d4610-dcb0-11e6-9600-45b396bfbe63.png)\r\n\r\nOther script modules where text is rendered, but at smaller font sizes, are working fine with mode L and no offset.\r\n\r\nCan anyone replicate this and explain what's happening here?  As the original code was OK and no new package updates have been applied I'm at a loss to understand what is going on.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2358/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2314", "id": 197752797, "node_id": "MDU6SXNzdWUxOTc3NTI3OTc=", "number": 2314, "title": "saving animated gif drops frames", "user": {"login": "gboeing", "id": 4977197, "node_id": "MDQ6VXNlcjQ5NzcxOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4977197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gboeing", "html_url": "https://github.com/gboeing", "followers_url": "https://api.github.com/users/gboeing/followers", "following_url": "https://api.github.com/users/gboeing/following{/other_user}", "gists_url": "https://api.github.com/users/gboeing/gists{/gist_id}", "starred_url": "https://api.github.com/users/gboeing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gboeing/subscriptions", "organizations_url": "https://api.github.com/users/gboeing/orgs", "repos_url": "https://api.github.com/users/gboeing/repos", "events_url": "https://api.github.com/users/gboeing/events{/privacy}", "received_events_url": "https://api.github.com/users/gboeing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/22", "html_url": "https://github.com/python-pillow/Pillow/milestone/22", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/22/labels", "id": 2043825, "node_id": "MDk6TWlsZXN0b25lMjA0MzgyNQ==", "number": 22, "title": "4.1.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-10-03T11:16:04Z", "updated_at": "2017-04-17T04:20:34Z", "due_on": "2017-04-01T07:00:00Z", "closed_at": "2017-04-17T04:15:58Z"}, "comments": 10, "created_at": "2016-12-27T20:20:11Z", "updated_at": "2017-03-12T20:19:40Z", "closed_at": "2017-03-12T17:18:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nSaved a set of 100 png files as an animated gif then opened the gif\r\n\r\n### What did you expect to happen?\r\n\r\nI expected the gif to have 100 frames, same as the number of png files\r\n\r\n### What actually happened?\r\n\r\nThe gif has only 70 frames\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\npillow 3.4.2, python 3.5.2\r\n\r\n### Demo\r\n\r\nThere are 100 png files in the folder `save_folder`, named 000.png through 099.png. The first 16 images are identical to one another, and the final 16 images are identical to one another. The other 68 images are all different from each other. In other words, the animation would show the first image for 16 frames, then run through the middle 68 frames before coming to the concluding image which it shows for 16 frames. But when I save the gif, it is missing 15 of the first 16 images and 15 of the final 16 images. Thus there is no \"pause\" at the beginning or end of the animation.\r\n\r\n```python\r\nimages = [Image.open(image) for image in glob.glob('{}/*.png'.format(save_folder))]\r\nlen(images)\r\n```\r\nreturns: 100\r\n\r\n```python\r\ngif = images[0]\r\ngif.save(fp=gif_filepath, format='gif', save_all=True, append_images=images[1:])\r\nImage.open(gif_filepath).n_frames\r\n```\r\nreturns: 70", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2309", "id": 197509177, "node_id": "MDU6SXNzdWUxOTc1MDkxNzc=", "number": 2309, "title": "Unhelpful error if libwebp is not installed", "user": {"login": "khazhyk", "id": 1542025, "node_id": "MDQ6VXNlcjE1NDIwMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1542025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khazhyk", "html_url": "https://github.com/khazhyk", "followers_url": "https://api.github.com/users/khazhyk/followers", "following_url": "https://api.github.com/users/khazhyk/following{/other_user}", "gists_url": "https://api.github.com/users/khazhyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/khazhyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khazhyk/subscriptions", "organizations_url": "https://api.github.com/users/khazhyk/orgs", "repos_url": "https://api.github.com/users/khazhyk/repos", "events_url": "https://api.github.com/users/khazhyk/events{/privacy}", "received_events_url": "https://api.github.com/users/khazhyk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2016-12-25T17:25:44Z", "updated_at": "2018-09-30T06:28:56Z", "closed_at": "2018-09-30T06:28:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nTried to open a webp file.\r\n### What did you expect to happen?\r\nThe webp file opened, or PIL would notify me that it was compiled without webp support.\r\n### What actually happened?\r\nGot generic 'OSError: cannot identify image file'\r\n### What versions of Pillow and Python are you using?\r\nPython 3.5, Pillow 3.4.2\r\n\r\n\r\nJudging by https://github.com/python-pillow/Pillow/issues/1930 a more specific error doesn't seem unreasonable, and could speed up troubleshooting for others in the future. ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2309/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2299", "id": 197022522, "node_id": "MDU6SXNzdWUxOTcwMjI1MjI=", "number": 2299, "title": "Python+C coverage missing, not sent to Coveralls", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-12-21T20:13:26Z", "updated_at": "2016-12-27T10:25:49Z", "closed_at": "2016-12-27T10:25:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The last coverage report on Coveralls is from a week ago, 13 December 2016, when PR #2234 was merged: https://coveralls.io/repos/19620/builds\r\n\r\nThe next merge after PR #2234 was @jdufresne's PR #2199, a few minutes later the same day, which also contained a change to .travis.yml, adding `pip install -e .`:\r\n\r\nhttps://github.com/python-pillow/Pillow/pull/2199/files#diff-354f30a63fb0907d4ad57269548329e3R45\r\n\r\n---\r\n\r\nHere's a diff of the Py2.7 builds from the #2234 and #2199 merges:\r\nhttps://www.diffchecker.com/GPJlMb1Y\r\n\r\nThere's a difference around line 3838 (looking at the line numbers on the left) when running `$ lcov --capture --directory . -b . --output-file coverage.info`:\r\n```\r\nScanning . for .gcda files ...\r\nFound 1 data files in .\r\nProcessing _webp.gcda\r\nFinished .info-file creation\r\n```\r\n->\r\n```\r\nScanning . for .gcda files ...\r\ngeninfo: ERROR: no .gcda files found in .!\r\n```\r\n\r\nNote that local Python coverage reports worked, but not the stuff to combine the C and Python reports and send to Coveralls.\r\n\r\n---\r\n\r\nReplacing `pip install -e .` with `pip install olefile` fixes the build, and sends reasonable-looking coverage numbers to Coveralls.\r\n\r\nI've sent a PR for this (#2300), but is it the correct thing to do? Can/should we fix whatever `pip install -e .` did wrong?\r\n\r\n---\r\n\r\n`pip install -e .` did this:\r\n\r\n```\r\n$ travis_retry pip install -e .\r\nObtaining file:///home/travis/build/python-pillow/Pillow\r\nRequirement already satisfied (use --upgrade to upgrade): olefile in /home/travis/virtualenv/python2.7.12/lib/python2.7/site-packages (from Pillow==3.5.0.dev0)\r\nInstalling collected packages: Pillow\r\n  Running setup.py develop for Pillow\r\nSuccessfully installed Pillow-3.5.0.dev0\r\n```\r\n\r\nPerhaps `python setup.py develop` is the problem?\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2293", "id": 196392001, "node_id": "MDU6SXNzdWUxOTYzOTIwMDE=", "number": 2293, "title": "Incorrect vertical alignment of character when using fontmode = '1'", "user": {"login": "jkrebs", "id": 137356, "node_id": "MDQ6VXNlcjEzNzM1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/137356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkrebs", "html_url": "https://github.com/jkrebs", "followers_url": "https://api.github.com/users/jkrebs/followers", "following_url": "https://api.github.com/users/jkrebs/following{/other_user}", "gists_url": "https://api.github.com/users/jkrebs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkrebs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkrebs/subscriptions", "organizations_url": "https://api.github.com/users/jkrebs/orgs", "repos_url": "https://api.github.com/users/jkrebs/repos", "events_url": "https://api.github.com/users/jkrebs/events{/privacy}", "received_events_url": "https://api.github.com/users/jkrebs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 192476144, "node_id": "MDU6TGFiZWwxOTI0NzYxNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 13, "created_at": "2016-12-19T11:31:42Z", "updated_at": "2019-03-17T11:08:09Z", "closed_at": "2019-03-17T11:08:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI installed Pillow 3.4.2 for local development (Python 2.7.12 on Ubuntu 16.04). My deployment target is Google App Engine which unfortunately still uses PIL 1.1.7.\r\n\r\nThere appears to be a backwards incompatibility (regression?) with the vertical alignment of the zero (0) character between these libraries and versions. Pillow does not align the character correctly.\r\n\r\nI noticed it in one particular font (Verdana 13pt) when using ImageDraw.fontmode = '1' to disable anti-aliasing. The same issue does not occur with the default fontmode value.\r\n\r\nI have tested this across 3 different official versions of the font from various downloads on Microsoft's website and Windows. These are freely available core fonts.\r\n\r\n### What actually happened?\r\n\r\nPlease compare the alignment of the zero (0) character in the aliased lines of the following images. It is very slight but it is unfortunately a big problem in my use-case.\r\n\r\n#### PIL 1.1.7\r\n\r\n![pil_1_1_7](https://cloud.githubusercontent.com/assets/137356/21311178/388dd9ee-c5e6-11e6-8e09-b6a7e94fbf92.png)\r\n\r\n#### Pillow 3.4.2\r\n\r\n![pillow_3_4_2](https://cloud.githubusercontent.com/assets/137356/21311182/3e3f5106-c5e6-11e6-8f89-c77fde913637.png)\r\n\r\n### Script\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nimport os.path\r\nimport string\r\n\r\npath = os.path.dirname(os.path.abspath(__file__))\r\n\r\ntext = (string.digits\r\n        + string.ascii_lowercase\r\n        + string.ascii_uppercase\r\n        + string.punctuation)\r\n\r\nfont_names = ['verdanab_a.ttf', 'verdanab_b.ttf', 'verdanab_c.ttf']\r\n\r\nimage = Image.new('RGB', (1250, 250))\r\n\r\ndraw = ImageDraw.Draw(image)\r\ndraw.rectangle((0, 0, image.size[0], image.size[1]), fill=(255, 255, 255))\r\n\r\ncurrent_y = 10\r\n\r\nfor n, font_name in enumerate(font_names):\r\n    font = ImageFont.truetype(os.path.join(path, font_name), 13)\r\n\r\n    draw_alias = ImageDraw.Draw(image)\r\n    draw_alias.fontmode = '1'\r\n    draw_alias.text(\r\n        (10, current_y),\r\n        '%s (alias): %s' % (font_name, text),\r\n        (0, 0, 0),\r\n        font=font)\r\n\r\n    current_y += 25\r\n\r\n    draw = ImageDraw.Draw(image)\r\n    draw.text(\r\n        (10, current_y),\r\n        '%s (anti-alias): %s' % (font_name, text),\r\n        (0, 0, 0),\r\n        font=font)\r\n\r\n    current_y += 50\r\n\r\nimage.save(os.path.join(path, 'output.png'), 'PNG')\r\n```\r\n### Fonts\r\n\r\n[fonts.zip](https://github.com/python-pillow/Pillow/files/660882/fonts.zip)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2293/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2280", "id": 194462069, "node_id": "MDU6SXNzdWUxOTQ0NjIwNjk=", "number": 2280, "title": "Invalid string escapes", "user": {"login": "nascheme", "id": 690853, "node_id": "MDQ6VXNlcjY5MDg1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/690853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nascheme", "html_url": "https://github.com/nascheme", "followers_url": "https://api.github.com/users/nascheme/followers", "following_url": "https://api.github.com/users/nascheme/following{/other_user}", "gists_url": "https://api.github.com/users/nascheme/gists{/gist_id}", "starred_url": "https://api.github.com/users/nascheme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nascheme/subscriptions", "organizations_url": "https://api.github.com/users/nascheme/orgs", "repos_url": "https://api.github.com/users/nascheme/repos", "events_url": "https://api.github.com/users/nascheme/events{/privacy}", "received_events_url": "https://api.github.com/users/nascheme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-12-08T22:29:52Z", "updated_at": "2017-01-16T11:05:21Z", "closed_at": "2017-01-16T11:05:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are a couple of invalid string/byte escapes left in the code (Python 3.6 warn about them)::\r\n\r\n./PIL/GimpPaletteFile.py:44: bad string escape 'if re.match(b\"\\\\w+:|#\", s):'\r\n./PIL/PngImagePlugin.py:51: bad string escape 'is_cid = re.compile(b\"\\\\w\\\\w\\\\w\\\\w\").match'\r\n./PIL/XbmImagePlugin.py:29: bad string escape 'b\"\\\\s*#define[ \\\\t]+.*_width[ \\\\t]+(?P<width>[0-9]+)[\\\\r\\\\n]+\"'\r\n./winbuild/build_dep.py:111: bad string escape '\"\"\" + \"\\\\n\".join(\\'set %s=%%BUILD%%\\\\%s\\' % (k.upper(), v[\\'dir\\'])'\r\n./winbuild/build.py:19: bad string escape 'ret.append(\"%s%s%s\\\\Scripts\\\\pip.exe install nose\" %'\r\n./winbuild/build.py:22: bad string escape 'ret.append(\"%s%s%s\\\\Scripts\\\\pip.exe install unittest2\" %'\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2280/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2268", "id": 192851577, "node_id": "MDU6SXNzdWUxOTI4NTE1Nzc=", "number": 2268, "title": "Loading the PIL.Image module twice during the same process causes AccessInit: hash collision", "user": {"login": "qtiki", "id": 752359, "node_id": "MDQ6VXNlcjc1MjM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/752359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qtiki", "html_url": "https://github.com/qtiki", "followers_url": "https://api.github.com/users/qtiki/followers", "following_url": "https://api.github.com/users/qtiki/following{/other_user}", "gists_url": "https://api.github.com/users/qtiki/gists{/gist_id}", "starred_url": "https://api.github.com/users/qtiki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qtiki/subscriptions", "organizations_url": "https://api.github.com/users/qtiki/orgs", "repos_url": "https://api.github.com/users/qtiki/repos", "events_url": "https://api.github.com/users/qtiki/events{/privacy}", "received_events_url": "https://api.github.com/users/qtiki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/22", "html_url": "https://github.com/python-pillow/Pillow/milestone/22", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/22/labels", "id": 2043825, "node_id": "MDk6TWlsZXN0b25lMjA0MzgyNQ==", "number": 22, "title": "4.1.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2016-10-03T11:16:04Z", "updated_at": "2017-04-17T04:20:34Z", "due_on": "2017-04-01T07:00:00Z", "closed_at": "2017-04-17T04:15:58Z"}, "comments": 5, "created_at": "2016-12-01T13:49:38Z", "updated_at": "2017-04-03T22:30:26Z", "closed_at": "2017-04-03T22:30:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nWe have an embedded c++ Python program that runs scripts in a clean Python environment by always creating a fresh environment with Py_InitializeEx and Py_Finalize. I tried adding some image processing with PIL.Image but that causes the application to crash on the second run of the script. I traced this down to the import throwing an AccessInit: hash collision exception.\r\n\r\n### What did you expect to happen?\r\n\r\nThe module should load properly after the Python state has been cleared and re-created.\r\n\r\n### What actually happened?\r\n\r\nThe module failed to load on the second run.\r\n\r\n### What versions of Pillow and Python are you using?\r\n\r\nPillow 3.4.2\r\nPython 2.7.11 32-bit\r\nWindows 10\r\n\r\n### Code to reproduce\r\n\r\n```cpp\r\n#include \"Python.h\"\r\n\r\nint main(int argc, char* argv[])\r\n{\r\n\tPy_SetPythonHome( \"c:\\\\Python27\" );\r\n\r\n\tPy_InitializeEx( 0 );\r\n\tPy_DECREF(PyImport_ImportModule( \"PIL.Image\" ));\r\n\tPy_Finalize();\r\n\r\n\tPy_InitializeEx( 0 );\r\n\tPy_DECREF(PyImport_ImportModule( \"PIL.Image\" ));\r\n\tPy_Finalize();\r\n\r\n\treturn 0;\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nAccessInit: hash collision: 22 for both 1 and 1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263/events", "html_url": "https://github.com/python-pillow/Pillow/pull/2263", "id": 192426061, "node_id": "MDExOlB1bGxSZXF1ZXN0OTU3OTM0NTQ=", "number": 2263, "title": "Fix for writing Tiff to BytesIO using libtiff", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-11-29T22:56:12Z", "updated_at": "2018-09-23T06:13:48Z", "closed_at": "2016-12-09T09:04:41Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/2263", "html_url": "https://github.com/python-pillow/Pillow/pull/2263", "diff_url": "https://github.com/python-pillow/Pillow/pull/2263.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/2263.patch", "merged_at": "2016-12-09T09:04:41Z"}, "body": "Fixes #2206 .\r\n\r\nWriting large tiff images using libtiff to a BytesIO would fail if there was a need to increase the memory buffer size. This would not happen in the case of a file, since the file pointer was passed into libtiff for direct writing. \r\n\r\nThe overflow check for buffer size had a sign error, so that any comparison was against a negative number, so it failed every attempt to realloc. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2263/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2258", "id": 191838902, "node_id": "MDU6SXNzdWUxOTE4Mzg5MDI=", "number": 2258, "title": "PIL does not pack 2-bit palette images correctly", "user": {"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-27T02:55:20Z", "updated_at": "2016-12-04T10:27:40Z", "closed_at": "2016-12-04T10:27:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "```Python\r\nfrom PIL import Image\r\n\r\nrgb = '\\x00' * 2 + '\\x01' * 2 + '\\x02' * 2\r\nimg = Image.frombytes('P', (6, 1), rgb)\r\nimg.putpalette('\\xFF\\x00\\x00' '\\x00\\xFF\\x00' '\\x00\\x00\\xFF') # RGB\r\nimg.save('file.png')\r\n```\r\nExpected is an image with 6 pixels: `RRGGBB`. Instead it makes image `RRGGBR`.\r\n\r\nThe first clue is in the raw (uncompressed) `IDAT` bytes written: `0x00 0x05 0x80`.\r\n\r\nNow the first byte is the filter byte, and the bit representation of the other two bytes is as follows.\r\n```\r\n0x05: 00 00 01 01\r\n0x80: 10 00 00 00\r\n```\r\nWhereas it should be.\r\n```\r\n0x05: 00 00 01 01\r\n0xA0: 10 10 00 00\r\n```\r\nSo `10` is `00`, hence `R` instead of `B`.\r\n\r\nThe packing is handled by function `packP2`.\r\n\r\n```c\r\nstatic void\r\npackP2(UINT8* out, const UINT8* in, int pixels)\r\n{\r\n    while (pixels >= 4) {\r\n\t*out++ = (in[0] << 6) |\r\n\t\t ((in[1] & 3) << 4) |\r\n\t\t ((in[2] & 3) << 2) |\r\n\t\t (in[3] & 3);\r\n\tin += 4; pixels -= 4;\r\n    }\r\n\r\n    switch (pixels) {\r\n    case 3:\r\n\tout[0] = (in[0] << 6) |\r\n\t\t ((in[1] & 3) << 4) |\r\n\t\t ((in[2] & 3) << 2);\r\n\tbreak;\r\n    case 2:\r\n\tout[0] = (in[0] << 6) |\r\n\t\t ((in[1] & 3) << 4);\r\n    case 1:\r\n\tout[0] = (in[0] << 6);\r\n    }\r\n}\r\n```\r\nWhich has an obvious bug making it pack only the first of two remaining pixels.\r\n```Diff\r\nindex 8a0fcc0..af32392 100644\r\n--- a/libImaging/Pack.c\r\n+++ b/libImaging/Pack.c\r\n@@ -194,6 +194,7 @@ packP2(UINT8* out, const UINT8* in, int pixels)\r\n     case 2:\r\n        out[0] = (in[0] << 6) |\r\n                 ((in[1] & 3) << 4);\r\n+    break;\r\n     case 1:\r\n        out[0] = (in[0] << 6);\r\n     }\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2239", "id": 190872265, "node_id": "MDU6SXNzdWUxOTA4NzIyNjU=", "number": 2239, "title": "Gif partially lose transparency / misalign, not on all frames", "user": {"login": "Nitaym", "id": 19125, "node_id": "MDQ6VXNlcjE5MTI1", "avatar_url": "https://avatars.githubusercontent.com/u/19125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nitaym", "html_url": "https://github.com/Nitaym", "followers_url": "https://api.github.com/users/Nitaym/followers", "following_url": "https://api.github.com/users/Nitaym/following{/other_user}", "gists_url": "https://api.github.com/users/Nitaym/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nitaym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nitaym/subscriptions", "organizations_url": "https://api.github.com/users/Nitaym/orgs", "repos_url": "https://api.github.com/users/Nitaym/repos", "events_url": "https://api.github.com/users/Nitaym/events{/privacy}", "received_events_url": "https://api.github.com/users/Nitaym/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 513693041, "node_id": "MDU6TGFiZWw1MTM2OTMwNDE=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Cool", "name": "Cool", "color": "bfd4f2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2016-11-22T00:08:02Z", "updated_at": "2021-06-28T12:43:02Z", "closed_at": "2021-06-28T12:43:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm building a script to extract a frame from a gif, and encountered a bug (I think).\r\nThe script is working properly with several gifs I've tried it on, but this specific gif I'm getting weird misalignments and transparency issues.\r\n\r\nThis is the original gif\r\n![loading](https://cloud.githubusercontent.com/assets/19125/20505815/28a47b1c-b058-11e6-9e8f-aab9ec08009d.gif)\r\n\r\nAnd this is the output from frame 10:\r\n![sprite](https://cloud.githubusercontent.com/assets/19125/20505816/2a525ccc-b058-11e6-8cc1-47a118ec6ef3.png)\r\n\r\nThis happens on almost every frame.\r\n\r\nHere's the python code to extract the frame:\r\n```python\r\nwith open('loading.gif', \"rb\") as f:\r\n    gif_data = bytearray(f.read())\r\n\r\ntry:\r\n    # gif = Image.open(infile)\r\n    gif = Image.open(io.BytesIO(gif_data))\r\n    width, height = gif.size\r\nexcept IOError as e:\r\n    print \"Cant load\", gif_data\r\n    sys.exit(1)\r\n\r\nmypalette = gif.getpalette()\r\n\r\nsprite = Image.new(\"RGBA\", (width, height))\r\nfor i in range(10):\r\n    gif.seek(gif.tell() + 1)\r\n\r\ngif.putpalette(mypalette)\r\nsprite.paste(gif, (0, 0, width, height))\r\n\r\nsprite_data = io.BytesIO()\r\nsprite.save(sprite_data , format='PNG')\r\nsprite_data = sprite_data.getvalue()\r\n\r\nwith open('sprite.png', 'wb') as f:\r\n    # png_base64 = (json.load(io.BytesIO(converted)))['file']\r\n    # png = base64.b64decode(png_base64)\r\n    f.write(sprite_data)\r\n    print \"File written\"\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2239/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2231", "id": 190066837, "node_id": "MDU6SXNzdWUxOTAwNjY4Mzc=", "number": 2231, "title": "Sun Raster files with RLE encoding and depth 1 fail to load", "user": {"login": "mrenters", "id": 16085870, "node_id": "MDQ6VXNlcjE2MDg1ODcw", "avatar_url": "https://avatars.githubusercontent.com/u/16085870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrenters", "html_url": "https://github.com/mrenters", "followers_url": "https://api.github.com/users/mrenters/followers", "following_url": "https://api.github.com/users/mrenters/following{/other_user}", "gists_url": "https://api.github.com/users/mrenters/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrenters/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrenters/subscriptions", "organizations_url": "https://api.github.com/users/mrenters/orgs", "repos_url": "https://api.github.com/users/mrenters/repos", "events_url": "https://api.github.com/users/mrenters/events{/privacy}", "received_events_url": "https://api.github.com/users/mrenters/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 485342677, "node_id": "MDU6TGFiZWw0ODUzNDI2Nzc=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Hasn't%20worked%20in%2020%20years", "name": "Hasn't worked in 20 years", "color": "c5def5", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-11-17T14:46:20Z", "updated_at": "2016-11-23T14:10:17Z", "closed_at": "2016-11-23T14:10:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\nTried to open a 1-bit RLE encoded Sun Raster file\r\n### What did you expect to happen?\r\nExpected image to load\r\n### What actually happened?\r\nGot a 'buffer overrun when reading image file' error\r\n### What versions of Pillow and Python are you using?\r\nPython 2.7.8, Pillow 3.3.1\r\n\r\nPlease include code that reproduces the issue and whenever possible, an image that demonstrates the issue. The best reproductions are self-contained scripts with minimal dependencies. If you are using a framework such as plone, django, or buildout, try to replicate the issue just using Pillow. \r\n\r\nUse image in attached ZIP file or create a new image in GIMP, 640x400 with white background. Select black brush, draw a line, convert Image->Mode to Indexed, and select black and white (1-bit) palette. Save image as Sun Raster file with RLE encoding.\r\n\r\n[sunraster.zip](https://github.com/python-pillow/Pillow/files/597607/sunraster.zip)\r\n\r\n```\r\n>>> from PIL import Image\r\n>>> im = Image.open('sunraster.im1')\r\n>>> print im.format,im.size, im.mode\r\nSUN (640, 400) 1\r\n>>> im.load()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/PIL/ImageFile.py\", line 240, in load\r\n    raise_ioerror(err_code)\r\n  File \"/opt/rh/python27/root/usr/lib/python2.7/site-packages/PIL/ImageFile.py\", line 59, in raise_ioerror\r\n    raise IOError(message + \" when reading image file\")\r\nIOError: buffer overrun when reading image file\r\n>>>\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2202", "id": 187627144, "node_id": "MDU6SXNzdWUxODc2MjcxNDQ=", "number": 2202, "title": "PNG: unnecessary padding in PLTE", "user": {"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2016-11-07T05:16:37Z", "updated_at": "2021-03-21T15:31:36Z", "closed_at": "2021-03-21T15:31:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "_Pillow_ incorrectly enforces a minimum of `2` palette entries.\r\n```Python\r\nfrom PIL import Image\r\nimg = Image.new(size = (1, 1), mode = 'P')\r\nimg.putpalette((1, 1, 1))\r\nimg.save('file.png')\r\n```\r\n```Bash\r\n$ pngcheck -v file.png \r\n...\r\n    1 x 1 image, 1-bit palette, non-interlaced\r\n  chunk PLTE at offset 0x00025, length 6: 2 palette entries\r\n...\r\n```\r\nAnd pads the palette to `bit ** 2` entries.\r\n```Python\r\nfrom PIL import Image\r\nimg = Image.new(size = (3, 3), mode = 'P')\r\nimg.putpalette((1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5)) # 5\r\nimg.save('file.png')\r\n```\r\n```Bash\r\n$ pngcheck -v file.png \r\n...\r\n    3 x 3 image, 4-bit palette, non-interlaced\r\n  chunk PLTE at offset 0x00025, length 48: 16 palette entries\r\n...\r\n```\r\n\r\nIt's [neither required nor recommended](https://www.w3.org/TR/PNG/#11PLTE).\r\n> It is permissible to have fewer entries than the bit depth would allow.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2202/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2161", "id": 181909832, "node_id": "MDU6SXNzdWUxODE5MDk4MzI=", "number": 2161, "title": "Pillow 3.4 breaks Image.thumbnail", "user": {"login": "jribbens", "id": 350846, "node_id": "MDQ6VXNlcjM1MDg0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/350846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jribbens", "html_url": "https://github.com/jribbens", "followers_url": "https://api.github.com/users/jribbens/followers", "following_url": "https://api.github.com/users/jribbens/following{/other_user}", "gists_url": "https://api.github.com/users/jribbens/gists{/gist_id}", "starred_url": "https://api.github.com/users/jribbens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jribbens/subscriptions", "organizations_url": "https://api.github.com/users/jribbens/orgs", "repos_url": "https://api.github.com/users/jribbens/repos", "events_url": "https://api.github.com/users/jribbens/events{/privacy}", "received_events_url": "https://api.github.com/users/jribbens/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-10-09T20:40:53Z", "updated_at": "2016-10-17T16:44:20Z", "closed_at": "2016-10-17T10:30:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\n\n``` python\n    img = Image.open(\"test.png\")\n    img.thumbnail((256, 256))\n    img.save(\"output.png\")\n```\n### What did you expect to happen?\n\nCreate a thumbnail.\n### What actually happened?\n\nIt creates a thumbnail with random transparent lines all over it.\n### What versions of Pillow and Python are you using?\n\nPython 3.5 and Pillow 3.4.1. With Pillow 3.3.3 it works perfectly.\n\n![test](https://cloud.githubusercontent.com/assets/350846/19223477/e07b3dfa-8e68-11e6-99e9-07cd12586cb4.png)\n\n![output](https://cloud.githubusercontent.com/assets/350846/19223484/eca989ba-8e68-11e6-8078-7e1404647ea3.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2093", "id": 173632860, "node_id": "MDU6SXNzdWUxNzM2MzI4NjA=", "number": 2093, "title": "Saving GIF uses huge amount of memory", "user": {"login": "tlelson", "id": 4349566, "node_id": "MDQ6VXNlcjQzNDk1NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4349566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tlelson", "html_url": "https://github.com/tlelson", "followers_url": "https://api.github.com/users/tlelson/followers", "following_url": "https://api.github.com/users/tlelson/following{/other_user}", "gists_url": "https://api.github.com/users/tlelson/gists{/gist_id}", "starred_url": "https://api.github.com/users/tlelson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tlelson/subscriptions", "organizations_url": "https://api.github.com/users/tlelson/orgs", "repos_url": "https://api.github.com/users/tlelson/repos", "events_url": "https://api.github.com/users/tlelson/events{/privacy}", "received_events_url": "https://api.github.com/users/tlelson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}, {"id": 435504840, "node_id": "MDU6TGFiZWw0MzU1MDQ4NDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Performance", "name": "Performance", "color": "b60205", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19", "html_url": "https://github.com/python-pillow/Pillow/milestone/19", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19/labels", "id": 1645348, "node_id": "MDk6TWlsZXN0b25lMTY0NTM0OA==", "number": 19, "title": "3.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-03-15T11:22:46Z", "updated_at": "2017-01-05T23:42:43Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-04T08:18:41Z"}, "comments": 11, "created_at": "2016-08-28T06:51:44Z", "updated_at": "2016-10-03T13:03:12Z", "closed_at": "2016-10-03T13:03:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm encountering limits processing GIF's.  I've noticed that saving GIF's uses a massive amount of memory.  \n\nThe example below opens a 6.5M GIF, rotates it and saves it to a new file, 4.5M GIF.  Somehow the function Image.save uses ~1G to get it done!\n\nDoing the same thing with a jpeg uses less than 1M.\n## Demonstration\n\nThe entire script is shown in the profiler output.\n### Profiler results\n#### GIF\n\n``` bash\n$ python -m memory_profiler pillow_issue_gif.py\nFilename: pillow_issue_gif.py\n\nLine #    Mem usage    Increment   Line Contents\n================================================\n     3   18.934 MiB    0.000 MiB   @profile\n     4                             def f():\n     5   20.012 MiB    1.078 MiB       im = Image.open('MountWilson.gif')\n     6                                 #im.rotate(45).show()\n     7  129.625 MiB  109.613 MiB       im2 = im.rotate(45)\n     8 1153.125 MiB 1023.500 MiB       im2.save('Test-new.gif', \"GIF\")\n```\n#### JPEG\n\n``` bash\n$ python -m memory_profiler pillow_issue_jpeg.py\nFilename: pillow_issue_jpeg.py\n\nLine #    Mem usage    Increment   Line Contents\n================================================\n     3   18.980 MiB    0.000 MiB   @profile\n     4                             def f():\n     5   20.055 MiB    1.074 MiB       im = Image.open('MountWilson.jpeg')\n     6                                 #im.rotate(45).show()\n     7  308.359 MiB  288.305 MiB       im2 = im.rotate(45)\n     8  308.555 MiB    0.195 MiB       im2.save('Test-new.jpeg', \"JPEG\")\n```\n\nI'm kinda surprised the rotate operation uses so much memory too.\n### Input files\n\n``` bash\n$ llg MountWilson\n-rw-r--r--@  1 minmac  staff   6.5M 28 Aug 09:40 MountWilson.gif\n-rw-r--r--@  1 minmac  staff   2.2M 28 Aug 09:43 MountWilson.jpeg\n```\n### Output files\n\n``` bash\n$ llg Test\n-rw-r--r--   1 minmac  staff   1.7M 28 Aug 16:21 Test-new.jpeg\n-rw-r--r--   1 minmac  staff   4.9M 28 Aug 16:24 Test-new.gif\n```\n## Environment Information\n\nOSX 10.11.6\npython 2.7.12\npillow 3.1.1\n\nI haven't profiled it on linux but i know its happening because I'm reaching preset 1GB memory limit on AWS lambda which is running:\n- Linux kernel version \u2013 4.1.27-25.49.amzn1.x86_64\n- python 2.7\n- pillow 3.3.0\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2093/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2071", "id": 170939998, "node_id": "MDU6SXNzdWUxNzA5Mzk5OTg=", "number": 2071, "title": "UnboundLocalError: local variable 'err_code' referenced before assignment", "user": {"login": "shayanelhami", "id": 1285365, "node_id": "MDQ6VXNlcjEyODUzNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1285365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shayanelhami", "html_url": "https://github.com/shayanelhami", "followers_url": "https://api.github.com/users/shayanelhami/followers", "following_url": "https://api.github.com/users/shayanelhami/following{/other_user}", "gists_url": "https://api.github.com/users/shayanelhami/gists{/gist_id}", "starred_url": "https://api.github.com/users/shayanelhami/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shayanelhami/subscriptions", "organizations_url": "https://api.github.com/users/shayanelhami/orgs", "repos_url": "https://api.github.com/users/shayanelhami/repos", "events_url": "https://api.github.com/users/shayanelhami/events{/privacy}", "received_events_url": "https://api.github.com/users/shayanelhami/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-08-12T19:14:56Z", "updated_at": "2018-09-30T11:39:18Z", "closed_at": "2018-09-30T11:39:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "On this line \n[ImageFile.py Line 238](https://github.com/python-pillow/Pillow/blob/master/PIL/ImageFile.py#L238)\n\n`if not self.map and not LOAD_TRUNCATED_IMAGES and err_code < 0:`\n\nIt happens when there is a ValueError exception on line 194:\n\n``` python\n    try:\n        decoder.setimage(self.im, extents)\n    except ValueError:\n        continue\n```\n\nwhich leave no opportunity for err_code to be set.  \n### What did you do?\n\nSay I have a 128x128 png with one zip tile:\n![128x128](https://cloud.githubusercontent.com/assets/1285365/17634055/9429cb88-60c8-11e6-91c2-0dac8d38a086.png)\n\nand I use this code:\n\n``` python\nfrom PIL import Image\nim = Image.open(\"128x128.png\")\nim.size = (32, 32)\nim.save(\"32x32.png\")\n```\n### What did you expect to happen?\n\nInstead of an UnboundLocalError it should at least raise a meaningful error.\n### What versions of Pillow and Python are you using?\n\nPython 2.7.12, Pillow commit 533f4145\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2063", "id": 170020523, "node_id": "MDU6SXNzdWUxNzAwMjA1MjM=", "number": 2063, "title": "jpeg sampling factor is wrong", "user": {"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24", "html_url": "https://github.com/python-pillow/Pillow/milestone/24", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/24/labels", "id": 2043828, "node_id": "MDk6TWlsZXN0b25lMjA0MzgyOA==", "number": 24, "title": "4.3.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 26, "state": "closed", "created_at": "2016-10-03T11:16:43Z", "updated_at": "2017-10-04T09:03:38Z", "due_on": "2017-10-01T07:00:00Z", "closed_at": "2017-10-04T09:03:38Z"}, "comments": 3, "created_at": "2016-08-08T20:42:43Z", "updated_at": "2017-08-31T12:23:48Z", "closed_at": "2017-08-31T12:23:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "`2x2` is `4:2:0`, [not `4:1:1`](https://github.com/python-pillow/Pillow/blob/master/libImaging/JpegEncode.c#L197). This is wrong in many places, most importantly [here](https://github.com/python-pillow/Pillow/blob/master/PIL/JpegImagePlugin.py#L615).\n\nDocumented [here](https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/turbojpeg.h#L106-L107), and elsewhere.\n\nMay I also suggest to add the `NxN` representation to the docs, which is easier to comprehend.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2037", "id": 167256561, "node_id": "MDU6SXNzdWUxNjcyNTY1NjE=", "number": 2037, "title": "segfault: ImageCmsProfile", "user": {"login": "pdknsk", "id": 1097609, "node_id": "MDQ6VXNlcjEwOTc2MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1097609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdknsk", "html_url": "https://github.com/pdknsk", "followers_url": "https://api.github.com/users/pdknsk/followers", "following_url": "https://api.github.com/users/pdknsk/following{/other_user}", "gists_url": "https://api.github.com/users/pdknsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdknsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdknsk/subscriptions", "organizations_url": "https://api.github.com/users/pdknsk/orgs", "repos_url": "https://api.github.com/users/pdknsk/repos", "events_url": "https://api.github.com/users/pdknsk/events{/privacy}", "received_events_url": "https://api.github.com/users/pdknsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19", "html_url": "https://github.com/python-pillow/Pillow/milestone/19", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19/labels", "id": 1645348, "node_id": "MDk6TWlsZXN0b25lMTY0NTM0OA==", "number": 19, "title": "3.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-03-15T11:22:46Z", "updated_at": "2017-01-05T23:42:43Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-04T08:18:41Z"}, "comments": 3, "created_at": "2016-07-24T21:53:44Z", "updated_at": "2016-10-03T13:02:39Z", "closed_at": "2016-10-03T13:02:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` Python\n>>> from PIL import ImageCms\n>>> ImageCms.ImageCmsProfile(0).tobytes()\npython: cmsio0.c:1301: cmsSaveProfileToIOhandler: Assertion '(hProfile != ((void *)0))' failed.\n>>> ImageCms.ImageCmsProfile(1).tobytes()\nSegmentation fault\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019/events", "html_url": "https://github.com/python-pillow/Pillow/issues/2019", "id": 164551582, "node_id": "MDU6SXNzdWUxNjQ1NTE1ODI=", "number": 2019, "title": "Memory is slowly leaking", "user": {"login": "dmpetrov", "id": 10081867, "node_id": "MDQ6VXNlcjEwMDgxODY3", "avatar_url": "https://avatars.githubusercontent.com/u/10081867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmpetrov", "html_url": "https://github.com/dmpetrov", "followers_url": "https://api.github.com/users/dmpetrov/followers", "following_url": "https://api.github.com/users/dmpetrov/following{/other_user}", "gists_url": "https://api.github.com/users/dmpetrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmpetrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmpetrov/subscriptions", "organizations_url": "https://api.github.com/users/dmpetrov/orgs", "repos_url": "https://api.github.com/users/dmpetrov/repos", "events_url": "https://api.github.com/users/dmpetrov/events{/privacy}", "received_events_url": "https://api.github.com/users/dmpetrov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}, {"id": 1357140650, "node_id": "MDU6TGFiZWwxMzU3MTQwNjUw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Platform", "name": "Platform", "color": "5319e7", "default": false, "description": "A catchall for platform-related"}], "state": "closed", "locked": false, "assignee": {"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "homm", "id": 128982, "node_id": "MDQ6VXNlcjEyODk4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/128982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/homm", "html_url": "https://github.com/homm", "followers_url": "https://api.github.com/users/homm/followers", "following_url": "https://api.github.com/users/homm/following{/other_user}", "gists_url": "https://api.github.com/users/homm/gists{/gist_id}", "starred_url": "https://api.github.com/users/homm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/homm/subscriptions", "organizations_url": "https://api.github.com/users/homm/orgs", "repos_url": "https://api.github.com/users/homm/repos", "events_url": "https://api.github.com/users/homm/events{/privacy}", "received_events_url": "https://api.github.com/users/homm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 34, "created_at": "2016-07-08T15:08:38Z", "updated_at": "2021-01-12T12:30:30Z", "closed_at": "2020-08-30T20:39:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Memory is slowly leaking when process many image files one by one.\n\nLeak size:\n100K images --> ~100MB\n300K images --> ~200MB\n1M images --> ~1GB\n\nHere you can find reproducing code examples: https://github.com/PyWavelets/pywt/issues/180\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/2019/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1987", "id": 162302148, "node_id": "MDU6SXNzdWUxNjIzMDIxNDg=", "number": 1987, "title": "IndexError while drawing on an image", "user": {"login": "obskyr", "id": 4363779, "node_id": "MDQ6VXNlcjQzNjM3Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/4363779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/obskyr", "html_url": "https://github.com/obskyr", "followers_url": "https://api.github.com/users/obskyr/followers", "following_url": "https://api.github.com/users/obskyr/following{/other_user}", "gists_url": "https://api.github.com/users/obskyr/gists{/gist_id}", "starred_url": "https://api.github.com/users/obskyr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/obskyr/subscriptions", "organizations_url": "https://api.github.com/users/obskyr/orgs", "repos_url": "https://api.github.com/users/obskyr/repos", "events_url": "https://api.github.com/users/obskyr/events{/privacy}", "received_events_url": "https://api.github.com/users/obskyr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-06-25T22:18:08Z", "updated_at": "2021-06-29T12:34:28Z", "closed_at": "2021-06-29T12:34:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "With Pillow 3.2.0 on Python 3 (and on Python 2, with the fix in #1985), running the very same code as in #1592 with the very same image slightly edited, the following traceback occurs:\n\n``` pycon\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImagePalette.py\", line 97, in getcolor\n    return self.colors[color]\nKeyError: (255, 255, 255)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"deborder.py\", line 30, in <module>\n    deborder(sys.argv[1])\n  File \"deborder.py\", line 20, in deborder\n    draw.line((topLeft, topRight),       fill=(255, 255, 255))\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImageDraw.py\", line 177, in line\n    ink, fill = self._getink(fill)\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImageDraw.py\", line 124, in _getink\n    ink = self.palette.getcolor(ink)\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImagePalette.py\", line 108, in getcolor\n    self.palette[index+256] = color[1]\nIndexError: list assignment index out of range\n```\n\nBefore the #1985 fix, the error is an `IndexError: list assignment index out of range`. After, it persists as an `IndexError: bytearray index out of range`, however.\n\nFrom what I can tell, self.palette is shorter than 256 elements, and can therefore not take an assignment to index `index+256`. In this case, index is 0, as `len(self.colors)` in `getcolor` for this image is 0, which I find a bit odd.\n\nSince the image is almost exactly the one used in #1592, this may be related. The difference is this one is edited in ImageMagick to make the outer 1px border white (`#FFFFFF`).\n\n---\n\nThe very same code as in #1592 causes the error:\n\n``` python\n# -*- coding: utf-8 -*-\n\nfrom PIL import Image, ImageDraw\n\ndef deborder(filename):\n    frame = Image.open(filename)\n    frameNo = 0\n    while True:\n        try:\n            frame.seek(frameNo)\n        except EOFError:\n            break\n        draw = ImageDraw.Draw(frame)\n\n        topLeft = (0, 0)\n        topRight = (frame.size[0] - 1, 0)\n        bottomLeft = (0, frame.size[1] - 1)\n        bottomRight = (frame.size[0] - 1, frame.size[1] - 1)\n\n        draw.line((topLeft, topRight),       fill=(255, 255, 255))\n        draw.line((topLeft, bottomLeft),     fill=(255, 255, 255))\n        draw.line((bottomLeft, bottomRight), fill=(255, 255, 255))\n        draw.line((topRight, bottomRight),   fill=(255, 255, 255))\n\n        frameNo += 1\n\n    frame.save('resave-'+filename, save_all=True)\n\ndeborder('no.gif')\n```\n\nWith the following image, for example (while the error occurs with the exact image in #1592 edited a bit, I chose one with a different glyph to avoid future confusion):\n\n![no](https://cloud.githubusercontent.com/assets/4363779/16359397/69c2a96a-3b33-11e6-8012-fa5e958ce4ff.gif)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1976", "id": 161505426, "node_id": "MDU6SXNzdWUxNjE1MDU0MjY=", "number": 1976, "title": "Animated GIFs aren't correct after first frame and lost transparency", "user": {"login": "docapotamus", "id": 1929544, "node_id": "MDQ6VXNlcjE5Mjk1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1929544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/docapotamus", "html_url": "https://github.com/docapotamus", "followers_url": "https://api.github.com/users/docapotamus/followers", "following_url": "https://api.github.com/users/docapotamus/following{/other_user}", "gists_url": "https://api.github.com/users/docapotamus/gists{/gist_id}", "starred_url": "https://api.github.com/users/docapotamus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/docapotamus/subscriptions", "organizations_url": "https://api.github.com/users/docapotamus/orgs", "repos_url": "https://api.github.com/users/docapotamus/repos", "events_url": "https://api.github.com/users/docapotamus/events{/privacy}", "received_events_url": "https://api.github.com/users/docapotamus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-06-21T18:18:29Z", "updated_at": "2021-03-24T09:09:50Z", "closed_at": "2021-03-17T07:15:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\r\n\r\nI open an animated GIF and immediately save it back out to another file.\r\n### What did you expect to happen?\r\n\r\nThe image to be the same as it was when it was uploaded.\r\n### What actually happened?\r\n\r\nThe transparency is gone on the first frame and all subsequent frames have a black background.\r\n### What versions of Pillow and Python are you using?\r\n\r\n3.2.0\r\n\r\nPlease include code that reproduces the issue and whenever possible, an image that demonstrates the issue. The best reproductions are self-contained scripts with minimal dependencies.\r\n\r\n[banana](https://postimg.cc/image/sdgnneb5x/)\r\n[output](https://postimg.cc/image/mdswjqqdh/)\r\n\r\n``` python\r\nfrom PIL import Image                                                           \r\nimg = Image.open('banana.gif')\r\nimg.save('output.gif', format='GIF', save_all=True)\r\n```\r\n\r\nI am aware there are a lot of issues related to animated GIFs but I am struggling to get a coherent understanding of the issue.\r\n\r\nI have other GIFs which act differently and just distort all subsequent frames.\r\n[otter](https://postimg.cc/image/5sla42z9h/)\r\n[output](https://postimg.cc/image/tv23yyfwl/)\r\n\r\nI am happy to provide any more information if needed. I'm willing to fix this myself if needs be. I just don't know enough about Pillow's internals or where to even start with an issue like this.\r\n\r\nI forgot to add there is an error appearing which says a colour can't be found for transparent. I will post the actual error later when I am at my computer.\r\n\r\nThanks in advance.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1976/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1913", "id": 155028963, "node_id": "MDU6SXNzdWUxNTUwMjg5NjM=", "number": 1913, "title": "ImageDraw Ellipse: Asymmetric Circle for all even diameters", "user": {"login": "cgramesp", "id": 15788821, "node_id": "MDQ6VXNlcjE1Nzg4ODIx", "avatar_url": "https://avatars.githubusercontent.com/u/15788821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgramesp", "html_url": "https://github.com/cgramesp", "followers_url": "https://api.github.com/users/cgramesp/followers", "following_url": "https://api.github.com/users/cgramesp/following{/other_user}", "gists_url": "https://api.github.com/users/cgramesp/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgramesp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgramesp/subscriptions", "organizations_url": "https://api.github.com/users/cgramesp/orgs", "repos_url": "https://api.github.com/users/cgramesp/repos", "events_url": "https://api.github.com/users/cgramesp/events{/privacy}", "received_events_url": "https://api.github.com/users/cgramesp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2016-05-16T13:26:16Z", "updated_at": "2018-07-02T14:14:29Z", "closed_at": "2018-07-01T05:44:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "### What did you do?\n\nused ImageDraw Ellipse with two equal diameters to draw a circle.\n### What did you expect to happen?\n\nround, symmetric circle\n### What actually happened?\n\nround and symmetric circles for all odd diameters but unsymmetric artifacts for all even diameters\n### What versions of Pillow and Python are you using?\n\nPillow 3.2.0, Python 3\n<img width=\"211\" alt=\"bildschirmfoto 2016-05-16 um 13 56 04\" src=\"https://cloud.githubusercontent.com/assets/15788821/15290691/83679b88-1b7a-11e6-937b-286f313ab739.png\">\n\n``` python\nfrom PIL import Image, ImageDraw\n\nimg = Image.new('1', (8, 8), \"white\")\ndraw = ImageDraw.Draw(img)\n\ndraw.ellipse((1, 1, 6, 6), fill = 'black', outline ='black')\n\nimg.show()\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1913/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1902", "id": 153970546, "node_id": "MDU6SXNzdWUxNTM5NzA1NDY=", "number": 1902, "title": "ImageTk int overflow error", "user": {"login": "vlachoudis", "id": 3834594, "node_id": "MDQ6VXNlcjM4MzQ1OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3834594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlachoudis", "html_url": "https://github.com/vlachoudis", "followers_url": "https://api.github.com/users/vlachoudis/followers", "following_url": "https://api.github.com/users/vlachoudis/following{/other_user}", "gists_url": "https://api.github.com/users/vlachoudis/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlachoudis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlachoudis/subscriptions", "organizations_url": "https://api.github.com/users/vlachoudis/orgs", "repos_url": "https://api.github.com/users/vlachoudis/repos", "events_url": "https://api.github.com/users/vlachoudis/events{/privacy}", "received_events_url": "https://api.github.com/users/vlachoudis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-05-10T10:11:32Z", "updated_at": "2017-01-26T14:13:28Z", "closed_at": "2017-01-26T14:13:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running on a 32bit Fedora-23 virtual machine via virtualbox, version 3.0.0-4\nWhen I try to convert an image to tkimage I get an overflow error\nsince the tk.interpaddr() returns a 64bit address which cannot be converted to int.\n\nThe same code in 64bit Fedora-23 save version works ok.\n\n```\nFile \"/usr/local/flair/lib/ZoomImage.py\", line 162, in zoomImage\n    self.tkimage = ImageTk.PhotoImage(self.photo)\n  File \"/usr/lib/python2.7/site-packages/PIL/ImageTk.py\", line 115, in __init__\n    self.paste(image)\n  File \"/usr/lib/python2.7/site-packages/PIL/ImageTk.py\", line 182, in paste\n    _imagingtk.tkinit(tk.interpaddr(), 1)\nOverflowError: Python int too large to convert to C long\n```\n\n```\n>>> from Tkinter import *\n>>> tk=Tk()\n>>> tk.interpaddr()\n2161299816L\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1778", "id": 143394805, "node_id": "MDU6SXNzdWUxNDMzOTQ4MDU=", "number": 1778, "title": "icc_profile", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-03-25T00:30:41Z", "updated_at": "2016-04-03T08:15:44Z", "closed_at": "2016-04-03T08:15:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\nfrom PIL import Image\nImage.open('Pillow/Tests/images/hopper.iccprofile.tif').save('test.png')\n```\n\nIn Python 3.5, this results in\n\n```\nTraceback (most recent call last):\n  Line 2, in <module>\n    Image.open('Pillow/Tests/images/hopper.iccprofile.tif').save('test.png')\n  File \"PIL/Image.py\", line 1675, in save\n    save_handler(self, fp, filename)\n  File \"PIL/PngImagePlugin.py\", line 757, in _save\n    data = name + b\"\\0\\0\" + zlib.compress(im.info[\"icc_profile\"])\nTypeError: a bytes-like object is required, not 'tuple'\n```\n\nIn Python 3.3 and 3.4, it's `TypeError: 'tuple' does not support the buffer interface`. In Python 2.7, it's `TypeError: must be string or read-only buffer, not tuple`\n\n`im.info[\"icc_profile\"]` is a tuple of length 1, where the first argument is a bytes-like object.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1775", "id": 142320731, "node_id": "MDU6SXNzdWUxNDIzMjA3MzE=", "number": 1775, "title": "PDFs and 1 bit pixels", "user": {"login": "wfbradley", "id": 6954765, "node_id": "MDQ6VXNlcjY5NTQ3NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6954765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wfbradley", "html_url": "https://github.com/wfbradley", "followers_url": "https://api.github.com/users/wfbradley/followers", "following_url": "https://api.github.com/users/wfbradley/following{/other_user}", "gists_url": "https://api.github.com/users/wfbradley/gists{/gist_id}", "starred_url": "https://api.github.com/users/wfbradley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wfbradley/subscriptions", "organizations_url": "https://api.github.com/users/wfbradley/orgs", "repos_url": "https://api.github.com/users/wfbradley/repos", "events_url": "https://api.github.com/users/wfbradley/events{/privacy}", "received_events_url": "https://api.github.com/users/wfbradley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357118060, "node_id": "MDU6TGFiZWwxMzU3MTE4MDYw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Conversion", "name": "Conversion", "color": "e99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2016-03-21T11:28:22Z", "updated_at": "2022-08-01T10:53:27Z", "closed_at": "2021-04-25T12:29:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I posted this question [on Stack Overflow](http://stackoverflow.com/questions/36121914/pillow-pdf-and-1-bit-pixels) before realizing that perhaps I should post it here.\r\n\r\nI'm trying to create a PDF of a complicated black-and-white rectangular grid, nominally 7 inches wide by 10 inches tall.  I'm using Pillow to do the conversion.  If I specify a PNG, everything works fine (that is, the aspect ratio is 7 by 10).  If I specify a PDF, the output is 200 inches wide and 0.04 inches tall.  What's going on?\r\n\r\nIncidentally, if I set `mode='RGB'`, then the output PDF dimensions are correct, but Pillow performs a JPEG encoding of the image. JPEG converts my sharp black and white grid into smoother shades of gray (which is anathema for my application).\r\n\r\n```python\r\nimport PIL\r\nfrom PIL import Image\r\n\r\n# Let's consider a 7\" x 10\" rectangle of pixels\r\ninches_wide=7\r\ninches_tall=10\r\ndpi=200\r\nnum_pixel_rows=inches_tall*dpi\r\nnum_pixel_cols=inches_wide*dpi\r\n\r\n# Make an image\r\nmode='1'\r\nimg = Image.new( mode, (num_pixel_cols,num_pixel_rows))\r\nimg.info['dpi'] = (dpi,dpi)\r\n\r\n# Saving it as PNG, we get a black rectangle, as expected.\r\nimg.save('big_rectangle.png','png',resolution=dpi)\r\n# Saving it as a PDF, we get a 200\" x 0.04\" all-white line?!\r\nimg.save('big_rectangle.pdf','pdf',resolution=dpi)\r\n\r\n# Versioning info:\r\nprint 'PILLOW',PIL.PILLOW_VERSION\r\nprint 'PIL',PIL.VERSION\r\n#  My output:\r\n#  PILLOW 3.1.1\r\n#  PIL 1.1.7\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1722", "id": 132310426, "node_id": "MDU6SXNzdWUxMzIzMTA0MjY=", "number": 1722, "title": "TiffImagePlugin: ValueError: need more than 0 values to unpack", "user": {"login": "edudar", "id": 584181, "node_id": "MDQ6VXNlcjU4NDE4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/584181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edudar", "html_url": "https://github.com/edudar", "followers_url": "https://api.github.com/users/edudar/followers", "following_url": "https://api.github.com/users/edudar/following{/other_user}", "gists_url": "https://api.github.com/users/edudar/gists{/gist_id}", "starred_url": "https://api.github.com/users/edudar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edudar/subscriptions", "organizations_url": "https://api.github.com/users/edudar/orgs", "repos_url": "https://api.github.com/users/edudar/repos", "events_url": "https://api.github.com/users/edudar/events{/privacy}", "received_events_url": "https://api.github.com/users/edudar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-02-09T01:58:49Z", "updated_at": "2016-09-29T17:43:11Z", "closed_at": "2016-09-29T17:43:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "An attempt to get EXIF data for auto-rotation of http://images.dpchallenge.com/images_challenge/0-999/622/1200/Copyrighted_Image_Reuse_Prohibited_457512.jpg leads to the following error:\n\n```\n  File \"/opt/anaconda2/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 391, in _getexif\n    return _getexif(self)\n  File \"/opt/anaconda2/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 426, in _getexif\n    exif = dict(_fixup_dict(info))\n  File \"/opt/anaconda2/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 407, in _fixup_dict\n    return dict([(k, _fixup(v)) for k, v in src_dict.items()])\n  File \"/opt/anaconda2/lib/python2.7/_abcoll.py\", line 414, in items\n    return [(key, self[key]) for key in self]\n  File \"/opt/anaconda2/lib/python2.7/site-packages/PIL/TiffImagePlugin.py\", line 854, in __getitem__\n    self._setitem(tag, handler(self, data, legacy), legacy)\n  File \"/opt/anaconda2/lib/python2.7/site-packages/PIL/TiffImagePlugin.py\", line 534, in _setitem\n    dest[tag], = values\nValueError: need more than 0 values to unpack\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1711", "id": 131262141, "node_id": "MDExOlB1bGxSZXF1ZXN0NTgyNDgxODQ=", "number": 1711, "title": "fix integer overflow in _imaging.c", "user": {"login": "nedwill", "id": 3682087, "node_id": "MDQ6VXNlcjM2ODIwODc=", "avatar_url": "https://avatars.githubusercontent.com/u/3682087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedwill", "html_url": "https://github.com/nedwill", "followers_url": "https://api.github.com/users/nedwill/followers", "following_url": "https://api.github.com/users/nedwill/following{/other_user}", "gists_url": "https://api.github.com/users/nedwill/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedwill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedwill/subscriptions", "organizations_url": "https://api.github.com/users/nedwill/orgs", "repos_url": "https://api.github.com/users/nedwill/repos", "events_url": "https://api.github.com/users/nedwill/events{/privacy}", "received_events_url": "https://api.github.com/users/nedwill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/17", "html_url": "https://github.com/python-pillow/Pillow/milestone/17", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/17/labels", "id": 1558637, "node_id": "MDk6TWlsZXN0b25lMTU1ODYzNw==", "number": 17, "title": "3.1.1", "description": "Bugfix release", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-02-02T13:59:43Z", "updated_at": "2016-03-15T11:22:00Z", "due_on": "2016-02-04T08:00:00Z", "closed_at": "2016-03-15T11:22:00Z"}, "comments": 5, "created_at": "2016-02-04T06:56:34Z", "updated_at": "2016-02-04T20:13:48Z", "closed_at": "2016-02-04T15:23:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1711", "html_url": "https://github.com/python-pillow/Pillow/pull/1711", "diff_url": "https://github.com/python-pillow/Pillow/pull/1711.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1711.patch", "merged_at": null}, "body": "Fixes issue #1710. I added the canonical integer overflow check used across the CPython codebase.\n\nPerhaps it's better to raise an `OverflowError` but I'm trying to keep some consistency with the surrounding code.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1711/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1706", "id": 130690428, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc5ODk4OTI=", "number": 1706, "title": "PCD decoder overruns the shuffle buffer, Fixes #568", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/17", "html_url": "https://github.com/python-pillow/Pillow/milestone/17", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/17/labels", "id": 1558637, "node_id": "MDk6TWlsZXN0b25lMTU1ODYzNw==", "number": 17, "title": "3.1.1", "description": "Bugfix release", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-02-02T13:59:43Z", "updated_at": "2016-03-15T11:22:00Z", "due_on": "2016-02-04T08:00:00Z", "closed_at": "2016-03-15T11:22:00Z"}, "comments": 0, "created_at": "2016-02-02T13:58:36Z", "updated_at": "2017-10-02T13:30:50Z", "closed_at": "2016-02-04T15:52:11Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1706", "html_url": "https://github.com/python-pillow/Pillow/pull/1706", "diff_url": "https://github.com/python-pillow/Pillow/pull/1706.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1706.patch", "merged_at": "2016-02-04T15:52:11Z"}, "body": "The shuffle buffer is initialized to 24bpp, and the pcd decoder offsets 32bpp. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1706/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1676", "id": 128206446, "node_id": "MDU6SXNzdWUxMjgyMDY0NDY=", "number": 1676, "title": "RGBA convert to CMYK lost dpi and other info", "user": {"login": "zhanglc", "id": 4049133, "node_id": "MDQ6VXNlcjQwNDkxMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4049133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhanglc", "html_url": "https://github.com/zhanglc", "followers_url": "https://api.github.com/users/zhanglc/followers", "following_url": "https://api.github.com/users/zhanglc/following{/other_user}", "gists_url": "https://api.github.com/users/zhanglc/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhanglc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhanglc/subscriptions", "organizations_url": "https://api.github.com/users/zhanglc/orgs", "repos_url": "https://api.github.com/users/zhanglc/repos", "events_url": "https://api.github.com/users/zhanglc/events{/privacy}", "received_events_url": "https://api.github.com/users/zhanglc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-01-22T17:41:06Z", "updated_at": "2020-06-20T12:56:17Z", "closed_at": "2020-06-20T12:56:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "```python\r\nim = Image.open('1.jpg')\r\nim.info\r\n{'jfif': 257, 'jfif_unit': 1, 'exif': 'Exif\\x00\\x00MM\\x00_\\x00\\x00\\x00\\x08\\x00\\x0c\\x01\\x00\\x00\\x03\\x00\\x00\\x00\\x01\\x03A\\x00\\x00\\x01\\x01\\x00\\x03\\x00\\x00\\x00\\x01\\x01\\xc1\\x00\\x00\\x01\\x02\\x00\\x03\\x00\\x00\\x00\\x03\\x00\\x00\\x00\\x9e\\x01\\x06\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x02\\x00\\x00\\x01\\x12\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x01\\x00\\x00\\x01\\x15\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x03\\x00\\x00\\x01\\x1a\\x00\\x05\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\xa4\\x01\\x1b\\x00\\x05\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\xac\\x01(\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x02\\x00\\x00\\x011\\x00\\x02\\x00\\x00\\x00\\x1d\\x00\\x00\\x00\\xb4\\x012\\x00\\x02\\x00\\x00\\x00\\x14\\x00\\x00\\x00\\xd1\\x87i\\x00\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\xe8\\x00\\x00\\x01 \\x00\\x08\\x00\\x08\\x00\\x08\\x00\\x00\\x00\\x96\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x96\\x00\\x00\\x00\\x01Adobe Photoshop CC (Windows)\\x002016:01:18 10:25:46\\x00\\x00\\x00\\x00\\x00\\x04\\x90\\x00\\x00\\x07\\x00\\x00\\x00\\x040221\\xa0\\x01\\x00\\x03\\x00\\x00\\x00\\x01\\xff\\xff\\x00\\x00\\xa0\\x02\\x00\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x03A\\xa0\\x03\\x00\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x01\\xc1\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x06\\x01\\x03\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x06\\x00\\x00\\x01\\x1a\\x00\\x05\\x00\\x00\\x00\\x01\\x00\\x00\\x01n\\x01\\x1b\\x00\\x05\\x00\\x00\\x00\\x01\\x00\\x00\\x01v\\x01(\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x02\\x00\\x00\\x02\\x01\\x00\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x01~\\x02\\x02\\x00\\x04\\x00\\x00\\x00\\x01\\x00\\x00\\x10H\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x96\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x96\\x00\\x00\\x00\\x01\\xff\\xd8\\xff\\xed\\x00\\x0cAdobe_CM\\x00\\x02\\xff\\xee\\x00\\x0eAdobe\\x00d\\x80\\x00\\x00\\x00\\x01\\xff\\xdb\\x00\\x84\\x00\\x0c\\x08\\x08\\x08\\t\\x08\\x0c\\t\\t\\x0c\\x11\\x0b\\n\\x0b\\x11\\x15\\x0f\\x0c\\x0c\\x0f\\x15\\x18\\x13\\x13\\x15\\x13\\x13\\x18\\x11\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x11\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x01\\r\\x0b\\x0b\\r\\x0e\\r\\x10\\x0e\\x0e\\x10\\x14\\x0e\\x0e\\x0e\\x14\\x14\\x0e\\x0e\\x0e\\x0e\\x14\\x11\\x0c\\x0c\\x0c\\x0c\\x0c\\x11\\x11\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x11\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\x0c\\xff\\xc0\\x00\\x11\\x08\\x00V\\x00\\xa0\\x03\\x01\"\\x00\\x02\\x11\\x01\\x03\\x11\\x01\\xff\\xdd\\x00\\x04\\x00\\n\\xff\\xc4\\x01?\\x00\\x00\\x01\\x05\\x01\\x01\\x01\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x01\\x02\\x04\\x05\\x06\\x07\\x08\\t\\n\\x0b\\x01\\x00\\x01\\x05\\x01\\x01\\x01\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x02\\x03\\x04\\x05\\x06\\x07\\x08\\t\\n\\x0b\\x10\\x00\\x01\\x04\\x01\\x03\\x02\\x04\\x02\\x05\\x07\\x06\\x08\\x05\\x03\\x0c3\\x01\\x00\\x02\\x11\\x03\\x04!\\x121\\x05AQa\\x13\"q\\x812\\x06\\x14\\x91\\xa1\\xb1B#$\\x15R\\xc1b34r\\x82\\xd1C\\x07%\\x92S\\xf0\\xe1\\xf1cs5\\x16\\xa2\\xb2\\x83&D\\x93TdE\\xc2\\xa3t6\\x17\\xd2U\\xe2e\\xf2\\xb3\\x84\\xc3\\xd3u\\xe3\\xf3F\\'\\x94\\xa4\\x85\\xb4\\x95\\xc4\\xd4\\xe4\\xf4\\xa5\\xb5\\xc5\\xd5\\xe5\\xf5Vfv\\x86\\x96\\xa6\\xb6\\xc6\\xd6\\xe6\\xf67GWgw\\x87\\x97\\xa7\\xb7\\xc7\\xd7\\xe7\\xf7\\x11\\x00\\x02\\x02\\x01\\x02\\x04\\x04\\x03\\x04\\x05\\x06\\x07\\x07\\x06\\x055\\x01\\x00\\x02\\x11\\x03!1\\x12\\x04AQaq\"\\x13\\x052\\x81\\x91\\x14\\xa1\\xb1B#\\xc1R\\xd1\\xf03$b\\xe1r\\x82\\x92CS\\x15cs4\\xf1%\\x06\\x16\\xa2\\xb2\\x83\\x07&5\\xc2\\xd2D\\x93T\\xa3\\x17dEU6te\\xe2\\xf2\\xb3\\x84\\xc3\\xd3u\\xe3\\xf3F\\x94\\xa4\\x85\\xb4\\x95\\xc4\\xd4\\xe4\\xf4\\xa5\\xb5\\xc5\\xd5\\xe5\\xf5Vfv\\x86\\x96\\xa6\\xb6\\xc6\\xd6\\xe6\\xf6\\'7GWgw\\x87\\x97\\xa7\\xb7\\xc7\\xff\\xda\\x00\\x0c\\x03\\x01\\x00\\x02\\x11\\x03\\x11\\x00?\\x00\\xe7\\x12I\\x1f\\x03\\x14\\xe6\\xe7ca\\x87l96\\xb2\\x90\\xf2\\'n\\xf3\\xb7~\\xd9n\\xed\\xab=\\xec\\x89\\x00\\x12v\\x02\\xca\\x04\\x96\\xf6\\x1f\\xd5\\x9a\\xb2\\xebu\\xd5d\\xde\\xfa\\xbe\\xca\\xdc\\xba\\xcb1\\x9b$\\x17\\x9a\\r/e\\x99m\\xfd6\\xe6?\\xd8\\xcb6>\\xbf\\xf0\\xdf\\xe0\\xd5ln\\x93\\x82\\xfc\\x03\\x97\\x93\\x98\\xfa\\x9d\\xf6k2\\xc5U\\xd2,\\x86W\\x7f\\xd8=\\xcf}\\xf5n}\\x96\\xfef\\xdf\\xfa\\xf2<\\'\\xf6\\xb1}\\xe7\\x16\\xbe\\xa3\\xa1\\x11>\\x99\\xfc\\xd2\\xdb\\xf4\\\\xa4\\x95\\x8e\\xa1\\x89\\xf6\\x1c\\xfc\\x8c-\\xe2\\xdf\\xb3\\xd8k\\xf5\\x00\\xda\\x1d\\x1f\\x9d\\xb2]\\xb3\\xfa\\xbb\\x95t\\x19A\\x04\\x026\"\\xc7\\xd5I$\\x92\\nRJ\\xd5}3\\xa8[\\xe9\\xfax\\xef>\\xb3\\\\xfa\\x89\\x86\\x875\\xa7k\\xdd\\xef-W:W\\xd5n\\xb3\\xd5\\xab\\xba\\xcc:\\xeb#\\x1e\\xc3M\\xa2\\xcb\\x03H{@s\\xdb\\x10\\xff\\x00\\xa3\\xb9\\x11\\x12t\\x00\\xac\\x96\\q\\x04\\xcaq\\x88\\x1b\\xd9rR[\\xd6}J\\xebuY\\xe9Z\\xecZ\\xed\\x8d\\xdb\\x1dx\\x07i\\xdewj\\xcf\\xf8+\\x7f\\xed\\xb7\\xa8\\xbb\\xeawVln\\xbb\\r\\xb2$N@\\xe2}?\\xdc\\xff\\x00H\\xdfO\\xfa\\xe9\\xde\\xdc\\xff\\x00t\\xfd\\x8c\\x7f}\\xe5\\xbf\\xcfC\\xfc`\\xe1\\xa4\\xb7O\\xd4\\xde\\xae9\\xb7\\x0chN\\xb9\\r\\xe1\\xb3\\xbf\\xf3\\x7f3k\\xb7(\\xf5\\x1f\\xa9\\xbdw\\xa6\\xe1[\\x9d\\x97]M\\xa2\\x80\\x0b\\xcbl\\xdc`\\x90\\xcd\\x1b\\xb4~\\xf2F\\x13\\x1a\\x98\\x9f\\xb11\\xe6\\xf9y\\x11\\x18\\xe5\\x81$\\xd0\\x02Cr\\xe2$\\xaf\\xf4\\x8e\\x9fFu\\x99#\"\\xcbkf5M\\xb0\\n\\x18,\\xb1\\xee}\\x95\\xe3WS\\x19c\\x98\\xdfs\\xed\\xfd\\xe5\\xb2\\xdf\\xaa8B\\xe6\\xd5\\x91vn8y{}GSE\\x8d\\x0e\\xae\\xbb2_[\\x9b\\x89\\x93\\x93o\\xa9\\xe9Qf\\xd6zh\\x08\\x13\\xb2rs\\x18\\xa0H\\x91\\xa2<\\t\\xe9\\xc4\\xf2\\xe9.\\xaf#\\xea\\x87L\\xc5\\xb5\\x8c\\xc9\\xcc\\xcc\\xa9\\xb6>\\xca\\x9bi\\xc5\\x05\\xbb\\xebw\\xa6\\xd6\\xed\\xad\\xcf\\xb5\\xdfi\\xff\\x00\\xb4\\x9bj\\xfdc\\xfe1\\t\\xbfU1,v\\xda\\x9f\\x9fdz`\\xcd8\\xf5\\xc3\\xed\\xae\\xbc\\x96Q\\xb7\\'_\\x97z\\xcd\\xae\\xfa\\xfdF#\\xed\\xcb\\xb2\\xc1\\xce\\xe0\"\\xf8\\x8dw1\\x90\\x8f\\xee\\xee\\xf3_L\\xfam\\xfe\\xb0\\xfc\\xaa\\xe7W\\xc0\\xa3\\x06\\xea\\x1b\\x8fe\\x96W}>\\xaf\\xe9\\x98+\\xb1\\x8e\\x16[\\x8deOc\\x1c\\xf6\\xfb\\x1fB\\xa6\\xcf\\xa6\\xdf\\xeb\\x0f\\xca\\x9aE\\x16x\\xc8J<Cb\\xff\\x00\\xff\\xd0\\xe7\\x15\\x9e\\x9b\\x94\\xcc.\\xa3\\x89\\x98\\xf0\\\\xcck\\xab\\xb5\\xcd\\x11$1\\xdb\\x9c\\x1b\\xba\\x1b\\xb9VIg\\xbd\\x91\\x00\\x82\\x0e\\xc4Q\\xfa\\xbdn-\\xd8\\x98\\x95\\xdb\\x8b\\x93\\xd2\\xf2\\xb2\\x18zp\\xe9\\xf4:\\xc0\\xc6X\\xe7o\\xb3_\\xd6\\xeck\\xad\\xae\\x8d\\xff\\x00j\\xc7\\xb2\\xbb\\x7fK\\xe9z\\x08}?\\xab\\xf5\\xce\\x9d\\x89\\x8fE\\x98\\x8f\\xcf\\xb2\\xd1\\xb6\\xca\\xf2kcX\\xdcv\\xec\\x1fe\\xc3 \\x7f\\x86k\\xe8\\xba\\xcb\\xac\\xfd\\x0f\\xab\\xe8\\xfe\\xado\\xe9\\xb7\\xf2\\xbb[\\x11\\x1ax\\'\\xda\\x06\\x80s\\xcaw\\x19\\xe9\\xa55\\xbe\\xe9\\x13|U.#\\xc5+\\x12\\xf9\\x87\\xee\\xfa\\xfd\\x1f\\xe07:\\xb5\\xf6\\xdf\\xd4.u\\xb7]\\x90\\xe6\\x1fL?%\\xa1\\x97\\x00\\xdf\\xf0W\\xb5\\x93\\xfaZ]\\xba\\xa7_i$\\x9aulF\"1\\x11\\x1d\\x05)$\\x92<i\\xca\\x0b\\x9b\\x15g\\xe6\\xd5\\xe9zw9\\xa2\\x82M`\\x1d\\x06\\xef\\xe7\\x03\\xbfy\\xb6~{\\x15\\xee\\x95\\xf5\\x9f\\xac\\xf4\\x9a\\xee\\xaf\\n\\xc6\\x06\\xdfa\\xba\\xcd\\xf5\\x87\\x12\\xf2\\x03\\\\\\xef\\xcd\\xfa[R\\x16\\xfd]\\x15RM.6\\n\\x8f\\xab\\x1e\\xa1>\\xaf\\xb3\\x9d\\xc5\\xb5lw\\xe9=\\xecz\\xd7\\xfa\\xb5\\xff\\x002},\\xdf\\xda\\xe6\\x92~\\xd2\\xef\\xb2\\x9b\\xc3\\x83\\xbd\\x08o\\xa5\\xb7\\xf9\\x1b\\xb7\\xff\\x00/\\xfd\"|A\\xb1R\\x03\\xc6\\xda\\x99\\xa7\\x0fnFx%1\\x7f/\\x00\\x97\\x17\\xa9\\xa1o\\xd7^\\xbbq.\\xbb\\xec\\xf68\\x8d\\xa5\\xce\\xa0LC\\xd9\\x1b\\xb7n\\xfa\\x17\\xde\\xcf\\xfa\\xf5\\xaa?\\xf3\\xc3\\xab\\x83\"\\xbc@@#Lv\\xf0\\xe9.\\x1fK\\xf3\\xb7.\\x8f+\\xff\\x00\\x1b\\xcfL}\\x8b\\xf6\\x7f\\xa9\\xb8n\\xf5\\xb7\\xed\\xdb\\xf9\\xdfG\\xf3\\xd0H\\xfa\\x93\\xa4;\\xa6j\\x1d \\xb5\\xc4\\x03/\\xf4\\xff\\x00\\xae\\xd77\\xd2\\xf5?\\x9bR\\xf0\\xcf\\xfc\\xe8\\xff\\x00\\x19\\xa7\\xee\\xf2\\xdf\\xf8\\x83\\'\\xfe\\x13\\x17\\x07\\xfewum\\xa5\\xbe\\x9e&\\xd26\\x90(\\x00A\\x06\\xb2\\x04?\\xd9\\xecv\\xcfb]C\\xeb\\x87^\\xeaXV\\xe0\\xe5\\xdb[\\xa8\\xb8\\x01`ma\\xa6\\x01\\x0f\\xd1\\xd3\\xfc\\x95\\xd0\\xe2\\x7f\\xcc(\\x9c\\xf3\\xd3f4\\x14\\x07\\xc13\\xf4\\xbd\\xfe\\xe6\\xfb\\x7f1W\\xfa\\xc1\\xff\\x000\\xbfce~\\xc9\\xfb7\\xdb\\xf6\\xb7\\xd0\\xf4\\xf7o\\x9d\\xcd\\x9d\\xbf\\xd9BBto :m\\xc4\\xbf\\x16N\\\\\\xce\"<\\x94\\xe0L\\x85H\\xe2\\x8cxM\\xfc\\xd6\\xe2}Z{kwQ\\xb9\\xd62\\x91N5V\\xfa\\x96\\x87\\x16\\x03^N=\\xad\\x0f\\xf4Ym\\xbe\\xf73g\\xb2\\xb5\\xb7\\x8a\\xfc\\x1aE\\xd9\\x98b\\x9aX\\xe7[\\x9dq.\\xcc\\xbc\\xbb}\\x19\\x98\\xd4\\xdb\\xe8\\xb7\\xa7\\xe2\\\\\\xce\\x9c\\xcb2l\\xf5\\xf2\\xd8\\xefg\\xd0\\xf5}U\\x99\\xf53\\xd4\\xf5\\xfa\\xb1\\xa9\\xc1\\x8foN\\xb1\\xc0\\xb9\\xa2\\xc6\\xe8\\xe6\\xbbk\\xeaxslc\\xfe\\x83\\xda\\xae\\xd3\\x86\\xf7[\\x8c:\\x83\\x0fO\\xa6\\xacZ-\\xc7}\\x8c\\x03 \\xd1\\x8a\\xfb3r\\xec\\xa3\"\\xaf~5\\xedk\\xacg\\xd8\\xf0\\xf6ezvb\\xd9\\xfc\\xd5W!\\x0b\\xa0\\xbb\\x98\\xe192\\x02H\\xf9n\\x8e\\xf10\\x8f\\x17\\xea\\xff\\x00M\\xb1\\x87P\\xcc\\xb3\\x07\\x00\\xd0\\xea\\xf3h`f7\\xda\\x1ba\\xb1\\xcc\\xf57\\xe6f\\xe4\\xda\\xcc\\x8d\\x8fu?\\xd2>\\xc3\\xf6\\x8a\\xaf\\xe9\\xb9\\xff\\x00\\xa1\\xfd\"=\\xb8\\x83:\\xf1~MU\\xde\\xfc{+\\xccs_}\\xac\\xb2\\xab+\\xad\\x98\\x19L\\xcb~?O\\xc8\\xc7\\xb6\\xb6\\xe5t\\\\x96\\xfd\\xa2\\xbfJ\\xbf\\xfbz\\x85\\x9dfQ\\xca\\xa7\\x0b\\xedU\\x8c\\xbc\\xabn\\xa3.\\xcc\\x06\\x8a\\x81\\xb3\\xd7>\\xab\\x9dU_\\x9b\\xf6\\x8a\\xff\\x00Ig\\xd9\\xbf\\xf6\\xa5\\xfaef\\xae\\xa1\\x8d\\x91\\x9fKY\\x97fNuls\\x0eE\\xf3n\\x1e3lo\\xd9\\xec\\xb2\\x87\\xdb\\xfa;\\xfd\\x1bk\\xa2\\x8f\\xb6\\xd9\\xfd5\\x99\\xfe\\xa5\\x9e\\xad\\x88\\x82\\x18e\\t\\x83z\\xed/\\x97\\x8b\\xd3\\x7f5K\\xe6\\xf6\\xf2\\x7f/q\\xc5\\xfa\\xd7U\\x95e`\\xfa\\x8ec\\xddn\\x1f\\xae]^\\xed\\x9f\\xa7\\xc8\\xca\\xc9\\x1b=V\\xd7g\\xf8o\\xcfb\\xc6g\\xd3o\\xf5\\x87\\xe5Z\\xff\\x00Y\\xb1\\xec\\xc6\\xb3\\xa6Quo\\xa6\\xda\\xf0\\x1a\\xdbk\\xb3l\\xb5\\xfe\\xb6G\\xa8\\xd6\\xfa_\\xa3\\xf4w\\xff\\x00G\\xdb\\xfe\\x03\\xd3Y\\x0c\\xfam\\xfe\\xb0\\xfc\\xaa)|\\xc5\\xd2\\xe5\\xff\\x00\\x99\\x8e\\xb7\\xbe\\xbf\\xe1?\\xff\\xd1\\xe7\\x12I;Z\\\\H\\x1a\\x90\\x0b\\x8f\\xc1\\xa0\\xbd\\xdf\\xf4Z\\xb3\\x9e\\xc9d\\x95\\xd7\\xf4~\\xa7Y!\\xf4m \\xb1\\xa6^\\xcem\\xfek\\xf3\\xff\\x009W\\xb7\\x1a\\xfaZ\\xd7Z\\xcd\\xad|\\xed2\\x0c\\xc1\\xda\\xee\\x0f\\xe6\\xb9\\x1a(\\x13\\x89\\xda@\\xf9\\x14I$\\x92\\tRI$\\x92\\x94\\x92I$\\xa5\\xe5)L\\x92J^RL\\x92Jv~\\xac[\\xe8\\xdb\\x9c\\xff\\x00Y\\xd8\\xed\\xf4hm\\x971\\xe6\\xb2\\xd6;/\\x16\\xbb\\x8f\\xac\\xc2\\xd7W\\xfa\\'?\\xdf\\xb9n\\xdb\\x95\\x97[2~\\xd7\\x1b\\x03\\xb2\\x9bM\\x1fm\\xba\\xf6\\xdf\\x8e\\xdc<\\xfb]\\xf6\\x8a]\\x9d\\x95\\xf9\\xf5c~\\x91\\xbe\\x8f\\xf2\\x17%\\x83\\xd4s\\xbau\\x8f\\xb7\\n\\xd1S\\xedg\\xa7d\\xb1\\x96\\x072C\\xf6\\x96^\\xcb\\x19\\xf4\\x9a\\xae3\\xebG^\\xac\\xee\\xaf\"\\xb6\\x12\\x08\\x96\\xe3c\\x03\\x07B4\\xc7RF`\\x00\\r\\xb53r\\xd9\\'9J<\\x15/\\xde\\x94\\xe3/\\x961\\xfd\\x18\\xbd\\x15u?\\x0f\\xa4S\\x85\\xd3\\xb2p\\xc3\\x0e\\xdfS\\x12\\xc6\\x91nU\\xe4\\xfb)\\xba\\xa6\\xda\\xe6\\xba\\xcc\\xbb?S\\xc8\\xa7\\xed\\xb9X\\x96\\xe2\\xfe\\xb5\\x8f\\xfa\\xbf\\xe8\\xd6c\\xf2+\\xea\\x03\\x13\\t\\xd9x\\xd7\\x9e\\x9c\\xe7W\\x8b\\x8eM\\xd4\\xd9n\\xdd\\x9d?\\x1d\\xce\\xb2\\xdb\\xda\\xdc+\\x9f^/\\xdb=:\\xfd6c\\xfe\\x8a\\xefO&\\xcc\\xab\\xaaT\\xc7\\xd6\\xef\\xac\\x804\\x0c\\xc6\\x81\\\\x16\\x01\\x8f\\x8f\\xed-\\x1b\\x1b\\xb7\\xf4\\x1e\\xdd\\xac\\xf6(\\xbb\\xeb_\\xd6\\x17\\xce\\xfc\\xa6;v\\xae\\x9c|s3\\xe3\\xfa\\x04L\\xe3\\xe3\\xf6\\x7f\\xe8K#\\xcbg\\x04\\x93\\xc0dI\\x97\\x17\\x11\\xbe)|\\xdc_\\xa9I\\xf5\\xa7!\\xb99\\x1d>\\xd6\\x978}\\x880\\xb9\\xf6\\x9c\\x878\\xb2\\xfc\\x9a\\x9dg\\xda\\x8cz\\xfe\\xa3\\x99\\xbfz\\xc7g\\xd3o\\xf5\\x87\\xe5G\\xce\\xea9\\xbdF\\xd6]\\x9b`\\xb6\\xca\\xd8_a\\x0ce`0\\x17=\\xac\\x0c\\xa1\\x95\\xb3\\xe9=\\xc8\\x0c\\xfam\\xfe\\xb0\\xfc\\xa9\\x926m\\xb7\\x8a\\x06\\x18\\xc4Mi{\\x1e/\\xf9\\xd2\\x7f\\xff\\xd2\\xe7\\x12\\xdcZ\\t\\x07i\\x83\\xa8\\xff\\x00bI\\xc3\\\\\\xed\\x1a$\\xc105\\xe0IY\\xcfd\\xec3\\x18\\n\\xf7\\xdb\\x83\\x95o\\xe9\\x1c\\xc2\\xe7_\\xee 0~\\x8e\\x1a\\xf6\\xee\\xf4\\xff\\x00\\x9d\\xfe\\xa2\\x83\\xc6\\x1b\\x83\\x03\\xb0\\xae\\xe6\\xb75\\x87\"C\\x9a\\x03\\x1b{}\\xd6\\xee\\xfd=\\x96\\xfa\\xb5\\xedQ\\xa2\\xaa\\xdav\\xdf\\xd3\\xb3-./\\r\\x97<N\\xe6\\xed\\xa1\\x85\\x8d\\xd9\\xfc\\xd3\\xf7\\xbbw\\xf8D\\xefe\\x15C]\\xd3r\\xeb}\\x80\\x90K\\xec\\x05\\xcck?I\\xed\\xdd\\xefo\\xab\\xfat\\xe6\\xb7^\\xbfI\\x7f\\xeb\\xe6v\\xe2b\\x8d\\xdb:m\\xcc\\xda\\xe7\\xee\\x1e\\xbb\\\\\\x03A\\xde\\xc6\\xb7\\xf4\\x9e\\xefg\\xb3\\xfe\\x17\\xf3\\x13_\\x81Q\\xbb\\xd3\\xa3\\xa7\\xdbY\\xb6\\xdf\\xb3\\xd5[\\xaek\\x8f\\xabcZ\\xfa\\x1b\\xfc\\xe7\\xe6\\xee\\xfc\\xef\\xd1{\\xd4\\x1a\\xdcv\\x06\\xef\\xe9\\xf9a\\xad\\xf4\\x9e\\xedlh\\x1b\\x86\\xc7X\\xdf\\xd2{~\\xd5w\\xba\\x97\\xa1\\xd8-f1q\\xc6\\xcac\\xde&\\xac\\x89\\xb2\\x01\\xa5\\xd3}\\x83\\xf4\\x8ek\\x9a\\xcff\\xff\\x00\\xf4\\x1b\\x12H\\xe2\\xb1\\xa9\\xed\\xa9?\\xa5\\xff\\x00U\\xfd\\x16\\xce7Mc\\xea\\rwL\\xba\\xdbd\\x93cn\\r\\x05\\x9b\\x9bW\\xb5\\x8e\\xb1\\xff\\x00\\xcd\\xbd\\xe8O\\xe9\\xde\\x88\\xad\\x97a[\\xeaV\\x1d\\xeb\\x9fQ\\x80\\xbfk\\xc6\\xe75\\xad\\xb0\\xed\\xfd\\x1b}\\x1d\\xac\\xfd\\xfbm\\xff\\x00\\x02\\xa3p\\xf5\\xdc\\x1f\\x8d\\x8d\\x97]~\\xa3X\\xd8/\\xb0\\xc8n\\xebi\\x07\\xd4\\xfav0\\xfa\\x88Oh\\xbb\\x1a\\xb3\\x89\\x8f\\x95\\xea\\x87<\\xd9x/{\\x1e\\x01\\x11\\xa0.\\xf4\\xdfEn\\xd9bI\\x1cW\\xac\\xb7:\\xfc\\xde\\x9f?\\xd6\\xb6.\\xaf\\x002\\xdb\\xc7N\\xb5\\x944\\xb8n\\xf5~\\x86\\xe7\\xec\\xa7\\x97\\xbfw\\xa7\\xe9]_\\xfe\\n\\xacY\\xd2\\x9bS\\xdel\\xe96\\xb2\\xb8t\\x03\\x90\\xdd\\xcd&\\xbfU\\x9az\\x9e\\xe6U\\xb9\\x96\\xbb\\xfe\\xdaY#\\x1b<\\x9d*\\xb8\\x9d\\x01\\xd1\\xdf\\xe18\\x0e\\xfd\\xdf[\\xf9_\\xce\\'4\\xf5 \\x0c\\xb3&\\x00\\xde\\x7f\\x9c:\\x12\\xd6o?\\xd6s\\xd8\\xcf\\xed\\xa5\\xf4I\\x81\\xd8d\\xef\\xbc\\xa7\\xd7o\\xf2\\x8d\\xf7\\xe3b\\xd5C\\xb2\\xaf\\xe9w2\\xb0\\xfd\\xa4\\x8b}\\xa0\\xba\\xad\\xccg\\xf3\\x9b\\xfd\\xb6~\\x9br\\xc91\\'l\\xc7i\\xe7\\xf8\\xa3;\\x1f<Huw\\x8d\\xa4\\xb0\\x87\\x07\\xe8c{\\x99\\xb5\\xdf\\xf0j\\x1fg\\xc8\\xd4zO\\x90\\x01#i\\xe1\\xda\\xb7\\xfc\\xe9@\\xf9/\\x80\\xab\\xb9_\\xd4\\xff\\x00\\xddJH\\xd2Gv\\x0es]\\xb1\\xf8\\xd75\\xe3B\\xd7V\\xe0t\\x1b\\xf8#\\xf7=\\xe8:\\x8d\\x0e\\x85%\\xe0\\x83\\xb1\\xb5\\x92I$\\x14\\xa4\\x92I%)I\\x9fM\\xbf\\xd6\\x1f\\x95EI\\x9fM\\xbf\\xd6\\x1f\\x95%?\\xff\\xd3\\xe7\\x11(\\x8fSW\\xfaCk\\x86\\xf8\\x9eZ\\xefo\\xfds\\xf9\\xb44\\xe0\\xc1\\x06\\x01\\x8e\\xc4H\\xf9\\xb4\\xac\\xe7\\xb2;:\\xf5d\\xb0\\x00\\xe7u\\x9bZ\\xe6\\xba\\xa2\\xdfd\\x91 :\\xf7\\xfb\\xfd\\xdf\\xa0v\\xe63o\\xf3\\x89\\xac\\xba\\x9b\\x8dO\\xb7\\xab\\xbd\\xef\\xa9\\x8e\\x0c/\\xaav\\x979\\xdb\\xebg\\xd2\\xfaU\\xfe\\x91W\\xfd\\xa5\\x8d\\x00\\x0e\\x9b\\x8a\\x00s\\x9d\\x10\\xe3\\xa3\\x9c\\xd7\\xec\\x93\\xef\\xd8\\xcd\\x9e\\x93=\\xdf\\xcd\\xefP\\xfbv<i\\xd3\\xf1\\x81\\xf1\\xfd!\\xfd\\xef\\x17\\xed\\xfc\\xff\\x00\\xfa\\t\\xd7\\xfc\\xb5`\\xf6\\xce\\xfc$}0\\xa7\\xbe\\xd6\\xba\\xc3`\\xea\\x8e\\xb9\\xf8\\xf3\\xf6w=\\xb1;C}\\r\\x9a\\xbf\\xfe/\\xd2\\xff\\x00\\x04\\x8bm\\xf5\\xbc\\x86\\xfe\\xd9{\\xebn\\xe6\\xfd\\x02\\xd8m\\x9f\\xce3n\\xdf\\xd21\\xf0\\xcfW\\xff\\x00F_M\\xcd\\xa1\\xad\\xdb\\xf6\\x1a\\x0e\\x84\\x02\\xed\\xc4\\xea\\x1b\\xac\\xff\\x00\\'g\\xb1J\\xae\\xa3En\\x04\\xf4\\xfck\\x00 \\x90\\xf0L\\xc1\\xdf\\xb4\\xff\\x00[\\xe8\\x7fQ+\\xfeZ\\xa4\\xe344:m\\xfc\\xd7\\xfd\\xeav\\xdc\\xd6]Sk\\xea\\x8feNt\\xd9v\\xcf{_\\xb3n\\xf0\\xd1\\xb5\\xcf\\xaf\\xfc\\x0f\\xbd\\xff\\x00\\xcd\\xfa\\x7f\\xf5\\xb9V\\xfcv\\xd5\\xed\\xea\\xefi\\x10\\xe1P\\xac\\x01\\xb9\\xe4\\xfa\\xedo\\xe6\\xb7\\xff\\x00FoT\\xea\\xcd\\xa1\\x8cs]\\x85E\\xb2Ac\\x9d\\xbbs}\\xce\\xb2\\to\\xf3\\x9b\\xb7z_\\xf1H\\x87\\xa8b\\x98\\x07\\xa6\\xe3\\x80\\x04{K\\x81>\\xd7W.w\\xbb\\xf7\\xbdO\\xf8\\xc4\\xaf\\xf9j\\xa3\\x03\\xd8\\xff\\x00\\xe3>\\xa4\\xc7 \\x8d\\xf5\\xb7\\xaa?c\\xdf\\xae\\x82\\x1c+\\'\\xd1\\xb1\\xdbG\\xfd\\x04\\xde\\xbb\\x1a\\xc75\\xbdM\\xee\\x1e\\x99\\x01\\xa5\\x90f\\x1bkk\\xf7n\\xf6:\\xe6\\xfd?\\xa6\\xaa\\xd5\\x99S\\x00k\\xf0\\xe8\\xb4\\x00\\x07\\xb8\\x10\\xe3\\x01\\xed\\xdc^\\xd3\\xf4\\xdd\\xbf\\xdf\\xff\\x00\\x16\\xc5\\x07\\xdd[\\xafm\\xa2\\x861\\xa0\\xb4\\xba\\x96\\x93\\xb1\\xdb\\x7f\\x92\\xe9\\xd9\\xbf\\xf3\\xd2\\xb4\\x8cz\\xec~\\xccm\\xbb\\xb2\\x9eXv\\xf5\\'X\\xe0\\xe2\\xe6\\x82\\x03N\\xe2\\x03_\\xacn\\xdc\\xf6\\xff\\x00\\x9f\\xb1U\\xfbvl\\xb4\\xfa\\xcf\\x05\\xa3kH0@\\x1c7A\\xf9\\xb0\\x8d\\xfbB\\x8d\\xafh\\xc1\\xa1\\xbb\\xc4Kd~\\x7f\\xaa7Hw\\xb7o\\xe8vW\\xe9~\\x8d@fR,/8X\\xee\\x1a\\xc3\\x08ph\\x98\\xfd\\xd2\\xd4\\xbe\\xa9\\x8ckx\\x7f\\xd0\\xff\\x00\\xb9S\\xba\\xa7S{\\x8b\\x9f\\x95c\\x9c\\xe7\\x17\\x92H\\x92\\xe26\\xef:}=\\xbf\\x9c\\xab\\x12\\I<\\x9f\\x01\\x1f\\x91Y\\xfbm0\\xf1\\xf6\\x1cs\\xbc\\x92\\x0c:[-\\x0c\\xdb\\;\\xf3\\x7f\\x9c\\xff\\x00\\x8cUG\\x08\\x1f5\\xd1\\x00m\\x1e\\x1f\\xf1\\x7f\\xeeT\\x910$\\xf6I\"$\\x11\\xe3\\xa2\\x0b\\xdb\\xae\\xe8\\xddU\\xac\\xf5\\x1d\\x8c\\xe6\\xb3\\xd1vPq-\\x83K6\\xef\\xb8{\\xbe\\x8b}F_\\xae\\xaa\\xe6\\xee.\\xad\\xed\\r :X\\xe1\\x04\\xfd\\x10\\xe9o\\xb7r\\xbaz\\xdeQf\\xc0\\xc6\\x80Z\\xd6:]k\\x83\\xab\\x10\\x1dC\\x9be\\xaeo\\xa5n\\xdf\\x7f\\xfd\\x04W}e\\xea\\xaex\\xb3\\xd4sHn\\xdd,\\xb7X>\\xd3\\xb8\\xd9\\xbf\\xdb\\xefo\\xfdq;F\\x11,\\xddc\\x13\\xf5\\xe1\\xff\\x00\\xbfr\\xbe:\\x1f\\x03\\xa2\\x93>\\x9b\\x7f\\xac?*\\x9eNE\\x99Y\\x16d\\xd9\\xfc\\xe5\\xce\\xdc\\xedK\\xb5\\xfe\\xbd\\x85\\xd6;\\xfbnPg\\xd3o\\xf5\\x87\\xe5A\\x97Z\\xd7M\\x1f\\xff\\xd4\\xe7\\x12\\jK9\\xec\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9%\\xc6\\xa4\\x92\\x9e\\xc9I\\x9fM\\xbf\\xd6\\x1f\\x95qi$\\xa7\\xff\\xd9', 'jfif_version': (1, 1), 'jfif_density': (150, 150), 'dpi': (150, 150)}\r\n```\r\n\r\nconvert 1.jpg to CMYK\r\n```python\r\nim.convert('CMYK').save('2.jpg',dpi=(150,150))\r\n```\r\n\r\nthen\r\n\r\n```python\r\nim = Image.open('3.jpg')\r\n\r\n im.info\r\n\r\n{'adobe': 100, 'adobe_transform': 100}\r\n```", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1676/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1668", "id": 127097387, "node_id": "MDU6SXNzdWUxMjcwOTczODc=", "number": 1668, "title": "It seemed that the box of Draw.rectangle contained the end xy point", "user": {"login": "Morriaty-The-Murderer", "id": 12904434, "node_id": "MDQ6VXNlcjEyOTA0NDM0", "avatar_url": "https://avatars.githubusercontent.com/u/12904434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Morriaty-The-Murderer", "html_url": "https://github.com/Morriaty-The-Murderer", "followers_url": "https://api.github.com/users/Morriaty-The-Murderer/followers", "following_url": "https://api.github.com/users/Morriaty-The-Murderer/following{/other_user}", "gists_url": "https://api.github.com/users/Morriaty-The-Murderer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Morriaty-The-Murderer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Morriaty-The-Murderer/subscriptions", "organizations_url": "https://api.github.com/users/Morriaty-The-Murderer/orgs", "repos_url": "https://api.github.com/users/Morriaty-The-Murderer/repos", "events_url": "https://api.github.com/users/Morriaty-The-Murderer/events{/privacy}", "received_events_url": "https://api.github.com/users/Morriaty-The-Murderer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115805, "node_id": "MDU6TGFiZWwxMDExNTgwNQ==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Duplicate", "name": "Duplicate", "color": "cccccc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2016-01-17T14:10:56Z", "updated_at": "2022-09-30T11:12:26Z", "closed_at": "2022-09-30T11:12:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I learned this from doc:\r\n\r\n> xy \u2013 Four points to define the bounding box. Sequence of either [(x0, y0), (x1, y1)] or [x0, y0, x1, y1]. The second point is just outside the drawn rectangle.\r\n\r\nThen I ran this script\r\n\r\n``` python\r\nfrom PIL import Image, ImageDraw\r\nbb=Image.new('RGB',(4,4),(255,255,255))\r\ndr=ImageDraw.Draw(bb)\r\nbox=(0,0,2,2)\r\ndr.rectangle(box, fill=(125,45,55))\r\nfor i in range(4):\r\n    for j in range(4):\r\n        print(i,j,bb.getpixel((i,j)))\r\ncc=bb.crop(box)\r\nprint(bb.getcolors())\r\nprint(cc.getcolors())\r\n```\r\n\r\nThe output was\r\n\r\n``` python\r\n0 0 (125, 45, 55)\r\n0 1 (125, 45, 55)\r\n0 2 (125, 45, 55)\r\n0 3 (255, 255, 255)\r\n1 0 (125, 45, 55)\r\n1 1 (125, 45, 55)\r\n1 2 (125, 45, 55)\r\n1 3 (255, 255, 255)\r\n2 0 (125, 45, 55)\r\n2 1 (125, 45, 55)\r\n2 2 (125, 45, 55)\r\n2 3 (255, 255, 255)\r\n3 0 (255, 255, 255)\r\n3 1 (255, 255, 255)\r\n3 2 (255, 255, 255)\r\n3 3 (255, 255, 255)\r\n[(7, (255, 255, 255)), (9, (125, 45, 55))]\r\n[(4, (125, 45, 55))]\r\n```\r\n\r\nIt drew 9 points, while I just wanted the first 4 points to be filled ", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1662", "id": 126894526, "node_id": "MDU6SXNzdWUxMjY4OTQ1MjY=", "number": 1662, "title": "Converting Image Profile to sRGB", "user": {"login": "mikebarkmin", "id": 2592379, "node_id": "MDQ6VXNlcjI1OTIzNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2592379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikebarkmin", "html_url": "https://github.com/mikebarkmin", "followers_url": "https://api.github.com/users/mikebarkmin/followers", "following_url": "https://api.github.com/users/mikebarkmin/following{/other_user}", "gists_url": "https://api.github.com/users/mikebarkmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikebarkmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikebarkmin/subscriptions", "organizations_url": "https://api.github.com/users/mikebarkmin/orgs", "repos_url": "https://api.github.com/users/mikebarkmin/repos", "events_url": "https://api.github.com/users/mikebarkmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mikebarkmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2016-01-15T15:27:02Z", "updated_at": "2017-02-07T19:38:06Z", "closed_at": "2017-02-07T19:38:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nwhen i am converting a Image with an embedded \"Adobe RGB (1998)\" profile to sRGB, i only receive an fully transparent image. On the other Hand, when i am converting an image with an embedded \"Linear Color Space\" profile, everything works as expected. I don't know why some profiles convert to only transparent pictures. It would be great, if we could work out this issue.\n\nSource Code:\n\n``` python\nimport PIL.Image\nimport PIL.ImageCms\nimport tempfile\n\nimg = PIL.Image.open('input.png')\nicc = tempfile.mkstemp(suffix='.icc')[1]\nwith open(icc, 'w') as f:\n    f.write(img.info.get('icc_profile'))\nsrgb = PIL.ImageCms.createProfile('sRGB')\nimg = PIL.ImageCms.profileToProfile(img, icc, srgb)\nimg.save('output.png')\n```\n\nTested Python Versions:\n- 2.7.10\n\nTested Pillow Versions:\n- 3.0.0\n- 3.1.0\n\nTested LittleCms Versions:\n- 2.7\n\nSource and Sample Image:\n[source.zip](https://github.com/python-pillow/Pillow/files/92095/source.zip)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1662/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1642", "id": 124841869, "node_id": "MDU6SXNzdWUxMjQ4NDE4Njk=", "number": 1642, "title": "Small warning testing latest Pillow 3.1.0 on windows", "user": {"login": "stonebig", "id": 4312421, "node_id": "MDQ6VXNlcjQzMTI0MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4312421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stonebig", "html_url": "https://github.com/stonebig", "followers_url": "https://api.github.com/users/stonebig/followers", "following_url": "https://api.github.com/users/stonebig/following{/other_user}", "gists_url": "https://api.github.com/users/stonebig/gists{/gist_id}", "starred_url": "https://api.github.com/users/stonebig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stonebig/subscriptions", "organizations_url": "https://api.github.com/users/stonebig/orgs", "repos_url": "https://api.github.com/users/stonebig/repos", "events_url": "https://api.github.com/users/stonebig/events{/privacy}", "received_events_url": "https://api.github.com/users/stonebig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2016-01-04T21:20:33Z", "updated_at": "2020-09-11T23:52:46Z", "closed_at": "2017-09-23T21:39:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "see https://github.com/scipy/scipy/issues/5666\n\n```\nWarning (from warnings module):\n  File \"D:\\WinPython\\basedir34\\buildQt5\\winpython-3.4.4.amd64\\python-3.4.4.amd64\\lib\\site-packages\\PIL\\Image.py\", line 842\n    self.load()\nResourceWarning: unclosed file <_io.BufferedReader name='D:\\\\WinPython\\\\basedir34\\\\buildQt5\\\\winpython-3.4.4.amd64\\\\python-3.4.4.amd64\\\\lib\\\\site-packages\\\\scipy\\\\misc\\\\tests\\\\data\\\\foo3x5x4indexed.png'>\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1631", "id": 124576882, "node_id": "MDU6SXNzdWUxMjQ1NzY4ODI=", "number": 1631, "title": "No n_frames, or bad value for n_frames", "user": {"login": "v-python", "id": 3078240, "node_id": "MDQ6VXNlcjMwNzgyNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/3078240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/v-python", "html_url": "https://github.com/v-python", "followers_url": "https://api.github.com/users/v-python/followers", "following_url": "https://api.github.com/users/v-python/following{/other_user}", "gists_url": "https://api.github.com/users/v-python/gists{/gist_id}", "starred_url": "https://api.github.com/users/v-python/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/v-python/subscriptions", "organizations_url": "https://api.github.com/users/v-python/orgs", "repos_url": "https://api.github.com/users/v-python/repos", "events_url": "https://api.github.com/users/v-python/events{/privacy}", "received_events_url": "https://api.github.com/users/v-python/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 21, "created_at": "2016-01-02T05:51:29Z", "updated_at": "2021-01-01T00:22:36Z", "closed_at": "2019-03-28T10:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I feed the test file  flower2.jpg  into this code (from #1630)\r\n\r\n```python\r\nim = Image.open( fn )\r\nimgcnt = im.n_frames\r\ncolors = im.getcolors( im.width * im.height )\r\nif args.hist:\r\n    for cnt, col in colors:\r\n        allcolors[ col ] += cnt\r\n    for iz in range( 1, imgcnt ):\r\n        im = Image.open( fn ) # does getcolors implicitly close????\r\n                              # without the open, get \"seek of closed\r\n                              # file\" error on line below.\r\n        im.seek( iz )\r\n        colors = im.getcolors( im.width * im.height )\r\n        for cnt, col in colors:\r\n            allcolors[ col ] += cnt\r\n```\r\n\r\nI get \"AttributeError: n_frames\"\r\n\r\nBut other .jpg files do not get that error... this one: http://nevcal.com/temporary/20151110-105826gl.jpg has no problem with the attribute error on that line, but it gets a value of 2, apparently handles the seek OK, but dies in the second call to getcolors, with \"OSError: image file is truncated (0 bytes not processed)\".\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1631/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1600", "id": 122765811, "node_id": "MDU6SXNzdWUxMjI3NjU4MTE=", "number": 1600, "title": "PA mode handling is wonky", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-17T16:07:18Z", "updated_at": "2019-06-05T19:32:45Z", "closed_at": "2019-06-05T19:32:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Or. half baked. \n\nWe 'support' a mode called `PA` which is palette with alpha, stored in 4 bytes per pixel. (FWIW, I think this all applies to `LA` as well)\n\n`Image.putpalette` (https://github.com/python-pillow/Pillow/blob/master/PIL/Image.py#L1447) only allows for `L` or `P` images when adding a palette:\n\n```\n        if self.mode not in (\"L\", \"P\"):\n            raise ValueError(\"illegal image mode\")\n```\n\n`_imaging.c:_putpalette` Also only accepts\\* `L` and `P`.  This code was in PIL:\n\n```\n    if (strcmp(self->image->mode, \"L\") != 0 && strcmp(self->image->mode, \"P\")) {\n        PyErr_SetString(PyExc_ValueError, wrong_mode);\n        return NULL;\n```\n\n\\* or rather, it looks like it should but only actually accepts if `mode ==`P`and mode !='L'`\n\n`TiffImagePlugin:_setup` (https://github.com/python-pillow/Pillow/blob/master/PIL/TiffImagePlugin.py#L1137) only includes the palette for  `P` images. \n\n```\n        if self.mode == \"P\":\n            palette = [o8(b // 256) for b in self.tag_v2[COLORMAP]]\n            self.palette = ImagePalette.raw(\"RGB;L\", b\"\".join(palette))\n```\n\nAll of this found while checking out #1597.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1597", "id": 122312021, "node_id": "MDU6SXNzdWUxMjIzMTIwMjE=", "number": 1597, "title": "Segmentation fault", "user": {"login": "playnet", "id": 1932020, "node_id": "MDQ6VXNlcjE5MzIwMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1932020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/playnet", "html_url": "https://github.com/playnet", "followers_url": "https://api.github.com/users/playnet/followers", "following_url": "https://api.github.com/users/playnet/following{/other_user}", "gists_url": "https://api.github.com/users/playnet/gists{/gist_id}", "starred_url": "https://api.github.com/users/playnet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/playnet/subscriptions", "organizations_url": "https://api.github.com/users/playnet/orgs", "repos_url": "https://api.github.com/users/playnet/repos", "events_url": "https://api.github.com/users/playnet/events{/privacy}", "received_events_url": "https://api.github.com/users/playnet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2015-12-15T16:32:36Z", "updated_at": "2018-12-26T13:05:03Z", "closed_at": "2018-12-22T12:33:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[rdf.zip](https://github.com/python-pillow/Pillow/files/62856/rdf.zip)\ngithub don't eat .tif file, unzip it and\n\n```\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import PIL.Image\n>>> filename=\"rdf.tif\"\n>>> img = PIL.Image.open(filename)\n>>> img.info\n{'resolution': (72.0, 72.0), 'compression': 'tiff_lzw'}\n>>> img.size\n(518, 556)\n>>> img.save(\"rdf.1.tif\", format='TIFF')\nSegmentation fault\n\n$ pip show Pillow\n\n---\nName: Pillow\nVersion: 3.0.0\nLocation: /usr/local/lib/python2.7/dist-packages\nRequires: \n\n$ dpkg -l|grep tiff\nii  libtiff-tools                               4.0.3-7ubuntu0.3                                    amd64        TIFF manipulation and conversion tools\nii  libtiff4:amd64                              3.9.7-2ubuntu1                                      amd64        Tag Image File Format (TIFF) library (old version)\nii  libtiff5:amd64                              4.0.3-7ubuntu0.3                                    amd64        Tag Image File Format (TIFF) library\nii  libtiff5:i386                               4.0.3-7ubuntu0.3                                    i386         Tag Image File Format (TIFF) library\nii  libtiff5-dev:amd64                          4.0.3-7ubuntu0.3                                    amd64        Tag Image File Format library (TIFF), development files\nii  libtiffxx5:amd64                            4.0.3-7ubuntu0.3                                    amd64        Tag Image File Format (TIFF) library -- C++ interface\n\n```\n\n```\nuname -a\nLinux playnet 3.13.0-24-generic #47-Ubuntu SMP Fri May 2 23:30:00 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\ncat /etc/lsb-release\nDISTRIB_ID=LinuxMint\nDISTRIB_RELEASE=17.2\nDISTRIB_CODENAME=rafaela\nDISTRIB_DESCRIPTION=\"Linux Mint 17.2 Rafaela\"\n```\n\nAnd\n\n```\nLinux build64 2.6.32-042stab111.12 #1 SMP Thu Sep 17 11:38:20 MSK 2015 x86_64 x86_64 x86_64 GNU/Linux\n$cat /etc/redhat-release \nCentOS release 6.7 (Final)\n$python -V\nPython 2.6.6\n\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1541", "id": 117308155, "node_id": "MDU6SXNzdWUxMTczMDgxNTU=", "number": 1541, "title": "Sphinx errors on Travis CI", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-11-17T08:38:54Z", "updated_at": "2016-01-09T09:35:45Z", "closed_at": "2016-01-09T09:35:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It's not causing builds to fail, but `pushd docs; make html; make linkcheck; popd` results in errors in the log:\n\nhttps://travis-ci.org/python-pillow/Pillow/jobs/91335318#L2493\n\n```\n0.72s$ pushd docs; make html; make linkcheck; popd\n~/build/python-pillow/Pillow/docs ~/build/python-pillow/Pillow\nsphinx-build -b html -d _build/doctrees   . _build/html\nRunning Sphinx v1.3.1\nmaking output directory...\nException occurred:\n  File \"conf.py\", line 59, in <module>\n    import PIL\nImportError: No module named PIL\nThe full traceback has been saved in /tmp/sphinx-err-awRHdU.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\nmake: *** [html] Error 1\nsphinx-build -b linkcheck -d _build/doctrees   . _build/linkcheck\nRunning Sphinx v1.3.1\nmaking output directory...\nException occurred:\n  File \"conf.py\", line 59, in <module>\n    import PIL\nImportError: No module named PIL\nThe full traceback has been saved in /tmp/sphinx-err-7PDKSC.log, if you want to report the issue to the developers.\nPlease also report this if it was a user error, so that a better error message can be provided next time.\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\nmake: *** [linkcheck] Error 1\n~/build/python-pillow/Pillow\n```\n\ncc @aclark4life \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1525", "id": 115199242, "node_id": "MDU6SXNzdWUxMTUxOTkyNDI=", "number": 1525, "title": "Animated gif displays frames incorrectly", "user": {"login": "JuanPotato", "id": 9531780, "node_id": "MDQ6VXNlcjk1MzE3ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/9531780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JuanPotato", "html_url": "https://github.com/JuanPotato", "followers_url": "https://api.github.com/users/JuanPotato/followers", "following_url": "https://api.github.com/users/JuanPotato/following{/other_user}", "gists_url": "https://api.github.com/users/JuanPotato/gists{/gist_id}", "starred_url": "https://api.github.com/users/JuanPotato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JuanPotato/subscriptions", "organizations_url": "https://api.github.com/users/JuanPotato/orgs", "repos_url": "https://api.github.com/users/JuanPotato/repos", "events_url": "https://api.github.com/users/JuanPotato/events{/privacy}", "received_events_url": "https://api.github.com/users/JuanPotato/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 341437806, "node_id": "MDU6TGFiZWwzNDE0Mzc4MDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/GIF", "name": "GIF", "color": "fbca04", "default": false, "description": null}, {"id": 400993500, "node_id": "MDU6TGFiZWw0MDA5OTM1MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Palette", "name": "Palette", "color": "5319e7", "default": false, "description": ""}, {"id": 1357118060, "node_id": "MDU6TGFiZWwxMzU3MTE4MDYw", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Conversion", "name": "Conversion", "color": "e99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2015-11-05T03:00:54Z", "updated_at": "2021-12-06T18:58:22Z", "closed_at": "2021-12-06T18:58:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having the same exact problem as #634 but that issue was \"fixed\".\n![image](https://cloud.githubusercontent.com/assets/9531780/10958684/c5c59946-833e-11e5-83a1-a4b0c3c66d0f.png)\n\nWhen I seperate the frames using `convert -coalesce animation.gif target.png` in ImageMagick, the frames come out looking perfect, but with pillow...\n\n``` python\nimport PIL\nimport PIL.Image\ni = PIL.Image.open('test.gif')\ni.show() # correct image displays on left\ni.seek(i.tell() + 1)\ni.show() # image is incorrect on right\n```\n\n[The gif in question](https://drive.google.com/file/d/0B1MuqJj8nnMPR1NxY0R4T2JYa0E/view?usp=sharing)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1513", "id": 114018400, "node_id": "MDU6SXNzdWUxMTQwMTg0MDA=", "number": 1513, "title": "Memory leak with PyPy 4.0.0", "user": {"login": "Armannas", "id": 6339503, "node_id": "MDQ6VXNlcjYzMzk1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/6339503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Armannas", "html_url": "https://github.com/Armannas", "followers_url": "https://api.github.com/users/Armannas/followers", "following_url": "https://api.github.com/users/Armannas/following{/other_user}", "gists_url": "https://api.github.com/users/Armannas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Armannas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Armannas/subscriptions", "organizations_url": "https://api.github.com/users/Armannas/orgs", "repos_url": "https://api.github.com/users/Armannas/repos", "events_url": "https://api.github.com/users/Armannas/events{/privacy}", "received_events_url": "https://api.github.com/users/Armannas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 16, "created_at": "2015-10-29T10:13:13Z", "updated_at": "2023-03-14T07:49:39Z", "closed_at": "2019-03-11T06:41:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use PyPy and Pillow in Docker. I modified the Dockerfile ( https://github.com/docker-library/pypy/blob/f1c1a5dd1248c044dafc52ddff7ff18be77d0ea8/2/Dockerfile ) to install PyPy 4.0.0 instead of 2.6.1 because the latter hangs at pip install Pillow indefinitely.\n\nAll works well, however when using code like:\n\n``` python\nfor root, dirs, images in os.walk(IMAGE_DIR):\n        for image in images:\n\n            img_path = join(root, image)\n            img = Image.open(img_path)\n            img.save(img_path, optimize=False, quality=65)\n```\n\nThe memory keeps building up and after completion does not get free'd.\nI tried adding gc.collect() after every img.save() but that makes the code extremely slow, although helps keeping memory constant. Doing gc.collect() once after the entire os.walk loop is finished has no effect. When only opening the image followed by explicitly closing the image, the memory does not increase by a lot after rerunning the script many times.\nOpening the image, followed by saving and ending with 'del img' and img.close() has no effect, memory is not free'd\n\nTried setting environment variables ENV PYPY_GC_MIN=1GB, ENV PYPY_GC_MAX=3GB in order to trigger the garbage collecting, did not work either.\n\nIt's not just Image.save, Image.rotate (and probably other methods) has the same effect.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1477", "id": 110181463, "node_id": "MDU6SXNzdWUxMTAxODE0NjM=", "number": 1477, "title": "Can't get GPS information in exif - Ver.3.0.0", "user": {"login": "hMatoba", "id": 4497270, "node_id": "MDQ6VXNlcjQ0OTcyNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/4497270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hMatoba", "html_url": "https://github.com/hMatoba", "followers_url": "https://api.github.com/users/hMatoba/followers", "following_url": "https://api.github.com/users/hMatoba/following{/other_user}", "gists_url": "https://api.github.com/users/hMatoba/gists{/gist_id}", "starred_url": "https://api.github.com/users/hMatoba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hMatoba/subscriptions", "organizations_url": "https://api.github.com/users/hMatoba/orgs", "repos_url": "https://api.github.com/users/hMatoba/repos", "events_url": "https://api.github.com/users/hMatoba/events{/privacy}", "received_events_url": "https://api.github.com/users/hMatoba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2015-10-07T09:06:41Z", "updated_at": "2016-01-01T16:39:40Z", "closed_at": "2015-12-30T05:35:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I executed below scirpt with pillow 2.9.0:\n\n```\nfrom PIL import Image\ni = Image.open(r\"tests\\images\\01.jpg\")\ne = i._getexif()\nfor key in sorted(e):\n    print(str(key) + \": \" + str(e[key]))\n```\n\nI got below:\n\n```\n258: (24, 24, 24)\n271: Make\n272: XXX-XXX\n282: (4294967295, 1)\n296: 65535\n305: PIL\n514: 4294967295\n33434: (4294967295, 1)\n34665: 185\n34853: {0: b'\\x00\\x00\\x00\\x01', 2: (4294967295, 1), 5: 1, 30: 65535, 29: '1999:99:99 99:99:99'}\n34856: b'\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa'\n34867: 4294967295\n36867: 2099:09:29 10:10:10\n41994: 65535\n42034: ((1, 1), (1, 1), (1, 1), (1, 1))\n42035: LensMake\n```\n\nWith 3.0.0, I got below:\n\n```\n258: (24, 24, 24)\n271: Make\n272: XXX-XXX\n282: 4294967295.0\n296: 65535\n305: PIL\n514: 4294967295\n33434: (4294967295.0,)\n34665: 185\n34853: (366,)\n34856: (b'\\xaa\\xaa\\xaa\\xaa\\xaa\\xaa',)\n34867: (4294967295,)\n36867: ('2099:09:29 10:10:10',)\n37380: (-0.9999999995343387,)\n41994: (65535,)\n42034: (1.0, 1.0, 1.0, 1.0)\n42035: ('LensMake',)\n50715: (1.0, 1.0, 1.0)\n```\n\n\"34853\" is a pointer to the GPS information IFD. Ver.2.9.0, it can get GPS informations as dict type.\nVer.3.0.0, it is a int value in tuple(pointer value?).\nI looked for about this issue in CHANGES and couldn't find any information.\n\n![01](https://cloud.githubusercontent.com/assets/4497270/10332838/f720c3f6-6d1a-11e5-99f7-25fc31c2133d.jpg) <- JPEG image I used this example.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1477/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1475", "id": 109995471, "node_id": "MDU6SXNzdWUxMDk5OTU0NzE=", "number": 1475, "title": "OverflowError in PIL.Image.fromarray", "user": {"login": "birgander2", "id": 6367190, "node_id": "MDQ6VXNlcjYzNjcxOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6367190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/birgander2", "html_url": "https://github.com/birgander2", "followers_url": "https://api.github.com/users/birgander2/followers", "following_url": "https://api.github.com/users/birgander2/following{/other_user}", "gists_url": "https://api.github.com/users/birgander2/gists{/gist_id}", "starred_url": "https://api.github.com/users/birgander2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/birgander2/subscriptions", "organizations_url": "https://api.github.com/users/birgander2/orgs", "repos_url": "https://api.github.com/users/birgander2/repos", "events_url": "https://api.github.com/users/birgander2/events{/privacy}", "received_events_url": "https://api.github.com/users/birgander2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2015-10-06T12:15:20Z", "updated_at": "2019-05-04T13:15:33Z", "closed_at": "2019-05-04T13:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying o generate a huge image (73067 x 28160) from a numpy ndarray, pillow throws me an \n\"OverflowError: size does not fit in an int\". Is pillow limited to maximum sizes of below 2**31bit?\n\nI used:\n\n``` python\nim = PIL.Image.fromarray(array, mode='F')\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1467", "id": 109648018, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3MTQzMjE=", "number": 1467, "title": "Flatten sampleformat to initial value, fixes #1466", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-10-03T21:58:56Z", "updated_at": "2017-10-02T13:24:17Z", "closed_at": "2015-10-05T08:43:03Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1467", "html_url": "https://github.com/python-pillow/Pillow/pull/1467", "diff_url": "https://github.com/python-pillow/Pillow/pull/1467.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1467.patch", "merged_at": "2015-10-05T08:43:03Z"}, "body": "The handling of the `SAMPLEFORMAT` for tiff format recognition has been somewhat broken for a while.  \n\n3.0.0 broke it in a different, worse way, breaking nearly every multiband image.  This changes the handling of the `SAMPLEFORMAT` tuple so that we're explicitly only using the first sample, but only if it's a 1, and only if they're all the same. Essentially, multiband images need to be all unsigned ints, which is what we support anyway. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1467/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1465", "id": 109628586, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3MDc1NDQ=", "number": 1465, "title": "Add tag info for iccprofile, fixes #1462", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-03T15:39:07Z", "updated_at": "2017-10-02T13:24:18Z", "closed_at": "2015-10-05T12:23:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1465", "html_url": "https://github.com/python-pillow/Pillow/pull/1465", "diff_url": "https://github.com/python-pillow/Pillow/pull/1465.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1465.patch", "merged_at": "2015-10-05T12:23:16Z"}, "body": "This is likely not the only tag that needs added. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1465/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1464", "id": 109607418, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3MDEzOTM=", "number": 1464, "title": "Fix handling of pathlib in save. Fixes #1460", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-10-03T07:16:59Z", "updated_at": "2017-10-02T13:24:16Z", "closed_at": "2015-10-05T08:41:58Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1464", "html_url": "https://github.com/python-pillow/Pillow/pull/1464", "diff_url": "https://github.com/python-pillow/Pillow/pull/1464.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1464.patch", "merged_at": "2015-10-05T08:41:58Z"}, "body": "Pending review and travis...\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1464/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1462", "id": 109579585, "node_id": "MDU6SXNzdWUxMDk1Nzk1ODU=", "number": 1462, "title": "TypeError in PngImagePlugin._save", "user": {"login": "codewarrior0", "id": 307683, "node_id": "MDQ6VXNlcjMwNzY4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/307683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codewarrior0", "html_url": "https://github.com/codewarrior0", "followers_url": "https://api.github.com/users/codewarrior0/followers", "following_url": "https://api.github.com/users/codewarrior0/following{/other_user}", "gists_url": "https://api.github.com/users/codewarrior0/gists{/gist_id}", "starred_url": "https://api.github.com/users/codewarrior0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codewarrior0/subscriptions", "organizations_url": "https://api.github.com/users/codewarrior0/orgs", "repos_url": "https://api.github.com/users/codewarrior0/repos", "events_url": "https://api.github.com/users/codewarrior0/events{/privacy}", "received_events_url": "https://api.github.com/users/codewarrior0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2015-10-02T22:00:02Z", "updated_at": "2016-07-01T08:29:29Z", "closed_at": "2016-06-29T21:36:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using Python 2.7.9 for 64-bit Windows. Pillow 3.0.0 installed via `pip install pillow`. Script file:\n\n```\nimport os\n\nimport PIL.Image\nbasedir = \"../data/PIL_Images\"\nim = PIL.Image.open(os.path.join(basedir, \"tinysample.tiff\"))\nim.save(os.path.join(basedir, \"tinysample.png\"))\n```\n\nError traceback:\n\n```\nTraceback (most recent call last):\n  File \"pyi_lib_PIL_img_conversion.py\", line 17, in <module>\n    im.save(os.path.join(basedir, \"tinysample.png\"))\n  File \"c:\\Users\\Rio\\Documents\\src\\pyinst1328\\.env27\\lib\\site-packages\\PIL\\Image.py\", line 1665, in save\n    save_handler(self, fp, filename)\n  File \"c:\\Users\\Rio\\Documents\\src\\pyinst1328\\.env27\\lib\\site-packages\\PIL\\PngImagePlugin.py\", line 757, in _save\n    data = name + b\"\\0\\0\" + zlib.compress(im.info[\"icc_profile\"])\nTypeError: must be string or read-only buffer, not tuple\n```\n\n[Input image file is here.](https://www.dropbox.com/s/4o6zm09was4hf18/tinysample.tiff?dl=0)\n\nThis code previously worked with `pillow==2.9.0` installed.\n\nWith `pillow==3.0.0`, `im.info[\"icc_profile\"]` is a tuple of length 1 containing a single bytestring. With `pillow==2.9.0`, `im.info[\"icc_profile\"]` is a bytestring.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1462/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1460", "id": 109556941, "node_id": "MDU6SXNzdWUxMDk1NTY5NDE=", "number": 1460, "title": "Pillow 3.0 raises errors on open when using tempfile.TemporaryFile", "user": {"login": "kmike", "id": 107893, "node_id": "MDQ6VXNlcjEwNzg5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/107893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmike", "html_url": "https://github.com/kmike", "followers_url": "https://api.github.com/users/kmike/followers", "following_url": "https://api.github.com/users/kmike/following{/other_user}", "gists_url": "https://api.github.com/users/kmike/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmike/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmike/subscriptions", "organizations_url": "https://api.github.com/users/kmike/orgs", "repos_url": "https://api.github.com/users/kmike/repos", "events_url": "https://api.github.com/users/kmike/events{/privacy}", "received_events_url": "https://api.github.com/users/kmike/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 35, "created_at": "2015-10-02T19:31:06Z", "updated_at": "2015-10-05T08:42:00Z", "closed_at": "2015-10-05T08:42:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here is a Travis job which starts to fail because of Pillow update: https://travis-ci.org/scrapy/scrapy/jobs/83354354. Sorry, I haven't checked what happens and why, so this bug report is very vague. Maybe someone with more detailed knowledge can spot an issue immediately. If not, I'll take a deeper look later.\n\nThis line fails: https://github.com/scrapy/scrapy/blob/fe15f93e533be36e81e0385691fe5571c88b0b31/tests/test_pipeline_images.py#L81. This is `_create_image` function: https://github.com/scrapy/scrapy/blob/fe15f93e533be36e81e0385691fe5571c88b0b31/tests/test_pipeline_images.py#L208.\n\nThere are also some errors printed to stdout in this job; they can be a different Pillow issue.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1460/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1454", "id": 109445301, "node_id": "MDU6SXNzdWUxMDk0NDUzMDE=", "number": 1454, "title": "OSX Wheel for Py 3.5", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 134244206, "node_id": "MDU6TGFiZWwxMzQyNDQyMDY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Release", "name": "Release", "color": "bfdadc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-10-02T07:51:47Z", "updated_at": "2015-10-03T14:36:07Z", "closed_at": "2015-10-03T14:36:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As noted in the 3.0.0 release thread (#1411), wheels for Python 3.5 aren't building properly. It looks like an issue that was fixed in a version of wheel that we're using. Trace from travis is here: https://travis-ci.org/python-pillow/pillow-wheels/jobs/83200641\n\nHoisting here to keep it in view. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1434", "id": 107530886, "node_id": "MDU6SXNzdWUxMDc1MzA4ODY=", "number": 1434, "title": "Loading pickled images fails for png files with iTXt chunks", "user": {"login": "sangaline", "id": 8236564, "node_id": "MDQ6VXNlcjgyMzY1NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8236564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sangaline", "html_url": "https://github.com/sangaline", "followers_url": "https://api.github.com/users/sangaline/followers", "following_url": "https://api.github.com/users/sangaline/following{/other_user}", "gists_url": "https://api.github.com/users/sangaline/gists{/gist_id}", "starred_url": "https://api.github.com/users/sangaline/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sangaline/subscriptions", "organizations_url": "https://api.github.com/users/sangaline/orgs", "repos_url": "https://api.github.com/users/sangaline/repos", "events_url": "https://api.github.com/users/sangaline/events{/privacy}", "received_events_url": "https://api.github.com/users/sangaline/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 25, "created_at": "2015-09-21T14:56:52Z", "updated_at": "2019-04-02T05:18:12Z", "closed_at": "2019-02-20T09:50:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to load a pickled image fails if it's a png file with iTXt chunks. The `iTXt.__new__(cls, text, lang, tkey)` method appears to be called with only two arguments when `Image.__setstate__` is called. All of the test_pickle.py tests pass but I don't think any of those images include iTXt chunks. \n\nCode to reproduce the issue:\n\n``` python\nfrom PIL import Image\nimport pickle\n\nim = Image.open('example.png')\np = pickle.dumps(im)\nnew_im = pickle.loads(p)\n```\n\nThe output of running that code:\n\n```\nTraceback (most recent call last):\n  File \"example.py\", line 6, in <module>\n    new_im = pickle.loads(p)\nTypeError: __new__() missing 2 required positional arguments: 'lang' and 'tkey'\n```\n\nThe image that was being used:\n![example](https://cloud.githubusercontent.com/assets/8236564/9995147/63b1e5b0-6035-11e5-91f5-97ddb9d1e876.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1404", "id": 104112263, "node_id": "MDU6SXNzdWUxMDQxMTIyNjM=", "number": 1404, "title": "Quantization tables (qtables) being altered", "user": {"login": "damianmoore", "id": 715131, "node_id": "MDQ6VXNlcjcxNTEzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/715131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damianmoore", "html_url": "https://github.com/damianmoore", "followers_url": "https://api.github.com/users/damianmoore/followers", "following_url": "https://api.github.com/users/damianmoore/following{/other_user}", "gists_url": "https://api.github.com/users/damianmoore/gists{/gist_id}", "starred_url": "https://api.github.com/users/damianmoore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damianmoore/subscriptions", "organizations_url": "https://api.github.com/users/damianmoore/orgs", "repos_url": "https://api.github.com/users/damianmoore/repos", "events_url": "https://api.github.com/users/damianmoore/events{/privacy}", "received_events_url": "https://api.github.com/users/damianmoore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2015-08-31T18:54:18Z", "updated_at": "2017-10-03T23:51:54Z", "closed_at": "2017-09-20T08:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am working on a project where I am creating small JPEG thumbnails that will all share the same quantization table. I want to get the best quality for my file size so am prepared to spend time manipulating and comparing my sample set to get the best `qtable` for the use case.\n\nIt is my understanding that using the `quality` attribute is essentially just selecting a predefined `qtable` within the JPEG library and that providing my own `qtable` should make the `quality` attribute unnecessary. However, it seems that there is always some other quantization happening when I want my own tables to be used.\n\nIn my test I have re-sampled images to 48x48 and saved them as 7% quality JPEGs.\n\nIf I open the image using Pillow and inspect the quantisation I get this.\n\n```\nIn [13]: im.quantization\nOut[13]: {0: array('b', [114, 79, 86, 100, 86, 71, 114, 100, 93, 100, -127, 121, 114, -120, -85, -1, -70, -85, -99, -99, -85, -1, -6, -1, -49, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]), 1: array('b', [121, -127, -127, -85, -106, -85, -1, -70, -70, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1])}\n```\n\nIf I then re-sample the same source image again to the same dimensions and use the qtable from above, save it (at 100% quality as I have to set something) then load and inspect the quantization attribute I get the following. \n\n```\nIn [15]: im.quantization\nOut[15]: {0: array('b', [114, 79, 86, 100, 86, 71, 114, 100, 93, 100, -1, 121, 114, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]), 1: array('b', [121, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1])}\n```\n\nYou can see that the tables do not match and there is a lot less detail in both the Luma and Chroma tables as there are more values set as `-1`. The file size is also slightly less.\n\nI would expect that a user supplied `qtable` would take precedence over the one that would be from the `quality` if it is set. Unfortunately I can't see that there is any way not to provide a `quality` attribute. Instead I think what is happening is that both `qtables` are being applied to the image which degrades it more than it should.\n\nIn the test image below you'll see detail is lost and noticeable chroma variations are introduced when trying to re-use the same `qtable`. Curiously, when the `quality` parameter is lowered the file size goes up which I assume it is because the two `qtables` are fighting one another. This is very noticeable in the output at 10% quality.\n\n![pil_qtables_error](https://cloud.githubusercontent.com/assets/715131/9586032/4eda8b34-5012-11e5-991a-9ce29456e472.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1399", "id": 103713159, "node_id": "MDU6SXNzdWUxMDM3MTMxNTk=", "number": 1399, "title": "Three \"images\" that cause PIL.Image.open() to hang", "user": {"login": "d33tah", "id": 295322, "node_id": "MDQ6VXNlcjI5NTMyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/295322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d33tah", "html_url": "https://github.com/d33tah", "followers_url": "https://api.github.com/users/d33tah/followers", "following_url": "https://api.github.com/users/d33tah/following{/other_user}", "gists_url": "https://api.github.com/users/d33tah/gists{/gist_id}", "starred_url": "https://api.github.com/users/d33tah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d33tah/subscriptions", "organizations_url": "https://api.github.com/users/d33tah/orgs", "repos_url": "https://api.github.com/users/d33tah/repos", "events_url": "https://api.github.com/users/d33tah/events{/privacy}", "received_events_url": "https://api.github.com/users/d33tah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-08-28T12:46:13Z", "updated_at": "2021-10-08T08:12:59Z", "closed_at": "2015-08-28T19:26:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nHere's what I found with my early afl-fuzz fuzzing:\n\n```\n(virtualenv)[1/6][14:45:24][~/workspace/Pillow/pillow-virtualenv/o/hangs]$ for file in *; do hexdump -C $file; done\n00000000  50 36                                             |P6|\n00000002\n00000000  50 35                                             |P5|\n00000002\n00000000  50 79 50                                          |PyP|\n00000003\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1396", "id": 103644622, "node_id": "MDU6SXNzdWUxMDM2NDQ2MjI=", "number": 1396, "title": "ImageMorph.MorphOp() crashes Python when applied to a non-grayscale image", "user": {"login": "jdanielp", "id": 70538, "node_id": "MDQ6VXNlcjcwNTM4", "avatar_url": "https://avatars.githubusercontent.com/u/70538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdanielp", "html_url": "https://github.com/jdanielp", "followers_url": "https://api.github.com/users/jdanielp/followers", "following_url": "https://api.github.com/users/jdanielp/following{/other_user}", "gists_url": "https://api.github.com/users/jdanielp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdanielp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdanielp/subscriptions", "organizations_url": "https://api.github.com/users/jdanielp/orgs", "repos_url": "https://api.github.com/users/jdanielp/repos", "events_url": "https://api.github.com/users/jdanielp/events{/privacy}", "received_events_url": "https://api.github.com/users/jdanielp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-08-28T04:22:19Z", "updated_at": "2015-08-29T05:38:53Z", "closed_at": "2015-08-28T14:24:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "python 3.4.3 from macports\npillow34 from macports\npycharm 4.5.2\nosx 10.10 (yosemite)\n\n``` python\nfrom PIL import ImageMorph\nfrom PIL import Image\nfrom PIL import ImageOps\n\na_path = \".......\"\na = Image.open(a_path)\n\n#need to do this because pillow is lazy sometimes\na.load() \n\n#if you don't do this, ImageMorph will crash horribly\n#a = ImageOps.grayscale(a) \n\nerode = ImageMorph.MorphOp(op_name=\"erosion8\")\n\n# we never get here because python is dead\n(n_pix_diff, new_a) = erode.apply(a)\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1377", "id": 101136200, "node_id": "MDU6SXNzdWUxMDExMzYyMDA=", "number": 1377, "title": "Crash converting GIF with transparency to RGB", "user": {"login": "JPLeBreton", "id": 263303, "node_id": "MDQ6VXNlcjI2MzMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/263303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JPLeBreton", "html_url": "https://github.com/JPLeBreton", "followers_url": "https://api.github.com/users/JPLeBreton/followers", "following_url": "https://api.github.com/users/JPLeBreton/following{/other_user}", "gists_url": "https://api.github.com/users/JPLeBreton/gists{/gist_id}", "starred_url": "https://api.github.com/users/JPLeBreton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JPLeBreton/subscriptions", "organizations_url": "https://api.github.com/users/JPLeBreton/orgs", "repos_url": "https://api.github.com/users/JPLeBreton/repos", "events_url": "https://api.github.com/users/JPLeBreton/events{/privacy}", "received_events_url": "https://api.github.com/users/JPLeBreton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-08-15T03:36:35Z", "updated_at": "2015-09-09T20:43:32Z", "closed_at": "2015-09-09T20:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Repro code here:\n\nhttps://gist.github.com/JPLeBreton/88d475eb1c388ba3ab83\n\nExplanation of crash is in comments.  Suggested fix: Image.py should detect if this kind of conversion is being attempted, and set the \"transparency\" image info key to zero (or remove it) before setting pixels to avoid the crash, given that the transparent bit will have no relevance in the resulting Image.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1377/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373/events", "html_url": "https://github.com/python-pillow/Pillow/pull/1373", "id": 99215509, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE2ODM5ODA=", "number": 1373, "title": "Fix fast rotate operations", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-08-05T14:21:31Z", "updated_at": "2015-08-09T10:51:07Z", "closed_at": "2015-08-09T08:26:51Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/1373", "html_url": "https://github.com/python-pillow/Pillow/pull/1373", "diff_url": "https://github.com/python-pillow/Pillow/pull/1373.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/1373.patch", "merged_at": "2015-08-09T08:26:51Z"}, "body": "Resolves #1369 \n\nIf certain filters are used, for 90 or 270 degree rotation operations, a faster algorithm is used. However, these faster algorithms ignore the expand option.\n\nSo this creates a change so that those fast operations are only used if the expand flag is in use, or if the image is square.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1373/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1369", "id": 98843340, "node_id": "MDU6SXNzdWU5ODg0MzM0MA==", "number": 1369, "title": "rotate not adjusting size attribute appropriately when BICUBIC and BILINEAR are used for resample filter", "user": {"login": "spencera1", "id": 13631759, "node_id": "MDQ6VXNlcjEzNjMxNzU5", "avatar_url": "https://avatars.githubusercontent.com/u/13631759?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spencera1", "html_url": "https://github.com/spencera1", "followers_url": "https://api.github.com/users/spencera1/followers", "following_url": "https://api.github.com/users/spencera1/following{/other_user}", "gists_url": "https://api.github.com/users/spencera1/gists{/gist_id}", "starred_url": "https://api.github.com/users/spencera1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spencera1/subscriptions", "organizations_url": "https://api.github.com/users/spencera1/orgs", "repos_url": "https://api.github.com/users/spencera1/repos", "events_url": "https://api.github.com/users/spencera1/events{/privacy}", "received_events_url": "https://api.github.com/users/spencera1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-08-03T21:38:36Z", "updated_at": "2015-08-09T11:11:36Z", "closed_at": "2015-08-09T08:26:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using Pillow 2.9.0 and Python 3.4.3.\n\nim = Image.new('RGB', (100,200))\nim\n&lt;PIL.Image.Image image mode=RGB size=100x200 at 0x7F3745C1DDA0&gt;\n\nim.rotate(90)\n&lt;PIL.Image.Image image mode=RGB size=200x100 at 0x7F3745C1D710&gt;\n\nThat's good. Explicity setting NEAREST is fine too:\nim.rotate(90, resample=Image.NEAREST)\n&lt;PIL.Image.Image image mode=RGB size=200x100 at 0x7F3745C1F8D0&gt;\n\nBut, using BICUBIC or BILINEAR results in incorrect sizes showing:\nim.rotate(90, resample=Image.BICUBIC)\n&lt;PIL.Image.Image image mode=RGB size=100x200 at 0x7F3745C1D9B0&gt;\nim.rotate(90, resample=Image.BILINEAR)\n&lt;PIL.Image.Image image mode=RGB size=100x200 at 0x7F3745C1FF60&gt;\n\nIs the behavior with NEAREST actually supposed to be like that of BICUBIC/BILINEAR in this regard without expand? It seems like the rotate docs suggest that on http://pillow.readthedocs.org/reference/Image.html, but since NEAREST is the default filter, it seems really misleading.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1355", "id": 97014001, "node_id": "MDU6SXNzdWU5NzAxNDAwMQ==", "number": 1355, "title": "Animated gifs saving with `save_all` outputs broken animation", "user": {"login": "Sapphire64", "id": 1443567, "node_id": "MDQ6VXNlcjE0NDM1Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/1443567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sapphire64", "html_url": "https://github.com/Sapphire64", "followers_url": "https://api.github.com/users/Sapphire64/followers", "following_url": "https://api.github.com/users/Sapphire64/following{/other_user}", "gists_url": "https://api.github.com/users/Sapphire64/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sapphire64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sapphire64/subscriptions", "organizations_url": "https://api.github.com/users/Sapphire64/orgs", "repos_url": "https://api.github.com/users/Sapphire64/repos", "events_url": "https://api.github.com/users/Sapphire64/events{/privacy}", "received_events_url": "https://api.github.com/users/Sapphire64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/11", "html_url": "https://github.com/python-pillow/Pillow/milestone/11", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/11/labels", "id": 840820, "node_id": "MDk6TWlsZXN0b25lODQwODIw", "number": 11, "title": "3.0.0", "description": "", "creator": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2014-10-26T09:59:26Z", "updated_at": "2016-01-03T14:18:16Z", "due_on": "2015-10-01T07:00:00Z", "closed_at": "2016-01-03T14:18:16Z"}, "comments": 13, "created_at": "2015-07-24T09:38:02Z", "updated_at": "2015-09-24T20:57:14Z", "closed_at": "2015-09-24T20:57:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi everyone,\n### Description\n\nIt looks like animated gifs saving is broken in **Pillow**. I wrote failing test here:\nhttps://github.com/Sapphire64/Pillow/commit/4aec16d6d88a71209bb480330b6171c220613fa9\n\n``` python\ndef test_headers_saving_for_animated_gifs(self):  # FAILING test\n    important_headers = ['background', 'version', 'transparency', 'duration', 'loop']\n    # Multiframe image\n    im = Image.open(\"Tests/images/dispose_bgnd.gif\")\n\n    out = self.tempfile('temp.gif')\n    im.save(out, save_all=True)\n    reread = Image.open(out)\n\n    for header in important_headers:\n        self.assertEqual(\n            im.info[header],\n            reread.info[header]\n        )\n```\n\nIt fails because:\n\n```\n(Pdb) im.info\n{'duration': 1000, 'version': 'GIF89a', 'extension': ('NETSCAPE2.0', 41), 'background': 0, 'loop': 0}\n(Pdb) reread.info\n{'version': 'GIF87a', 'background': 0}\n```\n\nAs far as I know `GIF87a` does not support animations (?), transparency and loop header. And we are getting corrupted GIF as an output with no looping and weird colours, and duration of the frames is wrong.\n### Original animated gif\n\n![Original Image](http://i.imgur.com/t6XVOc9.gif)\n### Pillow's save_all output\n\nTo see how bad it is just look on the output of our test which saying that GIF's `save_all` works fine:\n\n![Output](http://i.imgur.com/HQxo7CT.gif)\n_If you don't see any animation please reload a page, because it has only one loop which takes ~1 second. Or you can [open direct link](https://camo.githubusercontent.com/4d4d5b2b6255e26aa864d198a061f764754d1e0f/687474703a2f2f692e696d6775722e636f6d2f4851786f3743542e676966) and refresh the page._\n### My investigation\n\nWe need to fix `GifImagePlugin.py` first to not hardwire `GIF87a` header, second - to write all meta about that animation. Maybe it can be related to the fact that in `save_all` we are not calling `_get_local_header` function which does something with that important headers. Also note that our function which should support duration is actually ignoring it:\n\n```\n# To specify duration, add the time in milliseconds to getdata(),\n# e.g. getdata(im_frame, duration=1000)   # <<< this won't work\n```\n\nI've tried to work on fix but got no luck yet, so would like to get some help from the community.\n#### Further reading\n\nhttps://bitbucket.org/bench/images2gif.py/src/a618bd8fc352f278a3b0c777cb6427ec39236f0a/images2gif.py?at=master - it looks like somebody already solved this problem using PIL\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1345", "id": 94903423, "node_id": "MDU6SXNzdWU5NDkwMzQyMw==", "number": 1345, "title": "Incorrect background color on generating thumbnail when mode is RGBA", "user": {"login": "meddulla", "id": 47389, "node_id": "MDQ6VXNlcjQ3Mzg5", "avatar_url": "https://avatars.githubusercontent.com/u/47389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meddulla", "html_url": "https://github.com/meddulla", "followers_url": "https://api.github.com/users/meddulla/followers", "following_url": "https://api.github.com/users/meddulla/following{/other_user}", "gists_url": "https://api.github.com/users/meddulla/gists{/gist_id}", "starred_url": "https://api.github.com/users/meddulla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meddulla/subscriptions", "organizations_url": "https://api.github.com/users/meddulla/orgs", "repos_url": "https://api.github.com/users/meddulla/repos", "events_url": "https://api.github.com/users/meddulla/events{/privacy}", "received_events_url": "https://api.github.com/users/meddulla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-07-14T09:21:58Z", "updated_at": "2016-07-01T11:51:30Z", "closed_at": "2016-07-01T11:51:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the test case here https://gist.github.com/meddulla/02e032b8a2b49fac1a70, when we generate a thumbnail from the example image (at https://cld.pt/dl/download/beb8b78f-5267-4931-8e46-eeb801ff6e1a/pillow-issue/out.png) the generated image has a black background when it should have a white background. In version 2.1 this didn't happen and it can be traced to the commit 10214bc6c4e17b3e023d26878e8ba02111844fcb which basically adds \n\n<pre>\n+        if self.mode == 'RGBA':\n+            return self.convert('RGBa').transform(size, method, data, resample, fill).convert('RGBA')\n+\n</pre>\n\n\nto the resize method in PIL/Image.py. If no conversion is done then it works in the latest version. But I'm not sure if simply removing the convert/reconvert is the correct fix..\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1328", "id": 92601818, "node_id": "MDU6SXNzdWU5MjYwMTgxOA==", "number": 1328, "title": "new version of PIL fails on JPEG, old version works", "user": {"login": "gabor", "id": 51989, "node_id": "MDQ6VXNlcjUxOTg5", "avatar_url": "https://avatars.githubusercontent.com/u/51989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabor", "html_url": "https://github.com/gabor", "followers_url": "https://api.github.com/users/gabor/followers", "following_url": "https://api.github.com/users/gabor/following{/other_user}", "gists_url": "https://api.github.com/users/gabor/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabor/subscriptions", "organizations_url": "https://api.github.com/users/gabor/orgs", "repos_url": "https://api.github.com/users/gabor/repos", "events_url": "https://api.github.com/users/gabor/events{/privacy}", "received_events_url": "https://api.github.com/users/gabor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2015-07-02T10:09:40Z", "updated_at": "2015-07-19T17:26:51Z", "closed_at": "2015-07-19T17:26:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "doing \"PIL.Image.open(data)\" on the attached JPEG works in old-version, fails in new-version. the commit that broke it is this:\nhttps://github.com/python-pillow/Pillow/commit/a5683ab574ef6a356445b7a29c5dc2da2a1abc6f\n(so, before this commit it works, with this commit it fails)\n\nthe image\n![pil_bug](https://cloud.githubusercontent.com/assets/51989/8474800/1db438e0-20b3-11e5-8259-872cab411e64.jpg)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1328/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1310", "id": 91520591, "node_id": "MDU6SXNzdWU5MTUyMDU5MQ==", "number": 1310, "title": "Image.split returns the wrong band for blue", "user": {"login": "SuperDoxin", "id": 377239, "node_id": "MDQ6VXNlcjM3NzIzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/377239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SuperDoxin", "html_url": "https://github.com/SuperDoxin", "followers_url": "https://api.github.com/users/SuperDoxin/followers", "following_url": "https://api.github.com/users/SuperDoxin/following{/other_user}", "gists_url": "https://api.github.com/users/SuperDoxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SuperDoxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SuperDoxin/subscriptions", "organizations_url": "https://api.github.com/users/SuperDoxin/orgs", "repos_url": "https://api.github.com/users/SuperDoxin/repos", "events_url": "https://api.github.com/users/SuperDoxin/events{/privacy}", "received_events_url": "https://api.github.com/users/SuperDoxin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2015-06-27T22:00:27Z", "updated_at": "2015-06-30T12:03:58Z", "closed_at": "2015-06-30T11:54:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "using image.split like this:\n\n```\ninimg=Image.open(\"test.png\").convert(\"RGB\")\n\nr,g,b=inimg.split()\n\nr.convert(\"RGB\").save(\"r.png\")\ng.convert(\"RGB\").save(\"g.png\")\nb.convert(\"RGB\").save(\"b.png\")\n```\n\nyou get an unexpected and wrong result. the blue band is exactly the same as the red band.\n\n![derp2](https://cloud.githubusercontent.com/assets/377239/8394058/a13425ce-1d28-11e5-8533-586d3d232e3c.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1301", "id": 91009221, "node_id": "MDU6SXNzdWU5MTAwOTIyMQ==", "number": 1301, "title": "\"integer expected, got float\" exception trying to save a BMP image with original DPI", "user": {"login": "ferozed", "id": 3730318, "node_id": "MDQ6VXNlcjM3MzAzMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3730318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferozed", "html_url": "https://github.com/ferozed", "followers_url": "https://api.github.com/users/ferozed/followers", "following_url": "https://api.github.com/users/ferozed/following{/other_user}", "gists_url": "https://api.github.com/users/ferozed/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferozed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferozed/subscriptions", "organizations_url": "https://api.github.com/users/ferozed/orgs", "repos_url": "https://api.github.com/users/ferozed/repos", "events_url": "https://api.github.com/users/ferozed/events{/privacy}", "received_events_url": "https://api.github.com/users/ferozed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/10", "html_url": "https://github.com/python-pillow/Pillow/milestone/10", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/10/labels", "id": 840819, "node_id": "MDk6TWlsZXN0b25lODQwODE5", "number": 10, "title": "2.9.0", "description": "", "creator": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2014-10-26T09:58:12Z", "updated_at": "2015-09-06T15:56:04Z", "due_on": "2015-07-01T07:00:00Z", "closed_at": "2015-09-06T15:56:04Z"}, "comments": 10, "created_at": "2015-06-25T16:22:58Z", "updated_at": "2021-05-07T10:21:35Z", "closed_at": "2015-06-30T11:57:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider the following code:\r\n\r\n```python\r\nfrom PIL import Image\r\nfrom StringIO import StringIO\r\n\r\nimage = Image.open('image.jpg')\r\nout = StringIO()\r\nprint image.info\r\n\r\nimage.save(out, 'JPEG', quality=95, dpi=image.info['dpi'])\r\n```\r\n\r\nThis results in an exception:\r\n\r\n```\r\n$ /tmp/venv/bin/python t.py \r\n{'compression': 0, 'dpi': (0.0, 0.0)}\r\nTraceback (most recent call last):\r\n  File \"t.py\", line 8, in <module>\r\n    image.save(out, 'JPEG', quality=95, dpi=image.info['dpi'])\r\n  File \"/tmp/venv/local/lib/python2.7/site-packages/PIL/Image.py\", line 1693, in save\r\n    save_handler(self, fp, filename)\r\n  File \"/tmp/venv/local/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 697, in _save\r\n    ImageFile._save(im, fp, [(\"jpeg\", (0, 0)+im.size, 0, rawmode)], bufsize)\r\n  File \"/tmp/venv/local/lib/python2.7/site-packages/PIL/ImageFile.py\", line 476, in _save\r\n    e = Image._getencoder(im.mode, e, a, im.encoderconfig)\r\n  File \"/tmp/venv/local/lib/python2.7/site-packages/PIL/Image.py\", line 434, in _getencoder\r\n    return encoder(mode, *args + extra)\r\nTypeError: integer argument expected, got float\r\n```\r\n\r\nwhen image.jpg is a BMP format image, which I have attached.\r\n\r\nThe root cause is that the image.info.dpi is a tuple with floats, which the save() call is throwing an exception on.\r\n\r\nQuestion is, why is the DPI setting coming back as a float? Should it be cast to an integer there? Also, why is it 0.0 ?\r\n![image](https://cloud.githubusercontent.com/assets/3730318/8359514/c2e79728-1b1b-11e5-87a7-8995a8c6490e.jpg)\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1301/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1293", "id": 89785059, "node_id": "MDU6SXNzdWU4OTc4NTA1OQ==", "number": 1293, "title": "Problem with saving image from clipboard", "user": {"login": "sallyruthstruik", "id": 1565642, "node_id": "MDQ6VXNlcjE1NjU2NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1565642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sallyruthstruik", "html_url": "https://github.com/sallyruthstruik", "followers_url": "https://api.github.com/users/sallyruthstruik/followers", "following_url": "https://api.github.com/users/sallyruthstruik/following{/other_user}", "gists_url": "https://api.github.com/users/sallyruthstruik/gists{/gist_id}", "starred_url": "https://api.github.com/users/sallyruthstruik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sallyruthstruik/subscriptions", "organizations_url": "https://api.github.com/users/sallyruthstruik/orgs", "repos_url": "https://api.github.com/users/sallyruthstruik/repos", "events_url": "https://api.github.com/users/sallyruthstruik/events{/privacy}", "received_events_url": "https://api.github.com/users/sallyruthstruik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 52, "created_at": "2015-06-20T15:47:43Z", "updated_at": "2016-07-06T07:35:03Z", "closed_at": "2016-07-06T07:35:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nI have Windows 8 x64 system and installed Pillow version 2.8.2\nI'm trying to grab image from clipboard. I press \"Alt+PrtSc\" and then call grabclipboard function, and get such error:\n\n``` python\nImageGrab.grabclipboard()\n---------------------------------------------------------------------------\nIOError                                   Traceback (most recent call last)\n<ipython-input-2-c8274e888e6c> in <module>()\n      1 from PIL import ImageGrab\n      2 \n----> 3 ImageGrab.grabclipboard()\n\nC:\\Anaconda\\lib\\site-packages\\PIL\\ImageGrab.pyc in grabclipboard()\n     49         from PIL import BmpImagePlugin\n     50         import io\n---> 51         return BmpImagePlugin.DibImageFile(io.BytesIO(data))\n     52     return data\n\nC:\\Anaconda\\lib\\site-packages\\PIL\\ImageFile.pyc in __init__(self, fp, filename)\n     95 \n     96         try:\n---> 97             self._open()\n     98         except IndexError as v:  # end of data\n     99             if Image.DEBUG > 1:\n\nC:\\Anaconda\\lib\\site-packages\\PIL\\BmpImagePlugin.pyc in _open(self)\n    204 \n    205     def _open(self):\n--> 206         self._bitmap()\n    207 \n    208 #\n\nC:\\Anaconda\\lib\\site-packages\\PIL\\BmpImagePlugin.pyc in _bitmap(self, header, offset)\n    145                     raw_mode = MASK_MODES[(file_info['bits'], file_info['rgb_mask'])]\n    146                 else:\n--> 147                     raise IOError(\"Unsupported BMP bitfields layout\")\n    148             else:\n    149                 raise IOError(\"Unsupported BMP bitfields layout\")\n\nIOError: Unsupported BMP bitfields layout\n```\n\nBut if I call ImageGrab.grab function, screenshot(of whole screen) is saved properly. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1293/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1274", "id": 87601028, "node_id": "MDU6SXNzdWU4NzYwMTAyOA==", "number": 1274, "title": "Image.core.fill('L',size,0) expects an int", "user": {"login": "Tcll", "id": 773959, "node_id": "MDQ6VXNlcjc3Mzk1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/773959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tcll", "html_url": "https://github.com/Tcll", "followers_url": "https://api.github.com/users/Tcll/followers", "following_url": "https://api.github.com/users/Tcll/following{/other_user}", "gists_url": "https://api.github.com/users/Tcll/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tcll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tcll/subscriptions", "organizations_url": "https://api.github.com/users/Tcll/orgs", "repos_url": "https://api.github.com/users/Tcll/repos", "events_url": "https://api.github.com/users/Tcll/events{/privacy}", "received_events_url": "https://api.github.com/users/Tcll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2015-06-12T04:20:10Z", "updated_at": "2018-03-21T07:55:10Z", "closed_at": "2018-03-21T07:55:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "this all started over trying to figure out a method to pass unicode font data to OpenGL (no more boxes)\n(I'm trying to display this character: \u21bb )\n\nI found a nice little hacky method here:\nhttp://pillow-wiredfool.readthedocs.org/en/latest/_modules/PIL/ImageFont.html\nafter making the proper adjustments to the code in my result, I got my code to look like this:\n\n``` python\nfrom PIL import _imagingft\nfrom PIL import Image\n\ndef _CreateCharacter(s,F): #(string, Font)\n    data_w, data_h = F.getsize(s)\n\n    glyph = Image.core.fill('L', (data_w, data_h), 0)\n    F.render(s, glyph.id, mode==\"1\")\n\n    print glyph.getpixel((0,0)) # testing\n```\n\nI'm trying to set texture images under Luminance-Alpha so I can color them later\n\nbut when I start up my program, here's my output:\n\n``` bash\n...\n  File \"Z:\\media\\tcll\\copy\\Tcll\\UMC_workspace\\UMC_v3.0a\\data\\GUI.py\", line 2451, in _CreateCharacter\n    glyph = Image.core.fill('L', (data_w, data_h), 0)\nTypeError: an integer is required\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1274/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1270", "id": 86588331, "node_id": "MDU6SXNzdWU4NjU4ODMzMQ==", "number": 1270, "title": "TIFF incorrect colours", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-09T12:47:42Z", "updated_at": "2018-03-15T21:54:26Z", "closed_at": "2018-03-15T21:54:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In case anyone wants to investigate this, I've found a TIFF that Pillow reads with the incorrect colours.\n\nThe linked image is black text on white writing. Pillow views it as green writing on a pink background.\n\nTo reproduce, just open the image and show it.\n\nhttp://www.nightprogrammer.org/wp-uploads/2013/02/multipage_tiff_example.tif\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1259", "id": 85890473, "node_id": "MDU6SXNzdWU4NTg5MDQ3Mw==", "number": 1259, "title": "FAIL: TestImageFont.test_render_multiline - AssertionError:  average pixel value difference 14.2679 > epsilon 0.5000", "user": {"login": "jlec", "id": 79732, "node_id": "MDQ6VXNlcjc5NzMy", "avatar_url": "https://avatars.githubusercontent.com/u/79732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlec", "html_url": "https://github.com/jlec", "followers_url": "https://api.github.com/users/jlec/followers", "following_url": "https://api.github.com/users/jlec/following{/other_user}", "gists_url": "https://api.github.com/users/jlec/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlec/subscriptions", "organizations_url": "https://api.github.com/users/jlec/orgs", "repos_url": "https://api.github.com/users/jlec/repos", "events_url": "https://api.github.com/users/jlec/events{/privacy}", "received_events_url": "https://api.github.com/users/jlec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 10, "created_at": "2015-06-07T10:58:18Z", "updated_at": "2015-12-29T23:09:06Z", "closed_at": "2015-12-29T23:09:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Happens with pillow 2.8.2/2.8.1 and pypy, python 2.7, 3.3, 3.4\n\n``` python\n======================================================================\nFAIL: TestImageFont.test_render_multiline\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/var/tmp/portage/dev-python/pillow-2.8.2/work/Pillow-2.8.2-pypy/Tests/test_imagefont.py\", line 148, in test_render_multiline\n    self.assert_image_similar(im, target_img, .5)\n  File \"/var/tmp/portage/dev-python/pillow-2.8.2/work/Pillow-2.8.2-pypy/Tests/helper.py\", line 105, in assert_image_similar\n    ave_diff, epsilon))\nAssertionError:  average pixel value difference 14.2679 > epsilon 0.5000\n\n----------------------------------------------------------------------\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1259/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1227", "id": 75231759, "node_id": "MDU6SXNzdWU3NTIzMTc1OQ==", "number": 1227, "title": "Error saving TIFF", "user": {"login": "radarhere", "id": 3112309, "node_id": "MDQ6VXNlcjMxMTIzMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3112309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radarhere", "html_url": "https://github.com/radarhere", "followers_url": "https://api.github.com/users/radarhere/followers", "following_url": "https://api.github.com/users/radarhere/following{/other_user}", "gists_url": "https://api.github.com/users/radarhere/gists{/gist_id}", "starred_url": "https://api.github.com/users/radarhere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radarhere/subscriptions", "organizations_url": "https://api.github.com/users/radarhere/orgs", "repos_url": "https://api.github.com/users/radarhere/repos", "events_url": "https://api.github.com/users/radarhere/events{/privacy}", "received_events_url": "https://api.github.com/users/radarhere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-05-11T13:55:29Z", "updated_at": "2015-09-20T11:53:14Z", "closed_at": "2015-09-20T11:53:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In case anyone wants to investigate this, I have a TIFF file that can be loaded without a problem, but generates an error when trying to save.\n\nFor the record, it was created by the OS X screencapture program 'Grab'.\n\nSince Github doesn't seem to support TIFF attachments, I'll upload it elsewhere - http://s000.tinyupload.com/download.php?file_id=08240275698144503996&t=0824027569814450399610301\n\n```\n>>> from PIL import Image\n>>> x = Image.open('sample.tiff')\n>>> x.save('test.tiff')\n_TIFFVSetField: test.tiff: Bad value 50048 for \"SampleFormat\" tag.\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site-packages/PIL/Image.py\", line 1693, in save\n    save_handler(self, fp, filename)\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site-packages/PIL/TiffImagePlugin.py\", line 1191, in _save\n    e = Image._getencoder(im.mode, 'libtiff', a, im.encoderconfig)\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site-packages/PIL/Image.py\", line 434, in _getencoder\n    return encoder(mode, *args + extra)\nRuntimeError: Error setting from dictionary\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1204", "id": 70065519, "node_id": "MDU6SXNzdWU3MDA2NTUxOQ==", "number": 1204, "title": "OpenJPEG failing tests on big endian", "user": {"login": "nijel", "id": 212189, "node_id": "MDQ6VXNlcjIxMjE4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/212189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nijel", "html_url": "https://github.com/nijel", "followers_url": "https://api.github.com/users/nijel/followers", "following_url": "https://api.github.com/users/nijel/following{/other_user}", "gists_url": "https://api.github.com/users/nijel/gists{/gist_id}", "starred_url": "https://api.github.com/users/nijel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nijel/subscriptions", "organizations_url": "https://api.github.com/users/nijel/orgs", "repos_url": "https://api.github.com/users/nijel/repos", "events_url": "https://api.github.com/users/nijel/events{/privacy}", "received_events_url": "https://api.github.com/users/nijel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1741674011, "node_id": "MDU6TGFiZWwxNzQxNjc0MDEx", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Big-endian", "name": "Big-endian", "color": "294493", "default": false, "description": "Big-endian processors"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2015-04-22T09:05:50Z", "updated_at": "2021-12-28T08:12:00Z", "closed_at": "2021-12-28T08:12:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Looks like there are quite some issues within the code when executed on big endian machine, see testsuite failures:\n\n```\n======================================================================\nERROR: TestFileIco.test_save_to_bytes\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_ico.py\", line 27, in test_save_to_bytes\n    reloaded = Image.open(output)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8992cb90>\n\n======================================================================\nERROR: TestFileJpeg2k.test_16bit_j2k_roundtrips\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 157, in test_16bit_j2k_roundtrips\n    im = self.roundtrip(j2k)\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff896f2050>\n\n======================================================================\nERROR: TestFileJpeg2k.test_16bit_jp2_roundtrips\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 163, in test_16bit_jp2_roundtrips\n    im = self.roundtrip(jp2)\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff896f2050>\n\n======================================================================\nERROR: TestFileJpeg2k.test_irreversible_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 83, in test_irreversible_rt\n    im = self.roundtrip(test_card, irreversible=True, quality_layers=[20])\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff896f2050>\n\n======================================================================\nERROR: TestFileJpeg2k.test_layers\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 107, in test_layers\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff896f2050>\n\n======================================================================\nERROR: TestFileJpeg2k.test_lossless_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 65, in test_lossless_rt\n    im = self.roundtrip(test_card)\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8afe2770>\n\n======================================================================\nERROR: TestFileJpeg2k.test_lossy_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 69, in test_lossy_rt\n    im = self.roundtrip(test_card, quality_layers=[20])\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8afe2770>\n\n======================================================================\nERROR: TestFileJpeg2k.test_prog_qual_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 88, in test_prog_qual_rt\n    test_card, quality_layers=[60, 40, 20], progression='LRCP')\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8afe2770>\n\n======================================================================\nERROR: TestFileJpeg2k.test_prog_res_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 92, in test_prog_res_rt\n    im = self.roundtrip(test_card, num_resolutions=8, progression='RLCP')\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8afe2770>\n\n======================================================================\nERROR: TestFileJpeg2k.test_tiled_offset_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 79, in test_tiled_offset_rt\n    tile_offset=(0, 0), offset=(32, 32))\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8992cb90>\n\n======================================================================\nERROR: TestFileJpeg2k.test_tiled_rt\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 73, in test_tiled_rt\n    im = self.roundtrip(test_card, tile_size=(128, 128))\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 27, in roundtrip\n    im = Image.open(out)\n  File \"/home/abuild/rpmbuild/BUILDROOT/python-Pillow-2.8.1-37.1.ppc64/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 2290, in open\n    % (filename if filename else fp))\nIOError: cannot identify image file <_io.BytesIO object at 0x3fff8992cb90>\n\n======================================================================\nFAIL: TestFileJpeg2k.test_16bit_monchrome_j2k_like_tiff\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 152, in test_16bit_monchrome_j2k_like_tiff\n    self.assert_image_similar(j2k, tiff_16bit, 1e-3)\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/helper.py\", line 105, in assert_image_similar\n    ave_diff, epsilon))\nAssertionError:  average pixel value difference 250.8379 > epsilon 0.0010\n\n======================================================================\nFAIL: TestFileJpeg2k.test_16bit_monchrome_jp2_like_tiff\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/test_file_jpeg2k.py\", line 146, in test_16bit_monchrome_jp2_like_tiff\n    self.assert_image_similar(jp2, tiff_16bit, 1e-3)\n  File \"/home/abuild/rpmbuild/BUILD/Pillow-2.8.1/Tests/helper.py\", line 105, in assert_image_similar\n    ave_diff, epsilon))\nAssertionError:  average pixel value difference 250.8379 > epsilon 0.0010\n```\n\nFull build log can be found here:\n\nhttps://build.opensuse.org/package/live_build_log/devel:languages:python/python-Pillow/openSUSE_Tumbleweed/ppc64\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1204/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1198", "id": 69001403, "node_id": "MDU6SXNzdWU2OTAwMTQwMw==", "number": 1198, "title": "JPEGs from my Panasonic camera are erroneously recognised as MPOs", "user": {"login": "pdc", "id": 90414, "node_id": "MDQ6VXNlcjkwNDE0", "avatar_url": "https://avatars.githubusercontent.com/u/90414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pdc", "html_url": "https://github.com/pdc", "followers_url": "https://api.github.com/users/pdc/followers", "following_url": "https://api.github.com/users/pdc/following{/other_user}", "gists_url": "https://api.github.com/users/pdc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pdc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pdc/subscriptions", "organizations_url": "https://api.github.com/users/pdc/orgs", "repos_url": "https://api.github.com/users/pdc/repos", "events_url": "https://api.github.com/users/pdc/events{/privacy}", "received_events_url": "https://api.github.com/users/pdc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-04-16T20:18:10Z", "updated_at": "2020-05-03T12:15:51Z", "closed_at": "2015-07-17T12:41:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I load a JPEG from my camera (a Panasonic DSC GX7) the format is reported as MPO not JPEG. The `seek` method erroneously allows me to select the nonexistent second frame. For example:\n\n```\n>>> x = Image.open('/Users/pdc/Pictures/Samples/P1010238.JPG')\n>>> x.format\n'MPO'\n>>> x.seek(1)\n>>> x.getpixel((0, 0))\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/pdc/virtualenvs/photocrowd/lib/python2.7/site-packages/PIL/Image.py\", line 1189, in getpixel\n    self.load()\n  File \"/Users/pdc/virtualenvs/photocrowd/lib/python2.7/site-packages/PIL/ImageFile.py\", line 229, in load\n    \"(%d bytes not processed)\" % len(b))\nIOError: image file is truncated (349 bytes not processed)\n```\n\nI discovered this because our site checks uploads are JPEGs and the check failed because the format is returned as `MPO`.\n\nGiven how haphazardly image metadata formats are specified and implemented it is possible that Panasonic\u2019s JPEGs do in fact report 2 frames for some reason. In this case it might be worth detecting this case because the second frame does not appear to exist.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1194", "id": 68508428, "node_id": "MDU6SXNzdWU2ODUwODQyOA==", "number": 1194, "title": "Problems adding plugin for image files to pil library in pillow", "user": {"login": "tonyVeco", "id": 11504312, "node_id": "MDQ6VXNlcjExNTA0MzEy", "avatar_url": "https://avatars.githubusercontent.com/u/11504312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonyVeco", "html_url": "https://github.com/tonyVeco", "followers_url": "https://api.github.com/users/tonyVeco/followers", "following_url": "https://api.github.com/users/tonyVeco/following{/other_user}", "gists_url": "https://api.github.com/users/tonyVeco/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonyVeco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonyVeco/subscriptions", "organizations_url": "https://api.github.com/users/tonyVeco/orgs", "repos_url": "https://api.github.com/users/tonyVeco/repos", "events_url": "https://api.github.com/users/tonyVeco/events{/privacy}", "received_events_url": "https://api.github.com/users/tonyVeco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2015-04-14T21:54:55Z", "updated_at": "2015-12-29T23:20:30Z", "closed_at": "2015-12-29T23:20:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is my problem: I have created 3 plugin file for an image extension file that is not present in the Pillow library. Then I added the 3 plugin to the pillow library package on my laptop and this works fine in windows, I can read  the file with this specific extension,l can display the image and I can get the value of each pixels.\nWhat I do after including the plugins in the PIllow library is to import from pillow the plugin to the reader routine, so that the extension can be recognized and the file decoded\nThen I had to move to Linux because I need it for my project,l have installed Pillow for my python 2.7 version with pydev in Eclipse and I did the same things I had done for windows to include the plugins in the Pillow library, but this time when I try to read the image file I obtain this message:\n\ncannot identify image file, \n\nWhat could i do? it seems as if the Image class of Pillow can not use the plugin for the file, but in windows I have no problems\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1188", "id": 68202879, "node_id": "MDU6SXNzdWU2ODIwMjg3OQ==", "number": 1188, "title": "Image.open transposing the image automatically on open?", "user": {"login": "ferozed", "id": 3730318, "node_id": "MDQ6VXNlcjM3MzAzMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3730318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferozed", "html_url": "https://github.com/ferozed", "followers_url": "https://api.github.com/users/ferozed/followers", "following_url": "https://api.github.com/users/ferozed/following{/other_user}", "gists_url": "https://api.github.com/users/ferozed/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferozed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferozed/subscriptions", "organizations_url": "https://api.github.com/users/ferozed/orgs", "repos_url": "https://api.github.com/users/ferozed/repos", "events_url": "https://api.github.com/users/ferozed/events{/privacy}", "received_events_url": "https://api.github.com/users/ferozed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2015-04-13T21:51:13Z", "updated_at": "2015-12-29T23:21:09Z", "closed_at": "2015-12-29T23:21:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have an image that I took using Iphone in portrait mode. When the iphone stores this image, it stores an Exif Orientation tag with value 6 on the image. This means that the image needs to be rotate left 90deg to get back the original.\n\nNow, I do the following:\n\n```\ni = Image.open('image.jpg')\ni.show()\n```\n\nexpecting to see the original image rotated 90, i.e the way the iphone saved it. but instead I am getting a corrected image.\n\nIf I save the image as a different file, and look at it using \"eog\" which is the image viewer on my ubuntu  box, I again get the \"corrected\" image. If I use \"eog\" to look at the original image, I see an image rotated 90deg ( as I expect ).\n\nwhy is Image.open () rotating the image ? \n\nMy use case, is that I have an image processing application, and I need to correct the source image orientation depending on the exif tag.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1188/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1176", "id": 66186874, "node_id": "MDU6SXNzdWU2NjE4Njg3NA==", "number": 1176, "title": "PyPy3 intermittent build error", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 195249344, "node_id": "MDU6TGFiZWwxOTUyNDkzNDQ=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Build", "name": "Build", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-04-03T17:01:59Z", "updated_at": "2015-09-10T14:08:39Z", "closed_at": "2015-09-10T14:08:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It's usually fixed by rebuilding, but this is coming up quite often recently. Maybe only in the past week or so, and only on PyPy3.\n\nThree examples:\n\n```\nbuilding 'PIL._imagingtk' extension\ncreating build/temp.linux-x86_64-3.2/Tk\nBuilding using 4 processes\ncc -O2 -fPIC -Wimplicit -coverage -I/usr/include/freetype2 -I/usr/include/openjpeg-2.1 -I/home/travis/build/python-pillow/Pillow/libImaging -I/opt/python/pypy3-2.4.0/include -I/usr/include/tcl8.5 -I/usr/local/include -I/usr/include -I/home/travis/virtualenv/pypy3-2.4.0/include -I/usr/include/x86_64-linux-gnu -c _imagingtk.c -o build/temp.linux-x86_64-3.2/_imagingtk.o\ncc -O2 -fPIC -Wimplicit -coverage -I/usr/include/freetype2 -I/usr/include/openjpeg-2.1 -I/home/travis/build/python-pillow/Pillow/libImaging -I/opt/python/pypy3-2.4.0/include -I/usr/include/tcl8.5 -I/usr/local/include -I/usr/include -I/home/travis/virtualenv/pypy3-2.4.0/include -I/usr/include/x86_64-linux-gnu -c Tk/tkImaging.c -o build/temp.linux-x86_64-3.2/Tk/tkImaging.o\ncc -shared -coverage build/temp.linux-x86_64-3.2/_imagingtk.o build/temp.linux-x86_64-3.2/Tk/tkImaging.o -L/lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/local/lib -L/usr/lib -L/usr/lib/x86_64-linux-gnu -ltcl8.5 -ltk8.5 -o /home/travis/build/python-pillow/Pillow/PIL/_imagingtk.pypy3-24.so\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000004a558a0; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000004461a40; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x00000000044b2820; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x00000000044b3660; dead> ignored\nbuilding 'PIL._imagingmath' extension\nNo output has been received in the last 10 minutes, this potentially indicates a stalled build or something wrong with the build itself.\nThe build has been terminated\n```\n\nhttps://travis-ci.org/python-pillow/Pillow/jobs/56895970#L1652\n\n```\nbuilding 'PIL._webp' extension\nBuilding using 4 processes\ncc -O2 -fPIC -Wimplicit -coverage -DHAVE_WEBPMUX -I/usr/include/freetype2 -I/usr/include/openjpeg-2.1 -I/home/travis/build/python-pillow/Pillow/libImaging -I/opt/python/pypy3-2.4.0/include -I/usr/include/tcl8.5 -I/usr/local/include -I/usr/include -I/home/travis/virtualenv/pypy3-2.4.0/include -I/usr/include/x86_64-linux-gnu -c _webp.c -o build/temp.linux-x86_64-3.2/_webp.o\ncc -shared -coverage build/temp.linux-x86_64-3.2/_webp.o -L/lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/local/lib -L/usr/lib -L/usr/lib/x86_64-linux-gnu -lwebp -lwebpmux -lwebpdemux -o /home/travis/build/python-pillow/Pillow/PIL/_webp.pypy3-24.so\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x00000000044eb360; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000004a78680; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000004a79460; dead> ignored\nbuilding 'PIL._imagingtk' extension\ncreating build/temp.linux-x86_64-3.2/Tk\nNo output has been received in the last 10 minutes, this potentially indicates a stalled build or something wrong with the build itself.\nThe build has been terminated\n```\n\nhttps://travis-ci.org/python-pillow/Pillow/jobs/57046502#L1637\n\n```\nbuilding 'PIL._imagingtk' extension\ncreating build/temp.linux-x86_64-3.2/Tk\nBuilding using 4 processes\ncc -O2 -fPIC -Wimplicit -coverage -I/usr/include/freetype2 -I/usr/include/openjpeg-2.1 -I/home/travis/build/python-pillow/Pillow/libImaging -I/opt/python/pypy3-2.4.0/include -I/usr/include/tcl8.5 -I/usr/local/include -I/usr/include -I/home/travis/virtualenv/pypy3-2.4.0/include -I/usr/include/x86_64-linux-gnu -c _imagingtk.c -o build/temp.linux-x86_64-3.2/_imagingtk.o\ncc -O2 -fPIC -Wimplicit -coverage -I/usr/include/freetype2 -I/usr/include/openjpeg-2.1 -I/home/travis/build/python-pillow/Pillow/libImaging -I/opt/python/pypy3-2.4.0/include -I/usr/include/tcl8.5 -I/usr/local/include -I/usr/include -I/home/travis/virtualenv/pypy3-2.4.0/include -I/usr/include/x86_64-linux-gnu -c Tk/tkImaging.c -o build/temp.linux-x86_64-3.2/Tk/tkImaging.o\ncc -shared -coverage build/temp.linux-x86_64-3.2/_imagingtk.o build/temp.linux-x86_64-3.2/Tk/tkImaging.o -L/lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/local/lib -L/usr/lib -L/usr/lib/x86_64-linux-gnu -ltcl8.5 -ltk8.5 -o /home/travis/build/python-pillow/Pillow/PIL/_imagingtk.pypy3-24.so\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000003f99a20; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x000000000470a400; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x000000000470b1c0; dead> ignored\nException AssertionError: AssertionError('can only test a child process',) in weakref callback of <weakref at 0x0000000004904020; dead> ignored\nbuilding 'PIL._imagingmath' extension\nNo output has been received in the last 10 minutes, this potentially indicates a stalled build or something wrong with the build itself.\nThe build has been terminated\n```\n\nhttps://travis-ci.org/python-pillow/Pillow/jobs/57047068#L1648\n\nAny ideas?\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1176/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1163", "id": 65778237, "node_id": "MDU6SXNzdWU2NTc3ODIzNw==", "number": 1163, "title": "When opening an invalid image with 2.8.0, an unpack error is generated instead of IOError.", "user": {"login": "danielsamuels", "id": 1781176, "node_id": "MDQ6VXNlcjE3ODExNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1781176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielsamuels", "html_url": "https://github.com/danielsamuels", "followers_url": "https://api.github.com/users/danielsamuels/followers", "following_url": "https://api.github.com/users/danielsamuels/following{/other_user}", "gists_url": "https://api.github.com/users/danielsamuels/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielsamuels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielsamuels/subscriptions", "organizations_url": "https://api.github.com/users/danielsamuels/orgs", "repos_url": "https://api.github.com/users/danielsamuels/repos", "events_url": "https://api.github.com/users/danielsamuels/events{/privacy}", "received_events_url": "https://api.github.com/users/danielsamuels/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2015-04-01T21:00:20Z", "updated_at": "2015-06-08T06:01:29Z", "closed_at": "2015-06-08T06:01:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bare-bones example available here (using Django as a base): https://github.com/danielsamuels/pillow-test\n\nIf you attempt to perform `Image.open(f)` on an invalid image, the following error is generated:\n\n```\nTraceback (most recent call last):\n  File \"/pillow-test/testing/tests.py\", line 12, in test_invalid_file\n    Image.open(test_file)\n  File \"/pillow-test/.venv/lib/python2.7/site-packages/PIL/Image.py\", line 2279, in open\n    if not accept or accept(prefix):\n  File \"/pillow-test/.venv/lib/python2.7/site-packages/PIL/FliImagePlugin.py\", line 33, in _accept\n    return i16(prefix[4:6]) in [0xAF11, 0xAF12]\n  File \"/pillow-test/.venv/lib/python2.7/site-packages/PIL/_binary.py\", line 39, in i16le\n    return unpack(\"<H\", c[o:o+2])[0]\nerror: unpack requires a string argument of length 2\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1156", "id": 65206677, "node_id": "MDU6SXNzdWU2NTIwNjY3Nw==", "number": 1156, "title": "inconsistent data when reading jpeg file", "user": {"login": "matthias-k", "id": 4093707, "node_id": "MDQ6VXNlcjQwOTM3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4093707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthias-k", "html_url": "https://github.com/matthias-k", "followers_url": "https://api.github.com/users/matthias-k/followers", "following_url": "https://api.github.com/users/matthias-k/following{/other_user}", "gists_url": "https://api.github.com/users/matthias-k/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthias-k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthias-k/subscriptions", "organizations_url": "https://api.github.com/users/matthias-k/orgs", "repos_url": "https://api.github.com/users/matthias-k/repos", "events_url": "https://api.github.com/users/matthias-k/events{/privacy}", "received_events_url": "https://api.github.com/users/matthias-k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-03-30T13:03:41Z", "updated_at": "2015-12-29T23:22:54Z", "closed_at": "2015-12-29T23:22:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nwhen reading jpeg files with pillow, I get inconsistend results for two python installations on my machine. Take for example [this image](https://kalliope.matthias-k.org/~matthias/tmp/i05june05_static_street_boston_p1010764.jpeg):\n\nOn my ubuntu 14.04s native python2.7 (numpy, pillow 2.7.0 installed from pip), I get\n\n```\n>>> np.array(PIL.Image.open('i05june05_static_street_boston_p1010764.jpeg'))\n\narray([[[ 84, 129, 135],\n    [ 84, 128, 131],\n    [ 72, 110, 111],\n    ..., \n    [ 21,  36,  39],\n    [ 35,  57,  55],\n    [ 74,  99,  96]],\n\n   [[ 84, 129, 135],\n    [ 84, 128, 131],\n    [ 72, 111, 110],\n    ..., \n    [ 27,  42,  45],\n    [ 38,  60,  58],\n    [ 78, 103, 100]],\n\n   [[ 81, 129, 133],\n    [ 82, 127, 130],\n    [ 70, 110, 109],\n    ..., \n    [ 32,  47,  50],\n    [ 35,  57,  55],\n    [ 78, 103, 100]],\n\n   ..., \n   [[139, 141, 140],\n    [134, 136, 135],\n    [129, 131, 130],\n    ..., \n    [250, 245, 255],\n    [253, 248, 255],\n    [255, 250, 255]],\n\n   [[132, 134, 133],\n    [129, 131, 130],\n    [127, 129, 128],\n    ..., \n    [183, 174, 201],\n    [184, 175, 204],\n    [184, 175, 202]],\n\n   [[129, 131, 130],\n    [130, 132, 131],\n    [131, 133, 132],\n    ..., \n    [177, 168, 199],\n    [179, 170, 201],\n    [180, 171, 202]]], dtype=uint8)\n```\n\nWhen using an anaconda installation of python 2.7 on the same machine with numpy and pillow 2.7.0 installed with conda, however, the result looks like this:\n\n```\n>>> np.array(PIL.Image.open('i05june05_static_street_boston_p1010764.jpeg'))\narray([[[ 84, 128, 137],\n    [ 84, 127, 133],\n    [ 72, 110, 111],\n    ..., \n    [ 21,  36,  39],\n    [ 35,  57,  55],\n    [ 73,  99,  96]],\n\n   [[ 84, 128, 137],\n    [ 84, 127, 133],\n    [ 71, 111, 110],\n    ..., \n    [ 27,  42,  45],\n    [ 38,  60,  58],\n    [ 77, 103, 100]],\n\n   [[ 81, 128, 134],\n    [ 82, 127, 132],\n    [ 70, 110, 109],\n    ..., \n    [ 32,  47,  50],\n    [ 35,  56,  57],\n    [ 77, 103, 100]],\n\n   ..., \n   [[139, 141, 140],\n    [134, 136, 135],\n    [129, 131, 130],\n    ..., \n    [250, 245, 255],\n    [253, 248, 255],\n    [255, 250, 255]],\n\n   [[132, 134, 133],\n    [129, 131, 130],\n    [127, 129, 128],\n    ..., \n    [183, 174, 203],\n    [184, 175, 204],\n    [184, 175, 204]],\n\n   [[129, 131, 130],\n    [130, 132, 131],\n    [131, 133, 132],\n    ..., \n    [177, 167, 201],\n    [179, 169, 203],\n    [180, 170, 204]]], dtype=uint8)\n```\n\nNotice for example the differences in the first line of output or the last line of output, where differences of as much as 2 occur.\n\nI am aware that anaconda comes with it's own version of libjpeg, but shouldn't jpeg decoding be consistent? Any help would be highly appreciated, as for my application I need reliable jpeg decoding.\n\nBest,\n  Matthias\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1147", "id": 64078369, "node_id": "MDU6SXNzdWU2NDA3ODM2OQ==", "number": 1147, "title": "Saving an image with mode \"P\" (palette) as TIFF saves a corrupted palette", "user": {"login": "vashek", "id": 7998032, "node_id": "MDQ6VXNlcjc5OTgwMzI=", "avatar_url": "https://avatars.githubusercontent.com/u/7998032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vashek", "html_url": "https://github.com/vashek", "followers_url": "https://api.github.com/users/vashek/followers", "following_url": "https://api.github.com/users/vashek/following{/other_user}", "gists_url": "https://api.github.com/users/vashek/gists{/gist_id}", "starred_url": "https://api.github.com/users/vashek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vashek/subscriptions", "organizations_url": "https://api.github.com/users/vashek/orgs", "repos_url": "https://api.github.com/users/vashek/repos", "events_url": "https://api.github.com/users/vashek/events{/privacy}", "received_events_url": "https://api.github.com/users/vashek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-03-24T19:19:08Z", "updated_at": "2018-11-19T23:28:18Z", "closed_at": "2018-11-19T23:28:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pillow (or the built-in libtiff) corrupts the palette when saving a mode P image as TIFF.\nI have Pillow-2.7.0-py2.7.egg and Python 2.7.8 (default, Jun 30 2014, 16:03:49) [MSC v.1500 32 bit (Intel)] on win32.\nSimply opening an existing mode P image and saving it as TIFF will exhibit the problem. The first band (R) of the palette seems OK and the G and B bands are garbage. When I use compression=\"raw\" (and therefore libtiff is not used), the palette is OK.\nMay be related to #718 but I don't get any exception, the original image in memory is OK (only the saved one is corrupted) and the length doesn't change.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1147/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1144", "id": 63403887, "node_id": "MDU6SXNzdWU2MzQwMzg4Nw==", "number": 1144, "title": "Image.load() does not close file pointer", "user": {"login": "arve0", "id": 4810521, "node_id": "MDQ6VXNlcjQ4MTA1MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4810521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arve0", "html_url": "https://github.com/arve0", "followers_url": "https://api.github.com/users/arve0/followers", "following_url": "https://api.github.com/users/arve0/following{/other_user}", "gists_url": "https://api.github.com/users/arve0/gists{/gist_id}", "starred_url": "https://api.github.com/users/arve0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arve0/subscriptions", "organizations_url": "https://api.github.com/users/arve0/orgs", "repos_url": "https://api.github.com/users/arve0/repos", "events_url": "https://api.github.com/users/arve0/events{/privacy}", "received_events_url": "https://api.github.com/users/arve0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}, {"id": 493738225, "node_id": "MDU6TGFiZWw0OTM3MzgyMjU=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/File%20Closing", "name": "File Closing", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2015-03-21T13:37:52Z", "updated_at": "2017-09-23T21:30:28Z", "closed_at": "2017-09-23T21:22:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm doing this:\n\n``` python\nfrom PIL import Image\nimg = Image.open(path)\nfp = img.fp\nimg.load()\nfp.closed # False\n```\n\nExpected file pointer to be closed.\n\nSystem:\n- Windows 7 64bit\n- Python 3.4.1\n- Pillow 2.7.0 (installed via conda)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1140", "id": 63355697, "node_id": "MDU6SXNzdWU2MzM1NTY5Nw==", "number": 1140, "title": "bug during converting between pillow and numpy?", "user": {"login": "retsyo", "id": 7960913, "node_id": "MDQ6VXNlcjc5NjA5MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/7960913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retsyo", "html_url": "https://github.com/retsyo", "followers_url": "https://api.github.com/users/retsyo/followers", "following_url": "https://api.github.com/users/retsyo/following{/other_user}", "gists_url": "https://api.github.com/users/retsyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/retsyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retsyo/subscriptions", "organizations_url": "https://api.github.com/users/retsyo/orgs", "repos_url": "https://api.github.com/users/retsyo/repos", "events_url": "https://api.github.com/users/retsyo/events{/privacy}", "received_events_url": "https://api.github.com/users/retsyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-21T03:58:06Z", "updated_at": "2016-06-30T15:43:09Z", "closed_at": "2016-06-30T15:43:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using anacond Python 2.7.6 |Anaconda 1.9.2 (32-bit)| (default, Nov 11 2013, 10:50:31) on windows 7 64 bits. Pillow and numpy are all updated on March 20, 2015 with 'conda update xx' (pillow-2.7.0-py27_0.tar.bz2, numpy-1.9.2-py27_p0.tar)\n\nI want to do image processing with PIL and numpy(yes, I know there is 'scipy.misc.imread'), but the result always fails to meet the mathmatical answer. So I traced and coin the following simple code. The key problem lies in 'imgData2=numpy.array(img, dtype=\"uint8\").**reshape(img.size)**' which is so-said over many webpages, but I found only 'imgData2=numpy.array(img, dtype=\"uint8\").**reshape(img.size[::-1])**' is true. So I just come to find whether this is a bug in conversion between PIL and numpy, or something I made wrong. Thanks\n\n``` python\n#coding=utf-8\nimport os, sys\nimport numpy\nfrom pylab import *\n\nimport PIL.Image as Image\n\ndef printImageData(img):\n    wid, hi=img.size\n    for y in range(hi):\n        for x in range(wid):\n            print img.getpixel((x, y)),\n        print\n    print\n\n#we create a picture, whose width is 3, and high is 2\nwid, hi=3, 2\nimg=Image.new('L', (wid, hi), 255)\nimg.putpixel((0,0),0)\nimg.putpixel((0,1),0)\nimg.putpixel((2,0),0)\n\nprintImageData(img)\nimg.save('test.png')\n\n\n#there are 2 problems:\n#1. if we do not transpose, then img2 is 2 pixels in width, and 3 pixels in high, which is different from original img\n#2. even we use transposition, img2 has different pixels value than original img\nimgData2=numpy.array(img, dtype=\"uint8\").reshape(img.size)#.T\n\nimg2=Image.fromarray(imgData2, mode='L')\nprintImageData(img2)\nimg2.save('img2.png')\n\n#this is the right way\nimgData3=numpy.array(img, dtype=\"uint8\").reshape(img.size[::-1])\nimg3=Image.fromarray(imgData3, mode='L')\nprintImageData(img3)\n\nsubplot(1,3,1)\nimshow(img, cmap='gray', interpolation='nearest' )\ntitle('original pic')\n\nsubplot(1,3,2)\nimshow(img2, cmap='gray', interpolation='nearest' )\ntitle('pic 2. the wrong one')\n\nsubplot(1,3,3)\nimshow(img3, cmap='gray', interpolation='nearest' )\ntitle('pic 3, the right one')\n\nfig=gcf()\nfig.tight_layout()\n\nshow()\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1140/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1129", "id": 60157364, "node_id": "MDU6SXNzdWU2MDE1NzM2NA==", "number": 1129, "title": "fromarray fails on PyPy", "user": {"login": "daver1691", "id": 8401803, "node_id": "MDQ6VXNlcjg0MDE4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/8401803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daver1691", "html_url": "https://github.com/daver1691", "followers_url": "https://api.github.com/users/daver1691/followers", "following_url": "https://api.github.com/users/daver1691/following{/other_user}", "gists_url": "https://api.github.com/users/daver1691/gists{/gist_id}", "starred_url": "https://api.github.com/users/daver1691/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daver1691/subscriptions", "organizations_url": "https://api.github.com/users/daver1691/orgs", "repos_url": "https://api.github.com/users/daver1691/repos", "events_url": "https://api.github.com/users/daver1691/events{/privacy}", "received_events_url": "https://api.github.com/users/daver1691/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-03-06T20:54:53Z", "updated_at": "2016-10-02T09:00:33Z", "closed_at": "2016-06-30T15:50:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Pillow seems to mostly work on PyPy, the Python JIT compiler, but I find that `fromarray` does not work. Not sure if this is a PyPy, numpy or Pillow issue.\n\nTested on the recently released PyPy 2.5.0 (stable), numpy 1.9.0 and Pillow 2.7.0. This code snippet works OK on CPython, and pops up a window of randomly coloured pixels, but fails on PyPy.\n\n``` python\nimport numpy as np\nfrom PIL import Image\narr = np.uint8(255 * np.random.rand(300,400,3))\nimg = Image.fromarray(arr, mode=\"RGB\")\nimg.show()\n```\n\n```\n$ pypy test-array-pil.py\nTraceback (most recent call last):\n  File \"app_main.py\", line 75, in run_toplevel\n  File \"test-array-pil.py\", line 5, in <module>\n    img = Image.fromarray(arr, mode=\"RGB\")\n  File \"/opt/pypy/site-packages/PIL/Image.py\", line 2174, in fromarray\n    return frombuffer(mode, size, obj, \"raw\", rawmode, 0, 1)\n  File \"/opt/pypy/site-packages/PIL/Image.py\", line 2124, in frombuffer\n    return frombytes(mode, size, data, decoder_name, args)\n  File \"/opt/pypy/site-packages/PIL/Image.py\", line 2050, in frombytes\n    im.frombytes(data, decoder_name, args)\n  File \"/opt/pypy/site-packages/PIL/Image.py\", line 721, in frombytes\n    s = d.decode(data)\nTypeError: must be string or read-only buffer, not ndarray\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1111", "id": 58382577, "node_id": "MDU6SXNzdWU1ODM4MjU3Nw==", "number": 1111, "title": "Limiting of PNG text chunk size to 64k causes side-effects", "user": {"login": "euangoddard", "id": 412672, "node_id": "MDQ6VXNlcjQxMjY3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/412672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euangoddard", "html_url": "https://github.com/euangoddard", "followers_url": "https://api.github.com/users/euangoddard/followers", "following_url": "https://api.github.com/users/euangoddard/following{/other_user}", "gists_url": "https://api.github.com/users/euangoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/euangoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euangoddard/subscriptions", "organizations_url": "https://api.github.com/users/euangoddard/orgs", "repos_url": "https://api.github.com/users/euangoddard/repos", "events_url": "https://api.github.com/users/euangoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/euangoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2015-02-20T17:17:05Z", "updated_at": "2015-03-26T11:35:45Z", "closed_at": "2015-03-26T11:35:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading PIL from version 2.6.2 to 2.7.0 we found that we get lots of `ValueError`s being raised by `PngImagePlugin`. The change which causes this was introduced in 0b75526ffe41a4697231beb8b5740617c98f290b. This seems like a sensible precaution, but I think that when multiple processes are using `zlib` simultaneously, this cause the error to occur. (We run a Django app inside gunicorn with 20 worker processes per web server). We found this occurs only when our site is being spidered by bots and therefore performing multiple loading of PNG files into memory.\n\nCan you think of any way of remedying this other than by increasing `MAX_TEXT_CHUNK` back to `ImageFile.SAFEBLOCK` (previously used)?\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1111/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1108", "id": 57218191, "node_id": "MDU6SXNzdWU1NzIxODE5MQ==", "number": 1108, "title": "Clipping on 16 bit grayscale tiff conversion to JPEG", "user": {"login": "dbrunton", "id": 57850, "node_id": "MDQ6VXNlcjU3ODUw", "avatar_url": "https://avatars.githubusercontent.com/u/57850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbrunton", "html_url": "https://github.com/dbrunton", "followers_url": "https://api.github.com/users/dbrunton/followers", "following_url": "https://api.github.com/users/dbrunton/following{/other_user}", "gists_url": "https://api.github.com/users/dbrunton/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbrunton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbrunton/subscriptions", "organizations_url": "https://api.github.com/users/dbrunton/orgs", "repos_url": "https://api.github.com/users/dbrunton/repos", "events_url": "https://api.github.com/users/dbrunton/events{/privacy}", "received_events_url": "https://api.github.com/users/dbrunton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-02-10T18:51:50Z", "updated_at": "2019-02-17T09:26:17Z", "closed_at": "2019-02-17T09:26:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "convert() (and consequently pilconvert.py) seems to clip 16 bit grayscale tiffs when they convert to jpeg. This seems to persist no matter what order of conversions is applied. The two attached images were made with pilconvert.py -g and -r. Unfortunately GitHub won't let me upload a Tiff, but I'm happy to send the original via email if that would help.\n![test3-g](https://cloud.githubusercontent.com/assets/57850/6133977/e585a3c4-b12b-11e4-94f7-0eb6835ad4cb.jpg)\n![test3-r](https://cloud.githubusercontent.com/assets/57850/6133976/e584f744-b12b-11e4-856e-936984c00cfb.jpg)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1104", "id": 56851121, "node_id": "MDU6SXNzdWU1Njg1MTEyMQ==", "number": 1104, "title": "After upgrading Pillow 2.3.0 to 2.7.0 .eps-files are not recognized anymore", "user": {"login": "RomanTschirf", "id": 2931808, "node_id": "MDQ6VXNlcjI5MzE4MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/2931808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RomanTschirf", "html_url": "https://github.com/RomanTschirf", "followers_url": "https://api.github.com/users/RomanTschirf/followers", "following_url": "https://api.github.com/users/RomanTschirf/following{/other_user}", "gists_url": "https://api.github.com/users/RomanTschirf/gists{/gist_id}", "starred_url": "https://api.github.com/users/RomanTschirf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RomanTschirf/subscriptions", "organizations_url": "https://api.github.com/users/RomanTschirf/orgs", "repos_url": "https://api.github.com/users/RomanTschirf/repos", "events_url": "https://api.github.com/users/RomanTschirf/events{/privacy}", "received_events_url": "https://api.github.com/users/RomanTschirf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-02-06T18:48:56Z", "updated_at": "2023-03-27T20:37:47Z", "closed_at": "2015-04-01T01:12:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "After updating to version 2.7.0 Pillow fails to recognize an input .eps-file. After downgrading to 2.3.0 again the file is read like intended.\n\nThe Error Message:\n\n```\nTraceback (most recent call last):\n   File \"img_pil.py\", line 25, in <module>\n     img = Image.open('epstest.eps')\n   File \"build/bdist.linux-x86_64/egg/PIL/Image.py\", line 2274, in open\n\nIOError: cannot identify image file 'epstest.eps'\n```\n\nIs this a bug?\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1104/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1093", "id": 55962983, "node_id": "MDU6SXNzdWU1NTk2Mjk4Mw==", "number": 1093, "title": "Pickling failure on mode 'L' images", "user": {"login": "mfitzp", "id": 126239, "node_id": "MDQ6VXNlcjEyNjIzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/126239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfitzp", "html_url": "https://github.com/mfitzp", "followers_url": "https://api.github.com/users/mfitzp/followers", "following_url": "https://api.github.com/users/mfitzp/following{/other_user}", "gists_url": "https://api.github.com/users/mfitzp/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfitzp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfitzp/subscriptions", "organizations_url": "https://api.github.com/users/mfitzp/orgs", "repos_url": "https://api.github.com/users/mfitzp/repos", "events_url": "https://api.github.com/users/mfitzp/events{/privacy}", "received_events_url": "https://api.github.com/users/mfitzp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-29T21:55:07Z", "updated_at": "2015-01-30T19:39:50Z", "closed_at": "2015-01-30T19:39:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm getting an error when attempting to pickle mode 'L' images within IPython.\n\n```\n  File \"/Users/mxf793/repos/ipython/IPython/kernel/zmq/serialize.py\", line 109, in deserialize_object\n    canned = pickle.loads(pobj)\n  File \"/usr/local/lib/python2.7/site-packages/PIL/Image.py\", line 629, in __setstate__\n    self.putpalette(palette)\n  File \"/usr/local/lib/python2.7/site-packages/PIL/Image.py\", line 1478, in putpalette\n    data = \"\".join(chr(x) for x in data)\nTypeError: 'NoneType' object is not iterable\n```\n\nRGB mode images work fine (I haven't tested all other modes, but will do).\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1093/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1089", "id": 55710817, "node_id": "MDU6SXNzdWU1NTcxMDgxNw==", "number": 1089, "title": "Bug in rendering Indic fonts", "user": {"login": "rakeshvar", "id": 2840906, "node_id": "MDQ6VXNlcjI4NDA5MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2840906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rakeshvar", "html_url": "https://github.com/rakeshvar", "followers_url": "https://api.github.com/users/rakeshvar/followers", "following_url": "https://api.github.com/users/rakeshvar/following{/other_user}", "gists_url": "https://api.github.com/users/rakeshvar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rakeshvar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rakeshvar/subscriptions", "organizations_url": "https://api.github.com/users/rakeshvar/orgs", "repos_url": "https://api.github.com/users/rakeshvar/repos", "events_url": "https://api.github.com/users/rakeshvar/events{/privacy}", "received_events_url": "https://api.github.com/users/rakeshvar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2015-01-28T03:48:48Z", "updated_at": "2019-01-21T15:43:24Z", "closed_at": "2015-12-29T23:26:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "ImageFont, ImageDraw do not render complex scripts with ligatures correctly. (On Ubuntu 14.04, Python 3.4.0)\n\nThis is how it looks in editor gedit:\n![gedit](https://cloud.githubusercontent.com/assets/2840906/5931921/5ce383f6-a659-11e4-95a8-9b720cea9a34.png)\nThis is how Pillow does it.\n![pillow](https://cloud.githubusercontent.com/assets/2840906/5931922/5ce3e666-a659-11e4-98cd-5454cb64f4b0.png)\n\n``` python\n#!/usr/bin/env python3\n#-*- coding:utf8 -*-\n\nfrom PIL import Image, ImageFont, ImageDraw\n\nim = Image.new(\"RGB\",(160, 160))\ndraw = ImageDraw.Draw(im)\n\nfont_telugu = ImageFont.truetype(\"/usr/share/fonts/truetype/ttf-indic-fonts-core/Pothana2000.ttf\",50)\ntext_telugu = \"\u0c28\u0c3f\u0c24\u0c4d\u0c2f\"\n\nfont_hindi = ImageFont.truetype(\"/usr/share/fonts/truetype/ttf-indic-fonts-core/gargi.ttf\",50)\ntext_hindi = \"\u0928\u093f\u0924\u094d\u092f\"\n\ndraw.text((10, 10), text_telugu, font=font_telugu)\ndraw.text((10, 90), text_hindi, font=font_hindi)\n\nim.show()\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1089/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1082", "id": 55180660, "node_id": "MDU6SXNzdWU1NTE4MDY2MA==", "number": 1082, "title": "GifImagePlugin.getheader claims to return list; actually returns tuple", "user": {"login": "cancan101", "id": 51059, "node_id": "MDQ6VXNlcjUxMDU5", "avatar_url": "https://avatars.githubusercontent.com/u/51059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cancan101", "html_url": "https://github.com/cancan101", "followers_url": "https://api.github.com/users/cancan101/followers", "following_url": "https://api.github.com/users/cancan101/following{/other_user}", "gists_url": "https://api.github.com/users/cancan101/gists{/gist_id}", "starred_url": "https://api.github.com/users/cancan101/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cancan101/subscriptions", "organizations_url": "https://api.github.com/users/cancan101/orgs", "repos_url": "https://api.github.com/users/cancan101/repos", "events_url": "https://api.github.com/users/cancan101/events{/privacy}", "received_events_url": "https://api.github.com/users/cancan101/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-01-22T17:12:36Z", "updated_at": "2015-04-03T10:12:11Z", "closed_at": "2015-04-03T10:12:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "`GifImagePlugin.getheader` [claims to return list](https://github.com/python-pillow/Pillow/blob/42b59046e7daaa80283255cb9f94e1894e56d8ca/PIL/GifImagePlugin.py#L410) but [actually returns tuple](https://github.com/python-pillow/Pillow/blob/42b59046e7daaa80283255cb9f94e1894e56d8ca/PIL/GifImagePlugin.py#L492).\n\nthis causes problems in the [gifmaker](https://github.com/python-pillow/Pillow/blob/54173d2c67bc8ed8953b56e67d4719676f43a073/Scripts/gifmaker.py#L81) script:\n\n```\n<ipython-input-21-9400b2d06cd2> in compress(infile, outfile)\n     79     seq = image_sequence(im)\n     80 \n---> 81     makedelta(fp, seq)\n     82 \n     83     fp.close()\n\n<ipython-input-21-9400b2d06cd2> in makedelta(fp, sequence)\n     37 \n     38             # global header\n---> 39             for s in getheader(im) + getdata(im):\n     40                 fp.write(s)\n     41 \n\nTypeError: can only concatenate tuple (not \"list\") to tuple\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1077", "id": 54357193, "node_id": "MDU6SXNzdWU1NDM1NzE5Mw==", "number": 1077, "title": "pillow Image.crop function cause python.exe crash", "user": {"login": "shelper", "id": 546163, "node_id": "MDQ6VXNlcjU0NjE2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/546163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shelper", "html_url": "https://github.com/shelper", "followers_url": "https://api.github.com/users/shelper/followers", "following_url": "https://api.github.com/users/shelper/following{/other_user}", "gists_url": "https://api.github.com/users/shelper/gists{/gist_id}", "starred_url": "https://api.github.com/users/shelper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shelper/subscriptions", "organizations_url": "https://api.github.com/users/shelper/orgs", "repos_url": "https://api.github.com/users/shelper/repos", "events_url": "https://api.github.com/users/shelper/events{/privacy}", "received_events_url": "https://api.github.com/users/shelper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 227368490, "node_id": "MDU6TGFiZWwyMjczNjg0OTA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Windows", "name": "Windows", "color": "00bcf2", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19", "html_url": "https://github.com/python-pillow/Pillow/milestone/19", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/19/labels", "id": 1645348, "node_id": "MDk6TWlsZXN0b25lMTY0NTM0OA==", "number": 19, "title": "3.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-03-15T11:22:46Z", "updated_at": "2017-01-05T23:42:43Z", "due_on": "2016-10-01T07:00:00Z", "closed_at": "2016-10-04T08:18:41Z"}, "comments": 18, "created_at": "2015-01-14T18:23:47Z", "updated_at": "2018-08-07T09:49:27Z", "closed_at": "2016-10-03T13:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "So here is what i encountered:\nassume i have an image file named \" bmg1.bmp\", if i run the script below\n\n``` python\nfrom PIL import Image\naoi = (1, 1, 10, 10) # an example of aoi\nimg = Image.open('bmg1.bmp')\nimg2 = img.crop(aoi)\nimg2.show()\n```\n\neverything is fine , but if I run:\n\n``` python\nfrom PIL import Image\naoi = (1, 1, 10, 10)\nimg = Image.open('bmg1.bmp')\nimg = img.crop(aoi)\nimg.show()\n```\n\nsame error happens if i do:\n\n``` python\nfrom PIL import Image\naoi = (10, 10, 15, 15)\nimg = Image.open('bmg1.bmp').crop(aoi)\nimg.show()\n```\n\nthe python.exe will crash, i am not sure if this is CPython's bug or pillow's bug. \n\ni doubt the crop function seems to return a Image object that is different from the original one, thus run show() on it gives errors, while does not on the original one.\nboth python 27 and python 34 have this problem, hope that will be resolved soon.\n\nthanks!\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1077/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1047", "id": 51668580, "node_id": "MDU6SXNzdWU1MTY2ODU4MA==", "number": 1047, "title": "8192px * 8192px --> cannot write file as WEBP (encoder returned None)", "user": {"login": "babubabu", "id": 1678120, "node_id": "MDQ6VXNlcjE2NzgxMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1678120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/babubabu", "html_url": "https://github.com/babubabu", "followers_url": "https://api.github.com/users/babubabu/followers", "following_url": "https://api.github.com/users/babubabu/following{/other_user}", "gists_url": "https://api.github.com/users/babubabu/gists{/gist_id}", "starred_url": "https://api.github.com/users/babubabu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/babubabu/subscriptions", "organizations_url": "https://api.github.com/users/babubabu/orgs", "repos_url": "https://api.github.com/users/babubabu/repos", "events_url": "https://api.github.com/users/babubabu/events{/privacy}", "received_events_url": "https://api.github.com/users/babubabu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-12-11T10:13:12Z", "updated_at": "2019-03-01T15:34:42Z", "closed_at": "2018-09-29T06:31:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to save a big sprite map as webp for testing purposes. \nThen I ran into\n\n```\nFile \"*/pip-srcs/Pillow/PIL/Image.py\" in save\n  1682.             save_handler(self, fp, filename)\nFile \"*/pip-srcs/Pillow/PIL/WebPImagePlugin.py\" in _save\n  71.         raise IOError(\"cannot write file as WEBP (encoder returned None)\")\n```\n\nI already tried to let the code run with the current 'master' state. \nAnd again with libwebp-0.4.2. It did not help.\n\nIt seems to be an issue on the resulting file size. \nSince if I use a 'quality' parameter lower than 90 for a specific image, it suddenly works. \nThe 'quality' seems to depend on the information-richness of the image, too. \nThe more different colors are used in the image, the higher is the probability that the saving fails for on level of 'quality'. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1047/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1046", "id": 51622117, "node_id": "MDU6SXNzdWU1MTYyMjExNw==", "number": 1046, "title": "PSDraw.PSDraw().image() error on Python 3.4", "user": {"login": "mbmccoy", "id": 8784746, "node_id": "MDQ6VXNlcjg3ODQ3NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/8784746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbmccoy", "html_url": "https://github.com/mbmccoy", "followers_url": "https://api.github.com/users/mbmccoy/followers", "following_url": "https://api.github.com/users/mbmccoy/following{/other_user}", "gists_url": "https://api.github.com/users/mbmccoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbmccoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbmccoy/subscriptions", "organizations_url": "https://api.github.com/users/mbmccoy/orgs", "repos_url": "https://api.github.com/users/mbmccoy/repos", "events_url": "https://api.github.com/users/mbmccoy/events{/privacy}", "received_events_url": "https://api.github.com/users/mbmccoy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 100983936, "node_id": "MDU6TGFiZWwxMDA5ODM5MzY=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Needs%20Tests", "name": "Needs Tests", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-12-10T22:49:03Z", "updated_at": "2014-12-29T23:17:23Z", "closed_at": "2014-12-29T23:17:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to run [this simple postscript example](http://pillow.readthedocs.org/en/latest/handbook/tutorial.html#drawing-postscript) in the overview on Python 3.4, but after replacing `lena.ppm` with a valid image name I immediately encountered the following error: \n\n```\nTraceback (most recent call last):\n  File \"test.py\", line 15, in <module>\n    ps.image(box, im, 75)\n  File \"[path-to-virtualenv]/lib/python3.4/site-packages/PIL/PSDraw.py\", line 144, in image\n    EpsImagePlugin._save(im, self.fp, None, 0)\n  File \"[path-to-virtualenv]/lib/python3.4/site-packages/PIL/EpsImagePlugin.py\", line 406, in _save\n    fp.flush()\n  TypeError: must be str, not bytes\n```\n\nReporting this as a bug because its a common python3 error for ported code, but let me know if you have any trouble reproducing or if I'm doing something silly.\n\nCheers,\n-Mike\n\nSetup: python3.4 (virtualenv), Mac OSX 10.1, Pillow 2.6.1\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1046/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039/events", "html_url": "https://github.com/python-pillow/Pillow/issues/1039", "id": 51167423, "node_id": "MDU6SXNzdWU1MTE2NzQyMw==", "number": 1039, "title": "PIL fails to roundtrip some TIFF images", "user": {"login": "anntzer", "id": 1322974, "node_id": "MDQ6VXNlcjEzMjI5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1322974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anntzer", "html_url": "https://github.com/anntzer", "followers_url": "https://api.github.com/users/anntzer/followers", "following_url": "https://api.github.com/users/anntzer/following{/other_user}", "gists_url": "https://api.github.com/users/anntzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/anntzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anntzer/subscriptions", "organizations_url": "https://api.github.com/users/anntzer/orgs", "repos_url": "https://api.github.com/users/anntzer/repos", "events_url": "https://api.github.com/users/anntzer/events{/privacy}", "received_events_url": "https://api.github.com/users/anntzer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2014-12-06T02:27:41Z", "updated_at": "2015-10-28T18:03:12Z", "closed_at": "2015-10-28T08:39:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For some TIFF images, a simple `Image.open(path).save(path)` fails with the following:\n\n```\n_TIFFVSetField: /path/to/test.tiff: Bad value 2 for \"ExtraSamples\" tag.\nTraceback (most recent call last):\n  <elided traceback>\n  File \"/usr/lib/python3.4/site-packages/PIL/Image.py\", line 1685, in save\n    save_handler(self, fp, filename)\n  File \"/usr/lib/python3.4/site-packages/PIL/TiffImagePlugin.py\", line 1185, in _save\n    e = Image._getencoder(im.mode, 'libtiff', a, im.encoderconfig)\n  File \"/usr/lib/python3.4/site-packages/PIL/Image.py\", line 430, in _getencoder\n    return encoder(mode, *args + extra)\nRuntimeError: Error setting from dictionary\n```\n\nThe image was created using Qt's `QImageWriter` (from a `QImage.Format_RBG32` image), but it is not clear how to reproduce the issue as a simple blank image created in the same way does not trigger the same issue.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/1039/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/986", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/986/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/986/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/986/events", "html_url": "https://github.com/python-pillow/Pillow/issues/986", "id": 47636914, "node_id": "MDU6SXNzdWU0NzYzNjkxNA==", "number": 986, "title": "Image.resize() incorrectly centers non-nearest filters", "user": {"login": "yromanenko", "id": 2577318, "node_id": "MDQ6VXNlcjI1NzczMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2577318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yromanenko", "html_url": "https://github.com/yromanenko", "followers_url": "https://api.github.com/users/yromanenko/followers", "following_url": "https://api.github.com/users/yromanenko/following{/other_user}", "gists_url": "https://api.github.com/users/yromanenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/yromanenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yromanenko/subscriptions", "organizations_url": "https://api.github.com/users/yromanenko/orgs", "repos_url": "https://api.github.com/users/yromanenko/repos", "events_url": "https://api.github.com/users/yromanenko/events{/privacy}", "received_events_url": "https://api.github.com/users/yromanenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-11-03T19:59:24Z", "updated_at": "2014-11-27T18:26:48Z", "closed_at": "2014-11-27T18:26:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "(Discovered in the context of scipy, see https://github.com/scipy/scipy/issues/4112 for more details)\n\nUsing an interpolation method other than 'nearest' with Image.resize results in an image shift away from (0,0) in the result (among other problems)\n\nIt behaves as though the filter kernel starts at (-0.5, -0.5), but is walked across the image without a corresponding change in step size.\n\nRepeated application of `Image.resize` with `Image.BILINEAR` results in the image shrinking and walking off:\n![linear](https://cloud.githubusercontent.com/assets/2577318/4888977/f6ef0bc4-6391-11e4-98ec-566ad4d93881.gif)\neven more weird, but still walking with `Image.BICUBIC`:\n![cubic](https://cloud.githubusercontent.com/assets/2577318/4888999/17c7c4bc-6392-11e4-9d7b-14160e91557b.gif)\nwhile 'Image.NEAREST' behaves as expected:\n![nearest](https://cloud.githubusercontent.com/assets/2577318/4889010/2dcd33be-6392-11e4-8d14-cd6a28f18b7c.gif)\n\nI started looking at Geometry.c, and it seems like it needs a bit of love, but I am very unfamiliar with the code so I'm hesitant to start rewriting things :-)\n\nHere's the test code:\n\n``` #!/usr/bin/python\n\nfrom PIL import Image\n\nsrc = Image.open(\"src.png\").convert('F')\ncbc = src\nlnr = src\nnrs = src\n\nfor idx in xrange(0, 128):\n    cbc = cbc.resize(tuple(2 * i for i in cbc.size), Image.BICUBIC)\n    cbc = cbc.resize(src.size, Image.BICUBIC)\n\n    lnr = lnr.resize(tuple(2 * i for i in lnr.size), Image.BILINEAR)\n    lnr = lnr.resize(src.size, Image.BILINEAR)\n\n    nrs = nrs.resize(tuple(2 * i for i in nrs.size), Image.NEAREST)\n    nrs = nrs.resize(src.size, Image.NEAREST)\n\n    nrs.convert('L').save(\"nrs_%03d.png\" % (idx))\n    lnr.convert('L').save(\"lnr_%03d.png\" % (idx))\n    cbc.convert('L').save(\"cbc_%03d.png\" % (idx))\n```\n\nThanks\n\nPlatform information:\n\n```\nPython 2.7.8 (default, Jul 13 2014, 17:11:32)\n[GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.40)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/975", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/975/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/975/events", "html_url": "https://github.com/python-pillow/Pillow/issues/975", "id": 46838143, "node_id": "MDU6SXNzdWU0NjgzODE0Mw==", "number": 975, "title": "Cannot save .TIF file with tag 347 (JPEGTables)", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-10-26T09:39:43Z", "updated_at": "2016-04-04T09:50:55Z", "closed_at": "2016-04-03T20:19:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There's a problem saving a TIFF with a JPEGTables tag.\n\nTo reproduce:\n\n``` python\n    def test_save_tiff_with_jpegtables(self):\n        # Arrange\n        outfile = self.tempfile(\"temp.tif\")\n\n        # Created with ImageMagick: convert hopper.jpg hopper_jpg.tif\n        # Contains JPEGTables (347) tag\n        infile = \"Tests/images/hopper_jpg.tif\"\n        im = Image.open(infile)\n\n        # Act / Assert\n        # Should not raise UnicodeDecodeError or anything else\n        im.save(outfile)\n```\n\nBranch with failing test:\nhttps://github.com/hugovk/Pillow/compare/tiff_jpegtables\n\nFails for Py 2.6, 2.7, 3.4, PyPy and PyPy3 (passes for 3.2 and 3.3):\nhttps://travis-ci.org/hugovk/Pillow/builds/39065110\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/975/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/973", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/973/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/973/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/973/events", "html_url": "https://github.com/python-pillow/Pillow/issues/973", "id": 46815183, "node_id": "MDU6SXNzdWU0NjgxNTE4Mw==", "number": 973, "title": "Cannot save .TIF file with tag 297 (Page Number) having value of 0/0.", "user": {"login": "jamesrusso", "id": 682807, "node_id": "MDQ6VXNlcjY4MjgwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/682807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesrusso", "html_url": "https://github.com/jamesrusso", "followers_url": "https://api.github.com/users/jamesrusso/followers", "following_url": "https://api.github.com/users/jamesrusso/following{/other_user}", "gists_url": "https://api.github.com/users/jamesrusso/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesrusso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesrusso/subscriptions", "organizations_url": "https://api.github.com/users/jamesrusso/orgs", "repos_url": "https://api.github.com/users/jamesrusso/repos", "events_url": "https://api.github.com/users/jamesrusso/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesrusso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-10-25T15:43:53Z", "updated_at": "2014-10-29T18:19:12Z", "closed_at": "2014-10-29T18:19:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<b>Script: </b>\n\n``` python\nfrom PIL import Image\nim = Image.open('output14024671122-1021-094450-118_p001.tif')\nim.save('test.tif')\n```\n\n<b>Exception:</b>\n\n```\n[root@app02 pil-page-test]# python tif-test.py \nTraceback (most recent call last):\n  File \"tif-test.py\", line 4, in <module>\n    im.save('test.tif')\n  File \"/usr/lib64/python2.7/site-packages/PIL/Image.py\", line 1685, in save\n    save_handler(self, fp, filename)\n  File \"/usr/lib64/python2.7/site-packages/PIL/TiffImagePlugin.py\", line 1161, in _save\n    atts[k] = float(v[0])/float(v[1])\nZeroDivisionError: float division by zero\n```\n\n<b>TiffInfo on the input file: </b>\n\n```\nTIFF Directory at offset 0x8 (8)\n  Subfile Type: multi-page document (2 = 0x2)\n  Image Width: 1728 Image Length: 2202\n  Resolution: 204, 196 pixels/inch\n  Bits/Sample: 1\n  Compression Scheme: CCITT Group 3\n  Photometric Interpretation: min-is-white\n  FillOrder: msb-to-lsb\n  Orientation: row 0 top, col 0 lhs\n  Samples/Pixel: 1\n  Rows/Strip: 4854\n  Planar Configuration: single image plane\n  Page Number: 0-0\n  Software: GPL Ghostscript 9.07\n  DateTime: 2014:10:25 11:08:31\n  Group 3 Options: EOL padding (4 = 0x4)\n```\n\n<p>\nAccording to the spec, the second value in the page number can be \"0\" indicating that the maximum number of pages is not available. \n</p>\n\nhttp://www.awaresystems.be/imaging/tiff/tifftags/pagenumber.html\n\nNot sure what the actual fix is, but wanted to log this with my research thus far. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/973/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/940", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/940/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/940/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/940/events", "html_url": "https://github.com/python-pillow/Pillow/issues/940", "id": 44674507, "node_id": "MDU6SXNzdWU0NDY3NDUwNw==", "number": 940, "title": "Tests/test_file_palm.py:TestFilePalm.test_monochrome() fails", "user": {"login": "Arfrever", "id": 656294, "node_id": "MDQ6VXNlcjY1NjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/656294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arfrever", "html_url": "https://github.com/Arfrever", "followers_url": "https://api.github.com/users/Arfrever/followers", "following_url": "https://api.github.com/users/Arfrever/following{/other_user}", "gists_url": "https://api.github.com/users/Arfrever/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arfrever/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arfrever/subscriptions", "organizations_url": "https://api.github.com/users/Arfrever/orgs", "repos_url": "https://api.github.com/users/Arfrever/repos", "events_url": "https://api.github.com/users/Arfrever/events{/privacy}", "received_events_url": "https://api.github.com/users/Arfrever/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 10, "created_at": "2014-10-02T11:20:59Z", "updated_at": "2017-10-16T08:54:22Z", "closed_at": "2017-10-16T08:54:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "`Tests/test_file_palm.py:TestFilePalm.test_monochrome()` fails in Pillow 2.6.0 and trunk.\nResult for trunk:\n\n```\n$ PYTHONPATH=\"build/lib.linux-x86_64-3.4\" python3.4 Tests/test_file_palm.py\n/tmp/Pillow/build/lib.linux-x86_64-3.4/PIL/Image.py:829: ResourceWarning: unclosed file <_io.BufferedReader name='Tests/images/hopper.ppm'>\n  self.load()\n/tmp/Pillow/build/lib.linux-x86_64-3.4/PIL/Image.py:647: ResourceWarning: unclosed file <_io.BufferedReader name='/tmp/tempnsk4jojm.png'>\n  self.load()\nF/tmp/Pillow/build/lib.linux-x86_64-3.4/PIL/Image.py:829: ResourceWarning: unclosed file <_io.BufferedReader name='Tests/images/hopper.ppm'>\n  self.load()\n=== orphaned temp file: /tmp/tempy2a4m8lw_P.palm\ns/tmp/Pillow/build/lib.linux-x86_64-3.4/PIL/Image.py:1652: ResourceWarning: unclosed file <_io.BufferedReader name='Tests/images/hopper.ppm'>\n  self.load()\n=== orphaned temp file: /tmp/temp1y0tnb5d_RGB.palm\n.\n======================================================================\nFAIL: TestFilePalm.test_monochrome\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"Tests/test_file_palm.py\", line 38, in test_monochrome\n    self.roundtrip(mode)\n  File \"Tests/test_file_palm.py\", line 30, in roundtrip\n    self.assert_image_equal(converted, im)\n  File \"/tmp/Pillow/Tests/helper.py\", line 81, in assert_image_equal\n    self.fail(msg or \"got different content\")\nAssertionError: got different content\n\n----------------------------------------------------------------------\nRan 3 tests in 0.109s\n\nFAILED (failures=1, skipped=1)\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/940/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/940/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/891", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/891/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/891/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/891/events", "html_url": "https://github.com/python-pillow/Pillow/issues/891", "id": 42144210, "node_id": "MDU6SXNzdWU0MjE0NDIxMA==", "number": 891, "title": "Error when using bitmap font embedded inside truetype font.", "user": {"login": "jackyyf", "id": 2260355, "node_id": "MDQ6VXNlcjIyNjAzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2260355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackyyf", "html_url": "https://github.com/jackyyf", "followers_url": "https://api.github.com/users/jackyyf/followers", "following_url": "https://api.github.com/users/jackyyf/following{/other_user}", "gists_url": "https://api.github.com/users/jackyyf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackyyf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackyyf/subscriptions", "organizations_url": "https://api.github.com/users/jackyyf/orgs", "repos_url": "https://api.github.com/users/jackyyf/repos", "events_url": "https://api.github.com/users/jackyyf/events{/privacy}", "received_events_url": "https://api.github.com/users/jackyyf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-09-07T15:14:49Z", "updated_at": "2015-01-08T08:38:06Z", "closed_at": "2015-01-08T08:38:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Truetype font has a feature which allows you to embed bitmap font for specific font size, to optimize the rendering results on screens. But using such fonts in Pillow will generate some strange result.\n\nExample:\n![Bitmap font vs TrueType font](http://i.imgur.com/tzJlIvp.png)\n\nIn this case I'm using a modified version of SimSun, which contains embedded bitmap fonts, for all size between 8px and 24px. In the image, first line is using 24px font and the second line is 28px.\n\n[TestCase](https://dl.dropboxusercontent.com/u/93107683/Pillow-issue.tar.bz2) is available (Contains SimSun font, testcode and the result above).\nThis test can be reproduced on both windows and linux.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/884", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/884/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/884/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/884/events", "html_url": "https://github.com/python-pillow/Pillow/issues/884", "id": 41758163, "node_id": "MDU6SXNzdWU0MTc1ODE2Mw==", "number": 884, "title": "Replace Lena with free image ", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2014-09-02T21:41:39Z", "updated_at": "2014-09-30T15:36:29Z", "closed_at": "2014-09-30T10:03:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "According to Debian bug 758442, Lena is not a free, redistributable image. \n\n```\nAccording to\nHutchison, Jamie (May\u2013June 2001). \"Culture, Communication, and an\nInformation Age Madonna\" (PDF). IEEE Professional Communication\nSociety Newsletter (archive) 45 (3).\n\nThis file is not free:\nWhen I explained everything to them [playboy] , they told us that they\nwould notinterfere as long as the use was for research and education\"\n(page 5 second column second paragraph)\n\n[1] http://www.cs.cmu.edu/~chuck/lennapg/pcs_mirror/may_june01.pdf\n```\n\n```\nProcessing commands for control@bugs.debian.org:\n\n> clone 758442 -1 -2\nBug #758442 [nip2] [nip2] Non distibutable file: lena\nBug 758442 cloned as bugs 760171-760172\n> # pillow has this file in Tests/images/lena*\n> reassign -1 src:pillow 2.5.3-1\nBug #760171 [nip2] [nip2] Non distibutable file: lena\nBug reassigned from package 'nip2' to 'src:pillow'.\nNo longer marked as found in versions 7.38.3.\nIgnoring request to alter fixed versions of bug #760171 to the same values previously set\nBug #760171 [src:pillow] [nip2] Non distibutable file: lena\nMarked as found in versions pillow/2.5.3-1.\n> # qtimageformats has this file in tests/auto/webp/images/lena*\n> reassign -2 src:qtimageformats-opensource-src 5.3.1-1\nBug #760172 [nip2] [nip2] Non distibutable file: lena\nBug reassigned from package 'nip2' to 'src:qtimageformats-opensource-src'.\nNo longer marked as found in versions 7.38.3.\nIgnoring request to alter fixed versions of bug #760172 to the same values previously set\nBug #760172 [src:qtimageformats-opensource-src] [nip2] Non distibutable file: lena\nMarked as found in versions qtimageformats-opensource-src/5.3.1-1.\n> forwarded -2 https://bugreports.qt-project.org/browse/QTBUG-41070\nBug #760172 [src:qtimageformats-opensource-src] [nip2] Non distibutable file: lena\nSet Bug forwarded-to-address to 'https://bugreports.qt-project.org/browse/QTBUG-41070'.\n> thanks\nStopping processing here.\n\nPlease contact me if you need assistance.\n-- \n758442: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758442 \n760171: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=760171 \n760172: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=760172\n Debian Bug Tracking System Contact owner@bugs.debian.org with problems \n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/884/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/870", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/870/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/870/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/870/events", "html_url": "https://github.com/python-pillow/Pillow/issues/870", "id": 41055790, "node_id": "MDU6SXNzdWU0MTA1NTc5MA==", "number": 870, "title": "JPEG 2000 memory leak", "user": {"login": "joshware", "id": 8543139, "node_id": "MDQ6VXNlcjg1NDMxMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8543139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshware", "html_url": "https://github.com/joshware", "followers_url": "https://api.github.com/users/joshware/followers", "following_url": "https://api.github.com/users/joshware/following{/other_user}", "gists_url": "https://api.github.com/users/joshware/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshware/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshware/subscriptions", "organizations_url": "https://api.github.com/users/joshware/orgs", "repos_url": "https://api.github.com/users/joshware/repos", "events_url": "https://api.github.com/users/joshware/events{/privacy}", "received_events_url": "https://api.github.com/users/joshware/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-08-25T12:18:21Z", "updated_at": "2014-09-13T06:05:22Z", "closed_at": "2014-09-13T06:05:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When JPEG 2000 images are decoded, they are read using the Incremental decoding adapter.\nOn Linux, this uses pthreads to do the decoding in a separate thread.\n\nHowever, after the image is loaded, the associated resources are never actually released.\nThe functionality for this is present in `ImagingIncrementalCodecDestroy()`, which is called by the cleanup function. But it looks like this is only called if there was an issue reading the image.\n\nBecause the call to `pthread_join` is never called, the memory allocated for the stack for the created thread is not freed, and will accumulate for each image loaded.\n\nAn example, attempting reading a test image 1000 times, on a 32-bit OS:\n\n``` python\n#!/usr/bin/env python\n\nfrom PIL import Image\nfrom commands import getoutput\nfrom os import getpid\n\ntest_file = \"Pillow/Tests/images/rgb_trns_ycbc.jp2\"\n\nfor count in range(1000):\n    with Image.open(test_file) as im:\n        im.load()\n        im.close()\n        vsz = getoutput(\"ps -o vsz -p {}\".format(getpid())).split(\"\\n\")[1]\n        print(\"Count {}: {} Kb\".format(count, vsz))\n```\n\nwill return:\n\n``` python\n[root@dorapp02 test]# python jp2k_test.py\nCount 0:  25008 Kb\nCount 1:  35256 Kb\nCount 2:  45500 Kb\nCount 3:  55744 Kb\nCount 4:  65988 Kb\nCount 5:  76232 Kb\nCount 6:  86476 Kb\n...\nCount 293: 3035088 Kb\nCount 294: 3045332 Kb\nCount 295: 3055576 Kb\nCount 296: 3065820 Kb\nCount 297: 3076064 Kb\nCount 298: 3086308 Kb\nTraceback (most recent call last):\n  File \"jp2k_test.py\", line 10, in <module>\n    im.load()\n  File \"build/bdist.linux-i686/egg/PIL/Jpeg2KImagePlugin.py\", line 207, in load\n  File \"build/bdist.linux-i686/egg/PIL/ImageFile.py\", line 234, in load\n  File \"build/bdist.linux-i686/egg/PIL/ImageFile.py\", line 56, in raise_ioerror\nIOError: broken data stream when reading image file\n\n```\n\nThis will also happen on a 64-bit Linux OS, but the virtual memory usage will be allowed to get MUCH higher before failing.\n\nSomething like this will easily fix this:\n\n``` diff\ndiff --git a/decode.c b/decode.c\nindex d5e3293..f728ceb 100644\n--- a/decode.c\n+++ b/decode.c\n@@ -103,6 +103,8 @@ PyImaging_DecoderNew(int contextsize)\n static void\n _dealloc(ImagingDecoderObject* decoder)\n {\n+    if (decoder->cleanup)\n+        decoder->cleanup(&decoder->state);\n     free(decoder->state.buffer);\n     free(decoder->state.context);\n     Py_XDECREF(decoder->lock);\n```\n\nThe cleanup function is called from `_dealloc` in `encoder.c`, so I am unsure of why it was not done here in the decoder, it does not appear to break any of the tests.\n\nThanks all :)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/870/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/867", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/867/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/867/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/867/events", "html_url": "https://github.com/python-pillow/Pillow/issues/867", "id": 41022579, "node_id": "MDU6SXNzdWU0MTAyMjU3OQ==", "number": 867, "title": "Convert.obj : error LNK2019: unresolved external symbol round referenced in function hsv2rgb", "user": {"login": "ivan", "id": 4458, "node_id": "MDQ6VXNlcjQ0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivan", "html_url": "https://github.com/ivan", "followers_url": "https://api.github.com/users/ivan/followers", "following_url": "https://api.github.com/users/ivan/following{/other_user}", "gists_url": "https://api.github.com/users/ivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivan/subscriptions", "organizations_url": "https://api.github.com/users/ivan/orgs", "repos_url": "https://api.github.com/users/ivan/repos", "events_url": "https://api.github.com/users/ivan/events{/privacy}", "received_events_url": "https://api.github.com/users/ivan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-08-24T23:13:56Z", "updated_at": "2014-09-02T21:44:34Z", "closed_at": "2014-09-02T21:44:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Building 5d9107ee4c732122d8431ad9573fbf98903832a2 for a 64-bit Python 2.7.8 on Windows 7 fails with:\n\n```\nConvert.obj : error LNK2019: unresolved external symbol round referenced in function hsv2rgb\nbuild\\lib.win-amd64-2.7\\PIL\\_imaging.pyd : fatal error LNK1120: 1 unresolved externals\n```\n\nFull log:\n\n```\n# python setup.py install\nrunning install\nrunning build\nrunning build_py\nrunning build_ext\nbuilding 'PIL._imaging' extension\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tc_imaging.c /Fobuild\\temp.win-amd64-2.7\\Release\\_imaging.obj\n_imaging.c\n_imaging.c(379) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n_imaging.c(3184) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\decode.obj\ndecode.c\nException installing mp_compile, proceeding without:\n            Attempt to start a new process before the current process\n            has finished its bootstrapping phase.\n\n            This probably means that you are on Windows and you have\n            forgotten to use the proper idiom in the main module:\n\n                if __name__ == '__main__':\n                    freeze_support()\n                    ...\n\n            The \"freeze_support()\" line can be omitted if the program\n            is not going to be frozen to produce a Windows executable.\nrunning install\nException installing mp_compile, proceeding without:\n            Attempt to start a new process before the current process\n            has finished its bootstrapping phase.\n\n            This probably means that you are on Windows and you have\n            forgotten to use the proper idiom in the main module:\n\n                if __name__ == '__main__':\n                    freeze_support()\n                    ...\n\n            The \"freeze_support()\" line can be omitted if the program\n            is not going to be frozen to produce a Windows executable.\nrunning install\nrunning build\nrunning build_py\nrunning build\nrunning build_py\nrunning build_ext\nrunning build_ext\nbuilding 'PIL._imaging' extension\nbuilding 'PIL._imaging' extension\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tc_imaging.c /Fobuild\\temp.win-amd64-2.7\\Release\\_imaging.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tc_imaging.c /Fobuild\\temp.win-amd64-2.7\\Release\\_imaging.obj\n_imaging.c\n_imaging.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcencode.c /Fobuild\\temp.win-amd64-2.7\\Release\\encode.obj\nencode.c\n_imaging.c(379) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n_imaging.c(379) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n_imaging.c(3184) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\n_imaging.c(3184) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Users\\root\\Documents\\Projects\\Pillow\\_imaging.c : fatal error C1083: Cannot open compiler generated file: 'build\\temp.win-amd64-2.7\\Release\\_imaging.obj': Permission denied\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'include_package_data'\n  warnings.warn(msg)\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'\n  warnings.warn(msg)\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'test_suite'\n  warnings.warn(msg)\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 9.0\\\\VC\\\\BIN\\\\amd64\\\\cl.exe' failed with exit status 1\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcmap.c /Fobuild\\temp.win-amd64-2.7\\Release\\map.obj\nmap.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\decode.obj\ndecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdisplay.c /Fobuild\\temp.win-amd64-2.7\\Release\\display.obj\ndisplay.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcencode.c /Fobuild\\temp.win-amd64-2.7\\Release\\encode.obj\nencode.c\ndisplay.c(389) : warning C4133: 'function' : incompatible types - from 'Py_UNICODE *' to 'LPSTR'\ndisplay.c(535) : warning C4244: '=' : conversion from 'SIZE_T' to 'int', possible loss of data\nException installing mp_compile, proceeding without:\n            Attempt to start a new process before the current process\n            has finished its bootstrapping phase.\n\n            This probably means that you are on Windows and you have\n            forgotten to use the proper idiom in the main module:\n\n                if __name__ == '__main__':\n                    freeze_support()\n                    ...\n\n            The \"freeze_support()\" line can be omitted if the program\n            is not going to be frozen to produce a Windows executable.\nrunning install\nrunning build\nrunning build_py\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcoutline.c /Fobuild\\temp.win-amd64-2.7\\Release\\outline.obj\noutline.c\nrunning build_ext\nbuilding 'PIL._imaging' extension\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcmap.c /Fobuild\\temp.win-amd64-2.7\\Release\\map.obj\nmap.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tc_imaging.c /Fobuild\\temp.win-amd64-2.7\\Release\\_imaging.obj\n_imaging.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcpath.c /Fobuild\\temp.win-amd64-2.7\\Release\\path.obj\npath.c\n_imaging.c(379) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdisplay.c /Fobuild\\temp.win-amd64-2.7\\Release\\display.obj\n_imaging.c(3184) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\ndisplay.c\npath.c(120) : warning C4244: 'return' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(127) : warning C4244: 'initializing' : conversion from 'unsigned __int64' to 'int', possible loss of data\npath.c(147) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(301) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(360) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(557) : warning C4244: 'function' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Access.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Access.obj\nAccess.c\ndisplay.c(389) : warning C4133: 'function' : incompatible types - from 'Py_UNICODE *' to 'LPSTR'\ndisplay.c(535) : warning C4244: '=' : conversion from 'SIZE_T' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\decode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcoutline.c /Fobuild\\temp.win-amd64-2.7\\Release\\outline.obj\ndecode.c\noutline.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\AlphaComposite.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\AlphaComposite.obj\nAlphaComposite.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcpath.c /Fobuild\\temp.win-amd64-2.7\\Release\\path.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcencode.c /Fobuild\\temp.win-amd64-2.7\\Release\\encode.obj\npath.c\nencode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Antialias.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Antialias.obj\npath.c(120) : warning C4244: 'return' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(127) : warning C4244: 'initializing' : conversion from 'unsigned __int64' to 'int', possible loss of data\npath.c(147) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(301) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(360) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nAntialias.c\npath.c(557) : warning C4244: 'function' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Access.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Access.obj\nAccess.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcmap.c /Fobuild\\temp.win-amd64-2.7\\Release\\map.obj\nmap.c\nlibImaging\\Antialias.c(31) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(32) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(59) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(74) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(76) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(148) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(150) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(152) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(155) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(159) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(166) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(173) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(190) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(205) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nlibImaging\\Antialias.c(225) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(227) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(228) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(231) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(235) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(242) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(249) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(268) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(284) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\AlphaComposite.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\AlphaComposite.obj\nAlphaComposite.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcdisplay.c /Fobuild\\temp.win-amd64-2.7\\Release\\display.obj\ndisplay.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Bands.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Bands.obj\nBands.c\ndisplay.c(389) : warning C4133: 'function' : incompatible types - from 'Py_UNICODE *' to 'LPSTR'\ndisplay.c(535) : warning C4244: '=' : conversion from 'SIZE_T' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Antialias.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Antialias.obj\nAntialias.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcoutline.c /Fobuild\\temp.win-amd64-2.7\\Release\\outline.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\BitDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\BitDecode.obj\noutline.c\nBitDecode.c\nlibImaging\\Antialias.c(31) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(32) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(59) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(74) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(76) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(148) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(150) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(152) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(155) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(159) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(166) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(173) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(190) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(205) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nlibImaging\\Antialias.c(225) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(227) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(228) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(231) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(235) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(242) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(249) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(268) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(284) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nlibImaging\\BitDecode.c(137) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /Tcpath.c /Fobuild\\temp.win-amd64-2.7\\Release\\path.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Blend.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Blend.obj\npath.c\nBlend.c\npath.c(120) : warning C4244: 'return' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(127) : warning C4244: 'initializing' : conversion from 'unsigned __int64' to 'int', possible loss of data\npath.c(147) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(301) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(360) : warning C4244: '=' : conversion from 'Py_ssize_t' to 'int', possible loss of data\npath.c(557) : warning C4244: 'function' : conversion from 'Py_ssize_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Bands.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Bands.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Access.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Access.obj\nBands.c\nAccess.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Chops.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Chops.obj\nChops.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\BitDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\BitDecode.obj\nlibImaging\\Chops.c(111) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nBitDecode.c\nlibImaging\\Chops.c(117) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\AlphaComposite.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\AlphaComposite.obj\nAlphaComposite.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Convert.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Convert.obj\nConvert.c\nlibImaging\\BitDecode.c(137) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Blend.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Blend.obj\nBlend.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Antialias.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Antialias.obj\nAntialias.c\nlibImaging\\Convert.c(272) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(274) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(277) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(311) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(312) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(313) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(315) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(316) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(317) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Chops.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Chops.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ConvertYCbCr.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ConvertYCbCr.obj\nChops.c\nConvertYCbCr.c\nlibImaging\\Antialias.c(31) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(32) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(59) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(74) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(76) : warning C4244: 'return' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(148) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(150) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(152) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(155) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(159) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(166) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(173) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(190) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(205) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nlibImaging\\Antialias.c(225) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(227) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(228) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(231) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(235) : warning C4244: 'function' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(242) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(249) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(268) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Antialias.c(284) : warning C4244: '=' : conversion from 'float' to 'INT32', possible loss of data\nlibImaging\\Chops.c(111) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Chops.c(117) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Copy.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Copy.obj\nCopy.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Convert.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Convert.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Bands.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Bands.obj\nConvert.c\nBands.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crc32.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crc32.obj\nlibImaging\\Convert.c(272) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(274) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(277) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(311) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(312) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(313) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(315) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(316) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(317) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nCrc32.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\BitDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\BitDecode.obj\nBitDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ConvertYCbCr.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ConvertYCbCr.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crop.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crop.obj\nConvertYCbCr.c\nlibImaging\\BitDecode.c(137) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nCrop.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Blend.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Blend.obj\nBlend.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Dib.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Dib.obj\nDib.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Chops.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Chops.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Copy.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Copy.obj\nChops.c\nCopy.c\nlibImaging\\Chops.c(111) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Chops.c(117) : warning C4244: 'initializing' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Dib.c(88) : warning C4267: '=' : conversion from 'size_t' to 'WORD', possible loss of data\nlibImaging\\Dib.c(111) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Draw.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Draw.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crc32.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crc32.obj\nDraw.c\nCrc32.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Convert.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Convert.obj\nConvert.c\nlibImaging\\Draw.c(603) : warning C4101: 'vertices' : unreferenced local variable\nlibImaging\\Draw.c(997) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(998) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crop.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crop.obj\nlibImaging\\Convert.c(272) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(274) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(277) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(311) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(312) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(313) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Convert.c(315) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(316) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nlibImaging\\Convert.c(317) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data\nCrop.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Effects.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Effects.obj\nEffects.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Dib.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Dib.obj\nDib.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ConvertYCbCr.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ConvertYCbCr.obj\nConvertYCbCr.c\nlibImaging\\Dib.c(88) : warning C4267: '=' : conversion from 'size_t' to 'WORD', possible loss of data\nlibImaging\\Dib.c(111) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Draw.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Draw.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\EpsEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\EpsEncode.obj\nDraw.c\nEpsEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Copy.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Copy.obj\nCopy.c\nlibImaging\\EpsEncode.c(78) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\Draw.c(603) : warning C4101: 'vertices' : unreferenced local variable\nlibImaging\\Draw.c(997) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(998) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\File.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\File.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crc32.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crc32.obj\nFile.c\nCrc32.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Effects.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Effects.obj\nEffects.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Crop.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Crop.obj\nCrop.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Fill.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Fill.obj\nFill.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\EpsEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\EpsEncode.obj\nEpsEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Dib.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Dib.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Filter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Filter.obj\nDib.c\nFilter.c\nlibImaging\\EpsEncode.c(78) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\File.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\File.obj\nFile.c\nlibImaging\\Dib.c(88) : warning C4267: '=' : conversion from 'size_t' to 'WORD', possible loss of data\nlibImaging\\Dib.c(111) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Draw.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Draw.obj\nDraw.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\FliDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\FliDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Fill.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Fill.obj\nFliDecode.c\nFill.c\nlibImaging\\Draw.c(603) : warning C4101: 'vertices' : unreferenced local variable\nlibImaging\\Draw.c(997) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(998) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nlibImaging\\Draw.c(1000) : warning C4244: 'function' : conversion from 'float' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Filter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Filter.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Geometry.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Geometry.obj\nFilter.c\nGeometry.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Effects.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Effects.obj\nEffects.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\EpsEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\EpsEncode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\FliDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\FliDecode.obj\nEpsEncode.c\nFliDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GetBBox.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GetBBox.obj\nlibImaging\\EpsEncode.c(78) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nGetBBox.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\File.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\File.obj\nFile.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Geometry.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Geometry.obj\nGeometry.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Fill.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Fill.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifDecode.obj\nFill.c\nGifDecode.c\nlibImaging\\GifDecode.c(146) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(149) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(296) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GetBBox.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GetBBox.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Filter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Filter.obj\nGetBBox.c\nFilter.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifEncode.obj\nGifEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifDecode.obj\nlibImaging\\GifEncode.c(290) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifEncode.c(313) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\FliDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\FliDecode.obj\nGifDecode.c\nFliDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\HexDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\HexDecode.obj\nHexDecode.c\nlibImaging\\GifDecode.c(146) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(149) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(296) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifEncode.obj\nGifEncode.c\nlibImaging\\HexDecode.c(34) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Histo.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Histo.obj\nHisto.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Geometry.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Geometry.obj\nGeometry.c\nlibImaging\\GifEncode.c(290) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifEncode.c(313) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\HexDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\HexDecode.obj\nHexDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegDecode.obj\nJpegDecode.c\nlibImaging\\HexDecode.c(34) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Histo.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Histo.obj\nHisto.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GetBBox.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GetBBox.obj\nGetBBox.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegEncode.obj\nJpegEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegDecode.obj\nJpegDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\LzwDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\LzwDecode.obj\nGifDecode.c\nLzwDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegEncode.obj\nlibImaging\\GifDecode.c(146) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(149) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifDecode.c(296) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nJpegEncode.c\nlibImaging\\LzwDecode.c(92) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\LzwDecode.c(229) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\GifEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\GifEncode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Matrix.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Matrix.obj\nGifEncode.c\nMatrix.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\LzwDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\LzwDecode.obj\nLzwDecode.c\nlibImaging\\GifEncode.c(290) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\GifEncode.c(313) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\Matrix.c(44) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(61) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(62) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(63) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\HexDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\HexDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ModeFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ModeFilter.obj\nHexDecode.c\nModeFilter.c\nlibImaging\\LzwDecode.c(92) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\LzwDecode.c(229) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Matrix.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Matrix.obj\nMatrix.c\nlibImaging\\HexDecode.c(34) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Histo.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Histo.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\MspDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\MspDecode.obj\nHisto.c\nMspDecode.c\nlibImaging\\Matrix.c(44) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(61) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(62) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(63) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ModeFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ModeFilter.obj\nModeFilter.c\nlibImaging\\MspDecode.c(31) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\MspDecode.c(90) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegDecode.obj\nJpegDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Negative.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Negative.obj\nNegative.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Offset.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Offset.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\MspDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\MspDecode.obj\nOffset.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\JpegEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\JpegEncode.obj\nMspDecode.c\nJpegEncode.c\nlibImaging\\MspDecode.c(31) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\MspDecode.c(90) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Negative.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Negative.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Pack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Pack.obj\nNegative.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\LzwDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\LzwDecode.obj\nPack.c\nLzwDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Offset.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Offset.obj\nlibImaging\\LzwDecode.c(92) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\LzwDecode.c(229) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nOffset.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Matrix.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Matrix.obj\nMatrix.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PackDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PackDecode.obj\nPackDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Pack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Pack.obj\nlibImaging\\Matrix.c(44) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(61) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(62) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Matrix.c(63) : warning C4244: 'initializing' : conversion from 'double' to 'float', possible loss of data\nPack.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ModeFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ModeFilter.obj\nModeFilter.c\nlibImaging\\PackDecode.c(32) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(44) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(62) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Palette.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Palette.obj\nPalette.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\MspDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\MspDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PackDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PackDecode.obj\nMspDecode.c\nPackDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Paste.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Paste.obj\nPaste.c\nlibImaging\\MspDecode.c(31) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\MspDecode.c(90) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(32) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(44) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(62) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Negative.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Negative.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Palette.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Palette.obj\nNegative.c\nPalette.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Quant.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Quant.obj\nQuant.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Offset.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Offset.obj\nOffset.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Paste.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Paste.obj\nPaste.c\nlibImaging\\Quant.c(806) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(855) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(923) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Pack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Pack.obj\nPack.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Quant.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Quant.obj\nQuant.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantOctree.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantOctree.obj\nQuantOctree.c\nlibImaging\\QuantOctree.c(142) : warning C4244: 'initializing' : conversion from 'uint32_t' to 'float', possible loss of data\nlibImaging\\QuantOctree.c(188) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(195) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(202) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(209) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(310) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(311) : warning C4244: '=' : conversion from 'uint64_t' to 'uint32_t', possible loss of data\nlibImaging\\QuantOctree.c(364) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(375) : warning C4018: '>' : signed/unsigned mismatch\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PackDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PackDecode.obj\nPackDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHash.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHash.obj\nlibImaging\\Quant.c(806) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(855) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(923) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nQuantHash.c\nlibImaging\\PackDecode.c(32) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(44) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PackDecode.c(62) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Palette.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Palette.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHeap.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHeap.obj\nPalette.c\nQuantHeap.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantOctree.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantOctree.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcdDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcdDecode.obj\nPcdDecode.c\nQuantOctree.c\nlibImaging\\QuantOctree.c(142) : warning C4244: 'initializing' : conversion from 'uint32_t' to 'float', possible loss of data\nlibImaging\\QuantOctree.c(188) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(195) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(202) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(209) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(310) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(311) : warning C4244: '=' : conversion from 'uint64_t' to 'uint32_t', possible loss of data\nlibImaging\\QuantOctree.c(364) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(375) : warning C4018: '>' : signed/unsigned mismatch\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHash.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHash.obj\nQuantHash.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Paste.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Paste.obj\nPaste.c\nlibImaging\\PcdDecode.c(42) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxDecode.obj\nPcxDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHeap.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHeap.obj\nQuantHeap.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcdDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcdDecode.obj\nPcdDecode.c\nlibImaging\\PcxDecode.c(30) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxDecode.c(36) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxEncode.obj\nPcxEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Quant.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Quant.obj\nQuant.c\nlibImaging\\PcdDecode.c(42) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxDecode.obj\nPcxDecode.c\nlibImaging\\PcxEncode.c(71) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(107) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(127) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(134) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(153) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(160) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(168) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Point.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Point.obj\nlibImaging\\Quant.c(806) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(855) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nlibImaging\\Quant.c(923) : warning C4244: '=' : conversion from '__int64' to 'uint32_t', possible loss of data\nPoint.c\nlibImaging\\PcxDecode.c(30) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxDecode.c(36) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxEncode.obj\nPcxEncode.c\nlibImaging\\Point.c(229) : warning C4244: '=' : conversion from 'double' to 'INT32', possible loss of data\nlibImaging\\Point.c(239) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Point.c(251) : warning C4244: '=' : conversion from 'double' to 'UINT16', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantOctree.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantOctree.obj\nQuantOctree.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RankFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RankFilter.obj\nRankFilter.c\nlibImaging\\QuantOctree.c(142) : warning C4244: 'initializing' : conversion from 'uint32_t' to 'float', possible loss of data\nlibImaging\\QuantOctree.c(188) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(195) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(202) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(209) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(310) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(311) : warning C4244: '=' : conversion from 'uint64_t' to 'uint32_t', possible loss of data\nlibImaging\\QuantOctree.c(364) : warning C4018: '<' : signed/unsigned mismatch\nlibImaging\\QuantOctree.c(375) : warning C4018: '>' : signed/unsigned mismatch\nlibImaging\\PcxEncode.c(71) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(107) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(127) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(134) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(153) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(160) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(168) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Point.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Point.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHash.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHash.obj\nPoint.c\nQuantHash.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawDecode.obj\nRawDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\QuantHeap.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHeap.obj\nQuantHeap.c\nlibImaging\\Point.c(229) : warning C4244: '=' : conversion from 'double' to 'INT32', possible loss of data\nlibImaging\\Point.c(239) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Point.c(251) : warning C4244: '=' : conversion from 'double' to 'UINT16', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcdDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcdDecode.obj\nPcdDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RankFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RankFilter.obj\nRankFilter.c\nlibImaging\\RawDecode.c(59) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\RawDecode.c(69) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawEncode.obj\nRawEncode.c\nlibImaging\\PcdDecode.c(42) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxDecode.obj\nPcxDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawDecode.obj\nRawDecode.c\nlibImaging\\RawEncode.c(87) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Storage.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Storage.obj\nStorage.c\nlibImaging\\PcxDecode.c(30) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxDecode.c(36) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\PcxEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\PcxEncode.obj\nPcxEncode.c\nlibImaging\\RawDecode.c(59) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\RawDecode.c(69) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawEncode.obj\nRawEncode.c\nlibImaging\\Storage.c(387) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(71) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(107) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(127) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(134) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(153) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(160) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\PcxEncode.c(168) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\SunRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\SunRleDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Point.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Point.obj\nSunRleDecode.c\nPoint.c\nlibImaging\\RawEncode.c(87) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Storage.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Storage.obj\nStorage.c\nlibImaging\\Point.c(229) : warning C4244: '=' : conversion from 'double' to 'INT32', possible loss of data\nlibImaging\\Point.c(239) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\Point.c(251) : warning C4244: '=' : conversion from 'double' to 'UINT16', possible loss of data\nlibImaging\\SunRleDecode.c(33) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\SunRleDecode.c(111) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TgaRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TgaRleDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RankFilter.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RankFilter.obj\nTgaRleDecode.c\nRankFilter.c\nlibImaging\\Storage.c(387) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\SunRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\SunRleDecode.obj\nSunRleDecode.c\nlibImaging\\TgaRleDecode.c(48) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\TgaRleDecode.c(117) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Unpack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Unpack.obj\nUnpack.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawDecode.obj\nRawDecode.c\nlibImaging\\SunRleDecode.c(33) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\SunRleDecode.c(111) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TgaRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TgaRleDecode.obj\nTgaRleDecode.c\nlibImaging\\RawDecode.c(59) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\RawDecode.c(69) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\RawEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\RawEncode.obj\nRawEncode.c\nlibImaging\\TgaRleDecode.c(48) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\TgaRleDecode.c(117) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Unpack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Unpack.obj\nUnpack.c\nlibImaging\\RawEncode.c(87) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnpackYCC.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnpackYCC.obj\nUnpackYCC.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Storage.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Storage.obj\nStorage.c\nlibImaging\\Storage.c(387) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnsharpMask.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnsharpMask.obj\nUnsharpMask.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\SunRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\SunRleDecode.obj\nSunRleDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnpackYCC.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnpackYCC.obj\nUnpackYCC.c\nlibImaging\\UnsharpMask.c(99) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(112) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(134) : warning C4244: '*=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\SunRleDecode.c(33) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\SunRleDecode.c(111) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TgaRleDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TgaRleDecode.obj\nTgaRleDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnsharpMask.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnsharpMask.obj\nXbmDecode.c\nUnsharpMask.c\nlibImaging\\TgaRleDecode.c(48) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\TgaRleDecode.c(117) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Unpack.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Unpack.obj\nUnpack.c\nlibImaging\\UnsharpMask.c(99) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(112) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(134) : warning C4244: '*=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\XbmDecode.c(49) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\XbmDecode.c(56) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmEncode.obj\nXbmEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmDecode.obj\nXbmDecode.c\nlibImaging\\XbmEncode.c(105) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipDecode.obj\nZipDecode.c\nlibImaging\\XbmDecode.c(49) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\XbmDecode.c(56) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmEncode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnpackYCC.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnpackYCC.obj\nXbmEncode.c\nUnpackYCC.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipEncode.obj\nZipEncode.c\nlibImaging\\XbmEncode.c(105) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\UnsharpMask.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\UnsharpMask.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipDecode.obj\nUnsharpMask.c\nZipDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TiffDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TiffDecode.obj\nTiffDecode.c\nlibImaging\\UnsharpMask.c(99) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(112) : warning C4244: '=' : conversion from 'double' to 'float', possible loss of data\nlibImaging\\UnsharpMask.c(134) : warning C4244: '*=' : conversion from 'double' to 'float', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipEncode.obj\nZipEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmDecode.obj\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Incremental.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Incremental.obj\nXbmDecode.c\nIncremental.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TiffDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TiffDecode.obj\nTiffDecode.c\nlibImaging\\XbmDecode.c(49) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nlibImaging\\XbmDecode.c(56) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\XbmEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\XbmEncode.obj\nXbmEncode.c\nlibImaging\\Incremental.c(205) : warning C4047: '=' : 'HANDLE' differs in levels of indirection from 'uintptr_t'\nlibImaging\\Incremental.c(431) : warning C4267: 'function' : conversion from 'size_t' to 'unsigned int', possible loss of data\nlibImaging\\Incremental.c(503) : warning C4244: '+=' : conversion from 'ssize_t' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(504) : warning C4244: '-=' : conversion from 'ssize_t' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(517) : warning C4244: 'initializing' : conversion from '__int64' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(535) : warning C4244: '=' : conversion from '__int64' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(572) : warning C4267: 'function' : conversion from 'size_t' to 'unsigned int', possible loss of data\nlibImaging\\Incremental.c(667) : warning C4244: '=' : conversion from '__int64' to 'off_t', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Jpeg2KDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KDecode.obj\nJpeg2KDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Incremental.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Incremental.obj\nIncremental.c\nlibImaging\\XbmEncode.c(105) : warning C4244: 'return' : conversion from '__int64' to 'int', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipDecode.obj\nZipDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Jpeg2KEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KEncode.obj\nJpeg2KEncode.c\nlibImaging\\Incremental.c(205) : warning C4047: '=' : 'HANDLE' differs in levels of indirection from 'uintptr_t'\nlibImaging\\Incremental.c(431) : warning C4267: 'function' : conversion from 'size_t' to 'unsigned int', possible loss of data\nlibImaging\\Incremental.c(503) : warning C4244: '+=' : conversion from 'ssize_t' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(504) : warning C4244: '-=' : conversion from 'ssize_t' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(517) : warning C4244: 'initializing' : conversion from '__int64' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(535) : warning C4244: '=' : conversion from '__int64' to 'off_t', possible loss of data\nlibImaging\\Incremental.c(572) : warning C4267: 'function' : conversion from 'size_t' to 'unsigned int', possible loss of data\nlibImaging\\Incremental.c(667) : warning C4244: '=' : conversion from '__int64' to 'off_t', possible loss of data\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Jpeg2KDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KDecode.obj\nJpeg2KDecode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\ZipEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\ZipEncode.obj\nZipEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:C:\\Python27-64\\lib /LIBPATH:C:\\Python27-64\\libs /LIBPATH:C:\\Python27-64\\PCbuild\\amd64 kernel32.lib user32.lib gdi32.lib /EXPORT:init_imaging build\\temp.win-amd64-2.7\\Release\\_imaging.obj build\\temp.win-amd64-2.7\\Release\\decode.obj build\\temp.win-amd64-2.7\\Release\\encode.obj build\\temp.win-amd64-2.7\\Release\\map.obj build\\temp.win-amd64-2.7\\Release\\display.obj build\\temp.win-amd64-2.7\\Release\\outline.obj build\\temp.win-amd64-2.7\\Release\\path.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Access.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\AlphaComposite.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Antialias.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Bands.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\BitDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Blend.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Chops.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Convert.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\ConvertYCbCr.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Copy.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Crc32.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Crop.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Dib.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Draw.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Effects.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\EpsEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\File.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Fill.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Filter.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\FliDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Geometry.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\GetBBox.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\GifDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\GifEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\HexDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Histo.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\JpegDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\JpegEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\LzwDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Matrix.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\ModeFilter.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\MspDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Negative.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Offset.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Pack.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\PackDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Palette.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Paste.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Quant.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\QuantOctree.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHash.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\QuantHeap.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\PcdDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\PcxDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\PcxEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Point.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\RankFilter.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\RawDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\RawEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Storage.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\SunRleDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\TgaRleDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Unpack.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\UnpackYCC.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\UnsharpMask.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\XbmDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\XbmEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\ZipDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\ZipEncode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\TiffDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Incremental.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KDecode.obj build\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KEncode.obj /OUT:build\\lib.win-amd64-2.7\\PIL\\_imaging.pyd /IMPLIB:build\\temp.win-amd64-2.7\\Release\\_imaging.lib /MANIFESTFILE:build\\temp.win-amd64-2.7\\Release\\_imaging.pyd.manifest\n_imaging.obj : warning LNK4197: export 'init_imaging' specified multiple times; using first specification\n   Creating library build\\temp.win-amd64-2.7\\Release\\_imaging.lib and object build\\temp.win-amd64-2.7\\Release\\_imaging.exp\nConvert.obj : error LNK2019: unresolved external symbol round referenced in function hsv2rgb\nbuild\\lib.win-amd64-2.7\\PIL\\_imaging.pyd : fatal error LNK1120: 1 unresolved externals\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\Jpeg2KEncode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\Jpeg2KEncode.obj\nJpeg2KEncode.c\nC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Users\\root\\Documents\\Projects\\Pillow\\libImaging \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\ATLMFC\\INCLUDE\" \"-IC:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\" \"-IC:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\" -IC:\\Python27-64\\include -IC:\\Python27-64\\include -IC:\\Python27-64\\PC /TclibImaging\\TiffDecode.c /Fobuild\\temp.win-amd64-2.7\\Release\\libImaging\\TiffDecode.obj\nTiffDecode.c\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'include_package_data'\n  warnings.warn(msg)\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'\n  warnings.warn(msg)\nC:\\Python27-64\\lib\\distutils\\dist.py:267: UserWarning: Unknown distribution option: 'test_suite'\n  warnings.warn(msg)\nerror: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 9.0\\\\VC\\\\BIN\\\\amd64\\\\link.exe' failed with exit status 1120\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/863", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/863/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/863/events", "html_url": "https://github.com/python-pillow/Pillow/issues/863", "id": 40766788, "node_id": "MDU6SXNzdWU0MDc2Njc4OA==", "number": 863, "title": "fromarray() doesn't support np.uint16", "user": {"login": "pijyoi", "id": 2657027, "node_id": "MDQ6VXNlcjI2NTcwMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/2657027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pijyoi", "html_url": "https://github.com/pijyoi", "followers_url": "https://api.github.com/users/pijyoi/followers", "following_url": "https://api.github.com/users/pijyoi/following{/other_user}", "gists_url": "https://api.github.com/users/pijyoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pijyoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pijyoi/subscriptions", "organizations_url": "https://api.github.com/users/pijyoi/orgs", "repos_url": "https://api.github.com/users/pijyoi/repos", "events_url": "https://api.github.com/users/pijyoi/events{/privacy}", "received_events_url": "https://api.github.com/users/pijyoi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-08-21T02:20:06Z", "updated_at": "2016-06-30T15:53:46Z", "closed_at": "2016-06-30T15:53:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` python\nImage._fromarray_typemap = {\n    ((1, 1), \"<i2\"): (\"I\", \"I;16\"),\n    ((1, 1), \">i2\"): (\"I\", \"I;16B\"),\n}\n```\n\nWould it be sufficient to just add entries for \"<u2\" and \">u2\"?\nAlso, is it intentional that the i2 modes use unsigned \"I;16[B]\" rather than signed \"I;16[B]S\"?\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/863/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/857", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/857/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/857/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/857/events", "html_url": "https://github.com/python-pillow/Pillow/issues/857", "id": 40610244, "node_id": "MDU6SXNzdWU0MDYxMDI0NA==", "number": 857, "title": "Pillow JpegImagePlugin cannot \"keep\" quality on save()", "user": {"login": "ye", "id": 133924, "node_id": "MDQ6VXNlcjEzMzkyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/133924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ye", "html_url": "https://github.com/ye", "followers_url": "https://api.github.com/users/ye/followers", "following_url": "https://api.github.com/users/ye/following{/other_user}", "gists_url": "https://api.github.com/users/ye/gists{/gist_id}", "starred_url": "https://api.github.com/users/ye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ye/subscriptions", "organizations_url": "https://api.github.com/users/ye/orgs", "repos_url": "https://api.github.com/users/ye/repos", "events_url": "https://api.github.com/users/ye/events{/privacy}", "received_events_url": "https://api.github.com/users/ye/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-08-19T16:31:51Z", "updated_at": "2014-09-05T22:24:31Z", "closed_at": "2014-09-02T21:58:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to resize a JPEG image into a binding box of max width 500 and/or max height 500 and keep aspect ratio. While the resizing part works perfectly, the saving part was not desirable.\nWhen no `quality` param is specified or specified with a hardcoded value (like '50'), saving works.\n\nHowever, there is no true way to get it \"keeping\" the same quality while resizing. Omitting the quality param would simply set the output JPEG quality to be 75, which is the default. I was referred by this StackOverflow answer: \"http://stackoverflow.com/a/4355281\" stating that using `quality=\"keep\"` would work just as expected. But apparently, that was untrue. At least it failed in my case(see below.) Somehow, if the JPEG image has only one layer, saving with `quality=\"keep\"` gets me a `IndexError: list index out of range` exception.\n\nHere is my IPython log:\n\n``` python\n$ ipython\nPython 2.7.6 (default, Apr  3 2014, 19:58:06) \nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 2.1.0 -- An enhanced Interactive Python.\n?         -> Introduction and overview of IPython's features.\n%quickref -> Quick reference.\nhelp      -> Python's own help system.\nobject?   -> Details about 'object', use 'object??' for extra details.\n\nIn [1]: import PIL\n\nIn [2]: PIL.PILLOW_VERSION,  PIL.VERSION\nOut[2]: ('2.5.1', '1.1.7')\n\nIn [3]: from PIL import Image\n\nIn [4]: ll /tmp/72.jpg\n-rw-r--r--  1 ywang  wheel  43990 Mar 13 12:37 /tmp/72.jpg\n\nIn [5]: im = Image.open('/tmp/72.jpg')\n\nIn [6]: im.layer\nOut[6]: [('\\x01', 1, 1, 0)]\n\nIn [7]: im\nOut[7]: <PIL.JpegImagePlugin.JpegImageFile image mode=L size=600x339 at 0x10AE8F1B8>\n\nIn [8]: im.format\nOut[8]: 'JPEG'\n\nIn [9]: im.save('/tmp/72-keep.jpg', 'JPEG', quality='keep')\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n<ipython-input-9-dfd9f8d20942> in <module>()\n----> 1 im.save('/tmp/72-keep.jpg', 'JPEG', quality='keep')\n\n/Users/ywang/.envs/dbi/lib/python2.7/site-packages/PIL/Image.pyc in save(self, fp, format, **params)\n   1661 \n   1662         try:\n-> 1663             save_handler(self, fp, filename)\n   1664         finally:\n   1665             # do what we can to clean up\n\n/Users/ywang/.envs/dbi/lib/python2.7/site-packages/PIL/JpegImagePlugin.pyc in _save(im, fp, filename)\n    512         if im.format != \"JPEG\":\n    513             raise ValueError(\"Cannot use 'keep' when original image is not a JPEG\")\n--> 514         subsampling = get_sampling(im)\n    515 \n    516     def validate_qtables(qtables):\n\n/Users/ywang/.envs/dbi/lib/python2.7/site-packages/PIL/JpegImagePlugin.pyc in get_sampling(im)\n    467 \n    468 def get_sampling(im):\n--> 469     sampling = im.layer[0][1:3] + im.layer[1][1:3] + im.layer[2][1:3]\n    470     return samplings.get(sampling, -1)\n    471 \n\nIndexError: list index out of range\n\nIn [10]: ll /tmp/72-keep.jpg\n-rw-r--r--  1 ywang  wheel  0 Aug 19 12:18 /tmp/72-keep.jpg\n\nIn [11]: im.save('/tmp/72-q50.jpg', 'JPEG', quality=50)\n\nIn [12]: ll /tmp/72-q50.jpg\n-rw-r--r--  1 ywang  wheel  33036 Aug 19 12:22 /tmp/72-q50.jpg\n\nIn [13]: im.save('/tmp/72-no-quality-specified.jpg', 'JPEG')\n\nIn [14]: ll /tmp/72-no-quality-specified.jpg\n-rw-r--r--  1 ywang  wheel  45262 Aug 19 12:26 /tmp/72-no-quality-specified.jpg\n\nIn [15]: exit()\n\n$ jhead /tmp/72*.jpg\nNot JPEG: /tmp/72-keep.jpg\nFile name    : /tmp/72-no-quality-specified.jpg\nFile size    : 45262 bytes\nFile date    : 2014:08:19 12:26:26\nResolution   : 500 x 282\nColor/bw     : Black and white\nJPEG Quality : 75\n\nFile name    : /tmp/72-q50.jpg\nFile size    : 33036 bytes\nFile date    : 2014:08:19 12:22:28\nResolution   : 500 x 282\nColor/bw     : Black and white\nJPEG Quality : 50\n\nFile name    : /tmp/72.jpg\nFile size    : 43990 bytes\nFile date    : 2013:03:13 12:37:40\nResolution   : 600 x 339\nColor/bw     : Black and white\nJPEG Quality : 50\n\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/857/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/835", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/835/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/835/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/835/events", "html_url": "https://github.com/python-pillow/Pillow/issues/835", "id": 39288006, "node_id": "MDU6SXNzdWUzOTI4ODAwNg==", "number": 835, "title": "ResourceWarning: unclosed file when calling save / thumbnail on an ImageFile instance (for Python 3)", "user": {"login": "kanoc", "id": 8329986, "node_id": "MDQ6VXNlcjgzMjk5ODY=", "avatar_url": "https://avatars.githubusercontent.com/u/8329986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kanoc", "html_url": "https://github.com/kanoc", "followers_url": "https://api.github.com/users/kanoc/followers", "following_url": "https://api.github.com/users/kanoc/following{/other_user}", "gists_url": "https://api.github.com/users/kanoc/gists{/gist_id}", "starred_url": "https://api.github.com/users/kanoc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kanoc/subscriptions", "organizations_url": "https://api.github.com/users/kanoc/orgs", "repos_url": "https://api.github.com/users/kanoc/repos", "events_url": "https://api.github.com/users/kanoc/events{/privacy}", "received_events_url": "https://api.github.com/users/kanoc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 493738225, "node_id": "MDU6TGFiZWw0OTM3MzgyMjU=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/File%20Closing", "name": "File Closing", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2014-08-01T13:13:25Z", "updated_at": "2017-09-29T14:36:17Z", "closed_at": "2017-09-29T14:36:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is a similar issue to #477, but the context is a bit different. Executing this code with `python -Wall` will generate a `ResourceWarning` (can be reproduced with an arbitrary image):\n\n``` python\nfrom PIL import Image\n\nwith Image.open('test_img.png') as img:\n    img.save('test_img.jpg', format='JPEG', quality=80)\n```\n\nThis code will not produce a warning:\n\n``` python\nfrom PIL import Image\n\nwith open('test_img.png', 'rb') as image_file:\n    with Image.open(image_file) as img:\n        img.save('test_img.jpg', format='JPEG', quality=80)\n```\n\nI've spent a few hours debugging this, and I think I've nailed it down. Apologies if I've misunderstood something.\n\nThe warning is caused by the line `PIL/Image.py:762`, when the file object was opened by `Image.open`:\n\n``` python\nreturn self.im.pixel_access(self.readonly)\n```\n\nLooking at he C bindings in `_imaging.c:2799` I can see that because the return value of the call above is discarded, the line `_imaging.c:2824` gets executed\n\n``` c\nPyObject_Del(self);\n```\n\nwhich will destroy the file object without closing it, thus generating a `ResourceWarning: unclosed file...` error.\n\nTo verify this, I've added a line to close the file before returning from the `load` method:\n\n``` python\nself.fp.close()\nreturn self.im.pixel_access(self.readonly)\n```\n\nWith this, no `ResourceWarning` was generated.\n\nTested with Pillow v2.5.1 and Python 3.3.2.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/831", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/831/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/831/events", "html_url": "https://github.com/python-pillow/Pillow/issues/831", "id": 39167705, "node_id": "MDU6SXNzdWUzOTE2NzcwNQ==", "number": 831, "title": "KeyError when saving Image as GIF format", "user": {"login": "Maslino", "id": 1212960, "node_id": "MDQ6VXNlcjEyMTI5NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1212960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Maslino", "html_url": "https://github.com/Maslino", "followers_url": "https://api.github.com/users/Maslino/followers", "following_url": "https://api.github.com/users/Maslino/following{/other_user}", "gists_url": "https://api.github.com/users/Maslino/gists{/gist_id}", "starred_url": "https://api.github.com/users/Maslino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Maslino/subscriptions", "organizations_url": "https://api.github.com/users/Maslino/orgs", "repos_url": "https://api.github.com/users/Maslino/repos", "events_url": "https://api.github.com/users/Maslino/events{/privacy}", "received_events_url": "https://api.github.com/users/Maslino/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-07-31T06:59:40Z", "updated_at": "2015-04-21T18:48:22Z", "closed_at": "2015-04-21T18:48:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I encounter a KeyError with Pillow 2.5.1 when saving Image as GIF format.  I tried Pillow 2.5.1, 2.5.0, 2.4.0 and 2.1.0 and finally found that only 2.1.0 worked well.\n## Environment\n\nCentOS 6.4 64bit, Python 2.7.8, Pillow 2.5.1, qrcode 5.0.1(for generating QR Code)\n## PIL setup summary\n\n```\nversion      Pillow 2.5.1\nplatform     linux2 2.7.8 (default, Jul 31 2014, 11:37:40)\n             [GCC 4.4.7 20120313 (Red Hat 4.4.7-3)]\n--------------------------------------------------------------------\n--- TKINTER support available\n--- JPEG support available\n*** OPENJPEG (JPEG2000) support not available\n--- ZLIB (PNG/ZIP) support available\n*** LIBTIFF support not available\n--- FREETYPE2 support available\n--- LITTLECMS2 support available\n*** WEBP support not available\n*** WEBPMUX support not available\n--------------------------------------------------------------------\n```\n## How to repeat\n\n``` python\nfrom qrcode import QRCode\nfrom StringIO import StringIO\nqrc = QRCode()\nqrc.add_data(\"hello world\")\nimage = qrc.make_image()\nimage.save(StringIO(), \"GIF\")\n```\n## Exception traceback\n\n``` python\nTraceback (most recent call last):\n  File \"<ipython-input-8-de5754d11441>\", line 2, in <module>\n    image.save(StringIO(), \"GIF\")\n  File \"/home/liuxiong/local/python/lib/python2.7/site-packages/qrcode/image/pil.py\", line 32, in save\n    self._img.save(stream, kind)\n  File \"/home/liuxiong/local/python/lib/python2.7/site-packages/PIL/Image.py\", line 1663, in save\n    save_handler(self, fp, filename)\n  File \"/home/liuxiong/local/python/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 262, in _save\n    header, usedPaletteColors = getheader(imOut, palette, im.encoderinfo)\n  File \"/home/liuxiong/local/python/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 427, in getheader\n    imageBytes[i] = newPositions[imageBytes[i]]\nKeyError: 192\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/820", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/820/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/820/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/820/events", "html_url": "https://github.com/python-pillow/Pillow/issues/820", "id": 38548477, "node_id": "MDU6SXNzdWUzODU0ODQ3Nw==", "number": 820, "title": "Pypy: rewrite Image.putdata in python", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-07-23T16:49:33Z", "updated_at": "2014-07-29T10:13:36Z", "closed_at": "2014-07-29T10:13:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Image.putdata has awful performance in pypy, probably due to accessing each element of a sequence from the C side. \n\nRewrite, either with the PyAccess cffi functions or by converting the array prior to entering the C code. \n\nSee profiles in #816. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/820/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/820/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/812", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/812/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/812/events", "html_url": "https://github.com/python-pillow/Pillow/issues/812", "id": 38255476, "node_id": "MDU6SXNzdWUzODI1NTQ3Ng==", "number": 812, "title": "Disable JFIF header when writing EXIF into JPEG", "user": {"login": "regen100", "id": 4144526, "node_id": "MDQ6VXNlcjQxNDQ1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4144526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/regen100", "html_url": "https://github.com/regen100", "followers_url": "https://api.github.com/users/regen100/followers", "following_url": "https://api.github.com/users/regen100/following{/other_user}", "gists_url": "https://api.github.com/users/regen100/gists{/gist_id}", "starred_url": "https://api.github.com/users/regen100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/regen100/subscriptions", "organizations_url": "https://api.github.com/users/regen100/orgs", "repos_url": "https://api.github.com/users/regen100/repos", "events_url": "https://api.github.com/users/regen100/events{/privacy}", "received_events_url": "https://api.github.com/users/regen100/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-07-20T10:51:17Z", "updated_at": "2020-05-21T09:31:51Z", "closed_at": "2020-05-21T09:31:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "When writing EXIF `img.save('img.jpg', exif=data)`, Pillow writes both APP0 (JFIF header) and APP1 (EXIF).\r\nSome applications require APP1 next to SOI, so Pillow should disable JFIF header when writing EXIF.", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/807", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/807/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/807/events", "html_url": "https://github.com/python-pillow/Pillow/issues/807", "id": 38099388, "node_id": "MDU6SXNzdWUzODA5OTM4OA==", "number": 807, "title": "CurImagePlugin and Transparency", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-07-17T16:20:04Z", "updated_at": "2015-05-13T06:18:04Z", "closed_at": "2015-05-13T06:18:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\nfrom PIL Import Image\nim = Image.open('Tests/images/deerstalker.cur')\nim.save('cur.png')\n```\n\n```\n# shows transparency\n% display Tests/images/deerstalker.cur \n#no transparency\n% display cur.png \n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/807/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/767", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/767/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/767/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/767/events", "html_url": "https://github.com/python-pillow/Pillow/issues/767", "id": 37143795, "node_id": "MDU6SXNzdWUzNzE0Mzc5NQ==", "number": 767, "title": "Hang on Image.load-ing a JPEG2000 file", "user": {"login": "tdsmith", "id": 173889, "node_id": "MDQ6VXNlcjE3Mzg4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdsmith", "html_url": "https://github.com/tdsmith", "followers_url": "https://api.github.com/users/tdsmith/followers", "following_url": "https://api.github.com/users/tdsmith/following{/other_user}", "gists_url": "https://api.github.com/users/tdsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdsmith/subscriptions", "organizations_url": "https://api.github.com/users/tdsmith/orgs", "repos_url": "https://api.github.com/users/tdsmith/repos", "events_url": "https://api.github.com/users/tdsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/tdsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2014-07-04T05:59:41Z", "updated_at": "2016-07-01T19:58:10Z", "closed_at": "2016-06-30T15:57:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having trouble with JPEG2000 on OS X 10.9.4. I noticed that the jpeg2000 tests in Tests/ were not returning. Minimally, this code:\n\n```\nfrom PIL import Image\nim = Image.open('pillow3.icns')\nim.load()\n```\n\n(using pillow3.icns from the test images) will never return, building against either openjpeg 2.0.0 or openjpeg 2.1.0. When I interrupt with Ctrl+C, I see:\n\n```\nFile \"/usr/local/lib/python2.7/site-packages/PIL/IcnsImagePlugin.py\", line 275, in load\n  im.load()\nFile \"/usr/local/lib/python2.7/site-packages/PIL/Jpeg2KImagePlugin.py\", line 204, in load\n  ImageFile.ImageFile.load(self)\nFile \"/usr/local/lib/python2.7/site-packages/PIL/ImageFile.py\", line 221, in load\n  n, e = d.decode(b)\nKeyboardInterrupt\n```\n\nThe non-jpeg2000 tests in Tests/ succeed and selftest.py works.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/767/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/765", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/765/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/765/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/765/events", "html_url": "https://github.com/python-pillow/Pillow/pull/765", "id": 37017951, "node_id": "MDExOlB1bGxSZXF1ZXN0MTc5MDgxNzA=", "number": 765, "title": "Fix dispose calculations for animated GIFs", "user": {"login": "larsjsol", "id": 669767, "node_id": "MDQ6VXNlcjY2OTc2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/669767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsjsol", "html_url": "https://github.com/larsjsol", "followers_url": "https://api.github.com/users/larsjsol/followers", "following_url": "https://api.github.com/users/larsjsol/following{/other_user}", "gists_url": "https://api.github.com/users/larsjsol/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsjsol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsjsol/subscriptions", "organizations_url": "https://api.github.com/users/larsjsol/orgs", "repos_url": "https://api.github.com/users/larsjsol/repos", "events_url": "https://api.github.com/users/larsjsol/events{/privacy}", "received_events_url": "https://api.github.com/users/larsjsol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/7", "html_url": "https://github.com/python-pillow/Pillow/milestone/7", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/7/labels", "id": 524554, "node_id": "MDk6TWlsZXN0b25lNTI0NTU0", "number": 7, "title": "2.6.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2014-01-01T21:38:18Z", "updated_at": "2014-10-26T09:55:42Z", "due_on": "2014-10-01T07:00:00Z", "closed_at": "2014-10-26T09:53:36Z"}, "comments": 10, "created_at": "2014-07-02T19:53:53Z", "updated_at": "2014-07-07T20:04:54Z", "closed_at": "2014-07-07T20:04:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/765", "html_url": "https://github.com/python-pillow/Pillow/pull/765", "diff_url": "https://github.com/python-pillow/Pillow/pull/765.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/765.patch", "merged_at": "2014-07-07T20:04:38Z"}, "body": "- use correct dispose mode\n- only apply the dispose on extent of the previous frame\n- handle transparency between frames (fixes issue #634)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/765/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/750", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/750/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/750/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/750/events", "html_url": "https://github.com/python-pillow/Pillow/issues/750", "id": 36761519, "node_id": "MDU6SXNzdWUzNjc2MTUxOQ==", "number": 750, "title": "test_shell_injection.TestShellInjection errors", "user": {"login": "cgohlke", "id": 483428, "node_id": "MDQ6VXNlcjQ4MzQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/483428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgohlke", "html_url": "https://github.com/cgohlke", "followers_url": "https://api.github.com/users/cgohlke/followers", "following_url": "https://api.github.com/users/cgohlke/following{/other_user}", "gists_url": "https://api.github.com/users/cgohlke/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgohlke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgohlke/subscriptions", "organizations_url": "https://api.github.com/users/cgohlke/orgs", "repos_url": "https://api.github.com/users/cgohlke/repos", "events_url": "https://api.github.com/users/cgohlke/events{/privacy}", "received_events_url": "https://api.github.com/users/cgohlke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 8, "created_at": "2014-06-30T00:02:51Z", "updated_at": "2014-07-04T05:39:56Z", "closed_at": "2014-07-01T06:27:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I get the following `test_shell_injection.TestShellInjection` errors on Windows using `djpeg` and `cjpeg` executables from `jpeg-9a`:\n\n```\ntest_load_djpeg_filename (test_shell_injection.TestShellInjection) ... djpeg: must name one input and one output file\nusage: djpeg [switches] inputfile outputfile\nSwitches (names may be abbreviated):\n  -colors N      Reduce image to no more than N colors\n  -fast          Fast, low-quality processing\n  -grayscale     Force grayscale output\n  -scale M/N     Scale output image by fraction M/N, eg, 1/8\n  -bmp           Select BMP output format (Windows style)\n  -gif           Select GIF output format\n  -os2           Select BMP output format (OS/2 style)\n  -pnm           Select PBMPLUS (PPM/PGM) output format (default)\n  -targa         Select Targa output format\nSwitches for advanced users:\n  -dct int       Use integer DCT method (default)\n  -dct fast      Use fast integer DCT (less accurate)\n  -dct float     Use floating-point DCT method\n  -dither fs     Use F-S dithering (default)\n  -dither none   Don't use dithering in quantization\n  -dither ordered  Use ordered dither (medium speed, quality)\n  -map FILE      Map to colors used in named image file\n  -nosmooth      Don't use high-quality upsampling\n  -onepass       Use 1-pass quantization (fast, low quality)\n  -maxmemory N   Maximum memory to use (in kbytes)\n  -outfile name  Specify name for output file\n  -verbose  or  -debug   Emit debug output\nERROR\ntest_save_cjpeg_filename (test_shell_injection.TestShellInjection) ... cjpeg: must name one input and one output file\nusage: cjpeg [switches] inputfile outputfile\nSwitches (names may be abbreviated):\n  -quality N[,...]   Compression quality (0..100; 5-95 is useful range)\n  -grayscale     Create monochrome JPEG file\n  -rgb           Create RGB JPEG file\n  -optimize      Optimize Huffman table (smaller file, but slow compression)\n  -progressive   Create progressive JPEG file\n  -scale M/N     Scale image by fraction M/N, eg, 1/2\n  -targa         Input file is Targa format (usually not needed)\nSwitches for advanced users:\n  -arithmetic    Use arithmetic coding\n  -block N       DCT block size (1..16; default is 8)\n  -rgb1          Create RGB JPEG file with reversible color transform\n  -bgycc         Create big gamut YCC JPEG file\n  -dct int       Use integer DCT method (default)\n  -dct fast      Use fast integer DCT (less accurate)\n  -dct float     Use floating-point DCT method\n  -nosmooth      Don't use high-quality downsampling\n  -restart N     Set restart interval in rows, or in blocks with B\n  -smooth N      Smooth dithered input (N=1..100 is strength)\n  -maxmemory N   Maximum memory to use (in kbytes)\n  -outfile name  Specify name for output file\n  -verbose  or  -debug   Emit debug output\nSwitches for wizards:\n  -baseline      Force baseline quantization tables\n  -qtables file  Use quantization tables given in file\n  -qslots N[,...]    Set component quantization tables\n  -sample HxV[,...]  Set component sampling factors\n  -scans file    Create multi-scan JPEG per script file\nERROR\ntest_save_netpbm_filename_bmp_mode (test_shell_injection.TestShellInjection) ... SKIP: netpbm not available\ntest_save_netpbm_filename_l_mode (test_shell_injection.TestShellInjection) ... SKIP: netpbm not available\n\n======================================================================\nERROR: test_load_djpeg (test_file_jpeg.TestFileJpeg)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"D:\\Build\\Pillow\\Pillow-git\\Tests\\test_file_jpeg.py\", line 282, in test_load_djpeg\n    img.load_djpeg()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\JpegImagePlugin.py\", line 364, in load_djpeg\n    subprocess.check_call([\"djpeg\", self.filename], stdout=f)\n  File \"X:\\Python34\\lib\\subprocess.py\", line 561, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['djpeg', 'Tests/images/lena.jpg']' returned non-zero exit status 1\n\n======================================================================\nERROR: test_save_cjpeg (test_file_jpeg.TestFileJpeg)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"D:\\Build\\Pillow\\Pillow-git\\Tests\\test_file_jpeg.py\", line 290, in test_save_cjpeg\n    JpegImagePlugin._save_cjpeg(img, 0, tempfile)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\JpegImagePlugin.py\", line 610, in _save_cjpeg\n    subprocess.check_call([\"cjpeg\", tempfile], stdout=f)\n  File \"X:\\Python34\\lib\\subprocess.py\", line 561, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['cjpeg', 'C:\\\\Users\\\\gohlke\\\\AppData\\\\Local\\\\Temp\\\\tmp3zfmx93y']' returned non-zero exit status 1\n\n======================================================================\nERROR: test_load_djpeg_filename (test_shell_injection.TestShellInjection)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"D:\\Build\\Pillow\\Pillow-git\\Tests\\test_shell_injection.py\", line 35, in test_load_djpeg_filename\n    im.load_djpeg()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\JpegImagePlugin.py\", line 364, in load_djpeg\n    subprocess.check_call([\"djpeg\", self.filename], stdout=f)\n  File \"X:\\Python34\\lib\\subprocess.py\", line 561, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['djpeg', \"C:\\\\Users\\\\gohlke\\\\AppData\\\\Local\\\\Temp\\\\pillow-tests\\\\temptests-3.4-script_121_';\"]' returned non-zero exit status 1\n\n======================================================================\nERROR: test_save_cjpeg_filename (test_shell_injection.TestShellInjection)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"D:\\Build\\Pillow\\Pillow-git\\Tests\\test_shell_injection.py\", line 40, in test_save_cjpeg_filename\n    self.assert_save_filename_check(im, JpegImagePlugin._save_cjpeg)\n  File \"D:\\Build\\Pillow\\Pillow-git\\Tests\\test_shell_injection.py\", line 24, in assert_save_filename_check\n    save_func(src_img, 0, dest_file)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\JpegImagePlugin.py\", line 610, in _save_cjpeg\n    subprocess.check_call([\"cjpeg\", tempfile], stdout=f)\n  File \"X:\\Python34\\lib\\subprocess.py\", line 561, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['cjpeg', 'C:\\\\Users\\\\gohlke\\\\AppData\\\\Local\\\\Temp\\\\tmp3f3_qyhv']' returned non-zero exit status 1\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/740", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/740/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/740/events", "html_url": "https://github.com/python-pillow/Pillow/issues/740", "id": 36709962, "node_id": "MDU6SXNzdWUzNjcwOTk2Mg==", "number": 740, "title": "Pyroma reports \"I couldnt' find any package data\"", "user": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 8, "created_at": "2014-06-27T22:48:26Z", "updated_at": "2014-07-01T15:53:25Z", "closed_at": "2014-06-28T19:03:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm not sure when this started, or why it's happening but `pyroma` seems to be reporting it can't find any packages to evaluate e.g.\n\n```\n\naclark@Alexs-MacBook-Air:~/Developer/Pillow/ > pyroma .\n------------------------------\nChecking .\nFound nothing\n------------------------------\nI couldn't find any package data\n------------------------------\nFinal rating: 0/10\nThis cheese seems to contain no dairy products\n------------------------------\n```\n\nNormally it outputs:\n\n```\n\n# > pyroma .\n# ------------------------------\n# Checking .\n# Found Pillow\n# ------------------------------\n# Final rating: 10/10\n# Your cheese is so fresh most people think it's a cream: Mascarpone\n# ------------------------------\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/740/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/702", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/702/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/702/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/702/events", "html_url": "https://github.com/python-pillow/Pillow/issues/702", "id": 36023231, "node_id": "MDU6SXNzdWUzNjAyMzIzMQ==", "number": 702, "title": "Undocumented implicit \"RGBA\" -> \"RBGa\" -> \"RGBA\" looses precision without a reason", "user": {"login": "sly010", "id": 234441, "node_id": "MDQ6VXNlcjIzNDQ0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/234441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sly010", "html_url": "https://github.com/sly010", "followers_url": "https://api.github.com/users/sly010/followers", "following_url": "https://api.github.com/users/sly010/following{/other_user}", "gists_url": "https://api.github.com/users/sly010/gists{/gist_id}", "starred_url": "https://api.github.com/users/sly010/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sly010/subscriptions", "organizations_url": "https://api.github.com/users/sly010/orgs", "repos_url": "https://api.github.com/users/sly010/repos", "events_url": "https://api.github.com/users/sly010/events{/privacy}", "received_events_url": "https://api.github.com/users/sly010/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/7", "html_url": "https://github.com/python-pillow/Pillow/milestone/7", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/7/labels", "id": 524554, "node_id": "MDk6TWlsZXN0b25lNTI0NTU0", "number": 7, "title": "2.6.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2014-01-01T21:38:18Z", "updated_at": "2014-10-26T09:55:42Z", "due_on": "2014-10-01T07:00:00Z", "closed_at": "2014-10-26T09:53:36Z"}, "comments": 3, "created_at": "2014-06-18T20:16:07Z", "updated_at": "2014-07-07T18:59:51Z", "closed_at": "2014-07-07T18:59:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Lines like\n\n```\nif self.mode == 'RGBA':\n      return self.convert('RGBa').transform(\n           size, method, data, resample, fill).convert('RGBA')\n```\n\nreduce precision of the resulting color layers as a side effect.\nAs long as the resulting image gets saved right away, the data loss is not visible (it's still there though), but if the alpha layer later gets worked on (removed or modified), it can cause surprises.\n\nHere is a snippet that demonstrates the problem.\n\n```\nfor i in range(0,255):\n    print Image.new(\"RGBA\", (10,10), (200,200,200,i)).transform((10,10), Image.AFFINE, [1,0,0,0,1,0,0,0,1], Image.NEAREST).load()[0,0]\n```\n\nI understand the \"RGBa\" mode `theoretically` saves some multiplications when doing lots of blending, but does it actually do anything in the case of rotate() / transform()?\nShouldn't the developer be able to decide between speed and accuracy here (for example by doing the conversion explicitly before calling transform())?\n\nThis also breaks backward compatibility with PIL btw.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/702/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/701", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/701/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/701/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/701/events", "html_url": "https://github.com/python-pillow/Pillow/issues/701", "id": 35797091, "node_id": "MDU6SXNzdWUzNTc5NzA5MQ==", "number": 701, "title": "EPSImageFile does not handle Ghostscript 9.10 responses correctly", "user": {"login": "euangoddard", "id": 412672, "node_id": "MDQ6VXNlcjQxMjY3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/412672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euangoddard", "html_url": "https://github.com/euangoddard", "followers_url": "https://api.github.com/users/euangoddard/followers", "following_url": "https://api.github.com/users/euangoddard/following{/other_user}", "gists_url": "https://api.github.com/users/euangoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/euangoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euangoddard/subscriptions", "organizations_url": "https://api.github.com/users/euangoddard/orgs", "repos_url": "https://api.github.com/users/euangoddard/repos", "events_url": "https://api.github.com/users/euangoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/euangoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-06-16T13:43:54Z", "updated_at": "2016-01-22T12:00:26Z", "closed_at": "2016-01-22T12:00:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to open an EPS file, I get an error:\n\n``` python\n>>> from PIL import Image\n>>> image = Image.open('/home/euan/Desktop/U.S.A Flags_Sample.eps')\n>>> image.load()\nGPL Ghostscript 9.10: Unrecoverable error, exit code 1\n```\n\nThe EPS file seems fine and moreover, if I skip the check [here](https://github.com/python-pillow/Pillow/blob/master/PIL/EpsImagePlugin.py#L134) the image is correctly loaded and can be manipulated.\n\nThis suggests that exit code 1 is a success from GhostScript and PIL could proceed processing.\n\nI am using GhostScript 9.10 on 64-bit Ubuntu 14.04, running Pillow 2.4.0\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/701/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/692", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/692/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/692/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/692/events", "html_url": "https://github.com/python-pillow/Pillow/issues/692", "id": 35023298, "node_id": "MDU6SXNzdWUzNTAyMzI5OA==", "number": 692, "title": "ld: file not found: python.exe at OSX yosemite", "user": {"login": "exherb", "id": 65154, "node_id": "MDQ6VXNlcjY1MTU0", "avatar_url": "https://avatars.githubusercontent.com/u/65154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/exherb", "html_url": "https://github.com/exherb", "followers_url": "https://api.github.com/users/exherb/followers", "following_url": "https://api.github.com/users/exherb/following{/other_user}", "gists_url": "https://api.github.com/users/exherb/gists{/gist_id}", "starred_url": "https://api.github.com/users/exherb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/exherb/subscriptions", "organizations_url": "https://api.github.com/users/exherb/orgs", "repos_url": "https://api.github.com/users/exherb/repos", "events_url": "https://api.github.com/users/exherb/events{/privacy}", "received_events_url": "https://api.github.com/users/exherb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2014-06-05T02:50:28Z", "updated_at": "2014-06-11T07:04:09Z", "closed_at": "2014-06-11T07:04:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "OSX 10.10 Yosemite\nPyenv 2.7.7\n\n``` bash\nld: file not found: python.exe\n\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nerror: command 'gcc' failed with exit status 1\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/671", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/671/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/671/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/671/events", "html_url": "https://github.com/python-pillow/Pillow/issues/671", "id": 34078071, "node_id": "MDU6SXNzdWUzNDA3ODA3MQ==", "number": 671, "title": "OJPEGPostDecode: Assertion `sp->libjpeg_session_active!=0' failed", "user": {"login": "alexkiro", "id": 1538458, "node_id": "MDQ6VXNlcjE1Mzg0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1538458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexkiro", "html_url": "https://github.com/alexkiro", "followers_url": "https://api.github.com/users/alexkiro/followers", "following_url": "https://api.github.com/users/alexkiro/following{/other_user}", "gists_url": "https://api.github.com/users/alexkiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexkiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexkiro/subscriptions", "organizations_url": "https://api.github.com/users/alexkiro/orgs", "repos_url": "https://api.github.com/users/alexkiro/repos", "events_url": "https://api.github.com/users/alexkiro/events{/privacy}", "received_events_url": "https://api.github.com/users/alexkiro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}, {"id": 242311159, "node_id": "MDU6TGFiZWwyNDIzMTExNTk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Linux", "name": "Linux", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 30, "created_at": "2014-05-22T12:49:28Z", "updated_at": "2023-03-14T21:28:57Z", "closed_at": "2019-03-11T19:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "While trying to save a, what seems to be broken, TIFF image as PPM the python interpreter crashes with the following error:\r\n\r\n```python\r\n>>> from PIL import Image\r\n>>> image = Image.open(open(\"./bad.tiff\"))\r\n>>> image.save(open(\"/tmp/bad.ppm\", \"wb\"), \"PPM\")\r\npython: tif_ojpeg.c:848: OJPEGPostDecode: Assertion `sp->libjpeg_session_active!=0'    failed.\r\nAborted\r\n```\r\n\r\nThis is happening with Python2.7.6 and Pillow2.4.0 running on Debian 6. \r\n\r\nPlease let me know if I can provide you with any more information.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/671/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/671/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/663", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/663/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/663/events", "html_url": "https://github.com/python-pillow/Pillow/issues/663", "id": 33563956, "node_id": "MDU6SXNzdWUzMzU2Mzk1Ng==", "number": 663, "title": "import PySide.QtGui + ImageQt -> crash on end of program", "user": {"login": "moeb", "id": 3752503, "node_id": "MDQ6VXNlcjM3NTI1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/3752503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moeb", "html_url": "https://github.com/moeb", "followers_url": "https://api.github.com/users/moeb/followers", "following_url": "https://api.github.com/users/moeb/following{/other_user}", "gists_url": "https://api.github.com/users/moeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/moeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moeb/subscriptions", "organizations_url": "https://api.github.com/users/moeb/orgs", "repos_url": "https://api.github.com/users/moeb/repos", "events_url": "https://api.github.com/users/moeb/events{/privacy}", "received_events_url": "https://api.github.com/users/moeb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 7, "created_at": "2014-05-15T08:23:13Z", "updated_at": "2015-07-04T10:52:38Z", "closed_at": "2015-07-04T10:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get a Backtrace with alternating errors when importing PySide.QtGui and ImageQt.\nSome errors to get an impression:\n\n```\nError in `python': double free or corruption (out)\nError in `python': free(): invalid pointer\nError in `python': munmap_chunk(): invalid pointer\n```\n\nsystem information:\nrunning in a virtual env on linux 64bit\nPython 3.4.0\nPillow 2.4.0\nPySide 1.2.2\n\nrun this to repeat\n\n```\n#!/usr/bin/env python\nimport sys\nimport PySide\nsys.modules['PyQt4'] = PySide\n\nimport PySide.QtGui\nimport PIL.ImageQt\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/660", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/660/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/660/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/660/events", "html_url": "https://github.com/python-pillow/Pillow/issues/660", "id": 33377958, "node_id": "MDU6SXNzdWUzMzM3Nzk1OA==", "number": 660, "title": "Save custom TIFF tags in LZW-compressed TIFFs", "user": {"login": "jondo", "id": 21648, "node_id": "MDQ6VXNlcjIxNjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/21648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jondo", "html_url": "https://github.com/jondo", "followers_url": "https://api.github.com/users/jondo/followers", "following_url": "https://api.github.com/users/jondo/following{/other_user}", "gists_url": "https://api.github.com/users/jondo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jondo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jondo/subscriptions", "organizations_url": "https://api.github.com/users/jondo/orgs", "repos_url": "https://api.github.com/users/jondo/repos", "events_url": "https://api.github.com/users/jondo/events{/privacy}", "received_events_url": "https://api.github.com/users/jondo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2014-05-13T08:31:17Z", "updated_at": "2018-12-26T11:07:47Z", "closed_at": "2018-12-26T11:07:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I understand correctly, the recent changes (#369) have not made it possible to write custom TIFF tags. I would like to do the following:\r\n\r\n```python\r\ninfo = TiffImagePlugin.ImageFileDirectory()\r\nCustomTagId = 37000\r\ninfo[CustomTagId] = 6\r\ninfo.tagtype[CustomTagId] = 3 # 'short' according to TiffTags.TYPES\r\n\r\nimg.save(pathname, tiffinfo = info)\r\n```\r\n\r\nThis corresponds to \"Defining Application Tags\" in http://www.remotesensing.org/libtiff/addingtags.html.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/659", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/659/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/659/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/659/events", "html_url": "https://github.com/python-pillow/Pillow/issues/659", "id": 33373969, "node_id": "MDU6SXNzdWUzMzM3Mzk2OQ==", "number": 659, "title": "Document saving LZW-compressed TIFF files", "user": {"login": "jondo", "id": 21648, "node_id": "MDQ6VXNlcjIxNjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/21648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jondo", "html_url": "https://github.com/jondo", "followers_url": "https://api.github.com/users/jondo/followers", "following_url": "https://api.github.com/users/jondo/following{/other_user}", "gists_url": "https://api.github.com/users/jondo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jondo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jondo/subscriptions", "organizations_url": "https://api.github.com/users/jondo/orgs", "repos_url": "https://api.github.com/users/jondo/repos", "events_url": "https://api.github.com/users/jondo/events{/privacy}", "received_events_url": "https://api.github.com/users/jondo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-05-13T07:21:05Z", "updated_at": "2014-05-26T11:14:40Z", "closed_at": "2014-05-24T12:16:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "This [works](http://stackoverflow.com/a/23612127/1389680), but it is missing [in the docs](http://pillow.readthedocs.org/en/latest/handbook/image-file-formats.html#saving-tiff-images).\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/658", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/658/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/658/events", "html_url": "https://github.com/python-pillow/Pillow/issues/658", "id": 33303306, "node_id": "MDU6SXNzdWUzMzMwMzMwNg==", "number": 658, "title": "ImageFont.getsize() not giving correct value", "user": {"login": "ChinmayJindal", "id": 7557556, "node_id": "MDQ6VXNlcjc1NTc1NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7557556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChinmayJindal", "html_url": "https://github.com/ChinmayJindal", "followers_url": "https://api.github.com/users/ChinmayJindal/followers", "following_url": "https://api.github.com/users/ChinmayJindal/following{/other_user}", "gists_url": "https://api.github.com/users/ChinmayJindal/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChinmayJindal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChinmayJindal/subscriptions", "organizations_url": "https://api.github.com/users/ChinmayJindal/orgs", "repos_url": "https://api.github.com/users/ChinmayJindal/repos", "events_url": "https://api.github.com/users/ChinmayJindal/events{/privacy}", "received_events_url": "https://api.github.com/users/ChinmayJindal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2014-05-12T12:30:54Z", "updated_at": "2014-07-23T17:52:34Z", "closed_at": "2014-07-23T17:52:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "After updating to my python version to 2.7.6, i started getting this error. ImageFont.getsize() function returns wrong value for the height in (w,h) tuple whereas the value of width is still correct.\nIts working fine for same set of inputs with my earlier version of python on another PC.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/658/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/646", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/646/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/646/events", "html_url": "https://github.com/python-pillow/Pillow/issues/646", "id": 32846541, "node_id": "MDU6SXNzdWUzMjg0NjU0MQ==", "number": 646, "title": "SystemError: unknown raw mode after a lot of draws (both text and lines)", "user": {"login": "chas11man", "id": 2525094, "node_id": "MDQ6VXNlcjI1MjUwOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2525094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chas11man", "html_url": "https://github.com/chas11man", "followers_url": "https://api.github.com/users/chas11man/followers", "following_url": "https://api.github.com/users/chas11man/following{/other_user}", "gists_url": "https://api.github.com/users/chas11man/gists{/gist_id}", "starred_url": "https://api.github.com/users/chas11man/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chas11man/subscriptions", "organizations_url": "https://api.github.com/users/chas11man/orgs", "repos_url": "https://api.github.com/users/chas11man/repos", "events_url": "https://api.github.com/users/chas11man/events{/privacy}", "received_events_url": "https://api.github.com/users/chas11man/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 11, "created_at": "2014-05-05T21:18:01Z", "updated_at": "2021-03-16T09:00:17Z", "closed_at": "2021-03-16T06:20:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am taking a large white gif and drawing a lot of lines and texts onto it of different sizes and fonts.  It works fine up to a certain point, but one too many draws causes the unknown raw mode error on save.\n\n```\nFile \"draw/card.py\", line 13, in save\n  self.image.save(os.path.join(os.path.dirname(os.path.abspath(__file__)), '%s.gif' % file_name), 'gif')\nFile \".../local/lib/python2.7/site-packages/PIL/Image.py\", line 1564, in save\n  save_handler(self, fp, filename)\nFile \".../local/lib/python2.7/site-packages/PIL/GifImagePlugin.py\", line 317, in _save\n  ImageFile._save(imOut, fp, [(\"gif\", (0,0)+im.size, 0, rawmode)])\nFile \".../local/lib/python2.7/site-packages/PIL/ImageFile.py\", line 473, in _save\n  e = Image._getencoder(im.mode, e, a, im.encoderconfig)\nFile \".../local/lib/python2.7/site-packages/PIL/Image.py\", line 413, in _getencoder\n  return encoder(mode, *args + extra)\nSystemError: unknown raw mode\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/644", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/644/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/644/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/644/events", "html_url": "https://github.com/python-pillow/Pillow/issues/644", "id": 32543077, "node_id": "MDU6SXNzdWUzMjU0MzA3Nw==", "number": 644, "title": "ImageDraw.textsize() returns incorrect textsize for truetype fonts", "user": {"login": "tk0miya", "id": 748828, "node_id": "MDQ6VXNlcjc0ODgyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/748828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tk0miya", "html_url": "https://github.com/tk0miya", "followers_url": "https://api.github.com/users/tk0miya/followers", "following_url": "https://api.github.com/users/tk0miya/following{/other_user}", "gists_url": "https://api.github.com/users/tk0miya/gists{/gist_id}", "starred_url": "https://api.github.com/users/tk0miya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tk0miya/subscriptions", "organizations_url": "https://api.github.com/users/tk0miya/orgs", "repos_url": "https://api.github.com/users/tk0miya/repos", "events_url": "https://api.github.com/users/tk0miya/events{/privacy}", "received_events_url": "https://api.github.com/users/tk0miya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2014-04-30T15:08:32Z", "updated_at": "2020-02-28T13:46:19Z", "closed_at": "2014-07-08T09:14:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`ImageDraw.textsize()` does not return correct `textsize` for truetype fonts.\r\nThe return value does not include offset.\r\n\r\nSo I have to adjust offset using `FreeTypeFont.getoffset()` to get correct `textsize`.\r\n\r\n```python\r\nfrom PIL import Image, ImageDraw, ImageFont\r\n\r\nimage = Image.new('RGB', (512, 256), (255, 255, 255))\r\ndrawer = ImageDraw.Draw(image)\r\nfont = ImageFont.truetype('/usr/share/fonts/truetype/freefont/FreeSerif.ttf', 32)\r\n\r\n# drawing text\r\nSTRING = 'Hello, python language!'\r\ndrawer.text((10, 10), STRING, fill='black', font=font)\r\n\r\n# drawing rectangle surrounding text\r\nsize = drawer.textsize(STRING, font=font)\r\noffset = font.getoffset(STRING)\r\ndrawer.rectangle((10, 10, 10 + size[0] + offset[0], 10 + size[1] + offset[1]), outline='black')\r\n\r\nimage.save('example.png', 'PNG')\r\n```\r\n\r\nis this correct way?\r\n\r\nAnd, I think `ImageDraw.textsize()` should return `textsize` including offset.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/640", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/640/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/640/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/640/events", "html_url": "https://github.com/python-pillow/Pillow/issues/640", "id": 32337231, "node_id": "MDU6SXNzdWUzMjMzNzIzMQ==", "number": 640, "title": "Intermittent segfaults on PyPy with coverage", "user": {"login": "hugovk", "id": 1324225, "node_id": "MDQ6VXNlcjEzMjQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1324225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugovk", "html_url": "https://github.com/hugovk", "followers_url": "https://api.github.com/users/hugovk/followers", "following_url": "https://api.github.com/users/hugovk/following{/other_user}", "gists_url": "https://api.github.com/users/hugovk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugovk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugovk/subscriptions", "organizations_url": "https://api.github.com/users/hugovk/orgs", "repos_url": "https://api.github.com/users/hugovk/repos", "events_url": "https://api.github.com/users/hugovk/events{/privacy}", "received_events_url": "https://api.github.com/users/hugovk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2014-04-28T07:33:41Z", "updated_at": "2014-07-30T16:41:13Z", "closed_at": "2014-07-30T16:41:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The PyPy job on Travis CI sometimes fails due to segmentation faults.\n\nFor example: https://travis-ci.org/python-imaging/Pillow/jobs/23831639\n\n> running test_file_icns ...\n> === error 35584\n> Segmentation fault\n\nSometimes all tests will pass, sometimes one will fail, sometimes many will fail. You often get a different result re-running the same build.\n\nComment from @wiredfool:\n\n> The intermittent segfault is most likely a use after free bug in the C layer. Depending on the state of the garbage collection, we may or may not be accessing the memory after it's been collected. Pypy tends to exercise that sort of bug more often because it's a different GC implementation. I've been tripping over that some in the multiprocessing PR.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/640/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/640/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/634", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/634/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/634/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/634/events", "html_url": "https://github.com/python-pillow/Pillow/issues/634", "id": 31825190, "node_id": "MDU6SXNzdWUzMTgyNTE5MA==", "number": 634, "title": "Animated GIF is incorrect when displaying any frame after the first", "user": {"login": "bpeck", "id": 1273943, "node_id": "MDQ6VXNlcjEyNzM5NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1273943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpeck", "html_url": "https://github.com/bpeck", "followers_url": "https://api.github.com/users/bpeck/followers", "following_url": "https://api.github.com/users/bpeck/following{/other_user}", "gists_url": "https://api.github.com/users/bpeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpeck/subscriptions", "organizations_url": "https://api.github.com/users/bpeck/orgs", "repos_url": "https://api.github.com/users/bpeck/repos", "events_url": "https://api.github.com/users/bpeck/events{/privacy}", "received_events_url": "https://api.github.com/users/bpeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2014-04-18T21:12:47Z", "updated_at": "2014-07-07T20:05:28Z", "closed_at": "2014-07-07T20:05:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I believe this is a dupe of #312 , but I wanted to make a new issue just so my current experience with it it could be tracked. Sorry if that is spammy of me.\n\nI'm on OSX 10.9, and after cloning and building the latest version of Pillow from github last night, I am having issues with properly displaying any frame of an animated GIF beyond the first frame. My test image is an animated GIF that displays correctly in my web browser and in Finder's preview, but if I load the GIF into a PIL.Image and call show() on any frame besides the first one, I get a corrupted image.\n\nI tried a couple workarounds I've seen around involving copying the palette over to subsequent frames, but they don't seem to be working for me. See below for repro code.\n\nin the following test code, I am using \nhttps://dl.dropboxusercontent.com/u/14459075/test.gif\nas my test.gif\n\nimport PIL\nimport PIL.Image\ni = PIL.Image.open('test.gif')\ni.show() # correct image displays\ni.seek(i.tell() + 1)\ni.show() # image is incorrect\n\n![screen shot 2014-04-17 at 9 45 57 pm](https://cloud.githubusercontent.com/assets/1273943/2739561/6594654a-c6b4-11e3-8a58-cdfb59a67b4b.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/631", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/631/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/631/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/631/events", "html_url": "https://github.com/python-pillow/Pillow/issues/631", "id": 31773913, "node_id": "MDU6SXNzdWUzMTc3MzkxMw==", "number": 631, "title": "UnboundLocalError: local variable 'new' referenced before assignment", "user": {"login": "imbolc", "id": 747996, "node_id": "MDQ6VXNlcjc0Nzk5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/747996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imbolc", "html_url": "https://github.com/imbolc", "followers_url": "https://api.github.com/users/imbolc/followers", "following_url": "https://api.github.com/users/imbolc/following{/other_user}", "gists_url": "https://api.github.com/users/imbolc/gists{/gist_id}", "starred_url": "https://api.github.com/users/imbolc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imbolc/subscriptions", "organizations_url": "https://api.github.com/users/imbolc/orgs", "repos_url": "https://api.github.com/users/imbolc/repos", "events_url": "https://api.github.com/users/imbolc/events{/privacy}", "received_events_url": "https://api.github.com/users/imbolc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 2, "created_at": "2014-04-18T00:24:44Z", "updated_at": "2014-04-18T04:03:11Z", "closed_at": "2014-04-18T04:03:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi :) It looks like a bug (I use the last pypi release of pillow):\n\n```\nPython 3.4.0 (default, Apr 10 2014, 06:35:05) \n[GCC 4.7.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import io\n>>> import requests\n>>> from PIL import Image\n>>> url = 'http://upload.wikimedia.org/wikipedia/commons/8/8b/Verhnesadove_s.png'\n>>> r = requests.get(url)\n>>> assert r.status_code == 200\n>>> im = Image.open(io.BytesIO(r.content))\n>>> im.convert('RGB')\n/home/imbolc/.pyenv/versions/3.4.0/lib/python3.4/site-packages/PIL/Image.py:755: UserWarning: Palette images with Transparency expressed  in bytes should be converted to RGBA images\n  ' in bytes should be converted to RGBA images')\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/imbolc/.pyenv/versions/3.4.0/lib/python3.4/site-packages/PIL/Image.py\", line 810, in convert\n    del(new.info['transparency'])\nUnboundLocalError: local variable 'new' referenced before assignment\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/631/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/623", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/623/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/623/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/623/events", "html_url": "https://github.com/python-pillow/Pillow/issues/623", "id": 31489270, "node_id": "MDU6SXNzdWUzMTQ4OTI3MA==", "number": 623, "title": "Build doesn't detect/support libopenjpeg v.2.1.3", "user": {"login": "ccazabon", "id": 7227064, "node_id": "MDQ6VXNlcjcyMjcwNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7227064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccazabon", "html_url": "https://github.com/ccazabon", "followers_url": "https://api.github.com/users/ccazabon/followers", "following_url": "https://api.github.com/users/ccazabon/following{/other_user}", "gists_url": "https://api.github.com/users/ccazabon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccazabon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccazabon/subscriptions", "organizations_url": "https://api.github.com/users/ccazabon/orgs", "repos_url": "https://api.github.com/users/ccazabon/repos", "events_url": "https://api.github.com/users/ccazabon/events{/privacy}", "received_events_url": "https://api.github.com/users/ccazabon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 14, "created_at": "2014-04-14T18:48:43Z", "updated_at": "2016-06-08T11:48:08Z", "closed_at": "2014-06-22T20:04:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "The docs for Pillow v.2.4.0 say \"Pillow 2.4 requires openjpeg 2.0.0\", but the build process says OPENJPEG/JPEG2000 support is not available when libopenjpeg v.2.1.3 is installed.  I'm not sure if it's _supposed_ to support newer 2.x versions or not, but it appears not to.\n\nThis happens on the new Ubuntu \"Trusty Tahr\" 2014.04, for which v.2.1.3 is the only version of libopenjpeg shipped.  I have the main package, the -dev package, and the openjpeg-tools package installed.\n\nP.S.  Thanks for maintaining Pillow!\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/597", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/597/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/597/events", "html_url": "https://github.com/python-pillow/Pillow/issues/597", "id": 30698550, "node_id": "MDU6SXNzdWUzMDY5ODU1MA==", "number": 597, "title": "Unicode rendering error in ImageDraw module", "user": {"login": "ensv", "id": 3463351, "node_id": "MDQ6VXNlcjM0NjMzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3463351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ensv", "html_url": "https://github.com/ensv", "followers_url": "https://api.github.com/users/ensv/followers", "following_url": "https://api.github.com/users/ensv/following{/other_user}", "gists_url": "https://api.github.com/users/ensv/gists{/gist_id}", "starred_url": "https://api.github.com/users/ensv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ensv/subscriptions", "organizations_url": "https://api.github.com/users/ensv/orgs", "repos_url": "https://api.github.com/users/ensv/repos", "events_url": "https://api.github.com/users/ensv/events{/privacy}", "received_events_url": "https://api.github.com/users/ensv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2014-04-02T15:34:14Z", "updated_at": "2019-03-31T04:50:37Z", "closed_at": "2019-03-31T04:50:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to convert unicode text into image, but the rendering in unicode is not correct. Here is an example, I want to convert this text \"\u179f\u17d2\u1793\u17b6\u1780\u17cb\u200b\" ( real sequence of characters : \u179f + \u17d2  \u200b+ \u1793\u200b +  \u1780\u200b +  \u17cb\u200b)\u200b. I expected to get  \"\u179f\u17d2\u1793\u17b6\u1780\u17cb\u200b\"  in the image, but I got the real sequence instead (\"\u179f\u17d2\u200b\u1793\u17b6\u1780\u17cb\u200b\").  Any ideas on this issue ? \n\nIn case you want to test, you can use this font : http://sourceforge.net/projects/khmer/files/Fonts%20-%20KhmerOS/KhmerOS%20Fonts%205.0-%20LGPL%20Licence/All_KhmerOS_5.0.zip/download?use_mirror=skylink&download=\n\nthis is the image I get : \n![test](https://cloud.githubusercontent.com/assets/3463351/2593065/308aa22c-ba7c-11e3-9500-93b06958912d.jpg)\n\nSV\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/586", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/586/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/586/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/586/events", "html_url": "https://github.com/python-pillow/Pillow/issues/586", "id": 30461551, "node_id": "MDU6SXNzdWUzMDQ2MTU1MQ==", "number": 586, "title": "webp decoder is leaking memory", "user": {"login": "totaam", "id": 1049737, "node_id": "MDQ6VXNlcjEwNDk3Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1049737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/totaam", "html_url": "https://github.com/totaam", "followers_url": "https://api.github.com/users/totaam/followers", "following_url": "https://api.github.com/users/totaam/following{/other_user}", "gists_url": "https://api.github.com/users/totaam/gists{/gist_id}", "starred_url": "https://api.github.com/users/totaam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/totaam/subscriptions", "organizations_url": "https://api.github.com/users/totaam/orgs", "repos_url": "https://api.github.com/users/totaam/repos", "events_url": "https://api.github.com/users/totaam/events{/privacy}", "received_events_url": "https://api.github.com/users/totaam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 7, "created_at": "2014-03-30T08:40:21Z", "updated_at": "2015-02-28T14:12:07Z", "closed_at": "2015-02-25T18:26:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "You must also free the pixel buffer when dealing with RGB data, just after calling PyBytes_FromStringAndSize.\n\nI have written a simple standalone test case you can run to see the damage for yourself:\nhttp://xpra.org/trac/browser/xpra/trunk/src/tests/xpra/codecs/test_Pillow.py\n\nAnd you can see our fix here (for Cython code, but you get the idea):\nhttp://xpra.org/trac/changeset/5945/xpra\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/585", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/585/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/585/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/585/events", "html_url": "https://github.com/python-pillow/Pillow/issues/585", "id": 30444302, "node_id": "MDU6SXNzdWUzMDQ0NDMwMg==", "number": 585, "title": "Resizing EPS file hangs on stdin", "user": {"login": "eliempje", "id": 6243880, "node_id": "MDQ6VXNlcjYyNDM4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6243880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eliempje", "html_url": "https://github.com/eliempje", "followers_url": "https://api.github.com/users/eliempje/followers", "following_url": "https://api.github.com/users/eliempje/following{/other_user}", "gists_url": "https://api.github.com/users/eliempje/gists{/gist_id}", "starred_url": "https://api.github.com/users/eliempje/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eliempje/subscriptions", "organizations_url": "https://api.github.com/users/eliempje/orgs", "repos_url": "https://api.github.com/users/eliempje/repos", "events_url": "https://api.github.com/users/eliempje/events{/privacy}", "received_events_url": "https://api.github.com/users/eliempje/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 6, "created_at": "2014-03-29T13:58:11Z", "updated_at": "2014-04-12T09:35:52Z", "closed_at": "2014-04-12T09:29:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When a large EPS file used (300kb) the stdin does not accept new data after 150kb causing an endless wait.\nDone using: commit 1e331e3e6a40141ca8eee4f5da9f74e895423b66 (latest master)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/585/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/584", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/584/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/584/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/584/events", "html_url": "https://github.com/python-pillow/Pillow/issues/584", "id": 30436505, "node_id": "MDU6SXNzdWUzMDQzNjUwNQ==", "number": 584, "title": "test_file_jpeg2k fails with IOError: broken data stream when reading image file on Windows", "user": {"login": "cgohlke", "id": 483428, "node_id": "MDQ6VXNlcjQ4MzQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/483428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgohlke", "html_url": "https://github.com/cgohlke", "followers_url": "https://api.github.com/users/cgohlke/followers", "following_url": "https://api.github.com/users/cgohlke/following{/other_user}", "gists_url": "https://api.github.com/users/cgohlke/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgohlke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgohlke/subscriptions", "organizations_url": "https://api.github.com/users/cgohlke/orgs", "repos_url": "https://api.github.com/users/cgohlke/repos", "events_url": "https://api.github.com/users/cgohlke/events{/privacy}", "received_events_url": "https://api.github.com/users/cgohlke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 6, "created_at": "2014-03-29T03:39:21Z", "updated_at": "2014-05-24T08:07:54Z", "closed_at": "2014-04-01T00:58:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Using Pillow https://github.com/python-imaging/Pillow/commit/af4424ebf19538ebdc40ee47b70d106acb9f565e linked to openjpeg 2.0svn on Windows, the following tests fail on all Python versions. \n\n```\nTests\\test_file_jpeg2k.py:35: im.load() failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 35, in test_sanity\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:47: im.load() failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 47, in test_lossless\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:53: im.load() failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 53, in test_lossy_tiled\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:59: im = roundtrip(test_card) failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 59, in test_lossless_rt\n    im = roundtrip(test_card)\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:63: im = roundtrip(test_card, quality_layers=[20]) failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 63, in test_lossy_rt\n    im = roundtrip(test_card, quality_layers=[20])\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:67: im = roundtrip(test_card, tile_size=(128, 128)) failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 67, in test_tiled_rt\n    im = roundtrip(test_card, tile_size=(128, 128))\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n\n\n\n\n\n\nTests\\test_file_jpeg2k.py:72: offset=(32, 32)) failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 72, in test_tiled_offset_rt\n    offset=(32, 32))\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:76: im = roundtrip(test_card, irreversible=True, quality_layers=[20]) failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 76, in test_irreversible_rt\n    im = roundtrip(test_card, irreversible=True, quality_layers=[20])\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:80: im = roundtrip(test_card, quality_layers=[60, 40, 20], progression='LRCP') failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 80, in test_prog_qual_rt\n    im = roundtrip(test_card, quality_layers=[60, 40, 20], progression='LRCP')\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:84: im = roundtrip(test_card, num_resolutions=8, progression='RLCP') failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 84, in test_prog_res_rt\n    im = roundtrip(test_card, num_resolutions=8, progression='RLCP')\n  File \"Tests\\test_file_jpeg2k.py\", line 25, in roundtrip\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:92: im.load() failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 92, in test_reduce\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\nTests\\test_file_jpeg2k.py:103: im.load() failed:\nTraceback (most recent call last):\n  File \"Tests\\test_file_jpeg2k.py\", line 103, in test_layers\n    im.load()\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\Jpeg2KImagePlugin.py\", line 181, in load\n    ImageFile.ImageFile.load(self)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 234, in load\n    raise_ioerror(e)\n  File \"D:\\Build\\Pillow\\Pillow-git\\PIL\\ImageFile.py\", line 56, in raise_ioerror\n    raise IOError(message + \" when reading image file\")\nIOError: broken data stream when reading image file\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/574", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/574/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/574/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/574/events", "html_url": "https://github.com/python-pillow/Pillow/pull/574", "id": 30189640, "node_id": "MDExOlB1bGxSZXF1ZXN0MTM5OTIxOTk=", "number": 574, "title": "Indexed Transparency handled for conversions between L, RGB, and P modes", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 1, "created_at": "2014-03-26T07:03:16Z", "updated_at": "2014-06-20T16:49:17Z", "closed_at": "2014-04-01T04:40:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/python-pillow/Pillow/pulls/574", "html_url": "https://github.com/python-pillow/Pillow/pull/574", "diff_url": "https://github.com/python-pillow/Pillow/pull/574.diff", "patch_url": "https://github.com/python-pillow/Pillow/pull/574.patch", "merged_at": "2014-04-01T04:40:22Z"}, "body": "Fixes #510\n\nIncludes #573, since I was going to have to manually merge anyway. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/574/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/574/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/568", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/568/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/568/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/568/events", "html_url": "https://github.com/python-pillow/Pillow/issues/568", "id": 30099307, "node_id": "MDU6SXNzdWUzMDA5OTMwNw==", "number": 568, "title": "Segmentation Fault on a PCD image", "user": {"login": "lehins", "id": 2333894, "node_id": "MDQ6VXNlcjIzMzM4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2333894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lehins", "html_url": "https://github.com/lehins", "followers_url": "https://api.github.com/users/lehins/followers", "following_url": "https://api.github.com/users/lehins/following{/other_user}", "gists_url": "https://api.github.com/users/lehins/gists{/gist_id}", "starred_url": "https://api.github.com/users/lehins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lehins/subscriptions", "organizations_url": "https://api.github.com/users/lehins/orgs", "repos_url": "https://api.github.com/users/lehins/repos", "events_url": "https://api.github.com/users/lehins/events{/privacy}", "received_events_url": "https://api.github.com/users/lehins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 17, "created_at": "2014-03-25T06:11:57Z", "updated_at": "2016-02-06T10:42:10Z", "closed_at": "2016-02-04T15:52:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is a link to the file that causes the problem: http://526ddd950476442e0e6c-adab491b4c7746bcac4e5a193c3c94e6.r70.cf1.rackcdn.com/golden.pcd\nThis file was created using 'convert', so it might not have proper formatting/header or whatever else, but it most definitely shouldn't cause a seg fault.\n\n```\ni = Image.open('golden.pcd') \ni.resize(new_dim) # crashes here or upon any other operation\n```\n\nLet me know if any other info is needed. \nA fix for this error is not crucial for me, just want to help make this library even better. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/545", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/545/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/545/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/545/events", "html_url": "https://github.com/python-pillow/Pillow/issues/545", "id": 29158338, "node_id": "MDU6SXNzdWUyOTE1ODMzOA==", "number": 545, "title": "Build isolation failure", "user": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2014-03-11T07:19:17Z", "updated_at": "2019-05-11T17:30:09Z", "closed_at": "2019-05-11T17:30:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A meta ticket for issues associated with Pillow's inability to build against specific isolated dependencies when others are present.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/532", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/532/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/532/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/532/events", "html_url": "https://github.com/python-pillow/Pillow/issues/532", "id": 28482487, "node_id": "MDU6SXNzdWUyODQ4MjQ4Nw==", "number": 532, "title": "TypeError on PNG save if icc_profile is None", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-02-28T07:14:07Z", "updated_at": "2014-08-08T17:39:04Z", "closed_at": "2014-03-17T14:31:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unfortunately I can't share the one image I found that triggers this but I had one where im.info['icc_profile'] in the _save method in PngImagePlugin was set but the value was None, which caused the zlib.compress in line 621 to throw a TypeError. I changed line 672 to\n\n```\nif im.info.get(\"icc_profile\") is not None:\n```\n\nto fix this for me locally.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/532/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/526", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/526/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/526/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/526/events", "html_url": "https://github.com/python-pillow/Pillow/issues/526", "id": 27799134, "node_id": "MDU6SXNzdWUyNzc5OTEzNA==", "number": 526, "title": "File handler leak with Tiff CCITT Group4 format", "user": {"login": "vieillecarne", "id": 6716944, "node_id": "MDQ6VXNlcjY3MTY5NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6716944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vieillecarne", "html_url": "https://github.com/vieillecarne", "followers_url": "https://api.github.com/users/vieillecarne/followers", "following_url": "https://api.github.com/users/vieillecarne/following{/other_user}", "gists_url": "https://api.github.com/users/vieillecarne/gists{/gist_id}", "starred_url": "https://api.github.com/users/vieillecarne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vieillecarne/subscriptions", "organizations_url": "https://api.github.com/users/vieillecarne/orgs", "repos_url": "https://api.github.com/users/vieillecarne/repos", "events_url": "https://api.github.com/users/vieillecarne/events{/privacy}", "received_events_url": "https://api.github.com/users/vieillecarne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 5, "created_at": "2014-02-18T15:00:01Z", "updated_at": "2014-03-29T22:25:57Z", "closed_at": "2014-03-29T22:25:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "The handler to a Tiff CCITT Group4 file is not released properly. The code below gives an example. At the end the program holds waiting for the user to press \"enter\". At that moment, I use \"Process Explorer\" to check the file handles. The first is not released while the second is. Bug ? \n\nPython : 2.7\nPillow : 2.3.0\nOS : Windows XP/7 (32 bits)\n\n```\n# -*- coding: Utf-8 -*-\nimport sys\nfrom PIL import Image\n\nwith open(\"mypath\\\\0000700.tif\", \"rb\") as f:\n    imagef = Image.open(f)\n    print imagef.size\n\nwith open(\"mypath\\\\0000700.jpg\", \"rb\") as g:\n    imageg = Image.open(g)\n    print imageg.size\n\nsys.stdin.readline()\n```\n\nThanks \nLaurent\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/520", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/520/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/520/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/520/events", "html_url": "https://github.com/python-pillow/Pillow/issues/520", "id": 27095530, "node_id": "MDU6SXNzdWUyNzA5NTUzMA==", "number": 520, "title": "Make EXIF plugin", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 10115806, "node_id": "MDU6TGFiZWwxMDExNTgwNg==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Enhancement", "name": "Enhancement", "color": "84b6eb", "default": false, "description": null}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 11, "created_at": "2014-02-06T23:19:27Z", "updated_at": "2019-04-01T07:20:06Z", "closed_at": "2019-04-01T07:20:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Exif support (labeled experimental since 2003) is somewhat adequate for reading, but there's no clear way to change a value and then write it out.  We currently support writing Exif as byte strings, with no way to make them apart from manually setting up nested `TiffImagePlugin.ImageFileDirectory` instances, then calling save into a file pointer.\r\n-  `Image.getexif()` should exist, and return an Exif object. \r\n-  The Exif object should export a dictionary interface.\r\n-  The Exif object should have a `toBytes()` method returning the correct bytes.\r\n-  `Exif.load(bytes).toBytes()` should roundtrip. \r\n-  This should work: \r\n\r\n```python\r\nexif = Exif()\r\nexif['Orientation'] = 1  \r\nim.save('temp.jpg', exif=exif)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/520/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/518", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/518/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/518/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/518/events", "html_url": "https://github.com/python-pillow/Pillow/issues/518", "id": 26956916, "node_id": "MDU6SXNzdWUyNjk1NjkxNg==", "number": 518, "title": "Problem with EXIF in some files", "user": {"login": "mpyatishev", "id": 3088773, "node_id": "MDQ6VXNlcjMwODg3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3088773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpyatishev", "html_url": "https://github.com/mpyatishev", "followers_url": "https://api.github.com/users/mpyatishev/followers", "following_url": "https://api.github.com/users/mpyatishev/following{/other_user}", "gists_url": "https://api.github.com/users/mpyatishev/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpyatishev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpyatishev/subscriptions", "organizations_url": "https://api.github.com/users/mpyatishev/orgs", "repos_url": "https://api.github.com/users/mpyatishev/repos", "events_url": "https://api.github.com/users/mpyatishev/events{/privacy}", "received_events_url": "https://api.github.com/users/mpyatishev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 152036900, "node_id": "MDU6TGFiZWwxNTIwMzY5MDA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/TIFF", "name": "TIFF", "color": "fef2c0", "default": false, "description": ""}, {"id": 799460360, "node_id": "MDU6TGFiZWw3OTk0NjAzNjA=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Exif", "name": "Exif", "color": "796ded", "default": false, "description": null}, {"id": 980277289, "node_id": "MDU6TGFiZWw5ODAyNzcyODk=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/NumPy", "name": "NumPy", "color": "c5def5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 27, "created_at": "2014-02-05T12:48:47Z", "updated_at": "2019-08-19T21:11:43Z", "closed_at": "2018-09-30T05:39:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've got a strange problem with some files with EXIF in them. Here is a traceback and the file in attachment.\n\n```\nInternal Server Error: /place/content/upload/\nTraceback (most recent call last):\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/core/handlers/base.py\", line 114, in get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/views/generic/base.py\", line 69, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/utils/decorators.py\", line 29, in _wrapper\n    return bound_func(*args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py\", line 22, in _wrapped_view\n    return view_func(request, *args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/utils/decorators.py\", line 25, in bound_func\n    return func(self, *args2, **kwargs2)\n  File \"/var/www/tourism/www/tourism/core/mixins.py\", line 13, in dispatch\n    return super(LoginRequredMixin, self).dispatch(*args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/views/generic/base.py\", line 87, in dispatch\n    return handler(request, *args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/views/generic/edit.py\", line 205, in post\n    return super(BaseCreateView, self).post(request, *args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/views/generic/edit.py\", line 171, in post\n    return self.form_valid(form)\n  File \"/var/www/tourism/www/tourism/apps/place/views.py\", line 368, in form_valid\n    self.object.save()\n  File \"/var/www/tourism/www/tourism/apps/place/models.py\", line 409, in save\n    super(Photo, self).save(*args, **kwargs)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/db/models/base.py\", line 545, in save\n    force_update=force_update, update_fields=update_fields)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/db/models/base.py\", line 582, in save_base\n    update_fields=update_fields, raw=raw, using=using)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/django/dispatch/dispatcher.py\", line 185, in send\n    response = receiver(signal=self, sender=sender, **named)\n  File \"/var/www/tourism/www/tourism/apps/place/models.py\", line 108, in do_post_save\n    instance.rename_files()\n  File \"/var/www/tourism/www/tourism/apps/place/models.py\", line 101, in rename_files\n    self.save(update_fields=update_fields)\n  File \"/var/www/tourism/www/tourism/apps/place/models.py\", line 415, in save\n    crop='center'\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/shortcuts.py\", line 8, in get_thumbnail\n    return default.backend.get_thumbnail(file_, geometry_string, **options)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/base.py\", line 61, in get_thumbnail\n    thumbnail)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/base.py\", line 86, in _create_thumbnail\n    image = default.engine.create(source_image, geometry, options)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/engines/base.py\", line 15, in create\n    image = self.orientation(image, geometry, options)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/engines/base.py\", line 26, in orientation\n    return self._orientation(image)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/sorl/thumbnail/engines/pil_engine.py\", line 29, in _orientation\n    exif = image._getexif()\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 362, in _getexif\n    return _getexif(self)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 386, in _getexif\n    info.load(file)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/PIL/TiffImagePlugin.py\", line 421, in load\n    tag, typ = i16(ifd), i16(ifd, 2)\n  File \"/var/www/tourism/env/local/lib/python2.7/site-packages/PIL/_binary.py\", line 29, in i16le\n    return i8(c[o]) | (i8(c[o+1])<<8)\nIndexError: string index out of range\n```\n\n![admiral](https://f.cloud.github.com/assets/3088773/2086992/3809123a-8e63-11e3-8386-ed545452ba27.jpg)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/518/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/513", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/513/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/513/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/513/events", "html_url": "https://github.com/python-pillow/Pillow/issues/513", "id": 26748731, "node_id": "MDU6SXNzdWUyNjc0ODczMQ==", "number": 513, "title": "Converting P->RGB, modifying, and converting back to P results in incorrect palette", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2014-02-01T22:24:19Z", "updated_at": "2014-03-17T13:49:00Z", "closed_at": "2014-03-17T13:49:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running this script (which converts a paletted image to RGB, resizes it with antialiasing enabled, and converts it back to paletted) on the provided in.gif results in an image with a broken palette.\n\nFrom git bisect, the offending commit is https://github.com/python-imaging/Pillow/commit/06301c9eba3904acf8a9b7b707caa71ba7b6a0d3 - this suggests that it's holding on to the image's original palette, which is no longer valid after the RGB data is modified by the resize operation. (The bug is avoided if you save and reopen the image while it is in RGB mode, immediately before or after the image.resize line.)\n\n```\nfrom PIL import Image\n\nimage = Image.open('in.gif')\nimage = image.convert('RGB')\nimage = image.resize((200, 150), Image.ANTIALIAS)\nimage = image.convert('P', palette=Image.ADAPTIVE, colors=256)\nimage.save('out.png')\n```\n\nin.gif:\n![in](https://f.cloud.github.com/assets/85097/2058925/55562ea0-8b8d-11e3-8d85-eda144316a85.gif)\n\nout.png with Pillow 2.2.2:\n![out-pillow 2 2 2](https://f.cloud.github.com/assets/85097/2058928/6bccd58a-8b8d-11e3-80f2-bc92e5333e85.png)\n\nout.png with Pillow 2.3.0:\n![out-pillow 2 3 0](https://f.cloud.github.com/assets/85097/2058929/77151cea-8b8d-11e3-90b4-4c0c69cda085.png)\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/510", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/510/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/510/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/510/events", "html_url": "https://github.com/python-pillow/Pillow/issues/510", "id": 26526624, "node_id": "MDU6SXNzdWUyNjUyNjYyNA==", "number": 510, "title": "The PNG loader crashes trying to save palette images with tRNS color type 3 (indexed color) value after convert to RGB", "user": {"login": "kwist-sgr", "id": 4199178, "node_id": "MDQ6VXNlcjQxOTkxNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/4199178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwist-sgr", "html_url": "https://github.com/kwist-sgr", "followers_url": "https://api.github.com/users/kwist-sgr/followers", "following_url": "https://api.github.com/users/kwist-sgr/following{/other_user}", "gists_url": "https://api.github.com/users/kwist-sgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwist-sgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwist-sgr/subscriptions", "organizations_url": "https://api.github.com/users/kwist-sgr/orgs", "repos_url": "https://api.github.com/users/kwist-sgr/repos", "events_url": "https://api.github.com/users/kwist-sgr/events{/privacy}", "received_events_url": "https://api.github.com/users/kwist-sgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 7, "created_at": "2014-01-29T15:15:02Z", "updated_at": "2023-01-03T00:55:14Z", "closed_at": "2014-04-01T04:40:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "![defaktologo_bad](https://f.cloud.github.com/assets/4199178/2030235/e2a6f2ea-88f3-11e3-9d40-b86f41857491.png)\n\nValueError: too many values to unpack\n\n![valueerror](https://f.cloud.github.com/assets/4199178/2030315/05d21a00-88f5-11e3-932c-6ab1a5d0ea62.png)\n\n4.2.1.1. tRNS Transparency (PNG Specification)\nhttp://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.tRNS\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/510/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/494", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/494/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/494/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/494/events", "html_url": "https://github.com/python-pillow/Pillow/issues/494", "id": 25861590, "node_id": "MDU6SXNzdWUyNTg2MTU5MA==", "number": 494, "title": "Windows - Image.save() - IOError: [Errno 13] Permission denied", "user": {"login": "Dooque", "id": 6324130, "node_id": "MDQ6VXNlcjYzMjQxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/6324130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dooque", "html_url": "https://github.com/Dooque", "followers_url": "https://api.github.com/users/Dooque/followers", "following_url": "https://api.github.com/users/Dooque/following{/other_user}", "gists_url": "https://api.github.com/users/Dooque/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dooque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dooque/subscriptions", "organizations_url": "https://api.github.com/users/Dooque/orgs", "repos_url": "https://api.github.com/users/Dooque/repos", "events_url": "https://api.github.com/users/Dooque/events{/privacy}", "received_events_url": "https://api.github.com/users/Dooque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 6, "created_at": "2014-01-18T14:58:00Z", "updated_at": "2015-12-18T06:31:31Z", "closed_at": "2014-03-17T18:01:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\n\nProblem:\nWhen I try to save an opened Image object to a file that was previously created by Image.new() and saved, I have a permission denied error.\n\nSteps to reproduce:\nEnvironment:\nWindows 7 (64-bits)\nPython 2.7.3\nPillow 2.3.0\n\nExecute the following code\n\n``` python\nfrom PIL import Image\nimg1 = Image.new('I;16', (10, 10))\nimg1.save('test.tiff', 'TIFF')\nimg2 = Image.open('test.tiff')\nimg2.save('test.tiff')\n```\n\nyou should see this error\n\n``` python\nC:\\Python27\\lib\\site-packages\\PIL\\Image.py\n   1458         if isPath(fp):\n-> 1459             fp = builtins.open(fp, \"wb\")\n   1560             close = 1\n   1461         else:\n\nIOError: [Errno 13] Permission denied: 'test.tiff'\n```\n\nExpected behavior:\nIt should save the image file, no matter how many references to that file I have.\n\nOf course, I have permission to read/write the file inside the directory I am.\nI executed it as Admin, I tried to change the mode from the line 1459 to \"r+b\", and the error is the same.\n\nNOTE: On Ubuntu 12.04 LTS (same python and pillow versions) this code works well.\n\nThanks.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/494/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/483", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/483/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/483/events", "html_url": "https://github.com/python-pillow/Pillow/issues/483", "id": 25467334, "node_id": "MDU6SXNzdWUyNTQ2NzMzNA==", "number": 483, "title": "Segfault in pypy", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 3, "created_at": "2014-01-12T18:38:11Z", "updated_at": "2014-01-31T22:13:46Z", "closed_at": "2014-01-31T22:13:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On Ubuntu 13.10, x86:\n\n```\n(vpypy22)erics@dynamic:~/Pillow$ python Tests/test_imagefont.py --installed\nSegmentation fault (core dumped)\n```\n\nDoesn't happen on 12.04/x64 pypy, nor any c-python I've tested. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/463", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/463/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/463/events", "html_url": "https://github.com/python-pillow/Pillow/issues/463", "id": 24906131, "node_id": "MDU6SXNzdWUyNDkwNjEzMQ==", "number": 463, "title": "ImageDraw.ellipse() with square bounding box doesn't produce circle", "user": {"login": "gronostajo", "id": 1347866, "node_id": "MDQ6VXNlcjEzNDc4NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1347866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gronostajo", "html_url": "https://github.com/gronostajo", "followers_url": "https://api.github.com/users/gronostajo/followers", "following_url": "https://api.github.com/users/gronostajo/following{/other_user}", "gists_url": "https://api.github.com/users/gronostajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/gronostajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gronostajo/subscriptions", "organizations_url": "https://api.github.com/users/gronostajo/orgs", "repos_url": "https://api.github.com/users/gronostajo/repos", "events_url": "https://api.github.com/users/gronostajo/events{/privacy}", "received_events_url": "https://api.github.com/users/gronostajo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6", "html_url": "https://github.com/python-pillow/Pillow/milestone/6", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/6/labels", "id": 524553, "node_id": "MDk6TWlsZXN0b25lNTI0NTUz", "number": 6, "title": "2.5.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 21, "state": "closed", "created_at": "2014-01-01T21:37:57Z", "updated_at": "2015-04-01T00:22:32Z", "due_on": "2014-07-01T07:00:00Z", "closed_at": "2014-07-02T22:35:46Z"}, "comments": 10, "created_at": "2013-12-30T23:44:01Z", "updated_at": "2014-06-27T20:32:21Z", "closed_at": "2014-06-27T20:32:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The code below should produce a circle:\n\n```\n>>> from PIL import Image, ImageDraw\n>>> box = (20, 20, 40, 40)\n>>> im = Image.new('L', (60, 60), 0)\n>>> draw = ImageDraw.Draw(im)\n>>> draw.ellipse(box, 255)\n>>> im.show()\n```\n\nThe result isn't a 20x20 px circle as expected, but 21x20 px ellipse:\n\n![test](https://f.cloud.github.com/assets/1347866/1825104/01e7d5d6-71aa-11e3-9254-6de880082b42.png)\n\nI'm using Pillow 2.2.2.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/463/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/447", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/447/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/447/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/447/events", "html_url": "https://github.com/python-pillow/Pillow/issues/447", "id": 24274830, "node_id": "MDU6SXNzdWUyNDI3NDgzMA==", "number": 447, "title": "I/O error on sane.SaneDev.snap()", "user": {"login": "barronmo", "id": 6181575, "node_id": "MDQ6VXNlcjYxODE1NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6181575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barronmo", "html_url": "https://github.com/barronmo", "followers_url": "https://api.github.com/users/barronmo/followers", "following_url": "https://api.github.com/users/barronmo/following{/other_user}", "gists_url": "https://api.github.com/users/barronmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/barronmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barronmo/subscriptions", "organizations_url": "https://api.github.com/users/barronmo/orgs", "repos_url": "https://api.github.com/users/barronmo/repos", "events_url": "https://api.github.com/users/barronmo/events{/privacy}", "received_events_url": "https://api.github.com/users/barronmo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 36, "created_at": "2013-12-13T21:50:23Z", "updated_at": "2014-03-17T12:54:10Z", "closed_at": "2014-03-17T12:54:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Arch Linux updated 2 weeks ago\nHP OfficeJet 6700 Premium All-in-One\nPillow 2.2.1\nPython 2.7.5\n\nimport sane\nsane.init()\nd = sane.get_devices()\ns = sane.open(d[0][0])\nimage = s.scan()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python2.7/site-packages/sane.py\", line 247, in scan\n    return self.snap()\n  File \"/usr/lib/python2.7/site-packages/sane.py\", line 242, in snap\n    self.dev.snap( im.im.id, no_cancel )\n_sane.error: Error during device I/O\n\nThanks for any help.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/447/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/434", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/434/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/434/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/434/events", "html_url": "https://github.com/python-pillow/Pillow/issues/434", "id": 23689694, "node_id": "MDU6SXNzdWUyMzY4OTY5NA==", "number": 434, "title": "GIF images incorrectly converted to RGB", "user": {"login": "cezarsa", "id": 11041, "node_id": "MDQ6VXNlcjExMDQx", "avatar_url": "https://avatars.githubusercontent.com/u/11041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cezarsa", "html_url": "https://github.com/cezarsa", "followers_url": "https://api.github.com/users/cezarsa/followers", "following_url": "https://api.github.com/users/cezarsa/following{/other_user}", "gists_url": "https://api.github.com/users/cezarsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/cezarsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cezarsa/subscriptions", "organizations_url": "https://api.github.com/users/cezarsa/orgs", "repos_url": "https://api.github.com/users/cezarsa/repos", "events_url": "https://api.github.com/users/cezarsa/events{/privacy}", "received_events_url": "https://api.github.com/users/cezarsa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5", "html_url": "https://github.com/python-pillow/Pillow/milestone/5", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/5/labels", "id": 524552, "node_id": "MDk6TWlsZXN0b25lNTI0NTUy", "number": 5, "title": "2.4.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2014-01-01T21:37:39Z", "updated_at": "2014-04-01T22:55:06Z", "due_on": "2014-04-01T07:00:00Z", "closed_at": "2014-04-01T22:55:06Z"}, "comments": 9, "created_at": "2013-12-04T02:10:41Z", "updated_at": "2014-03-20T21:25:34Z", "closed_at": "2014-03-20T21:25:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After git bisecting the code I found that starting from commit b9ab3f5bf4222a284f92d43cc56fd323ce2d8751 there is a issue when converting GIFs from \"P\" format to either  \"RGB\" or \"RGBA\".\nIn this case, pillow generates a black and white only image as it can be seen further down.\nI'll try to understand what's happening and make a pull request latter.\n\nThis little snippet shows a way to reproduce it:\n\n``` python\nfrom PIL import Image\nfrom urllib2 import urlopen\nfrom io import BytesIO\n\nimgbuffer = urlopen('http://www.eecs.berkeley.edu/~loarie/test.colors.gif').read()\n\nimg = Image.open(BytesIO(imgbuffer))\nrgbimg = img.convert('RGB')\nrgbimg.save(open('tmp.gif', 'w'), 'GIF')\n```\n\nResult:\n![tmp](https://f.cloud.github.com/assets/11041/1669992/4efd9626-5c88-11e3-86fa-1ea3b5f5929f.gif)\n\nExpected:\n![original](http://www.eecs.berkeley.edu/~loarie/test.colors.gif)\n\ncc: commit author @d-schmidt\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/431", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/431/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/431/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/431/events", "html_url": "https://github.com/python-pillow/Pillow/issues/431", "id": 23512765, "node_id": "MDU6SXNzdWUyMzUxMjc2NQ==", "number": 431, "title": "Packbits compression is broken", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2013-11-30T00:30:25Z", "updated_at": "2014-05-24T12:19:18Z", "closed_at": "2014-05-24T12:19:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hoisted from #417.\n\nNative tiff compression is broken, images don't round trip.  Images look wrong in external viewers, so I know it's at least a save side issue.\n\nThis does not affect images run through libtiff.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/431/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/421", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/421/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/421/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/421/events", "html_url": "https://github.com/python-pillow/Pillow/issues/421", "id": 23176101, "node_id": "MDU6SXNzdWUyMzE3NjEwMQ==", "number": 421, "title": "Loading RGB image with tRNS header ignores transparency", "user": {"login": "nikmolnar", "id": 2422416, "node_id": "MDQ6VXNlcjI0MjI0MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/2422416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikmolnar", "html_url": "https://github.com/nikmolnar", "followers_url": "https://api.github.com/users/nikmolnar/followers", "following_url": "https://api.github.com/users/nikmolnar/following{/other_user}", "gists_url": "https://api.github.com/users/nikmolnar/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikmolnar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikmolnar/subscriptions", "organizations_url": "https://api.github.com/users/nikmolnar/orgs", "repos_url": "https://api.github.com/users/nikmolnar/repos", "events_url": "https://api.github.com/users/nikmolnar/events{/privacy}", "received_events_url": "https://api.github.com/users/nikmolnar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/3", "html_url": "https://github.com/python-pillow/Pillow/milestone/3", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/3/labels", "id": 438445, "node_id": "MDk6TWlsZXN0b25lNDM4NDQ1", "number": 3, "title": "2.3.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2013-09-27T10:08:32Z", "updated_at": "2014-01-01T21:36:37Z", "due_on": "2014-01-01T08:00:00Z", "closed_at": "2014-01-01T21:36:37Z"}, "comments": 3, "created_at": "2013-11-23T00:04:26Z", "updated_at": "2013-12-28T13:56:03Z", "closed_at": "2013-12-28T13:56:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The PNG loader correctly loads palette images with tRNS value, but ignores the tRNS header with RGB images.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/401", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/401/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/401/events", "html_url": "https://github.com/python-pillow/Pillow/issues/401", "id": 22164244, "node_id": "MDU6SXNzdWUyMjE2NDI0NA==", "number": 401, "title": "TIF Compression with CMYK images seems to be not working", "user": {"login": "ignaciordc", "id": 5857265, "node_id": "MDQ6VXNlcjU4NTcyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5857265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ignaciordc", "html_url": "https://github.com/ignaciordc", "followers_url": "https://api.github.com/users/ignaciordc/followers", "following_url": "https://api.github.com/users/ignaciordc/following{/other_user}", "gists_url": "https://api.github.com/users/ignaciordc/gists{/gist_id}", "starred_url": "https://api.github.com/users/ignaciordc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ignaciordc/subscriptions", "organizations_url": "https://api.github.com/users/ignaciordc/orgs", "repos_url": "https://api.github.com/users/ignaciordc/repos", "events_url": "https://api.github.com/users/ignaciordc/events{/privacy}", "received_events_url": "https://api.github.com/users/ignaciordc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/3", "html_url": "https://github.com/python-pillow/Pillow/milestone/3", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/3/labels", "id": 438445, "node_id": "MDk6TWlsZXN0b25lNDM4NDQ1", "number": 3, "title": "2.3.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2013-09-27T10:08:32Z", "updated_at": "2014-01-01T21:36:37Z", "due_on": "2014-01-01T08:00:00Z", "closed_at": "2014-01-01T21:36:37Z"}, "comments": 3, "created_at": "2013-11-06T00:50:53Z", "updated_at": "2013-12-28T13:47:47Z", "closed_at": "2013-12-28T13:47:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "I load a CMYK image, which I know had no compression,\nIt is ok, for I can visualize it.\nThen, I try to save it compressed, and get an IOError\n\nIf I enable debuging setting Image.DEBUG=1 I get some more info\n\nThe error occurs in \nTIFFWriteScanline: ECI2002_ccitt.tif: Must set \"PlanarConfiguration before writing data.\nTraceback (most recent call last):\n  \"PIL\\Image.py\", line 1464, in save\n            save_handler(self, fp, filename)\n  \"PIL\\TiffImagePlugin.py\", line 1073, in _save\n           raise IOError(\"encoder error %d when writing image file\" % s)\nIOError: encoder error -2 when writing image file\n\nInfo from the file\n- compression: raw\n- photometric_interpretation: 5\n- planar_configuration: 1\n- fill_order: 1\n- size: (3509, 4677)\n  format key: ('II', 5, 1, 1, (8, 8, 8, 8), ())\n- raw mode: CMYK\n- pil mode: CMYK\n  tiles:  [('raw', (0, 0, 3509, 4677), 182, ('CMYK', 0, 1))]\n\nCode I am executing\nim=Image.open(\"ECI2002.tif\")\nim.show()\nim.save(\"ECI2002_ccitt.tif\",compression=\"tiff_ccitt\")\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/401/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/401/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/350", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/350/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/350/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/350/events", "html_url": "https://github.com/python-pillow/Pillow/issues/350", "id": 20277095, "node_id": "MDU6SXNzdWUyMDI3NzA5NQ==", "number": 350, "title": "1 bit images to 1 bit nd arrays", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 8, "created_at": "2013-09-30T17:16:25Z", "updated_at": "2016-08-25T10:28:08Z", "closed_at": "2016-08-25T10:28:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The conversion of 1 bit images to an ndarray is listed as broken in test_numpy.py, Image.py lines 217 and 1931. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/279", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/279/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/279/events", "html_url": "https://github.com/python-pillow/Pillow/issues/279", "id": 16526316, "node_id": "MDU6SXNzdWUxNjUyNjMxNg==", "number": 279, "title": "Some TIFF G4 images are not well decoded", "user": {"login": "jfbecan", "id": 4973849, "node_id": "MDQ6VXNlcjQ5NzM4NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4973849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfbecan", "html_url": "https://github.com/jfbecan", "followers_url": "https://api.github.com/users/jfbecan/followers", "following_url": "https://api.github.com/users/jfbecan/following{/other_user}", "gists_url": "https://api.github.com/users/jfbecan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfbecan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfbecan/subscriptions", "organizations_url": "https://api.github.com/users/jfbecan/orgs", "repos_url": "https://api.github.com/users/jfbecan/repos", "events_url": "https://api.github.com/users/jfbecan/events{/privacy}", "received_events_url": "https://api.github.com/users/jfbecan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2013-07-09T14:05:36Z", "updated_at": "2013-07-11T10:38:19Z", "closed_at": "2013-07-11T10:38:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "TIFF G4 with a FillOrder Tag (266) indicating a value of 2 (pixels are arranged within a byte such that pixels with lower column values are stored in the lower-order bits of the byte.) are not well decoded even if it seems that code to treat them is available.\nUnfortunately I can't join such Tiff files because only PNG, GIF or JPG are accepted.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/274", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/274/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/274/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/274/events", "html_url": "https://github.com/python-pillow/Pillow/issues/274", "id": 16500588, "node_id": "MDU6SXNzdWUxNjUwMDU4OA==", "number": 274, "title": "16-bit TIFF files truncated to 0..255 before conversion to float", "user": {"login": "tdsmith", "id": 173889, "node_id": "MDQ6VXNlcjE3Mzg4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdsmith", "html_url": "https://github.com/tdsmith", "followers_url": "https://api.github.com/users/tdsmith/followers", "following_url": "https://api.github.com/users/tdsmith/following{/other_user}", "gists_url": "https://api.github.com/users/tdsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdsmith/subscriptions", "organizations_url": "https://api.github.com/users/tdsmith/orgs", "repos_url": "https://api.github.com/users/tdsmith/repos", "events_url": "https://api.github.com/users/tdsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/tdsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-07-08T23:44:06Z", "updated_at": "2013-07-15T11:20:56Z", "closed_at": "2013-07-09T10:28:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Example data file: https://dl.dropboxusercontent.com/u/3720/junk/12bit.tif (a 16-bit TIFF container with pixel values spanning a 12-bit range, which is common in scientific imaging)\n\nOpening the file with Image.open gives the expected result:\n\n```\n>>> im, im.mode\n(<PIL.TiffImagePlugin.TiffImageFile image mode=I;16 size=1344x1024 at 0x1074A2518>, 'I;16')\n>>> im.getpixel((5,5))\n447\n```\n\nBut converting to a float type clips all pixel values above 255 to 255:\n\n```\n>>> im.convert('F').getpixel((5,5))\n255.0\n```\n\nConversion to float should not clip 16-bit integer values.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/274/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/273", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/273/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/273/events", "html_url": "https://github.com/python-pillow/Pillow/issues/273", "id": 16500428, "node_id": "MDU6SXNzdWUxNjUwMDQyOA==", "number": 273, "title": "16-bit TIFF files cannot be converted to array", "user": {"login": "tdsmith", "id": 173889, "node_id": "MDQ6VXNlcjE3Mzg4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tdsmith", "html_url": "https://github.com/tdsmith", "followers_url": "https://api.github.com/users/tdsmith/followers", "following_url": "https://api.github.com/users/tdsmith/following{/other_user}", "gists_url": "https://api.github.com/users/tdsmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/tdsmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tdsmith/subscriptions", "organizations_url": "https://api.github.com/users/tdsmith/orgs", "repos_url": "https://api.github.com/users/tdsmith/repos", "events_url": "https://api.github.com/users/tdsmith/events{/privacy}", "received_events_url": "https://api.github.com/users/tdsmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/2", "html_url": "https://github.com/python-pillow/Pillow/milestone/2", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/2/labels", "id": 335442, "node_id": "MDk6TWlsZXN0b25lMzM1NDQy", "number": 2, "title": "2.2.0", "description": "", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2013-05-16T19:51:06Z", "updated_at": "2013-11-14T13:47:58Z", "due_on": "2013-10-01T07:00:00Z", "closed_at": "2013-11-14T13:47:58Z"}, "comments": 4, "created_at": "2013-07-08T23:39:19Z", "updated_at": "2013-09-30T18:17:17Z", "closed_at": "2013-09-30T17:13:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Example data file: https://dl.dropboxusercontent.com/u/3720/junk/12bit.tif (a 16-bit TIFF container with pixel values spanning a 12-bit range, which is common in scientific imaging)\n\nOpening the file with Image.open works:\n\n```\n>>> im, im.mode\n(<PIL.TiffImagePlugin.TiffImageFile image mode=I;16 size=1344x1024 at 0x1074A2518>, 'I;16')\n```\n\nAttempting to convert the Image object to an array just encapsulates it:\n\n```\n>>> np.array(im)\narray(<PIL.TiffImagePlugin.TiffImageFile image mode=I;16 size=1344x1024 at 0x1074A2518>, dtype=object)\n```\n\nThis is a 1x1 array containing an Image object. I was expecting to have a 1344x1024 array containing 16-bit integer values.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/272", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/272/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/272/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/272/events", "html_url": "https://github.com/python-pillow/Pillow/issues/272", "id": 16401988, "node_id": "MDU6SXNzdWUxNjQwMTk4OA==", "number": 272, "title": "Image.open raise UnicodeDecodeError if locale setting modified", "user": {"login": "rsaint", "id": 4948227, "node_id": "MDQ6VXNlcjQ5NDgyMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/4948227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsaint", "html_url": "https://github.com/rsaint", "followers_url": "https://api.github.com/users/rsaint/followers", "following_url": "https://api.github.com/users/rsaint/following{/other_user}", "gists_url": "https://api.github.com/users/rsaint/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsaint/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsaint/subscriptions", "organizations_url": "https://api.github.com/users/rsaint/orgs", "repos_url": "https://api.github.com/users/rsaint/repos", "events_url": "https://api.github.com/users/rsaint/events{/privacy}", "received_events_url": "https://api.github.com/users/rsaint/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2013-07-05T12:56:30Z", "updated_at": "2017-10-31T16:36:19Z", "closed_at": "2013-07-09T10:20:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` python\nimport locale\nfrom PIL import Image\n\nlocale.setlocale(locale.LC_ALL, \"polish\")\nim = Image.open('test.jpg')\n\nTraceback (most recent call last):\n  File \"E:\\DOWNLOADS\\jpegtran\\test.py\", line 6, in <module>\n    im = Image.open('test.jpg')\n  File \"G:\\Python27\\lib\\site-packages\\PIL\\Image.py\", line 1982, in open\n    preinit()\n  File \"G:\\Python27\\lib\\site-packages\\PIL\\Image.py\", line 300, in preinit\n    from PIL import PpmImagePlugin\n  File \"G:\\Python27\\lib\\site-packages\\PIL\\PpmImagePlugin.py\", line 27, in <module>\n    b_whitespace = string.whitespace.encode()\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xa0 in position 6: ordinal\nnot in range(128)\n```\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/272/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/258", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/258/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/258/events", "html_url": "https://github.com/python-pillow/Pillow/issues/258", "id": 16173193, "node_id": "MDU6SXNzdWUxNjE3MzE5Mw==", "number": 258, "title": "Bytes filenames should be accepted with Python 3", "user": {"login": "Arfrever", "id": 656294, "node_id": "MDQ6VXNlcjY1NjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/656294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arfrever", "html_url": "https://github.com/Arfrever", "followers_url": "https://api.github.com/users/Arfrever/followers", "following_url": "https://api.github.com/users/Arfrever/following{/other_user}", "gists_url": "https://api.github.com/users/Arfrever/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arfrever/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arfrever/subscriptions", "organizations_url": "https://api.github.com/users/Arfrever/orgs", "repos_url": "https://api.github.com/users/Arfrever/repos", "events_url": "https://api.github.com/users/Arfrever/events{/privacy}", "received_events_url": "https://api.github.com/users/Arfrever/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/1", "html_url": "https://github.com/python-pillow/Pillow/milestone/1", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/1/labels", "id": 306929, "node_id": "MDk6TWlsZXN0b25lMzA2OTI5", "number": 1, "title": "2.1.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2013-04-09T16:58:10Z", "updated_at": "2013-07-03T13:07:24Z", "due_on": "2013-06-30T07:00:00Z", "closed_at": "2013-07-03T13:07:24Z"}, "comments": 6, "created_at": "2013-06-29T09:57:00Z", "updated_at": "2013-06-30T19:18:39Z", "closed_at": "2013-06-30T19:18:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bytes filenames should be accepted with Python 3. They are accepted with Python 2. An application might want to use bytes filenames to avoid problems with undecodable characters.\n\n```\n$ python2.7 -c 'import PIL.Image; PIL.Image.open(b\"file.png\")'\n$ python3.3 -c 'import PIL.Image; PIL.Image.open(b\"file.png\")'\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\n  File \"/usr/lib64/python3.3/site-packages/PIL/Image.py\", line 1993, in open\n    prefix = fp.read(16)\nAttributeError: 'bytes' object has no attribute 'read'\n```\n\nAlso there is NameError in line 491 of PIL/JpegImagePlugin.py with Python 3.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/258/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/254", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/254/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/254/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/254/events", "html_url": "https://github.com/python-pillow/Pillow/issues/254", "id": 15815399, "node_id": "MDU6SXNzdWUxNTgxNTM5OQ==", "number": 254, "title": "Problem with MESH transform /w transparent background", "user": {"login": "nikmolnar", "id": 2422416, "node_id": "MDQ6VXNlcjI0MjI0MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/2422416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikmolnar", "html_url": "https://github.com/nikmolnar", "followers_url": "https://api.github.com/users/nikmolnar/followers", "following_url": "https://api.github.com/users/nikmolnar/following{/other_user}", "gists_url": "https://api.github.com/users/nikmolnar/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikmolnar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikmolnar/subscriptions", "organizations_url": "https://api.github.com/users/nikmolnar/orgs", "repos_url": "https://api.github.com/users/nikmolnar/repos", "events_url": "https://api.github.com/users/nikmolnar/events{/privacy}", "received_events_url": "https://api.github.com/users/nikmolnar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/2", "html_url": "https://github.com/python-pillow/Pillow/milestone/2", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/2/labels", "id": 335442, "node_id": "MDk6TWlsZXN0b25lMzM1NDQy", "number": 2, "title": "2.2.0", "description": "", "creator": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2013-05-16T19:51:06Z", "updated_at": "2013-11-14T13:47:58Z", "due_on": "2013-10-01T07:00:00Z", "closed_at": "2013-11-14T13:47:58Z"}, "comments": 8, "created_at": "2013-06-20T18:28:42Z", "updated_at": "2013-10-02T10:27:11Z", "closed_at": "2013-10-02T10:27:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This may apply to other transformations as well, but I've specifically observed it using the MESH transform.\n\nThe problem is that when performing multiple transformations, \"garbage\" from previous transformations begins appearing in the image, as shown here:\n![image](https://f.cloud.github.com/assets/2422416/683030/4f00ae90-d9d6-11e2-8674-2f85b0edab9f.png)\n\nIn the above image, the image in the middle is the desired result... everything around it should be transparent, but is instead filled with the results of previous transform operations.\n\nI was eventually able to fix this by using `memset` to clear the memory allocated by `ImagingNewBlock` in `Storage.c`.\n\nI'd be happy to submit a fix for this, but I have two questions:\n1. Is this the appropriate solution?\n2. How would I write a test for this? It happens inconsistently, and the severity seems to vary between systems (e.g., on a micro AWS instance with 512MB of memory, it happens frequently, but on my development machine with 12GB of memory, I haven't observed it once).\n\nThanks,\n_Nik\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/254/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/226", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/226/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/226/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/226/events", "html_url": "https://github.com/python-pillow/Pillow/issues/226", "id": 14603463, "node_id": "MDU6SXNzdWUxNDYwMzQ2Mw==", "number": 226, "title": "Warnings suppressed in Python 2.7, 3.2, probably 3.3 on Travis", "user": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/1", "html_url": "https://github.com/python-pillow/Pillow/milestone/1", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/1/labels", "id": 306929, "node_id": "MDk6TWlsZXN0b25lMzA2OTI5", "number": 1, "title": "2.1.0", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2013-04-09T16:58:10Z", "updated_at": "2013-07-03T13:07:24Z", "due_on": "2013-06-30T07:00:00Z", "closed_at": "2013-07-03T13:07:24Z"}, "comments": 2, "created_at": "2013-05-22T04:15:54Z", "updated_at": "2013-05-22T16:28:37Z", "closed_at": "2013-05-22T16:28:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The initial commit for #224 only failed on Travis on Python 2.6. It should have failed across the board. It appears that warnings are being suppressed on everything but Python 2.6. \n\nUsing system python 2.7 on Ubuntu 12.04 (the same as the travis platform):\n\n```\nPython 2.7.3 (default, Aug  1 2012, 05:14:39) \n[GCC 4.6.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import warnings\n>>> warnings.warn('foo', DeprecationWarning, stacklevel=2)\n>>> \n```\n\nI got similar results on 3.2 as well. Python 2.6 (on 10.04) issues a warning as expected:\n\n```\nPython 2.6.5 (r265:79063, Oct  1 2012, 22:07:21) \n[GCC 4.4.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import warnings\n>>> warnings.warn('foo', DeprecationWarning, stacklevel=2)\nsys:1: DeprecationWarning: foo\n>>> \n```\n\nWe need to enable/unsuppress warnings on our travis system. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/226/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/192", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/192/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/192/events", "html_url": "https://github.com/python-pillow/Pillow/issues/192", "id": 13257126, "node_id": "MDU6SXNzdWUxMzI1NzEyNg==", "number": 192, "title": "EPS conversion issues", "user": {"login": "alecghica", "id": 1176874, "node_id": "MDQ6VXNlcjExNzY4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1176874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alecghica", "html_url": "https://github.com/alecghica", "followers_url": "https://api.github.com/users/alecghica/followers", "following_url": "https://api.github.com/users/alecghica/following{/other_user}", "gists_url": "https://api.github.com/users/alecghica/gists{/gist_id}", "starred_url": "https://api.github.com/users/alecghica/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alecghica/subscriptions", "organizations_url": "https://api.github.com/users/alecghica/orgs", "repos_url": "https://api.github.com/users/alecghica/repos", "events_url": "https://api.github.com/users/alecghica/events{/privacy}", "received_events_url": "https://api.github.com/users/alecghica/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2013-04-16T17:07:21Z", "updated_at": "2013-11-29T23:41:54Z", "closed_at": "2013-11-29T23:41:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "We currently use Pillow 1.7.7 having some patches for `EpsImagePlugin.py to` solve some use-cases of converting EPS files. See `EpsImagePlugin.py` and `__init__.py` under: http://taskman.eionet.europa.eu/projects/zope/repository/show/trunk/eea.dataservice/trunk/eea/dataservice/pil\n\nAlso we give it a try for Pillow 2.0 under Plone 4.2.5 but still the EPS conversion is not working.  See here the ticket we worked on: http://taskman.eionet.europa.eu/issues/14155\n\nAttached to http://taskman.eionet.europa.eu/issues/14155 ticket under _\"Related issues\"_ are some legacy tickets and one still open (http://taskman.eionet.europa.eu/issues/9263) also related to EPS conversion. \n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/148", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/148/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/148/events", "html_url": "https://github.com/python-pillow/Pillow/issues/148", "id": 12245881, "node_id": "MDU6SXNzdWUxMjI0NTg4MQ==", "number": 148, "title": "Automatic scaling of Image.MAXBLOCK", "user": {"login": "acdha", "id": 46565, "node_id": "MDQ6VXNlcjQ2NTY1", "avatar_url": "https://avatars.githubusercontent.com/u/46565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acdha", "html_url": "https://github.com/acdha", "followers_url": "https://api.github.com/users/acdha/followers", "following_url": "https://api.github.com/users/acdha/following{/other_user}", "gists_url": "https://api.github.com/users/acdha/gists{/gist_id}", "starred_url": "https://api.github.com/users/acdha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acdha/subscriptions", "organizations_url": "https://api.github.com/users/acdha/orgs", "repos_url": "https://api.github.com/users/acdha/repos", "events_url": "https://api.github.com/users/acdha/events{/privacy}", "received_events_url": "https://api.github.com/users/acdha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}, {"id": 485342677, "node_id": "MDU6TGFiZWw0ODUzNDI2Nzc=", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Hasn't%20worked%20in%2020%20years", "name": "Hasn't worked in 20 years", "color": "c5def5", "default": false, "description": null}, {"id": 1357122915, "node_id": "MDU6TGFiZWwxMzU3MTIyOTE1", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Memory", "name": "Memory", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wiredfool", "id": 19792, "node_id": "MDQ6VXNlcjE5Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/19792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiredfool", "html_url": "https://github.com/wiredfool", "followers_url": "https://api.github.com/users/wiredfool/followers", "following_url": "https://api.github.com/users/wiredfool/following{/other_user}", "gists_url": "https://api.github.com/users/wiredfool/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiredfool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiredfool/subscriptions", "organizations_url": "https://api.github.com/users/wiredfool/orgs", "repos_url": "https://api.github.com/users/wiredfool/repos", "events_url": "https://api.github.com/users/wiredfool/events{/privacy}", "received_events_url": "https://api.github.com/users/wiredfool/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 61, "created_at": "2013-03-20T20:07:27Z", "updated_at": "2021-04-27T21:59:53Z", "closed_at": "2019-05-11T13:47:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There's a venerable old PIL bug which caused `Image.save(optimize=True)` to fail with JPEGs when the file size is over a certain threshold. The earliest reference I could find dates back to 1999:\r\n\r\nhttp://mail.python.org/pipermail/image-sig/1999-December/000942.html\r\n\r\nThe workaround commonly used is to either hardcode something like this:\r\n\r\n```\r\nImageFile.MAXBLOCK = <empirically determined constant (i.e. wild guess)>\r\n```\r\n\r\nor the more dynamic approach used in e.g. jdriscoll/django-imagekit#50:\r\n\r\n```\r\nImageFile.MAXBLOCK = max(img.size) ** 2\r\n```\r\n\r\nThis seems like exactly the kind of thing Pillow could just fix once and for all.\r\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/66", "repository_url": "https://api.github.com/repos/python-pillow/Pillow", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/python-pillow/Pillow/issues/66/comments", "events_url": "https://api.github.com/repos/python-pillow/Pillow/issues/66/events", "html_url": "https://github.com/python-pillow/Pillow/issues/66", "id": 11716474, "node_id": "MDU6SXNzdWUxMTcxNjQ3NA==", "number": 66, "title": "Add correct alpha pre-multiplication handling", "user": {"login": "d-schmidt", "id": 3226483, "node_id": "MDQ6VXNlcjMyMjY0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/3226483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-schmidt", "html_url": "https://github.com/d-schmidt", "followers_url": "https://api.github.com/users/d-schmidt/followers", "following_url": "https://api.github.com/users/d-schmidt/following{/other_user}", "gists_url": "https://api.github.com/users/d-schmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-schmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-schmidt/subscriptions", "organizations_url": "https://api.github.com/users/d-schmidt/orgs", "repos_url": "https://api.github.com/users/d-schmidt/repos", "events_url": "https://api.github.com/users/d-schmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/d-schmidt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 10115804, "node_id": "MDU6TGFiZWwxMDExNTgwNA==", "url": "https://api.github.com/repos/python-pillow/Pillow/labels/Bug", "name": "Bug", "color": "fef2c0", "default": false, "description": "Any unexpected behavior, until confirmed feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4", "html_url": "https://github.com/python-pillow/Pillow/milestone/4", "labels_url": "https://api.github.com/repos/python-pillow/Pillow/milestones/4/labels", "id": 438495, "node_id": "MDk6TWlsZXN0b25lNDM4NDk1", "number": 4, "title": "Future", "description": "", "creator": {"login": "aclark4life", "id": 72164, "node_id": "MDQ6VXNlcjcyMTY0", "avatar_url": "https://avatars.githubusercontent.com/u/72164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aclark4life", "html_url": "https://github.com/aclark4life", "followers_url": "https://api.github.com/users/aclark4life/followers", "following_url": "https://api.github.com/users/aclark4life/following{/other_user}", "gists_url": "https://api.github.com/users/aclark4life/gists{/gist_id}", "starred_url": "https://api.github.com/users/aclark4life/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aclark4life/subscriptions", "organizations_url": "https://api.github.com/users/aclark4life/orgs", "repos_url": "https://api.github.com/users/aclark4life/repos", "events_url": "https://api.github.com/users/aclark4life/events{/privacy}", "received_events_url": "https://api.github.com/users/aclark4life/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 119, "state": "open", "created_at": "2013-09-27T11:40:09Z", "updated_at": "2023-04-06T09:10:45Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2013-03-06T15:10:24Z", "updated_at": "2014-06-18T20:38:26Z", "closed_at": "2013-10-07T11:09:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See http://stackoverflow.com/questions/13027169/scale-images-with-pil-preserving-transparency-and-color\n\nI will take a look into this when I've time. This issue should be fixed but is no block to a 2.0 release.\n", "reactions": {"url": "https://api.github.com/repos/python-pillow/Pillow/issues/66/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/python-pillow/Pillow/issues/66/timeline", "performed_via_github_app": null, "state_reason": "completed"}]